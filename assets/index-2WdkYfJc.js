function cg(a,p){for(var v=0;v<p.length;v++){const w=p[v];if(typeof w!="string"&&!Array.isArray(w)){for(const E in w)if(E!=="default"&&!(E in a)){const k=Object.getOwnPropertyDescriptor(w,E);k&&Object.defineProperty(a,E,k.get?k:{enumerable:!0,get:()=>w[E]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const p=document.createElement("link").relList;if(p&&p.supports&&p.supports("modulepreload"))return;for(const E of document.querySelectorAll('link[rel="modulepreload"]'))w(E);new MutationObserver(E=>{for(const k of E)if(k.type==="childList")for(const P of k.addedNodes)P.tagName==="LINK"&&P.rel==="modulepreload"&&w(P)}).observe(document,{childList:!0,subtree:!0});function v(E){const k={};return E.integrity&&(k.integrity=E.integrity),E.referrerPolicy&&(k.referrerPolicy=E.referrerPolicy),E.crossOrigin==="use-credentials"?k.credentials="include":E.crossOrigin==="anonymous"?k.credentials="omit":k.credentials="same-origin",k}function w(E){if(E.ep)return;E.ep=!0;const k=v(E);fetch(E.href,k)}})();function vp(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Vp={exports:{}},Jh={},Hp={exports:{}},pn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zf;function N0(){if(Zf)return pn;Zf=1;var a=Symbol.for("react.element"),p=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),P=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),N=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),$=Symbol.iterator;function U(ve){return ve===null||typeof ve!="object"?null:(ve=$&&ve[$]||ve["@@iterator"],typeof ve=="function"?ve:null)}var me={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},he=Object.assign,J={};function oe(ve,Ue,Mt){this.props=ve,this.context=Ue,this.refs=J,this.updater=Mt||me}oe.prototype.isReactComponent={},oe.prototype.setState=function(ve,Ue){if(typeof ve!="object"&&typeof ve!="function"&&ve!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ve,Ue,"setState")},oe.prototype.forceUpdate=function(ve){this.updater.enqueueForceUpdate(this,ve,"forceUpdate")};function _e(){}_e.prototype=oe.prototype;function ke(ve,Ue,Mt){this.props=ve,this.context=Ue,this.refs=J,this.updater=Mt||me}var Ee=ke.prototype=new _e;Ee.constructor=ke,he(Ee,oe.prototype),Ee.isPureReactComponent=!0;var Ve=Array.isArray,Me=Object.prototype.hasOwnProperty,tt={current:null},it={key:!0,ref:!0,__self:!0,__source:!0};function Ge(ve,Ue,Mt){var gt,bt={},zt=null,Kt=null;if(Ue!=null)for(gt in Ue.ref!==void 0&&(Kt=Ue.ref),Ue.key!==void 0&&(zt=""+Ue.key),Ue)Me.call(Ue,gt)&&!it.hasOwnProperty(gt)&&(bt[gt]=Ue[gt]);var Yt=arguments.length-2;if(Yt===1)bt.children=Mt;else if(1<Yt){for(var Ft=Array(Yt),An=0;An<Yt;An++)Ft[An]=arguments[An+2];bt.children=Ft}if(ve&&ve.defaultProps)for(gt in Yt=ve.defaultProps,Yt)bt[gt]===void 0&&(bt[gt]=Yt[gt]);return{$$typeof:a,type:ve,key:zt,ref:Kt,props:bt,_owner:tt.current}}function kt(ve,Ue){return{$$typeof:a,type:ve.type,key:Ue,ref:ve.ref,props:ve.props,_owner:ve._owner}}function _t(ve){return typeof ve=="object"&&ve!==null&&ve.$$typeof===a}function Ct(ve){var Ue={"=":"=0",":":"=2"};return"$"+ve.replace(/[=:]/g,function(Mt){return Ue[Mt]})}var Rt=/\/+/g;function At(ve,Ue){return typeof ve=="object"&&ve!==null&&ve.key!=null?Ct(""+ve.key):Ue.toString(36)}function mt(ve,Ue,Mt,gt,bt){var zt=typeof ve;(zt==="undefined"||zt==="boolean")&&(ve=null);var Kt=!1;if(ve===null)Kt=!0;else switch(zt){case"string":case"number":Kt=!0;break;case"object":switch(ve.$$typeof){case a:case p:Kt=!0}}if(Kt)return Kt=ve,bt=bt(Kt),ve=gt===""?"."+At(Kt,0):gt,Ve(bt)?(Mt="",ve!=null&&(Mt=ve.replace(Rt,"$&/")+"/"),mt(bt,Ue,Mt,"",function(An){return An})):bt!=null&&(_t(bt)&&(bt=kt(bt,Mt+(!bt.key||Kt&&Kt.key===bt.key?"":(""+bt.key).replace(Rt,"$&/")+"/")+ve)),Ue.push(bt)),1;if(Kt=0,gt=gt===""?".":gt+":",Ve(ve))for(var Yt=0;Yt<ve.length;Yt++){zt=ve[Yt];var Ft=gt+At(zt,Yt);Kt+=mt(zt,Ue,Mt,Ft,bt)}else if(Ft=U(ve),typeof Ft=="function")for(ve=Ft.call(ve),Yt=0;!(zt=ve.next()).done;)zt=zt.value,Ft=gt+At(zt,Yt++),Kt+=mt(zt,Ue,Mt,Ft,bt);else if(zt==="object")throw Ue=String(ve),Error("Objects are not valid as a React child (found: "+(Ue==="[object Object]"?"object with keys {"+Object.keys(ve).join(", ")+"}":Ue)+"). If you meant to render a collection of children, use an array instead.");return Kt}function Pt(ve,Ue,Mt){if(ve==null)return ve;var gt=[],bt=0;return mt(ve,gt,"","",function(zt){return Ue.call(Mt,zt,bt++)}),gt}function Xe(ve){if(ve._status===-1){var Ue=ve._result;Ue=Ue(),Ue.then(function(Mt){(ve._status===0||ve._status===-1)&&(ve._status=1,ve._result=Mt)},function(Mt){(ve._status===0||ve._status===-1)&&(ve._status=2,ve._result=Mt)}),ve._status===-1&&(ve._status=0,ve._result=Ue)}if(ve._status===1)return ve._result.default;throw ve._result}var It={current:null},We={transition:null},lt={ReactCurrentDispatcher:It,ReactCurrentBatchConfig:We,ReactCurrentOwner:tt};function nt(){throw Error("act(...) is not supported in production builds of React.")}return pn.Children={map:Pt,forEach:function(ve,Ue,Mt){Pt(ve,function(){Ue.apply(this,arguments)},Mt)},count:function(ve){var Ue=0;return Pt(ve,function(){Ue++}),Ue},toArray:function(ve){return Pt(ve,function(Ue){return Ue})||[]},only:function(ve){if(!_t(ve))throw Error("React.Children.only expected to receive a single React element child.");return ve}},pn.Component=oe,pn.Fragment=v,pn.Profiler=E,pn.PureComponent=ke,pn.StrictMode=w,pn.Suspense=F,pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lt,pn.act=nt,pn.cloneElement=function(ve,Ue,Mt){if(ve==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ve+".");var gt=he({},ve.props),bt=ve.key,zt=ve.ref,Kt=ve._owner;if(Ue!=null){if(Ue.ref!==void 0&&(zt=Ue.ref,Kt=tt.current),Ue.key!==void 0&&(bt=""+Ue.key),ve.type&&ve.type.defaultProps)var Yt=ve.type.defaultProps;for(Ft in Ue)Me.call(Ue,Ft)&&!it.hasOwnProperty(Ft)&&(gt[Ft]=Ue[Ft]===void 0&&Yt!==void 0?Yt[Ft]:Ue[Ft])}var Ft=arguments.length-2;if(Ft===1)gt.children=Mt;else if(1<Ft){Yt=Array(Ft);for(var An=0;An<Ft;An++)Yt[An]=arguments[An+2];gt.children=Yt}return{$$typeof:a,type:ve.type,key:bt,ref:zt,props:gt,_owner:Kt}},pn.createContext=function(ve){return ve={$$typeof:P,_currentValue:ve,_currentValue2:ve,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ve.Provider={$$typeof:k,_context:ve},ve.Consumer=ve},pn.createElement=Ge,pn.createFactory=function(ve){var Ue=Ge.bind(null,ve);return Ue.type=ve,Ue},pn.createRef=function(){return{current:null}},pn.forwardRef=function(ve){return{$$typeof:c,render:ve}},pn.isValidElement=_t,pn.lazy=function(ve){return{$$typeof:V,_payload:{_status:-1,_result:ve},_init:Xe}},pn.memo=function(ve,Ue){return{$$typeof:N,type:ve,compare:Ue===void 0?null:Ue}},pn.startTransition=function(ve){var Ue=We.transition;We.transition={};try{ve()}finally{We.transition=Ue}},pn.unstable_act=nt,pn.useCallback=function(ve,Ue){return It.current.useCallback(ve,Ue)},pn.useContext=function(ve){return It.current.useContext(ve)},pn.useDebugValue=function(){},pn.useDeferredValue=function(ve){return It.current.useDeferredValue(ve)},pn.useEffect=function(ve,Ue){return It.current.useEffect(ve,Ue)},pn.useId=function(){return It.current.useId()},pn.useImperativeHandle=function(ve,Ue,Mt){return It.current.useImperativeHandle(ve,Ue,Mt)},pn.useInsertionEffect=function(ve,Ue){return It.current.useInsertionEffect(ve,Ue)},pn.useLayoutEffect=function(ve,Ue){return It.current.useLayoutEffect(ve,Ue)},pn.useMemo=function(ve,Ue){return It.current.useMemo(ve,Ue)},pn.useReducer=function(ve,Ue,Mt){return It.current.useReducer(ve,Ue,Mt)},pn.useRef=function(ve){return It.current.useRef(ve)},pn.useState=function(ve){return It.current.useState(ve)},pn.useSyncExternalStore=function(ve,Ue,Mt){return It.current.useSyncExternalStore(ve,Ue,Mt)},pn.useTransition=function(){return It.current.useTransition()},pn.version="18.3.1",pn}var Xf;function ad(){return Xf||(Xf=1,Hp.exports=N0()),Hp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kf;function B0(){if(Kf)return Jh;Kf=1;var a=ad(),p=Symbol.for("react.element"),v=Symbol.for("react.fragment"),w=Object.prototype.hasOwnProperty,E=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,k={key:!0,ref:!0,__self:!0,__source:!0};function P(c,F,N){var V,$={},U=null,me=null;N!==void 0&&(U=""+N),F.key!==void 0&&(U=""+F.key),F.ref!==void 0&&(me=F.ref);for(V in F)w.call(F,V)&&!k.hasOwnProperty(V)&&($[V]=F[V]);if(c&&c.defaultProps)for(V in F=c.defaultProps,F)$[V]===void 0&&($[V]=F[V]);return{$$typeof:p,type:c,key:U,ref:me,props:$,_owner:E.current}}return Jh.Fragment=v,Jh.jsx=P,Jh.jsxs=P,Jh}var Jf;function F0(){return Jf||(Jf=1,Vp.exports=B0()),Vp.exports}var y=F0(),ee=ad();const ed=vp(ee),O0=cg({__proto__:null,default:ed},[ee]);var rp={},Gp={exports:{}},Fi={},qp={exports:{}},Wp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yf;function $0(){return Yf||(Yf=1,function(a){function p(We,lt){var nt=We.length;We.push(lt);e:for(;0<nt;){var ve=nt-1>>>1,Ue=We[ve];if(0<E(Ue,lt))We[ve]=lt,We[nt]=Ue,nt=ve;else break e}}function v(We){return We.length===0?null:We[0]}function w(We){if(We.length===0)return null;var lt=We[0],nt=We.pop();if(nt!==lt){We[0]=nt;e:for(var ve=0,Ue=We.length,Mt=Ue>>>1;ve<Mt;){var gt=2*(ve+1)-1,bt=We[gt],zt=gt+1,Kt=We[zt];if(0>E(bt,nt))zt<Ue&&0>E(Kt,bt)?(We[ve]=Kt,We[zt]=nt,ve=zt):(We[ve]=bt,We[gt]=nt,ve=gt);else if(zt<Ue&&0>E(Kt,nt))We[ve]=Kt,We[zt]=nt,ve=zt;else break e}}return lt}function E(We,lt){var nt=We.sortIndex-lt.sortIndex;return nt!==0?nt:We.id-lt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var k=performance;a.unstable_now=function(){return k.now()}}else{var P=Date,c=P.now();a.unstable_now=function(){return P.now()-c}}var F=[],N=[],V=1,$=null,U=3,me=!1,he=!1,J=!1,oe=typeof setTimeout=="function"?setTimeout:null,_e=typeof clearTimeout=="function"?clearTimeout:null,ke=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Ee(We){for(var lt=v(N);lt!==null;){if(lt.callback===null)w(N);else if(lt.startTime<=We)w(N),lt.sortIndex=lt.expirationTime,p(F,lt);else break;lt=v(N)}}function Ve(We){if(J=!1,Ee(We),!he)if(v(F)!==null)he=!0,Xe(Me);else{var lt=v(N);lt!==null&&It(Ve,lt.startTime-We)}}function Me(We,lt){he=!1,J&&(J=!1,_e(Ge),Ge=-1),me=!0;var nt=U;try{for(Ee(lt),$=v(F);$!==null&&(!($.expirationTime>lt)||We&&!Ct());){var ve=$.callback;if(typeof ve=="function"){$.callback=null,U=$.priorityLevel;var Ue=ve($.expirationTime<=lt);lt=a.unstable_now(),typeof Ue=="function"?$.callback=Ue:$===v(F)&&w(F),Ee(lt)}else w(F);$=v(F)}if($!==null)var Mt=!0;else{var gt=v(N);gt!==null&&It(Ve,gt.startTime-lt),Mt=!1}return Mt}finally{$=null,U=nt,me=!1}}var tt=!1,it=null,Ge=-1,kt=5,_t=-1;function Ct(){return!(a.unstable_now()-_t<kt)}function Rt(){if(it!==null){var We=a.unstable_now();_t=We;var lt=!0;try{lt=it(!0,We)}finally{lt?At():(tt=!1,it=null)}}else tt=!1}var At;if(typeof ke=="function")At=function(){ke(Rt)};else if(typeof MessageChannel<"u"){var mt=new MessageChannel,Pt=mt.port2;mt.port1.onmessage=Rt,At=function(){Pt.postMessage(null)}}else At=function(){oe(Rt,0)};function Xe(We){it=We,tt||(tt=!0,At())}function It(We,lt){Ge=oe(function(){We(a.unstable_now())},lt)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(We){We.callback=null},a.unstable_continueExecution=function(){he||me||(he=!0,Xe(Me))},a.unstable_forceFrameRate=function(We){0>We||125<We?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):kt=0<We?Math.floor(1e3/We):5},a.unstable_getCurrentPriorityLevel=function(){return U},a.unstable_getFirstCallbackNode=function(){return v(F)},a.unstable_next=function(We){switch(U){case 1:case 2:case 3:var lt=3;break;default:lt=U}var nt=U;U=lt;try{return We()}finally{U=nt}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(We,lt){switch(We){case 1:case 2:case 3:case 4:case 5:break;default:We=3}var nt=U;U=We;try{return lt()}finally{U=nt}},a.unstable_scheduleCallback=function(We,lt,nt){var ve=a.unstable_now();switch(typeof nt=="object"&&nt!==null?(nt=nt.delay,nt=typeof nt=="number"&&0<nt?ve+nt:ve):nt=ve,We){case 1:var Ue=-1;break;case 2:Ue=250;break;case 5:Ue=1073741823;break;case 4:Ue=1e4;break;default:Ue=5e3}return Ue=nt+Ue,We={id:V++,callback:lt,priorityLevel:We,startTime:nt,expirationTime:Ue,sortIndex:-1},nt>ve?(We.sortIndex=nt,p(N,We),v(F)===null&&We===v(N)&&(J?(_e(Ge),Ge=-1):J=!0,It(Ve,nt-ve))):(We.sortIndex=Ue,p(F,We),he||me||(he=!0,Xe(Me))),We},a.unstable_shouldYield=Ct,a.unstable_wrapCallback=function(We){var lt=U;return function(){var nt=U;U=lt;try{return We.apply(this,arguments)}finally{U=nt}}}}(Wp)),Wp}var Qf;function U0(){return Qf||(Qf=1,qp.exports=$0()),qp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var em;function V0(){if(em)return Fi;em=1;var a=ad(),p=U0();function v(e){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+e,l=1;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var w=new Set,E={};function k(e,r){P(e,r),P(e+"Capture",r)}function P(e,r){for(E[e]=r,e=0;e<r.length;e++)w.add(r[e])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),F=Object.prototype.hasOwnProperty,N=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,V={},$={};function U(e){return F.call($,e)?!0:F.call(V,e)?!1:N.test(e)?$[e]=!0:(V[e]=!0,!1)}function me(e,r,l,d){if(l!==null&&l.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return d?!1:l!==null?!l.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function he(e,r,l,d){if(r===null||typeof r>"u"||me(e,r,l,d))return!0;if(d)return!1;if(l!==null)switch(l.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function J(e,r,l,d,x,S,M){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=d,this.attributeNamespace=x,this.mustUseProperty=l,this.propertyName=e,this.type=r,this.sanitizeURL=S,this.removeEmptyString=M}var oe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){oe[e]=new J(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var r=e[0];oe[r]=new J(r,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){oe[e]=new J(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){oe[e]=new J(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){oe[e]=new J(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){oe[e]=new J(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){oe[e]=new J(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){oe[e]=new J(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){oe[e]=new J(e,5,!1,e.toLowerCase(),null,!1,!1)});var _e=/[\-:]([a-z])/g;function ke(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var r=e.replace(_e,ke);oe[r]=new J(r,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var r=e.replace(_e,ke);oe[r]=new J(r,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var r=e.replace(_e,ke);oe[r]=new J(r,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){oe[e]=new J(e,1,!1,e.toLowerCase(),null,!1,!1)}),oe.xlinkHref=new J("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){oe[e]=new J(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ee(e,r,l,d){var x=oe.hasOwnProperty(r)?oe[r]:null;(x!==null?x.type!==0:d||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(he(r,l,x,d)&&(l=null),d||x===null?U(r)&&(l===null?e.removeAttribute(r):e.setAttribute(r,""+l)):x.mustUseProperty?e[x.propertyName]=l===null?x.type===3?!1:"":l:(r=x.attributeName,d=x.attributeNamespace,l===null?e.removeAttribute(r):(x=x.type,l=x===3||x===4&&l===!0?"":""+l,d?e.setAttributeNS(d,r,l):e.setAttribute(r,l))))}var Ve=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Me=Symbol.for("react.element"),tt=Symbol.for("react.portal"),it=Symbol.for("react.fragment"),Ge=Symbol.for("react.strict_mode"),kt=Symbol.for("react.profiler"),_t=Symbol.for("react.provider"),Ct=Symbol.for("react.context"),Rt=Symbol.for("react.forward_ref"),At=Symbol.for("react.suspense"),mt=Symbol.for("react.suspense_list"),Pt=Symbol.for("react.memo"),Xe=Symbol.for("react.lazy"),It=Symbol.for("react.offscreen"),We=Symbol.iterator;function lt(e){return e===null||typeof e!="object"?null:(e=We&&e[We]||e["@@iterator"],typeof e=="function"?e:null)}var nt=Object.assign,ve;function Ue(e){if(ve===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);ve=r&&r[1]||""}return`
`+ve+e}var Mt=!1;function gt(e,r){if(!e||Mt)return"";Mt=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(O){var d=O}Reflect.construct(e,[],r)}else{try{r.call()}catch(O){d=O}e.call(r.prototype)}else{try{throw Error()}catch(O){d=O}e()}}catch(O){if(O&&d&&typeof O.stack=="string"){for(var x=O.stack.split(`
`),S=d.stack.split(`
`),M=x.length-1,A=S.length-1;1<=M&&0<=A&&x[M]!==S[A];)A--;for(;1<=M&&0<=A;M--,A--)if(x[M]!==S[A]){if(M!==1||A!==1)do if(M--,A--,0>A||x[M]!==S[A]){var L=`
`+x[M].replace(" at new "," at ");return e.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",e.displayName)),L}while(1<=M&&0<=A);break}}}finally{Mt=!1,Error.prepareStackTrace=l}return(e=e?e.displayName||e.name:"")?Ue(e):""}function bt(e){switch(e.tag){case 5:return Ue(e.type);case 16:return Ue("Lazy");case 13:return Ue("Suspense");case 19:return Ue("SuspenseList");case 0:case 2:case 15:return e=gt(e.type,!1),e;case 11:return e=gt(e.type.render,!1),e;case 1:return e=gt(e.type,!0),e;default:return""}}function zt(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case it:return"Fragment";case tt:return"Portal";case kt:return"Profiler";case Ge:return"StrictMode";case At:return"Suspense";case mt:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ct:return(e.displayName||"Context")+".Consumer";case _t:return(e._context.displayName||"Context")+".Provider";case Rt:var r=e.render;return e=e.displayName,e||(e=r.displayName||r.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Pt:return r=e.displayName||null,r!==null?r:zt(e.type)||"Memo";case Xe:r=e._payload,e=e._init;try{return zt(e(r))}catch{}}return null}function Kt(e){var r=e.type;switch(e.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=r.render,e=e.displayName||e.name||"",r.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zt(r);case 8:return r===Ge?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Yt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ft(e){var r=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function An(e){var r=Ft(e)?"checked":"value",l=Object.getOwnPropertyDescriptor(e.constructor.prototype,r),d=""+e[r];if(!e.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var x=l.get,S=l.set;return Object.defineProperty(e,r,{configurable:!0,get:function(){return x.call(this)},set:function(M){d=""+M,S.call(this,M)}}),Object.defineProperty(e,r,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(M){d=""+M},stopTracking:function(){e._valueTracker=null,delete e[r]}}}}function br(e){e._valueTracker||(e._valueTracker=An(e))}function nr(e){if(!e)return!1;var r=e._valueTracker;if(!r)return!0;var l=r.getValue(),d="";return e&&(d=Ft(e)?e.checked?"true":"false":e.value),e=d,e!==l?(r.setValue(e),!0):!1}function Rn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function si(e,r){var l=r.checked;return nt({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??e._wrapperState.initialChecked})}function Je(e,r){var l=r.defaultValue==null?"":r.defaultValue,d=r.checked!=null?r.checked:r.defaultChecked;l=Yt(r.value!=null?r.value:l),e._wrapperState={initialChecked:d,initialValue:l,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Qe(e,r){r=r.checked,r!=null&&Ee(e,"checked",r,!1)}function Ot(e,r){Qe(e,r);var l=Yt(r.value),d=r.type;if(l!=null)d==="number"?(l===0&&e.value===""||e.value!=l)&&(e.value=""+l):e.value!==""+l&&(e.value=""+l);else if(d==="submit"||d==="reset"){e.removeAttribute("value");return}r.hasOwnProperty("value")?dt(e,r.type,l):r.hasOwnProperty("defaultValue")&&dt(e,r.type,Yt(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(e.defaultChecked=!!r.defaultChecked)}function ln(e,r,l){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var d=r.type;if(!(d!=="submit"&&d!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+e._wrapperState.initialValue,l||r===e.value||(e.value=r),e.defaultValue=r}l=e.name,l!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,l!==""&&(e.name=l)}function dt(e,r,l){(r!=="number"||Rn(e.ownerDocument)!==e)&&(l==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+l&&(e.defaultValue=""+l))}var tn=Array.isArray;function Sr(e,r,l,d){if(e=e.options,r){r={};for(var x=0;x<l.length;x++)r["$"+l[x]]=!0;for(l=0;l<e.length;l++)x=r.hasOwnProperty("$"+e[l].value),e[l].selected!==x&&(e[l].selected=x),x&&d&&(e[l].defaultSelected=!0)}else{for(l=""+Yt(l),r=null,x=0;x<e.length;x++){if(e[x].value===l){e[x].selected=!0,d&&(e[x].defaultSelected=!0);return}r!==null||e[x].disabled||(r=e[x])}r!==null&&(r.selected=!0)}}function Sn(e,r){if(r.dangerouslySetInnerHTML!=null)throw Error(v(91));return nt({},r,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function rr(e,r){var l=r.value;if(l==null){if(l=r.children,r=r.defaultValue,l!=null){if(r!=null)throw Error(v(92));if(tn(l)){if(1<l.length)throw Error(v(93));l=l[0]}r=l}r==null&&(r=""),l=r}e._wrapperState={initialValue:Yt(l)}}function On(e,r){var l=Yt(r.value),d=Yt(r.defaultValue);l!=null&&(l=""+l,l!==e.value&&(e.value=l),r.defaultValue==null&&e.defaultValue!==l&&(e.defaultValue=l)),d!=null&&(e.defaultValue=""+d)}function Fr(e){var r=e.textContent;r===e._wrapperState.initialValue&&r!==""&&r!==null&&(e.value=r)}function Hr(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Le(e,r){return e==null||e==="http://www.w3.org/1999/xhtml"?Hr(r):e==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ze,Er=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,l,d,x){MSApp.execUnsafeLocalFunction(function(){return e(r,l,d,x)})}:e}(function(e,r){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=r;else{for(Ze=Ze||document.createElement("div"),Ze.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Ze.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;r.firstChild;)e.appendChild(r.firstChild)}});function ir(e,r){if(r){var l=e.firstChild;if(l&&l===e.lastChild&&l.nodeType===3){l.nodeValue=r;return}}e.textContent=r}var dn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},En=["Webkit","ms","Moz","O"];Object.keys(dn).forEach(function(e){En.forEach(function(r){r=r+e.charAt(0).toUpperCase()+e.substring(1),dn[r]=dn[e]})});function Qn(e,r,l){return r==null||typeof r=="boolean"||r===""?"":l||typeof r!="number"||r===0||dn.hasOwnProperty(e)&&dn[e]?(""+r).trim():r+"px"}function ai(e,r){e=e.style;for(var l in r)if(r.hasOwnProperty(l)){var d=l.indexOf("--")===0,x=Qn(l,r[l],d);l==="float"&&(l="cssFloat"),d?e.setProperty(l,x):e[l]=x}}var fr=nt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ye(e,r){if(r){if(fr[e]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(v(137,e));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(v(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(v(61))}if(r.style!=null&&typeof r.style!="object")throw Error(v(62))}}function Bt(e,r){if(e.indexOf("-")===-1)return typeof r.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jt=null;function er(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var lr=null,Lt=null,or=null;function Gr(e){if(e=z(e)){if(typeof lr!="function")throw Error(v(280));var r=e.stateNode;r&&(r=B(r),lr(e.stateNode,e.type,r))}}function Ne(e){Lt?or?or.push(e):or=[e]:Lt=e}function St(){if(Lt){var e=Lt,r=or;if(or=Lt=null,Gr(e),r)for(e=0;e<r.length;e++)Gr(r[e])}}function $t(e,r){return e(r)}function mn(){}var yi=!1;function Tr(e,r,l){if(yi)return e(r,l);yi=!0;try{return $t(e,r,l)}finally{yi=!1,(Lt!==null||or!==null)&&(mn(),St())}}function li(e,r){var l=e.stateNode;if(l===null)return null;var d=B(l);if(d===null)return null;l=d[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(e=e.type,d=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!d;break e;default:e=!1}if(e)return null;if(l&&typeof l!="function")throw Error(v(231,r,typeof l));return l}var vi=!1;if(c)try{var Vi={};Object.defineProperty(Vi,"passive",{get:function(){vi=!0}}),window.addEventListener("test",Vi,Vi),window.removeEventListener("test",Vi,Vi)}catch{vi=!1}function sa(e,r,l,d,x,S,M,A,L){var O=Array.prototype.slice.call(arguments,3);try{r.apply(l,O)}catch(q){this.onError(q)}}var Kr=!1,W=null,j=!1,D=null,G={onError:function(e){Kr=!0,W=e}};function K(e,r,l,d,x,S,M,A,L){Kr=!1,W=null,sa.apply(G,arguments)}function ae(e,r,l,d,x,S,M,A,L){if(K.apply(this,arguments),Kr){if(Kr){var O=W;Kr=!1,W=null}else throw Error(v(198));j||(j=!0,D=O)}}function pe(e){var r=e,l=e;if(e.alternate)for(;r.return;)r=r.return;else{e=r;do r=e,(r.flags&4098)!==0&&(l=r.return),e=r.return;while(e)}return r.tag===3?l:null}function de(e){if(e.tag===13){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function le(e){if(pe(e)!==e)throw Error(v(188))}function ye(e){var r=e.alternate;if(!r){if(r=pe(e),r===null)throw Error(v(188));return r!==e?null:e}for(var l=e,d=r;;){var x=l.return;if(x===null)break;var S=x.alternate;if(S===null){if(d=x.return,d!==null){l=d;continue}break}if(x.child===S.child){for(S=x.child;S;){if(S===l)return le(x),e;if(S===d)return le(x),r;S=S.sibling}throw Error(v(188))}if(l.return!==d.return)l=x,d=S;else{for(var M=!1,A=x.child;A;){if(A===l){M=!0,l=x,d=S;break}if(A===d){M=!0,d=x,l=S;break}A=A.sibling}if(!M){for(A=S.child;A;){if(A===l){M=!0,l=S,d=x;break}if(A===d){M=!0,d=S,l=x;break}A=A.sibling}if(!M)throw Error(v(189))}}if(l.alternate!==d)throw Error(v(190))}if(l.tag!==3)throw Error(v(188));return l.stateNode.current===l?e:r}function Ae(e){return e=ye(e),e!==null?$e(e):null}function $e(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var r=$e(e);if(r!==null)return r;e=e.sibling}return null}var Oe=p.unstable_scheduleCallback,pt=p.unstable_cancelCallback,ct=p.unstable_shouldYield,yt=p.unstable_requestPaint,ot=p.unstable_now,qt=p.unstable_getCurrentPriorityLevel,Wt=p.unstable_ImmediatePriority,Zt=p.unstable_UserBlockingPriority,Ut=p.unstable_NormalPriority,Vt=p.unstable_LowPriority,$n=p.unstable_IdlePriority,Ln=null,bn=null;function mr(e){if(bn&&typeof bn.onCommitFiberRoot=="function")try{bn.onCommitFiberRoot(Ln,e,void 0,(e.current.flags&128)===128)}catch{}}var Jr=Math.clz32?Math.clz32:ch,aa=Math.log,vn=Math.LN2;function ch(e){return e>>>=0,e===0?32:31-(aa(e)/vn|0)|0}var Go=64,il=4194304;function qo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function la(e,r){var l=e.pendingLanes;if(l===0)return 0;var d=0,x=e.suspendedLanes,S=e.pingedLanes,M=l&268435455;if(M!==0){var A=M&~x;A!==0?d=qo(A):(S&=M,S!==0&&(d=qo(S)))}else M=l&~x,M!==0?d=qo(M):S!==0&&(d=qo(S));if(d===0)return 0;if(r!==0&&r!==d&&(r&x)===0&&(x=d&-d,S=r&-r,x>=S||x===16&&(S&4194240)!==0))return r;if((d&4)!==0&&(d|=l&16),r=e.entangledLanes,r!==0)for(e=e.entanglements,r&=d;0<r;)l=31-Jr(r),x=1<<l,d|=e[l],r&=~x;return d}function sc(e,r){switch(e){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ac(e,r){for(var l=e.suspendedLanes,d=e.pingedLanes,x=e.expirationTimes,S=e.pendingLanes;0<S;){var M=31-Jr(S),A=1<<M,L=x[M];L===-1?((A&l)===0||(A&d)!==0)&&(x[M]=sc(A,r)):L<=r&&(e.expiredLanes|=A),S&=~A}}function ca(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function lc(){var e=Go;return Go<<=1,(Go&4194240)===0&&(Go=64),e}function ol(e){for(var r=[],l=0;31>l;l++)r.push(e);return r}function xi(e,r,l){e.pendingLanes|=r,r!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,r=31-Jr(r),e[r]=l}function sl(e,r){var l=e.pendingLanes&~r;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=r,e.mutableReadLanes&=r,e.entangledLanes&=r,r=e.entanglements;var d=e.eventTimes;for(e=e.expirationTimes;0<l;){var x=31-Jr(l),S=1<<x;r[x]=0,d[x]=-1,e[x]=-1,l&=~S}}function uo(e,r){var l=e.entangledLanes|=r;for(e=e.entanglements;l;){var d=31-Jr(l),x=1<<d;x&r|e[d]&r&&(e[d]|=r),l&=~x}}var fn=0;function ua(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var ha,Wo,da,xs,zn,Zo=!1,_s=[],Hi=null,Gi=null,_i=null,Xo=new Map,pa=new Map,ho=[],cc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function al(e,r){switch(e){case"focusin":case"focusout":Hi=null;break;case"dragenter":case"dragleave":Gi=null;break;case"mouseover":case"mouseout":_i=null;break;case"pointerover":case"pointerout":Xo.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":pa.delete(r.pointerId)}}function Ko(e,r,l,d,x,S){return e===null||e.nativeEvent!==S?(e={blockedOn:r,domEventName:l,eventSystemFlags:d,nativeEvent:S,targetContainers:[x]},r!==null&&(r=z(r),r!==null&&Wo(r)),e):(e.eventSystemFlags|=d,r=e.targetContainers,x!==null&&r.indexOf(x)===-1&&r.push(x),e)}function uc(e,r,l,d,x){switch(r){case"focusin":return Hi=Ko(Hi,e,r,l,d,x),!0;case"dragenter":return Gi=Ko(Gi,e,r,l,d,x),!0;case"mouseover":return _i=Ko(_i,e,r,l,d,x),!0;case"pointerover":var S=x.pointerId;return Xo.set(S,Ko(Xo.get(S)||null,e,r,l,d,x)),!0;case"gotpointercapture":return S=x.pointerId,pa.set(S,Ko(pa.get(S)||null,e,r,l,d,x)),!0}return!1}function hc(e){var r=I(e.target);if(r!==null){var l=pe(r);if(l!==null){if(r=l.tag,r===13){if(r=de(l),r!==null){e.blockedOn=r,zn(e.priority,function(){da(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){e.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}e.blockedOn=null}function un(e){if(e.blockedOn!==null)return!1;for(var r=e.targetContainers;0<r.length;){var l=Es(e.domEventName,e.eventSystemFlags,r[0],e.nativeEvent);if(l===null){l=e.nativeEvent;var d=new l.constructor(l.type,l);jt=d,l.target.dispatchEvent(d),jt=null}else return r=z(l),r!==null&&Wo(r),e.blockedOn=l,!1;r.shift()}return!0}function cu(e,r,l){un(e)&&l.delete(r)}function fa(){Zo=!1,Hi!==null&&un(Hi)&&(Hi=null),Gi!==null&&un(Gi)&&(Gi=null),_i!==null&&un(_i)&&(_i=null),Xo.forEach(cu),pa.forEach(cu)}function qi(e,r){e.blockedOn===r&&(e.blockedOn=null,Zo||(Zo=!0,p.unstable_scheduleCallback(p.unstable_NormalPriority,fa)))}function ws(e){function r(x){return qi(x,e)}if(0<_s.length){qi(_s[0],e);for(var l=1;l<_s.length;l++){var d=_s[l];d.blockedOn===e&&(d.blockedOn=null)}}for(Hi!==null&&qi(Hi,e),Gi!==null&&qi(Gi,e),_i!==null&&qi(_i,e),Xo.forEach(r),pa.forEach(r),l=0;l<ho.length;l++)d=ho[l],d.blockedOn===e&&(d.blockedOn=null);for(;0<ho.length&&(l=ho[0],l.blockedOn===null);)hc(l),l.blockedOn===null&&ho.shift()}var cr=Ve.ReactCurrentBatchConfig,bs=!0;function ll(e,r,l,d){var x=fn,S=cr.transition;cr.transition=null;try{fn=1,ma(e,r,l,d)}finally{fn=x,cr.transition=S}}function cl(e,r,l,d){var x=fn,S=cr.transition;cr.transition=null;try{fn=4,ma(e,r,l,d)}finally{fn=x,cr.transition=S}}function ma(e,r,l,d){if(bs){var x=Es(e,r,l,d);if(x===null)Cl(e,r,d,Ss,l),al(e,d);else if(uc(x,e,r,l,d))d.stopPropagation();else if(al(e,d),r&4&&-1<cc.indexOf(e)){for(;x!==null;){var S=z(x);if(S!==null&&ha(S),S=Es(e,r,l,d),S===null&&Cl(e,r,d,Ss,l),S===x)break;x=S}x!==null&&d.stopPropagation()}else Cl(e,r,d,null,l)}}var Ss=null;function Es(e,r,l,d){if(Ss=null,e=er(d),e=I(e),e!==null)if(r=pe(e),r===null)e=null;else if(l=r.tag,l===13){if(e=de(r),e!==null)return e;e=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;e=null}else r!==e&&(e=null);return Ss=e,null}function ul(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qt()){case Wt:return 1;case Zt:return 4;case Ut:case Vt:return 16;case $n:return 536870912;default:return 16}default:return 16}}var ji=null,Ts=null,ga=null;function dc(){if(ga)return ga;var e,r=Ts,l=r.length,d,x="value"in ji?ji.value:ji.textContent,S=x.length;for(e=0;e<l&&r[e]===x[e];e++);var M=l-e;for(d=1;d<=M&&r[l-d]===x[S-d];d++);return ga=x.slice(e,1<d?1-d:void 0)}function Wi(e){var r=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&r===13&&(e=13)):e=r,e===10&&(e=13),32<=e||e===13?e:0}function hl(){return!0}function uu(){return!1}function Yr(e){function r(l,d,x,S,M){this._reactName=l,this._targetInst=x,this.type=d,this.nativeEvent=S,this.target=M,this.currentTarget=null;for(var A in e)e.hasOwnProperty(A)&&(l=e[A],this[A]=l?l(S):S[A]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?hl:uu,this.isPropagationStopped=uu,this}return nt(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=hl)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=hl)},persist:function(){},isPersistent:hl}),r}var ks={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pc=Yr(ks),ya=nt({},ks,{view:0,detail:0}),fc=Yr(ya),Ms,va,Jo,Zi=nt({},ya,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jo&&(Jo&&e.type==="mousemove"?(Ms=e.screenX-Jo.screenX,va=e.screenY-Jo.screenY):va=Ms=0,Jo=e),Ms)},movementY:function(e){return"movementY"in e?e.movementY:va}}),mc=Yr(Zi),hu=nt({},Zi,{dataTransfer:0}),gc=Yr(hu),po=nt({},ya,{relatedTarget:0}),dl=Yr(po),Cs=nt({},ks,{animationName:0,elapsedTime:0,pseudoElement:0}),Ps=Yr(Cs),Un=nt({},ks,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yc=Yr(Un),ft=nt({},ks,{data:0}),Yo=Yr(ft),Dn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function du(e){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(e):(e=fo[e])?!!r[e]:!1}function vc(){return du}var pu=nt({},ya,{key:function(e){if(e.key){var r=Dn[e.key]||e.key;if(r!=="Unidentified")return r}return e.type==="keypress"?(e=Wi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Mn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vc,charCode:function(e){return e.type==="keypress"?Wi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Wi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),uh=Yr(pu),xc=nt({},Zi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Is=Yr(xc),xa=nt({},ya,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vc}),pl=Yr(xa),_a=nt({},ks,{propertyName:0,elapsedTime:0,pseudoElement:0}),fu=Yr(_a),fl=nt({},Zi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ml=Yr(fl),wi=[9,13,27,32],gl=c&&"CompositionEvent"in window,Qo=null;c&&"documentMode"in document&&(Qo=document.documentMode);var mu=c&&"TextEvent"in window&&!Qo,es=c&&(!gl||Qo&&8<Qo&&11>=Qo),As=" ",wa=!1;function ba(e,r){switch(e){case"keyup":return wi.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yl(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ts=!1;function _c(e,r){switch(e){case"compositionend":return yl(r);case"keypress":return r.which!==32?null:(wa=!0,As);case"textInput":return e=r.data,e===As&&wa?null:e;default:return null}}function vl(e,r){if(ts)return e==="compositionend"||!gl&&ba(e,r)?(e=dc(),ga=Ts=ji=null,ts=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return es&&r.locale!=="ko"?null:r.data;default:return null}}var xl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wc(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r==="input"?!!xl[e.type]:r==="textarea"}function Sa(e,r,l,d){Ne(d),r=Pl(r,"onChange"),0<r.length&&(l=new pc("onChange","change",null,l,d),e.push({event:l,listeners:r}))}var bi=null,Xi=null;function _l(e){Ia(e,0)}function Ea(e){var r=R(e);if(nr(r))return e}function Ta(e,r){if(e==="change")return r}var bc=!1;if(c){var wl;if(c){var mo="oninput"in document;if(!mo){var Sc=document.createElement("div");Sc.setAttribute("oninput","return;"),mo=typeof Sc.oninput=="function"}wl=mo}else wl=!1;bc=wl&&(!document.documentMode||9<document.documentMode)}function Ec(){bi&&(bi.detachEvent("onpropertychange",Ls),Xi=bi=null)}function Ls(e){if(e.propertyName==="value"&&Ea(Xi)){var r=[];Sa(r,Xi,e,er(e)),Tr(_l,r)}}function ka(e,r,l){e==="focusin"?(Ec(),bi=r,Xi=l,bi.attachEvent("onpropertychange",Ls)):e==="focusout"&&Ec()}function Qr(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ea(Xi)}function kr(e,r){if(e==="click")return Ea(r)}function hh(e,r){if(e==="input"||e==="change")return Ea(r)}function go(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var ci=typeof Object.is=="function"?Object.is:go;function Si(e,r){if(ci(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var l=Object.keys(e),d=Object.keys(r);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var x=l[d];if(!F.call(r,x)||!ci(e[x],r[x]))return!1}return!0}function yo(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gu(e,r){var l=yo(e);e=0;for(var d;l;){if(l.nodeType===3){if(d=e+l.textContent.length,e<=r&&d>=r)return{node:l,offset:r-e};e=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=yo(l)}}function bl(e,r){return e&&r?e===r?!0:e&&e.nodeType===3?!1:r&&r.nodeType===3?bl(e,r.parentNode):"contains"in e?e.contains(r):e.compareDocumentPosition?!!(e.compareDocumentPosition(r)&16):!1:!1}function yu(){for(var e=window,r=Rn();r instanceof e.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)e=r.contentWindow;else break;r=Rn(e.document)}return r}function Sl(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r&&(r==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||r==="textarea"||e.contentEditable==="true")}function ns(e){var r=yu(),l=e.focusedElem,d=e.selectionRange;if(r!==l&&l&&l.ownerDocument&&bl(l.ownerDocument.documentElement,l)){if(d!==null&&Sl(l)){if(r=d.start,e=d.end,e===void 0&&(e=r),"selectionStart"in l)l.selectionStart=r,l.selectionEnd=Math.min(e,l.value.length);else if(e=(r=l.ownerDocument||document)&&r.defaultView||window,e.getSelection){e=e.getSelection();var x=l.textContent.length,S=Math.min(d.start,x);d=d.end===void 0?S:Math.min(d.end,x),!e.extend&&S>d&&(x=d,d=S,S=x),x=gu(l,S);var M=gu(l,d);x&&M&&(e.rangeCount!==1||e.anchorNode!==x.node||e.anchorOffset!==x.offset||e.focusNode!==M.node||e.focusOffset!==M.offset)&&(r=r.createRange(),r.setStart(x.node,x.offset),e.removeAllRanges(),S>d?(e.addRange(r),e.extend(M.node,M.offset)):(r.setEnd(M.node,M.offset),e.addRange(r)))}}for(r=[],e=l;e=e.parentNode;)e.nodeType===1&&r.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<r.length;l++)e=r[l],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vo=c&&"documentMode"in document&&11>=document.documentMode,ut=null,Ma=null,Ki=null,Ji=!1;function zs(e,r,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Ji||ut==null||ut!==Rn(d)||(d=ut,"selectionStart"in d&&Sl(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Ki&&Si(Ki,d)||(Ki=d,d=Pl(Ma,"onSelect"),0<d.length&&(r=new pc("onSelect","select",null,r,l),e.push({event:r,listeners:d}),r.target=ut)))}function rt(e,r){var l={};return l[e.toLowerCase()]=r.toLowerCase(),l["Webkit"+e]="webkit"+r,l["Moz"+e]="moz"+r,l}var xo={animationend:rt("Animation","AnimationEnd"),animationiteration:rt("Animation","AnimationIteration"),animationstart:rt("Animation","AnimationStart"),transitionend:rt("Transition","TransitionEnd")},El={},vu={};c&&(vu=document.createElement("div").style,"AnimationEvent"in window||(delete xo.animationend.animation,delete xo.animationiteration.animation,delete xo.animationstart.animation),"TransitionEvent"in window||delete xo.transitionend.transition);function _o(e){if(El[e])return El[e];if(!xo[e])return e;var r=xo[e],l;for(l in r)if(r.hasOwnProperty(l)&&l in vu)return El[e]=r[l];return e}var Tc=_o("animationend"),kc=_o("animationiteration"),xu=_o("animationstart"),_u=_o("transitionend"),Ca=new Map,Tl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ri(e,r){Ca.set(e,r),k(r,[e])}for(var Pa=0;Pa<Tl.length;Pa++){var Mr=Tl[Pa],wo=Mr.toLowerCase(),wu=Mr[0].toUpperCase()+Mr.slice(1);Ri(wo,"on"+wu)}Ri(Tc,"onAnimationEnd"),Ri(kc,"onAnimationIteration"),Ri(xu,"onAnimationStart"),Ri("dblclick","onDoubleClick"),Ri("focusin","onFocus"),Ri("focusout","onBlur"),Ri(_u,"onTransitionEnd"),P("onMouseEnter",["mouseout","mouseover"]),P("onMouseLeave",["mouseout","mouseover"]),P("onPointerEnter",["pointerout","pointerover"]),P("onPointerLeave",["pointerout","pointerover"]),k("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),k("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),k("onBeforeInput",["compositionend","keypress","textInput","paste"]),k("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),k("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),k("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),js=new Set("cancel close invalid load scroll toggle".split(" ").concat(rs));function kl(e,r,l){var d=e.type||"unknown-event";e.currentTarget=l,ae(d,r,void 0,e),e.currentTarget=null}function Ia(e,r){r=(r&4)!==0;for(var l=0;l<e.length;l++){var d=e[l],x=d.event;d=d.listeners;e:{var S=void 0;if(r)for(var M=d.length-1;0<=M;M--){var A=d[M],L=A.instance,O=A.currentTarget;if(A=A.listener,L!==S&&x.isPropagationStopped())break e;kl(x,A,O),S=L}else for(M=0;M<d.length;M++){if(A=d[M],L=A.instance,O=A.currentTarget,A=A.listener,L!==S&&x.isPropagationStopped())break e;kl(x,A,O),S=L}}}if(j)throw e=D,j=!1,D=null,e}function hn(e,r){var l=r[b];l===void 0&&(l=r[b]=new Set);var d=e+"__bubble";l.has(d)||(Ml(r,e,2,!1),l.add(d))}function Tn(e,r,l){var d=0;r&&(d|=4),Ml(l,e,d,r)}var is="_reactListening"+Math.random().toString(36).slice(2);function bo(e){if(!e[is]){e[is]=!0,w.forEach(function(l){l!=="selectionchange"&&(js.has(l)||Tn(l,!1,e),Tn(l,!0,e))});var r=e.nodeType===9?e:e.ownerDocument;r===null||r[is]||(r[is]=!0,Tn("selectionchange",!1,r))}}function Ml(e,r,l,d){switch(ul(r)){case 1:var x=ll;break;case 4:x=cl;break;default:x=ma}l=x.bind(null,r,l,e),x=void 0,!vi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(x=!0),d?x!==void 0?e.addEventListener(r,l,{capture:!0,passive:x}):e.addEventListener(r,l,!0):x!==void 0?e.addEventListener(r,l,{passive:x}):e.addEventListener(r,l,!1)}function Cl(e,r,l,d,x){var S=d;if((r&1)===0&&(r&2)===0&&d!==null)e:for(;;){if(d===null)return;var M=d.tag;if(M===3||M===4){var A=d.stateNode.containerInfo;if(A===x||A.nodeType===8&&A.parentNode===x)break;if(M===4)for(M=d.return;M!==null;){var L=M.tag;if((L===3||L===4)&&(L=M.stateNode.containerInfo,L===x||L.nodeType===8&&L.parentNode===x))return;M=M.return}for(;A!==null;){if(M=I(A),M===null)return;if(L=M.tag,L===5||L===6){d=S=M;continue e}A=A.parentNode}}d=d.return}Tr(function(){var O=S,q=er(l),Q=[];e:{var ie=Ca.get(e);if(ie!==void 0){var re=pc,fe=e;switch(e){case"keypress":if(Wi(l)===0)break e;case"keydown":case"keyup":re=uh;break;case"focusin":fe="focus",re=dl;break;case"focusout":fe="blur",re=dl;break;case"beforeblur":case"afterblur":re=dl;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=mc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=gc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=pl;break;case Tc:case kc:case xu:re=Ps;break;case _u:re=fu;break;case"scroll":re=fc;break;case"wheel":re=ml;break;case"copy":case"cut":case"paste":re=yc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=Is}var we=(r&4)!==0,je=!we&&e==="scroll",ue=we?ie!==null?ie+"Capture":null:ie;we=[];for(var ne=O,ce;ne!==null;){ce=ne;var be=ce.stateNode;if(ce.tag===5&&be!==null&&(ce=be,ue!==null&&(be=li(ne,ue),be!=null&&we.push(Rs(ne,be,ce)))),je)break;ne=ne.return}0<we.length&&(ie=new re(ie,fe,null,l,q),Q.push({event:ie,listeners:we}))}}if((r&7)===0){e:{if(ie=e==="mouseover"||e==="pointerover",re=e==="mouseout"||e==="pointerout",ie&&l!==jt&&(fe=l.relatedTarget||l.fromElement)&&(I(fe)||fe[m]))break e;if((re||ie)&&(ie=q.window===q?q:(ie=q.ownerDocument)?ie.defaultView||ie.parentWindow:window,re?(fe=l.relatedTarget||l.toElement,re=O,fe=fe?I(fe):null,fe!==null&&(je=pe(fe),fe!==je||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(re=null,fe=O),re!==fe)){if(we=mc,be="onMouseLeave",ue="onMouseEnter",ne="mouse",(e==="pointerout"||e==="pointerover")&&(we=Is,be="onPointerLeave",ue="onPointerEnter",ne="pointer"),je=re==null?ie:R(re),ce=fe==null?ie:R(fe),ie=new we(be,ne+"leave",re,l,q),ie.target=je,ie.relatedTarget=ce,be=null,I(q)===O&&(we=new we(ue,ne+"enter",fe,l,q),we.target=ce,we.relatedTarget=je,be=we),je=be,re&&fe)t:{for(we=re,ue=fe,ne=0,ce=we;ce;ce=Or(ce))ne++;for(ce=0,be=ue;be;be=Or(be))ce++;for(;0<ne-ce;)we=Or(we),ne--;for(;0<ce-ne;)ue=Or(ue),ce--;for(;ne--;){if(we===ue||ue!==null&&we===ue.alternate)break t;we=Or(we),ue=Or(ue)}we=null}else we=null;re!==null&&Aa(Q,ie,re,we,!1),fe!==null&&je!==null&&Aa(Q,je,fe,we,!0)}}e:{if(ie=O?R(O):window,re=ie.nodeName&&ie.nodeName.toLowerCase(),re==="select"||re==="input"&&ie.type==="file")var Ie=Ta;else if(wc(ie))if(bc)Ie=hh;else{Ie=Qr;var Be=ka}else(re=ie.nodeName)&&re.toLowerCase()==="input"&&(ie.type==="checkbox"||ie.type==="radio")&&(Ie=kr);if(Ie&&(Ie=Ie(e,O))){Sa(Q,Ie,l,q);break e}Be&&Be(e,ie,O),e==="focusout"&&(Be=ie._wrapperState)&&Be.controlled&&ie.type==="number"&&dt(ie,"number",ie.value)}switch(Be=O?R(O):window,e){case"focusin":(wc(Be)||Be.contentEditable==="true")&&(ut=Be,Ma=O,Ki=null);break;case"focusout":Ki=Ma=ut=null;break;case"mousedown":Ji=!0;break;case"contextmenu":case"mouseup":case"dragend":Ji=!1,zs(Q,l,q);break;case"selectionchange":if(vo)break;case"keydown":case"keyup":zs(Q,l,q)}var De;if(gl)e:{switch(e){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else ts?ba(e,l)&&(Ce="onCompositionEnd"):e==="keydown"&&l.keyCode===229&&(Ce="onCompositionStart");Ce&&(es&&l.locale!=="ko"&&(ts||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&ts&&(De=dc()):(ji=q,Ts="value"in ji?ji.value:ji.textContent,ts=!0)),Be=Pl(O,Ce),0<Be.length&&(Ce=new Yo(Ce,e,null,l,q),Q.push({event:Ce,listeners:Be}),De?Ce.data=De:(De=yl(l),De!==null&&(Ce.data=De)))),(De=mu?_c(e,l):vl(e,l))&&(O=Pl(O,"onBeforeInput"),0<O.length&&(q=new Yo("onBeforeInput","beforeinput",null,l,q),Q.push({event:q,listeners:O}),q.data=De))}Ia(Q,r)})}function Rs(e,r,l){return{instance:e,listener:r,currentTarget:l}}function Pl(e,r){for(var l=r+"Capture",d=[];e!==null;){var x=e,S=x.stateNode;x.tag===5&&S!==null&&(x=S,S=li(e,l),S!=null&&d.unshift(Rs(e,S,x)),S=li(e,r),S!=null&&d.push(Rs(e,S,x))),e=e.return}return d}function Or(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Aa(e,r,l,d,x){for(var S=r._reactName,M=[];l!==null&&l!==d;){var A=l,L=A.alternate,O=A.stateNode;if(L!==null&&L===d)break;A.tag===5&&O!==null&&(A=O,x?(L=li(l,S),L!=null&&M.unshift(Rs(l,L,A))):x||(L=li(l,S),L!=null&&M.push(Rs(l,L,A)))),l=l.return}M.length!==0&&e.push({event:r,listeners:M})}var vt=/\r\n?/g,Et=/\u0000|\uFFFD/g;function Ds(e){return(typeof e=="string"?e:""+e).replace(vt,`
`).replace(Et,"")}function So(e,r,l){if(r=Ds(r),Ds(e)!==r&&l)throw Error(v(425))}function Ns(){}var Xn=null,Yi=null;function Cr(e,r){return e==="textarea"||e==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Mc=typeof setTimeout=="function"?setTimeout:void 0,La=typeof clearTimeout=="function"?clearTimeout:void 0,kn=typeof Promise=="function"?Promise:void 0,tr=typeof queueMicrotask=="function"?queueMicrotask:typeof kn<"u"?function(e){return kn.resolve(null).then(e).catch(bu)}:Mc;function bu(e){setTimeout(function(){throw e})}function Eo(e,r){var l=r,d=0;do{var x=l.nextSibling;if(e.removeChild(l),x&&x.nodeType===8)if(l=x.data,l==="/$"){if(d===0){e.removeChild(x),ws(r);return}d--}else l!=="$"&&l!=="$?"&&l!=="$!"||d++;l=x}while(l);ws(r)}function ui(e){for(;e!=null;e=e.nextSibling){var r=e.nodeType;if(r===1||r===3)break;if(r===8){if(r=e.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return e}function f(e){e=e.previousSibling;for(var r=0;e;){if(e.nodeType===8){var l=e.data;if(l==="$"||l==="$!"||l==="$?"){if(r===0)return e;r--}else l==="/$"&&r++}e=e.previousSibling}return null}var n=Math.random().toString(36).slice(2),s="__reactFiber$"+n,h="__reactProps$"+n,m="__reactContainer$"+n,b="__reactEvents$"+n,T="__reactListeners$"+n,C="__reactHandles$"+n;function I(e){var r=e[s];if(r)return r;for(var l=e.parentNode;l;){if(r=l[m]||l[s]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(e=f(e);e!==null;){if(l=e[s])return l;e=f(e)}return r}e=l,l=e.parentNode}return null}function z(e){return e=e[s]||e[m],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function R(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(v(33))}function B(e){return e[h]||null}var H=[],Y=-1;function X(e){return{current:e}}function Z(e){0>Y||(e.current=H[Y],H[Y]=null,Y--)}function se(e,r){Y++,H[Y]=e.current,e.current=r}var ge={},xe=X(ge),te=X(!1),Te=ge;function Se(e,r){var l=e.type.contextTypes;if(!l)return ge;var d=e.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===r)return d.__reactInternalMemoizedMaskedChildContext;var x={},S;for(S in l)x[S]=r[S];return d&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=x),x}function Pe(e){return e=e.childContextTypes,e!=null}function Re(){Z(te),Z(xe)}function He(e,r,l){if(xe.current!==ge)throw Error(v(168));se(xe,r),se(te,l)}function ze(e,r,l){var d=e.stateNode;if(r=r.childContextTypes,typeof d.getChildContext!="function")return l;d=d.getChildContext();for(var x in d)if(!(x in r))throw Error(v(108,Kt(e)||"Unknown",x));return nt({},l,d)}function at(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ge,Te=xe.current,se(xe,e),se(te,te.current),!0}function et(e,r,l){var d=e.stateNode;if(!d)throw Error(v(169));l?(e=ze(e,r,Te),d.__reactInternalMemoizedMergedChildContext=e,Z(te),Z(xe),se(xe,e)):Z(te),se(te,l)}var st=null,Dt=!1,Gt=!1;function wt(e){st===null?st=[e]:st.push(e)}function xn(e){Dt=!0,wt(e)}function nn(){if(!Gt&&st!==null){Gt=!0;var e=0,r=fn;try{var l=st;for(fn=1;e<l.length;e++){var d=l[e];do d=d(!0);while(d!==null)}st=null,Dt=!1}catch(x){throw st!==null&&(st=st.slice(e+1)),Oe(Wt,nn),x}finally{fn=r,Gt=!1}}return null}var Qt=[],en=0,rn=null,Pr=0,Kn=[],Vn=0,gr=null,$r=1,jn="";function yr(e,r){Qt[en++]=Pr,Qt[en++]=rn,rn=e,Pr=r}function To(e,r,l){Kn[Vn++]=$r,Kn[Vn++]=jn,Kn[Vn++]=gr,gr=e;var d=$r;e=jn;var x=32-Jr(d)-1;d&=~(1<<x),l+=1;var S=32-Jr(r)+x;if(30<S){var M=x-x%5;S=(d&(1<<M)-1).toString(32),d>>=M,x-=M,$r=1<<32-Jr(r)+x|l<<x|d,jn=S+e}else $r=1<<S|l<<x|d,jn=e}function Bs(e){e.return!==null&&(yr(e,1),To(e,1,0))}function cn(e){for(;e===rn;)rn=Qt[--en],Qt[en]=null,Pr=Qt[--en],Qt[en]=null;for(;e===gr;)gr=Kn[--Vn],Kn[Vn]=null,jn=Kn[--Vn],Kn[Vn]=null,$r=Kn[--Vn],Kn[Vn]=null}var on=null,Ht=null,Jt=!1,Nn=null;function Cn(e,r){var l=Rr(5,null,null,0);l.elementType="DELETED",l.stateNode=r,l.return=e,r=e.deletions,r===null?(e.deletions=[l],e.flags|=16):r.push(l)}function ei(e,r){switch(e.tag){case 5:var l=e.type;return r=r.nodeType!==1||l.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(e.stateNode=r,on=e,Ht=ui(r.firstChild),!0):!1;case 6:return r=e.pendingProps===""||r.nodeType!==3?null:r,r!==null?(e.stateNode=r,on=e,Ht=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(l=gr!==null?{id:$r,overflow:jn}:null,e.memoizedState={dehydrated:r,treeContext:l,retryLane:1073741824},l=Rr(18,null,null,0),l.stateNode=r,l.return=e,e.child=l,on=e,Ht=null,!0):!1;default:return!1}}function ko(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Mo(e){if(Jt){var r=Ht;if(r){var l=r;if(!ei(e,r)){if(ko(e))throw Error(v(418));r=ui(l.nextSibling);var d=on;r&&ei(e,r)?Cn(d,l):(e.flags=e.flags&-4097|2,Jt=!1,on=e)}}else{if(ko(e))throw Error(v(418));e.flags=e.flags&-4097|2,Jt=!1,on=e}}}function za(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;on=e}function Fs(e){if(e!==on)return!1;if(!Jt)return za(e),Jt=!0,!1;var r;if((r=e.tag!==3)&&!(r=e.tag!==5)&&(r=e.type,r=r!=="head"&&r!=="body"&&!Cr(e.type,e.memoizedProps)),r&&(r=Ht)){if(ko(e))throw ja(),Error(v(418));for(;r;)Cn(e,r),r=ui(r.nextSibling)}if(za(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(v(317));e:{for(e=e.nextSibling,r=0;e;){if(e.nodeType===8){var l=e.data;if(l==="/$"){if(r===0){Ht=ui(e.nextSibling);break e}r--}else l!=="$"&&l!=="$!"&&l!=="$?"||r++}e=e.nextSibling}Ht=null}}else Ht=on?ui(e.stateNode.nextSibling):null;return!0}function ja(){for(var e=Ht;e;)e=ui(e.nextSibling)}function Ir(){Ht=on=null,Jt=!1}function Os(e){Nn===null?Nn=[e]:Nn.push(e)}var Ra=Ve.ReactCurrentBatchConfig;function Co(e,r,l){if(e=l.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(v(309));var d=l.stateNode}if(!d)throw Error(v(147,e));var x=d,S=""+e;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===S?r.ref:(r=function(M){var A=x.refs;M===null?delete A[S]:A[S]=M},r._stringRef=S,r)}if(typeof e!="string")throw Error(v(284));if(!l._owner)throw Error(v(290,e))}return e}function Su(e,r){throw e=Object.prototype.toString.call(r),Error(v(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e))}function Eu(e){var r=e._init;return r(e._payload)}function Il(e){function r(ue,ne){if(e){var ce=ue.deletions;ce===null?(ue.deletions=[ne],ue.flags|=16):ce.push(ne)}}function l(ue,ne){if(!e)return null;for(;ne!==null;)r(ue,ne),ne=ne.sibling;return null}function d(ue,ne){for(ue=new Map;ne!==null;)ne.key!==null?ue.set(ne.key,ne):ue.set(ne.index,ne),ne=ne.sibling;return ue}function x(ue,ne){return ue=ps(ue,ne),ue.index=0,ue.sibling=null,ue}function S(ue,ne,ce){return ue.index=ce,e?(ce=ue.alternate,ce!==null?(ce=ce.index,ce<ne?(ue.flags|=2,ne):ce):(ue.flags|=2,ne)):(ue.flags|=1048576,ne)}function M(ue){return e&&ue.alternate===null&&(ue.flags|=2),ue}function A(ue,ne,ce,be){return ne===null||ne.tag!==6?(ne=Ql(ce,ue.mode,be),ne.return=ue,ne):(ne=x(ne,ce),ne.return=ue,ne)}function L(ue,ne,ce,be){var Ie=ce.type;return Ie===it?q(ue,ne,ce.props.children,be,ce.key):ne!==null&&(ne.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===Xe&&Eu(Ie)===ne.type)?(be=x(ne,ce.props),be.ref=Co(ue,ne,ce),be.return=ue,be):(be=Zc(ce.type,ce.key,ce.props,null,ue.mode,be),be.ref=Co(ue,ne,ce),be.return=ue,be)}function O(ue,ne,ce,be){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==ce.containerInfo||ne.stateNode.implementation!==ce.implementation?(ne=Xu(ce,ue.mode,be),ne.return=ue,ne):(ne=x(ne,ce.children||[]),ne.return=ue,ne)}function q(ue,ne,ce,be,Ie){return ne===null||ne.tag!==7?(ne=Qs(ce,ue.mode,be,Ie),ne.return=ue,ne):(ne=x(ne,ce),ne.return=ue,ne)}function Q(ue,ne,ce){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return ne=Ql(""+ne,ue.mode,ce),ne.return=ue,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case Me:return ce=Zc(ne.type,ne.key,ne.props,null,ue.mode,ce),ce.ref=Co(ue,null,ne),ce.return=ue,ce;case tt:return ne=Xu(ne,ue.mode,ce),ne.return=ue,ne;case Xe:var be=ne._init;return Q(ue,be(ne._payload),ce)}if(tn(ne)||lt(ne))return ne=Qs(ne,ue.mode,ce,null),ne.return=ue,ne;Su(ue,ne)}return null}function ie(ue,ne,ce,be){var Ie=ne!==null?ne.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number")return Ie!==null?null:A(ue,ne,""+ce,be);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case Me:return ce.key===Ie?L(ue,ne,ce,be):null;case tt:return ce.key===Ie?O(ue,ne,ce,be):null;case Xe:return Ie=ce._init,ie(ue,ne,Ie(ce._payload),be)}if(tn(ce)||lt(ce))return Ie!==null?null:q(ue,ne,ce,be,null);Su(ue,ce)}return null}function re(ue,ne,ce,be,Ie){if(typeof be=="string"&&be!==""||typeof be=="number")return ue=ue.get(ce)||null,A(ne,ue,""+be,Ie);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case Me:return ue=ue.get(be.key===null?ce:be.key)||null,L(ne,ue,be,Ie);case tt:return ue=ue.get(be.key===null?ce:be.key)||null,O(ne,ue,be,Ie);case Xe:var Be=be._init;return re(ue,ne,ce,Be(be._payload),Ie)}if(tn(be)||lt(be))return ue=ue.get(ce)||null,q(ne,ue,be,Ie,null);Su(ne,be)}return null}function fe(ue,ne,ce,be){for(var Ie=null,Be=null,De=ne,Ce=ne=0,ht=null;De!==null&&Ce<ce.length;Ce++){De.index>Ce?(ht=De,De=null):ht=De.sibling;var Ke=ie(ue,De,ce[Ce],be);if(Ke===null){De===null&&(De=ht);break}e&&De&&Ke.alternate===null&&r(ue,De),ne=S(Ke,ne,Ce),Be===null?Ie=Ke:Be.sibling=Ke,Be=Ke,De=ht}if(Ce===ce.length)return l(ue,De),Jt&&yr(ue,Ce),Ie;if(De===null){for(;Ce<ce.length;Ce++)De=Q(ue,ce[Ce],be),De!==null&&(ne=S(De,ne,Ce),Be===null?Ie=De:Be.sibling=De,Be=De);return Jt&&yr(ue,Ce),Ie}for(De=d(ue,De);Ce<ce.length;Ce++)ht=re(De,ue,Ce,ce[Ce],be),ht!==null&&(e&&ht.alternate!==null&&De.delete(ht.key===null?Ce:ht.key),ne=S(ht,ne,Ce),Be===null?Ie=ht:Be.sibling=ht,Be=ht);return e&&De.forEach(function(Nt){return r(ue,Nt)}),Jt&&yr(ue,Ce),Ie}function we(ue,ne,ce,be){var Ie=lt(ce);if(typeof Ie!="function")throw Error(v(150));if(ce=Ie.call(ce),ce==null)throw Error(v(151));for(var Be=Ie=null,De=ne,Ce=ne=0,ht=null,Ke=ce.next();De!==null&&!Ke.done;Ce++,Ke=ce.next()){De.index>Ce?(ht=De,De=null):ht=De.sibling;var Nt=ie(ue,De,Ke.value,be);if(Nt===null){De===null&&(De=ht);break}e&&De&&Nt.alternate===null&&r(ue,De),ne=S(Nt,ne,Ce),Be===null?Ie=Nt:Be.sibling=Nt,Be=Nt,De=ht}if(Ke.done)return l(ue,De),Jt&&yr(ue,Ce),Ie;if(De===null){for(;!Ke.done;Ce++,Ke=ce.next())Ke=Q(ue,Ke.value,be),Ke!==null&&(ne=S(Ke,ne,Ce),Be===null?Ie=Ke:Be.sibling=Ke,Be=Ke);return Jt&&yr(ue,Ce),Ie}for(De=d(ue,De);!Ke.done;Ce++,Ke=ce.next())Ke=re(De,ue,Ce,Ke.value,be),Ke!==null&&(e&&Ke.alternate!==null&&De.delete(Ke.key===null?Ce:Ke.key),ne=S(Ke,ne,Ce),Be===null?Ie=Ke:Be.sibling=Ke,Be=Ke);return e&&De.forEach(function(Pn){return r(ue,Pn)}),Jt&&yr(ue,Ce),Ie}function je(ue,ne,ce,be){if(typeof ce=="object"&&ce!==null&&ce.type===it&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case Me:e:{for(var Ie=ce.key,Be=ne;Be!==null;){if(Be.key===Ie){if(Ie=ce.type,Ie===it){if(Be.tag===7){l(ue,Be.sibling),ne=x(Be,ce.props.children),ne.return=ue,ue=ne;break e}}else if(Be.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===Xe&&Eu(Ie)===Be.type){l(ue,Be.sibling),ne=x(Be,ce.props),ne.ref=Co(ue,Be,ce),ne.return=ue,ue=ne;break e}l(ue,Be);break}else r(ue,Be);Be=Be.sibling}ce.type===it?(ne=Qs(ce.props.children,ue.mode,be,ce.key),ne.return=ue,ue=ne):(be=Zc(ce.type,ce.key,ce.props,null,ue.mode,be),be.ref=Co(ue,ne,ce),be.return=ue,ue=be)}return M(ue);case tt:e:{for(Be=ce.key;ne!==null;){if(ne.key===Be)if(ne.tag===4&&ne.stateNode.containerInfo===ce.containerInfo&&ne.stateNode.implementation===ce.implementation){l(ue,ne.sibling),ne=x(ne,ce.children||[]),ne.return=ue,ue=ne;break e}else{l(ue,ne);break}else r(ue,ne);ne=ne.sibling}ne=Xu(ce,ue.mode,be),ne.return=ue,ue=ne}return M(ue);case Xe:return Be=ce._init,je(ue,ne,Be(ce._payload),be)}if(tn(ce))return fe(ue,ne,ce,be);if(lt(ce))return we(ue,ne,ce,be);Su(ue,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"?(ce=""+ce,ne!==null&&ne.tag===6?(l(ue,ne.sibling),ne=x(ne,ce),ne.return=ue,ue=ne):(l(ue,ne),ne=Ql(ce,ue.mode,be),ne.return=ue,ue=ne),M(ue)):l(ue,ne)}return je}var Qi=Il(!0),Po=Il(!1),hi=X(null),eo=null,Da=null,os=null;function dh(){os=Da=eo=null}function Tu(e){var r=hi.current;Z(hi),e._currentValue=r}function Jn(e,r,l){for(;e!==null;){var d=e.alternate;if((e.childLanes&r)!==r?(e.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),e===l)break;e=e.return}}function $s(e,r){eo=e,os=Da=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&r)!==0&&(di=!0),e.firstContext=null)}function Ei(e){var r=e._currentValue;if(os!==e)if(e={context:e,memoizedValue:r,next:null},Da===null){if(eo===null)throw Error(v(308));Da=e,eo.dependencies={lanes:0,firstContext:e}}else Da=Da.next=e;return r}var Ti=null;function ss(e){Ti===null?Ti=[e]:Ti.push(e)}function Cc(e,r,l,d){var x=r.interleaved;return x===null?(l.next=l,ss(r)):(l.next=x.next,x.next=l),r.interleaved=l,to(e,d)}function to(e,r){e.lanes|=r;var l=e.alternate;for(l!==null&&(l.lanes|=r),l=e,e=e.return;e!==null;)e.childLanes|=r,l=e.alternate,l!==null&&(l.childLanes|=r),l=e,e=e.return;return l.tag===3?l.stateNode:null}var as=!1;function ph(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fh(e,r){e=e.updateQueue,r.updateQueue===e&&(r.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ls(e,r){return{eventTime:e,lane:r,tag:0,payload:null,callback:null,next:null}}function Io(e,r,l){var d=e.updateQueue;if(d===null)return null;if(d=d.shared,(yn&2)!==0){var x=d.pending;return x===null?r.next=r:(r.next=x.next,x.next=r),d.pending=r,to(e,l)}return x=d.interleaved,x===null?(r.next=r,ss(d)):(r.next=x.next,x.next=r),d.interleaved=r,to(e,l)}function ku(e,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194240)!==0)){var d=r.lanes;d&=e.pendingLanes,l|=d,r.lanes=l,uo(e,l)}}function Mu(e,r){var l=e.updateQueue,d=e.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var x=null,S=null;if(l=l.firstBaseUpdate,l!==null){do{var M={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};S===null?x=S=M:S=S.next=M,l=l.next}while(l!==null);S===null?x=S=r:S=S.next=r}else x=S=r;l={baseState:d.baseState,firstBaseUpdate:x,lastBaseUpdate:S,shared:d.shared,effects:d.effects},e.updateQueue=l;return}e=l.lastBaseUpdate,e===null?l.firstBaseUpdate=r:e.next=r,l.lastBaseUpdate=r}function Pc(e,r,l,d){var x=e.updateQueue;as=!1;var S=x.firstBaseUpdate,M=x.lastBaseUpdate,A=x.shared.pending;if(A!==null){x.shared.pending=null;var L=A,O=L.next;L.next=null,M===null?S=O:M.next=O,M=L;var q=e.alternate;q!==null&&(q=q.updateQueue,A=q.lastBaseUpdate,A!==M&&(A===null?q.firstBaseUpdate=O:A.next=O,q.lastBaseUpdate=L))}if(S!==null){var Q=x.baseState;M=0,q=O=L=null,A=S;do{var ie=A.lane,re=A.eventTime;if((d&ie)===ie){q!==null&&(q=q.next={eventTime:re,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var fe=e,we=A;switch(ie=r,re=l,we.tag){case 1:if(fe=we.payload,typeof fe=="function"){Q=fe.call(re,Q,ie);break e}Q=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=we.payload,ie=typeof fe=="function"?fe.call(re,Q,ie):fe,ie==null)break e;Q=nt({},Q,ie);break e;case 2:as=!0}}A.callback!==null&&A.lane!==0&&(e.flags|=64,ie=x.effects,ie===null?x.effects=[A]:ie.push(A))}else re={eventTime:re,lane:ie,tag:A.tag,payload:A.payload,callback:A.callback,next:null},q===null?(O=q=re,L=Q):q=q.next=re,M|=ie;if(A=A.next,A===null){if(A=x.shared.pending,A===null)break;ie=A,A=ie.next,ie.next=null,x.lastBaseUpdate=ie,x.shared.pending=null}}while(!0);if(q===null&&(L=Q),x.baseState=L,x.firstBaseUpdate=O,x.lastBaseUpdate=q,r=x.shared.interleaved,r!==null){x=r;do M|=x.lane,x=x.next;while(x!==r)}else S===null&&(x.shared.lanes=0);Ha|=M,e.lanes=M,e.memoizedState=Q}}function mh(e,r,l){if(e=r.effects,r.effects=null,e!==null)for(r=0;r<e.length;r++){var d=e[r],x=d.callback;if(x!==null){if(d.callback=null,d=l,typeof x!="function")throw Error(v(191,x));x.call(d)}}}var Ao={},Lo=X(Ao),cs=X(Ao),Us=X(Ao);function zo(e){if(e===Ao)throw Error(v(174));return e}function gh(e,r){switch(se(Us,r),se(cs,e),se(Lo,Ao),e=r.nodeType,e){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:Le(null,"");break;default:e=e===8?r.parentNode:r,r=e.namespaceURI||null,e=e.tagName,r=Le(r,e)}Z(Lo),se(Lo,r)}function Al(){Z(Lo),Z(cs),Z(Us)}function Ur(e){zo(Us.current);var r=zo(Lo.current),l=Le(r,e.type);r!==l&&(se(cs,e),se(Lo,l))}function Ar(e){cs.current===e&&(Z(Lo),Z(cs))}var Hn=X(0);function Ll(e){for(var r=e;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Cu=[];function Na(){for(var e=0;e<Cu.length;e++)Cu[e]._workInProgressVersionPrimary=null;Cu.length=0}var Pu=Ve.ReactCurrentDispatcher,Iu=Ve.ReactCurrentBatchConfig,Vs=0,Bn=null,ur=null,vr=null,Ic=!1,Ac=!1,Ba=0,gd=0;function Lr(){throw Error(v(321))}function Fa(e,r){if(r===null)return!1;for(var l=0;l<r.length&&l<e.length;l++)if(!ci(e[l],r[l]))return!1;return!0}function ti(e,r,l,d,x,S){if(Vs=S,Bn=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Pu.current=e===null||e.memoizedState===null?Ap:Eh,e=l(d,x),Ac){S=0;do{if(Ac=!1,Ba=0,25<=S)throw Error(v(301));S+=1,vr=ur=null,r.updateQueue=null,Pu.current=Th,e=l(d,x)}while(Ac)}if(Pu.current=Ol,r=ur!==null&&ur.next!==null,Vs=0,vr=ur=Bn=null,Ic=!1,r)throw Error(v(300));return e}function Au(){var e=Ba!==0;return Ba=0,e}function jo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vr===null?Bn.memoizedState=vr=e:vr=vr.next=e,vr}function Di(){if(ur===null){var e=Bn.alternate;e=e!==null?e.memoizedState:null}else e=ur.next;var r=vr===null?Bn.memoizedState:vr.next;if(r!==null)vr=r,ur=e;else{if(e===null)throw Error(v(310));ur=e,e={memoizedState:ur.memoizedState,baseState:ur.baseState,baseQueue:ur.baseQueue,queue:ur.queue,next:null},vr===null?Bn.memoizedState=vr=e:vr=vr.next=e}return vr}function Lc(e,r){return typeof r=="function"?r(e):r}function zl(e){var r=Di(),l=r.queue;if(l===null)throw Error(v(311));l.lastRenderedReducer=e;var d=ur,x=d.baseQueue,S=l.pending;if(S!==null){if(x!==null){var M=x.next;x.next=S.next,S.next=M}d.baseQueue=x=S,l.pending=null}if(x!==null){S=x.next,d=d.baseState;var A=M=null,L=null,O=S;do{var q=O.lane;if((Vs&q)===q)L!==null&&(L=L.next={lane:0,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),d=O.hasEagerState?O.eagerState:e(d,O.action);else{var Q={lane:q,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null};L===null?(A=L=Q,M=d):L=L.next=Q,Bn.lanes|=q,Ha|=q}O=O.next}while(O!==null&&O!==S);L===null?M=d:L.next=A,ci(d,r.memoizedState)||(di=!0),r.memoizedState=d,r.baseState=M,r.baseQueue=L,l.lastRenderedState=d}if(e=l.interleaved,e!==null){x=e;do S=x.lane,Bn.lanes|=S,Ha|=S,x=x.next;while(x!==e)}else x===null&&(l.lanes=0);return[r.memoizedState,l.dispatch]}function jl(e){var r=Di(),l=r.queue;if(l===null)throw Error(v(311));l.lastRenderedReducer=e;var d=l.dispatch,x=l.pending,S=r.memoizedState;if(x!==null){l.pending=null;var M=x=x.next;do S=e(S,M.action),M=M.next;while(M!==x);ci(S,r.memoizedState)||(di=!0),r.memoizedState=S,r.baseQueue===null&&(r.baseState=S),l.lastRenderedState=S}return[S,d]}function yh(){}function Hs(e,r){var l=Bn,d=Di(),x=r(),S=!ci(d.memoizedState,x);if(S&&(d.memoizedState=x,di=!0),d=d.queue,vh(vd.bind(null,l,d,e),[e]),d.getSnapshot!==r||S||vr!==null&&vr.memoizedState.tag&1){if(l.flags|=2048,zc(9,yd.bind(null,l,d,x,r),void 0,null),xr===null)throw Error(v(349));(Vs&30)!==0||Rl(l,r,x)}return x}function Rl(e,r,l){e.flags|=16384,e={getSnapshot:r,value:l},r=Bn.updateQueue,r===null?(r={lastEffect:null,stores:null},Bn.updateQueue=r,r.stores=[e]):(l=r.stores,l===null?r.stores=[e]:l.push(e))}function yd(e,r,l,d){r.value=l,r.getSnapshot=d,xd(r)&&_d(e)}function vd(e,r,l){return l(function(){xd(r)&&_d(e)})}function xd(e){var r=e.getSnapshot;e=e.value;try{var l=r();return!ci(e,l)}catch{return!0}}function _d(e){var r=to(e,1);r!==null&&so(r,e,1,-1)}function wd(e){var r=jo();return typeof e=="function"&&(e=e()),r.memoizedState=r.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lc,lastRenderedState:e},r.queue=e,e=e.dispatch=Ip.bind(null,Bn,e),[r.memoizedState,e]}function zc(e,r,l,d){return e={tag:e,create:r,destroy:l,deps:d,next:null},r=Bn.updateQueue,r===null?(r={lastEffect:null,stores:null},Bn.updateQueue=r,r.lastEffect=e.next=e):(l=r.lastEffect,l===null?r.lastEffect=e.next=e:(d=l.next,l.next=e,e.next=d,r.lastEffect=e)),e}function bd(){return Di().memoizedState}function Dl(e,r,l,d){var x=jo();Bn.flags|=e,x.memoizedState=zc(1|r,l,void 0,d===void 0?null:d)}function Lu(e,r,l,d){var x=Di();d=d===void 0?null:d;var S=void 0;if(ur!==null){var M=ur.memoizedState;if(S=M.destroy,d!==null&&Fa(d,M.deps)){x.memoizedState=zc(r,l,S,d);return}}Bn.flags|=e,x.memoizedState=zc(1|r,l,S,d)}function Oa(e,r){return Dl(8390656,8,e,r)}function vh(e,r){return Lu(2048,8,e,r)}function Gn(e,r){return Lu(4,2,e,r)}function jc(e,r){return Lu(4,4,e,r)}function xh(e,r){if(typeof r=="function")return e=e(),r(e),function(){r(null)};if(r!=null)return e=e(),r.current=e,function(){r.current=null}}function Rc(e,r,l){return l=l!=null?l.concat([e]):null,Lu(4,4,xh.bind(null,r,e),l)}function Nl(){}function Bl(e,r){var l=Di();r=r===void 0?null:r;var d=l.memoizedState;return d!==null&&r!==null&&Fa(r,d[1])?d[0]:(l.memoizedState=[e,r],e)}function _h(e,r){var l=Di();r=r===void 0?null:r;var d=l.memoizedState;return d!==null&&r!==null&&Fa(r,d[1])?d[0]:(e=e(),l.memoizedState=[e,r],e)}function wh(e,r,l){return(Vs&21)===0?(e.baseState&&(e.baseState=!1,di=!0),e.memoizedState=l):(ci(l,r)||(l=lc(),Bn.lanes|=l,Ha|=l,e.baseState=!0),r)}function Dc(e,r){var l=fn;fn=l!==0&&4>l?l:4,e(!0);var d=Iu.transition;Iu.transition={};try{e(!1),r()}finally{fn=l,Iu.transition=d}}function zu(){return Di().memoizedState}function bh(e,r,l){var d=Ks(e);if(l={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null},Sh(e))Fl(r,l);else if(l=Cc(e,r,l,d),l!==null){var x=jr();so(l,e,d,x),Sd(l,r,d)}}function Ip(e,r,l){var d=Ks(e),x={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if(Sh(e))Fl(r,x);else{var S=e.alternate;if(e.lanes===0&&(S===null||S.lanes===0)&&(S=r.lastRenderedReducer,S!==null))try{var M=r.lastRenderedState,A=S(M,l);if(x.hasEagerState=!0,x.eagerState=A,ci(A,M)){var L=r.interleaved;L===null?(x.next=x,ss(r)):(x.next=L.next,L.next=x),r.interleaved=x;return}}catch{}finally{}l=Cc(e,r,x,d),l!==null&&(x=jr(),so(l,e,d,x),Sd(l,r,d))}}function Sh(e){var r=e.alternate;return e===Bn||r!==null&&r===Bn}function Fl(e,r){Ac=Ic=!0;var l=e.pending;l===null?r.next=r:(r.next=l.next,l.next=r),e.pending=r}function Sd(e,r,l){if((l&4194240)!==0){var d=r.lanes;d&=e.pendingLanes,l|=d,r.lanes=l,uo(e,l)}}var Ol={readContext:Ei,useCallback:Lr,useContext:Lr,useEffect:Lr,useImperativeHandle:Lr,useInsertionEffect:Lr,useLayoutEffect:Lr,useMemo:Lr,useReducer:Lr,useRef:Lr,useState:Lr,useDebugValue:Lr,useDeferredValue:Lr,useTransition:Lr,useMutableSource:Lr,useSyncExternalStore:Lr,useId:Lr,unstable_isNewReconciler:!1},Ap={readContext:Ei,useCallback:function(e,r){return jo().memoizedState=[e,r===void 0?null:r],e},useContext:Ei,useEffect:Oa,useImperativeHandle:function(e,r,l){return l=l!=null?l.concat([e]):null,Dl(4194308,4,xh.bind(null,r,e),l)},useLayoutEffect:function(e,r){return Dl(4194308,4,e,r)},useInsertionEffect:function(e,r){return Dl(4,2,e,r)},useMemo:function(e,r){var l=jo();return r=r===void 0?null:r,e=e(),l.memoizedState=[e,r],e},useReducer:function(e,r,l){var d=jo();return r=l!==void 0?l(r):r,d.memoizedState=d.baseState=r,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},d.queue=e,e=e.dispatch=bh.bind(null,Bn,e),[d.memoizedState,e]},useRef:function(e){var r=jo();return e={current:e},r.memoizedState=e},useState:wd,useDebugValue:Nl,useDeferredValue:function(e){return jo().memoizedState=e},useTransition:function(){var e=wd(!1),r=e[0];return e=Dc.bind(null,e[1]),jo().memoizedState=e,[r,e]},useMutableSource:function(){},useSyncExternalStore:function(e,r,l){var d=Bn,x=jo();if(Jt){if(l===void 0)throw Error(v(407));l=l()}else{if(l=r(),xr===null)throw Error(v(349));(Vs&30)!==0||Rl(d,r,l)}x.memoizedState=l;var S={value:l,getSnapshot:r};return x.queue=S,Oa(vd.bind(null,d,S,e),[e]),d.flags|=2048,zc(9,yd.bind(null,d,S,l,r),void 0,null),l},useId:function(){var e=jo(),r=xr.identifierPrefix;if(Jt){var l=jn,d=$r;l=(d&~(1<<32-Jr(d)-1)).toString(32)+l,r=":"+r+"R"+l,l=Ba++,0<l&&(r+="H"+l.toString(32)),r+=":"}else l=gd++,r=":"+r+"r"+l.toString(32)+":";return e.memoizedState=r},unstable_isNewReconciler:!1},Eh={readContext:Ei,useCallback:Bl,useContext:Ei,useEffect:vh,useImperativeHandle:Rc,useInsertionEffect:Gn,useLayoutEffect:jc,useMemo:_h,useReducer:zl,useRef:bd,useState:function(){return zl(Lc)},useDebugValue:Nl,useDeferredValue:function(e){var r=Di();return wh(r,ur.memoizedState,e)},useTransition:function(){var e=zl(Lc)[0],r=Di().memoizedState;return[e,r]},useMutableSource:yh,useSyncExternalStore:Hs,useId:zu,unstable_isNewReconciler:!1},Th={readContext:Ei,useCallback:Bl,useContext:Ei,useEffect:vh,useImperativeHandle:Rc,useInsertionEffect:Gn,useLayoutEffect:jc,useMemo:_h,useReducer:jl,useRef:bd,useState:function(){return jl(Lc)},useDebugValue:Nl,useDeferredValue:function(e){var r=Di();return ur===null?r.memoizedState=e:wh(r,ur.memoizedState,e)},useTransition:function(){var e=jl(Lc)[0],r=Di().memoizedState;return[e,r]},useMutableSource:yh,useSyncExternalStore:Hs,useId:zu,unstable_isNewReconciler:!1};function ki(e,r){if(e&&e.defaultProps){r=nt({},r),e=e.defaultProps;for(var l in e)r[l]===void 0&&(r[l]=e[l]);return r}return r}function kh(e,r,l,d){r=e.memoizedState,l=l(d,r),l=l==null?r:nt({},r,l),e.memoizedState=l,e.lanes===0&&(e.updateQueue.baseState=l)}var ju={isMounted:function(e){return(e=e._reactInternals)?pe(e)===e:!1},enqueueSetState:function(e,r,l){e=e._reactInternals;var d=jr(),x=Ks(e),S=ls(d,x);S.payload=r,l!=null&&(S.callback=l),r=Io(e,S,x),r!==null&&(so(r,e,x,d),ku(r,e,x))},enqueueReplaceState:function(e,r,l){e=e._reactInternals;var d=jr(),x=Ks(e),S=ls(d,x);S.tag=1,S.payload=r,l!=null&&(S.callback=l),r=Io(e,S,x),r!==null&&(so(r,e,x,d),ku(r,e,x))},enqueueForceUpdate:function(e,r){e=e._reactInternals;var l=jr(),d=Ks(e),x=ls(l,d);x.tag=2,r!=null&&(x.callback=r),r=Io(e,x,d),r!==null&&(so(r,e,d,l),ku(r,e,d))}};function Ed(e,r,l,d,x,S,M){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(d,S,M):r.prototype&&r.prototype.isPureReactComponent?!Si(l,d)||!Si(x,S):!0}function Td(e,r,l){var d=!1,x=ge,S=r.contextType;return typeof S=="object"&&S!==null?S=Ei(S):(x=Pe(r)?Te:xe.current,d=r.contextTypes,S=(d=d!=null)?Se(e,x):ge),r=new r(l,S),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=ju,e.stateNode=r,r._reactInternals=e,d&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=x,e.__reactInternalMemoizedMaskedChildContext=S),r}function kd(e,r,l,d){e=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,d),r.state!==e&&ju.enqueueReplaceState(r,r.state,null)}function Ro(e,r,l,d){var x=e.stateNode;x.props=l,x.state=e.memoizedState,x.refs={},ph(e);var S=r.contextType;typeof S=="object"&&S!==null?x.context=Ei(S):(S=Pe(r)?Te:xe.current,x.context=Se(e,S)),x.state=e.memoizedState,S=r.getDerivedStateFromProps,typeof S=="function"&&(kh(e,r,S,l),x.state=e.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(r=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),r!==x.state&&ju.enqueueReplaceState(x,x.state,null),Pc(e,l,x,d),x.state=e.memoizedState),typeof x.componentDidMount=="function"&&(e.flags|=4194308)}function $l(e,r){try{var l="",d=r;do l+=bt(d),d=d.return;while(d);var x=l}catch(S){x=`
Error generating stack: `+S.message+`
`+S.stack}return{value:e,source:r,stack:x,digest:null}}function Ru(e,r,l){return{value:e,source:null,stack:l??null,digest:r??null}}function Gs(e,r){try{console.error(r.value)}catch(l){setTimeout(function(){throw l})}}var Lp=typeof WeakMap=="function"?WeakMap:Map;function Md(e,r,l){l=ls(-1,l),l.tag=3,l.payload={element:null};var d=r.value;return l.callback=function(){Vc||(Vc=!0,$h=d),Gs(e,r)},l}function Cd(e,r,l){l=ls(-1,l),l.tag=3;var d=e.type.getDerivedStateFromError;if(typeof d=="function"){var x=r.value;l.payload=function(){return d(x)},l.callback=function(){Gs(e,r)}}var S=e.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(l.callback=function(){Gs(e,r),typeof d!="function"&&(Zs===null?Zs=new Set([this]):Zs.add(this));var M=r.stack;this.componentDidCatch(r.value,{componentStack:M!==null?M:""})}),l}function Mh(e,r,l){var d=e.pingCache;if(d===null){d=e.pingCache=new Lp;var x=new Set;d.set(r,x)}else x=d.get(r),x===void 0&&(x=new Set,d.set(r,x));x.has(l)||(x.add(l),e=Dp.bind(null,e,r,l),r.then(e,e))}function Ch(e){do{var r;if((r=e.tag===13)&&(r=e.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return e;e=e.return}while(e!==null);return null}function Pd(e,r,l,d,x){return(e.mode&1)===0?(e===r?e.flags|=65536:(e.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(r=ls(-1,1),r.tag=2,Io(l,r,1))),l.lanes|=1),e):(e.flags|=65536,e.lanes=x,e)}var zp=Ve.ReactCurrentOwner,di=!1;function ni(e,r,l,d){r.child=e===null?Po(r,null,l,d):Qi(r,e.child,l,d)}function Du(e,r,l,d,x){l=l.render;var S=r.ref;return $s(r,x),d=ti(e,r,l,d,S,x),l=Au(),e!==null&&!di?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~x,us(e,r,x)):(Jt&&l&&Bs(r),r.flags|=1,ni(e,r,d,x),r.child)}function Ul(e,r,l,d,x){if(e===null){var S=l.type;return typeof S=="function"&&!Zu(S)&&S.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(r.tag=15,r.type=S,Nu(e,r,S,d,x)):(e=Zc(l.type,null,d,r,r.mode,x),e.ref=r.ref,e.return=r,r.child=e)}if(S=e.child,(e.lanes&x)===0){var M=S.memoizedProps;if(l=l.compare,l=l!==null?l:Si,l(M,d)&&e.ref===r.ref)return us(e,r,x)}return r.flags|=1,e=ps(S,d),e.ref=r.ref,e.return=r,r.child=e}function Nu(e,r,l,d,x){if(e!==null){var S=e.memoizedProps;if(Si(S,d)&&e.ref===r.ref)if(di=!1,r.pendingProps=d=S,(e.lanes&x)!==0)(e.flags&131072)!==0&&(di=!0);else return r.lanes=e.lanes,us(e,r,x)}return Ph(e,r,l,d,x)}function Id(e,r,l){var d=r.pendingProps,x=d.children,S=e!==null?e.memoizedState:null;if(d.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},se(Ws,pi),pi|=l;else{if((l&1073741824)===0)return e=S!==null?S.baseLanes|l:l,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:e,cachePool:null,transitions:null},r.updateQueue=null,se(Ws,pi),pi|=e,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=S!==null?S.baseLanes:l,se(Ws,pi),pi|=d}else S!==null?(d=S.baseLanes|l,r.memoizedState=null):d=l,se(Ws,pi),pi|=d;return ni(e,r,x,l),r.child}function Ad(e,r){var l=r.ref;(e===null&&l!==null||e!==null&&e.ref!==l)&&(r.flags|=512,r.flags|=2097152)}function Ph(e,r,l,d,x){var S=Pe(l)?Te:xe.current;return S=Se(r,S),$s(r,x),l=ti(e,r,l,d,S,x),d=Au(),e!==null&&!di?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~x,us(e,r,x)):(Jt&&d&&Bs(r),r.flags|=1,ni(e,r,l,x),r.child)}function Vl(e,r,l,d,x){if(Pe(l)){var S=!0;at(r)}else S=!1;if($s(r,x),r.stateNode===null)Bc(e,r),Td(r,l,d),Ro(r,l,d,x),d=!0;else if(e===null){var M=r.stateNode,A=r.memoizedProps;M.props=A;var L=M.context,O=l.contextType;typeof O=="object"&&O!==null?O=Ei(O):(O=Pe(l)?Te:xe.current,O=Se(r,O));var q=l.getDerivedStateFromProps,Q=typeof q=="function"||typeof M.getSnapshotBeforeUpdate=="function";Q||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(A!==d||L!==O)&&kd(r,M,d,O),as=!1;var ie=r.memoizedState;M.state=ie,Pc(r,d,M,x),L=r.memoizedState,A!==d||ie!==L||te.current||as?(typeof q=="function"&&(kh(r,l,q,d),L=r.memoizedState),(A=as||Ed(r,l,A,d,ie,L,O))?(Q||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(r.flags|=4194308)):(typeof M.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=L),M.props=d,M.state=L,M.context=O,d=A):(typeof M.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{M=r.stateNode,fh(e,r),A=r.memoizedProps,O=r.type===r.elementType?A:ki(r.type,A),M.props=O,Q=r.pendingProps,ie=M.context,L=l.contextType,typeof L=="object"&&L!==null?L=Ei(L):(L=Pe(l)?Te:xe.current,L=Se(r,L));var re=l.getDerivedStateFromProps;(q=typeof re=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(A!==Q||ie!==L)&&kd(r,M,d,L),as=!1,ie=r.memoizedState,M.state=ie,Pc(r,d,M,x);var fe=r.memoizedState;A!==Q||ie!==fe||te.current||as?(typeof re=="function"&&(kh(r,l,re,d),fe=r.memoizedState),(O=as||Ed(r,l,O,d,ie,fe,L)||!1)?(q||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(d,fe,L),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(d,fe,L)),typeof M.componentDidUpdate=="function"&&(r.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof M.componentDidUpdate!="function"||A===e.memoizedProps&&ie===e.memoizedState||(r.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||A===e.memoizedProps&&ie===e.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=fe),M.props=d,M.state=fe,M.context=L,d=O):(typeof M.componentDidUpdate!="function"||A===e.memoizedProps&&ie===e.memoizedState||(r.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||A===e.memoizedProps&&ie===e.memoizedState||(r.flags|=1024),d=!1)}return Bu(e,r,l,d,S,x)}function Bu(e,r,l,d,x,S){Ad(e,r);var M=(r.flags&128)!==0;if(!d&&!M)return x&&et(r,l,!1),us(e,r,S);d=r.stateNode,zp.current=r;var A=M&&typeof l.getDerivedStateFromError!="function"?null:d.render();return r.flags|=1,e!==null&&M?(r.child=Qi(r,e.child,null,S),r.child=Qi(r,null,A,S)):ni(e,r,A,S),r.memoizedState=d.state,x&&et(r,l,!0),r.child}function Ld(e){var r=e.stateNode;r.pendingContext?He(e,r.pendingContext,r.pendingContext!==r.context):r.context&&He(e,r.context,!1),gh(e,r.containerInfo)}function zd(e,r,l,d,x){return Ir(),Os(x),r.flags|=256,ni(e,r,l,d),r.child}var Ih={dehydrated:null,treeContext:null,retryLane:0};function Ah(e){return{baseLanes:e,cachePool:null,transitions:null}}function jd(e,r,l){var d=r.pendingProps,x=Hn.current,S=!1,M=(r.flags&128)!==0,A;if((A=M)||(A=e!==null&&e.memoizedState===null?!1:(x&2)!==0),A?(S=!0,r.flags&=-129):(e===null||e.memoizedState!==null)&&(x|=1),se(Hn,x&1),e===null)return Mo(r),e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((r.mode&1)===0?r.lanes=1:e.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(M=d.children,e=d.fallback,S?(d=r.mode,S=r.child,M={mode:"hidden",children:M},(d&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=M):S=Yl(M,d,0,null),e=Qs(e,d,l,null),S.return=r,e.return=r,S.sibling=e,r.child=S,r.child.memoizedState=Ah(l),r.memoizedState=Ih,e):Lh(r,M));if(x=e.memoizedState,x!==null&&(A=x.dehydrated,A!==null))return zh(e,r,M,d,A,x,l);if(S){S=d.fallback,M=r.mode,x=e.child,A=x.sibling;var L={mode:"hidden",children:d.children};return(M&1)===0&&r.child!==x?(d=r.child,d.childLanes=0,d.pendingProps=L,r.deletions=null):(d=ps(x,L),d.subtreeFlags=x.subtreeFlags&14680064),A!==null?S=ps(A,S):(S=Qs(S,M,l,null),S.flags|=2),S.return=r,d.return=r,d.sibling=S,r.child=d,d=S,S=r.child,M=e.child.memoizedState,M=M===null?Ah(l):{baseLanes:M.baseLanes|l,cachePool:null,transitions:M.transitions},S.memoizedState=M,S.childLanes=e.childLanes&~l,r.memoizedState=Ih,d}return S=e.child,e=S.sibling,d=ps(S,{mode:"visible",children:d.children}),(r.mode&1)===0&&(d.lanes=l),d.return=r,d.sibling=null,e!==null&&(l=r.deletions,l===null?(r.deletions=[e],r.flags|=16):l.push(e)),r.child=d,r.memoizedState=null,d}function Lh(e,r){return r=Yl({mode:"visible",children:r},e.mode,0,null),r.return=e,e.child=r}function Nc(e,r,l,d){return d!==null&&Os(d),Qi(r,e.child,null,l),e=Lh(r,r.pendingProps.children),e.flags|=2,r.memoizedState=null,e}function zh(e,r,l,d,x,S,M){if(l)return r.flags&256?(r.flags&=-257,d=Ru(Error(v(422))),Nc(e,r,M,d)):r.memoizedState!==null?(r.child=e.child,r.flags|=128,null):(S=d.fallback,x=r.mode,d=Yl({mode:"visible",children:d.children},x,0,null),S=Qs(S,x,M,null),S.flags|=2,d.return=r,S.return=r,d.sibling=S,r.child=d,(r.mode&1)!==0&&Qi(r,e.child,null,M),r.child.memoizedState=Ah(M),r.memoizedState=Ih,S);if((r.mode&1)===0)return Nc(e,r,M,null);if(x.data==="$!"){if(d=x.nextSibling&&x.nextSibling.dataset,d)var A=d.dgst;return d=A,S=Error(v(419)),d=Ru(S,d,void 0),Nc(e,r,M,d)}if(A=(M&e.childLanes)!==0,di||A){if(d=xr,d!==null){switch(M&-M){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=(x&(d.suspendedLanes|M))!==0?0:x,x!==0&&x!==S.retryLane&&(S.retryLane=x,to(e,x),so(d,e,x,-1))}return Kl(),d=Ru(Error(v(421))),Nc(e,r,M,d)}return x.data==="$?"?(r.flags|=128,r.child=e.child,r=Np.bind(null,e),x._reactRetry=r,null):(e=S.treeContext,Ht=ui(x.nextSibling),on=r,Jt=!0,Nn=null,e!==null&&(Kn[Vn++]=$r,Kn[Vn++]=jn,Kn[Vn++]=gr,$r=e.id,jn=e.overflow,gr=r),r=Lh(r,d.children),r.flags|=4096,r)}function Rd(e,r,l){e.lanes|=r;var d=e.alternate;d!==null&&(d.lanes|=r),Jn(e.return,r,l)}function Fu(e,r,l,d,x){var S=e.memoizedState;S===null?e.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:x}:(S.isBackwards=r,S.rendering=null,S.renderingStartTime=0,S.last=d,S.tail=l,S.tailMode=x)}function jh(e,r,l){var d=r.pendingProps,x=d.revealOrder,S=d.tail;if(ni(e,r,d.children,l),d=Hn.current,(d&2)!==0)d=d&1|2,r.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=r.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Rd(e,l,r);else if(e.tag===19)Rd(e,l,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break e;for(;e.sibling===null;){if(e.return===null||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}d&=1}if(se(Hn,d),(r.mode&1)===0)r.memoizedState=null;else switch(x){case"forwards":for(l=r.child,x=null;l!==null;)e=l.alternate,e!==null&&Ll(e)===null&&(x=l),l=l.sibling;l=x,l===null?(x=r.child,r.child=null):(x=l.sibling,l.sibling=null),Fu(r,!1,x,l,S);break;case"backwards":for(l=null,x=r.child,r.child=null;x!==null;){if(e=x.alternate,e!==null&&Ll(e)===null){r.child=x;break}e=x.sibling,x.sibling=l,l=x,x=e}Fu(r,!0,l,null,S);break;case"together":Fu(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Bc(e,r){(r.mode&1)===0&&e!==null&&(e.alternate=null,r.alternate=null,r.flags|=2)}function us(e,r,l){if(e!==null&&(r.dependencies=e.dependencies),Ha|=r.lanes,(l&r.childLanes)===0)return null;if(e!==null&&r.child!==e.child)throw Error(v(153));if(r.child!==null){for(e=r.child,l=ps(e,e.pendingProps),r.child=l,l.return=r;e.sibling!==null;)e=e.sibling,l=l.sibling=ps(e,e.pendingProps),l.return=r;l.sibling=null}return r.child}function jp(e,r,l){switch(r.tag){case 3:Ld(r),Ir();break;case 5:Ur(r);break;case 1:Pe(r.type)&&at(r);break;case 4:gh(r,r.stateNode.containerInfo);break;case 10:var d=r.type._context,x=r.memoizedProps.value;se(hi,d._currentValue),d._currentValue=x;break;case 13:if(d=r.memoizedState,d!==null)return d.dehydrated!==null?(se(Hn,Hn.current&1),r.flags|=128,null):(l&r.child.childLanes)!==0?jd(e,r,l):(se(Hn,Hn.current&1),e=us(e,r,l),e!==null?e.sibling:null);se(Hn,Hn.current&1);break;case 19:if(d=(l&r.childLanes)!==0,(e.flags&128)!==0){if(d)return jh(e,r,l);r.flags|=128}if(x=r.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),se(Hn,Hn.current),d)break;return null;case 22:case 23:return r.lanes=0,Id(e,r,l)}return us(e,r,l)}var Dd,Ou,Nd,Bd;Dd=function(e,r){for(var l=r.child;l!==null;){if(l.tag===5||l.tag===6)e.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break;for(;l.sibling===null;){if(l.return===null||l.return===r)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Ou=function(){},Nd=function(e,r,l,d){var x=e.memoizedProps;if(x!==d){e=r.stateNode,zo(Lo.current);var S=null;switch(l){case"input":x=si(e,x),d=si(e,d),S=[];break;case"select":x=nt({},x,{value:void 0}),d=nt({},d,{value:void 0}),S=[];break;case"textarea":x=Sn(e,x),d=Sn(e,d),S=[];break;default:typeof x.onClick!="function"&&typeof d.onClick=="function"&&(e.onclick=Ns)}Ye(l,d);var M;l=null;for(O in x)if(!d.hasOwnProperty(O)&&x.hasOwnProperty(O)&&x[O]!=null)if(O==="style"){var A=x[O];for(M in A)A.hasOwnProperty(M)&&(l||(l={}),l[M]="")}else O!=="dangerouslySetInnerHTML"&&O!=="children"&&O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&O!=="autoFocus"&&(E.hasOwnProperty(O)?S||(S=[]):(S=S||[]).push(O,null));for(O in d){var L=d[O];if(A=x!=null?x[O]:void 0,d.hasOwnProperty(O)&&L!==A&&(L!=null||A!=null))if(O==="style")if(A){for(M in A)!A.hasOwnProperty(M)||L&&L.hasOwnProperty(M)||(l||(l={}),l[M]="");for(M in L)L.hasOwnProperty(M)&&A[M]!==L[M]&&(l||(l={}),l[M]=L[M])}else l||(S||(S=[]),S.push(O,l)),l=L;else O==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,A=A?A.__html:void 0,L!=null&&A!==L&&(S=S||[]).push(O,L)):O==="children"?typeof L!="string"&&typeof L!="number"||(S=S||[]).push(O,""+L):O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&(E.hasOwnProperty(O)?(L!=null&&O==="onScroll"&&hn("scroll",e),S||A===L||(S=[])):(S=S||[]).push(O,L))}l&&(S=S||[]).push("style",l);var O=S;(r.updateQueue=O)&&(r.flags|=4)}},Bd=function(e,r,l,d){l!==d&&(r.flags|=4)};function hs(e,r){if(!Jt)switch(e.tailMode){case"hidden":r=e.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?e.tail=null:l.sibling=null;break;case"collapsed":l=e.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?r||e.tail===null?e.tail=null:e.tail.sibling=null:d.sibling=null}}function gn(e){var r=e.alternate!==null&&e.alternate.child===e.child,l=0,d=0;if(r)for(var x=e.child;x!==null;)l|=x.lanes|x.childLanes,d|=x.subtreeFlags&14680064,d|=x.flags&14680064,x.return=e,x=x.sibling;else for(x=e.child;x!==null;)l|=x.lanes|x.childLanes,d|=x.subtreeFlags,d|=x.flags,x.return=e,x=x.sibling;return e.subtreeFlags|=d,e.childLanes=l,r}function Rh(e,r,l){var d=r.pendingProps;switch(cn(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gn(r),null;case 1:return Pe(r.type)&&Re(),gn(r),null;case 3:return d=r.stateNode,Al(),Z(te),Z(xe),Na(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(e===null||e.child===null)&&(Fs(r)?r.flags|=4:e===null||e.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Nn!==null&&(qc(Nn),Nn=null))),Ou(e,r),gn(r),null;case 5:Ar(r);var x=zo(Us.current);if(l=r.type,e!==null&&r.stateNode!=null)Nd(e,r,l,d,x),e.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!d){if(r.stateNode===null)throw Error(v(166));return gn(r),null}if(e=zo(Lo.current),Fs(r)){d=r.stateNode,l=r.type;var S=r.memoizedProps;switch(d[s]=r,d[h]=S,e=(r.mode&1)!==0,l){case"dialog":hn("cancel",d),hn("close",d);break;case"iframe":case"object":case"embed":hn("load",d);break;case"video":case"audio":for(x=0;x<rs.length;x++)hn(rs[x],d);break;case"source":hn("error",d);break;case"img":case"image":case"link":hn("error",d),hn("load",d);break;case"details":hn("toggle",d);break;case"input":Je(d,S),hn("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!S.multiple},hn("invalid",d);break;case"textarea":rr(d,S),hn("invalid",d)}Ye(l,S),x=null;for(var M in S)if(S.hasOwnProperty(M)){var A=S[M];M==="children"?typeof A=="string"?d.textContent!==A&&(S.suppressHydrationWarning!==!0&&So(d.textContent,A,e),x=["children",A]):typeof A=="number"&&d.textContent!==""+A&&(S.suppressHydrationWarning!==!0&&So(d.textContent,A,e),x=["children",""+A]):E.hasOwnProperty(M)&&A!=null&&M==="onScroll"&&hn("scroll",d)}switch(l){case"input":br(d),ln(d,S,!0);break;case"textarea":br(d),Fr(d);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(d.onclick=Ns)}d=x,r.updateQueue=d,d!==null&&(r.flags|=4)}else{M=x.nodeType===9?x:x.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Hr(l)),e==="http://www.w3.org/1999/xhtml"?l==="script"?(e=M.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof d.is=="string"?e=M.createElement(l,{is:d.is}):(e=M.createElement(l),l==="select"&&(M=e,d.multiple?M.multiple=!0:d.size&&(M.size=d.size))):e=M.createElementNS(e,l),e[s]=r,e[h]=d,Dd(e,r,!1,!1),r.stateNode=e;e:{switch(M=Bt(l,d),l){case"dialog":hn("cancel",e),hn("close",e),x=d;break;case"iframe":case"object":case"embed":hn("load",e),x=d;break;case"video":case"audio":for(x=0;x<rs.length;x++)hn(rs[x],e);x=d;break;case"source":hn("error",e),x=d;break;case"img":case"image":case"link":hn("error",e),hn("load",e),x=d;break;case"details":hn("toggle",e),x=d;break;case"input":Je(e,d),x=si(e,d),hn("invalid",e);break;case"option":x=d;break;case"select":e._wrapperState={wasMultiple:!!d.multiple},x=nt({},d,{value:void 0}),hn("invalid",e);break;case"textarea":rr(e,d),x=Sn(e,d),hn("invalid",e);break;default:x=d}Ye(l,x),A=x;for(S in A)if(A.hasOwnProperty(S)){var L=A[S];S==="style"?ai(e,L):S==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&Er(e,L)):S==="children"?typeof L=="string"?(l!=="textarea"||L!=="")&&ir(e,L):typeof L=="number"&&ir(e,""+L):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(E.hasOwnProperty(S)?L!=null&&S==="onScroll"&&hn("scroll",e):L!=null&&Ee(e,S,L,M))}switch(l){case"input":br(e),ln(e,d,!1);break;case"textarea":br(e),Fr(e);break;case"option":d.value!=null&&e.setAttribute("value",""+Yt(d.value));break;case"select":e.multiple=!!d.multiple,S=d.value,S!=null?Sr(e,!!d.multiple,S,!1):d.defaultValue!=null&&Sr(e,!!d.multiple,d.defaultValue,!0);break;default:typeof x.onClick=="function"&&(e.onclick=Ns)}switch(l){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return gn(r),null;case 6:if(e&&r.stateNode!=null)Bd(e,r,e.memoizedProps,d);else{if(typeof d!="string"&&r.stateNode===null)throw Error(v(166));if(l=zo(Us.current),zo(Lo.current),Fs(r)){if(d=r.stateNode,l=r.memoizedProps,d[s]=r,(S=d.nodeValue!==l)&&(e=on,e!==null))switch(e.tag){case 3:So(d.nodeValue,l,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&So(d.nodeValue,l,(e.mode&1)!==0)}S&&(r.flags|=4)}else d=(l.nodeType===9?l:l.ownerDocument).createTextNode(d),d[s]=r,r.stateNode=d}return gn(r),null;case 13:if(Z(Hn),d=r.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Jt&&Ht!==null&&(r.mode&1)!==0&&(r.flags&128)===0)ja(),Ir(),r.flags|=98560,S=!1;else if(S=Fs(r),d!==null&&d.dehydrated!==null){if(e===null){if(!S)throw Error(v(318));if(S=r.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(v(317));S[s]=r}else Ir(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;gn(r),S=!1}else Nn!==null&&(qc(Nn),Nn=null),S=!0;if(!S)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=l,r):(d=d!==null,d!==(e!==null&&e.memoizedState!==null)&&d&&(r.child.flags|=8192,(r.mode&1)!==0&&(e===null||(Hn.current&1)!==0?sr===0&&(sr=3):Kl())),r.updateQueue!==null&&(r.flags|=4),gn(r),null);case 4:return Al(),Ou(e,r),e===null&&bo(r.stateNode.containerInfo),gn(r),null;case 10:return Tu(r.type._context),gn(r),null;case 17:return Pe(r.type)&&Re(),gn(r),null;case 19:if(Z(Hn),S=r.memoizedState,S===null)return gn(r),null;if(d=(r.flags&128)!==0,M=S.rendering,M===null)if(d)hs(S,!1);else{if(sr!==0||e!==null&&(e.flags&128)!==0)for(e=r.child;e!==null;){if(M=Ll(e),M!==null){for(r.flags|=128,hs(S,!1),d=M.updateQueue,d!==null&&(r.updateQueue=d,r.flags|=4),r.subtreeFlags=0,d=l,l=r.child;l!==null;)S=l,e=d,S.flags&=14680066,M=S.alternate,M===null?(S.childLanes=0,S.lanes=e,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=M.childLanes,S.lanes=M.lanes,S.child=M.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=M.memoizedProps,S.memoizedState=M.memoizedState,S.updateQueue=M.updateQueue,S.type=M.type,e=M.dependencies,S.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),l=l.sibling;return se(Hn,Hn.current&1|2),r.child}e=e.sibling}S.tail!==null&&ot()>Ga&&(r.flags|=128,d=!0,hs(S,!1),r.lanes=4194304)}else{if(!d)if(e=Ll(M),e!==null){if(r.flags|=128,d=!0,l=e.updateQueue,l!==null&&(r.updateQueue=l,r.flags|=4),hs(S,!0),S.tail===null&&S.tailMode==="hidden"&&!M.alternate&&!Jt)return gn(r),null}else 2*ot()-S.renderingStartTime>Ga&&l!==1073741824&&(r.flags|=128,d=!0,hs(S,!1),r.lanes=4194304);S.isBackwards?(M.sibling=r.child,r.child=M):(l=S.last,l!==null?l.sibling=M:r.child=M,S.last=M)}return S.tail!==null?(r=S.tail,S.rendering=r,S.tail=r.sibling,S.renderingStartTime=ot(),r.sibling=null,l=Hn.current,se(Hn,d?l&1|2:l&1),r):(gn(r),null);case 22:case 23:return qu(),d=r.memoizedState!==null,e!==null&&e.memoizedState!==null!==d&&(r.flags|=8192),d&&(r.mode&1)!==0?(pi&1073741824)!==0&&(gn(r),r.subtreeFlags&6&&(r.flags|=8192)):gn(r),null;case 24:return null;case 25:return null}throw Error(v(156,r.tag))}function Fd(e,r){switch(cn(r),r.tag){case 1:return Pe(r.type)&&Re(),e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 3:return Al(),Z(te),Z(xe),Na(),e=r.flags,(e&65536)!==0&&(e&128)===0?(r.flags=e&-65537|128,r):null;case 5:return Ar(r),null;case 13:if(Z(Hn),e=r.memoizedState,e!==null&&e.dehydrated!==null){if(r.alternate===null)throw Error(v(340));Ir()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 19:return Z(Hn),null;case 4:return Al(),null;case 10:return Tu(r.type._context),null;case 22:case 23:return qu(),null;case 24:return null;default:return null}}var Fc=!1,Xt=!1,qs=typeof WeakSet=="function"?WeakSet:Set,xt=null;function $a(e,r){var l=e.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(d){qn(e,r,d)}else l.current=null}function $u(e,r,l){try{l()}catch(d){qn(e,r,d)}}var Do=!1;function Hl(e,r){if(Xn=bs,e=yu(),Sl(e)){if("selectionStart"in e)var l={start:e.selectionStart,end:e.selectionEnd};else e:{l=(l=e.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var x=d.anchorOffset,S=d.focusNode;d=d.focusOffset;try{l.nodeType,S.nodeType}catch{l=null;break e}var M=0,A=-1,L=-1,O=0,q=0,Q=e,ie=null;t:for(;;){for(var re;Q!==l||x!==0&&Q.nodeType!==3||(A=M+x),Q!==S||d!==0&&Q.nodeType!==3||(L=M+d),Q.nodeType===3&&(M+=Q.nodeValue.length),(re=Q.firstChild)!==null;)ie=Q,Q=re;for(;;){if(Q===e)break t;if(ie===l&&++O===x&&(A=M),ie===S&&++q===d&&(L=M),(re=Q.nextSibling)!==null)break;Q=ie,ie=Q.parentNode}Q=re}l=A===-1||L===-1?null:{start:A,end:L}}else l=null}l=l||{start:0,end:0}}else l=null;for(Yi={focusedElem:e,selectionRange:l},bs=!1,xt=r;xt!==null;)if(r=xt,e=r.child,(r.subtreeFlags&1028)!==0&&e!==null)e.return=r,xt=e;else for(;xt!==null;){r=xt;try{var fe=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var we=fe.memoizedProps,je=fe.memoizedState,ue=r.stateNode,ne=ue.getSnapshotBeforeUpdate(r.elementType===r.type?we:ki(r.type,we),je);ue.__reactInternalSnapshotBeforeUpdate=ne}break;case 3:var ce=r.stateNode.containerInfo;ce.nodeType===1?ce.textContent="":ce.nodeType===9&&ce.documentElement&&ce.removeChild(ce.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(v(163))}}catch(be){qn(r,r.return,be)}if(e=r.sibling,e!==null){e.return=r.return,xt=e;break}xt=r.return}return fe=Do,Do=!1,fe}function Gl(e,r,l){var d=r.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var x=d=d.next;do{if((x.tag&e)===e){var S=x.destroy;x.destroy=void 0,S!==void 0&&$u(r,l,S)}x=x.next}while(x!==d)}}function Uu(e,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do{if((l.tag&e)===e){var d=l.create;l.destroy=d()}l=l.next}while(l!==r)}}function Dh(e){var r=e.ref;if(r!==null){var l=e.stateNode;switch(e.tag){case 5:e=l;break;default:e=l}typeof r=="function"?r(e):r.current=e}}function Od(e){var r=e.alternate;r!==null&&(e.alternate=null,Od(r)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(r=e.stateNode,r!==null&&(delete r[s],delete r[h],delete r[b],delete r[T],delete r[C])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function $d(e){return e.tag===5||e.tag===3||e.tag===4}function Ud(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$d(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Nh(e,r,l){var d=e.tag;if(d===5||d===6)e=e.stateNode,r?l.nodeType===8?l.parentNode.insertBefore(e,r):l.insertBefore(e,r):(l.nodeType===8?(r=l.parentNode,r.insertBefore(e,l)):(r=l,r.appendChild(e)),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=Ns));else if(d!==4&&(e=e.child,e!==null))for(Nh(e,r,l),e=e.sibling;e!==null;)Nh(e,r,l),e=e.sibling}function Bh(e,r,l){var d=e.tag;if(d===5||d===6)e=e.stateNode,r?l.insertBefore(e,r):l.appendChild(e);else if(d!==4&&(e=e.child,e!==null))for(Bh(e,r,l),e=e.sibling;e!==null;)Bh(e,r,l),e=e.sibling}var Vr=null,no=!1;function ro(e,r,l){for(l=l.child;l!==null;)Ua(e,r,l),l=l.sibling}function Ua(e,r,l){if(bn&&typeof bn.onCommitFiberUnmount=="function")try{bn.onCommitFiberUnmount(Ln,l)}catch{}switch(l.tag){case 5:Xt||$a(l,r);case 6:var d=Vr,x=no;Vr=null,ro(e,r,l),Vr=d,no=x,Vr!==null&&(no?(e=Vr,l=l.stateNode,e.nodeType===8?e.parentNode.removeChild(l):e.removeChild(l)):Vr.removeChild(l.stateNode));break;case 18:Vr!==null&&(no?(e=Vr,l=l.stateNode,e.nodeType===8?Eo(e.parentNode,l):e.nodeType===1&&Eo(e,l),ws(e)):Eo(Vr,l.stateNode));break;case 4:d=Vr,x=no,Vr=l.stateNode.containerInfo,no=!0,ro(e,r,l),Vr=d,no=x;break;case 0:case 11:case 14:case 15:if(!Xt&&(d=l.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){x=d=d.next;do{var S=x,M=S.destroy;S=S.tag,M!==void 0&&((S&2)!==0||(S&4)!==0)&&$u(l,r,M),x=x.next}while(x!==d)}ro(e,r,l);break;case 1:if(!Xt&&($a(l,r),d=l.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=l.memoizedProps,d.state=l.memoizedState,d.componentWillUnmount()}catch(A){qn(l,r,A)}ro(e,r,l);break;case 21:ro(e,r,l);break;case 22:l.mode&1?(Xt=(d=Xt)||l.memoizedState!==null,ro(e,r,l),Xt=d):ro(e,r,l);break;default:ro(e,r,l)}}function Fh(e){var r=e.updateQueue;if(r!==null){e.updateQueue=null;var l=e.stateNode;l===null&&(l=e.stateNode=new qs),r.forEach(function(d){var x=Bp.bind(null,e,d);l.has(d)||(l.add(d),d.then(x,x))})}}function io(e,r){var l=r.deletions;if(l!==null)for(var d=0;d<l.length;d++){var x=l[d];try{var S=e,M=r,A=M;e:for(;A!==null;){switch(A.tag){case 5:Vr=A.stateNode,no=!1;break e;case 3:Vr=A.stateNode.containerInfo,no=!0;break e;case 4:Vr=A.stateNode.containerInfo,no=!0;break e}A=A.return}if(Vr===null)throw Error(v(160));Ua(S,M,x),Vr=null,no=!1;var L=x.alternate;L!==null&&(L.return=null),x.return=null}catch(O){qn(x,r,O)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Vd(r,e),r=r.sibling}function Vd(e,r){var l=e.alternate,d=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(io(r,e),No(e),d&4){try{Gl(3,e,e.return),Uu(3,e)}catch(we){qn(e,e.return,we)}try{Gl(5,e,e.return)}catch(we){qn(e,e.return,we)}}break;case 1:io(r,e),No(e),d&512&&l!==null&&$a(l,l.return);break;case 5:if(io(r,e),No(e),d&512&&l!==null&&$a(l,l.return),e.flags&32){var x=e.stateNode;try{ir(x,"")}catch(we){qn(e,e.return,we)}}if(d&4&&(x=e.stateNode,x!=null)){var S=e.memoizedProps,M=l!==null?l.memoizedProps:S,A=e.type,L=e.updateQueue;if(e.updateQueue=null,L!==null)try{A==="input"&&S.type==="radio"&&S.name!=null&&Qe(x,S),Bt(A,M);var O=Bt(A,S);for(M=0;M<L.length;M+=2){var q=L[M],Q=L[M+1];q==="style"?ai(x,Q):q==="dangerouslySetInnerHTML"?Er(x,Q):q==="children"?ir(x,Q):Ee(x,q,Q,O)}switch(A){case"input":Ot(x,S);break;case"textarea":On(x,S);break;case"select":var ie=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!S.multiple;var re=S.value;re!=null?Sr(x,!!S.multiple,re,!1):ie!==!!S.multiple&&(S.defaultValue!=null?Sr(x,!!S.multiple,S.defaultValue,!0):Sr(x,!!S.multiple,S.multiple?[]:"",!1))}x[h]=S}catch(we){qn(e,e.return,we)}}break;case 6:if(io(r,e),No(e),d&4){if(e.stateNode===null)throw Error(v(162));x=e.stateNode,S=e.memoizedProps;try{x.nodeValue=S}catch(we){qn(e,e.return,we)}}break;case 3:if(io(r,e),No(e),d&4&&l!==null&&l.memoizedState.isDehydrated)try{ws(r.containerInfo)}catch(we){qn(e,e.return,we)}break;case 4:io(r,e),No(e);break;case 13:io(r,e),No(e),x=e.child,x.flags&8192&&(S=x.memoizedState!==null,x.stateNode.isHidden=S,!S||x.alternate!==null&&x.alternate.memoizedState!==null||(Hu=ot())),d&4&&Fh(e);break;case 22:if(q=l!==null&&l.memoizedState!==null,e.mode&1?(Xt=(O=Xt)||q,io(r,e),Xt=O):io(r,e),No(e),d&8192){if(O=e.memoizedState!==null,(e.stateNode.isHidden=O)&&!q&&(e.mode&1)!==0)for(xt=e,q=e.child;q!==null;){for(Q=xt=q;xt!==null;){switch(ie=xt,re=ie.child,ie.tag){case 0:case 11:case 14:case 15:Gl(4,ie,ie.return);break;case 1:$a(ie,ie.return);var fe=ie.stateNode;if(typeof fe.componentWillUnmount=="function"){d=ie,l=ie.return;try{r=d,fe.props=r.memoizedProps,fe.state=r.memoizedState,fe.componentWillUnmount()}catch(we){qn(d,l,we)}}break;case 5:$a(ie,ie.return);break;case 22:if(ie.memoizedState!==null){Oc(Q);continue}}re!==null?(re.return=ie,xt=re):Oc(Q)}q=q.sibling}e:for(q=null,Q=e;;){if(Q.tag===5){if(q===null){q=Q;try{x=Q.stateNode,O?(S=x.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(A=Q.stateNode,L=Q.memoizedProps.style,M=L!=null&&L.hasOwnProperty("display")?L.display:null,A.style.display=Qn("display",M))}catch(we){qn(e,e.return,we)}}}else if(Q.tag===6){if(q===null)try{Q.stateNode.nodeValue=O?"":Q.memoizedProps}catch(we){qn(e,e.return,we)}}else if((Q.tag!==22&&Q.tag!==23||Q.memoizedState===null||Q===e)&&Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===e)break e;for(;Q.sibling===null;){if(Q.return===null||Q.return===e)break e;q===Q&&(q=null),Q=Q.return}q===Q&&(q=null),Q.sibling.return=Q.return,Q=Q.sibling}}break;case 19:io(r,e),No(e),d&4&&Fh(e);break;case 21:break;default:io(r,e),No(e)}}function No(e){var r=e.flags;if(r&2){try{e:{for(var l=e.return;l!==null;){if($d(l)){var d=l;break e}l=l.return}throw Error(v(160))}switch(d.tag){case 5:var x=d.stateNode;d.flags&32&&(ir(x,""),d.flags&=-33);var S=Ud(e);Bh(e,S,x);break;case 3:case 4:var M=d.stateNode.containerInfo,A=Ud(e);Nh(e,A,M);break;default:throw Error(v(161))}}catch(L){qn(e,e.return,L)}e.flags&=-3}r&4096&&(e.flags&=-4097)}function Hd(e,r,l){xt=e,Vu(e)}function Vu(e,r,l){for(var d=(e.mode&1)!==0;xt!==null;){var x=xt,S=x.child;if(x.tag===22&&d){var M=x.memoizedState!==null||Fc;if(!M){var A=x.alternate,L=A!==null&&A.memoizedState!==null||Xt;A=Fc;var O=Xt;if(Fc=M,(Xt=L)&&!O)for(xt=x;xt!==null;)M=xt,L=M.child,M.tag===22&&M.memoizedState!==null?ql(x):L!==null?(L.return=M,xt=L):ql(x);for(;S!==null;)xt=S,Vu(S),S=S.sibling;xt=x,Fc=A,Xt=O}Oh(e)}else(x.subtreeFlags&8772)!==0&&S!==null?(S.return=x,xt=S):Oh(e)}}function Oh(e){for(;xt!==null;){var r=xt;if((r.flags&8772)!==0){var l=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Xt||Uu(5,r);break;case 1:var d=r.stateNode;if(r.flags&4&&!Xt)if(l===null)d.componentDidMount();else{var x=r.elementType===r.type?l.memoizedProps:ki(r.type,l.memoizedProps);d.componentDidUpdate(x,l.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var S=r.updateQueue;S!==null&&mh(r,S,d);break;case 3:var M=r.updateQueue;if(M!==null){if(l=null,r.child!==null)switch(r.child.tag){case 5:l=r.child.stateNode;break;case 1:l=r.child.stateNode}mh(r,M,l)}break;case 5:var A=r.stateNode;if(l===null&&r.flags&4){l=A;var L=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&l.focus();break;case"img":L.src&&(l.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var O=r.alternate;if(O!==null){var q=O.memoizedState;if(q!==null){var Q=q.dehydrated;Q!==null&&ws(Q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(v(163))}Xt||r.flags&512&&Dh(r)}catch(ie){qn(r,r.return,ie)}}if(r===e){xt=null;break}if(l=r.sibling,l!==null){l.return=r.return,xt=l;break}xt=r.return}}function Oc(e){for(;xt!==null;){var r=xt;if(r===e){xt=null;break}var l=r.sibling;if(l!==null){l.return=r.return,xt=l;break}xt=r.return}}function ql(e){for(;xt!==null;){var r=xt;try{switch(r.tag){case 0:case 11:case 15:var l=r.return;try{Uu(4,r)}catch(L){qn(r,l,L)}break;case 1:var d=r.stateNode;if(typeof d.componentDidMount=="function"){var x=r.return;try{d.componentDidMount()}catch(L){qn(r,x,L)}}var S=r.return;try{Dh(r)}catch(L){qn(r,S,L)}break;case 5:var M=r.return;try{Dh(r)}catch(L){qn(r,M,L)}}}catch(L){qn(r,r.return,L)}if(r===e){xt=null;break}var A=r.sibling;if(A!==null){A.return=r.return,xt=A;break}xt=r.return}}var Wl=Math.ceil,Va=Ve.ReactCurrentDispatcher,Zl=Ve.ReactCurrentOwner,Ni=Ve.ReactCurrentBatchConfig,yn=0,xr=null,hr=null,zr=0,pi=0,Ws=X(0),sr=0,$c=null,Ha=0,Uc=0,oo=0,Xl=null,ar=null,Hu=0,Ga=1/0,Bo=null,Vc=!1,$h=null,Zs=null,Hc=!1,ds=null,Gc=0,Xs=0,Gu=null,qa=-1,Wa=0;function jr(){return(yn&6)!==0?ot():qa!==-1?qa:qa=ot()}function Ks(e){return(e.mode&1)===0?1:(yn&2)!==0&&zr!==0?zr&-zr:Ra.transition!==null?(Wa===0&&(Wa=lc()),Wa):(e=fn,e!==0||(e=window.event,e=e===void 0?16:ul(e.type)),e)}function so(e,r,l,d){if(50<Xs)throw Xs=0,Gu=null,Error(v(185));xi(e,l,d),((yn&2)===0||e!==xr)&&(e===xr&&((yn&2)===0&&(Uc|=l),sr===4&&Fo(e,zr)),fi(e,d),l===1&&yn===0&&(r.mode&1)===0&&(Ga=ot()+500,Dt&&nn()))}function fi(e,r){var l=e.callbackNode;ac(e,r);var d=la(e,e===xr?zr:0);if(d===0)l!==null&&pt(l),e.callbackNode=null,e.callbackPriority=0;else if(r=d&-d,e.callbackPriority!==r){if(l!=null&&pt(l),r===1)e.tag===0?xn(Wd.bind(null,e)):wt(Wd.bind(null,e)),tr(function(){(yn&6)===0&&nn()}),l=null;else{switch(ua(d)){case 1:l=Wt;break;case 4:l=Zt;break;case 16:l=Ut;break;case 536870912:l=$n;break;default:l=Ut}l=Hh(l,Gd.bind(null,e))}e.callbackPriority=r,e.callbackNode=l}}function Gd(e,r){if(qa=-1,Wa=0,(yn&6)!==0)throw Error(v(327));var l=e.callbackNode;if(Ja()&&e.callbackNode!==l)return null;var d=la(e,e===xr?zr:0);if(d===0)return null;if((d&30)!==0||(d&e.expiredLanes)!==0||r)r=Jl(e,d);else{r=d;var x=yn;yn|=2;var S=Xd();(xr!==e||zr!==r)&&(Bo=null,Ga=ot()+500,Za(e,r));do try{Uh();break}catch(A){Zd(e,A)}while(!0);dh(),Va.current=S,yn=x,hr!==null?r=0:(xr=null,zr=0,r=sr)}if(r!==0){if(r===2&&(x=ca(e),x!==0&&(d=x,r=Js(e,x))),r===1)throw l=$c,Za(e,0),Fo(e,d),fi(e,ot()),l;if(r===6)Fo(e,d);else{if(x=e.current.alternate,(d&30)===0&&!qd(x)&&(r=Jl(e,d),r===2&&(S=ca(e),S!==0&&(d=S,r=Js(e,S))),r===1))throw l=$c,Za(e,0),Fo(e,d),fi(e,ot()),l;switch(e.finishedWork=x,e.finishedLanes=d,r){case 0:case 1:throw Error(v(345));case 2:Ka(e,ar,Bo);break;case 3:if(Fo(e,d),(d&130023424)===d&&(r=Hu+500-ot(),10<r)){if(la(e,0)!==0)break;if(x=e.suspendedLanes,(x&d)!==d){jr(),e.pingedLanes|=e.suspendedLanes&x;break}e.timeoutHandle=Mc(Ka.bind(null,e,ar,Bo),r);break}Ka(e,ar,Bo);break;case 4:if(Fo(e,d),(d&4194240)===d)break;for(r=e.eventTimes,x=-1;0<d;){var M=31-Jr(d);S=1<<M,M=r[M],M>x&&(x=M),d&=~S}if(d=x,d=ot()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*Wl(d/1960))-d,10<d){e.timeoutHandle=Mc(Ka.bind(null,e,ar,Bo),d);break}Ka(e,ar,Bo);break;case 5:Ka(e,ar,Bo);break;default:throw Error(v(329))}}}return fi(e,ot()),e.callbackNode===l?Gd.bind(null,e):null}function Js(e,r){var l=Xl;return e.current.memoizedState.isDehydrated&&(Za(e,r).flags|=256),e=Jl(e,r),e!==2&&(r=ar,ar=l,r!==null&&qc(r)),e}function qc(e){ar===null?ar=e:ar.push.apply(ar,e)}function qd(e){for(var r=e;;){if(r.flags&16384){var l=r.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var d=0;d<l.length;d++){var x=l[d],S=x.getSnapshot;x=x.value;try{if(!ci(S(),x))return!1}catch{return!1}}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Fo(e,r){for(r&=~oo,r&=~Uc,e.suspendedLanes|=r,e.pingedLanes&=~r,e=e.expirationTimes;0<r;){var l=31-Jr(r),d=1<<l;e[l]=-1,r&=~d}}function Wd(e){if((yn&6)!==0)throw Error(v(327));Ja();var r=la(e,0);if((r&1)===0)return fi(e,ot()),null;var l=Jl(e,r);if(e.tag!==0&&l===2){var d=ca(e);d!==0&&(r=d,l=Js(e,d))}if(l===1)throw l=$c,Za(e,0),Fo(e,r),fi(e,ot()),l;if(l===6)throw Error(v(345));return e.finishedWork=e.current.alternate,e.finishedLanes=r,Ka(e,ar,Bo),fi(e,ot()),null}function Oo(e,r){var l=yn;yn|=1;try{return e(r)}finally{yn=l,yn===0&&(Ga=ot()+500,Dt&&nn())}}function Ys(e){ds!==null&&ds.tag===0&&(yn&6)===0&&Ja();var r=yn;yn|=1;var l=Ni.transition,d=fn;try{if(Ni.transition=null,fn=1,e)return e()}finally{fn=d,Ni.transition=l,yn=r,(yn&6)===0&&nn()}}function qu(){pi=Ws.current,Z(Ws)}function Za(e,r){e.finishedWork=null,e.finishedLanes=0;var l=e.timeoutHandle;if(l!==-1&&(e.timeoutHandle=-1,La(l)),hr!==null)for(l=hr.return;l!==null;){var d=l;switch(cn(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&Re();break;case 3:Al(),Z(te),Z(xe),Na();break;case 5:Ar(d);break;case 4:Al();break;case 13:Z(Hn);break;case 19:Z(Hn);break;case 10:Tu(d.type._context);break;case 22:case 23:qu()}l=l.return}if(xr=e,hr=e=ps(e.current,null),zr=pi=r,sr=0,$c=null,oo=Uc=Ha=0,ar=Xl=null,Ti!==null){for(r=0;r<Ti.length;r++)if(l=Ti[r],d=l.interleaved,d!==null){l.interleaved=null;var x=d.next,S=l.pending;if(S!==null){var M=S.next;S.next=x,d.next=M}l.pending=d}Ti=null}return e}function Zd(e,r){do{var l=hr;try{if(dh(),Pu.current=Ol,Ic){for(var d=Bn.memoizedState;d!==null;){var x=d.queue;x!==null&&(x.pending=null),d=d.next}Ic=!1}if(Vs=0,vr=ur=Bn=null,Ac=!1,Ba=0,Zl.current=null,l===null||l.return===null){sr=1,$c=r,hr=null;break}e:{var S=e,M=l.return,A=l,L=r;if(r=zr,A.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var O=L,q=A,Q=q.tag;if((q.mode&1)===0&&(Q===0||Q===11||Q===15)){var ie=q.alternate;ie?(q.updateQueue=ie.updateQueue,q.memoizedState=ie.memoizedState,q.lanes=ie.lanes):(q.updateQueue=null,q.memoizedState=null)}var re=Ch(M);if(re!==null){re.flags&=-257,Pd(re,M,A,S,r),re.mode&1&&Mh(S,O,r),r=re,L=O;var fe=r.updateQueue;if(fe===null){var we=new Set;we.add(L),r.updateQueue=we}else fe.add(L);break e}else{if((r&1)===0){Mh(S,O,r),Kl();break e}L=Error(v(426))}}else if(Jt&&A.mode&1){var je=Ch(M);if(je!==null){(je.flags&65536)===0&&(je.flags|=256),Pd(je,M,A,S,r),Os($l(L,A));break e}}S=L=$l(L,A),sr!==4&&(sr=2),Xl===null?Xl=[S]:Xl.push(S),S=M;do{switch(S.tag){case 3:S.flags|=65536,r&=-r,S.lanes|=r;var ue=Md(S,L,r);Mu(S,ue);break e;case 1:A=L;var ne=S.type,ce=S.stateNode;if((S.flags&128)===0&&(typeof ne.getDerivedStateFromError=="function"||ce!==null&&typeof ce.componentDidCatch=="function"&&(Zs===null||!Zs.has(ce)))){S.flags|=65536,r&=-r,S.lanes|=r;var be=Cd(S,A,r);Mu(S,be);break e}}S=S.return}while(S!==null)}Xa(l)}catch(Ie){r=Ie,hr===l&&l!==null&&(hr=l=l.return);continue}break}while(!0)}function Xd(){var e=Va.current;return Va.current=Ol,e===null?Ol:e}function Kl(){(sr===0||sr===3||sr===2)&&(sr=4),xr===null||(Ha&268435455)===0&&(Uc&268435455)===0||Fo(xr,zr)}function Jl(e,r){var l=yn;yn|=2;var d=Xd();(xr!==e||zr!==r)&&(Bo=null,Za(e,r));do try{Rp();break}catch(x){Zd(e,x)}while(!0);if(dh(),yn=l,Va.current=d,hr!==null)throw Error(v(261));return xr=null,zr=0,sr}function Rp(){for(;hr!==null;)Wu(hr)}function Uh(){for(;hr!==null&&!ct();)Wu(hr)}function Wu(e){var r=Jd(e.alternate,e,pi);e.memoizedProps=e.pendingProps,r===null?Xa(e):hr=r,Zl.current=null}function Xa(e){var r=e;do{var l=r.alternate;if(e=r.return,(r.flags&32768)===0){if(l=Rh(l,r,pi),l!==null){hr=l;return}}else{if(l=Fd(l,r),l!==null){l.flags&=32767,hr=l;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{sr=6,hr=null;return}}if(r=r.sibling,r!==null){hr=r;return}hr=r=e}while(r!==null);sr===0&&(sr=5)}function Ka(e,r,l){var d=fn,x=Ni.transition;try{Ni.transition=null,fn=1,Vh(e,r,l,d)}finally{Ni.transition=x,fn=d}return null}function Vh(e,r,l,d){do Ja();while(ds!==null);if((yn&6)!==0)throw Error(v(327));l=e.finishedWork;var x=e.finishedLanes;if(l===null)return null;if(e.finishedWork=null,e.finishedLanes=0,l===e.current)throw Error(v(177));e.callbackNode=null,e.callbackPriority=0;var S=l.lanes|l.childLanes;if(sl(e,S),e===xr&&(hr=xr=null,zr=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Hc||(Hc=!0,Hh(Ut,function(){return Ja(),null})),S=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||S){S=Ni.transition,Ni.transition=null;var M=fn;fn=1;var A=yn;yn|=4,Zl.current=null,Hl(e,l),Vd(l,e),ns(Yi),bs=!!Xn,Yi=Xn=null,e.current=l,Hd(l),yt(),yn=A,fn=M,Ni.transition=S}else e.current=l;if(Hc&&(Hc=!1,ds=e,Gc=x),S=e.pendingLanes,S===0&&(Zs=null),mr(l.stateNode),fi(e,ot()),r!==null)for(d=e.onRecoverableError,l=0;l<r.length;l++)x=r[l],d(x.value,{componentStack:x.stack,digest:x.digest});if(Vc)throw Vc=!1,e=$h,$h=null,e;return(Gc&1)!==0&&e.tag!==0&&Ja(),S=e.pendingLanes,(S&1)!==0?e===Gu?Xs++:(Xs=0,Gu=e):Xs=0,nn(),null}function Ja(){if(ds!==null){var e=ua(Gc),r=Ni.transition,l=fn;try{if(Ni.transition=null,fn=16>e?16:e,ds===null)var d=!1;else{if(e=ds,ds=null,Gc=0,(yn&6)!==0)throw Error(v(331));var x=yn;for(yn|=4,xt=e.current;xt!==null;){var S=xt,M=S.child;if((xt.flags&16)!==0){var A=S.deletions;if(A!==null){for(var L=0;L<A.length;L++){var O=A[L];for(xt=O;xt!==null;){var q=xt;switch(q.tag){case 0:case 11:case 15:Gl(8,q,S)}var Q=q.child;if(Q!==null)Q.return=q,xt=Q;else for(;xt!==null;){q=xt;var ie=q.sibling,re=q.return;if(Od(q),q===O){xt=null;break}if(ie!==null){ie.return=re,xt=ie;break}xt=re}}}var fe=S.alternate;if(fe!==null){var we=fe.child;if(we!==null){fe.child=null;do{var je=we.sibling;we.sibling=null,we=je}while(we!==null)}}xt=S}}if((S.subtreeFlags&2064)!==0&&M!==null)M.return=S,xt=M;else e:for(;xt!==null;){if(S=xt,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:Gl(9,S,S.return)}var ue=S.sibling;if(ue!==null){ue.return=S.return,xt=ue;break e}xt=S.return}}var ne=e.current;for(xt=ne;xt!==null;){M=xt;var ce=M.child;if((M.subtreeFlags&2064)!==0&&ce!==null)ce.return=M,xt=ce;else e:for(M=ne;xt!==null;){if(A=xt,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:Uu(9,A)}}catch(Ie){qn(A,A.return,Ie)}if(A===M){xt=null;break e}var be=A.sibling;if(be!==null){be.return=A.return,xt=be;break e}xt=A.return}}if(yn=x,nn(),bn&&typeof bn.onPostCommitFiberRoot=="function")try{bn.onPostCommitFiberRoot(Ln,e)}catch{}d=!0}return d}finally{fn=l,Ni.transition=r}}return!1}function Wc(e,r,l){r=$l(l,r),r=Md(e,r,1),e=Io(e,r,1),r=jr(),e!==null&&(xi(e,1,r),fi(e,r))}function qn(e,r,l){if(e.tag===3)Wc(e,e,l);else for(;r!==null;){if(r.tag===3){Wc(r,e,l);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Zs===null||!Zs.has(d))){e=$l(l,e),e=Cd(r,e,1),r=Io(r,e,1),e=jr(),r!==null&&(xi(r,1,e),fi(r,e));break}}r=r.return}}function Dp(e,r,l){var d=e.pingCache;d!==null&&d.delete(r),r=jr(),e.pingedLanes|=e.suspendedLanes&l,xr===e&&(zr&l)===l&&(sr===4||sr===3&&(zr&130023424)===zr&&500>ot()-Hu?Za(e,0):oo|=l),fi(e,r)}function Kd(e,r){r===0&&((e.mode&1)===0?r=1:(r=il,il<<=1,(il&130023424)===0&&(il=4194304)));var l=jr();e=to(e,r),e!==null&&(xi(e,r,l),fi(e,l))}function Np(e){var r=e.memoizedState,l=0;r!==null&&(l=r.retryLane),Kd(e,l)}function Bp(e,r){var l=0;switch(e.tag){case 13:var d=e.stateNode,x=e.memoizedState;x!==null&&(l=x.retryLane);break;case 19:d=e.stateNode;break;default:throw Error(v(314))}d!==null&&d.delete(r),Kd(e,l)}var Jd;Jd=function(e,r,l){if(e!==null)if(e.memoizedProps!==r.pendingProps||te.current)di=!0;else{if((e.lanes&l)===0&&(r.flags&128)===0)return di=!1,jp(e,r,l);di=(e.flags&131072)!==0}else di=!1,Jt&&(r.flags&1048576)!==0&&To(r,Pr,r.index);switch(r.lanes=0,r.tag){case 2:var d=r.type;Bc(e,r),e=r.pendingProps;var x=Se(r,xe.current);$s(r,l),x=ti(null,r,d,e,x,l);var S=Au();return r.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Pe(d)?(S=!0,at(r)):S=!1,r.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,ph(r),x.updater=ju,r.stateNode=x,x._reactInternals=r,Ro(r,d,e,l),r=Bu(null,r,d,!0,S,l)):(r.tag=0,Jt&&S&&Bs(r),ni(null,r,x,l),r=r.child),r;case 16:d=r.elementType;e:{switch(Bc(e,r),e=r.pendingProps,x=d._init,d=x(d._payload),r.type=d,x=r.tag=Yd(d),e=ki(d,e),x){case 0:r=Ph(null,r,d,e,l);break e;case 1:r=Vl(null,r,d,e,l);break e;case 11:r=Du(null,r,d,e,l);break e;case 14:r=Ul(null,r,d,ki(d.type,e),l);break e}throw Error(v(306,d,""))}return r;case 0:return d=r.type,x=r.pendingProps,x=r.elementType===d?x:ki(d,x),Ph(e,r,d,x,l);case 1:return d=r.type,x=r.pendingProps,x=r.elementType===d?x:ki(d,x),Vl(e,r,d,x,l);case 3:e:{if(Ld(r),e===null)throw Error(v(387));d=r.pendingProps,S=r.memoizedState,x=S.element,fh(e,r),Pc(r,d,null,l);var M=r.memoizedState;if(d=M.element,S.isDehydrated)if(S={element:d,isDehydrated:!1,cache:M.cache,pendingSuspenseBoundaries:M.pendingSuspenseBoundaries,transitions:M.transitions},r.updateQueue.baseState=S,r.memoizedState=S,r.flags&256){x=$l(Error(v(423)),r),r=zd(e,r,d,l,x);break e}else if(d!==x){x=$l(Error(v(424)),r),r=zd(e,r,d,l,x);break e}else for(Ht=ui(r.stateNode.containerInfo.firstChild),on=r,Jt=!0,Nn=null,l=Po(r,null,d,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Ir(),d===x){r=us(e,r,l);break e}ni(e,r,d,l)}r=r.child}return r;case 5:return Ur(r),e===null&&Mo(r),d=r.type,x=r.pendingProps,S=e!==null?e.memoizedProps:null,M=x.children,Cr(d,x)?M=null:S!==null&&Cr(d,S)&&(r.flags|=32),Ad(e,r),ni(e,r,M,l),r.child;case 6:return e===null&&Mo(r),null;case 13:return jd(e,r,l);case 4:return gh(r,r.stateNode.containerInfo),d=r.pendingProps,e===null?r.child=Qi(r,null,d,l):ni(e,r,d,l),r.child;case 11:return d=r.type,x=r.pendingProps,x=r.elementType===d?x:ki(d,x),Du(e,r,d,x,l);case 7:return ni(e,r,r.pendingProps,l),r.child;case 8:return ni(e,r,r.pendingProps.children,l),r.child;case 12:return ni(e,r,r.pendingProps.children,l),r.child;case 10:e:{if(d=r.type._context,x=r.pendingProps,S=r.memoizedProps,M=x.value,se(hi,d._currentValue),d._currentValue=M,S!==null)if(ci(S.value,M)){if(S.children===x.children&&!te.current){r=us(e,r,l);break e}}else for(S=r.child,S!==null&&(S.return=r);S!==null;){var A=S.dependencies;if(A!==null){M=S.child;for(var L=A.firstContext;L!==null;){if(L.context===d){if(S.tag===1){L=ls(-1,l&-l),L.tag=2;var O=S.updateQueue;if(O!==null){O=O.shared;var q=O.pending;q===null?L.next=L:(L.next=q.next,q.next=L),O.pending=L}}S.lanes|=l,L=S.alternate,L!==null&&(L.lanes|=l),Jn(S.return,l,r),A.lanes|=l;break}L=L.next}}else if(S.tag===10)M=S.type===r.type?null:S.child;else if(S.tag===18){if(M=S.return,M===null)throw Error(v(341));M.lanes|=l,A=M.alternate,A!==null&&(A.lanes|=l),Jn(M,l,r),M=S.sibling}else M=S.child;if(M!==null)M.return=S;else for(M=S;M!==null;){if(M===r){M=null;break}if(S=M.sibling,S!==null){S.return=M.return,M=S;break}M=M.return}S=M}ni(e,r,x.children,l),r=r.child}return r;case 9:return x=r.type,d=r.pendingProps.children,$s(r,l),x=Ei(x),d=d(x),r.flags|=1,ni(e,r,d,l),r.child;case 14:return d=r.type,x=ki(d,r.pendingProps),x=ki(d.type,x),Ul(e,r,d,x,l);case 15:return Nu(e,r,r.type,r.pendingProps,l);case 17:return d=r.type,x=r.pendingProps,x=r.elementType===d?x:ki(d,x),Bc(e,r),r.tag=1,Pe(d)?(e=!0,at(r)):e=!1,$s(r,l),Td(r,d,x),Ro(r,d,x,l),Bu(null,r,d,!0,e,l);case 19:return jh(e,r,l);case 22:return Id(e,r,l)}throw Error(v(156,r.tag))};function Hh(e,r){return Oe(e,r)}function Wn(e,r,l,d){this.tag=e,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rr(e,r,l,d){return new Wn(e,r,l,d)}function Zu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Yd(e){if(typeof e=="function")return Zu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Rt)return 11;if(e===Pt)return 14}return 2}function ps(e,r){var l=e.alternate;return l===null?(l=Rr(e.tag,r,e.key,e.mode),l.elementType=e.elementType,l.type=e.type,l.stateNode=e.stateNode,l.alternate=e,e.alternate=l):(l.pendingProps=r,l.type=e.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=e.flags&14680064,l.childLanes=e.childLanes,l.lanes=e.lanes,l.child=e.child,l.memoizedProps=e.memoizedProps,l.memoizedState=e.memoizedState,l.updateQueue=e.updateQueue,r=e.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=e.sibling,l.index=e.index,l.ref=e.ref,l}function Zc(e,r,l,d,x,S){var M=2;if(d=e,typeof e=="function")Zu(e)&&(M=1);else if(typeof e=="string")M=5;else e:switch(e){case it:return Qs(l.children,x,S,r);case Ge:M=8,x|=8;break;case kt:return e=Rr(12,l,r,x|2),e.elementType=kt,e.lanes=S,e;case At:return e=Rr(13,l,r,x),e.elementType=At,e.lanes=S,e;case mt:return e=Rr(19,l,r,x),e.elementType=mt,e.lanes=S,e;case It:return Yl(l,x,S,r);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case _t:M=10;break e;case Ct:M=9;break e;case Rt:M=11;break e;case Pt:M=14;break e;case Xe:M=16,d=null;break e}throw Error(v(130,e==null?e:typeof e,""))}return r=Rr(M,l,r,x),r.elementType=e,r.type=d,r.lanes=S,r}function Qs(e,r,l,d){return e=Rr(7,e,d,r),e.lanes=l,e}function Yl(e,r,l,d){return e=Rr(22,e,d,r),e.elementType=It,e.lanes=l,e.stateNode={isHidden:!1},e}function Ql(e,r,l){return e=Rr(6,e,null,r),e.lanes=l,e}function Xu(e,r,l){return r=Rr(4,e.children!==null?e.children:[],e.key,r),r.lanes=l,r.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},r}function Gh(e,r,l,d,x){this.tag=r,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ol(0),this.expirationTimes=ol(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ol(0),this.identifierPrefix=d,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function Ku(e,r,l,d,x,S,M,A,L){return e=new Gh(e,r,l,A,L),r===1?(r=1,S===!0&&(r|=8)):r=0,S=Rr(3,null,null,r),e.current=S,S.stateNode=e,S.memoizedState={element:d,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},ph(S),e}function Mi(e,r,l){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:tt,key:d==null?null:""+d,children:e,containerInfo:r,implementation:l}}function ec(e){if(!e)return ge;e=e._reactInternals;e:{if(pe(e)!==e||e.tag!==1)throw Error(v(170));var r=e;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Pe(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(v(171))}if(e.tag===1){var l=e.type;if(Pe(l))return ze(e,l,r)}return r}function qh(e,r,l,d,x,S,M,A,L){return e=Ku(l,d,!0,e,x,S,M,A,L),e.context=ec(null),l=e.current,d=jr(),x=Ks(l),S=ls(d,x),S.callback=r??null,Io(l,S,x),e.current.lanes=x,xi(e,x,d),fi(e,d),e}function Xc(e,r,l,d){var x=r.current,S=jr(),M=Ks(x);return l=ec(l),r.context===null?r.context=l:r.pendingContext=l,r=ls(S,M),r.payload={element:e},d=d===void 0?null:d,d!==null&&(r.callback=d),e=Io(x,r,M),e!==null&&(so(e,x,M,S),ku(e,x,M)),M}function Kc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Wh(e,r){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var l=e.retryLane;e.retryLane=l!==0&&l<r?l:r}}function Ju(e,r){Wh(e,r),(e=e.alternate)&&Wh(e,r)}function Qd(){return null}var ep=typeof reportError=="function"?reportError:function(e){console.error(e)};function Jc(e){this._internalRoot=e}Ya.prototype.render=Jc.prototype.render=function(e){var r=this._internalRoot;if(r===null)throw Error(v(409));Xc(e,r,null,null)},Ya.prototype.unmount=Jc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var r=e.containerInfo;Ys(function(){Xc(null,e,null,null)}),r[m]=null}};function Ya(e){this._internalRoot=e}Ya.prototype.unstable_scheduleHydration=function(e){if(e){var r=xs();e={blockedOn:null,target:e,priority:r};for(var l=0;l<ho.length&&r!==0&&r<ho[l].priority;l++);ho.splice(l,0,e),l===0&&hc(e)}};function Qa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function tc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function tp(){}function i(e,r,l,d,x){if(x){if(typeof d=="function"){var S=d;d=function(){var O=Kc(M);S.call(O)}}var M=qh(r,d,e,0,null,!1,!1,"",tp);return e._reactRootContainer=M,e[m]=M.current,bo(e.nodeType===8?e.parentNode:e),Ys(),M}for(;x=e.lastChild;)e.removeChild(x);if(typeof d=="function"){var A=d;d=function(){var O=Kc(L);A.call(O)}}var L=Ku(e,0,!1,null,null,!1,!1,"",tp);return e._reactRootContainer=L,e[m]=L.current,bo(e.nodeType===8?e.parentNode:e),Ys(function(){Xc(r,L,l,d)}),L}function t(e,r,l,d,x){var S=l._reactRootContainer;if(S){var M=S;if(typeof x=="function"){var A=x;x=function(){var L=Kc(M);A.call(L)}}Xc(r,M,e,x)}else M=i(l,r,e,x,d);return Kc(M)}ha=function(e){switch(e.tag){case 3:var r=e.stateNode;if(r.current.memoizedState.isDehydrated){var l=qo(r.pendingLanes);l!==0&&(uo(r,l|1),fi(r,ot()),(yn&6)===0&&(Ga=ot()+500,nn()))}break;case 13:Ys(function(){var d=to(e,1);if(d!==null){var x=jr();so(d,e,1,x)}}),Ju(e,1)}},Wo=function(e){if(e.tag===13){var r=to(e,134217728);if(r!==null){var l=jr();so(r,e,134217728,l)}Ju(e,134217728)}},da=function(e){if(e.tag===13){var r=Ks(e),l=to(e,r);if(l!==null){var d=jr();so(l,e,r,d)}Ju(e,r)}},xs=function(){return fn},zn=function(e,r){var l=fn;try{return fn=e,r()}finally{fn=l}},lr=function(e,r,l){switch(r){case"input":if(Ot(e,l),r=l.name,l.type==="radio"&&r!=null){for(l=e;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<l.length;r++){var d=l[r];if(d!==e&&d.form===e.form){var x=B(d);if(!x)throw Error(v(90));nr(d),Ot(d,x)}}}break;case"textarea":On(e,l);break;case"select":r=l.value,r!=null&&Sr(e,!!l.multiple,r,!1)}},$t=Oo,mn=Ys;var o={usingClientEntryPoint:!1,Events:[z,R,B,Ne,St,Oo]},u={findFiberByHostInstance:I,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},g={bundleType:u.bundleType,version:u.version,rendererPackageName:u.rendererPackageName,rendererConfig:u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ve.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ae(e),e===null?null:e.stateNode},findFiberByHostInstance:u.findFiberByHostInstance||Qd,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_.isDisabled&&_.supportsFiber)try{Ln=_.inject(g),bn=_}catch{}}return Fi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o,Fi.createPortal=function(e,r){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qa(r))throw Error(v(200));return Mi(e,r,null,l)},Fi.createRoot=function(e,r){if(!Qa(e))throw Error(v(299));var l=!1,d="",x=ep;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onRecoverableError!==void 0&&(x=r.onRecoverableError)),r=Ku(e,1,!1,null,null,l,!1,d,x),e[m]=r.current,bo(e.nodeType===8?e.parentNode:e),new Jc(r)},Fi.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var r=e._reactInternals;if(r===void 0)throw typeof e.render=="function"?Error(v(188)):(e=Object.keys(e).join(","),Error(v(268,e)));return e=Ae(r),e=e===null?null:e.stateNode,e},Fi.flushSync=function(e){return Ys(e)},Fi.hydrate=function(e,r,l){if(!tc(r))throw Error(v(200));return t(null,e,r,!0,l)},Fi.hydrateRoot=function(e,r,l){if(!Qa(e))throw Error(v(405));var d=l!=null&&l.hydratedSources||null,x=!1,S="",M=ep;if(l!=null&&(l.unstable_strictMode===!0&&(x=!0),l.identifierPrefix!==void 0&&(S=l.identifierPrefix),l.onRecoverableError!==void 0&&(M=l.onRecoverableError)),r=qh(r,null,e,1,l??null,x,!1,S,M),e[m]=r.current,bo(e),d)for(e=0;e<d.length;e++)l=d[e],x=l._getVersion,x=x(l._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[l,x]:r.mutableSourceEagerHydrationData.push(l,x);return new Ya(r)},Fi.render=function(e,r,l){if(!tc(r))throw Error(v(200));return t(null,e,r,!1,l)},Fi.unmountComponentAtNode=function(e){if(!tc(e))throw Error(v(40));return e._reactRootContainer?(Ys(function(){t(null,null,e,!1,function(){e._reactRootContainer=null,e[m]=null})}),!0):!1},Fi.unstable_batchedUpdates=Oo,Fi.unstable_renderSubtreeIntoContainer=function(e,r,l,d){if(!tc(l))throw Error(v(200));if(e==null||e._reactInternals===void 0)throw Error(v(38));return t(e,r,l,!1,d)},Fi.version="18.3.1-next-f1338f8080-20240426",Fi}var tm;function ug(){if(tm)return Gp.exports;tm=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(p){console.error(p)}}return a(),Gp.exports=V0(),Gp.exports}var nm;function H0(){if(nm)return rp;nm=1;var a=ug();return rp.createRoot=a.createRoot,rp.hydrateRoot=a.hydrateRoot,rp}var G0=H0();const q0=vp(G0);var uf=function(a,p){return uf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,w){v.__proto__=w}||function(v,w){for(var E in w)Object.prototype.hasOwnProperty.call(w,E)&&(v[E]=w[E])},uf(a,p)};function Vo(a,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");uf(a,p);function v(){this.constructor=a}a.prototype=p===null?Object.create(p):(v.prototype=p.prototype,new v)}var Tt=function(){return Tt=Object.assign||function(p){for(var v,w=1,E=arguments.length;w<E;w++){v=arguments[w];for(var k in v)Object.prototype.hasOwnProperty.call(v,k)&&(p[k]=v[k])}return p},Tt.apply(this,arguments)};function Yu(a,p){var v={};for(var w in a)Object.prototype.hasOwnProperty.call(a,w)&&p.indexOf(w)<0&&(v[w]=a[w]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var E=0,w=Object.getOwnPropertySymbols(a);E<w.length;E++)p.indexOf(w[E])<0&&Object.prototype.propertyIsEnumerable.call(a,w[E])&&(v[w[E]]=a[w[E]]);return v}function ia(a,p,v){if(v||arguments.length===2)for(var w=0,E=p.length,k;w<E;w++)(k||!(w in p))&&(k||(k=Array.prototype.slice.call(p,0,w)),k[w]=p[w]);return a.concat(k||Array.prototype.slice.call(p))}function na(a,p){var v=p&&p.cache?p.cache:Q0,w=p&&p.serializer?p.serializer:J0,E=p&&p.strategy?p.strategy:X0;return E(a,{cache:v,serializer:w})}function W0(a){return a==null||typeof a=="number"||typeof a=="boolean"}function Z0(a,p,v,w){var E=W0(w)?w:v(w),k=p.get(E);return typeof k>"u"&&(k=a.call(this,w),p.set(E,k)),k}function hg(a,p,v){var w=Array.prototype.slice.call(arguments,3),E=v(w),k=p.get(E);return typeof k>"u"&&(k=a.apply(this,w),p.set(E,k)),k}function dg(a,p,v,w,E){return v.bind(p,a,w,E)}function X0(a,p){var v=a.length===1?Z0:hg;return dg(a,this,v,p.cache.create(),p.serializer)}function K0(a,p){return dg(a,this,hg,p.cache.create(),p.serializer)}var J0=function(){return JSON.stringify(arguments)},Y0=function(){function a(){this.cache=Object.create(null)}return a.prototype.get=function(p){return this.cache[p]},a.prototype.set=function(p,v){this.cache[p]=v},a}(),Q0={create:function(){return new Y0}},ra={variadic:K0},_n;(function(a){a[a.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",a[a.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",a[a.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",a[a.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",a[a.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",a[a.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",a[a.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",a[a.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",a[a.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",a[a.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",a[a.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",a[a.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",a[a.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",a[a.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",a[a.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",a[a.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",a[a.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",a[a.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",a[a.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",a[a.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",a[a.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",a[a.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",a[a.INVALID_TAG=23]="INVALID_TAG",a[a.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",a[a.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",a[a.UNCLOSED_TAG=27]="UNCLOSED_TAG"})(_n||(_n={}));var Yn;(function(a){a[a.literal=0]="literal",a[a.argument=1]="argument",a[a.number=2]="number",a[a.date=3]="date",a[a.time=4]="time",a[a.select=5]="select",a[a.plural=6]="plural",a[a.pound=7]="pound",a[a.tag=8]="tag"})(Yn||(Yn={}));var Qu;(function(a){a[a.number=0]="number",a[a.dateTime=1]="dateTime"})(Qu||(Qu={}));function rm(a){return a.type===Yn.literal}function ey(a){return a.type===Yn.argument}function pg(a){return a.type===Yn.number}function fg(a){return a.type===Yn.date}function mg(a){return a.type===Yn.time}function gg(a){return a.type===Yn.select}function yg(a){return a.type===Yn.plural}function ty(a){return a.type===Yn.pound}function vg(a){return a.type===Yn.tag}function xg(a){return!!(a&&typeof a=="object"&&a.type===Qu.number)}function hf(a){return!!(a&&typeof a=="object"&&a.type===Qu.dateTime)}var _g=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,ny=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function ry(a){var p={};return a.replace(ny,function(v){var w=v.length;switch(v[0]){case"G":p.era=w===4?"long":w===5?"narrow":"short";break;case"y":p.year=w===2?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":p.month=["numeric","2-digit","short","long","narrow"][w-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":p.day=["numeric","2-digit"][w-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":p.weekday=w===4?"long":w===5?"narrow":"short";break;case"e":if(w<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");p.weekday=["short","long","narrow","short"][w-4];break;case"c":if(w<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");p.weekday=["short","long","narrow","short"][w-4];break;case"a":p.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":p.hourCycle="h12",p.hour=["numeric","2-digit"][w-1];break;case"H":p.hourCycle="h23",p.hour=["numeric","2-digit"][w-1];break;case"K":p.hourCycle="h11",p.hour=["numeric","2-digit"][w-1];break;case"k":p.hourCycle="h24",p.hour=["numeric","2-digit"][w-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":p.minute=["numeric","2-digit"][w-1];break;case"s":p.second=["numeric","2-digit"][w-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":p.timeZoneName=w<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),p}var iy=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function oy(a){if(a.length===0)throw new Error("Number skeleton cannot be empty");for(var p=a.split(iy).filter(function(U){return U.length>0}),v=[],w=0,E=p;w<E.length;w++){var k=E[w],P=k.split("/");if(P.length===0)throw new Error("Invalid number skeleton");for(var c=P[0],F=P.slice(1),N=0,V=F;N<V.length;N++){var $=V[N];if($.length===0)throw new Error("Invalid number skeleton")}v.push({stem:c,options:F})}return v}function sy(a){return a.replace(/^(.*?)-/,"")}var im=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,wg=/^(@+)?(\+|#+)?[rs]?$/g,ay=/(\*)(0+)|(#+)(0+)|(0+)/g,bg=/^(0+)$/;function om(a){var p={};return a[a.length-1]==="r"?p.roundingPriority="morePrecision":a[a.length-1]==="s"&&(p.roundingPriority="lessPrecision"),a.replace(wg,function(v,w,E){return typeof E!="string"?(p.minimumSignificantDigits=w.length,p.maximumSignificantDigits=w.length):E==="+"?p.minimumSignificantDigits=w.length:w[0]==="#"?p.maximumSignificantDigits=w.length:(p.minimumSignificantDigits=w.length,p.maximumSignificantDigits=w.length+(typeof E=="string"?E.length:0)),""}),p}function Sg(a){switch(a){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function ly(a){var p;if(a[0]==="E"&&a[1]==="E"?(p={notation:"engineering"},a=a.slice(2)):a[0]==="E"&&(p={notation:"scientific"},a=a.slice(1)),p){var v=a.slice(0,2);if(v==="+!"?(p.signDisplay="always",a=a.slice(2)):v==="+?"&&(p.signDisplay="exceptZero",a=a.slice(2)),!bg.test(a))throw new Error("Malformed concise eng/scientific notation");p.minimumIntegerDigits=a.length}return p}function sm(a){var p={},v=Sg(a);return v||p}function cy(a){for(var p={},v=0,w=a;v<w.length;v++){var E=w[v];switch(E.stem){case"percent":case"%":p.style="percent";continue;case"%x100":p.style="percent",p.scale=100;continue;case"currency":p.style="currency",p.currency=E.options[0];continue;case"group-off":case",_":p.useGrouping=!1;continue;case"precision-integer":case".":p.maximumFractionDigits=0;continue;case"measure-unit":case"unit":p.style="unit",p.unit=sy(E.options[0]);continue;case"compact-short":case"K":p.notation="compact",p.compactDisplay="short";continue;case"compact-long":case"KK":p.notation="compact",p.compactDisplay="long";continue;case"scientific":p=Tt(Tt(Tt({},p),{notation:"scientific"}),E.options.reduce(function(F,N){return Tt(Tt({},F),sm(N))},{}));continue;case"engineering":p=Tt(Tt(Tt({},p),{notation:"engineering"}),E.options.reduce(function(F,N){return Tt(Tt({},F),sm(N))},{}));continue;case"notation-simple":p.notation="standard";continue;case"unit-width-narrow":p.currencyDisplay="narrowSymbol",p.unitDisplay="narrow";continue;case"unit-width-short":p.currencyDisplay="code",p.unitDisplay="short";continue;case"unit-width-full-name":p.currencyDisplay="name",p.unitDisplay="long";continue;case"unit-width-iso-code":p.currencyDisplay="symbol";continue;case"scale":p.scale=parseFloat(E.options[0]);continue;case"rounding-mode-floor":p.roundingMode="floor";continue;case"rounding-mode-ceiling":p.roundingMode="ceil";continue;case"rounding-mode-down":p.roundingMode="trunc";continue;case"rounding-mode-up":p.roundingMode="expand";continue;case"rounding-mode-half-even":p.roundingMode="halfEven";continue;case"rounding-mode-half-down":p.roundingMode="halfTrunc";continue;case"rounding-mode-half-up":p.roundingMode="halfExpand";continue;case"integer-width":if(E.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");E.options[0].replace(ay,function(F,N,V,$,U,me){if(N)p.minimumIntegerDigits=V.length;else{if($&&U)throw new Error("We currently do not support maximum integer digits");if(me)throw new Error("We currently do not support exact integer digits")}return""});continue}if(bg.test(E.stem)){p.minimumIntegerDigits=E.stem.length;continue}if(im.test(E.stem)){if(E.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");E.stem.replace(im,function(F,N,V,$,U,me){return V==="*"?p.minimumFractionDigits=N.length:$&&$[0]==="#"?p.maximumFractionDigits=$.length:U&&me?(p.minimumFractionDigits=U.length,p.maximumFractionDigits=U.length+me.length):(p.minimumFractionDigits=N.length,p.maximumFractionDigits=N.length),""});var k=E.options[0];k==="w"?p=Tt(Tt({},p),{trailingZeroDisplay:"stripIfInteger"}):k&&(p=Tt(Tt({},p),om(k)));continue}if(wg.test(E.stem)){p=Tt(Tt({},p),om(E.stem));continue}var P=Sg(E.stem);P&&(p=Tt(Tt({},p),P));var c=ly(E.stem);c&&(p=Tt(Tt({},p),c))}return p}var ip={"001":["H","h"],419:["h","H","hB","hb"],AC:["H","h","hb","hB"],AD:["H","hB"],AE:["h","hB","hb","H"],AF:["H","hb","hB","h"],AG:["h","hb","H","hB"],AI:["H","h","hb","hB"],AL:["h","H","hB"],AM:["H","hB"],AO:["H","hB"],AR:["h","H","hB","hb"],AS:["h","H"],AT:["H","hB"],AU:["h","hb","H","hB"],AW:["H","hB"],AX:["H"],AZ:["H","hB","h"],BA:["H","hB","h"],BB:["h","hb","H","hB"],BD:["h","hB","H"],BE:["H","hB"],BF:["H","hB"],BG:["H","hB","h"],BH:["h","hB","hb","H"],BI:["H","h"],BJ:["H","hB"],BL:["H","hB"],BM:["h","hb","H","hB"],BN:["hb","hB","h","H"],BO:["h","H","hB","hb"],BQ:["H"],BR:["H","hB"],BS:["h","hb","H","hB"],BT:["h","H"],BW:["H","h","hb","hB"],BY:["H","h"],BZ:["H","h","hb","hB"],CA:["h","hb","H","hB"],CC:["H","h","hb","hB"],CD:["hB","H"],CF:["H","h","hB"],CG:["H","hB"],CH:["H","hB","h"],CI:["H","hB"],CK:["H","h","hb","hB"],CL:["h","H","hB","hb"],CM:["H","h","hB"],CN:["H","hB","hb","h"],CO:["h","H","hB","hb"],CP:["H"],CR:["h","H","hB","hb"],CU:["h","H","hB","hb"],CV:["H","hB"],CW:["H","hB"],CX:["H","h","hb","hB"],CY:["h","H","hb","hB"],CZ:["H"],DE:["H","hB"],DG:["H","h","hb","hB"],DJ:["h","H"],DK:["H"],DM:["h","hb","H","hB"],DO:["h","H","hB","hb"],DZ:["h","hB","hb","H"],EA:["H","h","hB","hb"],EC:["h","H","hB","hb"],EE:["H","hB"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],ER:["h","H"],ES:["H","hB","h","hb"],ET:["hB","hb","h","H"],FI:["H"],FJ:["h","hb","H","hB"],FK:["H","h","hb","hB"],FM:["h","hb","H","hB"],FO:["H","h"],FR:["H","hB"],GA:["H","hB"],GB:["H","h","hb","hB"],GD:["h","hb","H","hB"],GE:["H","hB","h"],GF:["H","hB"],GG:["H","h","hb","hB"],GH:["h","H"],GI:["H","h","hb","hB"],GL:["H","h"],GM:["h","hb","H","hB"],GN:["H","hB"],GP:["H","hB"],GQ:["H","hB","h","hb"],GR:["h","H","hb","hB"],GT:["h","H","hB","hb"],GU:["h","hb","H","hB"],GW:["H","hB"],GY:["h","hb","H","hB"],HK:["h","hB","hb","H"],HN:["h","H","hB","hb"],HR:["H","hB"],HU:["H","h"],IC:["H","h","hB","hb"],ID:["H"],IE:["H","h","hb","hB"],IL:["H","hB"],IM:["H","h","hb","hB"],IN:["h","H"],IO:["H","h","hb","hB"],IQ:["h","hB","hb","H"],IR:["hB","H"],IS:["H"],IT:["H","hB"],JE:["H","h","hb","hB"],JM:["h","hb","H","hB"],JO:["h","hB","hb","H"],JP:["H","K","h"],KE:["hB","hb","H","h"],KG:["H","h","hB","hb"],KH:["hB","h","H","hb"],KI:["h","hb","H","hB"],KM:["H","h","hB","hb"],KN:["h","hb","H","hB"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],KW:["h","hB","hb","H"],KY:["h","hb","H","hB"],KZ:["H","hB"],LA:["H","hb","hB","h"],LB:["h","hB","hb","H"],LC:["h","hb","H","hB"],LI:["H","hB","h"],LK:["H","h","hB","hb"],LR:["h","hb","H","hB"],LS:["h","H"],LT:["H","h","hb","hB"],LU:["H","h","hB"],LV:["H","hB","hb","h"],LY:["h","hB","hb","H"],MA:["H","h","hB","hb"],MC:["H","hB"],MD:["H","hB"],ME:["H","hB","h"],MF:["H","hB"],MG:["H","h"],MH:["h","hb","H","hB"],MK:["H","h","hb","hB"],ML:["H"],MM:["hB","hb","H","h"],MN:["H","h","hb","hB"],MO:["h","hB","hb","H"],MP:["h","hb","H","hB"],MQ:["H","hB"],MR:["h","hB","hb","H"],MS:["H","h","hb","hB"],MT:["H","h"],MU:["H","h"],MV:["H","h"],MW:["h","hb","H","hB"],MX:["h","H","hB","hb"],MY:["hb","hB","h","H"],MZ:["H","hB"],NA:["h","H","hB","hb"],NC:["H","hB"],NE:["H"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NI:["h","H","hB","hb"],NL:["H","hB"],NO:["H","h"],NP:["H","h","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],NZ:["h","hb","H","hB"],OM:["h","hB","hb","H"],PA:["h","H","hB","hb"],PE:["h","H","hB","hb"],PF:["H","h","hB"],PG:["h","H"],PH:["h","hB","hb","H"],PK:["h","hB","H"],PL:["H","h"],PM:["H","hB"],PN:["H","h","hb","hB"],PR:["h","H","hB","hb"],PS:["h","hB","hb","H"],PT:["H","hB"],PW:["h","H"],PY:["h","H","hB","hb"],QA:["h","hB","hb","H"],RE:["H","hB"],RO:["H","hB"],RS:["H","hB","h"],RU:["H"],RW:["H","h"],SA:["h","hB","hb","H"],SB:["h","hb","H","hB"],SC:["H","h","hB"],SD:["h","hB","hb","H"],SE:["H"],SG:["h","hb","H","hB"],SH:["H","h","hb","hB"],SI:["H","hB"],SJ:["H"],SK:["H"],SL:["h","hb","H","hB"],SM:["H","h","hB"],SN:["H","h","hB"],SO:["h","H"],SR:["H","hB"],SS:["h","hb","H","hB"],ST:["H","hB"],SV:["h","H","hB","hb"],SX:["H","h","hb","hB"],SY:["h","hB","hb","H"],SZ:["h","hb","H","hB"],TA:["H","h","hb","hB"],TC:["h","hb","H","hB"],TD:["h","H","hB"],TF:["H","h","hB"],TG:["H","hB"],TH:["H","h"],TJ:["H","h"],TL:["H","hB","hb","h"],TM:["H","h"],TN:["h","hB","hb","H"],TO:["h","H"],TR:["H","hB"],TT:["h","hb","H","hB"],TW:["hB","hb","h","H"],TZ:["hB","hb","H","h"],UA:["H","hB","h"],UG:["hB","hb","H","h"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],UY:["h","H","hB","hb"],UZ:["H","hB","h"],VA:["H","h","hB"],VC:["h","hb","H","hB"],VE:["h","H","hB","hb"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],VN:["H","h"],VU:["h","H"],WF:["H","hB"],WS:["h","H"],XK:["H","hB","h"],YE:["h","hB","hb","H"],YT:["H","hB"],ZA:["H","h","hb","hB"],ZM:["h","hb","H","hB"],ZW:["H","h"],"af-ZA":["H","h","hB","hb"],"ar-001":["h","hB","hb","H"],"ca-ES":["H","h","hB"],"en-001":["h","hb","H","hB"],"en-HK":["h","hb","H","hB"],"en-IL":["H","h","hb","hB"],"en-MY":["h","hb","H","hB"],"es-BR":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"gu-IN":["hB","hb","h","H"],"hi-IN":["hB","h","H"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],"ta-IN":["hB","h","hb","H"],"te-IN":["hB","h","H"],"zu-ZA":["H","hB","hb","h"]};function uy(a,p){for(var v="",w=0;w<a.length;w++){var E=a.charAt(w);if(E==="j"){for(var k=0;w+1<a.length&&a.charAt(w+1)===E;)k++,w++;var P=1+(k&1),c=k<2?1:3+(k>>1),F="a",N=hy(p);for((N=="H"||N=="k")&&(c=0);c-- >0;)v+=F;for(;P-- >0;)v=N+v}else E==="J"?v+="H":v+=E}return v}function hy(a){var p=a.hourCycle;if(p===void 0&&a.hourCycles&&a.hourCycles.length&&(p=a.hourCycles[0]),p)switch(p){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var v=a.language,w;v!=="root"&&(w=a.maximize().region);var E=ip[w||""]||ip[v||""]||ip["".concat(v,"-001")]||ip["001"];return E[0]}var Zp,dy=new RegExp("^".concat(_g.source,"*")),py=new RegExp("".concat(_g.source,"*$"));function wn(a,p){return{start:a,end:p}}var fy=!!String.prototype.startsWith&&"_a".startsWith("a",1),my=!!String.fromCodePoint,gy=!!Object.fromEntries,yy=!!String.prototype.codePointAt,vy=!!String.prototype.trimStart,xy=!!String.prototype.trimEnd,_y=!!Number.isSafeInteger,wy=_y?Number.isSafeInteger:function(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a&&Math.abs(a)<=9007199254740991},df=!0;try{var by=Tg("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");df=((Zp=by.exec("a"))===null||Zp===void 0?void 0:Zp[0])==="a"}catch{df=!1}var am=fy?function(p,v,w){return p.startsWith(v,w)}:function(p,v,w){return p.slice(w,w+v.length)===v},pf=my?String.fromCodePoint:function(){for(var p=[],v=0;v<arguments.length;v++)p[v]=arguments[v];for(var w="",E=p.length,k=0,P;E>k;){if(P=p[k++],P>1114111)throw RangeError(P+" is not a valid code point");w+=P<65536?String.fromCharCode(P):String.fromCharCode(((P-=65536)>>10)+55296,P%1024+56320)}return w},lm=gy?Object.fromEntries:function(p){for(var v={},w=0,E=p;w<E.length;w++){var k=E[w],P=k[0],c=k[1];v[P]=c}return v},Eg=yy?function(p,v){return p.codePointAt(v)}:function(p,v){var w=p.length;if(!(v<0||v>=w)){var E=p.charCodeAt(v),k;return E<55296||E>56319||v+1===w||(k=p.charCodeAt(v+1))<56320||k>57343?E:(E-55296<<10)+(k-56320)+65536}},Sy=vy?function(p){return p.trimStart()}:function(p){return p.replace(dy,"")},Ey=xy?function(p){return p.trimEnd()}:function(p){return p.replace(py,"")};function Tg(a,p){return new RegExp(a,p)}var ff;if(df){var cm=Tg("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");ff=function(p,v){var w;cm.lastIndex=v;var E=cm.exec(p);return(w=E[1])!==null&&w!==void 0?w:""}}else ff=function(p,v){for(var w=[];;){var E=Eg(p,v);if(E===void 0||kg(E)||Cy(E))break;w.push(E),v+=E>=65536?2:1}return pf.apply(void 0,w)};var Ty=function(){function a(p,v){v===void 0&&(v={}),this.message=p,this.position={offset:0,line:1,column:1},this.ignoreTag=!!v.ignoreTag,this.locale=v.locale,this.requiresOtherClause=!!v.requiresOtherClause,this.shouldParseSkeletons=!!v.shouldParseSkeletons}return a.prototype.parse=function(){if(this.offset()!==0)throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},a.prototype.parseMessage=function(p,v,w){for(var E=[];!this.isEOF();){var k=this.char();if(k===123){var P=this.parseArgument(p,w);if(P.err)return P;E.push(P.val)}else{if(k===125&&p>0)break;if(k===35&&(v==="plural"||v==="selectordinal")){var c=this.clonePosition();this.bump(),E.push({type:Yn.pound,location:wn(c,this.clonePosition())})}else if(k===60&&!this.ignoreTag&&this.peek()===47){if(w)break;return this.error(_n.UNMATCHED_CLOSING_TAG,wn(this.clonePosition(),this.clonePosition()))}else if(k===60&&!this.ignoreTag&&mf(this.peek()||0)){var P=this.parseTag(p,v);if(P.err)return P;E.push(P.val)}else{var P=this.parseLiteral(p,v);if(P.err)return P;E.push(P.val)}}}return{val:E,err:null}},a.prototype.parseTag=function(p,v){var w=this.clonePosition();this.bump();var E=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:Yn.literal,value:"<".concat(E,"/>"),location:wn(w,this.clonePosition())},err:null};if(this.bumpIf(">")){var k=this.parseMessage(p+1,v,!0);if(k.err)return k;var P=k.val,c=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!mf(this.char()))return this.error(_n.INVALID_TAG,wn(c,this.clonePosition()));var F=this.clonePosition(),N=this.parseTagName();return E!==N?this.error(_n.UNMATCHED_CLOSING_TAG,wn(F,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:Yn.tag,value:E,children:P,location:wn(w,this.clonePosition())},err:null}:this.error(_n.INVALID_TAG,wn(c,this.clonePosition())))}else return this.error(_n.UNCLOSED_TAG,wn(w,this.clonePosition()))}else return this.error(_n.INVALID_TAG,wn(w,this.clonePosition()))},a.prototype.parseTagName=function(){var p=this.offset();for(this.bump();!this.isEOF()&&My(this.char());)this.bump();return this.message.slice(p,this.offset())},a.prototype.parseLiteral=function(p,v){for(var w=this.clonePosition(),E="";;){var k=this.tryParseQuote(v);if(k){E+=k;continue}var P=this.tryParseUnquoted(p,v);if(P){E+=P;continue}var c=this.tryParseLeftAngleBracket();if(c){E+=c;continue}break}var F=wn(w,this.clonePosition());return{val:{type:Yn.literal,value:E,location:F},err:null}},a.prototype.tryParseLeftAngleBracket=function(){return!this.isEOF()&&this.char()===60&&(this.ignoreTag||!ky(this.peek()||0))?(this.bump(),"<"):null},a.prototype.tryParseQuote=function(p){if(this.isEOF()||this.char()!==39)return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if(p==="plural"||p==="selectordinal")break;return null;default:return null}this.bump();var v=[this.char()];for(this.bump();!this.isEOF();){var w=this.char();if(w===39)if(this.peek()===39)v.push(39),this.bump();else{this.bump();break}else v.push(w);this.bump()}return pf.apply(void 0,v)},a.prototype.tryParseUnquoted=function(p,v){if(this.isEOF())return null;var w=this.char();return w===60||w===123||w===35&&(v==="plural"||v==="selectordinal")||w===125&&p>0?null:(this.bump(),pf(w))},a.prototype.parseArgument=function(p,v){var w=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(_n.EXPECT_ARGUMENT_CLOSING_BRACE,wn(w,this.clonePosition()));if(this.char()===125)return this.bump(),this.error(_n.EMPTY_ARGUMENT,wn(w,this.clonePosition()));var E=this.parseIdentifierIfPossible().value;if(!E)return this.error(_n.MALFORMED_ARGUMENT,wn(w,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(_n.EXPECT_ARGUMENT_CLOSING_BRACE,wn(w,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:Yn.argument,value:E,location:wn(w,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(_n.EXPECT_ARGUMENT_CLOSING_BRACE,wn(w,this.clonePosition())):this.parseArgumentOptions(p,v,E,w);default:return this.error(_n.MALFORMED_ARGUMENT,wn(w,this.clonePosition()))}},a.prototype.parseIdentifierIfPossible=function(){var p=this.clonePosition(),v=this.offset(),w=ff(this.message,v),E=v+w.length;this.bumpTo(E);var k=this.clonePosition(),P=wn(p,k);return{value:w,location:P}},a.prototype.parseArgumentOptions=function(p,v,w,E){var k,P=this.clonePosition(),c=this.parseIdentifierIfPossible().value,F=this.clonePosition();switch(c){case"":return this.error(_n.EXPECT_ARGUMENT_TYPE,wn(P,F));case"number":case"date":case"time":{this.bumpSpace();var N=null;if(this.bumpIf(",")){this.bumpSpace();var V=this.clonePosition(),$=this.parseSimpleArgStyleIfPossible();if($.err)return $;var U=Ey($.val);if(U.length===0)return this.error(_n.EXPECT_ARGUMENT_STYLE,wn(this.clonePosition(),this.clonePosition()));var me=wn(V,this.clonePosition());N={style:U,styleLocation:me}}var he=this.tryParseArgumentClose(E);if(he.err)return he;var J=wn(E,this.clonePosition());if(N&&am(N==null?void 0:N.style,"::",0)){var oe=Sy(N.style.slice(2));if(c==="number"){var $=this.parseNumberSkeletonFromString(oe,N.styleLocation);return $.err?$:{val:{type:Yn.number,value:w,location:J,style:$.val},err:null}}else{if(oe.length===0)return this.error(_n.EXPECT_DATE_TIME_SKELETON,J);var _e=oe;this.locale&&(_e=uy(oe,this.locale));var U={type:Qu.dateTime,pattern:_e,location:N.styleLocation,parsedOptions:this.shouldParseSkeletons?ry(_e):{}},ke=c==="date"?Yn.date:Yn.time;return{val:{type:ke,value:w,location:J,style:U},err:null}}}return{val:{type:c==="number"?Yn.number:c==="date"?Yn.date:Yn.time,value:w,location:J,style:(k=N==null?void 0:N.style)!==null&&k!==void 0?k:null},err:null}}case"plural":case"selectordinal":case"select":{var Ee=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(_n.EXPECT_SELECT_ARGUMENT_OPTIONS,wn(Ee,Tt({},Ee)));this.bumpSpace();var Ve=this.parseIdentifierIfPossible(),Me=0;if(c!=="select"&&Ve.value==="offset"){if(!this.bumpIf(":"))return this.error(_n.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,wn(this.clonePosition(),this.clonePosition()));this.bumpSpace();var $=this.tryParseDecimalInteger(_n.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,_n.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);if($.err)return $;this.bumpSpace(),Ve=this.parseIdentifierIfPossible(),Me=$.val}var tt=this.tryParsePluralOrSelectOptions(p,c,v,Ve);if(tt.err)return tt;var he=this.tryParseArgumentClose(E);if(he.err)return he;var it=wn(E,this.clonePosition());return c==="select"?{val:{type:Yn.select,value:w,options:lm(tt.val),location:it},err:null}:{val:{type:Yn.plural,value:w,options:lm(tt.val),offset:Me,pluralType:c==="plural"?"cardinal":"ordinal",location:it},err:null}}default:return this.error(_n.INVALID_ARGUMENT_TYPE,wn(P,F))}},a.prototype.tryParseArgumentClose=function(p){return this.isEOF()||this.char()!==125?this.error(_n.EXPECT_ARGUMENT_CLOSING_BRACE,wn(p,this.clonePosition())):(this.bump(),{val:!0,err:null})},a.prototype.parseSimpleArgStyleIfPossible=function(){for(var p=0,v=this.clonePosition();!this.isEOF();){var w=this.char();switch(w){case 39:{this.bump();var E=this.clonePosition();if(!this.bumpUntil("'"))return this.error(_n.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,wn(E,this.clonePosition()));this.bump();break}case 123:{p+=1,this.bump();break}case 125:{if(p>0)p-=1;else return{val:this.message.slice(v.offset,this.offset()),err:null};break}default:this.bump();break}}return{val:this.message.slice(v.offset,this.offset()),err:null}},a.prototype.parseNumberSkeletonFromString=function(p,v){var w=[];try{w=oy(p)}catch{return this.error(_n.INVALID_NUMBER_SKELETON,v)}return{val:{type:Qu.number,tokens:w,location:v,parsedOptions:this.shouldParseSkeletons?cy(w):{}},err:null}},a.prototype.tryParsePluralOrSelectOptions=function(p,v,w,E){for(var k,P=!1,c=[],F=new Set,N=E.value,V=E.location;;){if(N.length===0){var $=this.clonePosition();if(v!=="select"&&this.bumpIf("=")){var U=this.tryParseDecimalInteger(_n.EXPECT_PLURAL_ARGUMENT_SELECTOR,_n.INVALID_PLURAL_ARGUMENT_SELECTOR);if(U.err)return U;V=wn($,this.clonePosition()),N=this.message.slice($.offset,this.offset())}else break}if(F.has(N))return this.error(v==="select"?_n.DUPLICATE_SELECT_ARGUMENT_SELECTOR:_n.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,V);N==="other"&&(P=!0),this.bumpSpace();var me=this.clonePosition();if(!this.bumpIf("{"))return this.error(v==="select"?_n.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:_n.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,wn(this.clonePosition(),this.clonePosition()));var he=this.parseMessage(p+1,v,w);if(he.err)return he;var J=this.tryParseArgumentClose(me);if(J.err)return J;c.push([N,{value:he.val,location:wn(me,this.clonePosition())}]),F.add(N),this.bumpSpace(),k=this.parseIdentifierIfPossible(),N=k.value,V=k.location}return c.length===0?this.error(v==="select"?_n.EXPECT_SELECT_ARGUMENT_SELECTOR:_n.EXPECT_PLURAL_ARGUMENT_SELECTOR,wn(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!P?this.error(_n.MISSING_OTHER_CLAUSE,wn(this.clonePosition(),this.clonePosition())):{val:c,err:null}},a.prototype.tryParseDecimalInteger=function(p,v){var w=1,E=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(w=-1);for(var k=!1,P=0;!this.isEOF();){var c=this.char();if(c>=48&&c<=57)k=!0,P=P*10+(c-48),this.bump();else break}var F=wn(E,this.clonePosition());return k?(P*=w,wy(P)?{val:P,err:null}:this.error(v,F)):this.error(p,F)},a.prototype.offset=function(){return this.position.offset},a.prototype.isEOF=function(){return this.offset()===this.message.length},a.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},a.prototype.char=function(){var p=this.position.offset;if(p>=this.message.length)throw Error("out of bound");var v=Eg(this.message,p);if(v===void 0)throw Error("Offset ".concat(p," is at invalid UTF-16 code unit boundary"));return v},a.prototype.error=function(p,v){return{val:null,err:{kind:p,message:this.message,location:v}}},a.prototype.bump=function(){if(!this.isEOF()){var p=this.char();p===10?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=p<65536?1:2)}},a.prototype.bumpIf=function(p){if(am(this.message,p,this.offset())){for(var v=0;v<p.length;v++)this.bump();return!0}return!1},a.prototype.bumpUntil=function(p){var v=this.offset(),w=this.message.indexOf(p,v);return w>=0?(this.bumpTo(w),!0):(this.bumpTo(this.message.length),!1)},a.prototype.bumpTo=function(p){if(this.offset()>p)throw Error("targetOffset ".concat(p," must be greater than or equal to the current offset ").concat(this.offset()));for(p=Math.min(p,this.message.length);;){var v=this.offset();if(v===p)break;if(v>p)throw Error("targetOffset ".concat(p," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},a.prototype.bumpSpace=function(){for(;!this.isEOF()&&kg(this.char());)this.bump()},a.prototype.peek=function(){if(this.isEOF())return null;var p=this.char(),v=this.offset(),w=this.message.charCodeAt(v+(p>=65536?2:1));return w??null},a}();function mf(a){return a>=97&&a<=122||a>=65&&a<=90}function ky(a){return mf(a)||a===47}function My(a){return a===45||a===46||a>=48&&a<=57||a===95||a>=97&&a<=122||a>=65&&a<=90||a==183||a>=192&&a<=214||a>=216&&a<=246||a>=248&&a<=893||a>=895&&a<=8191||a>=8204&&a<=8205||a>=8255&&a<=8256||a>=8304&&a<=8591||a>=11264&&a<=12271||a>=12289&&a<=55295||a>=63744&&a<=64975||a>=65008&&a<=65533||a>=65536&&a<=983039}function kg(a){return a>=9&&a<=13||a===32||a===133||a>=8206&&a<=8207||a===8232||a===8233}function Cy(a){return a>=33&&a<=35||a===36||a>=37&&a<=39||a===40||a===41||a===42||a===43||a===44||a===45||a>=46&&a<=47||a>=58&&a<=59||a>=60&&a<=62||a>=63&&a<=64||a===91||a===92||a===93||a===94||a===96||a===123||a===124||a===125||a===126||a===161||a>=162&&a<=165||a===166||a===167||a===169||a===171||a===172||a===174||a===176||a===177||a===182||a===187||a===191||a===215||a===247||a>=8208&&a<=8213||a>=8214&&a<=8215||a===8216||a===8217||a===8218||a>=8219&&a<=8220||a===8221||a===8222||a===8223||a>=8224&&a<=8231||a>=8240&&a<=8248||a===8249||a===8250||a>=8251&&a<=8254||a>=8257&&a<=8259||a===8260||a===8261||a===8262||a>=8263&&a<=8273||a===8274||a===8275||a>=8277&&a<=8286||a>=8592&&a<=8596||a>=8597&&a<=8601||a>=8602&&a<=8603||a>=8604&&a<=8607||a===8608||a>=8609&&a<=8610||a===8611||a>=8612&&a<=8613||a===8614||a>=8615&&a<=8621||a===8622||a>=8623&&a<=8653||a>=8654&&a<=8655||a>=8656&&a<=8657||a===8658||a===8659||a===8660||a>=8661&&a<=8691||a>=8692&&a<=8959||a>=8960&&a<=8967||a===8968||a===8969||a===8970||a===8971||a>=8972&&a<=8991||a>=8992&&a<=8993||a>=8994&&a<=9e3||a===9001||a===9002||a>=9003&&a<=9083||a===9084||a>=9085&&a<=9114||a>=9115&&a<=9139||a>=9140&&a<=9179||a>=9180&&a<=9185||a>=9186&&a<=9254||a>=9255&&a<=9279||a>=9280&&a<=9290||a>=9291&&a<=9311||a>=9472&&a<=9654||a===9655||a>=9656&&a<=9664||a===9665||a>=9666&&a<=9719||a>=9720&&a<=9727||a>=9728&&a<=9838||a===9839||a>=9840&&a<=10087||a===10088||a===10089||a===10090||a===10091||a===10092||a===10093||a===10094||a===10095||a===10096||a===10097||a===10098||a===10099||a===10100||a===10101||a>=10132&&a<=10175||a>=10176&&a<=10180||a===10181||a===10182||a>=10183&&a<=10213||a===10214||a===10215||a===10216||a===10217||a===10218||a===10219||a===10220||a===10221||a===10222||a===10223||a>=10224&&a<=10239||a>=10240&&a<=10495||a>=10496&&a<=10626||a===10627||a===10628||a===10629||a===10630||a===10631||a===10632||a===10633||a===10634||a===10635||a===10636||a===10637||a===10638||a===10639||a===10640||a===10641||a===10642||a===10643||a===10644||a===10645||a===10646||a===10647||a===10648||a>=10649&&a<=10711||a===10712||a===10713||a===10714||a===10715||a>=10716&&a<=10747||a===10748||a===10749||a>=10750&&a<=11007||a>=11008&&a<=11055||a>=11056&&a<=11076||a>=11077&&a<=11078||a>=11079&&a<=11084||a>=11085&&a<=11123||a>=11124&&a<=11125||a>=11126&&a<=11157||a===11158||a>=11159&&a<=11263||a>=11776&&a<=11777||a===11778||a===11779||a===11780||a===11781||a>=11782&&a<=11784||a===11785||a===11786||a===11787||a===11788||a===11789||a>=11790&&a<=11798||a===11799||a>=11800&&a<=11801||a===11802||a===11803||a===11804||a===11805||a>=11806&&a<=11807||a===11808||a===11809||a===11810||a===11811||a===11812||a===11813||a===11814||a===11815||a===11816||a===11817||a>=11818&&a<=11822||a===11823||a>=11824&&a<=11833||a>=11834&&a<=11835||a>=11836&&a<=11839||a===11840||a===11841||a===11842||a>=11843&&a<=11855||a>=11856&&a<=11857||a===11858||a>=11859&&a<=11903||a>=12289&&a<=12291||a===12296||a===12297||a===12298||a===12299||a===12300||a===12301||a===12302||a===12303||a===12304||a===12305||a>=12306&&a<=12307||a===12308||a===12309||a===12310||a===12311||a===12312||a===12313||a===12314||a===12315||a===12316||a===12317||a>=12318&&a<=12319||a===12320||a===12336||a===64830||a===64831||a>=65093&&a<=65094}function gf(a){a.forEach(function(p){if(delete p.location,gg(p)||yg(p))for(var v in p.options)delete p.options[v].location,gf(p.options[v].value);else pg(p)&&xg(p.style)||(fg(p)||mg(p))&&hf(p.style)?delete p.style.location:vg(p)&&gf(p.children)})}function Py(a,p){p===void 0&&(p={}),p=Tt({shouldParseSkeletons:!0,requiresOtherClause:!0},p);var v=new Ty(a,p).parse();if(v.err){var w=SyntaxError(_n[v.err.kind]);throw w.location=v.err.location,w.originalMessage=v.err.message,w}return p!=null&&p.captureLocation||gf(v.val),v.val}var oa;(function(a){a.MISSING_VALUE="MISSING_VALUE",a.INVALID_VALUE="INVALID_VALUE",a.MISSING_INTL_API="MISSING_INTL_API"})(oa||(oa={}));var ic=function(a){Vo(p,a);function p(v,w,E){var k=a.call(this,v)||this;return k.code=w,k.originalMessage=E,k}return p.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},p}(Error),um=function(a){Vo(p,a);function p(v,w,E,k){return a.call(this,'Invalid values for "'.concat(v,'": "').concat(w,'". Options are "').concat(Object.keys(E).join('", "'),'"'),oa.INVALID_VALUE,k)||this}return p}(ic),Iy=function(a){Vo(p,a);function p(v,w,E){return a.call(this,'Value for "'.concat(v,'" must be of type ').concat(w),oa.INVALID_VALUE,E)||this}return p}(ic),Ay=function(a){Vo(p,a);function p(v,w){return a.call(this,'The intl string context variable "'.concat(v,'" was not provided to the string "').concat(w,'"'),oa.MISSING_VALUE,w)||this}return p}(ic),zi;(function(a){a[a.literal=0]="literal",a[a.object=1]="object"})(zi||(zi={}));function Ly(a){return a.length<2?a:a.reduce(function(p,v){var w=p[p.length-1];return!w||w.type!==zi.literal||v.type!==zi.literal?p.push(v):w.value+=v.value,p},[])}function Mg(a){return typeof a=="function"}function ap(a,p,v,w,E,k,P){if(a.length===1&&rm(a[0]))return[{type:zi.literal,value:a[0].value}];for(var c=[],F=0,N=a;F<N.length;F++){var V=N[F];if(rm(V)){c.push({type:zi.literal,value:V.value});continue}if(ty(V)){typeof k=="number"&&c.push({type:zi.literal,value:v.getNumberFormat(p).format(k)});continue}var $=V.value;if(!(E&&$ in E))throw new Ay($,P);var U=E[$];if(ey(V)){(!U||typeof U=="string"||typeof U=="number")&&(U=typeof U=="string"||typeof U=="number"?String(U):""),c.push({type:typeof U=="string"?zi.literal:zi.object,value:U});continue}if(fg(V)){var me=typeof V.style=="string"?w.date[V.style]:hf(V.style)?V.style.parsedOptions:void 0;c.push({type:zi.literal,value:v.getDateTimeFormat(p,me).format(U)});continue}if(mg(V)){var me=typeof V.style=="string"?w.time[V.style]:hf(V.style)?V.style.parsedOptions:w.time.medium;c.push({type:zi.literal,value:v.getDateTimeFormat(p,me).format(U)});continue}if(pg(V)){var me=typeof V.style=="string"?w.number[V.style]:xg(V.style)?V.style.parsedOptions:void 0;me&&me.scale&&(U=U*(me.scale||1)),c.push({type:zi.literal,value:v.getNumberFormat(p,me).format(U)});continue}if(vg(V)){var he=V.children,J=V.value,oe=E[J];if(!Mg(oe))throw new Iy(J,"function",P);var _e=ap(he,p,v,w,E,k),ke=oe(_e.map(function(Me){return Me.value}));Array.isArray(ke)||(ke=[ke]),c.push.apply(c,ke.map(function(Me){return{type:typeof Me=="string"?zi.literal:zi.object,value:Me}}))}if(gg(V)){var Ee=V.options[U]||V.options.other;if(!Ee)throw new um(V.value,U,Object.keys(V.options),P);c.push.apply(c,ap(Ee.value,p,v,w,E));continue}if(yg(V)){var Ee=V.options["=".concat(U)];if(!Ee){if(!Intl.PluralRules)throw new ic(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,oa.MISSING_INTL_API,P);var Ve=v.getPluralRules(p,{type:V.pluralType}).select(U-(V.offset||0));Ee=V.options[Ve]||V.options.other}if(!Ee)throw new um(V.value,U,Object.keys(V.options),P);c.push.apply(c,ap(Ee.value,p,v,w,E,U-(V.offset||0)));continue}}return Ly(c)}function zy(a,p){return p?Tt(Tt(Tt({},a||{}),p||{}),Object.keys(a).reduce(function(v,w){return v[w]=Tt(Tt({},a[w]),p[w]||{}),v},{})):a}function jy(a,p){return p?Object.keys(a).reduce(function(v,w){return v[w]=zy(a[w],p[w]),v},Tt({},a)):a}function Xp(a){return{create:function(){return{get:function(p){return a[p]},set:function(p,v){a[p]=v}}}}}function Ry(a){return a===void 0&&(a={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:na(function(){for(var p,v=[],w=0;w<arguments.length;w++)v[w]=arguments[w];return new((p=Intl.NumberFormat).bind.apply(p,ia([void 0],v,!1)))},{cache:Xp(a.number),strategy:ra.variadic}),getDateTimeFormat:na(function(){for(var p,v=[],w=0;w<arguments.length;w++)v[w]=arguments[w];return new((p=Intl.DateTimeFormat).bind.apply(p,ia([void 0],v,!1)))},{cache:Xp(a.dateTime),strategy:ra.variadic}),getPluralRules:na(function(){for(var p,v=[],w=0;w<arguments.length;w++)v[w]=arguments[w];return new((p=Intl.PluralRules).bind.apply(p,ia([void 0],v,!1)))},{cache:Xp(a.pluralRules),strategy:ra.variadic})}}var Cg=function(){function a(p,v,w,E){v===void 0&&(v=a.defaultLocale);var k=this;if(this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(F){var N=k.formatToParts(F);if(N.length===1)return N[0].value;var V=N.reduce(function($,U){return!$.length||U.type!==zi.literal||typeof $[$.length-1]!="string"?$.push(U.value):$[$.length-1]+=U.value,$},[]);return V.length<=1?V[0]||"":V},this.formatToParts=function(F){return ap(k.ast,k.locales,k.formatters,k.formats,F,void 0,k.message)},this.resolvedOptions=function(){var F;return{locale:((F=k.resolvedLocale)===null||F===void 0?void 0:F.toString())||Intl.NumberFormat.supportedLocalesOf(k.locales)[0]}},this.getAst=function(){return k.ast},this.locales=v,this.resolvedLocale=a.resolveLocale(v),typeof p=="string"){if(this.message=p,!a.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");var P=E||{};P.formatters;var c=Yu(P,["formatters"]);this.ast=a.__parse(p,Tt(Tt({},c),{locale:this.resolvedLocale}))}else this.ast=p;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=jy(a.formats,w),this.formatters=E&&E.formatters||Ry(this.formatterCache)}return Object.defineProperty(a,"defaultLocale",{get:function(){return a.memoizedDefaultLocale||(a.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),a.memoizedDefaultLocale},enumerable:!1,configurable:!0}),a.memoizedDefaultLocale=null,a.resolveLocale=function(p){if(!(typeof Intl.Locale>"u")){var v=Intl.NumberFormat.supportedLocalesOf(p);return v.length>0?new Intl.Locale(v[0]):new Intl.Locale(typeof p=="string"?p:p[0])}},a.__parse=Py,a.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},a}(),nu;(function(a){a.FORMAT_ERROR="FORMAT_ERROR",a.UNSUPPORTED_FORMATTER="UNSUPPORTED_FORMATTER",a.INVALID_CONFIG="INVALID_CONFIG",a.MISSING_DATA="MISSING_DATA",a.MISSING_TRANSLATION="MISSING_TRANSLATION"})(nu||(nu={}));var ld=function(a){Vo(p,a);function p(v,w,E){var k=this,P=E?E instanceof Error?E:new Error(String(E)):void 0;return k=a.call(this,"[@formatjs/intl Error ".concat(v,"] ").concat(w,`
`).concat(P?`
`.concat(P.message,`
`).concat(P.stack):""))||this,k.code=v,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(k,p),k}return p}(Error),Dy=function(a){Vo(p,a);function p(v,w){return a.call(this,nu.UNSUPPORTED_FORMATTER,v,w)||this}return p}(ld),Ny=function(a){Vo(p,a);function p(v,w){return a.call(this,nu.INVALID_CONFIG,v,w)||this}return p}(ld),hm=function(a){Vo(p,a);function p(v,w){return a.call(this,nu.MISSING_DATA,v,w)||this}return p}(ld),Ho=function(a){Vo(p,a);function p(v,w,E){var k=a.call(this,nu.FORMAT_ERROR,"".concat(v,`
Locale: `).concat(w,`
`),E)||this;return k.locale=w,k}return p}(ld),Kp=function(a){Vo(p,a);function p(v,w,E,k){var P=a.call(this,"".concat(v,`
MessageID: `).concat(E==null?void 0:E.id,`
Default Message: `).concat(E==null?void 0:E.defaultMessage,`
Description: `).concat(E==null?void 0:E.description,`
`),w,k)||this;return P.descriptor=E,P.locale=w,P}return p}(Ho),By=function(a){Vo(p,a);function p(v,w){var E=a.call(this,nu.MISSING_TRANSLATION,'Missing message: "'.concat(v.id,'" for locale "').concat(w,'", using ').concat(v.defaultMessage?"default message (".concat(typeof v.defaultMessage=="string"?v.defaultMessage:v.defaultMessage.map(function(k){var P;return(P=k.value)!==null&&P!==void 0?P:JSON.stringify(k)}).join(),")"):"id"," as fallback."))||this;return E.descriptor=v,E}return p}(ld);function Fy(a,p,v){if(v===void 0&&(v=Error),!a)throw new v(p)}function ih(a,p,v){return v===void 0&&(v={}),p.reduce(function(w,E){return E in a?w[E]=a[E]:E in v&&(w[E]=v[E]),w},{})}var Oy=function(a){},$y=function(a){},Pg={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:Oy,onWarn:$y};function Ig(){return{dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}}}function Qc(a){return{create:function(){return{get:function(p){return a[p]},set:function(p,v){a[p]=v}}}}}function Uy(a){a===void 0&&(a=Ig());var p=Intl.RelativeTimeFormat,v=Intl.ListFormat,w=Intl.DisplayNames,E=na(function(){for(var c,F=[],N=0;N<arguments.length;N++)F[N]=arguments[N];return new((c=Intl.DateTimeFormat).bind.apply(c,ia([void 0],F,!1)))},{cache:Qc(a.dateTime),strategy:ra.variadic}),k=na(function(){for(var c,F=[],N=0;N<arguments.length;N++)F[N]=arguments[N];return new((c=Intl.NumberFormat).bind.apply(c,ia([void 0],F,!1)))},{cache:Qc(a.number),strategy:ra.variadic}),P=na(function(){for(var c,F=[],N=0;N<arguments.length;N++)F[N]=arguments[N];return new((c=Intl.PluralRules).bind.apply(c,ia([void 0],F,!1)))},{cache:Qc(a.pluralRules),strategy:ra.variadic});return{getDateTimeFormat:E,getNumberFormat:k,getMessageFormat:na(function(c,F,N,V){return new Cg(c,F,N,Tt({formatters:{getNumberFormat:k,getDateTimeFormat:E,getPluralRules:P}},V||{}))},{cache:Qc(a.message),strategy:ra.variadic}),getRelativeTimeFormat:na(function(){for(var c=[],F=0;F<arguments.length;F++)c[F]=arguments[F];return new(p.bind.apply(p,ia([void 0],c,!1)))},{cache:Qc(a.relativeTime),strategy:ra.variadic}),getPluralRules:P,getListFormat:na(function(){for(var c=[],F=0;F<arguments.length;F++)c[F]=arguments[F];return new(v.bind.apply(v,ia([void 0],c,!1)))},{cache:Qc(a.list),strategy:ra.variadic}),getDisplayNames:na(function(){for(var c=[],F=0;F<arguments.length;F++)c[F]=arguments[F];return new(w.bind.apply(w,ia([void 0],c,!1)))},{cache:Qc(a.displayNames),strategy:ra.variadic})}}function Lf(a,p,v,w){var E=a&&a[p],k;if(E&&(k=E[v]),k)return k;w(new Dy("No ".concat(p," format named: ").concat(v)))}function op(a,p){return Object.keys(a).reduce(function(v,w){return v[w]=Tt({timeZone:p},a[w]),v},{})}function dm(a,p){var v=Object.keys(Tt(Tt({},a),p));return v.reduce(function(w,E){return w[E]=Tt(Tt({},a[E]||{}),p[E]||{}),w},{})}function pm(a,p){if(!p)return a;var v=Cg.formats;return Tt(Tt(Tt({},v),a),{date:dm(op(v.date,p),op(a.date||{},p)),time:dm(op(v.time,p),op(a.time||{},p))})}var yf=function(a,p,v,w,E){var k=a.locale,P=a.formats,c=a.messages,F=a.defaultLocale,N=a.defaultFormats,V=a.fallbackOnEmptyString,$=a.onError,U=a.timeZone,me=a.defaultRichTextElements;v===void 0&&(v={id:""});var he=v.id,J=v.defaultMessage;Fy(!!he,"[@formatjs/intl] An `id` must be provided to format a message. You can either:\n1. Configure your build toolchain with [babel-plugin-formatjs](https://formatjs.github.io/docs/tooling/babel-plugin)\nor [@formatjs/ts-transformer](https://formatjs.github.io/docs/tooling/ts-transformer) OR\n2. Configure your `eslint` config to include [eslint-plugin-formatjs](https://formatjs.github.io/docs/tooling/linter#enforce-id)\nto autofix this issue");var oe=String(he),_e=c&&Object.prototype.hasOwnProperty.call(c,oe)&&c[oe];if(Array.isArray(_e)&&_e.length===1&&_e[0].type===Yn.literal)return _e[0].value;if(!w&&_e&&typeof _e=="string"&&!me)return _e.replace(/'\{(.*?)\}'/gi,"{$1}");if(w=Tt(Tt({},me),w||{}),P=pm(P,U),N=pm(N,U),!_e){if(V===!1&&_e==="")return _e;if((!J||k&&k.toLowerCase()!==F.toLowerCase())&&$(new By(v,k)),J)try{var ke=p.getMessageFormat(J,F,N,E);return ke.format(w)}catch(Ee){return $(new Kp('Error formatting default message for: "'.concat(oe,'", rendering default message verbatim'),k,v,Ee)),typeof J=="string"?J:oe}return oe}try{var ke=p.getMessageFormat(_e,k,P,Tt({formatters:p},E||{}));return ke.format(w)}catch(Ee){$(new Kp('Error formatting message: "'.concat(oe,'", using ').concat(J?"default message":"id"," as fallback."),k,v,Ee))}if(J)try{var ke=p.getMessageFormat(J,F,N,E);return ke.format(w)}catch(Ee){$(new Kp('Error formatting the default message for: "'.concat(oe,'", rendering message verbatim'),k,v,Ee))}return typeof _e=="string"?_e:typeof J=="string"?J:oe},Vy=["formatMatcher","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle","dateStyle","timeStyle","calendar","numberingSystem","fractionalSecondDigits"];function cd(a,p,v,w){var E=a.locale,k=a.formats,P=a.onError,c=a.timeZone;w===void 0&&(w={});var F=w.format,N=Tt(Tt({},c&&{timeZone:c}),F&&Lf(k,p,F,P)),V=ih(w,Vy,N);return p==="time"&&!V.hour&&!V.minute&&!V.second&&!V.timeStyle&&!V.dateStyle&&(V=Tt(Tt({},V),{hour:"numeric",minute:"numeric"})),v(E,V)}function Hy(a,p){for(var v=[],w=2;w<arguments.length;w++)v[w-2]=arguments[w];var E=v[0],k=v[1],P=k===void 0?{}:k,c=typeof E=="string"?new Date(E||0):E;try{return cd(a,"date",p,P).format(c)}catch(F){a.onError(new Ho("Error formatting date.",a.locale,F))}return String(c)}function Gy(a,p){for(var v=[],w=2;w<arguments.length;w++)v[w-2]=arguments[w];var E=v[0],k=v[1],P=k===void 0?{}:k,c=typeof E=="string"?new Date(E||0):E;try{return cd(a,"time",p,P).format(c)}catch(F){a.onError(new Ho("Error formatting time.",a.locale,F))}return String(c)}function qy(a,p){for(var v=[],w=2;w<arguments.length;w++)v[w-2]=arguments[w];var E=v[0],k=v[1],P=v[2],c=P===void 0?{}:P,F=typeof E=="string"?new Date(E||0):E,N=typeof k=="string"?new Date(k||0):k;try{return cd(a,"dateTimeRange",p,c).formatRange(F,N)}catch(V){a.onError(new Ho("Error formatting date time range.",a.locale,V))}return String(F)}function Wy(a,p){for(var v=[],w=2;w<arguments.length;w++)v[w-2]=arguments[w];var E=v[0],k=v[1],P=k===void 0?{}:k,c=typeof E=="string"?new Date(E||0):E;try{return cd(a,"date",p,P).formatToParts(c)}catch(F){a.onError(new Ho("Error formatting date.",a.locale,F))}return[]}function Zy(a,p){for(var v=[],w=2;w<arguments.length;w++)v[w-2]=arguments[w];var E=v[0],k=v[1],P=k===void 0?{}:k,c=typeof E=="string"?new Date(E||0):E;try{return cd(a,"time",p,P).formatToParts(c)}catch(F){a.onError(new Ho("Error formatting time.",a.locale,F))}return[]}var Xy=["style","type","fallback","languageDisplay"];function Ky(a,p,v,w){var E=a.locale,k=a.onError,P=Intl.DisplayNames;P||k(new ic(`Intl.DisplayNames is not available in this environment.
Try polyfilling it using "@formatjs/intl-displaynames"
`,oa.MISSING_INTL_API));var c=ih(w,Xy);try{return p(E,c).of(v)}catch(F){k(new Ho("Error formatting display name.",E,F))}}var Jy=["type","style"],fm=Date.now();function Yy(a){return"".concat(fm,"_").concat(a,"_").concat(fm)}function Qy(a,p,v,w){w===void 0&&(w={});var E=Ag(a,p,v,w).reduce(function(k,P){var c=P.value;return typeof c!="string"?k.push(c):typeof k[k.length-1]=="string"?k[k.length-1]+=c:k.push(c),k},[]);return E.length===1?E[0]:E.length===0?"":E}function Ag(a,p,v,w){var E=a.locale,k=a.onError;w===void 0&&(w={});var P=Intl.ListFormat;P||k(new ic(`Intl.ListFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-listformat"
`,oa.MISSING_INTL_API));var c=ih(w,Jy);try{var F={},N=v.map(function(V,$){if(typeof V=="object"){var U=Yy($);return F[U]=V,U}return String(V)});return p(E,c).formatToParts(N).map(function(V){return V.type==="literal"?V:Tt(Tt({},V),{value:F[V.value]||V.value})})}catch(V){k(new Ho("Error formatting list.",E,V))}return v}var ev=["type"];function tv(a,p,v,w){var E=a.locale,k=a.onError;w===void 0&&(w={}),Intl.PluralRules||k(new ic(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,oa.MISSING_INTL_API));var P=ih(w,ev);try{return p(E,P).select(v)}catch(c){k(new Ho("Error formatting plural.",E,c))}return"other"}var nv=["numeric","style"];function rv(a,p,v){var w=a.locale,E=a.formats,k=a.onError;v===void 0&&(v={});var P=v.format,c=!!P&&Lf(E,"relative",P,k)||{},F=ih(v,nv,c);return p(w,F)}function iv(a,p,v,w,E){E===void 0&&(E={}),w||(w="second");var k=Intl.RelativeTimeFormat;k||a.onError(new ic(`Intl.RelativeTimeFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-relativetimeformat"
`,oa.MISSING_INTL_API));try{return rv(a,p,E).format(v,w)}catch(P){a.onError(new Ho("Error formatting relative time.",a.locale,P))}return String(v)}var ov=["style","currency","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","currencyDisplay","currencySign","notation","signDisplay","unit","unitDisplay","numberingSystem","trailingZeroDisplay","roundingPriority","roundingIncrement","roundingMode"];function Lg(a,p,v){var w=a.locale,E=a.formats,k=a.onError;v===void 0&&(v={});var P=v.format,c=P&&Lf(E,"number",P,k)||{},F=ih(v,ov,c);return p(w,F)}function sv(a,p,v,w){w===void 0&&(w={});try{return Lg(a,p,w).format(v)}catch(E){a.onError(new Ho("Error formatting number.",a.locale,E))}return String(v)}function av(a,p,v,w){w===void 0&&(w={});try{return Lg(a,p,w).formatToParts(v)}catch(E){a.onError(new Ho("Error formatting number.",a.locale,E))}return[]}function lv(a){var p=a?a[Object.keys(a)[0]]:void 0;return typeof p=="string"}function cv(a){a.onWarn&&a.defaultRichTextElements&&lv(a.messages||{})&&a.onWarn(`[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. 
Please consider using "@formatjs/cli" to pre-compile your messages for performance.
For more details see https://formatjs.github.io/docs/getting-started/message-distribution`)}function uv(a,p){var v=Uy(p),w=Tt(Tt({},Pg),a),E=w.locale,k=w.defaultLocale,P=w.onError;return E?!Intl.NumberFormat.supportedLocalesOf(E).length&&P?P(new hm('Missing locale data for locale: "'.concat(E,'" in Intl.NumberFormat. Using default locale: "').concat(k,'" as fallback. See https://formatjs.github.io/docs/react-intl#runtime-requirements for more details'))):!Intl.DateTimeFormat.supportedLocalesOf(E).length&&P&&P(new hm('Missing locale data for locale: "'.concat(E,'" in Intl.DateTimeFormat. Using default locale: "').concat(k,'" as fallback. See https://formatjs.github.io/docs/react-intl#runtime-requirements for more details'))):(P&&P(new Ny('"locale" was not configured, using "'.concat(k,'" as fallback. See https://formatjs.github.io/docs/react-intl/api#intlshape for more details'))),w.locale=w.defaultLocale||"en"),cv(w),Tt(Tt({},w),{formatters:v,formatNumber:sv.bind(null,w,v.getNumberFormat),formatNumberToParts:av.bind(null,w,v.getNumberFormat),formatRelativeTime:iv.bind(null,w,v.getRelativeTimeFormat),formatDate:Hy.bind(null,w,v.getDateTimeFormat),formatDateToParts:Wy.bind(null,w,v.getDateTimeFormat),formatTime:Gy.bind(null,w,v.getDateTimeFormat),formatDateTimeRange:qy.bind(null,w,v.getDateTimeFormat),formatTimeToParts:Zy.bind(null,w,v.getDateTimeFormat),formatPlural:tv.bind(null,w,v.getPluralRules),formatMessage:yf.bind(null,w,v),$t:yf.bind(null,w,v),formatList:Qy.bind(null,w,v.getListFormat),formatListToParts:Ag.bind(null,w,v.getListFormat),formatDisplayName:Ky.bind(null,w,v.getDisplayNames)})}function hv(a,p,v){if(v===void 0&&(v=Error),!a)throw new v(p)}function zg(a){hv(a,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}var jg=Tt(Tt({},Pg),{textComponent:ee.Fragment}),dv={key:42},pv=function(a){return ee.isValidElement(a)?ee.createElement(ee.Fragment,dv,a):a},fv=function(a){var p;return(p=ee.Children.map(a,pv))!==null&&p!==void 0?p:[]};function mv(a){return function(p){return a(ee.Children.toArray(p))}}function vf(a,p){if(a===p)return!0;if(!a||!p)return!1;var v=Object.keys(a),w=Object.keys(p),E=v.length;if(w.length!==E)return!1;for(var k=0;k<E;k++){var P=v[k];if(a[P]!==p[P]||!Object.prototype.hasOwnProperty.call(p,P))return!1}return!0}var Jp={exports:{}},In={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mm;function gv(){if(mm)return In;mm=1;var a=typeof Symbol=="function"&&Symbol.for,p=a?Symbol.for("react.element"):60103,v=a?Symbol.for("react.portal"):60106,w=a?Symbol.for("react.fragment"):60107,E=a?Symbol.for("react.strict_mode"):60108,k=a?Symbol.for("react.profiler"):60114,P=a?Symbol.for("react.provider"):60109,c=a?Symbol.for("react.context"):60110,F=a?Symbol.for("react.async_mode"):60111,N=a?Symbol.for("react.concurrent_mode"):60111,V=a?Symbol.for("react.forward_ref"):60112,$=a?Symbol.for("react.suspense"):60113,U=a?Symbol.for("react.suspense_list"):60120,me=a?Symbol.for("react.memo"):60115,he=a?Symbol.for("react.lazy"):60116,J=a?Symbol.for("react.block"):60121,oe=a?Symbol.for("react.fundamental"):60117,_e=a?Symbol.for("react.responder"):60118,ke=a?Symbol.for("react.scope"):60119;function Ee(Me){if(typeof Me=="object"&&Me!==null){var tt=Me.$$typeof;switch(tt){case p:switch(Me=Me.type,Me){case F:case N:case w:case k:case E:case $:return Me;default:switch(Me=Me&&Me.$$typeof,Me){case c:case V:case he:case me:case P:return Me;default:return tt}}case v:return tt}}}function Ve(Me){return Ee(Me)===N}return In.AsyncMode=F,In.ConcurrentMode=N,In.ContextConsumer=c,In.ContextProvider=P,In.Element=p,In.ForwardRef=V,In.Fragment=w,In.Lazy=he,In.Memo=me,In.Portal=v,In.Profiler=k,In.StrictMode=E,In.Suspense=$,In.isAsyncMode=function(Me){return Ve(Me)||Ee(Me)===F},In.isConcurrentMode=Ve,In.isContextConsumer=function(Me){return Ee(Me)===c},In.isContextProvider=function(Me){return Ee(Me)===P},In.isElement=function(Me){return typeof Me=="object"&&Me!==null&&Me.$$typeof===p},In.isForwardRef=function(Me){return Ee(Me)===V},In.isFragment=function(Me){return Ee(Me)===w},In.isLazy=function(Me){return Ee(Me)===he},In.isMemo=function(Me){return Ee(Me)===me},In.isPortal=function(Me){return Ee(Me)===v},In.isProfiler=function(Me){return Ee(Me)===k},In.isStrictMode=function(Me){return Ee(Me)===E},In.isSuspense=function(Me){return Ee(Me)===$},In.isValidElementType=function(Me){return typeof Me=="string"||typeof Me=="function"||Me===w||Me===N||Me===k||Me===E||Me===$||Me===U||typeof Me=="object"&&Me!==null&&(Me.$$typeof===he||Me.$$typeof===me||Me.$$typeof===P||Me.$$typeof===c||Me.$$typeof===V||Me.$$typeof===oe||Me.$$typeof===_e||Me.$$typeof===ke||Me.$$typeof===J)},In.typeOf=Ee,In}var gm;function yv(){return gm||(gm=1,Jp.exports=gv()),Jp.exports}var Yp,ym;function vv(){if(ym)return Yp;ym=1;var a=yv(),p={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},v={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},w={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},E={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},k={};k[a.ForwardRef]=w,k[a.Memo]=E;function P(he){return a.isMemo(he)?E:k[he.$$typeof]||p}var c=Object.defineProperty,F=Object.getOwnPropertyNames,N=Object.getOwnPropertySymbols,V=Object.getOwnPropertyDescriptor,$=Object.getPrototypeOf,U=Object.prototype;function me(he,J,oe){if(typeof J!="string"){if(U){var _e=$(J);_e&&_e!==U&&me(he,_e,oe)}var ke=F(J);N&&(ke=ke.concat(N(J)));for(var Ee=P(he),Ve=P(J),Me=0;Me<ke.length;++Me){var tt=ke[Me];if(!v[tt]&&!(oe&&oe[tt])&&!(Ve&&Ve[tt])&&!(Ee&&Ee[tt])){var it=V(J,tt);try{c(he,tt,it)}catch{}}}}return he}return Yp=me,Yp}vv();var zf=typeof window<"u"&&!window.__REACT_INTL_BYPASS_GLOBAL_CONTEXT__?window.__REACT_INTL_CONTEXT__||(window.__REACT_INTL_CONTEXT__=ee.createContext(null)):ee.createContext(null);zf.Consumer;var xv=zf.Provider,_v=xv,wv=zf;function Ui(){var a=ee.useContext(wv);return zg(a),a}var xf;(function(a){a.formatDate="FormattedDate",a.formatTime="FormattedTime",a.formatNumber="FormattedNumber",a.formatList="FormattedList",a.formatDisplayName="FormattedDisplayName"})(xf||(xf={}));var _f;(function(a){a.formatDate="FormattedDateParts",a.formatTime="FormattedTimeParts",a.formatNumber="FormattedNumberParts",a.formatList="FormattedListParts"})(_f||(_f={}));function Rg(a){var p=function(v){var w=Ui(),E=v.value,k=v.children,P=Yu(v,["value","children"]),c=typeof E=="string"?new Date(E||0):E,F=a==="formatDate"?w.formatDateToParts(c,P):w.formatTimeToParts(c,P);return k(F)};return p.displayName=_f[a],p}function ud(a){var p=function(v){var w=Ui(),E=v.value,k=v.children,P=Yu(v,["value","children"]),c=w[a](E,P);if(typeof k=="function")return k(c);var F=w.textComponent||ee.Fragment;return ee.createElement(F,null,c)};return p.displayName=xf[a],p}function Dg(a){return a&&Object.keys(a).reduce(function(p,v){var w=a[v];return p[v]=Mg(w)?mv(w):w,p},{})}var vm=function(a,p,v,w){for(var E=[],k=4;k<arguments.length;k++)E[k-4]=arguments[k];var P=Dg(w),c=yf.apply(void 0,ia([a,p,v,P],E,!1));return Array.isArray(c)?fv(c):c},xm=function(a,p){var v=a.defaultRichTextElements,w=Yu(a,["defaultRichTextElements"]),E=Dg(v),k=uv(Tt(Tt(Tt({},jg),w),{defaultRichTextElements:E}),p),P={locale:k.locale,timeZone:k.timeZone,fallbackOnEmptyString:k.fallbackOnEmptyString,formats:k.formats,defaultLocale:k.defaultLocale,defaultFormats:k.defaultFormats,messages:k.messages,onError:k.onError,defaultRichTextElements:E};return Tt(Tt({},k),{formatMessage:vm.bind(null,P,k.formatters),$t:vm.bind(null,P,k.formatters)})};function bv(a,p){var v=a.values,w=Yu(a,["values"]),E=p.values,k=Yu(p,["values"]);return vf(E,v)&&vf(w,k)}function Ng(a){var p=Ui(),v=p.formatMessage,w=p.textComponent,E=w===void 0?ee.Fragment:w,k=a.id,P=a.description,c=a.defaultMessage,F=a.values,N=a.children,V=a.tagName,$=V===void 0?E:V,U=a.ignoreTag,me={id:k,description:P,defaultMessage:c},he=v(me,F,{ignoreTag:U});return typeof N=="function"?N(Array.isArray(he)?he:[he]):$?ee.createElement($,null,he):ee.createElement(ee.Fragment,null,he)}Ng.displayName="FormattedMessage";var qe=ee.memo(Ng,bv);qe.displayName="MemoizedFormattedMessage";function Qp(a){return{locale:a.locale,timeZone:a.timeZone,fallbackOnEmptyString:a.fallbackOnEmptyString,formats:a.formats,textComponent:a.textComponent,messages:a.messages,defaultLocale:a.defaultLocale,defaultFormats:a.defaultFormats,onError:a.onError,onWarn:a.onWarn,wrapRichTextChunksInFragment:a.wrapRichTextChunksInFragment,defaultRichTextElements:a.defaultRichTextElements}}var Sv=function(a){Vo(p,a);function p(){var v=a!==null&&a.apply(this,arguments)||this;return v.cache=Ig(),v.state={cache:v.cache,intl:xm(Qp(v.props),v.cache),prevConfig:Qp(v.props)},v}return p.getDerivedStateFromProps=function(v,w){var E=w.prevConfig,k=w.cache,P=Qp(v);return vf(E,P)?null:{intl:xm(P,k),prevConfig:P}},p.prototype.render=function(){return zg(this.state.intl),ee.createElement(_v,{value:this.state.intl},this.props.children)},p.displayName="IntlProvider",p.defaultProps=jg,p}(ee.PureComponent);ud("formatDate");ud("formatTime");ud("formatNumber");ud("formatList");ud("formatDisplayName");Rg("formatDate");Rg("formatTime");var Bg=ug();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function td(){return td=Object.assign?Object.assign.bind():function(a){for(var p=1;p<arguments.length;p++){var v=arguments[p];for(var w in v)Object.prototype.hasOwnProperty.call(v,w)&&(a[w]=v[w])}return a},td.apply(this,arguments)}var nc;(function(a){a.Pop="POP",a.Push="PUSH",a.Replace="REPLACE"})(nc||(nc={}));const _m="popstate";function Ev(a){a===void 0&&(a={});function p(E,k){let{pathname:P="/",search:c="",hash:F=""}=ou(E.location.hash.substr(1));return!P.startsWith("/")&&!P.startsWith(".")&&(P="/"+P),wf("",{pathname:P,search:c,hash:F},k.state&&k.state.usr||null,k.state&&k.state.key||"default")}function v(E,k){let P=E.document.querySelector("base"),c="";if(P&&P.getAttribute("href")){let F=E.location.href,N=F.indexOf("#");c=N===-1?F:F.slice(0,N)}return c+"#"+(typeof k=="string"?k:pp(k))}function w(E,k){jf(E.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(k)+")")}return kv(p,v,w,a)}function Br(a,p){if(a===!1||a===null||typeof a>"u")throw new Error(p)}function jf(a,p){if(!a){typeof console<"u"&&console.warn(p);try{throw new Error(p)}catch{}}}function Tv(){return Math.random().toString(36).substr(2,8)}function wm(a,p){return{usr:a.state,key:a.key,idx:p}}function wf(a,p,v,w){return v===void 0&&(v=null),td({pathname:typeof a=="string"?a:a.pathname,search:"",hash:""},typeof p=="string"?ou(p):p,{state:v,key:p&&p.key||w||Tv()})}function pp(a){let{pathname:p="/",search:v="",hash:w=""}=a;return v&&v!=="?"&&(p+=v.charAt(0)==="?"?v:"?"+v),w&&w!=="#"&&(p+=w.charAt(0)==="#"?w:"#"+w),p}function ou(a){let p={};if(a){let v=a.indexOf("#");v>=0&&(p.hash=a.substr(v),a=a.substr(0,v));let w=a.indexOf("?");w>=0&&(p.search=a.substr(w),a=a.substr(0,w)),a&&(p.pathname=a)}return p}function kv(a,p,v,w){w===void 0&&(w={});let{window:E=document.defaultView,v5Compat:k=!1}=w,P=E.history,c=nc.Pop,F=null,N=V();N==null&&(N=0,P.replaceState(td({},P.state,{idx:N}),""));function V(){return(P.state||{idx:null}).idx}function $(){c=nc.Pop;let oe=V(),_e=oe==null?null:oe-N;N=oe,F&&F({action:c,location:J.location,delta:_e})}function U(oe,_e){c=nc.Push;let ke=wf(J.location,oe,_e);v&&v(ke,oe),N=V()+1;let Ee=wm(ke,N),Ve=J.createHref(ke);try{P.pushState(Ee,"",Ve)}catch(Me){if(Me instanceof DOMException&&Me.name==="DataCloneError")throw Me;E.location.assign(Ve)}k&&F&&F({action:c,location:J.location,delta:1})}function me(oe,_e){c=nc.Replace;let ke=wf(J.location,oe,_e);v&&v(ke,oe),N=V();let Ee=wm(ke,N),Ve=J.createHref(ke);P.replaceState(Ee,"",Ve),k&&F&&F({action:c,location:J.location,delta:0})}function he(oe){let _e=E.location.origin!=="null"?E.location.origin:E.location.href,ke=typeof oe=="string"?oe:pp(oe);return ke=ke.replace(/ $/,"%20"),Br(_e,"No window.location.(origin|href) available to create URL for href: "+ke),new URL(ke,_e)}let J={get action(){return c},get location(){return a(E,P)},listen(oe){if(F)throw new Error("A history only accepts one active listener");return E.addEventListener(_m,$),F=oe,()=>{E.removeEventListener(_m,$),F=null}},createHref(oe){return p(E,oe)},createURL:he,encodeLocation(oe){let _e=he(oe);return{pathname:_e.pathname,search:_e.search,hash:_e.hash}},push:U,replace:me,go(oe){return P.go(oe)}};return J}var bm;(function(a){a.data="data",a.deferred="deferred",a.redirect="redirect",a.error="error"})(bm||(bm={}));function Mv(a,p,v){return v===void 0&&(v="/"),Cv(a,p,v)}function Cv(a,p,v,w){let E=typeof p=="string"?ou(p):p,k=Rf(E.pathname||"/",v);if(k==null)return null;let P=Fg(a);Pv(P);let c=null;for(let F=0;c==null&&F<P.length;++F){let N=$v(k);c=Bv(P[F],N)}return c}function Fg(a,p,v,w){p===void 0&&(p=[]),v===void 0&&(v=[]),w===void 0&&(w="");let E=(k,P,c)=>{let F={relativePath:c===void 0?k.path||"":c,caseSensitive:k.caseSensitive===!0,childrenIndex:P,route:k};F.relativePath.startsWith("/")&&(Br(F.relativePath.startsWith(w),'Absolute route path "'+F.relativePath+'" nested under path '+('"'+w+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),F.relativePath=F.relativePath.slice(w.length));let N=rc([w,F.relativePath]),V=v.concat(F);k.children&&k.children.length>0&&(Br(k.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+N+'".')),Fg(k.children,p,V,N)),!(k.path==null&&!k.index)&&p.push({path:N,score:Dv(N,k.index),routesMeta:V})};return a.forEach((k,P)=>{var c;if(k.path===""||!((c=k.path)!=null&&c.includes("?")))E(k,P);else for(let F of Og(k.path))E(k,P,F)}),p}function Og(a){let p=a.split("/");if(p.length===0)return[];let[v,...w]=p,E=v.endsWith("?"),k=v.replace(/\?$/,"");if(w.length===0)return E?[k,""]:[k];let P=Og(w.join("/")),c=[];return c.push(...P.map(F=>F===""?k:[k,F].join("/"))),E&&c.push(...P),c.map(F=>a.startsWith("/")&&F===""?"/":F)}function Pv(a){a.sort((p,v)=>p.score!==v.score?v.score-p.score:Nv(p.routesMeta.map(w=>w.childrenIndex),v.routesMeta.map(w=>w.childrenIndex)))}const Iv=/^:[\w-]+$/,Av=3,Lv=2,zv=1,jv=10,Rv=-2,Sm=a=>a==="*";function Dv(a,p){let v=a.split("/"),w=v.length;return v.some(Sm)&&(w+=Rv),p&&(w+=Lv),v.filter(E=>!Sm(E)).reduce((E,k)=>E+(Iv.test(k)?Av:k===""?zv:jv),w)}function Nv(a,p){return a.length===p.length&&a.slice(0,-1).every((w,E)=>w===p[E])?a[a.length-1]-p[p.length-1]:0}function Bv(a,p,v){let{routesMeta:w}=a,E={},k="/",P=[];for(let c=0;c<w.length;++c){let F=w[c],N=c===w.length-1,V=k==="/"?p:p.slice(k.length)||"/",$=Fv({path:F.relativePath,caseSensitive:F.caseSensitive,end:N},V),U=F.route;if(!$)return null;Object.assign(E,$.params),P.push({params:E,pathname:rc([k,$.pathname]),pathnameBase:Gv(rc([k,$.pathnameBase])),route:U}),$.pathnameBase!=="/"&&(k=rc([k,$.pathnameBase]))}return P}function Fv(a,p){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[v,w]=Ov(a.path,a.caseSensitive,a.end),E=p.match(v);if(!E)return null;let k=E[0],P=k.replace(/(.)\/+$/,"$1"),c=E.slice(1);return{params:w.reduce((N,V,$)=>{let{paramName:U,isOptional:me}=V;if(U==="*"){let J=c[$]||"";P=k.slice(0,k.length-J.length).replace(/(.)\/+$/,"$1")}const he=c[$];return me&&!he?N[U]=void 0:N[U]=(he||"").replace(/%2F/g,"/"),N},{}),pathname:k,pathnameBase:P,pattern:a}}function Ov(a,p,v){p===void 0&&(p=!1),v===void 0&&(v=!0),jf(a==="*"||!a.endsWith("*")||a.endsWith("/*"),'Route path "'+a+'" will be treated as if it were '+('"'+a.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+a.replace(/\*$/,"/*")+'".'));let w=[],E="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(P,c,F)=>(w.push({paramName:c,isOptional:F!=null}),F?"/?([^\\/]+)?":"/([^\\/]+)"));return a.endsWith("*")?(w.push({paramName:"*"}),E+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):v?E+="\\/*$":a!==""&&a!=="/"&&(E+="(?:(?=\\/|$))"),[new RegExp(E,p?void 0:"i"),w]}function $v(a){try{return a.split("/").map(p=>decodeURIComponent(p).replace(/\//g,"%2F")).join("/")}catch(p){return jf(!1,'The URL path "'+a+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+p+").")),a}}function Rf(a,p){if(p==="/")return a;if(!a.toLowerCase().startsWith(p.toLowerCase()))return null;let v=p.endsWith("/")?p.length-1:p.length,w=a.charAt(v);return w&&w!=="/"?null:a.slice(v)||"/"}function Uv(a,p){p===void 0&&(p="/");let{pathname:v,search:w="",hash:E=""}=typeof a=="string"?ou(a):a;return{pathname:v?v.startsWith("/")?v:Vv(v,p):p,search:qv(w),hash:Wv(E)}}function Vv(a,p){let v=p.replace(/\/+$/,"").split("/");return a.split("/").forEach(E=>{E===".."?v.length>1&&v.pop():E!=="."&&v.push(E)}),v.length>1?v.join("/"):"/"}function ef(a,p,v,w){return"Cannot include a '"+a+"' character in a manually specified "+("`to."+p+"` field ["+JSON.stringify(w)+"].  Please separate it out to the ")+("`to."+v+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Hv(a){return a.filter((p,v)=>v===0||p.route.path&&p.route.path.length>0)}function $g(a,p){let v=Hv(a);return p?v.map((w,E)=>E===v.length-1?w.pathname:w.pathnameBase):v.map(w=>w.pathnameBase)}function Ug(a,p,v,w){w===void 0&&(w=!1);let E;typeof a=="string"?E=ou(a):(E=td({},a),Br(!E.pathname||!E.pathname.includes("?"),ef("?","pathname","search",E)),Br(!E.pathname||!E.pathname.includes("#"),ef("#","pathname","hash",E)),Br(!E.search||!E.search.includes("#"),ef("#","search","hash",E)));let k=a===""||E.pathname==="",P=k?"/":E.pathname,c;if(P==null)c=v;else{let $=p.length-1;if(!w&&P.startsWith("..")){let U=P.split("/");for(;U[0]==="..";)U.shift(),$-=1;E.pathname=U.join("/")}c=$>=0?p[$]:"/"}let F=Uv(E,c),N=P&&P!=="/"&&P.endsWith("/"),V=(k||P===".")&&v.endsWith("/");return!F.pathname.endsWith("/")&&(N||V)&&(F.pathname+="/"),F}const rc=a=>a.join("/").replace(/\/\/+/g,"/"),Gv=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),qv=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,Wv=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a;function Zv(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}const Vg=["post","put","patch","delete"];new Set(Vg);const Xv=["get",...Vg];new Set(Xv);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nd(){return nd=Object.assign?Object.assign.bind():function(a){for(var p=1;p<arguments.length;p++){var v=arguments[p];for(var w in v)Object.prototype.hasOwnProperty.call(v,w)&&(a[w]=v[w])}return a},nd.apply(this,arguments)}const Df=ee.createContext(null),Kv=ee.createContext(null),su=ee.createContext(null),xp=ee.createContext(null),au=ee.createContext({outlet:null,matches:[],isDataRoute:!1}),Hg=ee.createContext(null);function Jv(a,p){let{relative:v}=p===void 0?{}:p;hd()||Br(!1);let{basename:w,navigator:E}=ee.useContext(su),{hash:k,pathname:P,search:c}=qg(a,{relative:v}),F=P;return w!=="/"&&(F=P==="/"?w:rc([w,P])),E.createHref({pathname:F,search:c,hash:k})}function hd(){return ee.useContext(xp)!=null}function dd(){return hd()||Br(!1),ee.useContext(xp).location}function Gg(a){ee.useContext(su).static||ee.useLayoutEffect(a)}function oc(){let{isDataRoute:a}=ee.useContext(au);return a?ux():Yv()}function Yv(){hd()||Br(!1);let a=ee.useContext(Df),{basename:p,future:v,navigator:w}=ee.useContext(su),{matches:E}=ee.useContext(au),{pathname:k}=dd(),P=JSON.stringify($g(E,v.v7_relativeSplatPath)),c=ee.useRef(!1);return Gg(()=>{c.current=!0}),ee.useCallback(function(N,V){if(V===void 0&&(V={}),!c.current)return;if(typeof N=="number"){w.go(N);return}let $=Ug(N,JSON.parse(P),k,V.relative==="path");a==null&&p!=="/"&&($.pathname=$.pathname==="/"?p:rc([p,$.pathname])),(V.replace?w.replace:w.push)($,V.state,V)},[p,w,P,k,a])}function qg(a,p){let{relative:v}=p===void 0?{}:p,{future:w}=ee.useContext(su),{matches:E}=ee.useContext(au),{pathname:k}=dd(),P=JSON.stringify($g(E,w.v7_relativeSplatPath));return ee.useMemo(()=>Ug(a,JSON.parse(P),k,v==="path"),[a,P,k,v])}function Qv(a,p){return ex(a,p)}function ex(a,p,v,w){hd()||Br(!1);let{navigator:E,static:k}=ee.useContext(su),{matches:P}=ee.useContext(au),c=P[P.length-1],F=c?c.params:{};c&&c.pathname;let N=c?c.pathnameBase:"/";c&&c.route;let V=dd(),$;if(p){var U;let _e=typeof p=="string"?ou(p):p;N==="/"||(U=_e.pathname)!=null&&U.startsWith(N)||Br(!1),$=_e}else $=V;let me=$.pathname||"/",he=me;if(N!=="/"){let _e=N.replace(/^\//,"").split("/");he="/"+me.replace(/^\//,"").split("/").slice(_e.length).join("/")}let J=Mv(a,{pathname:he}),oe=ox(J&&J.map(_e=>Object.assign({},_e,{params:Object.assign({},F,_e.params),pathname:rc([N,E.encodeLocation?E.encodeLocation(_e.pathname).pathname:_e.pathname]),pathnameBase:_e.pathnameBase==="/"?N:rc([N,E.encodeLocation?E.encodeLocation(_e.pathnameBase).pathname:_e.pathnameBase])})),P,v,w);return p&&oe?ee.createElement(xp.Provider,{value:{location:nd({pathname:"/",search:"",hash:"",state:null,key:"default"},$),navigationType:nc.Pop}},oe):oe}function tx(){let a=cx(),p=Zv(a)?a.status+" "+a.statusText:a instanceof Error?a.message:JSON.stringify(a),v=a instanceof Error?a.stack:null,E={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ee.createElement(ee.Fragment,null,ee.createElement("h2",null,"Unexpected Application Error!"),ee.createElement("h3",{style:{fontStyle:"italic"}},p),v?ee.createElement("pre",{style:E},v):null,null)}const nx=ee.createElement(tx,null);class rx extends ee.Component{constructor(p){super(p),this.state={location:p.location,revalidation:p.revalidation,error:p.error}}static getDerivedStateFromError(p){return{error:p}}static getDerivedStateFromProps(p,v){return v.location!==p.location||v.revalidation!=="idle"&&p.revalidation==="idle"?{error:p.error,location:p.location,revalidation:p.revalidation}:{error:p.error!==void 0?p.error:v.error,location:v.location,revalidation:p.revalidation||v.revalidation}}componentDidCatch(p,v){console.error("React Router caught the following error during render",p,v)}render(){return this.state.error!==void 0?ee.createElement(au.Provider,{value:this.props.routeContext},ee.createElement(Hg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ix(a){let{routeContext:p,match:v,children:w}=a,E=ee.useContext(Df);return E&&E.static&&E.staticContext&&(v.route.errorElement||v.route.ErrorBoundary)&&(E.staticContext._deepestRenderedBoundaryId=v.route.id),ee.createElement(au.Provider,{value:p},w)}function ox(a,p,v,w){var E;if(p===void 0&&(p=[]),v===void 0&&(v=null),w===void 0&&(w=null),a==null){var k;if(!v)return null;if(v.errors)a=v.matches;else if((k=w)!=null&&k.v7_partialHydration&&p.length===0&&!v.initialized&&v.matches.length>0)a=v.matches;else return null}let P=a,c=(E=v)==null?void 0:E.errors;if(c!=null){let V=P.findIndex($=>$.route.id&&(c==null?void 0:c[$.route.id])!==void 0);V>=0||Br(!1),P=P.slice(0,Math.min(P.length,V+1))}let F=!1,N=-1;if(v&&w&&w.v7_partialHydration)for(let V=0;V<P.length;V++){let $=P[V];if(($.route.HydrateFallback||$.route.hydrateFallbackElement)&&(N=V),$.route.id){let{loaderData:U,errors:me}=v,he=$.route.loader&&U[$.route.id]===void 0&&(!me||me[$.route.id]===void 0);if($.route.lazy||he){F=!0,N>=0?P=P.slice(0,N+1):P=[P[0]];break}}}return P.reduceRight((V,$,U)=>{let me,he=!1,J=null,oe=null;v&&(me=c&&$.route.id?c[$.route.id]:void 0,J=$.route.errorElement||nx,F&&(N<0&&U===0?(hx("route-fallback"),he=!0,oe=null):N===U&&(he=!0,oe=$.route.hydrateFallbackElement||null)));let _e=p.concat(P.slice(0,U+1)),ke=()=>{let Ee;return me?Ee=J:he?Ee=oe:$.route.Component?Ee=ee.createElement($.route.Component,null):$.route.element?Ee=$.route.element:Ee=V,ee.createElement(ix,{match:$,routeContext:{outlet:V,matches:_e,isDataRoute:v!=null},children:Ee})};return v&&($.route.ErrorBoundary||$.route.errorElement||U===0)?ee.createElement(rx,{location:v.location,revalidation:v.revalidation,component:J,error:me,children:ke(),routeContext:{outlet:null,matches:_e,isDataRoute:!0}}):ke()},null)}var Wg=function(a){return a.UseBlocker="useBlocker",a.UseRevalidator="useRevalidator",a.UseNavigateStable="useNavigate",a}(Wg||{}),Zg=function(a){return a.UseBlocker="useBlocker",a.UseLoaderData="useLoaderData",a.UseActionData="useActionData",a.UseRouteError="useRouteError",a.UseNavigation="useNavigation",a.UseRouteLoaderData="useRouteLoaderData",a.UseMatches="useMatches",a.UseRevalidator="useRevalidator",a.UseNavigateStable="useNavigate",a.UseRouteId="useRouteId",a}(Zg||{});function sx(a){let p=ee.useContext(Df);return p||Br(!1),p}function ax(a){let p=ee.useContext(Kv);return p||Br(!1),p}function lx(a){let p=ee.useContext(au);return p||Br(!1),p}function Xg(a){let p=lx(),v=p.matches[p.matches.length-1];return v.route.id||Br(!1),v.route.id}function cx(){var a;let p=ee.useContext(Hg),v=ax(),w=Xg();return p!==void 0?p:(a=v.errors)==null?void 0:a[w]}function ux(){let{router:a}=sx(Wg.UseNavigateStable),p=Xg(Zg.UseNavigateStable),v=ee.useRef(!1);return Gg(()=>{v.current=!0}),ee.useCallback(function(E,k){k===void 0&&(k={}),v.current&&(typeof E=="number"?a.navigate(E):a.navigate(E,nd({fromRouteId:p},k)))},[a,p])}const Em={};function hx(a,p,v){Em[a]||(Em[a]=!0)}function dx(a,p){a==null||a.v7_startTransition,a==null||a.v7_relativeSplatPath}function rl(a){Br(!1)}function px(a){let{basename:p="/",children:v=null,location:w,navigationType:E=nc.Pop,navigator:k,static:P=!1,future:c}=a;hd()&&Br(!1);let F=p.replace(/^\/*/,"/"),N=ee.useMemo(()=>({basename:F,navigator:k,static:P,future:nd({v7_relativeSplatPath:!1},c)}),[F,c,k,P]);typeof w=="string"&&(w=ou(w));let{pathname:V="/",search:$="",hash:U="",state:me=null,key:he="default"}=w,J=ee.useMemo(()=>{let oe=Rf(V,F);return oe==null?null:{location:{pathname:oe,search:$,hash:U,state:me,key:he},navigationType:E}},[F,V,$,U,me,he,E]);return J==null?null:ee.createElement(su.Provider,{value:N},ee.createElement(xp.Provider,{children:v,value:J}))}function fx(a){let{children:p,location:v}=a;return Qv(bf(p),v)}new Promise(()=>{});function bf(a,p){p===void 0&&(p=[]);let v=[];return ee.Children.forEach(a,(w,E)=>{if(!ee.isValidElement(w))return;let k=[...p,E];if(w.type===ee.Fragment){v.push.apply(v,bf(w.props.children,k));return}w.type!==rl&&Br(!1),!w.props.index||!w.props.children||Br(!1);let P={id:w.props.id||k.join("-"),caseSensitive:w.props.caseSensitive,element:w.props.element,Component:w.props.Component,index:w.props.index,path:w.props.path,loader:w.props.loader,action:w.props.action,errorElement:w.props.errorElement,ErrorBoundary:w.props.ErrorBoundary,hasErrorBoundary:w.props.ErrorBoundary!=null||w.props.errorElement!=null,shouldRevalidate:w.props.shouldRevalidate,handle:w.props.handle,lazy:w.props.lazy};w.props.children&&(P.children=bf(w.props.children,k)),v.push(P)}),v}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sf(){return Sf=Object.assign?Object.assign.bind():function(a){for(var p=1;p<arguments.length;p++){var v=arguments[p];for(var w in v)Object.prototype.hasOwnProperty.call(v,w)&&(a[w]=v[w])}return a},Sf.apply(this,arguments)}function mx(a,p){if(a==null)return{};var v={},w=Object.keys(a),E,k;for(k=0;k<w.length;k++)E=w[k],!(p.indexOf(E)>=0)&&(v[E]=a[E]);return v}function gx(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function yx(a,p){return a.button===0&&(!p||p==="_self")&&!gx(a)}const vx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],xx="6";try{window.__reactRouterVersion=xx}catch{}const _x="startTransition",Tm=O0[_x];function wx(a){let{basename:p,children:v,future:w,window:E}=a,k=ee.useRef();k.current==null&&(k.current=Ev({window:E,v5Compat:!0}));let P=k.current,[c,F]=ee.useState({action:P.action,location:P.location}),{v7_startTransition:N}=w||{},V=ee.useCallback($=>{N&&Tm?Tm(()=>F($)):F($)},[F,N]);return ee.useLayoutEffect(()=>P.listen(V),[P,V]),ee.useEffect(()=>dx(w),[w]),ee.createElement(px,{basename:p,children:v,location:c.location,navigationType:c.action,navigator:P,future:w})}const bx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Sx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yh=ee.forwardRef(function(p,v){let{onClick:w,relative:E,reloadDocument:k,replace:P,state:c,target:F,to:N,preventScrollReset:V,viewTransition:$}=p,U=mx(p,vx),{basename:me}=ee.useContext(su),he,J=!1;if(typeof N=="string"&&Sx.test(N)&&(he=N,bx))try{let Ee=new URL(window.location.href),Ve=N.startsWith("//")?new URL(Ee.protocol+N):new URL(N),Me=Rf(Ve.pathname,me);Ve.origin===Ee.origin&&Me!=null?N=Me+Ve.search+Ve.hash:J=!0}catch{}let oe=Jv(N,{relative:E}),_e=Ex(N,{replace:P,state:c,target:F,preventScrollReset:V,relative:E,viewTransition:$});function ke(Ee){w&&w(Ee),Ee.defaultPrevented||_e(Ee)}return ee.createElement("a",Sf({},U,{href:he||oe,onClick:J||k?w:ke,ref:v,target:F}))});var km;(function(a){a.UseScrollRestoration="useScrollRestoration",a.UseSubmit="useSubmit",a.UseSubmitFetcher="useSubmitFetcher",a.UseFetcher="useFetcher",a.useViewTransitionState="useViewTransitionState"})(km||(km={}));var Mm;(function(a){a.UseFetcher="useFetcher",a.UseFetchers="useFetchers",a.UseScrollRestoration="useScrollRestoration"})(Mm||(Mm={}));function Ex(a,p){let{target:v,replace:w,state:E,preventScrollReset:k,relative:P,viewTransition:c}=p===void 0?{}:p,F=oc(),N=dd(),V=qg(a,{relative:P});return ee.useCallback($=>{if(yx($,v)){$.preventDefault();let U=w!==void 0?w:pp(N)===pp(V);F(a,{replace:U,state:E,preventScrollReset:k,relative:P,viewTransition:c})}},[N,F,V,w,E,v,a,k,P,c])}const fp="/golden_path/assets/logo-CjfPudve.png";function Tx(){const a=oc(),p=Ui();return y.jsxs("div",{className:"profile-container",children:[y.jsxs("div",{className:"profile-header",children:[y.jsx("button",{className:"back-arrow",onClick:()=>a(-1),children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:y.jsx("path",{d:"M15 6l-6 6l6 6",stroke:"currentColor",strokeWidth:"2",fill:"none"})})}),y.jsx("h1",{className:"profile-title",children:y.jsx(qe,{id:"profileTitle"})}),y.jsx("div",{className:"profile-avatar-container",children:y.jsx("div",{className:"profile-avatar",children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",viewBox:"0 0 24 24",fill:"none",strokeWidth:"0.5",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsxs("defs",{children:[y.jsxs("linearGradient",{id:"borderGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[y.jsx("stop",{offset:"0%",stopColor:"#4FC3F7"}),y.jsx("stop",{offset:"100%",stopColor:"#2196F3"})]}),y.jsxs("linearGradient",{id:"avatarGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[y.jsx("stop",{offset:"0%",stopColor:"#64B5F6"}),y.jsx("stop",{offset:"100%",stopColor:"#1976D2"})]})]}),y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",fill:"url(#avatarGradient)"}),y.jsx("path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",fill:"url(#avatarGradient)"})]})})}),y.jsxs("div",{className:"user-info",children:[y.jsx("p",{className:"user-name",children:y.jsx(qe,{id:"defaultUserName"})}),y.jsx("p",{className:"user-phone",children:"98-964879789+"})]}),y.jsx("button",{className:"complete-profile-btn",children:y.jsx(qe,{id:"completeProfile"})})]}),y.jsxs("div",{className:"profile-sections",children:[y.jsxs("div",{className:"profile-section",children:[y.jsx("h2",{className:"section-title",children:y.jsx(qe,{id:"accountSection"})}),y.jsxs("div",{className:"section-item",children:[y.jsx("span",{className:"item-icon",children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[y.jsx("path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0"}),y.jsx("path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"})]})}),y.jsx("span",{className:"item-text",children:y.jsx(qe,{id:"accountInfo"})}),y.jsx("span",{className:"item-arrow",children:""})]}),y.jsxs("div",{className:"section-item",children:[y.jsx("span",{className:"item-icon",children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[y.jsx("path",{d:"M3 19a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}),y.jsx("path",{d:"M19 7a2 2 0 1 0 0 -4a2 2 0 0 0 0 4z"}),y.jsx("path",{d:"M11 19h5.5a3.5 3.5 0 0 0 0 -7h-8a3.5 3.5 0 0 1 0 -7h4.5"})]})}),y.jsx("span",{className:"item-text",children:y.jsx(qe,{id:"myRoutes"})}),y.jsx("span",{className:"item-arrow",children:""})]}),y.jsxs("div",{className:"section-item",children:[y.jsx("span",{className:"item-icon",children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[y.jsx("path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z"}),y.jsx("path",{d:"M12 4v7l2 -2l2 2v-7"})]})}),y.jsx("span",{className:"item-text",children:y.jsx(qe,{id:"savedPlaces"})}),y.jsx("span",{className:"item-arrow",children:""})]})]}),y.jsxs("div",{className:"profile-section",children:[y.jsx("h2",{className:"section-title",children:y.jsx(qe,{id:"settingsSection"})}),y.jsxs("div",{className:"section-item",children:[y.jsx("span",{className:"item-icon",children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[y.jsx("path",{d:"M4 5h7"}),y.jsx("path",{d:"M9 3v2c0 4.418 -2.239 8 -5 8"}),y.jsx("path",{d:"M5 9c0 2.144 2.952 3.908 6.7 4"}),y.jsx("path",{d:"M12 20l4 -9l4 9"}),y.jsx("path",{d:"M19.1 18h-6.2"})]})}),y.jsx("span",{className:"item-text",children:y.jsx(qe,{id:"language"})}),y.jsx("span",{className:"item-arrow",children:""})]}),y.jsxs("div",{className:"section-item",children:[y.jsx("span",{className:"item-icon",children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[y.jsx("path",{d:"M10 5a2 2 0 1 1 4 0a7 7 0 0 1 4 6v3a4 4 0 0 0 2 3h-16a4 4 0 0 0 2 -3v-3a7 7 0 0 1 4 -6"}),y.jsx("path",{d:"M9 17v1a3 3 0 0 0 6 0v-1"})]})}),y.jsx("span",{className:"item-text",children:y.jsx(qe,{id:"notifications"})}),y.jsx("span",{className:"item-arrow",children:""})]})]}),y.jsxs("div",{className:"profile-section",children:[y.jsx("h2",{className:"section-title",children:y.jsx(qe,{id:"supportSection"})}),y.jsxs("div",{className:"section-item",children:[y.jsx("span",{className:"item-icon",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:y.jsx("path",{d:"M5 4h4l2 5l-2.5 1.5a11 11 0 0 0 5 5l1.5 -2.5l5 2v4a2 2 0 0 1 -2 2a16 16 0 0 1 -15 -15a2 2 0 0 1 2 -2"})})}),y.jsx("span",{className:"item-text",children:y.jsx(qe,{id:"support"})}),y.jsx("span",{className:"item-arrow",children:""})]}),y.jsxs("div",{className:"section-item",children:[y.jsx("span",{className:"item-icon",children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[y.jsx("path",{d:"M12.802 2.165l5.575 2.389c.48 .206 .863 .589 1.07 1.07l2.388 5.574c.22 .512 .22 1.092 0 1.604l-2.389 5.575c-.206 .48 -.589 .863 -1.07 1.07l-5.574 2.388c-.512 .22 -1.092 .22 -1.604 0l-5.575 -2.389a2.036 2.036 0 0 1 -1.07 -1.07l-2.388 -5.574a2.036 2.036 0 0 1 0 -1.604l2.389 -5.575c.206 -.48 .589 -.863 1.07 -1.07l5.574 -2.388a2.036 2.036 0 0 1 1.604 0z"}),y.jsx("path",{d:"M12 16v.01"}),y.jsx("path",{d:"M12 13a2 2 0 0 0 .914 -3.782a1.98 1.98 0 0 0 -2.414 .483"})]})}),y.jsx("span",{className:"item-text",children:y.jsx(qe,{id:"faq"})}),y.jsx("span",{className:"item-arrow",children:""})]}),y.jsxs("div",{className:"section-item",children:[y.jsx("span",{className:"item-icon",children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[y.jsx("path",{d:"M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2"}),y.jsx("path",{d:"M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z"}),y.jsx("path",{d:"M9 12h6"}),y.jsx("path",{d:"M9 16h6"})]})}),y.jsx("span",{className:"item-text",children:y.jsx(qe,{id:"termsRegulation"})}),y.jsx("span",{className:"item-arrow",children:""})]}),y.jsxs("div",{className:"section-item",children:[y.jsx("span",{className:"item-icon",children:y.jsx("img",{src:fp,alt:p.formatMessage({id:"logoAlt"}),className:"custom-logo-icon"})}),y.jsx("span",{className:"item-text",children:y.jsx(qe,{id:"aboutUs"})}),y.jsx("span",{className:"item-arrow",children:""})]}),y.jsxs("div",{className:"section-item",children:[y.jsx("span",{className:"item-icon",children:y.jsx("img",{src:fp,alt:p.formatMessage({id:"logoAlt"}),className:"custom-logo-icon"})}),y.jsx("span",{className:"item-text",children:y.jsx(qe,{id:"contactUs"})}),y.jsx("span",{className:"item-arrow",children:""})]})]}),y.jsxs("div",{className:"logout-section",children:[y.jsx("h3",{className:"logout-title",children:y.jsx(qe,{id:"logoutTitle"})}),y.jsxs("div",{className:"logout-item",children:[y.jsx("span",{className:"item-icon",children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[y.jsx("path",{d:"M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2"}),y.jsx("path",{d:"M9 12h12l-3 -3"}),y.jsx("path",{d:"M18 15l3 -3"})]})}),y.jsx("span",{className:"item-text",children:y.jsx(qe,{id:"logoutAccount"})}),y.jsx("span",{className:"item-arrow",children:""})]})]})]})]})}const kx="modulepreload",Mx=function(a){return"/golden_path/"+a},Cm={},Kg=function(p,v,w){let E=Promise.resolve();if(v&&v.length>0){let P=function(N){return Promise.all(N.map(V=>Promise.resolve(V).then($=>({status:"fulfilled",value:$}),$=>({status:"rejected",reason:$}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),F=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));E=P(v.map(N=>{if(N=Mx(N),N in Cm)return;Cm[N]=!0;const V=N.endsWith(".css"),$=V?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${N}"]${$}`))return;const U=document.createElement("link");if(U.rel=V?"stylesheet":kx,V||(U.as="script"),U.crossOrigin="",U.href=N,F&&U.setAttribute("nonce",F),document.head.appendChild(U),V)return new Promise((me,he)=>{U.addEventListener("load",me),U.addEventListener("error",()=>he(new Error(`Unable to preload CSS for ${N}`)))})}))}function k(P){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=P,window.dispatchEvent(c),!c.defaultPrevented)throw P}return E.then(P=>{for(const c of P||[])c.status==="rejected"&&k(c.reason);return p().catch(k)})},Cx=ee.createContext(null);function Px(a,p){const v=Array.isArray(a)?a[0]:a?a.x:0,w=Array.isArray(a)?a[1]:a?a.y:0,E=Array.isArray(p)?p[0]:p?p.x:0,k=Array.isArray(p)?p[1]:p?p.y:0;return v===E&&w===k}function co(a,p){if(a===p)return!0;if(!a||!p)return!1;if(Array.isArray(a)){if(!Array.isArray(p)||a.length!==p.length)return!1;for(let v=0;v<a.length;v++)if(!co(a[v],p[v]))return!1;return!0}else if(Array.isArray(p))return!1;if(typeof a=="object"&&typeof p=="object"){const v=Object.keys(a),w=Object.keys(p);if(v.length!==w.length)return!1;for(const E of v)if(!p.hasOwnProperty(E)||!co(a[E],p[E]))return!1;return!0}return!1}function Ix(a){const p=a.clone();return p.pixelsToGLUnits=a.pixelsToGLUnits,p}function Pm(a,p){if(!a.getProjection)return;const v=a.getProjection(),w=p.getProjection();co(v,w)||p.setProjection(v)}function Im(a){return{longitude:a.center.lng,latitude:a.center.lat,zoom:a.zoom,pitch:a.pitch,bearing:a.bearing,padding:a.padding}}function Am(a,p){const v=p.viewState||p;let w=!1;if("zoom"in v){const E=a.zoom;a.zoom=v.zoom,w=w||E!==a.zoom}if("bearing"in v){const E=a.bearing;a.bearing=v.bearing,w=w||E!==a.bearing}if("pitch"in v){const E=a.pitch;a.pitch=v.pitch,w=w||E!==a.pitch}if(v.padding&&!a.isPaddingEqual(v.padding)&&(w=!0,a.padding=v.padding),"longitude"in v&&"latitude"in v){const E=a.center;a.center=new E.constructor(v.longitude,v.latitude),w=w||E!==a.center}return w}const Ax=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Lm(a){if(!a)return null;if(typeof a=="string"||("toJS"in a&&(a=a.toJS()),!a.layers))return a;const p={};for(const w of a.layers)p[w.id]=w;const v=a.layers.map(w=>{let E=null;"interactive"in w&&(E=Object.assign({},w),delete E.interactive);const k=p[w.ref];if(k){E=E||Object.assign({},w),delete E.ref;for(const P of Ax)P in k&&(E[P]=k[P])}return E||w});return{...a,layers:v}}var zm={};const jm={version:8,sources:{},layers:[]},Rm={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},tf={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},Dm={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},Lx=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],zx=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class eh{constructor(p,v,w){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=E=>{const k=this.props[Dm[E.type]];k?k(E):E.type==="error"&&console.error(E.error)},this._onPointerEvent=E=>{(E.type==="mousemove"||E.type==="mouseout")&&this._updateHover(E);const k=this.props[Rm[E.type]];k&&(this.props.interactiveLayerIds&&E.type!=="mouseover"&&E.type!=="mouseout"&&(E.features=this._hoveredFeatures||this._queryRenderedFeatures(E.point)),k(E),delete E.features)},this._onCameraEvent=E=>{if(!this._internalUpdate){const k=this.props[tf[E.type]];k&&k(E)}E.type in this._deferredEvents&&(this._deferredEvents[E.type]=!1)},this._MapClass=p,this.props=v,this._initialize(w)}get map(){return this._map}get transform(){return this._renderTransform}setProps(p){const v=this.props;this.props=p;const w=this._updateSettings(p,v);w&&this._createShadowTransform(this._map);const E=this._updateSize(p),k=this._updateViewState(p,!0);this._updateStyle(p,v),this._updateStyleComponents(p,v),this._updateHandlers(p,v),(w||E||k&&!this._map.isMoving())&&this.redraw()}static reuse(p,v){const w=eh.savedMaps.pop();if(!w)return null;const E=w.map,k=E.getContainer();for(v.className=k.className;k.childNodes.length>0;)v.appendChild(k.childNodes[0]);E._container=v;const P=E._resizeObserver;P&&(P.disconnect(),P.observe(v)),w.setProps({...p,styleDiffing:!1}),E.resize();const{initialViewState:c}=p;return c&&(c.bounds?E.fitBounds(c.bounds,{...c.fitBoundsOptions,duration:0}):w._updateViewState(c,!1)),E.isStyleLoaded()?E.fire("load"):E.once("styledata",()=>E.fire("load")),E._update(),w}_initialize(p){const{props:v}=this,{mapStyle:w=jm}=v,E={...v,...v.initialViewState,accessToken:v.mapboxAccessToken||jx()||null,container:p,style:Lm(w)},k=E.initialViewState||E.viewState||E;if(Object.assign(E,{center:[k.longitude||0,k.latitude||0],zoom:k.zoom||0,pitch:k.pitch||0,bearing:k.bearing||0}),v.gl){const V=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=V,v.gl)}const P=new this._MapClass(E);k.padding&&P.setPadding(k.padding),v.cursor&&(P.getCanvas().style.cursor=v.cursor),this._createShadowTransform(P);const c=P._render;P._render=V=>{this._inRender=!0,c.call(P,V),this._inRender=!1};const F=P._renderTaskQueue.run;P._renderTaskQueue.run=V=>{F.call(P._renderTaskQueue,V),this._onBeforeRepaint()},P.on("render",()=>this._onAfterRepaint());const N=P.fire;P.fire=this._fireEvent.bind(this,N),P.on("resize",()=>{this._renderTransform.resize(P.transform.width,P.transform.height)}),P.on("styledata",()=>{this._updateStyleComponents(this.props,{}),Pm(P.transform,this._renderTransform)}),P.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const V in Rm)P.on(V,this._onPointerEvent);for(const V in tf)P.on(V,this._onCameraEvent);for(const V in Dm)P.on(V,this._onEvent);this._map=P}recycle(){const v=this.map.getContainer().querySelector("[mapboxgl-children]");v==null||v.remove(),eh.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const p=this._map;!this._inRender&&p.style&&(p._frame&&(p._frame.cancel(),p._frame=null),p._render())}_createShadowTransform(p){const v=Ix(p.transform);p.painter.transform=v,this._renderTransform=v}_updateSize(p){const{viewState:v}=p;if(v){const w=this._map;if(v.width!==w.transform.width||v.height!==w.transform.height)return w.resize(),!0}return!1}_updateViewState(p,v){if(this._internalUpdate)return!1;const w=this._map,E=this._renderTransform,{zoom:k,pitch:P,bearing:c}=E,F=w.isMoving();F&&(E.cameraElevationReference="sea");const N=Am(E,{...Im(w.transform),...p});if(F&&(E.cameraElevationReference="ground"),N&&v){const V=this._deferredEvents;V.move=!0,V.zoom||(V.zoom=k!==E.zoom),V.rotate||(V.rotate=c!==E.bearing),V.pitch||(V.pitch=P!==E.pitch)}return F||Am(w.transform,p),N}_updateSettings(p,v){const w=this._map;let E=!1;for(const k of Lx)if(k in p&&!co(p[k],v[k])){E=!0;const P=w[`set${k[0].toUpperCase()}${k.slice(1)}`];P==null||P.call(w,p[k])}return E}_updateStyle(p,v){if(p.cursor!==v.cursor&&(this._map.getCanvas().style.cursor=p.cursor||""),p.mapStyle!==v.mapStyle){const{mapStyle:w=jm,styleDiffing:E=!0}=p,k={diff:E};return"localIdeographFontFamily"in p&&(k.localIdeographFontFamily=p.localIdeographFontFamily),this._map.setStyle(Lm(w),k),!0}return!1}_updateStyleComponents(p,v){const w=this._map;let E=!1;return w.isStyleLoaded()&&("light"in p&&w.setLight&&!co(p.light,v.light)&&(E=!0,w.setLight(p.light)),"fog"in p&&w.setFog&&!co(p.fog,v.fog)&&(E=!0,w.setFog(p.fog)),"terrain"in p&&w.setTerrain&&!co(p.terrain,v.terrain)&&(!p.terrain||w.getSource(p.terrain.source))&&(E=!0,w.setTerrain(p.terrain))),E}_updateHandlers(p,v){var w,E;const k=this._map;let P=!1;for(const c of zx){const F=(w=p[c])!==null&&w!==void 0?w:!0,N=(E=v[c])!==null&&E!==void 0?E:!0;co(F,N)||(P=!0,F?k[c].enable(F):k[c].disable())}return P}_queryRenderedFeatures(p){const v=this._map,w=v.transform,{interactiveLayerIds:E=[]}=this.props;try{return v.transform=this._renderTransform,v.queryRenderedFeatures(p,{layers:E.filter(v.getLayer.bind(v))})}catch{return[]}finally{v.transform=w}}_updateHover(p){var v;const{props:w}=this;if(w.interactiveLayerIds&&(w.onMouseMove||w.onMouseEnter||w.onMouseLeave)){const k=p.type,P=((v=this._hoveredFeatures)===null||v===void 0?void 0:v.length)>0,c=this._queryRenderedFeatures(p.point),F=c.length>0;!F&&P&&(p.type="mouseleave",this._onPointerEvent(p)),this._hoveredFeatures=c,F&&!P&&(p.type="mouseenter",this._onPointerEvent(p)),p.type=k}else this._hoveredFeatures=null}_fireEvent(p,v,w){const E=this._map,k=E.transform,P=typeof v=="string"?v:v.type;return P==="move"&&this._updateViewState(this.props,!1),P in tf&&(typeof v=="object"&&(v.viewState=Im(k)),this._map.isMoving())?(E.transform=this._renderTransform,p.call(E,v,w),E.transform=k,E):(p.call(E,v,w),E)}_onBeforeRepaint(){const p=this._map;this._internalUpdate=!0;for(const w in this._deferredEvents)this._deferredEvents[w]&&p.fire(w);this._internalUpdate=!1;const v=this._map.transform;p.transform=this._renderTransform,this._onAfterRepaint=()=>{Pm(this._renderTransform,v),p.transform=v}}}eh.savedMaps=[];function jx(){let a=null;if(typeof location<"u"){const p=/access_token=([^&\/]*)/.exec(location.search);a=p&&p[1]}try{a=a||zm.MapboxAccessToken}catch{}try{a=a||zm.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return a}const Rx=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function Dx(a){if(!a)return null;const p=a.map,v={getMap:()=>p,getCenter:()=>a.transform.center,getZoom:()=>a.transform.zoom,getBearing:()=>a.transform.bearing,getPitch:()=>a.transform.pitch,getPadding:()=>a.transform.padding,getBounds:()=>a.transform.getBounds(),project:w=>{const E=p.transform;p.transform=a.transform;const k=p.project(w);return p.transform=E,k},unproject:w=>{const E=p.transform;p.transform=a.transform;const k=p.unproject(w);return p.transform=E,k},queryTerrainElevation:(w,E)=>{const k=p.transform;p.transform=a.transform;const P=p.queryTerrainElevation(w,E);return p.transform=k,P},queryRenderedFeatures:(w,E)=>{const k=p.transform;p.transform=a.transform;const P=p.queryRenderedFeatures(w,E);return p.transform=k,P}};for(const w of Nx(p))!(w in v)&&!Rx.includes(w)&&(v[w]=p[w].bind(p));return v}function Nx(a){const p=new Set;let v=a;for(;v;){for(const w of Object.getOwnPropertyNames(v))w[0]!=="_"&&typeof a[w]=="function"&&w!=="fire"&&w!=="setEventedParent"&&p.add(w);v=Object.getPrototypeOf(v)}return Array.from(p)}const Bx=typeof document<"u"?ee.useLayoutEffect:ee.useEffect,Fx=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function Ox(a,p){for(const w of Fx)w in p&&(a[w]=p[w]);const{RTLTextPlugin:v="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=p;v&&a.getRTLTextPluginStatus&&a.getRTLTextPluginStatus()==="unavailable"&&a.setRTLTextPlugin(v,w=>{w&&console.error(w)},!0)}const oh=ee.createContext(null);function $x(a,p,v){const w=ee.useContext(Cx),[E,k]=ee.useState(null),P=ee.useRef(),{current:c}=ee.useRef({mapLib:null,map:null});ee.useEffect(()=>{const V=a.mapLib;let $=!0,U;return Promise.resolve(V||v).then(me=>{if(!$)return;if(!me)throw new Error("Invalid mapLib");const he="Map"in me?me:me.default;if(!he.Map)throw new Error("Invalid mapLib");if(Ox(he,a),!he.supported||he.supported(a))a.reuseMaps&&(U=eh.reuse(a,P.current)),U||(U=new eh(he.Map,a,P.current)),c.map=Dx(U),c.mapLib=he,k(U),w==null||w.onMapMount(c.map,a.id);else throw new Error("Map is not supported by this browser")}).catch(me=>{const{onError:he}=a;he?he({type:"error",target:null,originalEvent:null,error:me}):console.error(me)}),()=>{$=!1,U&&(w==null||w.onMapUnmount(a.id),a.reuseMaps?U.recycle():U.destroy())}},[]),Bx(()=>{E&&E.setProps(a)}),ee.useImperativeHandle(p,()=>c.map,[E]);const F=ee.useMemo(()=>({position:"relative",width:"100%",height:"100%",...a.style}),[a.style]),N={height:"100%"};return ee.createElement("div",{id:a.id,ref:P,style:F},E&&ee.createElement(oh.Provider,{value:c},ee.createElement("div",{"mapboxgl-children":"",style:N},a.children)))}const Ux=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function lu(a,p){if(!a||!p)return;const v=a.style;for(const w in p){const E=p[w];Number.isFinite(E)&&!Ux.test(w)?v[w]=`${E}px`:v[w]=E}}function Vx(a,p){const{map:v,mapLib:w}=ee.useContext(oh),E=ee.useRef({props:a});E.current.props=a;const k=ee.useMemo(()=>{let J=!1;ee.Children.forEach(a.children,ke=>{ke&&(J=!0)});const oe={...a,element:J?document.createElement("div"):null},_e=new w.Marker(oe);return _e.setLngLat([a.longitude,a.latitude]),_e.getElement().addEventListener("click",ke=>{var Ee,Ve;(Ve=(Ee=E.current.props).onClick)===null||Ve===void 0||Ve.call(Ee,{type:"click",target:_e,originalEvent:ke})}),_e.on("dragstart",ke=>{var Ee,Ve;const Me=ke;Me.lngLat=k.getLngLat(),(Ve=(Ee=E.current.props).onDragStart)===null||Ve===void 0||Ve.call(Ee,Me)}),_e.on("drag",ke=>{var Ee,Ve;const Me=ke;Me.lngLat=k.getLngLat(),(Ve=(Ee=E.current.props).onDrag)===null||Ve===void 0||Ve.call(Ee,Me)}),_e.on("dragend",ke=>{var Ee,Ve;const Me=ke;Me.lngLat=k.getLngLat(),(Ve=(Ee=E.current.props).onDragEnd)===null||Ve===void 0||Ve.call(Ee,Me)}),_e},[]);ee.useEffect(()=>(k.addTo(v.getMap()),()=>{k.remove()}),[]);const{longitude:P,latitude:c,offset:F,style:N,draggable:V=!1,popup:$=null,rotation:U=0,rotationAlignment:me="auto",pitchAlignment:he="auto"}=a;return ee.useEffect(()=>{lu(k.getElement(),N)},[N]),ee.useImperativeHandle(p,()=>k,[]),(k.getLngLat().lng!==P||k.getLngLat().lat!==c)&&k.setLngLat([P,c]),F&&!Px(k.getOffset(),F)&&k.setOffset(F),k.isDraggable()!==V&&k.setDraggable(V),k.getRotation()!==U&&k.setRotation(U),k.getRotationAlignment()!==me&&k.setRotationAlignment(me),k.getPitchAlignment()!==he&&k.setPitchAlignment(he),k.getPopup()!==$&&k.setPopup($),Bg.createPortal(a.children,k.getElement())}const Hx=ee.memo(ee.forwardRef(Vx));function Nm(a){return new Set(a?a.trim().split(/\s+/):[])}function Gx(a,p){const{map:v,mapLib:w}=ee.useContext(oh),E=ee.useMemo(()=>document.createElement("div"),[]),k=ee.useRef({props:a});k.current.props=a;const P=ee.useMemo(()=>{const c={...a},F=new w.Popup(c);return F.setLngLat([a.longitude,a.latitude]),F.once("open",N=>{var V,$;($=(V=k.current.props).onOpen)===null||$===void 0||$.call(V,N)}),F},[]);if(ee.useEffect(()=>{const c=F=>{var N,V;(V=(N=k.current.props).onClose)===null||V===void 0||V.call(N,F)};return P.on("close",c),P.setDOMContent(E).addTo(v.getMap()),()=>{P.off("close",c),P.isOpen()&&P.remove()}},[]),ee.useEffect(()=>{lu(P.getElement(),a.style)},[a.style]),ee.useImperativeHandle(p,()=>P,[]),P.isOpen()&&((P.getLngLat().lng!==a.longitude||P.getLngLat().lat!==a.latitude)&&P.setLngLat([a.longitude,a.latitude]),a.offset&&!co(P.options.offset,a.offset)&&P.setOffset(a.offset),(P.options.anchor!==a.anchor||P.options.maxWidth!==a.maxWidth)&&(P.options.anchor=a.anchor,P.setMaxWidth(a.maxWidth)),P.options.className!==a.className)){const c=Nm(P.options.className),F=Nm(a.className);for(const N of c)F.has(N)||P.removeClassName(N);for(const N of F)c.has(N)||P.addClassName(N);P.options.className=a.className}return Bg.createPortal(a.children,E)}ee.memo(ee.forwardRef(Gx));function pd(a,p,v,w){const E=ee.useContext(oh),k=ee.useMemo(()=>a(E),[]);return ee.useEffect(()=>{const P=p,c=null,F=typeof p=="function"?p:null,{map:N}=E;return N.hasControl(k)||(N.addControl(k,P==null?void 0:P.position),c&&c(E)),()=>{F&&F(E),N.hasControl(k)&&N.removeControl(k)}},[]),k}function qx(a){const p=pd(({mapLib:v})=>new v.AttributionControl(a),{position:a.position});return ee.useEffect(()=>{lu(p._container,a.style)},[a.style]),null}ee.memo(qx);function Wx(a){const p=pd(({mapLib:v})=>new v.FullscreenControl({container:a.containerId&&document.getElementById(a.containerId)}),{position:a.position});return ee.useEffect(()=>{lu(p._controlContainer,a.style)},[a.style]),null}ee.memo(Wx);function Zx(a,p){const v=ee.useRef({props:a}),w=pd(({mapLib:E})=>{const k=new E.GeolocateControl(a),P=k._setupUI;return k._setupUI=c=>{k._container.hasChildNodes()||P(c)},k.on("geolocate",c=>{var F,N;(N=(F=v.current.props).onGeolocate)===null||N===void 0||N.call(F,c)}),k.on("error",c=>{var F,N;(N=(F=v.current.props).onError)===null||N===void 0||N.call(F,c)}),k.on("outofmaxbounds",c=>{var F,N;(N=(F=v.current.props).onOutOfMaxBounds)===null||N===void 0||N.call(F,c)}),k.on("trackuserlocationstart",c=>{var F,N;(N=(F=v.current.props).onTrackUserLocationStart)===null||N===void 0||N.call(F,c)}),k.on("trackuserlocationend",c=>{var F,N;(N=(F=v.current.props).onTrackUserLocationEnd)===null||N===void 0||N.call(F,c)}),k},{position:a.position});return v.current.props=a,ee.useImperativeHandle(p,()=>w,[]),ee.useEffect(()=>{lu(w._container,a.style)},[a.style]),null}ee.memo(ee.forwardRef(Zx));function Xx(a){const p=pd(({mapLib:v})=>new v.NavigationControl(a),{position:a.position});return ee.useEffect(()=>{lu(p._container,a.style)},[a.style]),null}ee.memo(Xx);function Kx(a){const p=pd(({mapLib:k})=>new k.ScaleControl(a),{position:a.position}),v=ee.useRef(a),w=v.current;v.current=a;const{style:E}=a;return a.maxWidth!==void 0&&a.maxWidth!==w.maxWidth&&(p.options.maxWidth=a.maxWidth),a.unit!==void 0&&a.unit!==w.unit&&p.setUnit(a.unit),ee.useEffect(()=>{lu(p._container,E)},[E]),null}ee.memo(Kx);function mp(a,p){if(!a)throw new Error(p)}function Jx(a,p,v,w){if(mp(v.id===w.id,"layer id changed"),mp(v.type===w.type,"layer type changed"),v.type==="custom"||w.type==="custom")return;const{layout:E={},paint:k={},filter:P,minzoom:c,maxzoom:F,beforeId:N}=v;if(N!==w.beforeId&&a.moveLayer(p,N),E!==w.layout){const V=w.layout||{};for(const $ in E)co(E[$],V[$])||a.setLayoutProperty(p,$,E[$]);for(const $ in V)E.hasOwnProperty($)||a.setLayoutProperty(p,$,void 0)}if(k!==w.paint){const V=w.paint||{};for(const $ in k)co(k[$],V[$])||a.setPaintProperty(p,$,k[$]);for(const $ in V)k.hasOwnProperty($)||a.setPaintProperty(p,$,void 0)}co(P,w.filter)||a.setFilter(p,P),(c!==w.minzoom||F!==w.maxzoom)&&a.setLayerZoomRange(p,c,F)}function Yx(a,p,v){if(a.style&&a.style._loaded&&(!("source"in v)||a.getSource(v.source))){const w={...v,id:p};delete w.beforeId,a.addLayer(w,v.beforeId)}}let Qx=0;function e_(a){const p=ee.useContext(oh).map.getMap(),v=ee.useRef(a),[,w]=ee.useState(0),E=ee.useMemo(()=>a.id||`jsx-layer-${Qx++}`,[]);if(ee.useEffect(()=>{if(p){const P=()=>w(c=>c+1);return p.on("styledata",P),P(),()=>{p.off("styledata",P),p.style&&p.style._loaded&&p.getLayer(E)&&p.removeLayer(E)}}},[p]),p&&p.style&&p.getLayer(E))try{Jx(p,E,a,v.current)}catch(P){console.warn(P)}else Yx(p,E,a);return v.current=a,null}let t_=0;function n_(a,p,v){if(a.style&&a.style._loaded){const w={...v};return delete w.id,delete w.children,a.addSource(p,w),a.getSource(p)}return null}function r_(a,p,v){mp(p.id===v.id,"source id changed"),mp(p.type===v.type,"source type changed");let w="",E=0;for(const P in p)P!=="children"&&P!=="id"&&!co(v[P],p[P])&&(w=P,E++);if(!E)return;const k=p.type;k==="geojson"?a.setData(p.data):k==="image"?a.updateImage({url:p.url,coordinates:p.coordinates}):"setCoordinates"in a&&E===1&&w==="coordinates"?a.setCoordinates(p.coordinates):"setUrl"in a&&w==="url"?a.setUrl(p.url):"setTiles"in a&&w==="tiles"?a.setTiles(p.tiles):console.warn(`Unable to update <Source> prop: ${w}`)}function i_(a){const p=ee.useContext(oh).map.getMap(),v=ee.useRef(a),[,w]=ee.useState(0),E=ee.useMemo(()=>a.id||`jsx-source-${t_++}`,[]);ee.useEffect(()=>{if(p){const P=()=>setTimeout(()=>w(c=>c+1),0);return p.on("styledata",P),P(),()=>{var c;if(p.off("styledata",P),p.style&&p.style._loaded&&p.getSource(E)){const F=(c=p.getStyle())===null||c===void 0?void 0:c.layers;if(F)for(const N of F)N.source===E&&p.removeLayer(N.id);p.removeSource(E)}}}},[p]);let k=p&&p.style&&p.getSource(E);return k?r_(k,a,v.current):k=n_(p,E,a),v.current=a,k&&ee.Children.map(a.children,P=>P&&ee.cloneElement(P,{source:E}))||null}const o_=Kg(()=>Promise.resolve().then(()=>C_),void 0),_p=ee.forwardRef(function(p,v){return $x(p,v,o_)}),ys=Hx,th=e_,nh=i_,s_={},Bm=a=>{let p;const v=new Set,w=(V,$)=>{const U=typeof V=="function"?V(p):V;if(!Object.is(U,p)){const me=p;p=$??(typeof U!="object"||U===null)?U:Object.assign({},p,U),v.forEach(he=>he(p,me))}},E=()=>p,F={setState:w,getState:E,getInitialState:()=>N,subscribe:V=>(v.add(V),()=>v.delete(V)),destroy:()=>{(s_?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),v.clear()}},N=p=a(w,E,F);return F},a_=a=>a?Bm(a):Bm;var nf={exports:{}},rf={},of={exports:{}},sf={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fm;function l_(){if(Fm)return sf;Fm=1;var a=ad();function p($,U){return $===U&&($!==0||1/$===1/U)||$!==$&&U!==U}var v=typeof Object.is=="function"?Object.is:p,w=a.useState,E=a.useEffect,k=a.useLayoutEffect,P=a.useDebugValue;function c($,U){var me=U(),he=w({inst:{value:me,getSnapshot:U}}),J=he[0].inst,oe=he[1];return k(function(){J.value=me,J.getSnapshot=U,F(J)&&oe({inst:J})},[$,me,U]),E(function(){return F(J)&&oe({inst:J}),$(function(){F(J)&&oe({inst:J})})},[$]),P(me),me}function F($){var U=$.getSnapshot;$=$.value;try{var me=U();return!v($,me)}catch{return!0}}function N($,U){return U()}var V=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?N:c;return sf.useSyncExternalStore=a.useSyncExternalStore!==void 0?a.useSyncExternalStore:V,sf}var Om;function c_(){return Om||(Om=1,of.exports=l_()),of.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $m;function u_(){if($m)return rf;$m=1;var a=ad(),p=c_();function v(N,V){return N===V&&(N!==0||1/N===1/V)||N!==N&&V!==V}var w=typeof Object.is=="function"?Object.is:v,E=p.useSyncExternalStore,k=a.useRef,P=a.useEffect,c=a.useMemo,F=a.useDebugValue;return rf.useSyncExternalStoreWithSelector=function(N,V,$,U,me){var he=k(null);if(he.current===null){var J={hasValue:!1,value:null};he.current=J}else J=he.current;he=c(function(){function _e(tt){if(!ke){if(ke=!0,Ee=tt,tt=U(tt),me!==void 0&&J.hasValue){var it=J.value;if(me(it,tt))return Ve=it}return Ve=tt}if(it=Ve,w(Ee,tt))return it;var Ge=U(tt);return me!==void 0&&me(it,Ge)?(Ee=tt,it):(Ee=tt,Ve=Ge)}var ke=!1,Ee,Ve,Me=$===void 0?null:$;return[function(){return _e(V())},Me===null?void 0:function(){return _e(Me())}]},[V,$,U,me]);var oe=E(N,he[0],he[1]);return P(function(){J.hasValue=!0,J.value=oe},[oe]),F(oe),oe},rf}var Um;function h_(){return Um||(Um=1,nf.exports=u_()),nf.exports}var d_=h_();const p_=vp(d_),Jg={},{useDebugValue:f_}=ed,{useSyncExternalStoreWithSelector:m_}=p_;let Vm=!1;const g_=a=>a;function y_(a,p=g_,v){(Jg?"production":void 0)!=="production"&&v&&!Vm&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Vm=!0);const w=m_(a.subscribe,a.getState,a.getServerState||a.getInitialState,p,v);return f_(w),w}const Hm=a=>{(Jg?"production":void 0)!=="production"&&typeof a!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const p=typeof a=="function"?a_(a):a,v=(w,E)=>y_(p,w,E);return Object.assign(v,p),v},Nf=a=>a?Hm(a):Hm,v_={};function x_(a,p){let v;try{v=a()}catch{return}return{getItem:E=>{var k;const P=F=>F===null?null:JSON.parse(F,void 0),c=(k=v.getItem(E))!=null?k:null;return c instanceof Promise?c.then(P):P(c)},setItem:(E,k)=>v.setItem(E,JSON.stringify(k,void 0)),removeItem:E=>v.removeItem(E)}}const rd=a=>p=>{try{const v=a(p);return v instanceof Promise?v:{then(w){return rd(w)(v)},catch(w){return this}}}catch(v){return{then(w){return this},catch(w){return rd(w)(v)}}}},__=(a,p)=>(v,w,E)=>{let k={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:oe=>oe,version:0,merge:(oe,_e)=>({..._e,...oe}),...p},P=!1;const c=new Set,F=new Set;let N;try{N=k.getStorage()}catch{}if(!N)return a((...oe)=>{console.warn(`[zustand persist middleware] Unable to update item '${k.name}', the given storage is currently unavailable.`),v(...oe)},w,E);const V=rd(k.serialize),$=()=>{const oe=k.partialize({...w()});let _e;const ke=V({state:oe,version:k.version}).then(Ee=>N.setItem(k.name,Ee)).catch(Ee=>{_e=Ee});if(_e)throw _e;return ke},U=E.setState;E.setState=(oe,_e)=>{U(oe,_e),$()};const me=a((...oe)=>{v(...oe),$()},w,E);let he;const J=()=>{var oe;if(!N)return;P=!1,c.forEach(ke=>ke(w()));const _e=((oe=k.onRehydrateStorage)==null?void 0:oe.call(k,w()))||void 0;return rd(N.getItem.bind(N))(k.name).then(ke=>{if(ke)return k.deserialize(ke)}).then(ke=>{if(ke)if(typeof ke.version=="number"&&ke.version!==k.version){if(k.migrate)return k.migrate(ke.state,ke.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return ke.state}).then(ke=>{var Ee;return he=k.merge(ke,(Ee=w())!=null?Ee:me),v(he,!0),$()}).then(()=>{_e==null||_e(he,void 0),P=!0,F.forEach(ke=>ke(he))}).catch(ke=>{_e==null||_e(void 0,ke)})};return E.persist={setOptions:oe=>{k={...k,...oe},oe.getStorage&&(N=oe.getStorage())},clearStorage:()=>{N==null||N.removeItem(k.name)},getOptions:()=>k,rehydrate:()=>J(),hasHydrated:()=>P,onHydrate:oe=>(c.add(oe),()=>{c.delete(oe)}),onFinishHydration:oe=>(F.add(oe),()=>{F.delete(oe)})},J(),he||me},w_=(a,p)=>(v,w,E)=>{let k={storage:x_(()=>localStorage),partialize:J=>J,version:0,merge:(J,oe)=>({...oe,...J}),...p},P=!1;const c=new Set,F=new Set;let N=k.storage;if(!N)return a((...J)=>{console.warn(`[zustand persist middleware] Unable to update item '${k.name}', the given storage is currently unavailable.`),v(...J)},w,E);const V=()=>{const J=k.partialize({...w()});return N.setItem(k.name,{state:J,version:k.version})},$=E.setState;E.setState=(J,oe)=>{$(J,oe),V()};const U=a((...J)=>{v(...J),V()},w,E);E.getInitialState=()=>U;let me;const he=()=>{var J,oe;if(!N)return;P=!1,c.forEach(ke=>{var Ee;return ke((Ee=w())!=null?Ee:U)});const _e=((oe=k.onRehydrateStorage)==null?void 0:oe.call(k,(J=w())!=null?J:U))||void 0;return rd(N.getItem.bind(N))(k.name).then(ke=>{if(ke)if(typeof ke.version=="number"&&ke.version!==k.version){if(k.migrate)return[!0,k.migrate(ke.state,ke.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,ke.state];return[!1,void 0]}).then(ke=>{var Ee;const[Ve,Me]=ke;if(me=k.merge(Me,(Ee=w())!=null?Ee:U),v(me,!0),Ve)return V()}).then(()=>{_e==null||_e(me,void 0),me=w(),P=!0,F.forEach(ke=>ke(me))}).catch(ke=>{_e==null||_e(void 0,ke)})};return E.persist={setOptions:J=>{k={...k,...J},J.storage&&(N=J.storage)},clearStorage:()=>{N==null||N.removeItem(k.name)},getOptions:()=>k,rehydrate:()=>he(),hasHydrated:()=>P,onHydrate:J=>(c.add(J),()=>{c.delete(J)}),onFinishHydration:J=>(F.add(J),()=>{F.delete(J)})},k.skipHydration||he(),me||U},b_=(a,p)=>"getStorage"in p||"serialize"in p||"deserialize"in p?((v_?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),__(a,p)):w_(a,p),Bf=b_,sh=Nf(Bf(a=>({language:"fa",setLanguage:p=>a({language:p})}),{name:"lang-storage",version:1}));function wp(a="fa"){const p="/golden_path/";return a==="fa"?`${p}data/data14040411.geojson`:`${p}data/data14040411_${a}.geojson`}const S_={sahn:"#4caf50",eyvan:"#2196f3",ravaq:"#9c27b0",masjed:"#ff9800",madrese:"#3f51b5",khadamat:"#607d8b",elmi:"#00bcd4",cemetery:"#795548",other:"#757575"},E_={door:"",connection:"",elevator:"",escalator:"",ramp:"",stairs:"",service:"",other:""},T_=(a,p,v=35,w=1)=>{const E=S_[a]||"#999",k=E_[p]||"";return y.jsx("div",{style:{width:v,height:v,backgroundColor:E,opacity:w,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:18,fontWeight:"bold",boxShadow:"0 2px 6px rgba(0,0,0,0.3)"},children:k})},Ff=({selectedCategory:a})=>{const[p,v]=ee.useState(null),w=sh(P=>P.language);if(ee.useEffect(()=>{const P=wp(w);fetch(P).then(c=>c.json()).then(c=>v(c.features||[])).catch(c=>console.error("failed to load geojson",c))},[w]),!p)return null;const E=p.filter(P=>P.geometry.type==="Point"),k=p.filter(P=>P.geometry.type==="Polygon"||P.geometry.type==="MultiPolygon");return y.jsxs(y.Fragment,{children:[k.length>0&&y.jsx(nh,{id:"overlay-polygons",type:"geojson",data:{type:"FeatureCollection",features:k},children:y.jsx(th,{id:"overlay-lines",type:"line",paint:{"line-color":"#333","line-width":2}})}),E.map((P,c)=>{var _e;const[F,N]=P.geometry.coordinates,{group:V,nodeFunction:$}=P.properties||{},U=a&&P.properties&&P.properties[a.property]===a.value,me=!!a,he=me?U?40:25:35,J=me?U?1:.4:1,oe=((_e=P.properties)==null?void 0:_e.uniqueId)||c;return y.jsx(ys,{longitude:F,latitude:N,anchor:"center",children:T_(V,$,he,J)},oe)})]})};var lp={exports:{}},k_=lp.exports,Gm;function M_(){return Gm||(Gm=1,function(a,p){(function(v,w){a.exports=w()})(k_,function(){var v,w,E;function k(c,F){if(!v)v=F;else if(!w)w=F;else{var N="var sharedChunk = {}; ("+v+")(sharedChunk); ("+w+")(sharedChunk);",V={};v(V),E=F(V),typeof window<"u"&&(E.workerUrl=window.URL.createObjectURL(new Blob([N],{type:"text/javascript"})))}}k(["exports"],function(c){var F=N;function N(i,t,o,u){this.cx=3*i,this.bx=3*(o-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(u-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=t,this.p2x=o,this.p2y=u}function V(i,t,o,u){const g=new F(i,t,o,u);return function(_){return g.solve(_)}}N.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,t){if(t===void 0&&(t=1e-6),i<0)return 0;if(i>1)return 1;for(var o=i,u=0;u<8;u++){var g=this.sampleCurveX(o)-i;if(Math.abs(g)<t)return o;var _=this.sampleCurveDerivativeX(o);if(Math.abs(_)<1e-6)break;o-=g/_}var e=0,r=1;for(o=i,u=0;u<20&&(g=this.sampleCurveX(o),!(Math.abs(g-i)<t));u++)i>g?e=o:r=o,o=.5*(r-e)+e;return o},solve:function(i,t){return this.sampleCurveY(this.solveCurveX(i,t))}};const $=V(.25,.1,.25,1);function U(i,t,o){return Math.min(o,Math.max(t,i))}function me(i,t,o){const u=o-t,g=((i-t)%u+u)%u+t;return g===t?o:g}function he(i,...t){for(const o of t)for(const u in o)i[u]=o[u];return i}let J=1;function oe(i,t){i.forEach(o=>{t[o]&&(t[o]=t[o].bind(t))})}function _e(i,t,o){const u={};for(const g in i)u[g]=t.call(o||this,i[g],g,i);return u}function ke(i,t,o){const u={};for(const g in i)t.call(o||this,i[g],g,i)&&(u[g]=i[g]);return u}function Ee(i){return Array.isArray(i)?i.map(Ee):typeof i=="object"&&i?_e(i,Ee):i}const Ve={};function Me(i){Ve[i]||(typeof console<"u"&&console.warn(i),Ve[i]=!0)}function tt(i,t,o){return(o.y-i.y)*(t.x-i.x)>(t.y-i.y)*(o.x-i.x)}function it(i){let t=0;for(let o,u,g=0,_=i.length,e=_-1;g<_;e=g++)o=i[g],u=i[e],t+=(u.x-o.x)*(o.y+u.y);return t}function Ge(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function kt(i){const t={};if(i.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(o,u,g,_)=>{const e=g||_;return t[u]=!e||e.toLowerCase(),""}),t["max-age"]){const o=parseInt(t["max-age"],10);isNaN(o)?delete t["max-age"]:t["max-age"]=o}return t}let _t,Ct,Rt=null;function At(i){if(Rt==null){const t=i.navigator?i.navigator.userAgent:null;Rt=!!i.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return Rt}function mt(i){return typeof ImageBitmap<"u"&&i instanceof ImageBitmap}const Pt={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(i){const t=requestAnimationFrame(i);return{cancel:()=>cancelAnimationFrame(t)}},getImageData(i,t=0){const o=window.document.createElement("canvas"),u=o.getContext("2d");if(!u)throw new Error("failed to create canvas 2d context");return o.width=i.width,o.height=i.height,u.drawImage(i,0,0,i.width,i.height),u.getImageData(-t,-t,i.width+2*t,i.height+2*t)},resolveURL:i=>(_t||(_t=document.createElement("a")),_t.href=i,_t.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(Ct==null&&(Ct=matchMedia("(prefers-reduced-motion: reduce)")),Ct.matches)}};var Xe=It;function It(i,t){this.x=i,this.y=t}It.prototype={clone:function(){return new It(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,t){return this.clone()._rotateAround(i,t)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var t=i.x-this.x,o=i.y-this.y;return t*t+o*o},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,t){return Math.atan2(this.x*t-this.y*i,this.x*i+this.y*t)},_matMult:function(i){var t=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=t,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var t=Math.cos(i),o=Math.sin(i),u=o*this.x+t*this.y;return this.x=t*this.x-o*this.y,this.y=u,this},_rotateAround:function(i,t){var o=Math.cos(i),u=Math.sin(i),g=t.y+u*(this.x-t.x)+o*(this.y-t.y);return this.x=t.x+o*(this.x-t.x)-u*(this.y-t.y),this.y=g,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},It.convert=function(i){return i instanceof It?i:Array.isArray(i)?new It(i[0],i[1]):i};const We={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},lt="mapbox-tiles";let nt,ve=500,Ue=50;function Mt(){typeof caches>"u"||nt||(nt=caches.open(lt))}let gt=1/0;const bt={supported:!1,testSupport:function(i){!Yt&&Kt&&(Ft?An(i):zt=i)}};let zt,Kt,Yt=!1,Ft=!1;function An(i){const t=i.createTexture();i.bindTexture(i.TEXTURE_2D,t);try{if(i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,Kt),i.isContextLost())return;bt.supported=!0}catch{}i.deleteTexture(t),Yt=!0}typeof document<"u"&&(Kt=document.createElement("img"),Kt.onload=function(){zt&&An(zt),zt=null,Ft=!0},Kt.onerror=function(){Yt=!0,zt=null},Kt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const br={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(br);class nr extends Error{constructor(t,o,u,g){super(`AJAXError: ${o} (${t}): ${u}`),this.status=t,this.statusText=o,this.url=u,this.body=g}}const Rn=Ge()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function si(i,t){const o=new AbortController,u=new Request(i.url,{method:i.method||"GET",body:i.body,credentials:i.credentials,headers:i.headers,referrer:Rn(),signal:o.signal});let g=!1,_=!1;return i.type==="json"&&u.headers.set("Accept","application/json"),((e,r,l)=>{_||fetch(u).then(d=>d.ok?((x,S,M)=>{(i.type==="arrayBuffer"?x.arrayBuffer():i.type==="json"?x.json():x.text()).then(A=>{_||(g=!0,t(null,A,x.headers.get("Cache-Control"),x.headers.get("Expires")))}).catch(A=>{_||t(new Error(A.message))})})(d):d.blob().then(x=>t(new nr(d.status,d.statusText,i.url,x)))).catch(d=>{d.code!==20&&t(new Error(d.message))})})(),{cancel:()=>{_=!0,g||o.abort()}}}const Je=function(i,t){if(/:\/\//.test(i.url)&&!/^https?:|^file:/.test(i.url)){if(Ge()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",i,t);if(!Ge()){const u=i.url.substring(0,i.url.indexOf("://"));return(We.REGISTERED_PROTOCOLS[u]||si)(i,t)}}if(!(/^file:/.test(o=i.url)||/^file:/.test(Rn())&&!/^\w+:/.test(o))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return si(i,t);if(Ge()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",i,t,void 0,!0)}var o;return function(u,g){const _=new XMLHttpRequest;_.open(u.method||"GET",u.url,!0),u.type==="arrayBuffer"&&(_.responseType="arraybuffer");for(const e in u.headers)_.setRequestHeader(e,u.headers[e]);return u.type==="json"&&(_.responseType="text",_.setRequestHeader("Accept","application/json")),_.withCredentials=u.credentials==="include",_.onerror=()=>{g(new Error(_.statusText))},_.onload=()=>{if((_.status>=200&&_.status<300||_.status===0)&&_.response!==null){let e=_.response;if(u.type==="json")try{e=JSON.parse(_.response)}catch(r){return g(r)}g(null,e,_.getResponseHeader("Cache-Control"),_.getResponseHeader("Expires"))}else{const e=new Blob([_.response],{type:_.getResponseHeader("Content-Type")});g(new nr(_.status,_.statusText,u.url,e))}},_.send(u.body),{cancel:()=>_.abort()}}(i,t)},Qe=function(i,t){return Je(he(i,{type:"arrayBuffer"}),t)};function Ot(i){const t=window.document.createElement("a");return t.href=i,t.protocol===window.document.location.protocol&&t.host===window.document.location.host}const ln="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let dt,tn;dt=[],tn=0;const Sr=function(i,t){if(bt.supported&&(i.headers||(i.headers={}),i.headers.accept="image/webp,*/*"),tn>=We.MAX_PARALLEL_IMAGE_REQUESTS){const _={requestParameters:i,callback:t,cancelled:!1,cancel(){this.cancelled=!0}};return dt.push(_),_}tn++;let o=!1;const u=()=>{if(!o)for(o=!0,tn--;dt.length&&tn<We.MAX_PARALLEL_IMAGE_REQUESTS;){const _=dt.shift(),{requestParameters:e,callback:r,cancelled:l}=_;l||(_.cancel=Sr(e,r).cancel)}},g=Qe(i,(_,e,r,l)=>{u(),_?t(_):e&&function(d,x){typeof createImageBitmap=="function"?function(S,M){const A=new Blob([new Uint8Array(S)],{type:"image/png"});createImageBitmap(A).then(L=>{M(null,L)}).catch(L=>{M(new Error(`Could not load image because of ${L.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(d,x):function(S,M){const A=new Image;A.onload=()=>{M(null,A),URL.revokeObjectURL(A.src),A.onload=null,window.requestAnimationFrame(()=>{A.src=ln})},A.onerror=()=>M(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const L=new Blob([new Uint8Array(S)],{type:"image/png"});A.src=S.byteLength?URL.createObjectURL(L):ln}(d,x)}(e,(d,x)=>{d!=null?t(d):x!=null&&t(null,x,{cacheControl:r,expires:l})})});return{cancel:()=>{g.cancel(),u()}}};function Sn(i,t,o){o[i]&&o[i].indexOf(t)!==-1||(o[i]=o[i]||[],o[i].push(t))}function rr(i,t,o){if(o&&o[i]){const u=o[i].indexOf(t);u!==-1&&o[i].splice(u,1)}}class On{constructor(t,o={}){he(this,o),this.type=t}}class Fr extends On{constructor(t,o={}){super("error",he({error:t},o))}}class Hr{on(t,o){return this._listeners=this._listeners||{},Sn(t,o,this._listeners),this}off(t,o){return rr(t,o,this._listeners),rr(t,o,this._oneTimeListeners),this}once(t,o){return this._oneTimeListeners=this._oneTimeListeners||{},Sn(t,o,this._oneTimeListeners),this}fire(t,o){typeof t=="string"&&(t=new On(t,o||{}));const u=t.type;if(this.listens(u)){t.target=this;const g=this._listeners&&this._listeners[u]?this._listeners[u].slice():[];for(const r of g)r.call(this,t);const _=this._oneTimeListeners&&this._oneTimeListeners[u]?this._oneTimeListeners[u].slice():[];for(const r of _)rr(u,r,this._oneTimeListeners),r.call(this,t);const e=this._eventedParent;e&&(he(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),e.fire(t))}else t instanceof Fr&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,o){return this._eventedParent=t,this._eventedParentData=o,this}}var Le={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class Ze{constructor(t,o,u,g){this.message=(t?`${t}: `:"")+u,g&&(this.identifier=g),o!=null&&o.__line__&&(this.line=o.__line__)}}function Er(i){const t=i.value;return t?[new Ze(i.key,t,"constants have been deprecated as of v8")]:[]}function ir(i,...t){for(const o of t)for(const u in o)i[u]=o[u];return i}function dn(i){return i instanceof Number||i instanceof String||i instanceof Boolean?i.valueOf():i}function En(i){if(Array.isArray(i))return i.map(En);if(i instanceof Object&&!(i instanceof Number||i instanceof String||i instanceof Boolean)){const t={};for(const o in i)t[o]=En(i[o]);return t}return dn(i)}class Qn extends Error{constructor(t,o){super(o),this.message=o,this.key=t}}class ai{constructor(t,o=[]){this.parent=t,this.bindings={};for(const[u,g]of o)this.bindings[u]=g}concat(t){return new ai(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const fr={kind:"null"},Ye={kind:"number"},Bt={kind:"string"},jt={kind:"boolean"},er={kind:"color"},lr={kind:"object"},Lt={kind:"value"},or={kind:"collator"},Gr={kind:"formatted"},Ne={kind:"padding"},St={kind:"resolvedImage"};function $t(i,t){return{kind:"array",itemType:i,N:t}}function mn(i){if(i.kind==="array"){const t=mn(i.itemType);return typeof i.N=="number"?`array<${t}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${t}>`}return i.kind}const yi=[fr,Ye,Bt,jt,er,Gr,lr,$t(Lt),Ne,St];function Tr(i,t){if(t.kind==="error")return null;if(i.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!Tr(i.itemType,t.itemType))&&(typeof i.N!="number"||i.N===t.N))return null}else{if(i.kind===t.kind)return null;if(i.kind==="value"){for(const o of yi)if(!Tr(o,t))return null}}return`Expected ${mn(i)} but found ${mn(t)} instead.`}function li(i,t){return t.some(o=>o.kind===i.kind)}function vi(i,t){return t.some(o=>o==="null"?i===null:o==="array"?Array.isArray(i):o==="object"?i&&!Array.isArray(i)&&typeof i=="object":o===typeof i)}var Vi,sa={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Kr(i){return(i=Math.round(i))<0?0:i>255?255:i}function W(i){return Kr(i[i.length-1]==="%"?parseFloat(i)/100*255:parseInt(i))}function j(i){return(t=i[i.length-1]==="%"?parseFloat(i)/100:parseFloat(i))<0?0:t>1?1:t;var t}function D(i,t,o){return o<0?o+=1:o>1&&(o-=1),6*o<1?i+(t-i)*o*6:2*o<1?t:3*o<2?i+(t-i)*(2/3-o)*6:i}try{Vi={}.parseCSSColor=function(i){var t,o=i.replace(/ /g,"").toLowerCase();if(o in sa)return sa[o].slice();if(o[0]==="#")return o.length===4?(t=parseInt(o.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:o.length===7&&(t=parseInt(o.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var u=o.indexOf("("),g=o.indexOf(")");if(u!==-1&&g+1===o.length){var _=o.substr(0,u),e=o.substr(u+1,g-(u+1)).split(","),r=1;switch(_){case"rgba":if(e.length!==4)return null;r=j(e.pop());case"rgb":return e.length!==3?null:[W(e[0]),W(e[1]),W(e[2]),r];case"hsla":if(e.length!==4)return null;r=j(e.pop());case"hsl":if(e.length!==3)return null;var l=(parseFloat(e[0])%360+360)%360/360,d=j(e[1]),x=j(e[2]),S=x<=.5?x*(d+1):x+d-x*d,M=2*x-S;return[Kr(255*D(M,S,l+1/3)),Kr(255*D(M,S,l)),Kr(255*D(M,S,l-1/3)),r];default:return null}}return null}}catch{}class G{constructor(t,o,u,g=1){this.r=t,this.g=o,this.b=u,this.a=g}static parse(t){if(!t)return;if(t instanceof G)return t;if(typeof t!="string")return;const o=Vi(t);return o?new G(o[0]/255*o[3],o[1]/255*o[3],o[2]/255*o[3],o[3]):void 0}toString(){const[t,o,u,g]=this.toArray();return`rgba(${Math.round(t)},${Math.round(o)},${Math.round(u)},${g})`}toArray(){const{r:t,g:o,b:u,a:g}=this;return g===0?[0,0,0,0]:[255*t/g,255*o/g,255*u/g,g]}}G.black=new G(0,0,0,1),G.white=new G(1,1,1,1),G.transparent=new G(0,0,0,0),G.red=new G(1,0,0,1);class K{constructor(t,o,u){this.sensitivity=t?o?"variant":"case":o?"accent":"base",this.locale=u,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,o){return this.collator.compare(t,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ae{constructor(t,o,u,g,_){this.text=t,this.image=o,this.scale=u,this.fontStack=g,this.textColor=_}}class pe{constructor(t){this.sections=t}static fromString(t){return new pe([new ae(t,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof pe?t:pe.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}}class de{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof de)return t;if(typeof t=="number")return new de([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const o of t)if(typeof o!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new de(t)}}toString(){return JSON.stringify(this.values)}}class le{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new le({name:t,available:!1}):null}}function ye(i,t,o,u){return typeof i=="number"&&i>=0&&i<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof o=="number"&&o>=0&&o<=255?u===void 0||typeof u=="number"&&u>=0&&u<=1?null:`Invalid rgba value [${[i,t,o,u].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof u=="number"?[i,t,o,u]:[i,t,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ae(i){if(i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||i instanceof G||i instanceof K||i instanceof pe||i instanceof de||i instanceof le)return!0;if(Array.isArray(i)){for(const t of i)if(!Ae(t))return!1;return!0}if(typeof i=="object"){for(const t in i)if(!Ae(i[t]))return!1;return!0}return!1}function $e(i){if(i===null)return fr;if(typeof i=="string")return Bt;if(typeof i=="boolean")return jt;if(typeof i=="number")return Ye;if(i instanceof G)return er;if(i instanceof K)return or;if(i instanceof pe)return Gr;if(i instanceof de)return Ne;if(i instanceof le)return St;if(Array.isArray(i)){const t=i.length;let o;for(const u of i){const g=$e(u);if(o){if(o===g)continue;o=Lt;break}o=g}return $t(o||Lt,t)}return lr}function Oe(i){const t=typeof i;return i===null?"":t==="string"||t==="number"||t==="boolean"?String(i):i instanceof G||i instanceof pe||i instanceof de||i instanceof le?i.toString():JSON.stringify(i)}class pt{constructor(t,o){this.type=t,this.value=o}static parse(t,o){if(t.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Ae(t[1]))return o.error("invalid value");const u=t[1];let g=$e(u);const _=o.expectedType;return g.kind!=="array"||g.N!==0||!_||_.kind!=="array"||typeof _.N=="number"&&_.N!==0||(g=_),new pt(g,u)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class ct{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const yt={string:Bt,number:Ye,boolean:jt,object:lr};class ot{constructor(t,o){this.type=t,this.args=o}static parse(t,o){if(t.length<2)return o.error("Expected at least one argument.");let u,g=1;const _=t[0];if(_==="array"){let r,l;if(t.length>2){const d=t[1];if(typeof d!="string"||!(d in yt)||d==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);r=yt[d],g++}else r=Lt;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return o.error('The length argument to "array" must be a positive integer literal',2);l=t[2],g++}u=$t(r,l)}else{if(!yt[_])throw new Error(`Types doesn't contain name = ${_}`);u=yt[_]}const e=[];for(;g<t.length;g++){const r=o.parse(t[g],g,Lt);if(!r)return null;e.push(r)}return new ot(u,e)}evaluate(t){for(let o=0;o<this.args.length;o++){const u=this.args[o].evaluate(t);if(!Tr(this.type,$e(u)))return u;if(o===this.args.length-1)throw new ct(`Expected value to be of type ${mn(this.type)}, but found ${mn($e(u))} instead.`)}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const qt={"to-boolean":jt,"to-color":er,"to-number":Ye,"to-string":Bt};class Wt{constructor(t,o){this.type=t,this.args=o}static parse(t,o){if(t.length<2)return o.error("Expected at least one argument.");const u=t[0];if(!qt[u])throw new Error(`Can't parse ${u} as it is not part of the known types`);if((u==="to-boolean"||u==="to-string")&&t.length!==2)return o.error("Expected one argument.");const g=qt[u],_=[];for(let e=1;e<t.length;e++){const r=o.parse(t[e],e,Lt);if(!r)return null;_.push(r)}return new Wt(g,_)}evaluate(t){if(this.type.kind==="boolean")return!!this.args[0].evaluate(t);if(this.type.kind==="color"){let o,u;for(const g of this.args){if(o=g.evaluate(t),u=null,o instanceof G)return o;if(typeof o=="string"){const _=t.parseColor(o);if(_)return _}else if(Array.isArray(o)&&(u=o.length<3||o.length>4?`Invalid rbga value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:ye(o[0],o[1],o[2],o[3]),!u))return new G(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new ct(u||`Could not parse color from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}if(this.type.kind==="padding"){let o;for(const u of this.args){o=u.evaluate(t);const g=de.parse(o);if(g)return g}throw new ct(`Could not parse padding from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}if(this.type.kind==="number"){let o=null;for(const u of this.args){if(o=u.evaluate(t),o===null)return 0;const g=Number(o);if(!isNaN(g))return g}throw new ct(`Could not convert ${JSON.stringify(o)} to number.`)}return this.type.kind==="formatted"?pe.fromString(Oe(this.args[0].evaluate(t))):this.type.kind==="resolvedImage"?le.fromString(Oe(this.args[0].evaluate(t))):Oe(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const Zt=["Unknown","Point","LineString","Polygon"];class Ut{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Zt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let o=this._parseColorCache[t];return o||(o=this._parseColorCache[t]=G.parse(t)),o}}class Vt{constructor(t,o,u,g){this.name=t,this.type=o,this._evaluate=u,this.args=g}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,o){const u=t[0],g=Vt.definitions[u];if(!g)return o.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0);const _=Array.isArray(g)?g[0]:g.type,e=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,r=e.filter(([d])=>!Array.isArray(d)||d.length===t.length-1);let l=null;for(const[d,x]of r){l=new ha(o.registry,o.path,null,o.scope);const S=[];let M=!1;for(let A=1;A<t.length;A++){const L=t[A],O=Array.isArray(d)?d[A-1]:d.type,q=l.parse(L,1+S.length,O);if(!q){M=!0;break}S.push(q)}if(!M)if(Array.isArray(d)&&d.length!==S.length)l.error(`Expected ${d.length} arguments, but found ${S.length} instead.`);else{for(let A=0;A<S.length;A++){const L=Array.isArray(d)?d[A]:d.type,O=S[A];l.concat(A+1).checkSubtype(L,O.type)}if(l.errors.length===0)return new Vt(u,_,x,S)}}if(r.length===1)o.errors.push(...l.errors);else{const d=(r.length?r:e).map(([S])=>{return M=S,Array.isArray(M)?`(${M.map(mn).join(", ")})`:`(${mn(M.type)}...)`;var M}).join(" | "),x=[];for(let S=1;S<t.length;S++){const M=o.parse(t[S],1+x.length);if(!M)return null;x.push(mn(M.type))}o.error(`Expected arguments of type ${d}, but found (${x.join(", ")}) instead.`)}return null}static register(t,o){Vt.definitions=o;for(const u in o)t[u]=Vt}}class $n{constructor(t,o,u){this.type=or,this.locale=u,this.caseSensitive=t,this.diacriticSensitive=o}static parse(t,o){if(t.length!==2)return o.error("Expected one argument.");const u=t[1];if(typeof u!="object"||Array.isArray(u))return o.error("Collator options argument must be an object.");const g=o.parse(u["case-sensitive"]!==void 0&&u["case-sensitive"],1,jt);if(!g)return null;const _=o.parse(u["diacritic-sensitive"]!==void 0&&u["diacritic-sensitive"],1,jt);if(!_)return null;let e=null;return u.locale&&(e=o.parse(u.locale,1,Bt),!e)?null:new $n(g,_,e)}evaluate(t){return new K(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}const Ln=8192;function bn(i,t){i[0]=Math.min(i[0],t[0]),i[1]=Math.min(i[1],t[1]),i[2]=Math.max(i[2],t[0]),i[3]=Math.max(i[3],t[1])}function mr(i,t){return!(i[0]<=t[0]||i[2]>=t[2]||i[1]<=t[1]||i[3]>=t[3])}function Jr(i,t){const o=(180+i[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i[1]*Math.PI/360)))/360,g=Math.pow(2,t.z);return[Math.round(o*g*Ln),Math.round(u*g*Ln)]}function aa(i,t,o){const u=i[0]-t[0],g=i[1]-t[1],_=i[0]-o[0],e=i[1]-o[1];return u*e-_*g==0&&u*_<=0&&g*e<=0}function vn(i,t){let o=!1;for(let e=0,r=t.length;e<r;e++){const l=t[e];for(let d=0,x=l.length;d<x-1;d++){if(aa(i,l[d],l[d+1]))return!1;(g=l[d])[1]>(u=i)[1]!=(_=l[d+1])[1]>u[1]&&u[0]<(_[0]-g[0])*(u[1]-g[1])/(_[1]-g[1])+g[0]&&(o=!o)}}var u,g,_;return o}function ch(i,t){for(let o=0;o<t.length;o++)if(vn(i,t[o]))return!0;return!1}function Go(i,t,o,u){const g=u[0]-o[0],_=u[1]-o[1],e=(i[0]-o[0])*_-g*(i[1]-o[1]),r=(t[0]-o[0])*_-g*(t[1]-o[1]);return e>0&&r<0||e<0&&r>0}function il(i,t,o){for(const d of o)for(let x=0;x<d.length-1;++x)if((r=[(e=d[x+1])[0]-(_=d[x])[0],e[1]-_[1]])[0]*(l=[(g=t)[0]-(u=i)[0],g[1]-u[1]])[1]-r[1]*l[0]!=0&&Go(u,g,_,e)&&Go(_,e,u,g))return!0;var u,g,_,e,r,l;return!1}function qo(i,t){for(let o=0;o<i.length;++o)if(!vn(i[o],t))return!1;for(let o=0;o<i.length-1;++o)if(il(i[o],i[o+1],t))return!1;return!0}function la(i,t){for(let o=0;o<t.length;o++)if(qo(i,t[o]))return!0;return!1}function sc(i,t,o){const u=[];for(let g=0;g<i.length;g++){const _=[];for(let e=0;e<i[g].length;e++){const r=Jr(i[g][e],o);bn(t,r),_.push(r)}u.push(_)}return u}function ac(i,t,o){const u=[];for(let g=0;g<i.length;g++){const _=sc(i[g],t,o);u.push(_)}return u}function ca(i,t,o,u){if(i[0]<o[0]||i[0]>o[2]){const g=.5*u;let _=i[0]-o[0]>g?-u:o[0]-i[0]>g?u:0;_===0&&(_=i[0]-o[2]>g?-u:o[2]-i[0]>g?u:0),i[0]+=_}bn(t,i)}function lc(i,t,o,u){const g=Math.pow(2,u.z)*Ln,_=[u.x*Ln,u.y*Ln],e=[];for(const r of i)for(const l of r){const d=[l.x+_[0],l.y+_[1]];ca(d,t,o,g),e.push(d)}return e}function ol(i,t,o,u){const g=Math.pow(2,u.z)*Ln,_=[u.x*Ln,u.y*Ln],e=[];for(const l of i){const d=[];for(const x of l){const S=[x.x+_[0],x.y+_[1]];bn(t,S),d.push(S)}e.push(d)}if(t[2]-t[0]<=g/2){(r=t)[0]=r[1]=1/0,r[2]=r[3]=-1/0;for(const l of e)for(const d of l)ca(d,t,o,g)}var r;return e}class xi{constructor(t,o){this.type=jt,this.geojson=t,this.geometries=o}static parse(t,o){if(t.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Ae(t[1])){const u=t[1];if(u.type==="FeatureCollection")for(let g=0;g<u.features.length;++g){const _=u.features[g].geometry.type;if(_==="Polygon"||_==="MultiPolygon")return new xi(u,u.features[g].geometry)}else if(u.type==="Feature"){const g=u.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new xi(u,u.geometry)}else if(u.type==="Polygon"||u.type==="MultiPolygon")return new xi(u,u)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(o,u){const g=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],e=o.canonicalID();if(u.type==="Polygon"){const r=sc(u.coordinates,_,e),l=lc(o.geometry(),g,_,e);if(!mr(g,_))return!1;for(const d of l)if(!vn(d,r))return!1}if(u.type==="MultiPolygon"){const r=ac(u.coordinates,_,e),l=lc(o.geometry(),g,_,e);if(!mr(g,_))return!1;for(const d of l)if(!ch(d,r))return!1}return!0}(t,this.geometries);if(t.geometryType()==="LineString")return function(o,u){const g=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],e=o.canonicalID();if(u.type==="Polygon"){const r=sc(u.coordinates,_,e),l=ol(o.geometry(),g,_,e);if(!mr(g,_))return!1;for(const d of l)if(!qo(d,r))return!1}if(u.type==="MultiPolygon"){const r=ac(u.coordinates,_,e),l=ol(o.geometry(),g,_,e);if(!mr(g,_))return!1;for(const d of l)if(!la(d,r))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function sl(i){if(i instanceof Vt&&(i.name==="get"&&i.args.length===1||i.name==="feature-state"||i.name==="has"&&i.args.length===1||i.name==="properties"||i.name==="geometry-type"||i.name==="id"||/^filter-/.test(i.name))||i instanceof xi)return!1;let t=!0;return i.eachChild(o=>{t&&!sl(o)&&(t=!1)}),t}function uo(i){if(i instanceof Vt&&i.name==="feature-state")return!1;let t=!0;return i.eachChild(o=>{t&&!uo(o)&&(t=!1)}),t}function fn(i,t){if(i instanceof Vt&&t.indexOf(i.name)>=0)return!1;let o=!0;return i.eachChild(u=>{o&&!fn(u,t)&&(o=!1)}),o}class ua{constructor(t,o){this.type=o.type,this.name=t,this.boundExpression=o}static parse(t,o){if(t.length!==2||typeof t[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");const u=t[1];return o.scope.has(u)?new ua(u,o.scope.get(u)):o.error(`Unknown variable "${u}". Make sure "${u}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class ha{constructor(t,o=[],u,g=new ai,_=[]){this.registry=t,this.path=o,this.key=o.map(e=>`[${e}]`).join(""),this.scope=g,this.errors=_,this.expectedType=u}parse(t,o,u,g,_={}){return o?this.concat(o,u,g)._parse(t,_):this._parse(t,_)}_parse(t,o){function u(g,_,e){return e==="assert"?new ot(_,[g]):e==="coerce"?new Wt(_,[g]):g}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=t[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const _=this.registry[g];if(_){let e=_.parse(t,this);if(!e)return null;if(this.expectedType){const r=this.expectedType,l=e.type;if(r.kind!=="string"&&r.kind!=="number"&&r.kind!=="boolean"&&r.kind!=="object"&&r.kind!=="array"||l.kind!=="value")if(r.kind!=="color"&&r.kind!=="formatted"&&r.kind!=="resolvedImage"||l.kind!=="value"&&l.kind!=="string")if(r.kind!=="padding"||l.kind!=="value"&&l.kind!=="number"&&l.kind!=="array"){if(this.checkSubtype(r,l))return null}else e=u(e,r,o.typeAnnotation||"coerce");else e=u(e,r,o.typeAnnotation||"coerce");else e=u(e,r,o.typeAnnotation||"assert")}if(!(e instanceof pt)&&e.type.kind!=="resolvedImage"&&Wo(e)){const r=new Ut;try{e=new pt(e.type,e.evaluate(r))}catch(l){return this.error(l.message),null}}return e}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,o,u){const g=typeof t=="number"?this.path.concat(t):this.path,_=u?this.scope.concat(u):this.scope;return new ha(this.registry,g,o||null,_,this.errors)}error(t,...o){const u=`${this.key}${o.map(g=>`[${g}]`).join("")}`;this.errors.push(new Qn(u,t))}checkSubtype(t,o){const u=Tr(t,o);return u&&this.error(u),u}}function Wo(i){if(i instanceof ua)return Wo(i.boundExpression);if(i instanceof Vt&&i.name==="error"||i instanceof $n||i instanceof xi)return!1;const t=i instanceof Wt||i instanceof ot;let o=!0;return i.eachChild(u=>{o=t?o&&Wo(u):o&&u instanceof pt}),!!o&&sl(i)&&fn(i,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function da(i,t){const o=i.length-1;let u,g,_=0,e=o,r=0;for(;_<=e;)if(r=Math.floor((_+e)/2),u=i[r],g=i[r+1],u<=t){if(r===o||t<g)return r;_=r+1}else{if(!(u>t))throw new ct("Input is not a number.");e=r-1}return 0}class xs{constructor(t,o,u){this.type=t,this.input=o,this.labels=[],this.outputs=[];for(const[g,_]of u)this.labels.push(g),this.outputs.push(_)}static parse(t,o){if(t.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return o.error("Expected an even number of arguments.");const u=o.parse(t[1],1,Ye);if(!u)return null;const g=[];let _=null;o.expectedType&&o.expectedType.kind!=="value"&&(_=o.expectedType);for(let e=1;e<t.length;e+=2){const r=e===1?-1/0:t[e],l=t[e+1],d=e,x=e+1;if(typeof r!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',d);if(g.length&&g[g.length-1][0]>=r)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',d);const S=o.parse(l,x,_);if(!S)return null;_=_||S.type,g.push([r,S])}return new xs(_,u,g)}evaluate(t){const o=this.labels,u=this.outputs;if(o.length===1)return u[0].evaluate(t);const g=this.input.evaluate(t);if(g<=o[0])return u[0].evaluate(t);const _=o.length;return g>=o[_-1]?u[_-1].evaluate(t):u[da(o,g)].evaluate(t)}eachChild(t){t(this.input);for(const o of this.outputs)t(o)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function zn(i,t,o){return i*(1-o)+t*o}var Zo=Object.freeze({__proto__:null,number:zn,color:function(i,t,o){return new G(zn(i.r,t.r,o),zn(i.g,t.g,o),zn(i.b,t.b,o),zn(i.a,t.a,o))},array:function(i,t,o){return i.map((u,g)=>zn(u,t[g],o))},padding:function(i,t,o){const u=i.values,g=t.values;return new de([zn(u[0],g[0],o),zn(u[1],g[1],o),zn(u[2],g[2],o),zn(u[3],g[3],o)])}});const _s=.95047,Hi=1.08883,Gi=4/29,_i=6/29,Xo=3*_i*_i,pa=Math.PI/180,ho=180/Math.PI;function cc(i){return i>.008856451679035631?Math.pow(i,1/3):i/Xo+Gi}function al(i){return i>_i?i*i*i:Xo*(i-Gi)}function Ko(i){return 255*(i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055)}function uc(i){return(i/=255)<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function hc(i){const t=uc(i.r),o=uc(i.g),u=uc(i.b),g=cc((.4124564*t+.3575761*o+.1804375*u)/_s),_=cc((.2126729*t+.7151522*o+.072175*u)/1);return{l:116*_-16,a:500*(g-_),b:200*(_-cc((.0193339*t+.119192*o+.9503041*u)/Hi)),alpha:i.a}}function un(i){let t=(i.l+16)/116,o=isNaN(i.a)?t:t+i.a/500,u=isNaN(i.b)?t:t-i.b/200;return t=1*al(t),o=_s*al(o),u=Hi*al(u),new G(Ko(3.2404542*o-1.5371385*t-.4985314*u),Ko(-.969266*o+1.8760108*t+.041556*u),Ko(.0556434*o-.2040259*t+1.0572252*u),i.alpha)}function cu(i,t,o){const u=t-i;return i+o*(u>180||u<-180?u-360*Math.round(u/360):u)}const fa={forward:hc,reverse:un,interpolate:function(i,t,o){return{l:zn(i.l,t.l,o),a:zn(i.a,t.a,o),b:zn(i.b,t.b,o),alpha:zn(i.alpha,t.alpha,o)}}},qi={forward:function(i){const{l:t,a:o,b:u}=hc(i),g=Math.atan2(u,o)*ho;return{h:g<0?g+360:g,c:Math.sqrt(o*o+u*u),l:t,alpha:i.a}},reverse:function(i){const t=i.h*pa,o=i.c;return un({l:i.l,a:Math.cos(t)*o,b:Math.sin(t)*o,alpha:i.alpha})},interpolate:function(i,t,o){return{h:cu(i.h,t.h,o),c:zn(i.c,t.c,o),l:zn(i.l,t.l,o),alpha:zn(i.alpha,t.alpha,o)}}};var ws=Object.freeze({__proto__:null,lab:fa,hcl:qi});class cr{constructor(t,o,u,g,_){this.type=t,this.operator=o,this.interpolation=u,this.input=g,this.labels=[],this.outputs=[];for(const[e,r]of _)this.labels.push(e),this.outputs.push(r)}static interpolationFactor(t,o,u,g){let _=0;if(t.name==="exponential")_=bs(o,t.base,u,g);else if(t.name==="linear")_=bs(o,1,u,g);else if(t.name==="cubic-bezier"){const e=t.controlPoints;_=new F(e[0],e[1],e[2],e[3]).solve(bs(o,1,u,g))}return _}static parse(t,o){let[u,g,_,...e]=t;if(!Array.isArray(g)||g.length===0)return o.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const d=g[1];if(typeof d!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:d}}else{if(g[0]!=="cubic-bezier")return o.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const d=g.slice(1);if(d.length!==4||d.some(x=>typeof x!="number"||x<0||x>1))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:d}}}if(t.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(_=o.parse(_,2,Ye),!_)return null;const r=[];let l=null;u==="interpolate-hcl"||u==="interpolate-lab"?l=er:o.expectedType&&o.expectedType.kind!=="value"&&(l=o.expectedType);for(let d=0;d<e.length;d+=2){const x=e[d],S=e[d+1],M=d+3,A=d+4;if(typeof x!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',M);if(r.length&&r[r.length-1][0]>=x)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',M);const L=o.parse(S,A,l);if(!L)return null;l=l||L.type,r.push([x,L])}return l.kind==="number"||l.kind==="color"||l.kind==="padding"||l.kind==="array"&&l.itemType.kind==="number"&&typeof l.N=="number"?new cr(l,u,g,_,r):o.error(`Type ${mn(l)} is not interpolatable.`)}evaluate(t){const o=this.labels,u=this.outputs;if(o.length===1)return u[0].evaluate(t);const g=this.input.evaluate(t);if(g<=o[0])return u[0].evaluate(t);const _=o.length;if(g>=o[_-1])return u[_-1].evaluate(t);const e=da(o,g),r=cr.interpolationFactor(this.interpolation,g,o[e],o[e+1]),l=u[e].evaluate(t),d=u[e+1].evaluate(t);return this.operator==="interpolate"?Zo[this.type.kind.toLowerCase()](l,d,r):this.operator==="interpolate-hcl"?qi.reverse(qi.interpolate(qi.forward(l),qi.forward(d),r)):fa.reverse(fa.interpolate(fa.forward(l),fa.forward(d),r))}eachChild(t){t(this.input);for(const o of this.outputs)t(o)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function bs(i,t,o,u){const g=u-o,_=i-o;return g===0?0:t===1?_/g:(Math.pow(t,_)-1)/(Math.pow(t,g)-1)}class ll{constructor(t,o){this.type=t,this.args=o}static parse(t,o){if(t.length<2)return o.error("Expectected at least one argument.");let u=null;const g=o.expectedType;g&&g.kind!=="value"&&(u=g);const _=[];for(const r of t.slice(1)){const l=o.parse(r,1+_.length,u,void 0,{typeAnnotation:"omit"});if(!l)return null;u=u||l.type,_.push(l)}if(!u)throw new Error("No output type");const e=g&&_.some(r=>Tr(g,r.type));return new ll(e?Lt:u,_)}evaluate(t){let o,u=null,g=0;for(const _ of this.args)if(g++,u=_.evaluate(t),u&&u instanceof le&&!u.available&&(o||(o=u.name),u=null,g===this.args.length&&(u=o)),u!==null)break;return u}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}class cl{constructor(t,o){this.type=o.type,this.bindings=[].concat(t),this.result=o}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const o of this.bindings)t(o[1]);t(this.result)}static parse(t,o){if(t.length<4)return o.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const u=[];for(let _=1;_<t.length-1;_+=2){const e=t[_];if(typeof e!="string")return o.error(`Expected string, but found ${typeof e} instead.`,_);if(/[^a-zA-Z0-9_]/.test(e))return o.error("Variable names must contain only alphanumeric characters or '_'.",_);const r=o.parse(t[_+1],_+1);if(!r)return null;u.push([e,r])}const g=o.parse(t[t.length-1],t.length-1,o.expectedType,u);return g?new cl(u,g):null}outputDefined(){return this.result.outputDefined()}}class ma{constructor(t,o,u){this.type=t,this.index=o,this.input=u}static parse(t,o){if(t.length!==3)return o.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const u=o.parse(t[1],1,Ye),g=o.parse(t[2],2,$t(o.expectedType||Lt));return u&&g?new ma(g.type.itemType,u,g):null}evaluate(t){const o=this.index.evaluate(t),u=this.input.evaluate(t);if(o<0)throw new ct(`Array index out of bounds: ${o} < 0.`);if(o>=u.length)throw new ct(`Array index out of bounds: ${o} > ${u.length-1}.`);if(o!==Math.floor(o))throw new ct(`Array index must be an integer, but found ${o} instead.`);return u[o]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class Ss{constructor(t,o){this.type=jt,this.needle=t,this.haystack=o}static parse(t,o){if(t.length!==3)return o.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const u=o.parse(t[1],1,Lt),g=o.parse(t[2],2,Lt);return u&&g?li(u.type,[jt,Bt,Ye,fr,Lt])?new Ss(u,g):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${mn(u.type)} instead`):null}evaluate(t){const o=this.needle.evaluate(t),u=this.haystack.evaluate(t);if(!u)return!1;if(!vi(o,["boolean","string","number","null"]))throw new ct(`Expected first argument to be of type boolean, string, number or null, but found ${mn($e(o))} instead.`);if(!vi(u,["string","array"]))throw new ct(`Expected second argument to be of type array or string, but found ${mn($e(u))} instead.`);return u.indexOf(o)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class Es{constructor(t,o,u){this.type=Ye,this.needle=t,this.haystack=o,this.fromIndex=u}static parse(t,o){if(t.length<=2||t.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const u=o.parse(t[1],1,Lt),g=o.parse(t[2],2,Lt);if(!u||!g)return null;if(!li(u.type,[jt,Bt,Ye,fr,Lt]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${mn(u.type)} instead`);if(t.length===4){const _=o.parse(t[3],3,Ye);return _?new Es(u,g,_):null}return new Es(u,g)}evaluate(t){const o=this.needle.evaluate(t),u=this.haystack.evaluate(t);if(!vi(o,["boolean","string","number","null"]))throw new ct(`Expected first argument to be of type boolean, string, number or null, but found ${mn($e(o))} instead.`);if(!vi(u,["string","array"]))throw new ct(`Expected second argument to be of type array or string, but found ${mn($e(u))} instead.`);if(this.fromIndex){const g=this.fromIndex.evaluate(t);return u.indexOf(o,g)}return u.indexOf(o)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class ul{constructor(t,o,u,g,_,e){this.inputType=t,this.type=o,this.input=u,this.cases=g,this.outputs=_,this.otherwise=e}static parse(t,o){if(t.length<5)return o.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return o.error("Expected an even number of arguments.");let u,g;o.expectedType&&o.expectedType.kind!=="value"&&(g=o.expectedType);const _={},e=[];for(let d=2;d<t.length-1;d+=2){let x=t[d];const S=t[d+1];Array.isArray(x)||(x=[x]);const M=o.concat(d);if(x.length===0)return M.error("Expected at least one branch label.");for(const L of x){if(typeof L!="number"&&typeof L!="string")return M.error("Branch labels must be numbers or strings.");if(typeof L=="number"&&Math.abs(L)>Number.MAX_SAFE_INTEGER)return M.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof L=="number"&&Math.floor(L)!==L)return M.error("Numeric branch labels must be integer values.");if(u){if(M.checkSubtype(u,$e(L)))return null}else u=$e(L);if(_[String(L)]!==void 0)return M.error("Branch labels must be unique.");_[String(L)]=e.length}const A=o.parse(S,d,g);if(!A)return null;g=g||A.type,e.push(A)}const r=o.parse(t[1],1,Lt);if(!r)return null;const l=o.parse(t[t.length-1],t.length-1,g);return l?r.type.kind!=="value"&&o.concat(1).checkSubtype(u,r.type)?null:new ul(u,g,r,_,e,l):null}evaluate(t){const o=this.input.evaluate(t);return($e(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}}class ji{constructor(t,o,u){this.type=t,this.branches=o,this.otherwise=u}static parse(t,o){if(t.length<4)return o.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return o.error("Expected an odd number of arguments.");let u;o.expectedType&&o.expectedType.kind!=="value"&&(u=o.expectedType);const g=[];for(let e=1;e<t.length-1;e+=2){const r=o.parse(t[e],e,jt);if(!r)return null;const l=o.parse(t[e+1],e+1,u);if(!l)return null;g.push([r,l]),u=u||l.type}const _=o.parse(t[t.length-1],t.length-1,u);if(!_)return null;if(!u)throw new Error("Can't infer output type");return new ji(u,g,_)}evaluate(t){for(const[o,u]of this.branches)if(o.evaluate(t))return u.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[o,u]of this.branches)t(o),t(u);t(this.otherwise)}outputDefined(){return this.branches.every(([t,o])=>o.outputDefined())&&this.otherwise.outputDefined()}}class Ts{constructor(t,o,u,g){this.type=t,this.input=o,this.beginIndex=u,this.endIndex=g}static parse(t,o){if(t.length<=2||t.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const u=o.parse(t[1],1,Lt),g=o.parse(t[2],2,Ye);if(!u||!g)return null;if(!li(u.type,[$t(Lt),Bt,Lt]))return o.error(`Expected first argument to be of type array or string, but found ${mn(u.type)} instead`);if(t.length===4){const _=o.parse(t[3],3,Ye);return _?new Ts(u.type,u,g,_):null}return new Ts(u.type,u,g)}evaluate(t){const o=this.input.evaluate(t),u=this.beginIndex.evaluate(t);if(!vi(o,["string","array"]))throw new ct(`Expected first argument to be of type array or string, but found ${mn($e(o))} instead.`);if(this.endIndex){const g=this.endIndex.evaluate(t);return o.slice(u,g)}return o.slice(u)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function ga(i,t){return i==="=="||i==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function dc(i,t,o,u){return u.compare(t,o)===0}function Wi(i,t,o){const u=i!=="=="&&i!=="!=";return class Yg{constructor(_,e,r){this.type=jt,this.lhs=_,this.rhs=e,this.collator=r,this.hasUntypedArgument=_.type.kind==="value"||e.type.kind==="value"}static parse(_,e){if(_.length!==3&&_.length!==4)return e.error("Expected two or three arguments.");const r=_[0];let l=e.parse(_[1],1,Lt);if(!l)return null;if(!ga(r,l.type))return e.concat(1).error(`"${r}" comparisons are not supported for type '${mn(l.type)}'.`);let d=e.parse(_[2],2,Lt);if(!d)return null;if(!ga(r,d.type))return e.concat(2).error(`"${r}" comparisons are not supported for type '${mn(d.type)}'.`);if(l.type.kind!==d.type.kind&&l.type.kind!=="value"&&d.type.kind!=="value")return e.error(`Cannot compare types '${mn(l.type)}' and '${mn(d.type)}'.`);u&&(l.type.kind==="value"&&d.type.kind!=="value"?l=new ot(d.type,[l]):l.type.kind!=="value"&&d.type.kind==="value"&&(d=new ot(l.type,[d])));let x=null;if(_.length===4){if(l.type.kind!=="string"&&d.type.kind!=="string"&&l.type.kind!=="value"&&d.type.kind!=="value")return e.error("Cannot use collator to compare non-string types.");if(x=e.parse(_[3],3,or),!x)return null}return new Yg(l,d,x)}evaluate(_){const e=this.lhs.evaluate(_),r=this.rhs.evaluate(_);if(u&&this.hasUntypedArgument){const l=$e(e),d=$e(r);if(l.kind!==d.kind||l.kind!=="string"&&l.kind!=="number")throw new ct(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${l.kind}, ${d.kind}) instead.`)}if(this.collator&&!u&&this.hasUntypedArgument){const l=$e(e),d=$e(r);if(l.kind!=="string"||d.kind!=="string")return t(_,e,r)}return this.collator?o(_,e,r,this.collator.evaluate(_)):t(_,e,r)}eachChild(_){_(this.lhs),_(this.rhs),this.collator&&_(this.collator)}outputDefined(){return!0}}}const hl=Wi("==",function(i,t,o){return t===o},dc),uu=Wi("!=",function(i,t,o){return t!==o},function(i,t,o,u){return!dc(0,t,o,u)}),Yr=Wi("<",function(i,t,o){return t<o},function(i,t,o,u){return u.compare(t,o)<0}),ks=Wi(">",function(i,t,o){return t>o},function(i,t,o,u){return u.compare(t,o)>0}),pc=Wi("<=",function(i,t,o){return t<=o},function(i,t,o,u){return u.compare(t,o)<=0}),ya=Wi(">=",function(i,t,o){return t>=o},function(i,t,o,u){return u.compare(t,o)>=0});class fc{constructor(t,o,u,g,_){this.type=Bt,this.number=t,this.locale=o,this.currency=u,this.minFractionDigits=g,this.maxFractionDigits=_}static parse(t,o){if(t.length!==3)return o.error("Expected two arguments.");const u=o.parse(t[1],1,Ye);if(!u)return null;const g=t[2];if(typeof g!="object"||Array.isArray(g))return o.error("NumberFormat options argument must be an object.");let _=null;if(g.locale&&(_=o.parse(g.locale,1,Bt),!_))return null;let e=null;if(g.currency&&(e=o.parse(g.currency,1,Bt),!e))return null;let r=null;if(g["min-fraction-digits"]&&(r=o.parse(g["min-fraction-digits"],1,Ye),!r))return null;let l=null;return g["max-fraction-digits"]&&(l=o.parse(g["max-fraction-digits"],1,Ye),!l)?null:new fc(u,_,e,r,l)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class Ms{constructor(t){this.type=Gr,this.sections=t}static parse(t,o){if(t.length<2)return o.error("Expected at least one argument.");const u=t[1];if(!Array.isArray(u)&&typeof u=="object")return o.error("First argument must be an image or text section.");const g=[];let _=!1;for(let e=1;e<=t.length-1;++e){const r=t[e];if(_&&typeof r=="object"&&!Array.isArray(r)){_=!1;let l=null;if(r["font-scale"]&&(l=o.parse(r["font-scale"],1,Ye),!l))return null;let d=null;if(r["text-font"]&&(d=o.parse(r["text-font"],1,$t(Bt)),!d))return null;let x=null;if(r["text-color"]&&(x=o.parse(r["text-color"],1,er),!x))return null;const S=g[g.length-1];S.scale=l,S.font=d,S.textColor=x}else{const l=o.parse(t[e],1,Lt);if(!l)return null;const d=l.type.kind;if(d!=="string"&&d!=="value"&&d!=="null"&&d!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_=!0,g.push({content:l,scale:null,font:null,textColor:null})}}return new Ms(g)}evaluate(t){return new pe(this.sections.map(o=>{const u=o.content.evaluate(t);return $e(u)===St?new ae("",u,null,null,null):new ae(Oe(u),null,o.scale?o.scale.evaluate(t):null,o.font?o.font.evaluate(t).join(","):null,o.textColor?o.textColor.evaluate(t):null)}))}eachChild(t){for(const o of this.sections)t(o.content),o.scale&&t(o.scale),o.font&&t(o.font),o.textColor&&t(o.textColor)}outputDefined(){return!1}}class va{constructor(t){this.type=St,this.input=t}static parse(t,o){if(t.length!==2)return o.error("Expected two arguments.");const u=o.parse(t[1],1,Bt);return u?new va(u):o.error("No image name provided.")}evaluate(t){const o=this.input.evaluate(t),u=le.fromString(o);return u&&t.availableImages&&(u.available=t.availableImages.indexOf(o)>-1),u}eachChild(t){t(this.input)}outputDefined(){return!1}}class Jo{constructor(t){this.type=Ye,this.input=t}static parse(t,o){if(t.length!==2)return o.error(`Expected 1 argument, but found ${t.length-1} instead.`);const u=o.parse(t[1],1);return u?u.type.kind!=="array"&&u.type.kind!=="string"&&u.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${mn(u.type)} instead.`):new Jo(u):null}evaluate(t){const o=this.input.evaluate(t);if(typeof o=="string"||Array.isArray(o))return o.length;throw new ct(`Expected value to be of type string or array, but found ${mn($e(o))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const Zi={"==":hl,"!=":uu,">":ks,"<":Yr,">=":ya,"<=":pc,array:ot,at:ma,boolean:ot,case:ji,coalesce:ll,collator:$n,format:Ms,image:va,in:Ss,"index-of":Es,interpolate:cr,"interpolate-hcl":cr,"interpolate-lab":cr,length:Jo,let:cl,literal:pt,match:ul,number:ot,"number-format":fc,object:ot,slice:Ts,step:xs,string:ot,"to-boolean":Wt,"to-color":Wt,"to-number":Wt,"to-string":Wt,var:ua,within:xi};function mc(i,[t,o,u,g]){t=t.evaluate(i),o=o.evaluate(i),u=u.evaluate(i);const _=g?g.evaluate(i):1,e=ye(t,o,u,_);if(e)throw new ct(e);return new G(t/255*_,o/255*_,u/255*_,_)}function hu(i,t){return i in t}function gc(i,t){const o=t[i];return o===void 0?null:o}function po(i){return{type:i}}function dl(i){return{result:"success",value:i}}function Cs(i){return{result:"error",value:i}}function Ps(i){return i["property-type"]==="data-driven"||i["property-type"]==="cross-faded-data-driven"}function Un(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function yc(i){return!!i.expression&&i.expression.interpolated}function ft(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":i===null?"null":typeof i}function Yo(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}function Dn(i){return i}function Mn(i,t){const o=t.type==="color",u=i.stops&&typeof i.stops[0][0]=="object",g=u||!(u||i.property!==void 0),_=i.type||(yc(t)?"exponential":"interval");if(o||t.type==="padding"){const d=o?G.parse:de.parse;(i=ir({},i)).stops&&(i.stops=i.stops.map(x=>[x[0],d(x[1])])),i.default=d(i.default?i.default:t.default)}if(i.colorSpace&&i.colorSpace!=="rgb"&&!ws[i.colorSpace])throw new Error(`Unknown color space: ${i.colorSpace}`);let e,r,l;if(_==="exponential")e=pu;else if(_==="interval")e=vc;else if(_==="categorical"){e=du,r=Object.create(null);for(const d of i.stops)r[d[0]]=d[1];l=typeof i.stops[0][0]}else{if(_!=="identity")throw new Error(`Unknown function type "${_}"`);e=uh}if(u){const d={},x=[];for(let A=0;A<i.stops.length;A++){const L=i.stops[A],O=L[0].zoom;d[O]===void 0&&(d[O]={zoom:O,type:i.type,property:i.property,default:i.default,stops:[]},x.push(O)),d[O].stops.push([L[0].value,L[1]])}const S=[];for(const A of x)S.push([d[A].zoom,Mn(d[A],t)]);const M={name:"linear"};return{kind:"composite",interpolationType:M,interpolationFactor:cr.interpolationFactor.bind(void 0,M),zoomStops:S.map(A=>A[0]),evaluate:({zoom:A},L)=>pu({stops:S,base:i.base},t,A).evaluate(A,L)}}if(g){const d=_==="exponential"?{name:"exponential",base:i.base!==void 0?i.base:1}:null;return{kind:"camera",interpolationType:d,interpolationFactor:cr.interpolationFactor.bind(void 0,d),zoomStops:i.stops.map(x=>x[0]),evaluate:({zoom:x})=>e(i,t,x,r,l)}}return{kind:"source",evaluate(d,x){const S=x&&x.properties?x.properties[i.property]:void 0;return S===void 0?fo(i.default,t.default):e(i,t,S,r,l)}}}function fo(i,t,o){return i!==void 0?i:t!==void 0?t:o!==void 0?o:void 0}function du(i,t,o,u,g){return fo(typeof o===g?u[o]:void 0,i.default,t.default)}function vc(i,t,o){if(ft(o)!=="number")return fo(i.default,t.default);const u=i.stops.length;if(u===1||o<=i.stops[0][0])return i.stops[0][1];if(o>=i.stops[u-1][0])return i.stops[u-1][1];const g=da(i.stops.map(_=>_[0]),o);return i.stops[g][1]}function pu(i,t,o){const u=i.base!==void 0?i.base:1;if(ft(o)!=="number")return fo(i.default,t.default);const g=i.stops.length;if(g===1||o<=i.stops[0][0])return i.stops[0][1];if(o>=i.stops[g-1][0])return i.stops[g-1][1];const _=da(i.stops.map(x=>x[0]),o),e=function(x,S,M,A){const L=A-M,O=x-M;return L===0?0:S===1?O/L:(Math.pow(S,O)-1)/(Math.pow(S,L)-1)}(o,u,i.stops[_][0],i.stops[_+1][0]),r=i.stops[_][1],l=i.stops[_+1][1];let d=Zo[t.type]||Dn;if(i.colorSpace&&i.colorSpace!=="rgb"){const x=ws[i.colorSpace];d=(S,M)=>x.reverse(x.interpolate(x.forward(S),x.forward(M),e))}return typeof r.evaluate=="function"?{evaluate(...x){const S=r.evaluate.apply(void 0,x),M=l.evaluate.apply(void 0,x);if(S!==void 0&&M!==void 0)return d(S,M,e)}}:d(r,l,e)}function uh(i,t,o){switch(t.type){case"color":o=G.parse(o);break;case"formatted":o=pe.fromString(o.toString());break;case"resolvedImage":o=le.fromString(o.toString());break;case"padding":o=de.parse(o);break;default:ft(o)===t.type||t.type==="enum"&&t.values[o]||(o=void 0)}return fo(o,i.default,t.default)}Vt.register(Zi,{error:[{kind:"error"},[Bt],(i,[t])=>{throw new ct(t.evaluate(i))}],typeof:[Bt,[Lt],(i,[t])=>mn($e(t.evaluate(i)))],"to-rgba":[$t(Ye,4),[er],(i,[t])=>t.evaluate(i).toArray()],rgb:[er,[Ye,Ye,Ye],mc],rgba:[er,[Ye,Ye,Ye,Ye],mc],has:{type:jt,overloads:[[[Bt],(i,[t])=>hu(t.evaluate(i),i.properties())],[[Bt,lr],(i,[t,o])=>hu(t.evaluate(i),o.evaluate(i))]]},get:{type:Lt,overloads:[[[Bt],(i,[t])=>gc(t.evaluate(i),i.properties())],[[Bt,lr],(i,[t,o])=>gc(t.evaluate(i),o.evaluate(i))]]},"feature-state":[Lt,[Bt],(i,[t])=>gc(t.evaluate(i),i.featureState||{})],properties:[lr,[],i=>i.properties()],"geometry-type":[Bt,[],i=>i.geometryType()],id:[Lt,[],i=>i.id()],zoom:[Ye,[],i=>i.globals.zoom],"heatmap-density":[Ye,[],i=>i.globals.heatmapDensity||0],"line-progress":[Ye,[],i=>i.globals.lineProgress||0],accumulated:[Lt,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[Ye,po(Ye),(i,t)=>{let o=0;for(const u of t)o+=u.evaluate(i);return o}],"*":[Ye,po(Ye),(i,t)=>{let o=1;for(const u of t)o*=u.evaluate(i);return o}],"-":{type:Ye,overloads:[[[Ye,Ye],(i,[t,o])=>t.evaluate(i)-o.evaluate(i)],[[Ye],(i,[t])=>-t.evaluate(i)]]},"/":[Ye,[Ye,Ye],(i,[t,o])=>t.evaluate(i)/o.evaluate(i)],"%":[Ye,[Ye,Ye],(i,[t,o])=>t.evaluate(i)%o.evaluate(i)],ln2:[Ye,[],()=>Math.LN2],pi:[Ye,[],()=>Math.PI],e:[Ye,[],()=>Math.E],"^":[Ye,[Ye,Ye],(i,[t,o])=>Math.pow(t.evaluate(i),o.evaluate(i))],sqrt:[Ye,[Ye],(i,[t])=>Math.sqrt(t.evaluate(i))],log10:[Ye,[Ye],(i,[t])=>Math.log(t.evaluate(i))/Math.LN10],ln:[Ye,[Ye],(i,[t])=>Math.log(t.evaluate(i))],log2:[Ye,[Ye],(i,[t])=>Math.log(t.evaluate(i))/Math.LN2],sin:[Ye,[Ye],(i,[t])=>Math.sin(t.evaluate(i))],cos:[Ye,[Ye],(i,[t])=>Math.cos(t.evaluate(i))],tan:[Ye,[Ye],(i,[t])=>Math.tan(t.evaluate(i))],asin:[Ye,[Ye],(i,[t])=>Math.asin(t.evaluate(i))],acos:[Ye,[Ye],(i,[t])=>Math.acos(t.evaluate(i))],atan:[Ye,[Ye],(i,[t])=>Math.atan(t.evaluate(i))],min:[Ye,po(Ye),(i,t)=>Math.min(...t.map(o=>o.evaluate(i)))],max:[Ye,po(Ye),(i,t)=>Math.max(...t.map(o=>o.evaluate(i)))],abs:[Ye,[Ye],(i,[t])=>Math.abs(t.evaluate(i))],round:[Ye,[Ye],(i,[t])=>{const o=t.evaluate(i);return o<0?-Math.round(-o):Math.round(o)}],floor:[Ye,[Ye],(i,[t])=>Math.floor(t.evaluate(i))],ceil:[Ye,[Ye],(i,[t])=>Math.ceil(t.evaluate(i))],"filter-==":[jt,[Bt,Lt],(i,[t,o])=>i.properties()[t.value]===o.value],"filter-id-==":[jt,[Lt],(i,[t])=>i.id()===t.value],"filter-type-==":[jt,[Bt],(i,[t])=>i.geometryType()===t.value],"filter-<":[jt,[Bt,Lt],(i,[t,o])=>{const u=i.properties()[t.value],g=o.value;return typeof u==typeof g&&u<g}],"filter-id-<":[jt,[Lt],(i,[t])=>{const o=i.id(),u=t.value;return typeof o==typeof u&&o<u}],"filter->":[jt,[Bt,Lt],(i,[t,o])=>{const u=i.properties()[t.value],g=o.value;return typeof u==typeof g&&u>g}],"filter-id->":[jt,[Lt],(i,[t])=>{const o=i.id(),u=t.value;return typeof o==typeof u&&o>u}],"filter-<=":[jt,[Bt,Lt],(i,[t,o])=>{const u=i.properties()[t.value],g=o.value;return typeof u==typeof g&&u<=g}],"filter-id-<=":[jt,[Lt],(i,[t])=>{const o=i.id(),u=t.value;return typeof o==typeof u&&o<=u}],"filter->=":[jt,[Bt,Lt],(i,[t,o])=>{const u=i.properties()[t.value],g=o.value;return typeof u==typeof g&&u>=g}],"filter-id->=":[jt,[Lt],(i,[t])=>{const o=i.id(),u=t.value;return typeof o==typeof u&&o>=u}],"filter-has":[jt,[Lt],(i,[t])=>t.value in i.properties()],"filter-has-id":[jt,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[jt,[$t(Bt)],(i,[t])=>t.value.indexOf(i.geometryType())>=0],"filter-id-in":[jt,[$t(Lt)],(i,[t])=>t.value.indexOf(i.id())>=0],"filter-in-small":[jt,[Bt,$t(Lt)],(i,[t,o])=>o.value.indexOf(i.properties()[t.value])>=0],"filter-in-large":[jt,[Bt,$t(Lt)],(i,[t,o])=>function(u,g,_,e){for(;_<=e;){const r=_+e>>1;if(g[r]===u)return!0;g[r]>u?e=r-1:_=r+1}return!1}(i.properties()[t.value],o.value,0,o.value.length-1)],all:{type:jt,overloads:[[[jt,jt],(i,[t,o])=>t.evaluate(i)&&o.evaluate(i)],[po(jt),(i,t)=>{for(const o of t)if(!o.evaluate(i))return!1;return!0}]]},any:{type:jt,overloads:[[[jt,jt],(i,[t,o])=>t.evaluate(i)||o.evaluate(i)],[po(jt),(i,t)=>{for(const o of t)if(o.evaluate(i))return!0;return!1}]]},"!":[jt,[jt],(i,[t])=>!t.evaluate(i)],"is-supported-script":[jt,[Bt],(i,[t])=>{const o=i.globals&&i.globals.isSupportedScript;return!o||o(t.evaluate(i))}],upcase:[Bt,[Bt],(i,[t])=>t.evaluate(i).toUpperCase()],downcase:[Bt,[Bt],(i,[t])=>t.evaluate(i).toLowerCase()],concat:[Bt,po(Lt),(i,t)=>t.map(o=>Oe(o.evaluate(i))).join("")],"resolved-locale":[Bt,[or],(i,[t])=>t.evaluate(i).resolvedLocale()]});class xc{constructor(t,o){this.expression=t,this._warningHistory={},this._evaluator=new Ut,this._defaultValue=o?function(u){return u.type==="color"&&Yo(u.default)?new G(0,0,0,0):u.type==="color"?G.parse(u.default)||null:u.type==="padding"?de.parse(u.default)||null:u.default===void 0?null:u.default}(o):null,this._enumValues=o&&o.type==="enum"?o.values:null}evaluateWithoutErrorHandling(t,o,u,g,_,e){return this._evaluator.globals=t,this._evaluator.feature=o,this._evaluator.featureState=u,this._evaluator.canonical=g,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=e,this.expression.evaluate(this._evaluator)}evaluate(t,o,u,g,_,e){this._evaluator.globals=t,this._evaluator.feature=o||null,this._evaluator.featureState=u||null,this._evaluator.canonical=g,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=e||null;try{const r=this.expression.evaluate(this._evaluator);if(r==null||typeof r=="number"&&r!=r)return this._defaultValue;if(this._enumValues&&!(r in this._enumValues))throw new ct(`Expected value to be one of ${Object.keys(this._enumValues).map(l=>JSON.stringify(l)).join(", ")}, but found ${JSON.stringify(r)} instead.`);return r}catch(r){return this._warningHistory[r.message]||(this._warningHistory[r.message]=!0,typeof console<"u"&&console.warn(r.message)),this._defaultValue}}}function Is(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in Zi}function xa(i,t){const o=new ha(Zi,[],t?function(g){const _={color:er,string:Bt,number:Ye,enum:Bt,boolean:jt,formatted:Gr,padding:Ne,resolvedImage:St};return g.type==="array"?$t(_[g.value]||Lt,g.length):_[g.type]}(t):void 0),u=o.parse(i,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return u?dl(new xc(u,t)):Cs(o.errors)}class pl{constructor(t,o){this.kind=t,this._styleExpression=o,this.isStateDependent=t!=="constant"&&!uo(o.expression)}evaluateWithoutErrorHandling(t,o,u,g,_,e){return this._styleExpression.evaluateWithoutErrorHandling(t,o,u,g,_,e)}evaluate(t,o,u,g,_,e){return this._styleExpression.evaluate(t,o,u,g,_,e)}}class _a{constructor(t,o,u,g){this.kind=t,this.zoomStops=u,this._styleExpression=o,this.isStateDependent=t!=="camera"&&!uo(o.expression),this.interpolationType=g}evaluateWithoutErrorHandling(t,o,u,g,_,e){return this._styleExpression.evaluateWithoutErrorHandling(t,o,u,g,_,e)}evaluate(t,o,u,g,_,e){return this._styleExpression.evaluate(t,o,u,g,_,e)}interpolationFactor(t,o,u){return this.interpolationType?cr.interpolationFactor(this.interpolationType,t,o,u):0}}function fu(i,t){const o=xa(i,t);if(o.result==="error")return o;const u=o.value.expression,g=sl(u);if(!g&&!Ps(t))return Cs([new Qn("","data expressions not supported")]);const _=fn(u,["zoom"]);if(!_&&!Un(t))return Cs([new Qn("","zoom expressions not supported")]);const e=ml(u);return e||_?e instanceof Qn?Cs([e]):e instanceof cr&&!yc(t)?Cs([new Qn("",'"interpolate" expressions cannot be used with this property')]):dl(e?new _a(g?"camera":"composite",o.value,e.labels,e instanceof cr?e.interpolation:void 0):new pl(g?"constant":"source",o.value)):Cs([new Qn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class fl{constructor(t,o){this._parameters=t,this._specification=o,ir(this,Mn(this._parameters,this._specification))}static deserialize(t){return new fl(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function ml(i){let t=null;if(i instanceof cl)t=ml(i.result);else if(i instanceof ll){for(const o of i.args)if(t=ml(o),t)break}else(i instanceof xs||i instanceof cr)&&i.input instanceof Vt&&i.input.name==="zoom"&&(t=i);return t instanceof Qn||i.eachChild(o=>{const u=ml(o);u instanceof Qn?t=u:!t&&u?t=new Qn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&u&&t!==u&&(t=new Qn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function wi(i){const t=i.key,o=i.value,u=i.valueSpec||{},g=i.objectElementValidators||{},_=i.style,e=i.styleSpec;let r=[];const l=ft(o);if(l!=="object")return[new Ze(t,o,`object expected, ${l} found`)];for(const d in o){const x=d.split(".")[0],S=u[x]||u["*"];let M;if(g[x])M=g[x];else if(u[x])M=kr;else if(g["*"])M=g["*"];else{if(!u["*"]){r.push(new Ze(t,o[d],`unknown property "${d}"`));continue}M=kr}r=r.concat(M({key:(t&&`${t}.`)+d,value:o[d],valueSpec:S,style:_,styleSpec:e,object:o,objectKey:d},o))}for(const d in u)g[d]||u[d].required&&u[d].default===void 0&&o[d]===void 0&&r.push(new Ze(t,o,`missing required property "${d}"`));return r}function gl(i){const t=i.value,o=i.valueSpec,u=i.style,g=i.styleSpec,_=i.key,e=i.arrayElementValidator||kr;if(ft(t)!=="array")return[new Ze(_,t,`array expected, ${ft(t)} found`)];if(o.length&&t.length!==o.length)return[new Ze(_,t,`array length ${o.length} expected, length ${t.length} found`)];if(o["min-length"]&&t.length<o["min-length"])return[new Ze(_,t,`array length at least ${o["min-length"]} expected, length ${t.length} found`)];let r={type:o.value,values:o.values};g.$version<7&&(r.function=o.function),ft(o.value)==="object"&&(r=o.value);let l=[];for(let d=0;d<t.length;d++)l=l.concat(e({array:t,arrayIndex:d,value:t[d],valueSpec:r,style:u,styleSpec:g,key:`${_}[${d}]`}));return l}function Qo(i){const t=i.key,o=i.value,u=i.valueSpec;let g=ft(o);return g==="number"&&o!=o&&(g="NaN"),g!=="number"?[new Ze(t,o,`number expected, ${g} found`)]:"minimum"in u&&o<u.minimum?[new Ze(t,o,`${o} is less than the minimum value ${u.minimum}`)]:"maximum"in u&&o>u.maximum?[new Ze(t,o,`${o} is greater than the maximum value ${u.maximum}`)]:[]}function mu(i){const t=i.valueSpec,o=dn(i.value.type);let u,g,_,e={};const r=o!=="categorical"&&i.value.property===void 0,l=!r,d=ft(i.value.stops)==="array"&&ft(i.value.stops[0])==="array"&&ft(i.value.stops[0][0])==="object",x=wi({key:i.key,value:i.value,valueSpec:i.styleSpec.function,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{stops:function(A){if(o==="identity")return[new Ze(A.key,A.value,'identity function may not have a "stops" property')];let L=[];const O=A.value;return L=L.concat(gl({key:A.key,value:O,valueSpec:A.valueSpec,style:A.style,styleSpec:A.styleSpec,arrayElementValidator:S})),ft(O)==="array"&&O.length===0&&L.push(new Ze(A.key,O,"array must have at least one stop")),L},default:function(A){return kr({key:A.key,value:A.value,valueSpec:t,style:A.style,styleSpec:A.styleSpec})}}});return o==="identity"&&r&&x.push(new Ze(i.key,i.value,'missing required property "property"')),o==="identity"||i.value.stops||x.push(new Ze(i.key,i.value,'missing required property "stops"')),o==="exponential"&&i.valueSpec.expression&&!yc(i.valueSpec)&&x.push(new Ze(i.key,i.value,"exponential functions not supported")),i.styleSpec.$version>=8&&(l&&!Ps(i.valueSpec)?x.push(new Ze(i.key,i.value,"property functions not supported")):r&&!Un(i.valueSpec)&&x.push(new Ze(i.key,i.value,"zoom functions not supported"))),o!=="categorical"&&!d||i.value.property!==void 0||x.push(new Ze(i.key,i.value,'"property" property is required')),x;function S(A){let L=[];const O=A.value,q=A.key;if(ft(O)!=="array")return[new Ze(q,O,`array expected, ${ft(O)} found`)];if(O.length!==2)return[new Ze(q,O,`array length 2 expected, length ${O.length} found`)];if(d){if(ft(O[0])!=="object")return[new Ze(q,O,`object expected, ${ft(O[0])} found`)];if(O[0].zoom===void 0)return[new Ze(q,O,"object stop key must have zoom")];if(O[0].value===void 0)return[new Ze(q,O,"object stop key must have value")];if(_&&_>dn(O[0].zoom))return[new Ze(q,O[0].zoom,"stop zoom values must appear in ascending order")];dn(O[0].zoom)!==_&&(_=dn(O[0].zoom),g=void 0,e={}),L=L.concat(wi({key:`${q}[0]`,value:O[0],valueSpec:{zoom:{}},style:A.style,styleSpec:A.styleSpec,objectElementValidators:{zoom:Qo,value:M}}))}else L=L.concat(M({key:`${q}[0]`,value:O[0],style:A.style,styleSpec:A.styleSpec},O));return Is(En(O[1]))?L.concat([new Ze(`${q}[1]`,O[1],"expressions are not allowed in function stops.")]):L.concat(kr({key:`${q}[1]`,value:O[1],valueSpec:t,style:A.style,styleSpec:A.styleSpec}))}function M(A,L){const O=ft(A.value),q=dn(A.value),Q=A.value!==null?A.value:L;if(u){if(O!==u)return[new Ze(A.key,Q,`${O} stop domain type must match previous stop domain type ${u}`)]}else u=O;if(O!=="number"&&O!=="string"&&O!=="boolean")return[new Ze(A.key,Q,"stop domain value must be a number, string, or boolean")];if(O!=="number"&&o!=="categorical"){let ie=`number expected, ${O} found`;return Ps(t)&&o===void 0&&(ie+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ze(A.key,Q,ie)]}return o!=="categorical"||O!=="number"||isFinite(q)&&Math.floor(q)===q?o!=="categorical"&&O==="number"&&g!==void 0&&q<g?[new Ze(A.key,Q,"stop domain values must appear in ascending order")]:(g=q,o==="categorical"&&q in e?[new Ze(A.key,Q,"stop domain values must be unique")]:(e[q]=!0,[])):[new Ze(A.key,Q,`integer expected, found ${q}`)]}}function es(i){const t=(i.expressionContext==="property"?fu:xa)(En(i.value),i.valueSpec);if(t.result==="error")return t.value.map(u=>new Ze(`${i.key}${u.key}`,i.value,u.message));const o=t.value.expression||t.value._styleExpression.expression;if(i.expressionContext==="property"&&i.propertyKey==="text-font"&&!o.outputDefined())return[new Ze(i.key,i.value,`Invalid data expression for "${i.propertyKey}". Output values must be contained as literals within the expression.`)];if(i.expressionContext==="property"&&i.propertyType==="layout"&&!uo(o))return[new Ze(i.key,i.value,'"feature-state" data expressions are not supported with layout properties.')];if(i.expressionContext==="filter"&&!uo(o))return[new Ze(i.key,i.value,'"feature-state" data expressions are not supported with filters.')];if(i.expressionContext&&i.expressionContext.indexOf("cluster")===0){if(!fn(o,["zoom","feature-state"]))return[new Ze(i.key,i.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(i.expressionContext==="cluster-initial"&&!sl(o))return[new Ze(i.key,i.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function As(i){const t=i.key,o=i.value,u=i.valueSpec,g=[];return Array.isArray(u.values)?u.values.indexOf(dn(o))===-1&&g.push(new Ze(t,o,`expected one of [${u.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(u.values).indexOf(dn(o))===-1&&g.push(new Ze(t,o,`expected one of [${Object.keys(u.values).join(", ")}], ${JSON.stringify(o)} found`)),g}function wa(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const t of i.slice(1))if(!wa(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}const ba={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function yl(i){if(i==null)return{filter:()=>!0,needGeometry:!1};wa(i)||(i=vl(i));const t=xa(i,ba);if(t.result==="error")throw new Error(t.value.map(o=>`${o.key}: ${o.message}`).join(", "));return{filter:(o,u,g)=>t.value.evaluate(o,u,{},g),needGeometry:_c(i)}}function ts(i,t){return i<t?-1:i>t?1:0}function _c(i){if(!Array.isArray(i))return!1;if(i[0]==="within")return!0;for(let t=1;t<i.length;t++)if(_c(i[t]))return!0;return!1}function vl(i){if(!i)return!0;const t=i[0];return i.length<=1?t!=="any":t==="=="?xl(i[1],i[2],"=="):t==="!="?bi(xl(i[1],i[2],"==")):t==="<"||t===">"||t==="<="||t===">="?xl(i[1],i[2],t):t==="any"?(o=i.slice(1),["any"].concat(o.map(vl))):t==="all"?["all"].concat(i.slice(1).map(vl)):t==="none"?["all"].concat(i.slice(1).map(vl).map(bi)):t==="in"?wc(i[1],i.slice(2)):t==="!in"?bi(wc(i[1],i.slice(2))):t==="has"?Sa(i[1]):t==="!has"?bi(Sa(i[1])):t!=="within"||i;var o}function xl(i,t,o){switch(i){case"$type":return[`filter-type-${o}`,t];case"$id":return[`filter-id-${o}`,t];default:return[`filter-${o}`,i,t]}}function wc(i,t){if(t.length===0)return!1;switch(i){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(o=>typeof o!=typeof t[0])?["filter-in-large",i,["literal",t.sort(ts)]]:["filter-in-small",i,["literal",t]]}}function Sa(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function bi(i){return["!",i]}function Xi(i){return wa(En(i.value))?es(ir({},i,{expressionContext:"filter",valueSpec:{value:"boolean"}})):_l(i)}function _l(i){const t=i.value,o=i.key;if(ft(t)!=="array")return[new Ze(o,t,`array expected, ${ft(t)} found`)];const u=i.styleSpec;let g,_=[];if(t.length<1)return[new Ze(o,t,"filter array must have at least 1 element")];switch(_=_.concat(As({key:`${o}[0]`,value:t[0],valueSpec:u.filter_operator,style:i.style,styleSpec:i.styleSpec})),dn(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&dn(t[1])==="$type"&&_.push(new Ze(o,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&_.push(new Ze(o,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(g=ft(t[1]),g!=="string"&&_.push(new Ze(`${o}[1]`,t[1],`string expected, ${g} found`)));for(let e=2;e<t.length;e++)g=ft(t[e]),dn(t[1])==="$type"?_=_.concat(As({key:`${o}[${e}]`,value:t[e],valueSpec:u.geometry_type,style:i.style,styleSpec:i.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&_.push(new Ze(`${o}[${e}]`,t[e],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let e=1;e<t.length;e++)_=_.concat(_l({key:`${o}[${e}]`,value:t[e],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":g=ft(t[1]),t.length!==2?_.push(new Ze(o,t,`filter array for "${t[0]}" operator must have 2 elements`)):g!=="string"&&_.push(new Ze(`${o}[1]`,t[1],`string expected, ${g} found`));break;case"within":g=ft(t[1]),t.length!==2?_.push(new Ze(o,t,`filter array for "${t[0]}" operator must have 2 elements`)):g!=="object"&&_.push(new Ze(`${o}[1]`,t[1],`object expected, ${g} found`))}return _}function Ea(i,t){const o=i.key,u=i.style,g=i.styleSpec,_=i.value,e=i.objectKey,r=g[`${t}_${i.layerType}`];if(!r)return[];const l=e.match(/^(.*)-transition$/);if(t==="paint"&&l&&r[l[1]]&&r[l[1]].transition)return kr({key:o,value:_,valueSpec:g.transition,style:u,styleSpec:g});const d=i.valueSpec||r[e];if(!d)return[new Ze(o,_,`unknown property "${e}"`)];let x;if(ft(_)==="string"&&Ps(d)&&!d.tokens&&(x=/^{([^}]+)}$/.exec(_)))return[new Ze(o,_,`"${e}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(x[1])} }\`.`)];const S=[];return i.layerType==="symbol"&&(e==="text-field"&&u&&!u.glyphs&&S.push(new Ze(o,_,'use of "text-field" requires a style "glyphs" property')),e==="text-font"&&Yo(En(_))&&dn(_.type)==="identity"&&S.push(new Ze(o,_,'"text-font" does not support identity functions'))),S.concat(kr({key:i.key,value:_,valueSpec:d,style:u,styleSpec:g,expressionContext:"property",propertyType:t,propertyKey:e}))}function Ta(i){return Ea(i,"paint")}function bc(i){return Ea(i,"layout")}function wl(i){let t=[];const o=i.value,u=i.key,g=i.style,_=i.styleSpec;o.type||o.ref||t.push(new Ze(u,o,'either "type" or "ref" is required'));let e=dn(o.type);const r=dn(o.ref);if(o.id){const l=dn(o.id);for(let d=0;d<i.arrayIndex;d++){const x=g.layers[d];dn(x.id)===l&&t.push(new Ze(u,o.id,`duplicate layer id "${o.id}", previously used at line ${x.id.__line__}`))}}if("ref"in o){let l;["type","source","source-layer","filter","layout"].forEach(d=>{d in o&&t.push(new Ze(u,o[d],`"${d}" is prohibited for ref layers`))}),g.layers.forEach(d=>{dn(d.id)===r&&(l=d)}),l?l.ref?t.push(new Ze(u,o.ref,"ref cannot reference another ref layer")):e=dn(l.type):t.push(new Ze(u,o.ref,`ref layer "${r}" not found`))}else if(e!=="background")if(o.source){const l=g.sources&&g.sources[o.source],d=l&&dn(l.type);l?d==="vector"&&e==="raster"?t.push(new Ze(u,o.source,`layer "${o.id}" requires a raster source`)):d==="raster"&&e!=="raster"?t.push(new Ze(u,o.source,`layer "${o.id}" requires a vector source`)):d!=="vector"||o["source-layer"]?d==="raster-dem"&&e!=="hillshade"?t.push(new Ze(u,o.source,"raster-dem source can only be used with layer type 'hillshade'.")):e!=="line"||!o.paint||!o.paint["line-gradient"]||d==="geojson"&&l.lineMetrics||t.push(new Ze(u,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new Ze(u,o,`layer "${o.id}" must specify a "source-layer"`)):t.push(new Ze(u,o.source,`source "${o.source}" not found`))}else t.push(new Ze(u,o,'missing required property "source"'));return t=t.concat(wi({key:u,value:o,valueSpec:_.layer,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{"*":()=>[],type:()=>kr({key:`${u}.type`,value:o.type,valueSpec:_.layer.type,style:i.style,styleSpec:i.styleSpec,object:o,objectKey:"type"}),filter:Xi,layout:l=>wi({layer:o,key:l.key,value:l.value,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{"*":d=>bc(ir({layerType:e},d))}}),paint:l=>wi({layer:o,key:l.key,value:l.value,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{"*":d=>Ta(ir({layerType:e},d))}})}})),t}function mo(i){const t=i.value,o=i.key,u=ft(t);return u!=="string"?[new Ze(o,t,`string expected, ${u} found`)]:[]}const Sc={promoteId:function({key:i,value:t}){if(ft(t)==="string")return mo({key:i,value:t});{const o=[];for(const u in t)o.push(...mo({key:`${i}.${u}`,value:t[u]}));return o}}};function Ec(i){const t=i.value,o=i.key,u=i.styleSpec,g=i.style;if(!t.type)return[new Ze(o,t,'"type" is required')];const _=dn(t.type);let e;switch(_){case"vector":case"raster":case"raster-dem":return e=wi({key:o,value:t,valueSpec:u[`source_${_.replace("-","_")}`],style:i.style,styleSpec:u,objectElementValidators:Sc}),e;case"geojson":if(e=wi({key:o,value:t,valueSpec:u.source_geojson,style:g,styleSpec:u,objectElementValidators:Sc}),t.cluster)for(const r in t.clusterProperties){const[l,d]=t.clusterProperties[r],x=typeof l=="string"?[l,["accumulated"],["get",r]]:l;e.push(...es({key:`${o}.${r}.map`,value:d,expressionContext:"cluster-map"})),e.push(...es({key:`${o}.${r}.reduce`,value:x,expressionContext:"cluster-reduce"}))}return e;case"video":return wi({key:o,value:t,valueSpec:u.source_video,style:g,styleSpec:u});case"image":return wi({key:o,value:t,valueSpec:u.source_image,style:g,styleSpec:u});case"canvas":return[new Ze(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return As({key:`${o}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Ls(i){const t=i.value,o=i.styleSpec,u=o.light,g=i.style;let _=[];const e=ft(t);if(t===void 0)return _;if(e!=="object")return _=_.concat([new Ze("light",t,`object expected, ${e} found`)]),_;for(const r in t){const l=r.match(/^(.*)-transition$/);_=_.concat(l&&u[l[1]]&&u[l[1]].transition?kr({key:r,value:t[r],valueSpec:o.transition,style:g,styleSpec:o}):u[r]?kr({key:r,value:t[r],valueSpec:u[r],style:g,styleSpec:o}):[new Ze(r,t[r],`unknown property "${r}"`)])}return _}function ka(i){const t=i.value,o=i.styleSpec,u=o.terrain,g=i.style;let _=[];const e=ft(t);if(t===void 0)return _;if(e!=="object")return _=_.concat([new Ze("terrain",t,`object expected, ${e} found`)]),_;for(const r in t)_=_.concat(u[r]?kr({key:r,value:t[r],valueSpec:u[r],style:g,styleSpec:o}):[new Ze(r,t[r],`unknown property "${r}"`)]);return _}const Qr={"*":()=>[],array:gl,boolean:function(i){const t=i.value,o=i.key,u=ft(t);return u!=="boolean"?[new Ze(o,t,`boolean expected, ${u} found`)]:[]},number:Qo,color:function(i){const t=i.key,o=i.value,u=ft(o);return u!=="string"?[new Ze(t,o,`color expected, ${u} found`)]:Vi(o)===null?[new Ze(t,o,`color expected, "${o}" found`)]:[]},constants:Er,enum:As,filter:Xi,function:mu,layer:wl,object:wi,source:Ec,light:Ls,terrain:ka,string:mo,formatted:function(i){return mo(i).length===0?[]:es(i)},resolvedImage:function(i){return mo(i).length===0?[]:es(i)},padding:function(i){const t=i.key,o=i.value;if(ft(o)==="array"){if(o.length<1||o.length>4)return[new Ze(t,o,`padding requires 1 to 4 values; ${o.length} values found`)];const u={type:"number"};let g=[];for(let _=0;_<o.length;_++)g=g.concat(kr({key:`${t}[${_}]`,value:o[_],valueSpec:u}));return g}return Qo({key:t,value:o,valueSpec:{}})}};function kr(i){const t=i.value,o=i.valueSpec,u=i.styleSpec;return o.expression&&Yo(dn(t))?mu(i):o.expression&&Is(En(t))?es(i):o.type&&Qr[o.type]?Qr[o.type](i):wi(ir({},i,{valueSpec:o.type?u[o.type]:o}))}function hh(i){const t=i.value,o=i.key,u=mo(i);return u.length||(t.indexOf("{fontstack}")===-1&&u.push(new Ze(o,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&u.push(new Ze(o,t,'"glyphs" url must include a "{range}" token'))),u}function go(i,t=Le){let o=[];return o=o.concat(kr({key:"",value:i,valueSpec:t.$root,styleSpec:t,style:i,objectElementValidators:{glyphs:hh,"*":()=>[]}})),i.constants&&(o=o.concat(Er({key:"constants",value:i.constants}))),ci(o)}function ci(i){return[].concat(i).sort((t,o)=>t.line-o.line)}function Si(i){return function(...t){return ci(i.apply(this,t))}}go.source=Si(Ec),go.light=Si(Ls),go.terrain=Si(ka),go.layer=Si(wl),go.filter=Si(Xi),go.paintProperty=Si(Ta),go.layoutProperty=Si(bc);const yo=go,gu=yo.light,bl=yo.paintProperty,yu=yo.layoutProperty;function Sl(i,t){let o=!1;if(t&&t.length)for(const u of t)i.fire(new Fr(new Error(u.message))),o=!0;return o}class ns{constructor(t,o,u){const g=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const e=new Int32Array(this.arrayBuffer);t=e[0],this.d=(o=e[1])+2*(u=e[2]);for(let l=0;l<this.d*this.d;l++){const d=e[3+l],x=e[3+l+1];g.push(d===x?null:e.subarray(d,x))}const r=e[3+g.length+1];this.keys=e.subarray(e[3+g.length],r),this.bboxes=e.subarray(r),this.insert=this._insertReadonly}else{this.d=o+2*u;for(let e=0;e<this.d*this.d;e++)g.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=t,this.padding=u,this.scale=o/t,this.uid=0;const _=u/o*t;this.min=-_,this.max=t+_}insert(t,o,u,g,_){this._forEachCell(o,u,g,_,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(o),this.bboxes.push(u),this.bboxes.push(g),this.bboxes.push(_)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,o,u,g,_,e){this.cells[_].push(e)}query(t,o,u,g,_){const e=this.min,r=this.max;if(t<=e&&o<=e&&r<=u&&r<=g&&!_)return Array.prototype.slice.call(this.keys);{const l=[];return this._forEachCell(t,o,u,g,this._queryCell,l,{},_),l}}_queryCell(t,o,u,g,_,e,r,l){const d=this.cells[_];if(d!==null){const x=this.keys,S=this.bboxes;for(let M=0;M<d.length;M++){const A=d[M];if(r[A]===void 0){const L=4*A;(l?l(S[L+0],S[L+1],S[L+2],S[L+3]):t<=S[L+2]&&o<=S[L+3]&&u>=S[L+0]&&g>=S[L+1])?(r[A]=!0,e.push(x[A])):r[A]=!1}}}}_forEachCell(t,o,u,g,_,e,r,l){const d=this._convertToCellCoord(t),x=this._convertToCellCoord(o),S=this._convertToCellCoord(u),M=this._convertToCellCoord(g);for(let A=d;A<=S;A++)for(let L=x;L<=M;L++){const O=this.d*L+A;if((!l||l(this._convertFromCellCoord(A),this._convertFromCellCoord(L),this._convertFromCellCoord(A+1),this._convertFromCellCoord(L+1)))&&_.call(this,t,o,u,g,O,e,r,l))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,o=3+this.cells.length+1+1;let u=0;for(let e=0;e<this.cells.length;e++)u+=this.cells[e].length;const g=new Int32Array(o+u+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;let _=o;for(let e=0;e<t.length;e++){const r=t[e];g[3+e]=_,g.set(r,_),_+=r.length}return g[3+t.length]=_,g.set(this.keys,_),_+=this.keys.length,g[3+t.length+1]=_,g.set(this.bboxes,_),_+=this.bboxes.length,g.buffer}static serialize(t,o){const u=t.toArrayBuffer();return o&&o.push(u),{buffer:u}}static deserialize(t){return new ns(t.buffer)}}const vo={};function ut(i,t,o={}){if(vo[i])throw new Error(`${i} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:i,writeable:!1}),vo[i]={klass:t,omit:o.omit||[],shallow:o.shallow||[]}}ut("Object",Object),ut("TransferableGridIndex",ns),ut("Color",G),ut("Error",Error),ut("AJAXError",nr),ut("ResolvedImage",le),ut("StylePropertyFunction",fl),ut("StyleExpression",xc,{omit:["_evaluator"]}),ut("ZoomDependentExpression",_a),ut("ZoomConstantExpression",pl),ut("CompoundExpression",Vt,{omit:["_evaluate"]});for(const i in Zi)Zi[i]._classRegistryKey||ut(`Expression_${i}`,Zi[i]);function Ma(i){return i&&typeof ArrayBuffer<"u"&&(i instanceof ArrayBuffer||i.constructor&&i.constructor.name==="ArrayBuffer")}function Ki(i,t){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||i instanceof Blob)return i;if(Ma(i)||mt(i))return t&&t.push(i),i;if(ArrayBuffer.isView(i)){const o=i;return t&&t.push(o.buffer),o}if(i instanceof ImageData)return t&&t.push(i.data.buffer),i;if(Array.isArray(i)){const o=[];for(const u of i)o.push(Ki(u,t));return o}if(typeof i=="object"){const o=i.constructor,u=o._classRegistryKey;if(!u)throw new Error("can't serialize object of unregistered class");if(!vo[u])throw new Error(`${u} is not registered.`);const g=o.serialize?o.serialize(i,t):{};if(o.serialize){if(t&&g===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const _ in i){if(!i.hasOwnProperty(_)||vo[u].omit.indexOf(_)>=0)continue;const e=i[_];g[_]=vo[u].shallow.indexOf(_)>=0?e:Ki(e,t)}i instanceof Error&&(g.message=i.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return u!=="Object"&&(g.$name=u),g}throw new Error("can't serialize object of type "+typeof i)}function Ji(i){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||i instanceof Blob||Ma(i)||mt(i)||ArrayBuffer.isView(i)||i instanceof ImageData)return i;if(Array.isArray(i))return i.map(Ji);if(typeof i=="object"){const t=i.$name||"Object";if(!vo[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:o}=vo[t];if(!o)throw new Error(`can't deserialize unregistered class ${t}`);if(o.deserialize)return o.deserialize(i);const u=Object.create(o.prototype);for(const g of Object.keys(i)){if(g==="$name")continue;const _=i[g];u[g]=vo[t].shallow.indexOf(g)>=0?_:Ji(_)}return u}throw new Error("can't deserialize object of type "+typeof i)}class zs{constructor(){this.first=!0}update(t,o){const u=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=u,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=u,!0):(this.lastFloorZoom>u?(this.lastIntegerZoom=u+1,this.lastIntegerZoomTime=o):this.lastFloorZoom<u&&(this.lastIntegerZoom=u,this.lastIntegerZoomTime=o),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=u,!0))}}const rt={"Latin-1 Supplement":i=>i>=128&&i<=255,Arabic:i=>i>=1536&&i<=1791,"Arabic Supplement":i=>i>=1872&&i<=1919,"Arabic Extended-A":i=>i>=2208&&i<=2303,"Hangul Jamo":i=>i>=4352&&i<=4607,"Unified Canadian Aboriginal Syllabics":i=>i>=5120&&i<=5759,Khmer:i=>i>=6016&&i<=6143,"Unified Canadian Aboriginal Syllabics Extended":i=>i>=6320&&i<=6399,"General Punctuation":i=>i>=8192&&i<=8303,"Letterlike Symbols":i=>i>=8448&&i<=8527,"Number Forms":i=>i>=8528&&i<=8591,"Miscellaneous Technical":i=>i>=8960&&i<=9215,"Control Pictures":i=>i>=9216&&i<=9279,"Optical Character Recognition":i=>i>=9280&&i<=9311,"Enclosed Alphanumerics":i=>i>=9312&&i<=9471,"Geometric Shapes":i=>i>=9632&&i<=9727,"Miscellaneous Symbols":i=>i>=9728&&i<=9983,"Miscellaneous Symbols and Arrows":i=>i>=11008&&i<=11263,"CJK Radicals Supplement":i=>i>=11904&&i<=12031,"Kangxi Radicals":i=>i>=12032&&i<=12255,"Ideographic Description Characters":i=>i>=12272&&i<=12287,"CJK Symbols and Punctuation":i=>i>=12288&&i<=12351,Hiragana:i=>i>=12352&&i<=12447,Katakana:i=>i>=12448&&i<=12543,Bopomofo:i=>i>=12544&&i<=12591,"Hangul Compatibility Jamo":i=>i>=12592&&i<=12687,Kanbun:i=>i>=12688&&i<=12703,"Bopomofo Extended":i=>i>=12704&&i<=12735,"CJK Strokes":i=>i>=12736&&i<=12783,"Katakana Phonetic Extensions":i=>i>=12784&&i<=12799,"Enclosed CJK Letters and Months":i=>i>=12800&&i<=13055,"CJK Compatibility":i=>i>=13056&&i<=13311,"CJK Unified Ideographs Extension A":i=>i>=13312&&i<=19903,"Yijing Hexagram Symbols":i=>i>=19904&&i<=19967,"CJK Unified Ideographs":i=>i>=19968&&i<=40959,"Yi Syllables":i=>i>=40960&&i<=42127,"Yi Radicals":i=>i>=42128&&i<=42191,"Hangul Jamo Extended-A":i=>i>=43360&&i<=43391,"Hangul Syllables":i=>i>=44032&&i<=55215,"Hangul Jamo Extended-B":i=>i>=55216&&i<=55295,"Private Use Area":i=>i>=57344&&i<=63743,"CJK Compatibility Ideographs":i=>i>=63744&&i<=64255,"Arabic Presentation Forms-A":i=>i>=64336&&i<=65023,"Vertical Forms":i=>i>=65040&&i<=65055,"CJK Compatibility Forms":i=>i>=65072&&i<=65103,"Small Form Variants":i=>i>=65104&&i<=65135,"Arabic Presentation Forms-B":i=>i>=65136&&i<=65279,"Halfwidth and Fullwidth Forms":i=>i>=65280&&i<=65519};function xo(i){for(const t of i)if(_o(t.charCodeAt(0)))return!0;return!1}function El(i){for(const t of i)if(!vu(t.charCodeAt(0)))return!1;return!0}function vu(i){return!(rt.Arabic(i)||rt["Arabic Supplement"](i)||rt["Arabic Extended-A"](i)||rt["Arabic Presentation Forms-A"](i)||rt["Arabic Presentation Forms-B"](i))}function _o(i){return!(i!==746&&i!==747&&(i<4352||!(rt["Bopomofo Extended"](i)||rt.Bopomofo(i)||rt["CJK Compatibility Forms"](i)&&!(i>=65097&&i<=65103)||rt["CJK Compatibility Ideographs"](i)||rt["CJK Compatibility"](i)||rt["CJK Radicals Supplement"](i)||rt["CJK Strokes"](i)||!(!rt["CJK Symbols and Punctuation"](i)||i>=12296&&i<=12305||i>=12308&&i<=12319||i===12336)||rt["CJK Unified Ideographs Extension A"](i)||rt["CJK Unified Ideographs"](i)||rt["Enclosed CJK Letters and Months"](i)||rt["Hangul Compatibility Jamo"](i)||rt["Hangul Jamo Extended-A"](i)||rt["Hangul Jamo Extended-B"](i)||rt["Hangul Jamo"](i)||rt["Hangul Syllables"](i)||rt.Hiragana(i)||rt["Ideographic Description Characters"](i)||rt.Kanbun(i)||rt["Kangxi Radicals"](i)||rt["Katakana Phonetic Extensions"](i)||rt.Katakana(i)&&i!==12540||!(!rt["Halfwidth and Fullwidth Forms"](i)||i===65288||i===65289||i===65293||i>=65306&&i<=65310||i===65339||i===65341||i===65343||i>=65371&&i<=65503||i===65507||i>=65512&&i<=65519)||!(!rt["Small Form Variants"](i)||i>=65112&&i<=65118||i>=65123&&i<=65126)||rt["Unified Canadian Aboriginal Syllabics"](i)||rt["Unified Canadian Aboriginal Syllabics Extended"](i)||rt["Vertical Forms"](i)||rt["Yijing Hexagram Symbols"](i)||rt["Yi Syllables"](i)||rt["Yi Radicals"](i))))}function Tc(i){return!(_o(i)||function(t){return!!(rt["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||rt["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||rt["Letterlike Symbols"](t)||rt["Number Forms"](t)||rt["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||rt["Control Pictures"](t)&&t!==9251||rt["Optical Character Recognition"](t)||rt["Enclosed Alphanumerics"](t)||rt["Geometric Shapes"](t)||rt["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||rt["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||rt["CJK Symbols and Punctuation"](t)||rt.Katakana(t)||rt["Private Use Area"](t)||rt["CJK Compatibility Forms"](t)||rt["Small Form Variants"](t)||rt["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(i))}function kc(i){return i>=1424&&i<=2303||rt["Arabic Presentation Forms-A"](i)||rt["Arabic Presentation Forms-B"](i)}function xu(i,t){return!(!t&&kc(i)||i>=2304&&i<=3583||i>=3840&&i<=4255||rt.Khmer(i))}function _u(i){for(const t of i)if(kc(t.charCodeAt(0)))return!0;return!1}const Ca="deferred",Tl="loading",Ri="loaded";let Pa=null,Mr="unavailable",wo=null;const wu=function(i){i&&typeof i=="string"&&i.indexOf("NetworkError")>-1&&(Mr="error"),Pa&&Pa(i)};function rs(){js.fire(new On("pluginStateChange",{pluginStatus:Mr,pluginURL:wo}))}const js=new Hr,kl=function(){return Mr},Ia=function(){if(Mr!==Ca||!wo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Mr=Tl,rs(),wo&&Qe({url:wo},i=>{i?wu(i):(Mr=Ri,rs())})},hn={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Mr===Ri||hn.applyArabicShaping!=null,isLoading:()=>Mr===Tl,setState(i){if(!Ge())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Mr=i.pluginStatus,wo=i.pluginURL},isParsed(){if(!Ge())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return hn.applyArabicShaping!=null&&hn.processBidirectionalText!=null&&hn.processStyledBidirectionalText!=null},getPluginURL(){if(!Ge())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return wo}};class Tn{constructor(t,o){this.zoom=t,o?(this.now=o.now,this.fadeDuration=o.fadeDuration,this.zoomHistory=o.zoomHistory,this.transition=o.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new zs,this.transition={})}isSupportedScript(t){return function(o,u){for(const g of o)if(!xu(g.charCodeAt(0),u))return!1;return!0}(t,hn.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,o=t-Math.floor(t),u=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:o+(1-o)*u}:{fromScale:.5,toScale:1,t:1-(1-u)*o}}}class is{constructor(t,o){this.property=t,this.value=o,this.expression=function(u,g){if(Yo(u))return new fl(u,g);if(Is(u)){const _=fu(u,g);if(_.result==="error")throw new Error(_.value.map(e=>`${e.key}: ${e.message}`).join(", "));return _.value}{let _=u;return g.type==="color"&&typeof u=="string"?_=G.parse(u):g.type!=="padding"||typeof u!="number"&&!Array.isArray(u)||(_=de.parse(u)),{kind:"constant",evaluate:()=>_}}}(o===void 0?t.specification.default:o,t.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(t,o,u){return this.property.possiblyEvaluate(this,t,o,u)}}class bo{constructor(t){this.property=t,this.value=new is(t,void 0)}transitioned(t,o){return new Cl(this.property,this.value,o,he({},t.transition,this.transition),t.now)}untransitioned(){return new Cl(this.property,this.value,null,{},0)}}class Ml{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return Ee(this._values[t].value.value)}setValue(t,o){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new bo(this._values[t].property)),this._values[t].value=new is(this._values[t].property,o===null?void 0:Ee(o))}getTransition(t){return Ee(this._values[t].transition)}setTransition(t,o){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new bo(this._values[t].property)),this._values[t].transition=Ee(o)||void 0}serialize(){const t={};for(const o of Object.keys(this._values)){const u=this.getValue(o);u!==void 0&&(t[o]=u);const g=this.getTransition(o);g!==void 0&&(t[`${o}-transition`]=g)}return t}transitioned(t,o){const u=new Rs(this._properties);for(const g of Object.keys(this._values))u._values[g]=this._values[g].transitioned(t,o._values[g]);return u}untransitioned(){const t=new Rs(this._properties);for(const o of Object.keys(this._values))t._values[o]=this._values[o].untransitioned();return t}}class Cl{constructor(t,o,u,g,_){this.property=t,this.value=o,this.begin=_+g.delay||0,this.end=this.begin+g.duration||0,t.specification.transition&&(g.delay||g.duration)&&(this.prior=u)}possiblyEvaluate(t,o,u){const g=t.now||0,_=this.value.possiblyEvaluate(t,o,u),e=this.prior;if(e){if(g>this.end)return this.prior=null,_;if(this.value.isDataDriven())return this.prior=null,_;if(g<this.begin)return e.possiblyEvaluate(t,o,u);{const r=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(e.possiblyEvaluate(t,o,u),_,function(l){if(l<=0)return 0;if(l>=1)return 1;const d=l*l,x=d*l;return 4*(l<.5?x:3*(l-d)+x-.75)}(r))}}return _}}class Rs{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,o,u){const g=new Aa(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].possiblyEvaluate(t,o,u);return g}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class Pl{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}getValue(t){return Ee(this._values[t].value)}setValue(t,o){this._values[t]=new is(this._values[t].property,o===null?void 0:Ee(o))}serialize(){const t={};for(const o of Object.keys(this._values)){const u=this.getValue(o);u!==void 0&&(t[o]=u)}return t}possiblyEvaluate(t,o,u){const g=new Aa(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].possiblyEvaluate(t,o,u);return g}}class Or{constructor(t,o,u){this.property=t,this.value=o,this.parameters=u}isConstant(){return this.value.kind==="constant"}constantOr(t){return this.value.kind==="constant"?this.value.value:t}evaluate(t,o,u,g){return this.property.evaluate(this.value,this.parameters,t,o,u,g)}}class Aa{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class vt{constructor(t){this.specification=t}possiblyEvaluate(t,o){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(o)}interpolate(t,o,u){const g=Zo[this.specification.type];return g?g(t,o,u):t}}class Et{constructor(t,o){this.specification=t,this.overrides=o}possiblyEvaluate(t,o,u,g){return new Or(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(o,null,{},u,g)}:t.expression,o)}interpolate(t,o,u){if(t.value.kind!=="constant"||o.value.kind!=="constant")return t;if(t.value.value===void 0||o.value.value===void 0)return new Or(this,{kind:"constant",value:void 0},t.parameters);const g=Zo[this.specification.type];return g?new Or(this,{kind:"constant",value:g(t.value.value,o.value.value,u)},t.parameters):t}evaluate(t,o,u,g,_,e){return t.kind==="constant"?t.value:t.evaluate(o,u,g,_,e)}}class Ds extends Et{possiblyEvaluate(t,o,u,g){if(t.value===void 0)return new Or(this,{kind:"constant",value:void 0},o);if(t.expression.kind==="constant"){const _=t.expression.evaluate(o,null,{},u,g),e=t.property.specification.type==="resolvedImage"&&typeof _!="string"?_.name:_,r=this._calculate(e,e,e,o);return new Or(this,{kind:"constant",value:r},o)}if(t.expression.kind==="camera"){const _=this._calculate(t.expression.evaluate({zoom:o.zoom-1}),t.expression.evaluate({zoom:o.zoom}),t.expression.evaluate({zoom:o.zoom+1}),o);return new Or(this,{kind:"constant",value:_},o)}return new Or(this,t.expression,o)}evaluate(t,o,u,g,_,e){if(t.kind==="source"){const r=t.evaluate(o,u,g,_,e);return this._calculate(r,r,r,o)}return t.kind==="composite"?this._calculate(t.evaluate({zoom:Math.floor(o.zoom)-1},u,g),t.evaluate({zoom:Math.floor(o.zoom)},u,g),t.evaluate({zoom:Math.floor(o.zoom)+1},u,g),o):t.value}_calculate(t,o,u,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:t,to:o}:{from:u,to:o}}interpolate(t){return t}}class So{constructor(t){this.specification=t}possiblyEvaluate(t,o,u,g){if(t.value!==void 0){if(t.expression.kind==="constant"){const _=t.expression.evaluate(o,null,{},u,g);return this._calculate(_,_,_,o)}return this._calculate(t.expression.evaluate(new Tn(Math.floor(o.zoom-1),o)),t.expression.evaluate(new Tn(Math.floor(o.zoom),o)),t.expression.evaluate(new Tn(Math.floor(o.zoom+1),o)),o)}}_calculate(t,o,u,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:t,to:o}:{from:u,to:o}}interpolate(t){return t}}class Ns{constructor(t){this.specification=t}possiblyEvaluate(t,o,u,g){return!!t.expression.evaluate(o,null,{},u,g)}interpolate(){return!1}}class Xn{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const o in t){const u=t[o];u.specification.overridable&&this.overridableProperties.push(o);const g=this.defaultPropertyValues[o]=new is(u,void 0),_=this.defaultTransitionablePropertyValues[o]=new bo(u);this.defaultTransitioningPropertyValues[o]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=g.possiblyEvaluate({})}}}ut("DataDrivenProperty",Et),ut("DataConstantProperty",vt),ut("CrossFadedDataDrivenProperty",Ds),ut("CrossFadedProperty",So),ut("ColorRampProperty",Ns);const Yi="-transition";class Cr extends Hr{constructor(t,o){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},t.type!=="custom"&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,t.type!=="background"&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),o.layout&&(this._unevaluatedLayout=new Pl(o.layout)),o.paint)){this._transitionablePaint=new Ml(o.paint);for(const u in t.paint)this.setPaintProperty(u,t.paint[u],{validate:!1});for(const u in t.layout)this.setLayoutProperty(u,t.layout[u],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Aa(o.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return t==="visibility"?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,o,u={}){o!=null&&this._validate(yu,`layers.${this.id}.layout.${t}`,t,o,u)||(t!=="visibility"?this._unevaluatedLayout.setValue(t,o):this.visibility=o)}getPaintProperty(t){return t.endsWith(Yi)?this._transitionablePaint.getTransition(t.slice(0,-Yi.length)):this._transitionablePaint.getValue(t)}setPaintProperty(t,o,u={}){if(o!=null&&this._validate(bl,`layers.${this.id}.paint.${t}`,t,o,u))return!1;if(t.endsWith(Yi))return this._transitionablePaint.setTransition(t.slice(0,-Yi.length),o||void 0),!1;{const g=this._transitionablePaint._values[t],_=g.property.specification["property-type"]==="cross-faded-data-driven",e=g.value.isDataDriven(),r=g.value;this._transitionablePaint.setValue(t,o),this._handleSpecialPaintPropertyUpdate(t);const l=this._transitionablePaint._values[t].value;return l.isDataDriven()||e||_||this._handleOverridablePaintPropertyUpdate(t,r,l)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,o,u){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||this.visibility==="none"}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,o){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,o)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),ke(t,(o,u)=>!(o===void 0||u==="layout"&&!Object.keys(o).length||u==="paint"&&!Object.keys(o).length))}_validate(t,o,u,g,_={}){return(!_||_.validate!==!1)&&Sl(this,t.call(yo,{key:o,layerType:this.type,objectKey:u,value:g,styleSpec:Le,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const o=this.paint.get(t);if(o instanceof Or&&Ps(o.property.specification)&&(o.value.kind==="source"||o.value.kind==="composite")&&o.value.isStateDependent)return!0}return!1}}const Mc={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class La{constructor(t,o){this._structArray=t,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class kn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,o){return t._trim(),o&&(t.isTransferred=!0,o.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const o=Object.create(this.prototype);return o.arrayBuffer=t.arrayBuffer,o.length=t.length,o.capacity=t.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function tr(i,t=1){let o=0,u=0;return{members:i.map(g=>{const _=Mc[g.type].BYTES_PER_ELEMENT,e=o=bu(o,Math.max(t,_)),r=g.components||1;return u=Math.max(u,_),o+=_*r,{name:g.name,type:g.type,components:r,offset:e}}),size:bu(o,Math.max(u,t)),alignment:t}}function bu(i,t){return Math.ceil(i/t)*t}class Eo extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o){const u=this.length;return this.resize(u+1),this.emplace(u,t,o)}emplace(t,o,u){const g=2*t;return this.int16[g+0]=o,this.int16[g+1]=u,t}}Eo.prototype.bytesPerElement=4,ut("StructArrayLayout2i4",Eo);class ui extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,u,g){const _=this.length;return this.resize(_+1),this.emplace(_,t,o,u,g)}emplace(t,o,u,g,_){const e=4*t;return this.int16[e+0]=o,this.int16[e+1]=u,this.int16[e+2]=g,this.int16[e+3]=_,t}}ui.prototype.bytesPerElement=8,ut("StructArrayLayout4i8",ui);class f extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,u,g,_,e){const r=this.length;return this.resize(r+1),this.emplace(r,t,o,u,g,_,e)}emplace(t,o,u,g,_,e,r){const l=6*t;return this.int16[l+0]=o,this.int16[l+1]=u,this.int16[l+2]=g,this.int16[l+3]=_,this.int16[l+4]=e,this.int16[l+5]=r,t}}f.prototype.bytesPerElement=12,ut("StructArrayLayout2i4i12",f);class n extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,u,g,_,e){const r=this.length;return this.resize(r+1),this.emplace(r,t,o,u,g,_,e)}emplace(t,o,u,g,_,e,r){const l=4*t,d=8*t;return this.int16[l+0]=o,this.int16[l+1]=u,this.uint8[d+4]=g,this.uint8[d+5]=_,this.uint8[d+6]=e,this.uint8[d+7]=r,t}}n.prototype.bytesPerElement=8,ut("StructArrayLayout2i4ub8",n);class s extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o){const u=this.length;return this.resize(u+1),this.emplace(u,t,o)}emplace(t,o,u){const g=2*t;return this.float32[g+0]=o,this.float32[g+1]=u,t}}s.prototype.bytesPerElement=8,ut("StructArrayLayout2f8",s);class h extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,u,g,_,e,r,l,d,x){const S=this.length;return this.resize(S+1),this.emplace(S,t,o,u,g,_,e,r,l,d,x)}emplace(t,o,u,g,_,e,r,l,d,x,S){const M=10*t;return this.uint16[M+0]=o,this.uint16[M+1]=u,this.uint16[M+2]=g,this.uint16[M+3]=_,this.uint16[M+4]=e,this.uint16[M+5]=r,this.uint16[M+6]=l,this.uint16[M+7]=d,this.uint16[M+8]=x,this.uint16[M+9]=S,t}}h.prototype.bytesPerElement=20,ut("StructArrayLayout10ui20",h);class m extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,u,g,_,e,r,l,d,x,S,M){const A=this.length;return this.resize(A+1),this.emplace(A,t,o,u,g,_,e,r,l,d,x,S,M)}emplace(t,o,u,g,_,e,r,l,d,x,S,M,A){const L=12*t;return this.int16[L+0]=o,this.int16[L+1]=u,this.int16[L+2]=g,this.int16[L+3]=_,this.uint16[L+4]=e,this.uint16[L+5]=r,this.uint16[L+6]=l,this.uint16[L+7]=d,this.int16[L+8]=x,this.int16[L+9]=S,this.int16[L+10]=M,this.int16[L+11]=A,t}}m.prototype.bytesPerElement=24,ut("StructArrayLayout4i4ui4i24",m);class b extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,u){const g=this.length;return this.resize(g+1),this.emplace(g,t,o,u)}emplace(t,o,u,g){const _=3*t;return this.float32[_+0]=o,this.float32[_+1]=u,this.float32[_+2]=g,t}}b.prototype.bytesPerElement=12,ut("StructArrayLayout3f12",b);class T extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const o=this.length;return this.resize(o+1),this.emplace(o,t)}emplace(t,o){return this.uint32[1*t+0]=o,t}}T.prototype.bytesPerElement=4,ut("StructArrayLayout1ul4",T);class C extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,u,g,_,e,r,l,d){const x=this.length;return this.resize(x+1),this.emplace(x,t,o,u,g,_,e,r,l,d)}emplace(t,o,u,g,_,e,r,l,d,x){const S=10*t,M=5*t;return this.int16[S+0]=o,this.int16[S+1]=u,this.int16[S+2]=g,this.int16[S+3]=_,this.int16[S+4]=e,this.int16[S+5]=r,this.uint32[M+3]=l,this.uint16[S+8]=d,this.uint16[S+9]=x,t}}C.prototype.bytesPerElement=20,ut("StructArrayLayout6i1ul2ui20",C);class I extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,u,g,_,e){const r=this.length;return this.resize(r+1),this.emplace(r,t,o,u,g,_,e)}emplace(t,o,u,g,_,e,r){const l=6*t;return this.int16[l+0]=o,this.int16[l+1]=u,this.int16[l+2]=g,this.int16[l+3]=_,this.int16[l+4]=e,this.int16[l+5]=r,t}}I.prototype.bytesPerElement=12,ut("StructArrayLayout2i2i2i12",I);class z extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,u,g,_){const e=this.length;return this.resize(e+1),this.emplace(e,t,o,u,g,_)}emplace(t,o,u,g,_,e){const r=4*t,l=8*t;return this.float32[r+0]=o,this.float32[r+1]=u,this.float32[r+2]=g,this.int16[l+6]=_,this.int16[l+7]=e,t}}z.prototype.bytesPerElement=16,ut("StructArrayLayout2f1f2i16",z);class R extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,u,g){const _=this.length;return this.resize(_+1),this.emplace(_,t,o,u,g)}emplace(t,o,u,g,_){const e=12*t,r=3*t;return this.uint8[e+0]=o,this.uint8[e+1]=u,this.float32[r+1]=g,this.float32[r+2]=_,t}}R.prototype.bytesPerElement=12,ut("StructArrayLayout2ub2f12",R);class B extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,u){const g=this.length;return this.resize(g+1),this.emplace(g,t,o,u)}emplace(t,o,u,g){const _=3*t;return this.uint16[_+0]=o,this.uint16[_+1]=u,this.uint16[_+2]=g,t}}B.prototype.bytesPerElement=6,ut("StructArrayLayout3ui6",B);class H extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,u,g,_,e,r,l,d,x,S,M,A,L,O,q,Q){const ie=this.length;return this.resize(ie+1),this.emplace(ie,t,o,u,g,_,e,r,l,d,x,S,M,A,L,O,q,Q)}emplace(t,o,u,g,_,e,r,l,d,x,S,M,A,L,O,q,Q,ie){const re=24*t,fe=12*t,we=48*t;return this.int16[re+0]=o,this.int16[re+1]=u,this.uint16[re+2]=g,this.uint16[re+3]=_,this.uint32[fe+2]=e,this.uint32[fe+3]=r,this.uint32[fe+4]=l,this.uint16[re+10]=d,this.uint16[re+11]=x,this.uint16[re+12]=S,this.float32[fe+7]=M,this.float32[fe+8]=A,this.uint8[we+36]=L,this.uint8[we+37]=O,this.uint8[we+38]=q,this.uint32[fe+10]=Q,this.int16[re+22]=ie,t}}H.prototype.bytesPerElement=48,ut("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",H);class Y extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,u,g,_,e,r,l,d,x,S,M,A,L,O,q,Q,ie,re,fe,we,je,ue,ne,ce,be,Ie,Be){const De=this.length;return this.resize(De+1),this.emplace(De,t,o,u,g,_,e,r,l,d,x,S,M,A,L,O,q,Q,ie,re,fe,we,je,ue,ne,ce,be,Ie,Be)}emplace(t,o,u,g,_,e,r,l,d,x,S,M,A,L,O,q,Q,ie,re,fe,we,je,ue,ne,ce,be,Ie,Be,De){const Ce=34*t,ht=17*t;return this.int16[Ce+0]=o,this.int16[Ce+1]=u,this.int16[Ce+2]=g,this.int16[Ce+3]=_,this.int16[Ce+4]=e,this.int16[Ce+5]=r,this.int16[Ce+6]=l,this.int16[Ce+7]=d,this.uint16[Ce+8]=x,this.uint16[Ce+9]=S,this.uint16[Ce+10]=M,this.uint16[Ce+11]=A,this.uint16[Ce+12]=L,this.uint16[Ce+13]=O,this.uint16[Ce+14]=q,this.uint16[Ce+15]=Q,this.uint16[Ce+16]=ie,this.uint16[Ce+17]=re,this.uint16[Ce+18]=fe,this.uint16[Ce+19]=we,this.uint16[Ce+20]=je,this.uint16[Ce+21]=ue,this.uint16[Ce+22]=ne,this.uint32[ht+12]=ce,this.float32[ht+13]=be,this.float32[ht+14]=Ie,this.float32[ht+15]=Be,this.float32[ht+16]=De,t}}Y.prototype.bytesPerElement=68,ut("StructArrayLayout8i15ui1ul4f68",Y);class X extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const o=this.length;return this.resize(o+1),this.emplace(o,t)}emplace(t,o){return this.float32[1*t+0]=o,t}}X.prototype.bytesPerElement=4,ut("StructArrayLayout1f4",X);class Z extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,u){const g=this.length;return this.resize(g+1),this.emplace(g,t,o,u)}emplace(t,o,u,g){const _=3*t;return this.int16[_+0]=o,this.int16[_+1]=u,this.int16[_+2]=g,t}}Z.prototype.bytesPerElement=6,ut("StructArrayLayout3i6",Z);class se extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,u){const g=this.length;return this.resize(g+1),this.emplace(g,t,o,u)}emplace(t,o,u,g){const _=4*t;return this.uint32[2*t+0]=o,this.uint16[_+2]=u,this.uint16[_+3]=g,t}}se.prototype.bytesPerElement=8,ut("StructArrayLayout1ul2ui8",se);class ge extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o){const u=this.length;return this.resize(u+1),this.emplace(u,t,o)}emplace(t,o,u){const g=2*t;return this.uint16[g+0]=o,this.uint16[g+1]=u,t}}ge.prototype.bytesPerElement=4,ut("StructArrayLayout2ui4",ge);class xe extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const o=this.length;return this.resize(o+1),this.emplace(o,t)}emplace(t,o){return this.uint16[1*t+0]=o,t}}xe.prototype.bytesPerElement=2,ut("StructArrayLayout1ui2",xe);class te extends kn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,u,g){const _=this.length;return this.resize(_+1),this.emplace(_,t,o,u,g)}emplace(t,o,u,g,_){const e=4*t;return this.float32[e+0]=o,this.float32[e+1]=u,this.float32[e+2]=g,this.float32[e+3]=_,t}}te.prototype.bytesPerElement=16,ut("StructArrayLayout4f16",te);class Te extends La{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new Xe(this.anchorPointX,this.anchorPointY)}}Te.prototype.size=20;class Se extends C{get(t){return new Te(this,t)}}ut("CollisionBoxArray",Se);class Pe extends La{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Pe.prototype.size=48;class Re extends H{get(t){return new Pe(this,t)}}ut("PlacedSymbolArray",Re);class He extends La{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}He.prototype.size=68;class ze extends Y{get(t){return new He(this,t)}}ut("SymbolInstanceArray",ze);class at extends X{getoffsetX(t){return this.float32[1*t+0]}}ut("GlyphOffsetArray",at);class et extends Z{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}ut("SymbolLineVertexArray",et);class st extends La{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}st.prototype.size=8;class Dt extends se{get(t){return new st(this,t)}}ut("FeatureIndexArray",Dt);class Gt extends Eo{}class wt extends Eo{}class xn extends Eo{}class nn extends f{}class Qt extends n{}class en extends s{}class rn extends h{}class Pr extends m{}class Kn extends b{}class Vn extends T{}class gr extends I{}class $r extends R{}class jn extends B{}class yr extends ge{}const To=tr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Bs}=To;class cn{constructor(t=[]){this.segments=t}prepareSegment(t,o,u,g){let _=this.segments[this.segments.length-1];return t>cn.MAX_VERTEX_ARRAY_LENGTH&&Me(`Max vertices per segment is ${cn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!_||_.vertexLength+t>cn.MAX_VERTEX_ARRAY_LENGTH||_.sortKey!==g)&&(_={vertexOffset:o.length,primitiveOffset:u.length,vertexLength:0,primitiveLength:0},g!==void 0&&(_.sortKey=g),this.segments.push(_)),_}get(){return this.segments}destroy(){for(const t of this.segments)for(const o in t.vaos)t.vaos[o].destroy()}static simpleSegment(t,o,u,g){return new cn([{vertexOffset:t,primitiveOffset:o,vertexLength:u,primitiveLength:g,vaos:{},sortKey:0}])}}function on(i,t){return 256*(i=U(Math.floor(i),0,255))+U(Math.floor(t),0,255)}cn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ut("SegmentVector",cn);const Ht=tr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Jt={exports:{}},Nn={exports:{}};Nn.exports=function(i,t){var o,u,g,_,e,r,l,d;for(u=i.length-(o=3&i.length),g=t,e=3432918353,r=461845907,d=0;d<u;)l=255&i.charCodeAt(d)|(255&i.charCodeAt(++d))<<8|(255&i.charCodeAt(++d))<<16|(255&i.charCodeAt(++d))<<24,++d,g=27492+(65535&(_=5*(65535&(g=(g^=l=(65535&(l=(l=(65535&l)*e+(((l>>>16)*e&65535)<<16)&4294967295)<<15|l>>>17))*r+(((l>>>16)*r&65535)<<16)&4294967295)<<13|g>>>19))+((5*(g>>>16)&65535)<<16)&4294967295))+((58964+(_>>>16)&65535)<<16);switch(l=0,o){case 3:l^=(255&i.charCodeAt(d+2))<<16;case 2:l^=(255&i.charCodeAt(d+1))<<8;case 1:g^=l=(65535&(l=(l=(65535&(l^=255&i.charCodeAt(d)))*e+(((l>>>16)*e&65535)<<16)&4294967295)<<15|l>>>17))*r+(((l>>>16)*r&65535)<<16)&4294967295}return g^=i.length,g=2246822507*(65535&(g^=g>>>16))+((2246822507*(g>>>16)&65535)<<16)&4294967295,g=3266489909*(65535&(g^=g>>>13))+((3266489909*(g>>>16)&65535)<<16)&4294967295,(g^=g>>>16)>>>0};var Cn={exports:{}};Cn.exports=function(i,t){for(var o,u=i.length,g=t^u,_=0;u>=4;)o=1540483477*(65535&(o=255&i.charCodeAt(_)|(255&i.charCodeAt(++_))<<8|(255&i.charCodeAt(++_))<<16|(255&i.charCodeAt(++_))<<24))+((1540483477*(o>>>16)&65535)<<16),g=1540483477*(65535&g)+((1540483477*(g>>>16)&65535)<<16)^(o=1540483477*(65535&(o^=o>>>24))+((1540483477*(o>>>16)&65535)<<16)),u-=4,++_;switch(u){case 3:g^=(255&i.charCodeAt(_+2))<<16;case 2:g^=(255&i.charCodeAt(_+1))<<8;case 1:g=1540483477*(65535&(g^=255&i.charCodeAt(_)))+((1540483477*(g>>>16)&65535)<<16)}return g=1540483477*(65535&(g^=g>>>13))+((1540483477*(g>>>16)&65535)<<16),(g^=g>>>15)>>>0};var ei=Nn.exports,ko=Cn.exports;Jt.exports=ei,Jt.exports.murmur3=ei,Jt.exports.murmur2=ko;class Mo{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,o,u,g){this.ids.push(za(t)),this.positions.push(o,u,g)}getPositions(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const o=za(t);let u=0,g=this.ids.length-1;for(;u<g;){const e=u+g>>1;this.ids[e]>=o?g=e:u=e+1}const _=[];for(;this.ids[u]===o;)_.push({index:this.positions[3*u],start:this.positions[3*u+1],end:this.positions[3*u+2]}),u++;return _}static serialize(t,o){const u=new Float64Array(t.ids),g=new Uint32Array(t.positions);return Fs(u,g,0,u.length-1),o&&o.push(u.buffer,g.buffer),{ids:u,positions:g}}static deserialize(t){const o=new Mo;return o.ids=t.ids,o.positions=t.positions,o.indexed=!0,o}}function za(i){const t=+i;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:Jt.exports(String(i))}function Fs(i,t,o,u){for(;o<u;){const g=i[o+u>>1];let _=o-1,e=u+1;for(;;){do _++;while(i[_]<g);do e--;while(i[e]>g);if(_>=e)break;ja(i,_,e),ja(t,3*_,3*e),ja(t,3*_+1,3*e+1),ja(t,3*_+2,3*e+2)}e-o<u-e?(Fs(i,t,o,e),o=e+1):(Fs(i,t,e+1,u),u=e)}}function ja(i,t,o){const u=i[t];i[t]=i[o],i[o]=u}ut("FeaturePositionMap",Mo);class Ir{constructor(t,o){this.gl=t.gl,this.location=o}}class Os extends Ir{constructor(t,o){super(t,o),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class Ra extends Ir{constructor(t,o){super(t,o),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class Co extends Ir{constructor(t,o){super(t,o),this.current=G.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const Su=new Float32Array(16);function Eu(i){return[on(255*i.r,255*i.g),on(255*i.b,255*i.a)]}class Il{constructor(t,o,u){this.value=t,this.uniformNames=o.map(g=>`u_${g}`),this.type=u}setUniform(t,o,u){t.set(u.constantOr(this.value))}getBinding(t,o,u){return this.type==="color"?new Co(t,o):new Os(t,o)}}class Qi{constructor(t,o){this.uniformNames=o.map(u=>`u_${u}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,o){this.pixelRatioFrom=o.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=o.tlbr,this.patternTo=t.tlbr}setUniform(t,o,u,g){const _=g==="u_pattern_to"?this.patternTo:g==="u_pattern_from"?this.patternFrom:g==="u_pixel_ratio_to"?this.pixelRatioTo:g==="u_pixel_ratio_from"?this.pixelRatioFrom:null;_&&t.set(_)}getBinding(t,o,u){return u.substr(0,9)==="u_pattern"?new Ra(t,o):new Os(t,o)}}class Po{constructor(t,o,u,g){this.expression=t,this.type=u,this.maxValue=0,this.paintVertexAttributes=o.map(_=>({name:`a_${_}`,type:"Float32",components:u==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(t,o,u,g,_){const e=this.paintVertexArray.length,r=this.expression.evaluate(new Tn(0),o,{},g,[],_);this.paintVertexArray.resize(t),this._setPaintValue(e,t,r)}updatePaintArray(t,o,u,g){const _=this.expression.evaluate({zoom:0},u,g);this._setPaintValue(t,o,_)}_setPaintValue(t,o,u){if(this.type==="color"){const g=Eu(u);for(let _=t;_<o;_++)this.paintVertexArray.emplace(_,g[0],g[1])}else{for(let g=t;g<o;g++)this.paintVertexArray.emplace(g,u);this.maxValue=Math.max(this.maxValue,Math.abs(u))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class hi{constructor(t,o,u,g,_,e){this.expression=t,this.uniformNames=o.map(r=>`u_${r}_t`),this.type=u,this.useIntegerZoom=g,this.zoom=_,this.maxValue=0,this.paintVertexAttributes=o.map(r=>({name:`a_${r}`,type:"Float32",components:u==="color"?4:2,offset:0})),this.paintVertexArray=new e}populatePaintArray(t,o,u,g,_){const e=this.expression.evaluate(new Tn(this.zoom),o,{},g,[],_),r=this.expression.evaluate(new Tn(this.zoom+1),o,{},g,[],_),l=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(l,t,e,r)}updatePaintArray(t,o,u,g){const _=this.expression.evaluate({zoom:this.zoom},u,g),e=this.expression.evaluate({zoom:this.zoom+1},u,g);this._setPaintValue(t,o,_,e)}_setPaintValue(t,o,u,g){if(this.type==="color"){const _=Eu(u),e=Eu(g);for(let r=t;r<o;r++)this.paintVertexArray.emplace(r,_[0],_[1],e[0],e[1])}else{for(let _=t;_<o;_++)this.paintVertexArray.emplace(_,u,g);this.maxValue=Math.max(this.maxValue,Math.abs(u),Math.abs(g))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,o){const u=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,g=U(this.expression.interpolationFactor(u,this.zoom,this.zoom+1),0,1);t.set(g)}getBinding(t,o,u){return new Os(t,o)}}class eo{constructor(t,o,u,g,_,e){this.expression=t,this.type=o,this.useIntegerZoom=u,this.zoom=g,this.layerId=e,this.zoomInPaintVertexArray=new _,this.zoomOutPaintVertexArray=new _}populatePaintArray(t,o,u){const g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(g,t,o.patterns&&o.patterns[this.layerId],u)}updatePaintArray(t,o,u,g,_){this._setPaintValues(t,o,u.patterns&&u.patterns[this.layerId],_)}_setPaintValues(t,o,u,g){if(!g||!u)return;const{min:_,mid:e,max:r}=u,l=g[_],d=g[e],x=g[r];if(l&&d&&x)for(let S=t;S<o;S++)this.zoomInPaintVertexArray.emplace(S,d.tl[0],d.tl[1],d.br[0],d.br[1],l.tl[0],l.tl[1],l.br[0],l.br[1],d.pixelRatio,l.pixelRatio),this.zoomOutPaintVertexArray.emplace(S,d.tl[0],d.tl[1],d.br[0],d.br[1],x.tl[0],x.tl[1],x.br[0],x.br[1],d.pixelRatio,x.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,Ht.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,Ht.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Da{constructor(t,o,u){this.binders={},this._buffers=[];const g=[];for(const _ in t.paint._values){if(!u(_))continue;const e=t.paint.get(_);if(!(e instanceof Or&&Ps(e.property.specification)))continue;const r=dh(_,t.type),l=e.value,d=e.property.specification.type,x=e.property.useIntegerZoom,S=e.property.specification["property-type"],M=S==="cross-faded"||S==="cross-faded-data-driven";if(l.kind==="constant")this.binders[_]=M?new Qi(l.value,r):new Il(l.value,r,d),g.push(`/u_${_}`);else if(l.kind==="source"||M){const A=Tu(_,d,"source");this.binders[_]=M?new eo(l,d,x,o,A,t.id):new Po(l,r,d,A),g.push(`/a_${_}`)}else{const A=Tu(_,d,"composite");this.binders[_]=new hi(l,r,d,x,o,A),g.push(`/z_${_}`)}}this.cacheKey=g.sort().join("")}getMaxValue(t){const o=this.binders[t];return o instanceof Po||o instanceof hi?o.maxValue:0}populatePaintArrays(t,o,u,g,_){for(const e in this.binders){const r=this.binders[e];(r instanceof Po||r instanceof hi||r instanceof eo)&&r.populatePaintArray(t,o,u,g,_)}}setConstantPatternPositions(t,o){for(const u in this.binders){const g=this.binders[u];g instanceof Qi&&g.setConstantPatternPositions(t,o)}}updatePaintArrays(t,o,u,g,_){let e=!1;for(const r in t){const l=o.getPositions(r);for(const d of l){const x=u.feature(d.index);for(const S in this.binders){const M=this.binders[S];if((M instanceof Po||M instanceof hi||M instanceof eo)&&M.expression.isStateDependent===!0){const A=g.paint.get(S);M.expression=A.value,M.updatePaintArray(d.start,d.end,x,t[r],_),e=!0}}}}return e}defines(){const t=[];for(const o in this.binders){const u=this.binders[o];(u instanceof Il||u instanceof Qi)&&t.push(...u.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return t}getBinderAttributes(){const t=[];for(const o in this.binders){const u=this.binders[o];if(u instanceof Po||u instanceof hi)for(let g=0;g<u.paintVertexAttributes.length;g++)t.push(u.paintVertexAttributes[g].name);else if(u instanceof eo)for(let g=0;g<Ht.members.length;g++)t.push(Ht.members[g].name)}return t}getBinderUniforms(){const t=[];for(const o in this.binders){const u=this.binders[o];if(u instanceof Il||u instanceof Qi||u instanceof hi)for(const g of u.uniformNames)t.push(g)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,o){const u=[];for(const g in this.binders){const _=this.binders[g];if(_ instanceof Il||_ instanceof Qi||_ instanceof hi){for(const e of _.uniformNames)if(o[e]){const r=_.getBinding(t,o[e],e);u.push({name:e,property:g,binding:r})}}}return u}setUniforms(t,o,u,g){for(const{name:_,property:e,binding:r}of o)this.binders[e].setUniform(r,g,u.get(e),_)}updatePaintBuffers(t){this._buffers=[];for(const o in this.binders){const u=this.binders[o];if(t&&u instanceof eo){const g=t.fromScale===2?u.zoomInPaintVertexBuffer:u.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(u instanceof Po||u instanceof hi)&&u.paintVertexBuffer&&this._buffers.push(u.paintVertexBuffer)}}upload(t){for(const o in this.binders){const u=this.binders[o];(u instanceof Po||u instanceof hi||u instanceof eo)&&u.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const o=this.binders[t];(o instanceof Po||o instanceof hi||o instanceof eo)&&o.destroy()}}}class os{constructor(t,o,u=()=>!0){this.programConfigurations={};for(const g of t)this.programConfigurations[g.id]=new Da(g,o,u);this.needsUpload=!1,this._featureMap=new Mo,this._bufferOffset=0}populatePaintArrays(t,o,u,g,_,e){for(const r in this.programConfigurations)this.programConfigurations[r].populatePaintArrays(t,o,g,_,e);o.id!==void 0&&this._featureMap.add(o.id,u,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,o,u,g){for(const _ of u)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(t,this._featureMap,o,_,g)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const o in this.programConfigurations)this.programConfigurations[o].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function dh(i,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[i]||[i.replace(`${t}-`,"").replace(/-/g,"_")]}function Tu(i,t,o){const u={color:{source:s,composite:te},number:{source:X,composite:s}},g=function(_){return{"line-pattern":{source:rn,composite:rn},"fill-pattern":{source:rn,composite:rn},"fill-extrusion-pattern":{source:rn,composite:rn}}[_]}(i);return g&&g[o]||u[t][o]}ut("ConstantBinder",Il),ut("CrossFadedConstantBinder",Qi),ut("SourceExpressionBinder",Po),ut("CrossFadedCompositeBinder",eo),ut("CompositeExpressionBinder",hi),ut("ProgramConfiguration",Da,{omit:["_buffers"]}),ut("ProgramConfigurationSet",os);var Jn=8192;const $s=Math.pow(2,14)-1,Ei=-$s-1;function Ti(i){const t=Jn/i.extent,o=i.loadGeometry();for(let u=0;u<o.length;u++){const g=o[u];for(let _=0;_<g.length;_++){const e=g[_],r=Math.round(e.x*t),l=Math.round(e.y*t);e.x=U(r,Ei,$s),e.y=U(l,Ei,$s),(r<e.x||r>e.x+1||l<e.y||l>e.y+1)&&Me("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return o}function ss(i,t){return{type:i.type,id:i.id,properties:i.properties,geometry:t?Ti(i):[]}}function Cc(i,t,o,u,g){i.emplaceBack(2*t+(u+1)/2,2*o+(g+1)/2)}class to{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new wt,this.indexArray=new jn,this.segments=new cn,this.programConfigurations=new os(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,u){const g=this.layers[0],_=[];let e=null,r=!1;g.type==="circle"&&(e=g.layout.get("circle-sort-key"),r=!e.isConstant());for(const{feature:l,id:d,index:x,sourceLayerIndex:S}of t){const M=this.layers[0]._featureFilter.needGeometry,A=ss(l,M);if(!this.layers[0]._featureFilter.filter(new Tn(this.zoom),A,u))continue;const L=r?e.evaluate(A,{},u):void 0,O={id:d,properties:l.properties,type:l.type,sourceLayerIndex:S,index:x,geometry:M?A.geometry:Ti(l),patterns:{},sortKey:L};_.push(O)}r&&_.sort((l,d)=>l.sortKey-d.sortKey);for(const l of _){const{geometry:d,index:x,sourceLayerIndex:S}=l,M=t[x].feature;this.addFeature(l,d,x,u),o.featureIndex.insert(M,d,x,S,this.index)}}update(t,o,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Bs),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,o,u,g){for(const _ of o)for(const e of _){const r=e.x,l=e.y;if(r<0||r>=Jn||l<0||l>=Jn)continue;const d=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),x=d.vertexLength;Cc(this.layoutVertexArray,r,l,-1,-1),Cc(this.layoutVertexArray,r,l,1,-1),Cc(this.layoutVertexArray,r,l,1,1),Cc(this.layoutVertexArray,r,l,-1,1),this.indexArray.emplaceBack(x,x+1,x+2),this.indexArray.emplaceBack(x,x+3,x+2),d.vertexLength+=4,d.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,u,{},g)}}function as(i,t){for(let o=0;o<i.length;o++)if(Ao(t,i[o]))return!0;for(let o=0;o<t.length;o++)if(Ao(i,t[o]))return!0;return!!Io(i,t)}function ph(i,t,o){return!!Ao(i,t)||!!Mu(t,i,o)}function fh(i,t){if(i.length===1)return mh(t,i[0]);for(let o=0;o<t.length;o++){const u=t[o];for(let g=0;g<u.length;g++)if(Ao(i,u[g]))return!0}for(let o=0;o<i.length;o++)if(mh(t,i[o]))return!0;for(let o=0;o<t.length;o++)if(Io(i,t[o]))return!0;return!1}function ls(i,t,o){if(i.length>1){if(Io(i,t))return!0;for(let u=0;u<t.length;u++)if(Mu(t[u],i,o))return!0}for(let u=0;u<i.length;u++)if(Mu(i[u],t,o))return!0;return!1}function Io(i,t){if(i.length===0||t.length===0)return!1;for(let o=0;o<i.length-1;o++){const u=i[o],g=i[o+1];for(let _=0;_<t.length-1;_++)if(ku(u,g,t[_],t[_+1]))return!0}return!1}function ku(i,t,o,u){return tt(i,o,u)!==tt(t,o,u)&&tt(i,t,o)!==tt(i,t,u)}function Mu(i,t,o){const u=o*o;if(t.length===1)return i.distSqr(t[0])<u;for(let g=1;g<t.length;g++)if(Pc(i,t[g-1],t[g])<u)return!0;return!1}function Pc(i,t,o){const u=t.distSqr(o);if(u===0)return i.distSqr(t);const g=((i.x-t.x)*(o.x-t.x)+(i.y-t.y)*(o.y-t.y))/u;return i.distSqr(g<0?t:g>1?o:o.sub(t)._mult(g)._add(t))}function mh(i,t){let o,u,g,_=!1;for(let e=0;e<i.length;e++){o=i[e];for(let r=0,l=o.length-1;r<o.length;l=r++)u=o[r],g=o[l],u.y>t.y!=g.y>t.y&&t.x<(g.x-u.x)*(t.y-u.y)/(g.y-u.y)+u.x&&(_=!_)}return _}function Ao(i,t){let o=!1;for(let u=0,g=i.length-1;u<i.length;g=u++){const _=i[u],e=i[g];_.y>t.y!=e.y>t.y&&t.x<(e.x-_.x)*(t.y-_.y)/(e.y-_.y)+_.x&&(o=!o)}return o}function Lo(i,t,o){const u=o[0],g=o[2];if(i.x<u.x&&t.x<u.x||i.x>g.x&&t.x>g.x||i.y<u.y&&t.y<u.y||i.y>g.y&&t.y>g.y)return!1;const _=tt(i,t,o[0]);return _!==tt(i,t,o[1])||_!==tt(i,t,o[2])||_!==tt(i,t,o[3])}function cs(i,t,o){const u=t.paint.get(i).value;return u.kind==="constant"?u.value:o.programConfigurations.get(t.id).getMaxValue(i)}function Us(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function zo(i,t,o,u,g){if(!t[0]&&!t[1])return i;const _=Xe.convert(t)._mult(g);o==="viewport"&&_._rotate(-u);const e=[];for(let r=0;r<i.length;r++)e.push(i[r].sub(_));return e}ut("CircleBucket",to,{omit:["layers"]});const gh=new Xn({"circle-sort-key":new Et(Le.layout_circle["circle-sort-key"])});var Al={paint:new Xn({"circle-radius":new Et(Le.paint_circle["circle-radius"]),"circle-color":new Et(Le.paint_circle["circle-color"]),"circle-blur":new Et(Le.paint_circle["circle-blur"]),"circle-opacity":new Et(Le.paint_circle["circle-opacity"]),"circle-translate":new vt(Le.paint_circle["circle-translate"]),"circle-translate-anchor":new vt(Le.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new vt(Le.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new vt(Le.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Et(Le.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Et(Le.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Et(Le.paint_circle["circle-stroke-opacity"])}),layout:gh},Ur=1e-6,Ar=typeof Float32Array<"u"?Float32Array:Array;function Hn(){var i=new Ar(9);return Ar!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[5]=0,i[6]=0,i[7]=0),i[0]=1,i[4]=1,i[8]=1,i}function Ll(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function Cu(i,t,o){var u=t[0],g=t[1],_=t[2],e=t[3],r=t[4],l=t[5],d=t[6],x=t[7],S=t[8],M=t[9],A=t[10],L=t[11],O=t[12],q=t[13],Q=t[14],ie=t[15],re=o[0],fe=o[1],we=o[2],je=o[3];return i[0]=re*u+fe*r+we*S+je*O,i[1]=re*g+fe*l+we*M+je*q,i[2]=re*_+fe*d+we*A+je*Q,i[3]=re*e+fe*x+we*L+je*ie,i[4]=(re=o[4])*u+(fe=o[5])*r+(we=o[6])*S+(je=o[7])*O,i[5]=re*g+fe*l+we*M+je*q,i[6]=re*_+fe*d+we*A+je*Q,i[7]=re*e+fe*x+we*L+je*ie,i[8]=(re=o[8])*u+(fe=o[9])*r+(we=o[10])*S+(je=o[11])*O,i[9]=re*g+fe*l+we*M+je*q,i[10]=re*_+fe*d+we*A+je*Q,i[11]=re*e+fe*x+we*L+je*ie,i[12]=(re=o[12])*u+(fe=o[13])*r+(we=o[14])*S+(je=o[15])*O,i[13]=re*g+fe*l+we*M+je*q,i[14]=re*_+fe*d+we*A+je*Q,i[15]=re*e+fe*x+we*L+je*ie,i}Math.hypot||(Math.hypot=function(){for(var i=0,t=arguments.length;t--;)i+=arguments[t]*arguments[t];return Math.sqrt(i)});var Na,Pu=Cu;function Iu(){var i=new Ar(3);return Ar!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i}function Vs(i,t,o){var u=new Ar(3);return u[0]=i,u[1]=t,u[2]=o,u}function Bn(i,t,o){var u=t[0],g=t[1],_=t[2],e=t[3];return i[0]=o[0]*u+o[4]*g+o[8]*_+o[12]*e,i[1]=o[1]*u+o[5]*g+o[9]*_+o[13]*e,i[2]=o[2]*u+o[6]*g+o[10]*_+o[14]*e,i[3]=o[3]*u+o[7]*g+o[11]*_+o[15]*e,i}function ur(){var i=new Ar(4);return Ar!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i[3]=1,i}function vr(i,t){const o=Bn([],[i.x,i.y,0,1],t);return new Xe(o[0]/o[3],o[1]/o[3])}Iu(),Na=new Ar(4),Ar!=Float32Array&&(Na[0]=0,Na[1]=0,Na[2]=0,Na[3]=0),Iu(),Vs(1,0,0),Vs(0,1,0),ur(),ur(),Hn(),function(){var i;i=new Ar(2),Ar!=Float32Array&&(i[0]=0,i[1]=0)}();class Ic extends to{}ut("HeatmapBucket",Ic,{omit:["layers"]});var Ac={paint:new Xn({"heatmap-radius":new Et(Le.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Et(Le.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new vt(Le.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ns(Le.paint_heatmap["heatmap-color"]),"heatmap-opacity":new vt(Le.paint_heatmap["heatmap-opacity"])})};function Ba(i,{width:t,height:o},u,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==t*o*u)throw new RangeError(`mismatched image size. expected: ${g.length} but got: ${t*o*u}`)}else g=new Uint8Array(t*o*u);return i.width=t,i.height=o,i.data=g,i}function gd(i,{width:t,height:o},u){if(t===i.width&&o===i.height)return;const g=Ba({},{width:t,height:o},u);Lr(i,g,{x:0,y:0},{x:0,y:0},{width:Math.min(i.width,t),height:Math.min(i.height,o)},u),i.width=t,i.height=o,i.data=g.data}function Lr(i,t,o,u,g,_){if(g.width===0||g.height===0)return t;if(g.width>i.width||g.height>i.height||o.x>i.width-g.width||o.y>i.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>t.width||g.height>t.height||u.x>t.width-g.width||u.y>t.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const e=i.data,r=t.data;if(e===r)throw new Error("srcData equals dstData, so image is already copied");for(let l=0;l<g.height;l++){const d=((o.y+l)*i.width+o.x)*_,x=((u.y+l)*t.width+u.x)*_;for(let S=0;S<g.width*_;S++)r[x+S]=e[d+S]}return t}class Fa{constructor(t,o){Ba(this,t,1,o)}resize(t){gd(this,t,1)}clone(){return new Fa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,o,u,g,_){Lr(t,o,u,g,_,1)}}class ti{constructor(t,o){Ba(this,t,4,o)}resize(t){gd(this,t,4)}replace(t,o){o?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new ti({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,o,u,g,_){Lr(t,o,u,g,_,4)}}function Au(i){const t={},o=i.resolution||256,u=i.clips?i.clips.length:1,g=i.image||new ti({width:o,height:u});if(Math.log(o)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${o}`);const _=(e,r,l)=>{t[i.evaluationKey]=l;const d=i.expression.evaluate(t);g.data[e+r+0]=Math.floor(255*d.r/d.a),g.data[e+r+1]=Math.floor(255*d.g/d.a),g.data[e+r+2]=Math.floor(255*d.b/d.a),g.data[e+r+3]=Math.floor(255*d.a)};if(i.clips)for(let e=0,r=0;e<u;++e,r+=4*o)for(let l=0,d=0;l<o;l++,d+=4){const x=l/(o-1),{start:S,end:M}=i.clips[e];_(r,d,S*(1-x)+M*x)}else for(let e=0,r=0;e<o;e++,r+=4)_(0,r,e/(o-1));return g}ut("AlphaImage",Fa),ut("RGBAImage",ti);var jo={paint:new Xn({"hillshade-illumination-direction":new vt(Le.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new vt(Le.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new vt(Le.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new vt(Le.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new vt(Le.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new vt(Le.paint_hillshade["hillshade-accent-color"])})};const Di=tr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Lc}=Di;var zl={exports:{}};function jl(i,t,o){o=o||2;var u,g,_,e,r,l,d,x=t&&t.length,S=x?t[0]*o:i.length,M=yh(i,0,S,o,!0),A=[];if(!M||M.next===M.prev)return A;if(x&&(M=function(O,q,Q,ie){var re,fe,we,je=[];for(re=0,fe=q.length;re<fe;re++)(we=yh(O,q[re]*ie,re<fe-1?q[re+1]*ie:O.length,ie,!1))===we.next&&(we.steiner=!0),je.push(Lu(we));for(je.sort(wd),re=0;re<je.length;re++)Q=zc(je[re],Q);return Q}(i,t,M,o)),i.length>80*o){u=_=i[0],g=e=i[1];for(var L=o;L<S;L+=o)(r=i[L])<u&&(u=r),(l=i[L+1])<g&&(g=l),r>_&&(_=r),l>e&&(e=l);d=(d=Math.max(_-u,e-g))!==0?32767/d:0}return Rl(M,A,o,u,g,d,0),A}function yh(i,t,o,u,g){var _,e;if(g===bh(i,t,o,u)>0)for(_=t;_<o;_+=u)e=wh(_,i[_],i[_+1],e);else for(_=o-u;_>=t;_-=u)e=wh(_,i[_],i[_+1],e);return e&&jc(e,e.next)&&(Dc(e),e=e.next),e}function Hs(i,t){if(!i)return i;t||(t=i);var o,u=i;do if(o=!1,u.steiner||!jc(u,u.next)&&Gn(u.prev,u,u.next)!==0)u=u.next;else{if(Dc(u),(u=t=u.prev)===u.next)break;o=!0}while(o||u!==t);return t}function Rl(i,t,o,u,g,_,e){if(i){!e&&_&&function(x,S,M,A){var L=x;do L.z===0&&(L.z=Dl(L.x,L.y,S,M,A)),L.prevZ=L.prev,L.nextZ=L.next,L=L.next;while(L!==x);L.prevZ.nextZ=null,L.prevZ=null,function(O){var q,Q,ie,re,fe,we,je,ue,ne=1;do{for(Q=O,O=null,fe=null,we=0;Q;){for(we++,ie=Q,je=0,q=0;q<ne&&(je++,ie=ie.nextZ);q++);for(ue=ne;je>0||ue>0&&ie;)je!==0&&(ue===0||!ie||Q.z<=ie.z)?(re=Q,Q=Q.nextZ,je--):(re=ie,ie=ie.nextZ,ue--),fe?fe.nextZ=re:O=re,re.prevZ=fe,fe=re;Q=ie}fe.nextZ=null,ne*=2}while(we>1)}(L)}(i,u,g,_);for(var r,l,d=i;i.prev!==i.next;)if(r=i.prev,l=i.next,_?vd(i,u,g,_):yd(i))t.push(r.i/o|0),t.push(i.i/o|0),t.push(l.i/o|0),Dc(i),i=l.next,d=l.next;else if((i=l)===d){e?e===1?Rl(i=xd(Hs(i),t,o),t,o,u,g,_,2):e===2&&_d(i,t,o,u,g,_):Rl(Hs(i),t,o,u,g,_,1);break}}}function yd(i){var t=i.prev,o=i,u=i.next;if(Gn(t,o,u)>=0)return!1;for(var g=t.x,_=o.x,e=u.x,r=t.y,l=o.y,d=u.y,x=g<_?g<e?g:e:_<e?_:e,S=r<l?r<d?r:d:l<d?l:d,M=g>_?g>e?g:e:_>e?_:e,A=r>l?r>d?r:d:l>d?l:d,L=u.next;L!==t;){if(L.x>=x&&L.x<=M&&L.y>=S&&L.y<=A&&Oa(g,r,_,l,e,d,L.x,L.y)&&Gn(L.prev,L,L.next)>=0)return!1;L=L.next}return!0}function vd(i,t,o,u){var g=i.prev,_=i,e=i.next;if(Gn(g,_,e)>=0)return!1;for(var r=g.x,l=_.x,d=e.x,x=g.y,S=_.y,M=e.y,A=r<l?r<d?r:d:l<d?l:d,L=x<S?x<M?x:M:S<M?S:M,O=r>l?r>d?r:d:l>d?l:d,q=x>S?x>M?x:M:S>M?S:M,Q=Dl(A,L,t,o,u),ie=Dl(O,q,t,o,u),re=i.prevZ,fe=i.nextZ;re&&re.z>=Q&&fe&&fe.z<=ie;){if(re.x>=A&&re.x<=O&&re.y>=L&&re.y<=q&&re!==g&&re!==e&&Oa(r,x,l,S,d,M,re.x,re.y)&&Gn(re.prev,re,re.next)>=0||(re=re.prevZ,fe.x>=A&&fe.x<=O&&fe.y>=L&&fe.y<=q&&fe!==g&&fe!==e&&Oa(r,x,l,S,d,M,fe.x,fe.y)&&Gn(fe.prev,fe,fe.next)>=0))return!1;fe=fe.nextZ}for(;re&&re.z>=Q;){if(re.x>=A&&re.x<=O&&re.y>=L&&re.y<=q&&re!==g&&re!==e&&Oa(r,x,l,S,d,M,re.x,re.y)&&Gn(re.prev,re,re.next)>=0)return!1;re=re.prevZ}for(;fe&&fe.z<=ie;){if(fe.x>=A&&fe.x<=O&&fe.y>=L&&fe.y<=q&&fe!==g&&fe!==e&&Oa(r,x,l,S,d,M,fe.x,fe.y)&&Gn(fe.prev,fe,fe.next)>=0)return!1;fe=fe.nextZ}return!0}function xd(i,t,o){var u=i;do{var g=u.prev,_=u.next.next;!jc(g,_)&&xh(g,u,u.next,_)&&Bl(g,_)&&Bl(_,g)&&(t.push(g.i/o|0),t.push(u.i/o|0),t.push(_.i/o|0),Dc(u),Dc(u.next),u=i=_),u=u.next}while(u!==i);return Hs(u)}function _d(i,t,o,u,g,_){var e=i;do{for(var r=e.next.next;r!==e.prev;){if(e.i!==r.i&&vh(e,r)){var l=_h(e,r);return e=Hs(e,e.next),l=Hs(l,l.next),Rl(e,t,o,u,g,_,0),void Rl(l,t,o,u,g,_,0)}r=r.next}e=e.next}while(e!==i)}function wd(i,t){return i.x-t.x}function zc(i,t){var o=function(g,_){var e,r=_,l=g.x,d=g.y,x=-1/0;do{if(d<=r.y&&d>=r.next.y&&r.next.y!==r.y){var S=r.x+(d-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(S<=l&&S>x&&(x=S,e=r.x<r.next.x?r:r.next,S===l))return e}r=r.next}while(r!==_);if(!e)return null;var M,A=e,L=e.x,O=e.y,q=1/0;r=e;do l>=r.x&&r.x>=L&&l!==r.x&&Oa(d<O?l:x,d,L,O,d<O?x:l,d,r.x,r.y)&&(M=Math.abs(d-r.y)/(l-r.x),Bl(r,g)&&(M<q||M===q&&(r.x>e.x||r.x===e.x&&bd(e,r)))&&(e=r,q=M)),r=r.next;while(r!==A);return e}(i,t);if(!o)return t;var u=_h(o,i);return Hs(u,u.next),Hs(o,o.next)}function bd(i,t){return Gn(i.prev,i,t.prev)<0&&Gn(t.next,i,i.next)<0}function Dl(i,t,o,u,g){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-o)*g|0)|i<<8))|i<<4))|i<<2))|i<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-u)*g|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Lu(i){var t=i,o=i;do(t.x<o.x||t.x===o.x&&t.y<o.y)&&(o=t),t=t.next;while(t!==i);return o}function Oa(i,t,o,u,g,_,e,r){return(g-e)*(t-r)>=(i-e)*(_-r)&&(i-e)*(u-r)>=(o-e)*(t-r)&&(o-e)*(_-r)>=(g-e)*(u-r)}function vh(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!function(o,u){var g=o;do{if(g.i!==o.i&&g.next.i!==o.i&&g.i!==u.i&&g.next.i!==u.i&&xh(g,g.next,o,u))return!0;g=g.next}while(g!==o);return!1}(i,t)&&(Bl(i,t)&&Bl(t,i)&&function(o,u){var g=o,_=!1,e=(o.x+u.x)/2,r=(o.y+u.y)/2;do g.y>r!=g.next.y>r&&g.next.y!==g.y&&e<(g.next.x-g.x)*(r-g.y)/(g.next.y-g.y)+g.x&&(_=!_),g=g.next;while(g!==o);return _}(i,t)&&(Gn(i.prev,i,t.prev)||Gn(i,t.prev,t))||jc(i,t)&&Gn(i.prev,i,i.next)>0&&Gn(t.prev,t,t.next)>0)}function Gn(i,t,o){return(t.y-i.y)*(o.x-t.x)-(t.x-i.x)*(o.y-t.y)}function jc(i,t){return i.x===t.x&&i.y===t.y}function xh(i,t,o,u){var g=Nl(Gn(i,t,o)),_=Nl(Gn(i,t,u)),e=Nl(Gn(o,u,i)),r=Nl(Gn(o,u,t));return g!==_&&e!==r||!(g!==0||!Rc(i,o,t))||!(_!==0||!Rc(i,u,t))||!(e!==0||!Rc(o,i,u))||!(r!==0||!Rc(o,t,u))}function Rc(i,t,o){return t.x<=Math.max(i.x,o.x)&&t.x>=Math.min(i.x,o.x)&&t.y<=Math.max(i.y,o.y)&&t.y>=Math.min(i.y,o.y)}function Nl(i){return i>0?1:i<0?-1:0}function Bl(i,t){return Gn(i.prev,i,i.next)<0?Gn(i,t,i.next)>=0&&Gn(i,i.prev,t)>=0:Gn(i,t,i.prev)<0||Gn(i,i.next,t)<0}function _h(i,t){var o=new zu(i.i,i.x,i.y),u=new zu(t.i,t.x,t.y),g=i.next,_=t.prev;return i.next=t,t.prev=i,o.next=g,g.prev=o,u.next=o,o.prev=u,_.next=u,u.prev=_,u}function wh(i,t,o,u){var g=new zu(i,t,o);return u?(g.next=u.next,g.prev=u,u.next.prev=g,u.next=g):(g.prev=g,g.next=g),g}function Dc(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function zu(i,t,o){this.i=i,this.x=t,this.y=o,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function bh(i,t,o,u){for(var g=0,_=t,e=o-u;_<o;_+=u)g+=(i[e]-i[_])*(i[_+1]+i[e+1]),e=_;return g}function Ip(i,t,o,u,g){Sh(i,t,o,u||i.length-1,g||Sd)}function Sh(i,t,o,u,g){for(;u>o;){if(u-o>600){var _=u-o+1,e=t-o+1,r=Math.log(_),l=.5*Math.exp(2*r/3),d=.5*Math.sqrt(r*l*(_-l)/_)*(e-_/2<0?-1:1);Sh(i,t,Math.max(o,Math.floor(t-e*l/_+d)),Math.min(u,Math.floor(t+(_-e)*l/_+d)),g)}var x=i[t],S=o,M=u;for(Fl(i,o,t),g(i[u],x)>0&&Fl(i,o,u);S<M;){for(Fl(i,S,M),S++,M--;g(i[S],x)<0;)S++;for(;g(i[M],x)>0;)M--}g(i[o],x)===0?Fl(i,o,M):Fl(i,++M,u),M<=t&&(o=M+1),t<=M&&(u=M-1)}}function Fl(i,t,o){var u=i[t];i[t]=i[o],i[o]=u}function Sd(i,t){return i<t?-1:i>t?1:0}function Ol(i,t){const o=i.length;if(o<=1)return[i];const u=[];let g,_;for(let e=0;e<o;e++){const r=it(i[e]);r!==0&&(i[e].area=Math.abs(r),_===void 0&&(_=r<0),_===r<0?(g&&u.push(g),g=[i[e]]):g.push(i[e]))}if(g&&u.push(g),t>1)for(let e=0;e<u.length;e++)u[e].length<=t||(Ip(u[e],t,1,u[e].length-1,Ap),u[e]=u[e].slice(0,t));return u}function Ap(i,t){return t.area-i.area}function Eh(i,t,o){const u=o.patternDependencies;let g=!1;for(const _ of t){const e=_.paint.get(`${i}-pattern`);e.isConstant()||(g=!0);const r=e.constantOr(null);r&&(g=!0,u[r.to]=!0,u[r.from]=!0)}return g}function Th(i,t,o,u,g){const _=g.patternDependencies;for(const e of t){const r=e.paint.get(`${i}-pattern`).value;if(r.kind!=="constant"){let l=r.evaluate({zoom:u-1},o,{},g.availableImages),d=r.evaluate({zoom:u},o,{},g.availableImages),x=r.evaluate({zoom:u+1},o,{},g.availableImages);l=l&&l.name?l.name:l,d=d&&d.name?d.name:d,x=x&&x.name?x.name:x,_[l]=!0,_[d]=!0,_[x]=!0,o.patterns[e.id]={min:l,mid:d,max:x}}}return o}zl.exports=jl,zl.exports.default=jl,jl.deviation=function(i,t,o,u){var g=t&&t.length,_=Math.abs(bh(i,0,g?t[0]*o:i.length,o));if(g)for(var e=0,r=t.length;e<r;e++)_-=Math.abs(bh(i,t[e]*o,e<r-1?t[e+1]*o:i.length,o));var l=0;for(e=0;e<u.length;e+=3){var d=u[e]*o,x=u[e+1]*o,S=u[e+2]*o;l+=Math.abs((i[d]-i[S])*(i[x+1]-i[d+1])-(i[d]-i[x])*(i[S+1]-i[d+1]))}return _===0&&l===0?0:Math.abs((l-_)/_)},jl.flatten=function(i){for(var t=i[0][0].length,o={vertices:[],holes:[],dimensions:t},u=0,g=0;g<i.length;g++){for(var _=0;_<i[g].length;_++)for(var e=0;e<t;e++)o.vertices.push(i[g][_][e]);g>0&&o.holes.push(u+=i[g-1].length)}return o};class ki{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new xn,this.indexArray=new jn,this.indexArray2=new yr,this.programConfigurations=new os(t.layers,t.zoom),this.segments=new cn,this.segments2=new cn,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,u){this.hasPattern=Eh("fill",this.layers,o);const g=this.layers[0].layout.get("fill-sort-key"),_=!g.isConstant(),e=[];for(const{feature:r,id:l,index:d,sourceLayerIndex:x}of t){const S=this.layers[0]._featureFilter.needGeometry,M=ss(r,S);if(!this.layers[0]._featureFilter.filter(new Tn(this.zoom),M,u))continue;const A=_?g.evaluate(M,{},u,o.availableImages):void 0,L={id:l,properties:r.properties,type:r.type,sourceLayerIndex:x,index:d,geometry:S?M.geometry:Ti(r),patterns:{},sortKey:A};e.push(L)}_&&e.sort((r,l)=>r.sortKey-l.sortKey);for(const r of e){const{geometry:l,index:d,sourceLayerIndex:x}=r;if(this.hasPattern){const S=Th("fill",this.layers,r,this.zoom,o);this.patternFeatures.push(S)}else this.addFeature(r,l,d,u,{});o.featureIndex.insert(t[d].feature,l,d,x,this.index)}}update(t,o,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,u)}addFeatures(t,o,u){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,o,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Lc),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,o,u,g,_){for(const e of Ol(o,500)){let r=0;for(const A of e)r+=A.length;const l=this.segments.prepareSegment(r,this.layoutVertexArray,this.indexArray),d=l.vertexLength,x=[],S=[];for(const A of e){if(A.length===0)continue;A!==e[0]&&S.push(x.length/2);const L=this.segments2.prepareSegment(A.length,this.layoutVertexArray,this.indexArray2),O=L.vertexLength;this.layoutVertexArray.emplaceBack(A[0].x,A[0].y),this.indexArray2.emplaceBack(O+A.length-1,O),x.push(A[0].x),x.push(A[0].y);for(let q=1;q<A.length;q++)this.layoutVertexArray.emplaceBack(A[q].x,A[q].y),this.indexArray2.emplaceBack(O+q-1,O+q),x.push(A[q].x),x.push(A[q].y);L.vertexLength+=A.length,L.primitiveLength+=A.length}const M=zl.exports(x,S);for(let A=0;A<M.length;A+=3)this.indexArray.emplaceBack(d+M[A],d+M[A+1],d+M[A+2]);l.vertexLength+=r,l.primitiveLength+=M.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,u,_,g)}}ut("FillBucket",ki,{omit:["layers","patternFeatures"]});const kh=new Xn({"fill-sort-key":new Et(Le.layout_fill["fill-sort-key"])});var ju={paint:new Xn({"fill-antialias":new vt(Le.paint_fill["fill-antialias"]),"fill-opacity":new Et(Le.paint_fill["fill-opacity"]),"fill-color":new Et(Le.paint_fill["fill-color"]),"fill-outline-color":new Et(Le.paint_fill["fill-outline-color"]),"fill-translate":new vt(Le.paint_fill["fill-translate"]),"fill-translate-anchor":new vt(Le.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ds(Le.paint_fill["fill-pattern"])}),layout:kh};const Ed=tr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Td=tr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:kd}=Ed;var Ro={},$l=Xe,Ru=Gs;function Gs(i,t,o,u,g){this.properties={},this.extent=o,this.type=0,this._pbf=i,this._geometry=-1,this._keys=u,this._values=g,i.readFields(Lp,this,t)}function Lp(i,t,o){i==1?t.id=o.readVarint():i==2?function(u,g){for(var _=u.readVarint()+u.pos;u.pos<_;){var e=g._keys[u.readVarint()],r=g._values[u.readVarint()];g.properties[e]=r}}(o,t):i==3?t.type=o.readVarint():i==4&&(t._geometry=o.pos)}function Md(i){for(var t,o,u=0,g=0,_=i.length,e=_-1;g<_;e=g++)u+=((o=i[e]).x-(t=i[g]).x)*(t.y+o.y);return u}Gs.types=["Unknown","Point","LineString","Polygon"],Gs.prototype.loadGeometry=function(){var i=this._pbf;i.pos=this._geometry;for(var t,o=i.readVarint()+i.pos,u=1,g=0,_=0,e=0,r=[];i.pos<o;){if(g<=0){var l=i.readVarint();u=7&l,g=l>>3}if(g--,u===1||u===2)_+=i.readSVarint(),e+=i.readSVarint(),u===1&&(t&&r.push(t),t=[]),t.push(new $l(_,e));else{if(u!==7)throw new Error("unknown command "+u);t&&t.push(t[0].clone())}}return t&&r.push(t),r},Gs.prototype.bbox=function(){var i=this._pbf;i.pos=this._geometry;for(var t=i.readVarint()+i.pos,o=1,u=0,g=0,_=0,e=1/0,r=-1/0,l=1/0,d=-1/0;i.pos<t;){if(u<=0){var x=i.readVarint();o=7&x,u=x>>3}if(u--,o===1||o===2)(g+=i.readSVarint())<e&&(e=g),g>r&&(r=g),(_+=i.readSVarint())<l&&(l=_),_>d&&(d=_);else if(o!==7)throw new Error("unknown command "+o)}return[e,l,r,d]},Gs.prototype.toGeoJSON=function(i,t,o){var u,g,_=this.extent*Math.pow(2,o),e=this.extent*i,r=this.extent*t,l=this.loadGeometry(),d=Gs.types[this.type];function x(A){for(var L=0;L<A.length;L++){var O=A[L];A[L]=[360*(O.x+e)/_-180,360/Math.PI*Math.atan(Math.exp((180-360*(O.y+r)/_)*Math.PI/180))-90]}}switch(this.type){case 1:var S=[];for(u=0;u<l.length;u++)S[u]=l[u][0];x(l=S);break;case 2:for(u=0;u<l.length;u++)x(l[u]);break;case 3:for(l=function(A){var L=A.length;if(L<=1)return[A];for(var O,q,Q=[],ie=0;ie<L;ie++){var re=Md(A[ie]);re!==0&&(q===void 0&&(q=re<0),q===re<0?(O&&Q.push(O),O=[A[ie]]):O.push(A[ie]))}return O&&Q.push(O),Q}(l),u=0;u<l.length;u++)for(g=0;g<l[u].length;g++)x(l[u][g])}l.length===1?l=l[0]:d="Multi"+d;var M={type:"Feature",geometry:{type:d,coordinates:l},properties:this.properties};return"id"in this&&(M.id=this.id),M};var Cd=Ru,Mh=Ch;function Ch(i,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(Pd,this,t),this.length=this._features.length}function Pd(i,t,o){i===15?t.version=o.readVarint():i===1?t.name=o.readString():i===5?t.extent=o.readVarint():i===2?t._features.push(o.pos):i===3?t._keys.push(o.readString()):i===4&&t._values.push(function(u){for(var g=null,_=u.readVarint()+u.pos;u.pos<_;){var e=u.readVarint()>>3;g=e===1?u.readString():e===2?u.readFloat():e===3?u.readDouble():e===4?u.readVarint64():e===5?u.readVarint():e===6?u.readSVarint():e===7?u.readBoolean():null}return g}(o))}Ch.prototype.feature=function(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];var t=this._pbf.readVarint()+this._pbf.pos;return new Cd(this._pbf,t,this.extent,this._keys,this._values)};var zp=Mh;function di(i,t,o){if(i===3){var u=new zp(o,o.readVarint()+o.pos);u.length&&(t[u.name]=u)}}Ro.VectorTile=function(i,t){this.layers=i.readFields(di,{},t)},Ro.VectorTileFeature=Ru,Ro.VectorTileLayer=Mh;const ni=Ro.VectorTileFeature.types,Du=Math.pow(2,13);function Ul(i,t,o,u,g,_,e,r){i.emplaceBack(t,o,2*Math.floor(u*Du)+e,g*Du*2,_*Du*2,Math.round(r))}class Nu{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new nn,this.centroidVertexArray=new Gt,this.indexArray=new jn,this.programConfigurations=new os(t.layers,t.zoom),this.segments=new cn,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,u){this.features=[],this.hasPattern=Eh("fill-extrusion",this.layers,o);for(const{feature:g,id:_,index:e,sourceLayerIndex:r}of t){const l=this.layers[0]._featureFilter.needGeometry,d=ss(g,l);if(!this.layers[0]._featureFilter.filter(new Tn(this.zoom),d,u))continue;const x={id:_,sourceLayerIndex:r,index:e,geometry:l?d.geometry:Ti(g),properties:g.properties,type:g.type,patterns:{}};this.hasPattern?this.features.push(Th("fill-extrusion",this.layers,x,this.zoom,o)):this.addFeature(x,x.geometry,e,u,{}),o.featureIndex.insert(g,x.geometry,e,r,this.index,!0)}}addFeatures(t,o,u){for(const g of this.features){const{geometry:_}=g;this.addFeature(g,_,g.index,o,u)}}update(t,o,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,u)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,kd),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,Td.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(t,o,u,g,_){const e={x:0,y:0,vertexCount:0};for(const r of Ol(o,500)){let l=0;for(const L of r)l+=L.length;let d=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const L of r){if(L.length===0||Ad(L))continue;let O=0;for(let q=0;q<L.length;q++){const Q=L[q];if(q>=1){const ie=L[q-1];if(!Id(Q,ie)){d.vertexLength+4>cn.MAX_VERTEX_ARRAY_LENGTH&&(d=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const re=Q.sub(ie)._perp()._unit(),fe=ie.dist(Q);O+fe>32768&&(O=0),Ul(this.layoutVertexArray,Q.x,Q.y,re.x,re.y,0,0,O),Ul(this.layoutVertexArray,Q.x,Q.y,re.x,re.y,0,1,O),e.x+=2*Q.x,e.y+=2*Q.y,e.vertexCount+=2,O+=fe,Ul(this.layoutVertexArray,ie.x,ie.y,re.x,re.y,0,0,O),Ul(this.layoutVertexArray,ie.x,ie.y,re.x,re.y,0,1,O),e.x+=2*ie.x,e.y+=2*ie.y,e.vertexCount+=2;const we=d.vertexLength;this.indexArray.emplaceBack(we,we+2,we+1),this.indexArray.emplaceBack(we+1,we+2,we+3),d.vertexLength+=4,d.primitiveLength+=2}}}}if(d.vertexLength+l>cn.MAX_VERTEX_ARRAY_LENGTH&&(d=this.segments.prepareSegment(l,this.layoutVertexArray,this.indexArray)),ni[t.type]!=="Polygon")continue;const x=[],S=[],M=d.vertexLength;for(const L of r)if(L.length!==0){L!==r[0]&&S.push(x.length/2);for(let O=0;O<L.length;O++){const q=L[O];Ul(this.layoutVertexArray,q.x,q.y,0,0,1,1,0),e.x+=q.x,e.y+=q.y,e.vertexCount+=1,x.push(q.x),x.push(q.y)}}const A=zl.exports(x,S);for(let L=0;L<A.length;L+=3)this.indexArray.emplaceBack(M+A[L],M+A[L+2],M+A[L+1]);d.primitiveLength+=A.length/3,d.vertexLength+=l}for(let r=0;r<e.vertexCount;r++)this.centroidVertexArray.emplaceBack(Math.floor(e.x/e.vertexCount),Math.floor(e.y/e.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,u,_,g)}}function Id(i,t){return i.x===t.x&&(i.x<0||i.x>Jn)||i.y===t.y&&(i.y<0||i.y>Jn)}function Ad(i){return i.every(t=>t.x<0)||i.every(t=>t.x>Jn)||i.every(t=>t.y<0)||i.every(t=>t.y>Jn)}ut("FillExtrusionBucket",Nu,{omit:["layers","features"]});var Ph={paint:new Xn({"fill-extrusion-opacity":new vt(Le["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Et(Le["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new vt(Le["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new vt(Le["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ds(Le["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Et(Le["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Et(Le["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new vt(Le["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Vl(i,t){return i.x*t.x+i.y*t.y}function Bu(i,t){if(i.length===1){let o=0;const u=t[o++];let g;for(;!g||u.equals(g);)if(g=t[o++],!g)return 1/0;for(;o<t.length;o++){const _=t[o],e=i[0],r=g.sub(u),l=_.sub(u),d=e.sub(u),x=Vl(r,r),S=Vl(r,l),M=Vl(l,l),A=Vl(d,r),L=Vl(d,l),O=x*M-S*S,q=(M*A-S*L)/O,Q=(x*L-S*A)/O,ie=u.z*(1-q-Q)+g.z*q+_.z*Q;if(isFinite(ie))return ie}return 1/0}{let o=1/0;for(const u of t)o=Math.min(o,u.z);return o}}const Ld=tr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:zd}=Ld,Ih=tr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Ah}=Ih,jd=Ro.VectorTileFeature.types,Lh=Math.cos(Math.PI/180*37.5),Nc=Math.pow(2,14)/.5;class zh{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(o=>{this.gradients[o.id]={}}),this.layoutVertexArray=new Qt,this.layoutVertexArray2=new en,this.indexArray=new jn,this.programConfigurations=new os(t.layers,t.zoom),this.segments=new cn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,u){this.hasPattern=Eh("line",this.layers,o);const g=this.layers[0].layout.get("line-sort-key"),_=!g.isConstant(),e=[];for(const{feature:r,id:l,index:d,sourceLayerIndex:x}of t){const S=this.layers[0]._featureFilter.needGeometry,M=ss(r,S);if(!this.layers[0]._featureFilter.filter(new Tn(this.zoom),M,u))continue;const A=_?g.evaluate(M,{},u):void 0,L={id:l,properties:r.properties,type:r.type,sourceLayerIndex:x,index:d,geometry:S?M.geometry:Ti(r),patterns:{},sortKey:A};e.push(L)}_&&e.sort((r,l)=>r.sortKey-l.sortKey);for(const r of e){const{geometry:l,index:d,sourceLayerIndex:x}=r;if(this.hasPattern){const S=Th("line",this.layers,r,this.zoom,o);this.patternFeatures.push(S)}else this.addFeature(r,l,d,u,{});o.featureIndex.insert(t[d].feature,l,d,x,this.index)}}update(t,o,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,u)}addFeatures(t,o,u){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,o,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,Ah)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,zd),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,o,u,g,_){const e=this.layers[0].layout,r=e.get("line-join").evaluate(t,{}),l=e.get("line-cap"),d=e.get("line-miter-limit"),x=e.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const S of o)this.addLine(S,t,r,l,d,x);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,u,_,g)}addLine(t,o,u,g,_,e){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Q=0;Q<t.length-1;Q++)this.totalDistance+=t[Q].dist(t[Q+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const r=jd[o.type]==="Polygon";let l=t.length;for(;l>=2&&t[l-1].equals(t[l-2]);)l--;let d=0;for(;d<l-1&&t[d].equals(t[d+1]);)d++;if(l<(r?3:2))return;u==="bevel"&&(_=1.05);const x=this.overscaling<=16?122880/(512*this.overscaling):0,S=this.segments.prepareSegment(10*l,this.layoutVertexArray,this.indexArray);let M,A,L,O,q;this.e1=this.e2=-1,r&&(M=t[l-2],q=t[d].sub(M)._unit()._perp());for(let Q=d;Q<l;Q++){if(L=Q===l-1?r?t[d+1]:void 0:t[Q+1],L&&t[Q].equals(L))continue;q&&(O=q),M&&(A=M),M=t[Q],q=L?L.sub(M)._unit()._perp():O,O=O||q;let ie=O.add(q);ie.x===0&&ie.y===0||ie._unit();const re=O.x*q.x+O.y*q.y,fe=ie.x*q.x+ie.y*q.y,we=fe!==0?1/fe:1/0,je=2*Math.sqrt(2-2*fe),ue=fe<Lh&&A&&L,ne=O.x*q.y-O.y*q.x>0;if(ue&&Q>d){const Ie=M.dist(A);if(Ie>2*x){const Be=M.sub(M.sub(A)._mult(x/Ie)._round());this.updateDistance(A,Be),this.addCurrentVertex(Be,O,0,0,S),A=Be}}const ce=A&&L;let be=ce?u:r?"butt":g;if(ce&&be==="round"&&(we<e?be="miter":we<=2&&(be="fakeround")),be==="miter"&&we>_&&(be="bevel"),be==="bevel"&&(we>2&&(be="flipbevel"),we<_&&(be="miter")),A&&this.updateDistance(A,M),be==="miter")ie._mult(we),this.addCurrentVertex(M,ie,0,0,S);else if(be==="flipbevel"){if(we>100)ie=q.mult(-1);else{const Ie=we*O.add(q).mag()/O.sub(q).mag();ie._perp()._mult(Ie*(ne?-1:1))}this.addCurrentVertex(M,ie,0,0,S),this.addCurrentVertex(M,ie.mult(-1),0,0,S)}else if(be==="bevel"||be==="fakeround"){const Ie=-Math.sqrt(we*we-1),Be=ne?Ie:0,De=ne?0:Ie;if(A&&this.addCurrentVertex(M,O,Be,De,S),be==="fakeround"){const Ce=Math.round(180*je/Math.PI/20);for(let ht=1;ht<Ce;ht++){let Ke=ht/Ce;if(Ke!==.5){const Pn=Ke-.5;Ke+=Ke*Pn*(Ke-1)*((1.0904+re*(re*(3.55645-1.43519*re)-3.2452))*Pn*Pn+(.848013+re*(.215638*re-1.06021)))}const Nt=q.sub(O)._mult(Ke)._add(O)._unit()._mult(ne?-1:1);this.addHalfVertex(M,Nt.x,Nt.y,!1,ne,0,S)}}L&&this.addCurrentVertex(M,q,-Be,-De,S)}else if(be==="butt")this.addCurrentVertex(M,ie,0,0,S);else if(be==="square"){const Ie=A?1:-1;this.addCurrentVertex(M,ie,Ie,Ie,S)}else be==="round"&&(A&&(this.addCurrentVertex(M,O,0,0,S),this.addCurrentVertex(M,O,1,1,S,!0)),L&&(this.addCurrentVertex(M,q,-1,-1,S,!0),this.addCurrentVertex(M,q,0,0,S)));if(ue&&Q<l-1){const Ie=M.dist(L);if(Ie>2*x){const Be=M.add(L.sub(M)._mult(x/Ie)._round());this.updateDistance(M,Be),this.addCurrentVertex(Be,q,0,0,S),M=Be}}}}addCurrentVertex(t,o,u,g,_,e=!1){const r=o.y*g-o.x,l=-o.y-o.x*g;this.addHalfVertex(t,o.x+o.y*u,o.y-o.x*u,e,!1,u,_),this.addHalfVertex(t,r,l,e,!0,-g,_),this.distance>Nc/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(t,o,u,g,_,e))}addHalfVertex({x:t,y:o},u,g,_,e,r,l){const d=.5*(this.lineClips?this.scaledDistance*(Nc-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(_?1:0),(o<<1)+(e?1:0),Math.round(63*u)+128,Math.round(63*g)+128,1+(r===0?0:r<0?-1:1)|(63&d)<<2,d>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const x=l.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,x),l.primitiveLength++),e?this.e2=x:this.e1=x}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,o){this.distance+=t.dist(o),this.updateScaledDistance()}}ut("LineBucket",zh,{omit:["layers","patternFeatures"]});const Rd=new Xn({"line-cap":new vt(Le.layout_line["line-cap"]),"line-join":new Et(Le.layout_line["line-join"]),"line-miter-limit":new vt(Le.layout_line["line-miter-limit"]),"line-round-limit":new vt(Le.layout_line["line-round-limit"]),"line-sort-key":new Et(Le.layout_line["line-sort-key"])});var Fu={paint:new Xn({"line-opacity":new Et(Le.paint_line["line-opacity"]),"line-color":new Et(Le.paint_line["line-color"]),"line-translate":new vt(Le.paint_line["line-translate"]),"line-translate-anchor":new vt(Le.paint_line["line-translate-anchor"]),"line-width":new Et(Le.paint_line["line-width"]),"line-gap-width":new Et(Le.paint_line["line-gap-width"]),"line-offset":new Et(Le.paint_line["line-offset"]),"line-blur":new Et(Le.paint_line["line-blur"]),"line-dasharray":new So(Le.paint_line["line-dasharray"]),"line-pattern":new Ds(Le.paint_line["line-pattern"]),"line-gradient":new Ns(Le.paint_line["line-gradient"])}),layout:Rd};const jh=new class extends Et{possiblyEvaluate(i,t){return t=new Tn(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),super.possiblyEvaluate(i,t)}evaluate(i,t,o,u){return t=he({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(i,t,o,u)}}(Fu.paint.properties["line-width"].specification);function Bc(i,t){return t>0?t+2*i:i}jh.useIntegerZoom=!0;const us=tr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),jp=tr([{name:"a_projected_pos",components:3,type:"Float32"}],4);tr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Dd=tr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);tr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Ou=tr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Nd=tr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Bd(i,t,o){return i.sections.forEach(u=>{u.text=function(g,_,e){const r=_.layout.get("text-transform").evaluate(e,{});return r==="uppercase"?g=g.toLocaleUpperCase():r==="lowercase"&&(g=g.toLocaleLowerCase()),hn.applyArabicShaping&&(g=hn.applyArabicShaping(g)),g}(u.text,t,o)}),i}tr([{name:"triangle",components:3,type:"Uint16"}]),tr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),tr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),tr([{type:"Float32",name:"offsetX"}]),tr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const hs={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var gn=24,Rh=Xt,Fd=function(i,t,o,u,g){var _,e,r=8*g-u-1,l=(1<<r)-1,d=l>>1,x=-7,S=g-1,M=-1,A=i[t+S];for(S+=M,_=A&(1<<-x)-1,A>>=-x,x+=r;x>0;_=256*_+i[t+S],S+=M,x-=8);for(e=_&(1<<-x)-1,_>>=-x,x+=u;x>0;e=256*e+i[t+S],S+=M,x-=8);if(_===0)_=1-d;else{if(_===l)return e?NaN:1/0*(A?-1:1);e+=Math.pow(2,u),_-=d}return(A?-1:1)*e*Math.pow(2,_-u)},Fc=function(i,t,o,u,g,_){var e,r,l,d=8*_-g-1,x=(1<<d)-1,S=x>>1,M=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,A=0,L=1,O=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(r=isNaN(t)?1:0,e=x):(e=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-e))<1&&(e--,l*=2),(t+=e+S>=1?M/l:M*Math.pow(2,1-S))*l>=2&&(e++,l/=2),e+S>=x?(r=0,e=x):e+S>=1?(r=(t*l-1)*Math.pow(2,g),e+=S):(r=t*Math.pow(2,S-1)*Math.pow(2,g),e=0));g>=8;i[o+A]=255&r,A+=L,r/=256,g-=8);for(e=e<<g|r,d+=g;d>0;i[o+A]=255&e,A+=L,e/=256,d-=8);i[o+A-L]|=128*O};function Xt(i){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(i)?i:new Uint8Array(i||0),this.pos=0,this.type=0,this.length=this.buf.length}Xt.Varint=0,Xt.Fixed64=1,Xt.Bytes=2,Xt.Fixed32=5;var qs,xt=4294967296,$a=1/xt,$u=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Do(i){return i.type===Xt.Bytes?i.readVarint()+i.pos:i.pos+1}function Hl(i,t,o){return o?4294967296*t+(i>>>0):4294967296*(t>>>0)+(i>>>0)}function Gl(i,t,o){var u=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));o.realloc(u);for(var g=o.pos-1;g>=i;g--)o.buf[g+u]=o.buf[g]}function Uu(i,t){for(var o=0;o<i.length;o++)t.writeVarint(i[o])}function Dh(i,t){for(var o=0;o<i.length;o++)t.writeSVarint(i[o])}function Od(i,t){for(var o=0;o<i.length;o++)t.writeFloat(i[o])}function $d(i,t){for(var o=0;o<i.length;o++)t.writeDouble(i[o])}function Ud(i,t){for(var o=0;o<i.length;o++)t.writeBoolean(i[o])}function Nh(i,t){for(var o=0;o<i.length;o++)t.writeFixed32(i[o])}function Bh(i,t){for(var o=0;o<i.length;o++)t.writeSFixed32(i[o])}function Vr(i,t){for(var o=0;o<i.length;o++)t.writeFixed64(i[o])}function no(i,t){for(var o=0;o<i.length;o++)t.writeSFixed64(i[o])}function ro(i,t){return(i[t]|i[t+1]<<8|i[t+2]<<16)+16777216*i[t+3]}function Ua(i,t,o){i[o]=t,i[o+1]=t>>>8,i[o+2]=t>>>16,i[o+3]=t>>>24}function Fh(i,t){return(i[t]|i[t+1]<<8|i[t+2]<<16)+(i[t+3]<<24)}function io(i,t,o){i===1&&o.readMessage(Vd,t)}function Vd(i,t,o){if(i===3){const{id:u,bitmap:g,width:_,height:e,left:r,top:l,advance:d}=o.readMessage(No,{});t.push({id:u,bitmap:new Fa({width:_+6,height:e+6},g),metrics:{width:_,height:e,left:r,top:l,advance:d}})}}function No(i,t,o){i===1?t.id=o.readVarint():i===2?t.bitmap=o.readBytes():i===3?t.width=o.readVarint():i===4?t.height=o.readVarint():i===5?t.left=o.readSVarint():i===6?t.top=o.readSVarint():i===7&&(t.advance=o.readVarint())}function Hd(i){let t=0,o=0;for(const e of i)t+=e.w*e.h,o=Math.max(o,e.w);i.sort((e,r)=>r.h-e.h);const u=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),o),h:1/0}];let g=0,_=0;for(const e of i)for(let r=u.length-1;r>=0;r--){const l=u[r];if(!(e.w>l.w||e.h>l.h)){if(e.x=l.x,e.y=l.y,_=Math.max(_,e.y+e.h),g=Math.max(g,e.x+e.w),e.w===l.w&&e.h===l.h){const d=u.pop();r<u.length&&(u[r]=d)}else e.h===l.h?(l.x+=e.w,l.w-=e.w):e.w===l.w?(l.y+=e.h,l.h-=e.h):(u.push({x:l.x+e.w,y:l.y,w:l.w-e.w,h:e.h}),l.y+=e.h,l.h-=e.h);break}}return{w:g,h:_,fill:t/(g*_)||0}}Xt.prototype={destroy:function(){this.buf=null},readFields:function(i,t,o){for(o=o||this.length;this.pos<o;){var u=this.readVarint(),g=u>>3,_=this.pos;this.type=7&u,i(g,t,this),this.pos===_&&this.skip(u)}return t},readMessage:function(i,t){return this.readFields(i,t,this.readVarint()+this.pos)},readFixed32:function(){var i=ro(this.buf,this.pos);return this.pos+=4,i},readSFixed32:function(){var i=Fh(this.buf,this.pos);return this.pos+=4,i},readFixed64:function(){var i=ro(this.buf,this.pos)+ro(this.buf,this.pos+4)*xt;return this.pos+=8,i},readSFixed64:function(){var i=ro(this.buf,this.pos)+Fh(this.buf,this.pos+4)*xt;return this.pos+=8,i},readFloat:function(){var i=Fd(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=Fd(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(i){var t,o,u=this.buf;return t=127&(o=u[this.pos++]),o<128?t:(t|=(127&(o=u[this.pos++]))<<7,o<128?t:(t|=(127&(o=u[this.pos++]))<<14,o<128?t:(t|=(127&(o=u[this.pos++]))<<21,o<128?t:function(g,_,e){var r,l,d=e.buf;if(r=(112&(l=d[e.pos++]))>>4,l<128||(r|=(127&(l=d[e.pos++]))<<3,l<128)||(r|=(127&(l=d[e.pos++]))<<10,l<128)||(r|=(127&(l=d[e.pos++]))<<17,l<128)||(r|=(127&(l=d[e.pos++]))<<24,l<128)||(r|=(1&(l=d[e.pos++]))<<31,l<128))return Hl(g,r,_);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(o=u[this.pos]))<<28,i,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var i=this.readVarint();return i%2==1?(i+1)/-2:i/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var i=this.readVarint()+this.pos,t=this.pos;return this.pos=i,i-t>=12&&$u?function(o,u,g){return $u.decode(o.subarray(u,g))}(this.buf,t,i):function(o,u,g){for(var _="",e=u;e<g;){var r,l,d,x=o[e],S=null,M=x>239?4:x>223?3:x>191?2:1;if(e+M>g)break;M===1?x<128&&(S=x):M===2?(192&(r=o[e+1]))==128&&(S=(31&x)<<6|63&r)<=127&&(S=null):M===3?(l=o[e+2],(192&(r=o[e+1]))==128&&(192&l)==128&&((S=(15&x)<<12|(63&r)<<6|63&l)<=2047||S>=55296&&S<=57343)&&(S=null)):M===4&&(l=o[e+2],d=o[e+3],(192&(r=o[e+1]))==128&&(192&l)==128&&(192&d)==128&&((S=(15&x)<<18|(63&r)<<12|(63&l)<<6|63&d)<=65535||S>=1114112)&&(S=null)),S===null?(S=65533,M=1):S>65535&&(S-=65536,_+=String.fromCharCode(S>>>10&1023|55296),S=56320|1023&S),_+=String.fromCharCode(S),e+=M}return _}(this.buf,t,i)},readBytes:function(){var i=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,i);return this.pos=i,t},readPackedVarint:function(i,t){if(this.type!==Xt.Bytes)return i.push(this.readVarint(t));var o=Do(this);for(i=i||[];this.pos<o;)i.push(this.readVarint(t));return i},readPackedSVarint:function(i){if(this.type!==Xt.Bytes)return i.push(this.readSVarint());var t=Do(this);for(i=i||[];this.pos<t;)i.push(this.readSVarint());return i},readPackedBoolean:function(i){if(this.type!==Xt.Bytes)return i.push(this.readBoolean());var t=Do(this);for(i=i||[];this.pos<t;)i.push(this.readBoolean());return i},readPackedFloat:function(i){if(this.type!==Xt.Bytes)return i.push(this.readFloat());var t=Do(this);for(i=i||[];this.pos<t;)i.push(this.readFloat());return i},readPackedDouble:function(i){if(this.type!==Xt.Bytes)return i.push(this.readDouble());var t=Do(this);for(i=i||[];this.pos<t;)i.push(this.readDouble());return i},readPackedFixed32:function(i){if(this.type!==Xt.Bytes)return i.push(this.readFixed32());var t=Do(this);for(i=i||[];this.pos<t;)i.push(this.readFixed32());return i},readPackedSFixed32:function(i){if(this.type!==Xt.Bytes)return i.push(this.readSFixed32());var t=Do(this);for(i=i||[];this.pos<t;)i.push(this.readSFixed32());return i},readPackedFixed64:function(i){if(this.type!==Xt.Bytes)return i.push(this.readFixed64());var t=Do(this);for(i=i||[];this.pos<t;)i.push(this.readFixed64());return i},readPackedSFixed64:function(i){if(this.type!==Xt.Bytes)return i.push(this.readSFixed64());var t=Do(this);for(i=i||[];this.pos<t;)i.push(this.readSFixed64());return i},skip:function(i){var t=7&i;if(t===Xt.Varint)for(;this.buf[this.pos++]>127;);else if(t===Xt.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Xt.Fixed32)this.pos+=4;else{if(t!==Xt.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(i,t){this.writeVarint(i<<3|t)},realloc:function(i){for(var t=this.length||16;t<this.pos+i;)t*=2;if(t!==this.length){var o=new Uint8Array(t);o.set(this.buf),this.buf=o,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(i){this.realloc(4),Ua(this.buf,i,this.pos),this.pos+=4},writeSFixed32:function(i){this.realloc(4),Ua(this.buf,i,this.pos),this.pos+=4},writeFixed64:function(i){this.realloc(8),Ua(this.buf,-1&i,this.pos),Ua(this.buf,Math.floor(i*$a),this.pos+4),this.pos+=8},writeSFixed64:function(i){this.realloc(8),Ua(this.buf,-1&i,this.pos),Ua(this.buf,Math.floor(i*$a),this.pos+4),this.pos+=8},writeVarint:function(i){(i=+i||0)>268435455||i<0?function(t,o){var u,g;if(t>=0?(u=t%4294967296|0,g=t/4294967296|0):(g=~(-t/4294967296),4294967295^(u=~(-t%4294967296))?u=u+1|0:(u=0,g=g+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");o.realloc(10),function(_,e,r){r.buf[r.pos++]=127&_|128,_>>>=7,r.buf[r.pos++]=127&_|128,_>>>=7,r.buf[r.pos++]=127&_|128,_>>>=7,r.buf[r.pos++]=127&_|128,r.buf[r.pos]=127&(_>>>=7)}(u,0,o),function(_,e){var r=(7&_)<<4;e.buf[e.pos++]|=r|((_>>>=3)?128:0),_&&(e.buf[e.pos++]=127&_|((_>>>=7)?128:0),_&&(e.buf[e.pos++]=127&_|((_>>>=7)?128:0),_&&(e.buf[e.pos++]=127&_|((_>>>=7)?128:0),_&&(e.buf[e.pos++]=127&_|((_>>>=7)?128:0),_&&(e.buf[e.pos++]=127&_)))))}(g,o)}(i,this):(this.realloc(4),this.buf[this.pos++]=127&i|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=i>>>7&127))))},writeSVarint:function(i){this.writeVarint(i<0?2*-i-1:2*i)},writeBoolean:function(i){this.writeVarint(!!i)},writeString:function(i){i=String(i),this.realloc(4*i.length),this.pos++;var t=this.pos;this.pos=function(u,g,_){for(var e,r,l=0;l<g.length;l++){if((e=g.charCodeAt(l))>55295&&e<57344){if(!r){e>56319||l+1===g.length?(u[_++]=239,u[_++]=191,u[_++]=189):r=e;continue}if(e<56320){u[_++]=239,u[_++]=191,u[_++]=189,r=e;continue}e=r-55296<<10|e-56320|65536,r=null}else r&&(u[_++]=239,u[_++]=191,u[_++]=189,r=null);e<128?u[_++]=e:(e<2048?u[_++]=e>>6|192:(e<65536?u[_++]=e>>12|224:(u[_++]=e>>18|240,u[_++]=e>>12&63|128),u[_++]=e>>6&63|128),u[_++]=63&e|128)}return _}(this.buf,i,this.pos);var o=this.pos-t;o>=128&&Gl(t,o,this),this.pos=t-1,this.writeVarint(o),this.pos+=o},writeFloat:function(i){this.realloc(4),Fc(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),Fc(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(i){var t=i.length;this.writeVarint(t),this.realloc(t);for(var o=0;o<t;o++)this.buf[this.pos++]=i[o]},writeRawMessage:function(i,t){this.pos++;var o=this.pos;i(t,this);var u=this.pos-o;u>=128&&Gl(o,u,this),this.pos=o-1,this.writeVarint(u),this.pos+=u},writeMessage:function(i,t,o){this.writeTag(i,Xt.Bytes),this.writeRawMessage(t,o)},writePackedVarint:function(i,t){t.length&&this.writeMessage(i,Uu,t)},writePackedSVarint:function(i,t){t.length&&this.writeMessage(i,Dh,t)},writePackedBoolean:function(i,t){t.length&&this.writeMessage(i,Ud,t)},writePackedFloat:function(i,t){t.length&&this.writeMessage(i,Od,t)},writePackedDouble:function(i,t){t.length&&this.writeMessage(i,$d,t)},writePackedFixed32:function(i,t){t.length&&this.writeMessage(i,Nh,t)},writePackedSFixed32:function(i,t){t.length&&this.writeMessage(i,Bh,t)},writePackedFixed64:function(i,t){t.length&&this.writeMessage(i,Vr,t)},writePackedSFixed64:function(i,t){t.length&&this.writeMessage(i,no,t)},writeBytesField:function(i,t){this.writeTag(i,Xt.Bytes),this.writeBytes(t)},writeFixed32Field:function(i,t){this.writeTag(i,Xt.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(i,t){this.writeTag(i,Xt.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(i,t){this.writeTag(i,Xt.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(i,t){this.writeTag(i,Xt.Fixed64),this.writeSFixed64(t)},writeVarintField:function(i,t){this.writeTag(i,Xt.Varint),this.writeVarint(t)},writeSVarintField:function(i,t){this.writeTag(i,Xt.Varint),this.writeSVarint(t)},writeStringField:function(i,t){this.writeTag(i,Xt.Bytes),this.writeString(t)},writeFloatField:function(i,t){this.writeTag(i,Xt.Fixed32),this.writeFloat(t)},writeDoubleField:function(i,t){this.writeTag(i,Xt.Fixed64),this.writeDouble(t)},writeBooleanField:function(i,t){this.writeVarintField(i,!!t)}};class Vu{constructor(t,{pixelRatio:o,version:u,stretchX:g,stretchY:_,content:e}){this.paddedRect=t,this.pixelRatio=o,this.stretchX=g,this.stretchY=_,this.content=e,this.version=u}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Oh{constructor(t,o){const u={},g={};this.haveRenderCallbacks=[];const _=[];this.addImages(t,u,_),this.addImages(o,g,_);const{w:e,h:r}=Hd(_),l=new ti({width:e||1,height:r||1});for(const d in t){const x=t[d],S=u[d].paddedRect;ti.copy(x.data,l,{x:0,y:0},{x:S.x+1,y:S.y+1},x.data)}for(const d in o){const x=o[d],S=g[d].paddedRect,M=S.x+1,A=S.y+1,L=x.data.width,O=x.data.height;ti.copy(x.data,l,{x:0,y:0},{x:M,y:A},x.data),ti.copy(x.data,l,{x:0,y:O-1},{x:M,y:A-1},{width:L,height:1}),ti.copy(x.data,l,{x:0,y:0},{x:M,y:A+O},{width:L,height:1}),ti.copy(x.data,l,{x:L-1,y:0},{x:M-1,y:A},{width:1,height:O}),ti.copy(x.data,l,{x:0,y:0},{x:M+L,y:A},{width:1,height:O})}this.image=l,this.iconPositions=u,this.patternPositions=g}addImages(t,o,u){for(const g in t){const _=t[g],e={x:0,y:0,w:_.data.width+2,h:_.data.height+2};u.push(e),o[g]=new Vu(e,_),_.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(t,o){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const u in t.updatedImages)this.patchUpdatedImage(this.iconPositions[u],t.getImage(u),o),this.patchUpdatedImage(this.patternPositions[u],t.getImage(u),o)}patchUpdatedImage(t,o,u){if(!t||!o||t.version===o.version)return;t.version=o.version;const[g,_]=t.tl;u.update(o.data,void 0,{x:g,y:_})}}ut("ImagePosition",Vu),ut("ImageAtlas",Oh),c.WritingMode=void 0,(qs=c.WritingMode||(c.WritingMode={}))[qs.none=0]="none",qs[qs.horizontal=1]="horizontal",qs[qs.vertical=2]="vertical",qs[qs.horizontalOnly=3]="horizontalOnly";const Oc=-17;class ql{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,o){const u=new ql;return u.scale=t||1,u.fontStack=o,u}static forImage(t){const o=new ql;return o.imageName=t,o}}class Wl{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,o){const u=new Wl;for(let g=0;g<t.sections.length;g++){const _=t.sections[g];_.image?u.addImageSection(_):u.addTextSection(_,o)}return u}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let o="";for(let u=0;u<t.length;u++){const g=t.charCodeAt(u+1)||null,_=t.charCodeAt(u-1)||null;o+=g&&Tc(g)&&!hs[t[u+1]]||_&&Tc(_)&&!hs[t[u-1]]||!hs[t[u]]?t[u]:hs[t[u]]}return o}(this.text)}trim(){let t=0;for(let u=0;u<this.text.length&&Zl[this.text.charCodeAt(u)];u++)t++;let o=this.text.length;for(let u=this.text.length-1;u>=0&&u>=t&&Zl[this.text.charCodeAt(u)];u--)o--;this.text=this.text.substring(t,o),this.sectionIndex=this.sectionIndex.slice(t,o)}substring(t,o){const u=new Wl;return u.text=this.text.substring(t,o),u.sectionIndex=this.sectionIndex.slice(t,o),u.sections=this.sections,u}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((t,o)=>Math.max(t,this.sections[o].scale),0)}addTextSection(t,o){this.text+=t.text,this.sections.push(ql.forText(t.scale,t.fontStack||o));const u=this.sections.length-1;for(let g=0;g<t.text.length;++g)this.sectionIndex.push(u)}addImageSection(t){const o=t.image?t.image.name:"";if(o.length===0)return void Me("Can't add FormattedSection with an empty image.");const u=this.getNextImageSectionCharCode();u?(this.text+=String.fromCharCode(u),this.sections.push(ql.forImage(o)),this.sectionIndex.push(this.sections.length-1)):Me("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Va(i,t,o,u,g,_,e,r,l,d,x,S,M,A,L,O){const q=Wl.fromFeature(i,g);let Q;S===c.WritingMode.vertical&&q.verticalizePunctuation();const{processBidirectionalText:ie,processStyledBidirectionalText:re}=hn;if(ie&&q.sections.length===1){Q=[];const je=ie(q.toString(),Ws(q,d,_,t,u,A,L));for(const ue of je){const ne=new Wl;ne.text=ue,ne.sections=q.sections;for(let ce=0;ce<ue.length;ce++)ne.sectionIndex.push(0);Q.push(ne)}}else if(re){Q=[];const je=re(q.text,q.sectionIndex,Ws(q,d,_,t,u,A,L));for(const ue of je){const ne=new Wl;ne.text=ue[0],ne.sectionIndex=ue[1],ne.sections=q.sections,Q.push(ne)}}else Q=function(je,ue){const ne=[],ce=je.text;let be=0;for(const Ie of ue)ne.push(je.substring(be,Ie)),be=Ie;return be<ce.length&&ne.push(je.substring(be,ce.length)),ne}(q,Ws(q,d,_,t,u,A,L));const fe=[],we={positionedLines:fe,text:q.toString(),top:x[1],bottom:x[1],left:x[0],right:x[0],writingMode:S,iconsInText:!1,verticalizable:!1};return function(je,ue,ne,ce,be,Ie,Be,De,Ce,ht,Ke,Nt){let Pn=0,Fn=Oc,_r=0,ao=0;const qr=De==="right"?1:De==="left"?0:.5;let dr=0;for(const pr of be){pr.trim();const Zr=pr.getMaxScale(),ii=(Zr-1)*gn,mi={positionedGlyphs:[],lineOffset:0};je.positionedLines[dr]=mi;const Pi=mi.positionedGlyphs;let Ii=0;if(!pr.length()){Fn+=Ie,++dr;continue}for(let Nr=0;Nr<pr.length();Nr++){const sn=pr.getSection(Nr),Bi=pr.getSectionIndex(Nr),Xr=pr.getCharCode(Nr);let oi=0,$o=null,fs=null,ms=null,el=gn;const Uo=!(Ce===c.WritingMode.horizontal||!Ke&&!_o(Xr)||Ke&&(Zl[Xr]||(Dr=Xr,rt.Arabic(Dr)||rt["Arabic Supplement"](Dr)||rt["Arabic Extended-A"](Dr)||rt["Arabic Presentation Forms-A"](Dr)||rt["Arabic Presentation Forms-B"](Dr))));if(sn.imageName){const lo=ce[sn.imageName];if(!lo)continue;ms=sn.imageName,je.iconsInText=je.iconsInText||!0,fs=lo.paddedRect;const Ai=lo.displaySize;sn.scale=sn.scale*gn/Nt,$o={width:Ai[0],height:Ai[1],left:1,top:-3,advance:Uo?Ai[1]:Ai[0]},oi=ii+(gn-Ai[1]*sn.scale),el=$o.advance;const tl=Uo?Ai[0]*sn.scale-gn*Zr:Ai[1]*sn.scale-gn*Zr;tl>0&&tl>Ii&&(Ii=tl)}else{const lo=ne[sn.fontStack],Ai=lo&&lo[Xr];if(Ai&&Ai.rect)fs=Ai.rect,$o=Ai.metrics;else{const tl=ue[sn.fontStack],Zh=tl&&tl[Xr];if(!Zh)continue;$o=Zh.metrics}oi=(Zr-sn.scale)*gn}Uo?(je.verticalizable=!0,Pi.push({glyph:Xr,imageName:ms,x:Pn,y:Fn+oi,vertical:Uo,scale:sn.scale,fontStack:sn.fontStack,sectionIndex:Bi,metrics:$o,rect:fs}),Pn+=el*sn.scale+ht):(Pi.push({glyph:Xr,imageName:ms,x:Pn,y:Fn+oi,vertical:Uo,scale:sn.scale,fontStack:sn.fontStack,sectionIndex:Bi,metrics:$o,rect:fs}),Pn+=$o.advance*sn.scale+ht)}Pi.length!==0&&(_r=Math.max(Pn-ht,_r),$c(Pi,0,Pi.length-1,qr,Ii)),Pn=0;const Zn=Ie*Zr+Ii;mi.lineOffset=Math.max(Ii,ii),Fn+=Zn,ao=Math.max(Zn,ao),++dr}var Dr;const Wr=Fn-Oc,{horizontalAlign:ri,verticalAlign:Ci}=sr(Be);(function(pr,Zr,ii,mi,Pi,Ii,Zn,Nr,sn){const Bi=(Zr-ii)*Pi;let Xr=0;Xr=Ii!==Zn?-Nr*mi-Oc:(-mi*sn+.5)*Zn;for(const oi of pr)for(const $o of oi.positionedGlyphs)$o.x+=Bi,$o.y+=Xr})(je.positionedLines,qr,ri,Ci,_r,ao,Ie,Wr,be.length),je.top+=-Ci*Wr,je.bottom=je.top+Wr,je.left+=-ri*_r,je.right=je.left+_r}(we,t,o,u,Q,e,r,l,S,d,M,O),!function(je){for(const ue of je)if(ue.positionedGlyphs.length!==0)return!1;return!0}(fe)&&we}const Zl={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Ni={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function yn(i,t,o,u,g,_){if(t.imageName){const e=u[t.imageName];return e?e.displaySize[0]*t.scale*gn/_+g:0}{const e=o[t.fontStack],r=e&&e[i];return r?r.metrics.advance*t.scale+g:0}}function xr(i,t,o,u){const g=Math.pow(i-t,2);return u?i<t?g/2:2*g:g+Math.abs(o)*o}function hr(i,t,o){let u=0;return i===10&&(u-=1e4),o&&(u+=150),i!==40&&i!==65288||(u+=50),t!==41&&t!==65289||(u+=50),u}function zr(i,t,o,u,g,_){let e=null,r=xr(t,o,g,_);for(const l of u){const d=xr(t-l.x,o,g,_)+l.badness;d<=r&&(e=l,r=d)}return{index:i,x:t,priorBreak:e,badness:r}}function pi(i){return i?pi(i.priorBreak).concat(i.index):[]}function Ws(i,t,o,u,g,_,e){if(_!=="point")return[];if(!i)return[];const r=[],l=function(M,A,L,O,q,Q){let ie=0;for(let re=0;re<M.length();re++){const fe=M.getSection(re);ie+=yn(M.getCharCode(re),fe,O,q,A,Q)}return ie/Math.max(1,Math.ceil(ie/L))}(i,t,o,u,g,e),d=i.text.indexOf("")>=0;let x=0;for(let M=0;M<i.length();M++){const A=i.getSection(M),L=i.getCharCode(M);if(Zl[L]||(x+=yn(L,A,u,g,t,e)),M<i.length()-1){const O=!((S=L)<11904||!(rt["Bopomofo Extended"](S)||rt.Bopomofo(S)||rt["CJK Compatibility Forms"](S)||rt["CJK Compatibility Ideographs"](S)||rt["CJK Compatibility"](S)||rt["CJK Radicals Supplement"](S)||rt["CJK Strokes"](S)||rt["CJK Symbols and Punctuation"](S)||rt["CJK Unified Ideographs Extension A"](S)||rt["CJK Unified Ideographs"](S)||rt["Enclosed CJK Letters and Months"](S)||rt["Halfwidth and Fullwidth Forms"](S)||rt.Hiragana(S)||rt["Ideographic Description Characters"](S)||rt["Kangxi Radicals"](S)||rt["Katakana Phonetic Extensions"](S)||rt.Katakana(S)||rt["Vertical Forms"](S)||rt["Yi Radicals"](S)||rt["Yi Syllables"](S)));(Ni[L]||O||A.imageName)&&r.push(zr(M+1,x,l,r,hr(L,i.getCharCode(M+1),O&&d),!1))}}var S;return pi(zr(i.length(),x,l,r,0,!0))}function sr(i){let t=.5,o=.5;switch(i){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(i){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:t,verticalAlign:o}}function $c(i,t,o,u,g){if(!u&&!g)return;const _=i[o],e=(i[o].x+_.metrics.advance*_.scale)*u;for(let r=t;r<=o;r++)i[r].x-=e,i[r].y+=g}function Ha(i,t,o){const{horizontalAlign:u,verticalAlign:g}=sr(o),_=t[0]-i.displaySize[0]*u,e=t[1]-i.displaySize[1]*g;return{image:i,top:e,bottom:e+i.displaySize[1],left:_,right:_+i.displaySize[0]}}function Uc(i,t,o,u,g,_){const e=i.image;let r;if(e.content){const q=e.content,Q=e.pixelRatio||1;r=[q[0]/Q,q[1]/Q,e.displaySize[0]-q[2]/Q,e.displaySize[1]-q[3]/Q]}const l=t.left*_,d=t.right*_;let x,S,M,A;o==="width"||o==="both"?(A=g[0]+l-u[3],S=g[0]+d+u[1]):(A=g[0]+(l+d-e.displaySize[0])/2,S=A+e.displaySize[0]);const L=t.top*_,O=t.bottom*_;return o==="height"||o==="both"?(x=g[1]+L-u[0],M=g[1]+O+u[2]):(x=g[1]+(L+O-e.displaySize[1])/2,M=x+e.displaySize[1]),{image:e,top:x,right:S,bottom:M,left:A,collisionPadding:r}}const oo=128;function Xl(i,t){const{expression:o}=t;if(o.kind==="constant")return{kind:"constant",layoutSize:o.evaluate(new Tn(i+1))};if(o.kind==="source")return{kind:"source"};{const{zoomStops:u,interpolationType:g}=o;let _=0;for(;_<u.length&&u[_]<=i;)_++;_=Math.max(0,_-1);let e=_;for(;e<u.length&&u[e]<i+1;)e++;e=Math.min(u.length-1,e);const r=u[_],l=u[e];return o.kind==="composite"?{kind:"composite",minZoom:r,maxZoom:l,interpolationType:g}:{kind:"camera",minZoom:r,maxZoom:l,minSize:o.evaluate(new Tn(r)),maxSize:o.evaluate(new Tn(l)),interpolationType:g}}}class ar extends Xe{constructor(t,o,u,g){super(t,o),this.angle=u,g!==void 0&&(this.segment=g)}clone(){return new ar(this.x,this.y,this.angle,this.segment)}}function Hu(i,t,o,u,g){if(t.segment===void 0)return!0;let _=t,e=t.segment+1,r=0;for(;r>-o/2;){if(e--,e<0)return!1;r-=i[e].dist(_),_=i[e]}r+=i[e].dist(i[e+1]),e++;const l=[];let d=0;for(;r<o/2;){const x=i[e],S=i[e+1];if(!S)return!1;let M=i[e-1].angleTo(x)-x.angleTo(S);for(M=Math.abs((M+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:r,angleDelta:M}),d+=M;r-l[0].distance>u;)d-=l.shift().angleDelta;if(d>g)return!1;e++,r+=x.dist(S)}return!0}function Ga(i){let t=0;for(let o=0;o<i.length-1;o++)t+=i[o].dist(i[o+1]);return t}function Bo(i,t,o){return i?.6*t*o:0}function Vc(i,t){return Math.max(i?i.right-i.left:0,t?t.right-t.left:0)}function $h(i,t,o,u,g,_){const e=Bo(o,g,_),r=Vc(o,u)*_;let l=0;const d=Ga(i)/2;for(let x=0;x<i.length-1;x++){const S=i[x],M=i[x+1],A=S.dist(M);if(l+A>d){const L=(d-l)/A,O=zn(S.x,M.x,L),q=zn(S.y,M.y,L),Q=new ar(O,q,M.angleTo(S),x);return Q._round(),!e||Hu(i,Q,r,e,t)?Q:void 0}l+=A}}function Zs(i,t,o,u,g,_,e,r,l){const d=Bo(u,_,e),x=Vc(u,g),S=x*e,M=i[0].x===0||i[0].x===l||i[0].y===0||i[0].y===l;return t-S<t/4&&(t=S+t/4),Hc(i,M?t/2*r%t:(x/2+2*_)*e*r%t,t,d,o,S,M,!1,l)}function Hc(i,t,o,u,g,_,e,r,l){const d=_/2,x=Ga(i);let S=0,M=t-o,A=[];for(let L=0;L<i.length-1;L++){const O=i[L],q=i[L+1],Q=O.dist(q),ie=q.angleTo(O);for(;M+o<S+Q;){M+=o;const re=(M-S)/Q,fe=zn(O.x,q.x,re),we=zn(O.y,q.y,re);if(fe>=0&&fe<l&&we>=0&&we<l&&M-d>=0&&M+d<=x){const je=new ar(fe,we,ie,L);je._round(),u&&!Hu(i,je,_,u,g)||A.push(je)}}S+=Q}return r||A.length||e||(A=Hc(i,S/2,o,u,g,_,e,!0,l)),A}function ds(i,t,o,u,g){const _=[];for(let e=0;e<i.length;e++){const r=i[e];let l;for(let d=0;d<r.length-1;d++){let x=r[d],S=r[d+1];x.x<t&&S.x<t||(x.x<t?x=new Xe(t,x.y+(t-x.x)/(S.x-x.x)*(S.y-x.y))._round():S.x<t&&(S=new Xe(t,x.y+(t-x.x)/(S.x-x.x)*(S.y-x.y))._round()),x.y<o&&S.y<o||(x.y<o?x=new Xe(x.x+(o-x.y)/(S.y-x.y)*(S.x-x.x),o)._round():S.y<o&&(S=new Xe(x.x+(o-x.y)/(S.y-x.y)*(S.x-x.x),o)._round()),x.x>=u&&S.x>=u||(x.x>=u?x=new Xe(u,x.y+(u-x.x)/(S.x-x.x)*(S.y-x.y))._round():S.x>=u&&(S=new Xe(u,x.y+(u-x.x)/(S.x-x.x)*(S.y-x.y))._round()),x.y>=g&&S.y>=g||(x.y>=g?x=new Xe(x.x+(g-x.y)/(S.y-x.y)*(S.x-x.x),g)._round():S.y>=g&&(S=new Xe(x.x+(g-x.y)/(S.y-x.y)*(S.x-x.x),g)._round()),l&&x.equals(l[l.length-1])||(l=[x],_.push(l)),l.push(S)))))}}return _}function Gc(i,t,o,u){const g=[],_=i.image,e=_.pixelRatio,r=_.paddedRect.w-2,l=_.paddedRect.h-2,d=i.right-i.left,x=i.bottom-i.top,S=_.stretchX||[[0,r]],M=_.stretchY||[[0,l]],A=(Ie,Be)=>Ie+Be[1]-Be[0],L=S.reduce(A,0),O=M.reduce(A,0),q=r-L,Q=l-O;let ie=0,re=L,fe=0,we=O,je=0,ue=q,ne=0,ce=Q;if(_.content&&u){const Ie=_.content;ie=Xs(S,0,Ie[0]),fe=Xs(M,0,Ie[1]),re=Xs(S,Ie[0],Ie[2]),we=Xs(M,Ie[1],Ie[3]),je=Ie[0]-ie,ne=Ie[1]-fe,ue=Ie[2]-Ie[0]-re,ce=Ie[3]-Ie[1]-we}const be=(Ie,Be,De,Ce)=>{const ht=qa(Ie.stretch-ie,re,d,i.left),Ke=Wa(Ie.fixed-je,ue,Ie.stretch,L),Nt=qa(Be.stretch-fe,we,x,i.top),Pn=Wa(Be.fixed-ne,ce,Be.stretch,O),Fn=qa(De.stretch-ie,re,d,i.left),_r=Wa(De.fixed-je,ue,De.stretch,L),ao=qa(Ce.stretch-fe,we,x,i.top),qr=Wa(Ce.fixed-ne,ce,Ce.stretch,O),dr=new Xe(ht,Nt),Dr=new Xe(Fn,Nt),Wr=new Xe(Fn,ao),ri=new Xe(ht,ao),Ci=new Xe(Ke/e,Pn/e),pr=new Xe(_r/e,qr/e),Zr=t*Math.PI/180;if(Zr){const Pi=Math.sin(Zr),Ii=Math.cos(Zr),Zn=[Ii,-Pi,Pi,Ii];dr._matMult(Zn),Dr._matMult(Zn),ri._matMult(Zn),Wr._matMult(Zn)}const ii=Ie.stretch+Ie.fixed,mi=Be.stretch+Be.fixed;return{tl:dr,tr:Dr,bl:ri,br:Wr,tex:{x:_.paddedRect.x+1+ii,y:_.paddedRect.y+1+mi,w:De.stretch+De.fixed-ii,h:Ce.stretch+Ce.fixed-mi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ci,pixelOffsetBR:pr,minFontScaleX:ue/e/d,minFontScaleY:ce/e/x,isSDF:o}};if(u&&(_.stretchX||_.stretchY)){const Ie=Gu(S,q,L),Be=Gu(M,Q,O);for(let De=0;De<Ie.length-1;De++){const Ce=Ie[De],ht=Ie[De+1];for(let Ke=0;Ke<Be.length-1;Ke++)g.push(be(Ce,Be[Ke],ht,Be[Ke+1]))}}else g.push(be({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:r+1},{fixed:0,stretch:l+1}));return g}function Xs(i,t,o){let u=0;for(const g of i)u+=Math.max(t,Math.min(o,g[1]))-Math.max(t,Math.min(o,g[0]));return u}function Gu(i,t,o){const u=[{fixed:-1,stretch:0}];for(const[g,_]of i){const e=u[u.length-1];u.push({fixed:g-e.stretch,stretch:e.stretch}),u.push({fixed:g-e.stretch,stretch:e.stretch+(_-g)})}return u.push({fixed:t+1,stretch:o}),u}function qa(i,t,o,u){return i/t*o+u}function Wa(i,t,o,u){return i-t*o/u}ut("Anchor",ar);class jr{constructor(t,o,u,g,_,e,r,l,d,x){if(this.boxStartIndex=t.length,d){let S=e.top,M=e.bottom;const A=e.collisionPadding;A&&(S-=A[1],M+=A[3]);let L=M-S;L>0&&(L=Math.max(10,L),this.circleDiameter=L)}else{let S=e.top*r-l[0],M=e.bottom*r+l[2],A=e.left*r-l[3],L=e.right*r+l[1];const O=e.collisionPadding;if(O&&(A-=O[0]*r,S-=O[1]*r,L+=O[2]*r,M+=O[3]*r),x){const q=new Xe(A,S),Q=new Xe(L,S),ie=new Xe(A,M),re=new Xe(L,M),fe=x*Math.PI/180;q._rotate(fe),Q._rotate(fe),ie._rotate(fe),re._rotate(fe),A=Math.min(q.x,Q.x,ie.x,re.x),L=Math.max(q.x,Q.x,ie.x,re.x),S=Math.min(q.y,Q.y,ie.y,re.y),M=Math.max(q.y,Q.y,ie.y,re.y)}t.emplaceBack(o.x,o.y,A,S,L,M,u,g,_)}this.boxEndIndex=t.length}}class Ks{constructor(t=[],o=so){if(this.data=t,this.length=this.data.length,this.compare=o,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const t=this.data[0],o=this.data.pop();return this.length--,this.length>0&&(this.data[0]=o,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:o,compare:u}=this,g=o[t];for(;t>0;){const _=t-1>>1,e=o[_];if(u(g,e)>=0)break;o[t]=e,t=_}o[t]=g}_down(t){const{data:o,compare:u}=this,g=this.length>>1,_=o[t];for(;t<g;){let e=1+(t<<1),r=o[e];const l=e+1;if(l<this.length&&u(o[l],r)<0&&(e=l,r=o[l]),u(r,_)>=0)break;o[t]=r,t=e}o[t]=_}}function so(i,t){return i<t?-1:i>t?1:0}function fi(i,t=1,o=!1){let u=1/0,g=1/0,_=-1/0,e=-1/0;const r=i[0];for(let A=0;A<r.length;A++){const L=r[A];(!A||L.x<u)&&(u=L.x),(!A||L.y<g)&&(g=L.y),(!A||L.x>_)&&(_=L.x),(!A||L.y>e)&&(e=L.y)}const l=Math.min(_-u,e-g);let d=l/2;const x=new Ks([],Gd);if(l===0)return new Xe(u,g);for(let A=u;A<_;A+=l)for(let L=g;L<e;L+=l)x.push(new Js(A+d,L+d,d,i));let S=function(A){let L=0,O=0,q=0;const Q=A[0];for(let ie=0,re=Q.length,fe=re-1;ie<re;fe=ie++){const we=Q[ie],je=Q[fe],ue=we.x*je.y-je.x*we.y;O+=(we.x+je.x)*ue,q+=(we.y+je.y)*ue,L+=3*ue}return new Js(O/L,q/L,0,A)}(i),M=x.length;for(;x.length;){const A=x.pop();(A.d>S.d||!S.d)&&(S=A,o&&console.log("found best %d after %d probes",Math.round(1e4*A.d)/1e4,M)),A.max-S.d<=t||(d=A.h/2,x.push(new Js(A.p.x-d,A.p.y-d,d,i)),x.push(new Js(A.p.x+d,A.p.y-d,d,i)),x.push(new Js(A.p.x-d,A.p.y+d,d,i)),x.push(new Js(A.p.x+d,A.p.y+d,d,i)),M+=4)}return o&&(console.log(`num probes: ${M}`),console.log(`best distance: ${S.d}`)),S.p}function Gd(i,t){return t.max-i.max}function Js(i,t,o,u){this.p=new Xe(i,t),this.h=o,this.d=function(g,_){let e=!1,r=1/0;for(let l=0;l<_.length;l++){const d=_[l];for(let x=0,S=d.length,M=S-1;x<S;M=x++){const A=d[x],L=d[M];A.y>g.y!=L.y>g.y&&g.x<(L.x-A.x)*(g.y-A.y)/(L.y-A.y)+A.x&&(e=!e),r=Math.min(r,Pc(g,A,L))}}return(e?1:-1)*Math.sqrt(r)}(this.p,u),this.max=this.d+this.h*Math.SQRT2}const qc=Number.POSITIVE_INFINITY;function qd(i,t){return t[1]!==qc?function(o,u,g){let _=0,e=0;switch(u=Math.abs(u),g=Math.abs(g),o){case"top-right":case"top-left":case"top":e=g-7;break;case"bottom-right":case"bottom-left":case"bottom":e=7-g}switch(o){case"top-right":case"bottom-right":case"right":_=-u;break;case"top-left":case"bottom-left":case"left":_=u}return[_,e]}(i,t[0],t[1]):function(o,u){let g=0,_=0;u<0&&(u=0);const e=u/Math.sqrt(2);switch(o){case"top-right":case"top-left":_=e-7;break;case"bottom-right":case"bottom-left":_=7-e;break;case"bottom":_=7-u;break;case"top":_=u-7}switch(o){case"top-right":case"bottom-right":g=-e;break;case"top-left":case"bottom-left":g=e;break;case"left":g=u;break;case"right":g=-u}return[g,_]}(i,t[0])}function Fo(i){switch(i){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Wd(i,t,o,u,g,_,e,r,l,d,x){let S=_.textMaxSize.evaluate(t,{});S===void 0&&(S=e);const M=i.layers[0].layout,A=M.get("icon-offset").evaluate(t,{},x),L=qu(o.horizontal),O=e/24,q=i.tilePixelRatio*O,Q=i.tilePixelRatio*S/24,ie=i.tilePixelRatio*r,re=i.tilePixelRatio*M.get("symbol-spacing"),fe=M.get("text-padding")*i.tilePixelRatio,we=function(Ce,ht,Ke,Nt=1){const Pn=Ce.get("icon-padding").evaluate(ht,{},Ke),Fn=Pn&&Pn.values;return[Fn[0]*Nt,Fn[1]*Nt,Fn[2]*Nt,Fn[3]*Nt]}(M,t,x,i.tilePixelRatio),je=M.get("text-max-angle")/180*Math.PI,ue=M.get("text-rotation-alignment")!=="viewport"&&M.get("symbol-placement")!=="point",ne=M.get("icon-rotation-alignment")==="map"&&M.get("symbol-placement")!=="point",ce=M.get("symbol-placement"),be=re/2,Ie=M.get("icon-text-fit");let Be;u&&Ie!=="none"&&(i.allowVerticalPlacement&&o.vertical&&(Be=Uc(u,o.vertical,Ie,M.get("icon-text-fit-padding"),A,O)),L&&(u=Uc(u,L,Ie,M.get("icon-text-fit-padding"),A,O)));const De=(Ce,ht)=>{ht.x<0||ht.x>=Jn||ht.y<0||ht.y>=Jn||function(Ke,Nt,Pn,Fn,_r,ao,qr,dr,Dr,Wr,ri,Ci,pr,Zr,ii,mi,Pi,Ii,Zn,Nr,sn,Bi,Xr,oi,$o){const fs=Ke.addToLineVertexArray(Nt,Pn);let ms,el,Uo,lo,Ai=0,tl=0,Zh=0,Vf=0,Fp=-1,Op=-1;const nl={};let Hf=Jt.exports(""),$p=0,Up=0;if(dr._unevaluatedLayout.getValue("text-radial-offset")===void 0?[$p,Up]=dr.layout.get("text-offset").evaluate(sn,{},oi).map(Li=>Li*gn):($p=dr.layout.get("text-radial-offset").evaluate(sn,{},oi)*gn,Up=qc),Ke.allowVerticalPlacement&&Fn.vertical){const Li=dr.layout.get("text-rotate").evaluate(sn,{},oi)+90;Uo=new jr(Dr,Nt,Wr,ri,Ci,Fn.vertical,pr,Zr,ii,Li),qr&&(lo=new jr(Dr,Nt,Wr,ri,Ci,qr,Pi,Ii,ii,Li))}if(_r){const Li=dr.layout.get("icon-rotate").evaluate(sn,{}),ea=dr.layout.get("icon-text-fit")!=="none",Xh=Gc(_r,Li,Xr,ea),Kh=qr?Gc(qr,Li,Xr,ea):void 0;el=new jr(Dr,Nt,Wr,ri,Ci,_r,Pi,Ii,!1,Li),Ai=4*Xh.length;const Wf=Ke.iconSizeData;let Yc=null;Wf.kind==="source"?(Yc=[oo*dr.layout.get("icon-size").evaluate(sn,{})],Yc[0]>Oo&&Me(`${Ke.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Wf.kind==="composite"&&(Yc=[oo*Bi.compositeIconSizes[0].evaluate(sn,{},oi),oo*Bi.compositeIconSizes[1].evaluate(sn,{},oi)],(Yc[0]>Oo||Yc[1]>Oo)&&Me(`${Ke.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Ke.addSymbols(Ke.icon,Xh,Yc,Nr,Zn,sn,c.WritingMode.none,Nt,fs.lineStartIndex,fs.lineLength,-1,oi),Fp=Ke.icon.placedSymbolArray.length-1,Kh&&(tl=4*Kh.length,Ke.addSymbols(Ke.icon,Kh,Yc,Nr,Zn,sn,c.WritingMode.vertical,Nt,fs.lineStartIndex,fs.lineLength,-1,oi),Op=Ke.icon.placedSymbolArray.length-1)}const Gf=Object.keys(Fn.horizontal);for(const Li of Gf){const ea=Fn.horizontal[Li];if(!ms){Hf=Jt.exports(ea.text);const Kh=dr.layout.get("text-rotate").evaluate(sn,{},oi);ms=new jr(Dr,Nt,Wr,ri,Ci,ea,pr,Zr,ii,Kh)}const Xh=ea.positionedLines.length===1;if(Zh+=Ys(Ke,Nt,ea,ao,dr,ii,sn,mi,fs,Fn.vertical?c.WritingMode.horizontal:c.WritingMode.horizontalOnly,Xh?Gf:[Li],nl,Fp,Bi,oi),Xh)break}Fn.vertical&&(Vf+=Ys(Ke,Nt,Fn.vertical,ao,dr,ii,sn,mi,fs,c.WritingMode.vertical,["vertical"],nl,Op,Bi,oi));const P0=ms?ms.boxStartIndex:Ke.collisionBoxArray.length,I0=ms?ms.boxEndIndex:Ke.collisionBoxArray.length,A0=Uo?Uo.boxStartIndex:Ke.collisionBoxArray.length,L0=Uo?Uo.boxEndIndex:Ke.collisionBoxArray.length,z0=el?el.boxStartIndex:Ke.collisionBoxArray.length,j0=el?el.boxEndIndex:Ke.collisionBoxArray.length,R0=lo?lo.boxStartIndex:Ke.collisionBoxArray.length,D0=lo?lo.boxEndIndex:Ke.collisionBoxArray.length;let gs=-1;const np=(Li,ea)=>Li&&Li.circleDiameter?Math.max(Li.circleDiameter,ea):ea;gs=np(ms,gs),gs=np(Uo,gs),gs=np(el,gs),gs=np(lo,gs);const qf=gs>-1?1:0;qf&&(gs*=$o/gn),Ke.glyphOffsetArray.length>=Xa.MAX_GLYPHS&&Me("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),sn.sortKey!==void 0&&Ke.addToSortKeyRanges(Ke.symbolInstances.length,sn.sortKey),Ke.symbolInstances.emplaceBack(Nt.x,Nt.y,nl.right>=0?nl.right:-1,nl.center>=0?nl.center:-1,nl.left>=0?nl.left:-1,nl.vertical||-1,Fp,Op,Hf,P0,I0,A0,L0,z0,j0,R0,D0,Wr,Zh,Vf,Ai,tl,qf,0,pr,$p,Up,gs)}(i,ht,Ce,o,u,g,Be,i.layers[0],i.collisionBoxArray,t.index,t.sourceLayerIndex,i.index,q,[fe,fe,fe,fe],ue,l,ie,we,ne,A,t,_,d,x,e)};if(ce==="line")for(const Ce of ds(t.geometry,0,0,Jn,Jn)){const ht=Zs(Ce,re,je,o.vertical||L,u,24,Q,i.overscaling,Jn);for(const Ke of ht){const Nt=L;Nt&&Za(i,Nt.text,be,Ke)||De(Ce,Ke)}}else if(ce==="line-center"){for(const Ce of t.geometry)if(Ce.length>1){const ht=$h(Ce,je,o.vertical||L,u,24,Q);ht&&De(Ce,ht)}}else if(t.type==="Polygon")for(const Ce of Ol(t.geometry,0)){const ht=fi(Ce,16);De(Ce[0],new ar(ht.x,ht.y,0))}else if(t.type==="LineString")for(const Ce of t.geometry)De(Ce,new ar(Ce[0].x,Ce[0].y,0));else if(t.type==="Point")for(const Ce of t.geometry)for(const ht of Ce)De([ht],new ar(ht.x,ht.y,0))}const Oo=32640;function Ys(i,t,o,u,g,_,e,r,l,d,x,S,M,A,L){const O=function(ie,re,fe,we,je,ue,ne,ce){const be=we.layout.get("text-rotate").evaluate(ue,{})*Math.PI/180,Ie=[];for(const Be of re.positionedLines)for(const De of Be.positionedGlyphs){if(!De.rect)continue;const Ce=De.rect||{};let ht=4,Ke=!0,Nt=1,Pn=0;const Fn=(je||ce)&&De.vertical,_r=De.metrics.advance*De.scale/2;if(ce&&re.verticalizable){const Zn=(De.scale-1)*gn,Nr=(gn-De.metrics.width*De.scale)/2;Pn=Be.lineOffset/2-(De.imageName?-Nr:Zn)}if(De.imageName){const Zn=ne[De.imageName];Ke=Zn.sdf,Nt=Zn.pixelRatio,ht=1/Nt}const ao=je?[De.x+_r,De.y]:[0,0];let qr=je?[0,0]:[De.x+_r+fe[0],De.y+fe[1]-Pn],dr=[0,0];Fn&&(dr=qr,qr=[0,0]);const Dr=(De.metrics.left-ht)*De.scale-_r+qr[0],Wr=(-De.metrics.top-ht)*De.scale+qr[1],ri=Dr+Ce.w*De.scale/Nt,Ci=Wr+Ce.h*De.scale/Nt,pr=new Xe(Dr,Wr),Zr=new Xe(ri,Wr),ii=new Xe(Dr,Ci),mi=new Xe(ri,Ci);if(Fn){const Zn=new Xe(-_r,_r-Oc),Nr=-Math.PI/2,sn=12-_r,Bi=new Xe(22-sn,-(De.imageName?sn:0)),Xr=new Xe(...dr);pr._rotateAround(Nr,Zn)._add(Bi)._add(Xr),Zr._rotateAround(Nr,Zn)._add(Bi)._add(Xr),ii._rotateAround(Nr,Zn)._add(Bi)._add(Xr),mi._rotateAround(Nr,Zn)._add(Bi)._add(Xr)}if(be){const Zn=Math.sin(be),Nr=Math.cos(be),sn=[Nr,-Zn,Zn,Nr];pr._matMult(sn),Zr._matMult(sn),ii._matMult(sn),mi._matMult(sn)}const Pi=new Xe(0,0),Ii=new Xe(0,0);Ie.push({tl:pr,tr:Zr,bl:ii,br:mi,tex:Ce,writingMode:re.writingMode,glyphOffset:ao,sectionIndex:De.sectionIndex,isSDF:Ke,pixelOffsetTL:Pi,pixelOffsetBR:Ii,minFontScaleX:0,minFontScaleY:0})}return Ie}(0,o,r,g,_,e,u,i.allowVerticalPlacement),q=i.textSizeData;let Q=null;q.kind==="source"?(Q=[oo*g.layout.get("text-size").evaluate(e,{})],Q[0]>Oo&&Me(`${i.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):q.kind==="composite"&&(Q=[oo*A.compositeTextSizes[0].evaluate(e,{},L),oo*A.compositeTextSizes[1].evaluate(e,{},L)],(Q[0]>Oo||Q[1]>Oo)&&Me(`${i.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),i.addSymbols(i.text,O,Q,r,_,e,d,t,l.lineStartIndex,l.lineLength,M,L);for(const ie of x)S[ie]=i.text.placedSymbolArray.length-1;return 4*O.length}function qu(i){for(const t in i)return i[t];return null}function Za(i,t,o,u){const g=i.compareText;if(t in g){const _=g[t];for(let e=_.length-1;e>=0;e--)if(u.dist(_[e])<o)return!0}else g[t]=[];return g[t].push(u),!1}const Zd=Ro.VectorTileFeature.types,Xd=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Kl(i,t,o,u,g,_,e,r,l,d,x,S,M){const A=r?Math.min(Oo,Math.round(r[0])):0,L=r?Math.min(Oo,Math.round(r[1])):0;i.emplaceBack(t,o,Math.round(32*u),Math.round(32*g),_,e,(A<<1)+(l?1:0),L,16*d,16*x,256*S,256*M)}function Jl(i,t,o){i.emplaceBack(t.x,t.y,o),i.emplaceBack(t.x,t.y,o),i.emplaceBack(t.x,t.y,o),i.emplaceBack(t.x,t.y,o)}function Rp(i){for(const t of i.sections)if(_u(t.text))return!0;return!1}class Uh{constructor(t){this.layoutVertexArray=new Pr,this.indexArray=new jn,this.programConfigurations=t,this.segments=new cn,this.dynamicLayoutVertexArray=new Kn,this.opacityVertexArray=new Vn,this.placedSymbolArray=new Re}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(t,o,u,g){this.isEmpty()||(u&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,us.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,jp.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,Xd,!0),this.opacityVertexBuffer.itemSize=1),(u||g)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}ut("SymbolBuffers",Uh);class Wu{constructor(t,o,u){this.layoutVertexArray=new t,this.layoutAttributes=o,this.indexArray=new u,this.segments=new cn,this.collisionVertexArray=new $r}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Dd.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}ut("CollisionBuffers",Wu);class Xa{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(e=>e.id),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ll([]),this.placementViewportMatrix=Ll([]);const o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Xl(this.zoom,o["text-size"]),this.iconSizeData=Xl(this.zoom,o["icon-size"]);const u=this.layers[0].layout,g=u.get("symbol-sort-key"),_=u.get("symbol-z-order");this.canOverlap=qn(u,"text-overlap","text-allow-overlap")!=="never"||qn(u,"icon-overlap","icon-allow-overlap")!=="never"||u.get("text-ignore-placement")||u.get("icon-ignore-placement"),this.sortFeaturesByKey=_!=="viewport-y"&&!g.isConstant(),this.sortFeaturesByY=(_==="viewport-y"||_==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,u.get("symbol-placement")==="point"&&(this.writingModes=u.get("text-writing-mode").map(e=>c.WritingMode[e])),this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id),this.sourceID=t.sourceID}createArrays(){this.text=new Uh(new os(this.layers,this.zoom,t=>/^text/.test(t))),this.icon=new Uh(new os(this.layers,this.zoom,t=>/^icon/.test(t))),this.glyphOffsetArray=new at,this.lineVertexArray=new et,this.symbolInstances=new ze}calculateGlyphDependencies(t,o,u,g,_){for(let e=0;e<t.length;e++)if(o[t.charCodeAt(e)]=!0,(u||g)&&_){const r=hs[t.charAt(e)];r&&(o[r.charCodeAt(0)]=!0)}}populate(t,o,u){const g=this.layers[0],_=g.layout,e=_.get("text-font"),r=_.get("text-field"),l=_.get("icon-image"),d=(r.value.kind!=="constant"||r.value.value instanceof pe&&!r.value.value.isEmpty()||r.value.value.toString().length>0)&&(e.value.kind!=="constant"||e.value.value.length>0),x=l.value.kind!=="constant"||!!l.value.value||Object.keys(l.parameters).length>0,S=_.get("symbol-sort-key");if(this.features=[],!d&&!x)return;const M=o.iconDependencies,A=o.glyphDependencies,L=o.availableImages,O=new Tn(this.zoom);for(const{feature:q,id:Q,index:ie,sourceLayerIndex:re}of t){const fe=g._featureFilter.needGeometry,we=ss(q,fe);if(!g._featureFilter.filter(O,we,u))continue;let je,ue;if(fe||(we.geometry=Ti(q)),d){const ce=g.getValueAndResolveTokens("text-field",we,u,L),be=pe.factory(ce);Rp(be)&&(this.hasRTLText=!0),(!this.hasRTLText||kl()==="unavailable"||this.hasRTLText&&hn.isParsed())&&(je=Bd(be,g,we))}if(x){const ce=g.getValueAndResolveTokens("icon-image",we,u,L);ue=ce instanceof le?ce:le.fromString(ce)}if(!je&&!ue)continue;const ne=this.sortFeaturesByKey?S.evaluate(we,{},u):void 0;if(this.features.push({id:Q,text:je,icon:ue,index:ie,sourceLayerIndex:re,geometry:we.geometry,properties:q.properties,type:Zd[q.type],sortKey:ne}),ue&&(M[ue.name]=!0),je){const ce=e.evaluate(we,{},u).join(","),be=_.get("text-rotation-alignment")!=="viewport"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(c.WritingMode.vertical)>=0;for(const Ie of je.sections)if(Ie.image)M[Ie.image.name]=!0;else{const Be=xo(je.toString()),De=Ie.fontStack||ce,Ce=A[De]=A[De]||{};this.calculateGlyphDependencies(Ie.text,Ce,be,this.allowVerticalPlacement,Be)}}}_.get("symbol-placement")==="line"&&(this.features=function(q){const Q={},ie={},re=[];let fe=0;function we(ce){re.push(q[ce]),fe++}function je(ce,be,Ie){const Be=ie[ce];return delete ie[ce],ie[be]=Be,re[Be].geometry[0].pop(),re[Be].geometry[0]=re[Be].geometry[0].concat(Ie[0]),Be}function ue(ce,be,Ie){const Be=Q[be];return delete Q[be],Q[ce]=Be,re[Be].geometry[0].shift(),re[Be].geometry[0]=Ie[0].concat(re[Be].geometry[0]),Be}function ne(ce,be,Ie){const Be=Ie?be[0][be[0].length-1]:be[0][0];return`${ce}:${Be.x}:${Be.y}`}for(let ce=0;ce<q.length;ce++){const be=q[ce],Ie=be.geometry,Be=be.text?be.text.toString():null;if(!Be){we(ce);continue}const De=ne(Be,Ie),Ce=ne(Be,Ie,!0);if(De in ie&&Ce in Q&&ie[De]!==Q[Ce]){const ht=ue(De,Ce,Ie),Ke=je(De,Ce,re[ht].geometry);delete Q[De],delete ie[Ce],ie[ne(Be,re[Ke].geometry,!0)]=Ke,re[ht].geometry=null}else De in ie?je(De,Ce,Ie):Ce in Q?ue(De,Ce,Ie):(we(ce),Q[De]=fe-1,ie[Ce]=fe-1)}return re.filter(ce=>ce.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((q,Q)=>q.sortKey-Q.sortKey)}update(t,o,u){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,o,this.layers,u),this.icon.programConfigurations.updatePaintArrays(t,o,this.layers,u))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,o){const u=this.lineVertexArray.length;if(t.segment!==void 0){let g=t.dist(o[t.segment+1]),_=t.dist(o[t.segment]);const e={};for(let r=t.segment+1;r<o.length;r++)e[r]={x:o[r].x,y:o[r].y,tileUnitDistanceFromAnchor:g},r<o.length-1&&(g+=o[r+1].dist(o[r]));for(let r=t.segment||0;r>=0;r--)e[r]={x:o[r].x,y:o[r].y,tileUnitDistanceFromAnchor:_},r>0&&(_+=o[r-1].dist(o[r]));for(let r=0;r<o.length;r++){const l=e[r];this.lineVertexArray.emplaceBack(l.x,l.y,l.tileUnitDistanceFromAnchor)}}return{lineStartIndex:u,lineLength:this.lineVertexArray.length-u}}addSymbols(t,o,u,g,_,e,r,l,d,x,S,M){const A=t.indexArray,L=t.layoutVertexArray,O=t.segments.prepareSegment(4*o.length,L,A,this.canOverlap?e.sortKey:void 0),q=this.glyphOffsetArray.length,Q=O.vertexLength,ie=this.allowVerticalPlacement&&r===c.WritingMode.vertical?Math.PI/2:0,re=e.text&&e.text.sections;for(let fe=0;fe<o.length;fe++){const{tl:we,tr:je,bl:ue,br:ne,tex:ce,pixelOffsetTL:be,pixelOffsetBR:Ie,minFontScaleX:Be,minFontScaleY:De,glyphOffset:Ce,isSDF:ht,sectionIndex:Ke}=o[fe],Nt=O.vertexLength,Pn=Ce[1];Kl(L,l.x,l.y,we.x,Pn+we.y,ce.x,ce.y,u,ht,be.x,be.y,Be,De),Kl(L,l.x,l.y,je.x,Pn+je.y,ce.x+ce.w,ce.y,u,ht,Ie.x,be.y,Be,De),Kl(L,l.x,l.y,ue.x,Pn+ue.y,ce.x,ce.y+ce.h,u,ht,be.x,Ie.y,Be,De),Kl(L,l.x,l.y,ne.x,Pn+ne.y,ce.x+ce.w,ce.y+ce.h,u,ht,Ie.x,Ie.y,Be,De),Jl(t.dynamicLayoutVertexArray,l,ie),A.emplaceBack(Nt,Nt+1,Nt+2),A.emplaceBack(Nt+1,Nt+2,Nt+3),O.vertexLength+=4,O.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ce[0]),fe!==o.length-1&&Ke===o[fe+1].sectionIndex||t.programConfigurations.populatePaintArrays(L.length,e,e.index,{},M,re&&re[Ke])}t.placedSymbolArray.emplaceBack(l.x,l.y,q,this.glyphOffsetArray.length-q,Q,d,x,l.segment,u?u[0]:0,u?u[1]:0,g[0],g[1],r,0,!1,0,S)}_addCollisionDebugVertex(t,o,u,g,_,e){return o.emplaceBack(0,0),t.emplaceBack(u.x,u.y,g,_,Math.round(e.x),Math.round(e.y))}addCollisionDebugVertices(t,o,u,g,_,e,r){const l=_.segments.prepareSegment(4,_.layoutVertexArray,_.indexArray),d=l.vertexLength,x=_.layoutVertexArray,S=_.collisionVertexArray,M=r.anchorX,A=r.anchorY;this._addCollisionDebugVertex(x,S,e,M,A,new Xe(t,o)),this._addCollisionDebugVertex(x,S,e,M,A,new Xe(u,o)),this._addCollisionDebugVertex(x,S,e,M,A,new Xe(u,g)),this._addCollisionDebugVertex(x,S,e,M,A,new Xe(t,g)),l.vertexLength+=4;const L=_.indexArray;L.emplaceBack(d,d+1),L.emplaceBack(d+1,d+2),L.emplaceBack(d+2,d+3),L.emplaceBack(d+3,d),l.primitiveLength+=4}addDebugCollisionBoxes(t,o,u,g){for(let _=t;_<o;_++){const e=this.collisionBoxArray.get(_);this.addCollisionDebugVertices(e.x1,e.y1,e.x2,e.y2,g?this.textCollisionBox:this.iconCollisionBox,e.anchorPoint,u)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Wu(gr,Ou.members,yr),this.iconCollisionBox=new Wu(gr,Ou.members,yr);for(let t=0;t<this.symbolInstances.length;t++){const o=this.symbolInstances.get(t);this.addDebugCollisionBoxes(o.textBoxStartIndex,o.textBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.iconBoxStartIndex,o.iconBoxEndIndex,o,!1),this.addDebugCollisionBoxes(o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o,!1)}}_deserializeCollisionBoxesForSymbol(t,o,u,g,_,e,r,l,d){const x={};for(let S=o;S<u;S++){const M=t.get(S);x.textBox={x1:M.x1,y1:M.y1,x2:M.x2,y2:M.y2,anchorPointX:M.anchorPointX,anchorPointY:M.anchorPointY},x.textFeatureIndex=M.featureIndex;break}for(let S=g;S<_;S++){const M=t.get(S);x.verticalTextBox={x1:M.x1,y1:M.y1,x2:M.x2,y2:M.y2,anchorPointX:M.anchorPointX,anchorPointY:M.anchorPointY},x.verticalTextFeatureIndex=M.featureIndex;break}for(let S=e;S<r;S++){const M=t.get(S);x.iconBox={x1:M.x1,y1:M.y1,x2:M.x2,y2:M.y2,anchorPointX:M.anchorPointX,anchorPointY:M.anchorPointY},x.iconFeatureIndex=M.featureIndex;break}for(let S=l;S<d;S++){const M=t.get(S);x.verticalIconBox={x1:M.x1,y1:M.y1,x2:M.x2,y2:M.y2,anchorPointX:M.anchorPointX,anchorPointY:M.anchorPointY},x.verticalIconFeatureIndex=M.featureIndex;break}return x}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){const u=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,u.textBoxStartIndex,u.textBoxEndIndex,u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u.iconBoxStartIndex,u.iconBoxEndIndex,u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,o){const u=t.placedSymbolArray.get(o),g=u.vertexStartIndex+4*u.numGlyphs;for(let _=u.vertexStartIndex;_<g;_+=4)t.indexArray.emplaceBack(_,_+1,_+2),t.indexArray.emplaceBack(_+1,_+2,_+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const o=Math.sin(t),u=Math.cos(t),g=[],_=[],e=[];for(let r=0;r<this.symbolInstances.length;++r){e.push(r);const l=this.symbolInstances.get(r);g.push(0|Math.round(o*l.anchorX+u*l.anchorY)),_.push(l.featureIndex)}return e.sort((r,l)=>g[r]-g[l]||_[l]-_[r]),e}addToSortKeyRanges(t,o){const u=this.sortKeyRanges[this.sortKeyRanges.length-1];u&&u.sortKey===o?u.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const o of this.symbolInstanceIndexes){const u=this.symbolInstances.get(o);this.featureSortOrder.push(u.featureIndex),[u.rightJustifiedTextSymbolIndex,u.centerJustifiedTextSymbolIndex,u.leftJustifiedTextSymbolIndex].forEach((g,_,e)=>{g>=0&&e.indexOf(g)===_&&this.addIndicesForPlacedSymbol(this.text,g)}),u.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,u.verticalPlacedTextSymbolIndex),u.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,u.placedIconSymbolIndex),u.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,u.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}ut("SymbolBucket",Xa,{omit:["layers","collisionBoxArray","features","compareText"]}),Xa.MAX_GLYPHS=65535,Xa.addDynamicAttributes=Jl;const Ka=new Xn({"symbol-placement":new vt(Le.layout_symbol["symbol-placement"]),"symbol-spacing":new vt(Le.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new vt(Le.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Et(Le.layout_symbol["symbol-sort-key"]),"symbol-z-order":new vt(Le.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new vt(Le.layout_symbol["icon-allow-overlap"]),"icon-overlap":new vt(Le.layout_symbol["icon-overlap"]),"icon-ignore-placement":new vt(Le.layout_symbol["icon-ignore-placement"]),"icon-optional":new vt(Le.layout_symbol["icon-optional"]),"icon-rotation-alignment":new vt(Le.layout_symbol["icon-rotation-alignment"]),"icon-size":new Et(Le.layout_symbol["icon-size"]),"icon-text-fit":new vt(Le.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new vt(Le.layout_symbol["icon-text-fit-padding"]),"icon-image":new Et(Le.layout_symbol["icon-image"]),"icon-rotate":new Et(Le.layout_symbol["icon-rotate"]),"icon-padding":new Et(Le.layout_symbol["icon-padding"]),"icon-keep-upright":new vt(Le.layout_symbol["icon-keep-upright"]),"icon-offset":new Et(Le.layout_symbol["icon-offset"]),"icon-anchor":new Et(Le.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new vt(Le.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new vt(Le.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new vt(Le.layout_symbol["text-rotation-alignment"]),"text-field":new Et(Le.layout_symbol["text-field"]),"text-font":new Et(Le.layout_symbol["text-font"]),"text-size":new Et(Le.layout_symbol["text-size"]),"text-max-width":new Et(Le.layout_symbol["text-max-width"]),"text-line-height":new vt(Le.layout_symbol["text-line-height"]),"text-letter-spacing":new Et(Le.layout_symbol["text-letter-spacing"]),"text-justify":new Et(Le.layout_symbol["text-justify"]),"text-radial-offset":new Et(Le.layout_symbol["text-radial-offset"]),"text-variable-anchor":new vt(Le.layout_symbol["text-variable-anchor"]),"text-anchor":new Et(Le.layout_symbol["text-anchor"]),"text-max-angle":new vt(Le.layout_symbol["text-max-angle"]),"text-writing-mode":new vt(Le.layout_symbol["text-writing-mode"]),"text-rotate":new Et(Le.layout_symbol["text-rotate"]),"text-padding":new vt(Le.layout_symbol["text-padding"]),"text-keep-upright":new vt(Le.layout_symbol["text-keep-upright"]),"text-transform":new Et(Le.layout_symbol["text-transform"]),"text-offset":new Et(Le.layout_symbol["text-offset"]),"text-allow-overlap":new vt(Le.layout_symbol["text-allow-overlap"]),"text-overlap":new vt(Le.layout_symbol["text-overlap"]),"text-ignore-placement":new vt(Le.layout_symbol["text-ignore-placement"]),"text-optional":new vt(Le.layout_symbol["text-optional"])});var Vh={paint:new Xn({"icon-opacity":new Et(Le.paint_symbol["icon-opacity"]),"icon-color":new Et(Le.paint_symbol["icon-color"]),"icon-halo-color":new Et(Le.paint_symbol["icon-halo-color"]),"icon-halo-width":new Et(Le.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Et(Le.paint_symbol["icon-halo-blur"]),"icon-translate":new vt(Le.paint_symbol["icon-translate"]),"icon-translate-anchor":new vt(Le.paint_symbol["icon-translate-anchor"]),"text-opacity":new Et(Le.paint_symbol["text-opacity"]),"text-color":new Et(Le.paint_symbol["text-color"],{runtimeType:er,getOverride:i=>i.textColor,hasOverride:i=>!!i.textColor}),"text-halo-color":new Et(Le.paint_symbol["text-halo-color"]),"text-halo-width":new Et(Le.paint_symbol["text-halo-width"]),"text-halo-blur":new Et(Le.paint_symbol["text-halo-blur"]),"text-translate":new vt(Le.paint_symbol["text-translate"]),"text-translate-anchor":new vt(Le.paint_symbol["text-translate-anchor"])}),layout:Ka};class Ja{constructor(t){if(t.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:fr,this.defaultValue=t}evaluate(t){if(t.formattedSection){const o=this.defaultValue.property.overrides;if(o&&o.hasOverride(t.formattedSection))return o.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}ut("FormatSectionOverride",Ja,{omit:["defaultValue"]});class Wc extends Cr{constructor(t){super(t,Vh)}recalculate(t,o){if(super.recalculate(t,o),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const u=this.layout.get("text-writing-mode");if(u){const g=[];for(const _ of u)g.indexOf(_)<0&&g.push(_);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,o,u,g){const _=this.layout.get(t).evaluate(o,{},u,g),e=this._unevaluatedLayout._values[t];return e.isDataDriven()||Is(e.value)||!_?_:function(r,l){return l.replace(/{([^{}]+)}/g,(d,x)=>x in r?String(r[x]):"")}(o.properties,_)}createBucket(t){return new Xa(t)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const t of Vh.paint.overridableProperties){if(!Wc.hasPaintOverride(this.layout,t))continue;const o=this.paint.get(t),u=new Ja(o),g=new xc(u,o.property.specification);let _=null;_=o.value.kind==="constant"||o.value.kind==="source"?new pl("source",g):new _a("composite",g,o.value.zoomStops),this.paint._values[t]=new Or(o.property,_,o.parameters)}}_handleOverridablePaintPropertyUpdate(t,o,u){return!(!this.layout||o.isDataDriven()||u.isDataDriven())&&Wc.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,o){const u=t.get("text-field"),g=Vh.paint.properties[o];let _=!1;const e=r=>{for(const l of r)if(g.overrides&&g.overrides.hasOverride(l))return void(_=!0)};if(u.value.kind==="constant"&&u.value.value instanceof pe)e(u.value.value.sections);else if(u.value.kind==="source"){const r=d=>{_||(d instanceof pt&&$e(d.value)===Gr?e(d.value.sections):d instanceof Ms?e(d.sections):d.eachChild(r))},l=u.value;l._styleExpression&&r(l._styleExpression.expression)}return _}}function qn(i,t,o){let u="never";const g=i.get(t);return g?u=g:i.get(o)&&(u="always"),u}var Dp={paint:new Xn({"background-color":new vt(Le.paint_background["background-color"]),"background-pattern":new So(Le.paint_background["background-pattern"]),"background-opacity":new vt(Le.paint_background["background-opacity"])})},Kd={paint:new Xn({"raster-opacity":new vt(Le.paint_raster["raster-opacity"]),"raster-hue-rotate":new vt(Le.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new vt(Le.paint_raster["raster-brightness-min"]),"raster-brightness-max":new vt(Le.paint_raster["raster-brightness-max"]),"raster-saturation":new vt(Le.paint_raster["raster-saturation"]),"raster-contrast":new vt(Le.paint_raster["raster-contrast"]),"raster-resampling":new vt(Le.paint_raster["raster-resampling"]),"raster-fade-duration":new vt(Le.paint_raster["raster-fade-duration"])})};class Np extends Cr{constructor(t){super(t,{}),this.onAdd=o=>{this.implementation.onAdd&&this.implementation.onAdd(o,o.painter.context.gl)},this.onRemove=o=>{this.implementation.onRemove&&this.implementation.onRemove(o,o.painter.context.gl)},this.implementation=t}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const Bp={circle:class extends Cr{constructor(i){super(i,Al)}createBucket(i){return new to(i)}queryRadius(i){const t=i;return cs("circle-radius",this,t)+cs("circle-stroke-width",this,t)+Us(this.paint.get("circle-translate"))}queryIntersectsFeature(i,t,o,u,g,_,e,r){const l=zo(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),_.angle,e),d=this.paint.get("circle-radius").evaluate(t,o)+this.paint.get("circle-stroke-width").evaluate(t,o),x=this.paint.get("circle-pitch-alignment")==="map",S=x?l:function(A,L){return A.map(O=>vr(O,L))}(l,r),M=x?d*e:d;for(const A of u)for(const L of A){const O=x?L:vr(L,r);let q=M;const Q=Bn([],[L.x,L.y,0,1],r);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?q*=Q[3]/_.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(q*=_.cameraToCenterDistance/Q[3]),ph(S,O,q))return!0}return!1}},heatmap:class extends Cr{constructor(i){super(i,Ac),this._updateColorRamp()}createBucket(i){return new Ic(i)}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Au({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends Cr{constructor(i){super(i,jo)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends Cr{constructor(i){super(i,ju)}recalculate(i,t){super.recalculate(i,t);const o=this.paint._values["fill-outline-color"];o.value.kind==="constant"&&o.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new ki(i)}queryRadius(){return Us(this.paint.get("fill-translate"))}queryIntersectsFeature(i,t,o,u,g,_,e){return fh(zo(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),_.angle,e),u)}isTileClipped(){return!0}},"fill-extrusion":class extends Cr{constructor(i){super(i,Ph)}createBucket(i){return new Nu(i)}queryRadius(){return Us(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(i,t,o,u,g,_,e,r){const l=zo(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),_.angle,e),d=this.paint.get("fill-extrusion-height").evaluate(t,o),x=this.paint.get("fill-extrusion-base").evaluate(t,o),S=function(A,L,O,q){const Q=[];for(const ie of A){const re=[ie.x,ie.y,0,1];Bn(re,re,L),Q.push(new Xe(re[0]/re[3],re[1]/re[3]))}return Q}(l,r),M=function(A,L,O,q){const Q=[],ie=[],re=q[8]*L,fe=q[9]*L,we=q[10]*L,je=q[11]*L,ue=q[8]*O,ne=q[9]*O,ce=q[10]*O,be=q[11]*O;for(const Ie of A){const Be=[],De=[];for(const Ce of Ie){const ht=Ce.x,Ke=Ce.y,Nt=q[0]*ht+q[4]*Ke+q[12],Pn=q[1]*ht+q[5]*Ke+q[13],Fn=q[2]*ht+q[6]*Ke+q[14],_r=q[3]*ht+q[7]*Ke+q[15],ao=Fn+we,qr=_r+je,dr=Nt+ue,Dr=Pn+ne,Wr=Fn+ce,ri=_r+be,Ci=new Xe((Nt+re)/qr,(Pn+fe)/qr);Ci.z=ao/qr,Be.push(Ci);const pr=new Xe(dr/ri,Dr/ri);pr.z=Wr/ri,De.push(pr)}Q.push(Be),ie.push(De)}return[Q,ie]}(u,x,d,r);return function(A,L,O){let q=1/0;fh(O,L)&&(q=Bu(O,L[0]));for(let Q=0;Q<L.length;Q++){const ie=L[Q],re=A[Q];for(let fe=0;fe<ie.length-1;fe++){const we=ie[fe],je=[we,ie[fe+1],re[fe+1],re[fe],we];as(O,je)&&(q=Math.min(q,Bu(O,je)))}}return q!==1/0&&q}(M[0],M[1],S)}},line:class extends Cr{constructor(i){super(i,Fu),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(i){i==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof xs,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(i,t){super.recalculate(i,t),this.paint._values["line-floorwidth"]=jh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new zh(i)}queryRadius(i){const t=i,o=Bc(cs("line-width",this,t),cs("line-gap-width",this,t)),u=cs("line-offset",this,t);return o/2+Math.abs(u)+Us(this.paint.get("line-translate"))}queryIntersectsFeature(i,t,o,u,g,_,e){const r=zo(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),_.angle,e),l=e/2*Bc(this.paint.get("line-width").evaluate(t,o),this.paint.get("line-gap-width").evaluate(t,o)),d=this.paint.get("line-offset").evaluate(t,o);return d&&(u=function(x,S){const M=[];for(let A=0;A<x.length;A++){const L=x[A],O=[];for(let q=0;q<L.length;q++){const Q=L[q-1],ie=L[q],re=L[q+1],fe=q===0?new Xe(0,0):ie.sub(Q)._unit()._perp(),we=q===L.length-1?new Xe(0,0):re.sub(ie)._unit()._perp(),je=fe._add(we)._unit(),ue=je.x*we.x+je.y*we.y;ue!==0&&je._mult(1/ue),O.push(je._mult(S)._add(ie))}M.push(O)}return M}(u,d*e)),function(x,S,M){for(let A=0;A<S.length;A++){const L=S[A];if(x.length>=3){for(let O=0;O<L.length;O++)if(Ao(x,L[O]))return!0}if(ls(x,L,M))return!0}return!1}(r,u,l)}isTileClipped(){return!0}},symbol:Wc,background:class extends Cr{constructor(i){super(i,Dp)}},raster:class extends Cr{constructor(i){super(i,Kd)}}};class Jd{constructor(t){this._callback=t,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Hh=63710088e-1;class Wn{constructor(t,o){if(isNaN(t)||isNaN(o))throw new Error(`Invalid LngLat object: (${t}, ${o})`);if(this.lng=+t,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Wn(me(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const o=Math.PI/180,u=this.lat*o,g=t.lat*o,_=Math.sin(u)*Math.sin(g)+Math.cos(u)*Math.cos(g)*Math.cos((t.lng-this.lng)*o);return Hh*Math.acos(Math.min(_,1))}toBounds(t=0){const o=360*t/40075017,u=o/Math.cos(Math.PI/180*this.lat);return new Rr(new Wn(this.lng-u,this.lat-o),new Wn(this.lng+u,this.lat+o))}static convert(t){if(t instanceof Wn)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new Wn(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new Wn(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Rr{constructor(t,o){t&&(o?this.setSouthWest(t).setNorthEast(o):t.length===4?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}setNorthEast(t){return this._ne=t instanceof Wn?new Wn(t.lng,t.lat):Wn.convert(t),this}setSouthWest(t){return this._sw=t instanceof Wn?new Wn(t.lng,t.lat):Wn.convert(t),this}extend(t){const o=this._sw,u=this._ne;let g,_;if(t instanceof Wn)g=t,_=t;else{if(!(t instanceof Rr))return Array.isArray(t)?t.length===4||t.every(Array.isArray)?this.extend(Rr.convert(t)):this.extend(Wn.convert(t)):this;if(g=t._sw,_=t._ne,!g||!_)return this}return o||u?(o.lng=Math.min(g.lng,o.lng),o.lat=Math.min(g.lat,o.lat),u.lng=Math.max(_.lng,u.lng),u.lat=Math.max(_.lat,u.lat)):(this._sw=new Wn(g.lng,g.lat),this._ne=new Wn(_.lng,_.lat)),this}getCenter(){return new Wn((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Wn(this.getWest(),this.getNorth())}getSouthEast(){return new Wn(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:o,lat:u}=Wn.convert(t);let g=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&g}static convert(t){return t instanceof Rr?t:t&&new Rr(t)}}const Zu=2*Math.PI*Hh;function Yd(i){return Zu*Math.cos(i*Math.PI/180)}function ps(i){return(180+i)/360}function Zc(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function Qs(i,t){return i/Yd(t)}function Yl(i){return 360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90}class Ql{constructor(t,o,u=0){this.x=+t,this.y=+o,this.z=+u}static fromLngLat(t,o=0){const u=Wn.convert(t);return new Ql(ps(u.lng),Zc(u.lat),Qs(o,u.lat))}toLngLat(){return new Wn(360*this.x-180,Yl(this.y))}toAltitude(){return this.z*Yd(Yl(this.y))}meterInMercatorCoordinateUnits(){return 1/Zu*(t=Yl(this.y),1/Math.cos(t*Math.PI/180));var t}}function Xu(i,t,o){var u=2*Math.PI*6378137/256/Math.pow(2,o);return[i*u-2*Math.PI*6378137/2,t*u-2*Math.PI*6378137/2]}class Gh{constructor(t,o,u){if(t<0||t>25||u<0||u>=Math.pow(2,t)||o<0||o>=Math.pow(2,t))throw new Error(`x=${o}, y=${u}, z=${t} outside of bounds. 0<=x<${Math.pow(2,t)}, 0<=y<${Math.pow(2,t)} 0<=z<=25 `);this.z=t,this.x=o,this.y=u,this.key=ec(0,t,t,o,u)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,o,u){const g=(e=this.y,r=this.z,l=Xu(256*(_=this.x),256*(e=Math.pow(2,r)-e-1),r),d=Xu(256*(_+1),256*(e+1),r),l[0]+","+l[1]+","+d[0]+","+d[1]);var _,e,r,l,d;const x=function(S,M,A){let L,O="";for(let q=S;q>0;q--)L=1<<q-1,O+=(M&L?1:0)+(A&L?2:0);return O}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(u==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,o>1?"@2x":"").replace(/{quadkey}/g,x).replace(/{bbox-epsg-3857}/g,g)}isChildOf(t){const o=this.z-t.z;return o>0&&t.x===this.x>>o&&t.y===this.y>>o}getTilePoint(t){const o=Math.pow(2,this.z);return new Xe((t.x*o-this.x)*Jn,(t.y*o-this.y)*Jn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Ku{constructor(t,o){this.wrap=t,this.canonical=o,this.key=ec(t,o.z,o.z,o.x,o.y)}}class Mi{constructor(t,o,u,g,_){if(t<u)throw new Error(`overscaledZ should be >= z; overscaledZ = ${t}; z = ${u}`);this.overscaledZ=t,this.wrap=o,this.canonical=new Gh(u,+g,+_),this.key=ec(o,t,u,g,_)}clone(){return new Mi(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const o=this.canonical.z-t;return t>this.canonical.z?new Mi(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Mi(t,this.wrap,t,this.canonical.x>>o,this.canonical.y>>o)}calculateScaledKey(t,o){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const u=this.canonical.z-t;return t>this.canonical.z?ec(this.wrap*+o,t,this.canonical.z,this.canonical.x,this.canonical.y):ec(this.wrap*+o,t,t,this.canonical.x>>u,this.canonical.y>>u)}isChildOf(t){if(t.wrap!==this.wrap)return!1;const o=this.canonical.z-t.canonical.z;return t.overscaledZ===0||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>o&&t.canonical.y===this.canonical.y>>o}children(t){if(this.overscaledZ>=t)return[new Mi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const o=this.canonical.z+1,u=2*this.canonical.x,g=2*this.canonical.y;return[new Mi(o,this.wrap,o,u,g),new Mi(o,this.wrap,o,u+1,g),new Mi(o,this.wrap,o,u,g+1),new Mi(o,this.wrap,o,u+1,g+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new Mi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new Mi(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Ku(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new Ql(t.x-this.wrap,t.y))}}function ec(i,t,o,u,g){(i*=2)<0&&(i=-1*i-1);const _=1<<o;return(_*_*i+_*g+u).toString(36)+o.toString(36)+t.toString(36)}ut("CanonicalTileID",Gh),ut("OverscaledTileID",Mi,{omit:["posMatrix"]});class qh{constructor(t,o,u){if(this.uid=t,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(u&&u!=="mapbox"&&u!=="terrarium")return void Me(`"${u}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=o.height;const g=this.dim=o.height-2;this.data=new Uint32Array(o.data.buffer),this.encoding=u||"mapbox";for(let _=0;_<g;_++)this.data[this._idx(-1,_)]=this.data[this._idx(0,_)],this.data[this._idx(g,_)]=this.data[this._idx(g-1,_)],this.data[this._idx(_,-1)]=this.data[this._idx(_,0)],this.data[this._idx(_,g)]=this.data[this._idx(_,g-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(g,-1)]=this.data[this._idx(g-1,0)],this.data[this._idx(-1,g)]=this.data[this._idx(0,g-1)],this.data[this._idx(g,g)]=this.data[this._idx(g-1,g-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let _=0;_<g;_++)for(let e=0;e<g;e++){const r=this.get(_,e);r>this.max&&(this.max=r),r<this.min&&(this.min=r)}}get(t,o){const u=new Uint8Array(this.data.buffer),g=4*this._idx(t,o);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(u[g],u[g+1],u[g+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(t,o){if(t<-1||t>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(t+1)}_unpackMapbox(t,o,u){return(256*t*256+256*o+u)/10-1e4}_unpackTerrarium(t,o,u){return 256*t+o+u/256-32768}getPixels(){return new ti({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,o,u){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let g=o*this.dim,_=o*this.dim+this.dim,e=u*this.dim,r=u*this.dim+this.dim;switch(o){case-1:g=_-1;break;case 1:_=g+1}switch(u){case-1:e=r-1;break;case 1:r=e+1}const l=-o*this.dim,d=-u*this.dim;for(let x=e;x<r;x++)for(let S=g;S<_;S++)this.data[this._idx(S,x)]=t.data[this._idx(S+l,x+d)]}}ut("DEMData",qh);class Xc{constructor(t){this._stringToNumber={},this._numberToString=[];for(let o=0;o<t.length;o++){const u=t[o];this._stringToNumber[u]=o,this._numberToString[o]=u}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${t} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[t]}}class Kc{constructor(t,o,u,g,_){this.type="Feature",this._vectorTileFeature=t,t._z=o,t._x=u,t._y=g,this.properties=t.properties,this.id=_}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const o in this)o!=="_geometry"&&o!=="_vectorTileFeature"&&(t[o]=this[o]);return t}}class Wh{constructor(t,o){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new ns(Jn,16,0),this.grid3D=new ns(Jn,16,0),this.featureIndexArray=new Dt,this.promoteId=o}insert(t,o,u,g,_,e){const r=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(u,g,_);const l=e?this.grid3D:this.grid;for(let d=0;d<o.length;d++){const x=o[d],S=[1/0,1/0,-1/0,-1/0];for(let M=0;M<x.length;M++){const A=x[M];S[0]=Math.min(S[0],A.x),S[1]=Math.min(S[1],A.y),S[2]=Math.max(S[2],A.x),S[3]=Math.max(S[3],A.y)}S[0]<Jn&&S[1]<Jn&&S[2]>=0&&S[3]>=0&&l.insert(r,S[0],S[1],S[2],S[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Ro.VectorTile(new Rh(this.rawTileData)).layers,this.sourceLayerCoder=new Xc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,o,u,g){this.loadVTLayers();const _=t.params||{},e=Jn/t.tileSize/t.scale,r=yl(_.filter),l=t.queryGeometry,d=t.queryPadding*e,x=Qd(l),S=this.grid.query(x.minX-d,x.minY-d,x.maxX+d,x.maxY+d),M=Qd(t.cameraQueryGeometry),A=this.grid3D.query(M.minX-d,M.minY-d,M.maxX+d,M.maxY+d,(q,Q,ie,re)=>function(fe,we,je,ue,ne){for(const be of fe)if(we<=be.x&&je<=be.y&&ue>=be.x&&ne>=be.y)return!0;const ce=[new Xe(we,je),new Xe(we,ne),new Xe(ue,ne),new Xe(ue,je)];if(fe.length>2){for(const be of ce)if(Ao(fe,be))return!0}for(let be=0;be<fe.length-1;be++)if(Lo(fe[be],fe[be+1],ce))return!0;return!1}(t.cameraQueryGeometry,q-d,Q-d,ie+d,re+d));for(const q of A)S.push(q);S.sort(ep);const L={};let O;for(let q=0;q<S.length;q++){const Q=S[q];if(Q===O)continue;O=Q;const ie=this.featureIndexArray.get(Q);let re=null;this.loadMatchingFeature(L,ie.bucketIndex,ie.sourceLayerIndex,ie.featureIndex,r,_.layers,_.availableImages,o,u,g,(fe,we,je)=>(re||(re=Ti(fe)),we.queryIntersectsFeature(l,fe,je,re,this.z,t.transform,e,t.pixelPosMatrix)))}return L}loadMatchingFeature(t,o,u,g,_,e,r,l,d,x,S){const M=this.bucketLayerIDs[o];if(e&&!function(q,Q){for(let ie=0;ie<q.length;ie++)if(Q.indexOf(q[ie])>=0)return!0;return!1}(e,M))return;const A=this.sourceLayerCoder.decode(u),L=this.vtLayers[A].feature(g);if(_.needGeometry){const q=ss(L,!0);if(!_.filter(new Tn(this.tileID.overscaledZ),q,this.tileID.canonical))return}else if(!_.filter(new Tn(this.tileID.overscaledZ),L))return;const O=this.getId(L,A);for(let q=0;q<M.length;q++){const Q=M[q];if(e&&e.indexOf(Q)<0)continue;const ie=l[Q];if(!ie)continue;let re={};O&&x&&(re=x.getState(ie.sourceLayer||"_geojsonTileLayer",O));const fe=he({},d[Q]);fe.paint=Ju(fe.paint,ie.paint,L,re,r),fe.layout=Ju(fe.layout,ie.layout,L,re,r);const we=!S||S(L,ie,re);if(!we)continue;const je=new Kc(L,this.z,this.x,this.y,O);je.layer=fe;let ue=t[Q];ue===void 0&&(ue=t[Q]=[]),ue.push({featureIndex:g,feature:je,intersectionZ:we})}}lookupSymbolFeatures(t,o,u,g,_,e,r,l){const d={};this.loadVTLayers();const x=yl(_);for(const S of t)this.loadMatchingFeature(d,u,g,S,x,e,r,l,o);return d}hasLayer(t){for(const o of this.bucketLayerIDs)for(const u of o)if(t===u)return!0;return!1}getId(t,o){let u=t.id;return this.promoteId&&(u=t.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[o]],typeof u=="boolean"&&(u=Number(u))),u}}function Ju(i,t,o,u,g){return _e(i,(_,e)=>{const r=t instanceof Aa?t.get(e):null;return r&&r.evaluate?r.evaluate(o,u,g):r})}function Qd(i){let t=1/0,o=1/0,u=-1/0,g=-1/0;for(const _ of i)t=Math.min(t,_.x),o=Math.min(o,_.y),u=Math.max(u,_.x),g=Math.max(g,_.y);return{minX:t,minY:o,maxX:u,maxY:g}}function ep(i,t){return t-i}var Jc;ut("FeatureIndex",Wh,{omit:["rawTileData","sourceLayerCoder"]}),c.PerformanceMarkers=void 0,(Jc=c.PerformanceMarkers||(c.PerformanceMarkers={})).create="create",Jc.load="load",Jc.fullLoad="fullLoad";let Ya=null,Qa=[];const tc=1e3/30,tp={mark(i){performance.mark(i)},frame(i){const t=i;Ya!=null&&Qa.push(t-Ya),Ya=t},clearMetrics(){Ya=null,Qa=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const i in c.PerformanceMarkers)performance.clearMarks(c.PerformanceMarkers[i])},getPerformanceMetrics(){performance.measure("loadTime",c.PerformanceMarkers.create,c.PerformanceMarkers.load),performance.measure("fullLoadTime",c.PerformanceMarkers.create,c.PerformanceMarkers.fullLoad);const i=performance.getEntriesByName("loadTime")[0].duration,t=performance.getEntriesByName("fullLoadTime")[0].duration,o=Qa.length,u=1/(Qa.reduce((_,e)=>_+e,0)/o/1e3),g=Qa.filter(_=>_>tc).reduce((_,e)=>_+(e-tc)/tc,0);return{loadTime:i,fullLoadTime:t,fps:u,percentDroppedFrames:g/(o+g)*100}}};c.AJAXError=nr,c.ARRAY_TYPE=Ar,c.Actor=class{constructor(i,t,o){this.target=i,this.parent=t,this.mapId=o,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},oe(["receive","process"],this),this.invoker=new Jd(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ge()?i:window}send(i,t,o,u,g=!1){const _=Math.round(1e18*Math.random()).toString(36).substring(0,10);o&&(this.callbacks[_]=o);const e=At(this.globalScope)?void 0:[];return this.target.postMessage({id:_,type:i,hasCallback:!!o,targetMapId:u,mustQueue:g,sourceMapId:this.mapId,data:Ki(t,e)},e),{cancel:()=>{o&&delete this.callbacks[_],this.target.postMessage({id:_,type:"<cancel>",targetMapId:u,sourceMapId:this.mapId})}}}receive(i){const t=i.data,o=t.id;if(o&&(!t.targetMapId||this.mapId===t.targetMapId))if(t.type==="<cancel>"){delete this.tasks[o];const u=this.cancelCallbacks[o];delete this.cancelCallbacks[o],u&&u()}else Ge()||t.mustQueue?(this.tasks[o]=t,this.taskQueue.push(o),this.invoker.trigger()):this.processTask(o,t)}process(){if(!this.taskQueue.length)return;const i=this.taskQueue.shift(),t=this.tasks[i];delete this.tasks[i],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(i,t)}processTask(i,t){if(t.type==="<response>"){const o=this.callbacks[i];delete this.callbacks[i],o&&(t.error?o(Ji(t.error)):o(null,Ji(t.data)))}else{let o=!1;const u=At(this.globalScope)?void 0:[],g=t.hasCallback?(r,l)=>{o=!0,delete this.cancelCallbacks[i],this.target.postMessage({id:i,type:"<response>",sourceMapId:this.mapId,error:r?Ki(r):null,data:Ki(l,u)},u)}:r=>{o=!0};let _=null;const e=Ji(t.data);if(this.parent[t.type])_=this.parent[t.type](t.sourceMapId,e,g);else if(this.parent.getWorkerSource){const r=t.type.split(".");_=this.parent.getWorkerSource(t.sourceMapId,r[0],e.source)[r[1]](e,g)}else g(new Error(`Could not find function ${t.type}`));!o&&_&&_.cancel&&(this.cancelCallbacks[i]=_.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},c.AlphaImage=Fa,c.CanonicalTileID=Gh,c.CollisionBoxArray=Se,c.CollisionCircleLayoutArray=class extends z{},c.Color=G,c.DEMData=qh,c.DataConstantProperty=vt,c.DictionaryCoder=Xc,c.EXTENT=Jn,c.ErrorEvent=Fr,c.EvaluationParameters=Tn,c.Event=On,c.Evented=Hr,c.FeatureIndex=Wh,c.FillBucket=ki,c.FillExtrusionBucket=Nu,c.GeoJSONFeature=Kc,c.ImageAtlas=Oh,c.ImagePosition=Vu,c.LineBucket=zh,c.LineStripIndexArray=class extends xe{},c.LngLat=Wn,c.LngLatBounds=Rr,c.MercatorCoordinate=Ql,c.ONE_EM=gn,c.OverscaledTileID=Mi,c.PerformanceUtils=tp,c.PosArray=Gt,c.Properties=Xn,c.QuadTriangleArray=class extends B{},c.RGBAImage=ti,c.RasterBoundsArray=class extends ui{},c.RequestPerformance=class{constructor(i){this._marks={start:[i.url,"start"].join("#"),end:[i.url,"end"].join("#"),measure:i.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let i=performance.getEntriesByName(this._marks.measure);return i.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),i=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),i}},c.ResourceType=br,c.SegmentVector=cn,c.SymbolBucket=Xa,c.Transitionable=Ml,c.TriangleIndexArray=jn,c.Uniform1f=Os,c.Uniform1i=class extends Ir{constructor(i,t){super(i,t),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))}},c.Uniform2f=class extends Ir{constructor(i,t){super(i,t),this.current=[0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))}},c.Uniform3f=class extends Ir{constructor(i,t){super(i,t),this.current=[0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))}},c.Uniform4f=Ra,c.UniformColor=Co,c.UniformMatrix4f=class extends Ir{constructor(i,t){super(i,t),this.current=Su}set(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(let t=1;t<16;t++)if(i[t]!==this.current[t]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}}},c.UnwrappedTileID=Ku,c.ValidationError=Ze,c.ZoomHistory=zs,c.add=function(i,t,o){return i[0]=t[0]+o[0],i[1]=t[1]+o[1],i[2]=t[2]+o[2],i},c.addDynamicAttributes=Jl,c.asyncAll=function(i,t,o){if(!i.length)return o(null,[]);let u=i.length;const g=new Array(i.length);let _=null;i.forEach((e,r)=>{t(e,(l,d)=>{l&&(_=l),g[r]=d,--u==0&&o(_,g)})})},c.bezier=V,c.bindAll=oe,c.cacheEntryPossiblyAdded=function(i){gt++,gt>Ue&&(i.getActor().send("enforceCacheSizeLimit",ve),gt=0)},c.clamp=U,c.clearTileCache=function(i){const t=caches.delete(lt);i&&t.catch(i).then(()=>i())},c.clipLine=ds,c.clone=function(i){var t=new Ar(16);return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],t},c.clone$1=Ee,c.clone$2=function(i){var t=new Ar(3);return t[0]=i[0],t[1]=i[1],t[2]=i[2],t},c.collisionCircleLayout=Nd,c.config=We,c.copy=function(i,t){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],i},c.create=function(){var i=new Ar(16);return Ar!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0),i[0]=1,i[5]=1,i[10]=1,i[15]=1,i},c.create$1=Hn,c.createExpression=xa,c.createFilter=yl,c.createLayout=tr,c.createStyleLayer=function(i){return i.type==="custom"?new Np(i):new Bp[i.type](i)},c.cross=function(i,t,o){var u=t[0],g=t[1],_=t[2],e=o[0],r=o[1],l=o[2];return i[0]=g*l-_*r,i[1]=_*e-u*l,i[2]=u*r-g*e,i},c.dot=function(i,t){return i[0]*t[0]+i[1]*t[1]+i[2]*t[2]},c.dot$1=function(i,t){return i[0]*t[0]+i[1]*t[1]+i[2]*t[2]+i[3]*t[3]},c.ease=$,c.emitValidationErrors=Sl,c.enforceCacheSizeLimit=function(i){Mt(),nt&&nt.then(t=>{t.keys().then(o=>{for(let u=0;u<o.length-i;u++)t.delete(o[u])})})},c.equals=function(i,t){var o=i[0],u=i[1],g=i[2],_=i[3],e=i[4],r=i[5],l=i[6],d=i[7],x=i[8],S=i[9],M=i[10],A=i[11],L=i[12],O=i[13],q=i[14],Q=i[15],ie=t[0],re=t[1],fe=t[2],we=t[3],je=t[4],ue=t[5],ne=t[6],ce=t[7],be=t[8],Ie=t[9],Be=t[10],De=t[11],Ce=t[12],ht=t[13],Ke=t[14],Nt=t[15];return Math.abs(o-ie)<=Ur*Math.max(1,Math.abs(o),Math.abs(ie))&&Math.abs(u-re)<=Ur*Math.max(1,Math.abs(u),Math.abs(re))&&Math.abs(g-fe)<=Ur*Math.max(1,Math.abs(g),Math.abs(fe))&&Math.abs(_-we)<=Ur*Math.max(1,Math.abs(_),Math.abs(we))&&Math.abs(e-je)<=Ur*Math.max(1,Math.abs(e),Math.abs(je))&&Math.abs(r-ue)<=Ur*Math.max(1,Math.abs(r),Math.abs(ue))&&Math.abs(l-ne)<=Ur*Math.max(1,Math.abs(l),Math.abs(ne))&&Math.abs(d-ce)<=Ur*Math.max(1,Math.abs(d),Math.abs(ce))&&Math.abs(x-be)<=Ur*Math.max(1,Math.abs(x),Math.abs(be))&&Math.abs(S-Ie)<=Ur*Math.max(1,Math.abs(S),Math.abs(Ie))&&Math.abs(M-Be)<=Ur*Math.max(1,Math.abs(M),Math.abs(Be))&&Math.abs(A-De)<=Ur*Math.max(1,Math.abs(A),Math.abs(De))&&Math.abs(L-Ce)<=Ur*Math.max(1,Math.abs(L),Math.abs(Ce))&&Math.abs(O-ht)<=Ur*Math.max(1,Math.abs(O),Math.abs(ht))&&Math.abs(q-Ke)<=Ur*Math.max(1,Math.abs(q),Math.abs(Ke))&&Math.abs(Q-Nt)<=Ur*Math.max(1,Math.abs(Q),Math.abs(Nt))},c.evaluateSizeForFeature=function(i,{uSize:t,uSizeT:o},{lowerSize:u,upperSize:g}){return i.kind==="source"?u/oo:i.kind==="composite"?zn(u/oo,g/oo,o):t},c.evaluateSizeForZoom=function(i,t){let o=0,u=0;if(i.kind==="constant")u=i.layoutSize;else if(i.kind!=="source"){const{interpolationType:g,minZoom:_,maxZoom:e}=i,r=g?U(cr.interpolationFactor(g,t,_,e),0,1):0;i.kind==="camera"?u=zn(i.minSize,i.maxSize,r):o=r}return{uSizeT:o,uSize:u}},c.evaluateVariableOffset=qd,c.evented=js,c.exported=Pt,c.exported$1=bt,c.extend=he,c.filterObject=ke,c.fromRotation=function(i,t){var o=Math.sin(t),u=Math.cos(t);return i[0]=u,i[1]=o,i[2]=0,i[3]=-o,i[4]=u,i[5]=0,i[6]=0,i[7]=0,i[8]=1,i},c.fromScaling=function(i,t){return i[0]=t[0],i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=t[1],i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=t[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},c.getAnchorAlignment=sr,c.getAnchorJustification=Fo,c.getArrayBuffer=Qe,c.getImage=Sr,c.getJSON=function(i,t){return Je(he(i,{type:"json"}),t)},c.getOverlapMode=qn,c.getRTLTextPluginStatus=kl,c.getReferrer=Rn,c.getVideo=function(i,t){const o=window.document.createElement("video");o.muted=!0,o.onloadstart=function(){t(null,o)};for(let u=0;u<i.length;u++){const g=window.document.createElement("source");Ot(i[u])||(o.crossOrigin="Anonymous"),g.src=i[u],o.appendChild(g)}return{cancel:()=>{}}},c.identity=Ll,c.invert=function(i,t){var o=t[0],u=t[1],g=t[2],_=t[3],e=t[4],r=t[5],l=t[6],d=t[7],x=t[8],S=t[9],M=t[10],A=t[11],L=t[12],O=t[13],q=t[14],Q=t[15],ie=o*r-u*e,re=o*l-g*e,fe=o*d-_*e,we=u*l-g*r,je=u*d-_*r,ue=g*d-_*l,ne=x*O-S*L,ce=x*q-M*L,be=x*Q-A*L,Ie=S*q-M*O,Be=S*Q-A*O,De=M*Q-A*q,Ce=ie*De-re*Be+fe*Ie+we*be-je*ce+ue*ne;return Ce?(i[0]=(r*De-l*Be+d*Ie)*(Ce=1/Ce),i[1]=(g*Be-u*De-_*Ie)*Ce,i[2]=(O*ue-q*je+Q*we)*Ce,i[3]=(M*je-S*ue-A*we)*Ce,i[4]=(l*be-e*De-d*ce)*Ce,i[5]=(o*De-g*be+_*ce)*Ce,i[6]=(q*fe-L*ue-Q*re)*Ce,i[7]=(x*ue-M*fe+A*re)*Ce,i[8]=(e*Be-r*be+d*ne)*Ce,i[9]=(u*be-o*Be-_*ne)*Ce,i[10]=(L*je-O*fe+Q*ie)*Ce,i[11]=(S*fe-x*je-A*ie)*Ce,i[12]=(r*ce-e*Ie-l*ne)*Ce,i[13]=(o*Ie-u*ce+g*ne)*Ce,i[14]=(O*re-L*we-q*ie)*Ce,i[15]=(x*we-S*re+M*ie)*Ce,i):null},c.isImageBitmap=mt,c.isSafari=At,c.isWorker=Ge,c.keysDifference=function(i,t){const o=[];for(const u in i)u in t||o.push(u);return o},c.lazyLoadRTLTextPlugin=function(){hn.isLoading()||hn.isLoaded()||kl()!=="deferred"||Ia()},c.makeRequest=Je,c.mapObject=_e,c.mercatorXfromLng=ps,c.mercatorYfromLat=Zc,c.mercatorZfromAltitude=Qs,c.mul=Pu,c.mul$1=function(i,t,o){return i[0]=t[0]*o[0],i[1]=t[1]*o[1],i[2]=t[2]*o[2],i[3]=t[3]*o[3],i},c.multiply=Cu,c.nextPowerOfTwo=function(i){return i<=1?1:Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))},c.normalize=function(i,t){var o=t[0],u=t[1],g=t[2],_=o*o+u*u+g*g;return _>0&&(_=1/Math.sqrt(_)),i[0]=t[0]*_,i[1]=t[1]*_,i[2]=t[2]*_,i},c.number=zn,c.ortho=function(i,t,o,u,g,_,e){var r=1/(t-o),l=1/(u-g),d=1/(_-e);return i[0]=-2*r,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*l,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*d,i[11]=0,i[12]=(t+o)*r,i[13]=(g+u)*l,i[14]=(e+_)*d,i[15]=1,i},c.parseCacheControl=kt,c.parseGlyphPbf=function(i){return new Rh(i).readFields(io,[])},c.pbf=Rh,c.performSymbolLayout=function(i){i.bucket.createArrays(),i.bucket.tilePixelRatio=Jn/(512*i.bucket.overscaling),i.bucket.compareText={},i.bucket.iconsNeedLinear=!1;const t=i.bucket.layers[0].layout,o=i.bucket.layers[0]._unevaluatedLayout._values,u={layoutIconSize:o["icon-size"].possiblyEvaluate(new Tn(i.bucket.zoom+1),i.canonical),layoutTextSize:o["text-size"].possiblyEvaluate(new Tn(i.bucket.zoom+1),i.canonical),textMaxSize:o["text-size"].possiblyEvaluate(new Tn(18))};if(i.bucket.textSizeData.kind==="composite"){const{minZoom:l,maxZoom:d}=i.bucket.textSizeData;u.compositeTextSizes=[o["text-size"].possiblyEvaluate(new Tn(l),i.canonical),o["text-size"].possiblyEvaluate(new Tn(d),i.canonical)]}if(i.bucket.iconSizeData.kind==="composite"){const{minZoom:l,maxZoom:d}=i.bucket.iconSizeData;u.compositeIconSizes=[o["icon-size"].possiblyEvaluate(new Tn(l),i.canonical),o["icon-size"].possiblyEvaluate(new Tn(d),i.canonical)]}const g=t.get("text-line-height")*gn,_=t.get("text-rotation-alignment")!=="viewport"&&t.get("symbol-placement")!=="point",e=t.get("text-keep-upright"),r=t.get("text-size");for(const l of i.bucket.features){const d=t.get("text-font").evaluate(l,{},i.canonical).join(","),x=r.evaluate(l,{},i.canonical),S=u.layoutTextSize.evaluate(l,{},i.canonical),M=u.layoutIconSize.evaluate(l,{},i.canonical),A={horizontal:{},vertical:void 0},L=l.text;let O,q=[0,0];if(L){const re=L.toString(),fe=t.get("text-letter-spacing").evaluate(l,{},i.canonical)*gn,we=El(re)?fe:0,je=t.get("text-anchor").evaluate(l,{},i.canonical),ue=t.get("text-variable-anchor");if(!ue){const Be=t.get("text-radial-offset").evaluate(l,{},i.canonical);q=Be?qd(je,[Be*gn,qc]):t.get("text-offset").evaluate(l,{},i.canonical).map(De=>De*gn)}let ne=_?"center":t.get("text-justify").evaluate(l,{},i.canonical);const ce=t.get("symbol-placement"),be=ce==="point"?t.get("text-max-width").evaluate(l,{},i.canonical)*gn:0,Ie=()=>{i.bucket.allowVerticalPlacement&&xo(re)&&(A.vertical=Va(L,i.glyphMap,i.glyphPositions,i.imagePositions,d,be,g,je,"left",we,q,c.WritingMode.vertical,!0,ce,S,x))};if(!_&&ue){const Be=ne==="auto"?ue.map(Ce=>Fo(Ce)):[ne];let De=!1;for(let Ce=0;Ce<Be.length;Ce++){const ht=Be[Ce];if(!A.horizontal[ht])if(De)A.horizontal[ht]=A.horizontal[0];else{const Ke=Va(L,i.glyphMap,i.glyphPositions,i.imagePositions,d,be,g,"center",ht,we,q,c.WritingMode.horizontal,!1,ce,S,x);Ke&&(A.horizontal[ht]=Ke,De=Ke.positionedLines.length===1)}}Ie()}else{ne==="auto"&&(ne=Fo(je));const Be=Va(L,i.glyphMap,i.glyphPositions,i.imagePositions,d,be,g,je,ne,we,q,c.WritingMode.horizontal,!1,ce,S,x);Be&&(A.horizontal[ne]=Be),Ie(),xo(re)&&_&&e&&(A.vertical=Va(L,i.glyphMap,i.glyphPositions,i.imagePositions,d,be,g,je,ne,we,q,c.WritingMode.vertical,!1,ce,S,x))}}let Q=!1;if(l.icon&&l.icon.name){const re=i.imageMap[l.icon.name];re&&(O=Ha(i.imagePositions[l.icon.name],t.get("icon-offset").evaluate(l,{},i.canonical),t.get("icon-anchor").evaluate(l,{},i.canonical)),Q=!!re.sdf,i.bucket.sdfIcons===void 0?i.bucket.sdfIcons=Q:i.bucket.sdfIcons!==Q&&Me("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(re.pixelRatio!==i.bucket.pixelRatio||t.get("icon-rotate").constantOr(1)!==0)&&(i.bucket.iconsNeedLinear=!0))}const ie=qu(A.horizontal)||A.vertical;i.bucket.iconsInText=!!ie&&ie.iconsInText,(ie||O)&&Wd(i.bucket,l,A,O,i.imageMap,u,S,M,q,Q,i.canonical)}i.showCollisionBoxes&&i.bucket.generateCollisionDebugBuffers()},c.perspective=function(i,t,o,u,g){var _,e=1/Math.tan(t/2);return i[0]=e/o,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=e,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,g!=null&&g!==1/0?(i[10]=(g+u)*(_=1/(u-g)),i[14]=2*g*u*_):(i[10]=-1,i[14]=-2*u),i},c.pick=function(i,t){const o={};for(let u=0;u<t.length;u++){const g=t[u];g in i&&(o[g]=i[g])}return o},c.plugin=hn,c.pointGeometry=Xe,c.polygonIntersectsPolygon=as,c.potpack=Hd,c.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],c.register=ut,c.registerForPluginStateChange=function(i){return i({pluginStatus:Mr,pluginURL:wo}),js.on("pluginStateChange",i),i},c.renderColorRamp=Au,c.rotateX=function(i,t,o){var u=Math.sin(o),g=Math.cos(o),_=t[4],e=t[5],r=t[6],l=t[7],d=t[8],x=t[9],S=t[10],M=t[11];return t!==i&&(i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]),i[4]=_*g+d*u,i[5]=e*g+x*u,i[6]=r*g+S*u,i[7]=l*g+M*u,i[8]=d*g-_*u,i[9]=x*g-e*u,i[10]=S*g-r*u,i[11]=M*g-l*u,i},c.rotateZ=function(i,t,o){var u=Math.sin(o),g=Math.cos(o),_=t[0],e=t[1],r=t[2],l=t[3],d=t[4],x=t[5],S=t[6],M=t[7];return t!==i&&(i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]),i[0]=_*g+d*u,i[1]=e*g+x*u,i[2]=r*g+S*u,i[3]=l*g+M*u,i[4]=d*g-_*u,i[5]=x*g-e*u,i[6]=S*g-r*u,i[7]=M*g-l*u,i},c.scale=function(i,t,o){var u=o[0],g=o[1],_=o[2];return i[0]=t[0]*u,i[1]=t[1]*u,i[2]=t[2]*u,i[3]=t[3]*u,i[4]=t[4]*g,i[5]=t[5]*g,i[6]=t[6]*g,i[7]=t[7]*g,i[8]=t[8]*_,i[9]=t[9]*_,i[10]=t[10]*_,i[11]=t[11]*_,i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],i},c.scale$1=function(i,t,o){return i[0]=t[0]*o,i[1]=t[1]*o,i[2]=t[2]*o,i},c.setCacheLimits=function(i,t){ve=i,Ue=t},c.setRTLTextPlugin=function(i,t,o=!1){if(Mr===Ca||Mr===Tl||Mr===Ri)throw new Error("setRTLTextPlugin cannot be called multiple times.");wo=Pt.resolveURL(i),Mr=Ca,Pa=t,rs(),o||Ia()},c.spec=Le,c.sphericalToCartesian=function([i,t,o]){return t+=90,t*=Math.PI/180,o*=Math.PI/180,{x:i*Math.cos(t)*Math.sin(o),y:i*Math.sin(t)*Math.sin(o),z:i*Math.cos(o)}},c.sqrLen=function(i){var t=i[0],o=i[1];return t*t+o*o},c.sub=function(i,t,o){return i[0]=t[0]-o[0],i[1]=t[1]-o[1],i[2]=t[2]-o[2],i},c.toEvaluationFeature=ss,c.transformMat3=function(i,t,o){var u=t[0],g=t[1],_=t[2];return i[0]=u*o[0]+g*o[3]+_*o[6],i[1]=u*o[1]+g*o[4]+_*o[7],i[2]=u*o[2]+g*o[5]+_*o[8],i},c.transformMat4=Bn,c.transformMat4$1=function(i,t,o){var u=t[0],g=t[1];return i[0]=o[0]*u+o[4]*g+o[12],i[1]=o[1]*u+o[5]*g+o[13],i},c.translate=function(i,t,o){var u,g,_,e,r,l,d,x,S,M,A,L,O=o[0],q=o[1],Q=o[2];return t===i?(i[12]=t[0]*O+t[4]*q+t[8]*Q+t[12],i[13]=t[1]*O+t[5]*q+t[9]*Q+t[13],i[14]=t[2]*O+t[6]*q+t[10]*Q+t[14],i[15]=t[3]*O+t[7]*q+t[11]*Q+t[15]):(g=t[1],_=t[2],e=t[3],r=t[4],l=t[5],d=t[6],x=t[7],S=t[8],M=t[9],A=t[10],L=t[11],i[0]=u=t[0],i[1]=g,i[2]=_,i[3]=e,i[4]=r,i[5]=l,i[6]=d,i[7]=x,i[8]=S,i[9]=M,i[10]=A,i[11]=L,i[12]=u*O+r*q+S*Q+t[12],i[13]=g*O+l*q+M*Q+t[13],i[14]=_*O+d*q+A*Q+t[14],i[15]=e*O+x*q+L*Q+t[15]),i},c.triggerPluginCompletionEvent=wu,c.unicodeBlockLookup=rt,c.uniqueId=function(){return J++},c.validateCustomStyleLayer=function(i){const t=[],o=i.id;return o===void 0&&t.push({message:`layers.${o}: missing required property "id"`}),i.render===void 0&&t.push({message:`layers.${o}: missing required method "render"`}),i.renderingMode&&i.renderingMode!=="2d"&&i.renderingMode!=="3d"&&t.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),t},c.validateLight=gu,c.validateStyle=yo,c.vectorTile=Ro,c.warnOnce=Me,c.wrap=me}),k(["./shared"],function(c){function F(W){const j=typeof W;if(j==="number"||j==="boolean"||j==="string"||W==null)return JSON.stringify(W);if(Array.isArray(W)){let K="[";for(const ae of W)K+=`${F(ae)},`;return`${K}]`}const D=Object.keys(W).sort();let G="{";for(let K=0;K<D.length;K++)G+=`${JSON.stringify(D[K])}:${F(W[D[K]])},`;return`${G}}`}function N(W){let j="";for(const D of c.refProperties)j+=`/${F(W[D])}`;return j}class V{constructor(j){this.keyCache={},j&&this.replace(j)}replace(j){this._layerConfigs={},this._layers={},this.update(j,[])}update(j,D){for(const K of j){this._layerConfigs[K.id]=K;const ae=this._layers[K.id]=c.createStyleLayer(K);ae._featureFilter=c.createFilter(ae.filter),this.keyCache[K.id]&&delete this.keyCache[K.id]}for(const K of D)delete this.keyCache[K],delete this._layerConfigs[K],delete this._layers[K];this.familiesBySource={};const G=function(K,ae){const pe={};for(let le=0;le<K.length;le++){const ye=ae&&ae[K[le].id]||N(K[le]);ae&&(ae[K[le].id]=ye);let Ae=pe[ye];Ae||(Ae=pe[ye]=[]),Ae.push(K[le])}const de=[];for(const le in pe)de.push(pe[le]);return de}(Object.values(this._layerConfigs),this.keyCache);for(const K of G){const ae=K.map($e=>this._layers[$e.id]),pe=ae[0];if(pe.visibility==="none")continue;const de=pe.source||"";let le=this.familiesBySource[de];le||(le=this.familiesBySource[de]={});const ye=pe.sourceLayer||"_geojsonTileLayer";let Ae=le[ye];Ae||(Ae=le[ye]=[]),Ae.push(ae)}}}class ${constructor(j){const D={},G=[];for(const de in j){const le=j[de],ye=D[de]={};for(const Ae in le){const $e=le[+Ae];if(!$e||$e.bitmap.width===0||$e.bitmap.height===0)continue;const Oe={x:0,y:0,w:$e.bitmap.width+2,h:$e.bitmap.height+2};G.push(Oe),ye[Ae]={rect:Oe,metrics:$e.metrics}}}const{w:K,h:ae}=c.potpack(G),pe=new c.AlphaImage({width:K||1,height:ae||1});for(const de in j){const le=j[de];for(const ye in le){const Ae=le[+ye];if(!Ae||Ae.bitmap.width===0||Ae.bitmap.height===0)continue;const $e=D[de][ye].rect;c.AlphaImage.copy(Ae.bitmap,pe,{x:0,y:0},{x:$e.x+1,y:$e.y+1},Ae.bitmap)}}this.image=pe,this.positions=D}}c.register("GlyphAtlas",$);class U{constructor(j){this.tileID=new c.OverscaledTileID(j.tileID.overscaledZ,j.tileID.wrap,j.tileID.canonical.z,j.tileID.canonical.x,j.tileID.canonical.y),this.uid=j.uid,this.zoom=j.zoom,this.pixelRatio=j.pixelRatio,this.tileSize=j.tileSize,this.source=j.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=j.showCollisionBoxes,this.collectResourceTiming=!!j.collectResourceTiming,this.returnDependencies=!!j.returnDependencies,this.promoteId=j.promoteId}parse(j,D,G,K,ae){this.status="parsing",this.data=j,this.collisionBoxArray=new c.CollisionBoxArray;const pe=new c.DictionaryCoder(Object.keys(j.layers).sort()),de=new c.FeatureIndex(this.tileID,this.promoteId);de.bucketLayerIDs=[];const le={},ye={featureIndex:de,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:G},Ae=D.familiesBySource[this.source];for(const Zt in Ae){const Ut=j.layers[Zt];if(!Ut)continue;Ut.version===1&&c.warnOnce(`Vector tile source "${this.source}" layer "${Zt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Vt=pe.encode(Zt),$n=[];for(let Ln=0;Ln<Ut.length;Ln++){const bn=Ut.feature(Ln),mr=de.getId(bn,Zt);$n.push({feature:bn,id:mr,index:Ln,sourceLayerIndex:Vt})}for(const Ln of Ae[Zt]){const bn=Ln[0];bn.source!==this.source&&c.warnOnce(`layer.source = ${bn.source} does not equal this.source = ${this.source}`),bn.minzoom&&this.zoom<Math.floor(bn.minzoom)||bn.maxzoom&&this.zoom>=bn.maxzoom||bn.visibility!=="none"&&(me(Ln,this.zoom,G),(le[bn.id]=bn.createBucket({index:de.bucketLayerIDs.length,layers:Ln,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Vt,sourceID:this.source})).populate($n,ye,this.tileID.canonical),de.bucketLayerIDs.push(Ln.map(mr=>mr.id)))}}let $e,Oe,pt,ct;const yt=c.mapObject(ye.glyphDependencies,Zt=>Object.keys(Zt).map(Number));Object.keys(yt).length?K.send("getGlyphs",{uid:this.uid,stacks:yt},(Zt,Ut)=>{$e||($e=Zt,Oe=Ut,Wt.call(this))}):Oe={};const ot=Object.keys(ye.iconDependencies);ot.length?K.send("getImages",{icons:ot,source:this.source,tileID:this.tileID,type:"icons"},(Zt,Ut)=>{$e||($e=Zt,pt=Ut,Wt.call(this))}):pt={};const qt=Object.keys(ye.patternDependencies);function Wt(){if($e)return ae($e);if(Oe&&pt&&ct){const Zt=new $(Oe),Ut=new c.ImageAtlas(pt,ct);for(const Vt in le){const $n=le[Vt];$n instanceof c.SymbolBucket?(me($n.layers,this.zoom,G),c.performSymbolLayout({bucket:$n,glyphMap:Oe,glyphPositions:Zt.positions,imageMap:pt,imagePositions:Ut.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):$n.hasPattern&&($n instanceof c.LineBucket||$n instanceof c.FillBucket||$n instanceof c.FillExtrusionBucket)&&(me($n.layers,this.zoom,G),$n.addFeatures(ye,this.tileID.canonical,Ut.patternPositions))}this.status="done",ae(null,{buckets:Object.values(le).filter(Vt=>!Vt.isEmpty()),featureIndex:de,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Zt.image,imageAtlas:Ut,glyphMap:this.returnDependencies?Oe:null,iconMap:this.returnDependencies?pt:null,glyphPositions:this.returnDependencies?Zt.positions:null})}}qt.length?K.send("getImages",{icons:qt,source:this.source,tileID:this.tileID,type:"patterns"},(Zt,Ut)=>{$e||($e=Zt,ct=Ut,Wt.call(this))}):ct={},Wt.call(this)}}function me(W,j,D){const G=new c.EvaluationParameters(j);for(const K of W)K.recalculate(G,D)}function he(W,j){const D=c.getArrayBuffer(W.request,(G,K,ae,pe)=>{G?j(G):K&&j(null,{vectorTile:new c.vectorTile.VectorTile(new c.pbf(K)),rawData:K,cacheControl:ae,expires:pe})});return()=>{D.cancel(),j()}}class J{constructor(j,D,G,K){this.actor=j,this.layerIndex=D,this.availableImages=G,this.loadVectorData=K||he,this.loading={},this.loaded={}}loadTile(j,D){const G=j.uid;this.loading||(this.loading={});const K=!!(j&&j.request&&j.request.collectResourceTiming)&&new c.RequestPerformance(j.request),ae=this.loading[G]=new U(j);ae.abort=this.loadVectorData(j,(pe,de)=>{if(delete this.loading[G],pe||!de)return ae.status="done",this.loaded[G]=ae,D(pe);const le=de.rawData,ye={};de.expires&&(ye.expires=de.expires),de.cacheControl&&(ye.cacheControl=de.cacheControl);const Ae={};if(K){const $e=K.finish();$e&&(Ae.resourceTiming=JSON.parse(JSON.stringify($e)))}ae.vectorTile=de.vectorTile,ae.parse(de.vectorTile,this.layerIndex,this.availableImages,this.actor,($e,Oe)=>{if($e||!Oe)return D($e);D(null,c.extend({rawTileData:le.slice(0)},Oe,ye,Ae))}),this.loaded=this.loaded||{},this.loaded[G]=ae})}reloadTile(j,D){const G=this.loaded,K=j.uid,ae=this;if(G&&G[K]){const pe=G[K];pe.showCollisionBoxes=j.showCollisionBoxes;const de=(le,ye)=>{const Ae=pe.reloadCallback;Ae&&(delete pe.reloadCallback,pe.parse(pe.vectorTile,ae.layerIndex,this.availableImages,ae.actor,Ae)),D(le,ye)};pe.status==="parsing"?pe.reloadCallback=de:pe.status==="done"&&(pe.vectorTile?pe.parse(pe.vectorTile,this.layerIndex,this.availableImages,this.actor,de):de())}}abortTile(j,D){const G=this.loading,K=j.uid;G&&G[K]&&G[K].abort&&(G[K].abort(),delete G[K]),D()}removeTile(j,D){const G=this.loaded,K=j.uid;G&&G[K]&&delete G[K],D()}}class oe{constructor(){this.loaded={}}loadTile(j,D){const{uid:G,encoding:K,rawImageData:ae}=j,pe=c.isImageBitmap(ae)?this.getImageData(ae):ae,de=new c.DEMData(G,pe,K);this.loaded=this.loaded||{},this.loaded[G]=de,D(null,de)}getImageData(j){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(j.width,j.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=j.width,this.offscreenCanvas.height=j.height,this.offscreenCanvasContext.drawImage(j,0,0,j.width,j.height);const D=this.offscreenCanvasContext.getImageData(-1,-1,j.width+2,j.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new c.RGBAImage({width:D.width,height:D.height},D.data)}removeTile(j){const D=this.loaded,G=j.uid;D&&D[G]&&delete D[G]}}var _e=function W(j,D){var G,K=j&&j.type;if(K==="FeatureCollection")for(G=0;G<j.features.length;G++)W(j.features[G],D);else if(K==="GeometryCollection")for(G=0;G<j.geometries.length;G++)W(j.geometries[G],D);else if(K==="Feature")W(j.geometry,D);else if(K==="Polygon")ke(j.coordinates,D);else if(K==="MultiPolygon")for(G=0;G<j.coordinates.length;G++)ke(j.coordinates[G],D);return j};function ke(W,j){if(W.length!==0){Ee(W[0],j);for(var D=1;D<W.length;D++)Ee(W[D],!1)}}function Ee(W,j){for(var D=0,G=0,K=0,ae=W.length,pe=ae-1;K<ae;pe=K++){var de=(W[K][0]-W[pe][0])*(W[pe][1]+W[K][1]),le=D+de;G+=Math.abs(D)>=Math.abs(de)?D-le+de:de-le+D,D=le}D+G>=0!=!!j&&W.reverse()}const Ve=c.vectorTile.VectorTileFeature.prototype.toGeoJSON;class Me{constructor(j){this._feature=j,this.extent=c.EXTENT,this.type=j.type,this.properties=j.tags,"id"in j&&!isNaN(j.id)&&(this.id=parseInt(j.id,10))}loadGeometry(){if(this._feature.type===1){const j=[];for(const D of this._feature.geometry)j.push([new c.pointGeometry(D[0],D[1])]);return j}{const j=[];for(const D of this._feature.geometry){const G=[];for(const K of D)G.push(new c.pointGeometry(K[0],K[1]));j.push(G)}return j}}toGeoJSON(j,D,G){return Ve.call(this,j,D,G)}}class tt{constructor(j){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=c.EXTENT,this.length=j.length,this._features=j}feature(j){return new Me(this._features[j])}}var it={exports:{}},Ge=c.pointGeometry,kt=c.vectorTile.VectorTileFeature,_t=Ct;function Ct(W,j){this.options=j||{},this.features=W,this.length=W.length}function Rt(W,j){this.id=typeof W.id=="number"?W.id:void 0,this.type=W.type,this.rawGeometry=W.type===1?[W.geometry]:W.geometry,this.properties=W.tags,this.extent=j||4096}Ct.prototype.feature=function(W){return new Rt(this.features[W],this.options.extent)},Rt.prototype.loadGeometry=function(){var W=this.rawGeometry;this.geometry=[];for(var j=0;j<W.length;j++){for(var D=W[j],G=[],K=0;K<D.length;K++)G.push(new Ge(D[K][0],D[K][1]));this.geometry.push(G)}return this.geometry},Rt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var W=this.geometry,j=1/0,D=-1/0,G=1/0,K=-1/0,ae=0;ae<W.length;ae++)for(var pe=W[ae],de=0;de<pe.length;de++){var le=pe[de];j=Math.min(j,le.x),D=Math.max(D,le.x),G=Math.min(G,le.y),K=Math.max(K,le.y)}return[j,G,D,K]},Rt.prototype.toGeoJSON=kt.prototype.toGeoJSON;var At=c.pbf,mt=_t;function Pt(W){var j=new At;return function(D,G){for(var K in D.layers)G.writeMessage(3,Xe,D.layers[K])}(W,j),j.finish()}function Xe(W,j){var D;j.writeVarintField(15,W.version||1),j.writeStringField(1,W.name||""),j.writeVarintField(5,W.extent||4096);var G={keys:[],values:[],keycache:{},valuecache:{}};for(D=0;D<W.length;D++)G.feature=W.feature(D),j.writeMessage(2,It,G);var K=G.keys;for(D=0;D<K.length;D++)j.writeStringField(3,K[D]);var ae=G.values;for(D=0;D<ae.length;D++)j.writeMessage(4,Ue,ae[D])}function It(W,j){var D=W.feature;D.id!==void 0&&j.writeVarintField(1,D.id),j.writeMessage(2,We,W),j.writeVarintField(3,D.type),j.writeMessage(4,ve,D)}function We(W,j){var D=W.feature,G=W.keys,K=W.values,ae=W.keycache,pe=W.valuecache;for(var de in D.properties){var le=D.properties[de],ye=ae[de];if(le!==null){ye===void 0&&(G.push(de),ae[de]=ye=G.length-1),j.writeVarint(ye);var Ae=typeof le;Ae!=="string"&&Ae!=="boolean"&&Ae!=="number"&&(le=JSON.stringify(le));var $e=Ae+":"+le,Oe=pe[$e];Oe===void 0&&(K.push(le),pe[$e]=Oe=K.length-1),j.writeVarint(Oe)}}}function lt(W,j){return(j<<3)+(7&W)}function nt(W){return W<<1^W>>31}function ve(W,j){for(var D=W.loadGeometry(),G=W.type,K=0,ae=0,pe=D.length,de=0;de<pe;de++){var le=D[de],ye=1;G===1&&(ye=le.length),j.writeVarint(lt(1,ye));for(var Ae=G===3?le.length-1:le.length,$e=0;$e<Ae;$e++){$e===1&&G!==1&&j.writeVarint(lt(2,Ae-1));var Oe=le[$e].x-K,pt=le[$e].y-ae;j.writeVarint(nt(Oe)),j.writeVarint(nt(pt)),K+=Oe,ae+=pt}G===3&&j.writeVarint(lt(7,1))}}function Ue(W,j){var D=typeof W;D==="string"?j.writeStringField(1,W):D==="boolean"?j.writeBooleanField(7,W):D==="number"&&(W%1!=0?j.writeDoubleField(3,W):W<0?j.writeSVarintField(6,W):j.writeVarintField(5,W))}function Mt(W,j,D,G,K,ae){if(K-G<=D)return;const pe=G+K>>1;gt(W,j,pe,G,K,ae%2),Mt(W,j,D,G,pe-1,ae+1),Mt(W,j,D,pe+1,K,ae+1)}function gt(W,j,D,G,K,ae){for(;K>G;){if(K-G>600){const ye=K-G+1,Ae=D-G+1,$e=Math.log(ye),Oe=.5*Math.exp(2*$e/3),pt=.5*Math.sqrt($e*Oe*(ye-Oe)/ye)*(Ae-ye/2<0?-1:1);gt(W,j,D,Math.max(G,Math.floor(D-Ae*Oe/ye+pt)),Math.min(K,Math.floor(D+(ye-Ae)*Oe/ye+pt)),ae)}const pe=j[2*D+ae];let de=G,le=K;for(bt(W,j,G,D),j[2*K+ae]>pe&&bt(W,j,G,K);de<le;){for(bt(W,j,de,le),de++,le--;j[2*de+ae]<pe;)de++;for(;j[2*le+ae]>pe;)le--}j[2*G+ae]===pe?bt(W,j,G,le):(le++,bt(W,j,le,K)),le<=D&&(G=le+1),D<=le&&(K=le-1)}}function bt(W,j,D,G){zt(W,D,G),zt(j,2*D,2*G),zt(j,2*D+1,2*G+1)}function zt(W,j,D){const G=W[j];W[j]=W[D],W[D]=G}function Kt(W,j,D,G){const K=W-D,ae=j-G;return K*K+ae*ae}it.exports=Pt,it.exports.fromVectorTileJs=Pt,it.exports.fromGeojsonVt=function(W,j){j=j||{};var D={};for(var G in W)D[G]=new mt(W[G].features,j),D[G].name=G,D[G].version=j.version,D[G].extent=j.extent;return Pt({layers:D})},it.exports.GeoJSONWrapper=mt;const Yt=W=>W[0],Ft=W=>W[1];class An{constructor(j,D=Yt,G=Ft,K=64,ae=Float64Array){this.nodeSize=K,this.points=j;const pe=j.length<65536?Uint16Array:Uint32Array,de=this.ids=new pe(j.length),le=this.coords=new ae(2*j.length);for(let ye=0;ye<j.length;ye++)de[ye]=ye,le[2*ye]=D(j[ye]),le[2*ye+1]=G(j[ye]);Mt(de,le,K,0,de.length-1,0)}range(j,D,G,K){return function(ae,pe,de,le,ye,Ae,$e){const Oe=[0,ae.length-1,0],pt=[];let ct,yt;for(;Oe.length;){const ot=Oe.pop(),qt=Oe.pop(),Wt=Oe.pop();if(qt-Wt<=$e){for(let Vt=Wt;Vt<=qt;Vt++)ct=pe[2*Vt],yt=pe[2*Vt+1],ct>=de&&ct<=ye&&yt>=le&&yt<=Ae&&pt.push(ae[Vt]);continue}const Zt=Math.floor((Wt+qt)/2);ct=pe[2*Zt],yt=pe[2*Zt+1],ct>=de&&ct<=ye&&yt>=le&&yt<=Ae&&pt.push(ae[Zt]);const Ut=(ot+1)%2;(ot===0?de<=ct:le<=yt)&&(Oe.push(Wt),Oe.push(Zt-1),Oe.push(Ut)),(ot===0?ye>=ct:Ae>=yt)&&(Oe.push(Zt+1),Oe.push(qt),Oe.push(Ut))}return pt}(this.ids,this.coords,j,D,G,K,this.nodeSize)}within(j,D,G){return function(K,ae,pe,de,le,ye){const Ae=[0,K.length-1,0],$e=[],Oe=le*le;for(;Ae.length;){const pt=Ae.pop(),ct=Ae.pop(),yt=Ae.pop();if(ct-yt<=ye){for(let Ut=yt;Ut<=ct;Ut++)Kt(ae[2*Ut],ae[2*Ut+1],pe,de)<=Oe&&$e.push(K[Ut]);continue}const ot=Math.floor((yt+ct)/2),qt=ae[2*ot],Wt=ae[2*ot+1];Kt(qt,Wt,pe,de)<=Oe&&$e.push(K[ot]);const Zt=(pt+1)%2;(pt===0?pe-le<=qt:de-le<=Wt)&&(Ae.push(yt),Ae.push(ot-1),Ae.push(Zt)),(pt===0?pe+le>=qt:de+le>=Wt)&&(Ae.push(ot+1),Ae.push(ct),Ae.push(Zt))}return $e}(this.ids,this.coords,j,D,G,this.nodeSize)}}const br={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:W=>W},nr=Math.fround||(Rn=new Float32Array(1),W=>(Rn[0]=+W,Rn[0]));var Rn;class si{constructor(j){this.options=Sn(Object.create(br),j),this.trees=new Array(this.options.maxZoom+1)}load(j){const{log:D,minZoom:G,maxZoom:K,nodeSize:ae}=this.options;D&&console.time("total time");const pe=`prepare ${j.length} points`;D&&console.time(pe),this.points=j;let de=[];for(let le=0;le<j.length;le++)j[le].geometry&&de.push(Qe(j[le],le));this.trees[K+1]=new An(de,rr,On,ae,Float32Array),D&&console.timeEnd(pe);for(let le=K;le>=G;le--){const ye=+Date.now();de=this._cluster(de,le),this.trees[le]=new An(de,rr,On,ae,Float32Array),D&&console.log("z%d: %d clusters in %dms",le,de.length,+Date.now()-ye)}return D&&console.timeEnd("total time"),this}getClusters(j,D){let G=((j[0]+180)%360+360)%360-180;const K=Math.max(-90,Math.min(90,j[1]));let ae=j[2]===180?180:((j[2]+180)%360+360)%360-180;const pe=Math.max(-90,Math.min(90,j[3]));if(j[2]-j[0]>=360)G=-180,ae=180;else if(G>ae){const Ae=this.getClusters([G,K,180,pe],D),$e=this.getClusters([-180,K,ae,pe],D);return Ae.concat($e)}const de=this.trees[this._limitZoom(D)],le=de.range(dt(G),tn(pe),dt(ae),tn(K)),ye=[];for(const Ae of le){const $e=de.points[Ae];ye.push($e.numPoints?Ot($e):this.points[$e.index])}return ye}getChildren(j){const D=this._getOriginId(j),G=this._getOriginZoom(j),K="No cluster with the specified id.",ae=this.trees[G];if(!ae)throw new Error(K);const pe=ae.points[D];if(!pe)throw new Error(K);const de=this.options.radius/(this.options.extent*Math.pow(2,G-1)),le=ae.within(pe.x,pe.y,de),ye=[];for(const Ae of le){const $e=ae.points[Ae];$e.parentId===j&&ye.push($e.numPoints?Ot($e):this.points[$e.index])}if(ye.length===0)throw new Error(K);return ye}getLeaves(j,D,G){const K=[];return this._appendLeaves(K,j,D=D||10,G=G||0,0),K}getTile(j,D,G){const K=this.trees[this._limitZoom(j)],ae=Math.pow(2,j),{extent:pe,radius:de}=this.options,le=de/pe,ye=(G-le)/ae,Ae=(G+1+le)/ae,$e={features:[]};return this._addTileFeatures(K.range((D-le)/ae,ye,(D+1+le)/ae,Ae),K.points,D,G,ae,$e),D===0&&this._addTileFeatures(K.range(1-le/ae,ye,1,Ae),K.points,ae,G,ae,$e),D===ae-1&&this._addTileFeatures(K.range(0,ye,le/ae,Ae),K.points,-1,G,ae,$e),$e.features.length?$e:null}getClusterExpansionZoom(j){let D=this._getOriginZoom(j)-1;for(;D<=this.options.maxZoom;){const G=this.getChildren(j);if(D++,G.length!==1)break;j=G[0].properties.cluster_id}return D}_appendLeaves(j,D,G,K,ae){const pe=this.getChildren(D);for(const de of pe){const le=de.properties;if(le&&le.cluster?ae+le.point_count<=K?ae+=le.point_count:ae=this._appendLeaves(j,le.cluster_id,G,K,ae):ae<K?ae++:j.push(de),j.length===G)break}return ae}_addTileFeatures(j,D,G,K,ae,pe){for(const de of j){const le=D[de],ye=le.numPoints;let Ae,$e,Oe;if(ye)Ae=ln(le),$e=le.x,Oe=le.y;else{const yt=this.points[le.index];Ae=yt.properties,$e=dt(yt.geometry.coordinates[0]),Oe=tn(yt.geometry.coordinates[1])}const pt={type:1,geometry:[[Math.round(this.options.extent*($e*ae-G)),Math.round(this.options.extent*(Oe*ae-K))]],tags:Ae};let ct;ye?ct=le.id:this.options.generateId?ct=le.index:this.points[le.index].id&&(ct=this.points[le.index].id),ct!==void 0&&(pt.id=ct),pe.features.push(pt)}}_limitZoom(j){return Math.max(this.options.minZoom,Math.min(Math.floor(+j),this.options.maxZoom+1))}_cluster(j,D){const G=[],{radius:K,extent:ae,reduce:pe,minPoints:de}=this.options,le=K/(ae*Math.pow(2,D));for(let ye=0;ye<j.length;ye++){const Ae=j[ye];if(Ae.zoom<=D)continue;Ae.zoom=D;const $e=this.trees[D+1],Oe=$e.within(Ae.x,Ae.y,le),pt=Ae.numPoints||1;let ct=pt;for(const yt of Oe){const ot=$e.points[yt];ot.zoom>D&&(ct+=ot.numPoints||1)}if(ct>pt&&ct>=de){let yt=Ae.x*pt,ot=Ae.y*pt,qt=pe&&pt>1?this._map(Ae,!0):null;const Wt=(ye<<5)+(D+1)+this.points.length;for(const Zt of Oe){const Ut=$e.points[Zt];if(Ut.zoom<=D)continue;Ut.zoom=D;const Vt=Ut.numPoints||1;yt+=Ut.x*Vt,ot+=Ut.y*Vt,Ut.parentId=Wt,pe&&(qt||(qt=this._map(Ae,!0)),pe(qt,this._map(Ut)))}Ae.parentId=Wt,G.push(Je(yt/ct,ot/ct,Wt,ct,qt))}else if(G.push(Ae),ct>1)for(const yt of Oe){const ot=$e.points[yt];ot.zoom<=D||(ot.zoom=D,G.push(ot))}}return G}_getOriginId(j){return j-this.points.length>>5}_getOriginZoom(j){return(j-this.points.length)%32}_map(j,D){if(j.numPoints)return D?Sn({},j.properties):j.properties;const G=this.points[j.index].properties,K=this.options.map(G);return D&&K===G?Sn({},K):K}}function Je(W,j,D,G,K){return{x:nr(W),y:nr(j),zoom:1/0,id:D,parentId:-1,numPoints:G,properties:K}}function Qe(W,j){const[D,G]=W.geometry.coordinates;return{x:nr(dt(D)),y:nr(tn(G)),zoom:1/0,index:j,parentId:-1}}function Ot(W){return{type:"Feature",id:W.id,properties:ln(W),geometry:{type:"Point",coordinates:[(j=W.x,360*(j-.5)),Sr(W.y)]}};var j}function ln(W){const j=W.numPoints,D=j>=1e4?`${Math.round(j/1e3)}k`:j>=1e3?Math.round(j/100)/10+"k":j;return Sn(Sn({},W.properties),{cluster:!0,cluster_id:W.id,point_count:j,point_count_abbreviated:D})}function dt(W){return W/360+.5}function tn(W){const j=Math.sin(W*Math.PI/180),D=.5-.25*Math.log((1+j)/(1-j))/Math.PI;return D<0?0:D>1?1:D}function Sr(W){const j=(180-360*W)*Math.PI/180;return 360*Math.atan(Math.exp(j))/Math.PI-90}function Sn(W,j){for(const D in j)W[D]=j[D];return W}function rr(W){return W.x}function On(W){return W.y}function Fr(W,j,D,G){for(var K,ae=G,pe=D-j>>1,de=D-j,le=W[j],ye=W[j+1],Ae=W[D],$e=W[D+1],Oe=j+3;Oe<D;Oe+=3){var pt=Hr(W[Oe],W[Oe+1],le,ye,Ae,$e);if(pt>ae)K=Oe,ae=pt;else if(pt===ae){var ct=Math.abs(Oe-pe);ct<de&&(K=Oe,de=ct)}}ae>G&&(K-j>3&&Fr(W,j,K,G),W[K+2]=ae,D-K>3&&Fr(W,K,D,G))}function Hr(W,j,D,G,K,ae){var pe=K-D,de=ae-G;if(pe!==0||de!==0){var le=((W-D)*pe+(j-G)*de)/(pe*pe+de*de);le>1?(D=K,G=ae):le>0&&(D+=pe*le,G+=de*le)}return(pe=W-D)*pe+(de=j-G)*de}function Le(W,j,D,G){var K={id:W===void 0?null:W,type:j,geometry:D,tags:G,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ae){var pe=ae.geometry,de=ae.type;if(de==="Point"||de==="MultiPoint"||de==="LineString")Ze(ae,pe);else if(de==="Polygon"||de==="MultiLineString")for(var le=0;le<pe.length;le++)Ze(ae,pe[le]);else if(de==="MultiPolygon")for(le=0;le<pe.length;le++)for(var ye=0;ye<pe[le].length;ye++)Ze(ae,pe[le][ye])}(K),K}function Ze(W,j){for(var D=0;D<j.length;D+=3)W.minX=Math.min(W.minX,j[D]),W.minY=Math.min(W.minY,j[D+1]),W.maxX=Math.max(W.maxX,j[D]),W.maxY=Math.max(W.maxY,j[D+1])}function Er(W,j,D,G){if(j.geometry){var K=j.geometry.coordinates,ae=j.geometry.type,pe=Math.pow(D.tolerance/((1<<D.maxZoom)*D.extent),2),de=[],le=j.id;if(D.promoteId?le=j.properties[D.promoteId]:D.generateId&&(le=G||0),ae==="Point")ir(K,de);else if(ae==="MultiPoint")for(var ye=0;ye<K.length;ye++)ir(K[ye],de);else if(ae==="LineString")dn(K,de,pe,!1);else if(ae==="MultiLineString"){if(D.lineMetrics){for(ye=0;ye<K.length;ye++)dn(K[ye],de=[],pe,!1),W.push(Le(le,"LineString",de,j.properties));return}En(K,de,pe,!1)}else if(ae==="Polygon")En(K,de,pe,!0);else{if(ae!=="MultiPolygon"){if(ae==="GeometryCollection"){for(ye=0;ye<j.geometry.geometries.length;ye++)Er(W,{id:le,geometry:j.geometry.geometries[ye],properties:j.properties},D,G);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ye=0;ye<K.length;ye++){var Ae=[];En(K[ye],Ae,pe,!0),de.push(Ae)}}W.push(Le(le,ae,de,j.properties))}}function ir(W,j){j.push(Qn(W[0])),j.push(ai(W[1])),j.push(0)}function dn(W,j,D,G){for(var K,ae,pe=0,de=0;de<W.length;de++){var le=Qn(W[de][0]),ye=ai(W[de][1]);j.push(le),j.push(ye),j.push(0),de>0&&(pe+=G?(K*ye-le*ae)/2:Math.sqrt(Math.pow(le-K,2)+Math.pow(ye-ae,2))),K=le,ae=ye}var Ae=j.length-3;j[2]=1,Fr(j,0,Ae,D),j[Ae+2]=1,j.size=Math.abs(pe),j.start=0,j.end=j.size}function En(W,j,D,G){for(var K=0;K<W.length;K++){var ae=[];dn(W[K],ae,D,G),j.push(ae)}}function Qn(W){return W/360+.5}function ai(W){var j=Math.sin(W*Math.PI/180),D=.5-.25*Math.log((1+j)/(1-j))/Math.PI;return D<0?0:D>1?1:D}function fr(W,j,D,G,K,ae,pe,de){if(G/=j,ae>=(D/=j)&&pe<G)return W;if(pe<D||ae>=G)return null;for(var le=[],ye=0;ye<W.length;ye++){var Ae=W[ye],$e=Ae.geometry,Oe=Ae.type,pt=K===0?Ae.minX:Ae.minY,ct=K===0?Ae.maxX:Ae.maxY;if(pt>=D&&ct<G)le.push(Ae);else if(!(ct<D||pt>=G)){var yt=[];if(Oe==="Point"||Oe==="MultiPoint")Ye($e,yt,D,G,K);else if(Oe==="LineString")Bt($e,yt,D,G,K,!1,de.lineMetrics);else if(Oe==="MultiLineString")er($e,yt,D,G,K,!1);else if(Oe==="Polygon")er($e,yt,D,G,K,!0);else if(Oe==="MultiPolygon")for(var ot=0;ot<$e.length;ot++){var qt=[];er($e[ot],qt,D,G,K,!0),qt.length&&yt.push(qt)}if(yt.length){if(de.lineMetrics&&Oe==="LineString"){for(ot=0;ot<yt.length;ot++)le.push(Le(Ae.id,Oe,yt[ot],Ae.tags));continue}Oe!=="LineString"&&Oe!=="MultiLineString"||(yt.length===1?(Oe="LineString",yt=yt[0]):Oe="MultiLineString"),Oe!=="Point"&&Oe!=="MultiPoint"||(Oe=yt.length===3?"Point":"MultiPoint"),le.push(Le(Ae.id,Oe,yt,Ae.tags))}}}return le.length?le:null}function Ye(W,j,D,G,K){for(var ae=0;ae<W.length;ae+=3){var pe=W[ae+K];pe>=D&&pe<=G&&(j.push(W[ae]),j.push(W[ae+1]),j.push(W[ae+2]))}}function Bt(W,j,D,G,K,ae,pe){for(var de,le,ye=jt(W),Ae=K===0?Lt:or,$e=W.start,Oe=0;Oe<W.length-3;Oe+=3){var pt=W[Oe],ct=W[Oe+1],yt=W[Oe+2],ot=W[Oe+3],qt=W[Oe+4],Wt=K===0?pt:ct,Zt=K===0?ot:qt,Ut=!1;pe&&(de=Math.sqrt(Math.pow(pt-ot,2)+Math.pow(ct-qt,2))),Wt<D?Zt>D&&(le=Ae(ye,pt,ct,ot,qt,D),pe&&(ye.start=$e+de*le)):Wt>G?Zt<G&&(le=Ae(ye,pt,ct,ot,qt,G),pe&&(ye.start=$e+de*le)):lr(ye,pt,ct,yt),Zt<D&&Wt>=D&&(le=Ae(ye,pt,ct,ot,qt,D),Ut=!0),Zt>G&&Wt<=G&&(le=Ae(ye,pt,ct,ot,qt,G),Ut=!0),!ae&&Ut&&(pe&&(ye.end=$e+de*le),j.push(ye),ye=jt(W)),pe&&($e+=de)}var Vt=W.length-3;pt=W[Vt],ct=W[Vt+1],yt=W[Vt+2],(Wt=K===0?pt:ct)>=D&&Wt<=G&&lr(ye,pt,ct,yt),Vt=ye.length-3,ae&&Vt>=3&&(ye[Vt]!==ye[0]||ye[Vt+1]!==ye[1])&&lr(ye,ye[0],ye[1],ye[2]),ye.length&&j.push(ye)}function jt(W){var j=[];return j.size=W.size,j.start=W.start,j.end=W.end,j}function er(W,j,D,G,K,ae){for(var pe=0;pe<W.length;pe++)Bt(W[pe],j,D,G,K,ae,!1)}function lr(W,j,D,G){W.push(j),W.push(D),W.push(G)}function Lt(W,j,D,G,K,ae){var pe=(ae-j)/(G-j);return W.push(ae),W.push(D+(K-D)*pe),W.push(1),pe}function or(W,j,D,G,K,ae){var pe=(ae-D)/(K-D);return W.push(j+(G-j)*pe),W.push(ae),W.push(1),pe}function Gr(W,j){for(var D=[],G=0;G<W.length;G++){var K,ae=W[G],pe=ae.type;if(pe==="Point"||pe==="MultiPoint"||pe==="LineString")K=Ne(ae.geometry,j);else if(pe==="MultiLineString"||pe==="Polygon"){K=[];for(var de=0;de<ae.geometry.length;de++)K.push(Ne(ae.geometry[de],j))}else if(pe==="MultiPolygon")for(K=[],de=0;de<ae.geometry.length;de++){for(var le=[],ye=0;ye<ae.geometry[de].length;ye++)le.push(Ne(ae.geometry[de][ye],j));K.push(le)}D.push(Le(ae.id,pe,K,ae.tags))}return D}function Ne(W,j){var D=[];D.size=W.size,W.start!==void 0&&(D.start=W.start,D.end=W.end);for(var G=0;G<W.length;G+=3)D.push(W[G]+j,W[G+1],W[G+2]);return D}function St(W,j){if(W.transformed)return W;var D,G,K,ae=1<<W.z,pe=W.x,de=W.y;for(D=0;D<W.features.length;D++){var le=W.features[D],ye=le.geometry,Ae=le.type;if(le.geometry=[],Ae===1)for(G=0;G<ye.length;G+=2)le.geometry.push($t(ye[G],ye[G+1],j,ae,pe,de));else for(G=0;G<ye.length;G++){var $e=[];for(K=0;K<ye[G].length;K+=2)$e.push($t(ye[G][K],ye[G][K+1],j,ae,pe,de));le.geometry.push($e)}}return W.transformed=!0,W}function $t(W,j,D,G,K,ae){return[Math.round(D*(W*G-K)),Math.round(D*(j*G-ae))]}function mn(W,j,D,G,K){for(var ae=j===K.maxZoom?0:K.tolerance/((1<<j)*K.extent),pe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:D,y:G,z:j,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},de=0;de<W.length;de++){pe.numFeatures++,yi(pe,W[de],ae,K);var le=W[de].minX,ye=W[de].minY,Ae=W[de].maxX,$e=W[de].maxY;le<pe.minX&&(pe.minX=le),ye<pe.minY&&(pe.minY=ye),Ae>pe.maxX&&(pe.maxX=Ae),$e>pe.maxY&&(pe.maxY=$e)}return pe}function yi(W,j,D,G){var K=j.geometry,ae=j.type,pe=[];if(ae==="Point"||ae==="MultiPoint")for(var de=0;de<K.length;de+=3)pe.push(K[de]),pe.push(K[de+1]),W.numPoints++,W.numSimplified++;else if(ae==="LineString")Tr(pe,K,W,D,!1,!1);else if(ae==="MultiLineString"||ae==="Polygon")for(de=0;de<K.length;de++)Tr(pe,K[de],W,D,ae==="Polygon",de===0);else if(ae==="MultiPolygon")for(var le=0;le<K.length;le++){var ye=K[le];for(de=0;de<ye.length;de++)Tr(pe,ye[de],W,D,!0,de===0)}if(pe.length){var Ae=j.tags||null;if(ae==="LineString"&&G.lineMetrics){for(var $e in Ae={},j.tags)Ae[$e]=j.tags[$e];Ae.mapbox_clip_start=K.start/K.size,Ae.mapbox_clip_end=K.end/K.size}var Oe={geometry:pe,type:ae==="Polygon"||ae==="MultiPolygon"?3:ae==="LineString"||ae==="MultiLineString"?2:1,tags:Ae};j.id!==null&&(Oe.id=j.id),W.features.push(Oe)}}function Tr(W,j,D,G,K,ae){var pe=G*G;if(G>0&&j.size<(K?pe:G))D.numPoints+=j.length/3;else{for(var de=[],le=0;le<j.length;le+=3)(G===0||j[le+2]>pe)&&(D.numSimplified++,de.push(j[le]),de.push(j[le+1])),D.numPoints++;K&&function(ye,Ae){for(var $e=0,Oe=0,pt=ye.length,ct=pt-2;Oe<pt;ct=Oe,Oe+=2)$e+=(ye[Oe]-ye[ct])*(ye[Oe+1]+ye[ct+1]);if($e>0===Ae)for(Oe=0,pt=ye.length;Oe<pt/2;Oe+=2){var yt=ye[Oe],ot=ye[Oe+1];ye[Oe]=ye[pt-2-Oe],ye[Oe+1]=ye[pt-1-Oe],ye[pt-2-Oe]=yt,ye[pt-1-Oe]=ot}}(de,ae),W.push(de)}}function li(W,j){var D=(j=this.options=function(K,ae){for(var pe in ae)K[pe]=ae[pe];return K}(Object.create(this.options),j)).debug;if(D&&console.time("preprocess data"),j.maxZoom<0||j.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(j.promoteId&&j.generateId)throw new Error("promoteId and generateId cannot be used together.");var G=function(K,ae){var pe=[];if(K.type==="FeatureCollection")for(var de=0;de<K.features.length;de++)Er(pe,K.features[de],ae,de);else Er(pe,K.type==="Feature"?K:{geometry:K},ae);return pe}(W,j);this.tiles={},this.tileCoords=[],D&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",j.indexMaxZoom,j.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),G=function(K,ae){var pe=ae.buffer/ae.extent,de=K,le=fr(K,1,-1-pe,pe,0,-1,2,ae),ye=fr(K,1,1-pe,2+pe,0,-1,2,ae);return(le||ye)&&(de=fr(K,1,-pe,1+pe,0,-1,2,ae)||[],le&&(de=Gr(le,1).concat(de)),ye&&(de=de.concat(Gr(ye,-1)))),de}(G,j),G.length&&this.splitTile(G,0,0,0),D&&(G.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function vi(W,j,D){return 32*((1<<W)*D+j)+W}function Vi(W,j){const D=W.tileID.canonical;if(!this._geoJSONIndex)return j(null,null);const G=this._geoJSONIndex.getTile(D.z,D.x,D.y);if(!G)return j(null,null);const K=new tt(G.features);let ae=it.exports(K);ae.byteOffset===0&&ae.byteLength===ae.buffer.byteLength||(ae=new Uint8Array(ae)),j(null,{vectorTile:K,rawData:ae.buffer})}li.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},li.prototype.splitTile=function(W,j,D,G,K,ae,pe){for(var de=[W,j,D,G],le=this.options,ye=le.debug;de.length;){G=de.pop(),D=de.pop(),j=de.pop(),W=de.pop();var Ae=1<<j,$e=vi(j,D,G),Oe=this.tiles[$e];if(!Oe&&(ye>1&&console.time("creation"),Oe=this.tiles[$e]=mn(W,j,D,G,le),this.tileCoords.push({z:j,x:D,y:G}),ye)){ye>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",j,D,G,Oe.numFeatures,Oe.numPoints,Oe.numSimplified),console.timeEnd("creation"));var pt="z"+j;this.stats[pt]=(this.stats[pt]||0)+1,this.total++}if(Oe.source=W,K){if(j===le.maxZoom||j===K)continue;var ct=1<<K-j;if(D!==Math.floor(ae/ct)||G!==Math.floor(pe/ct))continue}else if(j===le.indexMaxZoom||Oe.numPoints<=le.indexMaxPoints)continue;if(Oe.source=null,W.length!==0){ye>1&&console.time("clipping");var yt,ot,qt,Wt,Zt,Ut,Vt=.5*le.buffer/le.extent,$n=.5-Vt,Ln=.5+Vt,bn=1+Vt;yt=ot=qt=Wt=null,Zt=fr(W,Ae,D-Vt,D+Ln,0,Oe.minX,Oe.maxX,le),Ut=fr(W,Ae,D+$n,D+bn,0,Oe.minX,Oe.maxX,le),W=null,Zt&&(yt=fr(Zt,Ae,G-Vt,G+Ln,1,Oe.minY,Oe.maxY,le),ot=fr(Zt,Ae,G+$n,G+bn,1,Oe.minY,Oe.maxY,le),Zt=null),Ut&&(qt=fr(Ut,Ae,G-Vt,G+Ln,1,Oe.minY,Oe.maxY,le),Wt=fr(Ut,Ae,G+$n,G+bn,1,Oe.minY,Oe.maxY,le),Ut=null),ye>1&&console.timeEnd("clipping"),de.push(yt||[],j+1,2*D,2*G),de.push(ot||[],j+1,2*D,2*G+1),de.push(qt||[],j+1,2*D+1,2*G),de.push(Wt||[],j+1,2*D+1,2*G+1)}}},li.prototype.getTile=function(W,j,D){var G=this.options,K=G.extent,ae=G.debug;if(W<0||W>24)return null;var pe=1<<W,de=vi(W,j=(j%pe+pe)%pe,D);if(this.tiles[de])return St(this.tiles[de],K);ae>1&&console.log("drilling down to z%d-%d-%d",W,j,D);for(var le,ye=W,Ae=j,$e=D;!le&&ye>0;)ye--,Ae=Math.floor(Ae/2),$e=Math.floor($e/2),le=this.tiles[vi(ye,Ae,$e)];return le&&le.source?(ae>1&&console.log("found parent tile z%d-%d-%d",ye,Ae,$e),ae>1&&console.time("drilling down"),this.splitTile(le.source,ye,Ae,$e,W,j,D),ae>1&&console.timeEnd("drilling down"),this.tiles[de]?St(this.tiles[de],K):null):null};class sa extends J{constructor(j,D,G,K){super(j,D,G,Vi),K&&(this.loadGeoJSON=K)}loadData(j,D){var G;(G=this._pendingRequest)===null||G===void 0||G.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const K=!!(j&&j.request&&j.request.collectResourceTiming)&&new c.RequestPerformance(j.request);this._pendingCallback=D,this._pendingRequest=this.loadGeoJSON(j,(ae,pe)=>{if(delete this._pendingCallback,delete this._pendingRequest,ae||!pe)return D(ae);if(typeof pe!="object")return D(new Error(`Input data given to '${j.source}' is not a valid GeoJSON object.`));{_e(pe,!0);try{if(j.filter){const le=c.createExpression(j.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(le.result==="error")throw new Error(le.value.map(Ae=>`${Ae.key}: ${Ae.message}`).join(", "));pe={type:"FeatureCollection",features:pe.features.filter(Ae=>le.value.evaluate({zoom:0},Ae))}}this._geoJSONIndex=j.cluster?new si(function({superclusterOptions:le,clusterProperties:ye}){if(!ye||!le)return le;const Ae={},$e={},Oe={accumulated:null,zoom:0},pt={properties:null},ct=Object.keys(ye);for(const yt of ct){const[ot,qt]=ye[yt],Wt=c.createExpression(qt),Zt=c.createExpression(typeof ot=="string"?[ot,["accumulated"],["get",yt]]:ot);Ae[yt]=Wt.value,$e[yt]=Zt.value}return le.map=yt=>{pt.properties=yt;const ot={};for(const qt of ct)ot[qt]=Ae[qt].evaluate(Oe,pt);return ot},le.reduce=(yt,ot)=>{pt.properties=ot;for(const qt of ct)Oe.accumulated=yt[qt],yt[qt]=$e[qt].evaluate(Oe,pt)},le}(j)).load(pe.features):function(le,ye){return new li(le,ye)}(pe,j.geojsonVtOptions)}catch(le){return D(le)}this.loaded={};const de={};if(K){const le=K.finish();le&&(de.resourceTiming={},de.resourceTiming[j.source]=JSON.parse(JSON.stringify(le)))}D(null,de)}})}reloadTile(j,D){const G=this.loaded;return G&&G[j.uid]?super.reloadTile(j,D):this.loadTile(j,D)}loadGeoJSON(j,D){if(j.request)return c.getJSON(j.request,D);if(typeof j.data=="string")try{D(null,JSON.parse(j.data))}catch{D(new Error(`Input data given to '${j.source}' is not a valid GeoJSON object.`))}else D(new Error(`Input data given to '${j.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(j,D){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),D()}getClusterExpansionZoom(j,D){try{D(null,this._geoJSONIndex.getClusterExpansionZoom(j.clusterId))}catch(G){D(G)}}getClusterChildren(j,D){try{D(null,this._geoJSONIndex.getChildren(j.clusterId))}catch(G){D(G)}}getClusterLeaves(j,D){try{D(null,this._geoJSONIndex.getLeaves(j.clusterId,j.limit,j.offset))}catch(G){D(G)}}}class Kr{constructor(j){this.self=j,this.actor=new c.Actor(j,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:J,geojson:sa},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(D,G)=>{if(this.workerSourceTypes[D])throw new Error(`Worker source with name "${D}" already registered.`);this.workerSourceTypes[D]=G},this.self.registerRTLTextPlugin=D=>{if(c.plugin.isParsed())throw new Error("RTL text plugin already registered.");c.plugin.applyArabicShaping=D.applyArabicShaping,c.plugin.processBidirectionalText=D.processBidirectionalText,c.plugin.processStyledBidirectionalText=D.processStyledBidirectionalText}}setReferrer(j,D){this.referrer=D}setImages(j,D,G){this.availableImages[j]=D;for(const K in this.workerSources[j]){const ae=this.workerSources[j][K];for(const pe in ae)ae[pe].availableImages=D}G()}setLayers(j,D,G){this.getLayerIndex(j).replace(D),G()}updateLayers(j,D,G){this.getLayerIndex(j).update(D.layers,D.removedIds),G()}loadTile(j,D,G){this.getWorkerSource(j,D.type,D.source).loadTile(D,G)}loadDEMTile(j,D,G){this.getDEMWorkerSource(j,D.source).loadTile(D,G)}reloadTile(j,D,G){this.getWorkerSource(j,D.type,D.source).reloadTile(D,G)}abortTile(j,D,G){this.getWorkerSource(j,D.type,D.source).abortTile(D,G)}removeTile(j,D,G){this.getWorkerSource(j,D.type,D.source).removeTile(D,G)}removeDEMTile(j,D){this.getDEMWorkerSource(j,D.source).removeTile(D)}removeSource(j,D,G){if(!this.workerSources[j]||!this.workerSources[j][D.type]||!this.workerSources[j][D.type][D.source])return;const K=this.workerSources[j][D.type][D.source];delete this.workerSources[j][D.type][D.source],K.removeSource!==void 0?K.removeSource(D,G):G()}loadWorkerSource(j,D,G){try{this.self.importScripts(D.url),G()}catch(K){G(K.toString())}}syncRTLPluginState(j,D,G){try{c.plugin.setState(D);const K=c.plugin.getPluginURL();if(c.plugin.isLoaded()&&!c.plugin.isParsed()&&K!=null){this.self.importScripts(K);const ae=c.plugin.isParsed();G(ae?void 0:new Error(`RTL Text Plugin failed to import scripts from ${K}`),ae)}}catch(K){G(K.toString())}}getAvailableImages(j){let D=this.availableImages[j];return D||(D=[]),D}getLayerIndex(j){let D=this.layerIndexes[j];return D||(D=this.layerIndexes[j]=new V),D}getWorkerSource(j,D,G){if(this.workerSources[j]||(this.workerSources[j]={}),this.workerSources[j][D]||(this.workerSources[j][D]={}),!this.workerSources[j][D][G]){const K={send:(ae,pe,de)=>{this.actor.send(ae,pe,de,j)}};this.workerSources[j][D][G]=new this.workerSourceTypes[D](K,this.getLayerIndex(j),this.getAvailableImages(j))}return this.workerSources[j][D][G]}getDEMWorkerSource(j,D){return this.demWorkerSources[j]||(this.demWorkerSources[j]={}),this.demWorkerSources[j][D]||(this.demWorkerSources[j][D]=new oe),this.demWorkerSources[j][D]}enforceCacheSizeLimit(j,D){c.enforceCacheSizeLimit(D)}}return c.isWorker()&&(self.worker=new Kr(self)),Kr}),k(["./shared"],function(c){var F=N;function N(f){return!function(n){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var h,m,b=new Blob([""],{type:"text/javascript"}),T=URL.createObjectURL(b);try{m=new Worker(T),h=!0}catch{h=!1}return m&&m.terminate(),URL.revokeObjectURL(T),h}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var h=document.createElement("canvas");h.width=h.height=1;var m=h.getContext("2d");if(!m)return!1;var b=m.getImageData(0,0,1,1);return b&&b.width===h.width}()?(V[s=n&&n.failIfMajorPerformanceCaveat]===void 0&&(V[s]=function(h){var m,b=function(T){var C=document.createElement("canvas"),I=Object.create(N.webGLContextAttributes);return I.failIfMajorPerformanceCaveat=T,C.getContext("webgl",I)||C.getContext("experimental-webgl",I)}(h);if(!b)return!1;try{m=b.createShader(b.VERTEX_SHADER)}catch{return!1}return!(!m||b.isContextLost())&&(b.shaderSource(m,"void main() {}"),b.compileShader(m),b.getShaderParameter(m,b.COMPILE_STATUS)===!0)}(s)),V[s]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var s}(f)}var V={};function $(f,n){if(Array.isArray(f)){if(!Array.isArray(n)||f.length!==n.length)return!1;for(let s=0;s<f.length;s++)if(!$(f[s],n[s]))return!1;return!0}if(typeof f=="object"&&f!==null&&n!==null){if(typeof n!="object"||Object.keys(f).length!==Object.keys(n).length)return!1;for(const s in f)if(!$(f[s],n[s]))return!1;return!0}return f===n}N.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class U{static testProp(n){if(!U.docStyle)return n[0];for(let s=0;s<n.length;s++)if(n[s]in U.docStyle)return n[s];return n[0]}static create(n,s,h){const m=window.document.createElement(n);return s!==void 0&&(m.className=s),h&&h.appendChild(m),m}static createNS(n,s){return window.document.createElementNS(n,s)}static disableDrag(){U.docStyle&&U.selectProp&&(U.userSelect=U.docStyle[U.selectProp],U.docStyle[U.selectProp]="none")}static enableDrag(){U.docStyle&&U.selectProp&&(U.docStyle[U.selectProp]=U.userSelect)}static setTransform(n,s){n.style[U.transformProp]=s}static addEventListener(n,s,h,m={}){n.addEventListener(s,h,"passive"in m?m:m.capture)}static removeEventListener(n,s,h,m={}){n.removeEventListener(s,h,"passive"in m?m:m.capture)}static suppressClickInternal(n){n.preventDefault(),n.stopPropagation(),window.removeEventListener("click",U.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",U.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",U.suppressClickInternal,!0)},0)}static mousePos(n,s){const h=n.getBoundingClientRect();return new c.pointGeometry(s.clientX-h.left-n.clientLeft,s.clientY-h.top-n.clientTop)}static touchPos(n,s){const h=n.getBoundingClientRect(),m=[];for(let b=0;b<s.length;b++)m.push(new c.pointGeometry(s[b].clientX-h.left-n.clientLeft,s[b].clientY-h.top-n.clientTop));return m}static mouseButton(n){return n.button}static remove(n){n.parentNode&&n.parentNode.removeChild(n)}}U.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,U.selectProp=U.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),U.transformProp=U.testProp(["transform","WebkitTransform"]);class me{constructor(n){this._transformRequestFn=n}transformRequest(n,s){return this._transformRequestFn&&this._transformRequestFn(n,s)||{url:n}}normalizeSpriteURL(n,s,h){const m=function(b){const T=b.match(he);if(!T)throw new Error(`Unable to parse URL "${b}"`);return{protocol:T[1],authority:T[2],path:T[3]||"/",params:T[4]?T[4].split("&"):[]}}(n);return m.path+=`${s}${h}`,function(b){const T=b.params.length?`?${b.params.join("&")}`:"";return`${b.protocol}://${b.authority}${b.path}${T}`}(m)}setTransformRequest(n){this._transformRequestFn=n}}const he=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class J{constructor(n,s,h,m){this.context=n,this.format=h,this.texture=n.gl.createTexture(),this.update(s,m)}update(n,s,h){const{width:m,height:b}=n,T=!(this.size&&this.size[0]===m&&this.size[1]===b||h),{context:C}=this,{gl:I}=C;if(this.useMipmap=!!(s&&s.useMipmap),I.bindTexture(I.TEXTURE_2D,this.texture),C.pixelStoreUnpackFlipY.set(!1),C.pixelStoreUnpack.set(1),C.pixelStoreUnpackPremultiplyAlpha.set(this.format===I.RGBA&&(!s||s.premultiply!==!1)),T)this.size=[m,b],n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||c.isImageBitmap(n)?I.texImage2D(I.TEXTURE_2D,0,this.format,this.format,I.UNSIGNED_BYTE,n):I.texImage2D(I.TEXTURE_2D,0,this.format,m,b,0,this.format,I.UNSIGNED_BYTE,n.data);else{const{x:z,y:R}=h||{x:0,y:0};n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||c.isImageBitmap(n)?I.texSubImage2D(I.TEXTURE_2D,0,z,R,I.RGBA,I.UNSIGNED_BYTE,n):I.texSubImage2D(I.TEXTURE_2D,0,z,R,m,b,I.RGBA,I.UNSIGNED_BYTE,n.data)}this.useMipmap&&this.isSizePowerOfTwo()&&I.generateMipmap(I.TEXTURE_2D)}bind(n,s,h){const{context:m}=this,{gl:b}=m;b.bindTexture(b.TEXTURE_2D,this.texture),h!==b.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(h=b.LINEAR),n!==this.filter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,n),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,h||n),this.filter=n),s!==this.wrap&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,s),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,s),this.wrap=s)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}function oe(f){const{userImage:n}=f;return!!(n&&n.render&&n.render())&&(f.data.replace(new Uint8Array(n.data.buffer)),!0)}class _e extends c.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(n){if(this.loaded!==n&&(this.loaded=n,n)){for(const{ids:s,callback:h}of this.requestors)this._notify(s,h);this.requestors=[]}}getImage(n){return this.images[n]}addImage(n,s){if(this.images[n])throw new Error(`Image id ${n} already exist, use updateImage instead`);this._validate(n,s)&&(this.images[n]=s)}_validate(n,s){let h=!0;return this._validateStretch(s.stretchX,s.data&&s.data.width)||(this.fire(new c.ErrorEvent(new Error(`Image "${n}" has invalid "stretchX" value`))),h=!1),this._validateStretch(s.stretchY,s.data&&s.data.height)||(this.fire(new c.ErrorEvent(new Error(`Image "${n}" has invalid "stretchY" value`))),h=!1),this._validateContent(s.content,s)||(this.fire(new c.ErrorEvent(new Error(`Image "${n}" has invalid "content" value`))),h=!1),h}_validateStretch(n,s){if(!n)return!0;let h=0;for(const m of n){if(m[0]<h||m[1]<m[0]||s<m[1])return!1;h=m[1]}return!0}_validateContent(n,s){return!(n&&(n.length!==4||n[0]<0||s.data.width<n[0]||n[1]<0||s.data.height<n[1]||n[2]<0||s.data.width<n[2]||n[3]<0||s.data.height<n[3]||n[2]<n[0]||n[3]<n[1]))}updateImage(n,s){const h=this.images[n];if(h.data.width!==s.data.width||h.data.height!==s.data.height)throw new Error(`size mismatch between old image (${h.data.width}x${h.data.height}) and new image (${s.data.width}x${s.data.height}).`);s.version=h.version+1,this.images[n]=s,this.updatedImages[n]=!0}removeImage(n){const s=this.images[n];delete this.images[n],delete this.patterns[n],s.userImage&&s.userImage.onRemove&&s.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(n,s){let h=!0;if(!this.isLoaded())for(const m of n)this.images[m]||(h=!1);this.isLoaded()||h?this._notify(n,s):this.requestors.push({ids:n,callback:s})}_notify(n,s){const h={};for(const m of n){this.images[m]||this.fire(new c.Event("styleimagemissing",{id:m}));const b=this.images[m];b?h[m]={data:b.data.clone(),pixelRatio:b.pixelRatio,sdf:b.sdf,version:b.version,stretchX:b.stretchX,stretchY:b.stretchY,content:b.content,hasRenderCallback:!!(b.userImage&&b.userImage.render)}:c.warnOnce(`Image "${m}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}s(null,h)}getPixelSize(){const{width:n,height:s}=this.atlasImage;return{width:n,height:s}}getPattern(n){const s=this.patterns[n],h=this.getImage(n);if(!h)return null;if(s&&s.position.version===h.version)return s.position;if(s)s.position.version=h.version;else{const m={w:h.data.width+2,h:h.data.height+2,x:0,y:0},b=new c.ImagePosition(m,h);this.patterns[n]={bin:m,position:b}}return this._updatePatternAtlas(),this.patterns[n].position}bind(n){const s=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new J(n,this.atlasImage,s.RGBA),this.atlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE)}_updatePatternAtlas(){const n=[];for(const b in this.patterns)n.push(this.patterns[b].bin);const{w:s,h}=c.potpack(n),m=this.atlasImage;m.resize({width:s||1,height:h||1});for(const b in this.patterns){const{bin:T}=this.patterns[b],C=T.x+1,I=T.y+1,z=this.images[b].data,R=z.width,B=z.height;c.RGBAImage.copy(z,m,{x:0,y:0},{x:C,y:I},{width:R,height:B}),c.RGBAImage.copy(z,m,{x:0,y:B-1},{x:C,y:I-1},{width:R,height:1}),c.RGBAImage.copy(z,m,{x:0,y:0},{x:C,y:I+B},{width:R,height:1}),c.RGBAImage.copy(z,m,{x:R-1,y:0},{x:C-1,y:I},{width:1,height:B}),c.RGBAImage.copy(z,m,{x:0,y:0},{x:C+R,y:I},{width:1,height:B})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(n){for(const s of n){if(this.callbackDispatchedThisFrame[s])continue;this.callbackDispatchedThisFrame[s]=!0;const h=this.images[s];h||c.warnOnce(`Image with ID: "${s}" was not found`),oe(h)&&this.updateImage(s,h)}}}const ke=1e20;function Ee(f,n,s,h,m,b,T,C,I){for(let z=n;z<n+h;z++)Ve(f,s*b+z,b,m,T,C,I);for(let z=s;z<s+m;z++)Ve(f,z*b+n,1,h,T,C,I)}function Ve(f,n,s,h,m,b,T){b[0]=0,T[0]=-1e20,T[1]=ke,m[0]=f[n];for(let C=1,I=0,z=0;C<h;C++){m[C]=f[n+C*s];const R=C*C;do{const B=b[I];z=(m[C]-m[B]+R-B*B)/(C-B)/2}while(z<=T[I]&&--I>-1);I++,b[I]=C,T[I]=z,T[I+1]=ke}for(let C=0,I=0;C<h;C++){for(;T[I+1]<C;)I++;const z=b[I],R=C-z;f[n+C*s]=m[z]+R*R}}class Me{constructor(n,s){this.requestManager=n,this.localIdeographFontFamily=s,this.entries={}}setURL(n){this.url=n}getGlyphs(n,s){const h=[];for(const m in n)for(const b of n[m])h.push({stack:m,id:b});c.asyncAll(h,({stack:m,id:b},T)=>{let C=this.entries[m];C||(C=this.entries[m]={glyphs:{},requests:{},ranges:{}});let I=C.glyphs[b];if(I!==void 0)return void T(null,{stack:m,id:b,glyph:I});if(I=this._tinySDF(C,m,b),I)return C.glyphs[b]=I,void T(null,{stack:m,id:b,glyph:I});const z=Math.floor(b/256);if(256*z>65535)return void T(new Error("glyphs > 65535 not supported"));if(C.ranges[z])return void T(null,{stack:m,id:b,glyph:I});let R=C.requests[z];R||(R=C.requests[z]=[],Me.loadGlyphRange(m,z,this.url,this.requestManager,(B,H)=>{if(H){for(const Y in H)this._doesCharSupportLocalGlyph(+Y)||(C.glyphs[+Y]=H[+Y]);C.ranges[z]=!0}for(const Y of R)Y(B,H);delete C.requests[z]})),R.push((B,H)=>{B?T(B):H&&T(null,{stack:m,id:b,glyph:H[b]||null})})},(m,b)=>{if(m)s(m);else if(b){const T={};for(const{stack:C,id:I,glyph:z}of b)(T[C]||(T[C]={}))[I]=z&&{id:z.id,bitmap:z.bitmap.clone(),metrics:z.metrics};s(null,T)}})}_doesCharSupportLocalGlyph(n){return!!this.localIdeographFontFamily&&(c.unicodeBlockLookup["CJK Unified Ideographs"](n)||c.unicodeBlockLookup["Hangul Syllables"](n)||c.unicodeBlockLookup.Hiragana(n)||c.unicodeBlockLookup.Katakana(n))}_tinySDF(n,s,h){const m=this.localIdeographFontFamily;if(!m||!this._doesCharSupportLocalGlyph(h))return;let b=n.tinySDF;if(!b){let C="400";/bold/i.test(s)?C="900":/medium/i.test(s)?C="500":/light/i.test(s)&&(C="200"),b=n.tinySDF=new Me.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:m,fontWeight:C})}const T=b.draw(String.fromCharCode(h));return{id:h,bitmap:new c.AlphaImage({width:T.width||30,height:T.height||30},T.data),metrics:{width:T.glyphWidth||24,height:T.glyphHeight||24,left:T.glyphLeft||0,top:T.glyphTop-27||-8,advance:T.glyphAdvance||24}}}}Me.loadGlyphRange=function(f,n,s,h,m){const b=256*n,T=b+255,C=h.transformRequest(s.replace("{fontstack}",f).replace("{range}",`${b}-${T}`),c.ResourceType.Glyphs);c.getArrayBuffer(C,(I,z)=>{if(I)m(I);else if(z){const R={};for(const B of c.parseGlyphPbf(z))R[B.id]=B;m(null,R)}})},Me.TinySDF=class{constructor({fontSize:f=24,buffer:n=3,radius:s=8,cutoff:h=.25,fontFamily:m="sans-serif",fontWeight:b="normal",fontStyle:T="normal"}={}){this.buffer=n,this.cutoff=h,this.radius=s;const C=this.size=f+4*n,I=this._createCanvas(C),z=this.ctx=I.getContext("2d",{willReadFrequently:!0});z.font=`${T} ${b} ${f}px ${m}`,z.textBaseline="alphabetic",z.textAlign="left",z.fillStyle="black",this.gridOuter=new Float64Array(C*C),this.gridInner=new Float64Array(C*C),this.f=new Float64Array(C),this.z=new Float64Array(C+1),this.v=new Uint16Array(C)}_createCanvas(f){const n=document.createElement("canvas");return n.width=n.height=f,n}draw(f){const{width:n,actualBoundingBoxAscent:s,actualBoundingBoxDescent:h,actualBoundingBoxLeft:m,actualBoundingBoxRight:b}=this.ctx.measureText(f),T=Math.ceil(s),C=Math.min(this.size-this.buffer,Math.ceil(b-m)),I=Math.min(this.size-this.buffer,T+Math.ceil(h)),z=C+2*this.buffer,R=I+2*this.buffer,B=Math.max(z*R,0),H=new Uint8ClampedArray(B),Y={data:H,width:z,height:R,glyphWidth:C,glyphHeight:I,glyphTop:T,glyphLeft:0,glyphAdvance:n};if(C===0||I===0)return Y;const{ctx:X,buffer:Z,gridInner:se,gridOuter:ge}=this;X.clearRect(Z,Z,C,I),X.fillText(f,Z,Z+T);const xe=X.getImageData(Z,Z,C,I);ge.fill(ke,0,B),se.fill(0,0,B);for(let te=0;te<I;te++)for(let Te=0;Te<C;Te++){const Se=xe.data[4*(te*C+Te)+3]/255;if(Se===0)continue;const Pe=(te+Z)*z+Te+Z;if(Se===1)ge[Pe]=0,se[Pe]=ke;else{const Re=.5-Se;ge[Pe]=Re>0?Re*Re:0,se[Pe]=Re<0?Re*Re:0}}Ee(ge,0,0,z,R,z,this.f,this.v,this.z),Ee(se,Z,Z,C,I,z,this.f,this.v,this.z);for(let te=0;te<B;te++){const Te=Math.sqrt(ge[te])-Math.sqrt(se[te]);H[te]=Math.round(255-255*(Te/this.radius+this.cutoff))}return Y}};const tt=new c.Properties({anchor:new c.DataConstantProperty(c.spec.light.anchor),position:new class{constructor(){this.specification=c.spec.light.position}possiblyEvaluate(f,n){return c.sphericalToCartesian(f.expression.evaluate(n))}interpolate(f,n,s){return{x:c.number(f.x,n.x,s),y:c.number(f.y,n.y,s),z:c.number(f.z,n.z,s)}}},color:new c.DataConstantProperty(c.spec.light.color),intensity:new c.DataConstantProperty(c.spec.light.intensity)}),it="-transition";class Ge extends c.Evented{constructor(n){super(),this._transitionable=new c.Transitionable(tt),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(n,s={}){if(!this._validate(c.validateLight,n,s))for(const h in n){const m=n[h];h.endsWith(it)?this._transitionable.setTransition(h.slice(0,-it.length),m):this._transitionable.setValue(h,m)}}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,s,h){return(!h||h.validate!==!1)&&c.emitValidationErrors(this,n.call(c.validateStyle,c.extend({value:s,style:{glyphs:!0,sprite:!0},styleSpec:c.spec})))}}class kt{constructor(n,s){this.width=n,this.height=s,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(n,s){const h=n.join(",")+String(s);return this.dashEntry[h]||(this.dashEntry[h]=this.addDash(n,s)),this.dashEntry[h]}getDashRanges(n,s,h){const m=[];let b=n.length%2==1?-n[n.length-1]*h:0,T=n[0]*h,C=!0;m.push({left:b,right:T,isDash:C,zeroLength:n[0]===0});let I=n[0];for(let z=1;z<n.length;z++){C=!C;const R=n[z];b=I*h,I+=R,T=I*h,m.push({left:b,right:T,isDash:C,zeroLength:R===0})}return m}addRoundDash(n,s,h){const m=s/2;for(let b=-h;b<=h;b++){const T=this.width*(this.nextRow+h+b);let C=0,I=n[C];for(let z=0;z<this.width;z++){z/I.right>1&&(I=n[++C]);const R=Math.abs(z-I.left),B=Math.abs(z-I.right),H=Math.min(R,B);let Y;const X=b/h*(m+1);if(I.isDash){const Z=m-Math.abs(X);Y=Math.sqrt(H*H+Z*Z)}else Y=m-Math.sqrt(H*H+X*X);this.data[T+z]=Math.max(0,Math.min(255,Y+128))}}}addRegularDash(n){for(let C=n.length-1;C>=0;--C){const I=n[C],z=n[C+1];I.zeroLength?n.splice(C,1):z&&z.isDash===I.isDash&&(z.left=I.left,n.splice(C,1))}const s=n[0],h=n[n.length-1];s.isDash===h.isDash&&(s.left=h.left-this.width,h.right=s.right+this.width);const m=this.width*this.nextRow;let b=0,T=n[b];for(let C=0;C<this.width;C++){C/T.right>1&&(T=n[++b]);const I=Math.abs(C-T.left),z=Math.abs(C-T.right),R=Math.min(I,z);this.data[m+C]=Math.max(0,Math.min(255,(T.isDash?R:-R)+128))}}addDash(n,s){const h=s?7:0,m=2*h+1;if(this.nextRow+m>this.height)return c.warnOnce("LineAtlas out of space"),null;let b=0;for(let C=0;C<n.length;C++)b+=n[C];if(b!==0){const C=this.width/b,I=this.getDashRanges(n,this.width,C);s?this.addRoundDash(I,C,h):this.addRegularDash(I)}const T={y:(this.nextRow+h+.5)/this.height,height:2*h/this.height,width:b};return this.nextRow+=m,this.dirty=!0,T}bind(n){const s=n.gl;this.texture?(s.bindTexture(s.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.width,this.height,s.ALPHA,s.UNSIGNED_BYTE,this.data))):(this.texture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.ALPHA,this.width,this.height,0,s.ALPHA,s.UNSIGNED_BYTE,this.data))}}class _t{constructor(n,s){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=c.uniqueId();const h=this.workerPool.acquire(this.id);for(let m=0;m<h.length;m++){const b=new _t.Actor(h[m],s,this.id);b.name=`Worker ${m}`,this.actors.push(b)}if(!this.actors.length)throw new Error("No actors found")}broadcast(n,s,h){c.asyncAll(this.actors,(m,b)=>{m.send(n,s,b)},h=h||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(n=>{n.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Ct(f,n,s){const h=function(m,b){if(m)return s(m);if(b){const T=c.pick(c.extend(b,f),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);b.vector_layers&&(T.vectorLayers=b.vector_layers,T.vectorLayerIds=T.vectorLayers.map(C=>C.id)),s(null,T)}};return f.url?c.getJSON(n.transformRequest(f.url,c.ResourceType.Source),h):c.exported.frame(()=>h(null,f))}_t.Actor=c.Actor;class Rt{constructor(n,s,h){this.bounds=c.LngLatBounds.convert(this.validateBounds(n)),this.minzoom=s||0,this.maxzoom=h||24}validateBounds(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]}contains(n){const s=Math.pow(2,n.z),h=Math.floor(c.mercatorXfromLng(this.bounds.getWest())*s),m=Math.floor(c.mercatorYfromLat(this.bounds.getNorth())*s),b=Math.ceil(c.mercatorXfromLng(this.bounds.getEast())*s),T=Math.ceil(c.mercatorYfromLat(this.bounds.getSouth())*s);return n.x>=h&&n.x<b&&n.y>=m&&n.y<T}}class At extends c.Evented{constructor(n,s,h,m){if(super(),this.id=n,this.dispatcher=h,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.extend(this,c.pick(s,["url","scheme","tileSize","promoteId"])),this._options=c.extend({type:"vector"},s),this._collectResourceTiming=s.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}load(){this._loaded=!1,this.fire(new c.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ct(this._options,this.map._requestManager,(n,s)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),n?this.fire(new c.ErrorEvent(n)):s&&(c.extend(this,s),s.bounds&&(this.tileBounds=new Rt(s.bounds,this.minzoom,this.maxzoom)),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}onAdd(n){this.map=n,this.load()}setSourceProperty(n){this._tileJSONRequest&&this._tileJSONRequest.cancel(),n(),this.load()}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return c.extend({},this._options)}loadTile(n,s){const h=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m={request:this.map._requestManager.transformRequest(h,c.ResourceType.Tile),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function b(T,C){return delete n.request,n.aborted?s(null):T&&T.status!==404?s(T):(C&&C.resourceTiming&&(n.resourceTiming=C.resourceTiming),this.map._refreshExpiredTiles&&C&&n.setExpiryData(C),n.loadVectorData(C,this.map.painter),c.cacheEntryPossiblyAdded(this.dispatcher),s(null),void(n.reloadCallback&&(this.loadTile(n,n.reloadCallback),n.reloadCallback=null)))}m.request.collectResourceTiming=this._collectResourceTiming,n.actor&&n.state!=="expired"?n.state==="loading"?n.reloadCallback=s:n.request=n.actor.send("reloadTile",m,b.bind(this)):(n.actor=this.dispatcher.getActor(),n.request=n.actor.send("loadTile",m,b.bind(this)))}abortTile(n){n.request&&(n.request.cancel(),delete n.request),n.actor&&n.actor.send("abortTile",{uid:n.uid,type:this.type,source:this.id},void 0)}unloadTile(n){n.unloadVectorData(),n.actor&&n.actor.send("removeTile",{uid:n.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class mt extends c.Evented{constructor(n,s,h,m){super(),this.id=n,this.dispatcher=h,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.extend({type:"raster"},s),c.extend(this,c.pick(s,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new c.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ct(this._options,this.map._requestManager,(n,s)=>{this._tileJSONRequest=null,this._loaded=!0,n?this.fire(new c.ErrorEvent(n)):s&&(c.extend(this,s),s.bounds&&(this.tileBounds=new Rt(s.bounds,this.minzoom,this.maxzoom)),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(n){this.map=n,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return c.extend({},this._options)}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}loadTile(n,s){const h=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);n.request=c.getImage(this.map._requestManager.transformRequest(h,c.ResourceType.Tile),(m,b,T)=>{if(delete n.request,n.aborted)n.state="unloaded",s(null);else if(m)n.state="errored",s(m);else if(b){this.map._refreshExpiredTiles&&n.setExpiryData(T);const C=this.map.painter.context,I=C.gl;n.texture=this.map.painter.getTileTexture(b.width),n.texture?n.texture.update(b,{useMipmap:!0}):(n.texture=new J(C,b,I.RGBA,{useMipmap:!0}),n.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE,I.LINEAR_MIPMAP_NEAREST),C.extTextureFilterAnisotropic&&I.texParameterf(I.TEXTURE_2D,C.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,C.extTextureFilterAnisotropicMax)),n.state="loaded",c.cacheEntryPossiblyAdded(this.dispatcher),s(null)}})}abortTile(n,s){n.request&&(n.request.cancel(),delete n.request),s()}unloadTile(n,s){n.texture&&this.map.painter.saveTileTexture(n.texture),s()}hasTransition(){return!1}}let Pt;class Xe extends mt{constructor(n,s,h,m){super(n,s,h,m),this.type="raster-dem",this.maxzoom=22,this._options=c.extend({type:"raster-dem"},s),this.encoding=s.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(n,s){const h=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function m(b,T){b&&(n.state="errored",s(b)),T&&(n.dem=T,n.needsHillshadePrepare=!0,n.needsTerrainPrepare=!0,n.state="loaded",s(null))}n.request=c.getImage(this.map._requestManager.transformRequest(h,c.ResourceType.Tile),(function(b,T){if(delete n.request,n.aborted)n.state="unloaded",s(null);else if(b)n.state="errored",s(b);else if(T){this.map._refreshExpiredTiles&&n.setExpiryData(T),delete T.cacheControl,delete T.expires;const C=c.isImageBitmap(T)&&(Pt==null&&(Pt=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Pt)?T:c.exported.getImageData(T,1),I={uid:n.uid,coord:n.tileID,source:this.id,rawImageData:C,encoding:this.encoding};n.actor&&n.state!=="expired"||(n.actor=this.dispatcher.getActor(),n.actor.send("loadDEMTile",I,m.bind(this)))}}).bind(this)),n.neighboringTiles=this._getNeighboringTiles(n.tileID)}_getNeighboringTiles(n){const s=n.canonical,h=Math.pow(2,s.z),m=(s.x-1+h)%h,b=s.x===0?n.wrap-1:n.wrap,T=(s.x+1+h)%h,C=s.x+1===h?n.wrap+1:n.wrap,I={};return I[new c.OverscaledTileID(n.overscaledZ,b,s.z,m,s.y).key]={backfilled:!1},I[new c.OverscaledTileID(n.overscaledZ,C,s.z,T,s.y).key]={backfilled:!1},s.y>0&&(I[new c.OverscaledTileID(n.overscaledZ,b,s.z,m,s.y-1).key]={backfilled:!1},I[new c.OverscaledTileID(n.overscaledZ,n.wrap,s.z,s.x,s.y-1).key]={backfilled:!1},I[new c.OverscaledTileID(n.overscaledZ,C,s.z,T,s.y-1).key]={backfilled:!1}),s.y+1<h&&(I[new c.OverscaledTileID(n.overscaledZ,b,s.z,m,s.y+1).key]={backfilled:!1},I[new c.OverscaledTileID(n.overscaledZ,n.wrap,s.z,s.x,s.y+1).key]={backfilled:!1},I[new c.OverscaledTileID(n.overscaledZ,C,s.z,T,s.y+1).key]={backfilled:!1}),I}unloadTile(n){n.demTexture&&this.map.painter.saveTileTexture(n.demTexture),n.fbo&&(n.fbo.destroy(),delete n.fbo),n.dem&&delete n.dem,delete n.neighboringTiles,n.state="unloaded",n.actor&&n.actor.send("removeDEMTile",{uid:n.uid,source:this.id})}}class It extends c.Evented{constructor(n,s,h,m){super(),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=h.getActor(),this.setEventedParent(m),this._data=s.data,this._options=c.extend({},s),this._collectResourceTiming=s.collectResourceTiming,s.maxzoom!==void 0&&(this.maxzoom=s.maxzoom),s.type&&(this.type=s.type),s.attribution&&(this.attribution=s.attribution),this.promoteId=s.promoteId;const b=c.EXTENT/this.tileSize;this.workerOptions=c.extend({source:this.id,cluster:s.cluster||!1,geojsonVtOptions:{buffer:(s.buffer!==void 0?s.buffer:128)*b,tolerance:(s.tolerance!==void 0?s.tolerance:.375)*b,extent:c.EXTENT,maxZoom:this.maxzoom,lineMetrics:s.lineMetrics||!1,generateId:s.generateId||!1},superclusterOptions:{maxZoom:s.clusterMaxZoom!==void 0?s.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,s.clusterMinPoints||2),extent:c.EXTENT,radius:(s.clusterRadius||50)*b,log:!1,generateId:s.generateId||!1},clusterProperties:s.clusterProperties,filter:s.filter},s.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(n){this.map=n,this.load()}setData(n){return this._data=n,this._updateWorkerData("content"),this}getClusterExpansionZoom(n,s){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:n,source:this.id},s),this}getClusterChildren(n,s){return this.actor.send("geojson.getClusterChildren",{clusterId:n,source:this.id},s),this}getClusterLeaves(n,s,h,m){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:n,limit:s,offset:h},m),this}_updateWorkerData(n){const s=c.extend({},this.workerOptions),h=this._data;typeof h=="string"?(s.request=this.map._requestManager.transformRequest(c.exported.resolveURL(h),c.ResourceType.Source),s.request.collectResourceTiming=this._collectResourceTiming):s.data=JSON.stringify(h),this._pendingLoads++,this.fire(new c.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,s,(m,b)=>{if(this._pendingLoads--,this._removed||b&&b.abandoned)return void this.fire(new c.Event("dataabort",{dataType:"source",sourceDataType:n}));let T=null;if(b&&b.resourceTiming&&b.resourceTiming[this.id]&&(T=b.resourceTiming[this.id].slice(0)),m)return void this.fire(new c.ErrorEvent(m));const C={dataType:"source",sourceDataType:n};this._collectResourceTiming&&T&&T.length>0&&c.extend(C,{resourceTiming:T}),this.fire(new c.Event("data",C))})}loaded(){return this._pendingLoads===0}loadTile(n,s){const h=n.actor?"reloadTile":"loadTile";n.actor=this.actor;const m={type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};n.request=this.actor.send(h,m,(b,T)=>(delete n.request,n.unloadVectorData(),n.aborted?s(null):b?s(b):(n.loadVectorData(T,this.map.painter,h==="reloadTile"),s(null))))}abortTile(n){n.request&&(n.request.cancel(),delete n.request),n.aborted=!0}unloadTile(n){n.unloadVectorData(),this.actor.send("removeTile",{uid:n.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return c.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var We=c.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class lt extends c.Evented{constructor(n,s,h,m){super(),this.id=n,this.dispatcher=h,this.coordinates=s.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=s}load(n,s){this._loaded=!1,this.fire(new c.Event("dataloading",{dataType:"source"})),this.url=this.options.url,c.getImage(this.map._requestManager.transformRequest(this.url,c.ResourceType.Image),(h,m)=>{this._loaded=!0,h?this.fire(new c.ErrorEvent(h)):m&&(this.image=m,n&&(this.coordinates=n),s&&s(),this._finishLoading())})}loaded(){return this._loaded}updateImage(n){return this.image&&n.url?(this.options.url=n.url,this.load(n.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(n){this.map=n,this.load()}setCoordinates(n){this.coordinates=n;const s=n.map(c.MercatorCoordinate.fromLngLat);this.tileID=function(m){let b=1/0,T=1/0,C=-1/0,I=-1/0;for(const H of m)b=Math.min(b,H.x),T=Math.min(T,H.y),C=Math.max(C,H.x),I=Math.max(I,H.y);const z=Math.max(C-b,I-T),R=Math.max(0,Math.floor(-Math.log(z)/Math.LN2)),B=Math.pow(2,R);return new c.CanonicalTileID(R,Math.floor((b+C)/2*B),Math.floor((T+I)/2*B))}(s),this.minzoom=this.maxzoom=this.tileID.z;const h=s.map(m=>this.tileID.getTilePoint(m)._round());return this._boundsArray=new c.RasterBoundsArray,this._boundsArray.emplaceBack(h[0].x,h[0].y,0,0),this._boundsArray.emplaceBack(h[1].x,h[1].y,c.EXTENT,0),this._boundsArray.emplaceBack(h[3].x,h[3].y,0,c.EXTENT),this._boundsArray.emplaceBack(h[2].x,h[2].y,c.EXTENT,c.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const n=this.map.painter.context,s=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,We.members)),this.boundsSegments||(this.boundsSegments=c.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new J(n,this.image,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE));for(const h in this.tiles){const m=this.tiles[h];m.state!=="loaded"&&(m.state="loaded",m.texture=this.texture)}}loadTile(n,s){this.tileID&&this.tileID.equals(n.tileID.canonical)?(this.tiles[String(n.tileID.wrap)]=n,n.buckets={},s(null)):(n.state="errored",s(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class nt extends lt{constructor(n,s,h,m){super(n,s,h,m),this.roundZoom=!0,this.type="video",this.options=s}load(){this._loaded=!1;const n=this.options;this.urls=[];for(const s of n.urls)this.urls.push(this.map._requestManager.transformRequest(s,c.ResourceType.Source).url);c.getVideo(this.urls,(s,h)=>{this._loaded=!0,s?this.fire(new c.ErrorEvent(s)):h&&(this.video=h,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(n){if(this.video){const s=this.video.seekable;n<s.start(0)||n>s.end(0)?this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${s.start(0)} and ${s.end(0)}-second mark.`))):this.video.currentTime=n}}getVideo(){return this.video}onAdd(n){this.map||(this.map=n,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const n=this.map.painter.context,s=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,We.members)),this.boundsSegments||(this.boundsSegments=c.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE),s.texSubImage2D(s.TEXTURE_2D,0,0,0,s.RGBA,s.UNSIGNED_BYTE,this.video)):(this.texture=new J(n,this.video,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE));for(const h in this.tiles){const m=this.tiles[h];m.state!=="loaded"&&(m.state="loaded",m.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class ve extends lt{constructor(n,s,h,m){super(n,s,h,m),s.coordinates?Array.isArray(s.coordinates)&&s.coordinates.length===4&&!s.coordinates.some(b=>!Array.isArray(b)||b.length!==2||b.some(T=>typeof T!="number"))||this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${n}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${n}`,null,'missing required property "coordinates"'))),s.animate&&typeof s.animate!="boolean"&&this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${n}`,null,'optional "animate" property must be a boolean value'))),s.canvas?typeof s.canvas=="string"||s.canvas instanceof HTMLCanvasElement||this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${n}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${n}`,null,'missing required property "canvas"'))),this.options=s,this.animate=s.animate===void 0||s.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(n){this.map=n,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let n=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,n=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,n=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const s=this.map.painter.context,h=s.gl;this.boundsBuffer||(this.boundsBuffer=s.createVertexBuffer(this._boundsArray,We.members)),this.boundsSegments||(this.boundsSegments=c.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(n||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new J(s,this.canvas,h.RGBA,{premultiply:!0});for(const m in this.tiles){const b=this.tiles[m];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const n of[this.canvas.width,this.canvas.height])if(isNaN(n)||n<=0)return!0;return!1}}const Ue={vector:At,raster:mt,"raster-dem":Xe,geojson:It,video:nt,image:lt,canvas:ve};function Mt(f,n){const s=c.create();return c.translate(s,s,[1,1,0]),c.scale(s,s,[.5*f.width,.5*f.height,1]),c.multiply(s,s,f.calculatePosMatrix(n.toUnwrapped()))}function gt(f,n,s,h,m,b){const T=function(B,H,Y){if(B)for(const X of B){const Z=H[X];if(Z&&Z.source===Y&&Z.type==="fill-extrusion")return!0}else for(const X in H){const Z=H[X];if(Z.source===Y&&Z.type==="fill-extrusion")return!0}return!1}(m&&m.layers,n,f.id),C=b.maxPitchScaleFactor(),I=f.tilesIn(h,C,T);I.sort(bt);const z=[];for(const B of I)z.push({wrappedTileID:B.tileID.wrapped().key,queryResults:B.tile.queryRenderedFeatures(n,s,f._state,B.queryGeometry,B.cameraQueryGeometry,B.scale,m,b,C,Mt(f.transform,B.tileID))});const R=function(B){const H={},Y={};for(const X of B){const Z=X.queryResults,se=X.wrappedTileID,ge=Y[se]=Y[se]||{};for(const xe in Z){const te=Z[xe],Te=ge[xe]=ge[xe]||{},Se=H[xe]=H[xe]||[];for(const Pe of te)Te[Pe.featureIndex]||(Te[Pe.featureIndex]=!0,Se.push(Pe))}}return H}(z);for(const B in R)R[B].forEach(H=>{const Y=H.feature,X=f.getFeatureState(Y.layer["source-layer"],Y.id);Y.source=Y.layer.source,Y.layer["source-layer"]&&(Y.sourceLayer=Y.layer["source-layer"]),Y.state=X});return R}function bt(f,n){const s=f.tileID,h=n.tileID;return s.overscaledZ-h.overscaledZ||s.canonical.y-h.canonical.y||s.wrap-h.wrap||s.canonical.x-h.canonical.x}class zt{constructor(n,s){this.tileID=n,this.uid=c.uniqueId(),this.uses=0,this.tileSize=s,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(n){const s=n+this.timeAdded;s<c.exported.now()||this.fadeEndTime&&s<this.fadeEndTime||(this.fadeEndTime=s)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(n){this.demTexture&&n.saveTileTexture(this.demTexture),this.textures.forEach(s=>n.saveTileTexture(s)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(n,s,h){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(m,b){const T={};if(!b)return T;for(const C of m){const I=C.layerIds.map(z=>b.getLayer(z)).filter(Boolean);if(I.length!==0){C.layers=I,C.stateDependentLayerIds&&(C.stateDependentLayers=C.stateDependentLayerIds.map(z=>I.filter(R=>R.id===z)[0]));for(const z of I)T[z.id]=C}}return T}(n.buckets,s.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const b=this.buckets[m];if(b instanceof c.SymbolBucket){if(this.hasSymbolBuckets=!0,!h)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const b=this.buckets[m];if(b instanceof c.SymbolBucket&&b.hasRTLText){this.hasRTLText=!0,c.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const m in this.buckets){const b=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,s.style.getLayer(m).queryRadius(b))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage)}else this.collisionBoxArray=new c.CollisionBoxArray}unloadVectorData(){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(n){return this.buckets[n.id]}upload(n){for(const h in this.buckets){const m=this.buckets[h];m.uploadPending()&&m.upload(n)}const s=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new J(n,this.imageAtlas.image,s.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new J(n,this.glyphAtlasImage,s.ALPHA),this.glyphAtlasImage=null)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,s,h,m,b,T,C,I,z,R){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:b,scale:T,tileSize:this.tileSize,pixelPosMatrix:R,transform:I,params:C,queryPadding:this.queryPadding*z},n,s,h):{}}querySourceFeatures(n,s){const h=this.latestFeatureIndex;if(!h||!h.rawTileData)return;const m=h.loadVTLayers(),b=s?s.sourceLayer:"",T=m._geojsonTileLayer||m[b];if(!T)return;const C=c.createFilter(s&&s.filter),{z:I,x:z,y:R}=this.tileID.canonical,B={z:I,x:z,y:R};for(let H=0;H<T.length;H++){const Y=T.feature(H);if(C.needGeometry){const se=c.toEvaluationFeature(Y,!0);if(!C.filter(new c.EvaluationParameters(this.tileID.overscaledZ),se,this.tileID.canonical))continue}else if(!C.filter(new c.EvaluationParameters(this.tileID.overscaledZ),Y))continue;const X=h.getId(Y,b),Z=new c.GeoJSONFeature(Y,I,z,R,X);Z.tile=B,n.push(Z)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const s=this.expirationTime;if(n.cacheControl){const h=c.parseCacheControl(n.cacheControl);h["max-age"]&&(this.expirationTime=Date.now()+1e3*h["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const h=Date.now();let m=!1;if(this.expirationTime>h)m=!1;else if(s)if(this.expirationTime<s)m=!0;else{const b=this.expirationTime-s;b?this.expirationTime=h+Math.max(b,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,s){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0)return;const h=this.latestFeatureIndex.loadVTLayers();for(const m in this.buckets){if(!s.style.hasLayer(m))continue;const b=this.buckets[m],T=b.layers[0].sourceLayer||"_geojsonTileLayer",C=h[T],I=n[T];if(!C||!I||Object.keys(I).length===0)continue;b.update(I,C,this.imageAtlas&&this.imageAtlas.patternPositions||{});const z=s&&s.style&&s.style.getLayer(m);z&&(this.queryPadding=Math.max(this.queryPadding,z.queryRadius(b)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<c.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=c.exported.now()+n}setDependencies(n,s){const h={};for(const m of s)h[m]=!0;this.dependencies[n]=h}hasDependency(n,s){for(const h of n){const m=this.dependencies[h];if(m){for(const b of s)if(m[b])return!0}}return!1}}class Kt{constructor(n,s){this.max=n,this.onRemove=s,this.reset()}reset(){for(const n in this.data)for(const s of this.data[n])s.timeout&&clearTimeout(s.timeout),this.onRemove(s.value);return this.data={},this.order=[],this}add(n,s,h){const m=n.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);const b={value:s,timeout:void 0};if(h!==void 0&&(b.timeout=setTimeout(()=>{this.remove(n,b)},h)),this.data[m].push(b),this.order.push(m),this.order.length>this.max){const T=this._getAndRemoveByKey(this.order[0]);T&&this.onRemove(T)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const s=this.data[n].shift();return s.timeout&&clearTimeout(s.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),s.value}getByKey(n){const s=this.data[n];return s?s[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,s){if(!this.has(n))return this;const h=n.wrapped().key,m=s===void 0?0:this.data[h].indexOf(s),b=this.data[h][m];return this.data[h].splice(m,1),b.timeout&&clearTimeout(b.timeout),this.data[h].length===0&&delete this.data[h],this.onRemove(b.value),this.order.splice(this.order.indexOf(h),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this}filter(n){const s=[];for(const h in this.data)for(const m of this.data[h])n(m.value)||s.push(m);for(const h of s)this.remove(h.value.tileID,h)}}class Yt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,s,h){const m=String(s);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][m]=this.stateChanges[n][m]||{},c.extend(this.stateChanges[n][m],h),this.deletedStates[n]===null){this.deletedStates[n]={};for(const b in this.state[n])b!==m&&(this.deletedStates[n][b]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][m]===null){this.deletedStates[n][m]={};for(const b in this.state[n][m])h[b]||(this.deletedStates[n][m][b]=null)}else for(const b in h)this.deletedStates[n]&&this.deletedStates[n][m]&&this.deletedStates[n][m][b]===null&&delete this.deletedStates[n][m][b]}removeFeatureState(n,s,h){if(this.deletedStates[n]===null)return;const m=String(s);if(this.deletedStates[n]=this.deletedStates[n]||{},h&&s!==void 0)this.deletedStates[n][m]!==null&&(this.deletedStates[n][m]=this.deletedStates[n][m]||{},this.deletedStates[n][m][h]=null);else if(s!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][m])for(h in this.deletedStates[n][m]={},this.stateChanges[n][m])this.deletedStates[n][m][h]=null;else this.deletedStates[n][m]=null;else this.deletedStates[n]=null}getState(n,s){const h=String(s),m=c.extend({},(this.state[n]||{})[h],(this.stateChanges[n]||{})[h]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const b=this.deletedStates[n][s];if(b===null)return{};for(const T in b)delete m[T]}return m}initializeTileState(n,s){n.setFeatureState(this.state,s)}coalesceChanges(n,s){const h={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const b={};for(const T in this.stateChanges[m])this.state[m][T]||(this.state[m][T]={}),c.extend(this.state[m][T],this.stateChanges[m][T]),b[T]=this.state[m][T];h[m]=b}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const b={};if(this.deletedStates[m]===null)for(const T in this.state[m])b[T]={},this.state[m][T]={};else for(const T in this.deletedStates[m]){if(this.deletedStates[m][T]===null)this.state[m][T]={};else for(const C of Object.keys(this.deletedStates[m][T]))delete this.state[m][T][C];b[T]=this.state[m][T]}h[m]=h[m]||{},c.extend(h[m],b)}if(this.stateChanges={},this.deletedStates={},Object.keys(h).length!==0)for(const m in n)n[m].setFeatureState(h,s)}}class Ft extends c.Evented{constructor(n,s,h){super(),this.id=n,this.dispatcher=h,this.on("data",m=>{m.dataType==="source"&&m.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&m.dataType==="source"&&m.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(m,b,T,C){const I=new Ue[b.type](m,b,T,C);if(I.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${I.id}`);return c.bindAll(["load","abort","unload","serialize","prepare"],I),I}(n,s,h,this),this._tiles={},this._cache=new Kt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Yt}onAdd(n){this.map=n,this._maxTileCacheSize=n?n._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(n)}onRemove(n){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(n)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const n in this._tiles){const s=this._tiles[n];if(s.state!=="loaded"&&s.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(n,s){return this._source.loadTile(n,s)}_unloadTile(n){if(this._source.unloadTile)return this._source.unloadTile(n,()=>{})}_abortTile(n){this._source.abortTile&&this._source.abortTile(n,()=>{}),this._source.fire(new c.Event("dataabort",{tile:n,coord:n.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const s in this._tiles){const h=this._tiles[s];h.upload(n),h.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(n=>n.tileID).sort(An).map(n=>n.key)}getRenderableIds(n){const s=[];for(const h in this._tiles)this._isIdRenderable(h,n)&&s.push(this._tiles[h]);return n?s.sort((h,m)=>{const b=h.tileID,T=m.tileID,C=new c.pointGeometry(b.canonical.x,b.canonical.y)._rotate(this.transform.angle),I=new c.pointGeometry(T.canonical.x,T.canonical.y)._rotate(this.transform.angle);return b.overscaledZ-T.overscaledZ||I.y-C.y||I.x-C.x}).map(h=>h.tileID.key):s.map(h=>h.tileID).sort(An).map(h=>h.key)}hasRenderableParent(n){const s=this.findLoadedParent(n,0);return!!s&&this._isIdRenderable(s.tileID.key)}_isIdRenderable(n,s){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(s||!this._tiles[n].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const n in this._tiles)this._tiles[n].state!=="errored"&&this._reloadTile(n,"reloading")}}_reloadTile(n,s){const h=this._tiles[n];h&&(h.state!=="loading"&&(h.state=s),this._loadTile(h,this._tileLoaded.bind(this,h,n,s)))}_tileLoaded(n,s,h,m){if(m)return n.state="errored",void(m.status!==404?this._source.fire(new c.ErrorEvent(m,{tile:n})):this.update(this.transform,this.terrain));n.timeAdded=c.exported.now(),h==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(s,n),this.getSource().type==="raster-dem"&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),n.aborted||this._source.fire(new c.Event("data",{dataType:"source",tile:n,coord:n.tileID}))}_backfillDEM(n){const s=this.getRenderableIds();for(let m=0;m<s.length;m++){const b=s[m];if(n.neighboringTiles&&n.neighboringTiles[b]){const T=this.getTileByID(b);h(n,T),h(T,n)}}function h(m,b){m.needsHillshadePrepare=!0,m.needsTerrainPrepare=!0;let T=b.tileID.canonical.x-m.tileID.canonical.x;const C=b.tileID.canonical.y-m.tileID.canonical.y,I=Math.pow(2,m.tileID.canonical.z),z=b.tileID.key;T===0&&C===0||Math.abs(C)>1||(Math.abs(T)>1&&(Math.abs(T+I)===1?T+=I:Math.abs(T-I)===1&&(T-=I)),b.dem&&m.dem&&(m.dem.backfillBorder(b.dem,T,C),m.neighboringTiles&&m.neighboringTiles[z]&&(m.neighboringTiles[z].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,s,h,m){for(const b in this._tiles){let T=this._tiles[b];if(m[b]||!T.hasData()||T.tileID.overscaledZ<=s||T.tileID.overscaledZ>h)continue;let C=T.tileID;for(;T&&T.tileID.overscaledZ>s+1;){const z=T.tileID.scaledTo(T.tileID.overscaledZ-1);T=this._tiles[z.key],T&&T.hasData()&&(C=z)}let I=C;for(;I.overscaledZ>s;)if(I=I.scaledTo(I.overscaledZ-1),n[I.key]){m[C.key]=C;break}}}findLoadedParent(n,s){if(n.key in this._loadedParentTiles){const h=this._loadedParentTiles[n.key];return h&&h.tileID.overscaledZ>=s?h:null}for(let h=n.overscaledZ-1;h>=s;h--){const m=n.scaledTo(h),b=this._getLoadedTile(m);if(b)return b}}_getLoadedTile(n){const s=this._tiles[n.key];return s&&s.hasData()?s:this._cache.getByKey(n.wrapped().key)}updateCacheSize(n){const s=Math.ceil(n.width/this._source.tileSize)+1,h=Math.ceil(n.height/this._source.tileSize)+1,m=Math.floor(s*h*5),b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(b)}handleWrapJump(n){const s=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);if(this._prevLng=n,s){const h={};for(const m in this._tiles){const b=this._tiles[m];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+s),h[b.tileID.key]=b}this._tiles=h;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(m,this._tiles[m])}}update(n,s){if(this.transform=n,this.terrain=s,!this._sourceLoaded||this._paused)return;let h;this.updateCacheSize(n),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?h=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(z=>new c.OverscaledTileID(z.canonical.z,z.wrap,z.canonical.z,z.canonical.x,z.canonical.y)):(h=n.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:s}),this._source.hasTile&&(h=h.filter(z=>this._source.hasTile(z)))):h=[];const m=n.coveringZoomLevel(this._source),b=Math.max(m-Ft.maxOverzooming,this._source.minzoom),T=Math.max(m+Ft.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const z={};for(const R of h)if(R.canonical.z>this._source.minzoom){const B=R.scaledTo(R.canonical.z-1);z[B.key]=B;const H=R.scaledTo(Math.max(this._source.minzoom,Math.min(R.canonical.z,5)));z[H.key]=H}h=h.concat(Object.values(z))}const C=this._updateRetainedTiles(h,m);if(br(this._source.type)){const z={},R={},B=Object.keys(C);for(const H of B){const Y=C[H],X=this._tiles[H];if(!X||X.fadeEndTime&&X.fadeEndTime<=c.exported.now())continue;const Z=this.findLoadedParent(Y,b);Z&&(this._addTile(Z.tileID),z[Z.tileID.key]=Z.tileID),R[H]=Y}this._retainLoadedChildren(R,m,T,C);for(const H in z)C[H]||(this._coveredTiles[H]=!0,C[H]=z[H]);if(s){const H={},Y={};for(const X of h)this._tiles[X.key].hasData()?H[X.key]=X:Y[X.key]=X;for(const X in Y){const Z=Y[X].children(this._source.maxzoom);this._tiles[Z[0].key]&&this._tiles[Z[1].key]&&this._tiles[Z[2].key]&&this._tiles[Z[3].key]&&(H[Z[0].key]=C[Z[0].key]=Z[0],H[Z[1].key]=C[Z[1].key]=Z[1],H[Z[2].key]=C[Z[2].key]=Z[2],H[Z[3].key]=C[Z[3].key]=Z[3],delete Y[X])}for(const X in Y){const Z=this.findLoadedParent(Y[X],this._source.minzoom);if(Z){H[Z.tileID.key]=C[Z.tileID.key]=Z.tileID;for(const se in H)H[se].isChildOf(Z.tileID)&&delete H[se]}}for(const X in this._tiles)H[X]||(this._coveredTiles[X]=!0)}}for(const z in C)this._tiles[z].clearFadeHold();const I=c.keysDifference(this._tiles,C);for(const z of I){const R=this._tiles[z];R.hasSymbolBuckets&&!R.holdingForFade()?R.setHoldDuration(this.map._fadeDuration):R.hasSymbolBuckets&&!R.symbolFadeFinished()||this._removeTile(z)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(n)}_updateRetainedTiles(n,s){const h={},m={},b=Math.max(s-Ft.maxOverzooming,this._source.minzoom),T=Math.max(s+Ft.maxUnderzooming,this._source.minzoom),C={};for(const I of n){const z=this._addTile(I);h[I.key]=I,z.hasData()||s<this._source.maxzoom&&(C[I.key]=I)}this._retainLoadedChildren(C,s,T,h);for(const I of n){let z=this._tiles[I.key];if(z.hasData())continue;if(s+1>this._source.maxzoom){const B=I.children(this._source.maxzoom)[0],H=this.getTile(B);if(H&&H.hasData()){h[B.key]=B;continue}}else{const B=I.children(this._source.maxzoom);if(h[B[0].key]&&h[B[1].key]&&h[B[2].key]&&h[B[3].key])continue}let R=z.wasRequested();for(let B=I.overscaledZ-1;B>=b;--B){const H=I.scaledTo(B);if(m[H.key]||(m[H.key]=!0,z=this.getTile(H),!z&&R&&(z=this._addTile(H)),z&&(h[H.key]=H,R=z.wasRequested(),z.hasData())))break}}return h}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const s=[];let h,m=this._tiles[n].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){h=this._loadedParentTiles[m.key];break}s.push(m.key);const b=m.scaledTo(m.overscaledZ-1);if(h=this._getLoadedTile(b),h)break;m=b}for(const b of s)this._loadedParentTiles[b]=h}}_addTile(n){let s=this._tiles[n.key];if(s)return s;s=this._cache.getAndRemove(n),s&&(this._setTileReloadTimer(n.key,s),s.tileID=n,this._state.initializeTileState(s,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,s)));const h=s;return s||(s=new zt(n,this._source.tileSize*n.overscaleFactor()),this._loadTile(s,this._tileLoaded.bind(this,s,n.key,s.state))),s.uses++,this._tiles[n.key]=s,h||this._source.fire(new c.Event("dataloading",{tile:s,coord:s.tileID,dataType:"source"})),s}_setTileReloadTimer(n,s){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const h=s.getExpiryTimeout();h&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},h))}_removeTile(n){const s=this._tiles[n];s&&(s.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),s.uses>0||(s.hasData()&&s.state!=="reloading"?this._cache.add(s.tileID,s,s.getExpiryTimeout()):(s.aborted=!0,this._abortTile(s),this._unloadTile(s))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(n);this._cache.reset()}tilesIn(n,s,h){const m=[],b=this.transform;if(!b)return m;const T=h?b.getCameraQueryGeometry(n):n,C=n.map(X=>b.pointCoordinate(X,this.terrain)),I=T.map(X=>b.pointCoordinate(X,this.terrain)),z=this.getIds();let R=1/0,B=1/0,H=-1/0,Y=-1/0;for(const X of I)R=Math.min(R,X.x),B=Math.min(B,X.y),H=Math.max(H,X.x),Y=Math.max(Y,X.y);for(let X=0;X<z.length;X++){const Z=this._tiles[z[X]];if(Z.holdingForFade())continue;const se=Z.tileID,ge=Math.pow(2,b.zoom-Z.tileID.overscaledZ),xe=s*Z.queryPadding*c.EXTENT/Z.tileSize/ge,te=[se.getTilePoint(new c.MercatorCoordinate(R,B)),se.getTilePoint(new c.MercatorCoordinate(H,Y))];if(te[0].x-xe<c.EXTENT&&te[0].y-xe<c.EXTENT&&te[1].x+xe>=0&&te[1].y+xe>=0){const Te=C.map(Pe=>se.getTilePoint(Pe)),Se=I.map(Pe=>se.getTilePoint(Pe));m.push({tile:Z,tileID:se,queryGeometry:Te,cameraQueryGeometry:Se,scale:ge})}}return m}getVisibleCoordinates(n){const s=this.getRenderableIds(n).map(h=>this._tiles[h].tileID);for(const h of s)h.posMatrix=this.transform.calculatePosMatrix(h.toUnwrapped());return s}hasTransition(){if(this._source.hasTransition())return!0;if(br(this._source.type))for(const n in this._tiles){const s=this._tiles[n];if(s.fadeEndTime!==void 0&&s.fadeEndTime>=c.exported.now())return!0}return!1}setFeatureState(n,s,h){this._state.updateState(n=n||"_geojsonTileLayer",s,h)}removeFeatureState(n,s,h){this._state.removeFeatureState(n=n||"_geojsonTileLayer",s,h)}getFeatureState(n,s){return this._state.getState(n=n||"_geojsonTileLayer",s)}setDependencies(n,s,h){const m=this._tiles[n];m&&m.setDependencies(s,h)}reloadTilesForDependencies(n,s){for(const h in this._tiles)this._tiles[h].hasDependency(n,s)&&this._reloadTile(h,"reloading");this._cache.filter(h=>!h.hasDependency(n,s))}}function An(f,n){const s=Math.abs(2*f.wrap)-+(f.wrap<0),h=Math.abs(2*n.wrap)-+(n.wrap<0);return f.overscaledZ-n.overscaledZ||h-s||n.canonical.y-f.canonical.y||n.canonical.x-f.canonical.x}function br(f){return f==="raster"||f==="image"||f==="video"}Ft.maxOverzooming=10,Ft.maxUnderzooming=3;const nr="mapboxgl_preloaded_worker_pool";class Rn{constructor(){this.active={}}acquire(n){if(!this.workers)for(this.workers=[];this.workers.length<Rn.workerCount;)this.workers.push(new Worker(ui.workerUrl));return this.active[n]=!0,this.workers.slice()}release(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach(s=>{s.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[nr]}numActive(){return Object.keys(this.active).length}}const si=Math.floor(c.exported.hardwareConcurrency/2);let Je;function Qe(){return Je||(Je=new Rn),Je}function Ot(f,n){const s={};for(const h in f)h!=="ref"&&(s[h]=f[h]);return c.refProperties.forEach(h=>{h in n&&(s[h]=n[h])}),s}function ln(f){f=f.slice();const n=Object.create(null);for(let s=0;s<f.length;s++)n[f[s].id]=f[s];for(let s=0;s<f.length;s++)"ref"in f[s]&&(f[s]=Ot(f[s],n[f[s].ref]));return f}Rn.workerCount=Math.max(Math.min(si,6),1);const dt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function tn(f,n,s){s.push({command:dt.addSource,args:[f,n[f]]})}function Sr(f,n,s){n.push({command:dt.removeSource,args:[f]}),s[f]=!0}function Sn(f,n,s,h){Sr(f,s,h),tn(f,n,s)}function rr(f,n,s){let h;for(h in f[s])if(Object.prototype.hasOwnProperty.call(f[s],h)&&h!=="data"&&!$(f[s][h],n[s][h]))return!1;for(h in n[s])if(Object.prototype.hasOwnProperty.call(n[s],h)&&h!=="data"&&!$(f[s][h],n[s][h]))return!1;return!0}function On(f,n,s,h,m,b){let T;for(T in n=n||{},f=f||{})Object.prototype.hasOwnProperty.call(f,T)&&($(f[T],n[T])||s.push({command:b,args:[h,T,n[T],m]}));for(T in n)Object.prototype.hasOwnProperty.call(n,T)&&!Object.prototype.hasOwnProperty.call(f,T)&&($(f[T],n[T])||s.push({command:b,args:[h,T,n[T],m]}))}function Fr(f){return f.id}function Hr(f,n){return f[n.id]=n,f}class Le{constructor(n,s){this.reset(n,s)}reset(n,s){this.points=n||[],this._distances=[0];for(let h=1;h<this.points.length;h++)this._distances[h]=this._distances[h-1]+this.points[h].dist(this.points[h-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(s||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(n){if(this.points.length===1)return this.points[0];n=c.clamp(n,0,1);let s=1,h=this._distances[s];const m=n*this.paddedLength+this.padding;for(;h<m&&s<this._distances.length;)h=this._distances[++s];const b=s-1,T=this._distances[b],C=h-T,I=C>0?(m-T)/C:0;return this.points[b].mult(1-I).add(this.points[s].mult(I))}}function Ze(f,n){let s=!0;return f==="always"||f!=="never"&&n!=="never"||(s=!1),s}class Er{constructor(n,s,h){const m=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(n/h),this.yCellCount=Math.ceil(s/h);for(let T=0;T<this.xCellCount*this.yCellCount;T++)m.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=s,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/s,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(n,s,h,m,b){this._forEachCell(s,h,m,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(b)}insertCircle(n,s,h,m){this._forEachCell(s-m,h-m,s+m,h+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(s),this.circles.push(h),this.circles.push(m)}_insertBoxCell(n,s,h,m,b,T){this.boxCells[b].push(T)}_insertCircleCell(n,s,h,m,b,T){this.circleCells[b].push(T)}_query(n,s,h,m,b,T,C){if(h<0||n>this.width||m<0||s>this.height)return[];const I=[];if(n<=0&&s<=0&&this.width<=h&&this.height<=m){if(b)return[{key:null,x1:n,y1:s,x2:h,y2:m}];for(let z=0;z<this.boxKeys.length;z++)I.push({key:this.boxKeys[z],x1:this.bboxes[4*z],y1:this.bboxes[4*z+1],x2:this.bboxes[4*z+2],y2:this.bboxes[4*z+3]});for(let z=0;z<this.circleKeys.length;z++){const R=this.circles[3*z],B=this.circles[3*z+1],H=this.circles[3*z+2];I.push({key:this.circleKeys[z],x1:R-H,y1:B-H,x2:R+H,y2:B+H})}}else this._forEachCell(n,s,h,m,this._queryCell,I,{hitTest:b,overlapMode:T,seenUids:{box:{},circle:{}}},C);return I}query(n,s,h,m){return this._query(n,s,h,m,!1,null)}hitTest(n,s,h,m,b,T){return this._query(n,s,h,m,!0,b,T).length>0}hitTestCircle(n,s,h,m,b){const T=n-h,C=n+h,I=s-h,z=s+h;if(C<0||T>this.width||z<0||I>this.height)return!1;const R=[];return this._forEachCell(T,I,C,z,this._queryCellCircle,R,{hitTest:!0,overlapMode:m,circle:{x:n,y:s,radius:h},seenUids:{box:{},circle:{}}},b),R.length>0}_queryCell(n,s,h,m,b,T,C,I){const{seenUids:z,hitTest:R,overlapMode:B}=C,H=this.boxCells[b];if(H!==null){const X=this.bboxes;for(const Z of H)if(!z.box[Z]){z.box[Z]=!0;const se=4*Z,ge=this.boxKeys[Z];if(n<=X[se+2]&&s<=X[se+3]&&h>=X[se+0]&&m>=X[se+1]&&(!I||I(ge))&&(!R||!Ze(B,ge.overlapMode))&&(T.push({key:ge,x1:X[se],y1:X[se+1],x2:X[se+2],y2:X[se+3]}),R))return!0}}const Y=this.circleCells[b];if(Y!==null){const X=this.circles;for(const Z of Y)if(!z.circle[Z]){z.circle[Z]=!0;const se=3*Z,ge=this.circleKeys[Z];if(this._circleAndRectCollide(X[se],X[se+1],X[se+2],n,s,h,m)&&(!I||I(ge))&&(!R||!Ze(B,ge.overlapMode))){const xe=X[se],te=X[se+1],Te=X[se+2];if(T.push({key:ge,x1:xe-Te,y1:te-Te,x2:xe+Te,y2:te+Te}),R)return!0}}}return!1}_queryCellCircle(n,s,h,m,b,T,C,I){const{circle:z,seenUids:R,overlapMode:B}=C,H=this.boxCells[b];if(H!==null){const X=this.bboxes;for(const Z of H)if(!R.box[Z]){R.box[Z]=!0;const se=4*Z,ge=this.boxKeys[Z];if(this._circleAndRectCollide(z.x,z.y,z.radius,X[se+0],X[se+1],X[se+2],X[se+3])&&(!I||I(ge))&&!Ze(B,ge.overlapMode))return T.push(!0),!0}}const Y=this.circleCells[b];if(Y!==null){const X=this.circles;for(const Z of Y)if(!R.circle[Z]){R.circle[Z]=!0;const se=3*Z,ge=this.circleKeys[Z];if(this._circlesCollide(X[se],X[se+1],X[se+2],z.x,z.y,z.radius)&&(!I||I(ge))&&!Ze(B,ge.overlapMode))return T.push(!0),!0}}}_forEachCell(n,s,h,m,b,T,C,I){const z=this._convertToXCellCoord(n),R=this._convertToYCellCoord(s),B=this._convertToXCellCoord(h),H=this._convertToYCellCoord(m);for(let Y=z;Y<=B;Y++)for(let X=R;X<=H;X++)if(b.call(this,n,s,h,m,this.xCellCount*X+Y,T,C,I))return}_convertToXCellCoord(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}_convertToYCellCoord(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}_circlesCollide(n,s,h,m,b,T){const C=m-n,I=b-s,z=h+T;return z*z>C*C+I*I}_circleAndRectCollide(n,s,h,m,b,T,C){const I=(T-m)/2,z=Math.abs(n-(m+I));if(z>I+h)return!1;const R=(C-b)/2,B=Math.abs(s-(b+R));if(B>R+h)return!1;if(z<=I||B<=R)return!0;const H=z-I,Y=B-R;return H*H+Y*Y<=h*h}}function ir(f,n,s,h,m){const b=c.create();return n?(c.scale(b,b,[1/m,1/m,1]),s||c.rotateZ(b,b,h.angle)):c.multiply(b,h.labelPlaneMatrix,f),b}function dn(f,n,s,h,m){if(n){const b=c.clone(f);return c.scale(b,b,[m,m,1]),s||c.rotateZ(b,b,-h.angle),b}return h.glCoordMatrix}function En(f,n,s){let h;s?(h=[f.x,f.y,s(f.x,f.y),1],c.transformMat4(h,h,n)):(h=[f.x,f.y,0,1],Gr(h,h,n));const m=h[3];return{point:new c.pointGeometry(h[0]/m,h[1]/m),signedDistanceFromCamera:m}}function Qn(f,n){return .5+f/n*.5}function ai(f,n){const s=f[0]/f[3],h=f[1]/f[3];return s>=-n[0]&&s<=n[0]&&h>=-n[1]&&h<=n[1]}function fr(f,n,s,h,m,b,T,C,I,z){const R=h?f.textSizeData:f.iconSizeData,B=c.evaluateSizeForZoom(R,s.transform.zoom),H=[256/s.width*2+1,256/s.height*2+1],Y=h?f.text.dynamicLayoutVertexArray:f.icon.dynamicLayoutVertexArray;Y.clear();const X=f.lineVertexArray,Z=h?f.text.placedSymbolArray:f.icon.placedSymbolArray,se=s.transform.width/s.transform.height;let ge=!1;for(let xe=0;xe<Z.length;xe++){const te=Z.get(xe);if(te.hidden||te.writingMode===c.WritingMode.vertical&&!ge){or(te.numGlyphs,Y);continue}let Te;if(ge=!1,z?(Te=[te.anchorX,te.anchorY,z(te.anchorX,te.anchorY),1],c.transformMat4(Te,Te,n)):(Te=[te.anchorX,te.anchorY,0,1],Gr(Te,Te,n)),!ai(Te,H)){or(te.numGlyphs,Y);continue}const Se=Qn(s.transform.cameraToCenterDistance,Te[3]),Pe=c.evaluateSizeForFeature(R,B,te),Re=T?Pe/Se:Pe*Se,He=new c.pointGeometry(te.anchorX,te.anchorY),ze=En(He,m,z).point,at={},et=jt(te,Re,!1,C,n,m,b,f.glyphOffsetArray,X,Y,ze,He,at,se,I,z);ge=et.useVertical,(et.notEnoughRoom||ge||et.needsFlipping&&jt(te,Re,!0,C,n,m,b,f.glyphOffsetArray,X,Y,ze,He,at,se,I,z).notEnoughRoom)&&or(te.numGlyphs,Y)}h?f.text.dynamicLayoutVertexBuffer.updateData(Y):f.icon.dynamicLayoutVertexBuffer.updateData(Y)}function Ye(f,n,s,h,m,b,T,C,I,z,R,B,H){const Y=C.glyphStartIndex+C.numGlyphs,X=C.lineStartIndex,Z=C.lineStartIndex+C.lineLength,se=n.getoffsetX(C.glyphStartIndex),ge=n.getoffsetX(Y-1),xe=lr(f*se,s,h,m,b,T,C.segment,X,Z,I,z,R,B,H);if(!xe)return null;const te=lr(f*ge,s,h,m,b,T,C.segment,X,Z,I,z,R,B,H);return te?{first:xe,last:te}:null}function Bt(f,n,s,h){return f===c.WritingMode.horizontal&&Math.abs(s.y-n.y)>Math.abs(s.x-n.x)*h?{useVertical:!0}:(f===c.WritingMode.vertical?n.y<s.y:n.x>s.x)?{needsFlipping:!0}:null}function jt(f,n,s,h,m,b,T,C,I,z,R,B,H,Y,X,Z){const se=n/24,ge=f.lineOffsetX*se,xe=f.lineOffsetY*se;let te;if(f.numGlyphs>1){const Te=f.glyphStartIndex+f.numGlyphs,Se=f.lineStartIndex,Pe=f.lineStartIndex+f.lineLength,Re=Ye(se,C,ge,xe,s,R,B,f,I,b,H,X,Z);if(!Re)return{notEnoughRoom:!0};const He=En(Re.first.point,T,Z).point,ze=En(Re.last.point,T,Z).point;if(h&&!s){const at=Bt(f.writingMode,He,ze,Y);if(at)return at}te=[Re.first];for(let at=f.glyphStartIndex+1;at<Te-1;at++)te.push(lr(se*C.getoffsetX(at),ge,xe,s,R,B,f.segment,Se,Pe,I,b,H,X,Z));te.push(Re.last)}else{if(h&&!s){const Se=En(B,m,Z).point,Pe=f.lineStartIndex+f.segment+1,Re=new c.pointGeometry(I.getx(Pe),I.gety(Pe)),He=En(Re,m,Z),ze=He.signedDistanceFromCamera>0?He.point:er(B,Re,Se,1,m,Z),at=Bt(f.writingMode,Se,ze,Y);if(at)return at}const Te=lr(se*C.getoffsetX(f.glyphStartIndex),ge,xe,s,R,B,f.segment,f.lineStartIndex,f.lineStartIndex+f.lineLength,I,b,H,X,Z);if(!Te)return{notEnoughRoom:!0};te=[Te]}for(const Te of te)c.addDynamicAttributes(z,Te.point,Te.angle);return{}}function er(f,n,s,h,m,b){const T=En(f.add(f.sub(n)._unit()),m,b).point,C=s.sub(T);return s.add(C._mult(h/C.mag()))}function lr(f,n,s,h,m,b,T,C,I,z,R,B,H,Y){const X=h?f-n:f+n;let Z=X>0?1:-1,se=0;h&&(Z*=-1,se=Math.PI),Z<0&&(se+=Math.PI);let ge=Z>0?C+T:C+T+1,xe=m,te=m,Te=0,Se=0;const Pe=Math.abs(X),Re=[];for(;Te+Se<=Pe;){if(ge+=Z,ge<C||ge>=I)return null;if(te=xe,Re.push(xe),xe=B[ge],xe===void 0){const st=new c.pointGeometry(z.getx(ge),z.gety(ge)),Dt=En(st,R,Y);if(Dt.signedDistanceFromCamera>0)xe=B[ge]=Dt.point;else{const Gt=ge-Z;xe=er(Te===0?b:new c.pointGeometry(z.getx(Gt),z.gety(Gt)),st,te,Pe-Te+1,R,Y)}}Te+=Se,Se=te.dist(xe)}const He=(Pe-Te)/Se,ze=xe.sub(te),at=ze.mult(He)._add(te);at._add(ze._unit()._perp()._mult(s*Z));const et=se+Math.atan2(xe.y-te.y,xe.x-te.x);return Re.push(at),{point:at,angle:H?et:0,path:Re}}const Lt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function or(f,n){for(let s=0;s<f;s++){const h=n.length;n.resize(h+4),n.float32.set(Lt,3*h)}}function Gr(f,n,s){const h=n[0],m=n[1];return f[0]=s[0]*h+s[4]*m+s[12],f[1]=s[1]*h+s[5]*m+s[13],f[3]=s[3]*h+s[7]*m+s[15],f}const Ne=100;class St{constructor(n,s=new Er(n.width+200,n.height+200,25),h=new Er(n.width+200,n.height+200,25)){this.transform=n,this.grid=s,this.ignoredGrid=h,this.pitchfactor=Math.cos(n._pitch)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+Ne,this.screenBottomBoundary=n.height+Ne,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(n,s,h,m,b,T){const C=this.projectAndGetPerspectiveRatio(m,n.anchorPointX,n.anchorPointY,T),I=h*C.perspectiveRatio,z=n.x1*I+C.point.x,R=n.y1*I+C.point.y,B=n.x2*I+C.point.x,H=n.y2*I+C.point.y;return!this.isInsideGrid(z,R,B,H)||s!=="always"&&this.grid.hitTest(z,R,B,H,s,b)||C.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[z,R,B,H],offscreen:this.isOffscreen(z,R,B,H)}}placeCollisionCircles(n,s,h,m,b,T,C,I,z,R,B,H,Y,X){const Z=[],se=new c.pointGeometry(s.anchorX,s.anchorY),ge=En(se,T,X),xe=Qn(this.transform.cameraToCenterDistance,ge.signedDistanceFromCamera),te=(R?b/xe:b*xe)/c.ONE_EM,Te=En(se,C,X).point,Se=Ye(te,m,s.lineOffsetX*te,s.lineOffsetY*te,!1,Te,se,s,h,C,{},!1,X);let Pe=!1,Re=!1,He=!0;if(Se){const ze=.5*H*xe+Y,at=new c.pointGeometry(-100,-100),et=new c.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),st=new Le,Dt=Se.first,Gt=Se.last;let wt=[];for(let Qt=Dt.path.length-1;Qt>=1;Qt--)wt.push(Dt.path[Qt]);for(let Qt=1;Qt<Gt.path.length;Qt++)wt.push(Gt.path[Qt]);const xn=2.5*ze;if(I){const Qt=wt.map(en=>En(en,I,X));wt=Qt.some(en=>en.signedDistanceFromCamera<=0)?[]:Qt.map(en=>en.point)}let nn=[];if(wt.length>0){const Qt=wt[0].clone(),en=wt[0].clone();for(let rn=1;rn<wt.length;rn++)Qt.x=Math.min(Qt.x,wt[rn].x),Qt.y=Math.min(Qt.y,wt[rn].y),en.x=Math.max(en.x,wt[rn].x),en.y=Math.max(en.y,wt[rn].y);nn=Qt.x>=at.x&&en.x<=et.x&&Qt.y>=at.y&&en.y<=et.y?[wt]:en.x<at.x||Qt.x>et.x||en.y<at.y||Qt.y>et.y?[]:c.clipLine([wt],at.x,at.y,et.x,et.y)}for(const Qt of nn){st.reset(Qt,.25*ze);let en=0;en=st.length<=.5*ze?1:Math.ceil(st.paddedLength/xn)+1;for(let rn=0;rn<en;rn++){const Pr=rn/Math.max(en-1,1),Kn=st.lerp(Pr),Vn=Kn.x+Ne,gr=Kn.y+Ne;Z.push(Vn,gr,ze,0);const $r=Vn-ze,jn=gr-ze,yr=Vn+ze,To=gr+ze;if(He=He&&this.isOffscreen($r,jn,yr,To),Re=Re||this.isInsideGrid($r,jn,yr,To),n!=="always"&&this.grid.hitTestCircle(Vn,gr,ze,n,B)&&(Pe=!0,!z))return{circles:[],offscreen:!1,collisionDetected:Pe}}}}return{circles:!z&&Pe||!Re||xe<this.perspectiveRatioCutoff?[]:Z,offscreen:He,collisionDetected:Pe}}queryRenderedSymbols(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const s=[];let h=1/0,m=1/0,b=-1/0,T=-1/0;for(const R of n){const B=new c.pointGeometry(R.x+Ne,R.y+Ne);h=Math.min(h,B.x),m=Math.min(m,B.y),b=Math.max(b,B.x),T=Math.max(T,B.y),s.push(B)}const C=this.grid.query(h,m,b,T).concat(this.ignoredGrid.query(h,m,b,T)),I={},z={};for(const R of C){const B=R.key;if(I[B.bucketInstanceId]===void 0&&(I[B.bucketInstanceId]={}),I[B.bucketInstanceId][B.featureIndex])continue;const H=[new c.pointGeometry(R.x1,R.y1),new c.pointGeometry(R.x2,R.y1),new c.pointGeometry(R.x2,R.y2),new c.pointGeometry(R.x1,R.y2)];c.polygonIntersectsPolygon(s,H)&&(I[B.bucketInstanceId][B.featureIndex]=!0,z[B.bucketInstanceId]===void 0&&(z[B.bucketInstanceId]=[]),z[B.bucketInstanceId].push(B.featureIndex))}return z}insertCollisionBox(n,s,h,m,b,T){(h?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:b,collisionGroupID:T,overlapMode:s},n[0],n[1],n[2],n[3])}insertCollisionCircles(n,s,h,m,b,T){const C=h?this.ignoredGrid:this.grid,I={bucketInstanceId:m,featureIndex:b,collisionGroupID:T,overlapMode:s};for(let z=0;z<n.length;z+=4)C.insertCircle(I,n[z],n[z+1],n[z+2])}projectAndGetPerspectiveRatio(n,s,h,m){let b;return m?(b=[s,h,m(s,h),1],c.transformMat4(b,b,n)):(b=[s,h,0,1],Gr(b,b,n)),{point:new c.pointGeometry((b[0]/b[3]+1)/2*this.transform.width+Ne,(-b[1]/b[3]+1)/2*this.transform.height+Ne),perspectiveRatio:.5+this.transform.cameraToCenterDistance/b[3]*.5}}isOffscreen(n,s,h,m){return h<Ne||n>=this.screenRightBoundary||m<Ne||s>this.screenBottomBoundary}isInsideGrid(n,s,h,m){return h>=0&&n<this.gridRightBoundary&&m>=0&&s<this.gridBottomBoundary}getViewportMatrix(){const n=c.identity([]);return c.translate(n,n,[-100,-100,0]),n}}function $t(f,n,s){return n*(c.EXTENT/(f.tileSize*Math.pow(2,s-f.tileID.overscaledZ)))}class mn{constructor(n,s,h,m){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?s:-s))):m&&h?1:0,this.placed=h}isHidden(){return this.opacity===0&&!this.placed}}class yi{constructor(n,s,h,m,b){this.text=new mn(n?n.text:null,s,h,b),this.icon=new mn(n?n.icon:null,s,m,b)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Tr{constructor(n,s,h){this.text=n,this.icon=s,this.skipFade=h}}class li{constructor(){this.invProjMatrix=c.create(),this.viewportMatrix=c.create(),this.circles=[]}}class vi{constructor(n,s,h,m,b){this.bucketInstanceId=n,this.featureIndex=s,this.sourceLayerIndex=h,this.bucketIndex=m,this.tileID=b}}class Vi{constructor(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}}get(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){const s=++this.maxGroupID;this.collisionGroups[n]={ID:s,predicate:h=>h.collisionGroupID===s}}return this.collisionGroups[n]}}function sa(f,n,s,h,m){const{horizontalAlign:b,verticalAlign:T}=c.getAnchorAlignment(f),C=-(b-.5)*n,I=-(T-.5)*s,z=c.evaluateVariableOffset(f,h);return new c.pointGeometry(C+z[0]*m,I+z[1]*m)}function Kr(f,n,s,h,m,b){const{x1:T,x2:C,y1:I,y2:z,anchorPointX:R,anchorPointY:B}=f,H=new c.pointGeometry(n,s);return h&&H._rotate(m?b:-b),{x1:T+H.x,y1:I+H.y,x2:C+H.x,y2:z+H.y,anchorPointX:R,anchorPointY:B}}class W{constructor(n,s,h,m,b){this.transform=n.clone(),this.terrain=s,this.collisionIndex=new St(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=h,this.retainedQueryData={},this.collisionGroups=new Vi(m),this.collisionCircleArrays={},this.prevPlacement=b,b&&(b.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(n,s,h,m){const b=h.getBucket(s),T=h.latestFeatureIndex;if(!b||!T||s.id!==b.layerIds[0])return;const C=h.collisionBoxArray,I=b.layers[0].layout,z=Math.pow(2,this.transform.zoom-h.tileID.overscaledZ),R=h.tileSize/c.EXTENT,B=this.transform.calculatePosMatrix(h.tileID.toUnwrapped()),H=I.get("text-pitch-alignment")==="map",Y=I.get("text-rotation-alignment")==="map",X=$t(h,1,this.transform.zoom),Z=ir(B,H,Y,this.transform,X);let se=null;if(H){const xe=dn(B,H,Y,this.transform,X);se=c.multiply([],this.transform.labelPlaneMatrix,xe)}this.retainedQueryData[b.bucketInstanceId]=new vi(b.bucketInstanceId,T,b.sourceLayerIndex,b.index,h.tileID);const ge={bucket:b,layout:I,posMatrix:B,textLabelPlaneMatrix:Z,labelToScreenMatrix:se,scale:z,textPixelRatio:R,holdingForFade:h.holdingForFade(),collisionBoxArray:C,partiallyEvaluatedTextSize:c.evaluateSizeForZoom(b.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(m)for(const xe of b.sortKeyRanges){const{sortKey:te,symbolInstanceStart:Te,symbolInstanceEnd:Se}=xe;n.push({sortKey:te,symbolInstanceStart:Te,symbolInstanceEnd:Se,parameters:ge})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:ge})}attemptAnchorPlacement(n,s,h,m,b,T,C,I,z,R,B,H,Y,X,Z,se){const ge=[H.textOffset0,H.textOffset1],xe=sa(n,h,m,ge,b),te=this.collisionIndex.placeCollisionBox(Kr(s,xe.x,xe.y,T,C,this.transform.angle),B,I,z,R.predicate,se);if((!Z||this.collisionIndex.placeCollisionBox(Kr(Z,xe.x,xe.y,T,C,this.transform.angle),B,I,z,R.predicate,se).box.length!==0)&&te.box.length>0){let Te;if(this.prevPlacement&&this.prevPlacement.variableOffsets[H.crossTileID]&&this.prevPlacement.placements[H.crossTileID]&&this.prevPlacement.placements[H.crossTileID].text&&(Te=this.prevPlacement.variableOffsets[H.crossTileID].anchor),H.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[H.crossTileID]={textOffset:ge,width:h,height:m,anchor:n,textBoxScale:b,prevAnchor:Te},this.markUsedJustification(Y,n,H,X),Y.allowVerticalPlacement&&(this.markUsedOrientation(Y,X,H),this.placedOrientations[H.crossTileID]=X),{shift:xe,placedGlyphBoxes:te}}}placeLayerBucketPart(n,s,h){const{bucket:m,layout:b,posMatrix:T,textLabelPlaneMatrix:C,labelToScreenMatrix:I,textPixelRatio:z,holdingForFade:R,collisionBoxArray:B,partiallyEvaluatedTextSize:H,collisionGroup:Y}=n.parameters,X=b.get("text-optional"),Z=b.get("icon-optional"),se=c.getOverlapMode(b,"text-overlap","text-allow-overlap"),ge=se==="always",xe=c.getOverlapMode(b,"icon-overlap","icon-allow-overlap"),te=xe==="always",Te=b.get("text-rotation-alignment")==="map",Se=b.get("text-pitch-alignment")==="map",Pe=b.get("icon-text-fit")!=="none",Re=b.get("symbol-z-order")==="viewport-y",He=ge&&(te||!m.hasIconData()||Z),ze=te&&(ge||!m.hasTextData()||X);!m.collisionArrays&&B&&m.deserializeCollisionBoxes(B);const at=(et,st)=>{if(s[et.crossTileID])return;if(R)return void(this.placements[et.crossTileID]=new Tr(!1,!1,!1));let Dt=!1,Gt=!1,wt=!0,xn=null,nn={box:null,offscreen:null},Qt={box:null},en=null,rn=null,Pr=null,Kn=0,Vn=0,gr=0;st.textFeatureIndex?Kn=st.textFeatureIndex:et.useRuntimeCollisionCircles&&(Kn=et.featureIndex),st.verticalTextFeatureIndex&&(Vn=st.verticalTextFeatureIndex);const $r=this.retainedQueryData[m.bucketInstanceId].tileID,jn=this.terrain?(cn,on)=>this.terrain.getElevation($r,cn,on):null;for(const cn of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const on=st[cn];on&&(on.elevation=jn?jn(on.anchorPointX,on.anchorPointY):0)}const yr=st.textBox;if(yr){const cn=Ht=>{let Jt=c.WritingMode.horizontal;if(m.allowVerticalPlacement&&!Ht&&this.prevPlacement){const Nn=this.prevPlacement.placedOrientations[et.crossTileID];Nn&&(this.placedOrientations[et.crossTileID]=Nn,Jt=Nn,this.markUsedOrientation(m,Jt,et))}return Jt},on=(Ht,Jt)=>{if(m.allowVerticalPlacement&&et.numVerticalGlyphVertices>0&&st.verticalTextBox){for(const Nn of m.writingModes)if(Nn===c.WritingMode.vertical?(nn=Jt(),Qt=nn):nn=Ht(),nn&&nn.box&&nn.box.length)break}else nn=Ht()};if(b.get("text-variable-anchor")){let Ht=b.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[et.crossTileID]){const Cn=this.prevPlacement.variableOffsets[et.crossTileID];Ht.indexOf(Cn.anchor)>0&&(Ht=Ht.filter(ei=>ei!==Cn.anchor),Ht.unshift(Cn.anchor))}const Jt=(Cn,ei,ko)=>{const Mo=Cn.x2-Cn.x1,za=Cn.y2-Cn.y1,Fs=et.textBoxScale,ja=Pe&&xe==="never"?ei:null;let Ir={box:[],offscreen:!1};const Os=se!=="never"?2*Ht.length:Ht.length;for(let Ra=0;Ra<Os;++Ra){const Co=this.attemptAnchorPlacement(Ht[Ra%Ht.length],Cn,Mo,za,Fs,Te,Se,z,T,Y,Ra>=Ht.length?se:"never",et,m,ko,ja,jn);if(Co&&(Ir=Co.placedGlyphBoxes,Ir&&Ir.box&&Ir.box.length)){Dt=!0,xn=Co.shift;break}}return Ir};on(()=>Jt(yr,st.iconBox,c.WritingMode.horizontal),()=>{const Cn=st.verticalTextBox;return m.allowVerticalPlacement&&!(nn&&nn.box&&nn.box.length)&&et.numVerticalGlyphVertices>0&&Cn?Jt(Cn,st.verticalIconBox,c.WritingMode.vertical):{box:null,offscreen:null}}),nn&&(Dt=nn.box,wt=nn.offscreen);const Nn=cn(nn&&nn.box);if(!Dt&&this.prevPlacement){const Cn=this.prevPlacement.variableOffsets[et.crossTileID];Cn&&(this.variableOffsets[et.crossTileID]=Cn,this.markUsedJustification(m,Cn.anchor,et,Nn))}}else{const Ht=(Jt,Nn)=>{const Cn=this.collisionIndex.placeCollisionBox(Jt,se,z,T,Y.predicate,jn);return Cn&&Cn.box&&Cn.box.length&&(this.markUsedOrientation(m,Nn,et),this.placedOrientations[et.crossTileID]=Nn),Cn};on(()=>Ht(yr,c.WritingMode.horizontal),()=>{const Jt=st.verticalTextBox;return m.allowVerticalPlacement&&et.numVerticalGlyphVertices>0&&Jt?Ht(Jt,c.WritingMode.vertical):{box:null,offscreen:null}}),cn(nn&&nn.box&&nn.box.length)}}if(en=nn,Dt=en&&en.box&&en.box.length>0,wt=en&&en.offscreen,et.useRuntimeCollisionCircles){const cn=m.text.placedSymbolArray.get(et.centerJustifiedTextSymbolIndex),on=c.evaluateSizeForFeature(m.textSizeData,H,cn),Ht=b.get("text-padding");rn=this.collisionIndex.placeCollisionCircles(se,cn,m.lineVertexArray,m.glyphOffsetArray,on,T,C,I,h,Se,Y.predicate,et.collisionCircleDiameter,Ht,jn),rn.circles.length&&rn.collisionDetected&&!h&&c.warnOnce("Collisions detected, but collision boxes are not shown"),Dt=ge||rn.circles.length>0&&!rn.collisionDetected,wt=wt&&rn.offscreen}if(st.iconFeatureIndex&&(gr=st.iconFeatureIndex),st.iconBox){const cn=on=>{const Ht=Pe&&xn?Kr(on,xn.x,xn.y,Te,Se,this.transform.angle):on;return this.collisionIndex.placeCollisionBox(Ht,xe,z,T,Y.predicate,jn)};Qt&&Qt.box&&Qt.box.length&&st.verticalIconBox?(Pr=cn(st.verticalIconBox),Gt=Pr.box.length>0):(Pr=cn(st.iconBox),Gt=Pr.box.length>0),wt=wt&&Pr.offscreen}const To=X||et.numHorizontalGlyphVertices===0&&et.numVerticalGlyphVertices===0,Bs=Z||et.numIconVertices===0;if(To||Bs?Bs?To||(Gt=Gt&&Dt):Dt=Gt&&Dt:Gt=Dt=Gt&&Dt,Dt&&en&&en.box&&this.collisionIndex.insertCollisionBox(en.box,se,b.get("text-ignore-placement"),m.bucketInstanceId,Qt&&Qt.box&&Vn?Vn:Kn,Y.ID),Gt&&Pr&&this.collisionIndex.insertCollisionBox(Pr.box,xe,b.get("icon-ignore-placement"),m.bucketInstanceId,gr,Y.ID),rn&&(Dt&&this.collisionIndex.insertCollisionCircles(rn.circles,se,b.get("text-ignore-placement"),m.bucketInstanceId,Kn,Y.ID),h)){const cn=m.bucketInstanceId;let on=this.collisionCircleArrays[cn];on===void 0&&(on=this.collisionCircleArrays[cn]=new li);for(let Ht=0;Ht<rn.circles.length;Ht+=4)on.circles.push(rn.circles[Ht+0]),on.circles.push(rn.circles[Ht+1]),on.circles.push(rn.circles[Ht+2]),on.circles.push(rn.collisionDetected?1:0)}if(et.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(m.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[et.crossTileID]=new Tr(Dt||He,Gt||ze,wt||m.justReloaded),s[et.crossTileID]=!0};if(Re){if(n.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const et=m.getSortedSymbolIndexes(this.transform.angle);for(let st=et.length-1;st>=0;--st){const Dt=et[st];at(m.symbolInstances.get(Dt),m.collisionArrays[Dt])}}else for(let et=n.symbolInstanceStart;et<n.symbolInstanceEnd;et++)at(m.symbolInstances.get(et),m.collisionArrays[et]);if(h&&m.bucketInstanceId in this.collisionCircleArrays){const et=this.collisionCircleArrays[m.bucketInstanceId];c.invert(et.invProjMatrix,T),et.viewportMatrix=this.collisionIndex.getViewportMatrix()}m.justReloaded=!1}markUsedJustification(n,s,h,m){let b;b=m===c.WritingMode.vertical?h.verticalPlacedTextSymbolIndex:{left:h.leftJustifiedTextSymbolIndex,center:h.centerJustifiedTextSymbolIndex,right:h.rightJustifiedTextSymbolIndex}[c.getAnchorJustification(s)];const T=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex,h.verticalPlacedTextSymbolIndex];for(const C of T)C>=0&&(n.text.placedSymbolArray.get(C).crossTileID=b>=0&&C!==b?0:h.crossTileID)}markUsedOrientation(n,s,h){const m=s===c.WritingMode.horizontal||s===c.WritingMode.horizontalOnly?s:0,b=s===c.WritingMode.vertical?s:0,T=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex];for(const C of T)n.text.placedSymbolArray.get(C).placedOrientation=m;h.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(h.verticalPlacedTextSymbolIndex).placedOrientation=b)}commit(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;const s=this.prevPlacement;let h=!1;this.prevZoomAdjustment=s?s.zoomAdjustment(this.transform.zoom):0;const m=s?s.symbolFadeChange(n):1,b=s?s.opacities:{},T=s?s.variableOffsets:{},C=s?s.placedOrientations:{};for(const I in this.placements){const z=this.placements[I],R=b[I];R?(this.opacities[I]=new yi(R,m,z.text,z.icon),h=h||z.text!==R.text.placed||z.icon!==R.icon.placed):(this.opacities[I]=new yi(null,m,z.text,z.icon,z.skipFade),h=h||z.text||z.icon)}for(const I in b){const z=b[I];if(!this.opacities[I]){const R=new yi(z,m,!1,!1);R.isHidden()||(this.opacities[I]=R,h=h||z.text.placed||z.icon.placed)}}for(const I in T)this.variableOffsets[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.variableOffsets[I]=T[I]);for(const I in C)this.placedOrientations[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.placedOrientations[I]=C[I]);if(s&&s.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");h?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=s?s.lastPlacementChangeTime:n)}updateLayerOpacities(n,s){const h={};for(const m of s){const b=m.getBucket(n);b&&m.latestFeatureIndex&&n.id===b.layerIds[0]&&this.updateBucketOpacities(b,h,m.collisionBoxArray)}}updateBucketOpacities(n,s,h){n.hasTextData()&&n.text.opacityVertexArray.clear(),n.hasIconData()&&n.icon.opacityVertexArray.clear(),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();const m=n.layers[0].layout,b=new yi(null,0,!1,!1,!0),T=m.get("text-allow-overlap"),C=m.get("icon-allow-overlap"),I=m.get("text-variable-anchor"),z=m.get("text-rotation-alignment")==="map",R=m.get("text-pitch-alignment")==="map",B=m.get("icon-text-fit")!=="none",H=new yi(null,0,T&&(C||!n.hasIconData()||m.get("icon-optional")),C&&(T||!n.hasTextData()||m.get("text-optional")),!0);!n.collisionArrays&&h&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(h);const Y=(X,Z,se)=>{for(let ge=0;ge<Z/4;ge++)X.opacityVertexArray.emplaceBack(se)};for(let X=0;X<n.symbolInstances.length;X++){const Z=n.symbolInstances.get(X),{numHorizontalGlyphVertices:se,numVerticalGlyphVertices:ge,crossTileID:xe}=Z;let te=this.opacities[xe];s[xe]?te=b:te||(te=H,this.opacities[xe]=te),s[xe]=!0;const Te=Z.numIconVertices>0,Se=this.placedOrientations[Z.crossTileID],Pe=Se===c.WritingMode.vertical,Re=Se===c.WritingMode.horizontal||Se===c.WritingMode.horizontalOnly;if(se>0||ge>0){const He=ye(te.text);Y(n.text,se,Pe?Ae:He),Y(n.text,ge,Re?Ae:He);const ze=te.text.isHidden();[Z.rightJustifiedTextSymbolIndex,Z.centerJustifiedTextSymbolIndex,Z.leftJustifiedTextSymbolIndex].forEach(st=>{st>=0&&(n.text.placedSymbolArray.get(st).hidden=ze||Pe?1:0)}),Z.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(Z.verticalPlacedTextSymbolIndex).hidden=ze||Re?1:0);const at=this.variableOffsets[Z.crossTileID];at&&this.markUsedJustification(n,at.anchor,Z,Se);const et=this.placedOrientations[Z.crossTileID];et&&(this.markUsedJustification(n,"left",Z,et),this.markUsedOrientation(n,et,Z))}if(Te){const He=ye(te.icon),ze=!(B&&Z.verticalPlacedIconSymbolIndex&&Pe);Z.placedIconSymbolIndex>=0&&(Y(n.icon,Z.numIconVertices,ze?He:Ae),n.icon.placedSymbolArray.get(Z.placedIconSymbolIndex).hidden=te.icon.isHidden()),Z.verticalPlacedIconSymbolIndex>=0&&(Y(n.icon,Z.numVerticalIconVertices,ze?Ae:He),n.icon.placedSymbolArray.get(Z.verticalPlacedIconSymbolIndex).hidden=te.icon.isHidden())}if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){const He=n.collisionArrays[X];if(He){let ze=new c.pointGeometry(0,0);if(He.textBox||He.verticalTextBox){let et=!0;if(I){const st=this.variableOffsets[xe];st?(ze=sa(st.anchor,st.width,st.height,st.textOffset,st.textBoxScale),z&&ze._rotate(R?this.transform.angle:-this.transform.angle)):et=!1}He.textBox&&j(n.textCollisionBox.collisionVertexArray,te.text.placed,!et||Pe,ze.x,ze.y),He.verticalTextBox&&j(n.textCollisionBox.collisionVertexArray,te.text.placed,!et||Re,ze.x,ze.y)}const at=!!(!Re&&He.verticalIconBox);He.iconBox&&j(n.iconCollisionBox.collisionVertexArray,te.icon.placed,at,B?ze.x:0,B?ze.y:0),He.verticalIconBox&&j(n.iconCollisionBox.collisionVertexArray,te.icon.placed,!at,B?ze.x:0,B?ze.y:0)}}}if(n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.text.opacityVertexArray.length!==n.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${n.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${n.text.layoutVertexArray.length}) / 4`);if(n.icon.opacityVertexArray.length!==n.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${n.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${n.icon.layoutVertexArray.length}) / 4`);if(n.bucketInstanceId in this.collisionCircleArrays){const X=this.collisionCircleArrays[n.bucketInstanceId];n.placementInvProjMatrix=X.invProjMatrix,n.placementViewportMatrix=X.viewportMatrix,n.collisionCircleArray=X.circles,delete this.collisionCircleArrays[n.bucketInstanceId]}}symbolFadeChange(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(n){return Math.max(0,(this.transform.zoom-n)/1.5)}hasTransitions(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(n,s){const h=this.zoomAtLastRecencyCheck===s?1-this.zoomAdjustment(s):1;return this.zoomAtLastRecencyCheck=s,this.commitTime+this.fadeDuration*h>n}setStale(){this.stale=!0}}function j(f,n,s,h,m){f.emplaceBack(n?1:0,s?1:0,h||0,m||0),f.emplaceBack(n?1:0,s?1:0,h||0,m||0),f.emplaceBack(n?1:0,s?1:0,h||0,m||0),f.emplaceBack(n?1:0,s?1:0,h||0,m||0)}const D=Math.pow(2,25),G=Math.pow(2,24),K=Math.pow(2,17),ae=Math.pow(2,16),pe=Math.pow(2,9),de=Math.pow(2,8),le=Math.pow(2,1);function ye(f){if(f.opacity===0&&!f.placed)return 0;if(f.opacity===1&&f.placed)return 4294967295;const n=f.placed?1:0,s=Math.floor(127*f.opacity);return s*D+n*G+s*K+n*ae+s*pe+n*de+s*le+n}const Ae=0;class $e{constructor(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&!n.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(n,s,h,m,b){const T=this._bucketParts;for(;this._currentTileIndex<n.length;)if(s.getBucketParts(T,m,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,T.sort((C,I)=>C.sortKey-I.sortKey));this._currentPartIndex<T.length;)if(s.placeLayerBucketPart(T[this._currentPartIndex],this._seenCrossTileIDs,h),this._currentPartIndex++,b())return!0;return!1}}class Oe{constructor(n,s,h,m,b,T,C,I){this.placement=new W(n,s,T,C,I),this._currentPlacementIndex=h.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=b,this._done=!1}isDone(){return this._done}continuePlacement(n,s,h){const m=c.exported.now(),b=()=>{const T=c.exported.now()-m;return!this._forceFullPlacement&&T>2};for(;this._currentPlacementIndex>=0;){const T=s[n[this._currentPlacementIndex]],C=this.placement.collisionIndex.transform.zoom;if(T.type==="symbol"&&(!T.minzoom||T.minzoom<=C)&&(!T.maxzoom||T.maxzoom>C)){if(this._inProgressLayer||(this._inProgressLayer=new $e(T)),this._inProgressLayer.continuePlacement(h[T.source],this.placement,this._showCollisionBoxes,T,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(n){return this.placement.commit(n),this.placement}}const pt=512/c.EXTENT/2;class ct{constructor(n,s,h){this.tileID=n,this.indexedSymbolInstances={},this.bucketInstanceId=h;for(let m=0;m<s.length;m++){const b=s.get(m),T=b.key;this.indexedSymbolInstances[T]||(this.indexedSymbolInstances[T]=[]),this.indexedSymbolInstances[T].push({crossTileID:b.crossTileID,coord:this.getScaledCoordinates(b,n)})}}getScaledCoordinates(n,s){const h=pt/Math.pow(2,s.canonical.z-this.tileID.canonical.z);return{x:Math.floor((s.canonical.x*c.EXTENT+n.anchorX)*h),y:Math.floor((s.canonical.y*c.EXTENT+n.anchorY)*h)}}findMatches(n,s,h){const m=this.tileID.canonical.z<s.canonical.z?1:Math.pow(2,this.tileID.canonical.z-s.canonical.z);for(let b=0;b<n.length;b++){const T=n.get(b);if(T.crossTileID)continue;const C=this.indexedSymbolInstances[T.key];if(!C)continue;const I=this.getScaledCoordinates(T,s);for(const z of C)if(Math.abs(z.coord.x-I.x)<=m&&Math.abs(z.coord.y-I.y)<=m&&!h[z.crossTileID]){h[z.crossTileID]=!0,T.crossTileID=z.crossTileID;break}}}}class yt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ot{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(n){const s=Math.round((n-this.lng)/360);if(s!==0)for(const h in this.indexes){const m=this.indexes[h],b={};for(const T in m){const C=m[T];C.tileID=C.tileID.unwrapTo(C.tileID.wrap+s),b[C.tileID.key]=C}this.indexes[h]=b}this.lng=n}addBucket(n,s,h){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===s.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(let b=0;b<s.symbolInstances.length;b++)s.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});const m=this.usedCrossTileIDs[n.overscaledZ];for(const b in this.indexes){const T=this.indexes[b];if(Number(b)>n.overscaledZ)for(const C in T){const I=T[C];I.tileID.isChildOf(n)&&I.findMatches(s.symbolInstances,n,m)}else{const C=T[n.scaledTo(Number(b)).key];C&&C.findMatches(s.symbolInstances,n,m)}}for(let b=0;b<s.symbolInstances.length;b++){const T=s.symbolInstances.get(b);T.crossTileID||(T.crossTileID=h.generate(),m[T.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new ct(n,s.symbolInstances,s.bucketInstanceId),!0}removeBucketCrossTileIDs(n,s){for(const h in s.indexedSymbolInstances)for(const m of s.indexedSymbolInstances[h])delete this.usedCrossTileIDs[n][m.crossTileID]}removeStaleBuckets(n){let s=!1;for(const h in this.indexes){const m=this.indexes[h];for(const b in m)n[m[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(h,m[b]),delete m[b],s=!0)}return s}}class qt{constructor(){this.layerIndexes={},this.crossTileIDs=new yt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(n,s,h){let m=this.layerIndexes[n.id];m===void 0&&(m=this.layerIndexes[n.id]=new ot);let b=!1;const T={};m.handleWrapJump(h);for(const C of s){const I=C.getBucket(n);I&&n.id===I.layerIds[0]&&(I.bucketInstanceId||(I.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(C.tileID,I,this.crossTileIDs)&&(b=!0),T[I.bucketInstanceId]=!0)}return m.removeStaleBuckets(T)&&(b=!0),b}pruneUnusedLayers(n){const s={};n.forEach(h=>{s[h]=!0});for(const h in this.layerIndexes)s[h]||delete this.layerIndexes[h]}}var Wt=c.createLayout([{name:"a_pos",type:"Int16",components:2}]);class Zt extends c.Evented{constructor(n){super(),this.sourceCache=n,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=n._cache.max,n.usedForTerrain=!0,n.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const n in this._tiles){const s=this._tiles[n];s.textures.forEach(h=>h.destroy()),s.textures=[]}}update(n,s){this.sourceCache.update(n,s),this._renderableTilesKeys=[];for(const h of n.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:s}))this._renderableTilesKeys.push(h.key),this._tiles[h.key]||(h.posMatrix=new Float64Array(16),c.ortho(h.posMatrix,0,c.EXTENT,0,c.EXTENT,0,1),this._tiles[h.key]=new zt(h,this.tileSize))}removeOutdated(n){const s={};this.renderHistory=this.renderHistory.filter((h,m)=>this.renderHistory.indexOf(h)===m).slice(0,this.renderHistorySize);for(const h of this._renderableTilesKeys)s[h]=!0;for(const h of this.renderHistory)s[h]=!0;for(const h in this._tiles)s[h]||(this._tiles[h].clearTextures(n),delete this._tiles[h])}getRenderableTiles(){return this._renderableTilesKeys.map(n=>this.getTileByID(n))}getTileByID(n){return this._tiles[n]}getTerrainCoords(n){const s={};for(const h of this._renderableTilesKeys){const m=this._tiles[h].tileID;if(m.canonical.equals(n.canonical)){const b=n.clone();b.posMatrix=new Float64Array(16),c.ortho(b.posMatrix,0,c.EXTENT,0,c.EXTENT,0,1),s[h]=b}else if(m.canonical.isChildOf(n.canonical)){const b=n.clone();b.posMatrix=new Float64Array(16);const T=m.canonical.z-n.canonical.z,C=m.canonical.x-(m.canonical.x>>T<<T),I=m.canonical.y-(m.canonical.y>>T<<T),z=c.EXTENT>>T;c.ortho(b.posMatrix,0,z,0,z,0,1),c.translate(b.posMatrix,b.posMatrix,[-C*z,-I*z,0]),s[h]=b}else if(n.canonical.isChildOf(m.canonical)){const b=n.clone();b.posMatrix=new Float64Array(16);const T=n.canonical.z-m.canonical.z,C=n.canonical.x-(n.canonical.x>>T<<T),I=n.canonical.y-(n.canonical.y>>T<<T),z=c.EXTENT>>T;c.ortho(b.posMatrix,0,c.EXTENT,0,c.EXTENT,0,1),c.translate(b.posMatrix,b.posMatrix,[C*z,I*z,0]),c.scale(b.posMatrix,b.posMatrix,[1/2**T,1/2**T,0]),s[h]=b}}return s}getSourceTile(n,s){const h=this.sourceCache._source;let m=n.overscaledZ-this.deltaZoom;if(m>h.maxzoom&&(m=h.maxzoom),m<h.minzoom)return null;this._sourceTileCache[n.key]||(this._sourceTileCache[n.key]=n.scaledTo(m).key);let b=this.sourceCache.getTileByID(this._sourceTileCache[n.key]);if((!b||!b.dem)&&s)for(;m>=h.minzoom&&(!b||!b.dem);)b=this.sourceCache.getTileByID(n.scaledTo(m--).key);return b}tilesAfterTime(n=Date.now()){return Object.values(this._tiles).filter(s=>s.timeLoaded>=n)}}class Ut{constructor(n,s,h){this.style=n,this.sourceCache=new Zt(s),this.options=h,this.exaggeration=typeof h.exaggeration=="number"?h.exaggeration:1,this.elevationOffset=typeof h.elevationOffset=="number"?h.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(n,s,h,m=c.EXTENT){if(!(s>=0&&s<m&&h>=0&&h<m))return this.elevationOffset;let b=0;const T=this.getTerrainData(n);if(T.tile&&T.tile.dem){const C=c.transformMat4$1([],[s/m*c.EXTENT,h/m*c.EXTENT],T.u_terrain_matrix),I=[C[0]*T.tile.dem.dim,C[1]*T.tile.dem.dim],z=[Math.floor(I[0]),Math.floor(I[1])],R=T.tile.dem.get(z[0],z[1]),B=T.tile.dem.get(z[0],z[1]+1),H=T.tile.dem.get(z[0]+1,z[1]),Y=T.tile.dem.get(z[0]+1,z[1]+1);b=c.number(c.number(R,B,I[0]-z[0]),c.number(H,Y,I[0]-z[0]),I[1]-z[1])}return b}rememberForRerender(n,s){for(const h in this.sourceCache._tiles){const m=this.sourceCache._tiles[h];(m.tileID.equals(s)||m.tileID.isChildOf(s))&&(n===this.sourceCache.sourceCache.id&&(m.timeLoaded=Date.now()),this._rerender[n]=this._rerender[n]||{},this._rerender[n][m.tileID.key]=!0)}}needsRerender(n,s){return this._rerender[n]&&this._rerender[n][s.key]}clearRerenderCache(){this._rerender={}}getElevation(n,s,h,m=c.EXTENT){return(this.getDEMElevation(n,s,h,m)+this.elevationOffset)*this.exaggeration}getTerrainData(n){if(!this._emptyDemTexture){const m=this.style.map.painter.context,b=new c.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new J(m,b,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new J(m,new c.RGBAImage({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=c.identity([])}const s=this.sourceCache.getSourceTile(n,!0);if(s&&s.dem&&(!s.demTexture||s.needsTerrainPrepare)){const m=this.style.map.painter.context;s.demTexture=this.style.map.painter.getTileTexture(s.dem.stride),s.demTexture?s.demTexture.update(s.dem.getPixels(),{premultiply:!1}):s.demTexture=new J(m,s.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),s.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),s.needsTerrainPrepare=!1}const h=s&&s+s.tileID.key+n.key;if(h&&!this._demMatrixCache[h]){const m=this.sourceCache.sourceCache._source.maxzoom;let b=n.canonical.z-s.tileID.canonical.z;n.overscaledZ>n.canonical.z&&(n.canonical.z>=m?b=n.canonical.z-m:c.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const T=n.canonical.x-(n.canonical.x>>b<<b),C=n.canonical.y-(n.canonical.y>>b<<b),I=c.fromScaling(new Float64Array(16),[1/(c.EXTENT<<b),1/(c.EXTENT<<b),0]);c.translate(I,I,[T*c.EXTENT,C*c.EXTENT,0]),this._demMatrixCache[n.key]={matrix:I,coord:n}}return{u_depth:2,u_terrain:3,u_terrain_dim:s&&s.dem&&s.dem.dim||1,u_terrain_matrix:h?this._demMatrixCache[n.key].matrix:this._emptyDemMatrix,u_terrain_unpack:s&&s.dem&&s.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(s&&s.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:s}}getRTTFramebuffer(){const n=this.style.map.painter;if(!this._rttFramebuffer){const s=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=n.context.createFramebuffer(s,s,!0),this._rttFramebuffer.depthAttachment.set(n.context.createRenderbuffer(n.context.gl.DEPTH_COMPONENT16,s,s))}return this._rttFramebuffer}getFramebuffer(n){const s=this.style.map.painter,h=s.width/devicePixelRatio,m=s.height/devicePixelRatio;return!this._fbo||this._fbo.width===h&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new J(s.context,{width:h,height:m,data:null},s.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(s.context.gl.NEAREST,s.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new J(s.context,{width:h,height:m,data:null},s.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(s.context.gl.NEAREST,s.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=s.context.createFramebuffer(h,m,!0),this._fbo.depthAttachment.set(s.context.createRenderbuffer(s.context.gl.DEPTH_COMPONENT16,h,m))),this._fbo.colorAttachment.set(n==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const n=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const s=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let b=0,T=0;b<this._coordsTextureSize;b++)for(let C=0;C<this._coordsTextureSize;C++,T+=4)s[T+0]=255&C,s[T+1]=255&b,s[T+2]=C>>8<<4|b>>8,s[T+3]=0;const h=new c.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(s.buffer)),m=new J(n,h,n.gl.RGBA,{premultiply:!1});return m.bind(n.gl.NEAREST,n.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(n){const s=new Uint8Array(4),h=this.style.map.painter,m=h.context,b=m.gl;m.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),b.readPixels(n.x,h.height/devicePixelRatio-n.y-1,1,1,b.RGBA,b.UNSIGNED_BYTE,s),m.bindFramebuffer.set(null);const T=s[0]+(s[2]>>4<<8),C=s[1]+((15&s[2])<<8),I=this.coordsIndex[255-s[3]],z=I&&this.sourceCache.getTileByID(I);if(!z)return null;const R=this._coordsTextureSize,B=(1<<z.tileID.canonical.z)*R;return new c.MercatorCoordinate((z.tileID.canonical.x*R+T)/B,(z.tileID.canonical.y*R+C)/B,this.getElevation(z.tileID,T,C,R))}getTerrainMesh(){if(this._mesh)return this._mesh;const n=this.style.map.painter.context,s=new c.PosArray,h=new c.TriangleIndexArray,m=this.meshSize,b=c.EXTENT/m,T=m*m;for(let C=0;C<=m;C++)for(let I=0;I<=m;I++)s.emplaceBack(I*b,C*b);for(let C=0;C<T;C+=m+1)for(let I=0;I<m;I++)h.emplaceBack(I+C,m+I+C+1,m+I+C+2),h.emplaceBack(I+C,m+I+C+2,I+C+1);return this._mesh={indexBuffer:n.createIndexBuffer(h),vertexBuffer:n.createVertexBuffer(s,Wt.members),segments:c.SegmentVector.simpleSegment(0,0,s.length,h.length)},this._mesh}getMinMaxElevation(n){const s=this.getTerrainData(n).tile,h={minElevation:null,maxElevation:null};return s&&s.dem&&(h.minElevation=(s.dem.min+this.elevationOffset)*this.exaggeration,h.maxElevation=(s.dem.max+this.elevationOffset)*this.exaggeration),h}}const Vt=(f,n)=>c.emitValidationErrors(f,n&&n.filter(s=>s.identifier!=="source.canvas")),$n=c.pick(dt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ln=c.pick(dt,["setCenter","setZoom","setBearing","setPitch"]),bn=function(){const f={},n=c.spec.$version;for(const s in c.spec.$root){const h=c.spec.$root[s];if(h.required){let m=null;m=s==="version"?n:h.type==="array"?[]:{},m!=null&&(f[s]=m)}}return f}();class mr extends c.Evented{constructor(n,s={}){super(),this.map=n,this.dispatcher=new _t(Qe(),this),this.imageManager=new _e,this.imageManager.setEventedParent(this),this.glyphManager=new Me(n._requestManager,s.localIdeographFontFamily),this.lineAtlas=new kt(256,512),this.crossTileSymbolIndex=new qt,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new c.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",c.getReferrer());const h=this;this._rtlTextPluginCallback=mr.registerForPluginStateChange(m=>{h.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:m.pluginStatus,pluginURL:m.pluginURL},(b,T)=>{if(c.triggerPluginCompletionEvent(b),T&&T.every(C=>C))for(const C in h.sourceCaches)h.sourceCaches[C].reload()})}),this.on("data",m=>{if(m.dataType!=="source"||m.sourceDataType!=="metadata")return;const b=this.sourceCaches[m.sourceId];if(!b)return;const T=b.getSource();if(T&&T.vectorLayerIds)for(const C in this._layers){const I=this._layers[C];I.source===T.id&&this._validateLayer(I)}})}loadURL(n,s={}){this.fire(new c.Event("dataloading",{dataType:"style"}));const h=typeof s.validate!="boolean"||s.validate,m=this.map._requestManager.transformRequest(n,c.ResourceType.Style);this._request=c.getJSON(m,(b,T)=>{this._request=null,b?this.fire(new c.ErrorEvent(b)):T&&this._load(T,h)})}loadJSON(n,s={}){this.fire(new c.Event("dataloading",{dataType:"style"})),this._request=c.exported.frame(()=>{this._request=null,this._load(n,s.validate!==!1)})}loadEmpty(){this.fire(new c.Event("dataloading",{dataType:"style"})),this._load(bn,!1)}_load(n,s){if(s&&Vt(this,c.validateStyle(n)))return;this._loaded=!0,this.stylesheet=n;for(const m in n.sources)this.addSource(m,n.sources[m],{validate:!1});n.sprite?this._loadSprite(n.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(n.glyphs);const h=ln(this.stylesheet.layers);this._order=h.map(m=>m.id),this._layers={},this._serializedLayers={};for(let m of h)m=c.createStyleLayer(m),m.setEventedParent(this,{layer:{id:m.id}}),this._layers[m.id]=m,this._serializedLayers[m.id]=m.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Ge(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new c.Event("data",{dataType:"style"})),this.fire(new c.Event("style.load"))}_loadSprite(n){this._spriteRequest=function(s,h,m,b){let T,C,I;const z=m>1?"@2x":"";let R=c.getJSON(h.transformRequest(h.normalizeSpriteURL(s,z,".json"),c.ResourceType.SpriteJSON),(Y,X)=>{R=null,I||(I=Y,T=X,H())}),B=c.getImage(h.transformRequest(h.normalizeSpriteURL(s,z,".png"),c.ResourceType.SpriteImage),(Y,X)=>{B=null,I||(I=Y,C=X,H())});function H(){if(I)b(I);else if(T&&C){const Y=c.exported.getImageData(C),X={};for(const Z in T){const{width:se,height:ge,x:xe,y:te,sdf:Te,pixelRatio:Se,stretchX:Pe,stretchY:Re,content:He}=T[Z],ze=new c.RGBAImage({width:se,height:ge});c.RGBAImage.copy(Y,ze,{x:xe,y:te},{x:0,y:0},{width:se,height:ge}),X[Z]={data:ze,pixelRatio:Se,sdf:Te,stretchX:Pe,stretchY:Re,content:He}}b(null,X)}}return{cancel(){R&&(R.cancel(),R=null),B&&(B.cancel(),B=null)}}}(n,this.map._requestManager,this.map.getPixelRatio(),(s,h)=>{if(this._spriteRequest=null,s)this.fire(new c.ErrorEvent(s));else if(h)for(const m in h)this.imageManager.addImage(m,h[m]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.Event("data",{dataType:"style"}))})}_validateLayer(n){const s=this.sourceCaches[n.source];if(!s)return;const h=n.sourceLayer;if(!h)return;const m=s.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(h)===-1)&&this.fire(new c.ErrorEvent(new Error(`Source layer "${h}" does not exist on source "${m.id}" as specified by style layer "${n.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const n in this.sourceCaches)if(!this.sourceCaches[n].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(n){const s=[];for(const h of n){const m=this._layers[h];m.type!=="custom"&&s.push(m.serialize())}return s}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const n in this.sourceCaches)if(this.sourceCaches[n].hasTransition())return!0;for(const n in this._layers)if(this._layers[n].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(n){if(!this._loaded)return;const s=this._changed;if(this._changed){const m=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(m.length||b.length)&&this._updateWorkerLayers(m,b);for(const T in this._updatedSources){const C=this._updatedSources[T];if(C==="reload")this._reloadSource(T);else{if(C!=="clear")throw new Error(`Invalid action ${C}`);this._clearSource(T)}}this._updateTilesForChangedImages();for(const T in this._updatedPaintProps)this._layers[T].updateTransitions(n);this.light.updateTransitions(n),this._resetUpdates()}const h={};for(const m in this.sourceCaches){const b=this.sourceCaches[m];h[m]=b.used,b.used=!1}for(const m of this._order){const b=this._layers[m];b.recalculate(n,this._availableImages),!b.isHidden(n.zoom)&&b.source&&(this.sourceCaches[b.source].used=!0)}for(const m in h){const b=this.sourceCaches[m];h[m]!==b.used&&b.fire(new c.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(n),this.z=n.zoom,s&&this.fire(new c.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const n=Object.keys(this._changedImages);if(n.length){for(const s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["icons","patterns"],n);this._changedImages={}}}_updateWorkerLayers(n,s){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(n),removedIds:s})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(n){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),n){const s=this.sourceCaches[n.source];if(!s)throw new Error(`cannot load terrain, because there exists no source with ID: ${n.source}`);this.terrain=new Ut(this,s,n),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=h=>{h.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=h=>{h.tile&&(h.sourceId===n.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(h.sourceId,h.tile.tileID)):h.source.type==="geojson"&&this.terrain.rememberForRerender(h.sourceId,h.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new c.Event("terrain",{terrain:n}))}setState(n){if(this._checkLoaded(),Vt(this,c.validateStyle(n)))return!1;(n=c.clone$1(n)).layers=ln(n.layers);const s=function(m,b){if(!m)return[{command:dt.setStyle,args:[b]}];let T=[];try{if(!$(m.version,b.version))return[{command:dt.setStyle,args:[b]}];$(m.center,b.center)||T.push({command:dt.setCenter,args:[b.center]}),$(m.zoom,b.zoom)||T.push({command:dt.setZoom,args:[b.zoom]}),$(m.bearing,b.bearing)||T.push({command:dt.setBearing,args:[b.bearing]}),$(m.pitch,b.pitch)||T.push({command:dt.setPitch,args:[b.pitch]}),$(m.sprite,b.sprite)||T.push({command:dt.setSprite,args:[b.sprite]}),$(m.glyphs,b.glyphs)||T.push({command:dt.setGlyphs,args:[b.glyphs]}),$(m.transition,b.transition)||T.push({command:dt.setTransition,args:[b.transition]}),$(m.light,b.light)||T.push({command:dt.setLight,args:[b.light]});const C={},I=[];(function(R,B,H,Y){let X;for(X in B=B||{},R=R||{})Object.prototype.hasOwnProperty.call(R,X)&&(Object.prototype.hasOwnProperty.call(B,X)||Sr(X,H,Y));for(X in B)Object.prototype.hasOwnProperty.call(B,X)&&(Object.prototype.hasOwnProperty.call(R,X)?$(R[X],B[X])||(R[X].type==="geojson"&&B[X].type==="geojson"&&rr(R,B,X)?H.push({command:dt.setGeoJSONSourceData,args:[X,B[X].data]}):Sn(X,B,H,Y)):tn(X,B,H))})(m.sources,b.sources,I,C);const z=[];m.layers&&m.layers.forEach(R=>{C[R.source]?T.push({command:dt.removeLayer,args:[R.id]}):z.push(R)}),T=T.concat(I),function(R,B,H){B=B||[];const Y=(R=R||[]).map(Fr),X=B.map(Fr),Z=R.reduce(Hr,{}),se=B.reduce(Hr,{}),ge=Y.slice(),xe=Object.create(null);let te,Te,Se,Pe,Re,He,ze;for(te=0,Te=0;te<Y.length;te++)Se=Y[te],Object.prototype.hasOwnProperty.call(se,Se)?Te++:(H.push({command:dt.removeLayer,args:[Se]}),ge.splice(ge.indexOf(Se,Te),1));for(te=0,Te=0;te<X.length;te++)Se=X[X.length-1-te],ge[ge.length-1-te]!==Se&&(Object.prototype.hasOwnProperty.call(Z,Se)?(H.push({command:dt.removeLayer,args:[Se]}),ge.splice(ge.lastIndexOf(Se,ge.length-Te),1)):Te++,He=ge[ge.length-te],H.push({command:dt.addLayer,args:[se[Se],He]}),ge.splice(ge.length-te,0,Se),xe[Se]=!0);for(te=0;te<X.length;te++)if(Se=X[te],Pe=Z[Se],Re=se[Se],!xe[Se]&&!$(Pe,Re))if($(Pe.source,Re.source)&&$(Pe["source-layer"],Re["source-layer"])&&$(Pe.type,Re.type)){for(ze in On(Pe.layout,Re.layout,H,Se,null,dt.setLayoutProperty),On(Pe.paint,Re.paint,H,Se,null,dt.setPaintProperty),$(Pe.filter,Re.filter)||H.push({command:dt.setFilter,args:[Se,Re.filter]}),$(Pe.minzoom,Re.minzoom)&&$(Pe.maxzoom,Re.maxzoom)||H.push({command:dt.setLayerZoomRange,args:[Se,Re.minzoom,Re.maxzoom]}),Pe)Object.prototype.hasOwnProperty.call(Pe,ze)&&ze!=="layout"&&ze!=="paint"&&ze!=="filter"&&ze!=="metadata"&&ze!=="minzoom"&&ze!=="maxzoom"&&(ze.indexOf("paint.")===0?On(Pe[ze],Re[ze],H,Se,ze.slice(6),dt.setPaintProperty):$(Pe[ze],Re[ze])||H.push({command:dt.setLayerProperty,args:[Se,ze,Re[ze]]}));for(ze in Re)Object.prototype.hasOwnProperty.call(Re,ze)&&!Object.prototype.hasOwnProperty.call(Pe,ze)&&ze!=="layout"&&ze!=="paint"&&ze!=="filter"&&ze!=="metadata"&&ze!=="minzoom"&&ze!=="maxzoom"&&(ze.indexOf("paint.")===0?On(Pe[ze],Re[ze],H,Se,ze.slice(6),dt.setPaintProperty):$(Pe[ze],Re[ze])||H.push({command:dt.setLayerProperty,args:[Se,ze,Re[ze]]}))}else H.push({command:dt.removeLayer,args:[Se]}),He=ge[ge.lastIndexOf(Se)+1],H.push({command:dt.addLayer,args:[Re,He]})}(z,b.layers,T)}catch(C){console.warn("Unable to compute style diff:",C),T=[{command:dt.setStyle,args:[b]}]}return T}(this.serialize(),n).filter(m=>!(m.command in Ln));if(s.length===0)return!1;const h=s.filter(m=>!(m.command in $n));if(h.length>0)throw new Error(`Unimplemented: ${h.map(m=>m.command).join(", ")}.`);return s.forEach(m=>{m.command!=="setTransition"&&this[m.command].apply(this,m.args)}),this.stylesheet=n,!0}addImage(n,s){if(this.getImage(n))return this.fire(new c.ErrorEvent(new Error(`An image named "${n}" already exists.`)));this.imageManager.addImage(n,s),this._afterImageUpdated(n)}updateImage(n,s){this.imageManager.updateImage(n,s)}getImage(n){return this.imageManager.getImage(n)}removeImage(n){if(!this.getImage(n))return this.fire(new c.ErrorEvent(new Error(`An image named "${n}" does not exist.`)));this.imageManager.removeImage(n),this._afterImageUpdated(n)}_afterImageUpdated(n){this._availableImages=this.imageManager.listImages(),this._changedImages[n]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(n,s,h={}){if(this._checkLoaded(),this.sourceCaches[n]!==void 0)throw new Error(`Source "${n}" already exists.`);if(!s.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(s).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(s.type)>=0&&this._validate(c.validateStyle.source,`sources.${n}`,s,null,h))return;this.map&&this.map._collectResourceTiming&&(s.collectResourceTiming=!0);const m=this.sourceCaches[n]=new Ft(n,s,this.dispatcher);m.style=this,m.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:m.serialize(),sourceId:n})),m.onAdd(this.map),this._changed=!0}removeSource(n){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error("There is no source with this ID");for(const h in this._layers)if(this._layers[h].source===n)return this.fire(new c.ErrorEvent(new Error(`Source "${n}" cannot be removed while layer "${h}" is using it.`)));const s=this.sourceCaches[n];delete this.sourceCaches[n],delete this._updatedSources[n],s.fire(new c.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:n})),s.setEventedParent(null),s.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(n,s){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error(`There is no source with this ID=${n}`);const h=this.sourceCaches[n].getSource();if(h.type!=="geojson")throw new Error(`geojsonSource.type is ${h.type}, which is !== 'geojson`);h.setData(s),this._changed=!0}getSource(n){return this.sourceCaches[n]&&this.sourceCaches[n].getSource()}addLayer(n,s,h={}){this._checkLoaded();const m=n.id;if(this.getLayer(m))return void this.fire(new c.ErrorEvent(new Error(`Layer "${m}" already exists on this map.`)));let b;if(n.type==="custom"){if(Vt(this,c.validateCustomStyleLayer(n)))return;b=c.createStyleLayer(n)}else{if(typeof n.source=="object"&&(this.addSource(m,n.source),n=c.clone$1(n),n=c.extend(n,{source:m})),this._validate(c.validateStyle.layer,`layers.${m}`,n,{arrayIndex:-1},h))return;b=c.createStyleLayer(n),this._validateLayer(b),b.setEventedParent(this,{layer:{id:m}}),this._serializedLayers[b.id]=b.serialize()}const T=s?this._order.indexOf(s):this._order.length;if(s&&T===-1)this.fire(new c.ErrorEvent(new Error(`Cannot add layer "${m}" before non-existing layer "${s}".`)));else{if(this._order.splice(T,0,m),this._layerOrderChanged=!0,this._layers[m]=b,this._removedLayers[m]&&b.source&&b.type!=="custom"){const C=this._removedLayers[m];delete this._removedLayers[m],C.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",this.sourceCaches[b.source].pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map)}}moveLayer(n,s){if(this._checkLoaded(),this._changed=!0,!this._layers[n])return void this.fire(new c.ErrorEvent(new Error(`The layer '${n}' does not exist in the map's style and cannot be moved.`)));if(n===s)return;const h=this._order.indexOf(n);this._order.splice(h,1);const m=s?this._order.indexOf(s):this._order.length;s&&m===-1?this.fire(new c.ErrorEvent(new Error(`Cannot move layer "${n}" before non-existing layer "${s}".`))):(this._order.splice(m,0,n),this._layerOrderChanged=!0)}removeLayer(n){this._checkLoaded();const s=this._layers[n];if(!s)return void this.fire(new c.ErrorEvent(new Error(`Cannot remove non-existing layer "${n}".`)));s.setEventedParent(null);const h=this._order.indexOf(n);this._order.splice(h,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[n]=s,delete this._layers[n],delete this._serializedLayers[n],delete this._updatedLayers[n],delete this._updatedPaintProps[n],s.onRemove&&s.onRemove(this.map)}getLayer(n){return this._layers[n]}hasLayer(n){return n in this._layers}setLayerZoomRange(n,s,h){this._checkLoaded();const m=this.getLayer(n);m?m.minzoom===s&&m.maxzoom===h||(s!=null&&(m.minzoom=s),h!=null&&(m.maxzoom=h),this._updateLayer(m)):this.fire(new c.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${n}".`)))}setFilter(n,s,h={}){this._checkLoaded();const m=this.getLayer(n);if(m){if(!$(m.filter,s))return s==null?(m.filter=void 0,void this._updateLayer(m)):void(this._validate(c.validateStyle.filter,`layers.${m.id}.filter`,s,null,h)||(m.filter=c.clone$1(s),this._updateLayer(m)))}else this.fire(new c.ErrorEvent(new Error(`Cannot filter non-existing layer "${n}".`)))}getFilter(n){return c.clone$1(this.getLayer(n).filter)}setLayoutProperty(n,s,h,m={}){this._checkLoaded();const b=this.getLayer(n);b?$(b.getLayoutProperty(s),h)||(b.setLayoutProperty(s,h,m),this._updateLayer(b)):this.fire(new c.ErrorEvent(new Error(`Cannot style non-existing layer "${n}".`)))}getLayoutProperty(n,s){const h=this.getLayer(n);if(h)return h.getLayoutProperty(s);this.fire(new c.ErrorEvent(new Error(`Cannot get style of non-existing layer "${n}".`)))}setPaintProperty(n,s,h,m={}){this._checkLoaded();const b=this.getLayer(n);b?$(b.getPaintProperty(s),h)||(b.setPaintProperty(s,h,m)&&this._updateLayer(b),this._changed=!0,this._updatedPaintProps[n]=!0):this.fire(new c.ErrorEvent(new Error(`Cannot style non-existing layer "${n}".`)))}getPaintProperty(n,s){return this.getLayer(n).getPaintProperty(s)}setFeatureState(n,s){this._checkLoaded();const h=n.source,m=n.sourceLayer,b=this.sourceCaches[h];if(b===void 0)return void this.fire(new c.ErrorEvent(new Error(`The source '${h}' does not exist in the map's style.`)));const T=b.getSource().type;T==="geojson"&&m?this.fire(new c.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):T!=="vector"||m?(n.id===void 0&&this.fire(new c.ErrorEvent(new Error("The feature id parameter must be provided."))),b.setFeatureState(m,n.id,s)):this.fire(new c.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(n,s){this._checkLoaded();const h=n.source,m=this.sourceCaches[h];if(m===void 0)return void this.fire(new c.ErrorEvent(new Error(`The source '${h}' does not exist in the map's style.`)));const b=m.getSource().type,T=b==="vector"?n.sourceLayer:void 0;b!=="vector"||T?s&&typeof n.id!="string"&&typeof n.id!="number"?this.fire(new c.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(T,n.id,s):this.fire(new c.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(n){this._checkLoaded();const s=n.source,h=n.sourceLayer,m=this.sourceCaches[s];if(m!==void 0)return m.getSource().type!=="vector"||h?(n.id===void 0&&this.fire(new c.ErrorEvent(new Error("The feature id parameter must be provided."))),m.getFeatureState(h,n.id)):void this.fire(new c.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new c.ErrorEvent(new Error(`The source '${s}' does not exist in the map's style.`)))}getTransition(){return c.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return c.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:c.mapObject(this.sourceCaches,n=>n.serialize()),layers:this._serializeLayers(this._order)},n=>n!==void 0)}_updateLayer(n){this._updatedLayers[n.id]=!0,n.source&&!this._updatedSources[n.source]&&this.sourceCaches[n.source].getSource().type!=="raster"&&(this._updatedSources[n.source]="reload",this.sourceCaches[n.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(n){const s=T=>this._layers[T].type==="fill-extrusion",h={},m=[];for(let T=this._order.length-1;T>=0;T--){const C=this._order[T];if(s(C)){h[C]=T;for(const I of n){const z=I[C];if(z)for(const R of z)m.push(R)}}}m.sort((T,C)=>C.intersectionZ-T.intersectionZ);const b=[];for(let T=this._order.length-1;T>=0;T--){const C=this._order[T];if(s(C))for(let I=m.length-1;I>=0;I--){const z=m[I].feature;if(h[z.layer.id]<T)break;b.push(z),m.pop()}else for(const I of n){const z=I[C];if(z)for(const R of z)b.push(R.feature)}}return b}queryRenderedFeatures(n,s,h){s&&s.filter&&this._validate(c.validateStyle.filter,"queryRenderedFeatures.filter",s.filter,null,s);const m={};if(s&&s.layers){if(!Array.isArray(s.layers))return this.fire(new c.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const T of s.layers){const C=this._layers[T];if(!C)return this.fire(new c.ErrorEvent(new Error(`The layer '${T}' does not exist in the map's style and cannot be queried for features.`))),[];m[C.source]=!0}}const b=[];s.availableImages=this._availableImages;for(const T in this.sourceCaches)s.layers&&!m[T]||b.push(gt(this.sourceCaches[T],this._layers,this._serializedLayers,n,s,h));return this.placement&&b.push(function(T,C,I,z,R,B,H){const Y={},X=B.queryRenderedSymbols(z),Z=[];for(const se of Object.keys(X).map(Number))Z.push(H[se]);Z.sort(bt);for(const se of Z){const ge=se.featureIndex.lookupSymbolFeatures(X[se.bucketInstanceId],C,se.bucketIndex,se.sourceLayerIndex,R.filter,R.layers,R.availableImages,T);for(const xe in ge){const te=Y[xe]=Y[xe]||[],Te=ge[xe];Te.sort((Se,Pe)=>{const Re=se.featureSortOrder;if(Re){const He=Re.indexOf(Se.featureIndex);return Re.indexOf(Pe.featureIndex)-He}return Pe.featureIndex-Se.featureIndex});for(const Se of Te)te.push(Se)}}for(const se in Y)Y[se].forEach(ge=>{const xe=ge.feature,te=I[T[se].source].getFeatureState(xe.layer["source-layer"],xe.id);xe.source=xe.layer.source,xe.layer["source-layer"]&&(xe.sourceLayer=xe.layer["source-layer"]),xe.state=te});return Y}(this._layers,this._serializedLayers,this.sourceCaches,n,s,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(n,s){s&&s.filter&&this._validate(c.validateStyle.filter,"querySourceFeatures.filter",s.filter,null,s);const h=this.sourceCaches[n];return h?function(m,b){const T=m.getRenderableIds().map(z=>m.getTileByID(z)),C=[],I={};for(let z=0;z<T.length;z++){const R=T[z],B=R.tileID.canonical.key;I[B]||(I[B]=!0,R.querySourceFeatures(C,b))}return C}(h,s):[]}addSourceType(n,s,h){return mr.getSourceType(n)?h(new Error(`A source type called "${n}" already exists.`)):(mr.setSourceType(n,s),s.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:n,url:s.workerSourceURL},h):h(null,null))}getLight(){return this.light.getLight()}setLight(n,s={}){this._checkLoaded();const h=this.light.getLight();let m=!1;for(const T in n)if(!$(n[T],h[T])){m=!0;break}if(!m)return;const b={now:c.exported.now(),transition:c.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(n,s),this.light.updateTransitions(b)}_validate(n,s,h,m,b={}){return(!b||b.validate!==!1)&&Vt(this,n.call(c.validateStyle,c.extend({key:s,style:this.serialize(),value:h,styleSpec:c.spec},m)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),c.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const n in this._layers)this._layers[n].setEventedParent(null);for(const n in this.sourceCaches){const s=this.sourceCaches[n];s.setEventedParent(null),s.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(n){this.sourceCaches[n].clearTiles()}_reloadSource(n){this.sourceCaches[n].resume(),this.sourceCaches[n].reload()}_updateSources(n){for(const s in this.sourceCaches)this.sourceCaches[s].update(n,this.terrain)}_generateCollisionBoxes(){for(const n in this.sourceCaches)this._reloadSource(n)}_updatePlacement(n,s,h,m,b=!1){let T=!1,C=!1;const I={};for(const z of this._order){const R=this._layers[z];if(R.type!=="symbol")continue;if(!I[R.source]){const H=this.sourceCaches[R.source];I[R.source]=H.getRenderableIds(!0).map(Y=>H.getTileByID(Y)).sort((Y,X)=>X.tileID.overscaledZ-Y.tileID.overscaledZ||(Y.tileID.isLessThan(X.tileID)?-1:1))}const B=this.crossTileSymbolIndex.addLayer(R,I[R.source],n.center.lng);T=T||B}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((b=b||this._layerOrderChanged||h===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(c.exported.now(),n.zoom))&&(this.pauseablePlacement=new Oe(n,this.terrain,this._order,b,s,h,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,I),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(c.exported.now()),C=!0),T&&this.pauseablePlacement.placement.setStale()),C||T)for(const z of this._order){const R=this._layers[z];R.type==="symbol"&&this.placement.updateLayerOpacities(R,I[R.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(c.exported.now())}_releaseSymbolFadeTiles(){for(const n in this.sourceCaches)this.sourceCaches[n].releaseSymbolFadeTiles()}getImages(n,s,h){this.imageManager.getImages(s.icons,h),this._updateTilesForChangedImages();const m=this.sourceCaches[s.source];m&&m.setDependencies(s.tileID.key,s.type,s.icons)}getGlyphs(n,s,h){this.glyphManager.getGlyphs(s.stacks,h)}getResource(n,s,h){return c.makeRequest(s,h)}}mr.getSourceType=function(f){return Ue[f]},mr.setSourceType=function(f,n){Ue[f]=n},mr.registerForPluginStateChange=c.registerForPluginStateChange;var Jr="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const aa={prelude:vn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:vn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:vn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:vn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:vn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:vn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:vn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:vn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:vn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:vn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:vn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:vn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:vn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:vn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:vn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:vn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:vn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:vn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:vn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:vn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:vn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:vn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:vn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:vn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:vn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:vn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:vn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Jr),terrainDepth:vn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Jr),terrainCoords:vn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Jr)};function vn(f,n){const s=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,h=n.match(/attribute ([\w]+) ([\w]+)/g),m=f.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=b?b.concat(m):m,C={};return{fragmentSource:f=f.replace(s,(I,z,R,B,H)=>(C[H]=!0,z==="define"?`
#ifndef HAS_UNIFORM_u_${H}
varying ${R} ${B} ${H};
#else
uniform ${R} ${B} u_${H};
#endif
`:`
#ifdef HAS_UNIFORM_u_${H}
    ${R} ${B} ${H} = u_${H};
#endif
`)),vertexSource:n=n.replace(s,(I,z,R,B,H)=>{const Y=B==="float"?"vec2":"vec4",X=H.match(/color/)?"color":Y;return C[H]?z==="define"?`
#ifndef HAS_UNIFORM_u_${H}
uniform lowp float u_${H}_t;
attribute ${R} ${Y} a_${H};
varying ${R} ${B} ${H};
#else
uniform ${R} ${B} u_${H};
#endif
`:X==="vec4"?`
#ifndef HAS_UNIFORM_u_${H}
    ${H} = a_${H};
#else
    ${R} ${B} ${H} = u_${H};
#endif
`:`
#ifndef HAS_UNIFORM_u_${H}
    ${H} = unpack_mix_${X}(a_${H}, u_${H}_t);
#else
    ${R} ${B} ${H} = u_${H};
#endif
`:z==="define"?`
#ifndef HAS_UNIFORM_u_${H}
uniform lowp float u_${H}_t;
attribute ${R} ${Y} a_${H};
#else
uniform ${R} ${B} u_${H};
#endif
`:X==="vec4"?`
#ifndef HAS_UNIFORM_u_${H}
    ${R} ${B} ${H} = a_${H};
#else
    ${R} ${B} ${H} = u_${H};
#endif
`:`
#ifndef HAS_UNIFORM_u_${H}
    ${R} ${B} ${H} = unpack_mix_${X}(a_${H}, u_${H}_t);
#else
    ${R} ${B} ${H} = u_${H};
#endif
`}),staticAttributes:h,staticUniforms:T}}class ch{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(n,s,h,m,b,T,C,I,z){this.context=n;let R=this.boundPaintVertexBuffers.length!==m.length;for(let B=0;!R&&B<m.length;B++)this.boundPaintVertexBuffers[B]!==m[B]&&(R=!0);n.extVertexArrayObject&&this.vao&&this.boundProgram===s&&this.boundLayoutVertexBuffer===h&&!R&&this.boundIndexBuffer===b&&this.boundVertexOffset===T&&this.boundDynamicVertexBuffer===C&&this.boundDynamicVertexBuffer2===I&&this.boundDynamicVertexBuffer3===z?(n.bindVertexArrayOES.set(this.vao),C&&C.bind(),b&&b.dynamicDraw&&b.bind(),I&&I.bind(),z&&z.bind()):this.freshBind(s,h,m,b,T,C,I,z)}freshBind(n,s,h,m,b,T,C,I){let z;const R=n.numAttributes,B=this.context,H=B.gl;if(B.extVertexArrayObject)this.vao&&this.destroy(),this.vao=B.extVertexArrayObject.createVertexArrayOES(),B.bindVertexArrayOES.set(this.vao),z=0,this.boundProgram=n,this.boundLayoutVertexBuffer=s,this.boundPaintVertexBuffers=h,this.boundIndexBuffer=m,this.boundVertexOffset=b,this.boundDynamicVertexBuffer=T,this.boundDynamicVertexBuffer2=C,this.boundDynamicVertexBuffer3=I;else{z=B.currentNumAttributes||0;for(let Y=R;Y<z;Y++)H.disableVertexAttribArray(Y)}s.enableAttributes(H,n);for(const Y of h)Y.enableAttributes(H,n);T&&T.enableAttributes(H,n),C&&C.enableAttributes(H,n),I&&I.enableAttributes(H,n),s.bind(),s.setVertexAttribPointers(H,n,b);for(const Y of h)Y.bind(),Y.setVertexAttribPointers(H,n,b);T&&(T.bind(),T.setVertexAttribPointers(H,n,b)),m&&m.bind(),C&&(C.bind(),C.setVertexAttribPointers(H,n,b)),I&&(I.bind(),I.setVertexAttribPointers(H,n,b)),B.currentNumAttributes=R}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Go(f){const n=[];for(let s=0;s<f.length;s++){if(f[s]===null)continue;const h=f[s].split(" ");n.push(h.pop())}return n}class il{constructor(n,s,h,m,b,T,C){const I=n.gl;this.program=I.createProgram();const z=Go(h.staticAttributes),R=m?m.getBinderAttributes():[],B=z.concat(R),H=aa.prelude.staticUniforms?Go(aa.prelude.staticUniforms):[],Y=h.staticUniforms?Go(h.staticUniforms):[],X=m?m.getBinderUniforms():[],Z=H.concat(Y).concat(X),se=[];for(const Re of Z)se.indexOf(Re)<0&&se.push(Re);const ge=m?m.defines():[];T&&ge.push("#define OVERDRAW_INSPECTOR;"),C&&ge.push("#define TERRAIN3D;");const xe=ge.concat(aa.prelude.fragmentSource,h.fragmentSource).join(`
`),te=ge.concat(aa.prelude.vertexSource,h.vertexSource).join(`
`),Te=I.createShader(I.FRAGMENT_SHADER);if(I.isContextLost())return void(this.failedToCreate=!0);I.shaderSource(Te,xe),I.compileShader(Te),I.attachShader(this.program,Te);const Se=I.createShader(I.VERTEX_SHADER);if(I.isContextLost())return void(this.failedToCreate=!0);I.shaderSource(Se,te),I.compileShader(Se),I.attachShader(this.program,Se),this.attributes={};const Pe={};this.numAttributes=B.length;for(let Re=0;Re<this.numAttributes;Re++)B[Re]&&(I.bindAttribLocation(this.program,Re,B[Re]),this.attributes[B[Re]]=Re);I.linkProgram(this.program),I.deleteShader(Se),I.deleteShader(Te);for(let Re=0;Re<se.length;Re++){const He=se[Re];if(He&&!Pe[He]){const ze=I.getUniformLocation(this.program,He);ze&&(Pe[He]=ze)}}this.fixedUniforms=b(n,Pe),this.terrainUniforms=((Re,He)=>({u_depth:new c.Uniform1i(Re,He.u_depth),u_terrain:new c.Uniform1i(Re,He.u_terrain),u_terrain_dim:new c.Uniform1f(Re,He.u_terrain_dim),u_terrain_matrix:new c.UniformMatrix4f(Re,He.u_terrain_matrix),u_terrain_unpack:new c.Uniform4f(Re,He.u_terrain_unpack),u_terrain_offset:new c.Uniform1f(Re,He.u_terrain_offset),u_terrain_exaggeration:new c.Uniform1f(Re,He.u_terrain_exaggeration)}))(n,Pe),this.binderUniforms=m?m.getUniforms(n,Pe):[]}draw(n,s,h,m,b,T,C,I,z,R,B,H,Y,X,Z,se,ge,xe){const te=n.gl;if(this.failedToCreate)return;if(n.program.set(this.program),n.setDepthMode(h),n.setStencilMode(m),n.setColorMode(b),n.setCullFace(T),I){n.activeTexture.set(te.TEXTURE2),te.bindTexture(te.TEXTURE_2D,I.depthTexture),n.activeTexture.set(te.TEXTURE3),te.bindTexture(te.TEXTURE_2D,I.texture);for(const Se in this.terrainUniforms)this.terrainUniforms[Se].set(I[Se])}for(const Se in this.fixedUniforms)this.fixedUniforms[Se].set(C[Se]);Z&&Z.setUniforms(n,this.binderUniforms,Y,{zoom:X});let Te=0;switch(s){case te.LINES:Te=2;break;case te.TRIANGLES:Te=3;break;case te.LINE_STRIP:Te=1}for(const Se of H.get()){const Pe=Se.vaos||(Se.vaos={});(Pe[z]||(Pe[z]=new ch)).bind(n,this,R,Z?Z.getPaintVertexBuffers():[],B,Se.vertexOffset,se,ge,xe),te.drawElements(s,Se.primitiveLength*Te,te.UNSIGNED_SHORT,Se.primitiveOffset*Te*2)}}}function qo(f,n,s){const h=1/$t(s,1,n.transform.tileZoom),m=Math.pow(2,s.tileID.overscaledZ),b=s.tileSize*Math.pow(2,n.transform.tileZoom)/m,T=b*(s.tileID.canonical.x+s.tileID.wrap*m),C=b*s.tileID.canonical.y;return{u_image:0,u_texsize:s.imageAtlasTexture.size,u_scale:[h,f.fromScale,f.toScale],u_fade:f.t,u_pixel_coord_upper:[T>>16,C>>16],u_pixel_coord_lower:[65535&T,65535&C]}}const la=(f,n,s,h)=>{const m=n.style.light,b=m.properties.get("position"),T=[b.x,b.y,b.z],C=c.create$1();m.properties.get("anchor")==="viewport"&&c.fromRotation(C,-n.transform.angle),c.transformMat3(T,T,C);const I=m.properties.get("color");return{u_matrix:f,u_lightpos:T,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[I.r,I.g,I.b],u_vertical_gradient:+s,u_opacity:h}},sc=(f,n,s,h,m,b,T)=>c.extend(la(f,n,s,h),qo(b,n,T),{u_height_factor:-Math.pow(2,m.overscaledZ)/T.tileSize/8}),ac=f=>({u_matrix:f}),ca=(f,n,s,h)=>c.extend(ac(f),qo(s,n,h)),lc=(f,n)=>({u_matrix:f,u_world:n}),ol=(f,n,s,h,m)=>c.extend(ca(f,n,s,h),{u_world:m}),xi=(f,n,s,h)=>{const m=f.transform;let b,T;if(h.paint.get("circle-pitch-alignment")==="map"){const C=$t(s,1,m.zoom);b=!0,T=[C,C]}else b=!1,T=m.pixelsToGLUnits;return{u_camera_to_center_distance:m.cameraToCenterDistance,u_scale_with_map:+(h.paint.get("circle-pitch-scale")==="map"),u_matrix:f.translatePosMatrix(n.posMatrix,s,h.paint.get("circle-translate"),h.paint.get("circle-translate-anchor")),u_pitch_with_map:+b,u_device_pixel_ratio:f.pixelRatio,u_extrude_scale:T}},sl=(f,n,s)=>{const h=$t(s,1,n.zoom),m=Math.pow(2,n.zoom-s.tileID.overscaledZ),b=s.tileID.overscaleFactor();return{u_matrix:f,u_camera_to_center_distance:n.cameraToCenterDistance,u_pixels_to_tile_units:h,u_extrude_scale:[n.pixelsToGLUnits[0]/(h*m),n.pixelsToGLUnits[1]/(h*m)],u_overscale_factor:b}},uo=(f,n,s=1)=>({u_matrix:f,u_color:n,u_overlay:0,u_overlay_scale:s}),fn=f=>({u_matrix:f}),ua=(f,n,s,h)=>({u_matrix:f,u_extrude_scale:$t(n,1,s),u_intensity:h});function ha(f,n){const s=Math.pow(2,n.canonical.z),h=n.canonical.y;return[new c.MercatorCoordinate(0,h/s).toLngLat().lat,new c.MercatorCoordinate(0,(h+1)/s).toLngLat().lat]}const Wo=(f,n,s,h)=>{const m=f.transform;return{u_matrix:_s(f,n,s,h),u_ratio:1/$t(n,1,m.zoom),u_device_pixel_ratio:f.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},da=(f,n,s,h,m)=>c.extend(Wo(f,n,s,m),{u_image:0,u_image_height:h}),xs=(f,n,s,h,m)=>{const b=f.transform,T=Zo(n,b);return{u_matrix:_s(f,n,s,m),u_texsize:n.imageAtlasTexture.size,u_ratio:1/$t(n,1,b.zoom),u_device_pixel_ratio:f.pixelRatio,u_image:0,u_scale:[T,h.fromScale,h.toScale],u_fade:h.t,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},zn=(f,n,s,h,m,b)=>{const T=f.lineAtlas,C=Zo(n,f.transform),I=s.layout.get("line-cap")==="round",z=T.getDash(h.from,I),R=T.getDash(h.to,I),B=z.width*m.fromScale,H=R.width*m.toScale;return c.extend(Wo(f,n,s,b),{u_patternscale_a:[C/B,-z.height/2],u_patternscale_b:[C/H,-R.height/2],u_sdfgamma:T.width/(256*Math.min(B,H)*f.pixelRatio)/2,u_image:0,u_tex_y_a:z.y,u_tex_y_b:R.y,u_mix:m.t})};function Zo(f,n){return 1/$t(f,1,n.tileZoom)}function _s(f,n,s,h){return f.translatePosMatrix(h?h.posMatrix:n.tileID.posMatrix,n,s.paint.get("line-translate"),s.paint.get("line-translate-anchor"))}const Hi=(f,n,s,h,m)=>{return{u_matrix:f,u_tl_parent:n,u_scale_parent:s,u_buffer_scale:1,u_fade_t:h.mix,u_opacity:h.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(T=m.paint.get("raster-saturation"),T>0?1-1/(1.001-T):-T),u_contrast_factor:(b=m.paint.get("raster-contrast"),b>0?1/(1-b):1+b),u_spin_weights:Gi(m.paint.get("raster-hue-rotate"))};var b,T};function Gi(f){f*=Math.PI/180;const n=Math.sin(f),s=Math.cos(f);return[(2*s+1)/3,(-Math.sqrt(3)*n-s+1)/3,(Math.sqrt(3)*n-s+1)/3]}const _i=(f,n,s,h,m,b,T,C,I,z)=>{const R=m.transform;return{u_is_size_zoom_constant:+(f==="constant"||f==="source"),u_is_size_feature_constant:+(f==="constant"||f==="camera"),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:R.cameraToCenterDistance,u_pitch:R.pitch/360*2*Math.PI,u_rotate_symbol:+s,u_aspect_ratio:R.width/R.height,u_fade_change:m.options.fadeDuration?m.symbolFadeChange:1,u_matrix:b,u_label_plane_matrix:T,u_coord_matrix:C,u_is_text:+I,u_pitch_with_map:+h,u_texsize:z,u_texture:0}},Xo=(f,n,s,h,m,b,T,C,I,z,R)=>{const B=m.transform;return c.extend(_i(f,n,s,h,m,b,T,C,I,z),{u_gamma_scale:h?Math.cos(B._pitch)*B.cameraToCenterDistance:1,u_device_pixel_ratio:m.pixelRatio,u_is_halo:1})},pa=(f,n,s,h,m,b,T,C,I,z)=>c.extend(Xo(f,n,s,h,m,b,T,C,!0,I),{u_texsize_icon:z,u_texture_icon:1}),ho=(f,n,s)=>({u_matrix:f,u_opacity:n,u_color:s}),cc=(f,n,s,h,m,b)=>c.extend(function(T,C,I,z){const R=I.imageManager.getPattern(T.from.toString()),B=I.imageManager.getPattern(T.to.toString()),{width:H,height:Y}=I.imageManager.getPixelSize(),X=Math.pow(2,z.tileID.overscaledZ),Z=z.tileSize*Math.pow(2,I.transform.tileZoom)/X,se=Z*(z.tileID.canonical.x+z.tileID.wrap*X),ge=Z*z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:R.tl,u_pattern_br_a:R.br,u_pattern_tl_b:B.tl,u_pattern_br_b:B.br,u_texsize:[H,Y],u_mix:C.t,u_pattern_size_a:R.displaySize,u_pattern_size_b:B.displaySize,u_scale_a:C.fromScale,u_scale_b:C.toScale,u_tile_units_to_pixels:1/$t(z,1,I.transform.tileZoom),u_pixel_coord_upper:[se>>16,ge>>16],u_pixel_coord_lower:[65535&se,65535&ge]}}(h,b,s,m),{u_matrix:f,u_opacity:n}),al={fillExtrusion:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_lightpos:new c.Uniform3f(f,n.u_lightpos),u_lightintensity:new c.Uniform1f(f,n.u_lightintensity),u_lightcolor:new c.Uniform3f(f,n.u_lightcolor),u_vertical_gradient:new c.Uniform1f(f,n.u_vertical_gradient),u_opacity:new c.Uniform1f(f,n.u_opacity)}),fillExtrusionPattern:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_lightpos:new c.Uniform3f(f,n.u_lightpos),u_lightintensity:new c.Uniform1f(f,n.u_lightintensity),u_lightcolor:new c.Uniform3f(f,n.u_lightcolor),u_vertical_gradient:new c.Uniform1f(f,n.u_vertical_gradient),u_height_factor:new c.Uniform1f(f,n.u_height_factor),u_image:new c.Uniform1i(f,n.u_image),u_texsize:new c.Uniform2f(f,n.u_texsize),u_pixel_coord_upper:new c.Uniform2f(f,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(f,n.u_pixel_coord_lower),u_scale:new c.Uniform3f(f,n.u_scale),u_fade:new c.Uniform1f(f,n.u_fade),u_opacity:new c.Uniform1f(f,n.u_opacity)}),fill:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix)}),fillPattern:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_image:new c.Uniform1i(f,n.u_image),u_texsize:new c.Uniform2f(f,n.u_texsize),u_pixel_coord_upper:new c.Uniform2f(f,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(f,n.u_pixel_coord_lower),u_scale:new c.Uniform3f(f,n.u_scale),u_fade:new c.Uniform1f(f,n.u_fade)}),fillOutline:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_world:new c.Uniform2f(f,n.u_world)}),fillOutlinePattern:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_world:new c.Uniform2f(f,n.u_world),u_image:new c.Uniform1i(f,n.u_image),u_texsize:new c.Uniform2f(f,n.u_texsize),u_pixel_coord_upper:new c.Uniform2f(f,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(f,n.u_pixel_coord_lower),u_scale:new c.Uniform3f(f,n.u_scale),u_fade:new c.Uniform1f(f,n.u_fade)}),circle:(f,n)=>({u_camera_to_center_distance:new c.Uniform1f(f,n.u_camera_to_center_distance),u_scale_with_map:new c.Uniform1i(f,n.u_scale_with_map),u_pitch_with_map:new c.Uniform1i(f,n.u_pitch_with_map),u_extrude_scale:new c.Uniform2f(f,n.u_extrude_scale),u_device_pixel_ratio:new c.Uniform1f(f,n.u_device_pixel_ratio),u_matrix:new c.UniformMatrix4f(f,n.u_matrix)}),collisionBox:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_camera_to_center_distance:new c.Uniform1f(f,n.u_camera_to_center_distance),u_pixels_to_tile_units:new c.Uniform1f(f,n.u_pixels_to_tile_units),u_extrude_scale:new c.Uniform2f(f,n.u_extrude_scale),u_overscale_factor:new c.Uniform1f(f,n.u_overscale_factor)}),collisionCircle:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_inv_matrix:new c.UniformMatrix4f(f,n.u_inv_matrix),u_camera_to_center_distance:new c.Uniform1f(f,n.u_camera_to_center_distance),u_viewport_size:new c.Uniform2f(f,n.u_viewport_size)}),debug:(f,n)=>({u_color:new c.UniformColor(f,n.u_color),u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_overlay:new c.Uniform1i(f,n.u_overlay),u_overlay_scale:new c.Uniform1f(f,n.u_overlay_scale)}),clippingMask:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix)}),heatmap:(f,n)=>({u_extrude_scale:new c.Uniform1f(f,n.u_extrude_scale),u_intensity:new c.Uniform1f(f,n.u_intensity),u_matrix:new c.UniformMatrix4f(f,n.u_matrix)}),heatmapTexture:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_world:new c.Uniform2f(f,n.u_world),u_image:new c.Uniform1i(f,n.u_image),u_color_ramp:new c.Uniform1i(f,n.u_color_ramp),u_opacity:new c.Uniform1f(f,n.u_opacity)}),hillshade:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_image:new c.Uniform1i(f,n.u_image),u_latrange:new c.Uniform2f(f,n.u_latrange),u_light:new c.Uniform2f(f,n.u_light),u_shadow:new c.UniformColor(f,n.u_shadow),u_highlight:new c.UniformColor(f,n.u_highlight),u_accent:new c.UniformColor(f,n.u_accent)}),hillshadePrepare:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_image:new c.Uniform1i(f,n.u_image),u_dimension:new c.Uniform2f(f,n.u_dimension),u_zoom:new c.Uniform1f(f,n.u_zoom),u_unpack:new c.Uniform4f(f,n.u_unpack)}),line:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_ratio:new c.Uniform1f(f,n.u_ratio),u_device_pixel_ratio:new c.Uniform1f(f,n.u_device_pixel_ratio),u_units_to_pixels:new c.Uniform2f(f,n.u_units_to_pixels)}),lineGradient:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_ratio:new c.Uniform1f(f,n.u_ratio),u_device_pixel_ratio:new c.Uniform1f(f,n.u_device_pixel_ratio),u_units_to_pixels:new c.Uniform2f(f,n.u_units_to_pixels),u_image:new c.Uniform1i(f,n.u_image),u_image_height:new c.Uniform1f(f,n.u_image_height)}),linePattern:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_texsize:new c.Uniform2f(f,n.u_texsize),u_ratio:new c.Uniform1f(f,n.u_ratio),u_device_pixel_ratio:new c.Uniform1f(f,n.u_device_pixel_ratio),u_image:new c.Uniform1i(f,n.u_image),u_units_to_pixels:new c.Uniform2f(f,n.u_units_to_pixels),u_scale:new c.Uniform3f(f,n.u_scale),u_fade:new c.Uniform1f(f,n.u_fade)}),lineSDF:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_ratio:new c.Uniform1f(f,n.u_ratio),u_device_pixel_ratio:new c.Uniform1f(f,n.u_device_pixel_ratio),u_units_to_pixels:new c.Uniform2f(f,n.u_units_to_pixels),u_patternscale_a:new c.Uniform2f(f,n.u_patternscale_a),u_patternscale_b:new c.Uniform2f(f,n.u_patternscale_b),u_sdfgamma:new c.Uniform1f(f,n.u_sdfgamma),u_image:new c.Uniform1i(f,n.u_image),u_tex_y_a:new c.Uniform1f(f,n.u_tex_y_a),u_tex_y_b:new c.Uniform1f(f,n.u_tex_y_b),u_mix:new c.Uniform1f(f,n.u_mix)}),raster:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_tl_parent:new c.Uniform2f(f,n.u_tl_parent),u_scale_parent:new c.Uniform1f(f,n.u_scale_parent),u_buffer_scale:new c.Uniform1f(f,n.u_buffer_scale),u_fade_t:new c.Uniform1f(f,n.u_fade_t),u_opacity:new c.Uniform1f(f,n.u_opacity),u_image0:new c.Uniform1i(f,n.u_image0),u_image1:new c.Uniform1i(f,n.u_image1),u_brightness_low:new c.Uniform1f(f,n.u_brightness_low),u_brightness_high:new c.Uniform1f(f,n.u_brightness_high),u_saturation_factor:new c.Uniform1f(f,n.u_saturation_factor),u_contrast_factor:new c.Uniform1f(f,n.u_contrast_factor),u_spin_weights:new c.Uniform3f(f,n.u_spin_weights)}),symbolIcon:(f,n)=>({u_is_size_zoom_constant:new c.Uniform1i(f,n.u_is_size_zoom_constant),u_is_size_feature_constant:new c.Uniform1i(f,n.u_is_size_feature_constant),u_size_t:new c.Uniform1f(f,n.u_size_t),u_size:new c.Uniform1f(f,n.u_size),u_camera_to_center_distance:new c.Uniform1f(f,n.u_camera_to_center_distance),u_pitch:new c.Uniform1f(f,n.u_pitch),u_rotate_symbol:new c.Uniform1i(f,n.u_rotate_symbol),u_aspect_ratio:new c.Uniform1f(f,n.u_aspect_ratio),u_fade_change:new c.Uniform1f(f,n.u_fade_change),u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_label_plane_matrix:new c.UniformMatrix4f(f,n.u_label_plane_matrix),u_coord_matrix:new c.UniformMatrix4f(f,n.u_coord_matrix),u_is_text:new c.Uniform1i(f,n.u_is_text),u_pitch_with_map:new c.Uniform1i(f,n.u_pitch_with_map),u_texsize:new c.Uniform2f(f,n.u_texsize),u_texture:new c.Uniform1i(f,n.u_texture)}),symbolSDF:(f,n)=>({u_is_size_zoom_constant:new c.Uniform1i(f,n.u_is_size_zoom_constant),u_is_size_feature_constant:new c.Uniform1i(f,n.u_is_size_feature_constant),u_size_t:new c.Uniform1f(f,n.u_size_t),u_size:new c.Uniform1f(f,n.u_size),u_camera_to_center_distance:new c.Uniform1f(f,n.u_camera_to_center_distance),u_pitch:new c.Uniform1f(f,n.u_pitch),u_rotate_symbol:new c.Uniform1i(f,n.u_rotate_symbol),u_aspect_ratio:new c.Uniform1f(f,n.u_aspect_ratio),u_fade_change:new c.Uniform1f(f,n.u_fade_change),u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_label_plane_matrix:new c.UniformMatrix4f(f,n.u_label_plane_matrix),u_coord_matrix:new c.UniformMatrix4f(f,n.u_coord_matrix),u_is_text:new c.Uniform1i(f,n.u_is_text),u_pitch_with_map:new c.Uniform1i(f,n.u_pitch_with_map),u_texsize:new c.Uniform2f(f,n.u_texsize),u_texture:new c.Uniform1i(f,n.u_texture),u_gamma_scale:new c.Uniform1f(f,n.u_gamma_scale),u_device_pixel_ratio:new c.Uniform1f(f,n.u_device_pixel_ratio),u_is_halo:new c.Uniform1i(f,n.u_is_halo)}),symbolTextAndIcon:(f,n)=>({u_is_size_zoom_constant:new c.Uniform1i(f,n.u_is_size_zoom_constant),u_is_size_feature_constant:new c.Uniform1i(f,n.u_is_size_feature_constant),u_size_t:new c.Uniform1f(f,n.u_size_t),u_size:new c.Uniform1f(f,n.u_size),u_camera_to_center_distance:new c.Uniform1f(f,n.u_camera_to_center_distance),u_pitch:new c.Uniform1f(f,n.u_pitch),u_rotate_symbol:new c.Uniform1i(f,n.u_rotate_symbol),u_aspect_ratio:new c.Uniform1f(f,n.u_aspect_ratio),u_fade_change:new c.Uniform1f(f,n.u_fade_change),u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_label_plane_matrix:new c.UniformMatrix4f(f,n.u_label_plane_matrix),u_coord_matrix:new c.UniformMatrix4f(f,n.u_coord_matrix),u_is_text:new c.Uniform1i(f,n.u_is_text),u_pitch_with_map:new c.Uniform1i(f,n.u_pitch_with_map),u_texsize:new c.Uniform2f(f,n.u_texsize),u_texsize_icon:new c.Uniform2f(f,n.u_texsize_icon),u_texture:new c.Uniform1i(f,n.u_texture),u_texture_icon:new c.Uniform1i(f,n.u_texture_icon),u_gamma_scale:new c.Uniform1f(f,n.u_gamma_scale),u_device_pixel_ratio:new c.Uniform1f(f,n.u_device_pixel_ratio),u_is_halo:new c.Uniform1i(f,n.u_is_halo)}),background:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_opacity:new c.Uniform1f(f,n.u_opacity),u_color:new c.UniformColor(f,n.u_color)}),backgroundPattern:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_opacity:new c.Uniform1f(f,n.u_opacity),u_image:new c.Uniform1i(f,n.u_image),u_pattern_tl_a:new c.Uniform2f(f,n.u_pattern_tl_a),u_pattern_br_a:new c.Uniform2f(f,n.u_pattern_br_a),u_pattern_tl_b:new c.Uniform2f(f,n.u_pattern_tl_b),u_pattern_br_b:new c.Uniform2f(f,n.u_pattern_br_b),u_texsize:new c.Uniform2f(f,n.u_texsize),u_mix:new c.Uniform1f(f,n.u_mix),u_pattern_size_a:new c.Uniform2f(f,n.u_pattern_size_a),u_pattern_size_b:new c.Uniform2f(f,n.u_pattern_size_b),u_scale_a:new c.Uniform1f(f,n.u_scale_a),u_scale_b:new c.Uniform1f(f,n.u_scale_b),u_pixel_coord_upper:new c.Uniform2f(f,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(f,n.u_pixel_coord_lower),u_tile_units_to_pixels:new c.Uniform1f(f,n.u_tile_units_to_pixels)}),terrain:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_texture:new c.Uniform1i(f,n.u_texture)}),terrainDepth:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix)}),terrainCoords:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_texture:new c.Uniform1i(f,n.u_texture),u_terrain_coords_id:new c.Uniform1f(f,n.u_terrain_coords_id)})};class Ko{constructor(n,s,h){this.context=n;const m=n.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!h,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(n){const s=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const uc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class hc{constructor(n,s,h,m){this.length=s.length,this.attributes=h,this.itemSize=s.bytesPerElement,this.dynamicDraw=m,this.context=n;const b=n.gl;this.buffer=b.createBuffer(),n.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(n){if(n.length!==this.length)throw new Error(`Length of new data is ${n.length}, which doesn't match current length of ${this.length}`);const s=this.context.gl;this.bind(),s.bufferSubData(s.ARRAY_BUFFER,0,n.arrayBuffer)}enableAttributes(n,s){for(let h=0;h<this.attributes.length;h++){const m=s.attributes[this.attributes[h].name];m!==void 0&&n.enableVertexAttribArray(m)}}setVertexAttribPointers(n,s,h){for(let m=0;m<this.attributes.length;m++){const b=this.attributes[m],T=s.attributes[b.name];T!==void 0&&n.vertexAttribPointer(T,b.components,n[uc[b.type]],!1,this.itemSize,b.offset+this.itemSize*(h||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class un{constructor(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(n){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class cu extends un{getDefault(){return c.Color.transparent}set(n){const s=this.current;(n.r!==s.r||n.g!==s.g||n.b!==s.b||n.a!==s.a||this.dirty)&&(this.gl.clearColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class fa extends un{getDefault(){return 1}set(n){(n!==this.current||this.dirty)&&(this.gl.clearDepth(n),this.current=n,this.dirty=!1)}}class qi extends un{getDefault(){return 0}set(n){(n!==this.current||this.dirty)&&(this.gl.clearStencil(n),this.current=n,this.dirty=!1)}}class ws extends un{getDefault(){return[!0,!0,!0,!0]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||n[2]!==s[2]||n[3]!==s[3]||this.dirty)&&(this.gl.colorMask(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class cr extends un{getDefault(){return!0}set(n){(n!==this.current||this.dirty)&&(this.gl.depthMask(n),this.current=n,this.dirty=!1)}}class bs extends un{getDefault(){return 255}set(n){(n!==this.current||this.dirty)&&(this.gl.stencilMask(n),this.current=n,this.dirty=!1)}}class ll extends un{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(n){const s=this.current;(n.func!==s.func||n.ref!==s.ref||n.mask!==s.mask||this.dirty)&&(this.gl.stencilFunc(n.func,n.ref,n.mask),this.current=n,this.dirty=!1)}}class cl extends un{getDefault(){const n=this.gl;return[n.KEEP,n.KEEP,n.KEEP]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||n[2]!==s[2]||this.dirty)&&(this.gl.stencilOp(n[0],n[1],n[2]),this.current=n,this.dirty=!1)}}class ma extends un{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;n?s.enable(s.STENCIL_TEST):s.disable(s.STENCIL_TEST),this.current=n,this.dirty=!1}}class Ss extends un{getDefault(){return[0,1]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||this.dirty)&&(this.gl.depthRange(n[0],n[1]),this.current=n,this.dirty=!1)}}class Es extends un{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;n?s.enable(s.DEPTH_TEST):s.disable(s.DEPTH_TEST),this.current=n,this.dirty=!1}}class ul extends un{getDefault(){return this.gl.LESS}set(n){(n!==this.current||this.dirty)&&(this.gl.depthFunc(n),this.current=n,this.dirty=!1)}}class ji extends un{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;n?s.enable(s.BLEND):s.disable(s.BLEND),this.current=n,this.dirty=!1}}class Ts extends un{getDefault(){const n=this.gl;return[n.ONE,n.ZERO]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||this.dirty)&&(this.gl.blendFunc(n[0],n[1]),this.current=n,this.dirty=!1)}}class ga extends un{getDefault(){return c.Color.transparent}set(n){const s=this.current;(n.r!==s.r||n.g!==s.g||n.b!==s.b||n.a!==s.a||this.dirty)&&(this.gl.blendColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class dc extends un{getDefault(){return this.gl.FUNC_ADD}set(n){(n!==this.current||this.dirty)&&(this.gl.blendEquation(n),this.current=n,this.dirty=!1)}}class Wi extends un{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;n?s.enable(s.CULL_FACE):s.disable(s.CULL_FACE),this.current=n,this.dirty=!1}}class hl extends un{getDefault(){return this.gl.BACK}set(n){(n!==this.current||this.dirty)&&(this.gl.cullFace(n),this.current=n,this.dirty=!1)}}class uu extends un{getDefault(){return this.gl.CCW}set(n){(n!==this.current||this.dirty)&&(this.gl.frontFace(n),this.current=n,this.dirty=!1)}}class Yr extends un{getDefault(){return null}set(n){(n!==this.current||this.dirty)&&(this.gl.useProgram(n),this.current=n,this.dirty=!1)}}class ks extends un{getDefault(){return this.gl.TEXTURE0}set(n){(n!==this.current||this.dirty)&&(this.gl.activeTexture(n),this.current=n,this.dirty=!1)}}class pc extends un{getDefault(){const n=this.gl;return[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||n[2]!==s[2]||n[3]!==s[3]||this.dirty)&&(this.gl.viewport(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class ya extends un{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.bindFramebuffer(s.FRAMEBUFFER,n),this.current=n,this.dirty=!1}}class fc extends un{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.bindRenderbuffer(s.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class Ms extends un{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.bindTexture(s.TEXTURE_2D,n),this.current=n,this.dirty=!1}}class va extends un{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.bindBuffer(s.ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class Jo extends un{getDefault(){return null}set(n){const s=this.gl;s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class Zi extends un{constructor(n){super(n),this.vao=n.extVertexArrayObject}getDefault(){return null}set(n){this.vao&&(n!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(n),this.current=n,this.dirty=!1)}}class mc extends un{getDefault(){return 4}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.pixelStorei(s.UNPACK_ALIGNMENT,n),this.current=n,this.dirty=!1}}class hu extends un{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),this.current=n,this.dirty=!1}}class gc extends un{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,n),this.current=n,this.dirty=!1}}class po extends un{constructor(n,s){super(n),this.context=n,this.parent=s}getDefault(){return null}}class dl extends po{setDirty(){this.dirty=!0}set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const s=this.gl;s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,n,0),this.current=n,this.dirty=!1}}class Cs extends po{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const s=this.gl;s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class Ps{constructor(n,s,h,m){this.context=n,this.width=s,this.height=h;const b=n.gl,T=this.framebuffer=b.createFramebuffer();if(this.colorAttachment=new dl(n,T),m&&(this.depthAttachment=new Cs(n,T)),b.checkFramebufferStatus(b.FRAMEBUFFER)!==b.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const n=this.context.gl,s=this.colorAttachment.get();if(s&&n.deleteTexture(s),this.depthAttachment){const h=this.depthAttachment.get();h&&n.deleteRenderbuffer(h)}n.deleteFramebuffer(this.framebuffer)}}class Un{constructor(n,s,h){this.blendFunction=n,this.blendColor=s,this.mask=h}}Un.Replace=[1,0],Un.disabled=new Un(Un.Replace,c.Color.transparent,[!1,!1,!1,!1]),Un.unblended=new Un(Un.Replace,c.Color.transparent,[!0,!0,!0,!0]),Un.alphaBlended=new Un([1,771],c.Color.transparent,[!0,!0,!0,!0]);class yc{constructor(n){this.gl=n,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new cu(this),this.clearDepth=new fa(this),this.clearStencil=new qi(this),this.colorMask=new ws(this),this.depthMask=new cr(this),this.stencilMask=new bs(this),this.stencilFunc=new ll(this),this.stencilOp=new cl(this),this.stencilTest=new ma(this),this.depthRange=new Ss(this),this.depthTest=new Es(this),this.depthFunc=new ul(this),this.blend=new ji(this),this.blendFunc=new Ts(this),this.blendColor=new ga(this),this.blendEquation=new dc(this),this.cullFace=new Wi(this),this.cullFaceSide=new hl(this),this.frontFace=new uu(this),this.program=new Yr(this),this.activeTexture=new ks(this),this.viewport=new pc(this),this.bindFramebuffer=new ya(this),this.bindRenderbuffer=new fc(this),this.bindTexture=new Ms(this),this.bindVertexBuffer=new va(this),this.bindElementBuffer=new Jo(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Zi(this),this.pixelStoreUnpack=new mc(this),this.pixelStoreUnpackPremultiplyAlpha=new hu(this),this.pixelStoreUnpackFlipY=new gc(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=n.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(n.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=n.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=n.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(n,s){return new Ko(this,n,s)}createVertexBuffer(n,s,h){return new hc(this,n,s,h)}createRenderbuffer(n,s,h){const m=this.gl,b=m.createRenderbuffer();return this.bindRenderbuffer.set(b),m.renderbufferStorage(m.RENDERBUFFER,n,s,h),this.bindRenderbuffer.set(null),b}createFramebuffer(n,s,h){return new Ps(this,n,s,h)}clear({color:n,depth:s}){const h=this.gl;let m=0;n&&(m|=h.COLOR_BUFFER_BIT,this.clearColor.set(n),this.colorMask.set([!0,!0,!0,!0])),s!==void 0&&(m|=h.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(s),this.depthMask.set(!0)),h.clear(m)}setCullFace(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))}setDepthMode(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)}setStencilMode(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)}setColorMode(n){$(n.blendFunction,Un.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class ft{constructor(n,s,h){this.func=n,this.mask=s,this.range=h}}ft.ReadOnly=!1,ft.ReadWrite=!0,ft.disabled=new ft(519,ft.ReadOnly,[0,1]);const Yo=7680;class Dn{constructor(n,s,h,m,b,T){this.test=n,this.ref=s,this.mask=h,this.fail=m,this.depthFail=b,this.pass=T}}Dn.disabled=new Dn({func:519,mask:0},0,0,Yo,Yo,Yo);class Mn{constructor(n,s,h){this.enable=n,this.mode=s,this.frontFace=h}}let fo;function du(f,n,s,h,m,b,T){const C=f.context,I=C.gl,z=f.useProgram("collisionBox"),R=[];let B=0,H=0;for(let te=0;te<h.length;te++){const Te=h[te],Se=n.getTile(Te),Pe=Se.getBucket(s);if(!Pe)continue;let Re=Te.posMatrix;m[0]===0&&m[1]===0||(Re=f.translatePosMatrix(Te.posMatrix,Se,m,b));const He=T?Pe.textCollisionBox:Pe.iconCollisionBox,ze=Pe.collisionCircleArray;if(ze.length>0){const at=c.create(),et=Re;c.mul(at,Pe.placementInvProjMatrix,f.transform.glCoordMatrix),c.mul(at,at,Pe.placementViewportMatrix),R.push({circleArray:ze,circleOffset:H,transform:et,invTransform:at,coord:Te}),B+=ze.length/4,H=B}He&&z.draw(C,I.LINES,ft.disabled,Dn.disabled,f.colorModeForRenderPass(),Mn.disabled,sl(Re,f.transform,Se),f.style.terrain&&f.style.terrain.getTerrainData(Te),s.id,He.layoutVertexBuffer,He.indexBuffer,He.segments,null,f.transform.zoom,null,null,He.collisionVertexBuffer)}if(!T||!R.length)return;const Y=f.useProgram("collisionCircle"),X=new c.CollisionCircleLayoutArray;X.resize(4*B),X._trim();let Z=0;for(const te of R)for(let Te=0;Te<te.circleArray.length/4;Te++){const Se=4*Te,Pe=te.circleArray[Se+0],Re=te.circleArray[Se+1],He=te.circleArray[Se+2],ze=te.circleArray[Se+3];X.emplace(Z++,Pe,Re,He,ze,0),X.emplace(Z++,Pe,Re,He,ze,1),X.emplace(Z++,Pe,Re,He,ze,2),X.emplace(Z++,Pe,Re,He,ze,3)}(!fo||fo.length<2*B)&&(fo=function(te){const Te=2*te,Se=new c.QuadTriangleArray;Se.resize(Te),Se._trim();for(let Pe=0;Pe<Te;Pe++){const Re=6*Pe;Se.uint16[Re+0]=4*Pe+0,Se.uint16[Re+1]=4*Pe+1,Se.uint16[Re+2]=4*Pe+2,Se.uint16[Re+3]=4*Pe+2,Se.uint16[Re+4]=4*Pe+3,Se.uint16[Re+5]=4*Pe+0}return Se}(B));const se=C.createIndexBuffer(fo,!0),ge=C.createVertexBuffer(X,c.collisionCircleLayout.members,!0);for(const te of R){const Te={u_matrix:te.transform,u_inv_matrix:te.invTransform,u_camera_to_center_distance:(xe=f.transform).cameraToCenterDistance,u_viewport_size:[xe.width,xe.height]};Y.draw(C,I.TRIANGLES,ft.disabled,Dn.disabled,f.colorModeForRenderPass(),Mn.disabled,Te,f.style.terrain&&f.style.terrain.getTerrainData(te.coord),s.id,ge,se,c.SegmentVector.simpleSegment(0,2*te.circleOffset,te.circleArray.length,te.circleArray.length/2),null,f.transform.zoom,null,null,null)}var xe;ge.destroy(),se.destroy()}Mn.disabled=new Mn(!1,1029,2305),Mn.backCCW=new Mn(!0,1029,2305);const vc=c.identity(new Float32Array(16));function pu(f,n,s,h,m,b){const{horizontalAlign:T,verticalAlign:C}=c.getAnchorAlignment(f),I=-(T-.5)*n,z=-(C-.5)*s,R=c.evaluateVariableOffset(f,h);return new c.pointGeometry((I/m+R[0])*b,(z/m+R[1])*b)}function uh(f,n,s,h,m,b,T,C,I,z,R){const B=f.text.placedSymbolArray,H=f.text.dynamicLayoutVertexArray,Y=f.icon.dynamicLayoutVertexArray,X={};H.clear();for(let Z=0;Z<B.length;Z++){const se=B.get(Z),ge=f.allowVerticalPlacement&&!se.placedOrientation,xe=se.hidden||!se.crossTileID||ge?null:h[se.crossTileID];if(xe){const te=new c.pointGeometry(se.anchorX,se.anchorY),Te=En(te,s?T:b,R),Se=Qn(m.cameraToCenterDistance,Te.signedDistanceFromCamera);let Pe=c.evaluateSizeForFeature(f.textSizeData,I,se)*Se/c.ONE_EM;s&&(Pe*=f.tilePixelRatio/C);const{width:Re,height:He,anchor:ze,textOffset:at,textBoxScale:et}=xe,st=pu(ze,Re,He,at,et,Pe),Dt=s?En(te.add(st),b,R).point:Te.point.add(n?st.rotate(-m.angle):st),Gt=f.allowVerticalPlacement&&se.placedOrientation===c.WritingMode.vertical?Math.PI/2:0;for(let wt=0;wt<se.numGlyphs;wt++)c.addDynamicAttributes(H,Dt,Gt);z&&se.associatedIconIndex>=0&&(X[se.associatedIconIndex]={shiftedAnchor:Dt,angle:Gt})}else or(se.numGlyphs,H)}if(z){Y.clear();const Z=f.icon.placedSymbolArray;for(let se=0;se<Z.length;se++){const ge=Z.get(se);if(ge.hidden)or(ge.numGlyphs,Y);else{const xe=X[se];if(xe)for(let te=0;te<ge.numGlyphs;te++)c.addDynamicAttributes(Y,xe.shiftedAnchor,xe.angle);else or(ge.numGlyphs,Y)}}f.icon.dynamicLayoutVertexBuffer.updateData(Y)}f.text.dynamicLayoutVertexBuffer.updateData(H)}function xc(f,n,s){return s.iconsInText&&n?"symbolTextAndIcon":f?"symbolSDF":"symbolIcon"}function Is(f,n,s,h,m,b,T,C,I,z,R,B){const H=f.context,Y=H.gl,X=f.transform,Z=C==="map",se=I==="map",ge=C!=="viewport"&&s.layout.get("symbol-placement")!=="point",xe=Z&&!se&&!ge,te=!s.layout.get("symbol-sort-key").isConstant();let Te=!1;const Se=f.depthModeForSublayer(0,ft.ReadOnly),Pe=s.layout.get("text-variable-anchor"),Re=[];for(const He of h){const ze=n.getTile(He),at=ze.getBucket(s);if(!at)continue;const et=m?at.text:at.icon;if(!et||!et.segments.get().length)continue;const st=et.programConfigurations.get(s.id),Dt=m||at.sdfIcons,Gt=m?at.textSizeData:at.iconSizeData,wt=se||X.pitch!==0,xn=f.useProgram(xc(Dt,m,at),st),nn=c.evaluateSizeForZoom(Gt,X.zoom),Qt=f.style.terrain&&f.style.terrain.getTerrainData(He);let en,rn,Pr,Kn,Vn=[0,0],gr=null;if(m){if(rn=ze.glyphAtlasTexture,Pr=Y.LINEAR,en=ze.glyphAtlasTexture.size,at.iconsInText){Vn=ze.imageAtlasTexture.size,gr=ze.imageAtlasTexture;const ei=Gt.kind==="composite"||Gt.kind==="camera";Kn=wt||f.options.rotating||f.options.zooming||ei?Y.LINEAR:Y.NEAREST}}else{const ei=s.layout.get("icon-size").constantOr(0)!==1||at.iconsNeedLinear;rn=ze.imageAtlasTexture,Pr=Dt||f.options.rotating||f.options.zooming||ei||wt?Y.LINEAR:Y.NEAREST,en=ze.imageAtlasTexture.size}const $r=$t(ze,1,f.transform.zoom),jn=ir(He.posMatrix,se,Z,f.transform,$r),yr=dn(He.posMatrix,se,Z,f.transform,$r),To=Pe&&at.hasTextData(),Bs=s.layout.get("icon-text-fit")!=="none"&&To&&at.hasIconData();if(ge){const ei=f.style.terrain?(Mo,za)=>f.style.terrain.getElevation(He,Mo,za):null,ko=s.layout.get("text-rotation-alignment")==="map";fr(at,He.posMatrix,f,m,jn,yr,se,z,ko,ei)}const cn=f.translatePosMatrix(He.posMatrix,ze,b,T),on=ge||m&&Pe||Bs?vc:jn,Ht=f.translatePosMatrix(yr,ze,b,T,!0),Jt=Dt&&s.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Nn;Nn=Dt?at.iconsInText?pa(Gt.kind,nn,xe,se,f,cn,on,Ht,en,Vn):Xo(Gt.kind,nn,xe,se,f,cn,on,Ht,m,en):_i(Gt.kind,nn,xe,se,f,cn,on,Ht,m,en);const Cn={program:xn,buffers:et,uniformValues:Nn,atlasTexture:rn,atlasTextureIcon:gr,atlasInterpolation:Pr,atlasInterpolationIcon:Kn,isSDF:Dt,hasHalo:Jt};if(te&&at.canOverlap){Te=!0;const ei=et.segments.get();for(const ko of ei)Re.push({segments:new c.SegmentVector([ko]),sortKey:ko.sortKey,state:Cn,terrainData:Qt})}else Re.push({segments:et.segments,sortKey:0,state:Cn,terrainData:Qt})}Te&&Re.sort((He,ze)=>He.sortKey-ze.sortKey);for(const He of Re){const ze=He.state;if(H.activeTexture.set(Y.TEXTURE0),ze.atlasTexture.bind(ze.atlasInterpolation,Y.CLAMP_TO_EDGE),ze.atlasTextureIcon&&(H.activeTexture.set(Y.TEXTURE1),ze.atlasTextureIcon&&ze.atlasTextureIcon.bind(ze.atlasInterpolationIcon,Y.CLAMP_TO_EDGE)),ze.isSDF){const at=ze.uniformValues;ze.hasHalo&&(at.u_is_halo=1,xa(ze.buffers,He.segments,s,f,ze.program,Se,R,B,at,He.terrainData)),at.u_is_halo=0}xa(ze.buffers,He.segments,s,f,ze.program,Se,R,B,ze.uniformValues,He.terrainData)}}function xa(f,n,s,h,m,b,T,C,I,z){const R=h.context;m.draw(R,R.gl.TRIANGLES,b,T,C,Mn.disabled,I,z,s.id,f.layoutVertexBuffer,f.indexBuffer,n,s.paint,h.transform.zoom,f.programConfigurations.get(s.id),f.dynamicLayoutVertexBuffer,f.opacityVertexBuffer)}function pl(f,n,s,h,m,b,T){const C=f.context.gl,I=s.paint.get("fill-pattern"),z=I&&I.constantOr(1),R=s.getCrossfadeParameters();let B,H,Y,X,Z;T?(H=z&&!s.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",B=C.LINES):(H=z?"fillPattern":"fill",B=C.TRIANGLES);for(const se of h){const ge=n.getTile(se);if(z&&!ge.patternsLoaded())continue;const xe=ge.getBucket(s);if(!xe)continue;const te=xe.programConfigurations.get(s.id),Te=f.useProgram(H,te),Se=f.style.terrain&&f.style.terrain.getTerrainData(se);z&&(f.context.activeTexture.set(C.TEXTURE0),ge.imageAtlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),te.updatePaintBuffers(R));const Pe=I.constantOr(null);if(Pe&&ge.imageAtlas){const ze=ge.imageAtlas,at=ze.patternPositions[Pe.to.toString()],et=ze.patternPositions[Pe.from.toString()];at&&et&&te.setConstantPatternPositions(at,et)}const Re=Se?se:null,He=f.translatePosMatrix(Re?Re.posMatrix:se.posMatrix,ge,s.paint.get("fill-translate"),s.paint.get("fill-translate-anchor"));if(T){X=xe.indexBuffer2,Z=xe.segments2;const ze=[C.drawingBufferWidth,C.drawingBufferHeight];Y=H==="fillOutlinePattern"&&z?ol(He,f,R,ge,ze):lc(He,ze)}else X=xe.indexBuffer,Z=xe.segments,Y=z?ca(He,f,R,ge):ac(He);Te.draw(f.context,B,m,f.stencilModeForClipping(se),b,Mn.disabled,Y,Se,s.id,xe.layoutVertexBuffer,X,Z,s.paint,f.transform.zoom,te)}}function _a(f,n,s,h,m,b,T){const C=f.context,I=C.gl,z=s.paint.get("fill-extrusion-pattern"),R=z.constantOr(1),B=s.getCrossfadeParameters(),H=s.paint.get("fill-extrusion-opacity");for(const Y of h){const X=n.getTile(Y),Z=X.getBucket(s);if(!Z)continue;const se=f.style.terrain&&f.style.terrain.getTerrainData(Y),ge=Z.programConfigurations.get(s.id),xe=f.useProgram(R?"fillExtrusionPattern":"fillExtrusion",ge);R&&(f.context.activeTexture.set(I.TEXTURE0),X.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),ge.updatePaintBuffers(B));const te=z.constantOr(null);if(te&&X.imageAtlas){const Re=X.imageAtlas,He=Re.patternPositions[te.to.toString()],ze=Re.patternPositions[te.from.toString()];He&&ze&&ge.setConstantPatternPositions(He,ze)}const Te=f.translatePosMatrix(Y.posMatrix,X,s.paint.get("fill-extrusion-translate"),s.paint.get("fill-extrusion-translate-anchor")),Se=s.paint.get("fill-extrusion-vertical-gradient"),Pe=R?sc(Te,f,Se,H,Y,B,X):la(Te,f,Se,H);xe.draw(C,C.gl.TRIANGLES,m,b,T,Mn.backCCW,Pe,se,s.id,Z.layoutVertexBuffer,Z.indexBuffer,Z.segments,s.paint,f.transform.zoom,ge,f.style.terrain&&Z.centroidVertexBuffer)}}function fu(f,n,s,h,m,b,T){const C=f.context,I=C.gl,z=s.fbo;if(!z)return;const R=f.useProgram("hillshade"),B=f.style.terrain&&f.style.terrain.getTerrainData(n);C.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,z.colorAttachment.get()),R.draw(C,I.TRIANGLES,m,b,T,Mn.disabled,((H,Y,X,Z)=>{const se=X.paint.get("hillshade-shadow-color"),ge=X.paint.get("hillshade-highlight-color"),xe=X.paint.get("hillshade-accent-color");let te=X.paint.get("hillshade-illumination-direction")*(Math.PI/180);X.paint.get("hillshade-illumination-anchor")==="viewport"&&(te-=H.transform.angle);const Te=!H.options.moving;return{u_matrix:Z?Z.posMatrix:H.transform.calculatePosMatrix(Y.tileID.toUnwrapped(),Te),u_image:0,u_latrange:ha(0,Y.tileID),u_light:[X.paint.get("hillshade-exaggeration"),te],u_shadow:se,u_highlight:ge,u_accent:xe}})(f,s,h,B?n:null),B,h.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)}function fl(f,n,s,h,m,b){const T=f.context,C=T.gl,I=n.dem;if(I&&I.data){const z=I.dim,R=I.stride,B=I.getPixels();if(T.activeTexture.set(C.TEXTURE1),T.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||f.getTileTexture(R),n.demTexture){const Y=n.demTexture;Y.update(B,{premultiply:!1}),Y.bind(C.NEAREST,C.CLAMP_TO_EDGE)}else n.demTexture=new J(T,B,C.RGBA,{premultiply:!1}),n.demTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE);T.activeTexture.set(C.TEXTURE0);let H=n.fbo;if(!H){const Y=new J(T,{width:z,height:z,data:null},C.RGBA);Y.bind(C.LINEAR,C.CLAMP_TO_EDGE),H=n.fbo=T.createFramebuffer(z,z,!0),H.colorAttachment.set(Y.texture)}T.bindFramebuffer.set(H.framebuffer),T.viewport.set([0,0,z,z]),f.useProgram("hillshadePrepare").draw(T,C.TRIANGLES,h,m,b,Mn.disabled,((Y,X)=>{const Z=X.stride,se=c.create();return c.ortho(se,0,c.EXTENT,-c.EXTENT,0,0,1),c.translate(se,se,[0,-c.EXTENT,0]),{u_matrix:se,u_image:1,u_dimension:[Z,Z],u_zoom:Y.overscaledZ,u_unpack:X.getUnpackVector()}})(n.tileID,I),null,s.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function ml(f,n,s,h,m,b){const T=h.paint.get("raster-fade-duration");if(!b&&T>0){const C=c.exported.now(),I=(C-f.timeAdded)/T,z=n?(C-n.timeAdded)/T:-1,R=s.getSource(),B=m.coveringZoomLevel({tileSize:R.tileSize,roundZoom:R.roundZoom}),H=!n||Math.abs(n.tileID.overscaledZ-B)>Math.abs(f.tileID.overscaledZ-B),Y=H&&f.refreshedUponExpiration?1:c.clamp(H?I:1-z,0,1);return f.refreshedUponExpiration&&I>=1&&(f.refreshedUponExpiration=!1),n?{opacity:1,mix:1-Y}:{opacity:Y,mix:0}}return{opacity:1,mix:0}}const wi=new c.Color(1,0,0,1),gl=new c.Color(0,1,0,1),Qo=new c.Color(0,0,1,1),mu=new c.Color(1,0,1,1),es=new c.Color(0,1,1,1);function As(f,n,s,h){ba(f,0,n+s/2,f.transform.width,s,h)}function wa(f,n,s,h){ba(f,n-s/2,0,s,f.transform.height,h)}function ba(f,n,s,h,m,b){const T=f.context,C=T.gl;C.enable(C.SCISSOR_TEST),C.scissor(n*f.pixelRatio,s*f.pixelRatio,h*f.pixelRatio,m*f.pixelRatio),T.clear({color:b}),C.disable(C.SCISSOR_TEST)}function yl(f,n,s){const h=f.context,m=h.gl,b=s.posMatrix,T=f.useProgram("debug"),C=ft.disabled,I=Dn.disabled,z=f.colorModeForRenderPass(),R="$debug",B=f.style.terrain&&f.style.terrain.getTerrainData(s);h.activeTexture.set(m.TEXTURE0),f.emptyTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE);const H=n.getTileByID(s.key).latestRawTileData,Y=Math.floor((H&&H.byteLength||0)/1024),X=n.getTile(s).tileSize,Z=512/Math.min(X,512)*(s.overscaledZ/f.transform.zoom)*.5;let se=s.canonical.toString();s.overscaledZ!==s.canonical.z&&(se+=` => ${s.overscaledZ}`),function(ge,xe){ge.initDebugOverlayCanvas();const te=ge.debugOverlayCanvas,Te=ge.context.gl,Se=ge.debugOverlayCanvas.getContext("2d");Se.clearRect(0,0,te.width,te.height),Se.shadowColor="white",Se.shadowBlur=2,Se.lineWidth=1.5,Se.strokeStyle="white",Se.textBaseline="top",Se.font="bold 36px Open Sans, sans-serif",Se.fillText(xe,5,5),Se.strokeText(xe,5,5),ge.debugOverlayTexture.update(te),ge.debugOverlayTexture.bind(Te.LINEAR,Te.CLAMP_TO_EDGE)}(f,`${se} ${Y}kB`),T.draw(h,m.TRIANGLES,C,I,Un.alphaBlended,Mn.disabled,uo(b,c.Color.transparent,Z),null,R,f.debugBuffer,f.quadTriangleIndexBuffer,f.debugSegments),T.draw(h,m.LINE_STRIP,C,I,z,Mn.disabled,uo(b,c.Color.red),B,R,f.debugBuffer,f.tileBorderIndexBuffer,f.debugSegments)}function ts(f,n,s){const h=f.context,m=h.gl,b=f.colorModeForRenderPass(),T=new ft(m.LEQUAL,ft.ReadWrite,f.depthRangeFor3D),C=f.useProgram("terrain"),I=n.getTerrainMesh(),z=n.getTerrainData(s.tileID);h.bindFramebuffer.set(null),h.viewport.set([0,0,f.width,f.height]),h.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,n.getRTTFramebuffer().colorAttachment.get());const R=f.transform.calculatePosMatrix(s.tileID.toUnwrapped());C.draw(h,m.TRIANGLES,T,Dn.disabled,b,Mn.backCCW,{u_matrix:R,u_texture:0},z,"terrain",I.vertexBuffer,I.indexBuffer,I.segments)}function _c(f,n,s,h){const m=f.context,b=s.tileSize*n.qualityFactor;s.textures[h]||(s.textures[h]=f.getTileTexture(b)||new J(m,{width:b,height:b,data:null},m.gl.RGBA),s.textures[h].bind(m.gl.LINEAR,m.gl.CLAMP_TO_EDGE),h===0&&n.sourceCache.renderHistory.unshift(s.tileID.key));const T=n.getRTTFramebuffer();T.colorAttachment.set(s.textures[h].texture),m.bindFramebuffer.set(T.framebuffer),m.viewport.set([0,0,b,b])}class vl{constructor(n){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=n,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=n.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const n=this.painter.style,s=n.terrain;for(const h in n.sourceCaches){this._coordsDescendingInv[h]={};const m=n.sourceCaches[h].getVisibleCoordinates();for(const b of m){const T=s.sourceCache.getTerrainCoords(b);for(const C in T)this._coordsDescendingInv[h][C]||(this._coordsDescendingInv[h][C]=[]),this._coordsDescendingInv[h][C].push(T[C])}}for(const h of n._order){const m=n._layers[h],b=m.source;if(this._renderToTexture[m.type]&&!this._coordsDescendingInvStr[b]){this._coordsDescendingInvStr[b]={};for(const T in this._coordsDescendingInv[b])this._coordsDescendingInvStr[b][T]=this._coordsDescendingInv[b][T].map(C=>C.key).sort().join()}}return this._renderableTiles.forEach(h=>{for(const m in this._coordsDescendingInvStr){const b=this._coordsDescendingInvStr[m][h.tileID.key];b&&b!==h.textureCoords[m]&&h.clearTextures(this.painter),s.needsRerender(m,h.tileID)&&h.clearTextures(this.painter)}this._rerender[h.tileID.key]=!h.textures.length}),s.clearRerenderCache(),s.sourceCache.removeOutdated(this.painter),this}renderLayer(n){const s=n.type,h=this.painter,m=h.style._order,b=h.currentLayer,T=b+1===m.length;if(this._renderToTexture[s]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=s,this._stacks[this._stacks.length-1].push(m[b]),!T))return!0;if(this._renderToTexture[this._prevType]||s==="hillshade"||this._renderToTexture[s]&&T){this._prevType=s;const C=this._stacks.length-1,I=this._stacks[C]||[];for(const z of this._renderableTiles){if(_c(h,h.style.terrain,z,C),this._rerender[z.tileID.key]){h.context.clear({color:c.Color.transparent});for(let R=0;R<I.length;R++){const B=h.style._layers[I[R]],H=B.source?this._coordsDescendingInv[B.source][z.tileID.key]:[z.tileID];h._renderTileClippingMasks(B,H),h.renderLayer(h,h.style.sourceCaches[B.source],B,H),B.source&&(z.textureCoords[B.source]=this._coordsDescendingInvStr[B.source][z.tileID.key])}}ts(h,h.style.terrain,z)}if(s==="hillshade"){this._stacks.push([m[b]]);for(const z of this._renderableTiles){const R=this._coordsDescendingInv[n.source][z.tileID.key];_c(h,h.style.terrain,z,this._stacks.length-1),h.context.clear({color:c.Color.transparent}),h._renderTileClippingMasks(n,R),h.renderLayer(h,h.style.sourceCaches[n.source],n,R),ts(h,h.style.terrain,z)}return!0}return this._renderToTexture[s]}return!1}}const xl={symbol:function(f,n,s,h,m){if(f.renderPass!=="translucent")return;const b=Dn.disabled,T=f.colorModeForRenderPass();s.layout.get("text-variable-anchor")&&function(C,I,z,R,B,H,Y){const X=I.transform,Z=B==="map",se=H==="map";for(const ge of C){const xe=R.getTile(ge),te=xe.getBucket(z);if(!te||!te.text||!te.text.segments.get().length)continue;const Te=c.evaluateSizeForZoom(te.textSizeData,X.zoom),Se=$t(xe,1,I.transform.zoom),Pe=ir(ge.posMatrix,se,Z,I.transform,Se),Re=z.layout.get("icon-text-fit")!=="none"&&te.hasIconData();if(Te){const He=Math.pow(2,X.zoom-xe.tileID.overscaledZ);uh(te,Z,se,Y,X,Pe,ge.posMatrix,He,Te,Re,I.style.terrain?(ze,at)=>I.style.terrain.getElevation(ge,ze,at):null)}}}(h,f,s,n,s.layout.get("text-rotation-alignment"),s.layout.get("text-pitch-alignment"),m),s.paint.get("icon-opacity").constantOr(1)!==0&&Is(f,n,s,h,!1,s.paint.get("icon-translate"),s.paint.get("icon-translate-anchor"),s.layout.get("icon-rotation-alignment"),s.layout.get("icon-pitch-alignment"),s.layout.get("icon-keep-upright"),b,T),s.paint.get("text-opacity").constantOr(1)!==0&&Is(f,n,s,h,!0,s.paint.get("text-translate"),s.paint.get("text-translate-anchor"),s.layout.get("text-rotation-alignment"),s.layout.get("text-pitch-alignment"),s.layout.get("text-keep-upright"),b,T),n.map.showCollisionBoxes&&(du(f,n,s,h,s.paint.get("text-translate"),s.paint.get("text-translate-anchor"),!0),du(f,n,s,h,s.paint.get("icon-translate"),s.paint.get("icon-translate-anchor"),!1))},circle:function(f,n,s,h){if(f.renderPass!=="translucent")return;const m=s.paint.get("circle-opacity"),b=s.paint.get("circle-stroke-width"),T=s.paint.get("circle-stroke-opacity"),C=!s.layout.get("circle-sort-key").isConstant();if(m.constantOr(1)===0&&(b.constantOr(1)===0||T.constantOr(1)===0))return;const I=f.context,z=I.gl,R=f.depthModeForSublayer(0,ft.ReadOnly),B=Dn.disabled,H=f.colorModeForRenderPass(),Y=[];for(let X=0;X<h.length;X++){const Z=h[X],se=n.getTile(Z),ge=se.getBucket(s);if(!ge)continue;const xe=ge.programConfigurations.get(s.id),te=f.useProgram("circle",xe),Te=ge.layoutVertexBuffer,Se=ge.indexBuffer,Pe=f.style.terrain&&f.style.terrain.getTerrainData(Z),Re={programConfiguration:xe,program:te,layoutVertexBuffer:Te,indexBuffer:Se,uniformValues:xi(f,Z,se,s),terrainData:Pe};if(C){const He=ge.segments.get();for(const ze of He)Y.push({segments:new c.SegmentVector([ze]),sortKey:ze.sortKey,state:Re})}else Y.push({segments:ge.segments,sortKey:0,state:Re})}C&&Y.sort((X,Z)=>X.sortKey-Z.sortKey);for(const X of Y){const{programConfiguration:Z,program:se,layoutVertexBuffer:ge,indexBuffer:xe,uniformValues:te,terrainData:Te}=X.state;se.draw(I,z.TRIANGLES,R,B,H,Mn.disabled,te,Te,s.id,ge,xe,X.segments,s.paint,f.transform.zoom,Z)}},heatmap:function(f,n,s,h){if(s.paint.get("heatmap-opacity")!==0)if(f.renderPass==="offscreen"){const m=f.context,b=m.gl,T=Dn.disabled,C=new Un([b.ONE,b.ONE],c.Color.transparent,[!0,!0,!0,!0]);(function(I,z,R){const B=I.gl;I.activeTexture.set(B.TEXTURE1),I.viewport.set([0,0,z.width/4,z.height/4]);let H=R.heatmapFbo;if(H)B.bindTexture(B.TEXTURE_2D,H.colorAttachment.get()),I.bindFramebuffer.set(H.framebuffer);else{const Y=B.createTexture();B.bindTexture(B.TEXTURE_2D,Y),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_S,B.CLAMP_TO_EDGE),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_T,B.CLAMP_TO_EDGE),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MIN_FILTER,B.LINEAR),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MAG_FILTER,B.LINEAR),H=R.heatmapFbo=I.createFramebuffer(z.width/4,z.height/4,!1),function(X,Z,se,ge){const xe=X.gl;xe.texImage2D(xe.TEXTURE_2D,0,xe.RGBA,Z.width/4,Z.height/4,0,xe.RGBA,X.extRenderToTextureHalfFloat?X.extTextureHalfFloat.HALF_FLOAT_OES:xe.UNSIGNED_BYTE,null),ge.colorAttachment.set(se)}(I,z,Y,H)}})(m,f,s),m.clear({color:c.Color.transparent});for(let I=0;I<h.length;I++){const z=h[I];if(n.hasRenderableParent(z))continue;const R=n.getTile(z),B=R.getBucket(s);if(!B)continue;const H=B.programConfigurations.get(s.id),Y=f.useProgram("heatmap",H),{zoom:X}=f.transform;Y.draw(m,b.TRIANGLES,ft.disabled,T,C,Mn.disabled,ua(z.posMatrix,R,X,s.paint.get("heatmap-intensity")),null,s.id,B.layoutVertexBuffer,B.indexBuffer,B.segments,s.paint,f.transform.zoom,H)}m.viewport.set([0,0,f.width,f.height])}else f.renderPass==="translucent"&&(f.context.setColorMode(f.colorModeForRenderPass()),function(m,b){const T=m.context,C=T.gl,I=b.heatmapFbo;if(!I)return;T.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,I.colorAttachment.get()),T.activeTexture.set(C.TEXTURE1);let z=b.colorRampTexture;z||(z=b.colorRampTexture=new J(T,b.colorRamp,C.RGBA)),z.bind(C.LINEAR,C.CLAMP_TO_EDGE),m.useProgram("heatmapTexture").draw(T,C.TRIANGLES,ft.disabled,Dn.disabled,m.colorModeForRenderPass(),Mn.disabled,((R,B,H,Y)=>{const X=c.create();c.ortho(X,0,R.width,R.height,0,0,1);const Z=R.context.gl;return{u_matrix:X,u_world:[Z.drawingBufferWidth,Z.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:B.paint.get("heatmap-opacity")}})(m,b),null,b.id,m.viewportBuffer,m.quadTriangleIndexBuffer,m.viewportSegments,b.paint,m.transform.zoom)}(f,s))},line:function(f,n,s,h){if(f.renderPass!=="translucent")return;const m=s.paint.get("line-opacity"),b=s.paint.get("line-width");if(m.constantOr(1)===0||b.constantOr(1)===0)return;const T=f.depthModeForSublayer(0,ft.ReadOnly),C=f.colorModeForRenderPass(),I=s.paint.get("line-dasharray"),z=s.paint.get("line-pattern"),R=z.constantOr(1),B=s.paint.get("line-gradient"),H=s.getCrossfadeParameters(),Y=R?"linePattern":I?"lineSDF":B?"lineGradient":"line",X=f.context,Z=X.gl;let se=!0;for(const ge of h){const xe=n.getTile(ge);if(R&&!xe.patternsLoaded())continue;const te=xe.getBucket(s);if(!te)continue;const Te=te.programConfigurations.get(s.id),Se=f.context.program.get(),Pe=f.useProgram(Y,Te),Re=se||Pe.program!==Se,He=f.style.terrain&&f.style.terrain.getTerrainData(ge),ze=z.constantOr(null);if(ze&&xe.imageAtlas){const st=xe.imageAtlas,Dt=st.patternPositions[ze.to.toString()],Gt=st.patternPositions[ze.from.toString()];Dt&&Gt&&Te.setConstantPatternPositions(Dt,Gt)}const at=He?ge:null,et=R?xs(f,xe,s,H,at):I?zn(f,xe,s,I,H,at):B?da(f,xe,s,te.lineClipsArray.length,at):Wo(f,xe,s,at);if(R)X.activeTexture.set(Z.TEXTURE0),xe.imageAtlasTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),Te.updatePaintBuffers(H);else if(I&&(Re||f.lineAtlas.dirty))X.activeTexture.set(Z.TEXTURE0),f.lineAtlas.bind(X);else if(B){const st=te.gradients[s.id];let Dt=st.texture;if(s.gradientVersion!==st.version){let Gt=256;if(s.stepInterpolant){const wt=n.getSource().maxzoom,xn=ge.canonical.z===wt?Math.ceil(1<<f.transform.maxZoom-ge.canonical.z):1;Gt=c.clamp(c.nextPowerOfTwo(te.maxLineLength/c.EXTENT*1024*xn),256,X.maxTextureSize)}st.gradient=c.renderColorRamp({expression:s.gradientExpression(),evaluationKey:"lineProgress",resolution:Gt,image:st.gradient||void 0,clips:te.lineClipsArray}),st.texture?st.texture.update(st.gradient):st.texture=new J(X,st.gradient,Z.RGBA),st.version=s.gradientVersion,Dt=st.texture}X.activeTexture.set(Z.TEXTURE0),Dt.bind(s.stepInterpolant?Z.NEAREST:Z.LINEAR,Z.CLAMP_TO_EDGE)}Pe.draw(X,Z.TRIANGLES,T,f.stencilModeForClipping(ge),C,Mn.disabled,et,He,s.id,te.layoutVertexBuffer,te.indexBuffer,te.segments,s.paint,f.transform.zoom,Te,te.layoutVertexBuffer2),se=!1}},fill:function(f,n,s,h){const m=s.paint.get("fill-color"),b=s.paint.get("fill-opacity");if(b.constantOr(1)===0)return;const T=f.colorModeForRenderPass(),C=s.paint.get("fill-pattern"),I=f.opaquePassEnabledForLayer()&&!C.constantOr(1)&&m.constantOr(c.Color.transparent).a===1&&b.constantOr(0)===1?"opaque":"translucent";if(f.renderPass===I){const z=f.depthModeForSublayer(1,f.renderPass==="opaque"?ft.ReadWrite:ft.ReadOnly);pl(f,n,s,h,z,T,!1)}if(f.renderPass==="translucent"&&s.paint.get("fill-antialias")){const z=f.depthModeForSublayer(s.getPaintProperty("fill-outline-color")?2:0,ft.ReadOnly);pl(f,n,s,h,z,T,!0)}},"fill-extrusion":function(f,n,s,h){const m=s.paint.get("fill-extrusion-opacity");if(m!==0&&f.renderPass==="translucent"){const b=new ft(f.context.gl.LEQUAL,ft.ReadWrite,f.depthRangeFor3D);if(m!==1||s.paint.get("fill-extrusion-pattern").constantOr(1))_a(f,n,s,h,b,Dn.disabled,Un.disabled),_a(f,n,s,h,b,f.stencilModeFor3D(),f.colorModeForRenderPass());else{const T=f.colorModeForRenderPass();_a(f,n,s,h,b,Dn.disabled,T)}}},hillshade:function(f,n,s,h){if(f.renderPass!=="offscreen"&&f.renderPass!=="translucent")return;const m=f.context,b=f.depthModeForSublayer(0,ft.ReadOnly),T=f.colorModeForRenderPass(),[C,I]=f.renderPass==="translucent"?f.stencilConfigForOverlap(h):[{},h];for(const z of I){const R=n.getTile(z);R.needsHillshadePrepare!==void 0&&R.needsHillshadePrepare&&f.renderPass==="offscreen"?fl(f,R,s,b,Dn.disabled,T):f.renderPass==="translucent"&&fu(f,z,R,s,b,C[z.overscaledZ],T)}m.viewport.set([0,0,f.width,f.height])},raster:function(f,n,s,h){if(f.renderPass!=="translucent"||s.paint.get("raster-opacity")===0||!h.length)return;const m=f.context,b=m.gl,T=n.getSource(),C=f.useProgram("raster"),I=f.colorModeForRenderPass(),[z,R]=T instanceof lt?[{},h]:f.stencilConfigForOverlap(h),B=R[R.length-1].overscaledZ,H=!f.options.moving;for(const Y of R){const X=f.depthModeForSublayer(Y.overscaledZ-B,s.paint.get("raster-opacity")===1?ft.ReadWrite:ft.ReadOnly,b.LESS),Z=n.getTile(Y);Z.registerFadeDuration(s.paint.get("raster-fade-duration"));const se=n.findLoadedParent(Y,0),ge=ml(Z,se,n,s,f.transform,f.style.terrain);let xe,te;const Te=s.paint.get("raster-resampling")==="nearest"?b.NEAREST:b.LINEAR;m.activeTexture.set(b.TEXTURE0),Z.texture.bind(Te,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST),m.activeTexture.set(b.TEXTURE1),se?(se.texture.bind(Te,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST),xe=Math.pow(2,se.tileID.overscaledZ-Z.tileID.overscaledZ),te=[Z.tileID.canonical.x*xe%1,Z.tileID.canonical.y*xe%1]):Z.texture.bind(Te,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST);const Se=f.style.terrain&&f.style.terrain.getTerrainData(Y),Pe=Se?Y:null,Re=Pe?Pe.posMatrix:f.transform.calculatePosMatrix(Y.toUnwrapped(),H),He=Hi(Re,te||[0,0],xe||1,ge,s);T instanceof lt?C.draw(m,b.TRIANGLES,X,Dn.disabled,I,Mn.disabled,He,Se,s.id,T.boundsBuffer,f.quadTriangleIndexBuffer,T.boundsSegments):C.draw(m,b.TRIANGLES,X,z[Y.overscaledZ],I,Mn.disabled,He,Se,s.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)}},background:function(f,n,s,h){const m=s.paint.get("background-color"),b=s.paint.get("background-opacity");if(b===0)return;const T=f.context,C=T.gl,I=f.transform,z=I.tileSize,R=s.paint.get("background-pattern");if(f.isPatternMissing(R))return;const B=!R&&m.a===1&&b===1&&f.opaquePassEnabledForLayer()?"opaque":"translucent";if(f.renderPass!==B)return;const H=Dn.disabled,Y=f.depthModeForSublayer(0,B==="opaque"?ft.ReadWrite:ft.ReadOnly),X=f.colorModeForRenderPass(),Z=f.useProgram(R?"backgroundPattern":"background"),se=h||I.coveringTiles({tileSize:z,terrain:f.style.terrain});R&&(T.activeTexture.set(C.TEXTURE0),f.imageManager.bind(f.context));const ge=s.getCrossfadeParameters();for(const xe of se){const te=h?xe.posMatrix:f.transform.calculatePosMatrix(xe.toUnwrapped()),Te=R?cc(te,b,f,R,{tileID:xe,tileSize:z},ge):ho(te,b,m),Se=f.style.terrain&&f.style.terrain.getTerrainData(xe);Z.draw(T,C.TRIANGLES,Y,H,X,Mn.disabled,Te,Se,s.id,f.tileExtentBuffer,f.quadTriangleIndexBuffer,f.tileExtentSegments)}},debug:function(f,n,s){for(let h=0;h<s.length;h++)yl(f,n,s[h])},custom:function(f,n,s){const h=f.context,m=s.implementation;if(f.renderPass==="offscreen"){const b=m.prerender;b&&(f.setCustomLayerDefaults(),h.setColorMode(f.colorModeForRenderPass()),b.call(m,h.gl,f.transform.customLayerMatrix()),h.setDirty(),f.setBaseState())}else if(f.renderPass==="translucent"){f.setCustomLayerDefaults(),h.setColorMode(f.colorModeForRenderPass()),h.setStencilMode(Dn.disabled);const b=m.renderingMode==="3d"?new ft(f.context.gl.LEQUAL,ft.ReadWrite,f.depthRangeFor3D):f.depthModeForSublayer(0,ft.ReadOnly);h.setDepthMode(b),m.render(h.gl,f.transform.customLayerMatrix()),h.setDirty(),f.setBaseState(),h.bindFramebuffer.set(null)}}};class wc{constructor(n,s){this.context=new yc(n),this.transform=s,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:c.create(),renderTime:0},this.setup(),this.numSublayers=Ft.maxUnderzooming+Ft.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new qt,this.gpuTimers={}}resize(n,s,h){if(this.width=n*h,this.height=s*h,this.pixelRatio=h,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style._order)this.style._layers[m].resize()}setup(){const n=this.context,s=new c.PosArray;s.emplaceBack(0,0),s.emplaceBack(c.EXTENT,0),s.emplaceBack(0,c.EXTENT),s.emplaceBack(c.EXTENT,c.EXTENT),this.tileExtentBuffer=n.createVertexBuffer(s,Wt.members),this.tileExtentSegments=c.SegmentVector.simpleSegment(0,0,4,2);const h=new c.PosArray;h.emplaceBack(0,0),h.emplaceBack(c.EXTENT,0),h.emplaceBack(0,c.EXTENT),h.emplaceBack(c.EXTENT,c.EXTENT),this.debugBuffer=n.createVertexBuffer(h,Wt.members),this.debugSegments=c.SegmentVector.simpleSegment(0,0,4,5);const m=new c.RasterBoundsArray;m.emplaceBack(0,0,0,0),m.emplaceBack(c.EXTENT,0,c.EXTENT,0),m.emplaceBack(0,c.EXTENT,0,c.EXTENT),m.emplaceBack(c.EXTENT,c.EXTENT,c.EXTENT,c.EXTENT),this.rasterBoundsBuffer=n.createVertexBuffer(m,We.members),this.rasterBoundsSegments=c.SegmentVector.simpleSegment(0,0,4,2);const b=new c.PosArray;b.emplaceBack(0,0),b.emplaceBack(1,0),b.emplaceBack(0,1),b.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(b,Wt.members),this.viewportSegments=c.SegmentVector.simpleSegment(0,0,4,2);const T=new c.LineStripIndexArray;T.emplaceBack(0),T.emplaceBack(1),T.emplaceBack(3),T.emplaceBack(2),T.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(T);const C=new c.TriangleIndexArray;C.emplaceBack(0,1,2),C.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(C),this.emptyTexture=new J(n,{width:1,height:1,data:new Uint8Array([0,0,0,0])},n.gl.RGBA);const I=this.context.gl;this.stencilClearMode=new Dn({func:I.ALWAYS,mask:0},0,255,I.ZERO,I.ZERO,I.ZERO)}clearStencil(){const n=this.context,s=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const h=c.create();c.ortho(h,0,this.width,this.height,0,0,1),c.scale(h,h,[s.drawingBufferWidth,s.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(n,s.TRIANGLES,ft.disabled,this.stencilClearMode,Un.disabled,Mn.disabled,fn(h),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(n,s){if(this.currentStencilSource===n.source||!n.isTileClipped()||!s||!s.length)return;this.currentStencilSource=n.source;const h=this.context,m=h.gl;this.nextStencilID+s.length>256&&this.clearStencil(),h.setColorMode(Un.disabled),h.setDepthMode(ft.disabled);const b=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const T of s){const C=this._tileClippingMaskIDs[T.key]=this.nextStencilID++,I=this.style.terrain&&this.style.terrain.getTerrainData(T);b.draw(h,m.TRIANGLES,ft.disabled,new Dn({func:m.ALWAYS,mask:0},C,255,m.KEEP,m.KEEP,m.REPLACE),Un.disabled,Mn.disabled,fn(T.posMatrix),I,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const n=this.nextStencilID++,s=this.context.gl;return new Dn({func:s.NOTEQUAL,mask:255},n,255,s.KEEP,s.KEEP,s.REPLACE)}stencilModeForClipping(n){const s=this.context.gl;return new Dn({func:s.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,s.KEEP,s.KEEP,s.REPLACE)}stencilConfigForOverlap(n){const s=this.context.gl,h=n.sort((T,C)=>C.overscaledZ-T.overscaledZ),m=h[h.length-1].overscaledZ,b=h[0].overscaledZ-m+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const T={};for(let C=0;C<b;C++)T[C+m]=new Dn({func:s.GEQUAL,mask:255},C+this.nextStencilID,255,s.KEEP,s.KEEP,s.REPLACE);return this.nextStencilID+=b,[T,h]}return[{[m]:Dn.disabled},h]}colorModeForRenderPass(){const n=this.context.gl;return this._showOverdrawInspector?new Un([n.CONSTANT_COLOR,n.ONE],new c.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Un.unblended:Un.alphaBlended}depthModeForSublayer(n,s,h){if(!this.opaquePassEnabledForLayer())return ft.disabled;const m=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new ft(h||this.context.gl.LEQUAL,s,[m,m])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(n,s){this.style=n,this.options=s,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(c.exported.now()),this.imageManager.beginFrame();const h=this.style._order,m=this.style.sourceCaches,b=this.style.terrain&&new vl(this);for(const z in m){const R=m[z];R.used&&R.prepare(this.context)}const T={},C={},I={};for(const z in m){const R=m[z];T[z]=R.getVisibleCoordinates(),C[z]=T[z].slice().reverse(),I[z]=R.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let z=0;z<h.length;z++)if(this.style._layers[h[z]].is3D()){this.opaquePassCutoff=z;break}if(b){this.opaquePassCutoff=0;const z=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!c.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||z.length)&&(c.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(R,B){const H=R.context,Y=H.gl,X=Un.unblended,Z=new ft(Y.LEQUAL,ft.ReadWrite,[0,1]),se=B.getTerrainMesh(),ge=B.sourceCache.getRenderableTiles(),xe=R.useProgram("terrainDepth");H.bindFramebuffer.set(B.getFramebuffer("depth").framebuffer),H.viewport.set([0,0,R.width/devicePixelRatio,R.height/devicePixelRatio]),H.clear({color:c.Color.transparent,depth:1});for(const te of ge){const Te=B.getTerrainData(te.tileID),Se=R.transform.calculatePosMatrix(te.tileID.toUnwrapped());xe.draw(H,Y.TRIANGLES,Z,Dn.disabled,X,Mn.backCCW,{u_matrix:Se},Te,"terrain",se.vertexBuffer,se.indexBuffer,se.segments)}H.bindFramebuffer.set(null),H.viewport.set([0,0,R.width,R.height])}(this,this.style.terrain),function(R,B){const H=R.context,Y=H.gl,X=Un.unblended,Z=new ft(Y.LEQUAL,ft.ReadWrite,[0,1]),se=B.getTerrainMesh(),ge=B.getCoordsTexture(),xe=B.sourceCache.getRenderableTiles(),te=R.useProgram("terrainCoords");H.bindFramebuffer.set(B.getFramebuffer("coords").framebuffer),H.viewport.set([0,0,R.width/devicePixelRatio,R.height/devicePixelRatio]),H.clear({color:c.Color.transparent,depth:1}),B.coordsIndex=[];for(const Te of xe){const Se=B.getTerrainData(Te.tileID);H.activeTexture.set(Y.TEXTURE0),Y.bindTexture(Y.TEXTURE_2D,ge.texture);const Pe=R.transform.calculatePosMatrix(Te.tileID.toUnwrapped());te.draw(H,Y.TRIANGLES,Z,Dn.disabled,X,Mn.backCCW,{u_matrix:Pe,u_terrain_coords_id:(255-B.coordsIndex.length)/255,u_texture:0},Se,"terrain",se.vertexBuffer,se.indexBuffer,se.segments),B.coordsIndex.push(Te.tileID.key)}H.bindFramebuffer.set(null),H.viewport.set([0,0,R.width,R.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const z of h){const R=this.style._layers[z];if(!R.hasOffscreenPass()||R.isHidden(this.transform.zoom))continue;const B=C[R.source];(R.type==="custom"||B.length)&&this.renderLayer(this,m[R.source],R,B)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:s.showOverdrawInspector?c.Color.black:c.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=s.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],!b)for(this.renderPass="opaque",this.currentLayer=h.length-1;this.currentLayer>=0;this.currentLayer--){const z=this.style._layers[h[this.currentLayer]],R=m[z.source],B=T[z.source];this._renderTileClippingMasks(z,B),this.renderLayer(this,R,z,B)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<h.length;this.currentLayer++){const z=this.style._layers[h[this.currentLayer]],R=m[z.source];if(b&&b.renderLayer(z))continue;const B=(z.type==="symbol"?I:C)[z.source];this._renderTileClippingMasks(z,T[z.source]),this.renderLayer(this,R,z,B)}if(this.options.showTileBoundaries){let z,R;Object.values(this.style._layers).forEach(B=>{B.source&&!B.isHidden(this.transform.zoom)&&(B.source!==(R&&R.id)&&(R=this.style.sourceCaches[B.source]),(!z||z.getSource().maxzoom<R.getSource().maxzoom)&&(z=R))}),z&&xl.debug(this,z,z.getVisibleCoordinates())}this.options.showPadding&&function(z){const R=z.transform.padding;As(z,z.transform.height-(R.top||0),3,wi),As(z,R.bottom||0,3,gl),wa(z,R.left||0,3,Qo),wa(z,z.transform.width-(R.right||0),3,mu);const B=z.transform.centerPoint;(function(H,Y,X,Z){ba(H,Y-1,X-10,2,20,Z),ba(H,Y-10,X-1,20,2,Z)})(z,B.x,z.transform.height-B.y,es)}(this),this.context.setDefault()}renderLayer(n,s,h,m){h.isHidden(this.transform.zoom)||(h.type==="background"||h.type==="custom"||(m||[]).length)&&(this.id=h.id,this.gpuTimingStart(h),xl[h.type](n,s,h,m,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(n){if(!this.options.gpuTiming)return;const s=this.context.extTimerQuery;let h=this.gpuTimers[n.id];h||(h=this.gpuTimers[n.id]={calls:0,cpuTime:0,query:s.createQueryEXT()}),h.calls++,s.beginQueryEXT(s.TIME_ELAPSED_EXT,h.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const n=this.context.extTimerQuery;n.endQueryEXT(n.TIME_ELAPSED_EXT)}collectGpuTimers(){const n=this.gpuTimers;return this.gpuTimers={},n}queryGpuTimers(n){const s={};for(const h in n){const m=n[h],b=this.context.extTimerQuery,T=b.getQueryObjectEXT(m.query,b.QUERY_RESULT_EXT)/1e6;b.deleteQueryEXT(m.query),s[h]=T}return s}translatePosMatrix(n,s,h,m,b){if(!h[0]&&!h[1])return n;const T=b?m==="map"?this.transform.angle:0:m==="viewport"?-this.transform.angle:0;if(T){const z=Math.sin(T),R=Math.cos(T);h=[h[0]*R-h[1]*z,h[0]*z+h[1]*R]}const C=[b?h[0]:$t(s,h[0],this.transform.zoom),b?h[1]:$t(s,h[1],this.transform.zoom),0],I=new Float32Array(16);return c.translate(I,n,C),I}saveTileTexture(n){const s=this._tileTextures[n.size[0]];s?s.push(n):this._tileTextures[n.size[0]]=[n]}getTileTexture(n){const s=this._tileTextures[n];return s&&s.length>0?s.pop():null}isPatternMissing(n){if(!n)return!1;if(!n.from||!n.to)return!0;const s=this.imageManager.getPattern(n.from.toString()),h=this.imageManager.getPattern(n.to.toString());return!s||!h}useProgram(n,s){this.cache=this.cache||{};const h=n+(s?s.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[h]||(this.cache[h]=new il(this.context,n,aa[n],s,al[n],this._showOverdrawInspector,this.style.terrain)),this.cache[h]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new J(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class Sa{constructor(n,s){this.points=n,this.planes=s}static fromInvProjectionMatrix(n,s,h){const m=Math.pow(2,h),b=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(C=>{const I=1/(C=c.transformMat4([],C,n))[3]/s*m;return c.mul$1(C,C,[I,I,1/C[3],I])}),T=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(C=>{const I=c.sub([],b[C[0]],b[C[1]]),z=c.sub([],b[C[2]],b[C[1]]),R=c.normalize([],c.cross([],I,z)),B=-c.dot(R,b[C[1]]);return R.concat(B)});return new Sa(b,T)}}class bi{constructor(n,s){this.min=n,this.max=s,this.center=c.scale$1([],c.add([],this.min,this.max),.5)}quadrant(n){const s=[n%2==0,n<2],h=c.clone$2(this.min),m=c.clone$2(this.max);for(let b=0;b<s.length;b++)h[b]=s[b]?this.min[b]:this.center[b],m[b]=s[b]?this.center[b]:this.max[b];return m[2]=this.max[2],new bi(h,m)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}intersects(n){const s=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let h=!0;for(let m=0;m<n.planes.length;m++){const b=n.planes[m];let T=0;for(let C=0;C<s.length;C++)c.dot$1(b,s[C])>=0&&T++;if(T===0)return 0;T!==s.length&&(h=!1)}if(h)return 2;for(let m=0;m<3;m++){let b=Number.MAX_VALUE,T=-Number.MAX_VALUE;for(let C=0;C<n.points.length;C++){const I=n.points[C][m]-this.min[m];b=Math.min(b,I),T=Math.max(T,I)}if(T<0||b>this.max[m]-this.min[m])return 0}return 1}}class Xi{constructor(n=0,s=0,h=0,m=0){if(isNaN(n)||n<0||isNaN(s)||s<0||isNaN(h)||h<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=s,this.left=h,this.right=m}interpolate(n,s,h){return s.top!=null&&n.top!=null&&(this.top=c.number(n.top,s.top,h)),s.bottom!=null&&n.bottom!=null&&(this.bottom=c.number(n.bottom,s.bottom,h)),s.left!=null&&n.left!=null&&(this.left=c.number(n.left,s.left,h)),s.right!=null&&n.right!=null&&(this.right=c.number(n.right,s.right,h)),this}getCenter(n,s){const h=c.clamp((this.left+n-this.right)/2,0,n),m=c.clamp((this.top+s-this.bottom)/2,0,s);return new c.pointGeometry(h,m)}equals(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right}clone(){return new Xi(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class _l{constructor(n,s,h,m,b){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=b===void 0||!!b,this._minZoom=n||0,this._maxZoom=s||22,this._minPitch=h??0,this._maxPitch=m??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new c.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Xi,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const n=new _l(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return n.tileSize=this.tileSize,n.latRange=this.latRange,n.width=this.width,n.height=this.height,n._center=this._center,n._elevation=this._elevation,n.zoom=this.zoom,n.angle=this.angle,n._fov=this._fov,n._pitch=this._pitch,n._unmodified=this._unmodified,n._edgeInsets=this._edgeInsets.clone(),n._calcMatrices(),n}get minZoom(){return this._minZoom}set minZoom(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))}get maxZoom(){return this._maxZoom}set maxZoom(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))}get minPitch(){return this._minPitch}set minPitch(n){this._minPitch!==n&&(this._minPitch=n,this.pitch=Math.max(this.pitch,n))}get maxPitch(){return this._maxPitch}set maxPitch(n){this._maxPitch!==n&&(this._maxPitch=n,this.pitch=Math.min(this.pitch,n))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new c.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(n){const s=-c.wrap(n,-180,180)*Math.PI/180;var h;this.angle!==s&&(this._unmodified=!1,this.angle=s,this._calcMatrices(),this.rotationMatrix=(h=new c.ARRAY_TYPE(4),c.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0),h[0]=1,h[3]=1,h),function(m,b,T){var C=b[0],I=b[1],z=b[2],R=b[3],B=Math.sin(T),H=Math.cos(T);m[0]=C*H+z*B,m[1]=I*H+R*B,m[2]=C*-B+z*H,m[3]=I*-B+R*H}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(n){const s=c.clamp(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==s&&(this._unmodified=!1,this._pitch=s,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=n/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(n){const s=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==s&&(this._unmodified=!1,this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(n){n!==this._elevation&&(this._elevation=n,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(n){return this._edgeInsets.equals(n)}interpolatePadding(n,s,h){this._unmodified=!1,this._edgeInsets.interpolate(n,s,h),this._constrain(),this._calcMatrices()}coveringZoomLevel(n){const s=(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize));return Math.max(0,s)}getVisibleUnwrappedCoordinates(n){const s=[new c.UnwrappedTileID(0,n)];if(this._renderWorldCopies){const h=this.pointCoordinate(new c.pointGeometry(0,0)),m=this.pointCoordinate(new c.pointGeometry(this.width,0)),b=this.pointCoordinate(new c.pointGeometry(this.width,this.height)),T=this.pointCoordinate(new c.pointGeometry(0,this.height)),C=Math.floor(Math.min(h.x,m.x,b.x,T.x)),I=Math.floor(Math.max(h.x,m.x,b.x,T.x)),z=1;for(let R=C-z;R<=I+z;R++)R!==0&&s.push(new c.UnwrappedTileID(R,n))}return s}coveringTiles(n){var s,h;let m=this.coveringZoomLevel(n);const b=m;if(n.minzoom!==void 0&&m<n.minzoom)return[];n.maxzoom!==void 0&&m>n.maxzoom&&(m=n.maxzoom);const T=this.pointCoordinate(this.getCameraPoint()),C=c.MercatorCoordinate.fromLngLat(this.center),I=Math.pow(2,m),z=[I*T.x,I*T.y,0],R=[I*C.x,I*C.y,0],B=Sa.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,m);let H=n.minzoom||0;!n.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(H=m);const Y=n.terrain?2/Math.min(this.tileSize,n.tileSize)*this.tileSize:3,X=te=>({aabb:new bi([te*I,0,0],[(te+1)*I,I,0]),zoom:0,x:0,y:0,wrap:te,fullyVisible:!1}),Z=[],se=[],ge=m,xe=n.reparseOverscaled?b:m;if(this._renderWorldCopies)for(let te=1;te<=3;te++)Z.push(X(-te)),Z.push(X(te));for(Z.push(X(0));Z.length>0;){const te=Z.pop(),Te=te.x,Se=te.y;let Pe=te.fullyVisible;if(!Pe){const st=te.aabb.intersects(B);if(st===0)continue;Pe=st===2}const Re=n.terrain?z:R,He=te.aabb.distanceX(Re),ze=te.aabb.distanceY(Re),at=Math.max(Math.abs(He),Math.abs(ze)),et=Y+(1<<ge-te.zoom)-2;if(te.zoom===ge||at>et&&te.zoom>=H){const st=ge-te.zoom,Dt=z[0]-.5-(Te<<st),Gt=z[1]-.5-(Se<<st);se.push({tileID:new c.OverscaledTileID(te.zoom===ge?xe:te.zoom,te.wrap,te.zoom,Te,Se),distanceSq:c.sqrLen([R[0]-.5-Te,R[1]-.5-Se]),tileDistanceToCamera:Math.sqrt(Dt*Dt+Gt*Gt)})}else for(let st=0;st<4;st++){const Dt=(Te<<1)+st%2,Gt=(Se<<1)+(st>>1),wt=te.zoom+1;let xn=te.aabb.quadrant(st);if(n.terrain){const nn=new c.OverscaledTileID(wt,te.wrap,wt,Dt,Gt),Qt=n.terrain.getMinMaxElevation(nn),en=(s=Qt.minElevation)!==null&&s!==void 0?s:this.elevation,rn=(h=Qt.maxElevation)!==null&&h!==void 0?h:this.elevation;xn=new bi([xn.min[0],xn.min[1],en],[xn.max[0],xn.max[1],rn])}Z.push({aabb:xn,zoom:wt,x:Dt,y:Gt,wrap:te.wrap,fullyVisible:Pe})}}return se.sort((te,Te)=>te.distanceSq-Te.distanceSq).map(te=>te.tileID)}resize(n,s){this.width=n,this.height=s,this.pixelsToGLUnits=[2/n,-2/s],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(n){return Math.pow(2,n)}scaleZoom(n){return Math.log(n)/Math.LN2}project(n){const s=c.clamp(n.lat,-this.maxValidLatitude,this.maxValidLatitude);return new c.pointGeometry(c.mercatorXfromLng(n.lng)*this.worldSize,c.mercatorYfromLat(s)*this.worldSize)}unproject(n){return new c.MercatorCoordinate(n.x/this.worldSize,n.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(n){this.freezeElevation||(this.elevation=n?this.getElevation(this._center,n):0)}getElevation(n,s){const h=c.MercatorCoordinate.fromLngLat(n),m=(1<<this.tileZoom)*c.EXTENT,b=h.x*m,T=h.y*m,C=Math.floor(b/c.EXTENT),I=Math.floor(T/c.EXTENT),z=new c.OverscaledTileID(this.tileZoom,0,this.tileZoom,C,I);return s.getElevation(z,b%c.EXTENT,T%c.EXTENT,c.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(n){const s=this.pointLocation(this.centerPoint,n),h=this.getElevation(s,n);if(!(this.elevation-h))return;const m=this.getCameraPosition(),b=c.MercatorCoordinate.fromLngLat(m.lngLat,m.altitude),T=c.MercatorCoordinate.fromLngLat(s,h),C=b.x-T.x,I=b.y-T.y,z=b.z-T.z,R=Math.sqrt(C*C+I*I+z*z),B=this.scaleZoom(this.cameraToCenterDistance/R/this.tileSize);this._elevation=h,this._center=s,this.zoom=B}setLocationAtPoint(n,s){const h=this.pointCoordinate(s),m=this.pointCoordinate(this.centerPoint),b=this.locationCoordinate(n),T=new c.MercatorCoordinate(b.x-(h.x-m.x),b.y-(h.y-m.y));this.center=this.coordinateLocation(T),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(n,s){return s?this.coordinatePoint(this.locationCoordinate(n),this.getElevation(n,s),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(n))}pointLocation(n,s){return this.coordinateLocation(this.pointCoordinate(n,s))}locationCoordinate(n){return c.MercatorCoordinate.fromLngLat(n)}coordinateLocation(n){return n&&n.toLngLat()}pointCoordinate(n,s){if(s){const H=s.pointCoordinate(n);if(H!=null)return H}const h=[n.x,n.y,0,1],m=[n.x,n.y,1,1];c.transformMat4(h,h,this.pixelMatrixInverse),c.transformMat4(m,m,this.pixelMatrixInverse);const b=h[3],T=m[3],C=h[1]/b,I=m[1]/T,z=h[2]/b,R=m[2]/T,B=z===R?0:(0-z)/(R-z);return new c.MercatorCoordinate(c.number(h[0]/b,m[0]/T,B)/this.worldSize,c.number(C,I,B)/this.worldSize)}coordinatePoint(n,s=0,h=this.pixelMatrix){const m=[n.x*this.worldSize,n.y*this.worldSize,s,1];return c.transformMat4(m,m,h),new c.pointGeometry(m[0]/m[3],m[1]/m[3])}getBounds(){const n=Math.max(0,this.height/2-this.getHorizon());return new c.LngLatBounds().extend(this.pointLocation(new c.pointGeometry(0,n))).extend(this.pointLocation(new c.pointGeometry(this.width,n))).extend(this.pointLocation(new c.pointGeometry(this.width,this.height))).extend(this.pointLocation(new c.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new c.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(n){n?(this.lngRange=[n.getWest(),n.getEast()],this.latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(n,s=!1){const h=n.key,m=s?this._alignedPosMatrixCache:this._posMatrixCache;if(m[h])return m[h];const b=n.canonical,T=this.worldSize/this.zoomScale(b.z),C=b.x+Math.pow(2,b.z)*n.wrap,I=c.identity(new Float64Array(16));return c.translate(I,I,[C*T,b.y*T,0]),c.scale(I,I,[T/c.EXTENT,T/c.EXTENT,1]),c.multiply(I,s?this.alignedProjMatrix:this.projMatrix,I),m[h]=new Float32Array(I),m[h]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let n,s,h,m,b=-90,T=90,C=-180,I=180;const z=this.size,R=this._unmodified;if(this.latRange){const Y=this.latRange;b=c.mercatorYfromLat(Y[1])*this.worldSize,T=c.mercatorYfromLat(Y[0])*this.worldSize,n=T-b<z.y?z.y/(T-b):0}if(this.lngRange){const Y=this.lngRange;C=c.wrap(c.mercatorXfromLng(Y[0])*this.worldSize,0,this.worldSize),I=c.wrap(c.mercatorXfromLng(Y[1])*this.worldSize,0,this.worldSize),I<C&&(I+=this.worldSize),s=I-C<z.x?z.x/(I-C):0}const B=this.point,H=Math.max(s||0,n||0);if(H)return this.center=this.unproject(new c.pointGeometry(s?(I+C)/2:B.x,n?(T+b)/2:B.y)),this.zoom+=this.scaleZoom(H),this._unmodified=R,void(this._constraining=!1);if(this.latRange){const Y=B.y,X=z.y/2;Y-X<b&&(m=b+X),Y+X>T&&(m=T-X)}if(this.lngRange){const Y=(C+I)/2,X=c.wrap(B.x,Y-this.worldSize/2,Y+this.worldSize/2),Z=z.x/2;X-Z<C&&(h=C+Z),X+Z>I&&(h=I-Z)}h===void 0&&m===void 0||(this.center=this.unproject(new c.pointGeometry(h!==void 0?h:B.x,m!==void 0?m:B.y)).wrap()),this._unmodified=R,this._constraining=!1}_calcMatrices(){if(!this.height)return;const n=this.centerOffset,s=this.point.x,h=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=c.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let m=c.identity(new Float64Array(16));c.scale(m,m,[this.width/2,-this.height/2,1]),c.translate(m,m,[1,-1,0]),this.labelPlaneMatrix=m,m=c.identity(new Float64Array(16)),c.scale(m,m,[1,-1,1]),c.translate(m,m,[-1,-1,0]),c.scale(m,m,[2/this.width,2/this.height,1]),this.glCoordMatrix=m,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const b=Math.PI/2+this._pitch,T=this._fov*(.5+n.y/this.height),C=Math.sin(T)*this.cameraToSeaLevelDistance/Math.sin(c.clamp(Math.PI-b-T,.01,Math.PI-.01)),I=this.getHorizon(),z=2*Math.atan(I/this.cameraToCenterDistance)*(.5+n.y/(2*I)),R=Math.sin(z)*this.cameraToSeaLevelDistance/Math.sin(c.clamp(Math.PI-b-z,.01,Math.PI-.01)),B=Math.cos(Math.PI/2-this._pitch)*C+this.cameraToSeaLevelDistance,H=Math.cos(Math.PI/2-this._pitch)*R+this.cameraToSeaLevelDistance,Y=1.01*Math.min(B,H),X=this.height/50;m=new Float64Array(16),c.perspective(m,this._fov,this.width/this.height,X,Y),m[8]=2*-n.x/this.width,m[9]=2*n.y/this.height,c.scale(m,m,[1,-1,1]),c.translate(m,m,[0,0,-this.cameraToCenterDistance]),c.rotateX(m,m,this._pitch),c.rotateZ(m,m,this.angle),c.translate(m,m,[-s,-h,0]),this.mercatorMatrix=c.scale([],m,[this.worldSize,this.worldSize,this.worldSize]),c.scale(m,m,[1,1,this._pixelPerMeter]),this.pixelMatrix=c.multiply(new Float64Array(16),this.labelPlaneMatrix,m),c.translate(m,m,[0,0,-this.elevation]),this.projMatrix=m,this.invProjMatrix=c.invert([],m),this.pixelMatrix3D=c.multiply(new Float64Array(16),this.labelPlaneMatrix,m);const Z=this.width%2/2,se=this.height%2/2,ge=Math.cos(this.angle),xe=Math.sin(this.angle),te=s-Math.round(s)+ge*Z+xe*se,Te=h-Math.round(h)+ge*se+xe*Z,Se=new Float64Array(m);if(c.translate(Se,Se,[te>.5?te-1:te,Te>.5?Te-1:Te,0]),this.alignedProjMatrix=Se,m=c.invert(new Float64Array(16),this.pixelMatrix),!m)throw new Error("failed to invert matrix");this.pixelMatrixInverse=m,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const n=this.pointCoordinate(new c.pointGeometry(0,0)),s=[n.x*this.worldSize,n.y*this.worldSize,0,1];return c.transformMat4(s,s,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.pointGeometry(0,n))}getCameraQueryGeometry(n){const s=this.getCameraPoint();if(n.length===1)return[n[0],s];{let h=s.x,m=s.y,b=s.x,T=s.y;for(const C of n)h=Math.min(h,C.x),m=Math.min(m,C.y),b=Math.max(b,C.x),T=Math.max(T,C.y);return[new c.pointGeometry(h,m),new c.pointGeometry(b,m),new c.pointGeometry(b,T),new c.pointGeometry(h,T),new c.pointGeometry(h,m)]}}}class Ea{constructor(n){this._hashName=n&&encodeURIComponent(n),c.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(s,h){let m=!1,b=null;const T=()=>{b=null,m&&(s(),b=setTimeout(T,300),m=!1)};return()=>(m=!0,b||T(),b)}(this._updateHashUnthrottled.bind(this))}addTo(n){return this._map=n,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(n){const s=this._map.getCenter(),h=Math.round(100*this._map.getZoom())/100,m=Math.ceil((h*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,m),T=Math.round(s.lng*b)/b,C=Math.round(s.lat*b)/b,I=this._map.getBearing(),z=this._map.getPitch();let R="";if(R+=n?`/${T}/${C}/${h}`:`${h}/${C}/${T}`,(I||z)&&(R+="/"+Math.round(10*I)/10),z&&(R+=`/${Math.round(z)}`),this._hashName){const B=this._hashName;let H=!1;const Y=window.location.hash.slice(1).split("&").map(X=>{const Z=X.split("=")[0];return Z===B?(H=!0,`${Z}=${R}`):X}).filter(X=>X);return H||Y.push(`${B}=${R}`),`#${Y.join("&")}`}return`#${R}`}_getCurrentHash(){const n=window.location.hash.replace("#","");if(this._hashName){let s;return n.split("&").map(h=>h.split("=")).forEach(h=>{h[0]===this._hashName&&(s=h)}),(s&&s[1]||"").split("/")}return n.split("/")}_onHashChange(){const n=this._getCurrentHash();if(n.length>=3&&!n.some(s=>isNaN(s))){const s=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(n[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+n[2],+n[1]],zoom:+n[0],bearing:s,pitch:+(n[4]||0)}),!0}return!1}_updateHashUnthrottled(){const n=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,n)}catch{}}}const Ta={linearity:.3,easing:c.bezier(0,0,.3,1)},bc=c.extend({deceleration:2500,maxSpeed:1400},Ta),wl=c.extend({deceleration:20,maxSpeed:1400},Ta),mo=c.extend({deceleration:1e3,maxSpeed:360},Ta),Sc=c.extend({deceleration:1e3,maxSpeed:90},Ta);class Ec{constructor(n){this._map=n,this.clear()}clear(){this._inertiaBuffer=[]}record(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:c.exported.now(),settings:n})}_drainInertiaBuffer(){const n=this._inertiaBuffer,s=c.exported.now();for(;n.length>0&&s-n[0].time>160;)n.shift()}_onMoveEnd(n){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const s={zoom:0,bearing:0,pitch:0,pan:new c.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)s.zoom+=b.zoomDelta||0,s.bearing+=b.bearingDelta||0,s.pitch+=b.pitchDelta||0,b.panDelta&&s.pan._add(b.panDelta),b.around&&(s.around=b.around),b.pinchAround&&(s.pinchAround=b.pinchAround);const h=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(s.pan.mag()){const b=ka(s.pan.mag(),h,c.extend({},bc,n||{}));m.offset=s.pan.mult(b.amount/s.pan.mag()),m.center=this._map.transform.center,Ls(m,b)}if(s.zoom){const b=ka(s.zoom,h,wl);m.zoom=this._map.transform.zoom+b.amount,Ls(m,b)}if(s.bearing){const b=ka(s.bearing,h,mo);m.bearing=this._map.transform.bearing+c.clamp(b.amount,-179,179),Ls(m,b)}if(s.pitch){const b=ka(s.pitch,h,Sc);m.pitch=this._map.transform.pitch+b.amount,Ls(m,b)}if(m.zoom||m.bearing){const b=s.pinchAround===void 0?s.around:s.pinchAround;m.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),c.extend(m,{noMoveStart:!0})}}function Ls(f,n){(!f.duration||f.duration<n.duration)&&(f.duration=n.duration,f.easing=n.easing)}function ka(f,n,s){const{maxSpeed:h,linearity:m,deceleration:b}=s,T=c.clamp(f*m/(n/1e3),-h,h),C=Math.abs(T)/(b*m);return{easing:s.easing,duration:1e3*C,amount:T*(C/2)}}class Qr extends c.Event{constructor(n,s,h,m={}){const b=U.mousePos(s.getCanvasContainer(),h),T=s.unproject(b);super(n,c.extend({point:b,lngLat:T,originalEvent:h},m)),this._defaultPrevented=!1,this.target=s}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class kr extends c.Event{constructor(n,s,h){const m=n==="touchend"?h.changedTouches:h.touches,b=U.touchPos(s.getCanvasContainer(),m),T=b.map(I=>s.unproject(I)),C=b.reduce((I,z,R,B)=>I.add(z.div(B.length)),new c.pointGeometry(0,0));super(n,{points:b,point:C,lngLats:T,lngLat:s.unproject(C),originalEvent:h}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class hh extends c.Event{constructor(n,s,h){super(n,{originalEvent:h}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class go{constructor(n,s){this._map=n,this._clickTolerance=s.clickTolerance}reset(){delete this._mousedownPos}wheel(n){return this._firePreventable(new hh(n.type,this._map,n))}mousedown(n,s){return this._mousedownPos=s,this._firePreventable(new Qr(n.type,this._map,n))}mouseup(n){this._map.fire(new Qr(n.type,this._map,n))}click(n,s){this._mousedownPos&&this._mousedownPos.dist(s)>=this._clickTolerance||this._map.fire(new Qr(n.type,this._map,n))}dblclick(n){return this._firePreventable(new Qr(n.type,this._map,n))}mouseover(n){this._map.fire(new Qr(n.type,this._map,n))}mouseout(n){this._map.fire(new Qr(n.type,this._map,n))}touchstart(n){return this._firePreventable(new kr(n.type,this._map,n))}touchmove(n){this._map.fire(new kr(n.type,this._map,n))}touchend(n){this._map.fire(new kr(n.type,this._map,n))}touchcancel(n){this._map.fire(new kr(n.type,this._map,n))}_firePreventable(n){if(this._map.fire(n),n.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ci{constructor(n){this._map=n}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(n){this._map.fire(new Qr(n.type,this._map,n))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Qr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(n){this._delayContextMenu?this._contextMenuEvent=n:this._ignoreContextMenu||this._map.fire(new Qr(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Si{constructor(n,s){this._map=n,this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=s.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(n,s){this.isEnabled()&&n.shiftKey&&n.button===0&&(U.disableDrag(),this._startPos=this._lastPos=s,this._active=!0)}mousemoveWindow(n,s){if(!this._active)return;const h=s;if(this._lastPos.equals(h)||!this._box&&h.dist(this._startPos)<this._clickTolerance)return;const m=this._startPos;this._lastPos=h,this._box||(this._box=U.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",n));const b=Math.min(m.x,h.x),T=Math.max(m.x,h.x),C=Math.min(m.y,h.y),I=Math.max(m.y,h.y);U.setTransform(this._box,`translate(${b}px,${C}px)`),this._box.style.width=T-b+"px",this._box.style.height=I-C+"px"}mouseupWindow(n,s){if(!this._active||n.button!==0)return;const h=this._startPos,m=s;if(this.reset(),U.suppressClick(),h.x!==m.x||h.y!==m.y)return this._map.fire(new c.Event("boxzoomend",{originalEvent:n})),{cameraAnimation:b=>b.fitScreenCoordinates(h,m,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",n)}keydown(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(U.remove(this._box),this._box=null),U.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(n,s){return this._map.fire(new c.Event(n,{originalEvent:s}))}}function yo(f,n){if(f.length!==n.length)throw new Error(`The number of touches and points are not equal - touches ${f.length}, points ${n.length}`);const s={};for(let h=0;h<f.length;h++)s[f[h].identifier]=n[h];return s}class gu{constructor(n){this.reset(),this.numTouches=n.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(n,s,h){(this.centroid||h.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),h.length===this.numTouches&&(this.centroid=function(m){const b=new c.pointGeometry(0,0);for(const T of m)b._add(T);return b.div(m.length)}(s),this.touches=yo(h,s)))}touchmove(n,s,h){if(this.aborted||!this.centroid)return;const m=yo(h,s);for(const b in this.touches){const T=this.touches[b],C=m[b];(!C||C.dist(T)>30)&&(this.aborted=!0)}}touchend(n,s,h){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),h.length===0){const m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class bl{constructor(n){this.singleTap=new gu(n),this.numTaps=n.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(n,s,h){this.singleTap.touchstart(n,s,h)}touchmove(n,s,h){this.singleTap.touchmove(n,s,h)}touchend(n,s,h){const m=this.singleTap.touchend(n,s,h);if(m){const b=n.timeStamp-this.lastTime<500,T=!this.lastTap||this.lastTap.dist(m)<30;if(b&&T||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class yu{constructor(){this._zoomIn=new bl({numTouches:1,numTaps:2}),this._zoomOut=new bl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(n,s,h){this._zoomIn.touchstart(n,s,h),this._zoomOut.touchstart(n,s,h)}touchmove(n,s,h){this._zoomIn.touchmove(n,s,h),this._zoomOut.touchmove(n,s,h)}touchend(n,s,h){const m=this._zoomIn.touchend(n,s,h),b=this._zoomOut.touchend(n,s,h);return m?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:T.getZoom()+1,around:T.unproject(m)},{originalEvent:n})}):b?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:T.getZoom()-1,around:T.unproject(b)},{originalEvent:n})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Sl={0:1,2:2};class ns{constructor(n){this.reset(),this._clickTolerance=n.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(n,s){return!1}_move(n,s){return{}}mousedown(n,s){if(this._lastPoint)return;const h=U.mouseButton(n);this._correctButton(n,h)&&(this._lastPoint=s,this._eventButton=h)}mousemoveWindow(n,s){const h=this._lastPoint;if(h){if(n.preventDefault(),function(m,b){const T=Sl[b];return m.buttons===void 0||(m.buttons&T)!==T}(n,this._eventButton))this.reset();else if(this._moved||!(s.dist(h)<this._clickTolerance))return this._moved=!0,this._lastPoint=s,this._move(h,s)}}mouseupWindow(n){this._lastPoint&&U.mouseButton(n)===this._eventButton&&(this._moved&&U.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class vo extends ns{mousedown(n,s){super.mousedown(n,s),this._lastPoint&&(this._active=!0)}_correctButton(n,s){return s===0&&!n.ctrlKey}_move(n,s){return{around:s,panDelta:s.sub(n)}}}class ut extends ns{_correctButton(n,s){return s===0&&n.ctrlKey||s===2}_move(n,s){const h=.8*(s.x-n.x);if(h)return this._active=!0,{bearingDelta:h}}contextmenu(n){n.preventDefault()}}class Ma extends ns{_correctButton(n,s){return s===0&&n.ctrlKey||s===2}_move(n,s){const h=-.5*(s.y-n.y);if(h)return this._active=!0,{pitchDelta:h}}contextmenu(n){n.preventDefault()}}class Ki{constructor(n,s){this._minTouches=n.cooperativeGestures?2:1,this._clickTolerance=n.clickTolerance||1,this._map=s,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new c.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(n,s,h){return this._calculateTransform(n,s,h)}touchmove(n,s,h){if(this._map._cooperativeGestures&&(this._minTouches===2&&h.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(n,!1,h.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(h.length<this._minTouches))return n.preventDefault(),this._calculateTransform(n,s,h)}touchend(n,s,h){this._calculateTransform(n,s,h),this._active&&h.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(n,s,h){h.length>0&&(this._active=!0);const m=yo(h,s),b=new c.pointGeometry(0,0),T=new c.pointGeometry(0,0);let C=0;for(const z in m){const R=m[z],B=this._touches[z];B&&(b._add(R),T._add(R.sub(B)),C++,m[z]=R)}if(this._touches=m,C<this._minTouches||!T.mag())return;const I=T.div(C);return this._sum._add(I),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(C),panDelta:I}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ji{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(n){}_move(n,s,h){return{}}touchstart(n,s,h){this._firstTwoTouches||h.length<2||(this._firstTwoTouches=[h[0].identifier,h[1].identifier],this._start([s[0],s[1]]))}touchmove(n,s,h){if(!this._firstTwoTouches)return;n.preventDefault();const[m,b]=this._firstTwoTouches,T=zs(h,s,m),C=zs(h,s,b);if(!T||!C)return;const I=this._aroundCenter?null:T.add(C).div(2);return this._move([T,C],I,n)}touchend(n,s,h){if(!this._firstTwoTouches)return;const[m,b]=this._firstTwoTouches,T=zs(h,s,m),C=zs(h,s,b);T&&C||(this._active&&U.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function zs(f,n,s){for(let h=0;h<f.length;h++)if(f[h].identifier===s)return n[h]}function rt(f,n){return Math.log(f/n)/Math.LN2}class xo extends Ji{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(n){this._startDistance=this._distance=n[0].dist(n[1])}_move(n,s){const h=this._distance;if(this._distance=n[0].dist(n[1]),this._active||!(Math.abs(rt(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:rt(this._distance,h),pinchAround:s}}}function El(f,n){return 180*f.angleWith(n)/Math.PI}class vu extends Ji{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(n){this._startVector=this._vector=n[0].sub(n[1]),this._minDiameter=n[0].dist(n[1])}_move(n,s){const h=this._vector;if(this._vector=n[0].sub(n[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:El(this._vector,h),pinchAround:s}}_isBelowThreshold(n){this._minDiameter=Math.min(this._minDiameter,n.mag());const s=25/(Math.PI*this._minDiameter)*360,h=El(n,this._startVector);return Math.abs(h)<s}}function _o(f){return Math.abs(f.y)>Math.abs(f.x)}class Tc extends Ji{constructor(n){super(),this._map=n}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(n,s,h){super.touchstart(n,s,h),this._currentTouchCount=h.length}_start(n){this._lastPoints=n,_o(n[0].sub(n[1]))&&(this._valid=!1)}_move(n,s,h){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const m=n[0].sub(this._lastPoints[0]),b=n[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,b,h.timeStamp),this._valid?(this._lastPoints=n,this._active=!0,{pitchDelta:(m.y+b.y)/2*-.5}):void 0}gestureBeginsVertically(n,s,h){if(this._valid!==void 0)return this._valid;const m=n.mag()>=2,b=s.mag()>=2;if(!m&&!b)return;if(!m||!b)return this._firstMove===void 0&&(this._firstMove=h),h-this._firstMove<100&&void 0;const T=n.y>0==s.y>0;return _o(n)&&_o(s)&&T}}const kc={panStep:100,bearingStep:15,pitchStep:10};class xu{constructor(){const n=kc;this._panStep=n.panStep,this._bearingStep=n.bearingStep,this._pitchStep=n.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(n){if(n.altKey||n.ctrlKey||n.metaKey)return;let s=0,h=0,m=0,b=0,T=0;switch(n.keyCode){case 61:case 107:case 171:case 187:s=1;break;case 189:case 109:case 173:s=-1;break;case 37:n.shiftKey?h=-1:(n.preventDefault(),b=-1);break;case 39:n.shiftKey?h=1:(n.preventDefault(),b=1);break;case 38:n.shiftKey?m=1:(n.preventDefault(),T=-1);break;case 40:n.shiftKey?m=-1:(n.preventDefault(),T=1);break;default:return}return this._rotationDisabled&&(h=0,m=0),{cameraAnimation:C=>{const I=C.getZoom();C.easeTo({duration:300,easeId:"keyboardHandler",easing:_u,zoom:s?Math.round(I)+s*(n.shiftKey?2:1):I,bearing:C.getBearing()+h*this._bearingStep,pitch:C.getPitch()+m*this._pitchStep,offset:[-b*this._panStep,-T*this._panStep],center:C.getCenter()},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function _u(f){return f*(2-f)}const Ca=4.000244140625;class Tl{constructor(n,s){this._map=n,this._el=n.getCanvasContainer(),this._handler=s,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,c.bindAll(["_onTimeout"],this)}setZoomRate(n){this._defaultZoomRate=n}setWheelZoomRate(n){this._wheelZoomRate=n}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=n&&n.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(n){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;n.preventDefault()}let s=n.deltaMode===WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY;const h=c.exported.now(),m=h-(this._lastWheelEventTime||0);this._lastWheelEventTime=h,s!==0&&s%Ca==0?this._type="wheel":s!==0&&Math.abs(s)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=s,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(m*s)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,s+=this._lastValue)),n.shiftKey&&s&&(s/=4),this._type&&(this._lastWheelEvent=n,this._delta-=s,this._active||this._start(n)),n.preventDefault()}_onTimeout(n){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(n)}_start(n){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const s=U.mousePos(this._el,n);this._around=c.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(s)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const n=this._map.transform;if(this._delta!==0){const C=this._type==="wheel"&&Math.abs(this._delta)>Ca?this._wheelZoomRate:this._defaultZoomRate;let I=2/(1+Math.exp(-Math.abs(this._delta*C)));this._delta<0&&I!==0&&(I=1/I);const z=typeof this._targetZoom=="number"?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(z*I))),this._type==="wheel"&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const s=typeof this._targetZoom=="number"?this._targetZoom:n.zoom,h=this._startZoom,m=this._easing;let b,T=!1;if(this._type==="wheel"&&h&&m){const C=Math.min((c.exported.now()-this._lastWheelEventTime)/200,1),I=m(C);b=c.number(h,s,I),C<1?this._frameId||(this._frameId=!0):T=!0}else b=s,T=!0;return this._active=!0,T&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!T,zoomDelta:b-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(n){let s=c.ease;if(this._prevEase){const h=this._prevEase,m=(c.exported.now()-h.start)/h.duration,b=h.easing(m+.01)-h.easing(m),T=.27/Math.sqrt(b*b+1e-4)*.01,C=Math.sqrt(.0729-T*T);s=c.bezier(T,C,.25,1)}return this._prevEase={start:c.exported.now(),duration:n,easing:s},s}reset(){this._active=!1}}class Ri{constructor(n,s){this._clickZoom=n,this._tapZoom=s}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Pa{constructor(){this.reset()}reset(){this._active=!1}dblclick(n,s){return n.preventDefault(),{cameraAnimation:h=>{h.easeTo({duration:300,zoom:h.getZoom()+(n.shiftKey?-1:1),around:h.unproject(s)},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Mr{constructor(){this._tap=new bl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(n,s,h){this._swipePoint||(this._tapTime&&n.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?h.length>0&&(this._swipePoint=s[0],this._swipeTouch=h[0].identifier):this._tap.touchstart(n,s,h))}touchmove(n,s,h){if(this._tapTime){if(this._swipePoint){if(h[0].identifier!==this._swipeTouch)return;const m=s[0],b=m.y-this._swipePoint.y;return this._swipePoint=m,n.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(n,s,h)}touchend(n,s,h){this._tapTime?this._swipePoint&&h.length===0&&this.reset():this._tap.touchend(n,s,h)&&(this._tapTime=n.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class wo{constructor(n,s,h){this._el=n,this._mousePan=s,this._touchPan=h}enable(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class wu{constructor(n,s,h){this._pitchWithRotate=n.pitchWithRotate,this._mouseRotate=s,this._mousePitch=h}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class rs{constructor(n,s,h,m){this._el=n,this._touchZoom=s,this._touchRotate=h,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const js=f=>f.zoom||f.drag||f.pitch||f.rotate;class kl extends c.Event{}function Ia(f){return f.panDelta&&f.panDelta.mag()||f.zoomDelta||f.bearingDelta||f.pitchDelta}class hn{constructor(n,s){this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ec(n),this._bearingSnap=s.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(s),c.bindAll(["handleEvent","handleWindowEvent"],this);const h=this._el;this._listeners=[[h,"touchstart",{passive:!0}],[h,"touchmove",{passive:!1}],[h,"touchend",void 0],[h,"touchcancel",void 0],[h,"mousedown",void 0],[h,"mousemove",void 0],[h,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[h,"mouseover",void 0],[h,"mouseout",void 0],[h,"dblclick",void 0],[h,"click",void 0],[h,"keydown",{capture:!1}],[h,"keyup",void 0],[h,"wheel",{passive:!1}],[h,"contextmenu",void 0],[window,"blur",void 0]];for(const[m,b,T]of this._listeners)U.addEventListener(m,b,m===document?this.handleWindowEvent:this.handleEvent,T)}destroy(){for(const[n,s,h]of this._listeners)U.removeEventListener(n,s,n===document?this.handleWindowEvent:this.handleEvent,h)}_addDefaultHandlers(n){const s=this._map,h=s.getCanvasContainer();this._add("mapEvent",new go(s,n));const m=s.boxZoom=new Si(s,n);this._add("boxZoom",m);const b=new yu,T=new Pa;s.doubleClickZoom=new Ri(T,b),this._add("tapZoom",b),this._add("clickZoom",T);const C=new Mr;this._add("tapDragZoom",C);const I=s.touchPitch=new Tc(s);this._add("touchPitch",I);const z=new ut(n),R=new Ma(n);s.dragRotate=new wu(n,z,R),this._add("mouseRotate",z,["mousePitch"]),this._add("mousePitch",R,["mouseRotate"]);const B=new vo(n),H=new Ki(n,s);s.dragPan=new wo(h,B,H),this._add("mousePan",B),this._add("touchPan",H,["touchZoom","touchRotate"]);const Y=new vu,X=new xo;s.touchZoomRotate=new rs(h,X,Y,C),this._add("touchRotate",Y,["touchPan","touchZoom"]),this._add("touchZoom",X,["touchPan","touchRotate"]);const Z=s.scrollZoom=new Tl(s,this);this._add("scrollZoom",Z,["mousePan"]);const se=s.keyboard=new xu;this._add("keyboard",se),this._add("blockableMapEvent",new ci(s));for(const ge of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])n.interactive&&n[ge]&&s[ge].enable(n[ge])}_add(n,s,h){this._handlers.push({handlerName:n,handler:s,allowed:h}),this._handlersById[n]=s}stop(n){if(!this._updatingCamera){for(const{handler:s}of this._handlers)s.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}}isActive(){for(const{handler:n}of this._handlers)if(n.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!js(this._eventsInProgress)||this.isZooming()}_blockedByActive(n,s,h){for(const m in n)if(m!==h&&(!s||s.indexOf(m)<0))return!0;return!1}handleWindowEvent(n){this.handleEvent(n,`${n.type}Window`)}_getMapTouches(n){const s=[];for(const h of n)this._el.contains(h.target)&&s.push(h);return s}handleEvent(n,s){if(n.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const h=n.type==="renderFrame"?void 0:n,m={needsRenderFrame:!1},b={},T={},C=n.touches,I=C?this._getMapTouches(C):void 0,z=I?U.touchPos(this._el,I):U.mousePos(this._el,n);for(const{handlerName:H,handler:Y,allowed:X}of this._handlers){if(!Y.isEnabled())continue;let Z;this._blockedByActive(T,X,H)?Y.reset():Y[s||n.type]&&(Z=Y[s||n.type](n,z,I),this.mergeHandlerResult(m,b,Z,H,h),Z&&Z.needsRenderFrame&&this._triggerRenderFrame()),(Z||Y.isActive())&&(T[H]=Y)}const R={};for(const H in this._previousActiveHandlers)T[H]||(R[H]=h);this._previousActiveHandlers=T,(Object.keys(R).length||Ia(m))&&(this._changes.push([m,b,R]),this._triggerRenderFrame()),(Object.keys(T).length||Ia(m))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:B}=m;B&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],B(this._map))}mergeHandlerResult(n,s,h,m,b){if(!h)return;c.extend(n,h);const T={handlerName:m,originalEvent:h.originalEvent||b};h.zoomDelta!==void 0&&(s.zoom=T),h.panDelta!==void 0&&(s.drag=T),h.pitchDelta!==void 0&&(s.pitch=T),h.bearingDelta!==void 0&&(s.rotate=T)}_applyChanges(){const n={},s={},h={};for(const[m,b,T]of this._changes)m.panDelta&&(n.panDelta=(n.panDelta||new c.pointGeometry(0,0))._add(m.panDelta)),m.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+m.pitchDelta),m.around!==void 0&&(n.around=m.around),m.pinchAround!==void 0&&(n.pinchAround=m.pinchAround),m.noInertia&&(n.noInertia=m.noInertia),c.extend(s,b),c.extend(h,T);this._updateMapTransform(n,s,h),this._changes=[]}_updateMapTransform(n,s,h){const m=this._map,b=m.transform,T=m.style&&m.style.terrain;if(!(Ia(n)||T&&this._drag))return this._fireEvents(s,h,!0);let{panDelta:C,zoomDelta:I,bearingDelta:z,pitchDelta:R,around:B,pinchAround:H}=n;H!==void 0&&(B=H),m._stop(!0),B=B||m.transform.centerPoint;const Y=b.pointLocation(C?B.sub(C):B);z&&(b.bearing+=z),R&&(b.pitch+=R),I&&(b.zoom+=I),T?s.drag&&!this._drag?(this._drag={center:b.centerPoint,lngLat:b.pointLocation(B),point:B,handlerName:s.drag.handlerName},m.fire(new c.Event("freezeElevation",{freeze:!0}))):this._drag&&h[this._drag.handlerName]?(m.fire(new c.Event("freezeElevation",{freeze:!1})),this._drag=null):s.drag&&this._drag&&(b.center=b.pointLocation(b.centerPoint.sub(C))):b.setLocationAtPoint(Y,B),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(s,h,!0)}_fireEvents(n,s,h){const m=js(this._eventsInProgress),b=js(n),T={};for(const R in n){const{originalEvent:B}=n[R];this._eventsInProgress[R]||(T[`${R}start`]=B),this._eventsInProgress[R]=n[R]}!m&&b&&this._fireEvent("movestart",b.originalEvent);for(const R in T)this._fireEvent(R,T[R]);b&&this._fireEvent("move",b.originalEvent);for(const R in n){const{originalEvent:B}=n[R];this._fireEvent(R,B)}const C={};let I;for(const R in this._eventsInProgress){const{handlerName:B,originalEvent:H}=this._eventsInProgress[R];this._handlersById[B].isActive()||(delete this._eventsInProgress[R],I=s[B]||H,C[`${R}end`]=I)}for(const R in C)this._fireEvent(R,C[R]);const z=js(this._eventsInProgress);if(h&&(m||b)&&!z){this._updatingCamera=!0;const R=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),B=H=>H!==0&&-this._bearingSnap<H&&H<this._bearingSnap;R?(B(R.bearing||this._map.getBearing())&&(R.bearing=0),this._map.easeTo(R,{originalEvent:I})):(this._map.fire(new c.Event("moveend",{originalEvent:I})),B(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(n,s){this._map.fire(new c.Event(n,s?{originalEvent:s}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(n=>{delete this._frameId,this.handleEvent(new kl("renderFrame",{timeStamp:n})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Tn={extend:(f,...n)=>c.extend(f,...n),run(f){f()},logToElement(f,n=!1,s="log"){const h=window.document.getElementById(s);h&&(n&&(h.innerHTML=""),h.innerHTML+=`<br>${f}`)}};class is extends c.Evented{constructor(n,s){super(),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=s.bearingSnap,c.bindAll(["_renderFrameCallback"],this)}getCenter(){return new c.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(n,s){return this.jumpTo({center:n},s)}panBy(n,s,h){return n=c.pointGeometry.convert(n).mult(-1),this.panTo(this.transform.center,c.extend({offset:n},s),h)}panTo(n,s,h){return this.easeTo(c.extend({center:n},s),h)}getZoom(){return this.transform.zoom}setZoom(n,s){return this.jumpTo({zoom:n},s),this}zoomTo(n,s,h){return this.easeTo(c.extend({zoom:n},s),h)}zoomIn(n,s){return this.zoomTo(this.getZoom()+1,n,s),this}zoomOut(n,s){return this.zoomTo(this.getZoom()-1,n,s),this}getBearing(){return this.transform.bearing}setBearing(n,s){return this.jumpTo({bearing:n},s),this}getPadding(){return this.transform.padding}setPadding(n,s){return this.jumpTo({padding:n},s),this}rotateTo(n,s,h){return this.easeTo(c.extend({bearing:n},s),h)}resetNorth(n,s){return this.rotateTo(0,c.extend({duration:1e3},n),s),this}resetNorthPitch(n,s){return this.easeTo(c.extend({bearing:0,pitch:0,duration:1e3},n),s),this}snapToNorth(n,s){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,s):this}getPitch(){return this.transform.pitch}setPitch(n,s){return this.jumpTo({pitch:n},s),this}cameraForBounds(n,s){n=c.LngLatBounds.convert(n);const h=s&&s.bearing||0;return this._cameraForBoxAndBearing(n.getNorthWest(),n.getSouthEast(),h,s)}_cameraForBoxAndBearing(n,s,h,m){const b={top:0,bottom:0,right:0,left:0};if(typeof(m=c.extend({padding:b,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){const Se=m.padding;m.padding={top:Se,bottom:Se,right:Se,left:Se}}m.padding=c.extend(b,m.padding);const T=this.transform,C=T.padding,I=T.project(c.LngLat.convert(n)),z=T.project(c.LngLat.convert(s)),R=I.rotate(-h*Math.PI/180),B=z.rotate(-h*Math.PI/180),H=new c.pointGeometry(Math.max(R.x,B.x),Math.max(R.y,B.y)),Y=new c.pointGeometry(Math.min(R.x,B.x),Math.min(R.y,B.y)),X=H.sub(Y),Z=(T.width-(C.left+C.right+m.padding.left+m.padding.right))/X.x,se=(T.height-(C.top+C.bottom+m.padding.top+m.padding.bottom))/X.y;if(se<0||Z<0)return void c.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const ge=Math.min(T.scaleZoom(T.scale*Math.min(Z,se)),m.maxZoom),xe=c.pointGeometry.convert(m.offset),te=new c.pointGeometry((m.padding.left-m.padding.right)/2,(m.padding.top-m.padding.bottom)/2).rotate(h*Math.PI/180),Te=xe.add(te).mult(T.scale/T.zoomScale(ge));return{center:T.unproject(I.add(z).div(2).sub(Te)),zoom:ge,bearing:h}}fitBounds(n,s,h){return this._fitInternal(this.cameraForBounds(n,s),s,h)}fitScreenCoordinates(n,s,h,m,b){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(c.pointGeometry.convert(n)),this.transform.pointLocation(c.pointGeometry.convert(s)),h,m),m,b)}_fitInternal(n,s,h){return n?(delete(s=c.extend(n,s)).padding,s.linear?this.easeTo(s,h):this.flyTo(s,h)):this}jumpTo(n,s){this.stop();const h=this.transform;let m=!1,b=!1,T=!1;return"zoom"in n&&h.zoom!==+n.zoom&&(m=!0,h.zoom=+n.zoom),n.center!==void 0&&(h.center=c.LngLat.convert(n.center)),"bearing"in n&&h.bearing!==+n.bearing&&(b=!0,h.bearing=+n.bearing),"pitch"in n&&h.pitch!==+n.pitch&&(T=!0,h.pitch=+n.pitch),n.padding==null||h.isPaddingEqual(n.padding)||(h.padding=n.padding),this.fire(new c.Event("movestart",s)).fire(new c.Event("move",s)),m&&this.fire(new c.Event("zoomstart",s)).fire(new c.Event("zoom",s)).fire(new c.Event("zoomend",s)),b&&this.fire(new c.Event("rotatestart",s)).fire(new c.Event("rotate",s)).fire(new c.Event("rotateend",s)),T&&this.fire(new c.Event("pitchstart",s)).fire(new c.Event("pitch",s)).fire(new c.Event("pitchend",s)),this.fire(new c.Event("moveend",s))}calculateCameraOptionsFromTo(n,s,h,m=0){const b=c.MercatorCoordinate.fromLngLat(n,s),T=c.MercatorCoordinate.fromLngLat(h,m),C=T.x-b.x,I=T.y-b.y,z=T.z-b.z,R=Math.hypot(C,I,z);if(R===0)throw new Error("Can't calculate camera options with same From and To");const B=Math.hypot(C,I),H=this.transform.scaleZoom(this.transform.cameraToCenterDistance/R/this.transform.tileSize),Y=180*Math.atan2(C,-I)/Math.PI;let X=180*Math.acos(B/R)/Math.PI;return X=z<0?90-X:90+X,{center:T.toLngLat(),zoom:H,pitch:X,bearing:Y}}easeTo(n,s){this._stop(!1,n.easeId),((n=c.extend({offset:[0,0],duration:500,easing:c.ease},n)).animate===!1||!n.essential&&c.exported.prefersReducedMotion)&&(n.duration=0);const h=this.transform,m=this.getZoom(),b=this.getBearing(),T=this.getPitch(),C=this.getPadding(),I="zoom"in n?+n.zoom:m,z="bearing"in n?this._normalizeBearing(n.bearing,b):b,R="pitch"in n?+n.pitch:T,B="padding"in n?n.padding:h.padding,H=c.pointGeometry.convert(n.offset);let Y=h.centerPoint.add(H);const X=h.pointLocation(Y),Z=c.LngLat.convert(n.center||X);this._normalizeCenter(Z);const se=h.project(X),ge=h.project(Z).sub(se),xe=h.zoomScale(I-m);let te,Te;n.around&&(te=c.LngLat.convert(n.around),Te=h.locationPoint(te));const Se={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||I!==m,this._rotating=this._rotating||b!==z,this._pitching=this._pitching||R!==T,this._padding=!h.isPaddingEqual(B),this._easeId=n.easeId,this._prepareEase(s,n.noMoveStart,Se),this._ease(Pe=>{if(this._zooming&&(h.zoom=c.number(m,I,Pe)),this._rotating&&(h.bearing=c.number(b,z,Pe)),this._pitching&&(h.pitch=c.number(T,R,Pe)),this._padding&&(h.interpolatePadding(C,B,Pe),Y=h.centerPoint.add(H)),te)h.setLocationAtPoint(te,Te);else{const Re=h.zoomScale(h.zoom-m),He=I>m?Math.min(2,xe):Math.max(.5,xe),ze=Math.pow(He,1-Pe),at=h.unproject(se.add(ge.mult(Pe*ze)).mult(Re));h.setLocationAtPoint(h.renderWorldCopies?at.wrap():at,Y)}this._fireMoveEvents(s)},Pe=>{this._afterEase(s,Pe)},n),this}_prepareEase(n,s,h={}){this._moving=!0,this.fire(new c.Event("freezeElevation",{freeze:!0})),s||h.moving||this.fire(new c.Event("movestart",n)),this._zooming&&!h.zooming&&this.fire(new c.Event("zoomstart",n)),this._rotating&&!h.rotating&&this.fire(new c.Event("rotatestart",n)),this._pitching&&!h.pitching&&this.fire(new c.Event("pitchstart",n))}_fireMoveEvents(n){this.fire(new c.Event("move",n)),this._zooming&&this.fire(new c.Event("zoom",n)),this._rotating&&this.fire(new c.Event("rotate",n)),this._pitching&&this.fire(new c.Event("pitch",n))}_afterEase(n,s){if(this._easeId&&s&&this._easeId===s)return;delete this._easeId,this.fire(new c.Event("freezeElevation",{freeze:!1}));const h=this._zooming,m=this._rotating,b=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,h&&this.fire(new c.Event("zoomend",n)),m&&this.fire(new c.Event("rotateend",n)),b&&this.fire(new c.Event("pitchend",n)),this.fire(new c.Event("moveend",n))}flyTo(n,s){if(!n.essential&&c.exported.prefersReducedMotion){const wt=c.pick(n,["center","zoom","bearing","pitch","around"]);return this.jumpTo(wt,s)}this.stop(),n=c.extend({offset:[0,0],speed:1.2,curve:1.42,easing:c.ease},n);const h=this.transform,m=this.getZoom(),b=this.getBearing(),T=this.getPitch(),C=this.getPadding(),I="zoom"in n?c.clamp(+n.zoom,h.minZoom,h.maxZoom):m,z="bearing"in n?this._normalizeBearing(n.bearing,b):b,R="pitch"in n?+n.pitch:T,B="padding"in n?n.padding:h.padding,H=h.zoomScale(I-m),Y=c.pointGeometry.convert(n.offset);let X=h.centerPoint.add(Y);const Z=h.pointLocation(X),se=c.LngLat.convert(n.center||Z);this._normalizeCenter(se);const ge=h.project(Z),xe=h.project(se).sub(ge);let te=n.curve;const Te=Math.max(h.width,h.height),Se=Te/H,Pe=xe.mag();if("minZoom"in n){const wt=c.clamp(Math.min(n.minZoom,m,I),h.minZoom,h.maxZoom),xn=Te/h.zoomScale(wt-m);te=Math.sqrt(xn/Pe*2)}const Re=te*te;function He(wt){const xn=(Se*Se-Te*Te+(wt?-1:1)*Re*Re*Pe*Pe)/(2*(wt?Se:Te)*Re*Pe);return Math.log(Math.sqrt(xn*xn+1)-xn)}function ze(wt){return(Math.exp(wt)-Math.exp(-wt))/2}function at(wt){return(Math.exp(wt)+Math.exp(-wt))/2}const et=He(0);let st=function(wt){return at(et)/at(et+te*wt)},Dt=function(wt){return Te*((at(et)*(ze(xn=et+te*wt)/at(xn))-ze(et))/Re)/Pe;var xn},Gt=(He(1)-et)/te;if(Math.abs(Pe)<1e-6||!isFinite(Gt)){if(Math.abs(Te-Se)<1e-6)return this.easeTo(n,s);const wt=Se<Te?-1:1;Gt=Math.abs(Math.log(Se/Te))/te,Dt=function(){return 0},st=function(xn){return Math.exp(wt*te*xn)}}return n.duration="duration"in n?+n.duration:1e3*Gt/("screenSpeed"in n?+n.screenSpeed/te:+n.speed),n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0),this._zooming=!0,this._rotating=b!==z,this._pitching=R!==T,this._padding=!h.isPaddingEqual(B),this._prepareEase(s,!1),this._ease(wt=>{const xn=wt*Gt,nn=1/st(xn);h.zoom=wt===1?I:m+h.scaleZoom(nn),this._rotating&&(h.bearing=c.number(b,z,wt)),this._pitching&&(h.pitch=c.number(T,R,wt)),this._padding&&(h.interpolatePadding(C,B,wt),X=h.centerPoint.add(Y));const Qt=wt===1?se:h.unproject(ge.add(xe.mult(Dt(xn))).mult(nn));h.setLocationAtPoint(h.renderWorldCopies?Qt.wrap():Qt,X),this._fireMoveEvents(s)},()=>this._afterEase(s),n),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(n,s){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const h=this._onEaseEnd;delete this._onEaseEnd,h.call(this,s)}if(!n){const h=this.handlers;h&&h.stop(!1)}return this}_ease(n,s,h){h.animate===!1||h.duration===0?(n(1),s()):(this._easeStart=c.exported.now(),this._easeOptions=h,this._onEaseFrame=n,this._onEaseEnd=s,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const n=Math.min((c.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(n)),n<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(n,s){n=c.wrap(n,-180,180);const h=Math.abs(n-s);return Math.abs(n-360-s)<h&&(n-=360),Math.abs(n+360-s)<h&&(n+=360),n}_normalizeCenter(n){const s=this.transform;if(!s.renderWorldCopies||s.lngRange)return;const h=n.lng-s.center.lng;n.lng+=h>180?-360:h<-180?360:0}}class bo{constructor(n={}){this.options=n,c.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(n){return this._map=n,this._compact=this.options&&this.options.compact,this._container=U.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=U.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=U.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){U.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(n,s){const h=this._map._getUIString(`AttributionControl.${s}`);n.title=h,n.setAttribute("aria-label",h)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(n){!n||n.sourceDataType!=="metadata"&&n.sourceDataType!=="visibility"&&n.dataType!=="style"&&n.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(m=>typeof m!="string"?"":m)):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){const m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}const s=this._map.style.sourceCaches;for(const m in s){const b=s[m];if(b.used||b.usedForTerrain){const T=b.getSource();T.attribution&&n.indexOf(T.attribution)<0&&n.push(T.attribution)}}n=n.filter(m=>String(m).trim()),n.sort((m,b)=>m.length-b.length),n=n.filter((m,b)=>{for(let T=b+1;T<n.length;T++)if(n[T].indexOf(m)>=0)return!1;return!0});const h=n.join(" | ");h!==this._attribHTML&&(this._attribHTML=h,n.length?(this._innerContainer.innerHTML=h,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class Ml{constructor(n={}){this.options=n,c.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(n){this._map=n,this._compact=this.options&&this.options.compact,this._container=U.create("div","maplibregl-ctrl mapboxgl-ctrl");const s=U.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return s.target="_blank",s.rel="noopener nofollow",s.href="https://maplibre.org/",s.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),s.setAttribute("rel","noopener nofollow"),this._container.appendChild(s),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){U.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const n=this._container.children;if(n.length){const s=n[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&s.classList.add("maplibregl-compact","mapboxgl-compact"):s.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class Cl{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(n){const s=++this._id;return this._queue.push({callback:n,id:s,cancelled:!1}),s}remove(n){const s=this._currentlyRunning,h=s?this._queue.concat(s):this._queue;for(const m of h)if(m.id===n)return void(m.cancelled=!0)}run(n=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const s=this._currentlyRunning=this._queue;this._queue=[];for(const h of s)if(!h.cancelled&&(h.callback(n),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Rs={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},Pl={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},Or={showCompass:!0,showZoom:!0,visualizePitch:!1};class Aa{constructor(n,s,h=!1){this._clickTolerance=10,this.element=s,this.mouseRotate=new ut({clickTolerance:n.dragRotate._mouseRotate._clickTolerance}),this.map=n,h&&(this.mousePitch=new Ma({clickTolerance:n.dragRotate._mousePitch._clickTolerance})),c.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),U.addEventListener(s,"mousedown",this.mousedown),U.addEventListener(s,"touchstart",this.touchstart,{passive:!1}),U.addEventListener(s,"touchmove",this.touchmove),U.addEventListener(s,"touchend",this.touchend),U.addEventListener(s,"touchcancel",this.reset)}down(n,s){this.mouseRotate.mousedown(n,s),this.mousePitch&&this.mousePitch.mousedown(n,s),U.disableDrag()}move(n,s){const h=this.map,m=this.mouseRotate.mousemoveWindow(n,s);if(m&&m.bearingDelta&&h.setBearing(h.getBearing()+m.bearingDelta),this.mousePitch){const b=this.mousePitch.mousemoveWindow(n,s);b&&b.pitchDelta&&h.setPitch(h.getPitch()+b.pitchDelta)}}off(){const n=this.element;U.removeEventListener(n,"mousedown",this.mousedown),U.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),U.removeEventListener(n,"touchmove",this.touchmove),U.removeEventListener(n,"touchend",this.touchend),U.removeEventListener(n,"touchcancel",this.reset),this.offTemp()}offTemp(){U.enableDrag(),U.removeEventListener(window,"mousemove",this.mousemove),U.removeEventListener(window,"mouseup",this.mouseup)}mousedown(n){this.down(c.extend({},n,{ctrlKey:!0,preventDefault:()=>n.preventDefault()}),U.mousePos(this.element,n)),U.addEventListener(window,"mousemove",this.mousemove),U.addEventListener(window,"mouseup",this.mouseup)}mousemove(n){this.move(n,U.mousePos(this.element,n))}mouseup(n){this.mouseRotate.mouseupWindow(n),this.mousePitch&&this.mousePitch.mouseupWindow(n),this.offTemp()}touchstart(n){n.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=U.touchPos(this.element,n.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>n.preventDefault()},this._startPos))}touchmove(n){n.targetTouches.length!==1?this.reset():(this._lastPos=U.touchPos(this.element,n.targetTouches)[0],this.move({preventDefault:()=>n.preventDefault()},this._lastPos))}touchend(n){n.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function vt(f,n,s){if(f=new c.LngLat(f.lng,f.lat),n){const h=new c.LngLat(f.lng-360,f.lat),m=new c.LngLat(f.lng+360,f.lat),b=s.locationPoint(f).distSqr(n);s.locationPoint(h).distSqr(n)<b?f=h:s.locationPoint(m).distSqr(n)<b&&(f=m)}for(;Math.abs(f.lng-s.center.lng)>180;){const h=s.locationPoint(f);if(h.x>=0&&h.y>=0&&h.x<=s.width&&h.y<=s.height)break;f.lng>s.center.lng?f.lng-=360:f.lng+=360}return f}const Et={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ds(f,n,s){const h=f.classList;for(const m in Et)h.remove(`maplibregl-${s}-anchor-${m}`,`mapboxgl-${s}-anchor-${m}`);h.add(`maplibregl-${s}-anchor-${n}`,`mapboxgl-${s}-anchor-${n}`)}class So extends c.Evented{constructor(n,s){if(super(),(n instanceof HTMLElement||s)&&(n=c.extend({element:n},s)),c.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._scale=n&&n.scale||1,this._draggable=n&&n.draggable||!1,this._clickTolerance=n&&n.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&n.pitchAlignment!=="auto"?n.pitchAlignment:this._rotationAlignment,n&&n.element)this._element=n.element,this._offset=c.pointGeometry.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=U.create("div"),this._element.setAttribute("aria-label","Map marker");const h=U.createNS("http://www.w3.org/2000/svg","svg"),m=41,b=27;h.setAttributeNS(null,"display","block"),h.setAttributeNS(null,"height",`${m}px`),h.setAttributeNS(null,"width",`${b}px`),h.setAttributeNS(null,"viewBox",`0 0 ${b} ${m}`);const T=U.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"stroke","none"),T.setAttributeNS(null,"stroke-width","1"),T.setAttributeNS(null,"fill","none"),T.setAttributeNS(null,"fill-rule","evenodd");const C=U.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"fill-rule","nonzero");const I=U.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(3.0, 29.0)"),I.setAttributeNS(null,"fill","#000000");const z=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const xe of z){const te=U.createNS("http://www.w3.org/2000/svg","ellipse");te.setAttributeNS(null,"opacity","0.04"),te.setAttributeNS(null,"cx","10.5"),te.setAttributeNS(null,"cy","5.80029008"),te.setAttributeNS(null,"rx",xe.rx),te.setAttributeNS(null,"ry",xe.ry),I.appendChild(te)}const R=U.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"fill",this._color);const B=U.createNS("http://www.w3.org/2000/svg","path");B.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),R.appendChild(B);const H=U.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"opacity","0.25"),H.setAttributeNS(null,"fill","#000000");const Y=U.createNS("http://www.w3.org/2000/svg","path");Y.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),H.appendChild(Y);const X=U.createNS("http://www.w3.org/2000/svg","g");X.setAttributeNS(null,"transform","translate(6.0, 7.0)"),X.setAttributeNS(null,"fill","#FFFFFF");const Z=U.createNS("http://www.w3.org/2000/svg","g");Z.setAttributeNS(null,"transform","translate(8.0, 8.0)");const se=U.createNS("http://www.w3.org/2000/svg","circle");se.setAttributeNS(null,"fill","#000000"),se.setAttributeNS(null,"opacity","0.25"),se.setAttributeNS(null,"cx","5.5"),se.setAttributeNS(null,"cy","5.5"),se.setAttributeNS(null,"r","5.4999962");const ge=U.createNS("http://www.w3.org/2000/svg","circle");ge.setAttributeNS(null,"fill","#FFFFFF"),ge.setAttributeNS(null,"cx","5.5"),ge.setAttributeNS(null,"cy","5.5"),ge.setAttributeNS(null,"r","5.4999962"),Z.appendChild(se),Z.appendChild(ge),C.appendChild(I),C.appendChild(R),C.appendChild(H),C.appendChild(X),C.appendChild(Z),h.appendChild(C),h.setAttributeNS(null,"height",m*this._scale+"px"),h.setAttributeNS(null,"width",b*this._scale+"px"),this._element.appendChild(h),this._offset=c.pointGeometry.convert(n&&n.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",h=>{h.preventDefault()}),this._element.addEventListener("mousedown",h=>{h.preventDefault()}),Ds(this._element,this._anchor,"marker"),this._popup=null}addTo(n){return this.remove(),this._map=n,n.getCanvasContainer().appendChild(this._element),n.on("move",this._update),n.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),U.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(n){return this._lngLat=c.LngLat.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(n){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),n){if(!("offset"in n.options)){const m=Math.sqrt(Math.pow(13.5,2)/2);n.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(38.1-13.5+m)],"bottom-right":[-m,-1*(38.1-13.5+m)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=n,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(n){const s=n.code,h=n.charCode||n.keyCode;s!=="Space"&&s!=="Enter"&&h!==32&&h!==13||this.togglePopup()}_onMapClick(n){const s=n.originalEvent.target,h=this._element;this._popup&&(s===h||h.contains(s))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const n=this._popup;return n?(n.isOpen()?n.remove():n.addTo(this._map),this):this}_update(n){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=vt(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let s="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?s=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(s=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let h="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?h="rotateX(0deg)":this._pitchAlignment==="map"&&(h=`rotateX(${this._map.getPitch()}deg)`),n&&n.type!=="moveend"||(this._pos=this._pos.round()),U.setTransform(this._element,`${Et[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${h} ${s}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const m=this._map.unproject(this._pos),b=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=m.distanceTo(this._lngLat)>20*b?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(n){return this._offset=c.pointGeometry.convert(n),this._update(),this}_onMove(n){if(!this._isDragging){const s=this._clickTolerance||this._map._clickTolerance;this._isDragging=n.point.dist(this._pointerdownPos)>=s}this._isDragging&&(this._pos=n.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new c.Event("dragstart"))),this.fire(new c.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new c.Event("dragend")),this._state="inactive"}_addDragHandler(n){this._element.contains(n.originalEvent.target)&&(n.preventDefault(),this._positionDelta=n.point.sub(this._pos).add(this._offset),this._pointerdownPos=n.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(n){return this._draggable=!!n,this._map&&(n?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(n){return this._rotation=n||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(n){return this._rotationAlignment=n||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(n){return this._pitchAlignment=n&&n!=="auto"?n:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Ns={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Xn,Yi=0,Cr=!1;const Mc={maxWidth:100,unit:"metric"};function La(f,n,s){const h=s&&s.maxWidth||100,m=f._container.clientHeight/2,b=f.unproject([0,m]),T=f.unproject([h,m]),C=b.distanceTo(T);if(s&&s.unit==="imperial"){const I=3.2808*C;I>5280?kn(n,h,I/5280,f._getUIString("ScaleControl.Miles")):kn(n,h,I,f._getUIString("ScaleControl.Feet"))}else s&&s.unit==="nautical"?kn(n,h,C/1852,f._getUIString("ScaleControl.NauticalMiles")):C>=1e3?kn(n,h,C/1e3,f._getUIString("ScaleControl.Kilometers")):kn(n,h,C,f._getUIString("ScaleControl.Meters"))}function kn(f,n,s,h){const m=function(b){const T=Math.pow(10,`${Math.floor(b)}`.length-1);let C=b/T;return C=C>=10?10:C>=5?5:C>=3?3:C>=2?2:C>=1?1:function(I){const z=Math.pow(10,Math.ceil(-Math.log(I)/Math.LN10));return Math.round(I*z)/z}(C),T*C}(s);f.style.width=n*(m/s)+"px",f.innerHTML=`${m}&nbsp;${h}`}const tr={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},bu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Eo(f){if(f){if(typeof f=="number"){const n=Math.round(Math.sqrt(.5*Math.pow(f,2)));return{center:new c.pointGeometry(0,0),top:new c.pointGeometry(0,f),"top-left":new c.pointGeometry(n,n),"top-right":new c.pointGeometry(-n,n),bottom:new c.pointGeometry(0,-f),"bottom-left":new c.pointGeometry(n,-n),"bottom-right":new c.pointGeometry(-n,-n),left:new c.pointGeometry(f,0),right:new c.pointGeometry(-f,0)}}if(f instanceof c.pointGeometry||Array.isArray(f)){const n=c.pointGeometry.convert(f);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:c.pointGeometry.convert(f.center||[0,0]),top:c.pointGeometry.convert(f.top||[0,0]),"top-left":c.pointGeometry.convert(f["top-left"]||[0,0]),"top-right":c.pointGeometry.convert(f["top-right"]||[0,0]),bottom:c.pointGeometry.convert(f.bottom||[0,0]),"bottom-left":c.pointGeometry.convert(f["bottom-left"]||[0,0]),"bottom-right":c.pointGeometry.convert(f["bottom-right"]||[0,0]),left:c.pointGeometry.convert(f.left||[0,0]),right:c.pointGeometry.convert(f.right||[0,0])}}return Eo(new c.pointGeometry(0,0))}const ui={supported:F,setRTLTextPlugin:c.setRTLTextPlugin,getRTLTextPluginStatus:c.getRTLTextPluginStatus,Map:class extends is{constructor(f){var n;if(c.PerformanceUtils.mark(c.PerformanceMarkers.create),(f=c.extend({},Pl,f)).minZoom!=null&&f.maxZoom!=null&&f.minZoom>f.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(f.minPitch!=null&&f.maxPitch!=null&&f.minPitch>f.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(f.minPitch!=null&&f.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(f.maxPitch!=null&&f.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new _l(f.minZoom,f.maxZoom,f.minPitch,f.maxPitch,f.renderWorldCopies),{bearingSnap:f.bearingSnap}),this._interactive=f.interactive,this._cooperativeGestures=f.cooperativeGestures,this._maxTileCacheSize=f.maxTileCacheSize,this._failIfMajorPerformanceCaveat=f.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=f.preserveDrawingBuffer,this._antialias=f.antialias,this._trackResize=f.trackResize,this._bearingSnap=f.bearingSnap,this._refreshExpiredTiles=f.refreshExpiredTiles,this._fadeDuration=f.fadeDuration,this._crossSourceCollisions=f.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=f.collectResourceTiming,this._renderTaskQueue=new Cl,this._controls=[],this._mapId=c.uniqueId(),this._locale=c.extend({},Rs,f.locale),this._clickTolerance=f.clickTolerance,this._pixelRatio=(n=f.pixelRatio)!==null&&n!==void 0?n:devicePixelRatio,this._requestManager=new me(f.transformRequest),typeof f.container=="string"){if(this._container=document.getElementById(f.container),!this._container)throw new Error(`Container '${f.container}' not found.`)}else{if(!(f.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=f.container}if(f.maxBounds&&this.setMaxBounds(f.maxBounds),c.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new hn(this,f),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=f.hash&&new Ea(typeof f.hash=="string"&&f.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch}),f.bounds&&(this.resize(),this.fitBounds(f.bounds,c.extend({},f.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=f.localIdeographFontFamily,f.style&&this.setStyle(f.style,{localIdeographFontFamily:f.localIdeographFontFamily}),f.attributionControl&&this.addControl(new bo({customAttribution:f.customAttribution})),f.maplibreLogo&&this.addControl(new Ml,f.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",s=>{this._update(s.dataType==="style"),this.fire(new c.Event(`${s.dataType}data`,s))}),this.on("dataloading",s=>{this.fire(new c.Event(`${s.dataType}dataloading`,s))}),this.on("dataabort",s=>{this.fire(new c.Event("sourcedataabort",s))})}_getMapId(){return this._mapId}addControl(f,n){if(n===void 0&&(n=f.getDefaultPosition?f.getDefaultPosition():"top-right"),!f||!f.onAdd)return this.fire(new c.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const s=f.onAdd(this);this._controls.push(f);const h=this._controlPositions[n];return n.indexOf("bottom")!==-1?h.insertBefore(s,h.firstChild):h.appendChild(s),this}removeControl(f){if(!f||!f.onRemove)return this.fire(new c.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(f);return n>-1&&this._controls.splice(n,1),f.onRemove(this),this}hasControl(f){return this._controls.indexOf(f)>-1}calculateCameraOptionsFromTo(f,n,s,h){return h==null&&this.style.terrain&&(h=this.transform.getElevation(s,this.style.terrain)),super.calculateCameraOptionsFromTo(f,n,s,h)}resize(f){const n=this._containerDimensions(),s=n[0],h=n[1];this._resizeCanvas(s,h,this.getPixelRatio()),this.transform.resize(s,h),this.painter.resize(s,h,this.getPixelRatio());const m=!this._moving;return m&&(this.stop(),this.fire(new c.Event("movestart",f)).fire(new c.Event("move",f))),this.fire(new c.Event("resize",f)),m&&this.fire(new c.Event("moveend",f)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(f){const[n,s]=this._containerDimensions();this._pixelRatio=f,this._resizeCanvas(n,s,f),this.painter.resize(n,s,f)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(f){return this.transform.setMaxBounds(c.LngLatBounds.convert(f)),this._update()}setMinZoom(f){if((f=f??-2)>=-2&&f<=this.transform.maxZoom)return this.transform.minZoom=f,this._update(),this.getZoom()<f&&this.setZoom(f),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(f){if((f=f??22)>=this.transform.minZoom)return this.transform.maxZoom=f,this._update(),this.getZoom()>f&&this.setZoom(f),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(f){if((f=f??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(f>=0&&f<=this.transform.maxPitch)return this.transform.minPitch=f,this._update(),this.getPitch()<f&&this.setPitch(f),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(f){if((f=f??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(f>=this.transform.minPitch)return this.transform.maxPitch=f,this._update(),this.getPitch()>f&&this.setPitch(f),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(f){return this.transform.renderWorldCopies=f,this._update()}project(f){return this.transform.locationPoint(c.LngLat.convert(f),this.style&&this.style.terrain)}unproject(f){return this.transform.pointLocation(c.pointGeometry.convert(f),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(f,n,s){if(f==="mouseenter"||f==="mouseover"){let h=!1;return{layer:n,listener:s,delegates:{mousemove:b=>{const T=this.getLayer(n)?this.queryRenderedFeatures(b.point,{layers:[n]}):[];T.length?h||(h=!0,s.call(this,new Qr(f,this,b.originalEvent,{features:T}))):h=!1},mouseout:()=>{h=!1}}}}if(f==="mouseleave"||f==="mouseout"){let h=!1;return{layer:n,listener:s,delegates:{mousemove:T=>{(this.getLayer(n)?this.queryRenderedFeatures(T.point,{layers:[n]}):[]).length?h=!0:h&&(h=!1,s.call(this,new Qr(f,this,T.originalEvent)))},mouseout:T=>{h&&(h=!1,s.call(this,new Qr(f,this,T.originalEvent)))}}}}{const h=m=>{const b=this.getLayer(n)?this.queryRenderedFeatures(m.point,{layers:[n]}):[];b.length&&(m.features=b,s.call(this,m),delete m.features)};return{layer:n,listener:s,delegates:{[f]:h}}}}on(f,n,s){if(s===void 0)return super.on(f,n);const h=this._createDelegatedListener(f,n,s);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[f]=this._delegatedListeners[f]||[],this._delegatedListeners[f].push(h);for(const m in h.delegates)this.on(m,h.delegates[m]);return this}once(f,n,s){if(s===void 0)return super.once(f,n);const h=this._createDelegatedListener(f,n,s);for(const m in h.delegates)this.once(m,h.delegates[m]);return this}off(f,n,s){return s===void 0?super.off(f,n):(this._delegatedListeners&&this._delegatedListeners[f]&&(h=>{const m=this._delegatedListeners[f];for(let b=0;b<m.length;b++){const T=m[b];if(T.layer===n&&T.listener===s){for(const C in T.delegates)this.off(C,T.delegates[C]);return m.splice(b,1),this}}})(),this)}queryRenderedFeatures(f,n){if(!this.style)return[];let s;if(n!==void 0||f===void 0||f instanceof c.pointGeometry||Array.isArray(f)||(n=f,f=void 0),n=n||{},(f=f||[[0,0],[this.transform.width,this.transform.height]])instanceof c.pointGeometry||typeof f[0]=="number")s=[c.pointGeometry.convert(f)];else{const h=c.pointGeometry.convert(f[0]),m=c.pointGeometry.convert(f[1]);s=[h,new c.pointGeometry(m.x,h.y),m,new c.pointGeometry(h.x,m.y),h]}return this.style.queryRenderedFeatures(s,n,this.transform)}querySourceFeatures(f,n){return this.style.querySourceFeatures(f,n)}setStyle(f,n){return(n=c.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},n)).diff!==!1&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&f?(this._diffStyle(f,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(f,n))}setTransformRequest(f){return this._requestManager.setTransformRequest(f),this}_getUIString(f){const n=this._locale[f];if(n==null)throw new Error(`Missing UI string '${f}'`);return n}_updateStyle(f,n){return this.style&&(this.style.setEventedParent(null),this.style._remove()),f?(this.style=new mr(this,n||{}),this.style.setEventedParent(this,{style:this.style}),typeof f=="string"?this.style.loadURL(f):this.style.loadJSON(f),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new mr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(f,n){if(typeof f=="string"){const s=this._requestManager.transformRequest(f,c.ResourceType.Style);c.getJSON(s,(h,m)=>{h?this.fire(new c.ErrorEvent(h)):m&&this._updateDiff(m,n)})}else typeof f=="object"&&this._updateDiff(f,n)}_updateDiff(f,n){try{this.style.setState(f)&&this._update(!0)}catch(s){c.warnOnce(`Unable to perform style diff: ${s.message||s.error||s}.  Rebuilding the style from scratch.`),this._updateStyle(f,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():c.warnOnce("There is no style added to the map.")}addSource(f,n){return this._lazyInitEmptyStyle(),this.style.addSource(f,n),this._update(!0)}isSourceLoaded(f){const n=this.style&&this.style.sourceCaches[f];if(n!==void 0)return n.loaded();this.fire(new c.ErrorEvent(new Error(`There is no source with ID '${f}'`)))}setTerrain(f){return this.style.setTerrain(f),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const f=this.style&&this.style.sourceCaches;for(const n in f){const s=f[n]._tiles;for(const h in s){const m=s[h];if(m.state!=="loaded"&&m.state!=="errored")return!1}}return!0}addSourceType(f,n,s){return this._lazyInitEmptyStyle(),this.style.addSourceType(f,n,s)}removeSource(f){return this.style.removeSource(f),this._update(!0)}getSource(f){return this.style.getSource(f)}addImage(f,n,{pixelRatio:s=1,sdf:h=!1,stretchX:m,stretchY:b,content:T}={}){if(this._lazyInitEmptyStyle(),n instanceof HTMLImageElement||c.isImageBitmap(n)){const{width:C,height:I,data:z}=c.exported.getImageData(n);this.style.addImage(f,{data:new c.RGBAImage({width:C,height:I},z),pixelRatio:s,stretchX:m,stretchY:b,content:T,sdf:h,version:0})}else{if(n.width===void 0||n.height===void 0)return this.fire(new c.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:C,height:I,data:z}=n,R=n;this.style.addImage(f,{data:new c.RGBAImage({width:C,height:I},new Uint8Array(z)),pixelRatio:s,stretchX:m,stretchY:b,content:T,sdf:h,version:0,userImage:R}),R.onAdd&&R.onAdd(this,f)}}}updateImage(f,n){const s=this.style.getImage(f);if(!s)return this.fire(new c.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const h=n instanceof HTMLImageElement||c.isImageBitmap(n)?c.exported.getImageData(n):n,{width:m,height:b,data:T}=h;if(m===void 0||b===void 0)return this.fire(new c.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==s.data.width||b!==s.data.height)return this.fire(new c.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const C=!(n instanceof HTMLImageElement||c.isImageBitmap(n));s.data.replace(T,C),this.style.updateImage(f,s)}hasImage(f){return f?!!this.style.getImage(f):(this.fire(new c.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(f){this.style.removeImage(f)}loadImage(f,n){c.getImage(this._requestManager.transformRequest(f,c.ResourceType.Image),n)}listImages(){return this.style.listImages()}addLayer(f,n){return this._lazyInitEmptyStyle(),this.style.addLayer(f,n),this._update(!0)}moveLayer(f,n){return this.style.moveLayer(f,n),this._update(!0)}removeLayer(f){return this.style.removeLayer(f),this._update(!0)}getLayer(f){return this.style.getLayer(f)}setLayerZoomRange(f,n,s){return this.style.setLayerZoomRange(f,n,s),this._update(!0)}setFilter(f,n,s={}){return this.style.setFilter(f,n,s),this._update(!0)}getFilter(f){return this.style.getFilter(f)}setPaintProperty(f,n,s,h={}){return this.style.setPaintProperty(f,n,s,h),this._update(!0)}getPaintProperty(f,n){return this.style.getPaintProperty(f,n)}setLayoutProperty(f,n,s,h={}){return this.style.setLayoutProperty(f,n,s,h),this._update(!0)}getLayoutProperty(f,n){return this.style.getLayoutProperty(f,n)}setLight(f,n={}){return this._lazyInitEmptyStyle(),this.style.setLight(f,n),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(f,n){return this.style.setFeatureState(f,n),this._update()}removeFeatureState(f,n){return this.style.removeFeatureState(f,n),this._update()}getFeatureState(f){return this.style.getFeatureState(f)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let f=0,n=0;return this._container&&(f=this._container.clientWidth||400,n=this._container.clientHeight||300),[f,n]}_setupContainer(){const f=this._container;f.classList.add("maplibregl-map","mapboxgl-map");const n=this._canvasContainer=U.create("div","maplibregl-canvas-container mapboxgl-canvas-container",f);this._interactive&&n.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=U.create("canvas","maplibregl-canvas mapboxgl-canvas",n),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const s=this._containerDimensions();this._resizeCanvas(s[0],s[1],this.getPixelRatio());const h=this._controlContainer=U.create("div","maplibregl-control-container mapboxgl-control-container",f),m=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(b=>{m[b]=U.create("div",`maplibregl-ctrl-${b} mapboxgl-ctrl-${b}`,h)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const f=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=U.create("div","maplibregl-cooperative-gesture-screen",f);let n="Control",s=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(s=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map",n="Meta"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${s}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,document.addEventListener("keydown",h=>{h.key===n&&(this._metaPress=!0)}),document.addEventListener("keyup",h=>{h.key===n&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",h=>{this._onCooperativeGesture(h,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(f,n,s){this._canvas.width=s*f,this._canvas.height=s*n,this._canvas.style.width=`${f}px`,this._canvas.style.height=`${n}px`}_setupPainter(){const f=c.extend({},F.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),n=this._canvas.getContext("webgl",f)||this._canvas.getContext("experimental-webgl",f);n?(this.painter=new wc(n,this.transform),c.exported$1.testSupport(n)):this.fire(new c.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(f){f.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new c.Event("webglcontextlost",{originalEvent:f}))}_contextRestored(f){this._setupPainter(),this.resize(),this._update(),this.fire(new c.Event("webglcontextrestored",{originalEvent:f}))}_onMapScroll(f){if(f.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(f,n,s){return!n&&s<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(f){return this.style?(this._styleDirty=this._styleDirty||f,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(f){return this._update(),this._renderTaskQueue.add(f)}_cancelRenderFrame(f){this._renderTaskQueue.remove(f)}_render(f){let n,s=0;const h=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(n=h.createQueryEXT(),h.beginQueryEXT(h.TIME_ELAPSED_EXT,n),s=c.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(f),this._removed)return;let m=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const T=this.transform.zoom,C=c.exported.now();this.style.zoomHistory.update(T,C);const I=new c.EvaluationParameters(T,{now:C,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),z=I.crossFadingFactor();z===1&&z===this._crossFadingFactor||(m=!0,this._crossFadingFactor=z),this.style.update(I)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new c.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,c.PerformanceUtils.mark(c.PerformanceMarkers.load),this.fire(new c.Event("load"))),this.style&&(this.style.hasTransitions()||m)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const T=c.exported.now()-s;h.endQueryEXT(h.TIME_ELAPSED_EXT,n),setTimeout(()=>{const C=h.getQueryObjectEXT(n,h.QUERY_RESULT_EXT)/1e6;h.deleteQueryEXT(n),this.fire(new c.Event("gpu-timing-frame",{cpuTime:T,gpuTime:C}))},50)}if(this.listens("gpu-timing-layer")){const T=this.painter.collectGpuTimers();setTimeout(()=>{const C=this.painter.queryGpuTimers(T);this.fire(new c.Event("gpu-timing-layer",{layerTimes:C}))},50)}const b=this._sourcesDirty||this._styleDirty||this._placementDirty;return b||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new c.Event("idle")),!this._loaded||this._fullyLoaded||b||(this._fullyLoaded=!0,c.PerformanceUtils.mark(c.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const n of this._controls)n.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const f=this.painter.context.gl.getExtension("WEBGL_lose_context");f&&f.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),U.remove(this._canvasContainer),U.remove(this._controlContainer),this._cooperativeGestures&&U.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),c.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new c.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=c.exported.frame(f=>{c.PerformanceUtils.frame(f),this._frame=null,this._render(f)}))}_onWindowOnline(){this._update()}_onWindowResize(f){this._trackResize&&this.resize({originalEvent:f})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(f){this._showTileBoundaries!==f&&(this._showTileBoundaries=f,this._update())}get showPadding(){return!!this._showPadding}set showPadding(f){this._showPadding!==f&&(this._showPadding=f,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(f){this._showCollisionBoxes!==f&&(this._showCollisionBoxes=f,f?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(f){this._showOverdrawInspector!==f&&(this._showOverdrawInspector=f,this._update())}get repaint(){return!!this._repaint}set repaint(f){this._repaint!==f&&(this._repaint=f,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(f){this._vertices=f,this._update()}_setCacheLimits(f,n){c.setCacheLimits(f,n)}get version(){return"2.4.0"}},NavigationControl:class{constructor(f){this.options=c.extend({},Or,f),this._container=U.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",n=>n.preventDefault()),this.options.showZoom&&(c.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",n=>this._map.zoomIn({},{originalEvent:n})),U.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",n=>this._map.zoomOut({},{originalEvent:n})),U.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(c.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",n=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})}),this._compassIcon=U.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const f=this._map.getZoom(),n=f===this._map.getMaxZoom(),s=f===this._map.getMinZoom();this._zoomInButton.disabled=n,this._zoomOutButton.disabled=s,this._zoomInButton.setAttribute("aria-disabled",n.toString()),this._zoomOutButton.setAttribute("aria-disabled",s.toString())}_rotateCompassArrow(){const f=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=f}onAdd(f){return this._map=f,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Aa(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){U.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(f,n){const s=U.create("button",f,this._container);return s.type="button",s.addEventListener("click",n),s}_setButtonTitle(f,n){const s=this._map._getUIString(`NavigationControl.${n}`);f.title=s,f.setAttribute("aria-label",s)}},GeolocateControl:class extends c.Evented{constructor(f){super(),this.options=c.extend({},Ns,f),c.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(f){var n;return this._map=f,this._container=U.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),n=this._setupUI,Xn!==void 0?n(Xn):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(s=>{Xn=s.state!=="denied",n(Xn)}):(Xn=!!window.navigator.geolocation,n(Xn)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),U.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Yi=0,Cr=!1}_isOutOfMapMaxBounds(f){const n=this._map.getMaxBounds(),s=f.coords;return n&&(s.longitude<n.getWest()||s.longitude>n.getEast()||s.latitude<n.getSouth()||s.latitude>n.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(f){if(this._map){if(this._isOutOfMapMaxBounds(f))return this._setErrorState(),this.fire(new c.Event("outofmaxbounds",f)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=f,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(f),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(f),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new c.Event("geolocate",f)),this._finish()}}_updateCamera(f){const n=new c.LngLat(f.coords.longitude,f.coords.latitude),s=f.coords.accuracy,h=this._map.getBearing(),m=c.extend({bearing:h},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(s),m,{geolocateSource:!0})}_updateMarker(f){if(f){const n=new c.LngLat(f.coords.longitude,f.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=f.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const f=this._map._container.clientHeight/2,n=this._map.unproject([0,f]),s=this._map.unproject([1,f]),h=n.distanceTo(s),m=Math.ceil(2*this._accuracy/h);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(f){if(this._map){if(this.options.trackUserLocation)if(f.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(f.code===3&&Cr)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new c.Event("error",f)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(f){if(this._container.addEventListener("contextmenu",n=>n.preventDefault()),this._geolocateButton=U.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),U.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",f===!1){c.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}else{const n=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=U.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new So(this._dotElement),this._circleElement=U.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new So({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",n=>{n.geolocateSource||this._watchState!=="ACTIVE_LOCK"||n.originalEvent&&n.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new c.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return c.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Yi--,Cr=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new c.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let f;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Yi++,Yi>1?(f={maximumAge:6e5,timeout:0},Cr=!0):(f=this.options.positionOptions,Cr=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,f)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:bo,LogoControl:Ml,ScaleControl:class{constructor(f){this.options=c.extend({},Mc,f),c.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){La(this._map,this._container,this.options)}onAdd(f){return this._map=f,this._container=U.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",f.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){U.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(f){this.options.unit=f,La(this._map,this._container,this.options)}},FullscreenControl:class{constructor(f){this._fullscreen=!1,f&&f.container&&(f.container instanceof HTMLElement?this._container=f.container:c.warnOnce("Full screen control 'container' must be a DOM element.")),c.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(f){return this._map=f,this._container||(this._container=this._map.getContainer()),this._controlContainer=U.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",c.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){U.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const f=this._fullscreenButton=U.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);U.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",f).setAttribute("aria-hidden","true"),f.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const f=this._getTitle();this._fullscreenButton.setAttribute("aria-label",f),this._fullscreenButton.title=f}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(f){this.options=f,c.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(f){return this._map=f,this._container=U.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=U.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),U.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){U.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends c.Evented{constructor(f){super(),this.options=c.extend(Object.create(tr),f),c.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(f){return this._map&&this.remove(),this._map=f,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new c.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&U.remove(this._content),this._container&&(U.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new c.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(f){return this._lngLat=c.LngLat.convert(f),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(f){return this.setDOMContent(document.createTextNode(f))}setHTML(f){const n=document.createDocumentFragment(),s=document.createElement("body");let h;for(s.innerHTML=f;h=s.firstChild,h;)n.appendChild(h);return this.setDOMContent(n)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(f){return this.options.maxWidth=f,this._update(),this}setDOMContent(f){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=U.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(f),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(f){this._container&&this._container.classList.add(f)}removeClassName(f){this._container&&this._container.classList.remove(f)}setOffset(f){return this.options.offset=f,this._update(),this}toggleClassName(f){if(this._container)return this._container.classList.toggle(f)}_createCloseButton(){this.options.closeButton&&(this._closeButton=U.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(f){this._update(f.point)}_onMouseMove(f){this._update(f.point)}_onDrag(f){this._update(f.point)}_update(f){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=U.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=U.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(b=>this._container.classList.add(b)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=vt(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!f))return;const n=this._pos=this._trackPointer&&f?f:this._map.project(this._lngLat);let s=this.options.anchor;const h=Eo(this.options.offset);if(!s){const b=this._container.offsetWidth,T=this._container.offsetHeight;let C;C=n.y+h.bottom.y<T?["top"]:n.y>this._map.transform.height-T?["bottom"]:[],n.x<b/2?C.push("left"):n.x>this._map.transform.width-b/2&&C.push("right"),s=C.length===0?"bottom":C.join("-")}const m=n.add(h[s]).round();U.setTransform(this._container,`${Et[s]} translate(${m.x}px,${m.y}px)`),Ds(this._container,s,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const f=this._container.querySelector(bu);f&&f.focus()}_onClose(){this.remove()}},Marker:So,Style:mr,LngLat:c.LngLat,LngLatBounds:c.LngLatBounds,Point:c.pointGeometry,MercatorCoordinate:c.MercatorCoordinate,Evented:c.Evented,AJAXError:c.AJAXError,config:c.config,CanvasSource:ve,GeoJSONSource:It,ImageSource:lt,RasterDEMTileSource:Xe,RasterTileSource:mt,VectorTileSource:At,VideoSource:nt,prewarm:function(){Qe().acquire(nr)},clearPrewarmedResources:function(){const f=Je;f&&(f.isPreloaded()&&f.numActive()===1?(f.release(nr),Je=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return Rn.workerCount},set workerCount(f){Rn.workerCount=f},get maxParallelImageRequests(){return c.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(f){c.config.MAX_PARALLEL_IMAGE_REQUESTS=f},clearStorage(f){c.clearTileCache(f)},workerUrl:"",addProtocol(f,n){c.config.REGISTERED_PROTOCOLS[f]=n},removeProtocol(f){delete c.config.REGISTERED_PROTOCOLS[f]}};return Tn.extend(ui,{isSafari:c.isSafari,getPerformanceMetrics:c.PerformanceUtils.getPerformanceMetrics}),ui});var P=E;return P})}(lp)),lp.exports}var Qg=M_();const ru=vp(Qg),C_=cg({__proto__:null,default:ru},[Qg]),bp={version:8,sources:{"osm-tiles":{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}},layers:[{id:"osm-tiles",type:"raster",source:"osm-tiles",minzoom:0,maxzoom:19}]},id=Nf(Bf(a=>({origin:null,destination:null,routeGeo:null,routeSteps:[],alternativeRoutes:[],setOrigin:p=>a({origin:p}),setDestination:p=>a({destination:p}),setRouteGeo:p=>a({routeGeo:p}),setRouteSteps:p=>a({routeSteps:p}),setAlternativeRoutes:p=>a({alternativeRoutes:p}),clearRoute:()=>a({origin:null,destination:null,routeGeo:null,routeSteps:[],alternativeRoutes:[]})}),{name:"route-storage",version:1}));function e0(a,p){var P;const v=a[0],w=a[1],E=((P=p.geometry)==null?void 0:P.coordinates[0])||p.coordinates[0];let k=!1;for(let c=0,F=E.length-1;c<E.length;F=c++){const N=E[c][0],V=E[c][1],$=E[F][0],U=E[F][1];V>w!=U>w&&v<($-N)*(w-V)/(U-V)+N&&(k=!k)}return k}function P_(a,p){return{type:"FeatureCollection",features:a.features.filter(w=>e0(w.geometry.coordinates,p))}}function Ef(a,p){try{return e0(a,p)}catch(v){return console.warn("Error in pointInPolygon:",v),!1}}function od(a,p){const v=[a[1],a[0]];return p.find(w=>Ef(v,w))}function I_(a,p){if(!a||!p||a===p)return!1;const v=a.geometry.coordinates[0],w=p.geometry.coordinates[0];for(let E=0;E<v.length-1;E++)for(let k=0;k<w.length-1;k++)if(Math.min(Math.hypot(v[E][0]-w[k][0],v[E][1]-w[k][1]),Math.hypot(v[E+1][0]-w[k][0],v[E+1][1]-w[k][1]),Math.hypot(v[E][0]-w[k+1][0],v[E][1]-w[k+1][1]),Math.hypot(v[E+1][0]-w[k+1][0],v[E+1][1]-w[k+1][1]))<1e-5)return!0;return!1}function rh(a,p){if(!p)return[];try{const v={type:"FeatureCollection",features:a.map((E,k)=>({type:"Feature",geometry:{type:"Point",coordinates:[E[1],E[0]]},properties:{index:k}}))};return P_(v,p).features.map(E=>E.properties.index)}catch(v){return console.warn("Error in getNodesInPolygon:",v),[]}}function A_(a,p,v){var E;const w=[];for(let k=0;k<a.length;k++){const P=a[k];if(((E=P[2])==null?void 0:E.nodeFunction)==="connection"){const F=[P[0],P[1]],N=od(F,[p,v]);if(N===p||N===v){const V=rh(a,p),$=rh(a,v);V.length>0&&$.length>0&&w.push({index:k,node:P,polygon:N})}}}return w}function L_(a,p,v){const w=rh(a,p),E=rh(a,v);if(w.length===0||E.length===0)return[];const k=[];for(const P of w)for(const c of E){const F=Math.hypot(a[P][0]-a[c][0],a[P][1]-a[c][1]);k.push({from:P,to:c,distance:F})}return k.sort((P,c)=>P.distance-c.distance).slice(0,2)}function t0(a,p,v,w){function E(V,$,U){const me=($[0]-V[0])*(U[1]-$[1])-($[1]-V[1])*(U[0]-$[0]);return Math.abs(me)<1e-10?0:me>0?1:2}function k(V,$,U){return $[1]<=Math.max(V[1],U[1])&&$[1]>=Math.min(V[1],U[1])&&$[0]<=Math.max(V[0],U[0])&&$[0]>=Math.min(V[0],U[0])}const P=E(a,p,v),c=E(a,p,w),F=E(v,w,a),N=E(v,w,p);return!!(P!==c&&F!==N||P===0&&k(a,v,p)||c===0&&k(a,w,p)||F===0&&k(v,a,w)||N===0&&k(v,p,w))}function Tf(a,p,v,w){var P;const E=[a[1],a[0]],k=[p[1],p[0]];for(const c of v){if(rh(w,c).length>0)continue;const N=c.geometry.coordinates[0];for(let V=0;V<N.length-1;V++){const $=N[V],U=N[V+1];if(t0(E,k,$,U))return console.log(`Line blocked by empty polygon: ${(P=c.properties)==null?void 0:P.subGroupValue}`),!0}}return!1}function n0(a,p,v){const w=[a[1],a[0]],E=[p[1],p[0]];for(const k of v){const P=k.geometry.coordinates[0],c=[a[1],a[0]],F=[p[1],p[0]],N=Ef(c,k),V=Ef(F,k);if(!(N&&V))for(let $=0;$<P.length-1;$++){const U=P[$],me=P[$+1];if(t0(w,E,U,me))return!0}}return!1}function qm(a,p,v){var N,V;const w=p[a],E=[w[0],w[1]],k=od(E,v),P=(N=w[2])==null?void 0:N.nodeFunction,c=[],F=4e-4;for(let $=0;$<p.length;$++){if($===a)continue;const U=p[$],me=[U[0],U[1]],he=od(me,v),J=(V=U[2])==null?void 0:V.nodeFunction,oe=Math.hypot(E[0]-me[0],E[1]-me[1]);let _e=!1,ke="",Ee=oe;P==="connection"||J==="connection"?oe<=F&&(_e=!0,ke="connection-priority",Ee=oe*1):k&&he&&k===he?(_e=!0,ke="same-polygon",Ee=oe):oe<=F?Tf(E,me,v,p)?(_e=!1,ke="blocked-by-empty-polygon"):k&&he&&k!==he?A_(p,k,he).length>0?(_e=!0,ke="cross-polygon-penalized",Ee=oe*2):(_e=!0,ke="cross-polygon-80m",Ee=oe*1.2):k&&he&&I_(k,he)?L_(p,k,he).some(tt=>tt.from===a&&tt.to===$||tt.from===$&&tt.to===a)?(_e=!0,ke="closest-door-between-polygons",Ee=oe*.8):(_e=!0,ke="cross-polygon-80m",Ee=oe*1.2):(_e=!0,ke="cross-polygon-80m",Ee=oe):!n0(E,me,v)&&!Tf(E,me,v,p)&&k&&he&&k===he&&(_e=!0,ke="unobstructed-same-polygon",Ee=oe),_e&&c.push({index:$,weight:Ee,reason:ke})}return c}function z_(a,p,v,w){var _e,ke,Ee,Ve,Me,tt;console.log(`Starting Enhanced Dijkstra with Connection Priority from node ${p} to ${v}`),console.log(`Start node: [${a[p][0]}, ${a[p][1]}] - ${((_e=a[p][2])==null?void 0:_e.name)||((ke=a[p][2])==null?void 0:ke.nodeFunction)}`),console.log(`End node: [${a[v][0]}, ${a[v][1]}] - ${((Ee=a[v][2])==null?void 0:Ee.name)||((Ve=a[v][2])==null?void 0:Ve.nodeFunction)}`);const E=[a[p][0],a[p][1]],k=od(E,w),P=k?(Me=k.properties)==null?void 0:Me.subGroupValue:"outside",c=(tt=a[p][2])==null?void 0:tt.nodeFunction;console.log(`Start node: area=${P}, type=${c}`);const F=qm(p,a,w);console.log(`Start node has ${F.length} neighbors with connection priority:`),F.sort((it,Ge)=>{var Ct,Rt;const kt=((Ct=a[it.index][2])==null?void 0:Ct.nodeFunction)==="connection",_t=((Rt=a[Ge.index][2])==null?void 0:Rt.nodeFunction)==="connection";return kt&&!_t?-1:!kt&&_t?1:it.weight-Ge.weight}).slice(0,10).forEach(it=>{var Rt,At,mt;const Ge=[a[it.index][0],a[it.index][1]],kt=od(Ge,w),_t=kt?(Rt=kt.properties)==null?void 0:Rt.subGroupValue:"outside",Ct=(At=a[it.index][2])==null?void 0:At.nodeFunction;console.log(`  -> Node ${it.index} (${((mt=a[it.index][2])==null?void 0:mt.name)||"unnamed"}) area=${_t}, type=${Ct}, weight=${it.weight.toFixed(6)}, reason=${it.reason}`)});const V={},$={},U=new Set;a.forEach((it,Ge)=>{V[Ge]=1/0,$[Ge]=null,U.add(Ge)}),V[p]=0;let me=0;const he=a.length*2;for(;U.size>0&&me<he;){me++;let it=null,Ge=1/0;for(const _t of U)V[_t]<Ge&&(Ge=V[_t],it=_t);if(it===null||Ge===1/0){console.log(`Dijkstra stopped: no more reachable nodes (iteration ${me})`);break}if(it===v){console.log(`Dijkstra reached destination in ${me} iterations`);break}U.delete(it);const kt=qm(it,a,w);for(const _t of kt){if(!U.has(_t.index))continue;const Ct=V[it]+_t.weight;Ct<V[_t.index]&&(V[_t.index]=Ct,$[_t.index]=it,_t.index===v&&console.log(`Found path to destination! Distance: ${Ct}, via ${_t.reason}`))}}console.log(`Final distance to destination: ${V[v]}`);const J=[];let oe=v;if(V[v]===1/0)return console.log("Destination is not reachable from start node"),[];for(;oe!==null;)J.unshift(a[oe]),oe=$[oe];return console.log(`Enhanced Dijkstra found path with ${J.length} nodes`),console.log("Path details:"),J.forEach((it,Ge)=>{var Ct,Rt;const kt=(Ct=it[2])==null?void 0:Ct.nodeFunction,_t=((Rt=it[2])==null?void 0:Rt.name)||"unnamed";console.log(`  ${Ge}: ${_t} (${kt})`)}),J.length>0&&J[0]===a[p]?J:[]}function j_(a,p,v){if(console.log("analyzeRoute called with Connection Priority Logic"),!v)return{path:[a.coordinates,p.coordinates],steps:[]};const w=v.features.filter(J=>{var oe;return J.geometry.type==="Point"&&((oe=J.properties)==null?void 0:oe.nodeFunction)==="door"}),E=v.features.filter(J=>{var oe;return J.geometry.type==="Point"&&((oe=J.properties)==null?void 0:oe.nodeFunction)==="connection"}),k=v.features.filter(J=>{var oe,_e;return J.geometry.type==="Polygon"&&((_e=(oe=J.properties)==null?void 0:oe.subGroupValue)==null?void 0:_e.startsWith("sahn-"))});console.log(`Found ${w.length} doors, ${E.length} connections, ${k.length} sahns`);const P=[];w.forEach(J=>{const[oe,_e]=J.geometry.coordinates;P.push([_e,oe,J.properties,0,J])}),E.forEach(J=>{const[oe,_e]=J.geometry.coordinates;P.push([_e,oe,J.properties,0,J])}),console.log(`Total nodes available: ${P.length}`),console.log("Polygon analysis with turf.js:");const c=[];k.forEach(J=>{var _e;const oe=rh(P,J);console.log(`  ${(_e=J.properties)==null?void 0:_e.subGroupValue}: ${oe.length} nodes`),oe.length===0&&c.push(J)}),console.log(`Found ${c.length} empty polygons:`),c.forEach(J=>{var oe;console.log(`  - ${(oe=J.properties)==null?void 0:oe.subGroupValue}`)});function F(J,oe=0){const _e=[];for(let ke=0;ke<P.length;ke++){const Ee=P[ke],Ve=[Ee[0],Ee[1]];if(!n0(J,Ve,k)&&!Tf(J,Ve,k,P)){const Me=Math.hypot(J[0]-Ve[0],J[1]-Ve[1]);_e.push({index:ke,node:Ee,distance:Me})}}return _e.sort((ke,Ee)=>ke.distance-Ee.distance),console.log(`Found ${_e.length} unobstructed nodes from [${J[0]}, ${J[1]}]`),_e[oe]||null}const N=F(a.coordinates,0),V=F(p.coordinates,0);if(console.log("Start entry:",N?`Node ${N.index}`:"None"),console.log("End entry:",V?`Node ${V.index}`:"None"),!N||!V){console.log("Could not find valid entry/exit points, returning direct path");const J={type:"Feature",geometry:{type:"LineString",coordinates:[a.coordinates,p.coordinates].map(oe=>[oe[1],oe[0]])}};return{path:[a.coordinates,p.coordinates],steps:[{coordinates:p.coordinates,type:"stepArriveDestination",name:p.name||""}],geo:J,alternatives:[]}}const $=z_(P,N.index,V.index,k);if($.length===0||$.length===1){console.log("No valid path found between entry points, returning direct path");const J={type:"Feature",geometry:{type:"LineString",coordinates:[a.coordinates,p.coordinates].map(oe=>[oe[1],oe[0]])}};return{path:[a.coordinates,p.coordinates],steps:[{coordinates:p.coordinates,type:"stepArriveDestination",name:p.name||""}],geo:J,alternatives:[]}}const U=[a.coordinates],me=[];$.forEach(J=>{const oe=[J[0],J[1]];U.push(oe),J[2].nodeFunction==="door"?me.push({coordinates:oe,type:"stepPassDoor",name:J[2].name||""}):J[2].nodeFunction==="connection"&&me.push({coordinates:oe,type:"stepPassConnection",title:J[2].subGroup||J[2].name||""})}),U.push(p.coordinates),me.push({coordinates:p.coordinates,type:"stepArriveDestination",name:p.name||""});const he={type:"Feature",geometry:{type:"LineString",coordinates:U.map(J=>[J[1],J[0]])}};return console.log(`Final path has ${U.length} points`),{path:U,geo:he,steps:me,alternatives:[]}}const R_=()=>{var nt,ve,Ue,Mt;const[a,p]=ee.useState(!1),[v,w]=ee.useState(!0),E=oc(),k=Ui(),{origin:P,destination:c,routeGeo:F,setOrigin:N,setDestination:V,setRouteGeo:$,setRouteSteps:U,setAlternativeRoutes:me}=id(),he=sh(gt=>gt.language),[J,oe]=ee.useState(P||{name:k.formatMessage({id:"defaultBabRezaName"}),coordinates:[36.297,59.6069]}),[_e,ke]=ee.useState(c||{name:k.formatMessage({id:"destSahnEnqelabName"}),coordinates:[36.2975,59.6072]}),Ee=F;ee.useEffect(()=>{N(J)},[J,N]),ee.useEffect(()=>{V(_e)},[_e,V]);const[Ve,Me]=ee.useState("walking"),[tt,it]=ee.useState("male"),[Ge,kt]=ee.useState({time:"9",distance:"75"}),[_t,Ct]=ee.useState(!1),[Rt,At]=ee.useState(null);ed.useEffect(()=>{window.scrollTo(0,0)},[]),ed.useEffect(()=>{Ve==="walking"?kt({time:"9",distance:"75"}):Ve==="electric-car"?kt({time:"5",distance:"120"}):Ve==="wheelchair"&&kt({time:"12",distance:"65"})},[Ve]),ee.useEffect(()=>{J.coordinates||navigator.geolocation.getCurrentPosition(gt=>oe(bt=>({...bt,coordinates:[gt.coords.latitude,gt.coords.longitude]})),gt=>console.error("gps error",gt))},[J.coordinates]),ee.useEffect(()=>{const gt=wp(he);fetch(gt).then(bt=>bt.json()).then(At).catch(bt=>console.error("failed to load geojson",bt))},[he]),ee.useEffect(()=>{_e.coordinates||ke(gt=>({...gt,coordinates:[36.2975,59.6072]}))},[_e.coordinates]),ee.useEffect(()=>{if(!Rt)return;const{geo:gt,steps:bt,alternatives:zt}=j_(J,_e,Rt);$(gt),U(bt),me(zt)},[Rt,J,_e,$,U,me]);const mt=()=>{p(!0),w(!v);const gt=J;oe(_e),ke(gt)},Pt=()=>{switch(Ve){case"walking":return y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#181717",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M13 4m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),y.jsx("path",{d:"M7 21l3 -4"}),y.jsx("path",{d:"M16 21l-2 -4l-3 -3l1 -6"}),y.jsx("path",{d:"M6 12l2 -3l4 -1l3 3l3 1"})]});case"electric-car":return y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"#181717",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M14 5a1 1 0 0 1 .694 .28l.087 .095l3.699 4.625h.52a3 3 0 0 1 2.995 2.824l.005 .176v4a1 1 0 0 1 -1 1h-1.171a3.001 3.001 0 0 1 -5.658 0h-4.342a3.001 3.001 0 0 1 -5.658 0h-1.171a1 1 0 0 1 -1 -1v-6l.007 -.117l.008 -.056l.017 -.078l.012 -.036l.014 -.05l2.014 -5.034a1 1 0 0 1 .928 -.629zm-7 11a1 1 0 1 0 0 2a1 1 0 0 0 0 -2m10 0a1 1 0 1 0 0 2a1 1 0 0 0 0 -2m-6 -9h-5.324l-1.2 3h6.524zm2.52 0h-.52v3h2.92z"})]});case"wheelchair":return y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#181717",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M11 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),y.jsx("path",{d:"M11 7l0 8l4 0l4 5"}),y.jsx("path",{d:"M11 11l5 0"}),y.jsx("path",{d:"M7 11.5a5 5 0 1 0 6 7.5"})]});default:return null}},Xe=()=>{E("/rng")},It=()=>{E("/rop")},We=()=>{Ct(!1)},lt=()=>{Ct(!1)};return y.jsxs("div",{className:"final-search-page",lang:he,children:[y.jsxs("div",{className:"header",children:[y.jsx("button",{className:"back-btn",onClick:()=>E(-1),children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M5 12l14 0"}),y.jsx("path",{d:"M15 16l4 -4"}),y.jsx("path",{d:"M15 8l4 4"})]})}),y.jsx("h1",{children:y.jsx(qe,{id:"finalSearchTitle"})}),y.jsxs("div",{className:"menu-container",children:[y.jsx("button",{className:`menu-btn ${_t?"active":""}`,onClick:()=>Ct(!_t),children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),y.jsx("path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),y.jsx("path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]})}),y.jsxs("div",{className:`menu-dropdown ${_t?"open":""}`,children:[y.jsxs("button",{className:"menu-item",onClick:We,children:[y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M17.286 21.09q -1.69 .001 -5.288 -2.615q -3.596 2.617 -5.288 2.616q -2.726 0 -.495 -6.8q -9.389 -6.775 2.135 -6.775h.076q 1.785 -5.516 3.574 -5.516q 1.785 0 3.574 5.516h.076q 11.525 0 2.133 6.774q 2.23 6.802 -.497 6.8"})]}),y.jsx(qe,{id:"saveDestination"})]}),y.jsxs("button",{className:"menu-item",onClick:lt,children:[y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M6 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),y.jsx("path",{d:"M18 6m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),y.jsx("path",{d:"M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),y.jsx("path",{d:"M8.7 10.7l6.6 -3.4"}),y.jsx("path",{d:"M8.7 13.3l6.6 3.4"})]}),y.jsx(qe,{id:"shareRoute"})]})]})]})]}),y.jsx("div",{className:"mpr",children:y.jsxs(_p,{mapLib:ru,mapStyle:bp,style:{width:"100%",height:"100%"},initialViewState:{longitude:((((nt=J.coordinates)==null?void 0:nt[1])??0)+(((ve=_e.coordinates)==null?void 0:ve[1])??0))/2,latitude:((((Ue=J.coordinates)==null?void 0:Ue[0])??0)+(((Mt=_e.coordinates)==null?void 0:Mt[0])??0))/2,zoom:18},attributionControl:!1,children:[J.coordinates&&y.jsx(ys,{longitude:J.coordinates[1],latitude:J.coordinates[0],anchor:"bottom",children:y.jsx("div",{className:"marker-circle"})}),_e.coordinates&&y.jsx(ys,{longitude:_e.coordinates[1],latitude:_e.coordinates[0],anchor:"bottom",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",viewBox:"0 0 24 24",fill:"#F44336",children:y.jsx("path",{d:"M18.364 4.636a9 9 0 0 1 .203 12.519l-.203 .21l-4.243 4.242a3 3 0 0 1 -4.097 .135l-.144 -.135l-4.244 -4.243a9 9 0 0 1 12.728 -12.728zm-6.364 3.364a3 3 0 1 0 0 6a3 3 0 1 0 0 -6z"})})}),Ee&&y.jsx(nh,{id:"main-route",type:"geojson",data:Ee,children:y.jsx(th,{id:"main-line",type:"line",paint:{"line-color":"#2196F3","line-width":6}})}),y.jsx(Ff,{})]})}),y.jsxs("div",{className:"location-section-container",children:[y.jsxs("div",{className:"location-icons-container",children:[y.jsx("div",{className:"location-icon origin-icon",children:y.jsx("div",{className:"n-circle"})}),y.jsxs("div",{className:"tdots",children:[y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#e0e0e0","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"icon icon-tabler icons-tabler-outline icon-tabler-dots-vertical",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),y.jsx("path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),y.jsx("path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]}),y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#e0e0e0","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"icon icon-tabler icons-tabler-outline icon-tabler-dots-vertical",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),y.jsx("path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),y.jsx("path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]})]}),y.jsx("div",{className:"location-icon destination-icon",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"#F44336",children:y.jsx("path",{d:"M18.364 4.636a9 9 0 0 1 .203 12.519l-.203 .21l-4.243 4.242a3 3 0 0 1 -4.097 .135l-.144 -.135l-4.244 -4.243a9 9 0 0 1 12.728 -12.728zm-6.364 3.364a3 3 0 1 0 0 6a3 3 0 1 0 0 -6z"})})})]}),y.jsxs("div",{className:"location-section",children:[y.jsxs("div",{className:"location-input origin-input",children:[y.jsx("div",{className:"location-details",children:y.jsx("div",{className:"location-name",children:J.name})}),y.jsx("div",{className:`current-location-label ${v?"visible":"hidden"}`,children:y.jsx(qe,{id:"mapCurrentLocationName"})})]}),y.jsx("div",{className:"swap-container",children:y.jsx("button",{className:"swap-btn",onClick:mt,children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`swap-icon ${v?"":"rotated"}`,children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M3 9l4 -4l4 4m-4 -4v14"}),y.jsx("path",{d:"M21 15l-4 4l-4 -4m4 4v-14"})]})})}),y.jsx("div",{className:"location-input destination-input",children:y.jsx("div",{className:"location-details",children:y.jsx("div",{className:"location-name",children:_e.name})})})]})]}),y.jsxs("div",{className:"options-section",children:[y.jsxs("div",{className:"options-row",children:[y.jsxs("button",{className:`transport-btn ${Ve==="walking"?"active":""}`,onClick:()=>Me("walking"),children:[y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:Ve==="walking"?"#2196F3":"#666",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M13 4m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),y.jsx("path",{d:"M7 21l3 -4"}),y.jsx("path",{d:"M16 21l-2 -4l-3 -3l1 -6"}),y.jsx("path",{d:"M6 12l2 -3l4 -1l3 3l3 1"})]}),y.jsx(qe,{id:"transportWalk"})]}),y.jsxs("button",{className:`transport-btn ${Ve==="electric-car"?"active":""}`,onClick:()=>Me("electric-car"),children:[y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:Ve==="electric-car"?"#2196F3":"#666",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M14 5a1 1 0 0 1 .694 .28l.087 .095l3.699 4.625h.52a3 3 0 0 1 2.995 2.824l.005 .176v4a1 1 0 0 1 -1 1h-1.171a3.001 3.001 0 0 1 -5.658 0h-4.342a3.001 3.001 0 0 1 -5.658 0h-1.171a1 1 0 0 1 -1 -1v-6l.007 -.117l.008 -.056l.017 -.078l.012 -.036l.014 -.05l2.014 -5.034a1 1 0 0 1 .928 -.629zm-7 11a1 1 0 1 0 0 2a1 1 0 0 0 0 -2m10 0a1 1 0 1 0 0 2a1 1 0 0 0 0 -2m-6 -9h-5.324l-1.2 3h6.524zm2.52 0h-.52v3h2.92z"})]}),y.jsx(qe,{id:"transportCar"})]}),y.jsxs("button",{className:`transport-btn ${Ve==="wheelchair"?"active":""}`,onClick:()=>Me("wheelchair"),children:[y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:Ve==="wheelchair"?"#2196F3":"#666",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M11 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),y.jsx("path",{d:"M11 7l0 8l4 0l4 5"}),y.jsx("path",{d:"M11 11l5 0"}),y.jsx("path",{d:"M7 11.5a5 5 0 1 0 6 7.5"})]}),y.jsx(qe,{id:"transportWheelchair"})]})]}),y.jsx("div",{className:"options-divider"}),y.jsxs("div",{className:"options-row",children:[y.jsxs("button",{className:`gender-btn ${tt==="male"?"active":""}`,onClick:()=>it("male"),children:[y.jsx("div",{className:"gender-circle",children:tt==="male"&&y.jsx("div",{className:"gender-circle-fill"})}),y.jsx(qe,{id:"routeForMen"})]}),y.jsxs("button",{className:`gender-btn ${tt==="female"?"active":""}`,onClick:()=>it("female"),children:[y.jsx("div",{className:"gender-circle",children:tt==="female"&&y.jsx("div",{className:"gender-circle-fill"})}),y.jsx(qe,{id:"routeForWomen"})]})]})]}),y.jsxs("div",{className:"route-info",children:[y.jsx("div",{className:"route-summary",children:y.jsx(qe,{id:"routeSummary",values:{origin:J.name,destination:_e.name}})}),y.jsxs("div",{className:"info-details",children:[y.jsxs("div",{className:"info-time",children:[Pt(),y.jsxs("span",{children:[Ge.time," ",y.jsx(qe,{id:"minutesUnit"})]})]}),y.jsxs("div",{className:"info-distance",children:[y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#181717",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M3 19a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}),y.jsx("path",{d:"M19 7a2 2 0 1 0 0 -4a2 2 0 0 0 0 4z"}),y.jsx("path",{d:"M11 19h5.5a3.5 3.5 0 0 0 0 -7h-8a3.5 3.5 0 0 1 0 -7h4.5"})]}),y.jsxs("span",{children:[Ge.distance," ",y.jsx(qe,{id:"meters"})]})]})]})]}),y.jsx("div",{className:"action-gap"}),y.jsxs("div",{className:"action-buttons2",children:[y.jsxs("button",{className:"navigate-btn",onClick:Xe,children:[y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"#fff",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M11.092 2.581a1 1 0 0 1 1.754 -.116l.062 .116l8.005 17.365c.198 .566 .05 1.196 -.378 1.615a1.53 1.53 0 0 1 -1.459 .393l-7.077 -2.398l-6.899 2.338a1.535 1.535 0 0 1 -1.52 -.231l-.112 -.1c-.398 -.386 -.556 -.954 -.393 -1.556l.047 -.15l7.97 -17.276z"})]}),y.jsx(qe,{id:"startRouting"})]}),y.jsxs("button",{className:"overview-btn",onClick:It,children:[y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#2196F3",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M3 19a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}),y.jsx("path",{d:"M19 7a2 2 0 1 0 0 -4a2 2 0 0 0 0 4z"}),y.jsx("path",{d:"M11 19h5.5a3.5 3.5 0 0 0 0 -7h-8a3.5 3.5 0 0 1 0 -7h4.5"})]}),y.jsx(qe,{id:"routeOverview"})]})]})]})},D_=()=>{const[a,p]=ee.useState(null),v=oc(),w=sh(c=>c.setLanguage),E=Ui(),k=[{id:1,name:"",code:"(FA)",locale:"fa"},{id:2,name:"",code:"(Ur)",locale:"ur"},{id:3,name:"",code:"(AR)",locale:"ar"},{id:4,name:"English",code:"(EN)",locale:"en"}],P=()=>{if(a){const c=k.find(F=>F.id===a);c&&w(c.locale),v("/location")}};return y.jsxs("div",{className:"lang-page-container",children:[y.jsx("img",{src:fp,alt:E.formatMessage({id:"logoAlt"}),className:"lang-logo"}),y.jsxs("div",{className:"lang-welcome-text",children:[y.jsx("h1",{className:"welcome-heading",children:y.jsx(qe,{id:"welcome"})}),y.jsx("p",{className:"welcome-paragraph",dangerouslySetInnerHTML:{__html:E.formatMessage({id:"selectLanguage"})}})]}),y.jsx("div",{className:"lang-options-list",children:k.map(c=>y.jsxs("div",{className:`lang-option ${a===c.id?"selected":""}`,onClick:()=>p(c.id),children:[y.jsx("div",{className:"selection-circle",children:a===c.id&&y.jsx("div",{className:"inner-circle"})}),y.jsxs("div",{className:"lang-text-container",children:[y.jsx("span",{className:`lang-code lang-code-${c.code.replace(/[()]/g,"").toLowerCase()}`,children:c.code}),y.jsx("span",{className:`lang-name ${c.locale==="en"?"force-rtl":""}`,children:c.name})]})]},c.id))}),y.jsx("button",{className:`lang-login-btn ${a?"":"disabled"}`,disabled:!a,onClick:P,children:y.jsx(qe,{id:"loginButton"})})]})},N_=()=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"phone-icon",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M5 4h4l2 5l-2.5 1.5a11 11 0 0 0 5 5l1.5 -2.5l5 2v4a2 2 0 0 1 -2 2a16 16 0 0 1 -15 -15a2 2 0 0 1 2 -2"})]}),B_=()=>{const a=Ui(),[p,v]=ee.useState(""),[w,E]=ee.useState(!1),[k,P]=ee.useState(""),[c,F]=ee.useState(["","","","",""]),N=me=>/^09[0-9]{9}$/.test(me),V=me=>{const he=me.target.value.replace(/\D/g,"");he.length<=11&&v(he)},$=(me,he)=>{const J=[...c];J[he]=me.target.value,F(J),me.target.value&&he<4&&document.getElementById(`code-input-${he+1}`).focus()},U=me=>{if(me.preventDefault(),N(p)){const he=`+98-${p.slice(1,4)} ${p.slice(4,7)} ${p.slice(7)}`;P(he),E(!0)}};return w?y.jsxs("div",{className:"verification-container",children:[y.jsx("h2",{className:"verification-title",children:y.jsx(qe,{id:"enterVerification"})}),y.jsx("p",{className:"verification-description",children:y.jsx(qe,{id:"sentCode",values:{phone:y.jsx("span",{dir:"ltr",style:{display:"inline-block"},children:k})}})}),y.jsxs("div",{className:"verification-edit",children:[y.jsx("span",{children:y.jsx(qe,{id:"wrongPhone"})}),y.jsx("button",{type:"button",className:"edit-button",onClick:()=>E(!1),children:y.jsx(qe,{id:"edit"})})]}),y.jsx("div",{className:"verification-code-inputs",children:c.map((me,he)=>y.jsx("input",{id:`code-input-${he}`,type:"text",maxLength:"1",value:me,onChange:J=>$(J,he),className:"code-input",dir:"ltr"},he))}),y.jsx("div",{className:"verification-resend",children:y.jsx("span",{children:y.jsx(qe,{id:"resendCode"})})})]}):y.jsxs("form",{className:"login-form",onSubmit:U,children:[y.jsx("div",{className:"form-group",children:y.jsxs("div",{className:"phone-input-container",children:[y.jsx(N_,{}),y.jsx("input",{type:"tel",value:p,onChange:V,placeholder:a.formatMessage({id:"phonePlaceholder"}),dir:"ltr",className:"phone-input",maxLength:"11"})]})}),y.jsx("button",{type:"submit",className:`login-button ${N(p)?"active":""}`,disabled:!N(p),children:y.jsx(qe,{id:"loginButton"})})]})},F_=()=>{const a=Ui();return y.jsx("div",{className:"login-page",children:y.jsxs("div",{className:"login-container",children:[y.jsx("div",{className:"logo-container",children:y.jsx("img",{src:fp,alt:a.formatMessage({id:"logoAlt"}),className:"login-logo"})}),y.jsxs("div",{className:"login-text-content",children:[y.jsx("h1",{className:"login-title",children:y.jsx(qe,{id:"loginTitle"})}),y.jsx("p",{className:"login-description",dangerouslySetInnerHTML:{__html:a.formatMessage({id:"enterPhone"})}})]}),y.jsx(B_,{}),y.jsx("div",{className:"login-terms",children:y.jsx("p",{dangerouslySetInnerHTML:{__html:a.formatMessage({id:"terms"})}})})]})})},O_={sahn:"#4caf50",eyvan:"#2196f3",ravaq:"#9c27b0",masjed:"#ff9800",madrese:"#3f51b5",khadamat:"#607d8b",elmi:"#00bcd4",cemetery:"#795548",other:"#757575"},$_={door:"",connection:"",elevator:"",escalator:"",ramp:"",stairs:"",service:"",poi:"",qrcode:"",other:""},U_=(a,p,v=35,w=1)=>{const E=O_[a]||"#999",k=$_[p]||"";return y.jsx("div",{style:{width:v,height:v,backgroundColor:E,opacity:w,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:18,fontWeight:"bold",boxShadow:"0 2px 6px rgba(0,0,0,0.3)"},children:k})},V_=({setUserLocation:a,selectedDestination:p,isSwapped:v,onMapClick:w,isSelectingLocation:E,selectedCategory:k})=>{const P=Ui(),[c,F]=ee.useState({latitude:36.288,longitude:59.6157,zoom:16}),[N,V]=ee.useState(null),[$,U]=ee.useState(null),[me,he]=ee.useState(null),[J,oe]=ee.useState(null),[_e,ke]=ee.useState(null),Ee=sh(Ge=>Ge.language),Ve=ee.useCallback(Ge=>{F(Ge.viewState)},[]);ee.useEffect(()=>{if(p&&p.coordinates){const[Ge,kt]=p.coordinates;U({lat:Ge,lng:kt})}else U(null)},[p]),ee.useEffect(()=>{const Ge=sessionStorage.getItem("qrLat"),kt=sessionStorage.getItem("qrLng");if(Ge&&kt){const At={lat:parseFloat(Ge),lng:parseFloat(kt)};V(At),a({name:P.formatMessage({id:"mapCurrentLocationName"}),coordinates:[At.lat,At.lng]}),F(mt=>({...mt,latitude:At.lat,longitude:At.lng}));return}const _t=At=>{const mt={lat:At.coords.latitude,lng:At.coords.longitude};V(mt),a({name:P.formatMessage({id:"mapCurrentLocationName"}),coordinates:[mt.lat,mt.lng]}),F(Pt=>({...Pt,latitude:mt.lat,longitude:mt.lng}))},Ct=At=>{console.error("Error getting location",At);const mt={lat:36.288,lng:59.6157};V(mt),a({name:P.formatMessage({id:"defaultBabRezaName"}),coordinates:[mt.lat,mt.lng]})};navigator.geolocation.getCurrentPosition(_t,Ct,{enableHighAccuracy:!1,timeout:1e4,maximumAge:6e4});const Rt=navigator.geolocation.watchPosition(_t,Ct,{enableHighAccuracy:!1,maximumAge:0,timeout:1e4});return()=>navigator.geolocation.clearWatch(Rt)},[a,P]),ee.useEffect(()=>{if(v&&N&&$){const Ge=N;V($),U(Ge)}},[v]),ee.useEffect(()=>{const Ge=wp(Ee);fetch(Ge).then(kt=>kt.json()).then(oe).catch(kt=>console.error("failed to load geojson",kt))},[Ee]);const Me=Ge=>{if(E){const{lng:kt,lat:_t}=Ge.lngLat,Ct={lat:_t,lng:kt};he(Ct),w&&w(Ct)}};ee.useEffect(()=>{if(N&&$&&J){const Ge=J.features.filter(At=>{var mt;return At.geometry.type==="Point"&&["door","connection"].includes((mt=At.properties)==null?void 0:mt.nodeFunction)}),kt=At=>{let mt=null,Pt=1/0;return Ge.forEach(Xe=>{const[It,We]=Xe.geometry.coordinates,lt=Math.hypot(It-At.lng,We-At.lat);lt<Pt&&(Pt=lt,mt={lng:It,lat:We})}),mt},_t=kt(N),Ct=kt($),Rt=[[N.lng,N.lat],..._t?[[_t.lng,_t.lat]]:[],...Ct?[[Ct.lng,Ct.lat]]:[],[$.lng,$.lat]];ke(Rt)}else ke(null)},[N,$,J]);const tt=J?J.features.filter(Ge=>Ge.geometry.type==="Point"):[],it=J?J.features.filter(Ge=>Ge.geometry.type==="Polygon"||Ge.geometry.type==="MultiPolygon"):[];return y.jsxs(_p,{mapLib:ru,mapStyle:bp,style:{width:"100%",height:"100%"},...c,onMove:Ve,onClick:Me,interactive:!0,children:[N&&y.jsx(ys,{longitude:N.lng,latitude:N.lat,anchor:"center",children:y.jsx("div",{style:{width:20,height:20,backgroundColor:"white",borderRadius:"50%",border:"6px solid #4285F4"}})}),$&&y.jsx(ys,{longitude:$.lng,latitude:$.lat,anchor:"bottom",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"#F44336",children:y.jsx("path",{d:"M18.364 4.636a9 9 0 0 1 .203 12.519l-.203 .21l-4.243 4.242a3 3 0 0 1 -4.097 .135l-.144 -.135l-4.244 -4.243a9 9 0 0 1 12.728 -12.728zm-6.364 3.364a3 3 0 1 0 0 6a3 3 0 1 0 0 -6z"})})}),me&&E&&y.jsx(ys,{longitude:me.lng,latitude:me.lat,anchor:"center",children:y.jsx("div",{style:{width:24,height:24,backgroundColor:"#1E90FF",borderRadius:"50%",border:"3px solid white"}})}),_e&&y.jsx(nh,{id:"route",type:"geojson",data:{type:"Feature",geometry:{type:"LineString",coordinates:_e}},children:y.jsx(th,{id:"route-line",type:"line",paint:{"line-color":"#4285F4","line-width":4,"line-opacity":.7}})}),it.length>0&&y.jsx(nh,{id:"polygons",type:"geojson",data:{type:"FeatureCollection",features:it},children:y.jsx(th,{id:"polygon-lines",type:"line",paint:{"line-color":"#333","line-width":2}})}),tt.map((Ge,kt)=>{var lt;const[_t,Ct]=Ge.geometry.coordinates,{group:Rt,nodeFunction:At}=Ge.properties||{},mt=k&&Ge.properties&&Ge.properties[k.property]===k.value,Pt=!!k,Xe=Pt?mt?40:25:35,It=Pt?mt?1:.4:1,We=((lt=Ge.properties)==null?void 0:lt.uniqueId)||kt;return y.jsx(ys,{longitude:_t,latitude:Ct,anchor:"center",children:y.jsxs("div",{style:{position:"relative"},children:[U_(Rt,At,Xe,It),mt&&y.jsx("div",{style:{position:"absolute",top:-4,left:-4,right:-4,bottom:-4,border:"2px solid #e53935",borderRadius:"50%"}})]})},We)})]})},cp=[{value:"sahn",label:"groupCourtyardPlural",icon:"courtyard",property:"group",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 12v.01"/><path d="M3 21h18"/><path d="M6 21v-16a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v16"/></svg>'},{value:"eyvan",label:"groupEyvanPlural",icon:"eyvan",property:"group",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21l18 0"/><path d="M4 21v-15a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v15"/><path d="M9 21v-8a3 3 0 0 1 6 0v8"/></svg>'},{value:"ravaq",label:"groupRavaqPlural",icon:"shrine",property:"group",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 18l2 -13l2 -2l2 2l2 13"/><path d="M5 21v-3h14v3"/><path d="M3 21l18 0"/></svg>'},{value:"masjed",label:"groupMosques",icon:"mosque",property:"group",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21h7v-2a2 2 0 1 1 4 0v2h7"/><path d="M4 21v-10"/><path d="M20 21v-10"/><path d="M4 16h3v-3h10v3h3"/><path d="M17 13a5 5 0 0 0 -10 0"/><path d="M21 10.5c0 -.329 -.077 -.653 -.224 -.947l-.776 -1.553l-.776 1.553a2.118 2.118 0 0 0 -.224 .947a.5 .5 0 0 0 .5 .5h1a.5 .5 0 0 0 .5 -.5z"/><path d="M5 10.5c0 -.329 -.077 -.653 -.224 -.947l-.776 -1.553l-.776 1.553a2.118 2.118 0 0 0 -.224 .947a.5 .5 0 0 0 .5 .5h1a.5 .5 0 0 0 .5 -.5z"/><path d="M12 2a2 2 0 1 0 2 2"/><path d="M12 6v2"/></svg>'},{value:"madrese",label:"groupSchools",icon:"school",property:"group",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 9l-10 -4l-10 4l10 4l10 -4v6"/><path d="M6 10.6v5.4a6 3 0 0 0 12 0v-5.4"/></svg>'},{value:"khadamat",label:"groupServices",icon:"services",property:"group",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21h4l13 -13a1.5 1.5 0 0 0 -4 -4l-13 13v4"/><path d="M14.5 5.5l4 4"/><path d="M12 8l-5 -5l-4 4l5 5"/><path d="M7 8l-1.5 1.5"/><path d="M16 12l5 5l-4 4l-5 -5"/><path d="M16 17l-1.5 1.5"/></svg>'},{value:"elmi",label:"groupCulture",icon:"culture",property:"group",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"/><path d="M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"/><path d="M3 6l0 13"/><path d="M12 6l0 13"/><path d="M21 6l0 13"/></svg>'},{value:"cemetery",label:"groupCemetery",icon:"cemetery",property:"group",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 4v16"/><path d="M19 4v16"/><path d="M9 4v16"/><path d="M15 4v16"/><path d="M3 4h18"/></svg>'},{value:"qrcode",label:"groupQRScan",icon:"qr-code",property:"group",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"/><path d="M7 17l0 .01"/><path d="M14 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"/><path d="M7 7l0 .01"/><path d="M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"/><path d="M17 7l0 .01"/><path d="M14 14l3 0"/><path d="M20 14l0 .01"/><path d="M14 14l0 3"/><path d="M14 20l3 0"/><path d="M17 17l3 0"/><path d="M20 17l0 3"/></svg>'},{value:"other",label:"groupOther",icon:"other",property:"group",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 9l3 3l-3 3"/><path d="M13 15l3 0"/><path d="M3 4m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"/></svg>'}],sp={sahn:[{value:"sahn-enqelab",label:" ",icon:"courtyard",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 12v.01"/><path d="M3 21h18"/><path d="M6 21v-16a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v16"/></svg>',description:"",img:"/img/s1.jpg"},{value:"sahn-azadi",label:" ",icon:"courtyard",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 12v.01"/><path d="M3 21h18"/><path d="M6 21v-16a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v16"/></svg>',description:"",img:"/img/s2.jpg"},{value:"sahn-jomhouri",label:"  ",icon:"courtyard",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 12v.01"/><path d="M3 21h18"/><path d="M6 21v-16a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v16"/></svg>',description:"",img:"/img/s3.jpg"},{value:"sahn-qods",label:" ",icon:"courtyard",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 12v.01"/><path d="M3 21h18"/><path d="M6 21v-16a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v16"/></svg>',description:"",img:"/img/s4.jpg"},{value:"sahn-jame-razavi",label:"  ",icon:"courtyard",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 12v.01"/><path d="M3 21h18"/><path d="M6 21v-16a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v16"/></svg>',description:"",img:"/img/s5.jpg"},{value:"sahn-ghadir",label:" ",icon:"courtyard",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 12v.01"/><path d="M3 21h18"/><path d="M6 21v-16a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v16"/></svg>',description:"",img:"/img/s6.jpg"},{value:"sahn-kosar",label:" ",icon:"courtyard",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 12v.01"/><path d="M3 21h18"/><path d="M6 21v-16a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v16"/></svg>',description:"",img:"/img/s7.jpg"},{value:"sahn-emam-hasan",label:"   ",icon:"courtyard",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 12v.01"/><path d="M3 21h18"/><path d="M6 21v-16a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v16"/></svg>',description:"",img:"/img/s8.jpg"},{value:"sahn-payambar-azam",label:"  ",icon:"courtyard",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 12v.01"/><path d="M3 21h18"/><path d="M6 21v-16a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v16"/></svg>',description:"",img:"/img/s9.jpg"}],eyvan:[{value:"eyvan-abbasi",label:" ",icon:"eyvan",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21l18 0"/><path d="M4 21v-15a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v15"/><path d="M9 21v-8a3 3 0 0 1 6 0v8"/></svg>',description:"",img:"/img/s10.png"},{value:"eyvan-talayi",label:" ",icon:"eyvan",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21l18 0"/><path d="M4 21v-15a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v15"/><path d="M9 21v-8a3 3 0 0 1 6 0v8"/></svg>',description:"",img:"/img/s11.jpg"},{value:"eyvan-saat",label:" ",icon:"eyvan",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21l18 0"/><path d="M4 21v-15a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v15"/><path d="M9 21v-8a3 3 0 0 1 6 0v8"/></svg>',description:"",img:"/img/s12.jpg"},{value:"eyvan-naqare",label:" ",icon:"eyvan",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21l18 0"/><path d="M4 21v-15a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v15"/><path d="M9 21v-8a3 3 0 0 1 6 0v8"/></svg>',description:"",img:"/img/s13.png"},{value:"eyvan-valiasr",label:" ",icon:"eyvan",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21l18 0"/><path d="M4 21v-15a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v15"/><path d="M9 21v-8a3 3 0 0 1 6 0v8"/></svg>',description:"",img:"/img/s14.jpg"},{value:"eyvan-talaye-azadi",label:"  ",icon:"eyvan",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21l18 0"/><path d="M4 21v-15a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v15"/><path d="M9 21v-8a3 3 0 0 1 6 0v8"/></svg>',description:"",img:"/img/s15.jpg"}],ravaq:[{value:"daralhefaz",label:"",icon:"shrine",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 18l2 -13l2 -2l2 2l2 13"/><path d="M5 21v-3h14v3"/><path d="M3 21l18 0"/></svg>',description:"",img:"/img/s16.jpg"},{value:"daralsiade",label:"",icon:"shrine",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 18l2 -13l2 -2l2 2l2 13"/><path d="M5 21v-3h14v3"/><path d="M3 21l18 0"/></svg>',description:"",img:"/img/s17.jpg"},{value:"daralsalam",label:"",icon:"shrine",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 18l2 -13l2 -2l2 2l2 13"/><path d="M5 21v-3h14v3"/><path d="M3 21l18 0"/></svg>',description:"",img:"/img/s18.jpg"},{value:"hatamkhani",label:" ",icon:"shrine",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 18l2 -13l2 -2l2 2l2 13"/><path d="M5 21v-3h14v3"/><path d="M3 21l18 0"/></svg>',description:"",img:"/img/s19.jpg"},{value:"gonbadallahverdi",label:"  ",icon:"shrine",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 18l2 -13l2 -2l2 2l2 13"/><path d="M5 21v-3h14v3"/><path d="M3 21l18 0"/></svg>',description:"",img:"/img/s20.jpg"},{value:"daralziafe",label:"",icon:"shrine",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 18l2 -13l2 -2l2 2l2 13"/><path d="M5 21v-3h14v3"/><path d="M3 21l18 0"/></svg>',description:"",img:"/img/s21.jpg"},{value:"tohidkhane",label:"",icon:"shrine",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 18l2 -13l2 -2l2 2l2 13"/><path d="M5 21v-3h14v3"/><path d="M3 21l18 0"/></svg>',description:"",img:"/img/s22.jpg"},{value:"daralfeyz",label:"",icon:"shrine",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 18l2 -13l2 -2l2 2l2 13"/><path d="M5 21v-3h14v3"/><path d="M3 21l18 0"/></svg>',description:"",img:"/img/s22.jpg"},{value:"daralsaade",label:"",icon:"shrine",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 18l2 -13l2 -2l2 2l2 13"/><path d="M5 21v-3h14v3"/><path d="M3 21l18 0"/></svg>',description:"",img:"/img/s24.jpg"},{value:"goharsad",label:"",icon:"shrine",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 18l2 -13l2 -2l2 2l2 13"/><path d="M5 21v-3h14v3"/><path d="M3 21l18 0"/></svg>',description:"",img:"/img/s25.jpg"}],masjed:[{value:"balasar",label:"",icon:"mosque",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21h7v-2a2 2 0 1 1 4 0v2h7"/><path d="M4 21v-10"/><path d="M20 21v-10"/><path d="M4 16h3v-3h10v3h3"/><path d="M17 13a5 5 0 0 0 -10 0"/><path d="M21 10.5c0 -.329 -.077 -.653 -.224 -.947l-.776 -1.553l-.776 1.553a2.118 2.118 0 0 0 -.224 .947a.5 .5 0 0 0 .5 .5h1a.5 .5 0 0 0 .5 -.5z"/><path d="M5 10.5c0 -.329 -.077 -.653 -.224 -.947l-.776 -1.553l-.776 1.553a2.118 2.118 0 0 0 -.224 .947a.5 .5 0 0 0 .5 .5h1a.5 .5 0 0 0 .5 -.5z"/><path d="M12 2a2 2 0 1 0 2 2"/><path d="M12 6v2"/></svg>',description:"",img:"/img/s26.jpg"},{value:"goharsad",label:"",icon:"mosque",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21h7v-2a2 2 0 1 1 4 0v2h7"/><path d="M4 21v-10"/><path d="M20 21v-10"/><path d="M4 16h3v-3h10v3h3"/><path d="M17 13a5 5 0 0 0 -10 0"/><path d="M21 10.5c0 -.329 -.077 -.653 -.224 -.947l-.776 -1.553l-.776 1.553a2.118 2.118 0 0 0 -.224 .947a.5 .5 0 0 0 .5 .5h1a.5 .5 0 0 0 .5 -.5z"/><path d="M5 10.5c0 -.329 -.077 -.653 -.224 -.947l-.776 -1.553l-.776 1.553a2.118 2.118 0 0 0 -.224 .947a.5 .5 0 0 0 .5 .5h1a.5 .5 0 0 0 .5 -.5z"/><path d="M12 2a2 2 0 1 0 2 2"/><path d="M12 6v2"/></svg>',description:"",img:"/img/s27.jpg"}],madrese:[{value:"payeen-khyaban",label:" ",icon:"school",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 9l-10 -4l-10 4l10 4l10 -4v6"/><path d="M6 10.6v5.4a6 3 0 0 0 12 0v-5.4"/></svg>',description:""},{value:"bala-khyaban",label:" ",icon:"school",svg:'<svg xmlns="http://www.w3.org/24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 9l-10 -4l-10 4l10 4l10 -4v6"/><path d="M6 10.6v5.4a6 3 0 0 0 12 0v-5.4"/></svg>',description:""},{value:"navvab",label:"",icon:"school",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 9l-10 -4l-10 4l10 4l10 -4v6"/><path d="M6 10.6v5.4a6 3 0 0 0 12 0v-5.4"/></svg>',description:""},{value:"dodar",label:"",icon:"school",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 9l-10 -4l-10 4l10 4l10 -4v6"/><path d="M6 10.6v5.4a6 3 0 0 0 12 0v-5.4"/></svg>',description:""}],khadamat:[{value:"wc",label:"",icon:"services",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21h4l13 -13a1.5 1.5 0 0 0 -4 -4l-13 13v4"/><path d="M14.5 5.5l4 4"/><path d="M12 8l-5 -5l-4 4l5 5"/><path d="M7 8l-1.5 1.5"/><path d="M16 12l5 5l-4 4l-5 -5"/><path d="M16 17l-1.5 1.5"/></svg>',description:""},{value:"telephon",label:"",icon:"services",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21h4l13 -13a1.5 1.5 0 0 0 -4 -4l-13 13v4"/><path d="M14.5 5.5l4 4"/><path d="M12 8l-5 -5l-4 4l5 5"/><path d="M7 8l-1.5 1.5"/><path d="M16 12l5 5l-4 4l-5 -5"/><path d="M16 17l-1.5 1.5"/></svg>',description:""},{value:"otag-madadjo",label:" ",icon:"services",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21h4l13 -13a1.5 1.5 0 0 0 -4 -4l-13 13v4"/><path d="M14.5 5.5l4 4"/><path d="M12 8l-5 -5l-4 4l5 5"/><path d="M7 8l-1.5 1.5"/><path d="M16 12l5 5l-4 4l-5 -5"/><path d="M16 17l-1.5 1.5"/></svg>',description:""},{value:"namaazkhane",label:"",icon:"services",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21h4l13 -13a1.5 1.5 0 0 0 -4 -4l-13 13v4"/><path d="M14.5 5.5l4 4"/><path d="M12 8l-5 -5l-4 4l5 5"/><path d="M7 8l-1.5 1.5"/><path d="M16 12l5 5l-4 4l-5 -5"/><path d="M16 17l-1.5 1.5"/></svg>',description:""},{value:"ketabkhane",label:"",icon:"services",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21h4l13 -13a1.5 1.5 0 0 0 -4 -4l-13 13v4"/><path d="M14.5 5.5l4 4"/><path d="M12 8l-5 -5l-4 4l5 5"/><path d="M7 8l-1.5 1.5"/><path d="M16 12l5 5l-4 4l-5 -5"/><path d="M16 17l-1.5 1.5"/></svg>',description:""},{value:"room",label:"",icon:"services",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21h4l13 -13a1.5 1.5 0 0 0 -4 -4l-13 13v4"/><path d="M14.5 5.5l4 4"/><path d="M12 8l-5 -5l-4 4l5 5"/><path d="M7 8l-1.5 1.5"/><path d="M16 12l5 5l-4 4l-5 -5"/><path d="M16 17l-1.5 1.5"/></svg>',description:""}],elmi:[{value:"hoze-elmiye",label:" ",icon:"culture",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"/><path d="M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"/><path d="M3 6l0 13"/><path d="M12 6l0 13"/><path d="M21 6l0 13"/></svg>',description:""},{value:"markaz-motaleat",label:" ",icon:"culture",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"/><path d="M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"/><path d="M3 6l0 13"/><path d="M12 6l0 13"/><path d="M21 6l0 13"/></svg>',description:""},{value:"uni",label:"",icon:"culture",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"/><path d="M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"/><path d="M3 6l0 13"/><path d="M12 6l0 13"/><path d="M21 6l0 13"/></svg>',description:""}],cemetery:[{value:"cemetery",label:"",icon:"cemetery",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 4v16"/><path d="M19 4v16"/><path d="M9 4v16"/><path d="M15 4v16"/><path d="M3 4h18"/></svg>',description:""},{value:"yadbod",label:"",icon:"cemetery",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 4v16"/><path d="M19 4v16"/><path d="M9 4v16"/><path d="M15 4v16"/><path d="M3 4h18"/></svg>',description:""}],qrcode:[{value:"bakhsh-control",label:" ",icon:"qr-code",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"/><path d="M7 17l0 .01"/><path d="M14 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"/><path d="M7 7l0 .01"/><path d="M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"/><path d="M17 7l0 .01"/><path d="M14 14l3 0"/><path d="M20 14l0 .01"/><path d="M14 14l0 3"/><path d="M14 20l3 0"/><path d="M17 17l3 0"/><path d="M20 17l0 3"/></svg>',description:""},{value:"cctv",label:"  ",icon:"qr-code",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"/><path d="M7 17l0 .01"/><path d="M14 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"/><path d="M7 7l0 .01"/><path d="M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"/><path d="M17 7l0 .01"/><path d="M14 14l3 0"/><path d="M20 14l0 .01"/><path d="M14 14l0 3"/><path d="M14 20l3 0"/><path d="M17 17l3 0"/><path d="M20 17l0 3"/></svg>',description:""}],other:[{value:"other",label:"",icon:"other",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 9l3 3l-3 3"/><path d="M13 15l3 0"/><path d="M3 4m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"/></svg>',description:""}]},Wm=Nf(Bf((a,p)=>({recentSearches:[],addSearch:v=>a(w=>{const E=w.recentSearches.findIndex(P=>P.name===v.name&&P.location===v.location);let k=[...w.recentSearches];return E!==-1&&k.splice(E,1),k.unshift({...v,id:v.id||Date.now()}),{recentSearches:k.slice(0,5)}}),clearSearches:()=>a({recentSearches:[]})}),{name:"recent-search-storage",version:1})),H_=()=>{const a=oc(),p=Ui(),[v,w]=ee.useState(!1),[E,k]=ee.useState(!1),[P,c]=ee.useState(null),F=sessionStorage.getItem("qrLat"),N=sessionStorage.getItem("qrLng"),V=F&&N?{name:p.formatMessage({id:"mapCurrentLocationName"}),coordinates:[parseFloat(F),parseFloat(N)]}:{name:p.formatMessage({id:"defaultBabRezaName"}),coordinates:[36.297,59.6069]},[$,U]=ee.useState(V),[me,he]=ee.useState(""),[J,oe]=ee.useState(null),[_e,ke]=ee.useState(!1),[Ee,Ve]=ee.useState(!1),[Me,tt]=ee.useState(null),[it,Ge]=ee.useState(null),kt=id(Je=>Je.setOrigin),_t=id(Je=>Je.setDestination),Ct=sh(Je=>Je.language),Rt=Wm(Je=>Je.recentSearches),At=Wm(Je=>Je.addSearch);ee.useRef(null),ee.useRef(null);const mt=ee.useRef(null),Pt=ee.useRef(null),Xe=ee.useRef(null),[It,We]=ee.useState(null),[lt,nt]=ee.useState([]),ve=Je=>{const Qe=[],Ot=tn=>{typeof tn[0]=="number"?Qe.push(tn):tn.forEach(Ot)};Ot(Je);const ln=Qe.map(tn=>tn[1]),dt=Qe.map(tn=>tn[0]);return[(Math.min(...dt)+Math.max(...dt))/2,(Math.min(...ln)+Math.max(...ln))/2]},Ue=Je=>{if(!Je)return null;const{geometry:Qe}=Je;return Qe.type==="Point"?Qe.coordinates:Qe.type==="Polygon"||Qe.type==="MultiPolygon"?ve(Qe.coordinates):null},Mt=me?lt.map(Je=>{var Ot,ln,dt;const Qe=Ue(Je);return{id:((Ot=Je.properties)==null?void 0:Ot.uniqueId)||Je.id,name:((ln=Je.properties)==null?void 0:ln.name)||"",location:((dt=Je.properties)==null?void 0:dt.subGroup)||"",coordinates:Qe?[Qe[1],Qe[0]]:null}}):Rt;ee.useEffect(()=>{$!=null&&$.coordinates&&(P!=null&&P.coordinates)&&(kt({name:$.name,coordinates:$.coordinates}),_t({name:P.name,coordinates:P.coordinates}),a("/fs"))},[$,P,a,kt,_t]);const gt=Je=>{J==="destination"?(c(Je),At(Je),w(!1)):(U({name:Je.name,coordinates:Je.coordinates}),k(!1)),he("")},bt=Je=>{he(Je.target.value)};ee.useEffect(()=>{if(me&&!It){const Je=wp(Ct);fetch(Je).then(Qe=>Qe.json()).then(We).catch(Qe=>console.error("failed to load geojson",Qe))}},[me,It,Ct]),ee.useEffect(()=>{if(It&&me){const Je=It.features.filter(Qe=>{var dt,tn;const Ot=((dt=Qe.properties)==null?void 0:dt.name)||"",ln=((tn=Qe.properties)==null?void 0:tn.subGroup)||"";return Ot.includes(me)||ln.includes(me)});nt(Je)}else nt([])},[me,It]);const zt=()=>{const Je=$;U(P?{name:P.name,coordinates:P.coordinates}:null),c(Je?{name:Je.name,location:Je.name,coordinates:Je.coordinates}:null),Xe.current&&(Xe.current.classList.add("rotate"),setTimeout(()=>{Xe.current&&Xe.current.classList.remove("rotate")},500))},Kt=Je=>{Ge(Qe=>Qe&&Qe.value===Je.value?null:Je)},Yt=Je=>{oe(Je),Je==="destination"?w(!0):(k(!0),navigator.geolocation&&navigator.geolocation.getCurrentPosition(()=>ke(!0),()=>ke(!1)))},Ft=()=>{U(Je=>({...Je,name:p.formatMessage({id:"mapCurrentLocationName"})})),k(!1)},An=()=>{Ve(!0),w(!1),k(!1)},br=Je=>{Ee&&(J==="destination"?c({name:p.formatMessage({id:"mapSelectedLocation"}),location:p.formatMessage({id:"mapSelectedLocationFromMap"}),coordinates:[Je.lat,Je.lng]}):U({name:p.formatMessage({id:"mapSelectedLocation"}),coordinates:[Je.lat,Je.lng]}),Ve(!1))},nr=()=>{he("")},Rn=()=>{Ve(!1),J==="destination"?w(!0):k(!0)};ee.useEffect(()=>{const Je=Qe=>{mt.current&&!mt.current.contains(Qe.target)&&(w(!1),k(!1),he(""))};return document.addEventListener("mousedown",Je),()=>{document.removeEventListener("mousedown",Je)}},[]),ee.useEffect(()=>{(v||E)&&Pt.current&&Pt.current.focus()},[v,E]);const si=Je=>y.jsx("div",{dangerouslySetInnerHTML:{__html:Je}});return y.jsxs("div",{className:"map-routing-page",children:[y.jsxs("header",{className:"map-routing-header",children:[Ee?y.jsx("button",{className:"map-back-button",onClick:Rn,children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-right",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M5 12l14 0"}),y.jsx("path",{d:"M15 16l4 -4"}),y.jsx("path",{d:"M15 8l4 4"})]})}):y.jsx("button",{className:"map-back-button",onClick:()=>a(-1),children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-right",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M5 12l14 0"}),y.jsx("path",{d:"M15 16l4 -4"}),y.jsx("path",{d:"M15 8l4 4"})]})}),y.jsx("h1",{className:"map-header-title",children:Ee?p.formatMessage({id:"mapSelectFromMap"}):p.formatMessage({id:"mapRoutingTitle"})}),y.jsx("button",{className:"map-profile-button",onClick:()=>a("/Profile"),children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",className:"icon icon-tabler icons-tabler-filled icon-tabler-user",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M12 2a5 5 0 1 1 -5 5l.005 -.217a5 5 0 0 1 4.995 -4.783z"}),y.jsx("path",{d:"M14 14a5 5 0 0 1 5 5v1a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-1a5 5 0 0 1 5 -5h4z"})]})})]}),!Ee&&y.jsx("div",{className:"map-categories-scroll",children:y.jsx("div",{className:"map-categories-list",children:cp.map(Je=>y.jsxs("div",{className:`map-category-item ${it&&it.value===Je.value?"active":""}`,onClick:()=>Kt(Je),children:[y.jsx("div",{className:`map-category-icon ${Je.icon}`,children:si(Je.svg)}),y.jsx("span",{className:"map-category-name",children:p.formatMessage({id:Je.label})})]},Je.value))})}),y.jsxs("div",{className:"map-routing-container",children:[y.jsx(V_,{setUserLocation:U,selectedDestination:P,onMapClick:br,isSelectingLocation:Ee,selectedCategory:it}),y.jsx("button",{className:"map-gps-button",children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M12 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),y.jsx("path",{d:"M12 12m-8 0a8 8 0 1 0 16 0a8 8 0 1 0 -16 0"}),y.jsx("path",{d:"M12 2l0 2"}),y.jsx("path",{d:"M12 20l0 2"}),y.jsx("path",{d:"M20 12l2 0"}),y.jsx("path",{d:"M2 12l2 0"})]})})]}),!v&&!E&&!Ee&&y.jsxs("div",{className:"map-destination-input-container",ref:mt,children:[y.jsxs("div",{className:"location-icons-container",children:[y.jsx("div",{className:"location-icon origin-icon",children:y.jsx("div",{className:"n-circle"})}),y.jsxs("div",{className:"tdots",children:[y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#e0e0e0","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"icon icon-tabler icons-tabler-outline icon-tabler-dots-vertical",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),y.jsx("path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),y.jsx("path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]}),y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#e0e0e0","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"icon icon-tabler icons-tabler-outline icon-tabler-dots-vertical",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),y.jsx("path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),y.jsx("path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]})]}),y.jsx("div",{className:"location-icon destination-icon",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"#F44336",children:y.jsx("path",{d:"M18.364 4.636a9 9 0 0 1 .203 12.519l-.203 .21l-4.243 4.242a3 3 0 0 1 -4.097 .135l-.144 -.135l-4.244 -4.243a9 9 0 0 1 12.728 -12.728zm-6.364 3.364a3 3 0 1 0 0 6a3 3 0 1 0 0 -6z"})})})]}),y.jsxs("div",{className:"map-location-inputs-container",children:[y.jsx("div",{className:"map-inputs-divider"}),y.jsx("div",{className:"map-current-location",onClick:()=>Yt("origin"),children:y.jsx("div",{className:"map-location-text",children:$?y.jsxs(y.Fragment,{children:[y.jsx("span",{className:"map-location-name",children:$.name}),y.jsx("span",{className:"map-location-label",children:p.formatMessage({id:"mapCurrentOriginLabel"})})]}):y.jsx("input",{type:"text",className:"map-origin-input",placeholder:p.formatMessage({id:"originPlaceholder"}),readOnly:!0})})}),y.jsx("button",{className:"map-swap-button",onClick:zt,ref:Xe,children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrows-sort",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M3 9l4 -4l4 4m-4 -4v14"}),y.jsx("path",{d:"M21 15l-4 4l-4 -4m4 4v-14"})]})}),y.jsx("div",{className:"map-destination-input-wrapper",onClick:()=>Yt("destination"),children:y.jsx("input",{type:"text",placeholder:p.formatMessage({id:"destinationPlaceholder"}),value:P?P.name:"",readOnly:!0})})]})]}),(v||E)&&y.jsxs("div",{className:`map-search-modal ${v||E?"fade-in":""}`,ref:mt,children:[y.jsx("div",{className:"map-search-header",children:y.jsxs("form",{className:"map-search-form",children:[y.jsx("button",{className:"map-modal-back-button",onClick:()=>J==="destination"?w(!1):k(!1),children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-right",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M5 12l14 0"}),y.jsx("path",{d:"M15 16l4 -4"}),y.jsx("path",{d:"M15 8l4 4"})]})}),y.jsx("input",{type:"text",placeholder:J==="destination"?p.formatMessage({id:"destinationSearchPlaceholder"}):p.formatMessage({id:"originSearchPlaceholder"}),value:me,onChange:bt,autoFocus:!0,ref:Pt}),me&&y.jsx("button",{type:"button",className:"map-clear-search",onClick:nr,children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M18 6l-12 12"}),y.jsx("path",{d:"M6 6l12 12"})]})})]})}),!me&&y.jsxs("div",{className:"map-options-section",children:[y.jsxs("div",{className:"map-option-item",onClick:An,children:[y.jsx("div",{className:"map-option-icon",children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"#1E90FF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-photo-pin",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M15 8h.01"}),y.jsx("path",{d:"M12.5 21h-6.5a3 3 0 0 1 -3 -3v-12a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v5.5"}),y.jsx("path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l2.5 2.5"}),y.jsx("path",{d:"M21.121 20.121a3 3 0 1 0 -4.242 0c.418 .419 1.125 1.045 2.121 1.879c1.051 -.89 1.759 -1.516 2.121 -1.879z"}),y.jsx("path",{d:"M19 18v.01"})]})}),y.jsx("span",{className:"map-option-text",children:y.jsx(qe,{id:"chooseFromMap"})})]}),_e&&J==="origin"&&y.jsxs("div",{className:"map-option-item",onClick:Ft,children:[y.jsx("div",{className:"map-option-icon",children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"#1E90FF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-current-location",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M12 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),y.jsx("path",{d:"M12 12m-8 0a8 8 0 1 0 16 0a8 8 0 1 0 -16 0"}),y.jsx("path",{d:"M12 2l0 2"}),y.jsx("path",{d:"M12 20l0 2"}),y.jsx("path",{d:"M20 12l2 0"}),y.jsx("path",{d:"M2 12l2 0"})]})}),y.jsx("span",{className:"map-option-text",children:p.formatMessage({id:"mapCurrentLocation"},{loc:$.name})})]})]}),!me&&y.jsxs(y.Fragment,{children:[y.jsx("h2",{className:"map-recent-title",children:p.formatMessage({id:"mapRecentSearches"})}),Rt.length===0?y.jsx("p",{className:"map-no-recent",children:p.formatMessage({id:"mapNoRecentSearches"})}):y.jsx("ul",{className:"map-destination-list",children:Rt.map(Je=>y.jsxs("li",{onClick:()=>gt(Je),children:[y.jsx("div",{className:"map-recent-icon",children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"icon icon-tabler icons-tabler-outline icon-tabler-clock-down",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M20.984 12.535a9 9 0 1 0 -8.431 8.448"}),y.jsx("path",{d:"M12 7v5l3 3"}),y.jsx("path",{d:"M19 16v6"}),y.jsx("path",{d:"M22 19l-3 3l-3 -3"})]})}),y.jsxs("div",{className:"map-destination-info",children:[y.jsx("span",{className:"map-destination-name",children:Je.name}),y.jsx("span",{className:"map-destination-location",children:Je.location})]}),y.jsx("button",{className:"map-recent-option",children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-dots-vertical",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),y.jsx("path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),y.jsx("path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]})})]},Je.id))})]}),me&&Mt.length>0&&y.jsx("ul",{className:"map-destination-list",children:Mt.map(Je=>y.jsxs("li",{onClick:()=>gt(Je),children:[y.jsx("div",{className:"map-recent-icon",children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"icon icon-tabler icons-tabler-outline icon-tabler-clock-down",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M20.984 12.535a9 9 0 1 0 -8.431 8.448"}),y.jsx("path",{d:"M12 7v5l3 3"}),y.jsx("path",{d:"M19 16v6"}),y.jsx("path",{d:"M22 19l-3 3l-3 -3"})]})}),y.jsxs("div",{className:"map-destination-info",children:[y.jsx("span",{className:"map-destination-name",children:Je.name}),y.jsx("span",{className:"map-destination-location",children:Je.location})]}),y.jsx("button",{className:"map-recent-option",children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-dots-vertical",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),y.jsx("path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),y.jsx("path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]})})]},Je.id))})]})]})},G_=({userLocation:a,routeSteps:p,currentStep:v,isInfoModalOpen:w,isMapModalOpen:E,is3DView:k,routeGeo:P})=>{const c=ee.useRef(null),F=a&&a.length===2?a:[36.297,59.606];return ee.useEffect(()=>{if(c.current){const N=setTimeout(()=>{c.current.resize(),a&&a.length===2&&c.current.flyTo({center:[a[1],a[0]],zoom:18,pitch:k?60:0})},400);return()=>clearTimeout(N)}},[E,a,k]),ee.useEffect(()=>{c.current&&c.current.easeTo({pitch:k?60:0,duration:500})},[k]),ee.useEffect(()=>{if(c.current&&P&&v<P.geometry.coordinates.length-1){const N=P.geometry.coordinates[v],V=P.geometry.coordinates[v+1],$=new ru.LngLatBounds([N[0],N[1]],[N[0],N[1]]);$.extend([V[0],V[1]]),c.current.fitBounds($,{padding:80,duration:700})}},[v,P]),y.jsxs(_p,{ref:c,mapLib:ru,mapStyle:bp,initialViewState:{longitude:F[1],latitude:F[0],zoom:18,pitch:0},attributionControl:!1,terrain:k?{source:"terrain",exaggeration:1.5}:void 0,children:[y.jsx(ys,{longitude:a[1],latitude:a[0],anchor:"bottom",children:y.jsx("div",{className:"user-marker",children:""})}),p&&v<p.length&&p[v].coordinates&&y.jsx(ys,{longitude:p[v].coordinates[1],latitude:p[v].coordinates[0],anchor:"bottom",children:y.jsx("div",{className:"current-step-marker",children:""})}),y.jsx(Ff,{})]})},q_=()=>{const a=Ui(),[p,v]=ee.useState(!0),[w,E]=ee.useState(!0),[k,P]=ee.useState(null),[c,F]=ee.useState(0),[N,V]=ee.useState([36.288,59.6157]),[$,U]=ee.useState(!1),[me,he]=ee.useState(!1),[J,oe]=ee.useState(null),[_e,ke]=ee.useState("on"),[Ee,Ve]=ee.useState(!1),[Me,tt]=ee.useState(!1),[it,Ge]=ee.useState(!1),[kt,_t]=ee.useState(!1),[Ct,Rt]=ee.useState(!1),[At,mt]=ee.useState(!1),[Pt,Xe]=ee.useState(!1),It=oc(),{routeSteps:We,routeGeo:lt,alternativeRoutes:nt}=id(),ve=Qe=>{if(!Qe)return 0;let Ot=0;return Qe.forEach(ln=>{const dt=ln.time;dt.includes(a.formatMessage({id:"minutesUnit"}))?Ot+=parseInt(dt.split(" ")[0]):dt.includes(a.formatMessage({id:"secondsUnit"}))&&(Ot+=Math.ceil(parseInt(dt.split(" ")[0])/60))}),Ot},Ue=Qe=>{if(Qe<1){const dt=Qe*60;return`${Math.round(dt)} ${a.formatMessage({id:"secondsUnit"})}`}const Ot=Math.floor(Qe),ln=Math.round((Qe-Ot)*60);return ln>0?`${Ot} ${a.formatMessage({id:"minutesUnit"})} ${ln} ${a.formatMessage({id:"secondsUnit"})}`:`${Ot} ${a.formatMessage({id:"minutesUnit"})}`},Mt=Qe=>{const Ot=new Date,ln=new Date(Ot.getTime()+Qe*6e4);let dt=ln.getHours();const tn=ln.getMinutes().toString().padStart(2,"0");return dt=dt%12,dt=dt||12,`${dt}:${tn}`};ee.useEffect(()=>{fetch("./data/routeData.json").then(Qe=>Qe.json()).then(Qe=>{const Ot=Qe.route.steps,ln=ve(Ot),dt=Ue(ln),tn=Mt(ln);P({...Qe.route,totalTime:dt,arrivalTime:tn})}).catch(Qe=>console.error("Error loading route data:",Qe))},[]),ee.useEffect(()=>{if(!We||We.length===0||!lt)return;const Qe=We.map((Sn,rr)=>{let On=0;if(rr>0){const[Hr,Le]=lt.geometry.coordinates[rr-1],[Ze,Er]=lt.geometry.coordinates[rr];On=Math.hypot(Ze-Hr,Er-Le)*1e5}const Fr=a.formatMessage({id:Sn.type},{name:Sn.name,title:Sn.title,num:rr+1});return{id:rr+1,instruction:Fr,distance:`${Math.round(On)} ${a.formatMessage({id:"meters"})}`,time:`${Math.max(1,Math.round(On/60))} ${a.formatMessage({id:"minutesUnit"})}`,coordinates:Sn.coordinates}}),Ot=ve(Qe),ln=Ue(Ot),dt=Mt(Ot),tn=Qe.reduce((Sn,rr)=>Sn+parseInt(rr.distance),0),Sr=(nt||[]).map((Sn,rr)=>{const On=Sn.steps.map((Le,Ze)=>{let Er=0;if(Ze>0){const[ir,dn]=Sn.geo.geometry.coordinates[Ze-1],[En,Qn]=Sn.geo.geometry.coordinates[Ze];Er=Math.hypot(En-ir,Qn-dn)*1e5}return{id:Ze+1,instruction:a.formatMessage({id:Le.type},{name:Le.name,title:Le.title,num:Ze+1}),distance:`${Math.round(Er)} ${a.formatMessage({id:"meters"})}`,time:`${Math.max(1,Math.round(Er/60))} ${a.formatMessage({id:"minutesUnit"})}`,coordinates:Le.coordinates}}),Fr=ve(On),Hr=On.reduce((Le,Ze)=>Le+parseInt(Ze.distance),0);return{id:rr+1,steps:On,totalTime:Ue(Fr),totalDistance:`${Hr} ${a.formatMessage({id:"meters"})}`,from:Sn.from,to:Sn.to,via:Sn.via}});P({steps:Qe,totalTime:ln,arrivalTime:dt,totalDistance:`${tn} ${a.formatMessage({id:"meters"})}`,alternativeRoutes:Sr})},[We,lt,nt]),ee.useEffect(()=>{if(!k)return;const Qe=setInterval(()=>{const Ot=ve(k.steps),ln=Mt(Ot);P(dt=>({...dt,arrivalTime:ln}))},6e4);return()=>clearInterval(Qe)},[k]),ee.useEffect(()=>{if(navigator.geolocation){const Qe={enableHighAccuracy:!0,timeout:1e4,maximumAge:0},Ot=tn=>{V([tn.coords.latitude,tn.coords.longitude])},ln=tn=>{console.warn(`ERROR(${tn.code}): ${tn.message}`),V([36.288,59.6157])},dt=navigator.geolocation.watchPosition(Ot,ln,Qe);return()=>navigator.geolocation.clearWatch(dt)}},[]),ee.useEffect(()=>{if(!k||!Ee)return;const Qe=setInterval(()=>{c<k.steps.length-1?F(Ot=>Ot+1):(Ve(!1),Xe(!1))},3e4);return()=>clearInterval(Qe)},[c,k,Ee]);const gt=()=>{v(!p)},bt=()=>{E(!w)},zt=()=>{$?(tt(!0),setTimeout(()=>{U(!1),tt(!1)},300)):(U(!0),me&&(Ge(!0),setTimeout(()=>{he(!1),Ge(!1)},300)))},Kt=()=>{me?(Ge(!0),setTimeout(()=>{he(!1),Ge(!1)},300)):(he(!0),$&&(tt(!0),setTimeout(()=>{U(!1),tt(!1)},300)))},Yt=()=>{var Ot;const Qe=!Ee;Ve(Qe),Qe&&c>=((Ot=k==null?void 0:k.steps)==null?void 0:Ot.length)-1&&F(0),!kt&&!Ct&&Xe(Qe)},Ft=Qe=>{oe(Qe)},An=Qe=>{ke(Qe)},br=()=>{mt(Pt),Xe(!1),_t(!0),E(!0)},nr=()=>{Xe(At),_t(!1)},Rn=()=>{mt(Pt),Xe(!1),Rt(!0),E(!0)},si=()=>{Xe(At),Rt(!1)},Je=Qe=>{switch(Qe){case"right":return y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-right",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M5 12l14 0"}),y.jsx("path",{d:"M15 16l4 -4"}),y.jsx("path",{d:"M15 8l4 4"})]});case"left":return y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-left",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M5 12l14 0"}),y.jsx("path",{d:"M5 12l4 4"}),y.jsx("path",{d:"M5 12l4 -4"})]});case"up":return y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-up",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M12 5l0 14"}),y.jsx("path",{d:"M16 9l-4 -4"}),y.jsx("path",{d:"M8 9l4 -4"})]});case"down":return y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-down",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M12 5l0 14"}),y.jsx("path",{d:"M16 15l-4 4"}),y.jsx("path",{d:"M8 15l4 4"})]});case"bend-right":return y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-merge-alt-left",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M8 7l4 -4l4 4"}),y.jsx("path",{d:"M18 21v.01"}),y.jsx("path",{d:"M18 18.01v.01"}),y.jsx("path",{d:"M17 15.02v.01"}),y.jsx("path",{d:"M14 13.03v.01"}),y.jsx("path",{d:"M12 3v5.394a6.737 6.737 0 0 1 -3 5.606a6.737 6.737 0 0 0 -3 5.606v1.394"})]});case"bend-left":return y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-merge-alt-right",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M16 7l-4 -4l-4 4"}),y.jsx("path",{d:"M6 21v.01"}),y.jsx("path",{d:"M6 18.01v.01"}),y.jsx("path",{d:"M7 15.02v.01"}),y.jsx("path",{d:"M10 13.03v.01"}),y.jsx("path",{d:"M12 3v5.394a6.737 6.737 0 0 0 3 5.606a6.737 6.737 0 0 1 3 5.606v1.394"})]});case"arrived":return y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"#e74c3c",className:"icon icon-tabler icons-tabler-filled icon-tabler-map-pin",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M18.364 4.636a9 9 0 0 1 .203 12.519l-.203 .21l-4.243 4.242a3 3 0 0 1 -4.097 .135l-.144 -.135l-4.244 -4.243a9 9 0 0 1 12.728 -12.728zm-6.364 3.364a3 3 0 1 0 0 6a3 3 0 0 0 0 -6z"})]});default:return y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-right",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M5 12l14 0"}),y.jsx("path",{d:"M15 16l4 -4"}),y.jsx("path",{d:"M15 8l4 4"})]})}};return k?y.jsxs("div",{className:"routing-page",children:[w&&p&&!kt&&!Ct&&y.jsx("div",{className:"info-modal-overlay",onClick:bt}),($||me)&&y.jsx("div",{className:"modal-overlay",onClick:()=>{$&&zt(),me&&Kt()}}),($||Me)&&y.jsxs("div",{className:`emergency-modal ${Me?"closing":""}`,children:[y.jsx("div",{className:"modal-toggle2 emergency-toggle",onClick:zt,children:y.jsx("div",{className:"toggle-handle2"})}),y.jsxs("div",{className:"emergency-modal-content",children:[y.jsx("h3",{className:"emergency-modal-title",children:y.jsx(qe,{id:"emergencyTitle"})}),y.jsx("p",{className:"emergency-modal-subtitle",children:y.jsx(qe,{id:"emergencySubtitle"})}),y.jsxs("div",{className:"emergency-options",children:[y.jsx("button",{className:`emergency-option ${J==="fire"?"selected":""}`,onClick:()=>Ft("fire"),children:y.jsx(qe,{id:"emergencyFire"})}),y.jsx("button",{className:`emergency-option ${J==="theft"?"selected":""}`,onClick:()=>Ft("theft"),children:y.jsx(qe,{id:"emergencyTheft"})}),y.jsx("button",{className:`emergency-option ${J==="medical"?"selected":""}`,onClick:()=>Ft("medical"),children:y.jsx(qe,{id:"emergencyMedical"})}),y.jsx("button",{className:`emergency-option ${J==="missing"?"selected":""}`,onClick:()=>Ft("missing"),children:y.jsx(qe,{id:"emergencyMissing"})})]}),y.jsx("div",{className:"emergency-description",children:y.jsx("textarea",{placeholder:a.formatMessage({id:"emergencyPlaceholder"}),className:"emergency-textarea"})}),y.jsx("button",{className:"emergency-submit-button",children:y.jsx(qe,{id:"emergencySubmit"})})]})]}),(me||it)&&y.jsxs("div",{className:`sound-modal ${it?"closing":""}`,children:[y.jsx("div",{className:"modal-toggle2 sound-toggle",onClick:Kt,children:y.jsx("div",{className:"toggle-handle2"})}),y.jsxs("div",{className:"sound-modal-content",children:[y.jsx("h3",{className:"sound-modal-title",children:y.jsx(qe,{id:"soundSettingsTitle"})}),y.jsxs("div",{className:"sound-options",children:[y.jsxs("div",{className:"option-box",children:[y.jsx("button",{className:`sound-option ${_e==="on"?"selected":""}`,onClick:()=>An("on"),children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"34",height:"34",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-volume",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M15 8a5 5 0 0 1 0 8"}),y.jsx("path",{d:"M17.7 5a9 9 0 0 1 0 14"}),y.jsx("path",{d:"M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5"})]})}),y.jsx("span",{className:`option-text ${_e==="on"?"selected":""}`,children:y.jsx(qe,{id:"soundOptionOn"})})]}),y.jsxs("div",{className:"option-box",children:[y.jsx("button",{className:`sound-option ${_e==="alertOnly"?"selected":""}`,onClick:()=>An("alertOnly"),children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"34",height:"34",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-alert-triangle",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M12 9v4"}),y.jsx("path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z"}),y.jsx("path",{d:"M12 16h.01"})]})}),y.jsx("span",{className:`option-text ${_e==="alertOnly"?"selected":""}`,children:y.jsx(qe,{id:"soundOptionAlertOnly"})})]}),y.jsxs("div",{className:"option-box",children:[y.jsx("button",{className:`sound-option ${_e==="off"?"selected":""}`,onClick:()=>An("off"),children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"34",height:"34",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-volume-off",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M15 8a5 5 0 0 1 1.912 4.934m-1.377 2.602a5 5 0 0 1 -.535 .464"}),y.jsx("path",{d:"M17.7 5a9 9 0 0 1 2.362 11.086m-1.676 2.299a9 9 0 0 1 -.686 .615"}),y.jsx("path",{d:"M9.069 5.054l.431 -.554a.8 .8 0 0 1 1.5 .5v2m0 4v8a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l1.294 -1.664"}),y.jsx("path",{d:"M3 3l18 18"})]})}),y.jsx("span",{className:`option-text ${_e==="off"?"selected":""}`,children:y.jsx(qe,{id:"soundOptionOff"})})]})]})]})]}),y.jsx("div",{className:"guide-text-layer",children:k.steps.map((Qe,Ot)=>y.jsxs("div",{className:`guide-step ${Ot===c?"active":""}`,style:{display:Ot<c?"none":"block",order:Ot===c?-1:Ot},children:[y.jsxs("div",{className:"step-header",children:[y.jsxs("div",{className:"step-distance-container",children:[y.jsx("span",{className:"direction-icon",children:Je(Qe.direction)}),y.jsx("span",{className:"step-distance",children:Qe.distance})]}),y.jsx("span",{className:"step-time",children:Qe.time})]}),y.jsx("p",{className:"step-instruction",children:Qe.instruction}),Ot<k.steps.length-1&&y.jsx("hr",{className:"step-divider"})]},Qe.id))}),y.jsxs("div",{className:`map-modal ${p?"open":"closed"}`,children:[y.jsx("div",{className:"modal-toggle map-toggle",onClick:gt,children:y.jsx("div",{className:"toggle-handle"})}),p&&y.jsx("div",{className:`map-container ${p?"open":"closed"} ${w?"dark-overlay":""} ${kt?"No-dark-overlay":""} ${w?"dark-overlay":""} ${Ct?"No-dark-overlay":""}`,children:y.jsx(G_,{userLocation:N,routeSteps:k.steps,currentStep:c,isInfoModalOpen:w,isMapModalOpen:p,is3DView:Pt,routeGeo:lt})}),y.jsxs("button",{className:"emergency-button",onClick:zt,children:[y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",className:"icon icon-tabler icons-tabler-filled icon-tabler-alert-triangle",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M12 1.67c.955 0 1.845 .467 2.39 1.247l.105 .16l8.114 13.548a2.914 2.914 0 0 1 -2.307 4.363l-.195 .008h-16.225a2.914 2.914 0 0 1 -2.582 -4.2l.099 -.185l8.11 -13.538a2.914 2.914 0 0 1 2.491 -1.403zm.01 13.33l-.127 .007a1 1 0 0 0 0 1.986l.117 .007l.127 -.007a1 1 0 0 0 0 -1.986l-.117 -.007zm-.01 -7a1 1 0 0 0 -.993 .883l-.007 .117v4l.007 .117a1 1 0 0 0 1.986 0l.007 -.117v-4l-.007 -.117a1 1 0 0 0 -.993 -.883z"})]}),y.jsx("span",{children:y.jsx(qe,{id:"emergencyButtonLabel"})})]}),y.jsx("div",{className:`info-modal-wrapper ${p?"visible":"hidden"}`,children:kt?y.jsx("div",{className:"all-routes-view",children:y.jsxs("div",{className:"all-routes-content",children:[y.jsxs("div",{className:"all-routes-header",children:[y.jsxs("div",{className:"all-routes-info",children:[y.jsx("span",{children:y.jsx(qe,{id:"arrivalTime"})}),y.jsx("span",{className:"all-routes-arrival-time",children:k.arrivalTime})]}),y.jsxs("div",{className:"all-routes-details",children:[y.jsxs("div",{className:"all-routes-item",children:[y.jsx("div",{className:"all-routes-icon",children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-walk",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M13 4m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),y.jsx("path",{d:"M7 21l3 -4"}),y.jsx("path",{d:"M16 21l-2 -4l-3 -3l1 -6"}),y.jsx("path",{d:"M6 12l2 -3l4 -1l3 3l3 1"})]})}),y.jsx("div",{className:"all-routes-text",children:y.jsx("span",{className:"all-routes-value",children:k.totalTime})})]}),y.jsxs("div",{className:"all-routes-item",children:[y.jsx("div",{className:"all-routes-icon",children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-route",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M3 19a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}),y.jsx("path",{d:"M19 7a2 2 0 1 0 0 -4a2 2 0 0 0 0 4z"}),y.jsx("path",{d:"M11 19h5.5a3.5 3.5 0 0 0 0 -7h-8a3.5 3.5 0 0 1 0 -7h4.5"})]})}),y.jsx("div",{className:"all-routes-text",children:y.jsx("span",{className:"all-routes-value",children:k.totalDistance})})]})]})]}),y.jsxs("button",{className:"return-to-route-button2",onClick:nr,children:[y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M11.092 2.581a1 1 0 0 1 1.754 -.116l.062 .116l8.005 17.365c.198 .566 .05 1.196 -.378 1.615a1.53 1.53 0 0 1 -1.459 .393l-7.077 -2.398l-6.899 2.338a1.535 1.535 0 0 1 -1.52 -.231l-.112 -.1c-.398 -.386 -.556 -.954 -.393 -1.556l.047 -.15l7.97 -17.276z"})]}),y.jsx("span",{className:"return-to-route-text",children:y.jsx(qe,{id:"returnToRoute"})})]})]})}):Ct?y.jsxs("div",{className:"alternative-routes-view",children:[y.jsxs("button",{className:"return-to-route-button5",onClick:si,children:[y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M11.092 2.581a1 1 0 0 1 1.754 -.116l.062 .116l8.005 17.365c.198 .566 .05 1.196 -.378 1.615a1.53 1.53 0 0 1 -1.459 .393l-7.077 -2.398l-6.899 2.338a1.535 1.535 0 0 1 -1.52 -.231l-.112 -.1c-.398 -.386 -.556 -.954 -.393 -1.556l.047 -.15l7.97 -17.276z"})]}),y.jsx("span",{className:"return-to-route-text",children:y.jsx(qe,{id:"returnToRoute"})})]}),y.jsx("div",{className:"alternative-routes-container",children:k.alternativeRoutes.map(Qe=>y.jsxs("div",{className:"alternative-route-card",children:[y.jsxs("div",{className:"route-title",children:[y.jsxs("span",{children:[y.jsx(qe,{id:"from"})," ",Qe.from]}),y.jsxs("span",{children:[y.jsx(qe,{id:"to"})," ",Qe.to]})]}),y.jsx("div",{className:"route-via",children:Qe.via.join("  ")}),y.jsxs("div",{className:"route-stats",children:[y.jsxs("div",{className:"route-stat",children:[y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-walk",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M13 4m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),y.jsx("path",{d:"M7 21l3 -4"}),y.jsx("path",{d:"M16 21l-2 -4l-3 -3l1 -6"}),y.jsx("path",{d:"M6 12l2 -3l4 -1l3 3l3 1"})]}),y.jsx("span",{children:Qe.totalTime})]}),y.jsxs("div",{className:"route-stat",children:[y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-route",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M3 19a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}),y.jsx("path",{d:"M19 7a2 2 0 1 0 0 -4a2 2 0 0 0 0 4z"}),y.jsx("path",{d:"M11 19h5.5a3.5 3.5 0 0 0 0 -7h-8a3.5 3.5 0 0 1 0 -7h4.5"})]}),y.jsx("span",{children:Qe.totalDistance})]})]}),y.jsxs("button",{className:"start-route-button7",children:[y.jsxs("svg",{className:"rbt",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M11.092 2.581a1 1 0 0 1 1.754 -.116l.062 .116l8.005 17.365c.198 .566 .05 1.196 -.378 1.615a1.53 1.53 0 0 1 -1.459 .393l-7.077 -2.398l-6.899 2.338a1.535 1.535 0 0 1 -1.52 -.231l-.112 -.1c-.398 -.386 -.556 -.954 -.393 -1.556l.047 -.15l7.97 -17.276z"})]}),y.jsx(qe,{id:"startRouting"})]})]},Qe.id))})]}):y.jsxs("div",{className:`info-modal ${w?"open":"closed"}`,children:[y.jsxs("div",{className:"info-content",children:[y.jsx("div",{className:"modal-toggle3 info-toggle",onClick:bt,children:y.jsx("div",{className:"toggle-handle3"})}),y.jsxs("div",{className:"info-header",children:[y.jsx("button",{className:"close-button",onClick:bt,children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-x",children:[y.jsx("path",{stroke:"none"}),y.jsx("path",{d:"M18 6l-12 12"}),y.jsx("path",{d:"M6 6l12 12"})]})}),y.jsxs("div",{className:"info-title",children:[y.jsxs("div",{className:"info-stat",children:[y.jsx("span",{children:y.jsx(qe,{id:"arrivalTime"})}),y.jsx("span",{className:"arrival-time",children:k.arrivalTime})]}),y.jsxs("div",{className:"info-details",children:[y.jsxs("div",{className:"info-item",children:[y.jsx("div",{className:"info-icon",children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-walk",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M13 4m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),y.jsx("path",{d:"M7 21l3 -4"}),y.jsx("path",{d:"M16 21l-2 -4l-3 -3l1 -6"}),y.jsx("path",{d:"M6 12l2 -3l4 -1l3 3l3 1"})]})}),y.jsx("div",{className:"info-text",children:y.jsx("span",{className:"info-value",children:k.totalTime})})]}),y.jsxs("div",{className:"info-item",children:[y.jsx("div",{className:"info-icon",children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-route",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M3 19a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}),y.jsx("path",{d:"M19 7a2 2 0 1 0 0 -4a2 2 0 0 0 0 4z"}),y.jsx("path",{d:"M11 19h5.5a3.5 3.5 0 0 0 0 -7h-8a3.5 3.5 0 0 1 0 -7h4.5"})]})}),y.jsx("div",{className:"info-text",children:y.jsx("span",{className:"info-value",children:k.totalDistance})})]})]})]}),y.jsx("button",{className:"sound-button",onClick:Kt,children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-volume",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M15 8a5 5 0 0 1 0 8"}),y.jsx("path",{d:"M17.7 5a9 9 0 0 1 0 14"}),y.jsx("path",{d:"M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5"})]})})]})]}),w&&y.jsx(y.Fragment,{children:y.jsxs("div",{className:"route-buttons",children:[y.jsxs("button",{className:"route-button",onClick:()=>It("/rop"),children:[y.jsx("div",{className:"button-icon",children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-route",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M3 19a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}),y.jsx("path",{d:"M19 7a2 2 0 1 0 0 -4a2 2 0 0 0 0 4z"}),y.jsx("path",{d:"M11 19h5.5a3.5 3.5 0 0 0 0 -7h-8a3.5 3.5 0 0 1 0 -7h4.5"})]})}),y.jsx("span",{children:y.jsx(qe,{id:"routeOverview"})})]}),y.jsx("span",{className:"sdivider"}),y.jsxs("button",{className:"route-button",onClick:br,children:[y.jsx("div",{className:"button-icon",children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"grey",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-map",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M3 7l6 -3l6 3l6 -3v13l-6 3l-6 -3l-6 3v-13"}),y.jsx("path",{d:"M9 4v13"}),y.jsx("path",{d:"M15 7v13"})]})}),y.jsx("span",{children:y.jsx(qe,{id:"allRoutes"})})]}),y.jsx("span",{className:"sdivider"}),y.jsxs("button",{className:"route-button",onClick:Rn,children:[y.jsx("div",{className:"button-icon",children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-route-alt-left",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M8 3h-5v5"}),y.jsx("path",{d:"M16 3h5v5"}),y.jsx("path",{d:"M3 3l7.536 7.536a5 5 0 0 1 1.464 3.534v6.93"}),y.jsx("path",{d:"M18 6.01v-.01"}),y.jsx("path",{d:"M16 8.02v-.01"}),y.jsx("path",{d:"M14 10v.01"})]})}),y.jsx("span",{children:y.jsx(qe,{id:"otherRoutes"})})]})]})}),y.jsxs("div",{className:"bottom-controls",children:[y.jsx("button",{className:`start-routing-button ${Ee?"stop-routing":""}`,onClick:Yt,children:Ee?y.jsx(qe,{id:"stopRouting"}):y.jsx(qe,{id:"startRouting"})}),y.jsxs("div",{className:"pc-container",children:[y.jsx("button",{className:"expand-button",onClick:bt,children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-down",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M4 11l8 3l8 -3"})]})}),y.jsx("button",{className:"profile-button",onClick:()=>It("/Profile"),children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",className:"icon icon-tabler icons-tabler-filled icon-tabler-user",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M12 2a5 5 0 1 1 -5 5l.005 -.217a5 5 0 0 1 4.995 -4.783z"}),y.jsx("path",{d:"M14 14a5 5 0 0 1 5 5v1a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-1a5 5 0 0 1 5 -5h4z"})]})})]})]})]})}),!p&&y.jsxs("button",{className:"return-to-route-button",onClick:gt,children:[y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M11.092 2.581a1 1 0 0 1 1.754 -.116l.062 .116l8.005 17.365c.198 .566 .05 1.196 -.378 1.615a1.53 1.53 0 0 1 -1.459 .393l-7.077 -2.398l-6.899 2.338a1.535 1.535 0 0 1 -1.52 -.231l-.112 -.1c-.398 -.386 -.556 -.954 -.393 -1.556l.047 -.15l7.97 -17.276z"})]}),y.jsx("span",{className:"return-to-route-text",children:y.jsx(qe,{id:"returnToRoute"})})]})]})]}):y.jsx("div",{className:"loading",children:y.jsx(qe,{id:"loading"})})},W_=()=>{var tt,it,Ge,kt,_t,Ct,Rt,At;const a=oc(),p=Ui(),v=ee.useRef(null),[w,E]=ee.useState(0),[k,P]=ee.useState("right"),[c,F]=ee.useState(""),[N,V]=ee.useState(""),{routeGeo:$,routeSteps:U}=id(),me=((tt=$==null?void 0:$.geometry)==null?void 0:tt.coordinates)||[],he=ee.useMemo(()=>me.slice(1).map((mt,Pt)=>{const Xe=U==null?void 0:U[Pt],It=Xe?p.formatMessage({id:Xe.type},{name:Xe.name,title:Xe.title,num:Pt+1}):p.formatMessage({id:"stepNumber"},{num:Pt+1});return{id:Pt+1,coordinates:[me[Pt],mt],instruction:It}}),[me,U,p]),[J,oe]=ee.useState({latitude:((it=me[0])==null?void 0:it[1])||0,longitude:((Ge=me[0])==null?void 0:Ge[0])||0,zoom:16});ee.useEffect(()=>{window.scrollTo(0,0)},[]);const _e=ee.useMemo(()=>{var Pt;const mt=(Pt=he[w])==null?void 0:Pt.coordinates;return mt?{type:"Feature",geometry:{type:"LineString",coordinates:mt}}:null},[w,he]);ee.useEffect(()=>{if(he[w]){const mt=he[w].coordinates,[Pt,Xe]=mt[0],[It,We]=mt[1],lt=Math.hypot(It-Pt,We-Xe)*1e5;if(F(`${Math.round(lt)} ${p.formatMessage({id:"meters"})}`),V(`${Math.max(1,Math.round(lt/60))} ${p.formatMessage({id:"minutesUnit"})}`),P(w===he.length-1?"arrived":"right"),oe({latitude:(Xe+We)/2,longitude:(Pt+It)/2,zoom:18}),v.current){const nt=new ru.LngLatBounds([Pt,Xe],[It,We]);v.current.fitBounds(nt,{padding:50,duration:700})}}},[w,he]);const ke={type:"Feature",geometry:{type:"LineString",coordinates:me}},Ee=()=>{w<he.length-1&&E(w+1)},Ve=()=>{w>0&&E(w-1)},Me=()=>{switch(k){case"right":return y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-right",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M5 12l14 0"}),y.jsx("path",{d:"M15 16l4 -4"}),y.jsx("path",{d:"M15 8l4 4"})]});case"left":return y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-left",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M5 12l14 0"}),y.jsx("path",{d:"M5 12l4 4"}),y.jsx("path",{d:"M5 12l4 -4"})]});case"up":return y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-up",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M12 5l0 14"}),y.jsx("path",{d:"M16 9l-4 -4"}),y.jsx("path",{d:"M8 9l4 -4"})]});case"down":return y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-down",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M12 5l0 14"}),y.jsx("path",{d:"M16 15l-4 4"}),y.jsx("path",{d:"M8 15l4 4"})]});case"bend-right":return y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-merge-alt-left",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M8 7l4 -4l4 4"}),y.jsx("path",{d:"M18 21v.01"}),y.jsx("path",{d:"M18 18.01v.01"}),y.jsx("path",{d:"M17 15.02v.01"}),y.jsx("path",{d:"M14 13.03v.01"}),y.jsx("path",{d:"M12 3v5.394a6.737 6.737 0 0 1 -3 5.606a6.737 6.737 0 0 0 -3 5.606v1.394"})]});case"bend-left":return y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-merge-alt-right",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M16 7l-4 -4l-4 4"}),y.jsx("path",{d:"M6 21v.01"}),y.jsx("path",{d:"M6 18.01v.01"}),y.jsx("path",{d:"M7 15.02v.01"}),y.jsx("path",{d:"M10 13.03v.01"}),y.jsx("path",{d:"M12 3v5.394a6.737 6.737 0 0 0 3 5.606a6.737 6.737 0 0 1 3 5.606v1.394"})]});case"arrived":return y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"35",height:"35",viewBox:"0 0 24 24",fill:"#e74c3c",className:"icon icon-tabler icons-tabler-filled icon-tabler-map-pin",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M18.364 4.636a9 9 0 0 1 .203 12.519l-.203 .21l-4.243 4.242a3 3 0 0 1 -4.097 .135l-.144 -.135l-4.244 -4.243a9 9 0 0 1 12.728 -12.728zm-6.364 3.364a3 3 0 1 0 0 6a3 3 0 0 0 0 -6z"})]});default:return y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-right",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M5 12l14 0"}),y.jsx("path",{d:"M15 16l4 -4"}),y.jsx("path",{d:"M15 8l4 4"})]})}};return y.jsxs("div",{className:"route-overview-container fade-in",children:[y.jsxs("div",{className:"header-container",children:[y.jsxs("header",{className:"route-overview-header",children:[y.jsx("button",{className:"route-back-button",onClick:()=>a(-1),children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-x",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M18 6l-12 12"}),y.jsx("path",{d:"M6 6l12 12"})]})}),y.jsx("h1",{className:"route-header-title",children:p.formatMessage({id:"routeOverview"})}),y.jsx("button",{className:"map-profile-button",onClick:()=>a("/Profile"),children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",className:"icon icon-tabler icons-tabler-filled icon-tabler-user",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M12 2a5 5 0 1 1 -5 5l.005 -.217a5 5 0 0 1 4.995 -4.783z"}),y.jsx("path",{d:"M14 14a5 5 0 0 1 5 5v1a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-1a5 5 0 0 1 5 -5h4z"})]})})]}),y.jsx("div",{className:"header-gradient"})]}),y.jsx("div",{className:"route-map-container",children:y.jsxs(_p,{ref:v,mapLib:ru,mapStyle:bp,initialViewState:J,attributionControl:!1,style:{width:"100%",height:"100%"},children:[y.jsx(ys,{longitude:(kt=me[0])==null?void 0:kt[0],latitude:(_t=me[0])==null?void 0:_t[1],anchor:"bottom",children:y.jsx("div",{className:"c-circle"})}),y.jsx(ys,{longitude:(Ct=me[me.length-1])==null?void 0:Ct[0],latitude:(Rt=me[me.length-1])==null?void 0:Rt[1],anchor:"bottom",children:y.jsx("div",{className:"des-marker",children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"35",height:"35",viewBox:"0 0 24 24",fill:"#e74c3c",className:"icon icon-tabler icons-tabler-filled icon-tabler-map-pin",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M18.364 4.636a9 9 0 0 1 .203 12.519l-.203 .21l-4.243 4.242a3 3 0 0 1 -4.097 .135l-.144 -.135l-4.244 -4.243a9 9 0 0 1 12.728 -12.728zm-6.364 3.364a3 3 0 1 0 0 6a3 3 0 0 0 0 -6z"})]})})}),y.jsx(nh,{id:"route",type:"geojson",data:ke,children:y.jsx(th,{id:"route-line",type:"line",paint:{"line-color":"#3498db","line-width":5}})}),_e&&y.jsx(nh,{id:"highlight",type:"geojson",data:_e,children:y.jsx(th,{id:"highlight-line",type:"line",paint:{"line-color":"#e74c3c","line-width":8}})}),y.jsx(Ff,{})]})}),y.jsxs("button",{className:"start-routing-btn",onClick:()=>a("/rng"),children:[y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",viewBox:"0 0 24 24",fill:"currentColor",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M11.092 2.581a1 1 0 0 1 1.754 -.116l.062 .116l8.005 17.365c.198 .566 .05 1.196 -.378 1.615a1.53 1.53 0 0 1 -1.459 .393l-7.077 -2.398l-6.899 2.338a1.535 1.535 0 0 1 -1.52 -.231l-.112 -.1c-.398 -.386 -.556 -.954 -.393 -1.556l.047 -.15l7.97 -17.276z"})]}),p.formatMessage({id:"startRouting"})]}),y.jsxs("div",{className:"route-info-container",children:[y.jsxs("div",{className:"route-stats",children:[y.jsxs("div",{className:"route-distance",children:[y.jsx("span",{className:"direction-icon",children:Me()}),y.jsx("span",{className:"distance-value",children:c})]}),y.jsx("div",{className:"route-time",children:y.jsx("span",{className:"time-value",children:N})})]}),y.jsxs("div",{className:"route-instruction-container",children:[y.jsx("div",{className:"route-instruction",children:y.jsx("p",{className:"instruction-text",children:(At=he[w])==null?void 0:At.instruction})}),y.jsxs("div",{className:"carousel-controls",children:[y.jsxs("button",{className:"carousel-prev",onClick:Ve,disabled:w===0,children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:y.jsx("path",{d:"M9 6l6 6l-6 6",stroke:"currentColor",strokeWidth:"2",fill:"none"})}),p.formatMessage({id:"previous"})]}),y.jsx("div",{className:"carousel-dots",children:he.map((mt,Pt)=>y.jsx("span",{className:`dot ${Pt===w?"active":""}`,onClick:()=>E(Pt)},Pt))}),y.jsxs("button",{className:"carousel-next",onClick:Ee,disabled:w===he.length-1,children:[p.formatMessage({id:"next"}),y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:y.jsx("path",{d:"M15 6l-6 6l6 6",stroke:"currentColor",strokeWidth:"2",fill:"none"})})]})]})]})]})]})};function r0(a,p){return function(){return a.apply(p,arguments)}}const{toString:Z_}=Object.prototype,{getPrototypeOf:Of}=Object,{iterator:Sp,toStringTag:i0}=Symbol,Ep=(a=>p=>{const v=Z_.call(p);return a[v]||(a[v]=v.slice(8,-1).toLowerCase())})(Object.create(null)),vs=a=>(a=a.toLowerCase(),p=>Ep(p)===a),Tp=a=>p=>typeof p===a,{isArray:ah}=Array,sd=Tp("undefined");function X_(a){return a!==null&&!sd(a)&&a.constructor!==null&&!sd(a.constructor)&&Oi(a.constructor.isBuffer)&&a.constructor.isBuffer(a)}const o0=vs("ArrayBuffer");function K_(a){let p;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?p=ArrayBuffer.isView(a):p=a&&a.buffer&&o0(a.buffer),p}const J_=Tp("string"),Oi=Tp("function"),s0=Tp("number"),kp=a=>a!==null&&typeof a=="object",Y_=a=>a===!0||a===!1,up=a=>{if(Ep(a)!=="object")return!1;const p=Of(a);return(p===null||p===Object.prototype||Object.getPrototypeOf(p)===null)&&!(i0 in a)&&!(Sp in a)},Q_=vs("Date"),e1=vs("File"),t1=vs("Blob"),n1=vs("FileList"),r1=a=>kp(a)&&Oi(a.pipe),i1=a=>{let p;return a&&(typeof FormData=="function"&&a instanceof FormData||Oi(a.append)&&((p=Ep(a))==="formdata"||p==="object"&&Oi(a.toString)&&a.toString()==="[object FormData]"))},o1=vs("URLSearchParams"),[s1,a1,l1,c1]=["ReadableStream","Request","Response","Headers"].map(vs),u1=a=>a.trim?a.trim():a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function fd(a,p,{allOwnKeys:v=!1}={}){if(a===null||typeof a>"u")return;let w,E;if(typeof a!="object"&&(a=[a]),ah(a))for(w=0,E=a.length;w<E;w++)p.call(null,a[w],w,a);else{const k=v?Object.getOwnPropertyNames(a):Object.keys(a),P=k.length;let c;for(w=0;w<P;w++)c=k[w],p.call(null,a[c],c,a)}}function a0(a,p){p=p.toLowerCase();const v=Object.keys(a);let w=v.length,E;for(;w-- >0;)if(E=v[w],p===E.toLowerCase())return E;return null}const eu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,l0=a=>!sd(a)&&a!==eu;function kf(){const{caseless:a}=l0(this)&&this||{},p={},v=(w,E)=>{const k=a&&a0(p,E)||E;up(p[k])&&up(w)?p[k]=kf(p[k],w):up(w)?p[k]=kf({},w):ah(w)?p[k]=w.slice():p[k]=w};for(let w=0,E=arguments.length;w<E;w++)arguments[w]&&fd(arguments[w],v);return p}const h1=(a,p,v,{allOwnKeys:w}={})=>(fd(p,(E,k)=>{v&&Oi(E)?a[k]=r0(E,v):a[k]=E},{allOwnKeys:w}),a),d1=a=>(a.charCodeAt(0)===65279&&(a=a.slice(1)),a),p1=(a,p,v,w)=>{a.prototype=Object.create(p.prototype,w),a.prototype.constructor=a,Object.defineProperty(a,"super",{value:p.prototype}),v&&Object.assign(a.prototype,v)},f1=(a,p,v,w)=>{let E,k,P;const c={};if(p=p||{},a==null)return p;do{for(E=Object.getOwnPropertyNames(a),k=E.length;k-- >0;)P=E[k],(!w||w(P,a,p))&&!c[P]&&(p[P]=a[P],c[P]=!0);a=v!==!1&&Of(a)}while(a&&(!v||v(a,p))&&a!==Object.prototype);return p},m1=(a,p,v)=>{a=String(a),(v===void 0||v>a.length)&&(v=a.length),v-=p.length;const w=a.indexOf(p,v);return w!==-1&&w===v},g1=a=>{if(!a)return null;if(ah(a))return a;let p=a.length;if(!s0(p))return null;const v=new Array(p);for(;p-- >0;)v[p]=a[p];return v},y1=(a=>p=>a&&p instanceof a)(typeof Uint8Array<"u"&&Of(Uint8Array)),v1=(a,p)=>{const w=(a&&a[Sp]).call(a);let E;for(;(E=w.next())&&!E.done;){const k=E.value;p.call(a,k[0],k[1])}},x1=(a,p)=>{let v;const w=[];for(;(v=a.exec(p))!==null;)w.push(v);return w},_1=vs("HTMLFormElement"),w1=a=>a.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(v,w,E){return w.toUpperCase()+E}),Zm=(({hasOwnProperty:a})=>(p,v)=>a.call(p,v))(Object.prototype),b1=vs("RegExp"),c0=(a,p)=>{const v=Object.getOwnPropertyDescriptors(a),w={};fd(v,(E,k)=>{let P;(P=p(E,k,a))!==!1&&(w[k]=P||E)}),Object.defineProperties(a,w)},S1=a=>{c0(a,(p,v)=>{if(Oi(a)&&["arguments","caller","callee"].indexOf(v)!==-1)return!1;const w=a[v];if(Oi(w)){if(p.enumerable=!1,"writable"in p){p.writable=!1;return}p.set||(p.set=()=>{throw Error("Can not rewrite read-only method '"+v+"'")})}})},E1=(a,p)=>{const v={},w=E=>{E.forEach(k=>{v[k]=!0})};return ah(a)?w(a):w(String(a).split(p)),v},T1=()=>{},k1=(a,p)=>a!=null&&Number.isFinite(a=+a)?a:p;function M1(a){return!!(a&&Oi(a.append)&&a[i0]==="FormData"&&a[Sp])}const C1=a=>{const p=new Array(10),v=(w,E)=>{if(kp(w)){if(p.indexOf(w)>=0)return;if(!("toJSON"in w)){p[E]=w;const k=ah(w)?[]:{};return fd(w,(P,c)=>{const F=v(P,E+1);!sd(F)&&(k[c]=F)}),p[E]=void 0,k}}return w};return v(a,0)},P1=vs("AsyncFunction"),I1=a=>a&&(kp(a)||Oi(a))&&Oi(a.then)&&Oi(a.catch),u0=((a,p)=>a?setImmediate:p?((v,w)=>(eu.addEventListener("message",({source:E,data:k})=>{E===eu&&k===v&&w.length&&w.shift()()},!1),E=>{w.push(E),eu.postMessage(v,"*")}))(`axios@${Math.random()}`,[]):v=>setTimeout(v))(typeof setImmediate=="function",Oi(eu.postMessage)),A1=typeof queueMicrotask<"u"?queueMicrotask.bind(eu):typeof process<"u"&&process.nextTick||u0,L1=a=>a!=null&&Oi(a[Sp]),Fe={isArray:ah,isArrayBuffer:o0,isBuffer:X_,isFormData:i1,isArrayBufferView:K_,isString:J_,isNumber:s0,isBoolean:Y_,isObject:kp,isPlainObject:up,isReadableStream:s1,isRequest:a1,isResponse:l1,isHeaders:c1,isUndefined:sd,isDate:Q_,isFile:e1,isBlob:t1,isRegExp:b1,isFunction:Oi,isStream:r1,isURLSearchParams:o1,isTypedArray:y1,isFileList:n1,forEach:fd,merge:kf,extend:h1,trim:u1,stripBOM:d1,inherits:p1,toFlatObject:f1,kindOf:Ep,kindOfTest:vs,endsWith:m1,toArray:g1,forEachEntry:v1,matchAll:x1,isHTMLForm:_1,hasOwnProperty:Zm,hasOwnProp:Zm,reduceDescriptors:c0,freezeMethods:S1,toObjectSet:E1,toCamelCase:w1,noop:T1,toFiniteNumber:k1,findKey:a0,global:eu,isContextDefined:l0,isSpecCompliantForm:M1,toJSONObject:C1,isAsyncFn:P1,isThenable:I1,setImmediate:u0,asap:A1,isIterable:L1};function an(a,p,v,w,E){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=a,this.name="AxiosError",p&&(this.code=p),v&&(this.config=v),w&&(this.request=w),E&&(this.response=E,this.status=E.status?E.status:null)}Fe.inherits(an,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Fe.toJSONObject(this.config),code:this.code,status:this.status}}});const h0=an.prototype,d0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(a=>{d0[a]={value:a}});Object.defineProperties(an,d0);Object.defineProperty(h0,"isAxiosError",{value:!0});an.from=(a,p,v,w,E,k)=>{const P=Object.create(h0);return Fe.toFlatObject(a,P,function(F){return F!==Error.prototype},c=>c!=="isAxiosError"),an.call(P,a.message,p,v,w,E),P.cause=a,P.name=a.name,k&&Object.assign(P,k),P};const z1=null;function Mf(a){return Fe.isPlainObject(a)||Fe.isArray(a)}function p0(a){return Fe.endsWith(a,"[]")?a.slice(0,-2):a}function Xm(a,p,v){return a?a.concat(p).map(function(E,k){return E=p0(E),!v&&k?"["+E+"]":E}).join(v?".":""):p}function j1(a){return Fe.isArray(a)&&!a.some(Mf)}const R1=Fe.toFlatObject(Fe,{},null,function(p){return/^is[A-Z]/.test(p)});function Mp(a,p,v){if(!Fe.isObject(a))throw new TypeError("target must be an object");p=p||new FormData,v=Fe.toFlatObject(v,{metaTokens:!0,dots:!1,indexes:!1},!1,function(J,oe){return!Fe.isUndefined(oe[J])});const w=v.metaTokens,E=v.visitor||V,k=v.dots,P=v.indexes,F=(v.Blob||typeof Blob<"u"&&Blob)&&Fe.isSpecCompliantForm(p);if(!Fe.isFunction(E))throw new TypeError("visitor must be a function");function N(he){if(he===null)return"";if(Fe.isDate(he))return he.toISOString();if(!F&&Fe.isBlob(he))throw new an("Blob is not supported. Use a Buffer instead.");return Fe.isArrayBuffer(he)||Fe.isTypedArray(he)?F&&typeof Blob=="function"?new Blob([he]):Buffer.from(he):he}function V(he,J,oe){let _e=he;if(he&&!oe&&typeof he=="object"){if(Fe.endsWith(J,"{}"))J=w?J:J.slice(0,-2),he=JSON.stringify(he);else if(Fe.isArray(he)&&j1(he)||(Fe.isFileList(he)||Fe.endsWith(J,"[]"))&&(_e=Fe.toArray(he)))return J=p0(J),_e.forEach(function(Ee,Ve){!(Fe.isUndefined(Ee)||Ee===null)&&p.append(P===!0?Xm([J],Ve,k):P===null?J:J+"[]",N(Ee))}),!1}return Mf(he)?!0:(p.append(Xm(oe,J,k),N(he)),!1)}const $=[],U=Object.assign(R1,{defaultVisitor:V,convertValue:N,isVisitable:Mf});function me(he,J){if(!Fe.isUndefined(he)){if($.indexOf(he)!==-1)throw Error("Circular reference detected in "+J.join("."));$.push(he),Fe.forEach(he,function(_e,ke){(!(Fe.isUndefined(_e)||_e===null)&&E.call(p,_e,Fe.isString(ke)?ke.trim():ke,J,U))===!0&&me(_e,J?J.concat(ke):[ke])}),$.pop()}}if(!Fe.isObject(a))throw new TypeError("data must be an object");return me(a),p}function Km(a){const p={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(a).replace(/[!'()~]|%20|%00/g,function(w){return p[w]})}function $f(a,p){this._pairs=[],a&&Mp(a,this,p)}const f0=$f.prototype;f0.append=function(p,v){this._pairs.push([p,v])};f0.toString=function(p){const v=p?function(w){return p.call(this,w,Km)}:Km;return this._pairs.map(function(E){return v(E[0])+"="+v(E[1])},"").join("&")};function D1(a){return encodeURIComponent(a).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function m0(a,p,v){if(!p)return a;const w=v&&v.encode||D1;Fe.isFunction(v)&&(v={serialize:v});const E=v&&v.serialize;let k;if(E?k=E(p,v):k=Fe.isURLSearchParams(p)?p.toString():new $f(p,v).toString(w),k){const P=a.indexOf("#");P!==-1&&(a=a.slice(0,P)),a+=(a.indexOf("?")===-1?"?":"&")+k}return a}class Jm{constructor(){this.handlers=[]}use(p,v,w){return this.handlers.push({fulfilled:p,rejected:v,synchronous:w?w.synchronous:!1,runWhen:w?w.runWhen:null}),this.handlers.length-1}eject(p){this.handlers[p]&&(this.handlers[p]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(p){Fe.forEach(this.handlers,function(w){w!==null&&p(w)})}}const g0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},N1=typeof URLSearchParams<"u"?URLSearchParams:$f,B1=typeof FormData<"u"?FormData:null,F1=typeof Blob<"u"?Blob:null,O1={isBrowser:!0,classes:{URLSearchParams:N1,FormData:B1,Blob:F1},protocols:["http","https","file","blob","url","data"]},Uf=typeof window<"u"&&typeof document<"u",Cf=typeof navigator=="object"&&navigator||void 0,$1=Uf&&(!Cf||["ReactNative","NativeScript","NS"].indexOf(Cf.product)<0),U1=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",V1=Uf&&window.location.href||"http://localhost",H1=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Uf,hasStandardBrowserEnv:$1,hasStandardBrowserWebWorkerEnv:U1,navigator:Cf,origin:V1},Symbol.toStringTag,{value:"Module"})),gi={...H1,...O1};function G1(a,p){return Mp(a,new gi.classes.URLSearchParams,Object.assign({visitor:function(v,w,E,k){return gi.isNode&&Fe.isBuffer(v)?(this.append(w,v.toString("base64")),!1):k.defaultVisitor.apply(this,arguments)}},p))}function q1(a){return Fe.matchAll(/\w+|\[(\w*)]/g,a).map(p=>p[0]==="[]"?"":p[1]||p[0])}function W1(a){const p={},v=Object.keys(a);let w;const E=v.length;let k;for(w=0;w<E;w++)k=v[w],p[k]=a[k];return p}function y0(a){function p(v,w,E,k){let P=v[k++];if(P==="__proto__")return!0;const c=Number.isFinite(+P),F=k>=v.length;return P=!P&&Fe.isArray(E)?E.length:P,F?(Fe.hasOwnProp(E,P)?E[P]=[E[P],w]:E[P]=w,!c):((!E[P]||!Fe.isObject(E[P]))&&(E[P]=[]),p(v,w,E[P],k)&&Fe.isArray(E[P])&&(E[P]=W1(E[P])),!c)}if(Fe.isFormData(a)&&Fe.isFunction(a.entries)){const v={};return Fe.forEachEntry(a,(w,E)=>{p(q1(w),E,v,0)}),v}return null}function Z1(a,p,v){if(Fe.isString(a))try{return(p||JSON.parse)(a),Fe.trim(a)}catch(w){if(w.name!=="SyntaxError")throw w}return(v||JSON.stringify)(a)}const md={transitional:g0,adapter:["xhr","http","fetch"],transformRequest:[function(p,v){const w=v.getContentType()||"",E=w.indexOf("application/json")>-1,k=Fe.isObject(p);if(k&&Fe.isHTMLForm(p)&&(p=new FormData(p)),Fe.isFormData(p))return E?JSON.stringify(y0(p)):p;if(Fe.isArrayBuffer(p)||Fe.isBuffer(p)||Fe.isStream(p)||Fe.isFile(p)||Fe.isBlob(p)||Fe.isReadableStream(p))return p;if(Fe.isArrayBufferView(p))return p.buffer;if(Fe.isURLSearchParams(p))return v.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),p.toString();let c;if(k){if(w.indexOf("application/x-www-form-urlencoded")>-1)return G1(p,this.formSerializer).toString();if((c=Fe.isFileList(p))||w.indexOf("multipart/form-data")>-1){const F=this.env&&this.env.FormData;return Mp(c?{"files[]":p}:p,F&&new F,this.formSerializer)}}return k||E?(v.setContentType("application/json",!1),Z1(p)):p}],transformResponse:[function(p){const v=this.transitional||md.transitional,w=v&&v.forcedJSONParsing,E=this.responseType==="json";if(Fe.isResponse(p)||Fe.isReadableStream(p))return p;if(p&&Fe.isString(p)&&(w&&!this.responseType||E)){const P=!(v&&v.silentJSONParsing)&&E;try{return JSON.parse(p)}catch(c){if(P)throw c.name==="SyntaxError"?an.from(c,an.ERR_BAD_RESPONSE,this,null,this.response):c}}return p}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:gi.classes.FormData,Blob:gi.classes.Blob},validateStatus:function(p){return p>=200&&p<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Fe.forEach(["delete","get","head","post","put","patch"],a=>{md.headers[a]={}});const X1=Fe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),K1=a=>{const p={};let v,w,E;return a&&a.split(`
`).forEach(function(P){E=P.indexOf(":"),v=P.substring(0,E).trim().toLowerCase(),w=P.substring(E+1).trim(),!(!v||p[v]&&X1[v])&&(v==="set-cookie"?p[v]?p[v].push(w):p[v]=[w]:p[v]=p[v]?p[v]+", "+w:w)}),p},Ym=Symbol("internals");function Qh(a){return a&&String(a).trim().toLowerCase()}function hp(a){return a===!1||a==null?a:Fe.isArray(a)?a.map(hp):String(a)}function J1(a){const p=Object.create(null),v=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let w;for(;w=v.exec(a);)p[w[1]]=w[2];return p}const Y1=a=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(a.trim());function af(a,p,v,w,E){if(Fe.isFunction(w))return w.call(this,p,v);if(E&&(p=v),!!Fe.isString(p)){if(Fe.isString(w))return p.indexOf(w)!==-1;if(Fe.isRegExp(w))return w.test(p)}}function Q1(a){return a.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(p,v,w)=>v.toUpperCase()+w)}function e2(a,p){const v=Fe.toCamelCase(" "+p);["get","set","has"].forEach(w=>{Object.defineProperty(a,w+v,{value:function(E,k,P){return this[w].call(this,p,E,k,P)},configurable:!0})})}let $i=class{constructor(p){p&&this.set(p)}set(p,v,w){const E=this;function k(c,F,N){const V=Qh(F);if(!V)throw new Error("header name must be a non-empty string");const $=Fe.findKey(E,V);(!$||E[$]===void 0||N===!0||N===void 0&&E[$]!==!1)&&(E[$||F]=hp(c))}const P=(c,F)=>Fe.forEach(c,(N,V)=>k(N,V,F));if(Fe.isPlainObject(p)||p instanceof this.constructor)P(p,v);else if(Fe.isString(p)&&(p=p.trim())&&!Y1(p))P(K1(p),v);else if(Fe.isObject(p)&&Fe.isIterable(p)){let c={},F,N;for(const V of p){if(!Fe.isArray(V))throw TypeError("Object iterator must return a key-value pair");c[N=V[0]]=(F=c[N])?Fe.isArray(F)?[...F,V[1]]:[F,V[1]]:V[1]}P(c,v)}else p!=null&&k(v,p,w);return this}get(p,v){if(p=Qh(p),p){const w=Fe.findKey(this,p);if(w){const E=this[w];if(!v)return E;if(v===!0)return J1(E);if(Fe.isFunction(v))return v.call(this,E,w);if(Fe.isRegExp(v))return v.exec(E);throw new TypeError("parser must be boolean|regexp|function")}}}has(p,v){if(p=Qh(p),p){const w=Fe.findKey(this,p);return!!(w&&this[w]!==void 0&&(!v||af(this,this[w],w,v)))}return!1}delete(p,v){const w=this;let E=!1;function k(P){if(P=Qh(P),P){const c=Fe.findKey(w,P);c&&(!v||af(w,w[c],c,v))&&(delete w[c],E=!0)}}return Fe.isArray(p)?p.forEach(k):k(p),E}clear(p){const v=Object.keys(this);let w=v.length,E=!1;for(;w--;){const k=v[w];(!p||af(this,this[k],k,p,!0))&&(delete this[k],E=!0)}return E}normalize(p){const v=this,w={};return Fe.forEach(this,(E,k)=>{const P=Fe.findKey(w,k);if(P){v[P]=hp(E),delete v[k];return}const c=p?Q1(k):String(k).trim();c!==k&&delete v[k],v[c]=hp(E),w[c]=!0}),this}concat(...p){return this.constructor.concat(this,...p)}toJSON(p){const v=Object.create(null);return Fe.forEach(this,(w,E)=>{w!=null&&w!==!1&&(v[E]=p&&Fe.isArray(w)?w.join(", "):w)}),v}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([p,v])=>p+": "+v).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(p){return p instanceof this?p:new this(p)}static concat(p,...v){const w=new this(p);return v.forEach(E=>w.set(E)),w}static accessor(p){const w=(this[Ym]=this[Ym]={accessors:{}}).accessors,E=this.prototype;function k(P){const c=Qh(P);w[c]||(e2(E,P),w[c]=!0)}return Fe.isArray(p)?p.forEach(k):k(p),this}};$i.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Fe.reduceDescriptors($i.prototype,({value:a},p)=>{let v=p[0].toUpperCase()+p.slice(1);return{get:()=>a,set(w){this[v]=w}}});Fe.freezeMethods($i);function lf(a,p){const v=this||md,w=p||v,E=$i.from(w.headers);let k=w.data;return Fe.forEach(a,function(c){k=c.call(v,k,E.normalize(),p?p.status:void 0)}),E.normalize(),k}function v0(a){return!!(a&&a.__CANCEL__)}function lh(a,p,v){an.call(this,a??"canceled",an.ERR_CANCELED,p,v),this.name="CanceledError"}Fe.inherits(lh,an,{__CANCEL__:!0});function x0(a,p,v){const w=v.config.validateStatus;!v.status||!w||w(v.status)?a(v):p(new an("Request failed with status code "+v.status,[an.ERR_BAD_REQUEST,an.ERR_BAD_RESPONSE][Math.floor(v.status/100)-4],v.config,v.request,v))}function t2(a){const p=/^([-+\w]{1,25})(:?\/\/|:)/.exec(a);return p&&p[1]||""}function n2(a,p){a=a||10;const v=new Array(a),w=new Array(a);let E=0,k=0,P;return p=p!==void 0?p:1e3,function(F){const N=Date.now(),V=w[k];P||(P=N),v[E]=F,w[E]=N;let $=k,U=0;for(;$!==E;)U+=v[$++],$=$%a;if(E=(E+1)%a,E===k&&(k=(k+1)%a),N-P<p)return;const me=V&&N-V;return me?Math.round(U*1e3/me):void 0}}function r2(a,p){let v=0,w=1e3/p,E,k;const P=(N,V=Date.now())=>{v=V,E=null,k&&(clearTimeout(k),k=null),a.apply(null,N)};return[(...N)=>{const V=Date.now(),$=V-v;$>=w?P(N,V):(E=N,k||(k=setTimeout(()=>{k=null,P(E)},w-$)))},()=>E&&P(E)]}const gp=(a,p,v=3)=>{let w=0;const E=n2(50,250);return r2(k=>{const P=k.loaded,c=k.lengthComputable?k.total:void 0,F=P-w,N=E(F),V=P<=c;w=P;const $={loaded:P,total:c,progress:c?P/c:void 0,bytes:F,rate:N||void 0,estimated:N&&c&&V?(c-P)/N:void 0,event:k,lengthComputable:c!=null,[p?"download":"upload"]:!0};a($)},v)},Qm=(a,p)=>{const v=a!=null;return[w=>p[0]({lengthComputable:v,total:a,loaded:w}),p[1]]},eg=a=>(...p)=>Fe.asap(()=>a(...p)),i2=gi.hasStandardBrowserEnv?((a,p)=>v=>(v=new URL(v,gi.origin),a.protocol===v.protocol&&a.host===v.host&&(p||a.port===v.port)))(new URL(gi.origin),gi.navigator&&/(msie|trident)/i.test(gi.navigator.userAgent)):()=>!0,o2=gi.hasStandardBrowserEnv?{write(a,p,v,w,E,k){const P=[a+"="+encodeURIComponent(p)];Fe.isNumber(v)&&P.push("expires="+new Date(v).toGMTString()),Fe.isString(w)&&P.push("path="+w),Fe.isString(E)&&P.push("domain="+E),k===!0&&P.push("secure"),document.cookie=P.join("; ")},read(a){const p=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return p?decodeURIComponent(p[3]):null},remove(a){this.write(a,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function s2(a){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(a)}function a2(a,p){return p?a.replace(/\/?\/$/,"")+"/"+p.replace(/^\/+/,""):a}function _0(a,p,v){let w=!s2(p);return a&&(w||v==!1)?a2(a,p):p}const tg=a=>a instanceof $i?{...a}:a;function iu(a,p){p=p||{};const v={};function w(N,V,$,U){return Fe.isPlainObject(N)&&Fe.isPlainObject(V)?Fe.merge.call({caseless:U},N,V):Fe.isPlainObject(V)?Fe.merge({},V):Fe.isArray(V)?V.slice():V}function E(N,V,$,U){if(Fe.isUndefined(V)){if(!Fe.isUndefined(N))return w(void 0,N,$,U)}else return w(N,V,$,U)}function k(N,V){if(!Fe.isUndefined(V))return w(void 0,V)}function P(N,V){if(Fe.isUndefined(V)){if(!Fe.isUndefined(N))return w(void 0,N)}else return w(void 0,V)}function c(N,V,$){if($ in p)return w(N,V);if($ in a)return w(void 0,N)}const F={url:k,method:k,data:k,baseURL:P,transformRequest:P,transformResponse:P,paramsSerializer:P,timeout:P,timeoutMessage:P,withCredentials:P,withXSRFToken:P,adapter:P,responseType:P,xsrfCookieName:P,xsrfHeaderName:P,onUploadProgress:P,onDownloadProgress:P,decompress:P,maxContentLength:P,maxBodyLength:P,beforeRedirect:P,transport:P,httpAgent:P,httpsAgent:P,cancelToken:P,socketPath:P,responseEncoding:P,validateStatus:c,headers:(N,V,$)=>E(tg(N),tg(V),$,!0)};return Fe.forEach(Object.keys(Object.assign({},a,p)),function(V){const $=F[V]||E,U=$(a[V],p[V],V);Fe.isUndefined(U)&&$!==c||(v[V]=U)}),v}const w0=a=>{const p=iu({},a);let{data:v,withXSRFToken:w,xsrfHeaderName:E,xsrfCookieName:k,headers:P,auth:c}=p;p.headers=P=$i.from(P),p.url=m0(_0(p.baseURL,p.url,p.allowAbsoluteUrls),a.params,a.paramsSerializer),c&&P.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):"")));let F;if(Fe.isFormData(v)){if(gi.hasStandardBrowserEnv||gi.hasStandardBrowserWebWorkerEnv)P.setContentType(void 0);else if((F=P.getContentType())!==!1){const[N,...V]=F?F.split(";").map($=>$.trim()).filter(Boolean):[];P.setContentType([N||"multipart/form-data",...V].join("; "))}}if(gi.hasStandardBrowserEnv&&(w&&Fe.isFunction(w)&&(w=w(p)),w||w!==!1&&i2(p.url))){const N=E&&k&&o2.read(k);N&&P.set(E,N)}return p},l2=typeof XMLHttpRequest<"u",c2=l2&&function(a){return new Promise(function(v,w){const E=w0(a);let k=E.data;const P=$i.from(E.headers).normalize();let{responseType:c,onUploadProgress:F,onDownloadProgress:N}=E,V,$,U,me,he;function J(){me&&me(),he&&he(),E.cancelToken&&E.cancelToken.unsubscribe(V),E.signal&&E.signal.removeEventListener("abort",V)}let oe=new XMLHttpRequest;oe.open(E.method.toUpperCase(),E.url,!0),oe.timeout=E.timeout;function _e(){if(!oe)return;const Ee=$i.from("getAllResponseHeaders"in oe&&oe.getAllResponseHeaders()),Me={data:!c||c==="text"||c==="json"?oe.responseText:oe.response,status:oe.status,statusText:oe.statusText,headers:Ee,config:a,request:oe};x0(function(it){v(it),J()},function(it){w(it),J()},Me),oe=null}"onloadend"in oe?oe.onloadend=_e:oe.onreadystatechange=function(){!oe||oe.readyState!==4||oe.status===0&&!(oe.responseURL&&oe.responseURL.indexOf("file:")===0)||setTimeout(_e)},oe.onabort=function(){oe&&(w(new an("Request aborted",an.ECONNABORTED,a,oe)),oe=null)},oe.onerror=function(){w(new an("Network Error",an.ERR_NETWORK,a,oe)),oe=null},oe.ontimeout=function(){let Ve=E.timeout?"timeout of "+E.timeout+"ms exceeded":"timeout exceeded";const Me=E.transitional||g0;E.timeoutErrorMessage&&(Ve=E.timeoutErrorMessage),w(new an(Ve,Me.clarifyTimeoutError?an.ETIMEDOUT:an.ECONNABORTED,a,oe)),oe=null},k===void 0&&P.setContentType(null),"setRequestHeader"in oe&&Fe.forEach(P.toJSON(),function(Ve,Me){oe.setRequestHeader(Me,Ve)}),Fe.isUndefined(E.withCredentials)||(oe.withCredentials=!!E.withCredentials),c&&c!=="json"&&(oe.responseType=E.responseType),N&&([U,he]=gp(N,!0),oe.addEventListener("progress",U)),F&&oe.upload&&([$,me]=gp(F),oe.upload.addEventListener("progress",$),oe.upload.addEventListener("loadend",me)),(E.cancelToken||E.signal)&&(V=Ee=>{oe&&(w(!Ee||Ee.type?new lh(null,a,oe):Ee),oe.abort(),oe=null)},E.cancelToken&&E.cancelToken.subscribe(V),E.signal&&(E.signal.aborted?V():E.signal.addEventListener("abort",V)));const ke=t2(E.url);if(ke&&gi.protocols.indexOf(ke)===-1){w(new an("Unsupported protocol "+ke+":",an.ERR_BAD_REQUEST,a));return}oe.send(k||null)})},u2=(a,p)=>{const{length:v}=a=a?a.filter(Boolean):[];if(p||v){let w=new AbortController,E;const k=function(N){if(!E){E=!0,c();const V=N instanceof Error?N:this.reason;w.abort(V instanceof an?V:new lh(V instanceof Error?V.message:V))}};let P=p&&setTimeout(()=>{P=null,k(new an(`timeout ${p} of ms exceeded`,an.ETIMEDOUT))},p);const c=()=>{a&&(P&&clearTimeout(P),P=null,a.forEach(N=>{N.unsubscribe?N.unsubscribe(k):N.removeEventListener("abort",k)}),a=null)};a.forEach(N=>N.addEventListener("abort",k));const{signal:F}=w;return F.unsubscribe=()=>Fe.asap(c),F}},h2=function*(a,p){let v=a.byteLength;if(v<p){yield a;return}let w=0,E;for(;w<v;)E=w+p,yield a.slice(w,E),w=E},d2=async function*(a,p){for await(const v of p2(a))yield*h2(v,p)},p2=async function*(a){if(a[Symbol.asyncIterator]){yield*a;return}const p=a.getReader();try{for(;;){const{done:v,value:w}=await p.read();if(v)break;yield w}}finally{await p.cancel()}},ng=(a,p,v,w)=>{const E=d2(a,p);let k=0,P,c=F=>{P||(P=!0,w&&w(F))};return new ReadableStream({async pull(F){try{const{done:N,value:V}=await E.next();if(N){c(),F.close();return}let $=V.byteLength;if(v){let U=k+=$;v(U)}F.enqueue(new Uint8Array(V))}catch(N){throw c(N),N}},cancel(F){return c(F),E.return()}},{highWaterMark:2})},Cp=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",b0=Cp&&typeof ReadableStream=="function",f2=Cp&&(typeof TextEncoder=="function"?(a=>p=>a.encode(p))(new TextEncoder):async a=>new Uint8Array(await new Response(a).arrayBuffer())),S0=(a,...p)=>{try{return!!a(...p)}catch{return!1}},m2=b0&&S0(()=>{let a=!1;const p=new Request(gi.origin,{body:new ReadableStream,method:"POST",get duplex(){return a=!0,"half"}}).headers.has("Content-Type");return a&&!p}),rg=64*1024,Pf=b0&&S0(()=>Fe.isReadableStream(new Response("").body)),yp={stream:Pf&&(a=>a.body)};Cp&&(a=>{["text","arrayBuffer","blob","formData","stream"].forEach(p=>{!yp[p]&&(yp[p]=Fe.isFunction(a[p])?v=>v[p]():(v,w)=>{throw new an(`Response type '${p}' is not supported`,an.ERR_NOT_SUPPORT,w)})})})(new Response);const g2=async a=>{if(a==null)return 0;if(Fe.isBlob(a))return a.size;if(Fe.isSpecCompliantForm(a))return(await new Request(gi.origin,{method:"POST",body:a}).arrayBuffer()).byteLength;if(Fe.isArrayBufferView(a)||Fe.isArrayBuffer(a))return a.byteLength;if(Fe.isURLSearchParams(a)&&(a=a+""),Fe.isString(a))return(await f2(a)).byteLength},y2=async(a,p)=>{const v=Fe.toFiniteNumber(a.getContentLength());return v??g2(p)},v2=Cp&&(async a=>{let{url:p,method:v,data:w,signal:E,cancelToken:k,timeout:P,onDownloadProgress:c,onUploadProgress:F,responseType:N,headers:V,withCredentials:$="same-origin",fetchOptions:U}=w0(a);N=N?(N+"").toLowerCase():"text";let me=u2([E,k&&k.toAbortSignal()],P),he;const J=me&&me.unsubscribe&&(()=>{me.unsubscribe()});let oe;try{if(F&&m2&&v!=="get"&&v!=="head"&&(oe=await y2(V,w))!==0){let Me=new Request(p,{method:"POST",body:w,duplex:"half"}),tt;if(Fe.isFormData(w)&&(tt=Me.headers.get("content-type"))&&V.setContentType(tt),Me.body){const[it,Ge]=Qm(oe,gp(eg(F)));w=ng(Me.body,rg,it,Ge)}}Fe.isString($)||($=$?"include":"omit");const _e="credentials"in Request.prototype;he=new Request(p,{...U,signal:me,method:v.toUpperCase(),headers:V.normalize().toJSON(),body:w,duplex:"half",credentials:_e?$:void 0});let ke=await fetch(he);const Ee=Pf&&(N==="stream"||N==="response");if(Pf&&(c||Ee&&J)){const Me={};["status","statusText","headers"].forEach(kt=>{Me[kt]=ke[kt]});const tt=Fe.toFiniteNumber(ke.headers.get("content-length")),[it,Ge]=c&&Qm(tt,gp(eg(c),!0))||[];ke=new Response(ng(ke.body,rg,it,()=>{Ge&&Ge(),J&&J()}),Me)}N=N||"text";let Ve=await yp[Fe.findKey(yp,N)||"text"](ke,a);return!Ee&&J&&J(),await new Promise((Me,tt)=>{x0(Me,tt,{data:Ve,headers:$i.from(ke.headers),status:ke.status,statusText:ke.statusText,config:a,request:he})})}catch(_e){throw J&&J(),_e&&_e.name==="TypeError"&&/Load failed|fetch/i.test(_e.message)?Object.assign(new an("Network Error",an.ERR_NETWORK,a,he),{cause:_e.cause||_e}):an.from(_e,_e&&_e.code,a,he)}}),If={http:z1,xhr:c2,fetch:v2};Fe.forEach(If,(a,p)=>{if(a){try{Object.defineProperty(a,"name",{value:p})}catch{}Object.defineProperty(a,"adapterName",{value:p})}});const ig=a=>`- ${a}`,x2=a=>Fe.isFunction(a)||a===null||a===!1,E0={getAdapter:a=>{a=Fe.isArray(a)?a:[a];const{length:p}=a;let v,w;const E={};for(let k=0;k<p;k++){v=a[k];let P;if(w=v,!x2(v)&&(w=If[(P=String(v)).toLowerCase()],w===void 0))throw new an(`Unknown adapter '${P}'`);if(w)break;E[P||"#"+k]=w}if(!w){const k=Object.entries(E).map(([c,F])=>`adapter ${c} `+(F===!1?"is not supported by the environment":"is not available in the build"));let P=p?k.length>1?`since :
`+k.map(ig).join(`
`):" "+ig(k[0]):"as no adapter specified";throw new an("There is no suitable adapter to dispatch the request "+P,"ERR_NOT_SUPPORT")}return w},adapters:If};function cf(a){if(a.cancelToken&&a.cancelToken.throwIfRequested(),a.signal&&a.signal.aborted)throw new lh(null,a)}function og(a){return cf(a),a.headers=$i.from(a.headers),a.data=lf.call(a,a.transformRequest),["post","put","patch"].indexOf(a.method)!==-1&&a.headers.setContentType("application/x-www-form-urlencoded",!1),E0.getAdapter(a.adapter||md.adapter)(a).then(function(w){return cf(a),w.data=lf.call(a,a.transformResponse,w),w.headers=$i.from(w.headers),w},function(w){return v0(w)||(cf(a),w&&w.response&&(w.response.data=lf.call(a,a.transformResponse,w.response),w.response.headers=$i.from(w.response.headers))),Promise.reject(w)})}const T0="1.9.0",Pp={};["object","boolean","number","function","string","symbol"].forEach((a,p)=>{Pp[a]=function(w){return typeof w===a||"a"+(p<1?"n ":" ")+a}});const sg={};Pp.transitional=function(p,v,w){function E(k,P){return"[Axios v"+T0+"] Transitional option '"+k+"'"+P+(w?". "+w:"")}return(k,P,c)=>{if(p===!1)throw new an(E(P," has been removed"+(v?" in "+v:"")),an.ERR_DEPRECATED);return v&&!sg[P]&&(sg[P]=!0,console.warn(E(P," has been deprecated since v"+v+" and will be removed in the near future"))),p?p(k,P,c):!0}};Pp.spelling=function(p){return(v,w)=>(console.warn(`${w} is likely a misspelling of ${p}`),!0)};function _2(a,p,v){if(typeof a!="object")throw new an("options must be an object",an.ERR_BAD_OPTION_VALUE);const w=Object.keys(a);let E=w.length;for(;E-- >0;){const k=w[E],P=p[k];if(P){const c=a[k],F=c===void 0||P(c,k,a);if(F!==!0)throw new an("option "+k+" must be "+F,an.ERR_BAD_OPTION_VALUE);continue}if(v!==!0)throw new an("Unknown option "+k,an.ERR_BAD_OPTION)}}const dp={assertOptions:_2,validators:Pp},ta=dp.validators;let tu=class{constructor(p){this.defaults=p||{},this.interceptors={request:new Jm,response:new Jm}}async request(p,v){try{return await this._request(p,v)}catch(w){if(w instanceof Error){let E={};Error.captureStackTrace?Error.captureStackTrace(E):E=new Error;const k=E.stack?E.stack.replace(/^.+\n/,""):"";try{w.stack?k&&!String(w.stack).endsWith(k.replace(/^.+\n.+\n/,""))&&(w.stack+=`
`+k):w.stack=k}catch{}}throw w}}_request(p,v){typeof p=="string"?(v=v||{},v.url=p):v=p||{},v=iu(this.defaults,v);const{transitional:w,paramsSerializer:E,headers:k}=v;w!==void 0&&dp.assertOptions(w,{silentJSONParsing:ta.transitional(ta.boolean),forcedJSONParsing:ta.transitional(ta.boolean),clarifyTimeoutError:ta.transitional(ta.boolean)},!1),E!=null&&(Fe.isFunction(E)?v.paramsSerializer={serialize:E}:dp.assertOptions(E,{encode:ta.function,serialize:ta.function},!0)),v.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?v.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:v.allowAbsoluteUrls=!0),dp.assertOptions(v,{baseUrl:ta.spelling("baseURL"),withXsrfToken:ta.spelling("withXSRFToken")},!0),v.method=(v.method||this.defaults.method||"get").toLowerCase();let P=k&&Fe.merge(k.common,k[v.method]);k&&Fe.forEach(["delete","get","head","post","put","patch","common"],he=>{delete k[he]}),v.headers=$i.concat(P,k);const c=[];let F=!0;this.interceptors.request.forEach(function(J){typeof J.runWhen=="function"&&J.runWhen(v)===!1||(F=F&&J.synchronous,c.unshift(J.fulfilled,J.rejected))});const N=[];this.interceptors.response.forEach(function(J){N.push(J.fulfilled,J.rejected)});let V,$=0,U;if(!F){const he=[og.bind(this),void 0];for(he.unshift.apply(he,c),he.push.apply(he,N),U=he.length,V=Promise.resolve(v);$<U;)V=V.then(he[$++],he[$++]);return V}U=c.length;let me=v;for($=0;$<U;){const he=c[$++],J=c[$++];try{me=he(me)}catch(oe){J.call(this,oe);break}}try{V=og.call(this,me)}catch(he){return Promise.reject(he)}for($=0,U=N.length;$<U;)V=V.then(N[$++],N[$++]);return V}getUri(p){p=iu(this.defaults,p);const v=_0(p.baseURL,p.url,p.allowAbsoluteUrls);return m0(v,p.params,p.paramsSerializer)}};Fe.forEach(["delete","get","head","options"],function(p){tu.prototype[p]=function(v,w){return this.request(iu(w||{},{method:p,url:v,data:(w||{}).data}))}});Fe.forEach(["post","put","patch"],function(p){function v(w){return function(k,P,c){return this.request(iu(c||{},{method:p,headers:w?{"Content-Type":"multipart/form-data"}:{},url:k,data:P}))}}tu.prototype[p]=v(),tu.prototype[p+"Form"]=v(!0)});let w2=class k0{constructor(p){if(typeof p!="function")throw new TypeError("executor must be a function.");let v;this.promise=new Promise(function(k){v=k});const w=this;this.promise.then(E=>{if(!w._listeners)return;let k=w._listeners.length;for(;k-- >0;)w._listeners[k](E);w._listeners=null}),this.promise.then=E=>{let k;const P=new Promise(c=>{w.subscribe(c),k=c}).then(E);return P.cancel=function(){w.unsubscribe(k)},P},p(function(k,P,c){w.reason||(w.reason=new lh(k,P,c),v(w.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(p){if(this.reason){p(this.reason);return}this._listeners?this._listeners.push(p):this._listeners=[p]}unsubscribe(p){if(!this._listeners)return;const v=this._listeners.indexOf(p);v!==-1&&this._listeners.splice(v,1)}toAbortSignal(){const p=new AbortController,v=w=>{p.abort(w)};return this.subscribe(v),p.signal.unsubscribe=()=>this.unsubscribe(v),p.signal}static source(){let p;return{token:new k0(function(E){p=E}),cancel:p}}};function b2(a){return function(v){return a.apply(null,v)}}function S2(a){return Fe.isObject(a)&&a.isAxiosError===!0}const Af={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Af).forEach(([a,p])=>{Af[p]=a});function M0(a){const p=new tu(a),v=r0(tu.prototype.request,p);return Fe.extend(v,tu.prototype,p,{allOwnKeys:!0}),Fe.extend(v,p,null,{allOwnKeys:!0}),v.create=function(E){return M0(iu(a,E))},v}const wr=M0(md);wr.Axios=tu;wr.CanceledError=lh;wr.CancelToken=w2;wr.isCancel=v0;wr.VERSION=T0;wr.toFormData=Mp;wr.AxiosError=an;wr.Cancel=wr.CanceledError;wr.all=function(p){return Promise.all(p)};wr.spread=b2;wr.isAxiosError=S2;wr.mergeConfig=iu;wr.AxiosHeaders=$i;wr.formToJSON=a=>y0(Fe.isHTMLForm(a)?new FormData(a):a);wr.getAdapter=E0.getAdapter;wr.HttpStatusCode=Af;wr.default=wr;const{Axios:ZA,AxiosError:XA,CanceledError:KA,isCancel:JA,CancelToken:YA,VERSION:QA,all:e5,Cancel:t5,isAxiosError:n5,spread:r5,toFormData:i5,AxiosHeaders:o5,HttpStatusCode:s5,formToJSON:a5,getAdapter:l5,mergeConfig:c5}=wr,E2=()=>{var lr,Lt,or,Gr;const a=oc(),p=Ui(),[v,w]=ee.useState(0),[E,k]=ee.useState(""),[P,c]=ee.useState([]),[F,N]=ee.useState(""),[V,$]=ee.useState(!1),[U,me]=ee.useState(!1),[he,J]=ee.useState(!1),[oe,_e]=ee.useState(0),[ke,Ee]=ee.useState(0),[Ve,Me]=ee.useState(0),[tt,it]=ee.useState(0),[Ge,kt]=ee.useState(null),[_t,Ct]=ee.useState(!0),[Rt,At]=ee.useState(null),[mt,Pt]=ee.useState(!1),[Xe,It]=ee.useState(!1),[We,lt]=ee.useState("mostVisited"),[nt,ve]=ee.useState(!1),[Ue,Mt]=ee.useState(!1),[gt,bt]=ee.useState(!1),[zt,Kt]=ee.useState(!1),[Yt,Ft]=ee.useState(null),[An,br]=ee.useState([]),[nr,Rn]=ee.useState([]),[si,Je]=ee.useState(!1),Qe=ee.useRef(null),Ot=ee.useRef(null);ee.useRef(null);const ln=ee.useRef(null),[dt,tn]=ee.useState(null),Sr=cp.slice(0,9),Sn=cp.slice(9);ee.useEffect(()=>{fetch("./data/routing-data.json").then(Ne=>Ne.json()).then(Ne=>tn(Ne)).catch(Ne=>console.error("Failed to load routing-data.json",Ne))},[]),ee.useEffect(()=>{if(Qe.current&&Ge){const St=document.documentElement.dir==="rtl"?`${v*100}%`:`-${v*100}%`;Qe.current.style.transform=`translateX(${St})`}},[Ge,v]);const rr=Ne=>{zt||Ne===v||(Kt(!0),w(Ne),setTimeout(()=>{Kt(!1)},500))};ee.useEffect(()=>{if(!(Ge!=null&&Ge.images))return;const Ne=setInterval(()=>{w(St=>(St+1)%Ge.images.length)},5e3);return()=>clearInterval(Ne)},[Ge]);const On=()=>{!U&&Ot.current&&Ot.current.scrollIntoView({behavior:"smooth",block:"nearest"}),me(!U)},Fr=()=>{J(!0),document.body.style.overflow="hidden"},Hr=()=>{J(!1),document.body.style.overflow="auto"},Le=Ne=>{_e(Ne)},Ze=Ne=>{Ee(Ne)},Er=()=>{Ee(0)},ir=Ne=>{if(Ne.preventDefault(),E.trim()){const St={author:p.formatMessage({id:"defaultCommentAuthor"}),text:E,date:new Date().toLocaleDateString("fa-IR"),rating:oe||0};c($t=>[St,...$t]),k(""),Me($t=>$t+1),_e(0),Ee(0),J(!1),document.body.style.overflow="auto",dn()}},dn=()=>{if(P.length===0){it(0);return}const Ne=P.reduce((St,$t)=>St+($t.rating||0),0)/P.length;it(Ne)},En=Ne=>{Ne.preventDefault(),console.log("Searching for:",F)},Qn=()=>{Pt(!mt),$(!V)},ai=Ne=>{console.log("Place clicked:",Ne)},fr=()=>{Mt(!0),ve(!0),document.body.style.overflow="hidden"},Ye=()=>{Mt(!1)},Bt=Ne=>{Ne&&Ne.stopPropagation(),F.trim()!==""?(N(""),Rn([]),Je(!1),Ft(null),br([]),setTimeout(()=>{ln.current&&ln.current.focus()},0)):(bt(!0),setTimeout(()=>{ve(!1),bt(!1),document.body.style.overflow="auto",N(""),Rn([]),Je(!1),Ft(null),br([])},300))},jt=Ne=>{const St=Ne.target.value.toLowerCase();if(N(St),St.length>0){Je(!0);const $t=[];Object.entries(sp).forEach(([mn,yi])=>{yi.forEach(Tr=>{(Tr.label.toLowerCase().includes(St)||Tr.description&&Tr.description.toLowerCase().includes(St))&&$t.push({type:"subgroup",...Tr,groupValue:mn})})}),Rn($t),Ft(null)}else Je(!1),Rn([])},er=Ne=>{Ft(Ne),br(sp[Ne.value]||[]),ve(!0),N(""),document.body.style.overflow="hidden"};return ee.useEffect(()=>{(async()=>{try{const St=await wr.get("./data/locationData.json");kt(St.data),c(St.data.comments||[]),Me(St.data.views||0),it(St.data.averageRating||0),Ct(!1)}catch(St){At(St.message),Ct(!1)}})()},[]),ee.useEffect(()=>{dn()},[P]),_t?y.jsx("div",{className:"loading",children:p.formatMessage({id:"loading"})}):Rt?y.jsx("div",{className:"error",children:p.formatMessage({id:"fetchError"},{error:Rt})}):Ge?y.jsxs("div",{className:"location-page",children:[y.jsxs("div",{className:"carousel-wrapper",children:[y.jsxs("div",{className:"fixed-header-icons",children:[y.jsx("button",{className:"menu-icon",children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),y.jsx("path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),y.jsx("path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]})}),y.jsx("button",{className:"profile-icon",onClick:()=>a("/Profile"),children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M12 2a5 5 0 1 1 -5 5l.005 -.217a5 5 0 0 1 4.995 -4.783z"}),y.jsx("path",{d:"M14 14a5 5 0 0 1 5 5v1a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-1a5 5 0 0 1 5 -5h4z"})]})})]}),y.jsxs("div",{className:"carousel-container",children:[y.jsx("div",{className:"carousel",ref:Qe,style:{transform:`translateX(-${v*100}%)`},children:(lr=Ge.images)==null?void 0:lr.map((Ne,St)=>y.jsx("div",{className:"carousel-slide",children:y.jsx("img",{src:Ne,alt:p.formatMessage({id:"imageAlt"},{title:Ge.title,n:St+1}),loading:St>0?"lazy":"eager",style:{width:"100%",height:"100%",objectFit:"cover"}})},St))}),y.jsx("div",{className:"carousel-fade"})]}),y.jsx("div",{className:"carousel-dots",children:(Lt=Ge.images)==null?void 0:Lt.map((Ne,St)=>y.jsx("button",{className:`dot ${St===v?"active":""}`,onClick:()=>rr(St),"aria-label":p.formatMessage({id:"goToSlide"},{n:St+1})},St))})]}),y.jsxs("section",{className:"location-info2",children:[y.jsxs("div",{className:"you-are-here",children:[y.jsx("div",{className:"line left-line"}),y.jsx("div",{className:"circle"}),y.jsx("span",{children:y.jsx(qe,{id:"youAreHere"})}),y.jsx("div",{className:"line right-line"})]}),y.jsx("h1",{children:Ge.title}),y.jsx("h2",{children:Ge.location}),y.jsxs("div",{className:"location-meta",children:[y.jsxs("div",{className:"opening-hours-badge",children:[y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-clock",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"}),y.jsx("path",{d:"M12 7v5l3 3"})]}),y.jsx("span",{children:Ge.openingHours})]}),y.jsxs("div",{className:"views-rating",children:[y.jsxs("span",{className:"rating",children:[y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z"})]}),tt.toFixed(1)]}),y.jsxs("span",{className:"views",children:["(",Ve," ",p.formatMessage({id:"commentsLabel"}),")"]})]})]}),y.jsxs("div",{className:"about-location",ref:Ot,children:[y.jsx("h3",{children:y.jsx(qe,{id:"aboutLocation",values:{title:Ge.title}})}),y.jsxs("div",{className:`about-content ${U?"expanded":""}`,children:[y.jsxs("p",{children:[U?Ge.about.full:Ge.about.short,!U&&y.jsx("button",{className:"read-more",onClick:On,children:y.jsx(qe,{id:"readMore"})})]}),U&&y.jsx("div",{className:"close-button-container",children:y.jsx("button",{className:"read-more close-button",onClick:On,children:y.jsx(qe,{id:"close"})})})]})]})]}),y.jsxs("section",{className:"events-section",children:[y.jsx("h3",{children:y.jsx(qe,{id:"audioTextContent",values:{title:Ge.title}})}),y.jsx("div",{className:"events-list",children:(or=Ge.events)==null?void 0:or.map(Ne=>y.jsxs("div",{className:"event-item",children:[y.jsx("h4",{children:Ne.title}),y.jsx("span",{className:"event-date",children:Ne.date}),y.jsx("p",{children:Ne.description})]},Ne.id))})]}),y.jsxs("section",{className:"comments-section",children:[y.jsxs("div",{className:"comments-header",children:[y.jsx("h3",{children:y.jsx(qe,{id:"commentsTitle",values:{count:P.length}})}),y.jsxs("button",{className:"view-all-btn",children:[y.jsx(qe,{id:"viewAll"}),y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M15 6l-6 6l6 6"})]})]})]}),y.jsxs("div",{className:"comment-input-wrapper",onClick:Fr,children:[y.jsxs("div",{className:"comment-input-header",children:[y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-bubble-text",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M7 10h10"}),y.jsx("path",{d:"M9 14h5"}),y.jsx("path",{d:"M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16"})]}),y.jsx("h4",{children:y.jsx(qe,{id:"commentPromptTitle"})})]}),y.jsx("p",{className:"comment-instruction",children:y.jsx(qe,{id:"commentPromptInstruction"})}),y.jsxs("div",{className:"comment-input-container",children:[y.jsx("input",{type:"text",placeholder:p.formatMessage({id:"commentPlaceholder"}),readOnly:!0}),y.jsx("button",{type:"button",className:"send-comment",children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-send-2",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M19.302 4.034l-16.302 7.966l16.302 7.966a.503 .503 0 0 0 .546 -.124a.555 .555 0 0 0 .12 -.568l-2.468 -7.274l2.468 -7.274a.555 .555 0 0 0 -.12 -.568a.503 .503 0 0 0 -.546 -.124z"}),y.jsx("path",{d:"M17.5 12h-14.5"})]})})]})]}),y.jsx("div",{className:"comment-list-horizontal",children:P.map((Ne,St)=>y.jsxs("div",{className:"comment-item",children:[y.jsxs("div",{className:"comment-header",children:[y.jsxs("div",{className:"comment-author-section",children:[y.jsx("div",{className:"profile-avatar2"}),y.jsx("span",{className:"comment-author",children:Ne.author})]}),y.jsx("span",{className:"comment-date",children:Ne.date})]}),y.jsx("div",{className:"comment-text",children:Ne.text}),y.jsx("div",{className:"comment-rating-section",children:y.jsx("div",{className:"rating-stars",children:[1,2,3,4,5].map($t=>y.jsxs("svg",{className:$t<=Ne.rating?"filled":"",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z"})]},$t))})})]},St))})]}),he&&y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"modal-overlay",onClick:Hr}),y.jsxs("div",{className:"comment-modal",children:[y.jsxs("div",{className:"modal-header",children:[y.jsx("h3",{children:y.jsx(qe,{id:"commentModalTitle"})}),y.jsx("button",{className:"close-modal",onClick:Hr,children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M18 6l-12 12"}),y.jsx("path",{d:"M6 6l12 12"})]})})]}),y.jsxs("div",{className:"modal-content",children:[y.jsx("p",{className:"modal-instruction",children:y.jsx(qe,{id:"commentModalInstruction"})}),y.jsxs("div",{className:"rating-section",children:[y.jsx("p",{children:y.jsx(qe,{id:"ratingPrompt"})}),y.jsx("div",{className:"stars",children:[5,4,3,2,1].map(Ne=>y.jsx("span",{onMouseEnter:()=>Ze(Ne),onMouseLeave:Er,onClick:()=>Le(Ne),children:y.jsxs("svg",{className:`star-icon ${Ne<=(ke||oe)?"filled":""}`,xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z"})]})},Ne))})]}),y.jsx("div",{className:"modal-comment-input",children:y.jsx("textarea",{placeholder:p.formatMessage({id:"commentPlaceholder"}),value:E,onChange:Ne=>k(Ne.target.value)})}),y.jsx("button",{className:"submit-comment",onClick:ir,children:y.jsx(qe,{id:"submitComment"})})]})]})]}),y.jsxs("div",{className:`search-bar-container ${mt?"expanded":""}`,children:[y.jsx("div",{className:"search-bar-toggle",onClick:Qn,children:y.jsx("div",{className:"toggle-handle"})}),y.jsxs("form",{className:"search-bar",onSubmit:En,children:[y.jsx("button",{type:"submit",className:"search-icon",children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 0 0 -14 0"}),y.jsx("path",{d:"M21 21l-6 -6"})]})}),y.jsx("input",{type:"text",placeholder:p.formatMessage({id:"searchPlaceholder"}),value:F,onChange:jt,onFocus:fr,onBlur:Ye,ref:ln}),Ue?y.jsx("button",{type:"button",className:"close-search-button",onClick:Ne=>{Ne.stopPropagation(),Bt(Ne)},"aria-label":F.trim()===""?p.formatMessage({id:"closeSearch"}):p.formatMessage({id:"clearSearch"}),children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-x",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M18 6l-12 12"}),y.jsx("path",{d:"M6 6l12 12"})]})}):y.jsxs("button",{type:"button",className:"map-button",onClick:()=>a("/mpr"),children:[y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",className:"icon icon-tabler icons-tabler-map-pin",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M18.364 4.636a9 9 0 0 1 .203 12.519l-.203 .21l-4.243 4.242a3 3 0 0 1 -4.097 .135l-.144 -.135l-4.244 -4.243a9 9 0 0 1 12.728 -12.728zm-6.364 3.364a3 3 0 1 0 0 6a3 3 0 0 0 0 -6z"})]}),y.jsx("span",{children:y.jsx(qe,{id:"map"})})]})]}),mt&&dt&&y.jsxs("div",{className:"integrated-routing-content",children:[y.jsxs("div",{className:"routing-categories-section",children:[y.jsx("h2",{className:"routing-section-title",children:y.jsx(qe,{id:"searchSuggestions"})}),y.jsxs("div",{className:`routing-categories-grid ${Xe?"expanded":""}`,children:[Sr.map((Ne,St)=>y.jsxs("div",{className:"routing-category-item",onClick:()=>er(Ne),children:[y.jsx("div",{className:"category-icon",dangerouslySetInnerHTML:{__html:Ne.svg}}),y.jsx("span",{children:p.formatMessage({id:Ne.label})})]},St)),Xe&&Sn.map((Ne,St)=>y.jsxs("div",{className:"routing-category-item",onClick:()=>er(Ne),children:[y.jsx("div",{className:"category-icon",dangerouslySetInnerHTML:{__html:Ne.svg}}),y.jsx("span",{children:p.formatMessage({id:Ne.label})})]},St+Sr.length)),Xe&&Sn.map((Ne,St)=>y.jsxs("div",{className:"routing-category-item",onClick:()=>ai(p.formatMessage({id:Ne.label})),children:[y.jsx("div",{className:"category-icon",dangerouslySetInnerHTML:{__html:Ne.svg}}),y.jsx("span",{children:p.formatMessage({id:Ne.label})})]},St+Sr.length))]}),y.jsxs("button",{className:"routing-show-more-btn",onClick:()=>It(!Xe),children:[Xe?p.formatMessage({id:"showLess"}):p.formatMessage({id:"showMore"}),y.jsxs("svg",{className:`show-more-icon ${Xe?"expanded":""}`,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M15 6l-6 6l6 6"})]})]})]}),y.jsxs("div",{className:"shrine-events-section",children:[y.jsxs("div",{className:"shrine-events-header",children:[y.jsx("h2",{className:"shrine-events-title",children:y.jsx(qe,{id:"shrineEventsTitle"})}),y.jsxs("button",{className:"view-all-events",children:[y.jsx(qe,{id:"viewAll"}),y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M15 6l-6 6l6 6"})]})]})]}),y.jsx("div",{className:"shrine-events-list",children:(Gr=dt.places.shrineEvents)==null?void 0:Gr.map((Ne,St)=>y.jsxs("div",{className:"shrine-event-item",children:[y.jsx("div",{className:"place-image-placeholder",style:{backgroundImage:`url(${Ne.image})`}}),y.jsxs("div",{className:"place-info",children:[y.jsx("h3",{className:"place-title",children:Ne.title}),y.jsx("p",{className:"place-description",children:Ne.description}),y.jsxs("div",{className:"place-info2",children:[y.jsxs("span",{className:"place-address",children:[y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-door",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M14 12v.01"}),y.jsx("path",{d:"M3 21h18"}),y.jsx("path",{d:"M6 21v-16a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v16"})]}),Ne.location]}),y.jsx("div",{className:"place-meta",children:y.jsxs("span",{className:"shrine-event-time",children:[y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M17 3.34a10 10 0 1 1 -14.995 8.984l-.005 -.324l.005 -.324a10 10 0 0 1 14.995 -8.336zm-5 2.66a1 1 0 0 0 -.993 .883l-.007 .117v5l.009 .131a1 1 0 0 0 .197 .477l.087 .1l3 3l.094 .082a1 1 0 0 0 1.226 0l.094 -.083l.083 -.094a1 1 0 0 0 0 -1.226l-.083 -.094l-2.707 -2.708v-4.585l-.007 -.117a1 1 0 0 0 -.993 -.883z"})]}),Ne.time]})})]}),y.jsx("div",{className:"place-actions",children:y.jsxs("button",{className:"place-action-btn",onClick:()=>a("/fs"),children:[y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M11.092 2.581a1 1 0 0 1 1.754 -.116l.062 .116l8.005 17.365c.198 .566 .05 1.196 -.378 1.615a1.53 1.53 0 0 1 -1.459 .393l-7.077 -2.398l-6.899 2.338a1.535 1.535 0 0 1 -1.52 -.231l-.112 -.1c-.398 -.386 -.556 -.954 -.393 -1.556l.047 -.15l7.97 -17.276z"})]}),y.jsx(qe,{id:"navigate"})]})})]})]},St))})]}),y.jsxs("div",{className:"routing-places-section",children:[y.jsxs("div",{className:"routing-tabs",children:[y.jsx("button",{className:`routing-tab ${We==="mostVisited"?"active":""}`,onClick:()=>lt("mostVisited"),children:y.jsx(qe,{id:"mostVisited"})}),y.jsx("button",{className:`routing-tab ${We==="closest"?"active":""}`,onClick:()=>lt("closest"),children:y.jsx(qe,{id:"nearMe"})})]}),y.jsxs("div",{className:"routing-places-content",children:[We==="mostVisited"&&y.jsx(y.Fragment,{children:dt.places.mostVisited.map((Ne,St)=>y.jsxs("div",{className:"routing-place-card",children:[y.jsx("div",{className:"place-image-placeholder",style:{backgroundImage:`url(${Ne.image})`},onClick:()=>ai(Ne.title)}),y.jsxs("div",{className:"place-info",children:[y.jsx("h4",{className:"place-title",children:Ne.title}),y.jsxs("div",{className:"place-meta",children:[y.jsx("div",{className:"place-address",children:Ne.address}),y.jsx("span",{className:"place-meta-separator",children:"|"}),y.jsx("span",{children:Ne.distance}),y.jsx("span",{className:"place-meta-separator",children:"|"}),y.jsx("span",{children:Ne.time})]}),y.jsxs("div",{className:"place-rating-section",children:[y.jsx("div",{className:"place-rating-stars",children:[1,2,3,4,5].map($t=>y.jsxs("svg",{className:$t<=Math.round(Ne.rating)?"filled":"",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z"})]},$t))}),y.jsxs("span",{className:"place-views",children:["(",Ne.views," ",p.formatMessage({id:"commentsLabel"}),")"]})]}),y.jsx("p",{className:"place-description",children:Ne.description}),y.jsxs("button",{className:"read-more-btn",children:[y.jsx(qe,{id:"readMore"}),y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M15 6l-6 6l6 6"})]})]}),y.jsxs("div",{className:"place-actions",children:[y.jsxs("button",{className:"place-action-btn2",onClick:()=>a("/fs"),children:[y.jsxs("svg",{className:"action-icon",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M12 18.5l7.265 2.463c.196 .077 .42 .032 .57 -.116a.548 .548 0 0 0 .134 -.572l-7.969 -17.275l-7.97 17.275c-.07 .2 -.017 .424 .135 .572c.15 .148 .374 .193 .57 .116l7.265 -2.463"})]}),y.jsx(qe,{id:"navigate"})]}),y.jsxs("button",{className:"place-action-btn2",children:[y.jsxs("svg",{className:"action-icon",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M3 4m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"}),y.jsx("path",{d:"M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10"}),y.jsx("path",{d:"M10 12l4 0"})]}),y.jsx(qe,{id:"save"})]})]})]})]},St))}),We==="closest"&&y.jsx(y.Fragment,{children:dt.places.nearest.map((Ne,St)=>y.jsxs("div",{className:"routing-place-card",children:[y.jsx("div",{className:"place-image-placeholder",style:{backgroundImage:`url(${Ne.image})`},onClick:()=>ai(Ne.title)}),y.jsxs("div",{className:"place-info",children:[y.jsx("h4",{className:"place-title",children:Ne.title}),y.jsx("div",{className:"place-address",children:Ne.address}),y.jsxs("div",{className:"place-meta",children:[y.jsx("span",{children:Ne.distance}),y.jsx("span",{className:"place-meta-separator",children:"|"}),y.jsx("span",{children:Ne.time})]}),y.jsx("p",{className:"place-description",children:Ne.description}),y.jsxs("button",{className:"read-more-btn",children:[y.jsx(qe,{id:"readMore"}),y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M15 6l-6 6l6 6"})]})]}),y.jsxs("div",{className:"place-actions",children:[y.jsxs("button",{className:"place-action-btn",onClick:()=>a("/fs"),children:[y.jsxs("svg",{className:"action-icon",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M12 18.5l7.265 2.463c.196 .077 .42 .032 .57 -.116a.548 .548 0 0 0 .134 -.572l-7.969 -17.275l-7.97 17.275c-.07 .2 -.017 .424 .135 .572c.15 .148 .374 .193 .57 .116l7.265 -2.463"})]}),y.jsx(qe,{id:"navigate"})]}),y.jsxs("button",{className:"place-action-btn",children:[y.jsxs("svg",{className:"action-icon",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M3 4m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"}),y.jsx("path",{d:"M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10"}),y.jsx("path",{d:"M10 12l4 0"})]}),y.jsx(qe,{id:"save"})]})]})]})]},St))})]})]})]})]}),nt&&y.jsxs(y.Fragment,{children:[y.jsx("div",{className:`search-modal-overlay ${gt?"fade-out":"fade-in"}`,onClick:Bt}),y.jsxs("div",{className:`search-modal ${gt?"fade-out":"fade-in"}`,children:[y.jsx("div",{className:"search-modal-header",children:y.jsxs("form",{className:"search-bar expanded-search",onSubmit:En,children:[y.jsx("button",{type:"submit",className:"search-icon",children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 0 0 -14 0"}),y.jsx("path",{d:"M21 21l-6 -6"})]})}),y.jsx("input",{type:"text",placeholder:p.formatMessage({id:"searchPlaceholder"}),value:F,onChange:jt,autoFocus:!0,ref:ln,className:"expanded-search-input"}),y.jsx("button",{type:"button",className:"close-search-button",onClick:Ne=>{Ne.stopPropagation(),Bt(Ne)},"aria-label":F.trim()===""?p.formatMessage({id:"closeSearch"}):p.formatMessage({id:"clearSearch"}),children:y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-x",children:[y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),y.jsx("path",{d:"M18 6l-12 12"}),y.jsx("path",{d:"M6 6l12 12"})]})})]})}),y.jsx("div",{className:"search-modal-content",children:si?y.jsx("div",{className:"search-results-container",children:nr.length>0?y.jsx("div",{className:"subgroups-without-images",children:nr.map((Ne,St)=>{const $t=cp.find(mn=>mn.value===Ne.groupValue);return y.jsxs("div",{className:"subgroup-item-no-image",onClick:()=>ai(Ne.label),children:[y.jsx("div",{className:"subgroup-icon",dangerouslySetInnerHTML:{__html:($t==null?void 0:$t.svg)||""}}),y.jsxs("div",{className:"subgroup-text",children:[y.jsx("h4",{children:Ne.label}),Ne.description&&y.jsx("p",{children:Ne.description})]})]},St)})}):y.jsx("div",{className:"no-results",children:y.jsx("p",{children:y.jsx(qe,{id:"noResultsFound",values:{query:F}})})})}):Yt?y.jsxs("div",{className:"subgroups-container",children:[y.jsx("div",{className:"subgroups-with-images",children:y.jsx("div",{className:"subgroups-grid",children:sp[Yt.value].filter(Ne=>Ne.img).map((Ne,St)=>y.jsx("div",{className:"subgroup-item with-image",style:{backgroundImage:Ne.img?`url(${Ne.img})`:"none",backgroundSize:"cover",backgroundPosition:"center",backgroundColor:"rgba(255,255,255,0.7)",backgroundBlendMode:"lighten"},children:y.jsxs("div",{className:"subgroup-info",children:[y.jsx("h4",{children:Ne.label}),Ne.description&&y.jsx("p",{children:Ne.description})]})},St))})}),y.jsx("div",{className:"subgroups-without-images",children:sp[Yt.value].filter(Ne=>!Ne.img).map((Ne,St)=>y.jsxs("div",{className:"subgroup-item-no-image",children:[y.jsx("div",{className:"subgroup-icon",dangerouslySetInnerHTML:{__html:Ne.svg}}),y.jsxs("div",{className:"subgroup-text",children:[y.jsx("h4",{children:Ne.label}),Ne.description&&y.jsx("p",{children:Ne.description})]})]},St))})]}):y.jsx("div",{className:"search-results-placeholder",children:y.jsx("p",{children:y.jsx(qe,{id:"enterSearchTerm"})})})})]})]})]}):y.jsx("div",{className:"no-data",children:p.formatMessage({id:"noDataFound"})})},T2=()=>y.jsx("header",{className:"app-header",children:y.jsx("nav",{className:"main-nav",children:y.jsxs("ul",{children:[y.jsx("li",{children:y.jsx(Yh,{to:"/",children:y.jsx(qe,{id:"home"})})}),y.jsx("li",{children:y.jsx(Yh,{to:"/map",children:y.jsx(qe,{id:"map"})})}),y.jsx("li",{children:y.jsx(Yh,{to:"/qr-scan",children:y.jsx(qe,{id:"qrScan"})})}),y.jsx("li",{children:y.jsx(Yh,{to:"/settings",children:y.jsx(qe,{id:"settings"})})}),y.jsx("li",{children:y.jsx(Yh,{to:"/Profile",children:y.jsx(qe,{id:"profile"})})})]})})}),k2=()=>y.jsx("footer",{className:"app-footer",children:y.jsxs("div",{className:"footer-content",children:[y.jsx("p",{children:y.jsx(qe,{id:"copyright",values:{year:new Date().getFullYear()}})}),y.jsxs("div",{className:"footer-links",children:[y.jsx("a",{href:"#",target:"_blank",rel:"noopener noreferrer",children:y.jsx(qe,{id:"aboutUs"})}),y.jsx("a",{href:"#",target:"_blank",rel:"noopener noreferrer",children:y.jsx(qe,{id:"contactUs"})}),y.jsx("a",{href:"#",target:"_blank",rel:"noopener noreferrer",children:y.jsx(qe,{id:"privacy"})})]})]})}),M2=()=>{const a=dd(),p=Ui(),v=a.pathname==="/login"||a.pathname==="/Profile"||a.pathname==="/lang"||a.pathname==="/location"||a.pathname==="/"||a.pathname==="/mpr"||a.pathname==="/fs"||a.pathname==="/rop"||a.pathname==="/rng",[w,E]=ee.useState(null),[k,P]=ee.useState(!1);ee.useEffect(()=>{document.title=p.formatMessage({id:"appTitle"})},[p.locale]),ee.useEffect(()=>{const N=V=>{V.preventDefault(),E(V),P(!0)};return window.addEventListener("beforeinstallprompt",N),()=>window.removeEventListener("beforeinstallprompt",N)},[]);const c=()=>{w&&(w.prompt(),w.userChoice.finally(()=>{E(null),P(!1)}))},F=()=>{P(!1)};return y.jsxs("div",{className:"app",children:[!v&&y.jsx(T2,{}),y.jsxs("main",{className:`main-content ${v?"no-header-footer-layout":""}`,children:[k&&y.jsx("div",{className:"pwa-install-overlay",children:y.jsxs("div",{className:"pwa-install-dialog",children:[y.jsx("h3",{children:y.jsx(qe,{id:"pwaInstallTitle"})}),y.jsx("p",{children:y.jsx(qe,{id:"pwaInstallPrompt"})}),y.jsx("button",{className:"pwa-install-btn",onClick:c,children:y.jsx(qe,{id:"pwaInstallButton"})}),y.jsx("br",{}),y.jsx("button",{className:"pwa-install-close",onClick:F,children:y.jsx(qe,{id:"pwaCloseButton"})})]})}),y.jsxs(fx,{children:[y.jsx(rl,{path:"/login",element:y.jsx(F_,{})}),y.jsx(rl,{path:"/profile",element:y.jsx(Tx,{})}),y.jsx(rl,{path:"/fs",element:y.jsx(R_,{})}),y.jsx(rl,{path:"/rop",element:y.jsx(W_,{})}),y.jsx(rl,{path:"/",element:y.jsx(D_,{})}),y.jsx(rl,{path:"/mpr",element:y.jsx(H_,{})}),y.jsx(rl,{path:"/rng",element:y.jsx(q_,{})}),y.jsx(rl,{path:"/location",element:y.jsx(E2,{})})]})]}),!v&&y.jsx(k2,{})]})};function C2(){return y.jsx(wx,{children:y.jsx(M2,{})})}const P2=" !",I2=" ",A2="                  .",L2="  ",z2="   !",j2="              .",R2="  ",D2=" {n}  {title}",N2='     <a href="/terms"></a>  <a href="/privacy"> </a> ',B2="",F2="",O2=" QR",$2="",U2="",V2=" {year}   -    ",H2=" ",G2="  ",q2=" ",W2="  ",Z2="    ",X2="     {phone}  ",K2="   ",J2="",Y2="      ",Q2=" ",ew=" ",tw=" ",nw=" ",rw="  ",iw="   ",ow="   ",sw="",aw=" ",lw=" ",cw="",uw=" ",hw="  ",dw="",pw="   ",fw="   ...",mw="     ",gw="          .         .",yw=" :",vw="   ",xw="  !",_w=" {title}",ww=" ",bw="",Sw="    {title}",Ew=" ({count})",Tw=" ",kw="      ",Mw="           .       .",Cw=" ",Pw=" ",Iw="  ",Aw="",Lw=" ",zw="  ",jw="",Rw="",Dw=" ",Nw=" ",Bw="  ...",Fw="   : {error}",Ow="  ",$w="   {n}",Uw="  ",Vw="   ",Hw="   ",Gw=" ",qw=" ",Ww=" ",Zw="  ",Xw='  "{query}"  ',Kw="       ",Jw="   ",Yw=" ...",Qw="   ",eb="    ",tb="  ",nb="  ",rb="   ({loc})",ib="  ",ob="  ",sb="     ",ab="  ",lb=" ",cb=" ",ub=" ",hb="",db="",pb="",fb="",mb="",gb="  ",yb="",vb="  ",xb=" ",_b="   ",wb=":",bb=":",Sb=":",Eb=":    .         .",Tb="   .",kb="       .",Mb="  ...",Cb="  ",Pb="  ",Ib=" ",Ab=" ",Lb=" :",zb="  ():",jb=" :",Rb=" ():",Db=" :",Nb=" :",Bb="  :",Fb="    ",Ob="           .          .",$b=" ",Ub=" ",Vb="  ",Hb=" ",Gb=" ",qb="",Wb=" ",Zb="",Xb=" ",Kb=" ",Jb="   ",Yb=" ",Qb=" ",eS=" ",tS="   ",nS="  ",rS="",iS="",oS="",sS="  ",aS="  ",lS="   ",cS="  ",uS="  ()",hS=" ",dS="      ",pS=" ",fS="        ...",mS="   ()",gS="        ...",yS="  ",vS="      ",xS="  ",_S="      ...",wS="  ",bS=" ",SS=" ",ES="",TS=" ",kS="",MS="  ",CS="  ",PS=" {origin}  {destination}",IS="",AS="",LS="",zS="",jS=" ",RS="         .",DS="",NS="   ",BS="",FS="    {name}",OS="    {title}",$S="        {title}",US="   {name}",VS="   {name}",HS=" {num}",GS={welcome:P2,appTitle:I2,selectLanguage:A2,loginButton:L2,loginTitle:z2,enterPhone:j2,logoAlt:R2,imageAlt:D2,terms:N2,home:B2,map:F2,qrScan:O2,settings:$2,profile:U2,copyright:V2,aboutUs:H2,contactUs:G2,privacy:q2,language:W2,enterVerification:Z2,sentCode:X2,wrongPhone:K2,edit:J2,resendCode:Y2,phonePlaceholder:Q2,profileTitle:ew,completeProfile:tw,accountSection:nw,accountInfo:rw,myRoutes:iw,savedPlaces:ow,settingsSection:sw,notifications:aw,supportSection:lw,support:cw,faq:uw,termsRegulation:hw,logoutTitle:dw,logoutAccount:pw,commentPlaceholder:fw,commentModalTitle:mw,commentModalInstruction:gw,ratingPrompt:yw,submitComment:vw,youAreHere:xw,aboutLocation:_w,readMore:ww,close:bw,audioTextContent:Sw,commentsTitle:Ew,viewAll:Tw,commentPromptTitle:kw,commentPromptInstruction:Mw,showLess:Cw,showMore:Pw,shrineEventsTitle:Iw,navigate:Aw,mostVisited:Lw,nearMe:zw,save:jw,commentsLabel:Rw,defaultCommentAuthor:Dw,searchSuggestions:Nw,loading:Bw,fetchError:Fw,noDataFound:Ow,goToSlide:$w,searchPlaceholder:Uw,originPlaceholder:Vw,destinationPlaceholder:Hw,destinationSearchPlaceholder:Gw,originSearchPlaceholder:qw,closeSearch:Ww,clearSearch:Zw,noResultsFound:Xw,enterSearchTerm:Kw,chooseFromMap:Jw,emergencyPlaceholder:Yw,emergencySubmit:Qw,mapSelectFromMap:eb,mapRoutingTitle:tb,mapCurrentOriginLabel:nb,mapCurrentLocation:rb,mapCurrentLocationName:ib,mapSelectedLocation:ob,mapSelectedLocationFromMap:sb,mapRecentSearches:ab,groupCourtyardPlural:lb,groupEyvanPlural:cb,groupRavaqPlural:ub,groupMosques:hb,groupSchools:db,groupServices:pb,groupCulture:fb,groupCemetery:mb,groupQRScan:gb,groupOther:yb,mapStopFollow:vb,mapStartFollow:xb,mapCenter:_b,mapLatitude:wb,mapLongitude:bb,mapAccuracy:Sb,drStepWarning:Eb,drSensorsUnsupported:Tb,drPermissionNeeded:kb,drCalibrating:Mb,drStopTracking:Cb,drStartTracking:Pb,drReset:Ib,drExportLog:Ab,drStepCount:Lb,drStrideLength:zb,drRelPosition:jb,drHeading:Rb,drLinearSpeed:Db,drAngularSpeed:Nb,drEstimatedStride:Bb,emergencyTitle:Fb,emergencySubtitle:Ob,emergencyFire:$b,emergencyTheft:Ub,emergencyMedical:Vb,emergencyMissing:Hb,soundSettingsTitle:Gb,soundOptionOn:qb,soundOptionAlertOnly:Wb,soundOptionOff:Zb,emergencyButtonLabel:Xb,arrivalTime:Kb,routeOverview:Jb,allRoutes:Yb,otherRoutes:Qb,startRouting:eS,stopRouting:tS,returnToRoute:nS,from:rS,to:iS,meters:oS,metersPerSecond:sS,degreesPerSecond:aS,defaultUserName:lS,defaultLocation:cS,defaultBabRezaName:uS,destSahnEnqelabName:hS,destSahnEnqelabLocation:dS,destEyvanTalaName:pS,destEyvanTalaLocation:fS,destRavaqMasoumehName:mS,destRavaqMasoumehLocation:gS,destMasjedGoharshadName:yS,destMasjedGoharshadLocation:vS,destSahnPayambarAzamName:xS,destSahnPayambarAzamLocation:_S,finalSearchTitle:wS,saveDestination:bS,shareRoute:SS,transportWalk:ES,transportCar:TS,transportWheelchair:kS,routeForMen:MS,routeForWomen:CS,routeSummary:PS,minutesUnit:IS,secondsUnit:AS,previous:LS,next:zS,pwaInstallTitle:jS,pwaInstallPrompt:RS,pwaInstallButton:DS,mapNoRecentSearches:NS,pwaCloseButton:BS,stepMoveToDoor:FS,stepPassConnection:OS,stepEnterNextSahn:$S,stepPassDoor:US,stepArriveDestination:VS,stepNumber:HS},qS="Welcome!",WS="Golden Path",ZS="To access the Golden Path app, first choose your language.",XS="Enter App",KS="Login!",JS="Enter your mobile number to access more features.",YS="App logo",QS="Image {n} of {title}",eE='By logging in you accept the <a href="/terms">terms</a> and <a href="/privacy">privacy policy</a>',tE="Home",nE="Map",rE="QR Scan",iE="Settings",oE="Profile",sE=" {year} Golden Path - All rights reserved",aE="About Us",lE="Contact Us",cE="Privacy",uE="App Language",hE="Enter the verification code",dE="We sent a verification code to {phone}",pE="Is the phone number incorrect?",fE="Edit",mE="Resend code in 50 seconds",gE="Mobile number",yE="Account",vE="Complete Profile",xE="Account",_E="Account Information",wE="My Routes",bE="Saved Locations",SE="Settings",EE="Notifications",TE="Astan Quds",kE="Support",ME="FAQ",CE="Terms and Conditions",PE="Logout",IE="Sign out",AE="Write your comment...",LE="Write your opinion",zE="Write your comment about this place. After approval, your comment will be published.",jE="Rate:",RE="Submit Comment",DE="You are here!",NE="About {title}",BE="Read more",FE="Close",OE="Audio and text content of {title}",$E="Comments ({count})",UE="View all",VE="Write your comment about this place",HE="Write your comment about this place and give it a rating. After approval, your comment will be published.",GE="Show less",qE="View more",WE="Shrine programs",ZE="Navigate",XE="Most visited places",KE="Places near me",JE="Save",YE="comments",QE="New user",e4="Search suggestions",t4="Loading...",n4="Error fetching data: {error}",r4="No data found",i4="Go to slide {n}",o4="Where do you want to go?",s4="Select origin",a4="Select destination",l4="Search destination",c4="Search origin",u4="Close search",h4="Clear search",d4='No results found for "{query}"',p4="Enter a search term",f4="Choose from map",m4="More details...",g4="Confirm and send request",y4="Select location from map",v4="Shrine Routing",x4="Current origin",_4="Current location ({loc})",w4="Your current location",b4="Selected location",S4="Location selected from map",E4="Your recent searches",T4="Courtyards",k4="Eyvans",M4="Ravaqs",C4="Mosques",P4="Schools",I4="Services",A4="Cultural",L4="Cemetery",z4="QR Scan",j4="Other",R4="Stop following",D4="Follow location",N4="Center to current location",B4="Lat:",F4="Lng:",O4="Accuracy:",$4="Warning: steps not detected. Ensure the device is moving and sensors are active.",U4="Device sensors are not supported.",V4="Enable sensor permissions to proceed.",H4="Calibrating sensors...",G4="Stop advanced tracking",q4="Start advanced tracking",W4="Reset system",Z4="Export log",X4="Steps:",K4="Stride length (m):",J4="Relative position:",Y4="Heading (deg):",Q4="Linear speed:",eT="Angular speed:",tT="Estimated stride:",nT="Shrine emergency request",rT="Please select the request type and describe it. Shrine staff will reach you shortly.",iT="Report fire",oT="Report theft",sT="Request medical services",aT="Report missing person",lT="Sound settings",cT="On",uT="Alerts only",hT="Off",dT="Shrine emergencies",pT="Arrival time",fT="Route overview",mT="All routes",gT="Other routes",yT="Start navigation",vT="End trip",xT="Return to route",_T="From",wT="To",bT="m",ST="m/s",ET="deg/s",TT="Astan Quds User",kT="Astan Quds Razavi",MT="Bab al-Reza Gate",CT="Sahn Enqelab",PT="Imam Reza Shrine, Sahn Enqelab",IT="Golden Eyvan",AT="Imam Reza Shrine, between Tabarsi ...",LT="Ravaq Hazrat Masoumeh (s)",zT="Imam Reza Shrine, Sahn Ayatollah ...",jT="Goharshad Mosque",RT="Imam Reza Shrine, Sahn Goharshad",DT="Sahn Payambar Azam",NT="Imam Reza Shrine, Sahn Payambar ...",BT="Final route details",FT="Save destination",OT="Share",$T="Walking",UT="Electric van",VT="Wheelchair",HT="Route for men",GT="Route for women",qT="From {origin} to {destination}",WT="min",ZT="sec",XT="Previous",KT="Next",JT="Install App",YT="For quick access, install the app on your device.",QT="Install",ek="No recent searches",tk="Close",nk="Head toward {name}",rk="Pass connection {title}",ik="Enter next courtyard via {title}",ok="Go through {name}",sk="Arrive at {name}",ak="Step {num}",lk={welcome:qS,appTitle:WS,selectLanguage:ZS,loginButton:XS,loginTitle:KS,enterPhone:JS,logoAlt:YS,imageAlt:QS,terms:eE,home:tE,map:nE,qrScan:rE,settings:iE,profile:oE,copyright:sE,aboutUs:aE,contactUs:lE,privacy:cE,language:uE,enterVerification:hE,sentCode:dE,wrongPhone:pE,edit:fE,resendCode:mE,phonePlaceholder:gE,profileTitle:yE,completeProfile:vE,accountSection:xE,accountInfo:_E,myRoutes:wE,savedPlaces:bE,settingsSection:SE,notifications:EE,supportSection:TE,support:kE,faq:ME,termsRegulation:CE,logoutTitle:PE,logoutAccount:IE,commentPlaceholder:AE,commentModalTitle:LE,commentModalInstruction:zE,ratingPrompt:jE,submitComment:RE,youAreHere:DE,aboutLocation:NE,readMore:BE,close:FE,audioTextContent:OE,commentsTitle:$E,viewAll:UE,commentPromptTitle:VE,commentPromptInstruction:HE,showLess:GE,showMore:qE,shrineEventsTitle:WE,navigate:ZE,mostVisited:XE,nearMe:KE,save:JE,commentsLabel:YE,defaultCommentAuthor:QE,searchSuggestions:e4,loading:t4,fetchError:n4,noDataFound:r4,goToSlide:i4,searchPlaceholder:o4,originPlaceholder:s4,destinationPlaceholder:a4,destinationSearchPlaceholder:l4,originSearchPlaceholder:c4,closeSearch:u4,clearSearch:h4,noResultsFound:d4,enterSearchTerm:p4,chooseFromMap:f4,emergencyPlaceholder:m4,emergencySubmit:g4,mapSelectFromMap:y4,mapRoutingTitle:v4,mapCurrentOriginLabel:x4,mapCurrentLocation:_4,mapCurrentLocationName:w4,mapSelectedLocation:b4,mapSelectedLocationFromMap:S4,mapRecentSearches:E4,groupCourtyardPlural:T4,groupEyvanPlural:k4,groupRavaqPlural:M4,groupMosques:C4,groupSchools:P4,groupServices:I4,groupCulture:A4,groupCemetery:L4,groupQRScan:z4,groupOther:j4,mapStopFollow:R4,mapStartFollow:D4,mapCenter:N4,mapLatitude:B4,mapLongitude:F4,mapAccuracy:O4,drStepWarning:$4,drSensorsUnsupported:U4,drPermissionNeeded:V4,drCalibrating:H4,drStopTracking:G4,drStartTracking:q4,drReset:W4,drExportLog:Z4,drStepCount:X4,drStrideLength:K4,drRelPosition:J4,drHeading:Y4,drLinearSpeed:Q4,drAngularSpeed:eT,drEstimatedStride:tT,emergencyTitle:nT,emergencySubtitle:rT,emergencyFire:iT,emergencyTheft:oT,emergencyMedical:sT,emergencyMissing:aT,soundSettingsTitle:lT,soundOptionOn:cT,soundOptionAlertOnly:uT,soundOptionOff:hT,emergencyButtonLabel:dT,arrivalTime:pT,routeOverview:fT,allRoutes:mT,otherRoutes:gT,startRouting:yT,stopRouting:vT,returnToRoute:xT,from:_T,to:wT,meters:bT,metersPerSecond:ST,degreesPerSecond:ET,defaultUserName:TT,defaultLocation:kT,defaultBabRezaName:MT,destSahnEnqelabName:CT,destSahnEnqelabLocation:PT,destEyvanTalaName:IT,destEyvanTalaLocation:AT,destRavaqMasoumehName:LT,destRavaqMasoumehLocation:zT,destMasjedGoharshadName:jT,destMasjedGoharshadLocation:RT,destSahnPayambarAzamName:DT,destSahnPayambarAzamLocation:NT,finalSearchTitle:BT,saveDestination:FT,shareRoute:OT,transportWalk:$T,transportCar:UT,transportWheelchair:VT,routeForMen:HT,routeForWomen:GT,routeSummary:qT,minutesUnit:WT,secondsUnit:ZT,previous:XT,next:KT,pwaInstallTitle:JT,pwaInstallPrompt:YT,pwaInstallButton:QT,mapNoRecentSearches:ek,pwaCloseButton:tk,stepMoveToDoor:nk,stepPassConnection:rk,stepEnterNextSahn:ik,stepPassDoor:ok,stepArriveDestination:sk,stepNumber:ak},ck=" !",uk=" ",hk="                 .",dk="   ",pk="   !",fk="        .",mk=" ",gk=" {n}  {title}",yk='    <a href="/terms"></a>  <a href="/privacy"> </a>',vk="",xk="",_k="   ",wk="",bk=" ",Sk=" {year}   -   ",Ek=" ",Tk=" ",kk="",Mk=" ",Ck="  ",Pk="     {phone}",Ik="   ",Ak="",Lk="      ",zk="  ",jk=" ",Rk="  ",Dk=" ",Nk=" ",Bk=" ",Fk=" ",Ok=" ",$k="",Uk=" ",Vk="",Hk=" ",Gk=" ",qk=" ",Wk="   ",Zk=" ...",Xk="  ",Kk="    .     .",Jk=":",Yk="  ",Qk="  !",eM=" {title}",tM=" ",nM="",rM="    {title}",iM=" ({count})",oM=" ",sM="    ",aM="      .     .",lM=" ",cM=" ",uM="  ",hM="",dM="   ",pM="  ",fM="",mM="",gM=" ",yM=" ",vM=" ...",xM="   : {error}",_M="    ",wM="   {n}",bM="  ",SM="  ",EM=" ",TM="  ",kM="   ",MM=" ",CM=" ",PM='      "{query}"',IM="  ",AM="  ",LM="  ...",zM="  ",jM="   ",RM="  ",DM="  ",NM="  ({loc})",BM=" ",FM=" ",OM="   ",$M="    ",UM="",VM="",HM="",GM="",qM="",WM="",ZM="",XM="",KM="  ",JM="",YM="  ",QM=" ",eC="   ",tC=" :",nC=" :",rC=":",iC=":    .        .",oC="   .",sC="   .",aC="  ...",lC="  ",cC="  ",uC="  ",hC=" ",dC=" :",pC="  ():",fC=" :",mC=" ():",gC=" :",yC=" :",vC="  :",xC="  ",_C="      .      .",wC=" ",bC=" ",SC="  ",EC=" ",TC=" ",kC="",MC=" ",CC="",PC=" ",IC=" ",AC="  ",LC=" ",zC=" ",jC=" ",RC=" ",DC=" ",NC="",BC="",FC="",OC="/",$C="/",UC=" ",VC=" ",HC=" ",GC=" ",qC="   ",WC=" ",ZC="    ...",XC="  ",KC="     ...",JC=" ",YC="   ",QC="  ",e3="    ...",t3="  ",n3=" ",r3="",i3="",o3=" ",s3=" ",a3=" ",l3=" ",c3=" {origin}  {destination}",u3="",h3="",d3="",p3="",f3=" ",m3="     .",g3="",y3="    ",v3="",x3="  {name}",_3="   {title}",w3="    {title}",b3="  {name}",S3="  {name}",E3=" {num}",T3={welcome:ck,appTitle:uk,selectLanguage:hk,loginButton:dk,loginTitle:pk,enterPhone:fk,logoAlt:mk,imageAlt:gk,terms:yk,home:vk,map:xk,qrScan:_k,settings:wk,profile:bk,copyright:Sk,aboutUs:Ek,contactUs:Tk,privacy:kk,language:Mk,enterVerification:Ck,sentCode:Pk,wrongPhone:Ik,edit:Ak,resendCode:Lk,phonePlaceholder:zk,profileTitle:jk,completeProfile:Rk,accountSection:Dk,accountInfo:Nk,myRoutes:Bk,savedPlaces:Fk,settingsSection:Ok,notifications:$k,supportSection:Uk,support:Vk,faq:Hk,termsRegulation:Gk,logoutTitle:qk,logoutAccount:Wk,commentPlaceholder:Zk,commentModalTitle:Xk,commentModalInstruction:Kk,ratingPrompt:Jk,submitComment:Yk,youAreHere:Qk,aboutLocation:eM,readMore:tM,close:nM,audioTextContent:rM,commentsTitle:iM,viewAll:oM,commentPromptTitle:sM,commentPromptInstruction:aM,showLess:lM,showMore:cM,shrineEventsTitle:uM,navigate:hM,mostVisited:dM,nearMe:pM,save:fM,commentsLabel:mM,defaultCommentAuthor:gM,searchSuggestions:yM,loading:vM,fetchError:xM,noDataFound:_M,goToSlide:wM,searchPlaceholder:bM,originPlaceholder:SM,destinationPlaceholder:EM,destinationSearchPlaceholder:TM,originSearchPlaceholder:kM,closeSearch:MM,clearSearch:CM,noResultsFound:PM,enterSearchTerm:IM,chooseFromMap:AM,emergencyPlaceholder:LM,emergencySubmit:zM,mapSelectFromMap:jM,mapRoutingTitle:RM,mapCurrentOriginLabel:DM,mapCurrentLocation:NM,mapCurrentLocationName:BM,mapSelectedLocation:FM,mapSelectedLocationFromMap:OM,mapRecentSearches:$M,groupCourtyardPlural:UM,groupEyvanPlural:VM,groupRavaqPlural:HM,groupMosques:GM,groupSchools:qM,groupServices:WM,groupCulture:ZM,groupCemetery:XM,groupQRScan:KM,groupOther:JM,mapStopFollow:YM,mapStartFollow:QM,mapCenter:eC,mapLatitude:tC,mapLongitude:nC,mapAccuracy:rC,drStepWarning:iC,drSensorsUnsupported:oC,drPermissionNeeded:sC,drCalibrating:aC,drStopTracking:lC,drStartTracking:cC,drReset:uC,drExportLog:hC,drStepCount:dC,drStrideLength:pC,drRelPosition:fC,drHeading:mC,drLinearSpeed:gC,drAngularSpeed:yC,drEstimatedStride:vC,emergencyTitle:xC,emergencySubtitle:_C,emergencyFire:wC,emergencyTheft:bC,emergencyMedical:SC,emergencyMissing:EC,soundSettingsTitle:TC,soundOptionOn:kC,soundOptionAlertOnly:MC,soundOptionOff:CC,emergencyButtonLabel:PC,arrivalTime:IC,routeOverview:AC,allRoutes:LC,otherRoutes:zC,startRouting:jC,stopRouting:RC,returnToRoute:DC,from:NC,to:BC,meters:FC,metersPerSecond:OC,degreesPerSecond:$C,defaultUserName:UC,defaultLocation:VC,defaultBabRezaName:HC,destSahnEnqelabName:GC,destSahnEnqelabLocation:qC,destEyvanTalaName:WC,destEyvanTalaLocation:ZC,destRavaqMasoumehName:XC,destRavaqMasoumehLocation:KC,destMasjedGoharshadName:JC,destMasjedGoharshadLocation:YC,destSahnPayambarAzamName:QC,destSahnPayambarAzamLocation:e3,finalSearchTitle:t3,saveDestination:n3,shareRoute:r3,transportWalk:i3,transportCar:o3,transportWheelchair:s3,routeForMen:a3,routeForWomen:l3,routeSummary:c3,minutesUnit:u3,secondsUnit:h3,previous:d3,next:p3,pwaInstallTitle:f3,pwaInstallPrompt:m3,pwaInstallButton:g3,mapNoRecentSearches:y3,pwaCloseButton:v3,stepMoveToDoor:x3,stepPassConnection:_3,stepEnterNextSahn:w3,stepPassDoor:b3,stepArriveDestination:S3,stepNumber:E3},k3=" !",M3=" ",C3="                     ",P3="    ",I3="   !",A3="            ",L3="  ",z3="{title}   {n}",j3='      <a href="/terms"></a>  <a href="/privacy">  </a>  ',R3="",D3="",N3="  ",B3="",F3="",O3=" {year}   -    ",$3="  ",U3="   ",V3="",H3="  ",G3="   ",q3="     {phone}    ",W3="   ",Z3=" ",X3="    (  )",K3=" ",J3="  ",Y3="  ",Q3="",eP="  ",tP="    ",nP="  ",rP="",iP="",oP=" ",sP="",aP="   ",lP="  ",cP=" ",uP="   ",hP="  ...",dP="     ",pP="              ",fP="  :",mP="    ",gP="  !",yP="{title}   ",vP=" ",xP=" ",_P="{title}     ",wP=" ({count})",bP=" ",SP="       ",EP="                   .",TP=" ",kP=" ",MP="   ",CP="",PP="      ",IP="  ",AP=" ",LP="",zP=" ",jP="  ",RP="   ...",DP="    : {error}",NP="   ",BP=" {n}  ",FP="    ",OP="  ",$P="  ",UP="  ",VP="  ",HP="  ",GP="  ",qP='"{query}"      ',WP="     ",ZP="   ",XP=" ...",KP="    ",JP="    ",YP="  ",QP="   ",eI="    ({loc})",tI="   ",nI=" ",rI="   ",iI="   ",oI="",sI="",aI="",lI="",cI="",uI="",hI="",dI="",pI="   ",fI="",mI="   ",gI="  ",yI="    ",vI=" :",xI=" :",_I=":",wI=":                .",bI="     .",SI="       .",EI="    ...",TI="  ",kI="   ",MI="   ",CI="  ",PI="  :",II="   ():",AI=" :",LI=" ():",zI=" :",jI=" :",RI="   :",DI="  ",NI="                   .",BI="  ",FI="  ",OI="   ",$I="  ",UI="  ",VI="",HI=" ",GI="",qI="  ",WI="  ",ZI="  ",XI=" ",KI=" ",JI="    ",YI="  ",QI="      ",eA="",tA="",nA="",rA="  ",iA="  ",oA=" ",sA=" ",aA=" ",lA=" ",cA="    ",uA=" ",hA="     ...",dA="  ",pA="      ...",fA=" ",mA="    ",gA="  ",yA="    ...",vA="   ",xA="  ",_A=" ",wA="",bA=" ",SA=" ",EA="   ",TA="   ",kA="{origin}  {destination} ",MA="",CA="",PA="",IA="",AA="  ",LA="         ",zA="",jA="   ",RA=" ",DA="{name}   ",NA="  {title}  ",BA="{title}        ",FA="{name}  ",OA="{name}  ",$A=" {num}",UA={welcome:k3,appTitle:M3,selectLanguage:C3,loginButton:P3,loginTitle:I3,enterPhone:A3,logoAlt:L3,imageAlt:z3,terms:j3,home:R3,map:D3,qrScan:N3,settings:B3,profile:F3,copyright:O3,aboutUs:$3,contactUs:U3,privacy:V3,language:H3,enterVerification:G3,sentCode:q3,wrongPhone:W3,edit:Z3,resendCode:X3,phonePlaceholder:K3,profileTitle:J3,completeProfile:Y3,accountSection:Q3,accountInfo:eP,myRoutes:tP,savedPlaces:nP,settingsSection:rP,notifications:iP,supportSection:oP,support:sP,faq:aP,termsRegulation:lP,logoutTitle:cP,logoutAccount:uP,commentPlaceholder:hP,commentModalTitle:dP,commentModalInstruction:pP,ratingPrompt:fP,submitComment:mP,youAreHere:gP,aboutLocation:yP,readMore:vP,close:xP,audioTextContent:_P,commentsTitle:wP,viewAll:bP,commentPromptTitle:SP,commentPromptInstruction:EP,showLess:TP,showMore:kP,shrineEventsTitle:MP,navigate:CP,mostVisited:PP,nearMe:IP,save:AP,commentsLabel:LP,defaultCommentAuthor:zP,searchSuggestions:jP,loading:RP,fetchError:DP,noDataFound:NP,goToSlide:BP,searchPlaceholder:FP,originPlaceholder:OP,destinationPlaceholder:$P,destinationSearchPlaceholder:UP,originSearchPlaceholder:VP,closeSearch:HP,clearSearch:GP,noResultsFound:qP,enterSearchTerm:WP,chooseFromMap:ZP,emergencyPlaceholder:XP,emergencySubmit:KP,mapSelectFromMap:JP,mapRoutingTitle:YP,mapCurrentOriginLabel:QP,mapCurrentLocation:eI,mapCurrentLocationName:tI,mapSelectedLocation:nI,mapSelectedLocationFromMap:rI,mapRecentSearches:iI,groupCourtyardPlural:oI,groupEyvanPlural:sI,groupRavaqPlural:aI,groupMosques:lI,groupSchools:cI,groupServices:uI,groupCulture:hI,groupCemetery:dI,groupQRScan:pI,groupOther:fI,mapStopFollow:mI,mapStartFollow:gI,mapCenter:yI,mapLatitude:vI,mapLongitude:xI,mapAccuracy:_I,drStepWarning:wI,drSensorsUnsupported:bI,drPermissionNeeded:SI,drCalibrating:EI,drStopTracking:TI,drStartTracking:kI,drReset:MI,drExportLog:CI,drStepCount:PI,drStrideLength:II,drRelPosition:AI,drHeading:LI,drLinearSpeed:zI,drAngularSpeed:jI,drEstimatedStride:RI,emergencyTitle:DI,emergencySubtitle:NI,emergencyFire:BI,emergencyTheft:FI,emergencyMedical:OI,emergencyMissing:$I,soundSettingsTitle:UI,soundOptionOn:VI,soundOptionAlertOnly:HI,soundOptionOff:GI,emergencyButtonLabel:qI,arrivalTime:WI,routeOverview:ZI,allRoutes:XI,otherRoutes:KI,startRouting:JI,stopRouting:YI,returnToRoute:QI,from:eA,to:tA,meters:nA,metersPerSecond:rA,degreesPerSecond:iA,defaultUserName:oA,defaultLocation:sA,defaultBabRezaName:aA,destSahnEnqelabName:lA,destSahnEnqelabLocation:cA,destEyvanTalaName:uA,destEyvanTalaLocation:hA,destRavaqMasoumehName:dA,destRavaqMasoumehLocation:pA,destMasjedGoharshadName:fA,destMasjedGoharshadLocation:mA,destSahnPayambarAzamName:gA,destSahnPayambarAzamLocation:yA,finalSearchTitle:vA,saveDestination:xA,shareRoute:_A,transportWalk:wA,transportCar:bA,transportWheelchair:SA,routeForMen:EA,routeForWomen:TA,routeSummary:kA,minutesUnit:MA,secondsUnit:CA,previous:PA,next:IA,pwaInstallTitle:AA,pwaInstallPrompt:LA,pwaInstallButton:zA,mapNoRecentSearches:jA,pwaCloseButton:RA,stepMoveToDoor:DA,stepPassConnection:NA,stepEnterNextSahn:BA,stepPassDoor:FA,stepArriveDestination:OA,stepNumber:$A},VA={fa:GS,en:lk,ar:T3,ur:UA},HA=({children:a})=>{const p=sh(v=>v.language);return ee.useEffect(()=>{document.documentElement.lang=p,document.documentElement.dir=p==="en"?"ltr":"rtl"},[p]),y.jsx(Sv,{locale:p,messages:VA[p],defaultLocale:"fa",children:a})};function GA(a={}){const{immediate:p=!1,onNeedRefresh:v,onOfflineReady:w,onRegistered:E,onRegisteredSW:k,onRegisterError:P}=a;let c,F;const N=async($=!0)=>{await F};async function V(){if("serviceWorker"in navigator){if(c=await Kg(async()=>{const{Workbox:$}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:$}},[]).then(({Workbox:$})=>new $("/golden_path/sw.js",{scope:"/golden_path/",type:"classic"})).catch($=>{P==null||P($)}),!c)return;c.addEventListener("activated",$=>{($.isUpdate||$.isExternal)&&window.location.reload()}),c.addEventListener("installed",$=>{$.isUpdate||w==null||w()}),c.register({immediate:p}).then($=>{k?k("/golden_path/sw.js",$):E==null||E($)}).catch($=>{P==null||P($)})}}return F=V(),N}const C0=new URLSearchParams(window.location.search),ag=C0.get("lat"),lg=C0.get("lng");ag&&lg&&(sessionStorage.setItem("qrLat",ag),sessionStorage.setItem("qrLng",lg));GA({onNeedRefresh(){console.log("New content is available; please refresh.")},onOfflineReady(){console.log("Content is cached for offline use.")}});q0.createRoot(document.getElementById("root")).render(y.jsx(ed.StrictMode,{children:y.jsx(HA,{children:y.jsx(C2,{})})}));
