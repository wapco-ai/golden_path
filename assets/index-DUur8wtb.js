const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/App-DZDgRMMI.css"])))=>i.map(i=>d[i]);
var b4=Object.defineProperty;var C4=(e,o,i)=>o in e?b4(e,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[o]=i;var Wt=(e,o,i)=>C4(e,typeof o!="symbol"?o+"":o,i);function l5(e,o){for(var i=0;i<o.length;i++){const r=o[i];if(typeof r!="string"&&!Array.isArray(r)){for(const d in r)if(d!=="default"&&!(d in e)){const m=Object.getOwnPropertyDescriptor(r,d);m&&Object.defineProperty(e,d,m.get?m:{enumerable:!0,get:()=>r[d]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))r(d);new MutationObserver(d=>{for(const m of d)if(m.type==="childList")for(const x of m.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&r(x)}).observe(document,{childList:!0,subtree:!0});function i(d){const m={};return d.integrity&&(m.integrity=d.integrity),d.referrerPolicy&&(m.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?m.credentials="include":d.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function r(d){if(d.ep)return;d.ep=!0;const m=i(d);fetch(d.href,m)}})();function gc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var H0={exports:{}},Uh={},U0={exports:{}},zn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $2;function S4(){if($2)return zn;$2=1;var e=Symbol.for("react.element"),o=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),x=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),T=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),D=Symbol.iterator;function N(K){return K===null||typeof K!="object"?null:(K=D&&K[D]||K["@@iterator"],typeof K=="function"?K:null)}var $={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,q={};function H(K,be,Be){this.props=K,this.context=be,this.refs=q,this.updater=Be||$}H.prototype.isReactComponent={},H.prototype.setState=function(K,be){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,be,"setState")},H.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function G(){}G.prototype=H.prototype;function te(K,be,Be){this.props=K,this.context=be,this.refs=q,this.updater=Be||$}var oe=te.prototype=new G;oe.constructor=te,U(oe,H.prototype),oe.isPureReactComponent=!0;var Ce=Array.isArray,ae=Object.prototype.hasOwnProperty,Ne={current:null},Fe={key:!0,ref:!0,__self:!0,__source:!0};function ye(K,be,Be){var it,ft={},mt=null,xt=null;if(be!=null)for(it in be.ref!==void 0&&(xt=be.ref),be.key!==void 0&&(mt=""+be.key),be)ae.call(be,it)&&!Fe.hasOwnProperty(it)&&(ft[it]=be[it]);var ut=arguments.length-2;if(ut===1)ft.children=Be;else if(1<ut){for(var vt=Array(ut),Tt=0;Tt<ut;Tt++)vt[Tt]=arguments[Tt+2];ft.children=vt}if(K&&K.defaultProps)for(it in ut=K.defaultProps,ut)ft[it]===void 0&&(ft[it]=ut[it]);return{$$typeof:e,type:K,key:mt,ref:xt,props:ft,_owner:Ne.current}}function Ke(K,be){return{$$typeof:e,type:K.type,key:be,ref:K.ref,props:K.props,_owner:K._owner}}function Me(K){return typeof K=="object"&&K!==null&&K.$$typeof===e}function qe(K){var be={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(Be){return be[Be]})}var Re=/\/+/g;function dt(K,be){return typeof K=="object"&&K!==null&&K.key!=null?qe(""+K.key):be.toString(36)}function Xe(K,be,Be,it,ft){var mt=typeof K;(mt==="undefined"||mt==="boolean")&&(K=null);var xt=!1;if(K===null)xt=!0;else switch(mt){case"string":case"number":xt=!0;break;case"object":switch(K.$$typeof){case e:case o:xt=!0}}if(xt)return xt=K,ft=ft(xt),K=it===""?"."+dt(xt,0):it,Ce(ft)?(Be="",K!=null&&(Be=K.replace(Re,"$&/")+"/"),Xe(ft,be,Be,"",function(Tt){return Tt})):ft!=null&&(Me(ft)&&(ft=Ke(ft,Be+(!ft.key||xt&&xt.key===ft.key?"":(""+ft.key).replace(Re,"$&/")+"/")+K)),be.push(ft)),1;if(xt=0,it=it===""?".":it+":",Ce(K))for(var ut=0;ut<K.length;ut++){mt=K[ut];var vt=it+dt(mt,ut);xt+=Xe(mt,be,Be,vt,ft)}else if(vt=N(K),typeof vt=="function")for(K=vt.call(K),ut=0;!(mt=K.next()).done;)mt=mt.value,vt=it+dt(mt,ut++),xt+=Xe(mt,be,Be,vt,ft);else if(mt==="object")throw be=String(K),Error("Objects are not valid as a React child (found: "+(be==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":be)+"). If you meant to render a collection of children, use an array instead.");return xt}function ht(K,be,Be){if(K==null)return K;var it=[],ft=0;return Xe(K,it,"","",function(mt){return be.call(Be,mt,ft++)}),it}function Pe(K){if(K._status===-1){var be=K._result;be=be(),be.then(function(Be){(K._status===0||K._status===-1)&&(K._status=1,K._result=Be)},function(Be){(K._status===0||K._status===-1)&&(K._status=2,K._result=Be)}),K._status===-1&&(K._status=0,K._result=be)}if(K._status===1)return K._result.default;throw K._result}var ke={current:null},de={transition:null},je={ReactCurrentDispatcher:ke,ReactCurrentBatchConfig:de,ReactCurrentOwner:Ne};function Ee(){throw Error("act(...) is not supported in production builds of React.")}return zn.Children={map:ht,forEach:function(K,be,Be){ht(K,function(){be.apply(this,arguments)},Be)},count:function(K){var be=0;return ht(K,function(){be++}),be},toArray:function(K){return ht(K,function(be){return be})||[]},only:function(K){if(!Me(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},zn.Component=H,zn.Fragment=i,zn.Profiler=d,zn.PureComponent=te,zn.StrictMode=r,zn.Suspense=L,zn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=je,zn.act=Ee,zn.cloneElement=function(K,be,Be){if(K==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+K+".");var it=U({},K.props),ft=K.key,mt=K.ref,xt=K._owner;if(be!=null){if(be.ref!==void 0&&(mt=be.ref,xt=Ne.current),be.key!==void 0&&(ft=""+be.key),K.type&&K.type.defaultProps)var ut=K.type.defaultProps;for(vt in be)ae.call(be,vt)&&!Fe.hasOwnProperty(vt)&&(it[vt]=be[vt]===void 0&&ut!==void 0?ut[vt]:be[vt])}var vt=arguments.length-2;if(vt===1)it.children=Be;else if(1<vt){ut=Array(vt);for(var Tt=0;Tt<vt;Tt++)ut[Tt]=arguments[Tt+2];it.children=ut}return{$$typeof:e,type:K.type,key:ft,ref:mt,props:it,_owner:xt}},zn.createContext=function(K){return K={$$typeof:x,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},K.Provider={$$typeof:m,_context:K},K.Consumer=K},zn.createElement=ye,zn.createFactory=function(K){var be=ye.bind(null,K);return be.type=K,be},zn.createRef=function(){return{current:null}},zn.forwardRef=function(K){return{$$typeof:c,render:K}},zn.isValidElement=Me,zn.lazy=function(K){return{$$typeof:P,_payload:{_status:-1,_result:K},_init:Pe}},zn.memo=function(K,be){return{$$typeof:T,type:K,compare:be===void 0?null:be}},zn.startTransition=function(K){var be=de.transition;de.transition={};try{K()}finally{de.transition=be}},zn.unstable_act=Ee,zn.useCallback=function(K,be){return ke.current.useCallback(K,be)},zn.useContext=function(K){return ke.current.useContext(K)},zn.useDebugValue=function(){},zn.useDeferredValue=function(K){return ke.current.useDeferredValue(K)},zn.useEffect=function(K,be){return ke.current.useEffect(K,be)},zn.useId=function(){return ke.current.useId()},zn.useImperativeHandle=function(K,be,Be){return ke.current.useImperativeHandle(K,be,Be)},zn.useInsertionEffect=function(K,be){return ke.current.useInsertionEffect(K,be)},zn.useLayoutEffect=function(K,be){return ke.current.useLayoutEffect(K,be)},zn.useMemo=function(K,be){return ke.current.useMemo(K,be)},zn.useReducer=function(K,be,Be){return ke.current.useReducer(K,be,Be)},zn.useRef=function(K){return ke.current.useRef(K)},zn.useState=function(K){return ke.current.useState(K)},zn.useSyncExternalStore=function(K,be,Be){return ke.current.useSyncExternalStore(K,be,Be)},zn.useTransition=function(){return ke.current.useTransition()},zn.version="18.3.1",zn}var V2;function Wd(){return V2||(V2=1,U0.exports=S4()),U0.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H2;function M4(){if(H2)return Uh;H2=1;var e=Wd(),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,d=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,m={key:!0,ref:!0,__self:!0,__source:!0};function x(c,L,T){var P,D={},N=null,$=null;T!==void 0&&(N=""+T),L.key!==void 0&&(N=""+L.key),L.ref!==void 0&&($=L.ref);for(P in L)r.call(L,P)&&!m.hasOwnProperty(P)&&(D[P]=L[P]);if(c&&c.defaultProps)for(P in L=c.defaultProps,L)D[P]===void 0&&(D[P]=L[P]);return{$$typeof:o,type:c,key:N,ref:$,props:D,_owner:d.current}}return Uh.Fragment=i,Uh.jsx=x,Uh.jsxs=x,Uh}var U2;function E4(){return U2||(U2=1,H0.exports=M4()),H0.exports}var f=E4(),B=Wd();const Ze=gc(B),d2=l5({__proto__:null,default:Ze},[B]);var df={},Z0={exports:{}},_s={},q0={exports:{}},W0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z2;function L4(){return Z2||(Z2=1,function(e){function o(de,je){var Ee=de.length;de.push(je);e:for(;0<Ee;){var K=Ee-1>>>1,be=de[K];if(0<d(be,je))de[K]=je,de[Ee]=be,Ee=K;else break e}}function i(de){return de.length===0?null:de[0]}function r(de){if(de.length===0)return null;var je=de[0],Ee=de.pop();if(Ee!==je){de[0]=Ee;e:for(var K=0,be=de.length,Be=be>>>1;K<Be;){var it=2*(K+1)-1,ft=de[it],mt=it+1,xt=de[mt];if(0>d(ft,Ee))mt<be&&0>d(xt,ft)?(de[K]=xt,de[mt]=Ee,K=mt):(de[K]=ft,de[it]=Ee,K=it);else if(mt<be&&0>d(xt,Ee))de[K]=xt,de[mt]=Ee,K=mt;else break e}}return je}function d(de,je){var Ee=de.sortIndex-je.sortIndex;return Ee!==0?Ee:de.id-je.id}if(typeof performance=="object"&&typeof performance.now=="function"){var m=performance;e.unstable_now=function(){return m.now()}}else{var x=Date,c=x.now();e.unstable_now=function(){return x.now()-c}}var L=[],T=[],P=1,D=null,N=3,$=!1,U=!1,q=!1,H=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function oe(de){for(var je=i(T);je!==null;){if(je.callback===null)r(T);else if(je.startTime<=de)r(T),je.sortIndex=je.expirationTime,o(L,je);else break;je=i(T)}}function Ce(de){if(q=!1,oe(de),!U)if(i(L)!==null)U=!0,Pe(ae);else{var je=i(T);je!==null&&ke(Ce,je.startTime-de)}}function ae(de,je){U=!1,q&&(q=!1,G(ye),ye=-1),$=!0;var Ee=N;try{for(oe(je),D=i(L);D!==null&&(!(D.expirationTime>je)||de&&!qe());){var K=D.callback;if(typeof K=="function"){D.callback=null,N=D.priorityLevel;var be=K(D.expirationTime<=je);je=e.unstable_now(),typeof be=="function"?D.callback=be:D===i(L)&&r(L),oe(je)}else r(L);D=i(L)}if(D!==null)var Be=!0;else{var it=i(T);it!==null&&ke(Ce,it.startTime-je),Be=!1}return Be}finally{D=null,N=Ee,$=!1}}var Ne=!1,Fe=null,ye=-1,Ke=5,Me=-1;function qe(){return!(e.unstable_now()-Me<Ke)}function Re(){if(Fe!==null){var de=e.unstable_now();Me=de;var je=!0;try{je=Fe(!0,de)}finally{je?dt():(Ne=!1,Fe=null)}}else Ne=!1}var dt;if(typeof te=="function")dt=function(){te(Re)};else if(typeof MessageChannel<"u"){var Xe=new MessageChannel,ht=Xe.port2;Xe.port1.onmessage=Re,dt=function(){ht.postMessage(null)}}else dt=function(){H(Re,0)};function Pe(de){Fe=de,Ne||(Ne=!0,dt())}function ke(de,je){ye=H(function(){de(e.unstable_now())},je)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(de){de.callback=null},e.unstable_continueExecution=function(){U||$||(U=!0,Pe(ae))},e.unstable_forceFrameRate=function(de){0>de||125<de?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ke=0<de?Math.floor(1e3/de):5},e.unstable_getCurrentPriorityLevel=function(){return N},e.unstable_getFirstCallbackNode=function(){return i(L)},e.unstable_next=function(de){switch(N){case 1:case 2:case 3:var je=3;break;default:je=N}var Ee=N;N=je;try{return de()}finally{N=Ee}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(de,je){switch(de){case 1:case 2:case 3:case 4:case 5:break;default:de=3}var Ee=N;N=de;try{return je()}finally{N=Ee}},e.unstable_scheduleCallback=function(de,je,Ee){var K=e.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?K+Ee:K):Ee=K,de){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=Ee+be,de={id:P++,callback:je,priorityLevel:de,startTime:Ee,expirationTime:be,sortIndex:-1},Ee>K?(de.sortIndex=Ee,o(T,de),i(L)===null&&de===i(T)&&(q?(G(ye),ye=-1):q=!0,ke(Ce,Ee-K))):(de.sortIndex=be,o(L,de),U||$||(U=!0,Pe(ae))),de},e.unstable_shouldYield=qe,e.unstable_wrapCallback=function(de){var je=N;return function(){var Ee=N;N=je;try{return de.apply(this,arguments)}finally{N=Ee}}}}(W0)),W0}var q2;function T4(){return q2||(q2=1,q0.exports=L4()),q0.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W2;function k4(){if(W2)return _s;W2=1;var e=Wd(),o=T4();function i(t){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+t,p=1;p<arguments.length;p++)a+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,d={};function m(t,a){x(t,a),x(t+"Capture",a)}function x(t,a){for(d[t]=a,t=0;t<a.length;t++)r.add(a[t])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),L=Object.prototype.hasOwnProperty,T=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,P={},D={};function N(t){return L.call(D,t)?!0:L.call(P,t)?!1:T.test(t)?D[t]=!0:(P[t]=!0,!1)}function $(t,a,p,v){if(p!==null&&p.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return v?!1:p!==null?!p.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function U(t,a,p,v){if(a===null||typeof a>"u"||$(t,a,p,v))return!0;if(v)return!1;if(p!==null)switch(p.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function q(t,a,p,v,C,E,I){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=v,this.attributeNamespace=C,this.mustUseProperty=p,this.propertyName=t,this.type=a,this.sanitizeURL=E,this.removeEmptyString=I}var H={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){H[t]=new q(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var a=t[0];H[a]=new q(a,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){H[t]=new q(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){H[t]=new q(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){H[t]=new q(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){H[t]=new q(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){H[t]=new q(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){H[t]=new q(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){H[t]=new q(t,5,!1,t.toLowerCase(),null,!1,!1)});var G=/[\-:]([a-z])/g;function te(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var a=t.replace(G,te);H[a]=new q(a,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var a=t.replace(G,te);H[a]=new q(a,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var a=t.replace(G,te);H[a]=new q(a,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){H[t]=new q(t,1,!1,t.toLowerCase(),null,!1,!1)}),H.xlinkHref=new q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){H[t]=new q(t,1,!1,t.toLowerCase(),null,!0,!0)});function oe(t,a,p,v){var C=H.hasOwnProperty(a)?H[a]:null;(C!==null?C.type!==0:v||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(U(a,p,C,v)&&(p=null),v||C===null?N(a)&&(p===null?t.removeAttribute(a):t.setAttribute(a,""+p)):C.mustUseProperty?t[C.propertyName]=p===null?C.type===3?!1:"":p:(a=C.attributeName,v=C.attributeNamespace,p===null?t.removeAttribute(a):(C=C.type,p=C===3||C===4&&p===!0?"":""+p,v?t.setAttributeNS(v,a,p):t.setAttribute(a,p))))}var Ce=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ae=Symbol.for("react.element"),Ne=Symbol.for("react.portal"),Fe=Symbol.for("react.fragment"),ye=Symbol.for("react.strict_mode"),Ke=Symbol.for("react.profiler"),Me=Symbol.for("react.provider"),qe=Symbol.for("react.context"),Re=Symbol.for("react.forward_ref"),dt=Symbol.for("react.suspense"),Xe=Symbol.for("react.suspense_list"),ht=Symbol.for("react.memo"),Pe=Symbol.for("react.lazy"),ke=Symbol.for("react.offscreen"),de=Symbol.iterator;function je(t){return t===null||typeof t!="object"?null:(t=de&&t[de]||t["@@iterator"],typeof t=="function"?t:null)}var Ee=Object.assign,K;function be(t){if(K===void 0)try{throw Error()}catch(p){var a=p.stack.trim().match(/\n( *(at )?)/);K=a&&a[1]||""}return`
`+K+t}var Be=!1;function it(t,a){if(!t||Be)return"";Be=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(X){var v=X}Reflect.construct(t,[],a)}else{try{a.call()}catch(X){v=X}t.call(a.prototype)}else{try{throw Error()}catch(X){v=X}t()}}catch(X){if(X&&v&&typeof X.stack=="string"){for(var C=X.stack.split(`
`),E=v.stack.split(`
`),I=C.length-1,j=E.length-1;1<=I&&0<=j&&C[I]!==E[j];)j--;for(;1<=I&&0<=j;I--,j--)if(C[I]!==E[j]){if(I!==1||j!==1)do if(I--,j--,0>j||C[I]!==E[j]){var z=`
`+C[I].replace(" at new "," at ");return t.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",t.displayName)),z}while(1<=I&&0<=j);break}}}finally{Be=!1,Error.prepareStackTrace=p}return(t=t?t.displayName||t.name:"")?be(t):""}function ft(t){switch(t.tag){case 5:return be(t.type);case 16:return be("Lazy");case 13:return be("Suspense");case 19:return be("SuspenseList");case 0:case 2:case 15:return t=it(t.type,!1),t;case 11:return t=it(t.type.render,!1),t;case 1:return t=it(t.type,!0),t;default:return""}}function mt(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Fe:return"Fragment";case Ne:return"Portal";case Ke:return"Profiler";case ye:return"StrictMode";case dt:return"Suspense";case Xe:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case qe:return(t.displayName||"Context")+".Consumer";case Me:return(t._context.displayName||"Context")+".Provider";case Re:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ht:return a=t.displayName||null,a!==null?a:mt(t.type)||"Memo";case Pe:a=t._payload,t=t._init;try{return mt(t(a))}catch{}}return null}function xt(t){var a=t.type;switch(t.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=a.render,t=t.displayName||t.name||"",a.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mt(a);case 8:return a===ye?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function ut(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vt(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Tt(t){var a=vt(t)?"checked":"value",p=Object.getOwnPropertyDescriptor(t.constructor.prototype,a),v=""+t[a];if(!t.hasOwnProperty(a)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var C=p.get,E=p.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return C.call(this)},set:function(I){v=""+I,E.call(this,I)}}),Object.defineProperty(t,a,{enumerable:p.enumerable}),{getValue:function(){return v},setValue:function(I){v=""+I},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function Rt(t){t._valueTracker||(t._valueTracker=Tt(t))}function Bt(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var p=a.getValue(),v="";return t&&(v=vt(t)?t.checked?"true":"false":t.value),t=v,t!==p?(a.setValue(t),!0):!1}function Pt(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function jt(t,a){var p=a.checked;return Ee({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??t._wrapperState.initialChecked})}function hn(t,a){var p=a.defaultValue==null?"":a.defaultValue,v=a.checked!=null?a.checked:a.defaultChecked;p=ut(a.value!=null?a.value:p),t._wrapperState={initialChecked:v,initialValue:p,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Mn(t,a){a=a.checked,a!=null&&oe(t,"checked",a,!1)}function jn(t,a){Mn(t,a);var p=ut(a.value),v=a.type;if(p!=null)v==="number"?(p===0&&t.value===""||t.value!=p)&&(t.value=""+p):t.value!==""+p&&(t.value=""+p);else if(v==="submit"||v==="reset"){t.removeAttribute("value");return}a.hasOwnProperty("value")?Yt(t,a.type,p):a.hasOwnProperty("defaultValue")&&Yt(t,a.type,ut(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(t.defaultChecked=!!a.defaultChecked)}function Jn(t,a,p){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var v=a.type;if(!(v!=="submit"&&v!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+t._wrapperState.initialValue,p||a===t.value||(t.value=a),t.defaultValue=a}p=t.name,p!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,p!==""&&(t.name=p)}function Yt(t,a,p){(a!=="number"||Pt(t.ownerDocument)!==t)&&(p==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+p&&(t.defaultValue=""+p))}var xn=Array.isArray;function Nn(t,a,p,v){if(t=t.options,a){a={};for(var C=0;C<p.length;C++)a["$"+p[C]]=!0;for(p=0;p<t.length;p++)C=a.hasOwnProperty("$"+t[p].value),t[p].selected!==C&&(t[p].selected=C),C&&v&&(t[p].defaultSelected=!0)}else{for(p=""+ut(p),a=null,C=0;C<t.length;C++){if(t[C].value===p){t[C].selected=!0,v&&(t[C].defaultSelected=!0);return}a!==null||t[C].disabled||(a=t[C])}a!==null&&(a.selected=!0)}}function Dn(t,a){if(a.dangerouslySetInnerHTML!=null)throw Error(i(91));return Ee({},a,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function bn(t,a){var p=a.value;if(p==null){if(p=a.children,a=a.defaultValue,p!=null){if(a!=null)throw Error(i(92));if(xn(p)){if(1<p.length)throw Error(i(93));p=p[0]}a=p}a==null&&(a=""),p=a}t._wrapperState={initialValue:ut(p)}}function yt(t,a){var p=ut(a.value),v=ut(a.defaultValue);p!=null&&(p=""+p,p!==t.value&&(t.value=p),a.defaultValue==null&&t.defaultValue!==p&&(t.defaultValue=p)),v!=null&&(t.defaultValue=""+v)}function Et(t){var a=t.textContent;a===t._wrapperState.initialValue&&a!==""&&a!==null&&(t.value=a)}function nt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Le(t,a){return t==null||t==="http://www.w3.org/1999/xhtml"?nt(a):t==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Je,ln=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,p,v,C){MSApp.execUnsafeLocalFunction(function(){return t(a,p,v,C)})}:t}(function(t,a){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=a;else{for(Je=Je||document.createElement("div"),Je.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Je.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;a.firstChild;)t.appendChild(a.firstChild)}});function cn(t,a){if(a){var p=t.firstChild;if(p&&p===t.lastChild&&p.nodeType===3){p.nodeValue=a;return}}t.textContent=a}var Gt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pn=["Webkit","ms","Moz","O"];Object.keys(Gt).forEach(function(t){pn.forEach(function(a){a=a+t.charAt(0).toUpperCase()+t.substring(1),Gt[a]=Gt[t]})});function Cn(t,a,p){return a==null||typeof a=="boolean"||a===""?"":p||typeof a!="number"||a===0||Gt.hasOwnProperty(t)&&Gt[t]?(""+a).trim():a+"px"}function ct(t,a){t=t.style;for(var p in a)if(a.hasOwnProperty(p)){var v=p.indexOf("--")===0,C=Cn(p,a[p],v);p==="float"&&(p="cssFloat"),v?t.setProperty(p,C):t[p]=C}}var Ot=Ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function et(t,a){if(a){if(Ot[t]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(i(137,t));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(i(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(i(61))}if(a.style!=null&&typeof a.style!="object")throw Error(i(62))}}function $t(t,a){if(t.indexOf("-")===-1)return typeof a.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dt=null;function mn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fn=null,nn=null,sr=null;function He(t){if(t=F(t)){if(typeof Fn!="function")throw Error(i(280));var a=t.stateNode;a&&(a=Y(a),Fn(t.stateNode,t.type,a))}}function kt(t){nn?sr?sr.push(t):sr=[t]:nn=t}function en(){if(nn){var t=nn,a=sr;if(sr=nn=null,He(t),a)for(t=0;t<a.length;t++)He(a[t])}}function Ft(t,a){return t(a)}function Vt(){}var Qn=!1;function qn(t,a,p){if(Qn)return t(a,p);Qn=!0;try{return Ft(t,a,p)}finally{Qn=!1,(nn!==null||sr!==null)&&(Vt(),en())}}function tr(t,a){var p=t.stateNode;if(p===null)return null;var v=Y(p);if(v===null)return null;p=v[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(t=t.type,v=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!v;break e;default:t=!1}if(t)return null;if(p&&typeof p!="function")throw Error(i(231,a,typeof p));return p}var Tr=!1;if(c)try{var _r={};Object.defineProperty(_r,"passive",{get:function(){Tr=!0}}),window.addEventListener("test",_r,_r),window.removeEventListener("test",_r,_r)}catch{Tr=!1}function fs(t,a,p,v,C,E,I,j,z){var X=Array.prototype.slice.call(arguments,3);try{a.apply(p,X)}catch(ee){this.onError(ee)}}var yi=!1,ne=null,V=!1,O=null,W={onError:function(t){yi=!0,ne=t}};function J(t,a,p,v,C,E,I,j,z){yi=!1,ne=null,fs.apply(W,arguments)}function re(t,a,p,v,C,E,I,j,z){if(J.apply(this,arguments),yi){if(yi){var X=ne;yi=!1,ne=null}else throw Error(i(198));V||(V=!0,O=X)}}function fe(t){var a=t,p=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(p=a.return),t=a.return;while(t)}return a.tag===3?p:null}function ve(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function pe(t){if(fe(t)!==t)throw Error(i(188))}function Te(t){var a=t.alternate;if(!a){if(a=fe(t),a===null)throw Error(i(188));return a!==t?null:t}for(var p=t,v=a;;){var C=p.return;if(C===null)break;var E=C.alternate;if(E===null){if(v=C.return,v!==null){p=v;continue}break}if(C.child===E.child){for(E=C.child;E;){if(E===p)return pe(C),t;if(E===v)return pe(C),a;E=E.sibling}throw Error(i(188))}if(p.return!==v.return)p=C,v=E;else{for(var I=!1,j=C.child;j;){if(j===p){I=!0,p=C,v=E;break}if(j===v){I=!0,v=C,p=E;break}j=j.sibling}if(!I){for(j=E.child;j;){if(j===p){I=!0,p=E,v=C;break}if(j===v){I=!0,v=E,p=C;break}j=j.sibling}if(!I)throw Error(i(189))}}if(p.alternate!==v)throw Error(i(190))}if(p.tag!==3)throw Error(i(188));return p.stateNode.current===p?t:a}function Ue(t){return t=Te(t),t!==null?st(t):null}function st(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var a=st(t);if(a!==null)return a;t=t.sibling}return null}var $e=o.unstable_scheduleCallback,_t=o.unstable_cancelCallback,bt=o.unstable_shouldYield,zt=o.unstable_requestPaint,Ct=o.unstable_now,on=o.unstable_getCurrentPriorityLevel,Qt=o.unstable_ImmediatePriority,Xt=o.unstable_UserBlockingPriority,sn=o.unstable_NormalPriority,an=o.unstable_LowPriority,mr=o.unstable_IdlePriority,er=null,Bn=null;function kr(t){if(Bn&&typeof Bn.onCommitFiberRoot=="function")try{Bn.onCommitFiberRoot(er,t,void 0,(t.current.flags&128)===128)}catch{}}var vi=Math.clz32?Math.clz32:nh,Ao=Math.log,Wn=Math.LN2;function nh(t){return t>>>=0,t===0?32:31-(Ao(t)/Wn|0)|0}var jo=64,vc=4194304;function Oo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function hl(t,a){var p=t.pendingLanes;if(p===0)return 0;var v=0,C=t.suspendedLanes,E=t.pingedLanes,I=p&268435455;if(I!==0){var j=I&~C;j!==0?v=Oo(j):(E&=I,E!==0&&(v=Oo(E)))}else I=p&~C,I!==0?v=Oo(I):E!==0&&(v=Oo(E));if(v===0)return 0;if(a!==0&&a!==v&&(a&C)===0&&(C=v&-v,E=a&-a,C>=E||C===16&&(E&4194240)!==0))return a;if((v&4)!==0&&(v|=p&16),a=t.entangledLanes,a!==0)for(t=t.entanglements,a&=v;0<a;)p=31-vi(a),C=1<<p,v|=t[p],a&=~C;return v}function Su(t,a){switch(t){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mu(t,a){for(var p=t.suspendedLanes,v=t.pingedLanes,C=t.expirationTimes,E=t.pendingLanes;0<E;){var I=31-vi(E),j=1<<I,z=C[I];z===-1?((j&p)===0||(j&v)!==0)&&(C[I]=Su(j,a)):z<=a&&(t.expiredLanes|=j),E&=~j}}function pl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Eu(){var t=jo;return jo<<=1,(jo&4194240)===0&&(jo=64),t}function xc(t){for(var a=[],p=0;31>p;p++)a.push(t);return a}function Yi(t,a,p){t.pendingLanes|=a,a!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,a=31-vi(a),t[a]=p}function _c(t,a){var p=t.pendingLanes&~a;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=a,t.mutableReadLanes&=a,t.entangledLanes&=a,a=t.entanglements;var v=t.eventTimes;for(t=t.expirationTimes;0<p;){var C=31-vi(p),E=1<<C;a[C]=0,v[C]=-1,t[C]=-1,p&=~E}}function Ws(t,a){var p=t.entangledLanes|=a;for(t=t.entanglements;p;){var v=31-vi(p),C=1<<v;C&a|t[v]&a&&(t[v]|=a),p&=~C}}var $n=0;function fl(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var ml,zo,gl,pa,dr,Fo=!1,fa=[],Ms=null,Es=null,Xi=null,Bo=new Map,yl=new Map,Gs=[],Lu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wc(t,a){switch(t){case"focusin":case"focusout":Ms=null;break;case"dragenter":case"dragleave":Es=null;break;case"mouseover":case"mouseout":Xi=null;break;case"pointerover":case"pointerout":Bo.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":yl.delete(a.pointerId)}}function $o(t,a,p,v,C,E){return t===null||t.nativeEvent!==E?(t={blockedOn:a,domEventName:p,eventSystemFlags:v,nativeEvent:E,targetContainers:[C]},a!==null&&(a=F(a),a!==null&&zo(a)),t):(t.eventSystemFlags|=v,a=t.targetContainers,C!==null&&a.indexOf(C)===-1&&a.push(C),t)}function Tu(t,a,p,v,C){switch(a){case"focusin":return Ms=$o(Ms,t,a,p,v,C),!0;case"dragenter":return Es=$o(Es,t,a,p,v,C),!0;case"mouseover":return Xi=$o(Xi,t,a,p,v,C),!0;case"pointerover":var E=C.pointerId;return Bo.set(E,$o(Bo.get(E)||null,t,a,p,v,C)),!0;case"gotpointercapture":return E=C.pointerId,yl.set(E,$o(yl.get(E)||null,t,a,p,v,C)),!0}return!1}function ku(t){var a=A(t.target);if(a!==null){var p=fe(a);if(p!==null){if(a=p.tag,a===13){if(a=ve(p),a!==null){t.blockedOn=a,dr(t.priority,function(){gl(p)});return}}else if(a===3&&p.stateNode.current.memoizedState.isDehydrated){t.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Rn(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var p=va(t.domEventName,t.eventSystemFlags,a[0],t.nativeEvent);if(p===null){p=t.nativeEvent;var v=new p.constructor(p.type,p);Dt=v,p.target.dispatchEvent(v),Dt=null}else return a=F(p),a!==null&&zo(a),t.blockedOn=p,!1;a.shift()}return!0}function F1(t,a,p){Rn(t)&&p.delete(a)}function vl(){Fo=!1,Ms!==null&&Rn(Ms)&&(Ms=null),Es!==null&&Rn(Es)&&(Es=null),Xi!==null&&Rn(Xi)&&(Xi=null),Bo.forEach(F1),yl.forEach(F1)}function Ls(t,a){t.blockedOn===a&&(t.blockedOn=null,Fo||(Fo=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,vl)))}function ma(t){function a(C){return Ls(C,t)}if(0<fa.length){Ls(fa[0],t);for(var p=1;p<fa.length;p++){var v=fa[p];v.blockedOn===t&&(v.blockedOn=null)}}for(Ms!==null&&Ls(Ms,t),Es!==null&&Ls(Es,t),Xi!==null&&Ls(Xi,t),Bo.forEach(a),yl.forEach(a),p=0;p<Gs.length;p++)v=Gs[p],v.blockedOn===t&&(v.blockedOn=null);for(;0<Gs.length&&(p=Gs[0],p.blockedOn===null);)ku(p),p.blockedOn===null&&Gs.shift()}var Vr=Ce.ReactCurrentBatchConfig,ga=!0;function bc(t,a,p,v){var C=$n,E=Vr.transition;Vr.transition=null;try{$n=1,xl(t,a,p,v)}finally{$n=C,Vr.transition=E}}function Cc(t,a,p,v){var C=$n,E=Vr.transition;Vr.transition=null;try{$n=4,xl(t,a,p,v)}finally{$n=C,Vr.transition=E}}function xl(t,a,p,v){if(ga){var C=va(t,a,p,v);if(C===null)Vc(t,a,v,ya,p),wc(t,v);else if(Tu(C,t,a,p,v))v.stopPropagation();else if(wc(t,v),a&4&&-1<Lu.indexOf(t)){for(;C!==null;){var E=F(C);if(E!==null&&ml(E),E=va(t,a,p,v),E===null&&Vc(t,a,v,ya,p),E===C)break;C=E}C!==null&&v.stopPropagation()}else Vc(t,a,v,null,p)}}var ya=null;function va(t,a,p,v){if(ya=null,t=mn(v),t=A(t),t!==null)if(a=fe(t),a===null)t=null;else if(p=a.tag,p===13){if(t=ve(a),t!==null)return t;t=null}else if(p===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null);return ya=t,null}function Sc(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(on()){case Qt:return 1;case Xt:return 4;case sn:case an:return 16;case mr:return 536870912;default:return 16}default:return 16}}var ms=null,xa=null,_l=null;function Pu(){if(_l)return _l;var t,a=xa,p=a.length,v,C="value"in ms?ms.value:ms.textContent,E=C.length;for(t=0;t<p&&a[t]===C[t];t++);var I=p-t;for(v=1;v<=I&&a[p-v]===C[E-v];v++);return _l=C.slice(t,1<v?1-v:void 0)}function Ts(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function Mc(){return!0}function B1(){return!1}function Ti(t){function a(p,v,C,E,I){this._reactName=p,this._targetInst=C,this.type=v,this.nativeEvent=E,this.target=I,this.currentTarget=null;for(var j in t)t.hasOwnProperty(j)&&(p=t[j],this[j]=p?p(E):E[j]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Mc:B1,this.isPropagationStopped=B1,this}return Ee(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Mc)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Mc)},persist:function(){},isPersistent:Mc}),a}var _a={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Du=Ti(_a),wl=Ee({},_a,{view:0,detail:0}),Iu=Ti(wl),wa,bl,Vo,ks=Ee({},wl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ju,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vo&&(Vo&&t.type==="mousemove"?(wa=t.screenX-Vo.screenX,bl=t.screenY-Vo.screenY):bl=wa=0,Vo=t),wa)},movementY:function(t){return"movementY"in t?t.movementY:bl}}),Nu=Ti(ks),$1=Ee({},ks,{dataTransfer:0}),Ru=Ti($1),Ys=Ee({},wl,{relatedTarget:0}),Ec=Ti(Ys),ba=Ee({},_a,{animationName:0,elapsedTime:0,pseudoElement:0}),Ca=Ti(ba),wr=Ee({},_a,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Au=Ti(wr),Ut=Ee({},_a,{data:0}),Ho=Ti(Ut),gr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},or={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xs={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function V1(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=Xs[t])?!!a[t]:!1}function ju(){return V1}var H1=Ee({},wl,{key:function(t){if(t.key){var a=gr[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=Ts(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?or[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ju,charCode:function(t){return t.type==="keypress"?Ts(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ts(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rh=Ti(H1),Ou=Ee({},ks,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sa=Ti(Ou),Cl=Ee({},wl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ju}),Lc=Ti(Cl),Sl=Ee({},_a,{propertyName:0,elapsedTime:0,pseudoElement:0}),U1=Ti(Sl),Tc=Ee({},ks,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),kc=Ti(Tc),Ki=[9,13,27,32],Pc=c&&"CompositionEvent"in window,Uo=null;c&&"documentMode"in document&&(Uo=document.documentMode);var Z1=c&&"TextEvent"in window&&!Uo,Zo=c&&(!Pc||Uo&&8<Uo&&11>=Uo),Ma=" ",Ml=!1;function El(t,a){switch(t){case"keyup":return Ki.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dc(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qo=!1;function zu(t,a){switch(t){case"compositionend":return Dc(a);case"keypress":return a.which!==32?null:(Ml=!0,Ma);case"textInput":return t=a.data,t===Ma&&Ml?null:t;default:return null}}function Ic(t,a){if(qo)return t==="compositionend"||!Pc&&El(t,a)?(t=Pu(),_l=xa=ms=null,qo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Zo&&a.locale!=="ko"?null:a.data;default:return null}}var Nc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fu(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!Nc[t.type]:a==="textarea"}function Ll(t,a,p,v){kt(v),a=Hc(a,"onChange"),0<a.length&&(p=new Du("onChange","change",null,p,v),t.push({event:p,listeners:a}))}var Qi=null,Ps=null;function Rc(t){Rl(t,0)}function Tl(t){var a=Z(t);if(Bt(a))return t}function kl(t,a){if(t==="change")return a}var Bu=!1;if(c){var Ac;if(c){var Ks="oninput"in document;if(!Ks){var $u=document.createElement("div");$u.setAttribute("oninput","return;"),Ks=typeof $u.oninput=="function"}Ac=Ks}else Ac=!1;Bu=Ac&&(!document.documentMode||9<document.documentMode)}function Vu(){Qi&&(Qi.detachEvent("onpropertychange",Ea),Ps=Qi=null)}function Ea(t){if(t.propertyName==="value"&&Tl(Ps)){var a=[];Ll(a,Ps,t,mn(t)),qn(Rc,a)}}function Pl(t,a,p){t==="focusin"?(Vu(),Qi=a,Ps=p,Qi.attachEvent("onpropertychange",Ea)):t==="focusout"&&Vu()}function ki(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Tl(Ps)}function si(t,a){if(t==="click")return Tl(a)}function ih(t,a){if(t==="input"||t==="change")return Tl(a)}function Qs(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var zi=typeof Object.is=="function"?Object.is:Qs;function Ji(t,a){if(zi(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var p=Object.keys(t),v=Object.keys(a);if(p.length!==v.length)return!1;for(v=0;v<p.length;v++){var C=p[v];if(!L.call(a,C)||!zi(t[C],a[C]))return!1}return!0}function Js(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function q1(t,a){var p=Js(t);t=0;for(var v;p;){if(p.nodeType===3){if(v=t+p.textContent.length,t<=a&&v>=a)return{node:p,offset:a-t};t=v}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=Js(p)}}function jc(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?jc(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function W1(){for(var t=window,a=Pt();a instanceof t.HTMLIFrameElement;){try{var p=typeof a.contentWindow.location.href=="string"}catch{p=!1}if(p)t=a.contentWindow;else break;a=Pt(t.document)}return a}function Oc(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}function Wo(t){var a=W1(),p=t.focusedElem,v=t.selectionRange;if(a!==p&&p&&p.ownerDocument&&jc(p.ownerDocument.documentElement,p)){if(v!==null&&Oc(p)){if(a=v.start,t=v.end,t===void 0&&(t=a),"selectionStart"in p)p.selectionStart=a,p.selectionEnd=Math.min(t,p.value.length);else if(t=(a=p.ownerDocument||document)&&a.defaultView||window,t.getSelection){t=t.getSelection();var C=p.textContent.length,E=Math.min(v.start,C);v=v.end===void 0?E:Math.min(v.end,C),!t.extend&&E>v&&(C=v,v=E,E=C),C=q1(p,E);var I=q1(p,v);C&&I&&(t.rangeCount!==1||t.anchorNode!==C.node||t.anchorOffset!==C.offset||t.focusNode!==I.node||t.focusOffset!==I.offset)&&(a=a.createRange(),a.setStart(C.node,C.offset),t.removeAllRanges(),E>v?(t.addRange(a),t.extend(I.node,I.offset)):(a.setEnd(I.node,I.offset),t.addRange(a)))}}for(a=[],t=p;t=t.parentNode;)t.nodeType===1&&a.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<a.length;p++)t=a[p],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var eo=c&&"documentMode"in document&&11>=document.documentMode,Nt=null,Dl=null,Ds=null,Is=!1;function La(t,a,p){var v=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Is||Nt==null||Nt!==Pt(v)||(v=Nt,"selectionStart"in v&&Oc(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Ds&&Ji(Ds,v)||(Ds=v,v=Hc(Dl,"onSelect"),0<v.length&&(a=new Du("onSelect","select",null,a,p),t.push({event:a,listeners:v}),a.target=Nt)))}function Mt(t,a){var p={};return p[t.toLowerCase()]=a.toLowerCase(),p["Webkit"+t]="webkit"+a,p["Moz"+t]="moz"+a,p}var to={animationend:Mt("Animation","AnimationEnd"),animationiteration:Mt("Animation","AnimationIteration"),animationstart:Mt("Animation","AnimationStart"),transitionend:Mt("Transition","TransitionEnd")},zc={},G1={};c&&(G1=document.createElement("div").style,"AnimationEvent"in window||(delete to.animationend.animation,delete to.animationiteration.animation,delete to.animationstart.animation),"TransitionEvent"in window||delete to.transitionend.transition);function no(t){if(zc[t])return zc[t];if(!to[t])return t;var a=to[t],p;for(p in a)if(a.hasOwnProperty(p)&&p in G1)return zc[t]=a[p];return t}var Hu=no("animationend"),Uu=no("animationiteration"),Y1=no("animationstart"),X1=no("transitionend"),Il=new Map,Fc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gs(t,a){Il.set(t,a),m(a,[t])}for(var Nl=0;Nl<Fc.length;Nl++){var oi=Fc[Nl],ro=oi.toLowerCase(),K1=oi[0].toUpperCase()+oi.slice(1);gs(ro,"on"+K1)}gs(Hu,"onAnimationEnd"),gs(Uu,"onAnimationIteration"),gs(Y1,"onAnimationStart"),gs("dblclick","onDoubleClick"),gs("focusin","onFocus"),gs("focusout","onBlur"),gs(X1,"onTransitionEnd"),x("onMouseEnter",["mouseout","mouseover"]),x("onMouseLeave",["mouseout","mouseover"]),x("onPointerEnter",["pointerout","pointerover"]),x("onPointerLeave",["pointerout","pointerover"]),m("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),m("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),m("onBeforeInput",["compositionend","keypress","textInput","paste"]),m("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),m("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),m("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Go="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ta=new Set("cancel close invalid load scroll toggle".split(" ").concat(Go));function Bc(t,a,p){var v=t.type||"unknown-event";t.currentTarget=p,re(v,a,void 0,t),t.currentTarget=null}function Rl(t,a){a=(a&4)!==0;for(var p=0;p<t.length;p++){var v=t[p],C=v.event;v=v.listeners;e:{var E=void 0;if(a)for(var I=v.length-1;0<=I;I--){var j=v[I],z=j.instance,X=j.currentTarget;if(j=j.listener,z!==E&&C.isPropagationStopped())break e;Bc(C,j,X),E=z}else for(I=0;I<v.length;I++){if(j=v[I],z=j.instance,X=j.currentTarget,j=j.listener,z!==E&&C.isPropagationStopped())break e;Bc(C,j,X),E=z}}}if(V)throw t=O,V=!1,O=null,t}function An(t,a){var p=a[M];p===void 0&&(p=a[M]=new Set);var v=t+"__bubble";p.has(v)||($c(a,t,2,!1),p.add(v))}function nr(t,a,p){var v=0;a&&(v|=4),$c(p,t,v,a)}var Yo="_reactListening"+Math.random().toString(36).slice(2);function io(t){if(!t[Yo]){t[Yo]=!0,r.forEach(function(p){p!=="selectionchange"&&(Ta.has(p)||nr(p,!1,t),nr(p,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[Yo]||(a[Yo]=!0,nr("selectionchange",!1,a))}}function $c(t,a,p,v){switch(Sc(a)){case 1:var C=bc;break;case 4:C=Cc;break;default:C=xl}p=C.bind(null,a,p,t),C=void 0,!Tr||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(C=!0),v?C!==void 0?t.addEventListener(a,p,{capture:!0,passive:C}):t.addEventListener(a,p,!0):C!==void 0?t.addEventListener(a,p,{passive:C}):t.addEventListener(a,p,!1)}function Vc(t,a,p,v,C){var E=v;if((a&1)===0&&(a&2)===0&&v!==null)e:for(;;){if(v===null)return;var I=v.tag;if(I===3||I===4){var j=v.stateNode.containerInfo;if(j===C||j.nodeType===8&&j.parentNode===C)break;if(I===4)for(I=v.return;I!==null;){var z=I.tag;if((z===3||z===4)&&(z=I.stateNode.containerInfo,z===C||z.nodeType===8&&z.parentNode===C))return;I=I.return}for(;j!==null;){if(I=A(j),I===null)return;if(z=I.tag,z===5||z===6){v=E=I;continue e}j=j.parentNode}}v=v.return}qn(function(){var X=E,ee=mn(p),ce=[];e:{var ge=Il.get(t);if(ge!==void 0){var me=Du,Se=t;switch(t){case"keypress":if(Ts(p)===0)break e;case"keydown":case"keyup":me=rh;break;case"focusin":Se="focus",me=Ec;break;case"focusout":Se="blur",me=Ec;break;case"beforeblur":case"afterblur":me=Ec;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":me=Nu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":me=Ru;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":me=Lc;break;case Hu:case Uu:case Y1:me=Ca;break;case X1:me=U1;break;case"scroll":me=Iu;break;case"wheel":me=kc;break;case"copy":case"cut":case"paste":me=Au;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":me=Sa}var Ae=(a&4)!==0,tt=!Ae&&t==="scroll",we=Ae?ge!==null?ge+"Capture":null:ge;Ae=[];for(var he=X,_e;he!==null;){_e=he;var Oe=_e.stateNode;if(_e.tag===5&&Oe!==null&&(_e=Oe,we!==null&&(Oe=tr(he,we),Oe!=null&&Ae.push(ka(he,Oe,_e)))),tt)break;he=he.return}0<Ae.length&&(ge=new me(ge,Se,null,p,ee),ce.push({event:ge,listeners:Ae}))}}if((a&7)===0){e:{if(ge=t==="mouseover"||t==="pointerover",me=t==="mouseout"||t==="pointerout",ge&&p!==Dt&&(Se=p.relatedTarget||p.fromElement)&&(A(Se)||Se[w]))break e;if((me||ge)&&(ge=ee.window===ee?ee:(ge=ee.ownerDocument)?ge.defaultView||ge.parentWindow:window,me?(Se=p.relatedTarget||p.toElement,me=X,Se=Se?A(Se):null,Se!==null&&(tt=fe(Se),Se!==tt||Se.tag!==5&&Se.tag!==6)&&(Se=null)):(me=null,Se=X),me!==Se)){if(Ae=Nu,Oe="onMouseLeave",we="onMouseEnter",he="mouse",(t==="pointerout"||t==="pointerover")&&(Ae=Sa,Oe="onPointerLeave",we="onPointerEnter",he="pointer"),tt=me==null?ge:Z(me),_e=Se==null?ge:Z(Se),ge=new Ae(Oe,he+"leave",me,p,ee),ge.target=tt,ge.relatedTarget=_e,Oe=null,A(ee)===X&&(Ae=new Ae(we,he+"enter",Se,p,ee),Ae.target=_e,Ae.relatedTarget=tt,Oe=Ae),tt=Oe,me&&Se)t:{for(Ae=me,we=Se,he=0,_e=Ae;_e;_e=xi(_e))he++;for(_e=0,Oe=we;Oe;Oe=xi(Oe))_e++;for(;0<he-_e;)Ae=xi(Ae),he--;for(;0<_e-he;)we=xi(we),_e--;for(;he--;){if(Ae===we||we!==null&&Ae===we.alternate)break t;Ae=xi(Ae),we=xi(we)}Ae=null}else Ae=null;me!==null&&Al(ce,ge,me,Ae,!1),Se!==null&&tt!==null&&Al(ce,tt,Se,Ae,!0)}}e:{if(ge=X?Z(X):window,me=ge.nodeName&&ge.nodeName.toLowerCase(),me==="select"||me==="input"&&ge.type==="file")var Ye=kl;else if(Fu(ge))if(Bu)Ye=ih;else{Ye=ki;var at=Pl}else(me=ge.nodeName)&&me.toLowerCase()==="input"&&(ge.type==="checkbox"||ge.type==="radio")&&(Ye=si);if(Ye&&(Ye=Ye(t,X))){Ll(ce,Ye,p,ee);break e}at&&at(t,ge,X),t==="focusout"&&(at=ge._wrapperState)&&at.controlled&&ge.type==="number"&&Yt(ge,"number",ge.value)}switch(at=X?Z(X):window,t){case"focusin":(Fu(at)||at.contentEditable==="true")&&(Nt=at,Dl=X,Ds=null);break;case"focusout":Ds=Dl=Nt=null;break;case"mousedown":Is=!0;break;case"contextmenu":case"mouseup":case"dragend":Is=!1,La(ce,p,ee);break;case"selectionchange":if(eo)break;case"keydown":case"keyup":La(ce,p,ee)}var ot;if(Pc)e:{switch(t){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else qo?El(t,p)&&(We="onCompositionEnd"):t==="keydown"&&p.keyCode===229&&(We="onCompositionStart");We&&(Zo&&p.locale!=="ko"&&(qo||We!=="onCompositionStart"?We==="onCompositionEnd"&&qo&&(ot=Pu()):(ms=ee,xa="value"in ms?ms.value:ms.textContent,qo=!0)),at=Hc(X,We),0<at.length&&(We=new Ho(We,t,null,p,ee),ce.push({event:We,listeners:at}),ot?We.data=ot:(ot=Dc(p),ot!==null&&(We.data=ot)))),(ot=Z1?zu(t,p):Ic(t,p))&&(X=Hc(X,"onBeforeInput"),0<X.length&&(ee=new Ho("onBeforeInput","beforeinput",null,p,ee),ce.push({event:ee,listeners:X}),ee.data=ot))}Rl(ce,a)})}function ka(t,a,p){return{instance:t,listener:a,currentTarget:p}}function Hc(t,a){for(var p=a+"Capture",v=[];t!==null;){var C=t,E=C.stateNode;C.tag===5&&E!==null&&(C=E,E=tr(t,p),E!=null&&v.unshift(ka(t,E,C)),E=tr(t,a),E!=null&&v.push(ka(t,E,C))),t=t.return}return v}function xi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Al(t,a,p,v,C){for(var E=a._reactName,I=[];p!==null&&p!==v;){var j=p,z=j.alternate,X=j.stateNode;if(z!==null&&z===v)break;j.tag===5&&X!==null&&(j=X,C?(z=tr(p,E),z!=null&&I.unshift(ka(p,z,j))):C||(z=tr(p,E),z!=null&&I.push(ka(p,z,j)))),p=p.return}I.length!==0&&t.push({event:a,listeners:I})}var Zt=/\r\n?/g,Jt=/\u0000|\uFFFD/g;function Pa(t){return(typeof t=="string"?t:""+t).replace(Zt,`
`).replace(Jt,"")}function so(t,a,p){if(a=Pa(a),Pa(t)!==a&&p)throw Error(i(425))}function Da(){}var Pr=null,Ns=null;function ai(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Zu=typeof setTimeout=="function"?setTimeout:void 0,jl=typeof clearTimeout=="function"?clearTimeout:void 0,rr=typeof Promise=="function"?Promise:void 0,jr=typeof queueMicrotask=="function"?queueMicrotask:typeof rr<"u"?function(t){return rr.resolve(null).then(t).catch(Q1)}:Zu;function Q1(t){setTimeout(function(){throw t})}function oo(t,a){var p=a,v=0;do{var C=p.nextSibling;if(t.removeChild(p),C&&C.nodeType===8)if(p=C.data,p==="/$"){if(v===0){t.removeChild(C),ma(a);return}v--}else p!=="$"&&p!=="$?"&&p!=="$!"||v++;p=C}while(p);ma(a)}function Fi(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return t}function _(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var p=t.data;if(p==="$"||p==="$!"||p==="$?"){if(a===0)return t;a--}else p==="/$"&&a++}t=t.previousSibling}return null}var s=Math.random().toString(36).slice(2),h="__reactFiber$"+s,y="__reactProps$"+s,w="__reactContainer$"+s,M="__reactEvents$"+s,k="__reactListeners$"+s,R="__reactHandles$"+s;function A(t){var a=t[h];if(a)return a;for(var p=t.parentNode;p;){if(a=p[w]||p[h]){if(p=a.alternate,a.child!==null||p!==null&&p.child!==null)for(t=_(t);t!==null;){if(p=t[h])return p;t=_(t)}return a}t=p,p=t.parentNode}return null}function F(t){return t=t[h]||t[w],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Z(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(i(33))}function Y(t){return t[y]||null}var Q=[],le=-1;function se(t){return{current:t}}function ie(t){0>le||(t.current=Q[le],Q[le]=null,le--)}function xe(t,a){le++,Q[le]=t.current,t.current=a}var De={},Ie=se(De),ue=se(!1),Ve=De;function ze(t,a){var p=t.type.contextTypes;if(!p)return De;var v=t.stateNode;if(v&&v.__reactInternalMemoizedUnmaskedChildContext===a)return v.__reactInternalMemoizedMaskedChildContext;var C={},E;for(E in p)C[E]=a[E];return v&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=C),C}function Ge(t){return t=t.childContextTypes,t!=null}function rt(){ie(ue),ie(Ie)}function gt(t,a,p){if(Ie.current!==De)throw Error(i(168));xe(Ie,a),xe(ue,p)}function Qe(t,a,p){var v=t.stateNode;if(a=a.childContextTypes,typeof v.getChildContext!="function")return p;v=v.getChildContext();for(var C in v)if(!(C in a))throw Error(i(108,xt(t)||"Unknown",C));return Ee({},p,v)}function It(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||De,Ve=Ie.current,xe(Ie,t),xe(ue,ue.current),!0}function St(t,a,p){var v=t.stateNode;if(!v)throw Error(i(169));p?(t=Qe(t,a,Ve),v.__reactInternalMemoizedMergedChildContext=t,ie(ue),ie(Ie),xe(Ie,t)):ie(ue),xe(ue,p)}var Lt=null,un=!1,gn=!1;function Kt(t){Lt===null?Lt=[t]:Lt.push(t)}function Gn(t){un=!0,Kt(t)}function En(){if(!gn&&Lt!==null){gn=!0;var t=0,a=$n;try{var p=Lt;for($n=1;t<p.length;t++){var v=p[t];do v=v(!0);while(v!==null)}Lt=null,un=!1}catch(C){throw Lt!==null&&(Lt=Lt.slice(t+1)),$e(Qt,En),C}finally{$n=a,gn=!1}}return null}var _n=[],wn=0,Ln=null,li=0,Dr=[],br=0,Yr=null,_i=1,hr="";function Xr(t,a){_n[wn++]=li,_n[wn++]=Ln,Ln=t,li=a}function ao(t,a,p){Dr[br++]=_i,Dr[br++]=hr,Dr[br++]=Yr,Yr=t;var v=_i;t=hr;var C=32-vi(v)-1;v&=~(1<<C),p+=1;var E=32-vi(a)+C;if(30<E){var I=C-C%5;E=(v&(1<<I)-1).toString(32),v>>=I,C-=I,_i=1<<32-vi(a)+C|p<<C|v,hr=E+t}else _i=1<<E|p<<C|v,hr=t}function Ia(t){t.return!==null&&(Xr(t,1),ao(t,1,0))}function In(t){for(;t===Ln;)Ln=_n[--wn],_n[wn]=null,li=_n[--wn],_n[wn]=null;for(;t===Yr;)Yr=Dr[--br],Dr[br]=null,hr=Dr[--br],Dr[br]=null,_i=Dr[--br],Dr[br]=null}var Tn=null,fn=null,vn=!1,yr=null;function ar(t,a){var p=fi(5,null,null,0);p.elementType="DELETED",p.stateNode=a,p.return=t,a=t.deletions,a===null?(t.deletions=[p],t.flags|=16):a.push(p)}function Pi(t,a){switch(t.tag){case 5:var p=t.type;return a=a.nodeType!==1||p.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(t.stateNode=a,Tn=t,fn=Fi(a.firstChild),!0):!1;case 6:return a=t.pendingProps===""||a.nodeType!==3?null:a,a!==null?(t.stateNode=a,Tn=t,fn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(p=Yr!==null?{id:_i,overflow:hr}:null,t.memoizedState={dehydrated:a,treeContext:p,retryLane:1073741824},p=fi(18,null,null,0),p.stateNode=a,p.return=t,t.child=p,Tn=t,fn=null,!0):!1;default:return!1}}function lo(t){return(t.mode&1)!==0&&(t.flags&128)===0}function co(t){if(vn){var a=fn;if(a){var p=a;if(!Pi(t,a)){if(lo(t))throw Error(i(418));a=Fi(p.nextSibling);var v=Tn;a&&Pi(t,a)?ar(v,p):(t.flags=t.flags&-4097|2,vn=!1,Tn=t)}}else{if(lo(t))throw Error(i(418));t.flags=t.flags&-4097|2,vn=!1,Tn=t}}}function Ol(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Tn=t}function Na(t){if(t!==Tn)return!1;if(!vn)return Ol(t),vn=!0,!1;var a;if((a=t.tag!==3)&&!(a=t.tag!==5)&&(a=t.type,a=a!=="head"&&a!=="body"&&!ai(t.type,t.memoizedProps)),a&&(a=fn)){if(lo(t))throw zl(),Error(i(418));for(;a;)ar(t,a),a=Fi(a.nextSibling)}if(Ol(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));e:{for(t=t.nextSibling,a=0;t;){if(t.nodeType===8){var p=t.data;if(p==="/$"){if(a===0){fn=Fi(t.nextSibling);break e}a--}else p!=="$"&&p!=="$!"&&p!=="$?"||a++}t=t.nextSibling}fn=null}}else fn=Tn?Fi(t.stateNode.nextSibling):null;return!0}function zl(){for(var t=fn;t;)t=Fi(t.nextSibling)}function ci(){fn=Tn=null,vn=!1}function Ra(t){yr===null?yr=[t]:yr.push(t)}var Fl=Ce.ReactCurrentBatchConfig;function uo(t,a,p){if(t=p.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(i(309));var v=p.stateNode}if(!v)throw Error(i(147,t));var C=v,E=""+t;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===E?a.ref:(a=function(I){var j=C.refs;I===null?delete j[E]:j[E]=I},a._stringRef=E,a)}if(typeof t!="string")throw Error(i(284));if(!p._owner)throw Error(i(290,t))}return t}function J1(t,a){throw t=Object.prototype.toString.call(a),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t))}function ed(t){var a=t._init;return a(t._payload)}function Uc(t){function a(we,he){if(t){var _e=we.deletions;_e===null?(we.deletions=[he],we.flags|=16):_e.push(he)}}function p(we,he){if(!t)return null;for(;he!==null;)a(we,he),he=he.sibling;return null}function v(we,he){for(we=new Map;he!==null;)he.key!==null?we.set(he.key,he):we.set(he.index,he),he=he.sibling;return we}function C(we,he){return we=ia(we,he),we.index=0,we.sibling=null,we}function E(we,he,_e){return we.index=_e,t?(_e=we.alternate,_e!==null?(_e=_e.index,_e<he?(we.flags|=2,he):_e):(we.flags|=2,he)):(we.flags|=1048576,he)}function I(we){return t&&we.alternate===null&&(we.flags|=2),we}function j(we,he,_e,Oe){return he===null||he.tag!==6?(he=pu(_e,we.mode,Oe),he.return=we,he):(he=C(he,_e),he.return=we,he)}function z(we,he,_e,Oe){var Ye=_e.type;return Ye===Fe?ee(we,he,_e.props.children,Oe,_e.key):he!==null&&(he.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===Pe&&ed(Ye)===he.type)?(Oe=C(he,_e.props),Oe.ref=uo(we,he,_e),Oe.return=we,Oe):(Oe=h1(_e.type,_e.key,_e.props,null,we.mode,Oe),Oe.ref=uo(we,he,_e),Oe.return=we,Oe)}function X(we,he,_e,Oe){return he===null||he.tag!==4||he.stateNode.containerInfo!==_e.containerInfo||he.stateNode.implementation!==_e.implementation?(he=Md(_e,we.mode,Oe),he.return=we,he):(he=C(he,_e.children||[]),he.return=we,he)}function ee(we,he,_e,Oe,Ye){return he===null||he.tag!==7?(he=Wa(_e,we.mode,Oe,Ye),he.return=we,he):(he=C(he,_e),he.return=we,he)}function ce(we,he,_e){if(typeof he=="string"&&he!==""||typeof he=="number")return he=pu(""+he,we.mode,_e),he.return=we,he;if(typeof he=="object"&&he!==null){switch(he.$$typeof){case ae:return _e=h1(he.type,he.key,he.props,null,we.mode,_e),_e.ref=uo(we,null,he),_e.return=we,_e;case Ne:return he=Md(he,we.mode,_e),he.return=we,he;case Pe:var Oe=he._init;return ce(we,Oe(he._payload),_e)}if(xn(he)||je(he))return he=Wa(he,we.mode,_e,null),he.return=we,he;J1(we,he)}return null}function ge(we,he,_e,Oe){var Ye=he!==null?he.key:null;if(typeof _e=="string"&&_e!==""||typeof _e=="number")return Ye!==null?null:j(we,he,""+_e,Oe);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case ae:return _e.key===Ye?z(we,he,_e,Oe):null;case Ne:return _e.key===Ye?X(we,he,_e,Oe):null;case Pe:return Ye=_e._init,ge(we,he,Ye(_e._payload),Oe)}if(xn(_e)||je(_e))return Ye!==null?null:ee(we,he,_e,Oe,null);J1(we,_e)}return null}function me(we,he,_e,Oe,Ye){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number")return we=we.get(_e)||null,j(he,we,""+Oe,Ye);if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case ae:return we=we.get(Oe.key===null?_e:Oe.key)||null,z(he,we,Oe,Ye);case Ne:return we=we.get(Oe.key===null?_e:Oe.key)||null,X(he,we,Oe,Ye);case Pe:var at=Oe._init;return me(we,he,_e,at(Oe._payload),Ye)}if(xn(Oe)||je(Oe))return we=we.get(_e)||null,ee(he,we,Oe,Ye,null);J1(he,Oe)}return null}function Se(we,he,_e,Oe){for(var Ye=null,at=null,ot=he,We=he=0,At=null;ot!==null&&We<_e.length;We++){ot.index>We?(At=ot,ot=null):At=ot.sibling;var wt=ge(we,ot,_e[We],Oe);if(wt===null){ot===null&&(ot=At);break}t&&ot&&wt.alternate===null&&a(we,ot),he=E(wt,he,We),at===null?Ye=wt:at.sibling=wt,at=wt,ot=At}if(We===_e.length)return p(we,ot),vn&&Xr(we,We),Ye;if(ot===null){for(;We<_e.length;We++)ot=ce(we,_e[We],Oe),ot!==null&&(he=E(ot,he,We),at===null?Ye=ot:at.sibling=ot,at=ot);return vn&&Xr(we,We),Ye}for(ot=v(we,ot);We<_e.length;We++)At=me(ot,we,We,_e[We],Oe),At!==null&&(t&&At.alternate!==null&&ot.delete(At.key===null?We:At.key),he=E(At,he,We),at===null?Ye=At:at.sibling=At,at=At);return t&&ot.forEach(function(dn){return a(we,dn)}),vn&&Xr(we,We),Ye}function Ae(we,he,_e,Oe){var Ye=je(_e);if(typeof Ye!="function")throw Error(i(150));if(_e=Ye.call(_e),_e==null)throw Error(i(151));for(var at=Ye=null,ot=he,We=he=0,At=null,wt=_e.next();ot!==null&&!wt.done;We++,wt=_e.next()){ot.index>We?(At=ot,ot=null):At=ot.sibling;var dn=ge(we,ot,wt.value,Oe);if(dn===null){ot===null&&(ot=At);break}t&&ot&&dn.alternate===null&&a(we,ot),he=E(dn,he,We),at===null?Ye=dn:at.sibling=dn,at=dn,ot=At}if(wt.done)return p(we,ot),vn&&Xr(we,We),Ye;if(ot===null){for(;!wt.done;We++,wt=_e.next())wt=ce(we,wt.value,Oe),wt!==null&&(he=E(wt,he,We),at===null?Ye=wt:at.sibling=wt,at=wt);return vn&&Xr(we,We),Ye}for(ot=v(we,ot);!wt.done;We++,wt=_e.next())wt=me(ot,we,We,wt.value,Oe),wt!==null&&(t&&wt.alternate!==null&&ot.delete(wt.key===null?We:wt.key),he=E(wt,he,We),at===null?Ye=wt:at.sibling=wt,at=wt);return t&&ot.forEach(function(lr){return a(we,lr)}),vn&&Xr(we,We),Ye}function tt(we,he,_e,Oe){if(typeof _e=="object"&&_e!==null&&_e.type===Fe&&_e.key===null&&(_e=_e.props.children),typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case ae:e:{for(var Ye=_e.key,at=he;at!==null;){if(at.key===Ye){if(Ye=_e.type,Ye===Fe){if(at.tag===7){p(we,at.sibling),he=C(at,_e.props.children),he.return=we,we=he;break e}}else if(at.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===Pe&&ed(Ye)===at.type){p(we,at.sibling),he=C(at,_e.props),he.ref=uo(we,at,_e),he.return=we,we=he;break e}p(we,at);break}else a(we,at);at=at.sibling}_e.type===Fe?(he=Wa(_e.props.children,we.mode,Oe,_e.key),he.return=we,we=he):(Oe=h1(_e.type,_e.key,_e.props,null,we.mode,Oe),Oe.ref=uo(we,he,_e),Oe.return=we,we=Oe)}return I(we);case Ne:e:{for(at=_e.key;he!==null;){if(he.key===at)if(he.tag===4&&he.stateNode.containerInfo===_e.containerInfo&&he.stateNode.implementation===_e.implementation){p(we,he.sibling),he=C(he,_e.children||[]),he.return=we,we=he;break e}else{p(we,he);break}else a(we,he);he=he.sibling}he=Md(_e,we.mode,Oe),he.return=we,we=he}return I(we);case Pe:return at=_e._init,tt(we,he,at(_e._payload),Oe)}if(xn(_e))return Se(we,he,_e,Oe);if(je(_e))return Ae(we,he,_e,Oe);J1(we,_e)}return typeof _e=="string"&&_e!==""||typeof _e=="number"?(_e=""+_e,he!==null&&he.tag===6?(p(we,he.sibling),he=C(he,_e),he.return=we,we=he):(p(we,he),he=pu(_e,we.mode,Oe),he.return=we,we=he),I(we)):p(we,he)}return tt}var Rs=Uc(!0),ho=Uc(!1),Bi=se(null),As=null,Bl=null,Xo=null;function sh(){Xo=Bl=As=null}function td(t){var a=Bi.current;ie(Bi),t._currentValue=a}function Ir(t,a,p){for(;t!==null;){var v=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,v!==null&&(v.childLanes|=a)):v!==null&&(v.childLanes&a)!==a&&(v.childLanes|=a),t===p)break;t=t.return}}function Aa(t,a){As=t,Xo=Bl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&a)!==0&&($i=!0),t.firstContext=null)}function es(t){var a=t._currentValue;if(Xo!==t)if(t={context:t,memoizedValue:a,next:null},Bl===null){if(As===null)throw Error(i(308));Bl=t,As.dependencies={lanes:0,firstContext:t}}else Bl=Bl.next=t;return a}var ts=null;function Ko(t){ts===null?ts=[t]:ts.push(t)}function qu(t,a,p,v){var C=a.interleaved;return C===null?(p.next=p,Ko(a)):(p.next=C.next,C.next=p),a.interleaved=p,js(t,v)}function js(t,a){t.lanes|=a;var p=t.alternate;for(p!==null&&(p.lanes|=a),p=t,t=t.return;t!==null;)t.childLanes|=a,p=t.alternate,p!==null&&(p.childLanes|=a),p=t,t=t.return;return p.tag===3?p.stateNode:null}var Qo=!1;function oh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ah(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Jo(t,a){return{eventTime:t,lane:a,tag:0,payload:null,callback:null,next:null}}function po(t,a,p){var v=t.updateQueue;if(v===null)return null;if(v=v.shared,(Hn&2)!==0){var C=v.pending;return C===null?a.next=a:(a.next=C.next,C.next=a),v.pending=a,js(t,p)}return C=v.interleaved,C===null?(a.next=a,Ko(v)):(a.next=C.next,C.next=a),v.interleaved=a,js(t,p)}function nd(t,a,p){if(a=a.updateQueue,a!==null&&(a=a.shared,(p&4194240)!==0)){var v=a.lanes;v&=t.pendingLanes,p|=v,a.lanes=p,Ws(t,p)}}function rd(t,a){var p=t.updateQueue,v=t.alternate;if(v!==null&&(v=v.updateQueue,p===v)){var C=null,E=null;if(p=p.firstBaseUpdate,p!==null){do{var I={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};E===null?C=E=I:E=E.next=I,p=p.next}while(p!==null);E===null?C=E=a:E=E.next=a}else C=E=a;p={baseState:v.baseState,firstBaseUpdate:C,lastBaseUpdate:E,shared:v.shared,effects:v.effects},t.updateQueue=p;return}t=p.lastBaseUpdate,t===null?p.firstBaseUpdate=a:t.next=a,p.lastBaseUpdate=a}function Wu(t,a,p,v){var C=t.updateQueue;Qo=!1;var E=C.firstBaseUpdate,I=C.lastBaseUpdate,j=C.shared.pending;if(j!==null){C.shared.pending=null;var z=j,X=z.next;z.next=null,I===null?E=X:I.next=X,I=z;var ee=t.alternate;ee!==null&&(ee=ee.updateQueue,j=ee.lastBaseUpdate,j!==I&&(j===null?ee.firstBaseUpdate=X:j.next=X,ee.lastBaseUpdate=z))}if(E!==null){var ce=C.baseState;I=0,ee=X=z=null,j=E;do{var ge=j.lane,me=j.eventTime;if((v&ge)===ge){ee!==null&&(ee=ee.next={eventTime:me,lane:0,tag:j.tag,payload:j.payload,callback:j.callback,next:null});e:{var Se=t,Ae=j;switch(ge=a,me=p,Ae.tag){case 1:if(Se=Ae.payload,typeof Se=="function"){ce=Se.call(me,ce,ge);break e}ce=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Ae.payload,ge=typeof Se=="function"?Se.call(me,ce,ge):Se,ge==null)break e;ce=Ee({},ce,ge);break e;case 2:Qo=!0}}j.callback!==null&&j.lane!==0&&(t.flags|=64,ge=C.effects,ge===null?C.effects=[j]:ge.push(j))}else me={eventTime:me,lane:ge,tag:j.tag,payload:j.payload,callback:j.callback,next:null},ee===null?(X=ee=me,z=ce):ee=ee.next=me,I|=ge;if(j=j.next,j===null){if(j=C.shared.pending,j===null)break;ge=j,j=ge.next,ge.next=null,C.lastBaseUpdate=ge,C.shared.pending=null}}while(!0);if(ee===null&&(z=ce),C.baseState=z,C.firstBaseUpdate=X,C.lastBaseUpdate=ee,a=C.shared.interleaved,a!==null){C=a;do I|=C.lane,C=C.next;while(C!==a)}else E===null&&(C.shared.lanes=0);Gl|=I,t.lanes=I,t.memoizedState=ce}}function lh(t,a,p){if(t=a.effects,a.effects=null,t!==null)for(a=0;a<t.length;a++){var v=t[a],C=v.callback;if(C!==null){if(v.callback=null,v=p,typeof C!="function")throw Error(i(191,C));C.call(v)}}}var fo={},mo=se(fo),ea=se(fo),ja=se(fo);function go(t){if(t===fo)throw Error(i(174));return t}function ch(t,a){switch(xe(ja,a),xe(ea,t),xe(mo,fo),t=a.nodeType,t){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Le(null,"");break;default:t=t===8?a.parentNode:a,a=t.namespaceURI||null,t=t.tagName,a=Le(a,t)}ie(mo),xe(mo,a)}function Zc(){ie(mo),ie(ea),ie(ja)}function wi(t){go(ja.current);var a=go(mo.current),p=Le(a,t.type);a!==p&&(xe(ea,t),xe(mo,p))}function ui(t){ea.current===t&&(ie(mo),ie(ea))}var Cr=se(0);function qc(t){for(var a=t;a!==null;){if(a.tag===13){var p=a.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var id=[];function $l(){for(var t=0;t<id.length;t++)id[t]._workInProgressVersionPrimary=null;id.length=0}var sd=Ce.ReactCurrentDispatcher,od=Ce.ReactCurrentBatchConfig,Oa=0,vr=null,Hr=null,Kr=null,Gu=!1,Yu=!1,Vl=0,Cp=0;function di(){throw Error(i(321))}function Hl(t,a){if(a===null)return!1;for(var p=0;p<a.length&&p<t.length;p++)if(!zi(t[p],a[p]))return!1;return!0}function Di(t,a,p,v,C,E){if(Oa=E,vr=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,sd.current=t===null||t.memoizedState===null?D0:yh,t=p(v,C),Yu){E=0;do{if(Yu=!1,Vl=0,25<=E)throw Error(i(301));E+=1,Kr=Hr=null,a.updateQueue=null,sd.current=vh,t=p(v,C)}while(Yu)}if(sd.current=eu,a=Hr!==null&&Hr.next!==null,Oa=0,Kr=Hr=vr=null,Gu=!1,a)throw Error(i(300));return t}function ad(){var t=Vl!==0;return Vl=0,t}function yo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kr===null?vr.memoizedState=Kr=t:Kr=Kr.next=t,Kr}function ys(){if(Hr===null){var t=vr.alternate;t=t!==null?t.memoizedState:null}else t=Hr.next;var a=Kr===null?vr.memoizedState:Kr.next;if(a!==null)Kr=a,Hr=t;else{if(t===null)throw Error(i(310));Hr=t,t={memoizedState:Hr.memoizedState,baseState:Hr.baseState,baseQueue:Hr.baseQueue,queue:Hr.queue,next:null},Kr===null?vr.memoizedState=Kr=t:Kr=Kr.next=t}return Kr}function Xu(t,a){return typeof a=="function"?a(t):a}function Wc(t){var a=ys(),p=a.queue;if(p===null)throw Error(i(311));p.lastRenderedReducer=t;var v=Hr,C=v.baseQueue,E=p.pending;if(E!==null){if(C!==null){var I=C.next;C.next=E.next,E.next=I}v.baseQueue=C=E,p.pending=null}if(C!==null){E=C.next,v=v.baseState;var j=I=null,z=null,X=E;do{var ee=X.lane;if((Oa&ee)===ee)z!==null&&(z=z.next={lane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),v=X.hasEagerState?X.eagerState:t(v,X.action);else{var ce={lane:ee,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null};z===null?(j=z=ce,I=v):z=z.next=ce,vr.lanes|=ee,Gl|=ee}X=X.next}while(X!==null&&X!==E);z===null?I=v:z.next=j,zi(v,a.memoizedState)||($i=!0),a.memoizedState=v,a.baseState=I,a.baseQueue=z,p.lastRenderedState=v}if(t=p.interleaved,t!==null){C=t;do E=C.lane,vr.lanes|=E,Gl|=E,C=C.next;while(C!==t)}else C===null&&(p.lanes=0);return[a.memoizedState,p.dispatch]}function Gc(t){var a=ys(),p=a.queue;if(p===null)throw Error(i(311));p.lastRenderedReducer=t;var v=p.dispatch,C=p.pending,E=a.memoizedState;if(C!==null){p.pending=null;var I=C=C.next;do E=t(E,I.action),I=I.next;while(I!==C);zi(E,a.memoizedState)||($i=!0),a.memoizedState=E,a.baseQueue===null&&(a.baseState=E),p.lastRenderedState=E}return[E,v]}function uh(){}function za(t,a){var p=vr,v=ys(),C=a(),E=!zi(v.memoizedState,C);if(E&&(v.memoizedState=C,$i=!0),v=v.queue,dh(Mp.bind(null,p,v,t),[t]),v.getSnapshot!==a||E||Kr!==null&&Kr.memoizedState.tag&1){if(p.flags|=2048,Ku(9,Sp.bind(null,p,v,C,a),void 0,null),Qr===null)throw Error(i(349));(Oa&30)!==0||Yc(p,a,C)}return C}function Yc(t,a,p){t.flags|=16384,t={getSnapshot:a,value:p},a=vr.updateQueue,a===null?(a={lastEffect:null,stores:null},vr.updateQueue=a,a.stores=[t]):(p=a.stores,p===null?a.stores=[t]:p.push(t))}function Sp(t,a,p,v){a.value=p,a.getSnapshot=v,Ep(a)&&Lp(t)}function Mp(t,a,p){return p(function(){Ep(a)&&Lp(t)})}function Ep(t){var a=t.getSnapshot;t=t.value;try{var p=a();return!zi(t,p)}catch{return!0}}function Lp(t){var a=js(t,1);a!==null&&$s(a,t,1,-1)}function Tp(t){var a=yo();return typeof t=="function"&&(t=t()),a.memoizedState=a.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xu,lastRenderedState:t},a.queue=t,t=t.dispatch=P0.bind(null,vr,t),[a.memoizedState,t]}function Ku(t,a,p,v){return t={tag:t,create:a,destroy:p,deps:v,next:null},a=vr.updateQueue,a===null?(a={lastEffect:null,stores:null},vr.updateQueue=a,a.lastEffect=t.next=t):(p=a.lastEffect,p===null?a.lastEffect=t.next=t:(v=p.next,p.next=t,t.next=v,a.lastEffect=t)),t}function kp(){return ys().memoizedState}function Xc(t,a,p,v){var C=yo();vr.flags|=t,C.memoizedState=Ku(1|a,p,void 0,v===void 0?null:v)}function ld(t,a,p,v){var C=ys();v=v===void 0?null:v;var E=void 0;if(Hr!==null){var I=Hr.memoizedState;if(E=I.destroy,v!==null&&Hl(v,I.deps)){C.memoizedState=Ku(a,p,E,v);return}}vr.flags|=t,C.memoizedState=Ku(1|a,p,E,v)}function Ul(t,a){return Xc(8390656,8,t,a)}function dh(t,a){return ld(2048,8,t,a)}function Sr(t,a){return ld(4,2,t,a)}function Qu(t,a){return ld(4,4,t,a)}function hh(t,a){if(typeof a=="function")return t=t(),a(t),function(){a(null)};if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function Ju(t,a,p){return p=p!=null?p.concat([t]):null,ld(4,4,hh.bind(null,a,t),p)}function Kc(){}function Qc(t,a){var p=ys();a=a===void 0?null:a;var v=p.memoizedState;return v!==null&&a!==null&&Hl(a,v[1])?v[0]:(p.memoizedState=[t,a],t)}function ph(t,a){var p=ys();a=a===void 0?null:a;var v=p.memoizedState;return v!==null&&a!==null&&Hl(a,v[1])?v[0]:(t=t(),p.memoizedState=[t,a],t)}function fh(t,a,p){return(Oa&21)===0?(t.baseState&&(t.baseState=!1,$i=!0),t.memoizedState=p):(zi(p,a)||(p=Eu(),vr.lanes|=p,Gl|=p,t.baseState=!0),a)}function e1(t,a){var p=$n;$n=p!==0&&4>p?p:4,t(!0);var v=od.transition;od.transition={};try{t(!1),a()}finally{$n=p,od.transition=v}}function cd(){return ys().memoizedState}function mh(t,a,p){var v=Ua(t);if(p={lane:v,action:p,hasEagerState:!1,eagerState:null,next:null},gh(t))Jc(a,p);else if(p=qu(t,a,p,v),p!==null){var C=pi();$s(p,t,v,C),Pp(p,a,v)}}function P0(t,a,p){var v=Ua(t),C={lane:v,action:p,hasEagerState:!1,eagerState:null,next:null};if(gh(t))Jc(a,C);else{var E=t.alternate;if(t.lanes===0&&(E===null||E.lanes===0)&&(E=a.lastRenderedReducer,E!==null))try{var I=a.lastRenderedState,j=E(I,p);if(C.hasEagerState=!0,C.eagerState=j,zi(j,I)){var z=a.interleaved;z===null?(C.next=C,Ko(a)):(C.next=z.next,z.next=C),a.interleaved=C;return}}catch{}finally{}p=qu(t,a,C,v),p!==null&&(C=pi(),$s(p,t,v,C),Pp(p,a,v))}}function gh(t){var a=t.alternate;return t===vr||a!==null&&a===vr}function Jc(t,a){Yu=Gu=!0;var p=t.pending;p===null?a.next=a:(a.next=p.next,p.next=a),t.pending=a}function Pp(t,a,p){if((p&4194240)!==0){var v=a.lanes;v&=t.pendingLanes,p|=v,a.lanes=p,Ws(t,p)}}var eu={readContext:es,useCallback:di,useContext:di,useEffect:di,useImperativeHandle:di,useInsertionEffect:di,useLayoutEffect:di,useMemo:di,useReducer:di,useRef:di,useState:di,useDebugValue:di,useDeferredValue:di,useTransition:di,useMutableSource:di,useSyncExternalStore:di,useId:di,unstable_isNewReconciler:!1},D0={readContext:es,useCallback:function(t,a){return yo().memoizedState=[t,a===void 0?null:a],t},useContext:es,useEffect:Ul,useImperativeHandle:function(t,a,p){return p=p!=null?p.concat([t]):null,Xc(4194308,4,hh.bind(null,a,t),p)},useLayoutEffect:function(t,a){return Xc(4194308,4,t,a)},useInsertionEffect:function(t,a){return Xc(4,2,t,a)},useMemo:function(t,a){var p=yo();return a=a===void 0?null:a,t=t(),p.memoizedState=[t,a],t},useReducer:function(t,a,p){var v=yo();return a=p!==void 0?p(a):a,v.memoizedState=v.baseState=a,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:a},v.queue=t,t=t.dispatch=mh.bind(null,vr,t),[v.memoizedState,t]},useRef:function(t){var a=yo();return t={current:t},a.memoizedState=t},useState:Tp,useDebugValue:Kc,useDeferredValue:function(t){return yo().memoizedState=t},useTransition:function(){var t=Tp(!1),a=t[0];return t=e1.bind(null,t[1]),yo().memoizedState=t,[a,t]},useMutableSource:function(){},useSyncExternalStore:function(t,a,p){var v=vr,C=yo();if(vn){if(p===void 0)throw Error(i(407));p=p()}else{if(p=a(),Qr===null)throw Error(i(349));(Oa&30)!==0||Yc(v,a,p)}C.memoizedState=p;var E={value:p,getSnapshot:a};return C.queue=E,Ul(Mp.bind(null,v,E,t),[t]),v.flags|=2048,Ku(9,Sp.bind(null,v,E,p,a),void 0,null),p},useId:function(){var t=yo(),a=Qr.identifierPrefix;if(vn){var p=hr,v=_i;p=(v&~(1<<32-vi(v)-1)).toString(32)+p,a=":"+a+"R"+p,p=Vl++,0<p&&(a+="H"+p.toString(32)),a+=":"}else p=Cp++,a=":"+a+"r"+p.toString(32)+":";return t.memoizedState=a},unstable_isNewReconciler:!1},yh={readContext:es,useCallback:Qc,useContext:es,useEffect:dh,useImperativeHandle:Ju,useInsertionEffect:Sr,useLayoutEffect:Qu,useMemo:ph,useReducer:Wc,useRef:kp,useState:function(){return Wc(Xu)},useDebugValue:Kc,useDeferredValue:function(t){var a=ys();return fh(a,Hr.memoizedState,t)},useTransition:function(){var t=Wc(Xu)[0],a=ys().memoizedState;return[t,a]},useMutableSource:uh,useSyncExternalStore:za,useId:cd,unstable_isNewReconciler:!1},vh={readContext:es,useCallback:Qc,useContext:es,useEffect:dh,useImperativeHandle:Ju,useInsertionEffect:Sr,useLayoutEffect:Qu,useMemo:ph,useReducer:Gc,useRef:kp,useState:function(){return Gc(Xu)},useDebugValue:Kc,useDeferredValue:function(t){var a=ys();return Hr===null?a.memoizedState=t:fh(a,Hr.memoizedState,t)},useTransition:function(){var t=Gc(Xu)[0],a=ys().memoizedState;return[t,a]},useMutableSource:uh,useSyncExternalStore:za,useId:cd,unstable_isNewReconciler:!1};function ns(t,a){if(t&&t.defaultProps){a=Ee({},a),t=t.defaultProps;for(var p in t)a[p]===void 0&&(a[p]=t[p]);return a}return a}function xh(t,a,p,v){a=t.memoizedState,p=p(v,a),p=p==null?a:Ee({},a,p),t.memoizedState=p,t.lanes===0&&(t.updateQueue.baseState=p)}var ud={isMounted:function(t){return(t=t._reactInternals)?fe(t)===t:!1},enqueueSetState:function(t,a,p){t=t._reactInternals;var v=pi(),C=Ua(t),E=Jo(v,C);E.payload=a,p!=null&&(E.callback=p),a=po(t,E,C),a!==null&&($s(a,t,C,v),nd(a,t,C))},enqueueReplaceState:function(t,a,p){t=t._reactInternals;var v=pi(),C=Ua(t),E=Jo(v,C);E.tag=1,E.payload=a,p!=null&&(E.callback=p),a=po(t,E,C),a!==null&&($s(a,t,C,v),nd(a,t,C))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var p=pi(),v=Ua(t),C=Jo(p,v);C.tag=2,a!=null&&(C.callback=a),a=po(t,C,v),a!==null&&($s(a,t,v,p),nd(a,t,v))}};function Dp(t,a,p,v,C,E,I){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(v,E,I):a.prototype&&a.prototype.isPureReactComponent?!Ji(p,v)||!Ji(C,E):!0}function Ip(t,a,p){var v=!1,C=De,E=a.contextType;return typeof E=="object"&&E!==null?E=es(E):(C=Ge(a)?Ve:Ie.current,v=a.contextTypes,E=(v=v!=null)?ze(t,C):De),a=new a(p,E),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=ud,t.stateNode=a,a._reactInternals=t,v&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=C,t.__reactInternalMemoizedMaskedChildContext=E),a}function Np(t,a,p,v){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(p,v),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(p,v),a.state!==t&&ud.enqueueReplaceState(a,a.state,null)}function vo(t,a,p,v){var C=t.stateNode;C.props=p,C.state=t.memoizedState,C.refs={},oh(t);var E=a.contextType;typeof E=="object"&&E!==null?C.context=es(E):(E=Ge(a)?Ve:Ie.current,C.context=ze(t,E)),C.state=t.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(xh(t,a,E,p),C.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(a=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),a!==C.state&&ud.enqueueReplaceState(C,C.state,null),Wu(t,p,C,v),C.state=t.memoizedState),typeof C.componentDidMount=="function"&&(t.flags|=4194308)}function tu(t,a){try{var p="",v=a;do p+=ft(v),v=v.return;while(v);var C=p}catch(E){C=`
Error generating stack: `+E.message+`
`+E.stack}return{value:t,source:a,stack:C,digest:null}}function dd(t,a,p){return{value:t,source:null,stack:p??null,digest:a??null}}function Fa(t,a){try{console.error(a.value)}catch(p){setTimeout(function(){throw p})}}var I0=typeof WeakMap=="function"?WeakMap:Map;function Rp(t,a,p){p=Jo(-1,p),p.tag=3,p.payload={element:null};var v=a.value;return p.callback=function(){a1||(a1=!0,Rh=v),Fa(t,a)},p}function Ap(t,a,p){p=Jo(-1,p),p.tag=3;var v=t.type.getDerivedStateFromError;if(typeof v=="function"){var C=a.value;p.payload=function(){return v(C)},p.callback=function(){Fa(t,a)}}var E=t.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(p.callback=function(){Fa(t,a),typeof v!="function"&&(Va===null?Va=new Set([this]):Va.add(this));var I=a.stack;this.componentDidCatch(a.value,{componentStack:I!==null?I:""})}),p}function _h(t,a,p){var v=t.pingCache;if(v===null){v=t.pingCache=new I0;var C=new Set;v.set(a,C)}else C=v.get(a),C===void 0&&(C=new Set,v.set(a,C));C.has(p)||(C.add(p),t=j0.bind(null,t,a,p),a.then(t,t))}function wh(t){do{var a;if((a=t.tag===13)&&(a=t.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return t;t=t.return}while(t!==null);return null}function jp(t,a,p,v,C){return(t.mode&1)===0?(t===a?t.flags|=65536:(t.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(a=Jo(-1,1),a.tag=2,po(p,a,1))),p.lanes|=1),t):(t.flags|=65536,t.lanes=C,t)}var N0=Ce.ReactCurrentOwner,$i=!1;function Ii(t,a,p,v){a.child=t===null?ho(a,null,p,v):Rs(a,t.child,p,v)}function hd(t,a,p,v,C){p=p.render;var E=a.ref;return Aa(a,C),v=Di(t,a,p,v,E,C),p=ad(),t!==null&&!$i?(a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~C,ta(t,a,C)):(vn&&p&&Ia(a),a.flags|=1,Ii(t,a,v,C),a.child)}function nu(t,a,p,v,C){if(t===null){var E=p.type;return typeof E=="function"&&!Sd(E)&&E.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(a.tag=15,a.type=E,pd(t,a,E,v,C)):(t=h1(p.type,null,v,a,a.mode,C),t.ref=a.ref,t.return=a,a.child=t)}if(E=t.child,(t.lanes&C)===0){var I=E.memoizedProps;if(p=p.compare,p=p!==null?p:Ji,p(I,v)&&t.ref===a.ref)return ta(t,a,C)}return a.flags|=1,t=ia(E,v),t.ref=a.ref,t.return=a,a.child=t}function pd(t,a,p,v,C){if(t!==null){var E=t.memoizedProps;if(Ji(E,v)&&t.ref===a.ref)if($i=!1,a.pendingProps=v=E,(t.lanes&C)!==0)(t.flags&131072)!==0&&($i=!0);else return a.lanes=t.lanes,ta(t,a,C)}return bh(t,a,p,v,C)}function Op(t,a,p){var v=a.pendingProps,C=v.children,E=t!==null?t.memoizedState:null;if(v.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},xe($a,Vi),Vi|=p;else{if((p&1073741824)===0)return t=E!==null?E.baseLanes|p:p,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:t,cachePool:null,transitions:null},a.updateQueue=null,xe($a,Vi),Vi|=t,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},v=E!==null?E.baseLanes:p,xe($a,Vi),Vi|=v}else E!==null?(v=E.baseLanes|p,a.memoizedState=null):v=p,xe($a,Vi),Vi|=v;return Ii(t,a,C,p),a.child}function zp(t,a){var p=a.ref;(t===null&&p!==null||t!==null&&t.ref!==p)&&(a.flags|=512,a.flags|=2097152)}function bh(t,a,p,v,C){var E=Ge(p)?Ve:Ie.current;return E=ze(a,E),Aa(a,C),p=Di(t,a,p,v,E,C),v=ad(),t!==null&&!$i?(a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~C,ta(t,a,C)):(vn&&v&&Ia(a),a.flags|=1,Ii(t,a,p,C),a.child)}function ru(t,a,p,v,C){if(Ge(p)){var E=!0;It(a)}else E=!1;if(Aa(a,C),a.stateNode===null)n1(t,a),Ip(a,p,v),vo(a,p,v,C),v=!0;else if(t===null){var I=a.stateNode,j=a.memoizedProps;I.props=j;var z=I.context,X=p.contextType;typeof X=="object"&&X!==null?X=es(X):(X=Ge(p)?Ve:Ie.current,X=ze(a,X));var ee=p.getDerivedStateFromProps,ce=typeof ee=="function"||typeof I.getSnapshotBeforeUpdate=="function";ce||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(j!==v||z!==X)&&Np(a,I,v,X),Qo=!1;var ge=a.memoizedState;I.state=ge,Wu(a,v,I,C),z=a.memoizedState,j!==v||ge!==z||ue.current||Qo?(typeof ee=="function"&&(xh(a,p,ee,v),z=a.memoizedState),(j=Qo||Dp(a,p,j,v,ge,z,X))?(ce||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(a.flags|=4194308)):(typeof I.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=v,a.memoizedState=z),I.props=v,I.state=z,I.context=X,v=j):(typeof I.componentDidMount=="function"&&(a.flags|=4194308),v=!1)}else{I=a.stateNode,ah(t,a),j=a.memoizedProps,X=a.type===a.elementType?j:ns(a.type,j),I.props=X,ce=a.pendingProps,ge=I.context,z=p.contextType,typeof z=="object"&&z!==null?z=es(z):(z=Ge(p)?Ve:Ie.current,z=ze(a,z));var me=p.getDerivedStateFromProps;(ee=typeof me=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(j!==ce||ge!==z)&&Np(a,I,v,z),Qo=!1,ge=a.memoizedState,I.state=ge,Wu(a,v,I,C);var Se=a.memoizedState;j!==ce||ge!==Se||ue.current||Qo?(typeof me=="function"&&(xh(a,p,me,v),Se=a.memoizedState),(X=Qo||Dp(a,p,X,v,ge,Se,z)||!1)?(ee||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(v,Se,z),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(v,Se,z)),typeof I.componentDidUpdate=="function"&&(a.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof I.componentDidUpdate!="function"||j===t.memoizedProps&&ge===t.memoizedState||(a.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||j===t.memoizedProps&&ge===t.memoizedState||(a.flags|=1024),a.memoizedProps=v,a.memoizedState=Se),I.props=v,I.state=Se,I.context=z,v=X):(typeof I.componentDidUpdate!="function"||j===t.memoizedProps&&ge===t.memoizedState||(a.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||j===t.memoizedProps&&ge===t.memoizedState||(a.flags|=1024),v=!1)}return fd(t,a,p,v,E,C)}function fd(t,a,p,v,C,E){zp(t,a);var I=(a.flags&128)!==0;if(!v&&!I)return C&&St(a,p,!1),ta(t,a,E);v=a.stateNode,N0.current=a;var j=I&&typeof p.getDerivedStateFromError!="function"?null:v.render();return a.flags|=1,t!==null&&I?(a.child=Rs(a,t.child,null,E),a.child=Rs(a,null,j,E)):Ii(t,a,j,E),a.memoizedState=v.state,C&&St(a,p,!0),a.child}function Fp(t){var a=t.stateNode;a.pendingContext?gt(t,a.pendingContext,a.pendingContext!==a.context):a.context&&gt(t,a.context,!1),ch(t,a.containerInfo)}function Bp(t,a,p,v,C){return ci(),Ra(C),a.flags|=256,Ii(t,a,p,v),a.child}var Ch={dehydrated:null,treeContext:null,retryLane:0};function Sh(t){return{baseLanes:t,cachePool:null,transitions:null}}function $p(t,a,p){var v=a.pendingProps,C=Cr.current,E=!1,I=(a.flags&128)!==0,j;if((j=I)||(j=t!==null&&t.memoizedState===null?!1:(C&2)!==0),j?(E=!0,a.flags&=-129):(t===null||t.memoizedState!==null)&&(C|=1),xe(Cr,C&1),t===null)return co(a),t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((a.mode&1)===0?a.lanes=1:t.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(I=v.children,t=v.fallback,E?(v=a.mode,E=a.child,I={mode:"hidden",children:I},(v&1)===0&&E!==null?(E.childLanes=0,E.pendingProps=I):E=hu(I,v,0,null),t=Wa(t,v,p,null),E.return=a,t.return=a,E.sibling=t,a.child=E,a.child.memoizedState=Sh(p),a.memoizedState=Ch,t):Mh(a,I));if(C=t.memoizedState,C!==null&&(j=C.dehydrated,j!==null))return Eh(t,a,I,v,j,C,p);if(E){E=v.fallback,I=a.mode,C=t.child,j=C.sibling;var z={mode:"hidden",children:v.children};return(I&1)===0&&a.child!==C?(v=a.child,v.childLanes=0,v.pendingProps=z,a.deletions=null):(v=ia(C,z),v.subtreeFlags=C.subtreeFlags&14680064),j!==null?E=ia(j,E):(E=Wa(E,I,p,null),E.flags|=2),E.return=a,v.return=a,v.sibling=E,a.child=v,v=E,E=a.child,I=t.child.memoizedState,I=I===null?Sh(p):{baseLanes:I.baseLanes|p,cachePool:null,transitions:I.transitions},E.memoizedState=I,E.childLanes=t.childLanes&~p,a.memoizedState=Ch,v}return E=t.child,t=E.sibling,v=ia(E,{mode:"visible",children:v.children}),(a.mode&1)===0&&(v.lanes=p),v.return=a,v.sibling=null,t!==null&&(p=a.deletions,p===null?(a.deletions=[t],a.flags|=16):p.push(t)),a.child=v,a.memoizedState=null,v}function Mh(t,a){return a=hu({mode:"visible",children:a},t.mode,0,null),a.return=t,t.child=a}function t1(t,a,p,v){return v!==null&&Ra(v),Rs(a,t.child,null,p),t=Mh(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function Eh(t,a,p,v,C,E,I){if(p)return a.flags&256?(a.flags&=-257,v=dd(Error(i(422))),t1(t,a,I,v)):a.memoizedState!==null?(a.child=t.child,a.flags|=128,null):(E=v.fallback,C=a.mode,v=hu({mode:"visible",children:v.children},C,0,null),E=Wa(E,C,I,null),E.flags|=2,v.return=a,E.return=a,v.sibling=E,a.child=v,(a.mode&1)!==0&&Rs(a,t.child,null,I),a.child.memoizedState=Sh(I),a.memoizedState=Ch,E);if((a.mode&1)===0)return t1(t,a,I,null);if(C.data==="$!"){if(v=C.nextSibling&&C.nextSibling.dataset,v)var j=v.dgst;return v=j,E=Error(i(419)),v=dd(E,v,void 0),t1(t,a,I,v)}if(j=(I&t.childLanes)!==0,$i||j){if(v=Qr,v!==null){switch(I&-I){case 4:C=2;break;case 16:C=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:C=32;break;case 536870912:C=268435456;break;default:C=0}C=(C&(v.suspendedLanes|I))!==0?0:C,C!==0&&C!==E.retryLane&&(E.retryLane=C,js(t,C),$s(v,t,C,-1))}return uu(),v=dd(Error(i(421))),t1(t,a,I,v)}return C.data==="$?"?(a.flags|=128,a.child=t.child,a=O0.bind(null,t),C._reactRetry=a,null):(t=E.treeContext,fn=Fi(C.nextSibling),Tn=a,vn=!0,yr=null,t!==null&&(Dr[br++]=_i,Dr[br++]=hr,Dr[br++]=Yr,_i=t.id,hr=t.overflow,Yr=a),a=Mh(a,v.children),a.flags|=4096,a)}function Vp(t,a,p){t.lanes|=a;var v=t.alternate;v!==null&&(v.lanes|=a),Ir(t.return,a,p)}function md(t,a,p,v,C){var E=t.memoizedState;E===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:v,tail:p,tailMode:C}:(E.isBackwards=a,E.rendering=null,E.renderingStartTime=0,E.last=v,E.tail=p,E.tailMode=C)}function Lh(t,a,p){var v=a.pendingProps,C=v.revealOrder,E=v.tail;if(Ii(t,a,v.children,p),v=Cr.current,(v&2)!==0)v=v&1|2,a.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Vp(t,p,a);else if(t.tag===19)Vp(t,p,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}v&=1}if(xe(Cr,v),(a.mode&1)===0)a.memoizedState=null;else switch(C){case"forwards":for(p=a.child,C=null;p!==null;)t=p.alternate,t!==null&&qc(t)===null&&(C=p),p=p.sibling;p=C,p===null?(C=a.child,a.child=null):(C=p.sibling,p.sibling=null),md(a,!1,C,p,E);break;case"backwards":for(p=null,C=a.child,a.child=null;C!==null;){if(t=C.alternate,t!==null&&qc(t)===null){a.child=C;break}t=C.sibling,C.sibling=p,p=C,C=t}md(a,!0,p,null,E);break;case"together":md(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function n1(t,a){(a.mode&1)===0&&t!==null&&(t.alternate=null,a.alternate=null,a.flags|=2)}function ta(t,a,p){if(t!==null&&(a.dependencies=t.dependencies),Gl|=a.lanes,(p&a.childLanes)===0)return null;if(t!==null&&a.child!==t.child)throw Error(i(153));if(a.child!==null){for(t=a.child,p=ia(t,t.pendingProps),a.child=p,p.return=a;t.sibling!==null;)t=t.sibling,p=p.sibling=ia(t,t.pendingProps),p.return=a;p.sibling=null}return a.child}function R0(t,a,p){switch(a.tag){case 3:Fp(a),ci();break;case 5:wi(a);break;case 1:Ge(a.type)&&It(a);break;case 4:ch(a,a.stateNode.containerInfo);break;case 10:var v=a.type._context,C=a.memoizedProps.value;xe(Bi,v._currentValue),v._currentValue=C;break;case 13:if(v=a.memoizedState,v!==null)return v.dehydrated!==null?(xe(Cr,Cr.current&1),a.flags|=128,null):(p&a.child.childLanes)!==0?$p(t,a,p):(xe(Cr,Cr.current&1),t=ta(t,a,p),t!==null?t.sibling:null);xe(Cr,Cr.current&1);break;case 19:if(v=(p&a.childLanes)!==0,(t.flags&128)!==0){if(v)return Lh(t,a,p);a.flags|=128}if(C=a.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),xe(Cr,Cr.current),v)break;return null;case 22:case 23:return a.lanes=0,Op(t,a,p)}return ta(t,a,p)}var Hp,gd,Up,Zp;Hp=function(t,a){for(var p=a.child;p!==null;){if(p.tag===5||p.tag===6)t.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===a)break;for(;p.sibling===null;){if(p.return===null||p.return===a)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},gd=function(){},Up=function(t,a,p,v){var C=t.memoizedProps;if(C!==v){t=a.stateNode,go(mo.current);var E=null;switch(p){case"input":C=jt(t,C),v=jt(t,v),E=[];break;case"select":C=Ee({},C,{value:void 0}),v=Ee({},v,{value:void 0}),E=[];break;case"textarea":C=Dn(t,C),v=Dn(t,v),E=[];break;default:typeof C.onClick!="function"&&typeof v.onClick=="function"&&(t.onclick=Da)}et(p,v);var I;p=null;for(X in C)if(!v.hasOwnProperty(X)&&C.hasOwnProperty(X)&&C[X]!=null)if(X==="style"){var j=C[X];for(I in j)j.hasOwnProperty(I)&&(p||(p={}),p[I]="")}else X!=="dangerouslySetInnerHTML"&&X!=="children"&&X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&X!=="autoFocus"&&(d.hasOwnProperty(X)?E||(E=[]):(E=E||[]).push(X,null));for(X in v){var z=v[X];if(j=C!=null?C[X]:void 0,v.hasOwnProperty(X)&&z!==j&&(z!=null||j!=null))if(X==="style")if(j){for(I in j)!j.hasOwnProperty(I)||z&&z.hasOwnProperty(I)||(p||(p={}),p[I]="");for(I in z)z.hasOwnProperty(I)&&j[I]!==z[I]&&(p||(p={}),p[I]=z[I])}else p||(E||(E=[]),E.push(X,p)),p=z;else X==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,j=j?j.__html:void 0,z!=null&&j!==z&&(E=E||[]).push(X,z)):X==="children"?typeof z!="string"&&typeof z!="number"||(E=E||[]).push(X,""+z):X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&(d.hasOwnProperty(X)?(z!=null&&X==="onScroll"&&An("scroll",t),E||j===z||(E=[])):(E=E||[]).push(X,z))}p&&(E=E||[]).push("style",p);var X=E;(a.updateQueue=X)&&(a.flags|=4)}},Zp=function(t,a,p,v){p!==v&&(a.flags|=4)};function na(t,a){if(!vn)switch(t.tailMode){case"hidden":a=t.tail;for(var p=null;a!==null;)a.alternate!==null&&(p=a),a=a.sibling;p===null?t.tail=null:p.sibling=null;break;case"collapsed":p=t.tail;for(var v=null;p!==null;)p.alternate!==null&&(v=p),p=p.sibling;v===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:v.sibling=null}}function Vn(t){var a=t.alternate!==null&&t.alternate.child===t.child,p=0,v=0;if(a)for(var C=t.child;C!==null;)p|=C.lanes|C.childLanes,v|=C.subtreeFlags&14680064,v|=C.flags&14680064,C.return=t,C=C.sibling;else for(C=t.child;C!==null;)p|=C.lanes|C.childLanes,v|=C.subtreeFlags,v|=C.flags,C.return=t,C=C.sibling;return t.subtreeFlags|=v,t.childLanes=p,a}function Th(t,a,p){var v=a.pendingProps;switch(In(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vn(a),null;case 1:return Ge(a.type)&&rt(),Vn(a),null;case 3:return v=a.stateNode,Zc(),ie(ue),ie(Ie),$l(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(t===null||t.child===null)&&(Na(a)?a.flags|=4:t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,yr!==null&&(u1(yr),yr=null))),gd(t,a),Vn(a),null;case 5:ui(a);var C=go(ja.current);if(p=a.type,t!==null&&a.stateNode!=null)Up(t,a,p,v,C),t.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!v){if(a.stateNode===null)throw Error(i(166));return Vn(a),null}if(t=go(mo.current),Na(a)){v=a.stateNode,p=a.type;var E=a.memoizedProps;switch(v[h]=a,v[y]=E,t=(a.mode&1)!==0,p){case"dialog":An("cancel",v),An("close",v);break;case"iframe":case"object":case"embed":An("load",v);break;case"video":case"audio":for(C=0;C<Go.length;C++)An(Go[C],v);break;case"source":An("error",v);break;case"img":case"image":case"link":An("error",v),An("load",v);break;case"details":An("toggle",v);break;case"input":hn(v,E),An("invalid",v);break;case"select":v._wrapperState={wasMultiple:!!E.multiple},An("invalid",v);break;case"textarea":bn(v,E),An("invalid",v)}et(p,E),C=null;for(var I in E)if(E.hasOwnProperty(I)){var j=E[I];I==="children"?typeof j=="string"?v.textContent!==j&&(E.suppressHydrationWarning!==!0&&so(v.textContent,j,t),C=["children",j]):typeof j=="number"&&v.textContent!==""+j&&(E.suppressHydrationWarning!==!0&&so(v.textContent,j,t),C=["children",""+j]):d.hasOwnProperty(I)&&j!=null&&I==="onScroll"&&An("scroll",v)}switch(p){case"input":Rt(v),Jn(v,E,!0);break;case"textarea":Rt(v),Et(v);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(v.onclick=Da)}v=C,a.updateQueue=v,v!==null&&(a.flags|=4)}else{I=C.nodeType===9?C:C.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=nt(p)),t==="http://www.w3.org/1999/xhtml"?p==="script"?(t=I.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof v.is=="string"?t=I.createElement(p,{is:v.is}):(t=I.createElement(p),p==="select"&&(I=t,v.multiple?I.multiple=!0:v.size&&(I.size=v.size))):t=I.createElementNS(t,p),t[h]=a,t[y]=v,Hp(t,a,!1,!1),a.stateNode=t;e:{switch(I=$t(p,v),p){case"dialog":An("cancel",t),An("close",t),C=v;break;case"iframe":case"object":case"embed":An("load",t),C=v;break;case"video":case"audio":for(C=0;C<Go.length;C++)An(Go[C],t);C=v;break;case"source":An("error",t),C=v;break;case"img":case"image":case"link":An("error",t),An("load",t),C=v;break;case"details":An("toggle",t),C=v;break;case"input":hn(t,v),C=jt(t,v),An("invalid",t);break;case"option":C=v;break;case"select":t._wrapperState={wasMultiple:!!v.multiple},C=Ee({},v,{value:void 0}),An("invalid",t);break;case"textarea":bn(t,v),C=Dn(t,v),An("invalid",t);break;default:C=v}et(p,C),j=C;for(E in j)if(j.hasOwnProperty(E)){var z=j[E];E==="style"?ct(t,z):E==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,z!=null&&ln(t,z)):E==="children"?typeof z=="string"?(p!=="textarea"||z!=="")&&cn(t,z):typeof z=="number"&&cn(t,""+z):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(d.hasOwnProperty(E)?z!=null&&E==="onScroll"&&An("scroll",t):z!=null&&oe(t,E,z,I))}switch(p){case"input":Rt(t),Jn(t,v,!1);break;case"textarea":Rt(t),Et(t);break;case"option":v.value!=null&&t.setAttribute("value",""+ut(v.value));break;case"select":t.multiple=!!v.multiple,E=v.value,E!=null?Nn(t,!!v.multiple,E,!1):v.defaultValue!=null&&Nn(t,!!v.multiple,v.defaultValue,!0);break;default:typeof C.onClick=="function"&&(t.onclick=Da)}switch(p){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}}v&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Vn(a),null;case 6:if(t&&a.stateNode!=null)Zp(t,a,t.memoizedProps,v);else{if(typeof v!="string"&&a.stateNode===null)throw Error(i(166));if(p=go(ja.current),go(mo.current),Na(a)){if(v=a.stateNode,p=a.memoizedProps,v[h]=a,(E=v.nodeValue!==p)&&(t=Tn,t!==null))switch(t.tag){case 3:so(v.nodeValue,p,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&so(v.nodeValue,p,(t.mode&1)!==0)}E&&(a.flags|=4)}else v=(p.nodeType===9?p:p.ownerDocument).createTextNode(v),v[h]=a,a.stateNode=v}return Vn(a),null;case 13:if(ie(Cr),v=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(vn&&fn!==null&&(a.mode&1)!==0&&(a.flags&128)===0)zl(),ci(),a.flags|=98560,E=!1;else if(E=Na(a),v!==null&&v.dehydrated!==null){if(t===null){if(!E)throw Error(i(318));if(E=a.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(i(317));E[h]=a}else ci(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Vn(a),E=!1}else yr!==null&&(u1(yr),yr=null),E=!0;if(!E)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=p,a):(v=v!==null,v!==(t!==null&&t.memoizedState!==null)&&v&&(a.child.flags|=8192,(a.mode&1)!==0&&(t===null||(Cr.current&1)!==0?Fr===0&&(Fr=3):uu())),a.updateQueue!==null&&(a.flags|=4),Vn(a),null);case 4:return Zc(),gd(t,a),t===null&&io(a.stateNode.containerInfo),Vn(a),null;case 10:return td(a.type._context),Vn(a),null;case 17:return Ge(a.type)&&rt(),Vn(a),null;case 19:if(ie(Cr),E=a.memoizedState,E===null)return Vn(a),null;if(v=(a.flags&128)!==0,I=E.rendering,I===null)if(v)na(E,!1);else{if(Fr!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(I=qc(t),I!==null){for(a.flags|=128,na(E,!1),v=I.updateQueue,v!==null&&(a.updateQueue=v,a.flags|=4),a.subtreeFlags=0,v=p,p=a.child;p!==null;)E=p,t=v,E.flags&=14680066,I=E.alternate,I===null?(E.childLanes=0,E.lanes=t,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=I.childLanes,E.lanes=I.lanes,E.child=I.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=I.memoizedProps,E.memoizedState=I.memoizedState,E.updateQueue=I.updateQueue,E.type=I.type,t=I.dependencies,E.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),p=p.sibling;return xe(Cr,Cr.current&1|2),a.child}t=t.sibling}E.tail!==null&&Ct()>Yl&&(a.flags|=128,v=!0,na(E,!1),a.lanes=4194304)}else{if(!v)if(t=qc(I),t!==null){if(a.flags|=128,v=!0,p=t.updateQueue,p!==null&&(a.updateQueue=p,a.flags|=4),na(E,!0),E.tail===null&&E.tailMode==="hidden"&&!I.alternate&&!vn)return Vn(a),null}else 2*Ct()-E.renderingStartTime>Yl&&p!==1073741824&&(a.flags|=128,v=!0,na(E,!1),a.lanes=4194304);E.isBackwards?(I.sibling=a.child,a.child=I):(p=E.last,p!==null?p.sibling=I:a.child=I,E.last=I)}return E.tail!==null?(a=E.tail,E.rendering=a,E.tail=a.sibling,E.renderingStartTime=Ct(),a.sibling=null,p=Cr.current,xe(Cr,v?p&1|2:p&1),a):(Vn(a),null);case 22:case 23:return bd(),v=a.memoizedState!==null,t!==null&&t.memoizedState!==null!==v&&(a.flags|=8192),v&&(a.mode&1)!==0?(Vi&1073741824)!==0&&(Vn(a),a.subtreeFlags&6&&(a.flags|=8192)):Vn(a),null;case 24:return null;case 25:return null}throw Error(i(156,a.tag))}function qp(t,a){switch(In(a),a.tag){case 1:return Ge(a.type)&&rt(),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return Zc(),ie(ue),ie(Ie),$l(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 5:return ui(a),null;case 13:if(ie(Cr),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(i(340));ci()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return ie(Cr),null;case 4:return Zc(),null;case 10:return td(a.type._context),null;case 22:case 23:return bd(),null;case 24:return null;default:return null}}var r1=!1,yn=!1,Ba=typeof WeakSet=="function"?WeakSet:Set,qt=null;function Zl(t,a){var p=t.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(v){Mr(t,a,v)}else p.current=null}function yd(t,a,p){try{p()}catch(v){Mr(t,a,v)}}var xo=!1;function iu(t,a){if(Pr=ga,t=W1(),Oc(t)){if("selectionStart"in t)var p={start:t.selectionStart,end:t.selectionEnd};else e:{p=(p=t.ownerDocument)&&p.defaultView||window;var v=p.getSelection&&p.getSelection();if(v&&v.rangeCount!==0){p=v.anchorNode;var C=v.anchorOffset,E=v.focusNode;v=v.focusOffset;try{p.nodeType,E.nodeType}catch{p=null;break e}var I=0,j=-1,z=-1,X=0,ee=0,ce=t,ge=null;t:for(;;){for(var me;ce!==p||C!==0&&ce.nodeType!==3||(j=I+C),ce!==E||v!==0&&ce.nodeType!==3||(z=I+v),ce.nodeType===3&&(I+=ce.nodeValue.length),(me=ce.firstChild)!==null;)ge=ce,ce=me;for(;;){if(ce===t)break t;if(ge===p&&++X===C&&(j=I),ge===E&&++ee===v&&(z=I),(me=ce.nextSibling)!==null)break;ce=ge,ge=ce.parentNode}ce=me}p=j===-1||z===-1?null:{start:j,end:z}}else p=null}p=p||{start:0,end:0}}else p=null;for(Ns={focusedElem:t,selectionRange:p},ga=!1,qt=a;qt!==null;)if(a=qt,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,qt=t;else for(;qt!==null;){a=qt;try{var Se=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(Se!==null){var Ae=Se.memoizedProps,tt=Se.memoizedState,we=a.stateNode,he=we.getSnapshotBeforeUpdate(a.elementType===a.type?Ae:ns(a.type,Ae),tt);we.__reactInternalSnapshotBeforeUpdate=he}break;case 3:var _e=a.stateNode.containerInfo;_e.nodeType===1?_e.textContent="":_e.nodeType===9&&_e.documentElement&&_e.removeChild(_e.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(Oe){Mr(a,a.return,Oe)}if(t=a.sibling,t!==null){t.return=a.return,qt=t;break}qt=a.return}return Se=xo,xo=!1,Se}function su(t,a,p){var v=a.updateQueue;if(v=v!==null?v.lastEffect:null,v!==null){var C=v=v.next;do{if((C.tag&t)===t){var E=C.destroy;C.destroy=void 0,E!==void 0&&yd(a,p,E)}C=C.next}while(C!==v)}}function vd(t,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var p=a=a.next;do{if((p.tag&t)===t){var v=p.create;p.destroy=v()}p=p.next}while(p!==a)}}function kh(t){var a=t.ref;if(a!==null){var p=t.stateNode;switch(t.tag){case 5:t=p;break;default:t=p}typeof a=="function"?a(t):a.current=t}}function Wp(t){var a=t.alternate;a!==null&&(t.alternate=null,Wp(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&(delete a[h],delete a[y],delete a[M],delete a[k],delete a[R])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Gp(t){return t.tag===5||t.tag===3||t.tag===4}function Yp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Gp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ph(t,a,p){var v=t.tag;if(v===5||v===6)t=t.stateNode,a?p.nodeType===8?p.parentNode.insertBefore(t,a):p.insertBefore(t,a):(p.nodeType===8?(a=p.parentNode,a.insertBefore(t,p)):(a=p,a.appendChild(t)),p=p._reactRootContainer,p!=null||a.onclick!==null||(a.onclick=Da));else if(v!==4&&(t=t.child,t!==null))for(Ph(t,a,p),t=t.sibling;t!==null;)Ph(t,a,p),t=t.sibling}function Dh(t,a,p){var v=t.tag;if(v===5||v===6)t=t.stateNode,a?p.insertBefore(t,a):p.appendChild(t);else if(v!==4&&(t=t.child,t!==null))for(Dh(t,a,p),t=t.sibling;t!==null;)Dh(t,a,p),t=t.sibling}var bi=null,Os=!1;function zs(t,a,p){for(p=p.child;p!==null;)ql(t,a,p),p=p.sibling}function ql(t,a,p){if(Bn&&typeof Bn.onCommitFiberUnmount=="function")try{Bn.onCommitFiberUnmount(er,p)}catch{}switch(p.tag){case 5:yn||Zl(p,a);case 6:var v=bi,C=Os;bi=null,zs(t,a,p),bi=v,Os=C,bi!==null&&(Os?(t=bi,p=p.stateNode,t.nodeType===8?t.parentNode.removeChild(p):t.removeChild(p)):bi.removeChild(p.stateNode));break;case 18:bi!==null&&(Os?(t=bi,p=p.stateNode,t.nodeType===8?oo(t.parentNode,p):t.nodeType===1&&oo(t,p),ma(t)):oo(bi,p.stateNode));break;case 4:v=bi,C=Os,bi=p.stateNode.containerInfo,Os=!0,zs(t,a,p),bi=v,Os=C;break;case 0:case 11:case 14:case 15:if(!yn&&(v=p.updateQueue,v!==null&&(v=v.lastEffect,v!==null))){C=v=v.next;do{var E=C,I=E.destroy;E=E.tag,I!==void 0&&((E&2)!==0||(E&4)!==0)&&yd(p,a,I),C=C.next}while(C!==v)}zs(t,a,p);break;case 1:if(!yn&&(Zl(p,a),v=p.stateNode,typeof v.componentWillUnmount=="function"))try{v.props=p.memoizedProps,v.state=p.memoizedState,v.componentWillUnmount()}catch(j){Mr(p,a,j)}zs(t,a,p);break;case 21:zs(t,a,p);break;case 22:p.mode&1?(yn=(v=yn)||p.memoizedState!==null,zs(t,a,p),yn=v):zs(t,a,p);break;default:zs(t,a,p)}}function Ih(t){var a=t.updateQueue;if(a!==null){t.updateQueue=null;var p=t.stateNode;p===null&&(p=t.stateNode=new Ba),a.forEach(function(v){var C=z0.bind(null,t,v);p.has(v)||(p.add(v),v.then(C,C))})}}function Fs(t,a){var p=a.deletions;if(p!==null)for(var v=0;v<p.length;v++){var C=p[v];try{var E=t,I=a,j=I;e:for(;j!==null;){switch(j.tag){case 5:bi=j.stateNode,Os=!1;break e;case 3:bi=j.stateNode.containerInfo,Os=!0;break e;case 4:bi=j.stateNode.containerInfo,Os=!0;break e}j=j.return}if(bi===null)throw Error(i(160));ql(E,I,C),bi=null,Os=!1;var z=C.alternate;z!==null&&(z.return=null),C.return=null}catch(X){Mr(C,a,X)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)Xp(a,t),a=a.sibling}function Xp(t,a){var p=t.alternate,v=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Fs(a,t),_o(t),v&4){try{su(3,t,t.return),vd(3,t)}catch(Ae){Mr(t,t.return,Ae)}try{su(5,t,t.return)}catch(Ae){Mr(t,t.return,Ae)}}break;case 1:Fs(a,t),_o(t),v&512&&p!==null&&Zl(p,p.return);break;case 5:if(Fs(a,t),_o(t),v&512&&p!==null&&Zl(p,p.return),t.flags&32){var C=t.stateNode;try{cn(C,"")}catch(Ae){Mr(t,t.return,Ae)}}if(v&4&&(C=t.stateNode,C!=null)){var E=t.memoizedProps,I=p!==null?p.memoizedProps:E,j=t.type,z=t.updateQueue;if(t.updateQueue=null,z!==null)try{j==="input"&&E.type==="radio"&&E.name!=null&&Mn(C,E),$t(j,I);var X=$t(j,E);for(I=0;I<z.length;I+=2){var ee=z[I],ce=z[I+1];ee==="style"?ct(C,ce):ee==="dangerouslySetInnerHTML"?ln(C,ce):ee==="children"?cn(C,ce):oe(C,ee,ce,X)}switch(j){case"input":jn(C,E);break;case"textarea":yt(C,E);break;case"select":var ge=C._wrapperState.wasMultiple;C._wrapperState.wasMultiple=!!E.multiple;var me=E.value;me!=null?Nn(C,!!E.multiple,me,!1):ge!==!!E.multiple&&(E.defaultValue!=null?Nn(C,!!E.multiple,E.defaultValue,!0):Nn(C,!!E.multiple,E.multiple?[]:"",!1))}C[y]=E}catch(Ae){Mr(t,t.return,Ae)}}break;case 6:if(Fs(a,t),_o(t),v&4){if(t.stateNode===null)throw Error(i(162));C=t.stateNode,E=t.memoizedProps;try{C.nodeValue=E}catch(Ae){Mr(t,t.return,Ae)}}break;case 3:if(Fs(a,t),_o(t),v&4&&p!==null&&p.memoizedState.isDehydrated)try{ma(a.containerInfo)}catch(Ae){Mr(t,t.return,Ae)}break;case 4:Fs(a,t),_o(t);break;case 13:Fs(a,t),_o(t),C=t.child,C.flags&8192&&(E=C.memoizedState!==null,C.stateNode.isHidden=E,!E||C.alternate!==null&&C.alternate.memoizedState!==null||(_d=Ct())),v&4&&Ih(t);break;case 22:if(ee=p!==null&&p.memoizedState!==null,t.mode&1?(yn=(X=yn)||ee,Fs(a,t),yn=X):Fs(a,t),_o(t),v&8192){if(X=t.memoizedState!==null,(t.stateNode.isHidden=X)&&!ee&&(t.mode&1)!==0)for(qt=t,ee=t.child;ee!==null;){for(ce=qt=ee;qt!==null;){switch(ge=qt,me=ge.child,ge.tag){case 0:case 11:case 14:case 15:su(4,ge,ge.return);break;case 1:Zl(ge,ge.return);var Se=ge.stateNode;if(typeof Se.componentWillUnmount=="function"){v=ge,p=ge.return;try{a=v,Se.props=a.memoizedProps,Se.state=a.memoizedState,Se.componentWillUnmount()}catch(Ae){Mr(v,p,Ae)}}break;case 5:Zl(ge,ge.return);break;case 22:if(ge.memoizedState!==null){i1(ce);continue}}me!==null?(me.return=ge,qt=me):i1(ce)}ee=ee.sibling}e:for(ee=null,ce=t;;){if(ce.tag===5){if(ee===null){ee=ce;try{C=ce.stateNode,X?(E=C.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):(j=ce.stateNode,z=ce.memoizedProps.style,I=z!=null&&z.hasOwnProperty("display")?z.display:null,j.style.display=Cn("display",I))}catch(Ae){Mr(t,t.return,Ae)}}}else if(ce.tag===6){if(ee===null)try{ce.stateNode.nodeValue=X?"":ce.memoizedProps}catch(Ae){Mr(t,t.return,Ae)}}else if((ce.tag!==22&&ce.tag!==23||ce.memoizedState===null||ce===t)&&ce.child!==null){ce.child.return=ce,ce=ce.child;continue}if(ce===t)break e;for(;ce.sibling===null;){if(ce.return===null||ce.return===t)break e;ee===ce&&(ee=null),ce=ce.return}ee===ce&&(ee=null),ce.sibling.return=ce.return,ce=ce.sibling}}break;case 19:Fs(a,t),_o(t),v&4&&Ih(t);break;case 21:break;default:Fs(a,t),_o(t)}}function _o(t){var a=t.flags;if(a&2){try{e:{for(var p=t.return;p!==null;){if(Gp(p)){var v=p;break e}p=p.return}throw Error(i(160))}switch(v.tag){case 5:var C=v.stateNode;v.flags&32&&(cn(C,""),v.flags&=-33);var E=Yp(t);Dh(t,E,C);break;case 3:case 4:var I=v.stateNode.containerInfo,j=Yp(t);Ph(t,j,I);break;default:throw Error(i(161))}}catch(z){Mr(t,t.return,z)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function Kp(t,a,p){qt=t,xd(t)}function xd(t,a,p){for(var v=(t.mode&1)!==0;qt!==null;){var C=qt,E=C.child;if(C.tag===22&&v){var I=C.memoizedState!==null||r1;if(!I){var j=C.alternate,z=j!==null&&j.memoizedState!==null||yn;j=r1;var X=yn;if(r1=I,(yn=z)&&!X)for(qt=C;qt!==null;)I=qt,z=I.child,I.tag===22&&I.memoizedState!==null?ou(C):z!==null?(z.return=I,qt=z):ou(C);for(;E!==null;)qt=E,xd(E),E=E.sibling;qt=C,r1=j,yn=X}Nh(t)}else(C.subtreeFlags&8772)!==0&&E!==null?(E.return=C,qt=E):Nh(t)}}function Nh(t){for(;qt!==null;){var a=qt;if((a.flags&8772)!==0){var p=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:yn||vd(5,a);break;case 1:var v=a.stateNode;if(a.flags&4&&!yn)if(p===null)v.componentDidMount();else{var C=a.elementType===a.type?p.memoizedProps:ns(a.type,p.memoizedProps);v.componentDidUpdate(C,p.memoizedState,v.__reactInternalSnapshotBeforeUpdate)}var E=a.updateQueue;E!==null&&lh(a,E,v);break;case 3:var I=a.updateQueue;if(I!==null){if(p=null,a.child!==null)switch(a.child.tag){case 5:p=a.child.stateNode;break;case 1:p=a.child.stateNode}lh(a,I,p)}break;case 5:var j=a.stateNode;if(p===null&&a.flags&4){p=j;var z=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":z.autoFocus&&p.focus();break;case"img":z.src&&(p.src=z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var X=a.alternate;if(X!==null){var ee=X.memoizedState;if(ee!==null){var ce=ee.dehydrated;ce!==null&&ma(ce)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}yn||a.flags&512&&kh(a)}catch(ge){Mr(a,a.return,ge)}}if(a===t){qt=null;break}if(p=a.sibling,p!==null){p.return=a.return,qt=p;break}qt=a.return}}function i1(t){for(;qt!==null;){var a=qt;if(a===t){qt=null;break}var p=a.sibling;if(p!==null){p.return=a.return,qt=p;break}qt=a.return}}function ou(t){for(;qt!==null;){var a=qt;try{switch(a.tag){case 0:case 11:case 15:var p=a.return;try{vd(4,a)}catch(z){Mr(a,p,z)}break;case 1:var v=a.stateNode;if(typeof v.componentDidMount=="function"){var C=a.return;try{v.componentDidMount()}catch(z){Mr(a,C,z)}}var E=a.return;try{kh(a)}catch(z){Mr(a,E,z)}break;case 5:var I=a.return;try{kh(a)}catch(z){Mr(a,I,z)}}}catch(z){Mr(a,a.return,z)}if(a===t){qt=null;break}var j=a.sibling;if(j!==null){j.return=a.return,qt=j;break}qt=a.return}}var au=Math.ceil,Wl=Ce.ReactCurrentDispatcher,lu=Ce.ReactCurrentOwner,vs=Ce.ReactCurrentBatchConfig,Hn=0,Qr=null,Ur=null,hi=0,Vi=0,$a=se(0),Fr=0,s1=null,Gl=0,o1=0,Bs=0,cu=null,Br=null,_d=0,Yl=1/0,wo=null,a1=!1,Rh=null,Va=null,l1=!1,ra=null,c1=0,Ha=0,wd=null,Xl=-1,Kl=0;function pi(){return(Hn&6)!==0?Ct():Xl!==-1?Xl:Xl=Ct()}function Ua(t){return(t.mode&1)===0?1:(Hn&2)!==0&&hi!==0?hi&-hi:Fl.transition!==null?(Kl===0&&(Kl=Eu()),Kl):(t=$n,t!==0||(t=window.event,t=t===void 0?16:Sc(t.type)),t)}function $s(t,a,p,v){if(50<Ha)throw Ha=0,wd=null,Error(i(185));Yi(t,p,v),((Hn&2)===0||t!==Qr)&&(t===Qr&&((Hn&2)===0&&(o1|=p),Fr===4&&bo(t,hi)),Hi(t,v),p===1&&Hn===0&&(a.mode&1)===0&&(Yl=Ct()+500,un&&En()))}function Hi(t,a){var p=t.callbackNode;Mu(t,a);var v=hl(t,t===Qr?hi:0);if(v===0)p!==null&&_t(p),t.callbackNode=null,t.callbackPriority=0;else if(a=v&-v,t.callbackPriority!==a){if(p!=null&&_t(p),a===1)t.tag===0?Gn(ef.bind(null,t)):Kt(ef.bind(null,t)),jr(function(){(Hn&6)===0&&En()}),p=null;else{switch(fl(v)){case 1:p=Qt;break;case 4:p=Xt;break;case 16:p=sn;break;case 536870912:p=mr;break;default:p=sn}p=Oh(p,Qp.bind(null,t))}t.callbackPriority=a,t.callbackNode=p}}function Qp(t,a){if(Xl=-1,Kl=0,(Hn&6)!==0)throw Error(i(327));var p=t.callbackNode;if(tc()&&t.callbackNode!==p)return null;var v=hl(t,t===Qr?hi:0);if(v===0)return null;if((v&30)!==0||(v&t.expiredLanes)!==0||a)a=du(t,v);else{a=v;var C=Hn;Hn|=2;var E=nf();(Qr!==t||hi!==a)&&(wo=null,Yl=Ct()+500,Ql(t,a));do try{Ah();break}catch(j){tf(t,j)}while(!0);sh(),Wl.current=E,Hn=C,Ur!==null?a=0:(Qr=null,hi=0,a=Fr)}if(a!==0){if(a===2&&(C=pl(t),C!==0&&(v=C,a=Za(t,C))),a===1)throw p=s1,Ql(t,0),bo(t,v),Hi(t,Ct()),p;if(a===6)bo(t,v);else{if(C=t.current.alternate,(v&30)===0&&!Jp(C)&&(a=du(t,v),a===2&&(E=pl(t),E!==0&&(v=E,a=Za(t,E))),a===1))throw p=s1,Ql(t,0),bo(t,v),Hi(t,Ct()),p;switch(t.finishedWork=C,t.finishedLanes=v,a){case 0:case 1:throw Error(i(345));case 2:ec(t,Br,wo);break;case 3:if(bo(t,v),(v&130023424)===v&&(a=_d+500-Ct(),10<a)){if(hl(t,0)!==0)break;if(C=t.suspendedLanes,(C&v)!==v){pi(),t.pingedLanes|=t.suspendedLanes&C;break}t.timeoutHandle=Zu(ec.bind(null,t,Br,wo),a);break}ec(t,Br,wo);break;case 4:if(bo(t,v),(v&4194240)===v)break;for(a=t.eventTimes,C=-1;0<v;){var I=31-vi(v);E=1<<I,I=a[I],I>C&&(C=I),v&=~E}if(v=C,v=Ct()-v,v=(120>v?120:480>v?480:1080>v?1080:1920>v?1920:3e3>v?3e3:4320>v?4320:1960*au(v/1960))-v,10<v){t.timeoutHandle=Zu(ec.bind(null,t,Br,wo),v);break}ec(t,Br,wo);break;case 5:ec(t,Br,wo);break;default:throw Error(i(329))}}}return Hi(t,Ct()),t.callbackNode===p?Qp.bind(null,t):null}function Za(t,a){var p=cu;return t.current.memoizedState.isDehydrated&&(Ql(t,a).flags|=256),t=du(t,a),t!==2&&(a=Br,Br=p,a!==null&&u1(a)),t}function u1(t){Br===null?Br=t:Br.push.apply(Br,t)}function Jp(t){for(var a=t;;){if(a.flags&16384){var p=a.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var v=0;v<p.length;v++){var C=p[v],E=C.getSnapshot;C=C.value;try{if(!zi(E(),C))return!1}catch{return!1}}}if(p=a.child,a.subtreeFlags&16384&&p!==null)p.return=a,a=p;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function bo(t,a){for(a&=~Bs,a&=~o1,t.suspendedLanes|=a,t.pingedLanes&=~a,t=t.expirationTimes;0<a;){var p=31-vi(a),v=1<<p;t[p]=-1,a&=~v}}function ef(t){if((Hn&6)!==0)throw Error(i(327));tc();var a=hl(t,0);if((a&1)===0)return Hi(t,Ct()),null;var p=du(t,a);if(t.tag!==0&&p===2){var v=pl(t);v!==0&&(a=v,p=Za(t,v))}if(p===1)throw p=s1,Ql(t,0),bo(t,a),Hi(t,Ct()),p;if(p===6)throw Error(i(345));return t.finishedWork=t.current.alternate,t.finishedLanes=a,ec(t,Br,wo),Hi(t,Ct()),null}function Co(t,a){var p=Hn;Hn|=1;try{return t(a)}finally{Hn=p,Hn===0&&(Yl=Ct()+500,un&&En())}}function qa(t){ra!==null&&ra.tag===0&&(Hn&6)===0&&tc();var a=Hn;Hn|=1;var p=vs.transition,v=$n;try{if(vs.transition=null,$n=1,t)return t()}finally{$n=v,vs.transition=p,Hn=a,(Hn&6)===0&&En()}}function bd(){Vi=$a.current,ie($a)}function Ql(t,a){t.finishedWork=null,t.finishedLanes=0;var p=t.timeoutHandle;if(p!==-1&&(t.timeoutHandle=-1,jl(p)),Ur!==null)for(p=Ur.return;p!==null;){var v=p;switch(In(v),v.tag){case 1:v=v.type.childContextTypes,v!=null&&rt();break;case 3:Zc(),ie(ue),ie(Ie),$l();break;case 5:ui(v);break;case 4:Zc();break;case 13:ie(Cr);break;case 19:ie(Cr);break;case 10:td(v.type._context);break;case 22:case 23:bd()}p=p.return}if(Qr=t,Ur=t=ia(t.current,null),hi=Vi=a,Fr=0,s1=null,Bs=o1=Gl=0,Br=cu=null,ts!==null){for(a=0;a<ts.length;a++)if(p=ts[a],v=p.interleaved,v!==null){p.interleaved=null;var C=v.next,E=p.pending;if(E!==null){var I=E.next;E.next=C,v.next=I}p.pending=v}ts=null}return t}function tf(t,a){do{var p=Ur;try{if(sh(),sd.current=eu,Gu){for(var v=vr.memoizedState;v!==null;){var C=v.queue;C!==null&&(C.pending=null),v=v.next}Gu=!1}if(Oa=0,Kr=Hr=vr=null,Yu=!1,Vl=0,lu.current=null,p===null||p.return===null){Fr=1,s1=a,Ur=null;break}e:{var E=t,I=p.return,j=p,z=a;if(a=hi,j.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){var X=z,ee=j,ce=ee.tag;if((ee.mode&1)===0&&(ce===0||ce===11||ce===15)){var ge=ee.alternate;ge?(ee.updateQueue=ge.updateQueue,ee.memoizedState=ge.memoizedState,ee.lanes=ge.lanes):(ee.updateQueue=null,ee.memoizedState=null)}var me=wh(I);if(me!==null){me.flags&=-257,jp(me,I,j,E,a),me.mode&1&&_h(E,X,a),a=me,z=X;var Se=a.updateQueue;if(Se===null){var Ae=new Set;Ae.add(z),a.updateQueue=Ae}else Se.add(z);break e}else{if((a&1)===0){_h(E,X,a),uu();break e}z=Error(i(426))}}else if(vn&&j.mode&1){var tt=wh(I);if(tt!==null){(tt.flags&65536)===0&&(tt.flags|=256),jp(tt,I,j,E,a),Ra(tu(z,j));break e}}E=z=tu(z,j),Fr!==4&&(Fr=2),cu===null?cu=[E]:cu.push(E),E=I;do{switch(E.tag){case 3:E.flags|=65536,a&=-a,E.lanes|=a;var we=Rp(E,z,a);rd(E,we);break e;case 1:j=z;var he=E.type,_e=E.stateNode;if((E.flags&128)===0&&(typeof he.getDerivedStateFromError=="function"||_e!==null&&typeof _e.componentDidCatch=="function"&&(Va===null||!Va.has(_e)))){E.flags|=65536,a&=-a,E.lanes|=a;var Oe=Ap(E,j,a);rd(E,Oe);break e}}E=E.return}while(E!==null)}Jl(p)}catch(Ye){a=Ye,Ur===p&&p!==null&&(Ur=p=p.return);continue}break}while(!0)}function nf(){var t=Wl.current;return Wl.current=eu,t===null?eu:t}function uu(){(Fr===0||Fr===3||Fr===2)&&(Fr=4),Qr===null||(Gl&268435455)===0&&(o1&268435455)===0||bo(Qr,hi)}function du(t,a){var p=Hn;Hn|=2;var v=nf();(Qr!==t||hi!==a)&&(wo=null,Ql(t,a));do try{A0();break}catch(C){tf(t,C)}while(!0);if(sh(),Hn=p,Wl.current=v,Ur!==null)throw Error(i(261));return Qr=null,hi=0,Fr}function A0(){for(;Ur!==null;)Cd(Ur)}function Ah(){for(;Ur!==null&&!bt();)Cd(Ur)}function Cd(t){var a=sf(t.alternate,t,Vi);t.memoizedProps=t.pendingProps,a===null?Jl(t):Ur=a,lu.current=null}function Jl(t){var a=t;do{var p=a.alternate;if(t=a.return,(a.flags&32768)===0){if(p=Th(p,a,Vi),p!==null){Ur=p;return}}else{if(p=qp(p,a),p!==null){p.flags&=32767,Ur=p;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Fr=6,Ur=null;return}}if(a=a.sibling,a!==null){Ur=a;return}Ur=a=t}while(a!==null);Fr===0&&(Fr=5)}function ec(t,a,p){var v=$n,C=vs.transition;try{vs.transition=null,$n=1,jh(t,a,p,v)}finally{vs.transition=C,$n=v}return null}function jh(t,a,p,v){do tc();while(ra!==null);if((Hn&6)!==0)throw Error(i(327));p=t.finishedWork;var C=t.finishedLanes;if(p===null)return null;if(t.finishedWork=null,t.finishedLanes=0,p===t.current)throw Error(i(177));t.callbackNode=null,t.callbackPriority=0;var E=p.lanes|p.childLanes;if(_c(t,E),t===Qr&&(Ur=Qr=null,hi=0),(p.subtreeFlags&2064)===0&&(p.flags&2064)===0||l1||(l1=!0,Oh(sn,function(){return tc(),null})),E=(p.flags&15990)!==0,(p.subtreeFlags&15990)!==0||E){E=vs.transition,vs.transition=null;var I=$n;$n=1;var j=Hn;Hn|=4,lu.current=null,iu(t,p),Xp(p,t),Wo(Ns),ga=!!Pr,Ns=Pr=null,t.current=p,Kp(p),zt(),Hn=j,$n=I,vs.transition=E}else t.current=p;if(l1&&(l1=!1,ra=t,c1=C),E=t.pendingLanes,E===0&&(Va=null),kr(p.stateNode),Hi(t,Ct()),a!==null)for(v=t.onRecoverableError,p=0;p<a.length;p++)C=a[p],v(C.value,{componentStack:C.stack,digest:C.digest});if(a1)throw a1=!1,t=Rh,Rh=null,t;return(c1&1)!==0&&t.tag!==0&&tc(),E=t.pendingLanes,(E&1)!==0?t===wd?Ha++:(Ha=0,wd=t):Ha=0,En(),null}function tc(){if(ra!==null){var t=fl(c1),a=vs.transition,p=$n;try{if(vs.transition=null,$n=16>t?16:t,ra===null)var v=!1;else{if(t=ra,ra=null,c1=0,(Hn&6)!==0)throw Error(i(331));var C=Hn;for(Hn|=4,qt=t.current;qt!==null;){var E=qt,I=E.child;if((qt.flags&16)!==0){var j=E.deletions;if(j!==null){for(var z=0;z<j.length;z++){var X=j[z];for(qt=X;qt!==null;){var ee=qt;switch(ee.tag){case 0:case 11:case 15:su(8,ee,E)}var ce=ee.child;if(ce!==null)ce.return=ee,qt=ce;else for(;qt!==null;){ee=qt;var ge=ee.sibling,me=ee.return;if(Wp(ee),ee===X){qt=null;break}if(ge!==null){ge.return=me,qt=ge;break}qt=me}}}var Se=E.alternate;if(Se!==null){var Ae=Se.child;if(Ae!==null){Se.child=null;do{var tt=Ae.sibling;Ae.sibling=null,Ae=tt}while(Ae!==null)}}qt=E}}if((E.subtreeFlags&2064)!==0&&I!==null)I.return=E,qt=I;else e:for(;qt!==null;){if(E=qt,(E.flags&2048)!==0)switch(E.tag){case 0:case 11:case 15:su(9,E,E.return)}var we=E.sibling;if(we!==null){we.return=E.return,qt=we;break e}qt=E.return}}var he=t.current;for(qt=he;qt!==null;){I=qt;var _e=I.child;if((I.subtreeFlags&2064)!==0&&_e!==null)_e.return=I,qt=_e;else e:for(I=he;qt!==null;){if(j=qt,(j.flags&2048)!==0)try{switch(j.tag){case 0:case 11:case 15:vd(9,j)}}catch(Ye){Mr(j,j.return,Ye)}if(j===I){qt=null;break e}var Oe=j.sibling;if(Oe!==null){Oe.return=j.return,qt=Oe;break e}qt=j.return}}if(Hn=C,En(),Bn&&typeof Bn.onPostCommitFiberRoot=="function")try{Bn.onPostCommitFiberRoot(er,t)}catch{}v=!0}return v}finally{$n=p,vs.transition=a}}return!1}function d1(t,a,p){a=tu(p,a),a=Rp(t,a,1),t=po(t,a,1),a=pi(),t!==null&&(Yi(t,1,a),Hi(t,a))}function Mr(t,a,p){if(t.tag===3)d1(t,t,p);else for(;a!==null;){if(a.tag===3){d1(a,t,p);break}else if(a.tag===1){var v=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Va===null||!Va.has(v))){t=tu(p,t),t=Ap(a,t,1),a=po(a,t,1),t=pi(),a!==null&&(Yi(a,1,t),Hi(a,t));break}}a=a.return}}function j0(t,a,p){var v=t.pingCache;v!==null&&v.delete(a),a=pi(),t.pingedLanes|=t.suspendedLanes&p,Qr===t&&(hi&p)===p&&(Fr===4||Fr===3&&(hi&130023424)===hi&&500>Ct()-_d?Ql(t,0):Bs|=p),Hi(t,a)}function rf(t,a){a===0&&((t.mode&1)===0?a=1:(a=vc,vc<<=1,(vc&130023424)===0&&(vc=4194304)));var p=pi();t=js(t,a),t!==null&&(Yi(t,a,p),Hi(t,p))}function O0(t){var a=t.memoizedState,p=0;a!==null&&(p=a.retryLane),rf(t,p)}function z0(t,a){var p=0;switch(t.tag){case 13:var v=t.stateNode,C=t.memoizedState;C!==null&&(p=C.retryLane);break;case 19:v=t.stateNode;break;default:throw Error(i(314))}v!==null&&v.delete(a),rf(t,p)}var sf;sf=function(t,a,p){if(t!==null)if(t.memoizedProps!==a.pendingProps||ue.current)$i=!0;else{if((t.lanes&p)===0&&(a.flags&128)===0)return $i=!1,R0(t,a,p);$i=(t.flags&131072)!==0}else $i=!1,vn&&(a.flags&1048576)!==0&&ao(a,li,a.index);switch(a.lanes=0,a.tag){case 2:var v=a.type;n1(t,a),t=a.pendingProps;var C=ze(a,Ie.current);Aa(a,p),C=Di(null,a,v,t,C,p);var E=ad();return a.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Ge(v)?(E=!0,It(a)):E=!1,a.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,oh(a),C.updater=ud,a.stateNode=C,C._reactInternals=a,vo(a,v,t,p),a=fd(null,a,v,!0,E,p)):(a.tag=0,vn&&E&&Ia(a),Ii(null,a,C,p),a=a.child),a;case 16:v=a.elementType;e:{switch(n1(t,a),t=a.pendingProps,C=v._init,v=C(v._payload),a.type=v,C=a.tag=of(v),t=ns(v,t),C){case 0:a=bh(null,a,v,t,p);break e;case 1:a=ru(null,a,v,t,p);break e;case 11:a=hd(null,a,v,t,p);break e;case 14:a=nu(null,a,v,ns(v.type,t),p);break e}throw Error(i(306,v,""))}return a;case 0:return v=a.type,C=a.pendingProps,C=a.elementType===v?C:ns(v,C),bh(t,a,v,C,p);case 1:return v=a.type,C=a.pendingProps,C=a.elementType===v?C:ns(v,C),ru(t,a,v,C,p);case 3:e:{if(Fp(a),t===null)throw Error(i(387));v=a.pendingProps,E=a.memoizedState,C=E.element,ah(t,a),Wu(a,v,null,p);var I=a.memoizedState;if(v=I.element,E.isDehydrated)if(E={element:v,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},a.updateQueue.baseState=E,a.memoizedState=E,a.flags&256){C=tu(Error(i(423)),a),a=Bp(t,a,v,p,C);break e}else if(v!==C){C=tu(Error(i(424)),a),a=Bp(t,a,v,p,C);break e}else for(fn=Fi(a.stateNode.containerInfo.firstChild),Tn=a,vn=!0,yr=null,p=ho(a,null,v,p),a.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(ci(),v===C){a=ta(t,a,p);break e}Ii(t,a,v,p)}a=a.child}return a;case 5:return wi(a),t===null&&co(a),v=a.type,C=a.pendingProps,E=t!==null?t.memoizedProps:null,I=C.children,ai(v,C)?I=null:E!==null&&ai(v,E)&&(a.flags|=32),zp(t,a),Ii(t,a,I,p),a.child;case 6:return t===null&&co(a),null;case 13:return $p(t,a,p);case 4:return ch(a,a.stateNode.containerInfo),v=a.pendingProps,t===null?a.child=Rs(a,null,v,p):Ii(t,a,v,p),a.child;case 11:return v=a.type,C=a.pendingProps,C=a.elementType===v?C:ns(v,C),hd(t,a,v,C,p);case 7:return Ii(t,a,a.pendingProps,p),a.child;case 8:return Ii(t,a,a.pendingProps.children,p),a.child;case 12:return Ii(t,a,a.pendingProps.children,p),a.child;case 10:e:{if(v=a.type._context,C=a.pendingProps,E=a.memoizedProps,I=C.value,xe(Bi,v._currentValue),v._currentValue=I,E!==null)if(zi(E.value,I)){if(E.children===C.children&&!ue.current){a=ta(t,a,p);break e}}else for(E=a.child,E!==null&&(E.return=a);E!==null;){var j=E.dependencies;if(j!==null){I=E.child;for(var z=j.firstContext;z!==null;){if(z.context===v){if(E.tag===1){z=Jo(-1,p&-p),z.tag=2;var X=E.updateQueue;if(X!==null){X=X.shared;var ee=X.pending;ee===null?z.next=z:(z.next=ee.next,ee.next=z),X.pending=z}}E.lanes|=p,z=E.alternate,z!==null&&(z.lanes|=p),Ir(E.return,p,a),j.lanes|=p;break}z=z.next}}else if(E.tag===10)I=E.type===a.type?null:E.child;else if(E.tag===18){if(I=E.return,I===null)throw Error(i(341));I.lanes|=p,j=I.alternate,j!==null&&(j.lanes|=p),Ir(I,p,a),I=E.sibling}else I=E.child;if(I!==null)I.return=E;else for(I=E;I!==null;){if(I===a){I=null;break}if(E=I.sibling,E!==null){E.return=I.return,I=E;break}I=I.return}E=I}Ii(t,a,C.children,p),a=a.child}return a;case 9:return C=a.type,v=a.pendingProps.children,Aa(a,p),C=es(C),v=v(C),a.flags|=1,Ii(t,a,v,p),a.child;case 14:return v=a.type,C=ns(v,a.pendingProps),C=ns(v.type,C),nu(t,a,v,C,p);case 15:return pd(t,a,a.type,a.pendingProps,p);case 17:return v=a.type,C=a.pendingProps,C=a.elementType===v?C:ns(v,C),n1(t,a),a.tag=1,Ge(v)?(t=!0,It(a)):t=!1,Aa(a,p),Ip(a,v,C),vo(a,v,C,p),fd(null,a,v,!0,t,p);case 19:return Lh(t,a,p);case 22:return Op(t,a,p)}throw Error(i(156,a.tag))};function Oh(t,a){return $e(t,a)}function Er(t,a,p,v){this.tag=t,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fi(t,a,p,v){return new Er(t,a,p,v)}function Sd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function of(t){if(typeof t=="function")return Sd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Re)return 11;if(t===ht)return 14}return 2}function ia(t,a){var p=t.alternate;return p===null?(p=fi(t.tag,a,t.key,t.mode),p.elementType=t.elementType,p.type=t.type,p.stateNode=t.stateNode,p.alternate=t,t.alternate=p):(p.pendingProps=a,p.type=t.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=t.flags&14680064,p.childLanes=t.childLanes,p.lanes=t.lanes,p.child=t.child,p.memoizedProps=t.memoizedProps,p.memoizedState=t.memoizedState,p.updateQueue=t.updateQueue,a=t.dependencies,p.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},p.sibling=t.sibling,p.index=t.index,p.ref=t.ref,p}function h1(t,a,p,v,C,E){var I=2;if(v=t,typeof t=="function")Sd(t)&&(I=1);else if(typeof t=="string")I=5;else e:switch(t){case Fe:return Wa(p.children,C,E,a);case ye:I=8,C|=8;break;case Ke:return t=fi(12,p,a,C|2),t.elementType=Ke,t.lanes=E,t;case dt:return t=fi(13,p,a,C),t.elementType=dt,t.lanes=E,t;case Xe:return t=fi(19,p,a,C),t.elementType=Xe,t.lanes=E,t;case ke:return hu(p,C,E,a);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Me:I=10;break e;case qe:I=9;break e;case Re:I=11;break e;case ht:I=14;break e;case Pe:I=16,v=null;break e}throw Error(i(130,t==null?t:typeof t,""))}return a=fi(I,p,a,C),a.elementType=t,a.type=v,a.lanes=E,a}function Wa(t,a,p,v){return t=fi(7,t,v,a),t.lanes=p,t}function hu(t,a,p,v){return t=fi(22,t,v,a),t.elementType=ke,t.lanes=p,t.stateNode={isHidden:!1},t}function pu(t,a,p){return t=fi(6,t,null,a),t.lanes=p,t}function Md(t,a,p){return a=fi(4,t.children!==null?t.children:[],t.key,a),a.lanes=p,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}function zh(t,a,p,v,C){this.tag=a,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xc(0),this.expirationTimes=xc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xc(0),this.identifierPrefix=v,this.onRecoverableError=C,this.mutableSourceEagerHydrationData=null}function Ed(t,a,p,v,C,E,I,j,z){return t=new zh(t,a,p,j,z),a===1?(a=1,E===!0&&(a|=8)):a=0,E=fi(3,null,null,a),t.current=E,E.stateNode=t,E.memoizedState={element:v,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},oh(E),t}function rs(t,a,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ne,key:v==null?null:""+v,children:t,containerInfo:a,implementation:p}}function fu(t){if(!t)return De;t=t._reactInternals;e:{if(fe(t)!==t||t.tag!==1)throw Error(i(170));var a=t;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Ge(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(i(171))}if(t.tag===1){var p=t.type;if(Ge(p))return Qe(t,p,a)}return a}function Fh(t,a,p,v,C,E,I,j,z){return t=Ed(p,v,!0,t,C,E,I,j,z),t.context=fu(null),p=t.current,v=pi(),C=Ua(p),E=Jo(v,C),E.callback=a??null,po(p,E,C),t.current.lanes=C,Yi(t,C,v),Hi(t,v),t}function p1(t,a,p,v){var C=a.current,E=pi(),I=Ua(C);return p=fu(p),a.context===null?a.context=p:a.pendingContext=p,a=Jo(E,I),a.payload={element:t},v=v===void 0?null:v,v!==null&&(a.callback=v),t=po(C,a,I),t!==null&&($s(t,C,I,E),nd(t,C,I)),I}function f1(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Bh(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var p=t.retryLane;t.retryLane=p!==0&&p<a?p:a}}function Ld(t,a){Bh(t,a),(t=t.alternate)&&Bh(t,a)}function af(){return null}var lf=typeof reportError=="function"?reportError:function(t){console.error(t)};function m1(t){this._internalRoot=t}nc.prototype.render=m1.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(i(409));p1(t,a,null,null)},nc.prototype.unmount=m1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;qa(function(){p1(null,t,null,null)}),a[w]=null}};function nc(t){this._internalRoot=t}nc.prototype.unstable_scheduleHydration=function(t){if(t){var a=pa();t={blockedOn:null,target:t,priority:a};for(var p=0;p<Gs.length&&a!==0&&a<Gs[p].priority;p++);Gs.splice(p,0,t),p===0&&ku(t)}};function rc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function mu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function cf(){}function l(t,a,p,v,C){if(C){if(typeof v=="function"){var E=v;v=function(){var X=f1(I);E.call(X)}}var I=Fh(a,v,t,0,null,!1,!1,"",cf);return t._reactRootContainer=I,t[w]=I.current,io(t.nodeType===8?t.parentNode:t),qa(),I}for(;C=t.lastChild;)t.removeChild(C);if(typeof v=="function"){var j=v;v=function(){var X=f1(z);j.call(X)}}var z=Ed(t,0,!1,null,null,!1,!1,"",cf);return t._reactRootContainer=z,t[w]=z.current,io(t.nodeType===8?t.parentNode:t),qa(function(){p1(a,z,p,v)}),z}function n(t,a,p,v,C){var E=p._reactRootContainer;if(E){var I=E;if(typeof C=="function"){var j=C;C=function(){var z=f1(I);j.call(z)}}p1(a,I,t,C)}else I=l(p,a,t,C,v);return f1(I)}ml=function(t){switch(t.tag){case 3:var a=t.stateNode;if(a.current.memoizedState.isDehydrated){var p=Oo(a.pendingLanes);p!==0&&(Ws(a,p|1),Hi(a,Ct()),(Hn&6)===0&&(Yl=Ct()+500,En()))}break;case 13:qa(function(){var v=js(t,1);if(v!==null){var C=pi();$s(v,t,1,C)}}),Ld(t,1)}},zo=function(t){if(t.tag===13){var a=js(t,134217728);if(a!==null){var p=pi();$s(a,t,134217728,p)}Ld(t,134217728)}},gl=function(t){if(t.tag===13){var a=Ua(t),p=js(t,a);if(p!==null){var v=pi();$s(p,t,a,v)}Ld(t,a)}},pa=function(){return $n},dr=function(t,a){var p=$n;try{return $n=t,a()}finally{$n=p}},Fn=function(t,a,p){switch(a){case"input":if(jn(t,p),a=p.name,p.type==="radio"&&a!=null){for(p=t;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<p.length;a++){var v=p[a];if(v!==t&&v.form===t.form){var C=Y(v);if(!C)throw Error(i(90));Bt(v),jn(v,C)}}}break;case"textarea":yt(t,p);break;case"select":a=p.value,a!=null&&Nn(t,!!p.multiple,a,!1)}},Ft=Co,Vt=qa;var u={usingClientEntryPoint:!1,Events:[F,Z,Y,kt,en,Co]},g={findFiberByHostInstance:A,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},b={bundleType:g.bundleType,version:g.version,rendererPackageName:g.rendererPackageName,rendererConfig:g.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ce.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ue(t),t===null?null:t.stateNode},findFiberByHostInstance:g.findFiberByHostInstance||af,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var S=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!S.isDisabled&&S.supportsFiber)try{er=S.inject(b),Bn=S}catch{}}return _s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u,_s.createPortal=function(t,a){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rc(a))throw Error(i(200));return rs(t,a,null,p)},_s.createRoot=function(t,a){if(!rc(t))throw Error(i(299));var p=!1,v="",C=lf;return a!=null&&(a.unstable_strictMode===!0&&(p=!0),a.identifierPrefix!==void 0&&(v=a.identifierPrefix),a.onRecoverableError!==void 0&&(C=a.onRecoverableError)),a=Ed(t,1,!1,null,null,p,!1,v,C),t[w]=a.current,io(t.nodeType===8?t.parentNode:t),new m1(a)},_s.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=Ue(a),t=t===null?null:t.stateNode,t},_s.flushSync=function(t){return qa(t)},_s.hydrate=function(t,a,p){if(!mu(a))throw Error(i(200));return n(null,t,a,!0,p)},_s.hydrateRoot=function(t,a,p){if(!rc(t))throw Error(i(405));var v=p!=null&&p.hydratedSources||null,C=!1,E="",I=lf;if(p!=null&&(p.unstable_strictMode===!0&&(C=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onRecoverableError!==void 0&&(I=p.onRecoverableError)),a=Fh(a,null,t,1,p??null,C,!1,E,I),t[w]=a.current,io(t),v)for(t=0;t<v.length;t++)p=v[t],C=p._getVersion,C=C(p._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[p,C]:a.mutableSourceEagerHydrationData.push(p,C);return new nc(a)},_s.render=function(t,a,p){if(!mu(a))throw Error(i(200));return n(null,t,a,!1,p)},_s.unmountComponentAtNode=function(t){if(!mu(t))throw Error(i(40));return t._reactRootContainer?(qa(function(){n(null,null,t,!1,function(){t._reactRootContainer=null,t[w]=null})}),!0):!1},_s.unstable_batchedUpdates=Co,_s.unstable_renderSubtreeIntoContainer=function(t,a,p,v){if(!mu(p))throw Error(i(200));if(t==null||t._reactInternals===void 0)throw Error(i(38));return n(t,a,p,!1,v)},_s.version="18.3.1-next-f1338f8080-20240426",_s}var G2;function c5(){if(G2)return Z0.exports;G2=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(o){console.error(o)}}return e(),Z0.exports=k4(),Z0.exports}var Y2;function P4(){if(Y2)return df;Y2=1;var e=c5();return df.createRoot=e.createRoot,df.hydrateRoot=e.hydrateRoot,df}var D4=P4();const I4=gc(D4),N4="modulepreload",R4=function(e){return"/golden_path/"+e},X2={},h2=function(o,i,r){let d=Promise.resolve();if(i&&i.length>0){let x=function(T){return Promise.all(T.map(P=>Promise.resolve(P).then(D=>({status:"fulfilled",value:D}),D=>({status:"rejected",reason:D}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),L=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));d=x(i.map(T=>{if(T=R4(T),T in X2)return;X2[T]=!0;const P=T.endsWith(".css"),D=P?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${T}"]${D}`))return;const N=document.createElement("link");if(N.rel=P?"stylesheet":N4,P||(N.as="script"),N.crossOrigin="",N.href=T,L&&N.setAttribute("nonce",L),document.head.appendChild(N),P)return new Promise(($,U)=>{N.addEventListener("load",$),N.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${T}`)))})}))}function m(x){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=x,window.dispatchEvent(c),!c.defaultPrevented)throw x}return d.then(x=>{for(const c of x||[])c.status==="rejected"&&m(c.reason);return o().catch(m)})};var Nm=function(e,o){return Nm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var d in r)Object.prototype.hasOwnProperty.call(r,d)&&(i[d]=r[d])},Nm(e,o)};function da(e,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");Nm(e,o);function i(){this.constructor=e}e.prototype=o===null?Object.create(o):(i.prototype=o.prototype,new i)}var tn=function(){return tn=Object.assign||function(o){for(var i,r=1,d=arguments.length;r<d;r++){i=arguments[r];for(var m in i)Object.prototype.hasOwnProperty.call(i,m)&&(o[m]=i[m])}return o},tn.apply(this,arguments)};function jd(e,o){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&o.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,r=Object.getOwnPropertySymbols(e);d<r.length;d++)o.indexOf(r[d])<0&&Object.prototype.propertyIsEnumerable.call(e,r[d])&&(i[r[d]]=e[r[d]]);return i}function Ja(e,o,i){if(i||arguments.length===2)for(var r=0,d=o.length,m;r<d;r++)(m||!(r in o))&&(m||(m=Array.prototype.slice.call(o,0,r)),m[r]=o[r]);return e.concat(m||Array.prototype.slice.call(o))}function Xa(e,o){var i=o&&o.cache?o.cache:$4,r=o&&o.serializer?o.serializer:F4,d=o&&o.strategy?o.strategy:O4;return d(e,{cache:i,serializer:r})}function A4(e){return e==null||typeof e=="number"||typeof e=="boolean"}function j4(e,o,i,r){var d=A4(r)?r:i(r),m=o.get(d);return typeof m>"u"&&(m=e.call(this,r),o.set(d,m)),m}function u5(e,o,i){var r=Array.prototype.slice.call(arguments,3),d=i(r),m=o.get(d);return typeof m>"u"&&(m=e.apply(this,r),o.set(d,m)),m}function d5(e,o,i,r,d){return i.bind(o,e,r,d)}function O4(e,o){var i=e.length===1?j4:u5;return d5(e,this,i,o.cache.create(),o.serializer)}function z4(e,o){return d5(e,this,u5,o.cache.create(),o.serializer)}var F4=function(){return JSON.stringify(arguments)},B4=function(){function e(){this.cache=Object.create(null)}return e.prototype.get=function(o){return this.cache[o]},e.prototype.set=function(o,i){this.cache[o]=i},e}(),$4={create:function(){return new B4}},Ka={variadic:z4},Yn;(function(e){e[e.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",e[e.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",e[e.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",e[e.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",e[e.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",e[e.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",e[e.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",e[e.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",e[e.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",e[e.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",e[e.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",e[e.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",e[e.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",e[e.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",e[e.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",e[e.INVALID_TAG=23]="INVALID_TAG",e[e.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",e[e.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",e[e.UNCLOSED_TAG=27]="UNCLOSED_TAG"})(Yn||(Yn={}));var Rr;(function(e){e[e.literal=0]="literal",e[e.argument=1]="argument",e[e.number=2]="number",e[e.date=3]="date",e[e.time=4]="time",e[e.select=5]="select",e[e.plural=6]="plural",e[e.pound=7]="pound",e[e.tag=8]="tag"})(Rr||(Rr={}));var Od;(function(e){e[e.number=0]="number",e[e.dateTime=1]="dateTime"})(Od||(Od={}));function K2(e){return e.type===Rr.literal}function V4(e){return e.type===Rr.argument}function h5(e){return e.type===Rr.number}function p5(e){return e.type===Rr.date}function f5(e){return e.type===Rr.time}function m5(e){return e.type===Rr.select}function g5(e){return e.type===Rr.plural}function H4(e){return e.type===Rr.pound}function y5(e){return e.type===Rr.tag}function v5(e){return!!(e&&typeof e=="object"&&e.type===Od.number)}function Rm(e){return!!(e&&typeof e=="object"&&e.type===Od.dateTime)}var x5=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,U4=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function Z4(e){var o={};return e.replace(U4,function(i){var r=i.length;switch(i[0]){case"G":o.era=r===4?"long":r===5?"narrow":"short";break;case"y":o.year=r===2?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":o.month=["numeric","2-digit","short","long","narrow"][r-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":o.day=["numeric","2-digit"][r-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":o.weekday=r===4?"long":r===5?"narrow":"short";break;case"e":if(r<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");o.weekday=["short","long","narrow","short"][r-4];break;case"c":if(r<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");o.weekday=["short","long","narrow","short"][r-4];break;case"a":o.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":o.hourCycle="h12",o.hour=["numeric","2-digit"][r-1];break;case"H":o.hourCycle="h23",o.hour=["numeric","2-digit"][r-1];break;case"K":o.hourCycle="h11",o.hour=["numeric","2-digit"][r-1];break;case"k":o.hourCycle="h24",o.hour=["numeric","2-digit"][r-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":o.minute=["numeric","2-digit"][r-1];break;case"s":o.second=["numeric","2-digit"][r-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":o.timeZoneName=r<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),o}var q4=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function W4(e){if(e.length===0)throw new Error("Number skeleton cannot be empty");for(var o=e.split(q4).filter(function(N){return N.length>0}),i=[],r=0,d=o;r<d.length;r++){var m=d[r],x=m.split("/");if(x.length===0)throw new Error("Invalid number skeleton");for(var c=x[0],L=x.slice(1),T=0,P=L;T<P.length;T++){var D=P[T];if(D.length===0)throw new Error("Invalid number skeleton")}i.push({stem:c,options:L})}return i}function G4(e){return e.replace(/^(.*?)-/,"")}var Q2=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,_5=/^(@+)?(\+|#+)?[rs]?$/g,Y4=/(\*)(0+)|(#+)(0+)|(0+)/g,w5=/^(0+)$/;function J2(e){var o={};return e[e.length-1]==="r"?o.roundingPriority="morePrecision":e[e.length-1]==="s"&&(o.roundingPriority="lessPrecision"),e.replace(_5,function(i,r,d){return typeof d!="string"?(o.minimumSignificantDigits=r.length,o.maximumSignificantDigits=r.length):d==="+"?o.minimumSignificantDigits=r.length:r[0]==="#"?o.maximumSignificantDigits=r.length:(o.minimumSignificantDigits=r.length,o.maximumSignificantDigits=r.length+(typeof d=="string"?d.length:0)),""}),o}function b5(e){switch(e){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function X4(e){var o;if(e[0]==="E"&&e[1]==="E"?(o={notation:"engineering"},e=e.slice(2)):e[0]==="E"&&(o={notation:"scientific"},e=e.slice(1)),o){var i=e.slice(0,2);if(i==="+!"?(o.signDisplay="always",e=e.slice(2)):i==="+?"&&(o.signDisplay="exceptZero",e=e.slice(2)),!w5.test(e))throw new Error("Malformed concise eng/scientific notation");o.minimumIntegerDigits=e.length}return o}function e3(e){var o={},i=b5(e);return i||o}function K4(e){for(var o={},i=0,r=e;i<r.length;i++){var d=r[i];switch(d.stem){case"percent":case"%":o.style="percent";continue;case"%x100":o.style="percent",o.scale=100;continue;case"currency":o.style="currency",o.currency=d.options[0];continue;case"group-off":case",_":o.useGrouping=!1;continue;case"precision-integer":case".":o.maximumFractionDigits=0;continue;case"measure-unit":case"unit":o.style="unit",o.unit=G4(d.options[0]);continue;case"compact-short":case"K":o.notation="compact",o.compactDisplay="short";continue;case"compact-long":case"KK":o.notation="compact",o.compactDisplay="long";continue;case"scientific":o=tn(tn(tn({},o),{notation:"scientific"}),d.options.reduce(function(L,T){return tn(tn({},L),e3(T))},{}));continue;case"engineering":o=tn(tn(tn({},o),{notation:"engineering"}),d.options.reduce(function(L,T){return tn(tn({},L),e3(T))},{}));continue;case"notation-simple":o.notation="standard";continue;case"unit-width-narrow":o.currencyDisplay="narrowSymbol",o.unitDisplay="narrow";continue;case"unit-width-short":o.currencyDisplay="code",o.unitDisplay="short";continue;case"unit-width-full-name":o.currencyDisplay="name",o.unitDisplay="long";continue;case"unit-width-iso-code":o.currencyDisplay="symbol";continue;case"scale":o.scale=parseFloat(d.options[0]);continue;case"rounding-mode-floor":o.roundingMode="floor";continue;case"rounding-mode-ceiling":o.roundingMode="ceil";continue;case"rounding-mode-down":o.roundingMode="trunc";continue;case"rounding-mode-up":o.roundingMode="expand";continue;case"rounding-mode-half-even":o.roundingMode="halfEven";continue;case"rounding-mode-half-down":o.roundingMode="halfTrunc";continue;case"rounding-mode-half-up":o.roundingMode="halfExpand";continue;case"integer-width":if(d.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");d.options[0].replace(Y4,function(L,T,P,D,N,$){if(T)o.minimumIntegerDigits=P.length;else{if(D&&N)throw new Error("We currently do not support maximum integer digits");if($)throw new Error("We currently do not support exact integer digits")}return""});continue}if(w5.test(d.stem)){o.minimumIntegerDigits=d.stem.length;continue}if(Q2.test(d.stem)){if(d.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");d.stem.replace(Q2,function(L,T,P,D,N,$){return P==="*"?o.minimumFractionDigits=T.length:D&&D[0]==="#"?o.maximumFractionDigits=D.length:N&&$?(o.minimumFractionDigits=N.length,o.maximumFractionDigits=N.length+$.length):(o.minimumFractionDigits=T.length,o.maximumFractionDigits=T.length),""});var m=d.options[0];m==="w"?o=tn(tn({},o),{trailingZeroDisplay:"stripIfInteger"}):m&&(o=tn(tn({},o),J2(m)));continue}if(_5.test(d.stem)){o=tn(tn({},o),J2(d.stem));continue}var x=b5(d.stem);x&&(o=tn(tn({},o),x));var c=X4(d.stem);c&&(o=tn(tn({},o),c))}return o}var hf={"001":["H","h"],419:["h","H","hB","hb"],AC:["H","h","hb","hB"],AD:["H","hB"],AE:["h","hB","hb","H"],AF:["H","hb","hB","h"],AG:["h","hb","H","hB"],AI:["H","h","hb","hB"],AL:["h","H","hB"],AM:["H","hB"],AO:["H","hB"],AR:["h","H","hB","hb"],AS:["h","H"],AT:["H","hB"],AU:["h","hb","H","hB"],AW:["H","hB"],AX:["H"],AZ:["H","hB","h"],BA:["H","hB","h"],BB:["h","hb","H","hB"],BD:["h","hB","H"],BE:["H","hB"],BF:["H","hB"],BG:["H","hB","h"],BH:["h","hB","hb","H"],BI:["H","h"],BJ:["H","hB"],BL:["H","hB"],BM:["h","hb","H","hB"],BN:["hb","hB","h","H"],BO:["h","H","hB","hb"],BQ:["H"],BR:["H","hB"],BS:["h","hb","H","hB"],BT:["h","H"],BW:["H","h","hb","hB"],BY:["H","h"],BZ:["H","h","hb","hB"],CA:["h","hb","H","hB"],CC:["H","h","hb","hB"],CD:["hB","H"],CF:["H","h","hB"],CG:["H","hB"],CH:["H","hB","h"],CI:["H","hB"],CK:["H","h","hb","hB"],CL:["h","H","hB","hb"],CM:["H","h","hB"],CN:["H","hB","hb","h"],CO:["h","H","hB","hb"],CP:["H"],CR:["h","H","hB","hb"],CU:["h","H","hB","hb"],CV:["H","hB"],CW:["H","hB"],CX:["H","h","hb","hB"],CY:["h","H","hb","hB"],CZ:["H"],DE:["H","hB"],DG:["H","h","hb","hB"],DJ:["h","H"],DK:["H"],DM:["h","hb","H","hB"],DO:["h","H","hB","hb"],DZ:["h","hB","hb","H"],EA:["H","h","hB","hb"],EC:["h","H","hB","hb"],EE:["H","hB"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],ER:["h","H"],ES:["H","hB","h","hb"],ET:["hB","hb","h","H"],FI:["H"],FJ:["h","hb","H","hB"],FK:["H","h","hb","hB"],FM:["h","hb","H","hB"],FO:["H","h"],FR:["H","hB"],GA:["H","hB"],GB:["H","h","hb","hB"],GD:["h","hb","H","hB"],GE:["H","hB","h"],GF:["H","hB"],GG:["H","h","hb","hB"],GH:["h","H"],GI:["H","h","hb","hB"],GL:["H","h"],GM:["h","hb","H","hB"],GN:["H","hB"],GP:["H","hB"],GQ:["H","hB","h","hb"],GR:["h","H","hb","hB"],GT:["h","H","hB","hb"],GU:["h","hb","H","hB"],GW:["H","hB"],GY:["h","hb","H","hB"],HK:["h","hB","hb","H"],HN:["h","H","hB","hb"],HR:["H","hB"],HU:["H","h"],IC:["H","h","hB","hb"],ID:["H"],IE:["H","h","hb","hB"],IL:["H","hB"],IM:["H","h","hb","hB"],IN:["h","H"],IO:["H","h","hb","hB"],IQ:["h","hB","hb","H"],IR:["hB","H"],IS:["H"],IT:["H","hB"],JE:["H","h","hb","hB"],JM:["h","hb","H","hB"],JO:["h","hB","hb","H"],JP:["H","K","h"],KE:["hB","hb","H","h"],KG:["H","h","hB","hb"],KH:["hB","h","H","hb"],KI:["h","hb","H","hB"],KM:["H","h","hB","hb"],KN:["h","hb","H","hB"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],KW:["h","hB","hb","H"],KY:["h","hb","H","hB"],KZ:["H","hB"],LA:["H","hb","hB","h"],LB:["h","hB","hb","H"],LC:["h","hb","H","hB"],LI:["H","hB","h"],LK:["H","h","hB","hb"],LR:["h","hb","H","hB"],LS:["h","H"],LT:["H","h","hb","hB"],LU:["H","h","hB"],LV:["H","hB","hb","h"],LY:["h","hB","hb","H"],MA:["H","h","hB","hb"],MC:["H","hB"],MD:["H","hB"],ME:["H","hB","h"],MF:["H","hB"],MG:["H","h"],MH:["h","hb","H","hB"],MK:["H","h","hb","hB"],ML:["H"],MM:["hB","hb","H","h"],MN:["H","h","hb","hB"],MO:["h","hB","hb","H"],MP:["h","hb","H","hB"],MQ:["H","hB"],MR:["h","hB","hb","H"],MS:["H","h","hb","hB"],MT:["H","h"],MU:["H","h"],MV:["H","h"],MW:["h","hb","H","hB"],MX:["h","H","hB","hb"],MY:["hb","hB","h","H"],MZ:["H","hB"],NA:["h","H","hB","hb"],NC:["H","hB"],NE:["H"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NI:["h","H","hB","hb"],NL:["H","hB"],NO:["H","h"],NP:["H","h","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],NZ:["h","hb","H","hB"],OM:["h","hB","hb","H"],PA:["h","H","hB","hb"],PE:["h","H","hB","hb"],PF:["H","h","hB"],PG:["h","H"],PH:["h","hB","hb","H"],PK:["h","hB","H"],PL:["H","h"],PM:["H","hB"],PN:["H","h","hb","hB"],PR:["h","H","hB","hb"],PS:["h","hB","hb","H"],PT:["H","hB"],PW:["h","H"],PY:["h","H","hB","hb"],QA:["h","hB","hb","H"],RE:["H","hB"],RO:["H","hB"],RS:["H","hB","h"],RU:["H"],RW:["H","h"],SA:["h","hB","hb","H"],SB:["h","hb","H","hB"],SC:["H","h","hB"],SD:["h","hB","hb","H"],SE:["H"],SG:["h","hb","H","hB"],SH:["H","h","hb","hB"],SI:["H","hB"],SJ:["H"],SK:["H"],SL:["h","hb","H","hB"],SM:["H","h","hB"],SN:["H","h","hB"],SO:["h","H"],SR:["H","hB"],SS:["h","hb","H","hB"],ST:["H","hB"],SV:["h","H","hB","hb"],SX:["H","h","hb","hB"],SY:["h","hB","hb","H"],SZ:["h","hb","H","hB"],TA:["H","h","hb","hB"],TC:["h","hb","H","hB"],TD:["h","H","hB"],TF:["H","h","hB"],TG:["H","hB"],TH:["H","h"],TJ:["H","h"],TL:["H","hB","hb","h"],TM:["H","h"],TN:["h","hB","hb","H"],TO:["h","H"],TR:["H","hB"],TT:["h","hb","H","hB"],TW:["hB","hb","h","H"],TZ:["hB","hb","H","h"],UA:["H","hB","h"],UG:["hB","hb","H","h"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],UY:["h","H","hB","hb"],UZ:["H","hB","h"],VA:["H","h","hB"],VC:["h","hb","H","hB"],VE:["h","H","hB","hb"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],VN:["H","h"],VU:["h","H"],WF:["H","hB"],WS:["h","H"],XK:["H","hB","h"],YE:["h","hB","hb","H"],YT:["H","hB"],ZA:["H","h","hb","hB"],ZM:["h","hb","H","hB"],ZW:["H","h"],"af-ZA":["H","h","hB","hb"],"ar-001":["h","hB","hb","H"],"ca-ES":["H","h","hB"],"en-001":["h","hb","H","hB"],"en-HK":["h","hb","H","hB"],"en-IL":["H","h","hb","hB"],"en-MY":["h","hb","H","hB"],"es-BR":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"gu-IN":["hB","hb","h","H"],"hi-IN":["hB","h","H"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],"ta-IN":["hB","h","hb","H"],"te-IN":["hB","h","H"],"zu-ZA":["H","hB","hb","h"]};function Q4(e,o){for(var i="",r=0;r<e.length;r++){var d=e.charAt(r);if(d==="j"){for(var m=0;r+1<e.length&&e.charAt(r+1)===d;)m++,r++;var x=1+(m&1),c=m<2?1:3+(m>>1),L="a",T=J4(o);for((T=="H"||T=="k")&&(c=0);c-- >0;)i+=L;for(;x-- >0;)i=T+i}else d==="J"?i+="H":i+=d}return i}function J4(e){var o=e.hourCycle;if(o===void 0&&e.hourCycles&&e.hourCycles.length&&(o=e.hourCycles[0]),o)switch(o){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var i=e.language,r;i!=="root"&&(r=e.maximize().region);var d=hf[r||""]||hf[i||""]||hf["".concat(i,"-001")]||hf["001"];return d[0]}var G0,e9=new RegExp("^".concat(x5.source,"*")),t9=new RegExp("".concat(x5.source,"*$"));function Xn(e,o){return{start:e,end:o}}var n9=!!String.prototype.startsWith&&"_a".startsWith("a",1),r9=!!String.fromCodePoint,i9=!!Object.fromEntries,s9=!!String.prototype.codePointAt,o9=!!String.prototype.trimStart,a9=!!String.prototype.trimEnd,l9=!!Number.isSafeInteger,c9=l9?Number.isSafeInteger:function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e&&Math.abs(e)<=9007199254740991},Am=!0;try{var u9=S5("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");Am=((G0=u9.exec("a"))===null||G0===void 0?void 0:G0[0])==="a"}catch{Am=!1}var t3=n9?function(o,i,r){return o.startsWith(i,r)}:function(o,i,r){return o.slice(r,r+i.length)===i},jm=r9?String.fromCodePoint:function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];for(var r="",d=o.length,m=0,x;d>m;){if(x=o[m++],x>1114111)throw RangeError(x+" is not a valid code point");r+=x<65536?String.fromCharCode(x):String.fromCharCode(((x-=65536)>>10)+55296,x%1024+56320)}return r},n3=i9?Object.fromEntries:function(o){for(var i={},r=0,d=o;r<d.length;r++){var m=d[r],x=m[0],c=m[1];i[x]=c}return i},C5=s9?function(o,i){return o.codePointAt(i)}:function(o,i){var r=o.length;if(!(i<0||i>=r)){var d=o.charCodeAt(i),m;return d<55296||d>56319||i+1===r||(m=o.charCodeAt(i+1))<56320||m>57343?d:(d-55296<<10)+(m-56320)+65536}},d9=o9?function(o){return o.trimStart()}:function(o){return o.replace(e9,"")},h9=a9?function(o){return o.trimEnd()}:function(o){return o.replace(t9,"")};function S5(e,o){return new RegExp(e,o)}var Om;if(Am){var r3=S5("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");Om=function(o,i){var r;r3.lastIndex=i;var d=r3.exec(o);return(r=d[1])!==null&&r!==void 0?r:""}}else Om=function(o,i){for(var r=[];;){var d=C5(o,i);if(d===void 0||M5(d)||g9(d))break;r.push(d),i+=d>=65536?2:1}return jm.apply(void 0,r)};var p9=function(){function e(o,i){i===void 0&&(i={}),this.message=o,this.position={offset:0,line:1,column:1},this.ignoreTag=!!i.ignoreTag,this.locale=i.locale,this.requiresOtherClause=!!i.requiresOtherClause,this.shouldParseSkeletons=!!i.shouldParseSkeletons}return e.prototype.parse=function(){if(this.offset()!==0)throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},e.prototype.parseMessage=function(o,i,r){for(var d=[];!this.isEOF();){var m=this.char();if(m===123){var x=this.parseArgument(o,r);if(x.err)return x;d.push(x.val)}else{if(m===125&&o>0)break;if(m===35&&(i==="plural"||i==="selectordinal")){var c=this.clonePosition();this.bump(),d.push({type:Rr.pound,location:Xn(c,this.clonePosition())})}else if(m===60&&!this.ignoreTag&&this.peek()===47){if(r)break;return this.error(Yn.UNMATCHED_CLOSING_TAG,Xn(this.clonePosition(),this.clonePosition()))}else if(m===60&&!this.ignoreTag&&zm(this.peek()||0)){var x=this.parseTag(o,i);if(x.err)return x;d.push(x.val)}else{var x=this.parseLiteral(o,i);if(x.err)return x;d.push(x.val)}}}return{val:d,err:null}},e.prototype.parseTag=function(o,i){var r=this.clonePosition();this.bump();var d=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:Rr.literal,value:"<".concat(d,"/>"),location:Xn(r,this.clonePosition())},err:null};if(this.bumpIf(">")){var m=this.parseMessage(o+1,i,!0);if(m.err)return m;var x=m.val,c=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!zm(this.char()))return this.error(Yn.INVALID_TAG,Xn(c,this.clonePosition()));var L=this.clonePosition(),T=this.parseTagName();return d!==T?this.error(Yn.UNMATCHED_CLOSING_TAG,Xn(L,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:Rr.tag,value:d,children:x,location:Xn(r,this.clonePosition())},err:null}:this.error(Yn.INVALID_TAG,Xn(c,this.clonePosition())))}else return this.error(Yn.UNCLOSED_TAG,Xn(r,this.clonePosition()))}else return this.error(Yn.INVALID_TAG,Xn(r,this.clonePosition()))},e.prototype.parseTagName=function(){var o=this.offset();for(this.bump();!this.isEOF()&&m9(this.char());)this.bump();return this.message.slice(o,this.offset())},e.prototype.parseLiteral=function(o,i){for(var r=this.clonePosition(),d="";;){var m=this.tryParseQuote(i);if(m){d+=m;continue}var x=this.tryParseUnquoted(o,i);if(x){d+=x;continue}var c=this.tryParseLeftAngleBracket();if(c){d+=c;continue}break}var L=Xn(r,this.clonePosition());return{val:{type:Rr.literal,value:d,location:L},err:null}},e.prototype.tryParseLeftAngleBracket=function(){return!this.isEOF()&&this.char()===60&&(this.ignoreTag||!f9(this.peek()||0))?(this.bump(),"<"):null},e.prototype.tryParseQuote=function(o){if(this.isEOF()||this.char()!==39)return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if(o==="plural"||o==="selectordinal")break;return null;default:return null}this.bump();var i=[this.char()];for(this.bump();!this.isEOF();){var r=this.char();if(r===39)if(this.peek()===39)i.push(39),this.bump();else{this.bump();break}else i.push(r);this.bump()}return jm.apply(void 0,i)},e.prototype.tryParseUnquoted=function(o,i){if(this.isEOF())return null;var r=this.char();return r===60||r===123||r===35&&(i==="plural"||i==="selectordinal")||r===125&&o>0?null:(this.bump(),jm(r))},e.prototype.parseArgument=function(o,i){var r=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(Yn.EXPECT_ARGUMENT_CLOSING_BRACE,Xn(r,this.clonePosition()));if(this.char()===125)return this.bump(),this.error(Yn.EMPTY_ARGUMENT,Xn(r,this.clonePosition()));var d=this.parseIdentifierIfPossible().value;if(!d)return this.error(Yn.MALFORMED_ARGUMENT,Xn(r,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(Yn.EXPECT_ARGUMENT_CLOSING_BRACE,Xn(r,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:Rr.argument,value:d,location:Xn(r,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(Yn.EXPECT_ARGUMENT_CLOSING_BRACE,Xn(r,this.clonePosition())):this.parseArgumentOptions(o,i,d,r);default:return this.error(Yn.MALFORMED_ARGUMENT,Xn(r,this.clonePosition()))}},e.prototype.parseIdentifierIfPossible=function(){var o=this.clonePosition(),i=this.offset(),r=Om(this.message,i),d=i+r.length;this.bumpTo(d);var m=this.clonePosition(),x=Xn(o,m);return{value:r,location:x}},e.prototype.parseArgumentOptions=function(o,i,r,d){var m,x=this.clonePosition(),c=this.parseIdentifierIfPossible().value,L=this.clonePosition();switch(c){case"":return this.error(Yn.EXPECT_ARGUMENT_TYPE,Xn(x,L));case"number":case"date":case"time":{this.bumpSpace();var T=null;if(this.bumpIf(",")){this.bumpSpace();var P=this.clonePosition(),D=this.parseSimpleArgStyleIfPossible();if(D.err)return D;var N=h9(D.val);if(N.length===0)return this.error(Yn.EXPECT_ARGUMENT_STYLE,Xn(this.clonePosition(),this.clonePosition()));var $=Xn(P,this.clonePosition());T={style:N,styleLocation:$}}var U=this.tryParseArgumentClose(d);if(U.err)return U;var q=Xn(d,this.clonePosition());if(T&&t3(T==null?void 0:T.style,"::",0)){var H=d9(T.style.slice(2));if(c==="number"){var D=this.parseNumberSkeletonFromString(H,T.styleLocation);return D.err?D:{val:{type:Rr.number,value:r,location:q,style:D.val},err:null}}else{if(H.length===0)return this.error(Yn.EXPECT_DATE_TIME_SKELETON,q);var G=H;this.locale&&(G=Q4(H,this.locale));var N={type:Od.dateTime,pattern:G,location:T.styleLocation,parsedOptions:this.shouldParseSkeletons?Z4(G):{}},te=c==="date"?Rr.date:Rr.time;return{val:{type:te,value:r,location:q,style:N},err:null}}}return{val:{type:c==="number"?Rr.number:c==="date"?Rr.date:Rr.time,value:r,location:q,style:(m=T==null?void 0:T.style)!==null&&m!==void 0?m:null},err:null}}case"plural":case"selectordinal":case"select":{var oe=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(Yn.EXPECT_SELECT_ARGUMENT_OPTIONS,Xn(oe,tn({},oe)));this.bumpSpace();var Ce=this.parseIdentifierIfPossible(),ae=0;if(c!=="select"&&Ce.value==="offset"){if(!this.bumpIf(":"))return this.error(Yn.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,Xn(this.clonePosition(),this.clonePosition()));this.bumpSpace();var D=this.tryParseDecimalInteger(Yn.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,Yn.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);if(D.err)return D;this.bumpSpace(),Ce=this.parseIdentifierIfPossible(),ae=D.val}var Ne=this.tryParsePluralOrSelectOptions(o,c,i,Ce);if(Ne.err)return Ne;var U=this.tryParseArgumentClose(d);if(U.err)return U;var Fe=Xn(d,this.clonePosition());return c==="select"?{val:{type:Rr.select,value:r,options:n3(Ne.val),location:Fe},err:null}:{val:{type:Rr.plural,value:r,options:n3(Ne.val),offset:ae,pluralType:c==="plural"?"cardinal":"ordinal",location:Fe},err:null}}default:return this.error(Yn.INVALID_ARGUMENT_TYPE,Xn(x,L))}},e.prototype.tryParseArgumentClose=function(o){return this.isEOF()||this.char()!==125?this.error(Yn.EXPECT_ARGUMENT_CLOSING_BRACE,Xn(o,this.clonePosition())):(this.bump(),{val:!0,err:null})},e.prototype.parseSimpleArgStyleIfPossible=function(){for(var o=0,i=this.clonePosition();!this.isEOF();){var r=this.char();switch(r){case 39:{this.bump();var d=this.clonePosition();if(!this.bumpUntil("'"))return this.error(Yn.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,Xn(d,this.clonePosition()));this.bump();break}case 123:{o+=1,this.bump();break}case 125:{if(o>0)o-=1;else return{val:this.message.slice(i.offset,this.offset()),err:null};break}default:this.bump();break}}return{val:this.message.slice(i.offset,this.offset()),err:null}},e.prototype.parseNumberSkeletonFromString=function(o,i){var r=[];try{r=W4(o)}catch{return this.error(Yn.INVALID_NUMBER_SKELETON,i)}return{val:{type:Od.number,tokens:r,location:i,parsedOptions:this.shouldParseSkeletons?K4(r):{}},err:null}},e.prototype.tryParsePluralOrSelectOptions=function(o,i,r,d){for(var m,x=!1,c=[],L=new Set,T=d.value,P=d.location;;){if(T.length===0){var D=this.clonePosition();if(i!=="select"&&this.bumpIf("=")){var N=this.tryParseDecimalInteger(Yn.EXPECT_PLURAL_ARGUMENT_SELECTOR,Yn.INVALID_PLURAL_ARGUMENT_SELECTOR);if(N.err)return N;P=Xn(D,this.clonePosition()),T=this.message.slice(D.offset,this.offset())}else break}if(L.has(T))return this.error(i==="select"?Yn.DUPLICATE_SELECT_ARGUMENT_SELECTOR:Yn.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,P);T==="other"&&(x=!0),this.bumpSpace();var $=this.clonePosition();if(!this.bumpIf("{"))return this.error(i==="select"?Yn.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:Yn.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,Xn(this.clonePosition(),this.clonePosition()));var U=this.parseMessage(o+1,i,r);if(U.err)return U;var q=this.tryParseArgumentClose($);if(q.err)return q;c.push([T,{value:U.val,location:Xn($,this.clonePosition())}]),L.add(T),this.bumpSpace(),m=this.parseIdentifierIfPossible(),T=m.value,P=m.location}return c.length===0?this.error(i==="select"?Yn.EXPECT_SELECT_ARGUMENT_SELECTOR:Yn.EXPECT_PLURAL_ARGUMENT_SELECTOR,Xn(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!x?this.error(Yn.MISSING_OTHER_CLAUSE,Xn(this.clonePosition(),this.clonePosition())):{val:c,err:null}},e.prototype.tryParseDecimalInteger=function(o,i){var r=1,d=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(r=-1);for(var m=!1,x=0;!this.isEOF();){var c=this.char();if(c>=48&&c<=57)m=!0,x=x*10+(c-48),this.bump();else break}var L=Xn(d,this.clonePosition());return m?(x*=r,c9(x)?{val:x,err:null}:this.error(i,L)):this.error(o,L)},e.prototype.offset=function(){return this.position.offset},e.prototype.isEOF=function(){return this.offset()===this.message.length},e.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},e.prototype.char=function(){var o=this.position.offset;if(o>=this.message.length)throw Error("out of bound");var i=C5(this.message,o);if(i===void 0)throw Error("Offset ".concat(o," is at invalid UTF-16 code unit boundary"));return i},e.prototype.error=function(o,i){return{val:null,err:{kind:o,message:this.message,location:i}}},e.prototype.bump=function(){if(!this.isEOF()){var o=this.char();o===10?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=o<65536?1:2)}},e.prototype.bumpIf=function(o){if(t3(this.message,o,this.offset())){for(var i=0;i<o.length;i++)this.bump();return!0}return!1},e.prototype.bumpUntil=function(o){var i=this.offset(),r=this.message.indexOf(o,i);return r>=0?(this.bumpTo(r),!0):(this.bumpTo(this.message.length),!1)},e.prototype.bumpTo=function(o){if(this.offset()>o)throw Error("targetOffset ".concat(o," must be greater than or equal to the current offset ").concat(this.offset()));for(o=Math.min(o,this.message.length);;){var i=this.offset();if(i===o)break;if(i>o)throw Error("targetOffset ".concat(o," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},e.prototype.bumpSpace=function(){for(;!this.isEOF()&&M5(this.char());)this.bump()},e.prototype.peek=function(){if(this.isEOF())return null;var o=this.char(),i=this.offset(),r=this.message.charCodeAt(i+(o>=65536?2:1));return r??null},e}();function zm(e){return e>=97&&e<=122||e>=65&&e<=90}function f9(e){return zm(e)||e===47}function m9(e){return e===45||e===46||e>=48&&e<=57||e===95||e>=97&&e<=122||e>=65&&e<=90||e==183||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8255&&e<=8256||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}function M5(e){return e>=9&&e<=13||e===32||e===133||e>=8206&&e<=8207||e===8232||e===8233}function g9(e){return e>=33&&e<=35||e===36||e>=37&&e<=39||e===40||e===41||e===42||e===43||e===44||e===45||e>=46&&e<=47||e>=58&&e<=59||e>=60&&e<=62||e>=63&&e<=64||e===91||e===92||e===93||e===94||e===96||e===123||e===124||e===125||e===126||e===161||e>=162&&e<=165||e===166||e===167||e===169||e===171||e===172||e===174||e===176||e===177||e===182||e===187||e===191||e===215||e===247||e>=8208&&e<=8213||e>=8214&&e<=8215||e===8216||e===8217||e===8218||e>=8219&&e<=8220||e===8221||e===8222||e===8223||e>=8224&&e<=8231||e>=8240&&e<=8248||e===8249||e===8250||e>=8251&&e<=8254||e>=8257&&e<=8259||e===8260||e===8261||e===8262||e>=8263&&e<=8273||e===8274||e===8275||e>=8277&&e<=8286||e>=8592&&e<=8596||e>=8597&&e<=8601||e>=8602&&e<=8603||e>=8604&&e<=8607||e===8608||e>=8609&&e<=8610||e===8611||e>=8612&&e<=8613||e===8614||e>=8615&&e<=8621||e===8622||e>=8623&&e<=8653||e>=8654&&e<=8655||e>=8656&&e<=8657||e===8658||e===8659||e===8660||e>=8661&&e<=8691||e>=8692&&e<=8959||e>=8960&&e<=8967||e===8968||e===8969||e===8970||e===8971||e>=8972&&e<=8991||e>=8992&&e<=8993||e>=8994&&e<=9e3||e===9001||e===9002||e>=9003&&e<=9083||e===9084||e>=9085&&e<=9114||e>=9115&&e<=9139||e>=9140&&e<=9179||e>=9180&&e<=9185||e>=9186&&e<=9254||e>=9255&&e<=9279||e>=9280&&e<=9290||e>=9291&&e<=9311||e>=9472&&e<=9654||e===9655||e>=9656&&e<=9664||e===9665||e>=9666&&e<=9719||e>=9720&&e<=9727||e>=9728&&e<=9838||e===9839||e>=9840&&e<=10087||e===10088||e===10089||e===10090||e===10091||e===10092||e===10093||e===10094||e===10095||e===10096||e===10097||e===10098||e===10099||e===10100||e===10101||e>=10132&&e<=10175||e>=10176&&e<=10180||e===10181||e===10182||e>=10183&&e<=10213||e===10214||e===10215||e===10216||e===10217||e===10218||e===10219||e===10220||e===10221||e===10222||e===10223||e>=10224&&e<=10239||e>=10240&&e<=10495||e>=10496&&e<=10626||e===10627||e===10628||e===10629||e===10630||e===10631||e===10632||e===10633||e===10634||e===10635||e===10636||e===10637||e===10638||e===10639||e===10640||e===10641||e===10642||e===10643||e===10644||e===10645||e===10646||e===10647||e===10648||e>=10649&&e<=10711||e===10712||e===10713||e===10714||e===10715||e>=10716&&e<=10747||e===10748||e===10749||e>=10750&&e<=11007||e>=11008&&e<=11055||e>=11056&&e<=11076||e>=11077&&e<=11078||e>=11079&&e<=11084||e>=11085&&e<=11123||e>=11124&&e<=11125||e>=11126&&e<=11157||e===11158||e>=11159&&e<=11263||e>=11776&&e<=11777||e===11778||e===11779||e===11780||e===11781||e>=11782&&e<=11784||e===11785||e===11786||e===11787||e===11788||e===11789||e>=11790&&e<=11798||e===11799||e>=11800&&e<=11801||e===11802||e===11803||e===11804||e===11805||e>=11806&&e<=11807||e===11808||e===11809||e===11810||e===11811||e===11812||e===11813||e===11814||e===11815||e===11816||e===11817||e>=11818&&e<=11822||e===11823||e>=11824&&e<=11833||e>=11834&&e<=11835||e>=11836&&e<=11839||e===11840||e===11841||e===11842||e>=11843&&e<=11855||e>=11856&&e<=11857||e===11858||e>=11859&&e<=11903||e>=12289&&e<=12291||e===12296||e===12297||e===12298||e===12299||e===12300||e===12301||e===12302||e===12303||e===12304||e===12305||e>=12306&&e<=12307||e===12308||e===12309||e===12310||e===12311||e===12312||e===12313||e===12314||e===12315||e===12316||e===12317||e>=12318&&e<=12319||e===12320||e===12336||e===64830||e===64831||e>=65093&&e<=65094}function Fm(e){e.forEach(function(o){if(delete o.location,m5(o)||g5(o))for(var i in o.options)delete o.options[i].location,Fm(o.options[i].value);else h5(o)&&v5(o.style)||(p5(o)||f5(o))&&Rm(o.style)?delete o.style.location:y5(o)&&Fm(o.children)})}function y9(e,o){o===void 0&&(o={}),o=tn({shouldParseSkeletons:!0,requiresOtherClause:!0},o);var i=new p9(e,o).parse();if(i.err){var r=SyntaxError(Yn[i.err.kind]);throw r.location=i.err.location,r.originalMessage=i.err.message,r}return o!=null&&o.captureLocation||Fm(i.val),i.val}var al;(function(e){e.MISSING_VALUE="MISSING_VALUE",e.INVALID_VALUE="INVALID_VALUE",e.MISSING_INTL_API="MISSING_INTL_API"})(al||(al={}));var Cu=function(e){da(o,e);function o(i,r,d){var m=e.call(this,i)||this;return m.code=r,m.originalMessage=d,m}return o.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},o}(Error),i3=function(e){da(o,e);function o(i,r,d,m){return e.call(this,'Invalid values for "'.concat(i,'": "').concat(r,'". Options are "').concat(Object.keys(d).join('", "'),'"'),al.INVALID_VALUE,m)||this}return o}(Cu),v9=function(e){da(o,e);function o(i,r,d){return e.call(this,'Value for "'.concat(i,'" must be of type ').concat(r),al.INVALID_VALUE,d)||this}return o}(Cu),x9=function(e){da(o,e);function o(i,r){return e.call(this,'The intl string context variable "'.concat(i,'" was not provided to the string "').concat(r,'"'),al.MISSING_VALUE,r)||this}return o}(Cu),cs;(function(e){e[e.literal=0]="literal",e[e.object=1]="object"})(cs||(cs={}));function _9(e){return e.length<2?e:e.reduce(function(o,i){var r=o[o.length-1];return!r||r.type!==cs.literal||i.type!==cs.literal?o.push(i):r.value+=i.value,o},[])}function E5(e){return typeof e=="function"}function Sf(e,o,i,r,d,m,x){if(e.length===1&&K2(e[0]))return[{type:cs.literal,value:e[0].value}];for(var c=[],L=0,T=e;L<T.length;L++){var P=T[L];if(K2(P)){c.push({type:cs.literal,value:P.value});continue}if(H4(P)){typeof m=="number"&&c.push({type:cs.literal,value:i.getNumberFormat(o).format(m)});continue}var D=P.value;if(!(d&&D in d))throw new x9(D,x);var N=d[D];if(V4(P)){(!N||typeof N=="string"||typeof N=="number")&&(N=typeof N=="string"||typeof N=="number"?String(N):""),c.push({type:typeof N=="string"?cs.literal:cs.object,value:N});continue}if(p5(P)){var $=typeof P.style=="string"?r.date[P.style]:Rm(P.style)?P.style.parsedOptions:void 0;c.push({type:cs.literal,value:i.getDateTimeFormat(o,$).format(N)});continue}if(f5(P)){var $=typeof P.style=="string"?r.time[P.style]:Rm(P.style)?P.style.parsedOptions:r.time.medium;c.push({type:cs.literal,value:i.getDateTimeFormat(o,$).format(N)});continue}if(h5(P)){var $=typeof P.style=="string"?r.number[P.style]:v5(P.style)?P.style.parsedOptions:void 0;$&&$.scale&&(N=N*($.scale||1)),c.push({type:cs.literal,value:i.getNumberFormat(o,$).format(N)});continue}if(y5(P)){var U=P.children,q=P.value,H=d[q];if(!E5(H))throw new v9(q,"function",x);var G=Sf(U,o,i,r,d,m),te=H(G.map(function(ae){return ae.value}));Array.isArray(te)||(te=[te]),c.push.apply(c,te.map(function(ae){return{type:typeof ae=="string"?cs.literal:cs.object,value:ae}}))}if(m5(P)){var oe=P.options[N]||P.options.other;if(!oe)throw new i3(P.value,N,Object.keys(P.options),x);c.push.apply(c,Sf(oe.value,o,i,r,d));continue}if(g5(P)){var oe=P.options["=".concat(N)];if(!oe){if(!Intl.PluralRules)throw new Cu(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,al.MISSING_INTL_API,x);var Ce=i.getPluralRules(o,{type:P.pluralType}).select(N-(P.offset||0));oe=P.options[Ce]||P.options.other}if(!oe)throw new i3(P.value,N,Object.keys(P.options),x);c.push.apply(c,Sf(oe.value,o,i,r,d,N-(P.offset||0)));continue}}return _9(c)}function w9(e,o){return o?tn(tn(tn({},e||{}),o||{}),Object.keys(e).reduce(function(i,r){return i[r]=tn(tn({},e[r]),o[r]||{}),i},{})):e}function b9(e,o){return o?Object.keys(e).reduce(function(i,r){return i[r]=w9(e[r],o[r]),i},tn({},e)):e}function Y0(e){return{create:function(){return{get:function(o){return e[o]},set:function(o,i){e[o]=i}}}}}function C9(e){return e===void 0&&(e={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:Xa(function(){for(var o,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];return new((o=Intl.NumberFormat).bind.apply(o,Ja([void 0],i,!1)))},{cache:Y0(e.number),strategy:Ka.variadic}),getDateTimeFormat:Xa(function(){for(var o,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];return new((o=Intl.DateTimeFormat).bind.apply(o,Ja([void 0],i,!1)))},{cache:Y0(e.dateTime),strategy:Ka.variadic}),getPluralRules:Xa(function(){for(var o,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];return new((o=Intl.PluralRules).bind.apply(o,Ja([void 0],i,!1)))},{cache:Y0(e.pluralRules),strategy:Ka.variadic})}}var L5=function(){function e(o,i,r,d){i===void 0&&(i=e.defaultLocale);var m=this;if(this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(L){var T=m.formatToParts(L);if(T.length===1)return T[0].value;var P=T.reduce(function(D,N){return!D.length||N.type!==cs.literal||typeof D[D.length-1]!="string"?D.push(N.value):D[D.length-1]+=N.value,D},[]);return P.length<=1?P[0]||"":P},this.formatToParts=function(L){return Sf(m.ast,m.locales,m.formatters,m.formats,L,void 0,m.message)},this.resolvedOptions=function(){var L;return{locale:((L=m.resolvedLocale)===null||L===void 0?void 0:L.toString())||Intl.NumberFormat.supportedLocalesOf(m.locales)[0]}},this.getAst=function(){return m.ast},this.locales=i,this.resolvedLocale=e.resolveLocale(i),typeof o=="string"){if(this.message=o,!e.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");var x=d||{};x.formatters;var c=jd(x,["formatters"]);this.ast=e.__parse(o,tn(tn({},c),{locale:this.resolvedLocale}))}else this.ast=o;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=b9(e.formats,r),this.formatters=d&&d.formatters||C9(this.formatterCache)}return Object.defineProperty(e,"defaultLocale",{get:function(){return e.memoizedDefaultLocale||(e.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),e.memoizedDefaultLocale},enumerable:!1,configurable:!0}),e.memoizedDefaultLocale=null,e.resolveLocale=function(o){if(!(typeof Intl.Locale>"u")){var i=Intl.NumberFormat.supportedLocalesOf(o);return i.length>0?new Intl.Locale(i[0]):new Intl.Locale(typeof o=="string"?o:o[0])}},e.__parse=y9,e.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},e}(),D1;(function(e){e.FORMAT_ERROR="FORMAT_ERROR",e.UNSUPPORTED_FORMATTER="UNSUPPORTED_FORMATTER",e.INVALID_CONFIG="INVALID_CONFIG",e.MISSING_DATA="MISSING_DATA",e.MISSING_TRANSLATION="MISSING_TRANSLATION"})(D1||(D1={}));var hp=function(e){da(o,e);function o(i,r,d){var m=this,x=d?d instanceof Error?d:new Error(String(d)):void 0;return m=e.call(this,"[@formatjs/intl Error ".concat(i,"] ").concat(r,`
`).concat(x?`
`.concat(x.message,`
`).concat(x.stack):""))||this,m.code=i,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(m,o),m}return o}(Error),S9=function(e){da(o,e);function o(i,r){return e.call(this,D1.UNSUPPORTED_FORMATTER,i,r)||this}return o}(hp),M9=function(e){da(o,e);function o(i,r){return e.call(this,D1.INVALID_CONFIG,i,r)||this}return o}(hp),s3=function(e){da(o,e);function o(i,r){return e.call(this,D1.MISSING_DATA,i,r)||this}return o}(hp),Ro=function(e){da(o,e);function o(i,r,d){var m=e.call(this,D1.FORMAT_ERROR,"".concat(i,`
Locale: `).concat(r,`
`),d)||this;return m.locale=r,m}return o}(hp),X0=function(e){da(o,e);function o(i,r,d,m){var x=e.call(this,"".concat(i,`
MessageID: `).concat(d==null?void 0:d.id,`
Default Message: `).concat(d==null?void 0:d.defaultMessage,`
Description: `).concat(d==null?void 0:d.description,`
`),r,m)||this;return x.descriptor=d,x.locale=r,x}return o}(Ro),E9=function(e){da(o,e);function o(i,r){var d=e.call(this,D1.MISSING_TRANSLATION,'Missing message: "'.concat(i.id,'" for locale "').concat(r,'", using ').concat(i.defaultMessage?"default message (".concat(typeof i.defaultMessage=="string"?i.defaultMessage:i.defaultMessage.map(function(m){var x;return(x=m.value)!==null&&x!==void 0?x:JSON.stringify(m)}).join(),")"):"id"," as fallback."))||this;return d.descriptor=i,d}return o}(hp);function L9(e,o,i){if(i===void 0&&(i=Error),!e)throw new i(o)}function Gd(e,o,i){return i===void 0&&(i={}),o.reduce(function(r,d){return d in e?r[d]=e[d]:d in i&&(r[d]=i[d]),r},{})}var T9=function(e){},k9=function(e){},T5={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:T9,onWarn:k9};function k5(){return{dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}}}function y1(e){return{create:function(){return{get:function(o){return e[o]},set:function(o,i){e[o]=i}}}}}function P9(e){e===void 0&&(e=k5());var o=Intl.RelativeTimeFormat,i=Intl.ListFormat,r=Intl.DisplayNames,d=Xa(function(){for(var c,L=[],T=0;T<arguments.length;T++)L[T]=arguments[T];return new((c=Intl.DateTimeFormat).bind.apply(c,Ja([void 0],L,!1)))},{cache:y1(e.dateTime),strategy:Ka.variadic}),m=Xa(function(){for(var c,L=[],T=0;T<arguments.length;T++)L[T]=arguments[T];return new((c=Intl.NumberFormat).bind.apply(c,Ja([void 0],L,!1)))},{cache:y1(e.number),strategy:Ka.variadic}),x=Xa(function(){for(var c,L=[],T=0;T<arguments.length;T++)L[T]=arguments[T];return new((c=Intl.PluralRules).bind.apply(c,Ja([void 0],L,!1)))},{cache:y1(e.pluralRules),strategy:Ka.variadic});return{getDateTimeFormat:d,getNumberFormat:m,getMessageFormat:Xa(function(c,L,T,P){return new L5(c,L,T,tn({formatters:{getNumberFormat:m,getDateTimeFormat:d,getPluralRules:x}},P||{}))},{cache:y1(e.message),strategy:Ka.variadic}),getRelativeTimeFormat:Xa(function(){for(var c=[],L=0;L<arguments.length;L++)c[L]=arguments[L];return new(o.bind.apply(o,Ja([void 0],c,!1)))},{cache:y1(e.relativeTime),strategy:Ka.variadic}),getPluralRules:x,getListFormat:Xa(function(){for(var c=[],L=0;L<arguments.length;L++)c[L]=arguments[L];return new(i.bind.apply(i,Ja([void 0],c,!1)))},{cache:y1(e.list),strategy:Ka.variadic}),getDisplayNames:Xa(function(){for(var c=[],L=0;L<arguments.length;L++)c[L]=arguments[L];return new(r.bind.apply(r,Ja([void 0],c,!1)))},{cache:y1(e.displayNames),strategy:Ka.variadic})}}function p2(e,o,i,r){var d=e&&e[o],m;if(d&&(m=d[i]),m)return m;r(new S9("No ".concat(o," format named: ").concat(i)))}function pf(e,o){return Object.keys(e).reduce(function(i,r){return i[r]=tn({timeZone:o},e[r]),i},{})}function o3(e,o){var i=Object.keys(tn(tn({},e),o));return i.reduce(function(r,d){return r[d]=tn(tn({},e[d]||{}),o[d]||{}),r},{})}function a3(e,o){if(!o)return e;var i=L5.formats;return tn(tn(tn({},i),e),{date:o3(pf(i.date,o),pf(e.date||{},o)),time:o3(pf(i.time,o),pf(e.time||{},o))})}var Bm=function(e,o,i,r,d){var m=e.locale,x=e.formats,c=e.messages,L=e.defaultLocale,T=e.defaultFormats,P=e.fallbackOnEmptyString,D=e.onError,N=e.timeZone,$=e.defaultRichTextElements;i===void 0&&(i={id:""});var U=i.id,q=i.defaultMessage;L9(!!U,"[@formatjs/intl] An `id` must be provided to format a message. You can either:\n1. Configure your build toolchain with [babel-plugin-formatjs](https://formatjs.github.io/docs/tooling/babel-plugin)\nor [@formatjs/ts-transformer](https://formatjs.github.io/docs/tooling/ts-transformer) OR\n2. Configure your `eslint` config to include [eslint-plugin-formatjs](https://formatjs.github.io/docs/tooling/linter#enforce-id)\nto autofix this issue");var H=String(U),G=c&&Object.prototype.hasOwnProperty.call(c,H)&&c[H];if(Array.isArray(G)&&G.length===1&&G[0].type===Rr.literal)return G[0].value;if(!r&&G&&typeof G=="string"&&!$)return G.replace(/'\{(.*?)\}'/gi,"{$1}");if(r=tn(tn({},$),r||{}),x=a3(x,N),T=a3(T,N),!G){if(P===!1&&G==="")return G;if((!q||m&&m.toLowerCase()!==L.toLowerCase())&&D(new E9(i,m)),q)try{var te=o.getMessageFormat(q,L,T,d);return te.format(r)}catch(oe){return D(new X0('Error formatting default message for: "'.concat(H,'", rendering default message verbatim'),m,i,oe)),typeof q=="string"?q:H}return H}try{var te=o.getMessageFormat(G,m,x,tn({formatters:o},d||{}));return te.format(r)}catch(oe){D(new X0('Error formatting message: "'.concat(H,'", using ').concat(q?"default message":"id"," as fallback."),m,i,oe))}if(q)try{var te=o.getMessageFormat(q,L,T,d);return te.format(r)}catch(oe){D(new X0('Error formatting the default message for: "'.concat(H,'", rendering message verbatim'),m,i,oe))}return typeof G=="string"?G:typeof q=="string"?q:H},D9=["formatMatcher","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle","dateStyle","timeStyle","calendar","numberingSystem","fractionalSecondDigits"];function pp(e,o,i,r){var d=e.locale,m=e.formats,x=e.onError,c=e.timeZone;r===void 0&&(r={});var L=r.format,T=tn(tn({},c&&{timeZone:c}),L&&p2(m,o,L,x)),P=Gd(r,D9,T);return o==="time"&&!P.hour&&!P.minute&&!P.second&&!P.timeStyle&&!P.dateStyle&&(P=tn(tn({},P),{hour:"numeric",minute:"numeric"})),i(d,P)}function I9(e,o){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];var d=i[0],m=i[1],x=m===void 0?{}:m,c=typeof d=="string"?new Date(d||0):d;try{return pp(e,"date",o,x).format(c)}catch(L){e.onError(new Ro("Error formatting date.",e.locale,L))}return String(c)}function N9(e,o){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];var d=i[0],m=i[1],x=m===void 0?{}:m,c=typeof d=="string"?new Date(d||0):d;try{return pp(e,"time",o,x).format(c)}catch(L){e.onError(new Ro("Error formatting time.",e.locale,L))}return String(c)}function R9(e,o){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];var d=i[0],m=i[1],x=i[2],c=x===void 0?{}:x,L=typeof d=="string"?new Date(d||0):d,T=typeof m=="string"?new Date(m||0):m;try{return pp(e,"dateTimeRange",o,c).formatRange(L,T)}catch(P){e.onError(new Ro("Error formatting date time range.",e.locale,P))}return String(L)}function A9(e,o){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];var d=i[0],m=i[1],x=m===void 0?{}:m,c=typeof d=="string"?new Date(d||0):d;try{return pp(e,"date",o,x).formatToParts(c)}catch(L){e.onError(new Ro("Error formatting date.",e.locale,L))}return[]}function j9(e,o){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];var d=i[0],m=i[1],x=m===void 0?{}:m,c=typeof d=="string"?new Date(d||0):d;try{return pp(e,"time",o,x).formatToParts(c)}catch(L){e.onError(new Ro("Error formatting time.",e.locale,L))}return[]}var O9=["style","type","fallback","languageDisplay"];function z9(e,o,i,r){var d=e.locale,m=e.onError,x=Intl.DisplayNames;x||m(new Cu(`Intl.DisplayNames is not available in this environment.
Try polyfilling it using "@formatjs/intl-displaynames"
`,al.MISSING_INTL_API));var c=Gd(r,O9);try{return o(d,c).of(i)}catch(L){m(new Ro("Error formatting display name.",d,L))}}var F9=["type","style"],l3=Date.now();function B9(e){return"".concat(l3,"_").concat(e,"_").concat(l3)}function $9(e,o,i,r){r===void 0&&(r={});var d=P5(e,o,i,r).reduce(function(m,x){var c=x.value;return typeof c!="string"?m.push(c):typeof m[m.length-1]=="string"?m[m.length-1]+=c:m.push(c),m},[]);return d.length===1?d[0]:d.length===0?"":d}function P5(e,o,i,r){var d=e.locale,m=e.onError;r===void 0&&(r={});var x=Intl.ListFormat;x||m(new Cu(`Intl.ListFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-listformat"
`,al.MISSING_INTL_API));var c=Gd(r,F9);try{var L={},T=i.map(function(P,D){if(typeof P=="object"){var N=B9(D);return L[N]=P,N}return String(P)});return o(d,c).formatToParts(T).map(function(P){return P.type==="literal"?P:tn(tn({},P),{value:L[P.value]||P.value})})}catch(P){m(new Ro("Error formatting list.",d,P))}return i}var V9=["type"];function H9(e,o,i,r){var d=e.locale,m=e.onError;r===void 0&&(r={}),Intl.PluralRules||m(new Cu(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,al.MISSING_INTL_API));var x=Gd(r,V9);try{return o(d,x).select(i)}catch(c){m(new Ro("Error formatting plural.",d,c))}return"other"}var U9=["numeric","style"];function Z9(e,o,i){var r=e.locale,d=e.formats,m=e.onError;i===void 0&&(i={});var x=i.format,c=!!x&&p2(d,"relative",x,m)||{},L=Gd(i,U9,c);return o(r,L)}function q9(e,o,i,r,d){d===void 0&&(d={}),r||(r="second");var m=Intl.RelativeTimeFormat;m||e.onError(new Cu(`Intl.RelativeTimeFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-relativetimeformat"
`,al.MISSING_INTL_API));try{return Z9(e,o,d).format(i,r)}catch(x){e.onError(new Ro("Error formatting relative time.",e.locale,x))}return String(i)}var W9=["style","currency","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","currencyDisplay","currencySign","notation","signDisplay","unit","unitDisplay","numberingSystem","trailingZeroDisplay","roundingPriority","roundingIncrement","roundingMode"];function D5(e,o,i){var r=e.locale,d=e.formats,m=e.onError;i===void 0&&(i={});var x=i.format,c=x&&p2(d,"number",x,m)||{},L=Gd(i,W9,c);return o(r,L)}function G9(e,o,i,r){r===void 0&&(r={});try{return D5(e,o,r).format(i)}catch(d){e.onError(new Ro("Error formatting number.",e.locale,d))}return String(i)}function Y9(e,o,i,r){r===void 0&&(r={});try{return D5(e,o,r).formatToParts(i)}catch(d){e.onError(new Ro("Error formatting number.",e.locale,d))}return[]}function X9(e){var o=e?e[Object.keys(e)[0]]:void 0;return typeof o=="string"}function K9(e){e.onWarn&&e.defaultRichTextElements&&X9(e.messages||{})&&e.onWarn(`[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. 
Please consider using "@formatjs/cli" to pre-compile your messages for performance.
For more details see https://formatjs.github.io/docs/getting-started/message-distribution`)}function Q9(e,o){var i=P9(o),r=tn(tn({},T5),e),d=r.locale,m=r.defaultLocale,x=r.onError;return d?!Intl.NumberFormat.supportedLocalesOf(d).length&&x?x(new s3('Missing locale data for locale: "'.concat(d,'" in Intl.NumberFormat. Using default locale: "').concat(m,'" as fallback. See https://formatjs.github.io/docs/react-intl#runtime-requirements for more details'))):!Intl.DateTimeFormat.supportedLocalesOf(d).length&&x&&x(new s3('Missing locale data for locale: "'.concat(d,'" in Intl.DateTimeFormat. Using default locale: "').concat(m,'" as fallback. See https://formatjs.github.io/docs/react-intl#runtime-requirements for more details'))):(x&&x(new M9('"locale" was not configured, using "'.concat(m,'" as fallback. See https://formatjs.github.io/docs/react-intl/api#intlshape for more details'))),r.locale=r.defaultLocale||"en"),K9(r),tn(tn({},r),{formatters:i,formatNumber:G9.bind(null,r,i.getNumberFormat),formatNumberToParts:Y9.bind(null,r,i.getNumberFormat),formatRelativeTime:q9.bind(null,r,i.getRelativeTimeFormat),formatDate:I9.bind(null,r,i.getDateTimeFormat),formatDateToParts:A9.bind(null,r,i.getDateTimeFormat),formatTime:N9.bind(null,r,i.getDateTimeFormat),formatDateTimeRange:R9.bind(null,r,i.getDateTimeFormat),formatTimeToParts:j9.bind(null,r,i.getDateTimeFormat),formatPlural:H9.bind(null,r,i.getPluralRules),formatMessage:Bm.bind(null,r,i),$t:Bm.bind(null,r,i),formatList:$9.bind(null,r,i.getListFormat),formatListToParts:P5.bind(null,r,i.getListFormat),formatDisplayName:z9.bind(null,r,i.getDisplayNames)})}function J9(e,o,i){if(i===void 0&&(i=Error),!e)throw new i(o)}function e8(e){J9(e,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}var t8=tn(tn({},T5),{textComponent:B.Fragment}),n8={key:42},r8=function(e){return B.isValidElement(e)?B.createElement(B.Fragment,n8,e):e},i8=function(e){var o;return(o=B.Children.map(e,r8))!==null&&o!==void 0?o:[]};function s8(e){return function(o){return e(B.Children.toArray(o))}}function c3(e,o){if(e===o)return!0;if(!e||!o)return!1;var i=Object.keys(e),r=Object.keys(o),d=i.length;if(r.length!==d)return!1;for(var m=0;m<d;m++){var x=i[m];if(e[x]!==o[x]||!Object.prototype.hasOwnProperty.call(o,x))return!1}return!0}var K0={exports:{}},cr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u3;function o8(){if(u3)return cr;u3=1;var e=typeof Symbol=="function"&&Symbol.for,o=e?Symbol.for("react.element"):60103,i=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,d=e?Symbol.for("react.strict_mode"):60108,m=e?Symbol.for("react.profiler"):60114,x=e?Symbol.for("react.provider"):60109,c=e?Symbol.for("react.context"):60110,L=e?Symbol.for("react.async_mode"):60111,T=e?Symbol.for("react.concurrent_mode"):60111,P=e?Symbol.for("react.forward_ref"):60112,D=e?Symbol.for("react.suspense"):60113,N=e?Symbol.for("react.suspense_list"):60120,$=e?Symbol.for("react.memo"):60115,U=e?Symbol.for("react.lazy"):60116,q=e?Symbol.for("react.block"):60121,H=e?Symbol.for("react.fundamental"):60117,G=e?Symbol.for("react.responder"):60118,te=e?Symbol.for("react.scope"):60119;function oe(ae){if(typeof ae=="object"&&ae!==null){var Ne=ae.$$typeof;switch(Ne){case o:switch(ae=ae.type,ae){case L:case T:case r:case m:case d:case D:return ae;default:switch(ae=ae&&ae.$$typeof,ae){case c:case P:case U:case $:case x:return ae;default:return Ne}}case i:return Ne}}}function Ce(ae){return oe(ae)===T}return cr.AsyncMode=L,cr.ConcurrentMode=T,cr.ContextConsumer=c,cr.ContextProvider=x,cr.Element=o,cr.ForwardRef=P,cr.Fragment=r,cr.Lazy=U,cr.Memo=$,cr.Portal=i,cr.Profiler=m,cr.StrictMode=d,cr.Suspense=D,cr.isAsyncMode=function(ae){return Ce(ae)||oe(ae)===L},cr.isConcurrentMode=Ce,cr.isContextConsumer=function(ae){return oe(ae)===c},cr.isContextProvider=function(ae){return oe(ae)===x},cr.isElement=function(ae){return typeof ae=="object"&&ae!==null&&ae.$$typeof===o},cr.isForwardRef=function(ae){return oe(ae)===P},cr.isFragment=function(ae){return oe(ae)===r},cr.isLazy=function(ae){return oe(ae)===U},cr.isMemo=function(ae){return oe(ae)===$},cr.isPortal=function(ae){return oe(ae)===i},cr.isProfiler=function(ae){return oe(ae)===m},cr.isStrictMode=function(ae){return oe(ae)===d},cr.isSuspense=function(ae){return oe(ae)===D},cr.isValidElementType=function(ae){return typeof ae=="string"||typeof ae=="function"||ae===r||ae===T||ae===m||ae===d||ae===D||ae===N||typeof ae=="object"&&ae!==null&&(ae.$$typeof===U||ae.$$typeof===$||ae.$$typeof===x||ae.$$typeof===c||ae.$$typeof===P||ae.$$typeof===H||ae.$$typeof===G||ae.$$typeof===te||ae.$$typeof===q)},cr.typeOf=oe,cr}var d3;function a8(){return d3||(d3=1,K0.exports=o8()),K0.exports}var Q0,h3;function l8(){if(h3)return Q0;h3=1;var e=a8(),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},d={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},m={};m[e.ForwardRef]=r,m[e.Memo]=d;function x(U){return e.isMemo(U)?d:m[U.$$typeof]||o}var c=Object.defineProperty,L=Object.getOwnPropertyNames,T=Object.getOwnPropertySymbols,P=Object.getOwnPropertyDescriptor,D=Object.getPrototypeOf,N=Object.prototype;function $(U,q,H){if(typeof q!="string"){if(N){var G=D(q);G&&G!==N&&$(U,G,H)}var te=L(q);T&&(te=te.concat(T(q)));for(var oe=x(U),Ce=x(q),ae=0;ae<te.length;++ae){var Ne=te[ae];if(!i[Ne]&&!(H&&H[Ne])&&!(Ce&&Ce[Ne])&&!(oe&&oe[Ne])){var Fe=P(q,Ne);try{c(U,Ne,Fe)}catch{}}}}return U}return Q0=$,Q0}l8();var f2=typeof window<"u"&&!window.__REACT_INTL_BYPASS_GLOBAL_CONTEXT__?window.__REACT_INTL_CONTEXT__||(window.__REACT_INTL_CONTEXT__=B.createContext(null)):B.createContext(null);f2.Consumer;var c8=f2.Provider,u8=c8,d8=f2;function ii(){var e=B.useContext(d8);return e8(e),e}var $m;(function(e){e.formatDate="FormattedDate",e.formatTime="FormattedTime",e.formatNumber="FormattedNumber",e.formatList="FormattedList",e.formatDisplayName="FormattedDisplayName"})($m||($m={}));var Vm;(function(e){e.formatDate="FormattedDateParts",e.formatTime="FormattedTimeParts",e.formatNumber="FormattedNumberParts",e.formatList="FormattedListParts"})(Vm||(Vm={}));function I5(e){var o=function(i){var r=ii(),d=i.value,m=i.children,x=jd(i,["value","children"]),c=typeof d=="string"?new Date(d||0):d,L=e==="formatDate"?r.formatDateToParts(c,x):r.formatTimeToParts(c,x);return m(L)};return o.displayName=Vm[e],o}function fp(e){var o=function(i){var r=ii(),d=i.value,m=i.children,x=jd(i,["value","children"]),c=r[e](d,x);if(typeof m=="function")return m(c);var L=r.textComponent||B.Fragment;return B.createElement(L,null,c)};return o.displayName=$m[e],o}function N5(e){return e&&Object.keys(e).reduce(function(o,i){var r=e[i];return o[i]=E5(r)?s8(r):r,o},{})}var p3=function(e,o,i,r){for(var d=[],m=4;m<arguments.length;m++)d[m-4]=arguments[m];var x=N5(r),c=Bm.apply(void 0,Ja([e,o,i,x],d,!1));return Array.isArray(c)?i8(c):c},h8=function(e,o){var i=e.defaultRichTextElements,r=jd(e,["defaultRichTextElements"]),d=N5(i),m=Q9(tn(tn(tn({},t8),r),{defaultRichTextElements:d}),o),x={locale:m.locale,timeZone:m.timeZone,fallbackOnEmptyString:m.fallbackOnEmptyString,formats:m.formats,defaultLocale:m.defaultLocale,defaultFormats:m.defaultFormats,messages:m.messages,onError:m.onError,defaultRichTextElements:d};return tn(tn({},m),{formatMessage:p3.bind(null,x,m.formatters),$t:p3.bind(null,x,m.formatters)})};function p8(e,o){var i=e.values,r=jd(e,["values"]),d=o.values,m=jd(o,["values"]);return c3(d,i)&&c3(r,m)}function R5(e){var o=ii(),i=o.formatMessage,r=o.textComponent,d=r===void 0?B.Fragment:r,m=e.id,x=e.description,c=e.defaultMessage,L=e.values,T=e.children,P=e.tagName,D=P===void 0?d:P,N=e.ignoreTag,$={id:m,description:x,defaultMessage:c},U=i($,L,{ignoreTag:N});return typeof T=="function"?T(Array.isArray(U)?U:[U]):D?B.createElement(D,null,U):B.createElement(B.Fragment,null,U)}R5.displayName="FormattedMessage";var pt=B.memo(R5,p8);pt.displayName="MemoizedFormattedMessage";fp("formatDate");fp("formatTime");fp("formatNumber");fp("formatList");fp("formatDisplayName");I5("formatDate");I5("formatTime");var r0=c5();const f8=gc(r0);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ip(){return ip=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var i=arguments[o];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},ip.apply(this,arguments)}var yu;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(yu||(yu={}));const f3="popstate";function m8(e){e===void 0&&(e={});function o(d,m){let{pathname:x="/",search:c="",hash:L=""}=j1(d.location.hash.substr(1));return!x.startsWith("/")&&!x.startsWith(".")&&(x="/"+x),Hm("",{pathname:x,search:c,hash:L},m.state&&m.state.usr||null,m.state&&m.state.key||"default")}function i(d,m){let x=d.document.querySelector("base"),c="";if(x&&x.getAttribute("href")){let L=d.location.href,T=L.indexOf("#");c=T===-1?L:L.slice(0,T)}return c+"#"+(typeof m=="string"?m:A5(m))}function r(d,m){m2(d.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(m)+")")}return y8(o,i,r,e)}function Ci(e,o){if(e===!1||e===null||typeof e>"u")throw new Error(o)}function m2(e,o){if(!e){typeof console<"u"&&console.warn(o);try{throw new Error(o)}catch{}}}function g8(){return Math.random().toString(36).substr(2,8)}function m3(e,o){return{usr:e.state,key:e.key,idx:o}}function Hm(e,o,i,r){return i===void 0&&(i=null),ip({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof o=="string"?j1(o):o,{state:i,key:o&&o.key||r||g8()})}function A5(e){let{pathname:o="/",search:i="",hash:r=""}=e;return i&&i!=="?"&&(o+=i.charAt(0)==="?"?i:"?"+i),r&&r!=="#"&&(o+=r.charAt(0)==="#"?r:"#"+r),o}function j1(e){let o={};if(e){let i=e.indexOf("#");i>=0&&(o.hash=e.substr(i),e=e.substr(0,i));let r=e.indexOf("?");r>=0&&(o.search=e.substr(r),e=e.substr(0,r)),e&&(o.pathname=e)}return o}function y8(e,o,i,r){r===void 0&&(r={});let{window:d=document.defaultView,v5Compat:m=!1}=r,x=d.history,c=yu.Pop,L=null,T=P();T==null&&(T=0,x.replaceState(ip({},x.state,{idx:T}),""));function P(){return(x.state||{idx:null}).idx}function D(){c=yu.Pop;let H=P(),G=H==null?null:H-T;T=H,L&&L({action:c,location:q.location,delta:G})}function N(H,G){c=yu.Push;let te=Hm(q.location,H,G);i&&i(te,H),T=P()+1;let oe=m3(te,T),Ce=q.createHref(te);try{x.pushState(oe,"",Ce)}catch(ae){if(ae instanceof DOMException&&ae.name==="DataCloneError")throw ae;d.location.assign(Ce)}m&&L&&L({action:c,location:q.location,delta:1})}function $(H,G){c=yu.Replace;let te=Hm(q.location,H,G);i&&i(te,H),T=P();let oe=m3(te,T),Ce=q.createHref(te);x.replaceState(oe,"",Ce),m&&L&&L({action:c,location:q.location,delta:0})}function U(H){let G=d.location.origin!=="null"?d.location.origin:d.location.href,te=typeof H=="string"?H:A5(H);return te=te.replace(/ $/,"%20"),Ci(G,"No window.location.(origin|href) available to create URL for href: "+te),new URL(te,G)}let q={get action(){return c},get location(){return e(d,x)},listen(H){if(L)throw new Error("A history only accepts one active listener");return d.addEventListener(f3,D),L=H,()=>{d.removeEventListener(f3,D),L=null}},createHref(H){return o(d,H)},createURL:U,encodeLocation(H){let G=U(H);return{pathname:G.pathname,search:G.search,hash:G.hash}},push:N,replace:$,go(H){return x.go(H)}};return q}var g3;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(g3||(g3={}));function v8(e,o,i){return i===void 0&&(i="/"),x8(e,o,i)}function x8(e,o,i,r){let d=typeof o=="string"?j1(o):o,m=z5(d.pathname||"/",i);if(m==null)return null;let x=j5(e);_8(x);let c=null;for(let L=0;c==null&&L<x.length;++L){let T=I8(m);c=k8(x[L],T)}return c}function j5(e,o,i,r){o===void 0&&(o=[]),i===void 0&&(i=[]),r===void 0&&(r="");let d=(m,x,c)=>{let L={relativePath:c===void 0?m.path||"":c,caseSensitive:m.caseSensitive===!0,childrenIndex:x,route:m};L.relativePath.startsWith("/")&&(Ci(L.relativePath.startsWith(r),'Absolute route path "'+L.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),L.relativePath=L.relativePath.slice(r.length));let T=M1([r,L.relativePath]),P=i.concat(L);m.children&&m.children.length>0&&(Ci(m.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+T+'".')),j5(m.children,o,P,T)),!(m.path==null&&!m.index)&&o.push({path:T,score:L8(T,m.index),routesMeta:P})};return e.forEach((m,x)=>{var c;if(m.path===""||!((c=m.path)!=null&&c.includes("?")))d(m,x);else for(let L of O5(m.path))d(m,x,L)}),o}function O5(e){let o=e.split("/");if(o.length===0)return[];let[i,...r]=o,d=i.endsWith("?"),m=i.replace(/\?$/,"");if(r.length===0)return d?[m,""]:[m];let x=O5(r.join("/")),c=[];return c.push(...x.map(L=>L===""?m:[m,L].join("/"))),d&&c.push(...x),c.map(L=>e.startsWith("/")&&L===""?"/":L)}function _8(e){e.sort((o,i)=>o.score!==i.score?i.score-o.score:T8(o.routesMeta.map(r=>r.childrenIndex),i.routesMeta.map(r=>r.childrenIndex)))}const w8=/^:[\w-]+$/,b8=3,C8=2,S8=1,M8=10,E8=-2,y3=e=>e==="*";function L8(e,o){let i=e.split("/"),r=i.length;return i.some(y3)&&(r+=E8),o&&(r+=C8),i.filter(d=>!y3(d)).reduce((d,m)=>d+(w8.test(m)?b8:m===""?S8:M8),r)}function T8(e,o){return e.length===o.length&&e.slice(0,-1).every((r,d)=>r===o[d])?e[e.length-1]-o[o.length-1]:0}function k8(e,o,i){let{routesMeta:r}=e,d={},m="/",x=[];for(let c=0;c<r.length;++c){let L=r[c],T=c===r.length-1,P=m==="/"?o:o.slice(m.length)||"/",D=P8({path:L.relativePath,caseSensitive:L.caseSensitive,end:T},P),N=L.route;if(!D)return null;Object.assign(d,D.params),x.push({params:d,pathname:M1([m,D.pathname]),pathnameBase:z8(M1([m,D.pathnameBase])),route:N}),D.pathnameBase!=="/"&&(m=M1([m,D.pathnameBase]))}return x}function P8(e,o){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,r]=D8(e.path,e.caseSensitive,e.end),d=o.match(i);if(!d)return null;let m=d[0],x=m.replace(/(.)\/+$/,"$1"),c=d.slice(1);return{params:r.reduce((T,P,D)=>{let{paramName:N,isOptional:$}=P;if(N==="*"){let q=c[D]||"";x=m.slice(0,m.length-q.length).replace(/(.)\/+$/,"$1")}const U=c[D];return $&&!U?T[N]=void 0:T[N]=(U||"").replace(/%2F/g,"/"),T},{}),pathname:m,pathnameBase:x,pattern:e}}function D8(e,o,i){o===void 0&&(o=!1),i===void 0&&(i=!0),m2(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],d="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(x,c,L)=>(r.push({paramName:c,isOptional:L!=null}),L?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),d+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?d+="\\/*$":e!==""&&e!=="/"&&(d+="(?:(?=\\/|$))"),[new RegExp(d,o?void 0:"i"),r]}function I8(e){try{return e.split("/").map(o=>decodeURIComponent(o).replace(/\//g,"%2F")).join("/")}catch(o){return m2(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+o+").")),e}}function z5(e,o){if(o==="/")return e;if(!e.toLowerCase().startsWith(o.toLowerCase()))return null;let i=o.endsWith("/")?o.length-1:o.length,r=e.charAt(i);return r&&r!=="/"?null:e.slice(i)||"/"}function N8(e,o){o===void 0&&(o="/");let{pathname:i,search:r="",hash:d=""}=typeof e=="string"?j1(e):e;return{pathname:i?i.startsWith("/")?i:R8(i,o):o,search:F8(r),hash:B8(d)}}function R8(e,o){let i=o.replace(/\/+$/,"").split("/");return e.split("/").forEach(d=>{d===".."?i.length>1&&i.pop():d!=="."&&i.push(d)}),i.length>1?i.join("/"):"/"}function J0(e,o,i,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+o+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+i+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function A8(e){return e.filter((o,i)=>i===0||o.route.path&&o.route.path.length>0)}function j8(e,o){let i=A8(e);return o?i.map((r,d)=>d===i.length-1?r.pathname:r.pathnameBase):i.map(r=>r.pathnameBase)}function O8(e,o,i,r){r===void 0&&(r=!1);let d;typeof e=="string"?d=j1(e):(d=ip({},e),Ci(!d.pathname||!d.pathname.includes("?"),J0("?","pathname","search",d)),Ci(!d.pathname||!d.pathname.includes("#"),J0("#","pathname","hash",d)),Ci(!d.search||!d.search.includes("#"),J0("#","search","hash",d)));let m=e===""||d.pathname==="",x=m?"/":d.pathname,c;if(x==null)c=i;else{let D=o.length-1;if(!r&&x.startsWith("..")){let N=x.split("/");for(;N[0]==="..";)N.shift(),D-=1;d.pathname=N.join("/")}c=D>=0?o[D]:"/"}let L=N8(d,c),T=x&&x!=="/"&&x.endsWith("/"),P=(m||x===".")&&i.endsWith("/");return!L.pathname.endsWith("/")&&(T||P)&&(L.pathname+="/"),L}const M1=e=>e.join("/").replace(/\/\/+/g,"/"),z8=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),F8=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,B8=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function $8(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const F5=["post","put","patch","delete"];new Set(F5);const V8=["get",...F5];new Set(V8);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sp(){return sp=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var i=arguments[o];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},sp.apply(this,arguments)}const g2=B.createContext(null),H8=B.createContext(null),i0=B.createContext(null),s0=B.createContext(null),Yd=B.createContext({outlet:null,matches:[],isDataRoute:!1}),B5=B.createContext(null);function o0(){return B.useContext(s0)!=null}function mp(){return o0()||Ci(!1),B.useContext(s0).location}function $5(e){B.useContext(i0).static||B.useLayoutEffect(e)}function qs(){let{isDataRoute:e}=B.useContext(Yd);return e?n7():U8()}function U8(){o0()||Ci(!1);let e=B.useContext(g2),{basename:o,future:i,navigator:r}=B.useContext(i0),{matches:d}=B.useContext(Yd),{pathname:m}=mp(),x=JSON.stringify(j8(d,i.v7_relativeSplatPath)),c=B.useRef(!1);return $5(()=>{c.current=!0}),B.useCallback(function(T,P){if(P===void 0&&(P={}),!c.current)return;if(typeof T=="number"){r.go(T);return}let D=O8(T,JSON.parse(x),m,P.relative==="path");e==null&&o!=="/"&&(D.pathname=D.pathname==="/"?o:M1([o,D.pathname])),(P.replace?r.replace:r.push)(D,P.state,P)},[o,r,x,m,e])}function Z8(e,o){return q8(e,o)}function q8(e,o,i,r){o0()||Ci(!1);let{navigator:d,static:m}=B.useContext(i0),{matches:x}=B.useContext(Yd),c=x[x.length-1],L=c?c.params:{};c&&c.pathname;let T=c?c.pathnameBase:"/";c&&c.route;let P=mp(),D;if(o){var N;let G=typeof o=="string"?j1(o):o;T==="/"||(N=G.pathname)!=null&&N.startsWith(T)||Ci(!1),D=G}else D=P;let $=D.pathname||"/",U=$;if(T!=="/"){let G=T.replace(/^\//,"").split("/");U="/"+$.replace(/^\//,"").split("/").slice(G.length).join("/")}let q=v8(e,{pathname:U}),H=K8(q&&q.map(G=>Object.assign({},G,{params:Object.assign({},L,G.params),pathname:M1([T,d.encodeLocation?d.encodeLocation(G.pathname).pathname:G.pathname]),pathnameBase:G.pathnameBase==="/"?T:M1([T,d.encodeLocation?d.encodeLocation(G.pathnameBase).pathname:G.pathnameBase])})),x,i,r);return o&&H?B.createElement(s0.Provider,{value:{location:sp({pathname:"/",search:"",hash:"",state:null,key:"default"},D),navigationType:yu.Pop}},H):H}function W8(){let e=t7(),o=$8(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,d={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},o),i?B.createElement("pre",{style:d},i):null,null)}const G8=B.createElement(W8,null);class Y8 extends B.Component{constructor(o){super(o),this.state={location:o.location,revalidation:o.revalidation,error:o.error}}static getDerivedStateFromError(o){return{error:o}}static getDerivedStateFromProps(o,i){return i.location!==o.location||i.revalidation!=="idle"&&o.revalidation==="idle"?{error:o.error,location:o.location,revalidation:o.revalidation}:{error:o.error!==void 0?o.error:i.error,location:i.location,revalidation:o.revalidation||i.revalidation}}componentDidCatch(o,i){console.error("React Router caught the following error during render",o,i)}render(){return this.state.error!==void 0?B.createElement(Yd.Provider,{value:this.props.routeContext},B.createElement(B5.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function X8(e){let{routeContext:o,match:i,children:r}=e,d=B.useContext(g2);return d&&d.static&&d.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(d.staticContext._deepestRenderedBoundaryId=i.route.id),B.createElement(Yd.Provider,{value:o},r)}function K8(e,o,i,r){var d;if(o===void 0&&(o=[]),i===void 0&&(i=null),r===void 0&&(r=null),e==null){var m;if(!i)return null;if(i.errors)e=i.matches;else if((m=r)!=null&&m.v7_partialHydration&&o.length===0&&!i.initialized&&i.matches.length>0)e=i.matches;else return null}let x=e,c=(d=i)==null?void 0:d.errors;if(c!=null){let P=x.findIndex(D=>D.route.id&&(c==null?void 0:c[D.route.id])!==void 0);P>=0||Ci(!1),x=x.slice(0,Math.min(x.length,P+1))}let L=!1,T=-1;if(i&&r&&r.v7_partialHydration)for(let P=0;P<x.length;P++){let D=x[P];if((D.route.HydrateFallback||D.route.hydrateFallbackElement)&&(T=P),D.route.id){let{loaderData:N,errors:$}=i,U=D.route.loader&&N[D.route.id]===void 0&&(!$||$[D.route.id]===void 0);if(D.route.lazy||U){L=!0,T>=0?x=x.slice(0,T+1):x=[x[0]];break}}}return x.reduceRight((P,D,N)=>{let $,U=!1,q=null,H=null;i&&($=c&&D.route.id?c[D.route.id]:void 0,q=D.route.errorElement||G8,L&&(T<0&&N===0?(r7("route-fallback"),U=!0,H=null):T===N&&(U=!0,H=D.route.hydrateFallbackElement||null)));let G=o.concat(x.slice(0,N+1)),te=()=>{let oe;return $?oe=q:U?oe=H:D.route.Component?oe=B.createElement(D.route.Component,null):D.route.element?oe=D.route.element:oe=P,B.createElement(X8,{match:D,routeContext:{outlet:P,matches:G,isDataRoute:i!=null},children:oe})};return i&&(D.route.ErrorBoundary||D.route.errorElement||N===0)?B.createElement(Y8,{location:i.location,revalidation:i.revalidation,component:q,error:$,children:te(),routeContext:{outlet:null,matches:G,isDataRoute:!0}}):te()},null)}var V5=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(V5||{}),H5=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(H5||{});function Q8(e){let o=B.useContext(g2);return o||Ci(!1),o}function J8(e){let o=B.useContext(H8);return o||Ci(!1),o}function e7(e){let o=B.useContext(Yd);return o||Ci(!1),o}function U5(e){let o=e7(),i=o.matches[o.matches.length-1];return i.route.id||Ci(!1),i.route.id}function t7(){var e;let o=B.useContext(B5),i=J8(),r=U5();return o!==void 0?o:(e=i.errors)==null?void 0:e[r]}function n7(){let{router:e}=Q8(V5.UseNavigateStable),o=U5(H5.UseNavigateStable),i=B.useRef(!1);return $5(()=>{i.current=!0}),B.useCallback(function(d,m){m===void 0&&(m={}),i.current&&(typeof d=="number"?e.navigate(d):e.navigate(d,sp({fromRouteId:o},m)))},[e,o])}const v3={};function r7(e,o,i){v3[e]||(v3[e]=!0)}function i7(e,o){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Zi(e){Ci(!1)}function s7(e){let{basename:o="/",children:i=null,location:r,navigationType:d=yu.Pop,navigator:m,static:x=!1,future:c}=e;o0()&&Ci(!1);let L=o.replace(/^\/*/,"/"),T=B.useMemo(()=>({basename:L,navigator:m,static:x,future:sp({v7_relativeSplatPath:!1},c)}),[L,c,m,x]);typeof r=="string"&&(r=j1(r));let{pathname:P="/",search:D="",hash:N="",state:$=null,key:U="default"}=r,q=B.useMemo(()=>{let H=z5(P,L);return H==null?null:{location:{pathname:H,search:D,hash:N,state:$,key:U},navigationType:d}},[L,P,D,N,$,U,d]);return q==null?null:B.createElement(i0.Provider,{value:T},B.createElement(s0.Provider,{children:i,value:q}))}function o7(e){let{children:o,location:i}=e;return Z8(Um(o),i)}new Promise(()=>{});function Um(e,o){o===void 0&&(o=[]);let i=[];return B.Children.forEach(e,(r,d)=>{if(!B.isValidElement(r))return;let m=[...o,d];if(r.type===B.Fragment){i.push.apply(i,Um(r.props.children,m));return}r.type!==Zi&&Ci(!1),!r.props.index||!r.props.children||Ci(!1);let x={id:r.props.id||m.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(x.children=Um(r.props.children,m)),i.push(x)}),i}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const a7="6";try{window.__reactRouterVersion=a7}catch{}const l7="startTransition",x3=d2[l7];function c7(e){let{basename:o,children:i,future:r,window:d}=e,m=B.useRef();m.current==null&&(m.current=m8({window:d,v5Compat:!0}));let x=m.current,[c,L]=B.useState({action:x.action,location:x.location}),{v7_startTransition:T}=r||{},P=B.useCallback(D=>{T&&x3?x3(()=>L(D)):L(D)},[L,T]);return B.useLayoutEffect(()=>x.listen(P),[x,P]),B.useEffect(()=>i7(r),[r]),B.createElement(s7,{basename:o,children:i,location:c.location,navigationType:c.action,navigator:x,future:r})}var _3;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(_3||(_3={}));var w3;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(w3||(w3={}));function Z5(e){var o,i,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(o=0;o<e.length;o++)e[o]&&(i=Z5(e[o]))&&(r&&(r+=" "),r+=i);else for(o in e)e[o]&&(r&&(r+=" "),r+=o);return r}function vu(){for(var e,o,i=0,r="";i<arguments.length;)(e=arguments[i++])&&(o=Z5(e))&&(r&&(r+=" "),r+=o);return r}const tp=e=>typeof e=="number"&&!isNaN(e),I1=e=>typeof e=="string",bs=e=>typeof e=="function",Mf=e=>I1(e)||bs(e)?e:null,em=e=>B.isValidElement(e)||I1(e)||bs(e)||tp(e);function u7(e,o,i){i===void 0&&(i=300);const{scrollHeight:r,style:d}=e;requestAnimationFrame(()=>{d.minHeight="initial",d.height=r+"px",d.transition=`all ${i}ms`,requestAnimationFrame(()=>{d.height="0",d.padding="0",d.margin="0",setTimeout(o,i)})})}function a0(e){let{enter:o,exit:i,appendPosition:r=!1,collapse:d=!0,collapseDuration:m=300}=e;return function(x){let{children:c,position:L,preventExitTransition:T,done:P,nodeRef:D,isIn:N}=x;const $=r?`${o}--${L}`:o,U=r?`${i}--${L}`:i,q=B.useRef(0);return B.useLayoutEffect(()=>{const H=D.current,G=$.split(" "),te=oe=>{oe.target===D.current&&(H.dispatchEvent(new Event("d")),H.removeEventListener("animationend",te),H.removeEventListener("animationcancel",te),q.current===0&&oe.type!=="animationcancel"&&H.classList.remove(...G))};H.classList.add(...G),H.addEventListener("animationend",te),H.addEventListener("animationcancel",te)},[]),B.useEffect(()=>{const H=D.current,G=()=>{H.removeEventListener("animationend",G),d?u7(H,P,m):P()};N||(T?G():(q.current=1,H.className+=` ${U}`,H.addEventListener("animationend",G)))},[N]),Ze.createElement(Ze.Fragment,null,c)}}function b3(e,o){return e!=null?{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:o}:{}}const Lo={list:new Map,emitQueue:new Map,on(e,o){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(o),this},off(e,o){if(o){const i=this.list.get(e).filter(r=>r!==o);return this.list.set(e,i),this}return this.list.delete(e),this},cancelEmit(e){const o=this.emitQueue.get(e);return o&&(o.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit(e){this.list.has(e)&&this.list.get(e).forEach(o=>{const i=setTimeout(()=>{o(...[].slice.call(arguments,1))},0);this.emitQueue.has(e)||this.emitQueue.set(e,[]),this.emitQueue.get(e).push(i)})}},ff=e=>{let{theme:o,type:i,...r}=e;return Ze.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:o==="colored"?"currentColor":`var(--toastify-icon-color-${i})`,...r})},tm={info:function(e){return Ze.createElement(ff,{...e},Ze.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return Ze.createElement(ff,{...e},Ze.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return Ze.createElement(ff,{...e},Ze.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return Ze.createElement(ff,{...e},Ze.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return Ze.createElement("div",{className:"Toastify__spinner"})}};function d7(e){const[,o]=B.useReducer($=>$+1,0),[i,r]=B.useState([]),d=B.useRef(null),m=B.useRef(new Map).current,x=$=>i.indexOf($)!==-1,c=B.useRef({toastKey:1,displayedToast:0,count:0,queue:[],props:e,containerId:null,isToastActive:x,getToast:$=>m.get($)}).current;function L($){let{containerId:U}=$;const{limit:q}=c.props;!q||U&&c.containerId!==U||(c.count-=c.queue.length,c.queue=[])}function T($){r(U=>$==null?[]:U.filter(q=>q!==$))}function P(){const{toastContent:$,toastProps:U,staleId:q}=c.queue.shift();N($,U,q)}function D($,U){let{delay:q,staleId:H,...G}=U;if(!em($)||function(Re){return!d.current||c.props.enableMultiContainer&&Re.containerId!==c.props.containerId||m.has(Re.toastId)&&Re.updateId==null}(G))return;const{toastId:te,updateId:oe,data:Ce}=G,{props:ae}=c,Ne=()=>T(te),Fe=oe==null;Fe&&c.count++;const ye={...ae,style:ae.toastStyle,key:c.toastKey++,...Object.fromEntries(Object.entries(G).filter(Re=>{let[dt,Xe]=Re;return Xe!=null})),toastId:te,updateId:oe,data:Ce,closeToast:Ne,isIn:!1,className:Mf(G.className||ae.toastClassName),bodyClassName:Mf(G.bodyClassName||ae.bodyClassName),progressClassName:Mf(G.progressClassName||ae.progressClassName),autoClose:!G.isLoading&&(Ke=G.autoClose,Me=ae.autoClose,Ke===!1||tp(Ke)&&Ke>0?Ke:Me),deleteToast(){const Re=b3(m.get(te),"removed");m.delete(te),Lo.emit(4,Re);const dt=c.queue.length;if(c.count=te==null?c.count-c.displayedToast:c.count-1,c.count<0&&(c.count=0),dt>0){const Xe=te==null?c.props.limit:1;if(dt===1||Xe===1)c.displayedToast++,P();else{const ht=Xe>dt?dt:Xe;c.displayedToast=ht;for(let Pe=0;Pe<ht;Pe++)P()}}else o()}};var Ke,Me;ye.iconOut=function(Re){let{theme:dt,type:Xe,isLoading:ht,icon:Pe}=Re,ke=null;const de={theme:dt,type:Xe};return Pe===!1||(bs(Pe)?ke=Pe(de):B.isValidElement(Pe)?ke=B.cloneElement(Pe,de):I1(Pe)||tp(Pe)?ke=Pe:ht?ke=tm.spinner():(je=>je in tm)(Xe)&&(ke=tm[Xe](de))),ke}(ye),bs(G.onOpen)&&(ye.onOpen=G.onOpen),bs(G.onClose)&&(ye.onClose=G.onClose),ye.closeButton=ae.closeButton,G.closeButton===!1||em(G.closeButton)?ye.closeButton=G.closeButton:G.closeButton===!0&&(ye.closeButton=!em(ae.closeButton)||ae.closeButton);let qe=$;B.isValidElement($)&&!I1($.type)?qe=B.cloneElement($,{closeToast:Ne,toastProps:ye,data:Ce}):bs($)&&(qe=$({closeToast:Ne,toastProps:ye,data:Ce})),ae.limit&&ae.limit>0&&c.count>ae.limit&&Fe?c.queue.push({toastContent:qe,toastProps:ye,staleId:H}):tp(q)?setTimeout(()=>{N(qe,ye,H)},q):N(qe,ye,H)}function N($,U,q){const{toastId:H}=U;q&&m.delete(q);const G={content:$,props:U};m.set(H,G),r(te=>[...te,H].filter(oe=>oe!==q)),Lo.emit(4,b3(G,G.props.updateId==null?"added":"updated"))}return B.useEffect(()=>(c.containerId=e.containerId,Lo.cancelEmit(3).on(0,D).on(1,$=>d.current&&T($)).on(5,L).emit(2,c),()=>{m.clear(),Lo.emit(3,c)}),[]),B.useEffect(()=>{c.props=e,c.isToastActive=x,c.displayedToast=i.length}),{getToastToRender:function($){const U=new Map,q=Array.from(m.values());return e.newestOnTop&&q.reverse(),q.forEach(H=>{const{position:G}=H.props;U.has(G)||U.set(G,[]),U.get(G).push(H)}),Array.from(U,H=>$(H[0],H[1]))},containerRef:d,isToastActive:x}}function C3(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function S3(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function h7(e){const[o,i]=B.useState(!1),[r,d]=B.useState(!1),m=B.useRef(null),x=B.useRef({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,c=B.useRef(e),{autoClose:L,pauseOnHover:T,closeToast:P,onClick:D,closeOnClick:N}=e;function $(Ce){if(e.draggable){Ce.nativeEvent.type==="touchstart"&&Ce.nativeEvent.preventDefault(),x.didMove=!1,document.addEventListener("mousemove",G),document.addEventListener("mouseup",te),document.addEventListener("touchmove",G),document.addEventListener("touchend",te);const ae=m.current;x.canCloseOnClick=!0,x.canDrag=!0,x.boundingRect=ae.getBoundingClientRect(),ae.style.transition="",x.x=C3(Ce.nativeEvent),x.y=S3(Ce.nativeEvent),e.draggableDirection==="x"?(x.start=x.x,x.removalDistance=ae.offsetWidth*(e.draggablePercent/100)):(x.start=x.y,x.removalDistance=ae.offsetHeight*(e.draggablePercent===80?1.5*e.draggablePercent:e.draggablePercent/100))}}function U(Ce){if(x.boundingRect){const{top:ae,bottom:Ne,left:Fe,right:ye}=x.boundingRect;Ce.nativeEvent.type!=="touchend"&&e.pauseOnHover&&x.x>=Fe&&x.x<=ye&&x.y>=ae&&x.y<=Ne?H():q()}}function q(){i(!0)}function H(){i(!1)}function G(Ce){const ae=m.current;x.canDrag&&ae&&(x.didMove=!0,o&&H(),x.x=C3(Ce),x.y=S3(Ce),x.delta=e.draggableDirection==="x"?x.x-x.start:x.y-x.start,x.start!==x.x&&(x.canCloseOnClick=!1),ae.style.transform=`translate${e.draggableDirection}(${x.delta}px)`,ae.style.opacity=""+(1-Math.abs(x.delta/x.removalDistance)))}function te(){document.removeEventListener("mousemove",G),document.removeEventListener("mouseup",te),document.removeEventListener("touchmove",G),document.removeEventListener("touchend",te);const Ce=m.current;if(x.canDrag&&x.didMove&&Ce){if(x.canDrag=!1,Math.abs(x.delta)>x.removalDistance)return d(!0),void e.closeToast();Ce.style.transition="transform 0.2s, opacity 0.2s",Ce.style.transform=`translate${e.draggableDirection}(0)`,Ce.style.opacity="1"}}B.useEffect(()=>{c.current=e}),B.useEffect(()=>(m.current&&m.current.addEventListener("d",q,{once:!0}),bs(e.onOpen)&&e.onOpen(B.isValidElement(e.children)&&e.children.props),()=>{const Ce=c.current;bs(Ce.onClose)&&Ce.onClose(B.isValidElement(Ce.children)&&Ce.children.props)}),[]),B.useEffect(()=>(e.pauseOnFocusLoss&&(document.hasFocus()||H(),window.addEventListener("focus",q),window.addEventListener("blur",H)),()=>{e.pauseOnFocusLoss&&(window.removeEventListener("focus",q),window.removeEventListener("blur",H))}),[e.pauseOnFocusLoss]);const oe={onMouseDown:$,onTouchStart:$,onMouseUp:U,onTouchEnd:U};return L&&T&&(oe.onMouseEnter=H,oe.onMouseLeave=q),N&&(oe.onClick=Ce=>{D&&D(Ce),x.canCloseOnClick&&P()}),{playToast:q,pauseToast:H,isRunning:o,preventExitTransition:r,toastRef:m,eventHandlers:oe}}function q5(e){let{closeToast:o,theme:i,ariaLabel:r="close"}=e;return Ze.createElement("button",{className:`Toastify__close-button Toastify__close-button--${i}`,type:"button",onClick:d=>{d.stopPropagation(),o(d)},"aria-label":r},Ze.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Ze.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function p7(e){let{delay:o,isRunning:i,closeToast:r,type:d="default",hide:m,className:x,style:c,controlledProgress:L,progress:T,rtl:P,isIn:D,theme:N}=e;const $=m||L&&T===0,U={...c,animationDuration:`${o}ms`,animationPlayState:i?"running":"paused",opacity:$?0:1};L&&(U.transform=`scaleX(${T})`);const q=vu("Toastify__progress-bar",L?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${N}`,`Toastify__progress-bar--${d}`,{"Toastify__progress-bar--rtl":P}),H=bs(x)?x({rtl:P,type:d,defaultClassName:q}):vu(q,x);return Ze.createElement("div",{role:"progressbar","aria-hidden":$?"true":"false","aria-label":"notification timer",className:H,style:U,[L&&T>=1?"onTransitionEnd":"onAnimationEnd"]:L&&T<1?null:()=>{D&&r()}})}const f7=e=>{const{isRunning:o,preventExitTransition:i,toastRef:r,eventHandlers:d}=h7(e),{closeButton:m,children:x,autoClose:c,onClick:L,type:T,hideProgressBar:P,closeToast:D,transition:N,position:$,className:U,style:q,bodyClassName:H,bodyStyle:G,progressClassName:te,progressStyle:oe,updateId:Ce,role:ae,progress:Ne,rtl:Fe,toastId:ye,deleteToast:Ke,isIn:Me,isLoading:qe,iconOut:Re,closeOnClick:dt,theme:Xe}=e,ht=vu("Toastify__toast",`Toastify__toast-theme--${Xe}`,`Toastify__toast--${T}`,{"Toastify__toast--rtl":Fe},{"Toastify__toast--close-on-click":dt}),Pe=bs(U)?U({rtl:Fe,position:$,type:T,defaultClassName:ht}):vu(ht,U),ke=!!Ne||!c,de={closeToast:D,type:T,theme:Xe};let je=null;return m===!1||(je=bs(m)?m(de):B.isValidElement(m)?B.cloneElement(m,de):q5(de)),Ze.createElement(N,{isIn:Me,done:Ke,position:$,preventExitTransition:i,nodeRef:r},Ze.createElement("div",{id:ye,onClick:L,className:Pe,...d,style:q,ref:r},Ze.createElement("div",{...Me&&{role:ae},className:bs(H)?H({type:T}):vu("Toastify__toast-body",H),style:G},Re!=null&&Ze.createElement("div",{className:vu("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!qe})},Re),Ze.createElement("div",null,x)),je,Ze.createElement(p7,{...Ce&&!ke?{key:`pb-${Ce}`}:{},rtl:Fe,theme:Xe,delay:c,isRunning:o,isIn:Me,closeToast:D,hide:P,type:T,style:oe,className:te,controlledProgress:ke,progress:Ne||0})))},l0=function(e,o){return o===void 0&&(o=!1),{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:o}},m7=a0(l0("bounce",!0));a0(l0("slide",!0));a0(l0("zoom"));a0(l0("flip"));const Zm=B.forwardRef((e,o)=>{const{getToastToRender:i,containerRef:r,isToastActive:d}=d7(e),{className:m,style:x,rtl:c,containerId:L}=e;function T(P){const D=vu("Toastify__toast-container",`Toastify__toast-container--${P}`,{"Toastify__toast-container--rtl":c});return bs(m)?m({position:P,rtl:c,defaultClassName:D}):vu(D,Mf(m))}return B.useEffect(()=>{o&&(o.current=r.current)},[]),Ze.createElement("div",{ref:r,className:"Toastify",id:L},i((P,D)=>{const N=D.length?{...x}:{...x,pointerEvents:"none"};return Ze.createElement("div",{className:T(P),style:N,key:`container-${P}`},D.map(($,U)=>{let{content:q,props:H}=$;return Ze.createElement(f7,{...H,isIn:d(H.toastId),style:{...H.style,"--nth":U+1,"--len":D.length},key:`toast-${H.key}`},q)}))}))});Zm.displayName="ToastContainer",Zm.defaultProps={position:"top-right",transition:m7,autoClose:5e3,closeButton:q5,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let nm,v1=new Map,Jh=[],g7=1;function W5(){return""+g7++}function y7(e){return e&&(I1(e.toastId)||tp(e.toastId))?e.toastId:W5()}function np(e,o){return v1.size>0?Lo.emit(0,e,o):Jh.push({content:e,options:o}),o.toastId}function jf(e,o){return{...o,type:o&&o.type||e,toastId:y7(o)}}function mf(e){return(o,i)=>np(o,jf(e,i))}function Kn(e,o){return np(e,jf("default",o))}Kn.loading=(e,o)=>np(e,jf("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...o})),Kn.promise=function(e,o,i){let r,{pending:d,error:m,success:x}=o;d&&(r=I1(d)?Kn.loading(d,i):Kn.loading(d.render,{...i,...d}));const c={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},L=(P,D,N)=>{if(D==null)return void Kn.dismiss(r);const $={type:P,...c,...i,data:N},U=I1(D)?{render:D}:D;return r?Kn.update(r,{...$,...U}):Kn(U.render,{...$,...U}),N},T=bs(e)?e():e;return T.then(P=>L("success",x,P)).catch(P=>L("error",m,P)),T},Kn.success=mf("success"),Kn.info=mf("info"),Kn.error=mf("error"),Kn.warning=mf("warning"),Kn.warn=Kn.warning,Kn.dark=(e,o)=>np(e,jf("default",{theme:"dark",...o})),Kn.dismiss=e=>{v1.size>0?Lo.emit(1,e):Jh=Jh.filter(o=>e!=null&&o.options.toastId!==e)},Kn.clearWaitingQueue=function(e){return e===void 0&&(e={}),Lo.emit(5,e)},Kn.isActive=e=>{let o=!1;return v1.forEach(i=>{i.isToastActive&&i.isToastActive(e)&&(o=!0)}),o},Kn.update=function(e,o){o===void 0&&(o={}),setTimeout(()=>{const i=function(r,d){let{containerId:m}=d;const x=v1.get(m||nm);return x&&x.getToast(r)}(e,o);if(i){const{props:r,content:d}=i,m={delay:100,...r,...o,toastId:o.toastId||e,updateId:W5()};m.toastId!==e&&(m.staleId=e);const x=m.render||d;delete m.render,np(x,m)}},0)},Kn.done=e=>{Kn.update(e,{progress:1})},Kn.onChange=e=>(Lo.on(4,e),()=>{Lo.off(4,e)}),Kn.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},Kn.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},Lo.on(2,e=>{nm=e.containerId||e,v1.set(nm,e),Jh.forEach(o=>{Lo.emit(0,o.content,o.options)}),Jh=[]}).on(3,e=>{v1.delete(e.containerId||e),v1.size===0&&Lo.off(0).off(1).off(5)});const Of="/golden_path/assets/logo-CjfPudve.png",v7="1.0.5.4",x7={version:v7};function _7(){const e=qs(),o=ii(),i=x7.version,[r,d]=B.useState({firstName:"",lastName:"",phoneNumber:"",province:"",city:"",avatar:null});B.useEffect(()=>{const c=localStorage.getItem("appVersion");c&&c!==i&&Kn.info(o.formatMessage({id:"newVersionAvailable"},{version:i})),localStorage.setItem("appVersion",i);const L=localStorage.getItem("userProfile");if(L){const T=JSON.parse(L);d(T)}},[i,o]);const m=c=>c.startsWith("+98")?c:`${c}`,x=()=>r.firstName&&r.lastName?`${r.firstName} ${r.lastName}`:o.formatMessage({id:"Username"});return f.jsxs("div",{className:"profile-container",children:[f.jsxs("div",{className:"profile-top",children:[f.jsxs("div",{className:"profile-header",children:[f.jsx("button",{className:"back-arrow10",onClick:()=>e(-1),children:f.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M3.33301 10H16.6663M16.6663 10L11.6663 5M16.6663 10L11.6663 15",stroke:"#1E2023",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),f.jsx("h1",{className:"profile-title",children:f.jsx(pt,{id:"profileTitle"})})]}),f.jsxs("div",{className:"profile-info",children:[f.jsx("div",{className:"profile-avatar-container",children:f.jsx("div",{className:"profile-avatar",children:r.avatar?f.jsx("img",{src:r.avatar,alt:"Profile",className:"profile-avatar-image"}):f.jsxs("svg",{width:"55",height:"56",viewBox:"0 0 55 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsxs("g",{clipPath:"url(#clip0_224_9691)",children:[f.jsx("mask",{id:"mask0_224_9691",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"55",height:"56",children:f.jsx("path",{d:"M27.4999 55.4287C12.3749 55.4287 0.0712891 43.125 0.0712891 28.0001C0.0712891 12.8752 12.3749 0.571533 27.4999 0.571533C42.6248 0.571533 54.9284 12.8752 54.9284 28.0001C54.9284 43.125 42.6248 55.4287 27.4999 55.4287Z",fill:"white"})}),f.jsxs("g",{mask:"url(#mask0_224_9691)",children:[f.jsx("path",{d:"M27.4999 55.4287C12.3749 55.4287 0.0712891 43.125 0.0712891 28.0001C0.0712891 12.8752 12.3749 0.571533 27.4999 0.571533C42.6248 0.571533 54.9284 12.8752 54.9284 28.0001C54.9284 43.125 42.6248 55.4287 27.4999 55.4287Z",fill:"#E7F1FE"}),f.jsx("path",{opacity:"0.5",fillRule:"evenodd",clipRule:"evenodd",d:"M32.7994 31.9187H18.2784C12.5738 31.9187 7.90625 36.7063 7.90625 42.6051V49.2522C9.21312 50.3016 10.603 51.2185 12.0551 52.0092C16.0774 54.1914 20.6848 55.4289 25.5389 55.4289C30.3931 55.4289 34.9983 54.1914 39.0227 52.0092C40.4727 51.2185 41.8646 50.3016 43.1715 49.2522V42.6051C43.1715 36.7063 38.5248 31.9187 32.7994 31.9187Z",fill:"url(#paint0_linear_224_9691)"}),f.jsx("path",{opacity:"0.5",fillRule:"evenodd",clipRule:"evenodd",d:"M25.5378 9.71313C19.7909 9.71313 15.0889 14.3942 15.0889 20.1621C15.0889 25.93 19.7909 30.6111 25.5378 30.6111C31.3056 30.6111 35.9868 25.93 35.9868 20.1621C35.9868 14.3942 31.3056 9.71313 25.5378 9.71313Z",fill:"url(#paint1_linear_224_9691)"}),f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M26.8496 11.0208C21.4618 11.0208 17.0537 15.4093 17.0537 20.8167C17.0537 26.224 21.4618 30.6125 26.8496 30.6125C32.257 30.6125 36.6456 26.224 36.6456 20.8167C36.6456 15.4093 32.257 11.0208 26.8496 11.0208Z",fill:"url(#paint2_linear_224_9691)"}),f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M34.3491 33.8762H20.6348C15.247 33.8762 10.8389 38.2648 10.8389 43.6722V49.7652C12.0732 50.7271 13.3858 51.5677 14.7572 52.2926C18.5561 54.2929 22.9074 55.4272 27.4919 55.4272C32.0764 55.4272 36.4258 54.2929 40.2266 52.2926C41.5961 51.5677 42.9106 50.7271 44.1449 49.7652V43.6722C44.1449 38.2648 39.7564 33.8762 34.3491 33.8762Z",fill:"url(#paint3_linear_224_9691)"})]})]}),f.jsxs("defs",{children:[f.jsxs("linearGradient",{id:"paint0_linear_224_9691",x1:"71.0299",y1:"37.1067",x2:"13.64",y2:"56.0111",gradientUnits:"userSpaceOnUse",children:[f.jsx("stop",{stopColor:"#0F71EF"}),f.jsx("stop",{offset:"1",stopColor:"white"})]}),f.jsxs("linearGradient",{id:"paint1_linear_224_9691",x1:"49.2108",y1:"25.9274",x2:"19.6461",y2:"18.01",gradientUnits:"userSpaceOnUse",children:[f.jsx("stop",{stopColor:"#858585"}),f.jsx("stop",{offset:"1",stopColor:"white"})]}),f.jsxs("linearGradient",{id:"paint2_linear_224_9691",x1:"33.9429",y1:"22.7948",x2:"-0.159482",y2:"11.0208",gradientUnits:"userSpaceOnUse",children:[f.jsx("stop",{stopColor:"#0F71EF"}),f.jsx("stop",{offset:"1",stopColor:"white"})]}),f.jsxs("linearGradient",{id:"paint3_linear_224_9691",x1:"14.1789",y1:"48.5383",x2:"38.6573",y2:"29.0982",gradientUnits:"userSpaceOnUse",children:[f.jsx("stop",{stopColor:"#0F71EF"}),f.jsx("stop",{offset:"1",stopColor:"white"})]}),f.jsx("clipPath",{id:"clip0_224_9691",children:f.jsx("rect",{width:"54.8571",height:"54.8571",fill:"white",transform:"translate(0.0712891 0.571533)"})})]})]})})}),f.jsxs("div",{className:"user-info",children:[f.jsx("p",{className:"user-name",children:x()}),f.jsx("p",{className:"user-phone",children:r.phoneNumber?m(r.phoneNumber):f.jsx(pt,{id:"phoneNumber"})})]}),f.jsxs("button",{className:"complete-profile-btn",onClick:()=>e("/pinfo"),children:[f.jsx(pt,{id:"completeProfile"}),f.jsx("svg",{width:"19",height:"18",viewBox:"0 0 19 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.1161 3.32293C12.3519 3.5251 12.3793 3.88021 12.1771 4.11608L7.99086 9.00001L12.1771 13.8839C12.3793 14.1198 12.3519 14.4749 12.1161 14.6771C11.8802 14.8793 11.5251 14.852 11.3229 14.6161L6.82292 9.36608C6.64236 9.15543 6.64236 8.84459 6.82292 8.63394L11.3229 3.38394C11.5251 3.14807 11.8802 3.12075 12.1161 3.32293Z",fill:"white"})})]})]})]}),f.jsxs("div",{className:"profile-sections",children:[f.jsxs("div",{className:"profile-section",children:[f.jsx("h2",{className:"section-title",children:f.jsx(pt,{id:"accountSection"})}),f.jsxs("div",{className:"section-item",children:[f.jsx("span",{className:"item-icon",children:f.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 22 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.9997 1.646C8.59493 1.646 6.64551 3.59542 6.64551 6.00016C6.64551 8.4049 8.59493 10.3543 10.9997 10.3543C13.4044 10.3543 15.3538 8.4049 15.3538 6.00016C15.3538 3.59542 13.4044 1.646 10.9997 1.646ZM8.02051 6.00016C8.02051 4.35481 9.35433 3.021 10.9997 3.021C12.645 3.021 13.9788 4.35481 13.9788 6.00016C13.9788 7.64551 12.645 8.97933 10.9997 8.97933C9.35433 8.97933 8.02051 7.64551 8.02051 6.00016Z",fill:"#1E2023"}),f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.9997 11.7293C9.13028 11.7293 7.40406 12.1609 6.12131 12.8939C4.858 13.6157 3.89551 14.7178 3.89551 16.0835C3.89551 17.4492 4.858 18.5512 6.12131 19.2731C7.40406 20.0061 9.13028 20.4377 10.9997 20.4377C12.8691 20.4377 14.5953 20.0061 15.878 19.2731C17.1413 18.5512 18.1038 17.4492 18.1038 16.0835C18.1038 14.7178 17.1413 13.6157 15.878 12.8939C14.5953 12.1609 12.8691 11.7293 10.9997 11.7293ZM5.27051 16.0835C5.27051 15.4242 5.74443 14.6929 6.8035 14.0877C7.84312 13.4936 9.32524 13.1043 10.9997 13.1043C12.6741 13.1043 14.1562 13.4936 15.1958 14.0877C16.2549 14.6929 16.7288 15.4242 16.7288 16.0835C16.7288 16.7428 16.2549 17.4741 15.1958 18.0793C14.1562 18.6734 12.6741 19.0627 10.9997 19.0627C9.32524 19.0627 7.84312 18.6734 6.8035 18.0793C5.74443 17.4741 5.27051 16.7428 5.27051 16.0835Z",fill:"#1E2023"})]})}),f.jsx("span",{className:"item-text",onClick:()=>e("/pinfo"),children:f.jsx(pt,{id:"accountInfo"})}),f.jsx("span",{className:"item-arrow",children:f.jsx("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3254 3.45388C10.5351 3.63359 10.5593 3.94924 10.3796 4.1589L6.65854 8.50017L10.3796 12.8414C10.5593 13.0511 10.5351 13.3668 10.3254 13.5465C10.1157 13.7262 9.80008 13.7019 9.62037 13.4922L5.62037 8.82557C5.45988 8.63832 5.45988 8.36202 5.62037 8.17478L9.62037 3.50811C9.80008 3.29845 10.1157 3.27417 10.3254 3.45388Z",fill:"#858585"})})})]}),f.jsxs("div",{className:"section-item",children:[f.jsx("span",{className:"item-icon",children:f.jsx("svg",{width:"24",height:"24",viewBox:"0 0 22 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.58301 3.021C3.44392 3.021 2.52051 3.94441 2.52051 5.0835C2.52051 6.22258 3.44392 7.146 4.58301 7.146C5.72209 7.146 6.64551 6.22258 6.64551 5.0835C6.64551 3.94441 5.72209 3.021 4.58301 3.021ZM1.14551 5.0835C1.14551 3.18502 2.68453 1.646 4.58301 1.646C6.48149 1.646 8.02051 3.18502 8.02051 5.0835C8.02051 6.98197 6.48149 8.521 4.58301 8.521C2.68453 8.521 1.14551 6.98197 1.14551 5.0835ZM9.39551 5.0835C9.39551 4.7038 9.70331 4.396 10.083 4.396H14.7872C17.3092 4.396 18.2683 7.68958 16.1406 9.04356L6.59695 15.1168C5.62982 15.7322 6.06578 17.2293 7.21211 17.2293H10.2566L10.0552 17.028C9.78672 16.7595 9.78672 16.3242 10.0552 16.0557C10.3237 15.7872 10.759 15.7872 11.0275 16.0557L12.4025 17.4307C12.671 17.6992 12.671 18.1345 12.4025 18.403L11.0275 19.778C10.759 20.0464 10.3237 20.0464 10.0552 19.778C9.78672 19.5095 9.78672 19.0742 10.0552 18.8057L10.2566 18.6043H7.21211C4.69014 18.6043 3.73107 15.3107 5.85875 13.9568L15.4024 7.88352C16.3695 7.26808 15.9336 5.771 14.7872 5.771H10.083C9.70331 5.771 9.39551 5.46319 9.39551 5.0835ZM17.4163 15.8543C16.2773 15.8543 15.3538 16.7777 15.3538 17.9168C15.3538 19.0559 16.2773 19.9793 17.4163 19.9793C18.5554 19.9793 19.4788 19.0559 19.4788 17.9168C19.4788 16.7777 18.5554 15.8543 17.4163 15.8543ZM13.9788 17.9168C13.9788 16.0183 15.5179 14.4793 17.4163 14.4793C19.3148 14.4793 20.8538 16.0183 20.8538 17.9168C20.8538 19.8153 19.3148 21.3543 17.4163 21.3543C15.5179 21.3543 13.9788 19.8153 13.9788 17.9168Z",fill:"#1E2023"})})}),f.jsx("span",{className:"item-text",onClick:()=>e("/proutes"),children:f.jsx(pt,{id:"myRoutes"})}),f.jsx("span",{className:"item-arrow",children:f.jsx("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3254 3.45388C10.5351 3.63359 10.5593 3.94924 10.3796 4.1589L6.65854 8.50017L10.3796 12.8414C10.5593 13.0511 10.5351 13.3668 10.3254 13.5465C10.1157 13.7262 9.80008 13.7019 9.62037 13.4922L5.62037 8.82557C5.45988 8.63832 5.45988 8.36202 5.62037 8.17478L9.62037 3.50811C9.80008 3.29845 10.1157 3.27417 10.3254 3.45388Z",fill:"#858585"})})})]}),f.jsxs("div",{className:"section-item",children:[f.jsx("span",{className:"item-icon",children:f.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 22 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{d:"M8.25 5.31266C7.87031 5.31266 7.5625 5.62047 7.5625 6.00016C7.5625 6.37986 7.87031 6.68766 8.25 6.68766H13.75C14.1297 6.68766 14.4375 6.37986 14.4375 6.00016C14.4375 5.62047 14.1297 5.31266 13.75 5.31266H8.25Z",fill:"#1E2023"}),f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.9473 1.646C9.04744 1.64598 7.55073 1.64597 6.38117 1.80492C5.18028 1.96812 4.22225 2.31029 3.46944 3.07126C2.71764 3.83121 2.38051 4.7966 2.21953 6.00696C2.06248 7.18772 2.06249 8.6994 2.0625 10.6211V15.2943C2.06249 16.6762 2.06248 17.7703 2.15051 18.5941C2.2375 19.4081 2.4241 20.1425 2.95702 20.6337C3.38457 21.0277 3.92527 21.2761 4.50235 21.3421C5.22419 21.4247 5.89819 21.08 6.56213 20.6097C7.23399 20.1338 8.04903 19.4129 9.07733 18.5034L9.11079 18.4738C9.58752 18.0522 9.91029 17.7676 10.1796 17.5707C10.4398 17.3804 10.5987 17.3116 10.7327 17.2846C10.9092 17.2491 11.0908 17.2491 11.2673 17.2846C11.4013 17.3116 11.5602 17.3804 11.8204 17.5707C12.0897 17.7676 12.4125 18.0522 12.8892 18.4738L12.9227 18.5035C13.951 19.413 14.766 20.1338 15.4379 20.6097C16.1018 21.08 16.7758 21.4247 17.4977 21.3421C18.0747 21.2761 18.6154 21.0277 19.043 20.6337C19.5759 20.1425 19.7625 19.4081 19.8495 18.5941C19.9375 17.7703 19.9375 16.6762 19.9375 15.2943V10.6211C19.9375 8.6994 19.9375 7.1877 19.7805 6.00696C19.6195 4.7966 19.2824 3.83121 18.5306 3.07126C17.7777 2.31029 16.8197 1.96812 15.6188 1.80492C14.4493 1.64597 12.9526 1.64598 11.0527 1.646H10.9473ZM4.44693 4.03828C4.9023 3.57798 5.52064 3.30951 6.56634 3.16739C7.63258 3.02249 9.03582 3.021 11 3.021C12.9642 3.021 14.3674 3.02249 15.4337 3.16739C16.4794 3.30951 17.0977 3.57798 17.5531 4.03828C18.0095 4.49961 18.2764 5.12767 18.4175 6.18824C18.5611 7.26784 18.5625 8.68804 18.5625 10.6729V15.2502C18.5625 16.6859 18.5615 17.7062 18.4823 18.448C18.401 19.2082 18.2512 19.4935 18.1112 19.6226C17.8968 19.8201 17.6273 19.9433 17.3413 19.976C17.1583 19.997 16.8516 19.9261 16.2327 19.4877C15.6289 19.0601 14.8694 18.3896 13.8002 17.4439L13.7762 17.4227C13.3295 17.0276 12.9591 16.6999 12.632 16.4608C12.2901 16.2108 11.9453 16.0186 11.5388 15.9367C11.1831 15.865 10.8169 15.865 10.4612 15.9367C10.0547 16.0186 9.70987 16.2108 9.36797 16.4608C9.04092 16.6999 8.67049 17.0276 8.22383 17.4226L8.19983 17.4439C7.13063 18.3896 6.37108 19.0601 5.76735 19.4877C5.14842 19.9261 4.84167 19.997 4.65866 19.976C4.37267 19.9433 4.10316 19.8201 3.88884 19.6226C3.74883 19.4935 3.59896 19.2082 3.51772 18.448C3.43845 17.7062 3.4375 16.6859 3.4375 15.2502V10.6729C3.4375 8.68804 3.43893 7.26784 3.58252 6.18824C3.72358 5.12767 3.99055 4.49961 4.44693 4.03828Z",fill:"#1E2023"})]})}),f.jsx("span",{className:"item-text",onClick:()=>e("/pfp"),children:f.jsx(pt,{id:"Savedlocations"})}),f.jsx("span",{className:"item-arrow",children:f.jsx("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3254 3.45388C10.5351 3.63359 10.5593 3.94924 10.3796 4.1589L6.65854 8.50017L10.3796 12.8414C10.5593 13.0511 10.5351 13.3668 10.3254 13.5465C10.1157 13.7262 9.80008 13.7019 9.62037 13.4922L5.62037 8.82557C5.45988 8.63832 5.45988 8.36202 5.62037 8.17478L9.62037 3.50811C9.80008 3.29845 10.1157 3.27417 10.3254 3.45388Z",fill:"#858585"})})})]})]}),f.jsxs("div",{className:"profile-section",children:[f.jsx("h2",{className:"section-title",children:f.jsx(pt,{id:"settings"})}),f.jsxs("div",{className:"section-item",children:[f.jsx("span",{className:"item-icon",children:f.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 22 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{d:"M20.5533 19.1314L16.6861 9.76425C16.6147 9.59126 16.4935 9.44337 16.338 9.3393C16.1824 9.23524 15.9995 9.17969 15.8123 9.17969C15.6252 9.17969 15.4422 9.23524 15.2867 9.3393C15.1311 9.44337 15.01 9.59126 14.9386 9.76425L11.0714 19.1314C11.0233 19.2463 10.9984 19.3696 10.998 19.4941C10.9977 19.6186 11.022 19.742 11.0695 19.8571C11.117 19.9722 11.1868 20.0768 11.2749 20.1649C11.3629 20.2529 11.4675 20.3227 11.5826 20.3702C11.6977 20.4178 11.8211 20.4421 11.9456 20.4418C12.0702 20.4415 12.1934 20.4166 12.3083 20.3685C12.4232 20.3204 12.5274 20.2501 12.615 20.1616C12.7027 20.0732 12.772 19.9682 12.8189 19.8529L13.6065 17.9455H18.0181L18.8057 19.8529C18.8771 20.0259 18.9983 20.1739 19.1539 20.278C19.3095 20.3821 19.4925 20.4377 19.6797 20.4377C19.8351 20.4376 19.988 20.3992 20.125 20.326C20.2619 20.2527 20.3787 20.1468 20.4651 20.0177C20.5514 19.8886 20.6046 19.7401 20.6199 19.5855C20.6352 19.431 20.6122 19.275 20.5529 19.1314H20.5533ZM14.3873 16.0549L15.8125 12.6023L17.2378 16.0549H14.3873Z",fill:"#1E2023",stroke:"white",strokeWidth:"0.3"}),f.jsx("path",{d:"M11.5087 15.2348C11.6556 15.032 11.716 14.7791 11.6766 14.5318C11.6372 14.2845 11.5013 14.0629 11.2986 13.9157C11.29 13.9093 10.6541 13.4375 9.7307 12.4234C11.4344 10.1168 12.3995 7.49273 12.7931 6.25781H14.1797C14.4304 6.25781 14.6708 6.15822 14.8481 5.98094C15.0254 5.80366 15.125 5.56321 15.125 5.3125C15.125 5.06179 15.0254 4.82134 14.8481 4.64406C14.6708 4.46678 14.4304 4.36719 14.1797 4.36719H9.19531V3.50781C9.19531 3.2571 9.09572 3.01666 8.91844 2.83938C8.74116 2.6621 8.50071 2.5625 8.25 2.5625C7.99929 2.5625 7.75884 2.6621 7.58156 2.83938C7.40428 3.01666 7.30469 3.2571 7.30469 3.50781V4.36719H2.32031C2.0696 4.36719 1.82916 4.46678 1.65188 4.64406C1.4746 4.82134 1.375 5.06179 1.375 5.3125C1.375 5.56321 1.4746 5.80366 1.65188 5.98094C1.82916 6.15822 2.0696 6.25781 2.32031 6.25781H10.7959C10.3868 7.41582 9.63359 9.24414 8.48461 10.9139C7.13496 9.12297 6.63352 7.9641 6.62965 7.95465C6.53084 7.72631 6.346 7.54612 6.11521 7.45318C5.88442 7.36024 5.62629 7.36203 5.39682 7.45816C5.16734 7.5543 4.98501 7.73702 4.88938 7.96671C4.79375 8.1964 4.79253 8.45453 4.88598 8.68512C4.9109 8.74441 5.51117 10.1559 7.1573 12.2915C7.19684 12.3426 7.23594 12.3925 7.27504 12.4423C5.58894 14.348 3.93465 15.53 3.24242 15.9116C3.02231 16.0317 2.8589 16.2342 2.78815 16.4748C2.7174 16.7153 2.7451 16.9741 2.86516 17.1942C2.98521 17.4143 3.18779 17.5777 3.42833 17.6485C3.66887 17.7192 3.92766 17.6915 4.14777 17.5715C4.24059 17.5208 6.23605 16.4161 8.51469 13.8938C9.48234 14.9285 10.1475 15.4166 10.1875 15.445C10.288 15.518 10.402 15.5705 10.5228 15.5994C10.6437 15.6284 10.769 15.6332 10.8918 15.6136C11.0145 15.5941 11.1321 15.5505 11.238 15.4855C11.3439 15.4204 11.4359 15.3351 11.5087 15.2344V15.2348Z",fill:"#1E2023",stroke:"white",strokeWidth:"0.3"})]})}),f.jsx("span",{className:"item-text",onClick:()=>e("/plang"),children:f.jsx(pt,{id:"language"})}),f.jsx("span",{className:"item-arrow",children:f.jsx("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3254 3.45388C10.5351 3.63359 10.5593 3.94924 10.3796 4.1589L6.65854 8.50017L10.3796 12.8414C10.5593 13.0511 10.5351 13.3668 10.3254 13.5465C10.1157 13.7262 9.80008 13.7019 9.62037 13.4922L5.62037 8.82557C5.45988 8.63832 5.45988 8.36202 5.62037 8.17478L9.62037 3.50811C9.80008 3.29845 10.1157 3.27417 10.3254 3.45388Z",fill:"#858585"})})})]}),f.jsxs("div",{className:"section-item",children:[f.jsx("span",{className:"item-icon",children:f.jsx("svg",{width:"24",height:"24",viewBox:"0 0 22 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.0004 1.646C7.07692 1.646 3.89628 4.82664 3.89628 8.75016V9.39559C3.89628 10.0344 3.70718 10.659 3.35281 11.1905L2.29992 12.7699C1.07792 14.6029 2.01082 17.0944 4.13619 17.674C4.82884 17.8629 5.52733 18.0227 6.22987 18.1534L6.23161 18.1581C6.93652 20.039 8.82056 21.3543 11.0004 21.3543C13.1802 21.3543 15.0642 20.039 15.7692 18.1581L15.7709 18.1534C16.4735 18.0227 17.172 17.863 17.8647 17.674C19.9901 17.0944 20.923 14.6029 19.701 12.7699L18.6481 11.1905C18.2937 10.659 18.1046 10.0344 18.1046 9.39559V8.75016C18.1046 4.82664 14.924 1.646 11.0004 1.646ZM14.0955 18.409C12.0394 18.6547 9.96131 18.6547 7.90527 18.409C8.55698 19.3454 9.6905 19.9793 11.0004 19.9793C12.3103 19.9793 13.4438 19.3454 14.0955 18.409ZM5.27128 8.75016C5.27128 5.58603 7.83631 3.021 11.0004 3.021C14.1646 3.021 16.7296 5.58603 16.7296 8.75016V9.39559C16.7296 10.3059 16.9991 11.1958 17.504 11.9532L18.5569 13.5326C19.2583 14.5847 18.7228 16.0148 17.5029 16.3475C13.2457 17.5086 8.75521 17.5086 4.49798 16.3475C3.27805 16.0148 2.74258 14.5847 3.44399 13.5326L4.49688 11.9532C5.00183 11.1958 5.27128 10.3059 5.27128 9.39559V8.75016Z",fill:"#1E2023"})})}),f.jsx("span",{className:"item-text",children:f.jsx(pt,{id:"notifications"})}),f.jsx("span",{className:"item-arrow",children:f.jsx("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3254 3.45388C10.5351 3.63359 10.5593 3.94924 10.3796 4.1589L6.65854 8.50017L10.3796 12.8414C10.5593 13.0511 10.5351 13.3668 10.3254 13.5465C10.1157 13.7262 9.80008 13.7019 9.62037 13.4922L5.62037 8.82557C5.45988 8.63832 5.45988 8.36202 5.62037 8.17478L9.62037 3.50811C9.80008 3.29845 10.1157 3.27417 10.3254 3.45388Z",fill:"#858585"})})})]})]}),f.jsxs("div",{className:"profile-section",children:[f.jsx("h2",{className:"section-title",children:f.jsx(pt,{id:"supportSection"})}),f.jsxs("div",{className:"section-item",children:[f.jsx("span",{className:"item-icon",children:f.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 22 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{d:"M12.155 2.22334C12.2157 1.84853 12.57 1.59427 12.9448 1.65495C12.968 1.65939 13.0426 1.67334 13.0818 1.68205C13.16 1.69947 13.2691 1.72629 13.4051 1.76591C13.6772 1.84515 14.0572 1.97569 14.5134 2.18482C15.4266 2.60351 16.642 3.33593 17.9031 4.59708C19.1643 5.85823 19.8967 7.07356 20.3154 7.98681C20.5245 8.44296 20.655 8.82301 20.7343 9.09506C20.7739 9.2311 20.8007 9.34021 20.8181 9.41843C20.8268 9.45754 20.8332 9.48894 20.8376 9.51214L20.8429 9.54074C20.9036 9.91556 20.6517 10.2845 20.2768 10.3452C19.9031 10.4057 19.551 10.1527 19.4888 9.77963C19.4869 9.76962 19.4817 9.7427 19.476 9.71732C19.4647 9.66656 19.4451 9.58605 19.4141 9.47958C19.3521 9.2666 19.2444 8.95005 19.0655 8.55984C18.7081 7.7804 18.0655 6.70406 16.9308 5.56935C15.7961 4.43464 14.7198 3.79206 13.9403 3.43472C13.5501 3.25583 13.2336 3.14809 13.0206 3.08605C12.9141 3.05504 12.7803 3.02432 12.7295 3.01302C12.3565 2.95085 12.0945 2.59709 12.155 2.22334Z",fill:"#1E2023"}),f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.3624 5.38535C12.4667 5.02026 12.8472 4.80886 13.2123 4.91317L13.0234 5.57422C13.2123 4.91317 13.2123 4.91317 13.2123 4.91317L13.2136 4.91355L13.215 4.91396L13.2181 4.91485L13.2252 4.91697L13.2433 4.92262C13.2571 4.92704 13.2744 4.9328 13.295 4.9401C13.3361 4.95471 13.3906 4.97549 13.4573 5.00409C13.5908 5.06132 13.7733 5.14971 13.9974 5.28236C14.4461 5.5479 15.0586 5.98898 15.7782 6.70854C16.4977 7.4281 16.9388 8.0406 17.2044 8.48928C17.337 8.71341 17.4254 8.89589 17.4826 9.02943C17.5112 9.09617 17.532 9.15058 17.5466 9.19175C17.5539 9.21233 17.5597 9.22959 17.5641 9.24341L17.5698 9.26155L17.5719 9.26866L17.5728 9.27171L17.5732 9.27312C17.5732 9.27312 17.5735 9.27444 16.9125 9.46331L17.5735 9.27444C17.6779 9.63952 17.4665 10.02 17.1014 10.1244C16.7394 10.2278 16.3622 10.0208 16.2542 9.66145L16.2508 9.65157C16.2459 9.63779 16.2358 9.61067 16.2188 9.57107C16.1849 9.49193 16.1234 9.36247 16.0211 9.18959C15.8167 8.84425 15.4475 8.32243 14.8059 7.68081C14.1643 7.03919 13.6425 6.67004 13.2971 6.46565C13.1243 6.36334 12.9948 6.30183 12.9157 6.26791C12.876 6.25094 12.8489 6.24083 12.8352 6.23594L12.8253 6.23255C12.4659 6.1245 12.2589 5.74734 12.3624 5.38535Z",fill:"#1E2023"}),f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.59049 4.53954C6.13055 2.99948 8.72943 3.11655 9.80176 5.038L10.3967 6.10402C11.097 7.35877 10.7985 8.94193 9.77343 9.97957C9.75978 9.99827 9.68742 10.1036 9.67841 10.2877C9.6669 10.5227 9.75035 11.066 10.5922 11.9079C11.4339 12.7496 11.9772 12.8332 12.2122 12.8218C12.3965 12.8128 12.5019 12.7404 12.5206 12.7267C13.5583 11.7016 15.1414 11.4032 16.3962 12.1035L17.4622 12.6984C19.3836 13.7707 19.5007 16.3696 17.9606 17.9097C17.1369 18.7335 16.0415 19.4654 14.7543 19.5142C12.8468 19.5865 9.67953 19.0939 6.54289 15.9573C3.40626 12.8207 2.91365 9.65335 2.98597 7.74583C3.03476 6.45865 3.76672 5.36331 4.59049 4.53954ZM8.60109 5.70808C8.05199 4.72418 6.57644 4.49813 5.56276 5.51181C4.85203 6.22255 4.38996 7.00704 4.35998 7.79792C4.29968 9.38865 4.69241 12.1623 7.51517 14.985C10.3379 17.8078 13.1115 18.2005 14.7023 18.1402C15.4931 18.1102 16.2776 17.6482 16.9884 16.9374C18.002 15.9237 17.776 14.4482 16.7921 13.8991L15.7261 13.3042C15.063 12.9341 14.1315 13.0603 13.4776 13.7142C13.4134 13.7784 13.0045 14.1599 12.279 14.1952C11.5363 14.2313 10.6373 13.8976 9.61997 12.8802C8.60228 11.8625 8.26868 10.9633 8.30505 10.2205C8.34058 9.49491 8.72211 9.08644 8.78596 9.02259C9.43983 8.36871 9.5661 7.43722 9.19602 6.7741L8.60109 5.70808Z",fill:"#1E2023"})]})}),f.jsx("span",{className:"item-text",children:f.jsx(pt,{id:"support"})}),f.jsx("span",{className:"item-arrow",children:f.jsx("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3254 3.45388C10.5351 3.63359 10.5593 3.94924 10.3796 4.1589L6.65854 8.50017L10.3796 12.8414C10.5593 13.0511 10.5351 13.3668 10.3254 13.5465C10.1157 13.7262 9.80008 13.7019 9.62037 13.4922L5.62037 8.82557C5.45988 8.63832 5.45988 8.36202 5.62037 8.17478L9.62037 3.50811C9.80008 3.29845 10.1157 3.27417 10.3254 3.45388Z",fill:"#858585"})})})]}),f.jsxs("div",{className:"section-item",children:[f.jsx("span",{className:"item-icon",children:f.jsx("svg",{width:"24",height:"24",viewBox:"0 0 22 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M11 1.64551C16.4423 1.64551 20.8545 6.05769 20.8545 11.5C20.8545 16.9423 16.4423 21.3545 11 21.3545C5.55769 21.3545 1.14551 16.9423 1.14551 11.5C1.14551 6.05769 5.55769 1.64551 11 1.64551ZM11 3.02051C6.31709 3.02051 2.52051 6.81709 2.52051 11.5C2.52051 16.1829 6.31709 19.9795 11 19.9795C15.6829 19.9795 19.4795 16.1829 19.4795 11.5C19.4795 6.81709 15.6829 3.02051 11 3.02051ZM11 14.25C11.5063 14.25 11.917 14.6607 11.917 15.167C11.9168 15.6731 11.5062 16.083 11 16.083C10.4938 16.083 10.0832 15.6731 10.083 15.167C10.083 14.6607 10.4937 14.25 11 14.25ZM11 6.22949C12.3289 6.22949 13.4062 7.30681 13.4062 8.63574C13.4061 9.51867 12.9297 10.2893 12.2236 10.707C12.0434 10.8137 11.8948 10.9307 11.7979 11.0449C11.7039 11.1556 11.6876 11.2279 11.6875 11.2705V12.417C11.6873 12.7965 11.3796 13.1045 11 13.1045C10.6204 13.1045 10.3127 12.7965 10.3125 12.417V11.2705C10.3126 10.807 10.5153 10.4308 10.749 10.1553C10.9799 9.8832 11.2682 9.67547 11.5234 9.52441C11.8286 9.34389 12.0311 9.01286 12.0312 8.63574C12.0312 8.0662 11.5695 7.60449 11 7.60449C10.4305 7.60449 9.96875 8.0662 9.96875 8.63574C9.96857 9.01529 9.66084 9.32324 9.28125 9.32324C8.90166 9.32324 8.59393 9.01529 8.59375 8.63574C8.59375 7.30681 9.67106 6.22949 11 6.22949Z",fill:"#1E2023"})})}),f.jsx("span",{className:"item-text",children:f.jsx(pt,{id:"faq"})}),f.jsx("span",{className:"item-arrow",children:f.jsx("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3254 3.45388C10.5351 3.63359 10.5593 3.94924 10.3796 4.1589L6.65854 8.50017L10.3796 12.8414C10.5593 13.0511 10.5351 13.3668 10.3254 13.5465C10.1157 13.7262 9.80008 13.7019 9.62037 13.4922L5.62037 8.82557C5.45988 8.63832 5.45988 8.36202 5.62037 8.17478L9.62037 3.50811C9.80008 3.29845 10.1157 3.27417 10.3254 3.45388Z",fill:"#858585"})})})]}),f.jsxs("div",{className:"section-item",children:[f.jsx("span",{className:"item-icon",children:f.jsx("svg",{width:"24",height:"24",viewBox:"0 0 22 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.65738 3.48891C6.76701 2.45306 7.64342 1.646 8.70833 1.646H13.2917C14.3566 1.646 15.233 2.45306 15.3426 3.48891C16.0421 3.50315 16.6469 3.53934 17.1633 3.6342C17.8582 3.76183 18.4495 4.00496 18.9307 4.48615C19.4824 5.03791 19.7198 5.73263 19.8307 6.55772C19.9375 7.35244 19.9375 8.36291 19.9375 9.61653V15.2171C19.9375 16.4708 19.9375 17.4812 19.8307 18.2759C19.7198 19.101 19.4824 19.7958 18.9307 20.3475C18.3789 20.8993 17.6842 21.1366 16.8591 21.2475C16.0644 21.3544 15.0539 21.3543 13.8003 21.3543H8.1997C6.94608 21.3543 5.93562 21.3544 5.1409 21.2475C4.3158 21.1366 3.62108 20.8993 3.06932 20.3475C2.51756 19.7958 2.28025 19.101 2.16931 18.2759C2.06247 17.4812 2.06248 16.4708 2.0625 15.2171V9.61653C2.06248 8.3629 2.06247 7.35244 2.16931 6.55772C2.28025 5.73263 2.51756 5.03791 3.06932 4.48615C3.55051 4.00496 4.14183 3.76183 4.83666 3.6342C5.35308 3.53934 5.95789 3.50315 6.65738 3.48891ZM6.65955 4.86429C6.00122 4.87835 5.49391 4.91147 5.08507 4.98657C4.56549 5.08201 4.26476 5.23526 4.04159 5.45842C3.78789 5.71212 3.62248 6.06831 3.53205 6.74094C3.43896 7.43334 3.4375 8.35103 3.4375 9.66683V15.1668C3.4375 16.4826 3.43896 17.4003 3.53205 18.0927C3.62248 18.7653 3.78789 19.1215 4.04159 19.3752C4.29529 19.6289 4.65148 19.7943 5.32411 19.8848C6.01652 19.9779 6.9342 19.9793 8.25 19.9793H13.75C15.0658 19.9793 15.9835 19.9779 16.6759 19.8848C17.3485 19.7943 17.7047 19.6289 17.9584 19.3752C18.2121 19.1215 18.3775 18.7653 18.4679 18.0927C18.561 17.4003 18.5625 16.4826 18.5625 15.1668V9.66683C18.5625 8.35103 18.561 7.43334 18.4679 6.74094C18.3775 6.06831 18.2121 5.71212 17.9584 5.45842C17.7352 5.23526 17.4345 5.08201 16.9149 4.98657C16.5061 4.91147 15.9988 4.87835 15.3405 4.86429C15.2219 5.89073 14.3499 6.68766 13.2917 6.68766H8.70833C7.65013 6.68766 6.77806 5.89073 6.65955 4.86429ZM8.70833 3.021C8.32864 3.021 8.02083 3.3288 8.02083 3.7085V4.62516C8.02083 5.00486 8.32864 5.31266 8.70833 5.31266H13.2917C13.6714 5.31266 13.9792 5.00486 13.9792 4.62516V3.7085C13.9792 3.3288 13.6714 3.021 13.2917 3.021H8.70833ZM5.72917 10.1252C5.72917 9.74547 6.03697 9.43766 6.41667 9.43766H6.875C7.2547 9.43766 7.5625 9.74547 7.5625 10.1252C7.5625 10.5049 7.2547 10.8127 6.875 10.8127H6.41667C6.03697 10.8127 5.72917 10.5049 5.72917 10.1252ZM8.9375 10.1252C8.9375 9.74547 9.2453 9.43766 9.625 9.43766H15.5833C15.963 9.43766 16.2708 9.74547 16.2708 10.1252C16.2708 10.5049 15.963 10.8127 15.5833 10.8127H9.625C9.2453 10.8127 8.9375 10.5049 8.9375 10.1252ZM5.72917 13.3335C5.72917 12.9538 6.03697 12.646 6.41667 12.646H6.875C7.2547 12.646 7.5625 12.9538 7.5625 13.3335C7.5625 13.7132 7.2547 14.021 6.875 14.021H6.41667C6.03697 14.021 5.72917 13.7132 5.72917 13.3335ZM8.9375 13.3335C8.9375 12.9538 9.2453 12.646 9.625 12.646H15.5833C15.963 12.646 16.2708 12.9538 16.2708 13.3335C16.2708 13.7132 15.963 14.021 15.5833 14.021H9.625C9.2453 14.021 8.9375 13.7132 8.9375 13.3335ZM5.72917 16.5418C5.72917 16.1621 6.03697 15.8543 6.41667 15.8543H6.875C7.2547 15.8543 7.5625 16.1621 7.5625 16.5418C7.5625 16.9215 7.2547 17.2293 6.875 17.2293H6.41667C6.03697 17.2293 5.72917 16.9215 5.72917 16.5418ZM8.9375 16.5418C8.9375 16.1621 9.2453 15.8543 9.625 15.8543H15.5833C15.963 15.8543 16.2708 16.1621 16.2708 16.5418C16.2708 16.9215 15.963 17.2293 15.5833 17.2293H9.625C9.2453 17.2293 8.9375 16.9215 8.9375 16.5418Z",fill:"#1E2023"})})}),f.jsx("span",{className:"item-text",children:f.jsx(pt,{id:"termsRegulation"})}),f.jsx("span",{className:"item-arrow",children:f.jsx("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3254 3.45388C10.5351 3.63359 10.5593 3.94924 10.3796 4.1589L6.65854 8.50017L10.3796 12.8414C10.5593 13.0511 10.5351 13.3668 10.3254 13.5465C10.1157 13.7262 9.80008 13.7019 9.62037 13.4922L5.62037 8.82557C5.45988 8.63832 5.45988 8.36202 5.62037 8.17478L9.62037 3.50811C9.80008 3.29845 10.1157 3.27417 10.3254 3.45388Z",fill:"#858585"})})})]}),f.jsxs("div",{className:"section-item",children:[f.jsx("span",{className:"item-icon",children:f.jsx("img",{src:Of,alt:o.formatMessage({id:"logoAlt"}),className:"custom-logo-icon"})}),f.jsx("span",{className:"item-text",children:f.jsx(pt,{id:"aboutUs"})}),f.jsx("span",{className:"item-arrow",children:f.jsx("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3254 3.45388C10.5351 3.63359 10.5593 3.94924 10.3796 4.1589L6.65854 8.50017L10.3796 12.8414C10.5593 13.0511 10.5351 13.3668 10.3254 13.5465C10.1157 13.7262 9.80008 13.7019 9.62037 13.4922L5.62037 8.82557C5.45988 8.63832 5.45988 8.36202 5.62037 8.17478L9.62037 3.50811C9.80008 3.29845 10.1157 3.27417 10.3254 3.45388Z",fill:"#858585"})})})]}),f.jsxs("div",{className:"section-item",children:[f.jsx("span",{className:"item-icon",children:f.jsx("img",{src:Of,alt:o.formatMessage({id:"logoAlt"}),className:"custom-logo-icon"})}),f.jsx("span",{className:"item-text",children:f.jsx(pt,{id:"contactUs"})}),f.jsx("span",{className:"item-arrow",children:f.jsx("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3254 3.45388C10.5351 3.63359 10.5593 3.94924 10.3796 4.1589L6.65854 8.50017L10.3796 12.8414C10.5593 13.0511 10.5351 13.3668 10.3254 13.5465C10.1157 13.7262 9.80008 13.7019 9.62037 13.4922L5.62037 8.82557C5.45988 8.63832 5.45988 8.36202 5.62037 8.17478L9.62037 3.50811C9.80008 3.29845 10.1157 3.27417 10.3254 3.45388Z",fill:"#858585"})})})]})]}),f.jsxs("div",{className:"logout-section",children:[f.jsx("h3",{className:"logout-title",children:f.jsx(pt,{id:"logoutTitle"})}),f.jsxs("div",{className:"logout-item",children:[f.jsx("span",{className:"item-icon",children:f.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 22 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{d:"M5.01387 11.9863C4.74538 11.7178 4.74538 11.2825 5.01387 11.014L6.8472 9.18069C7.11568 8.91221 7.55099 8.91221 7.81947 9.1807C8.08796 9.44918 8.08796 9.88448 7.81947 10.153L7.15977 10.8127L13.75 10.8127C14.1297 10.8127 14.4375 11.1205 14.4375 11.5002C14.4375 11.8799 14.1297 12.1877 13.75 12.1877L7.15977 12.1877L7.81947 12.8474C8.08796 13.1158 8.08796 13.5511 7.81947 13.8196C7.55099 14.0881 7.11568 14.0881 6.8472 13.8196L5.01387 11.9863Z",fill:"#EA4335"}),f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.7832 1.646H13.8005C15.0541 1.64598 16.0646 1.64596 16.8593 1.75281C17.6844 1.86374 18.3791 2.10106 18.9309 2.65282C19.4826 3.20457 19.72 3.89929 19.8309 4.72439C19.9377 5.51911 19.9377 6.52957 19.9377 7.7832V15.2171C19.9377 16.4708 19.9377 17.4812 19.8309 18.2759C19.72 19.101 19.4826 19.7958 18.9309 20.3475C18.3791 20.8993 17.6844 21.1366 16.8593 21.2475C16.0646 21.3544 15.0541 21.3543 13.8005 21.3543H12.7832C11.5296 21.3543 10.5191 21.3544 9.72443 21.2475C8.89933 21.1366 8.20461 20.8993 7.65285 20.3475C7.28716 19.9818 7.05896 19.5525 6.91446 19.0625C6.04237 19.0614 5.31581 19.0518 4.72715 18.9726C4.02686 18.8785 3.41972 18.6747 2.93508 18.1901C2.45044 17.7055 2.24669 17.0983 2.15253 16.398C2.06246 15.7281 2.06248 14.8795 2.0625 13.8411V9.15928C2.06248 8.12086 2.06246 7.27226 2.15253 6.60231C2.24669 5.90202 2.45044 5.29488 2.93508 4.81024C3.41972 4.32561 4.02686 4.12185 4.72715 4.0277C5.31581 3.94855 6.04237 3.93896 6.91446 3.93782C7.05896 3.44781 7.28716 3.01851 7.65285 2.65282C8.20461 2.10106 8.89933 1.86374 9.72443 1.75281C10.5191 1.64596 11.5296 1.64598 12.7832 1.646ZM6.64764 16.0873C6.65092 16.6781 6.66068 17.2103 6.69427 17.6868C5.92933 17.6839 5.36067 17.6704 4.91036 17.6099C4.36255 17.5362 4.09393 17.4044 3.90735 17.2178C3.72077 17.0312 3.58893 16.7626 3.51527 16.2148C3.43896 15.6472 3.4375 14.8916 3.4375 13.7918V9.2085C3.4375 8.10876 3.43896 7.35312 3.51527 6.78552C3.58893 6.23771 3.72077 5.96909 3.90735 5.78251C4.09393 5.59594 4.36255 5.46409 4.91036 5.39043C5.36067 5.32989 5.92933 5.31646 6.69428 5.3135C6.66068 5.79 6.65092 6.32218 6.64764 6.913C6.64552 7.29269 6.95161 7.60221 7.3313 7.60432C7.71099 7.60643 8.0205 7.30035 8.02261 6.92066C8.02819 5.91828 8.05423 5.20779 8.15327 4.66856C8.24871 4.14899 8.40196 3.84826 8.62512 3.62509C8.87882 3.37139 9.23502 3.20598 9.90764 3.11555C10.6 3.02246 11.5177 3.021 12.8335 3.021H13.7502C15.066 3.021 15.9837 3.02246 16.6761 3.11555C17.3487 3.20598 17.7049 3.37139 17.9586 3.62509C18.2123 3.87879 18.3777 4.23498 18.4681 4.90761C18.5612 5.60001 18.5627 6.5177 18.5627 7.8335V15.1668C18.5627 16.4826 18.5612 17.4003 18.4681 18.0927C18.3777 18.7653 18.2123 19.1215 17.9586 19.3752C17.7049 19.6289 17.3487 19.7943 16.6761 19.8848C15.9837 19.9779 15.066 19.9793 13.7502 19.9793H12.8335C11.5177 19.9793 10.6 19.9779 9.90764 19.8848C9.23502 19.7943 8.87882 19.6289 8.62512 19.3752C8.40196 19.1521 8.24871 18.8513 8.15327 18.3318C8.05423 17.7925 8.02819 17.082 8.02261 16.0797C8.0205 15.7 7.71099 15.3939 7.3313 15.396C6.95161 15.3981 6.64552 15.7076 6.64764 16.0873Z",fill:"#EA4335"})]})}),f.jsx("span",{className:"item-text",children:f.jsx(pt,{id:"logoutAccount"})}),f.jsx("span",{className:"item-arrow",children:f.jsx("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3254 3.45388C10.5351 3.63359 10.5593 3.94924 10.3796 4.1589L6.65854 8.50017L10.3796 12.8414C10.5593 13.0511 10.5351 13.3668 10.3254 13.5465C10.1157 13.7262 9.80008 13.7019 9.62037 13.4922L5.62037 8.82557C5.45988 8.63832 5.45988 8.36202 5.62037 8.17478L9.62037 3.50811C9.80008 3.29845 10.1157 3.27417 10.3254 3.45388Z",fill:"#EA4335"})})})]})]})]}),f.jsx("div",{className:"app-version",children:f.jsx(pt,{id:"appVersionLabel",values:{version:i}})})]})}const w7=B.createContext(null);function b7(e,o){const i=Array.isArray(e)?e[0]:e?e.x:0,r=Array.isArray(e)?e[1]:e?e.y:0,d=Array.isArray(o)?o[0]:o?o.x:0,m=Array.isArray(o)?o[1]:o?o.y:0;return i===d&&r===m}function Us(e,o){if(e===o)return!0;if(!e||!o)return!1;if(Array.isArray(e)){if(!Array.isArray(o)||e.length!==o.length)return!1;for(let i=0;i<e.length;i++)if(!Us(e[i],o[i]))return!1;return!0}else if(Array.isArray(o))return!1;if(typeof e=="object"&&typeof o=="object"){const i=Object.keys(e),r=Object.keys(o);if(i.length!==r.length)return!1;for(const d of i)if(!o.hasOwnProperty(d)||!Us(e[d],o[d]))return!1;return!0}return!1}function C7(e){const o=e.clone();return o.pixelsToGLUnits=e.pixelsToGLUnits,o}function M3(e,o){if(!e.getProjection)return;const i=e.getProjection(),r=o.getProjection();Us(i,r)||o.setProjection(i)}function E3(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function L3(e,o){const i=o.viewState||o;let r=!1;if("zoom"in i){const d=e.zoom;e.zoom=i.zoom,r=r||d!==e.zoom}if("bearing"in i){const d=e.bearing;e.bearing=i.bearing,r=r||d!==e.bearing}if("pitch"in i){const d=e.pitch;e.pitch=i.pitch,r=r||d!==e.pitch}if(i.padding&&!e.isPaddingEqual(i.padding)&&(r=!0,e.padding=i.padding),"longitude"in i&&"latitude"in i){const d=e.center;e.center=new d.constructor(i.longitude,i.latitude),r=r||d!==e.center}return r}const S7=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function T3(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const o={};for(const r of e.layers)o[r.id]=r;const i=e.layers.map(r=>{let d=null;"interactive"in r&&(d=Object.assign({},r),delete d.interactive);const m=o[r.ref];if(m){d=d||Object.assign({},r),delete d.ref;for(const x of S7)x in m&&(d[x]=m[x])}return d||r});return{...e,layers:i}}var k3={};const P3={version:8,sources:{},layers:[]},D3={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},rm={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},I3={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},M7=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],E7=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class zd{constructor(o,i,r){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=d=>{const m=this.props[I3[d.type]];m?m(d):d.type==="error"&&console.error(d.error)},this._onPointerEvent=d=>{(d.type==="mousemove"||d.type==="mouseout")&&this._updateHover(d);const m=this.props[D3[d.type]];m&&(this.props.interactiveLayerIds&&d.type!=="mouseover"&&d.type!=="mouseout"&&(d.features=this._hoveredFeatures||this._queryRenderedFeatures(d.point)),m(d),delete d.features)},this._onCameraEvent=d=>{if(!this._internalUpdate){const m=this.props[rm[d.type]];m&&m(d)}d.type in this._deferredEvents&&(this._deferredEvents[d.type]=!1)},this._MapClass=o,this.props=i,this._initialize(r)}get map(){return this._map}get transform(){return this._renderTransform}setProps(o){const i=this.props;this.props=o;const r=this._updateSettings(o,i);r&&this._createShadowTransform(this._map);const d=this._updateSize(o),m=this._updateViewState(o,!0);this._updateStyle(o,i),this._updateStyleComponents(o,i),this._updateHandlers(o,i),(r||d||m&&!this._map.isMoving())&&this.redraw()}static reuse(o,i){const r=zd.savedMaps.pop();if(!r)return null;const d=r.map,m=d.getContainer();for(i.className=m.className;m.childNodes.length>0;)i.appendChild(m.childNodes[0]);d._container=i;const x=d._resizeObserver;x&&(x.disconnect(),x.observe(i)),r.setProps({...o,styleDiffing:!1}),d.resize();const{initialViewState:c}=o;return c&&(c.bounds?d.fitBounds(c.bounds,{...c.fitBoundsOptions,duration:0}):r._updateViewState(c,!1)),d.isStyleLoaded()?d.fire("load"):d.once("styledata",()=>d.fire("load")),d._update(),r}_initialize(o){const{props:i}=this,{mapStyle:r=P3}=i,d={...i,...i.initialViewState,accessToken:i.mapboxAccessToken||L7()||null,container:o,style:T3(r)},m=d.initialViewState||d.viewState||d;if(Object.assign(d,{center:[m.longitude||0,m.latitude||0],zoom:m.zoom||0,pitch:m.pitch||0,bearing:m.bearing||0}),i.gl){const P=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=P,i.gl)}const x=new this._MapClass(d);m.padding&&x.setPadding(m.padding),i.cursor&&(x.getCanvas().style.cursor=i.cursor),this._createShadowTransform(x);const c=x._render;x._render=P=>{this._inRender=!0,c.call(x,P),this._inRender=!1};const L=x._renderTaskQueue.run;x._renderTaskQueue.run=P=>{L.call(x._renderTaskQueue,P),this._onBeforeRepaint()},x.on("render",()=>this._onAfterRepaint());const T=x.fire;x.fire=this._fireEvent.bind(this,T),x.on("resize",()=>{this._renderTransform.resize(x.transform.width,x.transform.height)}),x.on("styledata",()=>{this._updateStyleComponents(this.props,{}),M3(x.transform,this._renderTransform)}),x.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const P in D3)x.on(P,this._onPointerEvent);for(const P in rm)x.on(P,this._onCameraEvent);for(const P in I3)x.on(P,this._onEvent);this._map=x}recycle(){const i=this.map.getContainer().querySelector("[mapboxgl-children]");i==null||i.remove(),zd.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const o=this._map;!this._inRender&&o.style&&(o._frame&&(o._frame.cancel(),o._frame=null),o._render())}_createShadowTransform(o){const i=C7(o.transform);o.painter.transform=i,this._renderTransform=i}_updateSize(o){const{viewState:i}=o;if(i){const r=this._map;if(i.width!==r.transform.width||i.height!==r.transform.height)return r.resize(),!0}return!1}_updateViewState(o,i){if(this._internalUpdate)return!1;const r=this._map,d=this._renderTransform,{zoom:m,pitch:x,bearing:c}=d,L=r.isMoving();L&&(d.cameraElevationReference="sea");const T=L3(d,{...E3(r.transform),...o});if(L&&(d.cameraElevationReference="ground"),T&&i){const P=this._deferredEvents;P.move=!0,P.zoom||(P.zoom=m!==d.zoom),P.rotate||(P.rotate=c!==d.bearing),P.pitch||(P.pitch=x!==d.pitch)}return L||L3(r.transform,o),T}_updateSettings(o,i){const r=this._map;let d=!1;for(const m of M7)if(m in o&&!Us(o[m],i[m])){d=!0;const x=r[`set${m[0].toUpperCase()}${m.slice(1)}`];x==null||x.call(r,o[m])}return d}_updateStyle(o,i){if(o.cursor!==i.cursor&&(this._map.getCanvas().style.cursor=o.cursor||""),o.mapStyle!==i.mapStyle){const{mapStyle:r=P3,styleDiffing:d=!0}=o,m={diff:d};return"localIdeographFontFamily"in o&&(m.localIdeographFontFamily=o.localIdeographFontFamily),this._map.setStyle(T3(r),m),!0}return!1}_updateStyleComponents(o,i){const r=this._map;let d=!1;return r.isStyleLoaded()&&("light"in o&&r.setLight&&!Us(o.light,i.light)&&(d=!0,r.setLight(o.light)),"fog"in o&&r.setFog&&!Us(o.fog,i.fog)&&(d=!0,r.setFog(o.fog)),"terrain"in o&&r.setTerrain&&!Us(o.terrain,i.terrain)&&(!o.terrain||r.getSource(o.terrain.source))&&(d=!0,r.setTerrain(o.terrain))),d}_updateHandlers(o,i){var r,d;const m=this._map;let x=!1;for(const c of E7){const L=(r=o[c])!==null&&r!==void 0?r:!0,T=(d=i[c])!==null&&d!==void 0?d:!0;Us(L,T)||(x=!0,L?m[c].enable(L):m[c].disable())}return x}_queryRenderedFeatures(o){const i=this._map,r=i.transform,{interactiveLayerIds:d=[]}=this.props;try{return i.transform=this._renderTransform,i.queryRenderedFeatures(o,{layers:d.filter(i.getLayer.bind(i))})}catch{return[]}finally{i.transform=r}}_updateHover(o){var i;const{props:r}=this;if(r.interactiveLayerIds&&(r.onMouseMove||r.onMouseEnter||r.onMouseLeave)){const m=o.type,x=((i=this._hoveredFeatures)===null||i===void 0?void 0:i.length)>0,c=this._queryRenderedFeatures(o.point),L=c.length>0;!L&&x&&(o.type="mouseleave",this._onPointerEvent(o)),this._hoveredFeatures=c,L&&!x&&(o.type="mouseenter",this._onPointerEvent(o)),o.type=m}else this._hoveredFeatures=null}_fireEvent(o,i,r){const d=this._map,m=d.transform,x=typeof i=="string"?i:i.type;return x==="move"&&this._updateViewState(this.props,!1),x in rm&&(typeof i=="object"&&(i.viewState=E3(m)),this._map.isMoving())?(d.transform=this._renderTransform,o.call(d,i,r),d.transform=m,d):(o.call(d,i,r),d)}_onBeforeRepaint(){const o=this._map;this._internalUpdate=!0;for(const r in this._deferredEvents)this._deferredEvents[r]&&o.fire(r);this._internalUpdate=!1;const i=this._map.transform;o.transform=this._renderTransform,this._onAfterRepaint=()=>{M3(this._renderTransform,i),o.transform=i}}}zd.savedMaps=[];function L7(){let e=null;if(typeof location<"u"){const o=/access_token=([^&\/]*)/.exec(location.search);e=o&&o[1]}try{e=e||k3.MapboxAccessToken}catch{}try{e=e||k3.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const T7=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function k7(e){if(!e)return null;const o=e.map,i={getMap:()=>o,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:r=>{const d=o.transform;o.transform=e.transform;const m=o.project(r);return o.transform=d,m},unproject:r=>{const d=o.transform;o.transform=e.transform;const m=o.unproject(r);return o.transform=d,m},queryTerrainElevation:(r,d)=>{const m=o.transform;o.transform=e.transform;const x=o.queryTerrainElevation(r,d);return o.transform=m,x},queryRenderedFeatures:(r,d)=>{const m=o.transform;o.transform=e.transform;const x=o.queryRenderedFeatures(r,d);return o.transform=m,x}};for(const r of P7(o))!(r in i)&&!T7.includes(r)&&(i[r]=o[r].bind(o));return i}function P7(e){const o=new Set;let i=e;for(;i;){for(const r of Object.getOwnPropertyNames(i))r[0]!=="_"&&typeof e[r]=="function"&&r!=="fire"&&r!=="setEventedParent"&&o.add(r);i=Object.getPrototypeOf(i)}return Array.from(o)}const D7=typeof document<"u"?B.useLayoutEffect:B.useEffect,I7=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function N7(e,o){for(const r of I7)r in o&&(e[r]=o[r]);const{RTLTextPlugin:i="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=o;i&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(i,r=>{r&&console.error(r)},!0)}const Xd=B.createContext(null);function R7(e,o,i){const r=B.useContext(w7),[d,m]=B.useState(null),x=B.useRef(),{current:c}=B.useRef({mapLib:null,map:null});B.useEffect(()=>{const P=e.mapLib;let D=!0,N;return Promise.resolve(P||i).then($=>{if(!D)return;if(!$)throw new Error("Invalid mapLib");const U="Map"in $?$:$.default;if(!U.Map)throw new Error("Invalid mapLib");if(N7(U,e),!U.supported||U.supported(e))e.reuseMaps&&(N=zd.reuse(e,x.current)),N||(N=new zd(U.Map,e,x.current)),c.map=k7(N),c.mapLib=U,m(N),r==null||r.onMapMount(c.map,e.id);else throw new Error("Map is not supported by this browser")}).catch($=>{const{onError:U}=e;U?U({type:"error",target:null,originalEvent:null,error:$}):console.error($)}),()=>{D=!1,N&&(r==null||r.onMapUnmount(e.id),e.reuseMaps?N.recycle():N.destroy())}},[]),D7(()=>{d&&d.setProps(e)}),B.useImperativeHandle(o,()=>c.map,[d]);const L=B.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),T={height:"100%"};return B.createElement("div",{id:e.id,ref:x,style:L},d&&B.createElement(Xd.Provider,{value:c},B.createElement("div",{"mapboxgl-children":"",style:T},e.children)))}const A7=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function O1(e,o){if(!e||!o)return;const i=e.style;for(const r in o){const d=o[r];Number.isFinite(d)&&!A7.test(r)?i[r]=`${d}px`:i[r]=d}}function j7(e,o){const{map:i,mapLib:r}=B.useContext(Xd),d=B.useRef({props:e});d.current.props=e;const m=B.useMemo(()=>{let q=!1;B.Children.forEach(e.children,te=>{te&&(q=!0)});const H={...e,element:q?document.createElement("div"):null},G=new r.Marker(H);return G.setLngLat([e.longitude,e.latitude]),G.getElement().addEventListener("click",te=>{var oe,Ce;(Ce=(oe=d.current.props).onClick)===null||Ce===void 0||Ce.call(oe,{type:"click",target:G,originalEvent:te})}),G.on("dragstart",te=>{var oe,Ce;const ae=te;ae.lngLat=m.getLngLat(),(Ce=(oe=d.current.props).onDragStart)===null||Ce===void 0||Ce.call(oe,ae)}),G.on("drag",te=>{var oe,Ce;const ae=te;ae.lngLat=m.getLngLat(),(Ce=(oe=d.current.props).onDrag)===null||Ce===void 0||Ce.call(oe,ae)}),G.on("dragend",te=>{var oe,Ce;const ae=te;ae.lngLat=m.getLngLat(),(Ce=(oe=d.current.props).onDragEnd)===null||Ce===void 0||Ce.call(oe,ae)}),G},[]);B.useEffect(()=>(m.addTo(i.getMap()),()=>{m.remove()}),[]);const{longitude:x,latitude:c,offset:L,style:T,draggable:P=!1,popup:D=null,rotation:N=0,rotationAlignment:$="auto",pitchAlignment:U="auto"}=e;return B.useEffect(()=>{O1(m.getElement(),T)},[T]),B.useImperativeHandle(o,()=>m,[]),(m.getLngLat().lng!==x||m.getLngLat().lat!==c)&&m.setLngLat([x,c]),L&&!b7(m.getOffset(),L)&&m.setOffset(L),m.isDraggable()!==P&&m.setDraggable(P),m.getRotation()!==N&&m.setRotation(N),m.getRotationAlignment()!==$&&m.setRotationAlignment($),m.getPitchAlignment()!==U&&m.setPitchAlignment(U),m.getPopup()!==D&&m.setPopup(D),r0.createPortal(e.children,m.getElement())}const O7=B.memo(B.forwardRef(j7));function N3(e){return new Set(e?e.trim().split(/\s+/):[])}function z7(e,o){const{map:i,mapLib:r}=B.useContext(Xd),d=B.useMemo(()=>document.createElement("div"),[]),m=B.useRef({props:e});m.current.props=e;const x=B.useMemo(()=>{const c={...e},L=new r.Popup(c);return L.setLngLat([e.longitude,e.latitude]),L.once("open",T=>{var P,D;(D=(P=m.current.props).onOpen)===null||D===void 0||D.call(P,T)}),L},[]);if(B.useEffect(()=>{const c=L=>{var T,P;(P=(T=m.current.props).onClose)===null||P===void 0||P.call(T,L)};return x.on("close",c),x.setDOMContent(d).addTo(i.getMap()),()=>{x.off("close",c),x.isOpen()&&x.remove()}},[]),B.useEffect(()=>{O1(x.getElement(),e.style)},[e.style]),B.useImperativeHandle(o,()=>x,[]),x.isOpen()&&((x.getLngLat().lng!==e.longitude||x.getLngLat().lat!==e.latitude)&&x.setLngLat([e.longitude,e.latitude]),e.offset&&!Us(x.options.offset,e.offset)&&x.setOffset(e.offset),(x.options.anchor!==e.anchor||x.options.maxWidth!==e.maxWidth)&&(x.options.anchor=e.anchor,x.setMaxWidth(e.maxWidth)),x.options.className!==e.className)){const c=N3(x.options.className),L=N3(e.className);for(const T of c)L.has(T)||x.removeClassName(T);for(const T of L)c.has(T)||x.addClassName(T);x.options.className=e.className}return r0.createPortal(e.children,d)}const F7=B.memo(B.forwardRef(z7));function gp(e,o,i,r){const d=B.useContext(Xd),m=B.useMemo(()=>e(d),[]);return B.useEffect(()=>{const x=o,c=null,L=typeof o=="function"?o:null,{map:T}=d;return T.hasControl(m)||(T.addControl(m,x==null?void 0:x.position),c&&c(d)),()=>{L&&L(d),T.hasControl(m)&&T.removeControl(m)}},[]),m}function B7(e){const o=gp(({mapLib:i})=>new i.AttributionControl(e),{position:e.position});return B.useEffect(()=>{O1(o._container,e.style)},[e.style]),null}B.memo(B7);function $7(e){const o=gp(({mapLib:i})=>new i.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return B.useEffect(()=>{O1(o._controlContainer,e.style)},[e.style]),null}B.memo($7);function V7(e,o){const i=B.useRef({props:e}),r=gp(({mapLib:d})=>{const m=new d.GeolocateControl(e),x=m._setupUI;return m._setupUI=c=>{m._container.hasChildNodes()||x(c)},m.on("geolocate",c=>{var L,T;(T=(L=i.current.props).onGeolocate)===null||T===void 0||T.call(L,c)}),m.on("error",c=>{var L,T;(T=(L=i.current.props).onError)===null||T===void 0||T.call(L,c)}),m.on("outofmaxbounds",c=>{var L,T;(T=(L=i.current.props).onOutOfMaxBounds)===null||T===void 0||T.call(L,c)}),m.on("trackuserlocationstart",c=>{var L,T;(T=(L=i.current.props).onTrackUserLocationStart)===null||T===void 0||T.call(L,c)}),m.on("trackuserlocationend",c=>{var L,T;(T=(L=i.current.props).onTrackUserLocationEnd)===null||T===void 0||T.call(L,c)}),m},{position:e.position});return i.current.props=e,B.useImperativeHandle(o,()=>r,[]),B.useEffect(()=>{O1(r._container,e.style)},[e.style]),null}B.memo(B.forwardRef(V7));function H7(e){const o=gp(({mapLib:i})=>new i.NavigationControl(e),{position:e.position});return B.useEffect(()=>{O1(o._container,e.style)},[e.style]),null}B.memo(H7);function U7(e){const o=gp(({mapLib:m})=>new m.ScaleControl(e),{position:e.position}),i=B.useRef(e),r=i.current;i.current=e;const{style:d}=e;return e.maxWidth!==void 0&&e.maxWidth!==r.maxWidth&&(o.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==r.unit&&o.setUnit(e.unit),B.useEffect(()=>{O1(o._container,d)},[d]),null}B.memo(U7);function zf(e,o){if(!e)throw new Error(o)}function Z7(e,o,i,r){if(zf(i.id===r.id,"layer id changed"),zf(i.type===r.type,"layer type changed"),i.type==="custom"||r.type==="custom")return;const{layout:d={},paint:m={},filter:x,minzoom:c,maxzoom:L,beforeId:T}=i;if(T!==r.beforeId&&e.moveLayer(o,T),d!==r.layout){const P=r.layout||{};for(const D in d)Us(d[D],P[D])||e.setLayoutProperty(o,D,d[D]);for(const D in P)d.hasOwnProperty(D)||e.setLayoutProperty(o,D,void 0)}if(m!==r.paint){const P=r.paint||{};for(const D in m)Us(m[D],P[D])||e.setPaintProperty(o,D,m[D]);for(const D in P)m.hasOwnProperty(D)||e.setPaintProperty(o,D,void 0)}Us(x,r.filter)||e.setFilter(o,x),(c!==r.minzoom||L!==r.maxzoom)&&e.setLayerZoomRange(o,c,L)}function q7(e,o,i){if(e.style&&e.style._loaded&&(!("source"in i)||e.getSource(i.source))){const r={...i,id:o};delete r.beforeId,e.addLayer(r,i.beforeId)}}let W7=0;function G7(e){const o=B.useContext(Xd).map.getMap(),i=B.useRef(e),[,r]=B.useState(0),d=B.useMemo(()=>e.id||`jsx-layer-${W7++}`,[]);if(B.useEffect(()=>{if(o){const x=()=>r(c=>c+1);return o.on("styledata",x),x(),()=>{o.off("styledata",x),o.style&&o.style._loaded&&o.getLayer(d)&&o.removeLayer(d)}}},[o]),o&&o.style&&o.getLayer(d))try{Z7(o,d,e,i.current)}catch(x){console.warn(x)}else q7(o,d,e);return i.current=e,null}let Y7=0;function X7(e,o,i){if(e.style&&e.style._loaded){const r={...i};return delete r.id,delete r.children,e.addSource(o,r),e.getSource(o)}return null}function K7(e,o,i){zf(o.id===i.id,"source id changed"),zf(o.type===i.type,"source type changed");let r="",d=0;for(const x in o)x!=="children"&&x!=="id"&&!Us(i[x],o[x])&&(r=x,d++);if(!d)return;const m=o.type;m==="geojson"?e.setData(o.data):m==="image"?e.updateImage({url:o.url,coordinates:o.coordinates}):"setCoordinates"in e&&d===1&&r==="coordinates"?e.setCoordinates(o.coordinates):"setUrl"in e&&r==="url"?e.setUrl(o.url):"setTiles"in e&&r==="tiles"?e.setTiles(o.tiles):console.warn(`Unable to update <Source> prop: ${r}`)}function Q7(e){const o=B.useContext(Xd).map.getMap(),i=B.useRef(e),[,r]=B.useState(0),d=B.useMemo(()=>e.id||`jsx-source-${Y7++}`,[]);B.useEffect(()=>{if(o){const x=()=>setTimeout(()=>r(c=>c+1),0);return o.on("styledata",x),x(),()=>{var c;if(o.off("styledata",x),o.style&&o.style._loaded&&o.getSource(d)){const L=(c=o.getStyle())===null||c===void 0?void 0:c.layers;if(L)for(const T of L)T.source===d&&o.removeLayer(T.id);o.removeSource(d)}}}},[o]);let m=o&&o.style&&o.getSource(d);return m?K7(m,e,i.current):m=X7(o,d,e),i.current=e,m&&B.Children.map(e.children,x=>x&&B.cloneElement(x,{source:d}))||null}const J7=h2(()=>Promise.resolve().then(()=>dv),void 0),Kd=B.forwardRef(function(o,i){return R7(o,i,J7)}),Wr=O7,qm=F7,ds=G7,Io=Q7,ey={},R3=e=>{let o;const i=new Set,r=(P,D)=>{const N=typeof P=="function"?P(o):P;if(!Object.is(N,o)){const $=o;o=D??(typeof N!="object"||N===null)?N:Object.assign({},o,N),i.forEach(U=>U(o,$))}},d=()=>o,L={setState:r,getState:d,getInitialState:()=>T,subscribe:P=>(i.add(P),()=>i.delete(P)),destroy:()=>{(ey?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),i.clear()}},T=o=e(r,d,L);return L},ty=e=>e?R3(e):R3;var im={exports:{}},sm={},om={exports:{}},am={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A3;function ny(){if(A3)return am;A3=1;var e=Wd();function o(D,N){return D===N&&(D!==0||1/D===1/N)||D!==D&&N!==N}var i=typeof Object.is=="function"?Object.is:o,r=e.useState,d=e.useEffect,m=e.useLayoutEffect,x=e.useDebugValue;function c(D,N){var $=N(),U=r({inst:{value:$,getSnapshot:N}}),q=U[0].inst,H=U[1];return m(function(){q.value=$,q.getSnapshot=N,L(q)&&H({inst:q})},[D,$,N]),d(function(){return L(q)&&H({inst:q}),D(function(){L(q)&&H({inst:q})})},[D]),x($),$}function L(D){var N=D.getSnapshot;D=D.value;try{var $=N();return!i(D,$)}catch{return!0}}function T(D,N){return N()}var P=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?T:c;return am.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:P,am}var j3;function ry(){return j3||(j3=1,om.exports=ny()),om.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O3;function iy(){if(O3)return sm;O3=1;var e=Wd(),o=ry();function i(T,P){return T===P&&(T!==0||1/T===1/P)||T!==T&&P!==P}var r=typeof Object.is=="function"?Object.is:i,d=o.useSyncExternalStore,m=e.useRef,x=e.useEffect,c=e.useMemo,L=e.useDebugValue;return sm.useSyncExternalStoreWithSelector=function(T,P,D,N,$){var U=m(null);if(U.current===null){var q={hasValue:!1,value:null};U.current=q}else q=U.current;U=c(function(){function G(Ne){if(!te){if(te=!0,oe=Ne,Ne=N(Ne),$!==void 0&&q.hasValue){var Fe=q.value;if($(Fe,Ne))return Ce=Fe}return Ce=Ne}if(Fe=Ce,r(oe,Ne))return Fe;var ye=N(Ne);return $!==void 0&&$(Fe,ye)?(oe=Ne,Fe):(oe=Ne,Ce=ye)}var te=!1,oe,Ce,ae=D===void 0?null:D;return[function(){return G(P())},ae===null?void 0:function(){return G(ae())}]},[P,D,N,$]);var H=d(T,U[0],U[1]);return x(function(){q.hasValue=!0,q.value=H},[H]),L(H),H},sm}var z3;function sy(){return z3||(z3=1,im.exports=iy()),im.exports}var oy=sy();const ay=gc(oy),G5={},{useDebugValue:ly}=Ze,{useSyncExternalStoreWithSelector:cy}=ay;let F3=!1;const uy=e=>e;function dy(e,o=uy,i){(G5?"production":void 0)!=="production"&&i&&!F3&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),F3=!0);const r=cy(e.subscribe,e.getState,e.getServerState||e.getInitialState,o,i);return ly(r),r}const B3=e=>{(G5?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const o=typeof e=="function"?ty(e):e,i=(r,d)=>dy(o,r,d);return Object.assign(i,o),i},c0=e=>e?B3(e):B3,hy={};function py(e,o){let i;try{i=e()}catch{return}return{getItem:d=>{var m;const x=L=>L===null?null:JSON.parse(L,void 0),c=(m=i.getItem(d))!=null?m:null;return c instanceof Promise?c.then(x):x(c)},setItem:(d,m)=>i.setItem(d,JSON.stringify(m,void 0)),removeItem:d=>i.removeItem(d)}}const op=e=>o=>{try{const i=e(o);return i instanceof Promise?i:{then(r){return op(r)(i)},catch(r){return this}}}catch(i){return{then(r){return this},catch(r){return op(r)(i)}}}},fy=(e,o)=>(i,r,d)=>{let m={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:H=>H,version:0,merge:(H,G)=>({...G,...H}),...o},x=!1;const c=new Set,L=new Set;let T;try{T=m.getStorage()}catch{}if(!T)return e((...H)=>{console.warn(`[zustand persist middleware] Unable to update item '${m.name}', the given storage is currently unavailable.`),i(...H)},r,d);const P=op(m.serialize),D=()=>{const H=m.partialize({...r()});let G;const te=P({state:H,version:m.version}).then(oe=>T.setItem(m.name,oe)).catch(oe=>{G=oe});if(G)throw G;return te},N=d.setState;d.setState=(H,G)=>{N(H,G),D()};const $=e((...H)=>{i(...H),D()},r,d);let U;const q=()=>{var H;if(!T)return;x=!1,c.forEach(te=>te(r()));const G=((H=m.onRehydrateStorage)==null?void 0:H.call(m,r()))||void 0;return op(T.getItem.bind(T))(m.name).then(te=>{if(te)return m.deserialize(te)}).then(te=>{if(te)if(typeof te.version=="number"&&te.version!==m.version){if(m.migrate)return m.migrate(te.state,te.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return te.state}).then(te=>{var oe;return U=m.merge(te,(oe=r())!=null?oe:$),i(U,!0),D()}).then(()=>{G==null||G(U,void 0),x=!0,L.forEach(te=>te(U))}).catch(te=>{G==null||G(void 0,te)})};return d.persist={setOptions:H=>{m={...m,...H},H.getStorage&&(T=H.getStorage())},clearStorage:()=>{T==null||T.removeItem(m.name)},getOptions:()=>m,rehydrate:()=>q(),hasHydrated:()=>x,onHydrate:H=>(c.add(H),()=>{c.delete(H)}),onFinishHydration:H=>(L.add(H),()=>{L.delete(H)})},q(),U||$},my=(e,o)=>(i,r,d)=>{let m={storage:py(()=>localStorage),partialize:q=>q,version:0,merge:(q,H)=>({...H,...q}),...o},x=!1;const c=new Set,L=new Set;let T=m.storage;if(!T)return e((...q)=>{console.warn(`[zustand persist middleware] Unable to update item '${m.name}', the given storage is currently unavailable.`),i(...q)},r,d);const P=()=>{const q=m.partialize({...r()});return T.setItem(m.name,{state:q,version:m.version})},D=d.setState;d.setState=(q,H)=>{D(q,H),P()};const N=e((...q)=>{i(...q),P()},r,d);d.getInitialState=()=>N;let $;const U=()=>{var q,H;if(!T)return;x=!1,c.forEach(te=>{var oe;return te((oe=r())!=null?oe:N)});const G=((H=m.onRehydrateStorage)==null?void 0:H.call(m,(q=r())!=null?q:N))||void 0;return op(T.getItem.bind(T))(m.name).then(te=>{if(te)if(typeof te.version=="number"&&te.version!==m.version){if(m.migrate)return[!0,m.migrate(te.state,te.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,te.state];return[!1,void 0]}).then(te=>{var oe;const[Ce,ae]=te;if($=m.merge(ae,(oe=r())!=null?oe:N),i($,!0),Ce)return P()}).then(()=>{G==null||G($,void 0),$=r(),x=!0,L.forEach(te=>te($))}).catch(te=>{G==null||G(void 0,te)})};return d.persist={setOptions:q=>{m={...m,...q},q.storage&&(T=q.storage)},clearStorage:()=>{T==null||T.removeItem(m.name)},getOptions:()=>m,rehydrate:()=>U(),hasHydrated:()=>x,onHydrate:q=>(c.add(q),()=>{c.delete(q)}),onFinishHydration:q=>(L.add(q),()=>{L.delete(q)})},m.skipHydration||U(),$||N},gy=(e,o)=>"getStorage"in o||"serialize"in o||"deserialize"in o?((hy?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),fy(e,o)):my(e,o),u0=gy,Gi=c0(u0(e=>({language:"fa",setLanguage:o=>e({language:o})}),{name:"lang-storage",version:1}));function ll(e="fa"){let o;try{o="/golden_path/"}catch{o=void 0}const i=typeof globalThis<"u"?globalThis.__GEOJSON_BASE_URL__:void 0,r=o??i??"/",d=r.endsWith("/")?r:`${r}/`,m=e&&e!=="fa"?`_${e}`:"";return`${d}data/data14040411${m}.geojson`}const yy="/golden_path/img/s1.jpg",ei="/golden_path/img/s2.jpg",Nr="/golden_path/img/s3.jpg",$3="/golden_path/img/s4.jpg",vy="/golden_path/img/s5.jpg",xy="/golden_path/img/s6.jpg",_y="/golden_path/img/s7.jpg",wy="/golden_path/img/s8.jpg",by="/golden_path/img/s9.jpg",Cy="/golden_path/img/s12.jpg",Sy="/golden_path/img/s13.png",My="/golden_path/img/s14.jpg",Ey="/golden_path/img/s15.jpg",Ly="/golden_path/img/s16.jpg",Ty="/golden_path/img/s17.jpg",ky="/golden_path/img/s18.jpg",Py="/golden_path/img/s19.jpg",Dy="/golden_path/img/s20.jpg",Iy="/golden_path/img/s21.jpg",Ny="/golden_path/img/s22.jpg",Ry="/golden_path/img/s23.jpg",Ay="/golden_path/img/s24.jpg",jy="/golden_path/img/s25.jpg",Oy="/golden_path/img/s26.jpg",zy="/golden_path/img/s27.jpg",Fy="/golden_path/img/s28.jpg",By="/golden_path/img/s29.jpg",$y="/golden_path/img/s30.jpeg",Vy="/golden_path/img/s31.jpg",Hy="/golden_path/img/s32.jpg",V3="/golden_path/img/s33.jpg",H3="/golden_path/img/s34.jpg",U3="/golden_path/img/s35.png",Uy="/golden_path/img/s36.jpg",Zy="/golden_path/img/s37.jpg",qy="/golden_path/img/s38.jpg",Wy="/golden_path/img/s39.jpg",Gy="/golden_path/img/s40.jpg",Yy="/golden_path/img/s41.jpg",Xy="/golden_path/img/s42.jpg",Ky="/golden_path/img/s43.jpg",Qy="/golden_path/img/s44.jpg",Jy="/golden_path/img/ic1.png",ev="/golden_path/img/ic2.png",tv="/golden_path/img/ic3.png",nv="/golden_path/img/ic4.png",rv="/golden_path/img/ic5.png",iv="/golden_path/img/ic6.png",sv="/golden_path/img/ic7.png",ov="/golden_path/img/ic8.png",ps=[{value:"sahn",label:"groupCourtyardPlural",icon:"courtyard",property:"group",png:Jy},{value:"eyvan",label:"groupEyvanPlural",icon:"eyvan",property:"group",png:ev},{value:"ravaq",label:"groupRavaqPlural",icon:"shrine",property:"group",png:tv},{value:"masjed",label:"groupMosques",icon:"mosque",property:"group",png:nv},{value:"madrese",label:"groupSchools",icon:"school",property:"group",png:rv},{value:"khadamat",label:"groupServices",icon:"services",property:"group",png:iv},{value:"elmi",label:"groupCulture",icon:"culture",property:"group",png:sv},{value:"cemetery",label:"groupCemetery",icon:"cemetery",property:"group",png:ov},{value:"qrcode",label:"groupQRScan",icon:"qr-code",property:"nodeFunction"},{value:"elevator",label:"groupElevator",icon:"elevator",property:"group"},{value:"other",label:"groupOther",icon:"other",property:"group"}],Po={sahn:[{value:"sahn-enqelab",label:"صحن انقلاب",icon:"",svg:"",description:"توضیحات",img:[Zy,qy,yy],address:"ضریح مطهر اما رضا(ع)",distance:"150",time:"2",rating:3.6,views:17},{value:"sahn-azadi",label:"صحن آزادی",icon:"",svg:"",description:"توضیحات",img:[Yy,Gy,Wy],address:"ضریح مطهر اما رضا(ع)",distance:"200",time:"3",rating:4.7,views:17},{value:"sahn-jomhouri",label:"صحن جمهوری اسلامی",icon:"",svg:"",description:"توضیحات",img:[Nr,$3,Nr],address:"ضریح مطهر اما رضا(ع)",distance:"180",time:"2.5",rating:3.7,views:17},{value:"sahn-qods",label:"صحن قدس",icon:"",svg:"",description:"توضیحات",img:[$3,ei,Nr],address:"ضریح مطهر اما رضا(ع)",distance:"220",time:"3.5",rating:5,views:56},{value:"sahn-jame-razavi",label:"صحن جامع رضوی",icon:"",svg:"",description:"توضیحات",img:[vy,ei,Nr],address:"ضریح مطهر اما رضا(ع)",distance:"170",time:"2.2",rating:4.4,views:44},{value:"sahn-ghadir",label:"صحن غدیر",icon:"",svg:"",description:"توضیحات",img:[xy,ei,Nr],address:"ضریح مطهر اما رضا(ع)",distance:"190",time:"2.8",rating:3.9,views:53},{value:"sahn-kosar",label:"صحن کوثر",icon:"",svg:"",description:"توضیحات",img:[_y,ei,Nr],address:"ضریح مطهر اما رضا(ع)",distance:"210",time:"3.2",rating:2.7,views:11},{value:"sahn-emam-hasan",label:"صحن امام حسن ",icon:"",svg:"",description:"توضیحات",img:[wy,ei,Nr],address:"ضریح مطهر اما رضا(ع)",distance:"160",time:"2.1",rating:4.7,views:11},{value:"sahn-payambar-azam",label:"صحن پیامبر اعظم",icon:"",svg:"",description:"توضیحات",img:[by,ei,Nr],address:"ضریح مطهر اما رضا(ع)",distance:"230",time:"3.7",rating:3.7,views:19}],eyvan:[{value:"eyvan-abbasi",label:"ایوان عباسی",icon:"",svg:"",description:"توضیحات",img:[Xy,Ky,Qy],address:"ضریح مطهر اما رضا(ع)",distance:"120",time:"1.8",rating:4.1,views:41},{value:"eyvan-talayi",label:"ایوان طلایی",icon:"",svg:"",description:"توضیحات",img:[V3,H3,U3],address:"ضریح مطهر اما رضا(ع)",distance:"140",time:"2.1",rating:4.7,views:120},{value:"eyvan-saat",label:"ایوان ساعت",icon:"",svg:"",description:"توضیحات",img:[Cy,ei,Nr],address:"ضریح مطهر اما رضا(ع)",distance:"110",time:"1.6",rating:5,views:66},{value:"eyvan-naqare",label:"ایوان نقاره",icon:"",svg:"",description:"توضیحات",img:[Sy,ei,Nr],address:"ضریح مطهر اما رضا(ع)",distance:"130",time:"1.9",rating:4.7,views:37},{value:"eyvan-valiasr",label:"ایوان ولیعصر",icon:"",svg:"",description:"توضیحات",img:[My,ei,Nr],address:"ضریح مطهر اما رضا(ع)",distance:"125",time:"1.8",rating:3.9,views:28},{value:"eyvan-talaye-azadi",label:"ایوان طلای آزادی",icon:"",svg:"",description:"توضیحات",img:[Ey,ei,Nr],address:"ضریح مطهر اما رضا(ع)",distance:"135",time:"2.0",rating:2.7,views:2}],ravaq:[{value:"daralhefaz",label:"دارالحفاظ",icon:"",svg:"",description:"توضیحات",img:[Ly,ei,Nr],address:"ضریح مطهر اما رضا(ع)",distance:"90",time:"1.3",rating:3.1,views:23},{value:"daralsiade",label:"دارالسياده",icon:"",svg:"",description:"توضیحات",img:[Ty,ei,Nr],address:"ضریح مطهر اما رضا(ع)",distance:"85",time:"1.2",rating:3.7,views:46},{value:"daralsalam",label:"دارالسلام",icon:"",svg:"",description:"توضیحات",img:[ky,ei,Nr],address:"ضریح مطهر اما رضا(ع)",distance:"95",time:"1.4",rating:4.3,views:32},{value:"hatamkhani",label:"حاتم خانی",icon:"",svg:"",description:"توضیحات",img:[Py,ei,Nr],address:"ضریح مطهر اما رضا(ع)",distance:"80",time:"1.1",rating:3.2,views:15},{value:"gonbadallahverdi",label:"گنبدالله وردی خان",icon:"",svg:"",description:"توضیحات",img:[Dy,ei,Nr],address:"ضریح مطهر اما رضا(ع)",distance:"100",time:"1.5",rating:4.7,views:21},{value:"daralziafe",label:"دارالضیافه",icon:"",svg:"",description:"توضیحات",img:[Iy,ei,Nr],address:"ضریح مطهر اما رضا(ع)",distance:"88",time:"1.3",rating:3.7,views:17},{value:"tohidkhane",label:"توحیدخانه",icon:"",svg:"",description:"توضیحات",img:[Ny,ei,Nr],address:"ضریح مطهر اما رضا(ع)",distance:"92",time:"1.4",rating:3,views:12},{value:"daralfeyz",label:"دارالفیض",icon:"",svg:"",description:"توضیحات",img:[Ry,ei,Nr],address:"ضریح مطهر اما رضا(ع)",distance:"87",time:"1.3",rating:5,views:47},{value:"daralsaade",label:"دارالسعاده",icon:"",svg:"",description:"توضیحات",img:[Ay,Fy,By],address:"ضریح مطهر اما رضا(ع)",distance:"83",time:"1.2",rating:4,views:19},{value:"goharsad",label:"گوهرشاد",icon:"",svg:"",description:"توضیحات",img:[jy,ei,Nr],address:"ضریح مطهر اما رضا(ع)",distance:"78",time:"1.1",rating:3.5,views:24}],masjed:[{value:"balasar",label:"بالاسر",icon:"",svg:"",description:"توضیحات",img:[Oy,ei,Nr,Nr,Nr],address:"ضریح مطهر اما رضا(ع)",distance:"50",time:"0.8",rating:3.7,views:17},{value:"goharsad",label:"گوهرشاد",icon:"",svg:"",description:"توضیحات",img:[zy,ei,Nr],address:"ضریح مطهر اما رضا(ع)",distance:"65",time:"1.0",rating:4.7,views:32}],madrese:[{value:"payeen-khyaban",label:"پایین خیابان",icon:"school",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 9l-10 -4l-10 4l10 4l10 -4v6"/><path d="M6 10.6v5.4a6 3 0 0 0 12 0v-5.4"/></svg>',description:"subgroupDefaultDesc"},{value:"bala-khyaban",label:"بالا خیابان",icon:"school",svg:'<svg xmlns="http://www.w3.org/24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 9l-10 -4l-10 4l10 4l10 -4v6"/><path d="M6 10.6v5.4a6 3 0 0 0 12 0v-5.4"/></svg>',description:"subgroupDefaultDesc"},{value:"navvab",label:"نواب",icon:"school",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 9l-10 -4l-10 4l10 4l10 -4v6"/><path d="M6 10.6v5.4a6 3 0 0 0 12 0v-5.4"/></svg>',description:"subgroupDefaultDesc"},{value:"dodar",label:"دودر",icon:"school",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 9l-10 -4l-10 4l10 4l10 -4v6"/><path d="M6 10.6v5.4a6 3 0 0 0 12 0v-5.4"/></svg>',description:"subgroupDefaultDesc"}],khadamat:[{value:"wc",label:"دستشویی",icon:"services",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21h4l13 -13a1.5 1.5 0 0 0 -4 -4l-13 13v4"/><path d="M14.5 5.5l4 4"/><path d="M12 8l-5 -5l-4 4l5 5"/><path d="M7 8l-1.5 1.5"/><path d="M16 12l5 5l-4 4l-5 -5"/><path d="M16 17l-1.5 1.5"/></svg>',description:"subgroupDefaultDesc"},{value:"telephon",label:"تلفن",icon:"services",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21h4l13 -13a1.5 1.5 0 0 0 -4 -4l-13 13v4"/><path d="M14.5 5.5l4 4"/><path d="M12 8l-5 -5l-4 4l5 5"/><path d="M7 8l-1.5 1.5"/><path d="M16 12l5 5l-4 4l-5 -5"/><path d="M16 17l-1.5 1.5"/></svg>',description:"subgroupDefaultDesc"},{value:"otag-madadjo",label:"اتاق مددجو",icon:"services",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21h4l13 -13a1.5 1.5 0 0 0 -4 -4l-13 13v4"/><path d="M14.5 5.5l4 4"/><path d="M12 8l-5 -5l-4 4l5 5"/><path d="M7 8l-1.5 1.5"/><path d="M16 12l5 5l-4 4l-5 -5"/><path d="M16 17l-1.5 1.5"/></svg>',description:"subgroupDefaultDesc"},{value:"namaazkhane",label:"نمازخانه",icon:"services",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21h4l13 -13a1.5 1.5 0 0 0 -4 -4l-13 13v4"/><path d="M14.5 5.5l4 4"/><path d="M12 8l-5 -5l-4 4l5 5"/><path d="M7 8l-1.5 1.5"/><path d="M16 12l5 5l-4 4l-5 -5"/><path d="M16 17l-1.5 1.5"/></svg>',description:"subgroupDefaultDesc"},{value:"ketabkhane",label:"کتابخانه",icon:"services",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21h4l13 -13a1.5 1.5 0 0 0 -4 -4l-13 13v4"/><path d="M14.5 5.5l4 4"/><path d="M12 8l-5 -5l-4 4l5 5"/><path d="M7 8l-1.5 1.5"/><path d="M16 12l5 5l-4 4l-5 -5"/><path d="M16 17l-1.5 1.5"/></svg>',description:"subgroupDefaultDesc"},{value:"room",label:"اتاق",icon:"services",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21h4l13 -13a1.5 1.5 0 0 0 -4 -4l-13 13v4"/><path d="M14.5 5.5l4 4"/><path d="M12 8l-5 -5l-4 4l5 5"/><path d="M7 8l-1.5 1.5"/><path d="M16 12l5 5l-4 4l-5 -5"/><path d="M16 17l-1.5 1.5"/></svg>',description:"subgroupDefaultDesc"}],elmi:[{value:"hoze-elmiye",label:"حوزه علمیه",icon:"culture",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"/><path d="M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"/><path d="M3 6l0 13"/><path d="M12 6l0 13"/><path d="M21 6l0 13"/></svg>',description:"subgroupDefaultDesc"},{value:"markaz-motaleat",label:"مرکز مطالعات",icon:"culture",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"/><path d="M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"/><path d="M3 6l0 13"/><path d="M12 6l0 13"/><path d="M21 6l0 13"/></svg>',description:"subgroupDefaultDesc"},{value:"uni",label:"دانشگاه",icon:"culture",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"/><path d="M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"/><path d="M3 6l0 13"/><path d="M12 6l0 13"/><path d="M21 6l0 13"/></svg>',description:"subgroupDefaultDesc"}],cemetery:[{value:"cemetery",label:"قبر",icon:"cemetery",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 4v16"/><path d="M19 4v16"/><path d="M9 4v16"/><path d="M15 4v16"/><path d="M3 4h18"/></svg>',description:"subgroupDefaultDesc"},{value:"yadbod",label:"یادبود",icon:"cemetery",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 4v16"/><path d="M19 4v16"/><path d="M9 4v16"/><path d="M15 4v16"/><path d="M3 4h18"/></svg>',description:"subgroupDefaultDesc"}],qrcode:[{value:"bakhsh-control",label:"بخش کنترل",icon:"qr-code",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"/><path d="M7 17l0 .01"/><path d="M14 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"/><path d="M7 7l0 .01"/><path d="M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"/><path d="M17 7l0 .01"/><path d="M14 14l3 0"/><path d="M20 14l0 .01"/><path d="M14 14l0 3"/><path d="M14 20l3 0"/><path d="M17 17l3 0"/><path d="M20 17l0 3"/></svg>',description:"subgroupDefaultDesc"},{value:"cctv",label:"دوربین مدار بسته",icon:"qr-code",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"/><path d="M7 17l0 .01"/><path d="M14 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"/><path d="M7 7l0 .01"/><path d="M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"/><path d="M17 7l0 .01"/><path d="M14 14l3 0"/><path d="M20 14l0 .01"/><path d="M14 14l0 3"/><path d="M14 20l3 0"/><path d="M17 17l3 0"/><path d="M20 17l0 3"/></svg>',description:"subgroupDefaultDesc"}],elevator:[],other:[{value:"other",label:"سایر",icon:"other",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 9l3 3l-3 3"/><path d="M13 15l3 0"/><path d="M3 4m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"/></svg>',description:"subgroupDefaultDesc"},{value:"rozemonavare",label:"ضریح ",icon:"",svg:"",description:"توضیحات",img:[V3,H3,U3,Uy],address:" حرم مطهر ",distance:"190",time:"2.8",rating:3.9,views:53},{value:"saghakhaneh",label:"سقاخانه رضوی",icon:"",svg:"",description:"توضیحات",img:[$y,Vy,Hy],address:" صحن انقلاب  ",distance:"190",time:"2.8",rating:3.9,views:53}]},av={sahn:"#4caf50",eyvan:"#2196f3",ravaq:"#9c27b0",masjed:"#ff9800",madrese:"#3f51b5",khadamat:"#607d8b",elmi:"#00bcd4",cemetery:"#795548",other:"#757575"},lv=(e,o,i=35,r=1)=>{const d=av[e]||"#999";let m=ps.find(x=>x.value===e)||ps.find(x=>x.value===o)||ps.find(x=>x.value==="other");return f.jsx("div",{style:{width:i,height:i,backgroundColor:d,opacity:r,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 6px rgba(0,0,0,0.3)"},children:f.jsx("div",{className:`map-category-icon3 ${m.icon}`,style:{width:"22px",height:"22px",marginTop:0},children:f.jsx("img",{src:m.png,alt:m.label||"icon",width:"18",height:"18"})})})},y2=({selectedCategory:e,routeCoords:o=null})=>{const[i,r]=B.useState(null),d=Gi(c=>c.language);if(B.useEffect(()=>{const c=ll(d);fetch(c).then(L=>L.json()).then(L=>r(L.features||[])).catch(L=>console.error("failed to load geojson",L))},[d]),!i)return null;const m=i.filter(c=>{var L;return c.geometry.type==="Point"&&((L=c.properties)==null?void 0:L.nodeFunction)!=="connection"}),x=i.filter(c=>c.geometry.type==="Polygon"||c.geometry.type==="MultiPolygon");return f.jsxs(f.Fragment,{children:[x.length>0&&f.jsx(Io,{id:"overlay-polygons",type:"geojson",data:{type:"FeatureCollection",features:x},children:f.jsx(ds,{id:"overlay-lines",type:"line",paint:{"line-color":"#333","line-width":2}})}),(o&&o.length>0?m.filter(c=>o.some(L=>L[0].toFixed(6)===c.geometry.coordinates[0].toFixed(6)&&L[1].toFixed(6)===c.geometry.coordinates[1].toFixed(6))):m).map((c,L)=>{var oe;const[T,P]=c.geometry.coordinates,{group:D,nodeFunction:N}=c.properties||{},$=e&&c.properties&&c.properties[e.property]===e.value,U=!!e,q=U?$?30:15:20,H=U?$?1:.4:1,G=(oe=c.properties)==null?void 0:oe.uniqueId,te=G?`${G}-${L}`:L;return f.jsx(Wr,{longitude:T,latitude:P,anchor:"center",children:lv(D,N,q,H)},te)})]})};var Ef={exports:{}},cv=Ef.exports,Z3;function uv(){return Z3||(Z3=1,function(e,o){(function(i,r){e.exports=r()})(cv,function(){var i,r,d;function m(c,L){if(!i)i=L;else if(!r)r=L;else{var T="var sharedChunk = {}; ("+i+")(sharedChunk); ("+r+")(sharedChunk);",P={};i(P),d=L(P),typeof window<"u"&&(d.workerUrl=window.URL.createObjectURL(new Blob([T],{type:"text/javascript"})))}}m(["exports"],function(c){var L=T;function T(l,n,u,g){this.cx=3*l,this.bx=3*(u-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(g-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=n,this.p2x=u,this.p2y=g}function P(l,n,u,g){const b=new L(l,n,u,g);return function(S){return b.solve(S)}}T.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,n){if(n===void 0&&(n=1e-6),l<0)return 0;if(l>1)return 1;for(var u=l,g=0;g<8;g++){var b=this.sampleCurveX(u)-l;if(Math.abs(b)<n)return u;var S=this.sampleCurveDerivativeX(u);if(Math.abs(S)<1e-6)break;u-=b/S}var t=0,a=1;for(u=l,g=0;g<20&&(b=this.sampleCurveX(u),!(Math.abs(b-l)<n));g++)l>b?t=u:a=u,u=.5*(a-t)+t;return u},solve:function(l,n){return this.sampleCurveY(this.solveCurveX(l,n))}};const D=P(.25,.1,.25,1);function N(l,n,u){return Math.min(u,Math.max(n,l))}function $(l,n,u){const g=u-n,b=((l-n)%g+g)%g+n;return b===n?u:b}function U(l,...n){for(const u of n)for(const g in u)l[g]=u[g];return l}let q=1;function H(l,n){l.forEach(u=>{n[u]&&(n[u]=n[u].bind(n))})}function G(l,n,u){const g={};for(const b in l)g[b]=n.call(u||this,l[b],b,l);return g}function te(l,n,u){const g={};for(const b in l)n.call(u||this,l[b],b,l)&&(g[b]=l[b]);return g}function oe(l){return Array.isArray(l)?l.map(oe):typeof l=="object"&&l?G(l,oe):l}const Ce={};function ae(l){Ce[l]||(typeof console<"u"&&console.warn(l),Ce[l]=!0)}function Ne(l,n,u){return(u.y-l.y)*(n.x-l.x)>(n.y-l.y)*(u.x-l.x)}function Fe(l){let n=0;for(let u,g,b=0,S=l.length,t=S-1;b<S;t=b++)u=l[b],g=l[t],n+=(g.x-u.x)*(u.y+g.y);return n}function ye(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Ke(l){const n={};if(l.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,g,b,S)=>{const t=b||S;return n[g]=!t||t.toLowerCase(),""}),n["max-age"]){const u=parseInt(n["max-age"],10);isNaN(u)?delete n["max-age"]:n["max-age"]=u}return n}let Me,qe,Re=null;function dt(l){if(Re==null){const n=l.navigator?l.navigator.userAgent:null;Re=!!l.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return Re}function Xe(l){return typeof ImageBitmap<"u"&&l instanceof ImageBitmap}const ht={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(l){const n=requestAnimationFrame(l);return{cancel:()=>cancelAnimationFrame(n)}},getImageData(l,n=0){const u=window.document.createElement("canvas"),g=u.getContext("2d");if(!g)throw new Error("failed to create canvas 2d context");return u.width=l.width,u.height=l.height,g.drawImage(l,0,0,l.width,l.height),g.getImageData(-n,-n,l.width+2*n,l.height+2*n)},resolveURL:l=>(Me||(Me=document.createElement("a")),Me.href=l,Me.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(qe==null&&(qe=matchMedia("(prefers-reduced-motion: reduce)")),qe.matches)}};var Pe=ke;function ke(l,n){this.x=l,this.y=n}ke.prototype={clone:function(){return new ke(this.x,this.y)},add:function(l){return this.clone()._add(l)},sub:function(l){return this.clone()._sub(l)},multByPoint:function(l){return this.clone()._multByPoint(l)},divByPoint:function(l){return this.clone()._divByPoint(l)},mult:function(l){return this.clone()._mult(l)},div:function(l){return this.clone()._div(l)},rotate:function(l){return this.clone()._rotate(l)},rotateAround:function(l,n){return this.clone()._rotateAround(l,n)},matMult:function(l){return this.clone()._matMult(l)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(l){return this.x===l.x&&this.y===l.y},dist:function(l){return Math.sqrt(this.distSqr(l))},distSqr:function(l){var n=l.x-this.x,u=l.y-this.y;return n*n+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(l){return Math.atan2(this.y-l.y,this.x-l.x)},angleWith:function(l){return this.angleWithSep(l.x,l.y)},angleWithSep:function(l,n){return Math.atan2(this.x*n-this.y*l,this.x*l+this.y*n)},_matMult:function(l){var n=l[2]*this.x+l[3]*this.y;return this.x=l[0]*this.x+l[1]*this.y,this.y=n,this},_add:function(l){return this.x+=l.x,this.y+=l.y,this},_sub:function(l){return this.x-=l.x,this.y-=l.y,this},_mult:function(l){return this.x*=l,this.y*=l,this},_div:function(l){return this.x/=l,this.y/=l,this},_multByPoint:function(l){return this.x*=l.x,this.y*=l.y,this},_divByPoint:function(l){return this.x/=l.x,this.y/=l.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var l=this.y;return this.y=this.x,this.x=-l,this},_rotate:function(l){var n=Math.cos(l),u=Math.sin(l),g=u*this.x+n*this.y;return this.x=n*this.x-u*this.y,this.y=g,this},_rotateAround:function(l,n){var u=Math.cos(l),g=Math.sin(l),b=n.y+g*(this.x-n.x)+u*(this.y-n.y);return this.x=n.x+u*(this.x-n.x)-g*(this.y-n.y),this.y=b,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},ke.convert=function(l){return l instanceof ke?l:Array.isArray(l)?new ke(l[0],l[1]):l};const de={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},je="mapbox-tiles";let Ee,K=500,be=50;function Be(){typeof caches>"u"||Ee||(Ee=caches.open(je))}let it=1/0;const ft={supported:!1,testSupport:function(l){!ut&&xt&&(vt?Tt(l):mt=l)}};let mt,xt,ut=!1,vt=!1;function Tt(l){const n=l.createTexture();l.bindTexture(l.TEXTURE_2D,n);try{if(l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,xt),l.isContextLost())return;ft.supported=!0}catch{}l.deleteTexture(n),ut=!0}typeof document<"u"&&(xt=document.createElement("img"),xt.onload=function(){mt&&Tt(mt),mt=null,vt=!0},xt.onerror=function(){ut=!0,mt=null},xt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Rt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Rt);class Bt extends Error{constructor(n,u,g,b){super(`AJAXError: ${u} (${n}): ${g}`),this.status=n,this.statusText=u,this.url=g,this.body=b}}const Pt=ye()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function jt(l,n){const u=new AbortController,g=new Request(l.url,{method:l.method||"GET",body:l.body,credentials:l.credentials,headers:l.headers,referrer:Pt(),signal:u.signal});let b=!1,S=!1;return l.type==="json"&&g.headers.set("Accept","application/json"),((t,a,p)=>{S||fetch(g).then(v=>v.ok?((C,E,I)=>{(l.type==="arrayBuffer"?C.arrayBuffer():l.type==="json"?C.json():C.text()).then(j=>{S||(b=!0,n(null,j,C.headers.get("Cache-Control"),C.headers.get("Expires")))}).catch(j=>{S||n(new Error(j.message))})})(v):v.blob().then(C=>n(new Bt(v.status,v.statusText,l.url,C)))).catch(v=>{v.code!==20&&n(new Error(v.message))})})(),{cancel:()=>{S=!0,b||u.abort()}}}const hn=function(l,n){if(/:\/\//.test(l.url)&&!/^https?:|^file:/.test(l.url)){if(ye()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",l,n);if(!ye()){const g=l.url.substring(0,l.url.indexOf("://"));return(de.REGISTERED_PROTOCOLS[g]||jt)(l,n)}}if(!(/^file:/.test(u=l.url)||/^file:/.test(Pt())&&!/^\w+:/.test(u))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return jt(l,n);if(ye()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",l,n,void 0,!0)}var u;return function(g,b){const S=new XMLHttpRequest;S.open(g.method||"GET",g.url,!0),g.type==="arrayBuffer"&&(S.responseType="arraybuffer");for(const t in g.headers)S.setRequestHeader(t,g.headers[t]);return g.type==="json"&&(S.responseType="text",S.setRequestHeader("Accept","application/json")),S.withCredentials=g.credentials==="include",S.onerror=()=>{b(new Error(S.statusText))},S.onload=()=>{if((S.status>=200&&S.status<300||S.status===0)&&S.response!==null){let t=S.response;if(g.type==="json")try{t=JSON.parse(S.response)}catch(a){return b(a)}b(null,t,S.getResponseHeader("Cache-Control"),S.getResponseHeader("Expires"))}else{const t=new Blob([S.response],{type:S.getResponseHeader("Content-Type")});b(new Bt(S.status,S.statusText,g.url,t))}},S.send(g.body),{cancel:()=>S.abort()}}(l,n)},Mn=function(l,n){return hn(U(l,{type:"arrayBuffer"}),n)};function jn(l){const n=window.document.createElement("a");return n.href=l,n.protocol===window.document.location.protocol&&n.host===window.document.location.host}const Jn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Yt,xn;Yt=[],xn=0;const Nn=function(l,n){if(ft.supported&&(l.headers||(l.headers={}),l.headers.accept="image/webp,*/*"),xn>=de.MAX_PARALLEL_IMAGE_REQUESTS){const S={requestParameters:l,callback:n,cancelled:!1,cancel(){this.cancelled=!0}};return Yt.push(S),S}xn++;let u=!1;const g=()=>{if(!u)for(u=!0,xn--;Yt.length&&xn<de.MAX_PARALLEL_IMAGE_REQUESTS;){const S=Yt.shift(),{requestParameters:t,callback:a,cancelled:p}=S;p||(S.cancel=Nn(t,a).cancel)}},b=Mn(l,(S,t,a,p)=>{g(),S?n(S):t&&function(v,C){typeof createImageBitmap=="function"?function(E,I){const j=new Blob([new Uint8Array(E)],{type:"image/png"});createImageBitmap(j).then(z=>{I(null,z)}).catch(z=>{I(new Error(`Could not load image because of ${z.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(v,C):function(E,I){const j=new Image;j.onload=()=>{I(null,j),URL.revokeObjectURL(j.src),j.onload=null,window.requestAnimationFrame(()=>{j.src=Jn})},j.onerror=()=>I(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const z=new Blob([new Uint8Array(E)],{type:"image/png"});j.src=E.byteLength?URL.createObjectURL(z):Jn}(v,C)}(t,(v,C)=>{v!=null?n(v):C!=null&&n(null,C,{cacheControl:a,expires:p})})});return{cancel:()=>{b.cancel(),g()}}};function Dn(l,n,u){u[l]&&u[l].indexOf(n)!==-1||(u[l]=u[l]||[],u[l].push(n))}function bn(l,n,u){if(u&&u[l]){const g=u[l].indexOf(n);g!==-1&&u[l].splice(g,1)}}class yt{constructor(n,u={}){U(this,u),this.type=n}}class Et extends yt{constructor(n,u={}){super("error",U({error:n},u))}}class nt{on(n,u){return this._listeners=this._listeners||{},Dn(n,u,this._listeners),this}off(n,u){return bn(n,u,this._listeners),bn(n,u,this._oneTimeListeners),this}once(n,u){return this._oneTimeListeners=this._oneTimeListeners||{},Dn(n,u,this._oneTimeListeners),this}fire(n,u){typeof n=="string"&&(n=new yt(n,u||{}));const g=n.type;if(this.listens(g)){n.target=this;const b=this._listeners&&this._listeners[g]?this._listeners[g].slice():[];for(const a of b)a.call(this,n);const S=this._oneTimeListeners&&this._oneTimeListeners[g]?this._oneTimeListeners[g].slice():[];for(const a of S)bn(g,a,this._oneTimeListeners),a.call(this,n);const t=this._eventedParent;t&&(U(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),t.fire(n))}else n instanceof Et&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,u){return this._eventedParent=n,this._eventedParentData=u,this}}var Le={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class Je{constructor(n,u,g,b){this.message=(n?`${n}: `:"")+g,b&&(this.identifier=b),u!=null&&u.__line__&&(this.line=u.__line__)}}function ln(l){const n=l.value;return n?[new Je(l.key,n,"constants have been deprecated as of v8")]:[]}function cn(l,...n){for(const u of n)for(const g in u)l[g]=u[g];return l}function Gt(l){return l instanceof Number||l instanceof String||l instanceof Boolean?l.valueOf():l}function pn(l){if(Array.isArray(l))return l.map(pn);if(l instanceof Object&&!(l instanceof Number||l instanceof String||l instanceof Boolean)){const n={};for(const u in l)n[u]=pn(l[u]);return n}return Gt(l)}class Cn extends Error{constructor(n,u){super(u),this.message=u,this.key=n}}class ct{constructor(n,u=[]){this.parent=n,this.bindings={};for(const[g,b]of u)this.bindings[g]=b}concat(n){return new ct(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const Ot={kind:"null"},et={kind:"number"},$t={kind:"string"},Dt={kind:"boolean"},mn={kind:"color"},Fn={kind:"object"},nn={kind:"value"},sr={kind:"collator"},He={kind:"formatted"},kt={kind:"padding"},en={kind:"resolvedImage"};function Ft(l,n){return{kind:"array",itemType:l,N:n}}function Vt(l){if(l.kind==="array"){const n=Vt(l.itemType);return typeof l.N=="number"?`array<${n}, ${l.N}>`:l.itemType.kind==="value"?"array":`array<${n}>`}return l.kind}const Qn=[Ot,et,$t,Dt,mn,He,Fn,Ft(nn),kt,en];function qn(l,n){if(n.kind==="error")return null;if(l.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!qn(l.itemType,n.itemType))&&(typeof l.N!="number"||l.N===n.N))return null}else{if(l.kind===n.kind)return null;if(l.kind==="value"){for(const u of Qn)if(!qn(u,n))return null}}return`Expected ${Vt(l)} but found ${Vt(n)} instead.`}function tr(l,n){return n.some(u=>u.kind===l.kind)}function Tr(l,n){return n.some(u=>u==="null"?l===null:u==="array"?Array.isArray(l):u==="object"?l&&!Array.isArray(l)&&typeof l=="object":u===typeof l)}var _r,fs={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function yi(l){return(l=Math.round(l))<0?0:l>255?255:l}function ne(l){return yi(l[l.length-1]==="%"?parseFloat(l)/100*255:parseInt(l))}function V(l){return(n=l[l.length-1]==="%"?parseFloat(l)/100:parseFloat(l))<0?0:n>1?1:n;var n}function O(l,n,u){return u<0?u+=1:u>1&&(u-=1),6*u<1?l+(n-l)*u*6:2*u<1?n:3*u<2?l+(n-l)*(2/3-u)*6:l}try{_r={}.parseCSSColor=function(l){var n,u=l.replace(/ /g,"").toLowerCase();if(u in fs)return fs[u].slice();if(u[0]==="#")return u.length===4?(n=parseInt(u.substr(1),16))>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null:u.length===7&&(n=parseInt(u.substr(1),16))>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null;var g=u.indexOf("("),b=u.indexOf(")");if(g!==-1&&b+1===u.length){var S=u.substr(0,g),t=u.substr(g+1,b-(g+1)).split(","),a=1;switch(S){case"rgba":if(t.length!==4)return null;a=V(t.pop());case"rgb":return t.length!==3?null:[ne(t[0]),ne(t[1]),ne(t[2]),a];case"hsla":if(t.length!==4)return null;a=V(t.pop());case"hsl":if(t.length!==3)return null;var p=(parseFloat(t[0])%360+360)%360/360,v=V(t[1]),C=V(t[2]),E=C<=.5?C*(v+1):C+v-C*v,I=2*C-E;return[yi(255*O(I,E,p+1/3)),yi(255*O(I,E,p)),yi(255*O(I,E,p-1/3)),a];default:return null}}return null}}catch{}class W{constructor(n,u,g,b=1){this.r=n,this.g=u,this.b=g,this.a=b}static parse(n){if(!n)return;if(n instanceof W)return n;if(typeof n!="string")return;const u=_r(n);return u?new W(u[0]/255*u[3],u[1]/255*u[3],u[2]/255*u[3],u[3]):void 0}toString(){const[n,u,g,b]=this.toArray();return`rgba(${Math.round(n)},${Math.round(u)},${Math.round(g)},${b})`}toArray(){const{r:n,g:u,b:g,a:b}=this;return b===0?[0,0,0,0]:[255*n/b,255*u/b,255*g/b,b]}}W.black=new W(0,0,0,1),W.white=new W(1,1,1,1),W.transparent=new W(0,0,0,0),W.red=new W(1,0,0,1);class J{constructor(n,u,g){this.sensitivity=n?u?"variant":"case":u?"accent":"base",this.locale=g,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,u){return this.collator.compare(n,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class re{constructor(n,u,g,b,S){this.text=n,this.image=u,this.scale=g,this.fontStack=b,this.textColor=S}}class fe{constructor(n){this.sections=n}static fromString(n){return new fe([new re(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof fe?n:fe.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class ve{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof ve)return n;if(typeof n=="number")return new ve([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const u of n)if(typeof u!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new ve(n)}}toString(){return JSON.stringify(this.values)}}class pe{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new pe({name:n,available:!1}):null}}function Te(l,n,u,g){return typeof l=="number"&&l>=0&&l<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof u=="number"&&u>=0&&u<=255?g===void 0||typeof g=="number"&&g>=0&&g<=1?null:`Invalid rgba value [${[l,n,u,g].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof g=="number"?[l,n,u,g]:[l,n,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ue(l){if(l===null||typeof l=="string"||typeof l=="boolean"||typeof l=="number"||l instanceof W||l instanceof J||l instanceof fe||l instanceof ve||l instanceof pe)return!0;if(Array.isArray(l)){for(const n of l)if(!Ue(n))return!1;return!0}if(typeof l=="object"){for(const n in l)if(!Ue(l[n]))return!1;return!0}return!1}function st(l){if(l===null)return Ot;if(typeof l=="string")return $t;if(typeof l=="boolean")return Dt;if(typeof l=="number")return et;if(l instanceof W)return mn;if(l instanceof J)return sr;if(l instanceof fe)return He;if(l instanceof ve)return kt;if(l instanceof pe)return en;if(Array.isArray(l)){const n=l.length;let u;for(const g of l){const b=st(g);if(u){if(u===b)continue;u=nn;break}u=b}return Ft(u||nn,n)}return Fn}function $e(l){const n=typeof l;return l===null?"":n==="string"||n==="number"||n==="boolean"?String(l):l instanceof W||l instanceof fe||l instanceof ve||l instanceof pe?l.toString():JSON.stringify(l)}class _t{constructor(n,u){this.type=n,this.value=u}static parse(n,u){if(n.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!Ue(n[1]))return u.error("invalid value");const g=n[1];let b=st(g);const S=u.expectedType;return b.kind!=="array"||b.N!==0||!S||S.kind!=="array"||typeof S.N=="number"&&S.N!==0||(b=S),new _t(b,g)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class bt{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const zt={string:$t,number:et,boolean:Dt,object:Fn};class Ct{constructor(n,u){this.type=n,this.args=u}static parse(n,u){if(n.length<2)return u.error("Expected at least one argument.");let g,b=1;const S=n[0];if(S==="array"){let a,p;if(n.length>2){const v=n[1];if(typeof v!="string"||!(v in zt)||v==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);a=zt[v],b++}else a=nn;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return u.error('The length argument to "array" must be a positive integer literal',2);p=n[2],b++}g=Ft(a,p)}else{if(!zt[S])throw new Error(`Types doesn't contain name = ${S}`);g=zt[S]}const t=[];for(;b<n.length;b++){const a=u.parse(n[b],b,nn);if(!a)return null;t.push(a)}return new Ct(g,t)}evaluate(n){for(let u=0;u<this.args.length;u++){const g=this.args[u].evaluate(n);if(!qn(this.type,st(g)))return g;if(u===this.args.length-1)throw new bt(`Expected value to be of type ${Vt(this.type)}, but found ${Vt(st(g))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const on={"to-boolean":Dt,"to-color":mn,"to-number":et,"to-string":$t};class Qt{constructor(n,u){this.type=n,this.args=u}static parse(n,u){if(n.length<2)return u.error("Expected at least one argument.");const g=n[0];if(!on[g])throw new Error(`Can't parse ${g} as it is not part of the known types`);if((g==="to-boolean"||g==="to-string")&&n.length!==2)return u.error("Expected one argument.");const b=on[g],S=[];for(let t=1;t<n.length;t++){const a=u.parse(n[t],t,nn);if(!a)return null;S.push(a)}return new Qt(b,S)}evaluate(n){if(this.type.kind==="boolean")return!!this.args[0].evaluate(n);if(this.type.kind==="color"){let u,g;for(const b of this.args){if(u=b.evaluate(n),g=null,u instanceof W)return u;if(typeof u=="string"){const S=n.parseColor(u);if(S)return S}else if(Array.isArray(u)&&(g=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:Te(u[0],u[1],u[2],u[3]),!g))return new W(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new bt(g||`Could not parse color from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}if(this.type.kind==="padding"){let u;for(const g of this.args){u=g.evaluate(n);const b=ve.parse(u);if(b)return b}throw new bt(`Could not parse padding from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}if(this.type.kind==="number"){let u=null;for(const g of this.args){if(u=g.evaluate(n),u===null)return 0;const b=Number(u);if(!isNaN(b))return b}throw new bt(`Could not convert ${JSON.stringify(u)} to number.`)}return this.type.kind==="formatted"?fe.fromString($e(this.args[0].evaluate(n))):this.type.kind==="resolvedImage"?pe.fromString($e(this.args[0].evaluate(n))):$e(this.args[0].evaluate(n))}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const Xt=["Unknown","Point","LineString","Polygon"];class sn{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Xt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let u=this._parseColorCache[n];return u||(u=this._parseColorCache[n]=W.parse(n)),u}}class an{constructor(n,u,g,b){this.name=n,this.type=u,this._evaluate=g,this.args=b}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,u){const g=n[0],b=an.definitions[g];if(!b)return u.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0);const S=Array.isArray(b)?b[0]:b.type,t=Array.isArray(b)?[[b[1],b[2]]]:b.overloads,a=t.filter(([v])=>!Array.isArray(v)||v.length===n.length-1);let p=null;for(const[v,C]of a){p=new ml(u.registry,u.path,null,u.scope);const E=[];let I=!1;for(let j=1;j<n.length;j++){const z=n[j],X=Array.isArray(v)?v[j-1]:v.type,ee=p.parse(z,1+E.length,X);if(!ee){I=!0;break}E.push(ee)}if(!I)if(Array.isArray(v)&&v.length!==E.length)p.error(`Expected ${v.length} arguments, but found ${E.length} instead.`);else{for(let j=0;j<E.length;j++){const z=Array.isArray(v)?v[j]:v.type,X=E[j];p.concat(j+1).checkSubtype(z,X.type)}if(p.errors.length===0)return new an(g,S,C,E)}}if(a.length===1)u.errors.push(...p.errors);else{const v=(a.length?a:t).map(([E])=>{return I=E,Array.isArray(I)?`(${I.map(Vt).join(", ")})`:`(${Vt(I.type)}...)`;var I}).join(" | "),C=[];for(let E=1;E<n.length;E++){const I=u.parse(n[E],1+C.length);if(!I)return null;C.push(Vt(I.type))}u.error(`Expected arguments of type ${v}, but found (${C.join(", ")}) instead.`)}return null}static register(n,u){an.definitions=u;for(const g in u)n[g]=an}}class mr{constructor(n,u,g){this.type=sr,this.locale=g,this.caseSensitive=n,this.diacriticSensitive=u}static parse(n,u){if(n.length!==2)return u.error("Expected one argument.");const g=n[1];if(typeof g!="object"||Array.isArray(g))return u.error("Collator options argument must be an object.");const b=u.parse(g["case-sensitive"]!==void 0&&g["case-sensitive"],1,Dt);if(!b)return null;const S=u.parse(g["diacritic-sensitive"]!==void 0&&g["diacritic-sensitive"],1,Dt);if(!S)return null;let t=null;return g.locale&&(t=u.parse(g.locale,1,$t),!t)?null:new mr(b,S,t)}evaluate(n){return new J(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}const er=8192;function Bn(l,n){l[0]=Math.min(l[0],n[0]),l[1]=Math.min(l[1],n[1]),l[2]=Math.max(l[2],n[0]),l[3]=Math.max(l[3],n[1])}function kr(l,n){return!(l[0]<=n[0]||l[2]>=n[2]||l[1]<=n[1]||l[3]>=n[3])}function vi(l,n){const u=(180+l[0])/360,g=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l[1]*Math.PI/360)))/360,b=Math.pow(2,n.z);return[Math.round(u*b*er),Math.round(g*b*er)]}function Ao(l,n,u){const g=l[0]-n[0],b=l[1]-n[1],S=l[0]-u[0],t=l[1]-u[1];return g*t-S*b==0&&g*S<=0&&b*t<=0}function Wn(l,n){let u=!1;for(let t=0,a=n.length;t<a;t++){const p=n[t];for(let v=0,C=p.length;v<C-1;v++){if(Ao(l,p[v],p[v+1]))return!1;(b=p[v])[1]>(g=l)[1]!=(S=p[v+1])[1]>g[1]&&g[0]<(S[0]-b[0])*(g[1]-b[1])/(S[1]-b[1])+b[0]&&(u=!u)}}var g,b,S;return u}function nh(l,n){for(let u=0;u<n.length;u++)if(Wn(l,n[u]))return!0;return!1}function jo(l,n,u,g){const b=g[0]-u[0],S=g[1]-u[1],t=(l[0]-u[0])*S-b*(l[1]-u[1]),a=(n[0]-u[0])*S-b*(n[1]-u[1]);return t>0&&a<0||t<0&&a>0}function vc(l,n,u){for(const v of u)for(let C=0;C<v.length-1;++C)if((a=[(t=v[C+1])[0]-(S=v[C])[0],t[1]-S[1]])[0]*(p=[(b=n)[0]-(g=l)[0],b[1]-g[1]])[1]-a[1]*p[0]!=0&&jo(g,b,S,t)&&jo(S,t,g,b))return!0;var g,b,S,t,a,p;return!1}function Oo(l,n){for(let u=0;u<l.length;++u)if(!Wn(l[u],n))return!1;for(let u=0;u<l.length-1;++u)if(vc(l[u],l[u+1],n))return!1;return!0}function hl(l,n){for(let u=0;u<n.length;u++)if(Oo(l,n[u]))return!0;return!1}function Su(l,n,u){const g=[];for(let b=0;b<l.length;b++){const S=[];for(let t=0;t<l[b].length;t++){const a=vi(l[b][t],u);Bn(n,a),S.push(a)}g.push(S)}return g}function Mu(l,n,u){const g=[];for(let b=0;b<l.length;b++){const S=Su(l[b],n,u);g.push(S)}return g}function pl(l,n,u,g){if(l[0]<u[0]||l[0]>u[2]){const b=.5*g;let S=l[0]-u[0]>b?-g:u[0]-l[0]>b?g:0;S===0&&(S=l[0]-u[2]>b?-g:u[2]-l[0]>b?g:0),l[0]+=S}Bn(n,l)}function Eu(l,n,u,g){const b=Math.pow(2,g.z)*er,S=[g.x*er,g.y*er],t=[];for(const a of l)for(const p of a){const v=[p.x+S[0],p.y+S[1]];pl(v,n,u,b),t.push(v)}return t}function xc(l,n,u,g){const b=Math.pow(2,g.z)*er,S=[g.x*er,g.y*er],t=[];for(const p of l){const v=[];for(const C of p){const E=[C.x+S[0],C.y+S[1]];Bn(n,E),v.push(E)}t.push(v)}if(n[2]-n[0]<=b/2){(a=n)[0]=a[1]=1/0,a[2]=a[3]=-1/0;for(const p of t)for(const v of p)pl(v,n,u,b)}var a;return t}class Yi{constructor(n,u){this.type=Dt,this.geojson=n,this.geometries=u}static parse(n,u){if(n.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Ue(n[1])){const g=n[1];if(g.type==="FeatureCollection")for(let b=0;b<g.features.length;++b){const S=g.features[b].geometry.type;if(S==="Polygon"||S==="MultiPolygon")return new Yi(g,g.features[b].geometry)}else if(g.type==="Feature"){const b=g.geometry.type;if(b==="Polygon"||b==="MultiPolygon")return new Yi(g,g.geometry)}else if(g.type==="Polygon"||g.type==="MultiPolygon")return new Yi(g,g)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(u,g){const b=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],t=u.canonicalID();if(g.type==="Polygon"){const a=Su(g.coordinates,S,t),p=Eu(u.geometry(),b,S,t);if(!kr(b,S))return!1;for(const v of p)if(!Wn(v,a))return!1}if(g.type==="MultiPolygon"){const a=Mu(g.coordinates,S,t),p=Eu(u.geometry(),b,S,t);if(!kr(b,S))return!1;for(const v of p)if(!nh(v,a))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(u,g){const b=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],t=u.canonicalID();if(g.type==="Polygon"){const a=Su(g.coordinates,S,t),p=xc(u.geometry(),b,S,t);if(!kr(b,S))return!1;for(const v of p)if(!Oo(v,a))return!1}if(g.type==="MultiPolygon"){const a=Mu(g.coordinates,S,t),p=xc(u.geometry(),b,S,t);if(!kr(b,S))return!1;for(const v of p)if(!hl(v,a))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function _c(l){if(l instanceof an&&(l.name==="get"&&l.args.length===1||l.name==="feature-state"||l.name==="has"&&l.args.length===1||l.name==="properties"||l.name==="geometry-type"||l.name==="id"||/^filter-/.test(l.name))||l instanceof Yi)return!1;let n=!0;return l.eachChild(u=>{n&&!_c(u)&&(n=!1)}),n}function Ws(l){if(l instanceof an&&l.name==="feature-state")return!1;let n=!0;return l.eachChild(u=>{n&&!Ws(u)&&(n=!1)}),n}function $n(l,n){if(l instanceof an&&n.indexOf(l.name)>=0)return!1;let u=!0;return l.eachChild(g=>{u&&!$n(g,n)&&(u=!1)}),u}class fl{constructor(n,u){this.type=u.type,this.name=n,this.boundExpression=u}static parse(n,u){if(n.length!==2||typeof n[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const g=n[1];return u.scope.has(g)?new fl(g,u.scope.get(g)):u.error(`Unknown variable "${g}". Make sure "${g}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class ml{constructor(n,u=[],g,b=new ct,S=[]){this.registry=n,this.path=u,this.key=u.map(t=>`[${t}]`).join(""),this.scope=b,this.errors=S,this.expectedType=g}parse(n,u,g,b,S={}){return u?this.concat(u,g,b)._parse(n,S):this._parse(n,S)}_parse(n,u){function g(b,S,t){return t==="assert"?new Ct(S,[b]):t==="coerce"?new Qt(S,[b]):b}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const b=n[0];if(typeof b!="string")return this.error(`Expression name must be a string, but found ${typeof b} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const S=this.registry[b];if(S){let t=S.parse(n,this);if(!t)return null;if(this.expectedType){const a=this.expectedType,p=t.type;if(a.kind!=="string"&&a.kind!=="number"&&a.kind!=="boolean"&&a.kind!=="object"&&a.kind!=="array"||p.kind!=="value")if(a.kind!=="color"&&a.kind!=="formatted"&&a.kind!=="resolvedImage"||p.kind!=="value"&&p.kind!=="string")if(a.kind!=="padding"||p.kind!=="value"&&p.kind!=="number"&&p.kind!=="array"){if(this.checkSubtype(a,p))return null}else t=g(t,a,u.typeAnnotation||"coerce");else t=g(t,a,u.typeAnnotation||"coerce");else t=g(t,a,u.typeAnnotation||"assert")}if(!(t instanceof _t)&&t.type.kind!=="resolvedImage"&&zo(t)){const a=new sn;try{t=new _t(t.type,t.evaluate(a))}catch(p){return this.error(p.message),null}}return t}return this.error(`Unknown expression "${b}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,u,g){const b=typeof n=="number"?this.path.concat(n):this.path,S=g?this.scope.concat(g):this.scope;return new ml(this.registry,b,u||null,S,this.errors)}error(n,...u){const g=`${this.key}${u.map(b=>`[${b}]`).join("")}`;this.errors.push(new Cn(g,n))}checkSubtype(n,u){const g=qn(n,u);return g&&this.error(g),g}}function zo(l){if(l instanceof fl)return zo(l.boundExpression);if(l instanceof an&&l.name==="error"||l instanceof mr||l instanceof Yi)return!1;const n=l instanceof Qt||l instanceof Ct;let u=!0;return l.eachChild(g=>{u=n?u&&zo(g):u&&g instanceof _t}),!!u&&_c(l)&&$n(l,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function gl(l,n){const u=l.length-1;let g,b,S=0,t=u,a=0;for(;S<=t;)if(a=Math.floor((S+t)/2),g=l[a],b=l[a+1],g<=n){if(a===u||n<b)return a;S=a+1}else{if(!(g>n))throw new bt("Input is not a number.");t=a-1}return 0}class pa{constructor(n,u,g){this.type=n,this.input=u,this.labels=[],this.outputs=[];for(const[b,S]of g)this.labels.push(b),this.outputs.push(S)}static parse(n,u){if(n.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return u.error("Expected an even number of arguments.");const g=u.parse(n[1],1,et);if(!g)return null;const b=[];let S=null;u.expectedType&&u.expectedType.kind!=="value"&&(S=u.expectedType);for(let t=1;t<n.length;t+=2){const a=t===1?-1/0:n[t],p=n[t+1],v=t,C=t+1;if(typeof a!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',v);if(b.length&&b[b.length-1][0]>=a)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',v);const E=u.parse(p,C,S);if(!E)return null;S=S||E.type,b.push([a,E])}return new pa(S,g,b)}evaluate(n){const u=this.labels,g=this.outputs;if(u.length===1)return g[0].evaluate(n);const b=this.input.evaluate(n);if(b<=u[0])return g[0].evaluate(n);const S=u.length;return b>=u[S-1]?g[S-1].evaluate(n):g[gl(u,b)].evaluate(n)}eachChild(n){n(this.input);for(const u of this.outputs)n(u)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function dr(l,n,u){return l*(1-u)+n*u}var Fo=Object.freeze({__proto__:null,number:dr,color:function(l,n,u){return new W(dr(l.r,n.r,u),dr(l.g,n.g,u),dr(l.b,n.b,u),dr(l.a,n.a,u))},array:function(l,n,u){return l.map((g,b)=>dr(g,n[b],u))},padding:function(l,n,u){const g=l.values,b=n.values;return new ve([dr(g[0],b[0],u),dr(g[1],b[1],u),dr(g[2],b[2],u),dr(g[3],b[3],u)])}});const fa=.95047,Ms=1.08883,Es=4/29,Xi=6/29,Bo=3*Xi*Xi,yl=Math.PI/180,Gs=180/Math.PI;function Lu(l){return l>.008856451679035631?Math.pow(l,1/3):l/Bo+Es}function wc(l){return l>Xi?l*l*l:Bo*(l-Es)}function $o(l){return 255*(l<=.0031308?12.92*l:1.055*Math.pow(l,1/2.4)-.055)}function Tu(l){return(l/=255)<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}function ku(l){const n=Tu(l.r),u=Tu(l.g),g=Tu(l.b),b=Lu((.4124564*n+.3575761*u+.1804375*g)/fa),S=Lu((.2126729*n+.7151522*u+.072175*g)/1);return{l:116*S-16,a:500*(b-S),b:200*(S-Lu((.0193339*n+.119192*u+.9503041*g)/Ms)),alpha:l.a}}function Rn(l){let n=(l.l+16)/116,u=isNaN(l.a)?n:n+l.a/500,g=isNaN(l.b)?n:n-l.b/200;return n=1*wc(n),u=fa*wc(u),g=Ms*wc(g),new W($o(3.2404542*u-1.5371385*n-.4985314*g),$o(-.969266*u+1.8760108*n+.041556*g),$o(.0556434*u-.2040259*n+1.0572252*g),l.alpha)}function F1(l,n,u){const g=n-l;return l+u*(g>180||g<-180?g-360*Math.round(g/360):g)}const vl={forward:ku,reverse:Rn,interpolate:function(l,n,u){return{l:dr(l.l,n.l,u),a:dr(l.a,n.a,u),b:dr(l.b,n.b,u),alpha:dr(l.alpha,n.alpha,u)}}},Ls={forward:function(l){const{l:n,a:u,b:g}=ku(l),b=Math.atan2(g,u)*Gs;return{h:b<0?b+360:b,c:Math.sqrt(u*u+g*g),l:n,alpha:l.a}},reverse:function(l){const n=l.h*yl,u=l.c;return Rn({l:l.l,a:Math.cos(n)*u,b:Math.sin(n)*u,alpha:l.alpha})},interpolate:function(l,n,u){return{h:F1(l.h,n.h,u),c:dr(l.c,n.c,u),l:dr(l.l,n.l,u),alpha:dr(l.alpha,n.alpha,u)}}};var ma=Object.freeze({__proto__:null,lab:vl,hcl:Ls});class Vr{constructor(n,u,g,b,S){this.type=n,this.operator=u,this.interpolation=g,this.input=b,this.labels=[],this.outputs=[];for(const[t,a]of S)this.labels.push(t),this.outputs.push(a)}static interpolationFactor(n,u,g,b){let S=0;if(n.name==="exponential")S=ga(u,n.base,g,b);else if(n.name==="linear")S=ga(u,1,g,b);else if(n.name==="cubic-bezier"){const t=n.controlPoints;S=new L(t[0],t[1],t[2],t[3]).solve(ga(u,1,g,b))}return S}static parse(n,u){let[g,b,S,...t]=n;if(!Array.isArray(b)||b.length===0)return u.error("Expected an interpolation type expression.",1);if(b[0]==="linear")b={name:"linear"};else if(b[0]==="exponential"){const v=b[1];if(typeof v!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);b={name:"exponential",base:v}}else{if(b[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(b[0])}`,1,0);{const v=b.slice(1);if(v.length!==4||v.some(C=>typeof C!="number"||C<0||C>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);b={name:"cubic-bezier",controlPoints:v}}}if(n.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(S=u.parse(S,2,et),!S)return null;const a=[];let p=null;g==="interpolate-hcl"||g==="interpolate-lab"?p=mn:u.expectedType&&u.expectedType.kind!=="value"&&(p=u.expectedType);for(let v=0;v<t.length;v+=2){const C=t[v],E=t[v+1],I=v+3,j=v+4;if(typeof C!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',I);if(a.length&&a[a.length-1][0]>=C)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',I);const z=u.parse(E,j,p);if(!z)return null;p=p||z.type,a.push([C,z])}return p.kind==="number"||p.kind==="color"||p.kind==="padding"||p.kind==="array"&&p.itemType.kind==="number"&&typeof p.N=="number"?new Vr(p,g,b,S,a):u.error(`Type ${Vt(p)} is not interpolatable.`)}evaluate(n){const u=this.labels,g=this.outputs;if(u.length===1)return g[0].evaluate(n);const b=this.input.evaluate(n);if(b<=u[0])return g[0].evaluate(n);const S=u.length;if(b>=u[S-1])return g[S-1].evaluate(n);const t=gl(u,b),a=Vr.interpolationFactor(this.interpolation,b,u[t],u[t+1]),p=g[t].evaluate(n),v=g[t+1].evaluate(n);return this.operator==="interpolate"?Fo[this.type.kind.toLowerCase()](p,v,a):this.operator==="interpolate-hcl"?Ls.reverse(Ls.interpolate(Ls.forward(p),Ls.forward(v),a)):vl.reverse(vl.interpolate(vl.forward(p),vl.forward(v),a))}eachChild(n){n(this.input);for(const u of this.outputs)n(u)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function ga(l,n,u,g){const b=g-u,S=l-u;return b===0?0:n===1?S/b:(Math.pow(n,S)-1)/(Math.pow(n,b)-1)}class bc{constructor(n,u){this.type=n,this.args=u}static parse(n,u){if(n.length<2)return u.error("Expectected at least one argument.");let g=null;const b=u.expectedType;b&&b.kind!=="value"&&(g=b);const S=[];for(const a of n.slice(1)){const p=u.parse(a,1+S.length,g,void 0,{typeAnnotation:"omit"});if(!p)return null;g=g||p.type,S.push(p)}if(!g)throw new Error("No output type");const t=b&&S.some(a=>qn(b,a.type));return new bc(t?nn:g,S)}evaluate(n){let u,g=null,b=0;for(const S of this.args)if(b++,g=S.evaluate(n),g&&g instanceof pe&&!g.available&&(u||(u=g.name),g=null,b===this.args.length&&(g=u)),g!==null)break;return g}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}class Cc{constructor(n,u){this.type=u.type,this.bindings=[].concat(n),this.result=u}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const u of this.bindings)n(u[1]);n(this.result)}static parse(n,u){if(n.length<4)return u.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const g=[];for(let S=1;S<n.length-1;S+=2){const t=n[S];if(typeof t!="string")return u.error(`Expected string, but found ${typeof t} instead.`,S);if(/[^a-zA-Z0-9_]/.test(t))return u.error("Variable names must contain only alphanumeric characters or '_'.",S);const a=u.parse(n[S+1],S+1);if(!a)return null;g.push([t,a])}const b=u.parse(n[n.length-1],n.length-1,u.expectedType,g);return b?new Cc(g,b):null}outputDefined(){return this.result.outputDefined()}}class xl{constructor(n,u,g){this.type=n,this.index=u,this.input=g}static parse(n,u){if(n.length!==3)return u.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const g=u.parse(n[1],1,et),b=u.parse(n[2],2,Ft(u.expectedType||nn));return g&&b?new xl(b.type.itemType,g,b):null}evaluate(n){const u=this.index.evaluate(n),g=this.input.evaluate(n);if(u<0)throw new bt(`Array index out of bounds: ${u} < 0.`);if(u>=g.length)throw new bt(`Array index out of bounds: ${u} > ${g.length-1}.`);if(u!==Math.floor(u))throw new bt(`Array index must be an integer, but found ${u} instead.`);return g[u]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class ya{constructor(n,u){this.type=Dt,this.needle=n,this.haystack=u}static parse(n,u){if(n.length!==3)return u.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const g=u.parse(n[1],1,nn),b=u.parse(n[2],2,nn);return g&&b?tr(g.type,[Dt,$t,et,Ot,nn])?new ya(g,b):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Vt(g.type)} instead`):null}evaluate(n){const u=this.needle.evaluate(n),g=this.haystack.evaluate(n);if(!g)return!1;if(!Tr(u,["boolean","string","number","null"]))throw new bt(`Expected first argument to be of type boolean, string, number or null, but found ${Vt(st(u))} instead.`);if(!Tr(g,["string","array"]))throw new bt(`Expected second argument to be of type array or string, but found ${Vt(st(g))} instead.`);return g.indexOf(u)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class va{constructor(n,u,g){this.type=et,this.needle=n,this.haystack=u,this.fromIndex=g}static parse(n,u){if(n.length<=2||n.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const g=u.parse(n[1],1,nn),b=u.parse(n[2],2,nn);if(!g||!b)return null;if(!tr(g.type,[Dt,$t,et,Ot,nn]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Vt(g.type)} instead`);if(n.length===4){const S=u.parse(n[3],3,et);return S?new va(g,b,S):null}return new va(g,b)}evaluate(n){const u=this.needle.evaluate(n),g=this.haystack.evaluate(n);if(!Tr(u,["boolean","string","number","null"]))throw new bt(`Expected first argument to be of type boolean, string, number or null, but found ${Vt(st(u))} instead.`);if(!Tr(g,["string","array"]))throw new bt(`Expected second argument to be of type array or string, but found ${Vt(st(g))} instead.`);if(this.fromIndex){const b=this.fromIndex.evaluate(n);return g.indexOf(u,b)}return g.indexOf(u)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class Sc{constructor(n,u,g,b,S,t){this.inputType=n,this.type=u,this.input=g,this.cases=b,this.outputs=S,this.otherwise=t}static parse(n,u){if(n.length<5)return u.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return u.error("Expected an even number of arguments.");let g,b;u.expectedType&&u.expectedType.kind!=="value"&&(b=u.expectedType);const S={},t=[];for(let v=2;v<n.length-1;v+=2){let C=n[v];const E=n[v+1];Array.isArray(C)||(C=[C]);const I=u.concat(v);if(C.length===0)return I.error("Expected at least one branch label.");for(const z of C){if(typeof z!="number"&&typeof z!="string")return I.error("Branch labels must be numbers or strings.");if(typeof z=="number"&&Math.abs(z)>Number.MAX_SAFE_INTEGER)return I.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof z=="number"&&Math.floor(z)!==z)return I.error("Numeric branch labels must be integer values.");if(g){if(I.checkSubtype(g,st(z)))return null}else g=st(z);if(S[String(z)]!==void 0)return I.error("Branch labels must be unique.");S[String(z)]=t.length}const j=u.parse(E,v,b);if(!j)return null;b=b||j.type,t.push(j)}const a=u.parse(n[1],1,nn);if(!a)return null;const p=u.parse(n[n.length-1],n.length-1,b);return p?a.type.kind!=="value"&&u.concat(1).checkSubtype(g,a.type)?null:new Sc(g,b,a,S,t,p):null}evaluate(n){const u=this.input.evaluate(n);return(st(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class ms{constructor(n,u,g){this.type=n,this.branches=u,this.otherwise=g}static parse(n,u){if(n.length<4)return u.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return u.error("Expected an odd number of arguments.");let g;u.expectedType&&u.expectedType.kind!=="value"&&(g=u.expectedType);const b=[];for(let t=1;t<n.length-1;t+=2){const a=u.parse(n[t],t,Dt);if(!a)return null;const p=u.parse(n[t+1],t+1,g);if(!p)return null;b.push([a,p]),g=g||p.type}const S=u.parse(n[n.length-1],n.length-1,g);if(!S)return null;if(!g)throw new Error("Can't infer output type");return new ms(g,b,S)}evaluate(n){for(const[u,g]of this.branches)if(u.evaluate(n))return g.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[u,g]of this.branches)n(u),n(g);n(this.otherwise)}outputDefined(){return this.branches.every(([n,u])=>u.outputDefined())&&this.otherwise.outputDefined()}}class xa{constructor(n,u,g,b){this.type=n,this.input=u,this.beginIndex=g,this.endIndex=b}static parse(n,u){if(n.length<=2||n.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const g=u.parse(n[1],1,nn),b=u.parse(n[2],2,et);if(!g||!b)return null;if(!tr(g.type,[Ft(nn),$t,nn]))return u.error(`Expected first argument to be of type array or string, but found ${Vt(g.type)} instead`);if(n.length===4){const S=u.parse(n[3],3,et);return S?new xa(g.type,g,b,S):null}return new xa(g.type,g,b)}evaluate(n){const u=this.input.evaluate(n),g=this.beginIndex.evaluate(n);if(!Tr(u,["string","array"]))throw new bt(`Expected first argument to be of type array or string, but found ${Vt(st(u))} instead.`);if(this.endIndex){const b=this.endIndex.evaluate(n);return u.slice(g,b)}return u.slice(g)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function _l(l,n){return l==="=="||l==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function Pu(l,n,u,g){return g.compare(n,u)===0}function Ts(l,n,u){const g=l!=="=="&&l!=="!=";return class Y5{constructor(S,t,a){this.type=Dt,this.lhs=S,this.rhs=t,this.collator=a,this.hasUntypedArgument=S.type.kind==="value"||t.type.kind==="value"}static parse(S,t){if(S.length!==3&&S.length!==4)return t.error("Expected two or three arguments.");const a=S[0];let p=t.parse(S[1],1,nn);if(!p)return null;if(!_l(a,p.type))return t.concat(1).error(`"${a}" comparisons are not supported for type '${Vt(p.type)}'.`);let v=t.parse(S[2],2,nn);if(!v)return null;if(!_l(a,v.type))return t.concat(2).error(`"${a}" comparisons are not supported for type '${Vt(v.type)}'.`);if(p.type.kind!==v.type.kind&&p.type.kind!=="value"&&v.type.kind!=="value")return t.error(`Cannot compare types '${Vt(p.type)}' and '${Vt(v.type)}'.`);g&&(p.type.kind==="value"&&v.type.kind!=="value"?p=new Ct(v.type,[p]):p.type.kind!=="value"&&v.type.kind==="value"&&(v=new Ct(p.type,[v])));let C=null;if(S.length===4){if(p.type.kind!=="string"&&v.type.kind!=="string"&&p.type.kind!=="value"&&v.type.kind!=="value")return t.error("Cannot use collator to compare non-string types.");if(C=t.parse(S[3],3,sr),!C)return null}return new Y5(p,v,C)}evaluate(S){const t=this.lhs.evaluate(S),a=this.rhs.evaluate(S);if(g&&this.hasUntypedArgument){const p=st(t),v=st(a);if(p.kind!==v.kind||p.kind!=="string"&&p.kind!=="number")throw new bt(`Expected arguments for "${l}" to be (string, string) or (number, number), but found (${p.kind}, ${v.kind}) instead.`)}if(this.collator&&!g&&this.hasUntypedArgument){const p=st(t),v=st(a);if(p.kind!=="string"||v.kind!=="string")return n(S,t,a)}return this.collator?u(S,t,a,this.collator.evaluate(S)):n(S,t,a)}eachChild(S){S(this.lhs),S(this.rhs),this.collator&&S(this.collator)}outputDefined(){return!0}}}const Mc=Ts("==",function(l,n,u){return n===u},Pu),B1=Ts("!=",function(l,n,u){return n!==u},function(l,n,u,g){return!Pu(0,n,u,g)}),Ti=Ts("<",function(l,n,u){return n<u},function(l,n,u,g){return g.compare(n,u)<0}),_a=Ts(">",function(l,n,u){return n>u},function(l,n,u,g){return g.compare(n,u)>0}),Du=Ts("<=",function(l,n,u){return n<=u},function(l,n,u,g){return g.compare(n,u)<=0}),wl=Ts(">=",function(l,n,u){return n>=u},function(l,n,u,g){return g.compare(n,u)>=0});class Iu{constructor(n,u,g,b,S){this.type=$t,this.number=n,this.locale=u,this.currency=g,this.minFractionDigits=b,this.maxFractionDigits=S}static parse(n,u){if(n.length!==3)return u.error("Expected two arguments.");const g=u.parse(n[1],1,et);if(!g)return null;const b=n[2];if(typeof b!="object"||Array.isArray(b))return u.error("NumberFormat options argument must be an object.");let S=null;if(b.locale&&(S=u.parse(b.locale,1,$t),!S))return null;let t=null;if(b.currency&&(t=u.parse(b.currency,1,$t),!t))return null;let a=null;if(b["min-fraction-digits"]&&(a=u.parse(b["min-fraction-digits"],1,et),!a))return null;let p=null;return b["max-fraction-digits"]&&(p=u.parse(b["max-fraction-digits"],1,et),!p)?null:new Iu(g,S,t,a,p)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class wa{constructor(n){this.type=He,this.sections=n}static parse(n,u){if(n.length<2)return u.error("Expected at least one argument.");const g=n[1];if(!Array.isArray(g)&&typeof g=="object")return u.error("First argument must be an image or text section.");const b=[];let S=!1;for(let t=1;t<=n.length-1;++t){const a=n[t];if(S&&typeof a=="object"&&!Array.isArray(a)){S=!1;let p=null;if(a["font-scale"]&&(p=u.parse(a["font-scale"],1,et),!p))return null;let v=null;if(a["text-font"]&&(v=u.parse(a["text-font"],1,Ft($t)),!v))return null;let C=null;if(a["text-color"]&&(C=u.parse(a["text-color"],1,mn),!C))return null;const E=b[b.length-1];E.scale=p,E.font=v,E.textColor=C}else{const p=u.parse(n[t],1,nn);if(!p)return null;const v=p.type.kind;if(v!=="string"&&v!=="value"&&v!=="null"&&v!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");S=!0,b.push({content:p,scale:null,font:null,textColor:null})}}return new wa(b)}evaluate(n){return new fe(this.sections.map(u=>{const g=u.content.evaluate(n);return st(g)===en?new re("",g,null,null,null):new re($e(g),null,u.scale?u.scale.evaluate(n):null,u.font?u.font.evaluate(n).join(","):null,u.textColor?u.textColor.evaluate(n):null)}))}eachChild(n){for(const u of this.sections)n(u.content),u.scale&&n(u.scale),u.font&&n(u.font),u.textColor&&n(u.textColor)}outputDefined(){return!1}}class bl{constructor(n){this.type=en,this.input=n}static parse(n,u){if(n.length!==2)return u.error("Expected two arguments.");const g=u.parse(n[1],1,$t);return g?new bl(g):u.error("No image name provided.")}evaluate(n){const u=this.input.evaluate(n),g=pe.fromString(u);return g&&n.availableImages&&(g.available=n.availableImages.indexOf(u)>-1),g}eachChild(n){n(this.input)}outputDefined(){return!1}}class Vo{constructor(n){this.type=et,this.input=n}static parse(n,u){if(n.length!==2)return u.error(`Expected 1 argument, but found ${n.length-1} instead.`);const g=u.parse(n[1],1);return g?g.type.kind!=="array"&&g.type.kind!=="string"&&g.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${Vt(g.type)} instead.`):new Vo(g):null}evaluate(n){const u=this.input.evaluate(n);if(typeof u=="string"||Array.isArray(u))return u.length;throw new bt(`Expected value to be of type string or array, but found ${Vt(st(u))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const ks={"==":Mc,"!=":B1,">":_a,"<":Ti,">=":wl,"<=":Du,array:Ct,at:xl,boolean:Ct,case:ms,coalesce:bc,collator:mr,format:wa,image:bl,in:ya,"index-of":va,interpolate:Vr,"interpolate-hcl":Vr,"interpolate-lab":Vr,length:Vo,let:Cc,literal:_t,match:Sc,number:Ct,"number-format":Iu,object:Ct,slice:xa,step:pa,string:Ct,"to-boolean":Qt,"to-color":Qt,"to-number":Qt,"to-string":Qt,var:fl,within:Yi};function Nu(l,[n,u,g,b]){n=n.evaluate(l),u=u.evaluate(l),g=g.evaluate(l);const S=b?b.evaluate(l):1,t=Te(n,u,g,S);if(t)throw new bt(t);return new W(n/255*S,u/255*S,g/255*S,S)}function $1(l,n){return l in n}function Ru(l,n){const u=n[l];return u===void 0?null:u}function Ys(l){return{type:l}}function Ec(l){return{result:"success",value:l}}function ba(l){return{result:"error",value:l}}function Ca(l){return l["property-type"]==="data-driven"||l["property-type"]==="cross-faded-data-driven"}function wr(l){return!!l.expression&&l.expression.parameters.indexOf("zoom")>-1}function Au(l){return!!l.expression&&l.expression.interpolated}function Ut(l){return l instanceof Number?"number":l instanceof String?"string":l instanceof Boolean?"boolean":Array.isArray(l)?"array":l===null?"null":typeof l}function Ho(l){return typeof l=="object"&&l!==null&&!Array.isArray(l)}function gr(l){return l}function or(l,n){const u=n.type==="color",g=l.stops&&typeof l.stops[0][0]=="object",b=g||!(g||l.property!==void 0),S=l.type||(Au(n)?"exponential":"interval");if(u||n.type==="padding"){const v=u?W.parse:ve.parse;(l=cn({},l)).stops&&(l.stops=l.stops.map(C=>[C[0],v(C[1])])),l.default=v(l.default?l.default:n.default)}if(l.colorSpace&&l.colorSpace!=="rgb"&&!ma[l.colorSpace])throw new Error(`Unknown color space: ${l.colorSpace}`);let t,a,p;if(S==="exponential")t=H1;else if(S==="interval")t=ju;else if(S==="categorical"){t=V1,a=Object.create(null);for(const v of l.stops)a[v[0]]=v[1];p=typeof l.stops[0][0]}else{if(S!=="identity")throw new Error(`Unknown function type "${S}"`);t=rh}if(g){const v={},C=[];for(let j=0;j<l.stops.length;j++){const z=l.stops[j],X=z[0].zoom;v[X]===void 0&&(v[X]={zoom:X,type:l.type,property:l.property,default:l.default,stops:[]},C.push(X)),v[X].stops.push([z[0].value,z[1]])}const E=[];for(const j of C)E.push([v[j].zoom,or(v[j],n)]);const I={name:"linear"};return{kind:"composite",interpolationType:I,interpolationFactor:Vr.interpolationFactor.bind(void 0,I),zoomStops:E.map(j=>j[0]),evaluate:({zoom:j},z)=>H1({stops:E,base:l.base},n,j).evaluate(j,z)}}if(b){const v=S==="exponential"?{name:"exponential",base:l.base!==void 0?l.base:1}:null;return{kind:"camera",interpolationType:v,interpolationFactor:Vr.interpolationFactor.bind(void 0,v),zoomStops:l.stops.map(C=>C[0]),evaluate:({zoom:C})=>t(l,n,C,a,p)}}return{kind:"source",evaluate(v,C){const E=C&&C.properties?C.properties[l.property]:void 0;return E===void 0?Xs(l.default,n.default):t(l,n,E,a,p)}}}function Xs(l,n,u){return l!==void 0?l:n!==void 0?n:u!==void 0?u:void 0}function V1(l,n,u,g,b){return Xs(typeof u===b?g[u]:void 0,l.default,n.default)}function ju(l,n,u){if(Ut(u)!=="number")return Xs(l.default,n.default);const g=l.stops.length;if(g===1||u<=l.stops[0][0])return l.stops[0][1];if(u>=l.stops[g-1][0])return l.stops[g-1][1];const b=gl(l.stops.map(S=>S[0]),u);return l.stops[b][1]}function H1(l,n,u){const g=l.base!==void 0?l.base:1;if(Ut(u)!=="number")return Xs(l.default,n.default);const b=l.stops.length;if(b===1||u<=l.stops[0][0])return l.stops[0][1];if(u>=l.stops[b-1][0])return l.stops[b-1][1];const S=gl(l.stops.map(C=>C[0]),u),t=function(C,E,I,j){const z=j-I,X=C-I;return z===0?0:E===1?X/z:(Math.pow(E,X)-1)/(Math.pow(E,z)-1)}(u,g,l.stops[S][0],l.stops[S+1][0]),a=l.stops[S][1],p=l.stops[S+1][1];let v=Fo[n.type]||gr;if(l.colorSpace&&l.colorSpace!=="rgb"){const C=ma[l.colorSpace];v=(E,I)=>C.reverse(C.interpolate(C.forward(E),C.forward(I),t))}return typeof a.evaluate=="function"?{evaluate(...C){const E=a.evaluate.apply(void 0,C),I=p.evaluate.apply(void 0,C);if(E!==void 0&&I!==void 0)return v(E,I,t)}}:v(a,p,t)}function rh(l,n,u){switch(n.type){case"color":u=W.parse(u);break;case"formatted":u=fe.fromString(u.toString());break;case"resolvedImage":u=pe.fromString(u.toString());break;case"padding":u=ve.parse(u);break;default:Ut(u)===n.type||n.type==="enum"&&n.values[u]||(u=void 0)}return Xs(u,l.default,n.default)}an.register(ks,{error:[{kind:"error"},[$t],(l,[n])=>{throw new bt(n.evaluate(l))}],typeof:[$t,[nn],(l,[n])=>Vt(st(n.evaluate(l)))],"to-rgba":[Ft(et,4),[mn],(l,[n])=>n.evaluate(l).toArray()],rgb:[mn,[et,et,et],Nu],rgba:[mn,[et,et,et,et],Nu],has:{type:Dt,overloads:[[[$t],(l,[n])=>$1(n.evaluate(l),l.properties())],[[$t,Fn],(l,[n,u])=>$1(n.evaluate(l),u.evaluate(l))]]},get:{type:nn,overloads:[[[$t],(l,[n])=>Ru(n.evaluate(l),l.properties())],[[$t,Fn],(l,[n,u])=>Ru(n.evaluate(l),u.evaluate(l))]]},"feature-state":[nn,[$t],(l,[n])=>Ru(n.evaluate(l),l.featureState||{})],properties:[Fn,[],l=>l.properties()],"geometry-type":[$t,[],l=>l.geometryType()],id:[nn,[],l=>l.id()],zoom:[et,[],l=>l.globals.zoom],"heatmap-density":[et,[],l=>l.globals.heatmapDensity||0],"line-progress":[et,[],l=>l.globals.lineProgress||0],accumulated:[nn,[],l=>l.globals.accumulated===void 0?null:l.globals.accumulated],"+":[et,Ys(et),(l,n)=>{let u=0;for(const g of n)u+=g.evaluate(l);return u}],"*":[et,Ys(et),(l,n)=>{let u=1;for(const g of n)u*=g.evaluate(l);return u}],"-":{type:et,overloads:[[[et,et],(l,[n,u])=>n.evaluate(l)-u.evaluate(l)],[[et],(l,[n])=>-n.evaluate(l)]]},"/":[et,[et,et],(l,[n,u])=>n.evaluate(l)/u.evaluate(l)],"%":[et,[et,et],(l,[n,u])=>n.evaluate(l)%u.evaluate(l)],ln2:[et,[],()=>Math.LN2],pi:[et,[],()=>Math.PI],e:[et,[],()=>Math.E],"^":[et,[et,et],(l,[n,u])=>Math.pow(n.evaluate(l),u.evaluate(l))],sqrt:[et,[et],(l,[n])=>Math.sqrt(n.evaluate(l))],log10:[et,[et],(l,[n])=>Math.log(n.evaluate(l))/Math.LN10],ln:[et,[et],(l,[n])=>Math.log(n.evaluate(l))],log2:[et,[et],(l,[n])=>Math.log(n.evaluate(l))/Math.LN2],sin:[et,[et],(l,[n])=>Math.sin(n.evaluate(l))],cos:[et,[et],(l,[n])=>Math.cos(n.evaluate(l))],tan:[et,[et],(l,[n])=>Math.tan(n.evaluate(l))],asin:[et,[et],(l,[n])=>Math.asin(n.evaluate(l))],acos:[et,[et],(l,[n])=>Math.acos(n.evaluate(l))],atan:[et,[et],(l,[n])=>Math.atan(n.evaluate(l))],min:[et,Ys(et),(l,n)=>Math.min(...n.map(u=>u.evaluate(l)))],max:[et,Ys(et),(l,n)=>Math.max(...n.map(u=>u.evaluate(l)))],abs:[et,[et],(l,[n])=>Math.abs(n.evaluate(l))],round:[et,[et],(l,[n])=>{const u=n.evaluate(l);return u<0?-Math.round(-u):Math.round(u)}],floor:[et,[et],(l,[n])=>Math.floor(n.evaluate(l))],ceil:[et,[et],(l,[n])=>Math.ceil(n.evaluate(l))],"filter-==":[Dt,[$t,nn],(l,[n,u])=>l.properties()[n.value]===u.value],"filter-id-==":[Dt,[nn],(l,[n])=>l.id()===n.value],"filter-type-==":[Dt,[$t],(l,[n])=>l.geometryType()===n.value],"filter-<":[Dt,[$t,nn],(l,[n,u])=>{const g=l.properties()[n.value],b=u.value;return typeof g==typeof b&&g<b}],"filter-id-<":[Dt,[nn],(l,[n])=>{const u=l.id(),g=n.value;return typeof u==typeof g&&u<g}],"filter->":[Dt,[$t,nn],(l,[n,u])=>{const g=l.properties()[n.value],b=u.value;return typeof g==typeof b&&g>b}],"filter-id->":[Dt,[nn],(l,[n])=>{const u=l.id(),g=n.value;return typeof u==typeof g&&u>g}],"filter-<=":[Dt,[$t,nn],(l,[n,u])=>{const g=l.properties()[n.value],b=u.value;return typeof g==typeof b&&g<=b}],"filter-id-<=":[Dt,[nn],(l,[n])=>{const u=l.id(),g=n.value;return typeof u==typeof g&&u<=g}],"filter->=":[Dt,[$t,nn],(l,[n,u])=>{const g=l.properties()[n.value],b=u.value;return typeof g==typeof b&&g>=b}],"filter-id->=":[Dt,[nn],(l,[n])=>{const u=l.id(),g=n.value;return typeof u==typeof g&&u>=g}],"filter-has":[Dt,[nn],(l,[n])=>n.value in l.properties()],"filter-has-id":[Dt,[],l=>l.id()!==null&&l.id()!==void 0],"filter-type-in":[Dt,[Ft($t)],(l,[n])=>n.value.indexOf(l.geometryType())>=0],"filter-id-in":[Dt,[Ft(nn)],(l,[n])=>n.value.indexOf(l.id())>=0],"filter-in-small":[Dt,[$t,Ft(nn)],(l,[n,u])=>u.value.indexOf(l.properties()[n.value])>=0],"filter-in-large":[Dt,[$t,Ft(nn)],(l,[n,u])=>function(g,b,S,t){for(;S<=t;){const a=S+t>>1;if(b[a]===g)return!0;b[a]>g?t=a-1:S=a+1}return!1}(l.properties()[n.value],u.value,0,u.value.length-1)],all:{type:Dt,overloads:[[[Dt,Dt],(l,[n,u])=>n.evaluate(l)&&u.evaluate(l)],[Ys(Dt),(l,n)=>{for(const u of n)if(!u.evaluate(l))return!1;return!0}]]},any:{type:Dt,overloads:[[[Dt,Dt],(l,[n,u])=>n.evaluate(l)||u.evaluate(l)],[Ys(Dt),(l,n)=>{for(const u of n)if(u.evaluate(l))return!0;return!1}]]},"!":[Dt,[Dt],(l,[n])=>!n.evaluate(l)],"is-supported-script":[Dt,[$t],(l,[n])=>{const u=l.globals&&l.globals.isSupportedScript;return!u||u(n.evaluate(l))}],upcase:[$t,[$t],(l,[n])=>n.evaluate(l).toUpperCase()],downcase:[$t,[$t],(l,[n])=>n.evaluate(l).toLowerCase()],concat:[$t,Ys(nn),(l,n)=>n.map(u=>$e(u.evaluate(l))).join("")],"resolved-locale":[$t,[sr],(l,[n])=>n.evaluate(l).resolvedLocale()]});class Ou{constructor(n,u){this.expression=n,this._warningHistory={},this._evaluator=new sn,this._defaultValue=u?function(g){return g.type==="color"&&Ho(g.default)?new W(0,0,0,0):g.type==="color"?W.parse(g.default)||null:g.type==="padding"?ve.parse(g.default)||null:g.default===void 0?null:g.default}(u):null,this._enumValues=u&&u.type==="enum"?u.values:null}evaluateWithoutErrorHandling(n,u,g,b,S,t){return this._evaluator.globals=n,this._evaluator.feature=u,this._evaluator.featureState=g,this._evaluator.canonical=b,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=t,this.expression.evaluate(this._evaluator)}evaluate(n,u,g,b,S,t){this._evaluator.globals=n,this._evaluator.feature=u||null,this._evaluator.featureState=g||null,this._evaluator.canonical=b,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=t||null;try{const a=this.expression.evaluate(this._evaluator);if(a==null||typeof a=="number"&&a!=a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new bt(`Expected value to be one of ${Object.keys(this._enumValues).map(p=>JSON.stringify(p)).join(", ")}, but found ${JSON.stringify(a)} instead.`);return a}catch(a){return this._warningHistory[a.message]||(this._warningHistory[a.message]=!0,typeof console<"u"&&console.warn(a.message)),this._defaultValue}}}function Sa(l){return Array.isArray(l)&&l.length>0&&typeof l[0]=="string"&&l[0]in ks}function Cl(l,n){const u=new ml(ks,[],n?function(b){const S={color:mn,string:$t,number:et,enum:$t,boolean:Dt,formatted:He,padding:kt,resolvedImage:en};return b.type==="array"?Ft(S[b.value]||nn,b.length):S[b.type]}(n):void 0),g=u.parse(l,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return g?Ec(new Ou(g,n)):ba(u.errors)}class Lc{constructor(n,u){this.kind=n,this._styleExpression=u,this.isStateDependent=n!=="constant"&&!Ws(u.expression)}evaluateWithoutErrorHandling(n,u,g,b,S,t){return this._styleExpression.evaluateWithoutErrorHandling(n,u,g,b,S,t)}evaluate(n,u,g,b,S,t){return this._styleExpression.evaluate(n,u,g,b,S,t)}}class Sl{constructor(n,u,g,b){this.kind=n,this.zoomStops=g,this._styleExpression=u,this.isStateDependent=n!=="camera"&&!Ws(u.expression),this.interpolationType=b}evaluateWithoutErrorHandling(n,u,g,b,S,t){return this._styleExpression.evaluateWithoutErrorHandling(n,u,g,b,S,t)}evaluate(n,u,g,b,S,t){return this._styleExpression.evaluate(n,u,g,b,S,t)}interpolationFactor(n,u,g){return this.interpolationType?Vr.interpolationFactor(this.interpolationType,n,u,g):0}}function U1(l,n){const u=Cl(l,n);if(u.result==="error")return u;const g=u.value.expression,b=_c(g);if(!b&&!Ca(n))return ba([new Cn("","data expressions not supported")]);const S=$n(g,["zoom"]);if(!S&&!wr(n))return ba([new Cn("","zoom expressions not supported")]);const t=kc(g);return t||S?t instanceof Cn?ba([t]):t instanceof Vr&&!Au(n)?ba([new Cn("",'"interpolate" expressions cannot be used with this property')]):Ec(t?new Sl(b?"camera":"composite",u.value,t.labels,t instanceof Vr?t.interpolation:void 0):new Lc(b?"constant":"source",u.value)):ba([new Cn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Tc{constructor(n,u){this._parameters=n,this._specification=u,cn(this,or(this._parameters,this._specification))}static deserialize(n){return new Tc(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function kc(l){let n=null;if(l instanceof Cc)n=kc(l.result);else if(l instanceof bc){for(const u of l.args)if(n=kc(u),n)break}else(l instanceof pa||l instanceof Vr)&&l.input instanceof an&&l.input.name==="zoom"&&(n=l);return n instanceof Cn||l.eachChild(u=>{const g=kc(u);g instanceof Cn?n=g:!n&&g?n=new Cn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&g&&n!==g&&(n=new Cn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function Ki(l){const n=l.key,u=l.value,g=l.valueSpec||{},b=l.objectElementValidators||{},S=l.style,t=l.styleSpec;let a=[];const p=Ut(u);if(p!=="object")return[new Je(n,u,`object expected, ${p} found`)];for(const v in u){const C=v.split(".")[0],E=g[C]||g["*"];let I;if(b[C])I=b[C];else if(g[C])I=si;else if(b["*"])I=b["*"];else{if(!g["*"]){a.push(new Je(n,u[v],`unknown property "${v}"`));continue}I=si}a=a.concat(I({key:(n&&`${n}.`)+v,value:u[v],valueSpec:E,style:S,styleSpec:t,object:u,objectKey:v},u))}for(const v in g)b[v]||g[v].required&&g[v].default===void 0&&u[v]===void 0&&a.push(new Je(n,u,`missing required property "${v}"`));return a}function Pc(l){const n=l.value,u=l.valueSpec,g=l.style,b=l.styleSpec,S=l.key,t=l.arrayElementValidator||si;if(Ut(n)!=="array")return[new Je(S,n,`array expected, ${Ut(n)} found`)];if(u.length&&n.length!==u.length)return[new Je(S,n,`array length ${u.length} expected, length ${n.length} found`)];if(u["min-length"]&&n.length<u["min-length"])return[new Je(S,n,`array length at least ${u["min-length"]} expected, length ${n.length} found`)];let a={type:u.value,values:u.values};b.$version<7&&(a.function=u.function),Ut(u.value)==="object"&&(a=u.value);let p=[];for(let v=0;v<n.length;v++)p=p.concat(t({array:n,arrayIndex:v,value:n[v],valueSpec:a,style:g,styleSpec:b,key:`${S}[${v}]`}));return p}function Uo(l){const n=l.key,u=l.value,g=l.valueSpec;let b=Ut(u);return b==="number"&&u!=u&&(b="NaN"),b!=="number"?[new Je(n,u,`number expected, ${b} found`)]:"minimum"in g&&u<g.minimum?[new Je(n,u,`${u} is less than the minimum value ${g.minimum}`)]:"maximum"in g&&u>g.maximum?[new Je(n,u,`${u} is greater than the maximum value ${g.maximum}`)]:[]}function Z1(l){const n=l.valueSpec,u=Gt(l.value.type);let g,b,S,t={};const a=u!=="categorical"&&l.value.property===void 0,p=!a,v=Ut(l.value.stops)==="array"&&Ut(l.value.stops[0])==="array"&&Ut(l.value.stops[0][0])==="object",C=Ki({key:l.key,value:l.value,valueSpec:l.styleSpec.function,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{stops:function(j){if(u==="identity")return[new Je(j.key,j.value,'identity function may not have a "stops" property')];let z=[];const X=j.value;return z=z.concat(Pc({key:j.key,value:X,valueSpec:j.valueSpec,style:j.style,styleSpec:j.styleSpec,arrayElementValidator:E})),Ut(X)==="array"&&X.length===0&&z.push(new Je(j.key,X,"array must have at least one stop")),z},default:function(j){return si({key:j.key,value:j.value,valueSpec:n,style:j.style,styleSpec:j.styleSpec})}}});return u==="identity"&&a&&C.push(new Je(l.key,l.value,'missing required property "property"')),u==="identity"||l.value.stops||C.push(new Je(l.key,l.value,'missing required property "stops"')),u==="exponential"&&l.valueSpec.expression&&!Au(l.valueSpec)&&C.push(new Je(l.key,l.value,"exponential functions not supported")),l.styleSpec.$version>=8&&(p&&!Ca(l.valueSpec)?C.push(new Je(l.key,l.value,"property functions not supported")):a&&!wr(l.valueSpec)&&C.push(new Je(l.key,l.value,"zoom functions not supported"))),u!=="categorical"&&!v||l.value.property!==void 0||C.push(new Je(l.key,l.value,'"property" property is required')),C;function E(j){let z=[];const X=j.value,ee=j.key;if(Ut(X)!=="array")return[new Je(ee,X,`array expected, ${Ut(X)} found`)];if(X.length!==2)return[new Je(ee,X,`array length 2 expected, length ${X.length} found`)];if(v){if(Ut(X[0])!=="object")return[new Je(ee,X,`object expected, ${Ut(X[0])} found`)];if(X[0].zoom===void 0)return[new Je(ee,X,"object stop key must have zoom")];if(X[0].value===void 0)return[new Je(ee,X,"object stop key must have value")];if(S&&S>Gt(X[0].zoom))return[new Je(ee,X[0].zoom,"stop zoom values must appear in ascending order")];Gt(X[0].zoom)!==S&&(S=Gt(X[0].zoom),b=void 0,t={}),z=z.concat(Ki({key:`${ee}[0]`,value:X[0],valueSpec:{zoom:{}},style:j.style,styleSpec:j.styleSpec,objectElementValidators:{zoom:Uo,value:I}}))}else z=z.concat(I({key:`${ee}[0]`,value:X[0],style:j.style,styleSpec:j.styleSpec},X));return Sa(pn(X[1]))?z.concat([new Je(`${ee}[1]`,X[1],"expressions are not allowed in function stops.")]):z.concat(si({key:`${ee}[1]`,value:X[1],valueSpec:n,style:j.style,styleSpec:j.styleSpec}))}function I(j,z){const X=Ut(j.value),ee=Gt(j.value),ce=j.value!==null?j.value:z;if(g){if(X!==g)return[new Je(j.key,ce,`${X} stop domain type must match previous stop domain type ${g}`)]}else g=X;if(X!=="number"&&X!=="string"&&X!=="boolean")return[new Je(j.key,ce,"stop domain value must be a number, string, or boolean")];if(X!=="number"&&u!=="categorical"){let ge=`number expected, ${X} found`;return Ca(n)&&u===void 0&&(ge+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Je(j.key,ce,ge)]}return u!=="categorical"||X!=="number"||isFinite(ee)&&Math.floor(ee)===ee?u!=="categorical"&&X==="number"&&b!==void 0&&ee<b?[new Je(j.key,ce,"stop domain values must appear in ascending order")]:(b=ee,u==="categorical"&&ee in t?[new Je(j.key,ce,"stop domain values must be unique")]:(t[ee]=!0,[])):[new Je(j.key,ce,`integer expected, found ${ee}`)]}}function Zo(l){const n=(l.expressionContext==="property"?U1:Cl)(pn(l.value),l.valueSpec);if(n.result==="error")return n.value.map(g=>new Je(`${l.key}${g.key}`,l.value,g.message));const u=n.value.expression||n.value._styleExpression.expression;if(l.expressionContext==="property"&&l.propertyKey==="text-font"&&!u.outputDefined())return[new Je(l.key,l.value,`Invalid data expression for "${l.propertyKey}". Output values must be contained as literals within the expression.`)];if(l.expressionContext==="property"&&l.propertyType==="layout"&&!Ws(u))return[new Je(l.key,l.value,'"feature-state" data expressions are not supported with layout properties.')];if(l.expressionContext==="filter"&&!Ws(u))return[new Je(l.key,l.value,'"feature-state" data expressions are not supported with filters.')];if(l.expressionContext&&l.expressionContext.indexOf("cluster")===0){if(!$n(u,["zoom","feature-state"]))return[new Je(l.key,l.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(l.expressionContext==="cluster-initial"&&!_c(u))return[new Je(l.key,l.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ma(l){const n=l.key,u=l.value,g=l.valueSpec,b=[];return Array.isArray(g.values)?g.values.indexOf(Gt(u))===-1&&b.push(new Je(n,u,`expected one of [${g.values.join(", ")}], ${JSON.stringify(u)} found`)):Object.keys(g.values).indexOf(Gt(u))===-1&&b.push(new Je(n,u,`expected one of [${Object.keys(g.values).join(", ")}], ${JSON.stringify(u)} found`)),b}function Ml(l){if(l===!0||l===!1)return!0;if(!Array.isArray(l)||l.length===0)return!1;switch(l[0]){case"has":return l.length>=2&&l[1]!=="$id"&&l[1]!=="$type";case"in":return l.length>=3&&(typeof l[1]!="string"||Array.isArray(l[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return l.length!==3||Array.isArray(l[1])||Array.isArray(l[2]);case"any":case"all":for(const n of l.slice(1))if(!Ml(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const El={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Dc(l){if(l==null)return{filter:()=>!0,needGeometry:!1};Ml(l)||(l=Ic(l));const n=Cl(l,El);if(n.result==="error")throw new Error(n.value.map(u=>`${u.key}: ${u.message}`).join(", "));return{filter:(u,g,b)=>n.value.evaluate(u,g,{},b),needGeometry:zu(l)}}function qo(l,n){return l<n?-1:l>n?1:0}function zu(l){if(!Array.isArray(l))return!1;if(l[0]==="within")return!0;for(let n=1;n<l.length;n++)if(zu(l[n]))return!0;return!1}function Ic(l){if(!l)return!0;const n=l[0];return l.length<=1?n!=="any":n==="=="?Nc(l[1],l[2],"=="):n==="!="?Qi(Nc(l[1],l[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Nc(l[1],l[2],n):n==="any"?(u=l.slice(1),["any"].concat(u.map(Ic))):n==="all"?["all"].concat(l.slice(1).map(Ic)):n==="none"?["all"].concat(l.slice(1).map(Ic).map(Qi)):n==="in"?Fu(l[1],l.slice(2)):n==="!in"?Qi(Fu(l[1],l.slice(2))):n==="has"?Ll(l[1]):n==="!has"?Qi(Ll(l[1])):n!=="within"||l;var u}function Nc(l,n,u){switch(l){case"$type":return[`filter-type-${u}`,n];case"$id":return[`filter-id-${u}`,n];default:return[`filter-${u}`,l,n]}}function Fu(l,n){if(n.length===0)return!1;switch(l){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(u=>typeof u!=typeof n[0])?["filter-in-large",l,["literal",n.sort(qo)]]:["filter-in-small",l,["literal",n]]}}function Ll(l){switch(l){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",l]}}function Qi(l){return["!",l]}function Ps(l){return Ml(pn(l.value))?Zo(cn({},l,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Rc(l)}function Rc(l){const n=l.value,u=l.key;if(Ut(n)!=="array")return[new Je(u,n,`array expected, ${Ut(n)} found`)];const g=l.styleSpec;let b,S=[];if(n.length<1)return[new Je(u,n,"filter array must have at least 1 element")];switch(S=S.concat(Ma({key:`${u}[0]`,value:n[0],valueSpec:g.filter_operator,style:l.style,styleSpec:l.styleSpec})),Gt(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&Gt(n[1])==="$type"&&S.push(new Je(u,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&S.push(new Je(u,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(b=Ut(n[1]),b!=="string"&&S.push(new Je(`${u}[1]`,n[1],`string expected, ${b} found`)));for(let t=2;t<n.length;t++)b=Ut(n[t]),Gt(n[1])==="$type"?S=S.concat(Ma({key:`${u}[${t}]`,value:n[t],valueSpec:g.geometry_type,style:l.style,styleSpec:l.styleSpec})):b!=="string"&&b!=="number"&&b!=="boolean"&&S.push(new Je(`${u}[${t}]`,n[t],`string, number, or boolean expected, ${b} found`));break;case"any":case"all":case"none":for(let t=1;t<n.length;t++)S=S.concat(Rc({key:`${u}[${t}]`,value:n[t],style:l.style,styleSpec:l.styleSpec}));break;case"has":case"!has":b=Ut(n[1]),n.length!==2?S.push(new Je(u,n,`filter array for "${n[0]}" operator must have 2 elements`)):b!=="string"&&S.push(new Je(`${u}[1]`,n[1],`string expected, ${b} found`));break;case"within":b=Ut(n[1]),n.length!==2?S.push(new Je(u,n,`filter array for "${n[0]}" operator must have 2 elements`)):b!=="object"&&S.push(new Je(`${u}[1]`,n[1],`object expected, ${b} found`))}return S}function Tl(l,n){const u=l.key,g=l.style,b=l.styleSpec,S=l.value,t=l.objectKey,a=b[`${n}_${l.layerType}`];if(!a)return[];const p=t.match(/^(.*)-transition$/);if(n==="paint"&&p&&a[p[1]]&&a[p[1]].transition)return si({key:u,value:S,valueSpec:b.transition,style:g,styleSpec:b});const v=l.valueSpec||a[t];if(!v)return[new Je(u,S,`unknown property "${t}"`)];let C;if(Ut(S)==="string"&&Ca(v)&&!v.tokens&&(C=/^{([^}]+)}$/.exec(S)))return[new Je(u,S,`"${t}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(C[1])} }\`.`)];const E=[];return l.layerType==="symbol"&&(t==="text-field"&&g&&!g.glyphs&&E.push(new Je(u,S,'use of "text-field" requires a style "glyphs" property')),t==="text-font"&&Ho(pn(S))&&Gt(S.type)==="identity"&&E.push(new Je(u,S,'"text-font" does not support identity functions'))),E.concat(si({key:l.key,value:S,valueSpec:v,style:g,styleSpec:b,expressionContext:"property",propertyType:n,propertyKey:t}))}function kl(l){return Tl(l,"paint")}function Bu(l){return Tl(l,"layout")}function Ac(l){let n=[];const u=l.value,g=l.key,b=l.style,S=l.styleSpec;u.type||u.ref||n.push(new Je(g,u,'either "type" or "ref" is required'));let t=Gt(u.type);const a=Gt(u.ref);if(u.id){const p=Gt(u.id);for(let v=0;v<l.arrayIndex;v++){const C=b.layers[v];Gt(C.id)===p&&n.push(new Je(g,u.id,`duplicate layer id "${u.id}", previously used at line ${C.id.__line__}`))}}if("ref"in u){let p;["type","source","source-layer","filter","layout"].forEach(v=>{v in u&&n.push(new Je(g,u[v],`"${v}" is prohibited for ref layers`))}),b.layers.forEach(v=>{Gt(v.id)===a&&(p=v)}),p?p.ref?n.push(new Je(g,u.ref,"ref cannot reference another ref layer")):t=Gt(p.type):n.push(new Je(g,u.ref,`ref layer "${a}" not found`))}else if(t!=="background")if(u.source){const p=b.sources&&b.sources[u.source],v=p&&Gt(p.type);p?v==="vector"&&t==="raster"?n.push(new Je(g,u.source,`layer "${u.id}" requires a raster source`)):v==="raster"&&t!=="raster"?n.push(new Je(g,u.source,`layer "${u.id}" requires a vector source`)):v!=="vector"||u["source-layer"]?v==="raster-dem"&&t!=="hillshade"?n.push(new Je(g,u.source,"raster-dem source can only be used with layer type 'hillshade'.")):t!=="line"||!u.paint||!u.paint["line-gradient"]||v==="geojson"&&p.lineMetrics||n.push(new Je(g,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new Je(g,u,`layer "${u.id}" must specify a "source-layer"`)):n.push(new Je(g,u.source,`source "${u.source}" not found`))}else n.push(new Je(g,u,'missing required property "source"'));return n=n.concat(Ki({key:g,value:u,valueSpec:S.layer,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{"*":()=>[],type:()=>si({key:`${g}.type`,value:u.type,valueSpec:S.layer.type,style:l.style,styleSpec:l.styleSpec,object:u,objectKey:"type"}),filter:Ps,layout:p=>Ki({layer:u,key:p.key,value:p.value,style:p.style,styleSpec:p.styleSpec,objectElementValidators:{"*":v=>Bu(cn({layerType:t},v))}}),paint:p=>Ki({layer:u,key:p.key,value:p.value,style:p.style,styleSpec:p.styleSpec,objectElementValidators:{"*":v=>kl(cn({layerType:t},v))}})}})),n}function Ks(l){const n=l.value,u=l.key,g=Ut(n);return g!=="string"?[new Je(u,n,`string expected, ${g} found`)]:[]}const $u={promoteId:function({key:l,value:n}){if(Ut(n)==="string")return Ks({key:l,value:n});{const u=[];for(const g in n)u.push(...Ks({key:`${l}.${g}`,value:n[g]}));return u}}};function Vu(l){const n=l.value,u=l.key,g=l.styleSpec,b=l.style;if(!n.type)return[new Je(u,n,'"type" is required')];const S=Gt(n.type);let t;switch(S){case"vector":case"raster":case"raster-dem":return t=Ki({key:u,value:n,valueSpec:g[`source_${S.replace("-","_")}`],style:l.style,styleSpec:g,objectElementValidators:$u}),t;case"geojson":if(t=Ki({key:u,value:n,valueSpec:g.source_geojson,style:b,styleSpec:g,objectElementValidators:$u}),n.cluster)for(const a in n.clusterProperties){const[p,v]=n.clusterProperties[a],C=typeof p=="string"?[p,["accumulated"],["get",a]]:p;t.push(...Zo({key:`${u}.${a}.map`,value:v,expressionContext:"cluster-map"})),t.push(...Zo({key:`${u}.${a}.reduce`,value:C,expressionContext:"cluster-reduce"}))}return t;case"video":return Ki({key:u,value:n,valueSpec:g.source_video,style:b,styleSpec:g});case"image":return Ki({key:u,value:n,valueSpec:g.source_image,style:b,styleSpec:g});case"canvas":return[new Je(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ma({key:`${u}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Ea(l){const n=l.value,u=l.styleSpec,g=u.light,b=l.style;let S=[];const t=Ut(n);if(n===void 0)return S;if(t!=="object")return S=S.concat([new Je("light",n,`object expected, ${t} found`)]),S;for(const a in n){const p=a.match(/^(.*)-transition$/);S=S.concat(p&&g[p[1]]&&g[p[1]].transition?si({key:a,value:n[a],valueSpec:u.transition,style:b,styleSpec:u}):g[a]?si({key:a,value:n[a],valueSpec:g[a],style:b,styleSpec:u}):[new Je(a,n[a],`unknown property "${a}"`)])}return S}function Pl(l){const n=l.value,u=l.styleSpec,g=u.terrain,b=l.style;let S=[];const t=Ut(n);if(n===void 0)return S;if(t!=="object")return S=S.concat([new Je("terrain",n,`object expected, ${t} found`)]),S;for(const a in n)S=S.concat(g[a]?si({key:a,value:n[a],valueSpec:g[a],style:b,styleSpec:u}):[new Je(a,n[a],`unknown property "${a}"`)]);return S}const ki={"*":()=>[],array:Pc,boolean:function(l){const n=l.value,u=l.key,g=Ut(n);return g!=="boolean"?[new Je(u,n,`boolean expected, ${g} found`)]:[]},number:Uo,color:function(l){const n=l.key,u=l.value,g=Ut(u);return g!=="string"?[new Je(n,u,`color expected, ${g} found`)]:_r(u)===null?[new Je(n,u,`color expected, "${u}" found`)]:[]},constants:ln,enum:Ma,filter:Ps,function:Z1,layer:Ac,object:Ki,source:Vu,light:Ea,terrain:Pl,string:Ks,formatted:function(l){return Ks(l).length===0?[]:Zo(l)},resolvedImage:function(l){return Ks(l).length===0?[]:Zo(l)},padding:function(l){const n=l.key,u=l.value;if(Ut(u)==="array"){if(u.length<1||u.length>4)return[new Je(n,u,`padding requires 1 to 4 values; ${u.length} values found`)];const g={type:"number"};let b=[];for(let S=0;S<u.length;S++)b=b.concat(si({key:`${n}[${S}]`,value:u[S],valueSpec:g}));return b}return Uo({key:n,value:u,valueSpec:{}})}};function si(l){const n=l.value,u=l.valueSpec,g=l.styleSpec;return u.expression&&Ho(Gt(n))?Z1(l):u.expression&&Sa(pn(n))?Zo(l):u.type&&ki[u.type]?ki[u.type](l):Ki(cn({},l,{valueSpec:u.type?g[u.type]:u}))}function ih(l){const n=l.value,u=l.key,g=Ks(l);return g.length||(n.indexOf("{fontstack}")===-1&&g.push(new Je(u,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&g.push(new Je(u,n,'"glyphs" url must include a "{range}" token'))),g}function Qs(l,n=Le){let u=[];return u=u.concat(si({key:"",value:l,valueSpec:n.$root,styleSpec:n,style:l,objectElementValidators:{glyphs:ih,"*":()=>[]}})),l.constants&&(u=u.concat(ln({key:"constants",value:l.constants}))),zi(u)}function zi(l){return[].concat(l).sort((n,u)=>n.line-u.line)}function Ji(l){return function(...n){return zi(l.apply(this,n))}}Qs.source=Ji(Vu),Qs.light=Ji(Ea),Qs.terrain=Ji(Pl),Qs.layer=Ji(Ac),Qs.filter=Ji(Ps),Qs.paintProperty=Ji(kl),Qs.layoutProperty=Ji(Bu);const Js=Qs,q1=Js.light,jc=Js.paintProperty,W1=Js.layoutProperty;function Oc(l,n){let u=!1;if(n&&n.length)for(const g of n)l.fire(new Et(new Error(g.message))),u=!0;return u}class Wo{constructor(n,u,g){const b=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const t=new Int32Array(this.arrayBuffer);n=t[0],this.d=(u=t[1])+2*(g=t[2]);for(let p=0;p<this.d*this.d;p++){const v=t[3+p],C=t[3+p+1];b.push(v===C?null:t.subarray(v,C))}const a=t[3+b.length+1];this.keys=t.subarray(t[3+b.length],a),this.bboxes=t.subarray(a),this.insert=this._insertReadonly}else{this.d=u+2*g;for(let t=0;t<this.d*this.d;t++)b.push([]);this.keys=[],this.bboxes=[]}this.n=u,this.extent=n,this.padding=g,this.scale=u/n,this.uid=0;const S=g/u*n;this.min=-S,this.max=n+S}insert(n,u,g,b,S){this._forEachCell(u,g,b,S,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(u),this.bboxes.push(g),this.bboxes.push(b),this.bboxes.push(S)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,u,g,b,S,t){this.cells[S].push(t)}query(n,u,g,b,S){const t=this.min,a=this.max;if(n<=t&&u<=t&&a<=g&&a<=b&&!S)return Array.prototype.slice.call(this.keys);{const p=[];return this._forEachCell(n,u,g,b,this._queryCell,p,{},S),p}}_queryCell(n,u,g,b,S,t,a,p){const v=this.cells[S];if(v!==null){const C=this.keys,E=this.bboxes;for(let I=0;I<v.length;I++){const j=v[I];if(a[j]===void 0){const z=4*j;(p?p(E[z+0],E[z+1],E[z+2],E[z+3]):n<=E[z+2]&&u<=E[z+3]&&g>=E[z+0]&&b>=E[z+1])?(a[j]=!0,t.push(C[j])):a[j]=!1}}}}_forEachCell(n,u,g,b,S,t,a,p){const v=this._convertToCellCoord(n),C=this._convertToCellCoord(u),E=this._convertToCellCoord(g),I=this._convertToCellCoord(b);for(let j=v;j<=E;j++)for(let z=C;z<=I;z++){const X=this.d*z+j;if((!p||p(this._convertFromCellCoord(j),this._convertFromCellCoord(z),this._convertFromCellCoord(j+1),this._convertFromCellCoord(z+1)))&&S.call(this,n,u,g,b,X,t,a,p))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,u=3+this.cells.length+1+1;let g=0;for(let t=0;t<this.cells.length;t++)g+=this.cells[t].length;const b=new Int32Array(u+g+this.keys.length+this.bboxes.length);b[0]=this.extent,b[1]=this.n,b[2]=this.padding;let S=u;for(let t=0;t<n.length;t++){const a=n[t];b[3+t]=S,b.set(a,S),S+=a.length}return b[3+n.length]=S,b.set(this.keys,S),S+=this.keys.length,b[3+n.length+1]=S,b.set(this.bboxes,S),S+=this.bboxes.length,b.buffer}static serialize(n,u){const g=n.toArrayBuffer();return u&&u.push(g),{buffer:g}}static deserialize(n){return new Wo(n.buffer)}}const eo={};function Nt(l,n,u={}){if(eo[l])throw new Error(`${l} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:l,writeable:!1}),eo[l]={klass:n,omit:u.omit||[],shallow:u.shallow||[]}}Nt("Object",Object),Nt("TransferableGridIndex",Wo),Nt("Color",W),Nt("Error",Error),Nt("AJAXError",Bt),Nt("ResolvedImage",pe),Nt("StylePropertyFunction",Tc),Nt("StyleExpression",Ou,{omit:["_evaluator"]}),Nt("ZoomDependentExpression",Sl),Nt("ZoomConstantExpression",Lc),Nt("CompoundExpression",an,{omit:["_evaluate"]});for(const l in ks)ks[l]._classRegistryKey||Nt(`Expression_${l}`,ks[l]);function Dl(l){return l&&typeof ArrayBuffer<"u"&&(l instanceof ArrayBuffer||l.constructor&&l.constructor.name==="ArrayBuffer")}function Ds(l,n){if(l==null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||l instanceof Blob)return l;if(Dl(l)||Xe(l))return n&&n.push(l),l;if(ArrayBuffer.isView(l)){const u=l;return n&&n.push(u.buffer),u}if(l instanceof ImageData)return n&&n.push(l.data.buffer),l;if(Array.isArray(l)){const u=[];for(const g of l)u.push(Ds(g,n));return u}if(typeof l=="object"){const u=l.constructor,g=u._classRegistryKey;if(!g)throw new Error("can't serialize object of unregistered class");if(!eo[g])throw new Error(`${g} is not registered.`);const b=u.serialize?u.serialize(l,n):{};if(u.serialize){if(n&&b===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const S in l){if(!l.hasOwnProperty(S)||eo[g].omit.indexOf(S)>=0)continue;const t=l[S];b[S]=eo[g].shallow.indexOf(S)>=0?t:Ds(t,n)}l instanceof Error&&(b.message=l.message)}if(b.$name)throw new Error("$name property is reserved for worker serialization logic.");return g!=="Object"&&(b.$name=g),b}throw new Error("can't serialize object of type "+typeof l)}function Is(l){if(l==null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||l instanceof Blob||Dl(l)||Xe(l)||ArrayBuffer.isView(l)||l instanceof ImageData)return l;if(Array.isArray(l))return l.map(Is);if(typeof l=="object"){const n=l.$name||"Object";if(!eo[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:u}=eo[n];if(!u)throw new Error(`can't deserialize unregistered class ${n}`);if(u.deserialize)return u.deserialize(l);const g=Object.create(u.prototype);for(const b of Object.keys(l)){if(b==="$name")continue;const S=l[b];g[b]=eo[n].shallow.indexOf(b)>=0?S:Is(S)}return g}throw new Error("can't deserialize object of type "+typeof l)}class La{constructor(){this.first=!0}update(n,u){const g=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=g,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=g,!0):(this.lastFloorZoom>g?(this.lastIntegerZoom=g+1,this.lastIntegerZoomTime=u):this.lastFloorZoom<g&&(this.lastIntegerZoom=g,this.lastIntegerZoomTime=u),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=g,!0))}}const Mt={"Latin-1 Supplement":l=>l>=128&&l<=255,Arabic:l=>l>=1536&&l<=1791,"Arabic Supplement":l=>l>=1872&&l<=1919,"Arabic Extended-A":l=>l>=2208&&l<=2303,"Hangul Jamo":l=>l>=4352&&l<=4607,"Unified Canadian Aboriginal Syllabics":l=>l>=5120&&l<=5759,Khmer:l=>l>=6016&&l<=6143,"Unified Canadian Aboriginal Syllabics Extended":l=>l>=6320&&l<=6399,"General Punctuation":l=>l>=8192&&l<=8303,"Letterlike Symbols":l=>l>=8448&&l<=8527,"Number Forms":l=>l>=8528&&l<=8591,"Miscellaneous Technical":l=>l>=8960&&l<=9215,"Control Pictures":l=>l>=9216&&l<=9279,"Optical Character Recognition":l=>l>=9280&&l<=9311,"Enclosed Alphanumerics":l=>l>=9312&&l<=9471,"Geometric Shapes":l=>l>=9632&&l<=9727,"Miscellaneous Symbols":l=>l>=9728&&l<=9983,"Miscellaneous Symbols and Arrows":l=>l>=11008&&l<=11263,"CJK Radicals Supplement":l=>l>=11904&&l<=12031,"Kangxi Radicals":l=>l>=12032&&l<=12255,"Ideographic Description Characters":l=>l>=12272&&l<=12287,"CJK Symbols and Punctuation":l=>l>=12288&&l<=12351,Hiragana:l=>l>=12352&&l<=12447,Katakana:l=>l>=12448&&l<=12543,Bopomofo:l=>l>=12544&&l<=12591,"Hangul Compatibility Jamo":l=>l>=12592&&l<=12687,Kanbun:l=>l>=12688&&l<=12703,"Bopomofo Extended":l=>l>=12704&&l<=12735,"CJK Strokes":l=>l>=12736&&l<=12783,"Katakana Phonetic Extensions":l=>l>=12784&&l<=12799,"Enclosed CJK Letters and Months":l=>l>=12800&&l<=13055,"CJK Compatibility":l=>l>=13056&&l<=13311,"CJK Unified Ideographs Extension A":l=>l>=13312&&l<=19903,"Yijing Hexagram Symbols":l=>l>=19904&&l<=19967,"CJK Unified Ideographs":l=>l>=19968&&l<=40959,"Yi Syllables":l=>l>=40960&&l<=42127,"Yi Radicals":l=>l>=42128&&l<=42191,"Hangul Jamo Extended-A":l=>l>=43360&&l<=43391,"Hangul Syllables":l=>l>=44032&&l<=55215,"Hangul Jamo Extended-B":l=>l>=55216&&l<=55295,"Private Use Area":l=>l>=57344&&l<=63743,"CJK Compatibility Ideographs":l=>l>=63744&&l<=64255,"Arabic Presentation Forms-A":l=>l>=64336&&l<=65023,"Vertical Forms":l=>l>=65040&&l<=65055,"CJK Compatibility Forms":l=>l>=65072&&l<=65103,"Small Form Variants":l=>l>=65104&&l<=65135,"Arabic Presentation Forms-B":l=>l>=65136&&l<=65279,"Halfwidth and Fullwidth Forms":l=>l>=65280&&l<=65519};function to(l){for(const n of l)if(no(n.charCodeAt(0)))return!0;return!1}function zc(l){for(const n of l)if(!G1(n.charCodeAt(0)))return!1;return!0}function G1(l){return!(Mt.Arabic(l)||Mt["Arabic Supplement"](l)||Mt["Arabic Extended-A"](l)||Mt["Arabic Presentation Forms-A"](l)||Mt["Arabic Presentation Forms-B"](l))}function no(l){return!(l!==746&&l!==747&&(l<4352||!(Mt["Bopomofo Extended"](l)||Mt.Bopomofo(l)||Mt["CJK Compatibility Forms"](l)&&!(l>=65097&&l<=65103)||Mt["CJK Compatibility Ideographs"](l)||Mt["CJK Compatibility"](l)||Mt["CJK Radicals Supplement"](l)||Mt["CJK Strokes"](l)||!(!Mt["CJK Symbols and Punctuation"](l)||l>=12296&&l<=12305||l>=12308&&l<=12319||l===12336)||Mt["CJK Unified Ideographs Extension A"](l)||Mt["CJK Unified Ideographs"](l)||Mt["Enclosed CJK Letters and Months"](l)||Mt["Hangul Compatibility Jamo"](l)||Mt["Hangul Jamo Extended-A"](l)||Mt["Hangul Jamo Extended-B"](l)||Mt["Hangul Jamo"](l)||Mt["Hangul Syllables"](l)||Mt.Hiragana(l)||Mt["Ideographic Description Characters"](l)||Mt.Kanbun(l)||Mt["Kangxi Radicals"](l)||Mt["Katakana Phonetic Extensions"](l)||Mt.Katakana(l)&&l!==12540||!(!Mt["Halfwidth and Fullwidth Forms"](l)||l===65288||l===65289||l===65293||l>=65306&&l<=65310||l===65339||l===65341||l===65343||l>=65371&&l<=65503||l===65507||l>=65512&&l<=65519)||!(!Mt["Small Form Variants"](l)||l>=65112&&l<=65118||l>=65123&&l<=65126)||Mt["Unified Canadian Aboriginal Syllabics"](l)||Mt["Unified Canadian Aboriginal Syllabics Extended"](l)||Mt["Vertical Forms"](l)||Mt["Yijing Hexagram Symbols"](l)||Mt["Yi Syllables"](l)||Mt["Yi Radicals"](l))))}function Hu(l){return!(no(l)||function(n){return!!(Mt["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||Mt["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||Mt["Letterlike Symbols"](n)||Mt["Number Forms"](n)||Mt["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||Mt["Control Pictures"](n)&&n!==9251||Mt["Optical Character Recognition"](n)||Mt["Enclosed Alphanumerics"](n)||Mt["Geometric Shapes"](n)||Mt["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||Mt["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||Mt["CJK Symbols and Punctuation"](n)||Mt.Katakana(n)||Mt["Private Use Area"](n)||Mt["CJK Compatibility Forms"](n)||Mt["Small Form Variants"](n)||Mt["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(l))}function Uu(l){return l>=1424&&l<=2303||Mt["Arabic Presentation Forms-A"](l)||Mt["Arabic Presentation Forms-B"](l)}function Y1(l,n){return!(!n&&Uu(l)||l>=2304&&l<=3583||l>=3840&&l<=4255||Mt.Khmer(l))}function X1(l){for(const n of l)if(Uu(n.charCodeAt(0)))return!0;return!1}const Il="deferred",Fc="loading",gs="loaded";let Nl=null,oi="unavailable",ro=null;const K1=function(l){l&&typeof l=="string"&&l.indexOf("NetworkError")>-1&&(oi="error"),Nl&&Nl(l)};function Go(){Ta.fire(new yt("pluginStateChange",{pluginStatus:oi,pluginURL:ro}))}const Ta=new nt,Bc=function(){return oi},Rl=function(){if(oi!==Il||!ro)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");oi=Fc,Go(),ro&&Mn({url:ro},l=>{l?K1(l):(oi=gs,Go())})},An={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>oi===gs||An.applyArabicShaping!=null,isLoading:()=>oi===Fc,setState(l){if(!ye())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");oi=l.pluginStatus,ro=l.pluginURL},isParsed(){if(!ye())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return An.applyArabicShaping!=null&&An.processBidirectionalText!=null&&An.processStyledBidirectionalText!=null},getPluginURL(){if(!ye())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return ro}};class nr{constructor(n,u){this.zoom=n,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.zoomHistory=u.zoomHistory,this.transition=u.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new La,this.transition={})}isSupportedScript(n){return function(u,g){for(const b of u)if(!Y1(b.charCodeAt(0),g))return!1;return!0}(n,An.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,u=n-Math.floor(n),g=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:u+(1-u)*g}:{fromScale:.5,toScale:1,t:1-(1-g)*u}}}class Yo{constructor(n,u){this.property=n,this.value=u,this.expression=function(g,b){if(Ho(g))return new Tc(g,b);if(Sa(g)){const S=U1(g,b);if(S.result==="error")throw new Error(S.value.map(t=>`${t.key}: ${t.message}`).join(", "));return S.value}{let S=g;return b.type==="color"&&typeof g=="string"?S=W.parse(g):b.type!=="padding"||typeof g!="number"&&!Array.isArray(g)||(S=ve.parse(g)),{kind:"constant",evaluate:()=>S}}}(u===void 0?n.specification.default:u,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,u,g){return this.property.possiblyEvaluate(this,n,u,g)}}class io{constructor(n){this.property=n,this.value=new Yo(n,void 0)}transitioned(n,u){return new Vc(this.property,this.value,u,U({},n.transition,this.transition),n.now)}untransitioned(){return new Vc(this.property,this.value,null,{},0)}}class $c{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return oe(this._values[n].value.value)}setValue(n,u){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new io(this._values[n].property)),this._values[n].value=new Yo(this._values[n].property,u===null?void 0:oe(u))}getTransition(n){return oe(this._values[n].transition)}setTransition(n,u){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new io(this._values[n].property)),this._values[n].transition=oe(u)||void 0}serialize(){const n={};for(const u of Object.keys(this._values)){const g=this.getValue(u);g!==void 0&&(n[u]=g);const b=this.getTransition(u);b!==void 0&&(n[`${u}-transition`]=b)}return n}transitioned(n,u){const g=new ka(this._properties);for(const b of Object.keys(this._values))g._values[b]=this._values[b].transitioned(n,u._values[b]);return g}untransitioned(){const n=new ka(this._properties);for(const u of Object.keys(this._values))n._values[u]=this._values[u].untransitioned();return n}}class Vc{constructor(n,u,g,b,S){this.property=n,this.value=u,this.begin=S+b.delay||0,this.end=this.begin+b.duration||0,n.specification.transition&&(b.delay||b.duration)&&(this.prior=g)}possiblyEvaluate(n,u,g){const b=n.now||0,S=this.value.possiblyEvaluate(n,u,g),t=this.prior;if(t){if(b>this.end)return this.prior=null,S;if(this.value.isDataDriven())return this.prior=null,S;if(b<this.begin)return t.possiblyEvaluate(n,u,g);{const a=(b-this.begin)/(this.end-this.begin);return this.property.interpolate(t.possiblyEvaluate(n,u,g),S,function(p){if(p<=0)return 0;if(p>=1)return 1;const v=p*p,C=v*p;return 4*(p<.5?C:3*(p-v)+C-.75)}(a))}}return S}}class ka{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,u,g){const b=new Al(this._properties);for(const S of Object.keys(this._values))b._values[S]=this._values[S].possiblyEvaluate(n,u,g);return b}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class Hc{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}getValue(n){return oe(this._values[n].value)}setValue(n,u){this._values[n]=new Yo(this._values[n].property,u===null?void 0:oe(u))}serialize(){const n={};for(const u of Object.keys(this._values)){const g=this.getValue(u);g!==void 0&&(n[u]=g)}return n}possiblyEvaluate(n,u,g){const b=new Al(this._properties);for(const S of Object.keys(this._values))b._values[S]=this._values[S].possiblyEvaluate(n,u,g);return b}}class xi{constructor(n,u,g){this.property=n,this.value=u,this.parameters=g}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,u,g,b){return this.property.evaluate(this.value,this.parameters,n,u,g,b)}}class Al{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class Zt{constructor(n){this.specification=n}possiblyEvaluate(n,u){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(u)}interpolate(n,u,g){const b=Fo[this.specification.type];return b?b(n,u,g):n}}class Jt{constructor(n,u){this.specification=n,this.overrides=u}possiblyEvaluate(n,u,g,b){return new xi(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(u,null,{},g,b)}:n.expression,u)}interpolate(n,u,g){if(n.value.kind!=="constant"||u.value.kind!=="constant")return n;if(n.value.value===void 0||u.value.value===void 0)return new xi(this,{kind:"constant",value:void 0},n.parameters);const b=Fo[this.specification.type];return b?new xi(this,{kind:"constant",value:b(n.value.value,u.value.value,g)},n.parameters):n}evaluate(n,u,g,b,S,t){return n.kind==="constant"?n.value:n.evaluate(u,g,b,S,t)}}class Pa extends Jt{possiblyEvaluate(n,u,g,b){if(n.value===void 0)return new xi(this,{kind:"constant",value:void 0},u);if(n.expression.kind==="constant"){const S=n.expression.evaluate(u,null,{},g,b),t=n.property.specification.type==="resolvedImage"&&typeof S!="string"?S.name:S,a=this._calculate(t,t,t,u);return new xi(this,{kind:"constant",value:a},u)}if(n.expression.kind==="camera"){const S=this._calculate(n.expression.evaluate({zoom:u.zoom-1}),n.expression.evaluate({zoom:u.zoom}),n.expression.evaluate({zoom:u.zoom+1}),u);return new xi(this,{kind:"constant",value:S},u)}return new xi(this,n.expression,u)}evaluate(n,u,g,b,S,t){if(n.kind==="source"){const a=n.evaluate(u,g,b,S,t);return this._calculate(a,a,a,u)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(u.zoom)-1},g,b),n.evaluate({zoom:Math.floor(u.zoom)},g,b),n.evaluate({zoom:Math.floor(u.zoom)+1},g,b),u):n.value}_calculate(n,u,g,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:n,to:u}:{from:g,to:u}}interpolate(n){return n}}class so{constructor(n){this.specification=n}possiblyEvaluate(n,u,g,b){if(n.value!==void 0){if(n.expression.kind==="constant"){const S=n.expression.evaluate(u,null,{},g,b);return this._calculate(S,S,S,u)}return this._calculate(n.expression.evaluate(new nr(Math.floor(u.zoom-1),u)),n.expression.evaluate(new nr(Math.floor(u.zoom),u)),n.expression.evaluate(new nr(Math.floor(u.zoom+1),u)),u)}}_calculate(n,u,g,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:n,to:u}:{from:g,to:u}}interpolate(n){return n}}class Da{constructor(n){this.specification=n}possiblyEvaluate(n,u,g,b){return!!n.expression.evaluate(u,null,{},g,b)}interpolate(){return!1}}class Pr{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const u in n){const g=n[u];g.specification.overridable&&this.overridableProperties.push(u);const b=this.defaultPropertyValues[u]=new Yo(g,void 0),S=this.defaultTransitionablePropertyValues[u]=new io(g);this.defaultTransitioningPropertyValues[u]=S.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=b.possiblyEvaluate({})}}}Nt("DataDrivenProperty",Jt),Nt("DataConstantProperty",Zt),Nt("CrossFadedDataDrivenProperty",Pa),Nt("CrossFadedProperty",so),Nt("ColorRampProperty",Da);const Ns="-transition";class ai extends nt{constructor(n,u){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),u.layout&&(this._unevaluatedLayout=new Hc(u.layout)),u.paint)){this._transitionablePaint=new $c(u.paint);for(const g in n.paint)this.setPaintProperty(g,n.paint[g],{validate:!1});for(const g in n.layout)this.setLayoutProperty(g,n.layout[g],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Al(u.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,u,g={}){u!=null&&this._validate(W1,`layers.${this.id}.layout.${n}`,n,u,g)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,u):this.visibility=u)}getPaintProperty(n){return n.endsWith(Ns)?this._transitionablePaint.getTransition(n.slice(0,-Ns.length)):this._transitionablePaint.getValue(n)}setPaintProperty(n,u,g={}){if(u!=null&&this._validate(jc,`layers.${this.id}.paint.${n}`,n,u,g))return!1;if(n.endsWith(Ns))return this._transitionablePaint.setTransition(n.slice(0,-Ns.length),u||void 0),!1;{const b=this._transitionablePaint._values[n],S=b.property.specification["property-type"]==="cross-faded-data-driven",t=b.value.isDataDriven(),a=b.value;this._transitionablePaint.setValue(n,u),this._handleSpecialPaintPropertyUpdate(n);const p=this._transitionablePaint._values[n].value;return p.isDataDriven()||t||S||this._handleOverridablePaintPropertyUpdate(n,a,p)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,u,g){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,u){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,u)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),te(n,(u,g)=>!(u===void 0||g==="layout"&&!Object.keys(u).length||g==="paint"&&!Object.keys(u).length))}_validate(n,u,g,b,S={}){return(!S||S.validate!==!1)&&Oc(this,n.call(Js,{key:u,layerType:this.type,objectKey:g,value:b,styleSpec:Le,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const u=this.paint.get(n);if(u instanceof xi&&Ca(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}}const Zu={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class jl{constructor(n,u){this._structArray=n,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class rr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,u){return n._trim(),u&&(n.isTransferred=!0,u.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const u=Object.create(this.prototype);return u.arrayBuffer=n.arrayBuffer,u.length=n.length,u.capacity=n.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function jr(l,n=1){let u=0,g=0;return{members:l.map(b=>{const S=Zu[b.type].BYTES_PER_ELEMENT,t=u=Q1(u,Math.max(n,S)),a=b.components||1;return g=Math.max(g,S),u+=S*a,{name:b.name,type:b.type,components:a,offset:t}}),size:Q1(u,Math.max(g,n)),alignment:n}}function Q1(l,n){return Math.ceil(l/n)*n}class oo extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,u){const g=this.length;return this.resize(g+1),this.emplace(g,n,u)}emplace(n,u,g){const b=2*n;return this.int16[b+0]=u,this.int16[b+1]=g,n}}oo.prototype.bytesPerElement=4,Nt("StructArrayLayout2i4",oo);class Fi extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,u,g,b){const S=this.length;return this.resize(S+1),this.emplace(S,n,u,g,b)}emplace(n,u,g,b,S){const t=4*n;return this.int16[t+0]=u,this.int16[t+1]=g,this.int16[t+2]=b,this.int16[t+3]=S,n}}Fi.prototype.bytesPerElement=8,Nt("StructArrayLayout4i8",Fi);class _ extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,u,g,b,S,t){const a=this.length;return this.resize(a+1),this.emplace(a,n,u,g,b,S,t)}emplace(n,u,g,b,S,t,a){const p=6*n;return this.int16[p+0]=u,this.int16[p+1]=g,this.int16[p+2]=b,this.int16[p+3]=S,this.int16[p+4]=t,this.int16[p+5]=a,n}}_.prototype.bytesPerElement=12,Nt("StructArrayLayout2i4i12",_);class s extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,u,g,b,S,t){const a=this.length;return this.resize(a+1),this.emplace(a,n,u,g,b,S,t)}emplace(n,u,g,b,S,t,a){const p=4*n,v=8*n;return this.int16[p+0]=u,this.int16[p+1]=g,this.uint8[v+4]=b,this.uint8[v+5]=S,this.uint8[v+6]=t,this.uint8[v+7]=a,n}}s.prototype.bytesPerElement=8,Nt("StructArrayLayout2i4ub8",s);class h extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,u){const g=this.length;return this.resize(g+1),this.emplace(g,n,u)}emplace(n,u,g){const b=2*n;return this.float32[b+0]=u,this.float32[b+1]=g,n}}h.prototype.bytesPerElement=8,Nt("StructArrayLayout2f8",h);class y extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,u,g,b,S,t,a,p,v,C){const E=this.length;return this.resize(E+1),this.emplace(E,n,u,g,b,S,t,a,p,v,C)}emplace(n,u,g,b,S,t,a,p,v,C,E){const I=10*n;return this.uint16[I+0]=u,this.uint16[I+1]=g,this.uint16[I+2]=b,this.uint16[I+3]=S,this.uint16[I+4]=t,this.uint16[I+5]=a,this.uint16[I+6]=p,this.uint16[I+7]=v,this.uint16[I+8]=C,this.uint16[I+9]=E,n}}y.prototype.bytesPerElement=20,Nt("StructArrayLayout10ui20",y);class w extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,u,g,b,S,t,a,p,v,C,E,I){const j=this.length;return this.resize(j+1),this.emplace(j,n,u,g,b,S,t,a,p,v,C,E,I)}emplace(n,u,g,b,S,t,a,p,v,C,E,I,j){const z=12*n;return this.int16[z+0]=u,this.int16[z+1]=g,this.int16[z+2]=b,this.int16[z+3]=S,this.uint16[z+4]=t,this.uint16[z+5]=a,this.uint16[z+6]=p,this.uint16[z+7]=v,this.int16[z+8]=C,this.int16[z+9]=E,this.int16[z+10]=I,this.int16[z+11]=j,n}}w.prototype.bytesPerElement=24,Nt("StructArrayLayout4i4ui4i24",w);class M extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,u,g){const b=this.length;return this.resize(b+1),this.emplace(b,n,u,g)}emplace(n,u,g,b){const S=3*n;return this.float32[S+0]=u,this.float32[S+1]=g,this.float32[S+2]=b,n}}M.prototype.bytesPerElement=12,Nt("StructArrayLayout3f12",M);class k extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const u=this.length;return this.resize(u+1),this.emplace(u,n)}emplace(n,u){return this.uint32[1*n+0]=u,n}}k.prototype.bytesPerElement=4,Nt("StructArrayLayout1ul4",k);class R extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,u,g,b,S,t,a,p,v){const C=this.length;return this.resize(C+1),this.emplace(C,n,u,g,b,S,t,a,p,v)}emplace(n,u,g,b,S,t,a,p,v,C){const E=10*n,I=5*n;return this.int16[E+0]=u,this.int16[E+1]=g,this.int16[E+2]=b,this.int16[E+3]=S,this.int16[E+4]=t,this.int16[E+5]=a,this.uint32[I+3]=p,this.uint16[E+8]=v,this.uint16[E+9]=C,n}}R.prototype.bytesPerElement=20,Nt("StructArrayLayout6i1ul2ui20",R);class A extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,u,g,b,S,t){const a=this.length;return this.resize(a+1),this.emplace(a,n,u,g,b,S,t)}emplace(n,u,g,b,S,t,a){const p=6*n;return this.int16[p+0]=u,this.int16[p+1]=g,this.int16[p+2]=b,this.int16[p+3]=S,this.int16[p+4]=t,this.int16[p+5]=a,n}}A.prototype.bytesPerElement=12,Nt("StructArrayLayout2i2i2i12",A);class F extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,u,g,b,S){const t=this.length;return this.resize(t+1),this.emplace(t,n,u,g,b,S)}emplace(n,u,g,b,S,t){const a=4*n,p=8*n;return this.float32[a+0]=u,this.float32[a+1]=g,this.float32[a+2]=b,this.int16[p+6]=S,this.int16[p+7]=t,n}}F.prototype.bytesPerElement=16,Nt("StructArrayLayout2f1f2i16",F);class Z extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,u,g,b){const S=this.length;return this.resize(S+1),this.emplace(S,n,u,g,b)}emplace(n,u,g,b,S){const t=12*n,a=3*n;return this.uint8[t+0]=u,this.uint8[t+1]=g,this.float32[a+1]=b,this.float32[a+2]=S,n}}Z.prototype.bytesPerElement=12,Nt("StructArrayLayout2ub2f12",Z);class Y extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,u,g){const b=this.length;return this.resize(b+1),this.emplace(b,n,u,g)}emplace(n,u,g,b){const S=3*n;return this.uint16[S+0]=u,this.uint16[S+1]=g,this.uint16[S+2]=b,n}}Y.prototype.bytesPerElement=6,Nt("StructArrayLayout3ui6",Y);class Q extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,u,g,b,S,t,a,p,v,C,E,I,j,z,X,ee,ce){const ge=this.length;return this.resize(ge+1),this.emplace(ge,n,u,g,b,S,t,a,p,v,C,E,I,j,z,X,ee,ce)}emplace(n,u,g,b,S,t,a,p,v,C,E,I,j,z,X,ee,ce,ge){const me=24*n,Se=12*n,Ae=48*n;return this.int16[me+0]=u,this.int16[me+1]=g,this.uint16[me+2]=b,this.uint16[me+3]=S,this.uint32[Se+2]=t,this.uint32[Se+3]=a,this.uint32[Se+4]=p,this.uint16[me+10]=v,this.uint16[me+11]=C,this.uint16[me+12]=E,this.float32[Se+7]=I,this.float32[Se+8]=j,this.uint8[Ae+36]=z,this.uint8[Ae+37]=X,this.uint8[Ae+38]=ee,this.uint32[Se+10]=ce,this.int16[me+22]=ge,n}}Q.prototype.bytesPerElement=48,Nt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Q);class le extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,u,g,b,S,t,a,p,v,C,E,I,j,z,X,ee,ce,ge,me,Se,Ae,tt,we,he,_e,Oe,Ye,at){const ot=this.length;return this.resize(ot+1),this.emplace(ot,n,u,g,b,S,t,a,p,v,C,E,I,j,z,X,ee,ce,ge,me,Se,Ae,tt,we,he,_e,Oe,Ye,at)}emplace(n,u,g,b,S,t,a,p,v,C,E,I,j,z,X,ee,ce,ge,me,Se,Ae,tt,we,he,_e,Oe,Ye,at,ot){const We=34*n,At=17*n;return this.int16[We+0]=u,this.int16[We+1]=g,this.int16[We+2]=b,this.int16[We+3]=S,this.int16[We+4]=t,this.int16[We+5]=a,this.int16[We+6]=p,this.int16[We+7]=v,this.uint16[We+8]=C,this.uint16[We+9]=E,this.uint16[We+10]=I,this.uint16[We+11]=j,this.uint16[We+12]=z,this.uint16[We+13]=X,this.uint16[We+14]=ee,this.uint16[We+15]=ce,this.uint16[We+16]=ge,this.uint16[We+17]=me,this.uint16[We+18]=Se,this.uint16[We+19]=Ae,this.uint16[We+20]=tt,this.uint16[We+21]=we,this.uint16[We+22]=he,this.uint32[At+12]=_e,this.float32[At+13]=Oe,this.float32[At+14]=Ye,this.float32[At+15]=at,this.float32[At+16]=ot,n}}le.prototype.bytesPerElement=68,Nt("StructArrayLayout8i15ui1ul4f68",le);class se extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const u=this.length;return this.resize(u+1),this.emplace(u,n)}emplace(n,u){return this.float32[1*n+0]=u,n}}se.prototype.bytesPerElement=4,Nt("StructArrayLayout1f4",se);class ie extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,u,g){const b=this.length;return this.resize(b+1),this.emplace(b,n,u,g)}emplace(n,u,g,b){const S=3*n;return this.int16[S+0]=u,this.int16[S+1]=g,this.int16[S+2]=b,n}}ie.prototype.bytesPerElement=6,Nt("StructArrayLayout3i6",ie);class xe extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,u,g){const b=this.length;return this.resize(b+1),this.emplace(b,n,u,g)}emplace(n,u,g,b){const S=4*n;return this.uint32[2*n+0]=u,this.uint16[S+2]=g,this.uint16[S+3]=b,n}}xe.prototype.bytesPerElement=8,Nt("StructArrayLayout1ul2ui8",xe);class De extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,u){const g=this.length;return this.resize(g+1),this.emplace(g,n,u)}emplace(n,u,g){const b=2*n;return this.uint16[b+0]=u,this.uint16[b+1]=g,n}}De.prototype.bytesPerElement=4,Nt("StructArrayLayout2ui4",De);class Ie extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const u=this.length;return this.resize(u+1),this.emplace(u,n)}emplace(n,u){return this.uint16[1*n+0]=u,n}}Ie.prototype.bytesPerElement=2,Nt("StructArrayLayout1ui2",Ie);class ue extends rr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,u,g,b){const S=this.length;return this.resize(S+1),this.emplace(S,n,u,g,b)}emplace(n,u,g,b,S){const t=4*n;return this.float32[t+0]=u,this.float32[t+1]=g,this.float32[t+2]=b,this.float32[t+3]=S,n}}ue.prototype.bytesPerElement=16,Nt("StructArrayLayout4f16",ue);class Ve extends jl{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new Pe(this.anchorPointX,this.anchorPointY)}}Ve.prototype.size=20;class ze extends R{get(n){return new Ve(this,n)}}Nt("CollisionBoxArray",ze);class Ge extends jl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ge.prototype.size=48;class rt extends Q{get(n){return new Ge(this,n)}}Nt("PlacedSymbolArray",rt);class gt extends jl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}gt.prototype.size=68;class Qe extends le{get(n){return new gt(this,n)}}Nt("SymbolInstanceArray",Qe);class It extends se{getoffsetX(n){return this.float32[1*n+0]}}Nt("GlyphOffsetArray",It);class St extends ie{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}Nt("SymbolLineVertexArray",St);class Lt extends jl{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Lt.prototype.size=8;class un extends xe{get(n){return new Lt(this,n)}}Nt("FeatureIndexArray",un);class gn extends oo{}class Kt extends oo{}class Gn extends oo{}class En extends _{}class _n extends s{}class wn extends h{}class Ln extends y{}class li extends w{}class Dr extends M{}class br extends k{}class Yr extends A{}class _i extends Z{}class hr extends Y{}class Xr extends De{}const ao=jr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ia}=ao;class In{constructor(n=[]){this.segments=n}prepareSegment(n,u,g,b){let S=this.segments[this.segments.length-1];return n>In.MAX_VERTEX_ARRAY_LENGTH&&ae(`Max vertices per segment is ${In.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!S||S.vertexLength+n>In.MAX_VERTEX_ARRAY_LENGTH||S.sortKey!==b)&&(S={vertexOffset:u.length,primitiveOffset:g.length,vertexLength:0,primitiveLength:0},b!==void 0&&(S.sortKey=b),this.segments.push(S)),S}get(){return this.segments}destroy(){for(const n of this.segments)for(const u in n.vaos)n.vaos[u].destroy()}static simpleSegment(n,u,g,b){return new In([{vertexOffset:n,primitiveOffset:u,vertexLength:g,primitiveLength:b,vaos:{},sortKey:0}])}}function Tn(l,n){return 256*(l=N(Math.floor(l),0,255))+N(Math.floor(n),0,255)}In.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Nt("SegmentVector",In);const fn=jr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var vn={exports:{}},yr={exports:{}};yr.exports=function(l,n){var u,g,b,S,t,a,p,v;for(g=l.length-(u=3&l.length),b=n,t=3432918353,a=461845907,v=0;v<g;)p=255&l.charCodeAt(v)|(255&l.charCodeAt(++v))<<8|(255&l.charCodeAt(++v))<<16|(255&l.charCodeAt(++v))<<24,++v,b=27492+(65535&(S=5*(65535&(b=(b^=p=(65535&(p=(p=(65535&p)*t+(((p>>>16)*t&65535)<<16)&4294967295)<<15|p>>>17))*a+(((p>>>16)*a&65535)<<16)&4294967295)<<13|b>>>19))+((5*(b>>>16)&65535)<<16)&4294967295))+((58964+(S>>>16)&65535)<<16);switch(p=0,u){case 3:p^=(255&l.charCodeAt(v+2))<<16;case 2:p^=(255&l.charCodeAt(v+1))<<8;case 1:b^=p=(65535&(p=(p=(65535&(p^=255&l.charCodeAt(v)))*t+(((p>>>16)*t&65535)<<16)&4294967295)<<15|p>>>17))*a+(((p>>>16)*a&65535)<<16)&4294967295}return b^=l.length,b=2246822507*(65535&(b^=b>>>16))+((2246822507*(b>>>16)&65535)<<16)&4294967295,b=3266489909*(65535&(b^=b>>>13))+((3266489909*(b>>>16)&65535)<<16)&4294967295,(b^=b>>>16)>>>0};var ar={exports:{}};ar.exports=function(l,n){for(var u,g=l.length,b=n^g,S=0;g>=4;)u=1540483477*(65535&(u=255&l.charCodeAt(S)|(255&l.charCodeAt(++S))<<8|(255&l.charCodeAt(++S))<<16|(255&l.charCodeAt(++S))<<24))+((1540483477*(u>>>16)&65535)<<16),b=1540483477*(65535&b)+((1540483477*(b>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),g-=4,++S;switch(g){case 3:b^=(255&l.charCodeAt(S+2))<<16;case 2:b^=(255&l.charCodeAt(S+1))<<8;case 1:b=1540483477*(65535&(b^=255&l.charCodeAt(S)))+((1540483477*(b>>>16)&65535)<<16)}return b=1540483477*(65535&(b^=b>>>13))+((1540483477*(b>>>16)&65535)<<16),(b^=b>>>15)>>>0};var Pi=yr.exports,lo=ar.exports;vn.exports=Pi,vn.exports.murmur3=Pi,vn.exports.murmur2=lo;class co{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,u,g,b){this.ids.push(Ol(n)),this.positions.push(u,g,b)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const u=Ol(n);let g=0,b=this.ids.length-1;for(;g<b;){const t=g+b>>1;this.ids[t]>=u?b=t:g=t+1}const S=[];for(;this.ids[g]===u;)S.push({index:this.positions[3*g],start:this.positions[3*g+1],end:this.positions[3*g+2]}),g++;return S}static serialize(n,u){const g=new Float64Array(n.ids),b=new Uint32Array(n.positions);return Na(g,b,0,g.length-1),u&&u.push(g.buffer,b.buffer),{ids:g,positions:b}}static deserialize(n){const u=new co;return u.ids=n.ids,u.positions=n.positions,u.indexed=!0,u}}function Ol(l){const n=+l;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:vn.exports(String(l))}function Na(l,n,u,g){for(;u<g;){const b=l[u+g>>1];let S=u-1,t=g+1;for(;;){do S++;while(l[S]<b);do t--;while(l[t]>b);if(S>=t)break;zl(l,S,t),zl(n,3*S,3*t),zl(n,3*S+1,3*t+1),zl(n,3*S+2,3*t+2)}t-u<g-t?(Na(l,n,u,t),u=t+1):(Na(l,n,t+1,g),g=t)}}function zl(l,n,u){const g=l[n];l[n]=l[u],l[u]=g}Nt("FeaturePositionMap",co);class ci{constructor(n,u){this.gl=n.gl,this.location=u}}class Ra extends ci{constructor(n,u){super(n,u),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class Fl extends ci{constructor(n,u){super(n,u),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class uo extends ci{constructor(n,u){super(n,u),this.current=W.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const J1=new Float32Array(16);function ed(l){return[Tn(255*l.r,255*l.g),Tn(255*l.b,255*l.a)]}class Uc{constructor(n,u,g){this.value=n,this.uniformNames=u.map(b=>`u_${b}`),this.type=g}setUniform(n,u,g){n.set(g.constantOr(this.value))}getBinding(n,u,g){return this.type==="color"?new uo(n,u):new Ra(n,u)}}class Rs{constructor(n,u){this.uniformNames=u.map(g=>`u_${g}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,u){this.pixelRatioFrom=u.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=u.tlbr,this.patternTo=n.tlbr}setUniform(n,u,g,b){const S=b==="u_pattern_to"?this.patternTo:b==="u_pattern_from"?this.patternFrom:b==="u_pixel_ratio_to"?this.pixelRatioTo:b==="u_pixel_ratio_from"?this.pixelRatioFrom:null;S&&n.set(S)}getBinding(n,u,g){return g.substr(0,9)==="u_pattern"?new Fl(n,u):new Ra(n,u)}}class ho{constructor(n,u,g,b){this.expression=n,this.type=g,this.maxValue=0,this.paintVertexAttributes=u.map(S=>({name:`a_${S}`,type:"Float32",components:g==="color"?2:1,offset:0})),this.paintVertexArray=new b}populatePaintArray(n,u,g,b,S){const t=this.paintVertexArray.length,a=this.expression.evaluate(new nr(0),u,{},b,[],S);this.paintVertexArray.resize(n),this._setPaintValue(t,n,a)}updatePaintArray(n,u,g,b){const S=this.expression.evaluate({zoom:0},g,b);this._setPaintValue(n,u,S)}_setPaintValue(n,u,g){if(this.type==="color"){const b=ed(g);for(let S=n;S<u;S++)this.paintVertexArray.emplace(S,b[0],b[1])}else{for(let b=n;b<u;b++)this.paintVertexArray.emplace(b,g);this.maxValue=Math.max(this.maxValue,Math.abs(g))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Bi{constructor(n,u,g,b,S,t){this.expression=n,this.uniformNames=u.map(a=>`u_${a}_t`),this.type=g,this.useIntegerZoom=b,this.zoom=S,this.maxValue=0,this.paintVertexAttributes=u.map(a=>({name:`a_${a}`,type:"Float32",components:g==="color"?4:2,offset:0})),this.paintVertexArray=new t}populatePaintArray(n,u,g,b,S){const t=this.expression.evaluate(new nr(this.zoom),u,{},b,[],S),a=this.expression.evaluate(new nr(this.zoom+1),u,{},b,[],S),p=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(p,n,t,a)}updatePaintArray(n,u,g,b){const S=this.expression.evaluate({zoom:this.zoom},g,b),t=this.expression.evaluate({zoom:this.zoom+1},g,b);this._setPaintValue(n,u,S,t)}_setPaintValue(n,u,g,b){if(this.type==="color"){const S=ed(g),t=ed(b);for(let a=n;a<u;a++)this.paintVertexArray.emplace(a,S[0],S[1],t[0],t[1])}else{for(let S=n;S<u;S++)this.paintVertexArray.emplace(S,g,b);this.maxValue=Math.max(this.maxValue,Math.abs(g),Math.abs(b))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,u){const g=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,b=N(this.expression.interpolationFactor(g,this.zoom,this.zoom+1),0,1);n.set(b)}getBinding(n,u,g){return new Ra(n,u)}}class As{constructor(n,u,g,b,S,t){this.expression=n,this.type=u,this.useIntegerZoom=g,this.zoom=b,this.layerId=t,this.zoomInPaintVertexArray=new S,this.zoomOutPaintVertexArray=new S}populatePaintArray(n,u,g){const b=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(b,n,u.patterns&&u.patterns[this.layerId],g)}updatePaintArray(n,u,g,b,S){this._setPaintValues(n,u,g.patterns&&g.patterns[this.layerId],S)}_setPaintValues(n,u,g,b){if(!b||!g)return;const{min:S,mid:t,max:a}=g,p=b[S],v=b[t],C=b[a];if(p&&v&&C)for(let E=n;E<u;E++)this.zoomInPaintVertexArray.emplace(E,v.tl[0],v.tl[1],v.br[0],v.br[1],p.tl[0],p.tl[1],p.br[0],p.br[1],v.pixelRatio,p.pixelRatio),this.zoomOutPaintVertexArray.emplace(E,v.tl[0],v.tl[1],v.br[0],v.br[1],C.tl[0],C.tl[1],C.br[0],C.br[1],v.pixelRatio,C.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,fn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,fn.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Bl{constructor(n,u,g){this.binders={},this._buffers=[];const b=[];for(const S in n.paint._values){if(!g(S))continue;const t=n.paint.get(S);if(!(t instanceof xi&&Ca(t.property.specification)))continue;const a=sh(S,n.type),p=t.value,v=t.property.specification.type,C=t.property.useIntegerZoom,E=t.property.specification["property-type"],I=E==="cross-faded"||E==="cross-faded-data-driven";if(p.kind==="constant")this.binders[S]=I?new Rs(p.value,a):new Uc(p.value,a,v),b.push(`/u_${S}`);else if(p.kind==="source"||I){const j=td(S,v,"source");this.binders[S]=I?new As(p,v,C,u,j,n.id):new ho(p,a,v,j),b.push(`/a_${S}`)}else{const j=td(S,v,"composite");this.binders[S]=new Bi(p,a,v,C,u,j),b.push(`/z_${S}`)}}this.cacheKey=b.sort().join("")}getMaxValue(n){const u=this.binders[n];return u instanceof ho||u instanceof Bi?u.maxValue:0}populatePaintArrays(n,u,g,b,S){for(const t in this.binders){const a=this.binders[t];(a instanceof ho||a instanceof Bi||a instanceof As)&&a.populatePaintArray(n,u,g,b,S)}}setConstantPatternPositions(n,u){for(const g in this.binders){const b=this.binders[g];b instanceof Rs&&b.setConstantPatternPositions(n,u)}}updatePaintArrays(n,u,g,b,S){let t=!1;for(const a in n){const p=u.getPositions(a);for(const v of p){const C=g.feature(v.index);for(const E in this.binders){const I=this.binders[E];if((I instanceof ho||I instanceof Bi||I instanceof As)&&I.expression.isStateDependent===!0){const j=b.paint.get(E);I.expression=j.value,I.updatePaintArray(v.start,v.end,C,n[a],S),t=!0}}}}return t}defines(){const n=[];for(const u in this.binders){const g=this.binders[u];(g instanceof Uc||g instanceof Rs)&&n.push(...g.uniformNames.map(b=>`#define HAS_UNIFORM_${b}`))}return n}getBinderAttributes(){const n=[];for(const u in this.binders){const g=this.binders[u];if(g instanceof ho||g instanceof Bi)for(let b=0;b<g.paintVertexAttributes.length;b++)n.push(g.paintVertexAttributes[b].name);else if(g instanceof As)for(let b=0;b<fn.members.length;b++)n.push(fn.members[b].name)}return n}getBinderUniforms(){const n=[];for(const u in this.binders){const g=this.binders[u];if(g instanceof Uc||g instanceof Rs||g instanceof Bi)for(const b of g.uniformNames)n.push(b)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,u){const g=[];for(const b in this.binders){const S=this.binders[b];if(S instanceof Uc||S instanceof Rs||S instanceof Bi){for(const t of S.uniformNames)if(u[t]){const a=S.getBinding(n,u[t],t);g.push({name:t,property:b,binding:a})}}}return g}setUniforms(n,u,g,b){for(const{name:S,property:t,binding:a}of u)this.binders[t].setUniform(a,b,g.get(t),S)}updatePaintBuffers(n){this._buffers=[];for(const u in this.binders){const g=this.binders[u];if(n&&g instanceof As){const b=n.fromScale===2?g.zoomInPaintVertexBuffer:g.zoomOutPaintVertexBuffer;b&&this._buffers.push(b)}else(g instanceof ho||g instanceof Bi)&&g.paintVertexBuffer&&this._buffers.push(g.paintVertexBuffer)}}upload(n){for(const u in this.binders){const g=this.binders[u];(g instanceof ho||g instanceof Bi||g instanceof As)&&g.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const u=this.binders[n];(u instanceof ho||u instanceof Bi||u instanceof As)&&u.destroy()}}}class Xo{constructor(n,u,g=()=>!0){this.programConfigurations={};for(const b of n)this.programConfigurations[b.id]=new Bl(b,u,g);this.needsUpload=!1,this._featureMap=new co,this._bufferOffset=0}populatePaintArrays(n,u,g,b,S,t){for(const a in this.programConfigurations)this.programConfigurations[a].populatePaintArrays(n,u,b,S,t);u.id!==void 0&&this._featureMap.add(u.id,g,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,u,g,b){for(const S of g)this.needsUpload=this.programConfigurations[S.id].updatePaintArrays(n,this._featureMap,u,S,b)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function sh(l,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[l]||[l.replace(`${n}-`,"").replace(/-/g,"_")]}function td(l,n,u){const g={color:{source:h,composite:ue},number:{source:se,composite:h}},b=function(S){return{"line-pattern":{source:Ln,composite:Ln},"fill-pattern":{source:Ln,composite:Ln},"fill-extrusion-pattern":{source:Ln,composite:Ln}}[S]}(l);return b&&b[u]||g[n][u]}Nt("ConstantBinder",Uc),Nt("CrossFadedConstantBinder",Rs),Nt("SourceExpressionBinder",ho),Nt("CrossFadedCompositeBinder",As),Nt("CompositeExpressionBinder",Bi),Nt("ProgramConfiguration",Bl,{omit:["_buffers"]}),Nt("ProgramConfigurationSet",Xo);var Ir=8192;const Aa=Math.pow(2,14)-1,es=-Aa-1;function ts(l){const n=Ir/l.extent,u=l.loadGeometry();for(let g=0;g<u.length;g++){const b=u[g];for(let S=0;S<b.length;S++){const t=b[S],a=Math.round(t.x*n),p=Math.round(t.y*n);t.x=N(a,es,Aa),t.y=N(p,es,Aa),(a<t.x||a>t.x+1||p<t.y||p>t.y+1)&&ae("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return u}function Ko(l,n){return{type:l.type,id:l.id,properties:l.properties,geometry:n?ts(l):[]}}function qu(l,n,u,g,b){l.emplaceBack(2*n+(g+1)/2,2*u+(b+1)/2)}class js{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(u=>u.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Kt,this.indexArray=new hr,this.segments=new In,this.programConfigurations=new Xo(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(n,u,g){const b=this.layers[0],S=[];let t=null,a=!1;b.type==="circle"&&(t=b.layout.get("circle-sort-key"),a=!t.isConstant());for(const{feature:p,id:v,index:C,sourceLayerIndex:E}of n){const I=this.layers[0]._featureFilter.needGeometry,j=Ko(p,I);if(!this.layers[0]._featureFilter.filter(new nr(this.zoom),j,g))continue;const z=a?t.evaluate(j,{},g):void 0,X={id:v,properties:p.properties,type:p.type,sourceLayerIndex:E,index:C,geometry:I?j.geometry:ts(p),patterns:{},sortKey:z};S.push(X)}a&&S.sort((p,v)=>p.sortKey-v.sortKey);for(const p of S){const{geometry:v,index:C,sourceLayerIndex:E}=p,I=n[C].feature;this.addFeature(p,v,C,g),u.featureIndex.insert(I,v,C,E,this.index)}}update(n,u,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,u,this.stateDependentLayers,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Ia),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,u,g,b){for(const S of u)for(const t of S){const a=t.x,p=t.y;if(a<0||a>=Ir||p<0||p>=Ir)continue;const v=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),C=v.vertexLength;qu(this.layoutVertexArray,a,p,-1,-1),qu(this.layoutVertexArray,a,p,1,-1),qu(this.layoutVertexArray,a,p,1,1),qu(this.layoutVertexArray,a,p,-1,1),this.indexArray.emplaceBack(C,C+1,C+2),this.indexArray.emplaceBack(C,C+3,C+2),v.vertexLength+=4,v.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,g,{},b)}}function Qo(l,n){for(let u=0;u<l.length;u++)if(fo(n,l[u]))return!0;for(let u=0;u<n.length;u++)if(fo(l,n[u]))return!0;return!!po(l,n)}function oh(l,n,u){return!!fo(l,n)||!!rd(n,l,u)}function ah(l,n){if(l.length===1)return lh(n,l[0]);for(let u=0;u<n.length;u++){const g=n[u];for(let b=0;b<g.length;b++)if(fo(l,g[b]))return!0}for(let u=0;u<l.length;u++)if(lh(n,l[u]))return!0;for(let u=0;u<n.length;u++)if(po(l,n[u]))return!0;return!1}function Jo(l,n,u){if(l.length>1){if(po(l,n))return!0;for(let g=0;g<n.length;g++)if(rd(n[g],l,u))return!0}for(let g=0;g<l.length;g++)if(rd(l[g],n,u))return!0;return!1}function po(l,n){if(l.length===0||n.length===0)return!1;for(let u=0;u<l.length-1;u++){const g=l[u],b=l[u+1];for(let S=0;S<n.length-1;S++)if(nd(g,b,n[S],n[S+1]))return!0}return!1}function nd(l,n,u,g){return Ne(l,u,g)!==Ne(n,u,g)&&Ne(l,n,u)!==Ne(l,n,g)}function rd(l,n,u){const g=u*u;if(n.length===1)return l.distSqr(n[0])<g;for(let b=1;b<n.length;b++)if(Wu(l,n[b-1],n[b])<g)return!0;return!1}function Wu(l,n,u){const g=n.distSqr(u);if(g===0)return l.distSqr(n);const b=((l.x-n.x)*(u.x-n.x)+(l.y-n.y)*(u.y-n.y))/g;return l.distSqr(b<0?n:b>1?u:u.sub(n)._mult(b)._add(n))}function lh(l,n){let u,g,b,S=!1;for(let t=0;t<l.length;t++){u=l[t];for(let a=0,p=u.length-1;a<u.length;p=a++)g=u[a],b=u[p],g.y>n.y!=b.y>n.y&&n.x<(b.x-g.x)*(n.y-g.y)/(b.y-g.y)+g.x&&(S=!S)}return S}function fo(l,n){let u=!1;for(let g=0,b=l.length-1;g<l.length;b=g++){const S=l[g],t=l[b];S.y>n.y!=t.y>n.y&&n.x<(t.x-S.x)*(n.y-S.y)/(t.y-S.y)+S.x&&(u=!u)}return u}function mo(l,n,u){const g=u[0],b=u[2];if(l.x<g.x&&n.x<g.x||l.x>b.x&&n.x>b.x||l.y<g.y&&n.y<g.y||l.y>b.y&&n.y>b.y)return!1;const S=Ne(l,n,u[0]);return S!==Ne(l,n,u[1])||S!==Ne(l,n,u[2])||S!==Ne(l,n,u[3])}function ea(l,n,u){const g=n.paint.get(l).value;return g.kind==="constant"?g.value:u.programConfigurations.get(n.id).getMaxValue(l)}function ja(l){return Math.sqrt(l[0]*l[0]+l[1]*l[1])}function go(l,n,u,g,b){if(!n[0]&&!n[1])return l;const S=Pe.convert(n)._mult(b);u==="viewport"&&S._rotate(-g);const t=[];for(let a=0;a<l.length;a++)t.push(l[a].sub(S));return t}Nt("CircleBucket",js,{omit:["layers"]});const ch=new Pr({"circle-sort-key":new Jt(Le.layout_circle["circle-sort-key"])});var Zc={paint:new Pr({"circle-radius":new Jt(Le.paint_circle["circle-radius"]),"circle-color":new Jt(Le.paint_circle["circle-color"]),"circle-blur":new Jt(Le.paint_circle["circle-blur"]),"circle-opacity":new Jt(Le.paint_circle["circle-opacity"]),"circle-translate":new Zt(Le.paint_circle["circle-translate"]),"circle-translate-anchor":new Zt(Le.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Zt(Le.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Zt(Le.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Jt(Le.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Jt(Le.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Jt(Le.paint_circle["circle-stroke-opacity"])}),layout:ch},wi=1e-6,ui=typeof Float32Array<"u"?Float32Array:Array;function Cr(){var l=new ui(9);return ui!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[5]=0,l[6]=0,l[7]=0),l[0]=1,l[4]=1,l[8]=1,l}function qc(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function id(l,n,u){var g=n[0],b=n[1],S=n[2],t=n[3],a=n[4],p=n[5],v=n[6],C=n[7],E=n[8],I=n[9],j=n[10],z=n[11],X=n[12],ee=n[13],ce=n[14],ge=n[15],me=u[0],Se=u[1],Ae=u[2],tt=u[3];return l[0]=me*g+Se*a+Ae*E+tt*X,l[1]=me*b+Se*p+Ae*I+tt*ee,l[2]=me*S+Se*v+Ae*j+tt*ce,l[3]=me*t+Se*C+Ae*z+tt*ge,l[4]=(me=u[4])*g+(Se=u[5])*a+(Ae=u[6])*E+(tt=u[7])*X,l[5]=me*b+Se*p+Ae*I+tt*ee,l[6]=me*S+Se*v+Ae*j+tt*ce,l[7]=me*t+Se*C+Ae*z+tt*ge,l[8]=(me=u[8])*g+(Se=u[9])*a+(Ae=u[10])*E+(tt=u[11])*X,l[9]=me*b+Se*p+Ae*I+tt*ee,l[10]=me*S+Se*v+Ae*j+tt*ce,l[11]=me*t+Se*C+Ae*z+tt*ge,l[12]=(me=u[12])*g+(Se=u[13])*a+(Ae=u[14])*E+(tt=u[15])*X,l[13]=me*b+Se*p+Ae*I+tt*ee,l[14]=me*S+Se*v+Ae*j+tt*ce,l[15]=me*t+Se*C+Ae*z+tt*ge,l}Math.hypot||(Math.hypot=function(){for(var l=0,n=arguments.length;n--;)l+=arguments[n]*arguments[n];return Math.sqrt(l)});var $l,sd=id;function od(){var l=new ui(3);return ui!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l}function Oa(l,n,u){var g=new ui(3);return g[0]=l,g[1]=n,g[2]=u,g}function vr(l,n,u){var g=n[0],b=n[1],S=n[2],t=n[3];return l[0]=u[0]*g+u[4]*b+u[8]*S+u[12]*t,l[1]=u[1]*g+u[5]*b+u[9]*S+u[13]*t,l[2]=u[2]*g+u[6]*b+u[10]*S+u[14]*t,l[3]=u[3]*g+u[7]*b+u[11]*S+u[15]*t,l}function Hr(){var l=new ui(4);return ui!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l[3]=1,l}function Kr(l,n){const u=vr([],[l.x,l.y,0,1],n);return new Pe(u[0]/u[3],u[1]/u[3])}od(),$l=new ui(4),ui!=Float32Array&&($l[0]=0,$l[1]=0,$l[2]=0,$l[3]=0),od(),Oa(1,0,0),Oa(0,1,0),Hr(),Hr(),Cr(),function(){var l;l=new ui(2),ui!=Float32Array&&(l[0]=0,l[1]=0)}();class Gu extends js{}Nt("HeatmapBucket",Gu,{omit:["layers"]});var Yu={paint:new Pr({"heatmap-radius":new Jt(Le.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Jt(Le.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Zt(Le.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Da(Le.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Zt(Le.paint_heatmap["heatmap-opacity"])})};function Vl(l,{width:n,height:u},g,b){if(b){if(b instanceof Uint8ClampedArray)b=new Uint8Array(b.buffer);else if(b.length!==n*u*g)throw new RangeError(`mismatched image size. expected: ${b.length} but got: ${n*u*g}`)}else b=new Uint8Array(n*u*g);return l.width=n,l.height=u,l.data=b,l}function Cp(l,{width:n,height:u},g){if(n===l.width&&u===l.height)return;const b=Vl({},{width:n,height:u},g);di(l,b,{x:0,y:0},{x:0,y:0},{width:Math.min(l.width,n),height:Math.min(l.height,u)},g),l.width=n,l.height=u,l.data=b.data}function di(l,n,u,g,b,S){if(b.width===0||b.height===0)return n;if(b.width>l.width||b.height>l.height||u.x>l.width-b.width||u.y>l.height-b.height)throw new RangeError("out of range source coordinates for image copy");if(b.width>n.width||b.height>n.height||g.x>n.width-b.width||g.y>n.height-b.height)throw new RangeError("out of range destination coordinates for image copy");const t=l.data,a=n.data;if(t===a)throw new Error("srcData equals dstData, so image is already copied");for(let p=0;p<b.height;p++){const v=((u.y+p)*l.width+u.x)*S,C=((g.y+p)*n.width+g.x)*S;for(let E=0;E<b.width*S;E++)a[C+E]=t[v+E]}return n}class Hl{constructor(n,u){Vl(this,n,1,u)}resize(n){Cp(this,n,1)}clone(){return new Hl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,u,g,b,S){di(n,u,g,b,S,1)}}class Di{constructor(n,u){Vl(this,n,4,u)}resize(n){Cp(this,n,4)}replace(n,u){u?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Di({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,u,g,b,S){di(n,u,g,b,S,4)}}function ad(l){const n={},u=l.resolution||256,g=l.clips?l.clips.length:1,b=l.image||new Di({width:u,height:g});if(Math.log(u)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${u}`);const S=(t,a,p)=>{n[l.evaluationKey]=p;const v=l.expression.evaluate(n);b.data[t+a+0]=Math.floor(255*v.r/v.a),b.data[t+a+1]=Math.floor(255*v.g/v.a),b.data[t+a+2]=Math.floor(255*v.b/v.a),b.data[t+a+3]=Math.floor(255*v.a)};if(l.clips)for(let t=0,a=0;t<g;++t,a+=4*u)for(let p=0,v=0;p<u;p++,v+=4){const C=p/(u-1),{start:E,end:I}=l.clips[t];S(a,v,E*(1-C)+I*C)}else for(let t=0,a=0;t<u;t++,a+=4)S(0,a,t/(u-1));return b}Nt("AlphaImage",Hl),Nt("RGBAImage",Di);var yo={paint:new Pr({"hillshade-illumination-direction":new Zt(Le.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Zt(Le.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Zt(Le.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Zt(Le.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Zt(Le.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Zt(Le.paint_hillshade["hillshade-accent-color"])})};const ys=jr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Xu}=ys;var Wc={exports:{}};function Gc(l,n,u){u=u||2;var g,b,S,t,a,p,v,C=n&&n.length,E=C?n[0]*u:l.length,I=uh(l,0,E,u,!0),j=[];if(!I||I.next===I.prev)return j;if(C&&(I=function(X,ee,ce,ge){var me,Se,Ae,tt=[];for(me=0,Se=ee.length;me<Se;me++)(Ae=uh(X,ee[me]*ge,me<Se-1?ee[me+1]*ge:X.length,ge,!1))===Ae.next&&(Ae.steiner=!0),tt.push(ld(Ae));for(tt.sort(Tp),me=0;me<tt.length;me++)ce=Ku(tt[me],ce);return ce}(l,n,I,u)),l.length>80*u){g=S=l[0],b=t=l[1];for(var z=u;z<E;z+=u)(a=l[z])<g&&(g=a),(p=l[z+1])<b&&(b=p),a>S&&(S=a),p>t&&(t=p);v=(v=Math.max(S-g,t-b))!==0?32767/v:0}return Yc(I,j,u,g,b,v,0),j}function uh(l,n,u,g,b){var S,t;if(b===mh(l,n,u,g)>0)for(S=n;S<u;S+=g)t=fh(S,l[S],l[S+1],t);else for(S=u-g;S>=n;S-=g)t=fh(S,l[S],l[S+1],t);return t&&Qu(t,t.next)&&(e1(t),t=t.next),t}function za(l,n){if(!l)return l;n||(n=l);var u,g=l;do if(u=!1,g.steiner||!Qu(g,g.next)&&Sr(g.prev,g,g.next)!==0)g=g.next;else{if(e1(g),(g=n=g.prev)===g.next)break;u=!0}while(u||g!==n);return n}function Yc(l,n,u,g,b,S,t){if(l){!t&&S&&function(C,E,I,j){var z=C;do z.z===0&&(z.z=Xc(z.x,z.y,E,I,j)),z.prevZ=z.prev,z.nextZ=z.next,z=z.next;while(z!==C);z.prevZ.nextZ=null,z.prevZ=null,function(X){var ee,ce,ge,me,Se,Ae,tt,we,he=1;do{for(ce=X,X=null,Se=null,Ae=0;ce;){for(Ae++,ge=ce,tt=0,ee=0;ee<he&&(tt++,ge=ge.nextZ);ee++);for(we=he;tt>0||we>0&&ge;)tt!==0&&(we===0||!ge||ce.z<=ge.z)?(me=ce,ce=ce.nextZ,tt--):(me=ge,ge=ge.nextZ,we--),Se?Se.nextZ=me:X=me,me.prevZ=Se,Se=me;ce=ge}Se.nextZ=null,he*=2}while(Ae>1)}(z)}(l,g,b,S);for(var a,p,v=l;l.prev!==l.next;)if(a=l.prev,p=l.next,S?Mp(l,g,b,S):Sp(l))n.push(a.i/u|0),n.push(l.i/u|0),n.push(p.i/u|0),e1(l),l=p.next,v=p.next;else if((l=p)===v){t?t===1?Yc(l=Ep(za(l),n,u),n,u,g,b,S,2):t===2&&Lp(l,n,u,g,b,S):Yc(za(l),n,u,g,b,S,1);break}}}function Sp(l){var n=l.prev,u=l,g=l.next;if(Sr(n,u,g)>=0)return!1;for(var b=n.x,S=u.x,t=g.x,a=n.y,p=u.y,v=g.y,C=b<S?b<t?b:t:S<t?S:t,E=a<p?a<v?a:v:p<v?p:v,I=b>S?b>t?b:t:S>t?S:t,j=a>p?a>v?a:v:p>v?p:v,z=g.next;z!==n;){if(z.x>=C&&z.x<=I&&z.y>=E&&z.y<=j&&Ul(b,a,S,p,t,v,z.x,z.y)&&Sr(z.prev,z,z.next)>=0)return!1;z=z.next}return!0}function Mp(l,n,u,g){var b=l.prev,S=l,t=l.next;if(Sr(b,S,t)>=0)return!1;for(var a=b.x,p=S.x,v=t.x,C=b.y,E=S.y,I=t.y,j=a<p?a<v?a:v:p<v?p:v,z=C<E?C<I?C:I:E<I?E:I,X=a>p?a>v?a:v:p>v?p:v,ee=C>E?C>I?C:I:E>I?E:I,ce=Xc(j,z,n,u,g),ge=Xc(X,ee,n,u,g),me=l.prevZ,Se=l.nextZ;me&&me.z>=ce&&Se&&Se.z<=ge;){if(me.x>=j&&me.x<=X&&me.y>=z&&me.y<=ee&&me!==b&&me!==t&&Ul(a,C,p,E,v,I,me.x,me.y)&&Sr(me.prev,me,me.next)>=0||(me=me.prevZ,Se.x>=j&&Se.x<=X&&Se.y>=z&&Se.y<=ee&&Se!==b&&Se!==t&&Ul(a,C,p,E,v,I,Se.x,Se.y)&&Sr(Se.prev,Se,Se.next)>=0))return!1;Se=Se.nextZ}for(;me&&me.z>=ce;){if(me.x>=j&&me.x<=X&&me.y>=z&&me.y<=ee&&me!==b&&me!==t&&Ul(a,C,p,E,v,I,me.x,me.y)&&Sr(me.prev,me,me.next)>=0)return!1;me=me.prevZ}for(;Se&&Se.z<=ge;){if(Se.x>=j&&Se.x<=X&&Se.y>=z&&Se.y<=ee&&Se!==b&&Se!==t&&Ul(a,C,p,E,v,I,Se.x,Se.y)&&Sr(Se.prev,Se,Se.next)>=0)return!1;Se=Se.nextZ}return!0}function Ep(l,n,u){var g=l;do{var b=g.prev,S=g.next.next;!Qu(b,S)&&hh(b,g,g.next,S)&&Qc(b,S)&&Qc(S,b)&&(n.push(b.i/u|0),n.push(g.i/u|0),n.push(S.i/u|0),e1(g),e1(g.next),g=l=S),g=g.next}while(g!==l);return za(g)}function Lp(l,n,u,g,b,S){var t=l;do{for(var a=t.next.next;a!==t.prev;){if(t.i!==a.i&&dh(t,a)){var p=ph(t,a);return t=za(t,t.next),p=za(p,p.next),Yc(t,n,u,g,b,S,0),void Yc(p,n,u,g,b,S,0)}a=a.next}t=t.next}while(t!==l)}function Tp(l,n){return l.x-n.x}function Ku(l,n){var u=function(b,S){var t,a=S,p=b.x,v=b.y,C=-1/0;do{if(v<=a.y&&v>=a.next.y&&a.next.y!==a.y){var E=a.x+(v-a.y)*(a.next.x-a.x)/(a.next.y-a.y);if(E<=p&&E>C&&(C=E,t=a.x<a.next.x?a:a.next,E===p))return t}a=a.next}while(a!==S);if(!t)return null;var I,j=t,z=t.x,X=t.y,ee=1/0;a=t;do p>=a.x&&a.x>=z&&p!==a.x&&Ul(v<X?p:C,v,z,X,v<X?C:p,v,a.x,a.y)&&(I=Math.abs(v-a.y)/(p-a.x),Qc(a,b)&&(I<ee||I===ee&&(a.x>t.x||a.x===t.x&&kp(t,a)))&&(t=a,ee=I)),a=a.next;while(a!==j);return t}(l,n);if(!u)return n;var g=ph(u,l);return za(g,g.next),za(u,u.next)}function kp(l,n){return Sr(l.prev,l,n.prev)<0&&Sr(n.next,l,l.next)<0}function Xc(l,n,u,g,b){return(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-u)*b|0)|l<<8))|l<<4))|l<<2))|l<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-g)*b|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function ld(l){var n=l,u=l;do(n.x<u.x||n.x===u.x&&n.y<u.y)&&(u=n),n=n.next;while(n!==l);return u}function Ul(l,n,u,g,b,S,t,a){return(b-t)*(n-a)>=(l-t)*(S-a)&&(l-t)*(g-a)>=(u-t)*(n-a)&&(u-t)*(S-a)>=(b-t)*(g-a)}function dh(l,n){return l.next.i!==n.i&&l.prev.i!==n.i&&!function(u,g){var b=u;do{if(b.i!==u.i&&b.next.i!==u.i&&b.i!==g.i&&b.next.i!==g.i&&hh(b,b.next,u,g))return!0;b=b.next}while(b!==u);return!1}(l,n)&&(Qc(l,n)&&Qc(n,l)&&function(u,g){var b=u,S=!1,t=(u.x+g.x)/2,a=(u.y+g.y)/2;do b.y>a!=b.next.y>a&&b.next.y!==b.y&&t<(b.next.x-b.x)*(a-b.y)/(b.next.y-b.y)+b.x&&(S=!S),b=b.next;while(b!==u);return S}(l,n)&&(Sr(l.prev,l,n.prev)||Sr(l,n.prev,n))||Qu(l,n)&&Sr(l.prev,l,l.next)>0&&Sr(n.prev,n,n.next)>0)}function Sr(l,n,u){return(n.y-l.y)*(u.x-n.x)-(n.x-l.x)*(u.y-n.y)}function Qu(l,n){return l.x===n.x&&l.y===n.y}function hh(l,n,u,g){var b=Kc(Sr(l,n,u)),S=Kc(Sr(l,n,g)),t=Kc(Sr(u,g,l)),a=Kc(Sr(u,g,n));return b!==S&&t!==a||!(b!==0||!Ju(l,u,n))||!(S!==0||!Ju(l,g,n))||!(t!==0||!Ju(u,l,g))||!(a!==0||!Ju(u,n,g))}function Ju(l,n,u){return n.x<=Math.max(l.x,u.x)&&n.x>=Math.min(l.x,u.x)&&n.y<=Math.max(l.y,u.y)&&n.y>=Math.min(l.y,u.y)}function Kc(l){return l>0?1:l<0?-1:0}function Qc(l,n){return Sr(l.prev,l,l.next)<0?Sr(l,n,l.next)>=0&&Sr(l,l.prev,n)>=0:Sr(l,n,l.prev)<0||Sr(l,l.next,n)<0}function ph(l,n){var u=new cd(l.i,l.x,l.y),g=new cd(n.i,n.x,n.y),b=l.next,S=n.prev;return l.next=n,n.prev=l,u.next=b,b.prev=u,g.next=u,u.prev=g,S.next=g,g.prev=S,g}function fh(l,n,u,g){var b=new cd(l,n,u);return g?(b.next=g.next,b.prev=g,g.next.prev=b,g.next=b):(b.prev=b,b.next=b),b}function e1(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function cd(l,n,u){this.i=l,this.x=n,this.y=u,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function mh(l,n,u,g){for(var b=0,S=n,t=u-g;S<u;S+=g)b+=(l[t]-l[S])*(l[S+1]+l[t+1]),t=S;return b}function P0(l,n,u,g,b){gh(l,n,u,g||l.length-1,b||Pp)}function gh(l,n,u,g,b){for(;g>u;){if(g-u>600){var S=g-u+1,t=n-u+1,a=Math.log(S),p=.5*Math.exp(2*a/3),v=.5*Math.sqrt(a*p*(S-p)/S)*(t-S/2<0?-1:1);gh(l,n,Math.max(u,Math.floor(n-t*p/S+v)),Math.min(g,Math.floor(n+(S-t)*p/S+v)),b)}var C=l[n],E=u,I=g;for(Jc(l,u,n),b(l[g],C)>0&&Jc(l,u,g);E<I;){for(Jc(l,E,I),E++,I--;b(l[E],C)<0;)E++;for(;b(l[I],C)>0;)I--}b(l[u],C)===0?Jc(l,u,I):Jc(l,++I,g),I<=n&&(u=I+1),n<=I&&(g=I-1)}}function Jc(l,n,u){var g=l[n];l[n]=l[u],l[u]=g}function Pp(l,n){return l<n?-1:l>n?1:0}function eu(l,n){const u=l.length;if(u<=1)return[l];const g=[];let b,S;for(let t=0;t<u;t++){const a=Fe(l[t]);a!==0&&(l[t].area=Math.abs(a),S===void 0&&(S=a<0),S===a<0?(b&&g.push(b),b=[l[t]]):b.push(l[t]))}if(b&&g.push(b),n>1)for(let t=0;t<g.length;t++)g[t].length<=n||(P0(g[t],n,1,g[t].length-1,D0),g[t]=g[t].slice(0,n));return g}function D0(l,n){return n.area-l.area}function yh(l,n,u){const g=u.patternDependencies;let b=!1;for(const S of n){const t=S.paint.get(`${l}-pattern`);t.isConstant()||(b=!0);const a=t.constantOr(null);a&&(b=!0,g[a.to]=!0,g[a.from]=!0)}return b}function vh(l,n,u,g,b){const S=b.patternDependencies;for(const t of n){const a=t.paint.get(`${l}-pattern`).value;if(a.kind!=="constant"){let p=a.evaluate({zoom:g-1},u,{},b.availableImages),v=a.evaluate({zoom:g},u,{},b.availableImages),C=a.evaluate({zoom:g+1},u,{},b.availableImages);p=p&&p.name?p.name:p,v=v&&v.name?v.name:v,C=C&&C.name?C.name:C,S[p]=!0,S[v]=!0,S[C]=!0,u.patterns[t.id]={min:p,mid:v,max:C}}}return u}Wc.exports=Gc,Wc.exports.default=Gc,Gc.deviation=function(l,n,u,g){var b=n&&n.length,S=Math.abs(mh(l,0,b?n[0]*u:l.length,u));if(b)for(var t=0,a=n.length;t<a;t++)S-=Math.abs(mh(l,n[t]*u,t<a-1?n[t+1]*u:l.length,u));var p=0;for(t=0;t<g.length;t+=3){var v=g[t]*u,C=g[t+1]*u,E=g[t+2]*u;p+=Math.abs((l[v]-l[E])*(l[C+1]-l[v+1])-(l[v]-l[C])*(l[E+1]-l[v+1]))}return S===0&&p===0?0:Math.abs((p-S)/S)},Gc.flatten=function(l){for(var n=l[0][0].length,u={vertices:[],holes:[],dimensions:n},g=0,b=0;b<l.length;b++){for(var S=0;S<l[b].length;S++)for(var t=0;t<n;t++)u.vertices.push(l[b][S][t]);b>0&&u.holes.push(g+=l[b-1].length)}return u};class ns{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(u=>u.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Gn,this.indexArray=new hr,this.indexArray2=new Xr,this.programConfigurations=new Xo(n.layers,n.zoom),this.segments=new In,this.segments2=new In,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(n,u,g){this.hasPattern=yh("fill",this.layers,u);const b=this.layers[0].layout.get("fill-sort-key"),S=!b.isConstant(),t=[];for(const{feature:a,id:p,index:v,sourceLayerIndex:C}of n){const E=this.layers[0]._featureFilter.needGeometry,I=Ko(a,E);if(!this.layers[0]._featureFilter.filter(new nr(this.zoom),I,g))continue;const j=S?b.evaluate(I,{},g,u.availableImages):void 0,z={id:p,properties:a.properties,type:a.type,sourceLayerIndex:C,index:v,geometry:E?I.geometry:ts(a),patterns:{},sortKey:j};t.push(z)}S&&t.sort((a,p)=>a.sortKey-p.sortKey);for(const a of t){const{geometry:p,index:v,sourceLayerIndex:C}=a;if(this.hasPattern){const E=vh("fill",this.layers,a,this.zoom,u);this.patternFeatures.push(E)}else this.addFeature(a,p,v,g,{});u.featureIndex.insert(n[v].feature,p,v,C,this.index)}}update(n,u,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,u,this.stateDependentLayers,g)}addFeatures(n,u,g){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,u,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Xu),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,u,g,b,S){for(const t of eu(u,500)){let a=0;for(const j of t)a+=j.length;const p=this.segments.prepareSegment(a,this.layoutVertexArray,this.indexArray),v=p.vertexLength,C=[],E=[];for(const j of t){if(j.length===0)continue;j!==t[0]&&E.push(C.length/2);const z=this.segments2.prepareSegment(j.length,this.layoutVertexArray,this.indexArray2),X=z.vertexLength;this.layoutVertexArray.emplaceBack(j[0].x,j[0].y),this.indexArray2.emplaceBack(X+j.length-1,X),C.push(j[0].x),C.push(j[0].y);for(let ee=1;ee<j.length;ee++)this.layoutVertexArray.emplaceBack(j[ee].x,j[ee].y),this.indexArray2.emplaceBack(X+ee-1,X+ee),C.push(j[ee].x),C.push(j[ee].y);z.vertexLength+=j.length,z.primitiveLength+=j.length}const I=Wc.exports(C,E);for(let j=0;j<I.length;j+=3)this.indexArray.emplaceBack(v+I[j],v+I[j+1],v+I[j+2]);p.vertexLength+=a,p.primitiveLength+=I.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,g,S,b)}}Nt("FillBucket",ns,{omit:["layers","patternFeatures"]});const xh=new Pr({"fill-sort-key":new Jt(Le.layout_fill["fill-sort-key"])});var ud={paint:new Pr({"fill-antialias":new Zt(Le.paint_fill["fill-antialias"]),"fill-opacity":new Jt(Le.paint_fill["fill-opacity"]),"fill-color":new Jt(Le.paint_fill["fill-color"]),"fill-outline-color":new Jt(Le.paint_fill["fill-outline-color"]),"fill-translate":new Zt(Le.paint_fill["fill-translate"]),"fill-translate-anchor":new Zt(Le.paint_fill["fill-translate-anchor"]),"fill-pattern":new Pa(Le.paint_fill["fill-pattern"])}),layout:xh};const Dp=jr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Ip=jr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Np}=Dp;var vo={},tu=Pe,dd=Fa;function Fa(l,n,u,g,b){this.properties={},this.extent=u,this.type=0,this._pbf=l,this._geometry=-1,this._keys=g,this._values=b,l.readFields(I0,this,n)}function I0(l,n,u){l==1?n.id=u.readVarint():l==2?function(g,b){for(var S=g.readVarint()+g.pos;g.pos<S;){var t=b._keys[g.readVarint()],a=b._values[g.readVarint()];b.properties[t]=a}}(u,n):l==3?n.type=u.readVarint():l==4&&(n._geometry=u.pos)}function Rp(l){for(var n,u,g=0,b=0,S=l.length,t=S-1;b<S;t=b++)g+=((u=l[t]).x-(n=l[b]).x)*(n.y+u.y);return g}Fa.types=["Unknown","Point","LineString","Polygon"],Fa.prototype.loadGeometry=function(){var l=this._pbf;l.pos=this._geometry;for(var n,u=l.readVarint()+l.pos,g=1,b=0,S=0,t=0,a=[];l.pos<u;){if(b<=0){var p=l.readVarint();g=7&p,b=p>>3}if(b--,g===1||g===2)S+=l.readSVarint(),t+=l.readSVarint(),g===1&&(n&&a.push(n),n=[]),n.push(new tu(S,t));else{if(g!==7)throw new Error("unknown command "+g);n&&n.push(n[0].clone())}}return n&&a.push(n),a},Fa.prototype.bbox=function(){var l=this._pbf;l.pos=this._geometry;for(var n=l.readVarint()+l.pos,u=1,g=0,b=0,S=0,t=1/0,a=-1/0,p=1/0,v=-1/0;l.pos<n;){if(g<=0){var C=l.readVarint();u=7&C,g=C>>3}if(g--,u===1||u===2)(b+=l.readSVarint())<t&&(t=b),b>a&&(a=b),(S+=l.readSVarint())<p&&(p=S),S>v&&(v=S);else if(u!==7)throw new Error("unknown command "+u)}return[t,p,a,v]},Fa.prototype.toGeoJSON=function(l,n,u){var g,b,S=this.extent*Math.pow(2,u),t=this.extent*l,a=this.extent*n,p=this.loadGeometry(),v=Fa.types[this.type];function C(j){for(var z=0;z<j.length;z++){var X=j[z];j[z]=[360*(X.x+t)/S-180,360/Math.PI*Math.atan(Math.exp((180-360*(X.y+a)/S)*Math.PI/180))-90]}}switch(this.type){case 1:var E=[];for(g=0;g<p.length;g++)E[g]=p[g][0];C(p=E);break;case 2:for(g=0;g<p.length;g++)C(p[g]);break;case 3:for(p=function(j){var z=j.length;if(z<=1)return[j];for(var X,ee,ce=[],ge=0;ge<z;ge++){var me=Rp(j[ge]);me!==0&&(ee===void 0&&(ee=me<0),ee===me<0?(X&&ce.push(X),X=[j[ge]]):X.push(j[ge]))}return X&&ce.push(X),ce}(p),g=0;g<p.length;g++)for(b=0;b<p[g].length;b++)C(p[g][b])}p.length===1?p=p[0]:v="Multi"+v;var I={type:"Feature",geometry:{type:v,coordinates:p},properties:this.properties};return"id"in this&&(I.id=this.id),I};var Ap=dd,_h=wh;function wh(l,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=l,this._keys=[],this._values=[],this._features=[],l.readFields(jp,this,n),this.length=this._features.length}function jp(l,n,u){l===15?n.version=u.readVarint():l===1?n.name=u.readString():l===5?n.extent=u.readVarint():l===2?n._features.push(u.pos):l===3?n._keys.push(u.readString()):l===4&&n._values.push(function(g){for(var b=null,S=g.readVarint()+g.pos;g.pos<S;){var t=g.readVarint()>>3;b=t===1?g.readString():t===2?g.readFloat():t===3?g.readDouble():t===4?g.readVarint64():t===5?g.readVarint():t===6?g.readSVarint():t===7?g.readBoolean():null}return b}(u))}wh.prototype.feature=function(l){if(l<0||l>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[l];var n=this._pbf.readVarint()+this._pbf.pos;return new Ap(this._pbf,n,this.extent,this._keys,this._values)};var N0=_h;function $i(l,n,u){if(l===3){var g=new N0(u,u.readVarint()+u.pos);g.length&&(n[g.name]=g)}}vo.VectorTile=function(l,n){this.layers=l.readFields($i,{},n)},vo.VectorTileFeature=dd,vo.VectorTileLayer=_h;const Ii=vo.VectorTileFeature.types,hd=Math.pow(2,13);function nu(l,n,u,g,b,S,t,a){l.emplaceBack(n,u,2*Math.floor(g*hd)+t,b*hd*2,S*hd*2,Math.round(a))}class pd{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(u=>u.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new En,this.centroidVertexArray=new gn,this.indexArray=new hr,this.programConfigurations=new Xo(n.layers,n.zoom),this.segments=new In,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(n,u,g){this.features=[],this.hasPattern=yh("fill-extrusion",this.layers,u);for(const{feature:b,id:S,index:t,sourceLayerIndex:a}of n){const p=this.layers[0]._featureFilter.needGeometry,v=Ko(b,p);if(!this.layers[0]._featureFilter.filter(new nr(this.zoom),v,g))continue;const C={id:S,sourceLayerIndex:a,index:t,geometry:p?v.geometry:ts(b),properties:b.properties,type:b.type,patterns:{}};this.hasPattern?this.features.push(vh("fill-extrusion",this.layers,C,this.zoom,u)):this.addFeature(C,C.geometry,t,g,{}),u.featureIndex.insert(b,C.geometry,t,a,this.index,!0)}}addFeatures(n,u,g){for(const b of this.features){const{geometry:S}=b;this.addFeature(b,S,b.index,u,g)}}update(n,u,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,u,this.stateDependentLayers,g)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Np),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,Ip.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,u,g,b,S){const t={x:0,y:0,vertexCount:0};for(const a of eu(u,500)){let p=0;for(const z of a)p+=z.length;let v=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const z of a){if(z.length===0||zp(z))continue;let X=0;for(let ee=0;ee<z.length;ee++){const ce=z[ee];if(ee>=1){const ge=z[ee-1];if(!Op(ce,ge)){v.vertexLength+4>In.MAX_VERTEX_ARRAY_LENGTH&&(v=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const me=ce.sub(ge)._perp()._unit(),Se=ge.dist(ce);X+Se>32768&&(X=0),nu(this.layoutVertexArray,ce.x,ce.y,me.x,me.y,0,0,X),nu(this.layoutVertexArray,ce.x,ce.y,me.x,me.y,0,1,X),t.x+=2*ce.x,t.y+=2*ce.y,t.vertexCount+=2,X+=Se,nu(this.layoutVertexArray,ge.x,ge.y,me.x,me.y,0,0,X),nu(this.layoutVertexArray,ge.x,ge.y,me.x,me.y,0,1,X),t.x+=2*ge.x,t.y+=2*ge.y,t.vertexCount+=2;const Ae=v.vertexLength;this.indexArray.emplaceBack(Ae,Ae+2,Ae+1),this.indexArray.emplaceBack(Ae+1,Ae+2,Ae+3),v.vertexLength+=4,v.primitiveLength+=2}}}}if(v.vertexLength+p>In.MAX_VERTEX_ARRAY_LENGTH&&(v=this.segments.prepareSegment(p,this.layoutVertexArray,this.indexArray)),Ii[n.type]!=="Polygon")continue;const C=[],E=[],I=v.vertexLength;for(const z of a)if(z.length!==0){z!==a[0]&&E.push(C.length/2);for(let X=0;X<z.length;X++){const ee=z[X];nu(this.layoutVertexArray,ee.x,ee.y,0,0,1,1,0),t.x+=ee.x,t.y+=ee.y,t.vertexCount+=1,C.push(ee.x),C.push(ee.y)}}const j=Wc.exports(C,E);for(let z=0;z<j.length;z+=3)this.indexArray.emplaceBack(I+j[z],I+j[z+2],I+j[z+1]);v.primitiveLength+=j.length/3,v.vertexLength+=p}for(let a=0;a<t.vertexCount;a++)this.centroidVertexArray.emplaceBack(Math.floor(t.x/t.vertexCount),Math.floor(t.y/t.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,g,S,b)}}function Op(l,n){return l.x===n.x&&(l.x<0||l.x>Ir)||l.y===n.y&&(l.y<0||l.y>Ir)}function zp(l){return l.every(n=>n.x<0)||l.every(n=>n.x>Ir)||l.every(n=>n.y<0)||l.every(n=>n.y>Ir)}Nt("FillExtrusionBucket",pd,{omit:["layers","features"]});var bh={paint:new Pr({"fill-extrusion-opacity":new Zt(Le["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Jt(Le["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Zt(Le["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Zt(Le["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Pa(Le["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Jt(Le["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Jt(Le["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Zt(Le["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function ru(l,n){return l.x*n.x+l.y*n.y}function fd(l,n){if(l.length===1){let u=0;const g=n[u++];let b;for(;!b||g.equals(b);)if(b=n[u++],!b)return 1/0;for(;u<n.length;u++){const S=n[u],t=l[0],a=b.sub(g),p=S.sub(g),v=t.sub(g),C=ru(a,a),E=ru(a,p),I=ru(p,p),j=ru(v,a),z=ru(v,p),X=C*I-E*E,ee=(I*j-E*z)/X,ce=(C*z-E*j)/X,ge=g.z*(1-ee-ce)+b.z*ee+S.z*ce;if(isFinite(ge))return ge}return 1/0}{let u=1/0;for(const g of n)u=Math.min(u,g.z);return u}}const Fp=jr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Bp}=Fp,Ch=jr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Sh}=Ch,$p=vo.VectorTileFeature.types,Mh=Math.cos(Math.PI/180*37.5),t1=Math.pow(2,14)/.5;class Eh{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(u=>u.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new _n,this.layoutVertexArray2=new wn,this.indexArray=new hr,this.programConfigurations=new Xo(n.layers,n.zoom),this.segments=new In,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(n,u,g){this.hasPattern=yh("line",this.layers,u);const b=this.layers[0].layout.get("line-sort-key"),S=!b.isConstant(),t=[];for(const{feature:a,id:p,index:v,sourceLayerIndex:C}of n){const E=this.layers[0]._featureFilter.needGeometry,I=Ko(a,E);if(!this.layers[0]._featureFilter.filter(new nr(this.zoom),I,g))continue;const j=S?b.evaluate(I,{},g):void 0,z={id:p,properties:a.properties,type:a.type,sourceLayerIndex:C,index:v,geometry:E?I.geometry:ts(a),patterns:{},sortKey:j};t.push(z)}S&&t.sort((a,p)=>a.sortKey-p.sortKey);for(const a of t){const{geometry:p,index:v,sourceLayerIndex:C}=a;if(this.hasPattern){const E=vh("line",this.layers,a,this.zoom,u);this.patternFeatures.push(E)}else this.addFeature(a,p,v,g,{});u.featureIndex.insert(n[v].feature,p,v,C,this.index)}}update(n,u,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,u,this.stateDependentLayers,g)}addFeatures(n,u,g){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,u,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,Sh)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Bp),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,u,g,b,S){const t=this.layers[0].layout,a=t.get("line-join").evaluate(n,{}),p=t.get("line-cap"),v=t.get("line-miter-limit"),C=t.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const E of u)this.addLine(E,n,a,p,v,C);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,g,S,b)}addLine(n,u,g,b,S,t){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ce=0;ce<n.length-1;ce++)this.totalDistance+=n[ce].dist(n[ce+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const a=$p[u.type]==="Polygon";let p=n.length;for(;p>=2&&n[p-1].equals(n[p-2]);)p--;let v=0;for(;v<p-1&&n[v].equals(n[v+1]);)v++;if(p<(a?3:2))return;g==="bevel"&&(S=1.05);const C=this.overscaling<=16?122880/(512*this.overscaling):0,E=this.segments.prepareSegment(10*p,this.layoutVertexArray,this.indexArray);let I,j,z,X,ee;this.e1=this.e2=-1,a&&(I=n[p-2],ee=n[v].sub(I)._unit()._perp());for(let ce=v;ce<p;ce++){if(z=ce===p-1?a?n[v+1]:void 0:n[ce+1],z&&n[ce].equals(z))continue;ee&&(X=ee),I&&(j=I),I=n[ce],ee=z?z.sub(I)._unit()._perp():X,X=X||ee;let ge=X.add(ee);ge.x===0&&ge.y===0||ge._unit();const me=X.x*ee.x+X.y*ee.y,Se=ge.x*ee.x+ge.y*ee.y,Ae=Se!==0?1/Se:1/0,tt=2*Math.sqrt(2-2*Se),we=Se<Mh&&j&&z,he=X.x*ee.y-X.y*ee.x>0;if(we&&ce>v){const Ye=I.dist(j);if(Ye>2*C){const at=I.sub(I.sub(j)._mult(C/Ye)._round());this.updateDistance(j,at),this.addCurrentVertex(at,X,0,0,E),j=at}}const _e=j&&z;let Oe=_e?g:a?"butt":b;if(_e&&Oe==="round"&&(Ae<t?Oe="miter":Ae<=2&&(Oe="fakeround")),Oe==="miter"&&Ae>S&&(Oe="bevel"),Oe==="bevel"&&(Ae>2&&(Oe="flipbevel"),Ae<S&&(Oe="miter")),j&&this.updateDistance(j,I),Oe==="miter")ge._mult(Ae),this.addCurrentVertex(I,ge,0,0,E);else if(Oe==="flipbevel"){if(Ae>100)ge=ee.mult(-1);else{const Ye=Ae*X.add(ee).mag()/X.sub(ee).mag();ge._perp()._mult(Ye*(he?-1:1))}this.addCurrentVertex(I,ge,0,0,E),this.addCurrentVertex(I,ge.mult(-1),0,0,E)}else if(Oe==="bevel"||Oe==="fakeround"){const Ye=-Math.sqrt(Ae*Ae-1),at=he?Ye:0,ot=he?0:Ye;if(j&&this.addCurrentVertex(I,X,at,ot,E),Oe==="fakeround"){const We=Math.round(180*tt/Math.PI/20);for(let At=1;At<We;At++){let wt=At/We;if(wt!==.5){const lr=wt-.5;wt+=wt*lr*(wt-1)*((1.0904+me*(me*(3.55645-1.43519*me)-3.2452))*lr*lr+(.848013+me*(.215638*me-1.06021)))}const dn=ee.sub(X)._mult(wt)._add(X)._unit()._mult(he?-1:1);this.addHalfVertex(I,dn.x,dn.y,!1,he,0,E)}}z&&this.addCurrentVertex(I,ee,-at,-ot,E)}else if(Oe==="butt")this.addCurrentVertex(I,ge,0,0,E);else if(Oe==="square"){const Ye=j?1:-1;this.addCurrentVertex(I,ge,Ye,Ye,E)}else Oe==="round"&&(j&&(this.addCurrentVertex(I,X,0,0,E),this.addCurrentVertex(I,X,1,1,E,!0)),z&&(this.addCurrentVertex(I,ee,-1,-1,E,!0),this.addCurrentVertex(I,ee,0,0,E)));if(we&&ce<p-1){const Ye=I.dist(z);if(Ye>2*C){const at=I.add(z.sub(I)._mult(C/Ye)._round());this.updateDistance(I,at),this.addCurrentVertex(at,ee,0,0,E),I=at}}}}addCurrentVertex(n,u,g,b,S,t=!1){const a=u.y*b-u.x,p=-u.y-u.x*b;this.addHalfVertex(n,u.x+u.y*g,u.y-u.x*g,t,!1,g,S),this.addHalfVertex(n,a,p,t,!0,-b,S),this.distance>t1/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(n,u,g,b,S,t))}addHalfVertex({x:n,y:u},g,b,S,t,a,p){const v=.5*(this.lineClips?this.scaledDistance*(t1-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(S?1:0),(u<<1)+(t?1:0),Math.round(63*g)+128,Math.round(63*b)+128,1+(a===0?0:a<0?-1:1)|(63&v)<<2,v>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const C=p.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,C),p.primitiveLength++),t?this.e2=C:this.e1=C}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,u){this.distance+=n.dist(u),this.updateScaledDistance()}}Nt("LineBucket",Eh,{omit:["layers","patternFeatures"]});const Vp=new Pr({"line-cap":new Zt(Le.layout_line["line-cap"]),"line-join":new Jt(Le.layout_line["line-join"]),"line-miter-limit":new Zt(Le.layout_line["line-miter-limit"]),"line-round-limit":new Zt(Le.layout_line["line-round-limit"]),"line-sort-key":new Jt(Le.layout_line["line-sort-key"])});var md={paint:new Pr({"line-opacity":new Jt(Le.paint_line["line-opacity"]),"line-color":new Jt(Le.paint_line["line-color"]),"line-translate":new Zt(Le.paint_line["line-translate"]),"line-translate-anchor":new Zt(Le.paint_line["line-translate-anchor"]),"line-width":new Jt(Le.paint_line["line-width"]),"line-gap-width":new Jt(Le.paint_line["line-gap-width"]),"line-offset":new Jt(Le.paint_line["line-offset"]),"line-blur":new Jt(Le.paint_line["line-blur"]),"line-dasharray":new so(Le.paint_line["line-dasharray"]),"line-pattern":new Pa(Le.paint_line["line-pattern"]),"line-gradient":new Da(Le.paint_line["line-gradient"])}),layout:Vp};const Lh=new class extends Jt{possiblyEvaluate(l,n){return n=new nr(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),super.possiblyEvaluate(l,n)}evaluate(l,n,u,g){return n=U({},n,{zoom:Math.floor(n.zoom)}),super.evaluate(l,n,u,g)}}(md.paint.properties["line-width"].specification);function n1(l,n){return n>0?n+2*l:l}Lh.useIntegerZoom=!0;const ta=jr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),R0=jr([{name:"a_projected_pos",components:3,type:"Float32"}],4);jr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Hp=jr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);jr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const gd=jr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Up=jr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Zp(l,n,u){return l.sections.forEach(g=>{g.text=function(b,S,t){const a=S.layout.get("text-transform").evaluate(t,{});return a==="uppercase"?b=b.toLocaleUpperCase():a==="lowercase"&&(b=b.toLocaleLowerCase()),An.applyArabicShaping&&(b=An.applyArabicShaping(b)),b}(g.text,n,u)}),l}jr([{name:"triangle",components:3,type:"Uint16"}]),jr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),jr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),jr([{type:"Float32",name:"offsetX"}]),jr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const na={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Vn=24,Th=yn,qp=function(l,n,u,g,b){var S,t,a=8*b-g-1,p=(1<<a)-1,v=p>>1,C=-7,E=b-1,I=-1,j=l[n+E];for(E+=I,S=j&(1<<-C)-1,j>>=-C,C+=a;C>0;S=256*S+l[n+E],E+=I,C-=8);for(t=S&(1<<-C)-1,S>>=-C,C+=g;C>0;t=256*t+l[n+E],E+=I,C-=8);if(S===0)S=1-v;else{if(S===p)return t?NaN:1/0*(j?-1:1);t+=Math.pow(2,g),S-=v}return(j?-1:1)*t*Math.pow(2,S-g)},r1=function(l,n,u,g,b,S){var t,a,p,v=8*S-b-1,C=(1<<v)-1,E=C>>1,I=b===23?Math.pow(2,-24)-Math.pow(2,-77):0,j=0,z=1,X=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(a=isNaN(n)?1:0,t=C):(t=Math.floor(Math.log(n)/Math.LN2),n*(p=Math.pow(2,-t))<1&&(t--,p*=2),(n+=t+E>=1?I/p:I*Math.pow(2,1-E))*p>=2&&(t++,p/=2),t+E>=C?(a=0,t=C):t+E>=1?(a=(n*p-1)*Math.pow(2,b),t+=E):(a=n*Math.pow(2,E-1)*Math.pow(2,b),t=0));b>=8;l[u+j]=255&a,j+=z,a/=256,b-=8);for(t=t<<b|a,v+=b;v>0;l[u+j]=255&t,j+=z,t/=256,v-=8);l[u+j-z]|=128*X};function yn(l){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(l)?l:new Uint8Array(l||0),this.pos=0,this.type=0,this.length=this.buf.length}yn.Varint=0,yn.Fixed64=1,yn.Bytes=2,yn.Fixed32=5;var Ba,qt=4294967296,Zl=1/qt,yd=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function xo(l){return l.type===yn.Bytes?l.readVarint()+l.pos:l.pos+1}function iu(l,n,u){return u?4294967296*n+(l>>>0):4294967296*(n>>>0)+(l>>>0)}function su(l,n,u){var g=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));u.realloc(g);for(var b=u.pos-1;b>=l;b--)u.buf[b+g]=u.buf[b]}function vd(l,n){for(var u=0;u<l.length;u++)n.writeVarint(l[u])}function kh(l,n){for(var u=0;u<l.length;u++)n.writeSVarint(l[u])}function Wp(l,n){for(var u=0;u<l.length;u++)n.writeFloat(l[u])}function Gp(l,n){for(var u=0;u<l.length;u++)n.writeDouble(l[u])}function Yp(l,n){for(var u=0;u<l.length;u++)n.writeBoolean(l[u])}function Ph(l,n){for(var u=0;u<l.length;u++)n.writeFixed32(l[u])}function Dh(l,n){for(var u=0;u<l.length;u++)n.writeSFixed32(l[u])}function bi(l,n){for(var u=0;u<l.length;u++)n.writeFixed64(l[u])}function Os(l,n){for(var u=0;u<l.length;u++)n.writeSFixed64(l[u])}function zs(l,n){return(l[n]|l[n+1]<<8|l[n+2]<<16)+16777216*l[n+3]}function ql(l,n,u){l[u]=n,l[u+1]=n>>>8,l[u+2]=n>>>16,l[u+3]=n>>>24}function Ih(l,n){return(l[n]|l[n+1]<<8|l[n+2]<<16)+(l[n+3]<<24)}function Fs(l,n,u){l===1&&u.readMessage(Xp,n)}function Xp(l,n,u){if(l===3){const{id:g,bitmap:b,width:S,height:t,left:a,top:p,advance:v}=u.readMessage(_o,{});n.push({id:g,bitmap:new Hl({width:S+6,height:t+6},b),metrics:{width:S,height:t,left:a,top:p,advance:v}})}}function _o(l,n,u){l===1?n.id=u.readVarint():l===2?n.bitmap=u.readBytes():l===3?n.width=u.readVarint():l===4?n.height=u.readVarint():l===5?n.left=u.readSVarint():l===6?n.top=u.readSVarint():l===7&&(n.advance=u.readVarint())}function Kp(l){let n=0,u=0;for(const t of l)n+=t.w*t.h,u=Math.max(u,t.w);l.sort((t,a)=>a.h-t.h);const g=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),u),h:1/0}];let b=0,S=0;for(const t of l)for(let a=g.length-1;a>=0;a--){const p=g[a];if(!(t.w>p.w||t.h>p.h)){if(t.x=p.x,t.y=p.y,S=Math.max(S,t.y+t.h),b=Math.max(b,t.x+t.w),t.w===p.w&&t.h===p.h){const v=g.pop();a<g.length&&(g[a]=v)}else t.h===p.h?(p.x+=t.w,p.w-=t.w):t.w===p.w?(p.y+=t.h,p.h-=t.h):(g.push({x:p.x+t.w,y:p.y,w:p.w-t.w,h:t.h}),p.y+=t.h,p.h-=t.h);break}}return{w:b,h:S,fill:n/(b*S)||0}}yn.prototype={destroy:function(){this.buf=null},readFields:function(l,n,u){for(u=u||this.length;this.pos<u;){var g=this.readVarint(),b=g>>3,S=this.pos;this.type=7&g,l(b,n,this),this.pos===S&&this.skip(g)}return n},readMessage:function(l,n){return this.readFields(l,n,this.readVarint()+this.pos)},readFixed32:function(){var l=zs(this.buf,this.pos);return this.pos+=4,l},readSFixed32:function(){var l=Ih(this.buf,this.pos);return this.pos+=4,l},readFixed64:function(){var l=zs(this.buf,this.pos)+zs(this.buf,this.pos+4)*qt;return this.pos+=8,l},readSFixed64:function(){var l=zs(this.buf,this.pos)+Ih(this.buf,this.pos+4)*qt;return this.pos+=8,l},readFloat:function(){var l=qp(this.buf,this.pos,!0,23,4);return this.pos+=4,l},readDouble:function(){var l=qp(this.buf,this.pos,!0,52,8);return this.pos+=8,l},readVarint:function(l){var n,u,g=this.buf;return n=127&(u=g[this.pos++]),u<128?n:(n|=(127&(u=g[this.pos++]))<<7,u<128?n:(n|=(127&(u=g[this.pos++]))<<14,u<128?n:(n|=(127&(u=g[this.pos++]))<<21,u<128?n:function(b,S,t){var a,p,v=t.buf;if(a=(112&(p=v[t.pos++]))>>4,p<128||(a|=(127&(p=v[t.pos++]))<<3,p<128)||(a|=(127&(p=v[t.pos++]))<<10,p<128)||(a|=(127&(p=v[t.pos++]))<<17,p<128)||(a|=(127&(p=v[t.pos++]))<<24,p<128)||(a|=(1&(p=v[t.pos++]))<<31,p<128))return iu(b,a,S);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(u=g[this.pos]))<<28,l,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var l=this.readVarint();return l%2==1?(l+1)/-2:l/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var l=this.readVarint()+this.pos,n=this.pos;return this.pos=l,l-n>=12&&yd?function(u,g,b){return yd.decode(u.subarray(g,b))}(this.buf,n,l):function(u,g,b){for(var S="",t=g;t<b;){var a,p,v,C=u[t],E=null,I=C>239?4:C>223?3:C>191?2:1;if(t+I>b)break;I===1?C<128&&(E=C):I===2?(192&(a=u[t+1]))==128&&(E=(31&C)<<6|63&a)<=127&&(E=null):I===3?(p=u[t+2],(192&(a=u[t+1]))==128&&(192&p)==128&&((E=(15&C)<<12|(63&a)<<6|63&p)<=2047||E>=55296&&E<=57343)&&(E=null)):I===4&&(p=u[t+2],v=u[t+3],(192&(a=u[t+1]))==128&&(192&p)==128&&(192&v)==128&&((E=(15&C)<<18|(63&a)<<12|(63&p)<<6|63&v)<=65535||E>=1114112)&&(E=null)),E===null?(E=65533,I=1):E>65535&&(E-=65536,S+=String.fromCharCode(E>>>10&1023|55296),E=56320|1023&E),S+=String.fromCharCode(E),t+=I}return S}(this.buf,n,l)},readBytes:function(){var l=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,l);return this.pos=l,n},readPackedVarint:function(l,n){if(this.type!==yn.Bytes)return l.push(this.readVarint(n));var u=xo(this);for(l=l||[];this.pos<u;)l.push(this.readVarint(n));return l},readPackedSVarint:function(l){if(this.type!==yn.Bytes)return l.push(this.readSVarint());var n=xo(this);for(l=l||[];this.pos<n;)l.push(this.readSVarint());return l},readPackedBoolean:function(l){if(this.type!==yn.Bytes)return l.push(this.readBoolean());var n=xo(this);for(l=l||[];this.pos<n;)l.push(this.readBoolean());return l},readPackedFloat:function(l){if(this.type!==yn.Bytes)return l.push(this.readFloat());var n=xo(this);for(l=l||[];this.pos<n;)l.push(this.readFloat());return l},readPackedDouble:function(l){if(this.type!==yn.Bytes)return l.push(this.readDouble());var n=xo(this);for(l=l||[];this.pos<n;)l.push(this.readDouble());return l},readPackedFixed32:function(l){if(this.type!==yn.Bytes)return l.push(this.readFixed32());var n=xo(this);for(l=l||[];this.pos<n;)l.push(this.readFixed32());return l},readPackedSFixed32:function(l){if(this.type!==yn.Bytes)return l.push(this.readSFixed32());var n=xo(this);for(l=l||[];this.pos<n;)l.push(this.readSFixed32());return l},readPackedFixed64:function(l){if(this.type!==yn.Bytes)return l.push(this.readFixed64());var n=xo(this);for(l=l||[];this.pos<n;)l.push(this.readFixed64());return l},readPackedSFixed64:function(l){if(this.type!==yn.Bytes)return l.push(this.readSFixed64());var n=xo(this);for(l=l||[];this.pos<n;)l.push(this.readSFixed64());return l},skip:function(l){var n=7&l;if(n===yn.Varint)for(;this.buf[this.pos++]>127;);else if(n===yn.Bytes)this.pos=this.readVarint()+this.pos;else if(n===yn.Fixed32)this.pos+=4;else{if(n!==yn.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(l,n){this.writeVarint(l<<3|n)},realloc:function(l){for(var n=this.length||16;n<this.pos+l;)n*=2;if(n!==this.length){var u=new Uint8Array(n);u.set(this.buf),this.buf=u,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(l){this.realloc(4),ql(this.buf,l,this.pos),this.pos+=4},writeSFixed32:function(l){this.realloc(4),ql(this.buf,l,this.pos),this.pos+=4},writeFixed64:function(l){this.realloc(8),ql(this.buf,-1&l,this.pos),ql(this.buf,Math.floor(l*Zl),this.pos+4),this.pos+=8},writeSFixed64:function(l){this.realloc(8),ql(this.buf,-1&l,this.pos),ql(this.buf,Math.floor(l*Zl),this.pos+4),this.pos+=8},writeVarint:function(l){(l=+l||0)>268435455||l<0?function(n,u){var g,b;if(n>=0?(g=n%4294967296|0,b=n/4294967296|0):(b=~(-n/4294967296),4294967295^(g=~(-n%4294967296))?g=g+1|0:(g=0,b=b+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");u.realloc(10),function(S,t,a){a.buf[a.pos++]=127&S|128,S>>>=7,a.buf[a.pos++]=127&S|128,S>>>=7,a.buf[a.pos++]=127&S|128,S>>>=7,a.buf[a.pos++]=127&S|128,a.buf[a.pos]=127&(S>>>=7)}(g,0,u),function(S,t){var a=(7&S)<<4;t.buf[t.pos++]|=a|((S>>>=3)?128:0),S&&(t.buf[t.pos++]=127&S|((S>>>=7)?128:0),S&&(t.buf[t.pos++]=127&S|((S>>>=7)?128:0),S&&(t.buf[t.pos++]=127&S|((S>>>=7)?128:0),S&&(t.buf[t.pos++]=127&S|((S>>>=7)?128:0),S&&(t.buf[t.pos++]=127&S)))))}(b,u)}(l,this):(this.realloc(4),this.buf[this.pos++]=127&l|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=l>>>7&127))))},writeSVarint:function(l){this.writeVarint(l<0?2*-l-1:2*l)},writeBoolean:function(l){this.writeVarint(!!l)},writeString:function(l){l=String(l),this.realloc(4*l.length),this.pos++;var n=this.pos;this.pos=function(g,b,S){for(var t,a,p=0;p<b.length;p++){if((t=b.charCodeAt(p))>55295&&t<57344){if(!a){t>56319||p+1===b.length?(g[S++]=239,g[S++]=191,g[S++]=189):a=t;continue}if(t<56320){g[S++]=239,g[S++]=191,g[S++]=189,a=t;continue}t=a-55296<<10|t-56320|65536,a=null}else a&&(g[S++]=239,g[S++]=191,g[S++]=189,a=null);t<128?g[S++]=t:(t<2048?g[S++]=t>>6|192:(t<65536?g[S++]=t>>12|224:(g[S++]=t>>18|240,g[S++]=t>>12&63|128),g[S++]=t>>6&63|128),g[S++]=63&t|128)}return S}(this.buf,l,this.pos);var u=this.pos-n;u>=128&&su(n,u,this),this.pos=n-1,this.writeVarint(u),this.pos+=u},writeFloat:function(l){this.realloc(4),r1(this.buf,l,this.pos,!0,23,4),this.pos+=4},writeDouble:function(l){this.realloc(8),r1(this.buf,l,this.pos,!0,52,8),this.pos+=8},writeBytes:function(l){var n=l.length;this.writeVarint(n),this.realloc(n);for(var u=0;u<n;u++)this.buf[this.pos++]=l[u]},writeRawMessage:function(l,n){this.pos++;var u=this.pos;l(n,this);var g=this.pos-u;g>=128&&su(u,g,this),this.pos=u-1,this.writeVarint(g),this.pos+=g},writeMessage:function(l,n,u){this.writeTag(l,yn.Bytes),this.writeRawMessage(n,u)},writePackedVarint:function(l,n){n.length&&this.writeMessage(l,vd,n)},writePackedSVarint:function(l,n){n.length&&this.writeMessage(l,kh,n)},writePackedBoolean:function(l,n){n.length&&this.writeMessage(l,Yp,n)},writePackedFloat:function(l,n){n.length&&this.writeMessage(l,Wp,n)},writePackedDouble:function(l,n){n.length&&this.writeMessage(l,Gp,n)},writePackedFixed32:function(l,n){n.length&&this.writeMessage(l,Ph,n)},writePackedSFixed32:function(l,n){n.length&&this.writeMessage(l,Dh,n)},writePackedFixed64:function(l,n){n.length&&this.writeMessage(l,bi,n)},writePackedSFixed64:function(l,n){n.length&&this.writeMessage(l,Os,n)},writeBytesField:function(l,n){this.writeTag(l,yn.Bytes),this.writeBytes(n)},writeFixed32Field:function(l,n){this.writeTag(l,yn.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(l,n){this.writeTag(l,yn.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(l,n){this.writeTag(l,yn.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(l,n){this.writeTag(l,yn.Fixed64),this.writeSFixed64(n)},writeVarintField:function(l,n){this.writeTag(l,yn.Varint),this.writeVarint(n)},writeSVarintField:function(l,n){this.writeTag(l,yn.Varint),this.writeSVarint(n)},writeStringField:function(l,n){this.writeTag(l,yn.Bytes),this.writeString(n)},writeFloatField:function(l,n){this.writeTag(l,yn.Fixed32),this.writeFloat(n)},writeDoubleField:function(l,n){this.writeTag(l,yn.Fixed64),this.writeDouble(n)},writeBooleanField:function(l,n){this.writeVarintField(l,!!n)}};class xd{constructor(n,{pixelRatio:u,version:g,stretchX:b,stretchY:S,content:t}){this.paddedRect=n,this.pixelRatio=u,this.stretchX=b,this.stretchY=S,this.content=t,this.version=g}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Nh{constructor(n,u){const g={},b={};this.haveRenderCallbacks=[];const S=[];this.addImages(n,g,S),this.addImages(u,b,S);const{w:t,h:a}=Kp(S),p=new Di({width:t||1,height:a||1});for(const v in n){const C=n[v],E=g[v].paddedRect;Di.copy(C.data,p,{x:0,y:0},{x:E.x+1,y:E.y+1},C.data)}for(const v in u){const C=u[v],E=b[v].paddedRect,I=E.x+1,j=E.y+1,z=C.data.width,X=C.data.height;Di.copy(C.data,p,{x:0,y:0},{x:I,y:j},C.data),Di.copy(C.data,p,{x:0,y:X-1},{x:I,y:j-1},{width:z,height:1}),Di.copy(C.data,p,{x:0,y:0},{x:I,y:j+X},{width:z,height:1}),Di.copy(C.data,p,{x:z-1,y:0},{x:I-1,y:j},{width:1,height:X}),Di.copy(C.data,p,{x:0,y:0},{x:I+z,y:j},{width:1,height:X})}this.image=p,this.iconPositions=g,this.patternPositions=b}addImages(n,u,g){for(const b in n){const S=n[b],t={x:0,y:0,w:S.data.width+2,h:S.data.height+2};g.push(t),u[b]=new xd(t,S),S.hasRenderCallback&&this.haveRenderCallbacks.push(b)}}patchUpdatedImages(n,u){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const g in n.updatedImages)this.patchUpdatedImage(this.iconPositions[g],n.getImage(g),u),this.patchUpdatedImage(this.patternPositions[g],n.getImage(g),u)}patchUpdatedImage(n,u,g){if(!n||!u||n.version===u.version)return;n.version=u.version;const[b,S]=n.tl;g.update(u.data,void 0,{x:b,y:S})}}Nt("ImagePosition",xd),Nt("ImageAtlas",Nh),c.WritingMode=void 0,(Ba=c.WritingMode||(c.WritingMode={}))[Ba.none=0]="none",Ba[Ba.horizontal=1]="horizontal",Ba[Ba.vertical=2]="vertical",Ba[Ba.horizontalOnly=3]="horizontalOnly";const i1=-17;class ou{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,u){const g=new ou;return g.scale=n||1,g.fontStack=u,g}static forImage(n){const u=new ou;return u.imageName=n,u}}class au{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,u){const g=new au;for(let b=0;b<n.sections.length;b++){const S=n.sections[b];S.image?g.addImageSection(S):g.addTextSection(S,u)}return g}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let u="";for(let g=0;g<n.length;g++){const b=n.charCodeAt(g+1)||null,S=n.charCodeAt(g-1)||null;u+=b&&Hu(b)&&!na[n[g+1]]||S&&Hu(S)&&!na[n[g-1]]||!na[n[g]]?n[g]:na[n[g]]}return u}(this.text)}trim(){let n=0;for(let g=0;g<this.text.length&&lu[this.text.charCodeAt(g)];g++)n++;let u=this.text.length;for(let g=this.text.length-1;g>=0&&g>=n&&lu[this.text.charCodeAt(g)];g--)u--;this.text=this.text.substring(n,u),this.sectionIndex=this.sectionIndex.slice(n,u)}substring(n,u){const g=new au;return g.text=this.text.substring(n,u),g.sectionIndex=this.sectionIndex.slice(n,u),g.sections=this.sections,g}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,u)=>Math.max(n,this.sections[u].scale),0)}addTextSection(n,u){this.text+=n.text,this.sections.push(ou.forText(n.scale,n.fontStack||u));const g=this.sections.length-1;for(let b=0;b<n.text.length;++b)this.sectionIndex.push(g)}addImageSection(n){const u=n.image?n.image.name:"";if(u.length===0)return void ae("Can't add FormattedSection with an empty image.");const g=this.getNextImageSectionCharCode();g?(this.text+=String.fromCharCode(g),this.sections.push(ou.forImage(u)),this.sectionIndex.push(this.sections.length-1)):ae("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Wl(l,n,u,g,b,S,t,a,p,v,C,E,I,j,z,X){const ee=au.fromFeature(l,b);let ce;E===c.WritingMode.vertical&&ee.verticalizePunctuation();const{processBidirectionalText:ge,processStyledBidirectionalText:me}=An;if(ge&&ee.sections.length===1){ce=[];const tt=ge(ee.toString(),$a(ee,v,S,n,g,j,z));for(const we of tt){const he=new au;he.text=we,he.sections=ee.sections;for(let _e=0;_e<we.length;_e++)he.sectionIndex.push(0);ce.push(he)}}else if(me){ce=[];const tt=me(ee.text,ee.sectionIndex,$a(ee,v,S,n,g,j,z));for(const we of tt){const he=new au;he.text=we[0],he.sectionIndex=we[1],he.sections=ee.sections,ce.push(he)}}else ce=function(tt,we){const he=[],_e=tt.text;let Oe=0;for(const Ye of we)he.push(tt.substring(Oe,Ye)),Oe=Ye;return Oe<_e.length&&he.push(tt.substring(Oe,_e.length)),he}(ee,$a(ee,v,S,n,g,j,z));const Se=[],Ae={positionedLines:Se,text:ee.toString(),top:C[1],bottom:C[1],left:C[0],right:C[0],writingMode:E,iconsInText:!1,verticalizable:!1};return function(tt,we,he,_e,Oe,Ye,at,ot,We,At,wt,dn){let lr=0,xr=i1,Jr=0,Vs=0;const Si=ot==="right"?1:ot==="left"?0:.5;let Zr=0;for(const qr of Oe){qr.trim();const Ei=qr.getMaxScale(),Ri=(Ei-1)*Vn,Ui={positionedGlyphs:[],lineOffset:0};tt.positionedLines[Zr]=Ui;const ss=Ui.positionedGlyphs;let os=0;if(!qr.length()){xr+=Ye,++Zr;continue}for(let gi=0;gi<qr.length();gi++){const kn=qr.getSection(gi),xs=qr.getSectionIndex(gi),Li=qr.getCharCode(gi);let Ai=0,So=null,sa=null,oa=null,ic=Vn;const Mo=!(We===c.WritingMode.horizontal||!wt&&!no(Li)||wt&&(lu[Li]||(mi=Li,Mt.Arabic(mi)||Mt["Arabic Supplement"](mi)||Mt["Arabic Extended-A"](mi)||Mt["Arabic Presentation Forms-A"](mi)||Mt["Arabic Presentation Forms-B"](mi))));if(kn.imageName){const Hs=_e[kn.imageName];if(!Hs)continue;oa=kn.imageName,tt.iconsInText=tt.iconsInText||!0,sa=Hs.paddedRect;const as=Hs.displaySize;kn.scale=kn.scale*Vn/dn,So={width:as[0],height:as[1],left:1,top:-3,advance:Mo?as[1]:as[0]},Ai=Ri+(Vn-as[1]*kn.scale),ic=So.advance;const sc=Mo?as[0]*kn.scale-Vn*Ei:as[1]*kn.scale-Vn*Ei;sc>0&&sc>os&&(os=sc)}else{const Hs=he[kn.fontStack],as=Hs&&Hs[Li];if(as&&as.rect)sa=as.rect,So=as.metrics;else{const sc=we[kn.fontStack],$h=sc&&sc[Li];if(!$h)continue;So=$h.metrics}Ai=(Ei-kn.scale)*Vn}Mo?(tt.verticalizable=!0,ss.push({glyph:Li,imageName:oa,x:lr,y:xr+Ai,vertical:Mo,scale:kn.scale,fontStack:kn.fontStack,sectionIndex:xs,metrics:So,rect:sa}),lr+=ic*kn.scale+At):(ss.push({glyph:Li,imageName:oa,x:lr,y:xr+Ai,vertical:Mo,scale:kn.scale,fontStack:kn.fontStack,sectionIndex:xs,metrics:So,rect:sa}),lr+=So.advance*kn.scale+At)}ss.length!==0&&(Jr=Math.max(lr-At,Jr),s1(ss,0,ss.length-1,Si,os)),lr=0;const Lr=Ye*Ei+os;Ui.lineOffset=Math.max(os,Ri),xr+=Lr,Vs=Math.max(Lr,Vs),++Zr}var mi;const Mi=xr-i1,{horizontalAlign:Ni,verticalAlign:is}=Fr(at);(function(qr,Ei,Ri,Ui,ss,os,Lr,gi,kn){const xs=(Ei-Ri)*ss;let Li=0;Li=os!==Lr?-gi*Ui-i1:(-Ui*kn+.5)*Lr;for(const Ai of qr)for(const So of Ai.positionedGlyphs)So.x+=xs,So.y+=Li})(tt.positionedLines,Si,Ni,is,Jr,Vs,Ye,Mi,Oe.length),tt.top+=-is*Mi,tt.bottom=tt.top+Mi,tt.left+=-Ni*Jr,tt.right=tt.left+Jr}(Ae,n,u,g,ce,t,a,p,E,v,I,X),!function(tt){for(const we of tt)if(we.positionedGlyphs.length!==0)return!1;return!0}(Se)&&Ae}const lu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},vs={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Hn(l,n,u,g,b,S){if(n.imageName){const t=g[n.imageName];return t?t.displaySize[0]*n.scale*Vn/S+b:0}{const t=u[n.fontStack],a=t&&t[l];return a?a.metrics.advance*n.scale+b:0}}function Qr(l,n,u,g){const b=Math.pow(l-n,2);return g?l<n?b/2:2*b:b+Math.abs(u)*u}function Ur(l,n,u){let g=0;return l===10&&(g-=1e4),u&&(g+=150),l!==40&&l!==65288||(g+=50),n!==41&&n!==65289||(g+=50),g}function hi(l,n,u,g,b,S){let t=null,a=Qr(n,u,b,S);for(const p of g){const v=Qr(n-p.x,u,b,S)+p.badness;v<=a&&(t=p,a=v)}return{index:l,x:n,priorBreak:t,badness:a}}function Vi(l){return l?Vi(l.priorBreak).concat(l.index):[]}function $a(l,n,u,g,b,S,t){if(S!=="point")return[];if(!l)return[];const a=[],p=function(I,j,z,X,ee,ce){let ge=0;for(let me=0;me<I.length();me++){const Se=I.getSection(me);ge+=Hn(I.getCharCode(me),Se,X,ee,j,ce)}return ge/Math.max(1,Math.ceil(ge/z))}(l,n,u,g,b,t),v=l.text.indexOf("​")>=0;let C=0;for(let I=0;I<l.length();I++){const j=l.getSection(I),z=l.getCharCode(I);if(lu[z]||(C+=Hn(z,j,g,b,n,t)),I<l.length()-1){const X=!((E=z)<11904||!(Mt["Bopomofo Extended"](E)||Mt.Bopomofo(E)||Mt["CJK Compatibility Forms"](E)||Mt["CJK Compatibility Ideographs"](E)||Mt["CJK Compatibility"](E)||Mt["CJK Radicals Supplement"](E)||Mt["CJK Strokes"](E)||Mt["CJK Symbols and Punctuation"](E)||Mt["CJK Unified Ideographs Extension A"](E)||Mt["CJK Unified Ideographs"](E)||Mt["Enclosed CJK Letters and Months"](E)||Mt["Halfwidth and Fullwidth Forms"](E)||Mt.Hiragana(E)||Mt["Ideographic Description Characters"](E)||Mt["Kangxi Radicals"](E)||Mt["Katakana Phonetic Extensions"](E)||Mt.Katakana(E)||Mt["Vertical Forms"](E)||Mt["Yi Radicals"](E)||Mt["Yi Syllables"](E)));(vs[z]||X||j.imageName)&&a.push(hi(I+1,C,p,a,Ur(z,l.getCharCode(I+1),X&&v),!1))}}var E;return Vi(hi(l.length(),C,p,a,0,!0))}function Fr(l){let n=.5,u=.5;switch(l){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(l){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:n,verticalAlign:u}}function s1(l,n,u,g,b){if(!g&&!b)return;const S=l[u],t=(l[u].x+S.metrics.advance*S.scale)*g;for(let a=n;a<=u;a++)l[a].x-=t,l[a].y+=b}function Gl(l,n,u){const{horizontalAlign:g,verticalAlign:b}=Fr(u),S=n[0]-l.displaySize[0]*g,t=n[1]-l.displaySize[1]*b;return{image:l,top:t,bottom:t+l.displaySize[1],left:S,right:S+l.displaySize[0]}}function o1(l,n,u,g,b,S){const t=l.image;let a;if(t.content){const ee=t.content,ce=t.pixelRatio||1;a=[ee[0]/ce,ee[1]/ce,t.displaySize[0]-ee[2]/ce,t.displaySize[1]-ee[3]/ce]}const p=n.left*S,v=n.right*S;let C,E,I,j;u==="width"||u==="both"?(j=b[0]+p-g[3],E=b[0]+v+g[1]):(j=b[0]+(p+v-t.displaySize[0])/2,E=j+t.displaySize[0]);const z=n.top*S,X=n.bottom*S;return u==="height"||u==="both"?(C=b[1]+z-g[0],I=b[1]+X+g[2]):(C=b[1]+(z+X-t.displaySize[1])/2,I=C+t.displaySize[1]),{image:t,top:C,right:E,bottom:I,left:j,collisionPadding:a}}const Bs=128;function cu(l,n){const{expression:u}=n;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new nr(l+1))};if(u.kind==="source")return{kind:"source"};{const{zoomStops:g,interpolationType:b}=u;let S=0;for(;S<g.length&&g[S]<=l;)S++;S=Math.max(0,S-1);let t=S;for(;t<g.length&&g[t]<l+1;)t++;t=Math.min(g.length-1,t);const a=g[S],p=g[t];return u.kind==="composite"?{kind:"composite",minZoom:a,maxZoom:p,interpolationType:b}:{kind:"camera",minZoom:a,maxZoom:p,minSize:u.evaluate(new nr(a)),maxSize:u.evaluate(new nr(p)),interpolationType:b}}}class Br extends Pe{constructor(n,u,g,b){super(n,u),this.angle=g,b!==void 0&&(this.segment=b)}clone(){return new Br(this.x,this.y,this.angle,this.segment)}}function _d(l,n,u,g,b){if(n.segment===void 0)return!0;let S=n,t=n.segment+1,a=0;for(;a>-u/2;){if(t--,t<0)return!1;a-=l[t].dist(S),S=l[t]}a+=l[t].dist(l[t+1]),t++;const p=[];let v=0;for(;a<u/2;){const C=l[t],E=l[t+1];if(!E)return!1;let I=l[t-1].angleTo(C)-C.angleTo(E);for(I=Math.abs((I+3*Math.PI)%(2*Math.PI)-Math.PI),p.push({distance:a,angleDelta:I}),v+=I;a-p[0].distance>g;)v-=p.shift().angleDelta;if(v>b)return!1;t++,a+=C.dist(E)}return!0}function Yl(l){let n=0;for(let u=0;u<l.length-1;u++)n+=l[u].dist(l[u+1]);return n}function wo(l,n,u){return l?.6*n*u:0}function a1(l,n){return Math.max(l?l.right-l.left:0,n?n.right-n.left:0)}function Rh(l,n,u,g,b,S){const t=wo(u,b,S),a=a1(u,g)*S;let p=0;const v=Yl(l)/2;for(let C=0;C<l.length-1;C++){const E=l[C],I=l[C+1],j=E.dist(I);if(p+j>v){const z=(v-p)/j,X=dr(E.x,I.x,z),ee=dr(E.y,I.y,z),ce=new Br(X,ee,I.angleTo(E),C);return ce._round(),!t||_d(l,ce,a,t,n)?ce:void 0}p+=j}}function Va(l,n,u,g,b,S,t,a,p){const v=wo(g,S,t),C=a1(g,b),E=C*t,I=l[0].x===0||l[0].x===p||l[0].y===0||l[0].y===p;return n-E<n/4&&(n=E+n/4),l1(l,I?n/2*a%n:(C/2+2*S)*t*a%n,n,v,u,E,I,!1,p)}function l1(l,n,u,g,b,S,t,a,p){const v=S/2,C=Yl(l);let E=0,I=n-u,j=[];for(let z=0;z<l.length-1;z++){const X=l[z],ee=l[z+1],ce=X.dist(ee),ge=ee.angleTo(X);for(;I+u<E+ce;){I+=u;const me=(I-E)/ce,Se=dr(X.x,ee.x,me),Ae=dr(X.y,ee.y,me);if(Se>=0&&Se<p&&Ae>=0&&Ae<p&&I-v>=0&&I+v<=C){const tt=new Br(Se,Ae,ge,z);tt._round(),g&&!_d(l,tt,S,g,b)||j.push(tt)}}E+=ce}return a||j.length||t||(j=l1(l,E/2,u,g,b,S,t,!0,p)),j}function ra(l,n,u,g,b){const S=[];for(let t=0;t<l.length;t++){const a=l[t];let p;for(let v=0;v<a.length-1;v++){let C=a[v],E=a[v+1];C.x<n&&E.x<n||(C.x<n?C=new Pe(n,C.y+(n-C.x)/(E.x-C.x)*(E.y-C.y))._round():E.x<n&&(E=new Pe(n,C.y+(n-C.x)/(E.x-C.x)*(E.y-C.y))._round()),C.y<u&&E.y<u||(C.y<u?C=new Pe(C.x+(u-C.y)/(E.y-C.y)*(E.x-C.x),u)._round():E.y<u&&(E=new Pe(C.x+(u-C.y)/(E.y-C.y)*(E.x-C.x),u)._round()),C.x>=g&&E.x>=g||(C.x>=g?C=new Pe(g,C.y+(g-C.x)/(E.x-C.x)*(E.y-C.y))._round():E.x>=g&&(E=new Pe(g,C.y+(g-C.x)/(E.x-C.x)*(E.y-C.y))._round()),C.y>=b&&E.y>=b||(C.y>=b?C=new Pe(C.x+(b-C.y)/(E.y-C.y)*(E.x-C.x),b)._round():E.y>=b&&(E=new Pe(C.x+(b-C.y)/(E.y-C.y)*(E.x-C.x),b)._round()),p&&C.equals(p[p.length-1])||(p=[C],S.push(p)),p.push(E)))))}}return S}function c1(l,n,u,g){const b=[],S=l.image,t=S.pixelRatio,a=S.paddedRect.w-2,p=S.paddedRect.h-2,v=l.right-l.left,C=l.bottom-l.top,E=S.stretchX||[[0,a]],I=S.stretchY||[[0,p]],j=(Ye,at)=>Ye+at[1]-at[0],z=E.reduce(j,0),X=I.reduce(j,0),ee=a-z,ce=p-X;let ge=0,me=z,Se=0,Ae=X,tt=0,we=ee,he=0,_e=ce;if(S.content&&g){const Ye=S.content;ge=Ha(E,0,Ye[0]),Se=Ha(I,0,Ye[1]),me=Ha(E,Ye[0],Ye[2]),Ae=Ha(I,Ye[1],Ye[3]),tt=Ye[0]-ge,he=Ye[1]-Se,we=Ye[2]-Ye[0]-me,_e=Ye[3]-Ye[1]-Ae}const Oe=(Ye,at,ot,We)=>{const At=Xl(Ye.stretch-ge,me,v,l.left),wt=Kl(Ye.fixed-tt,we,Ye.stretch,z),dn=Xl(at.stretch-Se,Ae,C,l.top),lr=Kl(at.fixed-he,_e,at.stretch,X),xr=Xl(ot.stretch-ge,me,v,l.left),Jr=Kl(ot.fixed-tt,we,ot.stretch,z),Vs=Xl(We.stretch-Se,Ae,C,l.top),Si=Kl(We.fixed-he,_e,We.stretch,X),Zr=new Pe(At,dn),mi=new Pe(xr,dn),Mi=new Pe(xr,Vs),Ni=new Pe(At,Vs),is=new Pe(wt/t,lr/t),qr=new Pe(Jr/t,Si/t),Ei=n*Math.PI/180;if(Ei){const ss=Math.sin(Ei),os=Math.cos(Ei),Lr=[os,-ss,ss,os];Zr._matMult(Lr),mi._matMult(Lr),Ni._matMult(Lr),Mi._matMult(Lr)}const Ri=Ye.stretch+Ye.fixed,Ui=at.stretch+at.fixed;return{tl:Zr,tr:mi,bl:Ni,br:Mi,tex:{x:S.paddedRect.x+1+Ri,y:S.paddedRect.y+1+Ui,w:ot.stretch+ot.fixed-Ri,h:We.stretch+We.fixed-Ui},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:is,pixelOffsetBR:qr,minFontScaleX:we/t/v,minFontScaleY:_e/t/C,isSDF:u}};if(g&&(S.stretchX||S.stretchY)){const Ye=wd(E,ee,z),at=wd(I,ce,X);for(let ot=0;ot<Ye.length-1;ot++){const We=Ye[ot],At=Ye[ot+1];for(let wt=0;wt<at.length-1;wt++)b.push(Oe(We,at[wt],At,at[wt+1]))}}else b.push(Oe({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:a+1},{fixed:0,stretch:p+1}));return b}function Ha(l,n,u){let g=0;for(const b of l)g+=Math.max(n,Math.min(u,b[1]))-Math.max(n,Math.min(u,b[0]));return g}function wd(l,n,u){const g=[{fixed:-1,stretch:0}];for(const[b,S]of l){const t=g[g.length-1];g.push({fixed:b-t.stretch,stretch:t.stretch}),g.push({fixed:b-t.stretch,stretch:t.stretch+(S-b)})}return g.push({fixed:n+1,stretch:u}),g}function Xl(l,n,u,g){return l/n*u+g}function Kl(l,n,u,g){return l-n*u/g}Nt("Anchor",Br);class pi{constructor(n,u,g,b,S,t,a,p,v,C){if(this.boxStartIndex=n.length,v){let E=t.top,I=t.bottom;const j=t.collisionPadding;j&&(E-=j[1],I+=j[3]);let z=I-E;z>0&&(z=Math.max(10,z),this.circleDiameter=z)}else{let E=t.top*a-p[0],I=t.bottom*a+p[2],j=t.left*a-p[3],z=t.right*a+p[1];const X=t.collisionPadding;if(X&&(j-=X[0]*a,E-=X[1]*a,z+=X[2]*a,I+=X[3]*a),C){const ee=new Pe(j,E),ce=new Pe(z,E),ge=new Pe(j,I),me=new Pe(z,I),Se=C*Math.PI/180;ee._rotate(Se),ce._rotate(Se),ge._rotate(Se),me._rotate(Se),j=Math.min(ee.x,ce.x,ge.x,me.x),z=Math.max(ee.x,ce.x,ge.x,me.x),E=Math.min(ee.y,ce.y,ge.y,me.y),I=Math.max(ee.y,ce.y,ge.y,me.y)}n.emplaceBack(u.x,u.y,j,E,z,I,g,b,S)}this.boxEndIndex=n.length}}class Ua{constructor(n=[],u=$s){if(this.data=n,this.length=this.data.length,this.compare=u,this.length>0)for(let g=(this.length>>1)-1;g>=0;g--)this._down(g)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],u=this.data.pop();return this.length--,this.length>0&&(this.data[0]=u,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:u,compare:g}=this,b=u[n];for(;n>0;){const S=n-1>>1,t=u[S];if(g(b,t)>=0)break;u[n]=t,n=S}u[n]=b}_down(n){const{data:u,compare:g}=this,b=this.length>>1,S=u[n];for(;n<b;){let t=1+(n<<1),a=u[t];const p=t+1;if(p<this.length&&g(u[p],a)<0&&(t=p,a=u[p]),g(a,S)>=0)break;u[n]=a,n=t}u[n]=S}}function $s(l,n){return l<n?-1:l>n?1:0}function Hi(l,n=1,u=!1){let g=1/0,b=1/0,S=-1/0,t=-1/0;const a=l[0];for(let j=0;j<a.length;j++){const z=a[j];(!j||z.x<g)&&(g=z.x),(!j||z.y<b)&&(b=z.y),(!j||z.x>S)&&(S=z.x),(!j||z.y>t)&&(t=z.y)}const p=Math.min(S-g,t-b);let v=p/2;const C=new Ua([],Qp);if(p===0)return new Pe(g,b);for(let j=g;j<S;j+=p)for(let z=b;z<t;z+=p)C.push(new Za(j+v,z+v,v,l));let E=function(j){let z=0,X=0,ee=0;const ce=j[0];for(let ge=0,me=ce.length,Se=me-1;ge<me;Se=ge++){const Ae=ce[ge],tt=ce[Se],we=Ae.x*tt.y-tt.x*Ae.y;X+=(Ae.x+tt.x)*we,ee+=(Ae.y+tt.y)*we,z+=3*we}return new Za(X/z,ee/z,0,j)}(l),I=C.length;for(;C.length;){const j=C.pop();(j.d>E.d||!E.d)&&(E=j,u&&console.log("found best %d after %d probes",Math.round(1e4*j.d)/1e4,I)),j.max-E.d<=n||(v=j.h/2,C.push(new Za(j.p.x-v,j.p.y-v,v,l)),C.push(new Za(j.p.x+v,j.p.y-v,v,l)),C.push(new Za(j.p.x-v,j.p.y+v,v,l)),C.push(new Za(j.p.x+v,j.p.y+v,v,l)),I+=4)}return u&&(console.log(`num probes: ${I}`),console.log(`best distance: ${E.d}`)),E.p}function Qp(l,n){return n.max-l.max}function Za(l,n,u,g){this.p=new Pe(l,n),this.h=u,this.d=function(b,S){let t=!1,a=1/0;for(let p=0;p<S.length;p++){const v=S[p];for(let C=0,E=v.length,I=E-1;C<E;I=C++){const j=v[C],z=v[I];j.y>b.y!=z.y>b.y&&b.x<(z.x-j.x)*(b.y-j.y)/(z.y-j.y)+j.x&&(t=!t),a=Math.min(a,Wu(b,j,z))}}return(t?1:-1)*Math.sqrt(a)}(this.p,g),this.max=this.d+this.h*Math.SQRT2}const u1=Number.POSITIVE_INFINITY;function Jp(l,n){return n[1]!==u1?function(u,g,b){let S=0,t=0;switch(g=Math.abs(g),b=Math.abs(b),u){case"top-right":case"top-left":case"top":t=b-7;break;case"bottom-right":case"bottom-left":case"bottom":t=7-b}switch(u){case"top-right":case"bottom-right":case"right":S=-g;break;case"top-left":case"bottom-left":case"left":S=g}return[S,t]}(l,n[0],n[1]):function(u,g){let b=0,S=0;g<0&&(g=0);const t=g/Math.sqrt(2);switch(u){case"top-right":case"top-left":S=t-7;break;case"bottom-right":case"bottom-left":S=7-t;break;case"bottom":S=7-g;break;case"top":S=g-7}switch(u){case"top-right":case"bottom-right":b=-t;break;case"top-left":case"bottom-left":b=t;break;case"left":b=g;break;case"right":b=-g}return[b,S]}(l,n[0])}function bo(l){switch(l){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function ef(l,n,u,g,b,S,t,a,p,v,C){let E=S.textMaxSize.evaluate(n,{});E===void 0&&(E=t);const I=l.layers[0].layout,j=I.get("icon-offset").evaluate(n,{},C),z=bd(u.horizontal),X=t/24,ee=l.tilePixelRatio*X,ce=l.tilePixelRatio*E/24,ge=l.tilePixelRatio*a,me=l.tilePixelRatio*I.get("symbol-spacing"),Se=I.get("text-padding")*l.tilePixelRatio,Ae=function(We,At,wt,dn=1){const lr=We.get("icon-padding").evaluate(At,{},wt),xr=lr&&lr.values;return[xr[0]*dn,xr[1]*dn,xr[2]*dn,xr[3]*dn]}(I,n,C,l.tilePixelRatio),tt=I.get("text-max-angle")/180*Math.PI,we=I.get("text-rotation-alignment")!=="viewport"&&I.get("symbol-placement")!=="point",he=I.get("icon-rotation-alignment")==="map"&&I.get("symbol-placement")!=="point",_e=I.get("symbol-placement"),Oe=me/2,Ye=I.get("icon-text-fit");let at;g&&Ye!=="none"&&(l.allowVerticalPlacement&&u.vertical&&(at=o1(g,u.vertical,Ye,I.get("icon-text-fit-padding"),j,X)),z&&(g=o1(g,z,Ye,I.get("icon-text-fit-padding"),j,X)));const ot=(We,At)=>{At.x<0||At.x>=Ir||At.y<0||At.y>=Ir||function(wt,dn,lr,xr,Jr,Vs,Si,Zr,mi,Mi,Ni,is,qr,Ei,Ri,Ui,ss,os,Lr,gi,kn,xs,Li,Ai,So){const sa=wt.addToLineVertexArray(dn,lr);let oa,ic,Mo,Hs,as=0,sc=0,$h=0,j2=0,F0=-1,B0=-1;const oc={};let O2=vn.exports(""),$0=0,V0=0;if(Zr._unevaluatedLayout.getValue("text-radial-offset")===void 0?[$0,V0]=Zr.layout.get("text-offset").evaluate(kn,{},Ai).map(ls=>ls*Vn):($0=Zr.layout.get("text-radial-offset").evaluate(kn,{},Ai)*Vn,V0=u1),wt.allowVerticalPlacement&&xr.vertical){const ls=Zr.layout.get("text-rotate").evaluate(kn,{},Ai)+90;Mo=new pi(mi,dn,Mi,Ni,is,xr.vertical,qr,Ei,Ri,ls),Si&&(Hs=new pi(mi,dn,Mi,Ni,is,Si,ss,os,Ri,ls))}if(Jr){const ls=Zr.layout.get("icon-rotate").evaluate(kn,{}),Ga=Zr.layout.get("icon-text-fit")!=="none",Vh=c1(Jr,ls,Li,Ga),Hh=Si?c1(Si,ls,Li,Ga):void 0;ic=new pi(mi,dn,Mi,Ni,is,Jr,ss,os,!1,ls),as=4*Vh.length;const B2=wt.iconSizeData;let g1=null;B2.kind==="source"?(g1=[Bs*Zr.layout.get("icon-size").evaluate(kn,{})],g1[0]>Co&&ae(`${wt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):B2.kind==="composite"&&(g1=[Bs*xs.compositeIconSizes[0].evaluate(kn,{},Ai),Bs*xs.compositeIconSizes[1].evaluate(kn,{},Ai)],(g1[0]>Co||g1[1]>Co)&&ae(`${wt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),wt.addSymbols(wt.icon,Vh,g1,gi,Lr,kn,c.WritingMode.none,dn,sa.lineStartIndex,sa.lineLength,-1,Ai),F0=wt.icon.placedSymbolArray.length-1,Hh&&(sc=4*Hh.length,wt.addSymbols(wt.icon,Hh,g1,gi,Lr,kn,c.WritingMode.vertical,dn,sa.lineStartIndex,sa.lineLength,-1,Ai),B0=wt.icon.placedSymbolArray.length-1)}const z2=Object.keys(xr.horizontal);for(const ls of z2){const Ga=xr.horizontal[ls];if(!oa){O2=vn.exports(Ga.text);const Hh=Zr.layout.get("text-rotate").evaluate(kn,{},Ai);oa=new pi(mi,dn,Mi,Ni,is,Ga,qr,Ei,Ri,Hh)}const Vh=Ga.positionedLines.length===1;if($h+=qa(wt,dn,Ga,Vs,Zr,Ri,kn,Ui,sa,xr.vertical?c.WritingMode.horizontal:c.WritingMode.horizontalOnly,Vh?z2:[ls],oc,F0,xs,Ai),Vh)break}xr.vertical&&(j2+=qa(wt,dn,xr.vertical,Vs,Zr,Ri,kn,Ui,sa,c.WritingMode.vertical,["vertical"],oc,B0,xs,Ai));const f4=oa?oa.boxStartIndex:wt.collisionBoxArray.length,m4=oa?oa.boxEndIndex:wt.collisionBoxArray.length,g4=Mo?Mo.boxStartIndex:wt.collisionBoxArray.length,y4=Mo?Mo.boxEndIndex:wt.collisionBoxArray.length,v4=ic?ic.boxStartIndex:wt.collisionBoxArray.length,x4=ic?ic.boxEndIndex:wt.collisionBoxArray.length,_4=Hs?Hs.boxStartIndex:wt.collisionBoxArray.length,w4=Hs?Hs.boxEndIndex:wt.collisionBoxArray.length;let aa=-1;const uf=(ls,Ga)=>ls&&ls.circleDiameter?Math.max(ls.circleDiameter,Ga):Ga;aa=uf(oa,aa),aa=uf(Mo,aa),aa=uf(ic,aa),aa=uf(Hs,aa);const F2=aa>-1?1:0;F2&&(aa*=So/Vn),wt.glyphOffsetArray.length>=Jl.MAX_GLYPHS&&ae("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),kn.sortKey!==void 0&&wt.addToSortKeyRanges(wt.symbolInstances.length,kn.sortKey),wt.symbolInstances.emplaceBack(dn.x,dn.y,oc.right>=0?oc.right:-1,oc.center>=0?oc.center:-1,oc.left>=0?oc.left:-1,oc.vertical||-1,F0,B0,O2,f4,m4,g4,y4,v4,x4,_4,w4,Mi,$h,j2,as,sc,F2,0,qr,$0,V0,aa)}(l,At,We,u,g,b,at,l.layers[0],l.collisionBoxArray,n.index,n.sourceLayerIndex,l.index,ee,[Se,Se,Se,Se],we,p,ge,Ae,he,j,n,S,v,C,t)};if(_e==="line")for(const We of ra(n.geometry,0,0,Ir,Ir)){const At=Va(We,me,tt,u.vertical||z,g,24,ce,l.overscaling,Ir);for(const wt of At){const dn=z;dn&&Ql(l,dn.text,Oe,wt)||ot(We,wt)}}else if(_e==="line-center"){for(const We of n.geometry)if(We.length>1){const At=Rh(We,tt,u.vertical||z,g,24,ce);At&&ot(We,At)}}else if(n.type==="Polygon")for(const We of eu(n.geometry,0)){const At=Hi(We,16);ot(We[0],new Br(At.x,At.y,0))}else if(n.type==="LineString")for(const We of n.geometry)ot(We,new Br(We[0].x,We[0].y,0));else if(n.type==="Point")for(const We of n.geometry)for(const At of We)ot([At],new Br(At.x,At.y,0))}const Co=32640;function qa(l,n,u,g,b,S,t,a,p,v,C,E,I,j,z){const X=function(ge,me,Se,Ae,tt,we,he,_e){const Oe=Ae.layout.get("text-rotate").evaluate(we,{})*Math.PI/180,Ye=[];for(const at of me.positionedLines)for(const ot of at.positionedGlyphs){if(!ot.rect)continue;const We=ot.rect||{};let At=4,wt=!0,dn=1,lr=0;const xr=(tt||_e)&&ot.vertical,Jr=ot.metrics.advance*ot.scale/2;if(_e&&me.verticalizable){const Lr=(ot.scale-1)*Vn,gi=(Vn-ot.metrics.width*ot.scale)/2;lr=at.lineOffset/2-(ot.imageName?-gi:Lr)}if(ot.imageName){const Lr=he[ot.imageName];wt=Lr.sdf,dn=Lr.pixelRatio,At=1/dn}const Vs=tt?[ot.x+Jr,ot.y]:[0,0];let Si=tt?[0,0]:[ot.x+Jr+Se[0],ot.y+Se[1]-lr],Zr=[0,0];xr&&(Zr=Si,Si=[0,0]);const mi=(ot.metrics.left-At)*ot.scale-Jr+Si[0],Mi=(-ot.metrics.top-At)*ot.scale+Si[1],Ni=mi+We.w*ot.scale/dn,is=Mi+We.h*ot.scale/dn,qr=new Pe(mi,Mi),Ei=new Pe(Ni,Mi),Ri=new Pe(mi,is),Ui=new Pe(Ni,is);if(xr){const Lr=new Pe(-Jr,Jr-i1),gi=-Math.PI/2,kn=12-Jr,xs=new Pe(22-kn,-(ot.imageName?kn:0)),Li=new Pe(...Zr);qr._rotateAround(gi,Lr)._add(xs)._add(Li),Ei._rotateAround(gi,Lr)._add(xs)._add(Li),Ri._rotateAround(gi,Lr)._add(xs)._add(Li),Ui._rotateAround(gi,Lr)._add(xs)._add(Li)}if(Oe){const Lr=Math.sin(Oe),gi=Math.cos(Oe),kn=[gi,-Lr,Lr,gi];qr._matMult(kn),Ei._matMult(kn),Ri._matMult(kn),Ui._matMult(kn)}const ss=new Pe(0,0),os=new Pe(0,0);Ye.push({tl:qr,tr:Ei,bl:Ri,br:Ui,tex:We,writingMode:me.writingMode,glyphOffset:Vs,sectionIndex:ot.sectionIndex,isSDF:wt,pixelOffsetTL:ss,pixelOffsetBR:os,minFontScaleX:0,minFontScaleY:0})}return Ye}(0,u,a,b,S,t,g,l.allowVerticalPlacement),ee=l.textSizeData;let ce=null;ee.kind==="source"?(ce=[Bs*b.layout.get("text-size").evaluate(t,{})],ce[0]>Co&&ae(`${l.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):ee.kind==="composite"&&(ce=[Bs*j.compositeTextSizes[0].evaluate(t,{},z),Bs*j.compositeTextSizes[1].evaluate(t,{},z)],(ce[0]>Co||ce[1]>Co)&&ae(`${l.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),l.addSymbols(l.text,X,ce,a,S,t,v,n,p.lineStartIndex,p.lineLength,I,z);for(const ge of C)E[ge]=l.text.placedSymbolArray.length-1;return 4*X.length}function bd(l){for(const n in l)return l[n];return null}function Ql(l,n,u,g){const b=l.compareText;if(n in b){const S=b[n];for(let t=S.length-1;t>=0;t--)if(g.dist(S[t])<u)return!0}else b[n]=[];return b[n].push(g),!1}const tf=vo.VectorTileFeature.types,nf=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function uu(l,n,u,g,b,S,t,a,p,v,C,E,I){const j=a?Math.min(Co,Math.round(a[0])):0,z=a?Math.min(Co,Math.round(a[1])):0;l.emplaceBack(n,u,Math.round(32*g),Math.round(32*b),S,t,(j<<1)+(p?1:0),z,16*v,16*C,256*E,256*I)}function du(l,n,u){l.emplaceBack(n.x,n.y,u),l.emplaceBack(n.x,n.y,u),l.emplaceBack(n.x,n.y,u),l.emplaceBack(n.x,n.y,u)}function A0(l){for(const n of l.sections)if(X1(n.text))return!0;return!1}class Ah{constructor(n){this.layoutVertexArray=new li,this.indexArray=new hr,this.programConfigurations=n,this.segments=new In,this.dynamicLayoutVertexArray=new Dr,this.opacityVertexArray=new br,this.placedSymbolArray=new rt}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,u,g,b){this.isEmpty()||(g&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,ta.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,R0.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,nf,!0),this.opacityVertexBuffer.itemSize=1),(g||b)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Nt("SymbolBuffers",Ah);class Cd{constructor(n,u,g){this.layoutVertexArray=new n,this.layoutAttributes=u,this.indexArray=new g,this.segments=new In,this.collisionVertexArray=new _i}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,Hp.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Nt("CollisionBuffers",Cd);class Jl{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(t=>t.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=qc([]),this.placementViewportMatrix=qc([]);const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=cu(this.zoom,u["text-size"]),this.iconSizeData=cu(this.zoom,u["icon-size"]);const g=this.layers[0].layout,b=g.get("symbol-sort-key"),S=g.get("symbol-z-order");this.canOverlap=Mr(g,"text-overlap","text-allow-overlap")!=="never"||Mr(g,"icon-overlap","icon-allow-overlap")!=="never"||g.get("text-ignore-placement")||g.get("icon-ignore-placement"),this.sortFeaturesByKey=S!=="viewport-y"&&!b.isConstant(),this.sortFeaturesByY=(S==="viewport-y"||S==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,g.get("symbol-placement")==="point"&&(this.writingModes=g.get("text-writing-mode").map(t=>c.WritingMode[t])),this.stateDependentLayerIds=this.layers.filter(t=>t.isStateDependent()).map(t=>t.id),this.sourceID=n.sourceID}createArrays(){this.text=new Ah(new Xo(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new Ah(new Xo(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new It,this.lineVertexArray=new St,this.symbolInstances=new Qe}calculateGlyphDependencies(n,u,g,b,S){for(let t=0;t<n.length;t++)if(u[n.charCodeAt(t)]=!0,(g||b)&&S){const a=na[n.charAt(t)];a&&(u[a.charCodeAt(0)]=!0)}}populate(n,u,g){const b=this.layers[0],S=b.layout,t=S.get("text-font"),a=S.get("text-field"),p=S.get("icon-image"),v=(a.value.kind!=="constant"||a.value.value instanceof fe&&!a.value.value.isEmpty()||a.value.value.toString().length>0)&&(t.value.kind!=="constant"||t.value.value.length>0),C=p.value.kind!=="constant"||!!p.value.value||Object.keys(p.parameters).length>0,E=S.get("symbol-sort-key");if(this.features=[],!v&&!C)return;const I=u.iconDependencies,j=u.glyphDependencies,z=u.availableImages,X=new nr(this.zoom);for(const{feature:ee,id:ce,index:ge,sourceLayerIndex:me}of n){const Se=b._featureFilter.needGeometry,Ae=Ko(ee,Se);if(!b._featureFilter.filter(X,Ae,g))continue;let tt,we;if(Se||(Ae.geometry=ts(ee)),v){const _e=b.getValueAndResolveTokens("text-field",Ae,g,z),Oe=fe.factory(_e);A0(Oe)&&(this.hasRTLText=!0),(!this.hasRTLText||Bc()==="unavailable"||this.hasRTLText&&An.isParsed())&&(tt=Zp(Oe,b,Ae))}if(C){const _e=b.getValueAndResolveTokens("icon-image",Ae,g,z);we=_e instanceof pe?_e:pe.fromString(_e)}if(!tt&&!we)continue;const he=this.sortFeaturesByKey?E.evaluate(Ae,{},g):void 0;if(this.features.push({id:ce,text:tt,icon:we,index:ge,sourceLayerIndex:me,geometry:Ae.geometry,properties:ee.properties,type:tf[ee.type],sortKey:he}),we&&(I[we.name]=!0),tt){const _e=t.evaluate(Ae,{},g).join(","),Oe=S.get("text-rotation-alignment")!=="viewport"&&S.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(c.WritingMode.vertical)>=0;for(const Ye of tt.sections)if(Ye.image)I[Ye.image.name]=!0;else{const at=to(tt.toString()),ot=Ye.fontStack||_e,We=j[ot]=j[ot]||{};this.calculateGlyphDependencies(Ye.text,We,Oe,this.allowVerticalPlacement,at)}}}S.get("symbol-placement")==="line"&&(this.features=function(ee){const ce={},ge={},me=[];let Se=0;function Ae(_e){me.push(ee[_e]),Se++}function tt(_e,Oe,Ye){const at=ge[_e];return delete ge[_e],ge[Oe]=at,me[at].geometry[0].pop(),me[at].geometry[0]=me[at].geometry[0].concat(Ye[0]),at}function we(_e,Oe,Ye){const at=ce[Oe];return delete ce[Oe],ce[_e]=at,me[at].geometry[0].shift(),me[at].geometry[0]=Ye[0].concat(me[at].geometry[0]),at}function he(_e,Oe,Ye){const at=Ye?Oe[0][Oe[0].length-1]:Oe[0][0];return`${_e}:${at.x}:${at.y}`}for(let _e=0;_e<ee.length;_e++){const Oe=ee[_e],Ye=Oe.geometry,at=Oe.text?Oe.text.toString():null;if(!at){Ae(_e);continue}const ot=he(at,Ye),We=he(at,Ye,!0);if(ot in ge&&We in ce&&ge[ot]!==ce[We]){const At=we(ot,We,Ye),wt=tt(ot,We,me[At].geometry);delete ce[ot],delete ge[We],ge[he(at,me[wt].geometry,!0)]=wt,me[At].geometry=null}else ot in ge?tt(ot,We,Ye):We in ce?we(ot,We,Ye):(Ae(_e),ce[ot]=Se-1,ge[We]=Se-1)}return me.filter(_e=>_e.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ee,ce)=>ee.sortKey-ce.sortKey)}update(n,u,g){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,u,this.layers,g),this.icon.programConfigurations.updatePaintArrays(n,u,this.layers,g))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,u){const g=this.lineVertexArray.length;if(n.segment!==void 0){let b=n.dist(u[n.segment+1]),S=n.dist(u[n.segment]);const t={};for(let a=n.segment+1;a<u.length;a++)t[a]={x:u[a].x,y:u[a].y,tileUnitDistanceFromAnchor:b},a<u.length-1&&(b+=u[a+1].dist(u[a]));for(let a=n.segment||0;a>=0;a--)t[a]={x:u[a].x,y:u[a].y,tileUnitDistanceFromAnchor:S},a>0&&(S+=u[a-1].dist(u[a]));for(let a=0;a<u.length;a++){const p=t[a];this.lineVertexArray.emplaceBack(p.x,p.y,p.tileUnitDistanceFromAnchor)}}return{lineStartIndex:g,lineLength:this.lineVertexArray.length-g}}addSymbols(n,u,g,b,S,t,a,p,v,C,E,I){const j=n.indexArray,z=n.layoutVertexArray,X=n.segments.prepareSegment(4*u.length,z,j,this.canOverlap?t.sortKey:void 0),ee=this.glyphOffsetArray.length,ce=X.vertexLength,ge=this.allowVerticalPlacement&&a===c.WritingMode.vertical?Math.PI/2:0,me=t.text&&t.text.sections;for(let Se=0;Se<u.length;Se++){const{tl:Ae,tr:tt,bl:we,br:he,tex:_e,pixelOffsetTL:Oe,pixelOffsetBR:Ye,minFontScaleX:at,minFontScaleY:ot,glyphOffset:We,isSDF:At,sectionIndex:wt}=u[Se],dn=X.vertexLength,lr=We[1];uu(z,p.x,p.y,Ae.x,lr+Ae.y,_e.x,_e.y,g,At,Oe.x,Oe.y,at,ot),uu(z,p.x,p.y,tt.x,lr+tt.y,_e.x+_e.w,_e.y,g,At,Ye.x,Oe.y,at,ot),uu(z,p.x,p.y,we.x,lr+we.y,_e.x,_e.y+_e.h,g,At,Oe.x,Ye.y,at,ot),uu(z,p.x,p.y,he.x,lr+he.y,_e.x+_e.w,_e.y+_e.h,g,At,Ye.x,Ye.y,at,ot),du(n.dynamicLayoutVertexArray,p,ge),j.emplaceBack(dn,dn+1,dn+2),j.emplaceBack(dn+1,dn+2,dn+3),X.vertexLength+=4,X.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(We[0]),Se!==u.length-1&&wt===u[Se+1].sectionIndex||n.programConfigurations.populatePaintArrays(z.length,t,t.index,{},I,me&&me[wt])}n.placedSymbolArray.emplaceBack(p.x,p.y,ee,this.glyphOffsetArray.length-ee,ce,v,C,p.segment,g?g[0]:0,g?g[1]:0,b[0],b[1],a,0,!1,0,E)}_addCollisionDebugVertex(n,u,g,b,S,t){return u.emplaceBack(0,0),n.emplaceBack(g.x,g.y,b,S,Math.round(t.x),Math.round(t.y))}addCollisionDebugVertices(n,u,g,b,S,t,a){const p=S.segments.prepareSegment(4,S.layoutVertexArray,S.indexArray),v=p.vertexLength,C=S.layoutVertexArray,E=S.collisionVertexArray,I=a.anchorX,j=a.anchorY;this._addCollisionDebugVertex(C,E,t,I,j,new Pe(n,u)),this._addCollisionDebugVertex(C,E,t,I,j,new Pe(g,u)),this._addCollisionDebugVertex(C,E,t,I,j,new Pe(g,b)),this._addCollisionDebugVertex(C,E,t,I,j,new Pe(n,b)),p.vertexLength+=4;const z=S.indexArray;z.emplaceBack(v,v+1),z.emplaceBack(v+1,v+2),z.emplaceBack(v+2,v+3),z.emplaceBack(v+3,v),p.primitiveLength+=4}addDebugCollisionBoxes(n,u,g,b){for(let S=n;S<u;S++){const t=this.collisionBoxArray.get(S);this.addCollisionDebugVertices(t.x1,t.y1,t.x2,t.y2,b?this.textCollisionBox:this.iconCollisionBox,t.anchorPoint,g)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Cd(Yr,gd.members,Xr),this.iconCollisionBox=new Cd(Yr,gd.members,Xr);for(let n=0;n<this.symbolInstances.length;n++){const u=this.symbolInstances.get(n);this.addDebugCollisionBoxes(u.textBoxStartIndex,u.textBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.iconBoxStartIndex,u.iconBoxEndIndex,u,!1),this.addDebugCollisionBoxes(u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u,!1)}}_deserializeCollisionBoxesForSymbol(n,u,g,b,S,t,a,p,v){const C={};for(let E=u;E<g;E++){const I=n.get(E);C.textBox={x1:I.x1,y1:I.y1,x2:I.x2,y2:I.y2,anchorPointX:I.anchorPointX,anchorPointY:I.anchorPointY},C.textFeatureIndex=I.featureIndex;break}for(let E=b;E<S;E++){const I=n.get(E);C.verticalTextBox={x1:I.x1,y1:I.y1,x2:I.x2,y2:I.y2,anchorPointX:I.anchorPointX,anchorPointY:I.anchorPointY},C.verticalTextFeatureIndex=I.featureIndex;break}for(let E=t;E<a;E++){const I=n.get(E);C.iconBox={x1:I.x1,y1:I.y1,x2:I.x2,y2:I.y2,anchorPointX:I.anchorPointX,anchorPointY:I.anchorPointY},C.iconFeatureIndex=I.featureIndex;break}for(let E=p;E<v;E++){const I=n.get(E);C.verticalIconBox={x1:I.x1,y1:I.y1,x2:I.x2,y2:I.y2,anchorPointX:I.anchorPointX,anchorPointY:I.anchorPointY},C.verticalIconFeatureIndex=I.featureIndex;break}return C}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const g=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,g.textBoxStartIndex,g.textBoxEndIndex,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g.iconBoxStartIndex,g.iconBoxEndIndex,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,u){const g=n.placedSymbolArray.get(u),b=g.vertexStartIndex+4*g.numGlyphs;for(let S=g.vertexStartIndex;S<b;S+=4)n.indexArray.emplaceBack(S,S+1,S+2),n.indexArray.emplaceBack(S+1,S+2,S+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(n),g=Math.cos(n),b=[],S=[],t=[];for(let a=0;a<this.symbolInstances.length;++a){t.push(a);const p=this.symbolInstances.get(a);b.push(0|Math.round(u*p.anchorX+g*p.anchorY)),S.push(p.featureIndex)}return t.sort((a,p)=>b[a]-b[p]||S[p]-S[a]),t}addToSortKeyRanges(n,u){const g=this.sortKeyRanges[this.sortKeyRanges.length-1];g&&g.sortKey===u?g.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const g=this.symbolInstances.get(u);this.featureSortOrder.push(g.featureIndex),[g.rightJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.leftJustifiedTextSymbolIndex].forEach((b,S,t)=>{b>=0&&t.indexOf(b)===S&&this.addIndicesForPlacedSymbol(this.text,b)}),g.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,g.verticalPlacedTextSymbolIndex),g.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,g.placedIconSymbolIndex),g.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,g.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Nt("SymbolBucket",Jl,{omit:["layers","collisionBoxArray","features","compareText"]}),Jl.MAX_GLYPHS=65535,Jl.addDynamicAttributes=du;const ec=new Pr({"symbol-placement":new Zt(Le.layout_symbol["symbol-placement"]),"symbol-spacing":new Zt(Le.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Zt(Le.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Jt(Le.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Zt(Le.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Zt(Le.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Zt(Le.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Zt(Le.layout_symbol["icon-ignore-placement"]),"icon-optional":new Zt(Le.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Zt(Le.layout_symbol["icon-rotation-alignment"]),"icon-size":new Jt(Le.layout_symbol["icon-size"]),"icon-text-fit":new Zt(Le.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Zt(Le.layout_symbol["icon-text-fit-padding"]),"icon-image":new Jt(Le.layout_symbol["icon-image"]),"icon-rotate":new Jt(Le.layout_symbol["icon-rotate"]),"icon-padding":new Jt(Le.layout_symbol["icon-padding"]),"icon-keep-upright":new Zt(Le.layout_symbol["icon-keep-upright"]),"icon-offset":new Jt(Le.layout_symbol["icon-offset"]),"icon-anchor":new Jt(Le.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Zt(Le.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Zt(Le.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Zt(Le.layout_symbol["text-rotation-alignment"]),"text-field":new Jt(Le.layout_symbol["text-field"]),"text-font":new Jt(Le.layout_symbol["text-font"]),"text-size":new Jt(Le.layout_symbol["text-size"]),"text-max-width":new Jt(Le.layout_symbol["text-max-width"]),"text-line-height":new Zt(Le.layout_symbol["text-line-height"]),"text-letter-spacing":new Jt(Le.layout_symbol["text-letter-spacing"]),"text-justify":new Jt(Le.layout_symbol["text-justify"]),"text-radial-offset":new Jt(Le.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Zt(Le.layout_symbol["text-variable-anchor"]),"text-anchor":new Jt(Le.layout_symbol["text-anchor"]),"text-max-angle":new Zt(Le.layout_symbol["text-max-angle"]),"text-writing-mode":new Zt(Le.layout_symbol["text-writing-mode"]),"text-rotate":new Jt(Le.layout_symbol["text-rotate"]),"text-padding":new Zt(Le.layout_symbol["text-padding"]),"text-keep-upright":new Zt(Le.layout_symbol["text-keep-upright"]),"text-transform":new Jt(Le.layout_symbol["text-transform"]),"text-offset":new Jt(Le.layout_symbol["text-offset"]),"text-allow-overlap":new Zt(Le.layout_symbol["text-allow-overlap"]),"text-overlap":new Zt(Le.layout_symbol["text-overlap"]),"text-ignore-placement":new Zt(Le.layout_symbol["text-ignore-placement"]),"text-optional":new Zt(Le.layout_symbol["text-optional"])});var jh={paint:new Pr({"icon-opacity":new Jt(Le.paint_symbol["icon-opacity"]),"icon-color":new Jt(Le.paint_symbol["icon-color"]),"icon-halo-color":new Jt(Le.paint_symbol["icon-halo-color"]),"icon-halo-width":new Jt(Le.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Jt(Le.paint_symbol["icon-halo-blur"]),"icon-translate":new Zt(Le.paint_symbol["icon-translate"]),"icon-translate-anchor":new Zt(Le.paint_symbol["icon-translate-anchor"]),"text-opacity":new Jt(Le.paint_symbol["text-opacity"]),"text-color":new Jt(Le.paint_symbol["text-color"],{runtimeType:mn,getOverride:l=>l.textColor,hasOverride:l=>!!l.textColor}),"text-halo-color":new Jt(Le.paint_symbol["text-halo-color"]),"text-halo-width":new Jt(Le.paint_symbol["text-halo-width"]),"text-halo-blur":new Jt(Le.paint_symbol["text-halo-blur"]),"text-translate":new Zt(Le.paint_symbol["text-translate"]),"text-translate-anchor":new Zt(Le.paint_symbol["text-translate-anchor"])}),layout:ec};class tc{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:Ot,this.defaultValue=n}evaluate(n){if(n.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(n.formattedSection))return u.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Nt("FormatSectionOverride",tc,{omit:["defaultValue"]});class d1 extends ai{constructor(n){super(n,jh)}recalculate(n,u){if(super.recalculate(n,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const g=this.layout.get("text-writing-mode");if(g){const b=[];for(const S of g)b.indexOf(S)<0&&b.push(S);this.layout._values["text-writing-mode"]=b}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,u,g,b){const S=this.layout.get(n).evaluate(u,{},g,b),t=this._unevaluatedLayout._values[n];return t.isDataDriven()||Sa(t.value)||!S?S:function(a,p){return p.replace(/{([^{}]+)}/g,(v,C)=>C in a?String(a[C]):"")}(u.properties,S)}createBucket(n){return new Jl(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of jh.paint.overridableProperties){if(!d1.hasPaintOverride(this.layout,n))continue;const u=this.paint.get(n),g=new tc(u),b=new Ou(g,u.property.specification);let S=null;S=u.value.kind==="constant"||u.value.kind==="source"?new Lc("source",b):new Sl("composite",b,u.value.zoomStops),this.paint._values[n]=new xi(u.property,S,u.parameters)}}_handleOverridablePaintPropertyUpdate(n,u,g){return!(!this.layout||u.isDataDriven()||g.isDataDriven())&&d1.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,u){const g=n.get("text-field"),b=jh.paint.properties[u];let S=!1;const t=a=>{for(const p of a)if(b.overrides&&b.overrides.hasOverride(p))return void(S=!0)};if(g.value.kind==="constant"&&g.value.value instanceof fe)t(g.value.value.sections);else if(g.value.kind==="source"){const a=v=>{S||(v instanceof _t&&st(v.value)===He?t(v.value.sections):v instanceof wa?t(v.sections):v.eachChild(a))},p=g.value;p._styleExpression&&a(p._styleExpression.expression)}return S}}function Mr(l,n,u){let g="never";const b=l.get(n);return b?g=b:l.get(u)&&(g="always"),g}var j0={paint:new Pr({"background-color":new Zt(Le.paint_background["background-color"]),"background-pattern":new so(Le.paint_background["background-pattern"]),"background-opacity":new Zt(Le.paint_background["background-opacity"])})},rf={paint:new Pr({"raster-opacity":new Zt(Le.paint_raster["raster-opacity"]),"raster-hue-rotate":new Zt(Le.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Zt(Le.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Zt(Le.paint_raster["raster-brightness-max"]),"raster-saturation":new Zt(Le.paint_raster["raster-saturation"]),"raster-contrast":new Zt(Le.paint_raster["raster-contrast"]),"raster-resampling":new Zt(Le.paint_raster["raster-resampling"]),"raster-fade-duration":new Zt(Le.paint_raster["raster-fade-duration"])})};class O0 extends ai{constructor(n){super(n,{}),this.onAdd=u=>{this.implementation.onAdd&&this.implementation.onAdd(u,u.painter.context.gl)},this.onRemove=u=>{this.implementation.onRemove&&this.implementation.onRemove(u,u.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const z0={circle:class extends ai{constructor(l){super(l,Zc)}createBucket(l){return new js(l)}queryRadius(l){const n=l;return ea("circle-radius",this,n)+ea("circle-stroke-width",this,n)+ja(this.paint.get("circle-translate"))}queryIntersectsFeature(l,n,u,g,b,S,t,a){const p=go(l,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),S.angle,t),v=this.paint.get("circle-radius").evaluate(n,u)+this.paint.get("circle-stroke-width").evaluate(n,u),C=this.paint.get("circle-pitch-alignment")==="map",E=C?p:function(j,z){return j.map(X=>Kr(X,z))}(p,a),I=C?v*t:v;for(const j of g)for(const z of j){const X=C?z:Kr(z,a);let ee=I;const ce=vr([],[z.x,z.y,0,1],a);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ee*=ce[3]/S.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ee*=S.cameraToCenterDistance/ce[3]),oh(E,X,ee))return!0}return!1}},heatmap:class extends ai{constructor(l){super(l,Yu),this._updateColorRamp()}createBucket(l){return new Gu(l)}_handleSpecialPaintPropertyUpdate(l){l==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=ad({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends ai{constructor(l){super(l,yo)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends ai{constructor(l){super(l,ud)}recalculate(l,n){super.recalculate(l,n);const u=this.paint._values["fill-outline-color"];u.value.kind==="constant"&&u.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(l){return new ns(l)}queryRadius(){return ja(this.paint.get("fill-translate"))}queryIntersectsFeature(l,n,u,g,b,S,t){return ah(go(l,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),S.angle,t),g)}isTileClipped(){return!0}},"fill-extrusion":class extends ai{constructor(l){super(l,bh)}createBucket(l){return new pd(l)}queryRadius(){return ja(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(l,n,u,g,b,S,t,a){const p=go(l,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),S.angle,t),v=this.paint.get("fill-extrusion-height").evaluate(n,u),C=this.paint.get("fill-extrusion-base").evaluate(n,u),E=function(j,z,X,ee){const ce=[];for(const ge of j){const me=[ge.x,ge.y,0,1];vr(me,me,z),ce.push(new Pe(me[0]/me[3],me[1]/me[3]))}return ce}(p,a),I=function(j,z,X,ee){const ce=[],ge=[],me=ee[8]*z,Se=ee[9]*z,Ae=ee[10]*z,tt=ee[11]*z,we=ee[8]*X,he=ee[9]*X,_e=ee[10]*X,Oe=ee[11]*X;for(const Ye of j){const at=[],ot=[];for(const We of Ye){const At=We.x,wt=We.y,dn=ee[0]*At+ee[4]*wt+ee[12],lr=ee[1]*At+ee[5]*wt+ee[13],xr=ee[2]*At+ee[6]*wt+ee[14],Jr=ee[3]*At+ee[7]*wt+ee[15],Vs=xr+Ae,Si=Jr+tt,Zr=dn+we,mi=lr+he,Mi=xr+_e,Ni=Jr+Oe,is=new Pe((dn+me)/Si,(lr+Se)/Si);is.z=Vs/Si,at.push(is);const qr=new Pe(Zr/Ni,mi/Ni);qr.z=Mi/Ni,ot.push(qr)}ce.push(at),ge.push(ot)}return[ce,ge]}(g,C,v,a);return function(j,z,X){let ee=1/0;ah(X,z)&&(ee=fd(X,z[0]));for(let ce=0;ce<z.length;ce++){const ge=z[ce],me=j[ce];for(let Se=0;Se<ge.length-1;Se++){const Ae=ge[Se],tt=[Ae,ge[Se+1],me[Se+1],me[Se],Ae];Qo(X,tt)&&(ee=Math.min(ee,fd(X,tt)))}}return ee!==1/0&&ee}(I[0],I[1],E)}},line:class extends ai{constructor(l){super(l,md),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(l){l==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof pa,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(l,n){super.recalculate(l,n),this.paint._values["line-floorwidth"]=Lh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)}createBucket(l){return new Eh(l)}queryRadius(l){const n=l,u=n1(ea("line-width",this,n),ea("line-gap-width",this,n)),g=ea("line-offset",this,n);return u/2+Math.abs(g)+ja(this.paint.get("line-translate"))}queryIntersectsFeature(l,n,u,g,b,S,t){const a=go(l,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),S.angle,t),p=t/2*n1(this.paint.get("line-width").evaluate(n,u),this.paint.get("line-gap-width").evaluate(n,u)),v=this.paint.get("line-offset").evaluate(n,u);return v&&(g=function(C,E){const I=[];for(let j=0;j<C.length;j++){const z=C[j],X=[];for(let ee=0;ee<z.length;ee++){const ce=z[ee-1],ge=z[ee],me=z[ee+1],Se=ee===0?new Pe(0,0):ge.sub(ce)._unit()._perp(),Ae=ee===z.length-1?new Pe(0,0):me.sub(ge)._unit()._perp(),tt=Se._add(Ae)._unit(),we=tt.x*Ae.x+tt.y*Ae.y;we!==0&&tt._mult(1/we),X.push(tt._mult(E)._add(ge))}I.push(X)}return I}(g,v*t)),function(C,E,I){for(let j=0;j<E.length;j++){const z=E[j];if(C.length>=3){for(let X=0;X<z.length;X++)if(fo(C,z[X]))return!0}if(Jo(C,z,I))return!0}return!1}(a,g,p)}isTileClipped(){return!0}},symbol:d1,background:class extends ai{constructor(l){super(l,j0)}},raster:class extends ai{constructor(l){super(l,rf)}}};class sf{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Oh=63710088e-1;class Er{constructor(n,u){if(isNaN(n)||isNaN(u))throw new Error(`Invalid LngLat object: (${n}, ${u})`);if(this.lng=+n,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Er($(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const u=Math.PI/180,g=this.lat*u,b=n.lat*u,S=Math.sin(g)*Math.sin(b)+Math.cos(g)*Math.cos(b)*Math.cos((n.lng-this.lng)*u);return Oh*Math.acos(Math.min(S,1))}toBounds(n=0){const u=360*n/40075017,g=u/Math.cos(Math.PI/180*this.lat);return new fi(new Er(this.lng-g,this.lat-u),new Er(this.lng+g,this.lat+u))}static convert(n){if(n instanceof Er)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Er(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Er(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class fi{constructor(n,u){n&&(u?this.setSouthWest(n).setNorthEast(u):n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1]))}setNorthEast(n){return this._ne=n instanceof Er?new Er(n.lng,n.lat):Er.convert(n),this}setSouthWest(n){return this._sw=n instanceof Er?new Er(n.lng,n.lat):Er.convert(n),this}extend(n){const u=this._sw,g=this._ne;let b,S;if(n instanceof Er)b=n,S=n;else{if(!(n instanceof fi))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(fi.convert(n)):this.extend(Er.convert(n)):this;if(b=n._sw,S=n._ne,!b||!S)return this}return u||g?(u.lng=Math.min(b.lng,u.lng),u.lat=Math.min(b.lat,u.lat),g.lng=Math.max(S.lng,g.lng),g.lat=Math.max(S.lat,g.lat)):(this._sw=new Er(b.lng,b.lat),this._ne=new Er(S.lng,S.lat)),this}getCenter(){return new Er((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Er(this.getWest(),this.getNorth())}getSouthEast(){return new Er(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:u,lat:g}=Er.convert(n);let b=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(b=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=g&&g<=this._ne.lat&&b}static convert(n){return n instanceof fi?n:n&&new fi(n)}}const Sd=2*Math.PI*Oh;function of(l){return Sd*Math.cos(l*Math.PI/180)}function ia(l){return(180+l)/360}function h1(l){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l*Math.PI/360)))/360}function Wa(l,n){return l/of(n)}function hu(l){return 360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90}class pu{constructor(n,u,g=0){this.x=+n,this.y=+u,this.z=+g}static fromLngLat(n,u=0){const g=Er.convert(n);return new pu(ia(g.lng),h1(g.lat),Wa(u,g.lat))}toLngLat(){return new Er(360*this.x-180,hu(this.y))}toAltitude(){return this.z*of(hu(this.y))}meterInMercatorCoordinateUnits(){return 1/Sd*(n=hu(this.y),1/Math.cos(n*Math.PI/180));var n}}function Md(l,n,u){var g=2*Math.PI*6378137/256/Math.pow(2,u);return[l*g-2*Math.PI*6378137/2,n*g-2*Math.PI*6378137/2]}class zh{constructor(n,u,g){if(n<0||n>25||g<0||g>=Math.pow(2,n)||u<0||u>=Math.pow(2,n))throw new Error(`x=${u}, y=${g}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=u,this.y=g,this.key=fu(0,n,n,u,g)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,u,g){const b=(t=this.y,a=this.z,p=Md(256*(S=this.x),256*(t=Math.pow(2,a)-t-1),a),v=Md(256*(S+1),256*(t+1),a),p[0]+","+p[1]+","+v[0]+","+v[1]);var S,t,a,p,v;const C=function(E,I,j){let z,X="";for(let ee=E;ee>0;ee--)z=1<<ee-1,X+=(I&z?1:0)+(j&z?2:0);return X}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(g==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,u>1?"@2x":"").replace(/{quadkey}/g,C).replace(/{bbox-epsg-3857}/g,b)}isChildOf(n){const u=this.z-n.z;return u>0&&n.x===this.x>>u&&n.y===this.y>>u}getTilePoint(n){const u=Math.pow(2,this.z);return new Pe((n.x*u-this.x)*Ir,(n.y*u-this.y)*Ir)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Ed{constructor(n,u){this.wrap=n,this.canonical=u,this.key=fu(n,u.z,u.z,u.x,u.y)}}class rs{constructor(n,u,g,b,S){if(n<g)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${g}`);this.overscaledZ=n,this.wrap=u,this.canonical=new zh(g,+b,+S),this.key=fu(u,n,g,b,S)}clone(){return new rs(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const u=this.canonical.z-n;return n>this.canonical.z?new rs(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new rs(n,this.wrap,n,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(n,u){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const g=this.canonical.z-n;return n>this.canonical.z?fu(this.wrap*+u,n,this.canonical.z,this.canonical.x,this.canonical.y):fu(this.wrap*+u,n,n,this.canonical.x>>g,this.canonical.y>>g)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const u=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>u&&n.canonical.y===this.canonical.y>>u}children(n){if(this.overscaledZ>=n)return[new rs(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,g=2*this.canonical.x,b=2*this.canonical.y;return[new rs(u,this.wrap,u,g,b),new rs(u,this.wrap,u,g+1,b),new rs(u,this.wrap,u,g,b+1),new rs(u,this.wrap,u,g+1,b+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new rs(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new rs(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Ed(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new pu(n.x-this.wrap,n.y))}}function fu(l,n,u,g,b){(l*=2)<0&&(l=-1*l-1);const S=1<<u;return(S*S*l+S*b+g).toString(36)+u.toString(36)+n.toString(36)}Nt("CanonicalTileID",zh),Nt("OverscaledTileID",rs,{omit:["posMatrix"]});class Fh{constructor(n,u,g){if(this.uid=n,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(g&&g!=="mapbox"&&g!=="terrarium")return void ae(`"${g}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=u.height;const b=this.dim=u.height-2;this.data=new Uint32Array(u.data.buffer),this.encoding=g||"mapbox";for(let S=0;S<b;S++)this.data[this._idx(-1,S)]=this.data[this._idx(0,S)],this.data[this._idx(b,S)]=this.data[this._idx(b-1,S)],this.data[this._idx(S,-1)]=this.data[this._idx(S,0)],this.data[this._idx(S,b)]=this.data[this._idx(S,b-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(b,-1)]=this.data[this._idx(b-1,0)],this.data[this._idx(-1,b)]=this.data[this._idx(0,b-1)],this.data[this._idx(b,b)]=this.data[this._idx(b-1,b-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let S=0;S<b;S++)for(let t=0;t<b;t++){const a=this.get(S,t);a>this.max&&(this.max=a),a<this.min&&(this.min=a)}}get(n,u){const g=new Uint8Array(this.data.buffer),b=4*this._idx(n,u);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(g[b],g[b+1],g[b+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(n,u){if(n<-1||n>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(n+1)}_unpackMapbox(n,u,g){return(256*n*256+256*u+g)/10-1e4}_unpackTerrarium(n,u,g){return 256*n+u+g/256-32768}getPixels(){return new Di({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,u,g){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let b=u*this.dim,S=u*this.dim+this.dim,t=g*this.dim,a=g*this.dim+this.dim;switch(u){case-1:b=S-1;break;case 1:S=b+1}switch(g){case-1:t=a-1;break;case 1:a=t+1}const p=-u*this.dim,v=-g*this.dim;for(let C=t;C<a;C++)for(let E=b;E<S;E++)this.data[this._idx(E,C)]=n.data[this._idx(E+p,C+v)]}}Nt("DEMData",Fh);class p1{constructor(n){this._stringToNumber={},this._numberToString=[];for(let u=0;u<n.length;u++){const g=n[u];this._stringToNumber[g]=u,this._numberToString[u]=g}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class f1{constructor(n,u,g,b,S){this.type="Feature",this._vectorTileFeature=n,n._z=u,n._x=g,n._y=b,this.properties=n.properties,this.id=S}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const u in this)u!=="_geometry"&&u!=="_vectorTileFeature"&&(n[u]=this[u]);return n}}class Bh{constructor(n,u){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Wo(Ir,16,0),this.grid3D=new Wo(Ir,16,0),this.featureIndexArray=new un,this.promoteId=u}insert(n,u,g,b,S,t){const a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(g,b,S);const p=t?this.grid3D:this.grid;for(let v=0;v<u.length;v++){const C=u[v],E=[1/0,1/0,-1/0,-1/0];for(let I=0;I<C.length;I++){const j=C[I];E[0]=Math.min(E[0],j.x),E[1]=Math.min(E[1],j.y),E[2]=Math.max(E[2],j.x),E[3]=Math.max(E[3],j.y)}E[0]<Ir&&E[1]<Ir&&E[2]>=0&&E[3]>=0&&p.insert(a,E[0],E[1],E[2],E[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new vo.VectorTile(new Th(this.rawTileData)).layers,this.sourceLayerCoder=new p1(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,u,g,b){this.loadVTLayers();const S=n.params||{},t=Ir/n.tileSize/n.scale,a=Dc(S.filter),p=n.queryGeometry,v=n.queryPadding*t,C=af(p),E=this.grid.query(C.minX-v,C.minY-v,C.maxX+v,C.maxY+v),I=af(n.cameraQueryGeometry),j=this.grid3D.query(I.minX-v,I.minY-v,I.maxX+v,I.maxY+v,(ee,ce,ge,me)=>function(Se,Ae,tt,we,he){for(const Oe of Se)if(Ae<=Oe.x&&tt<=Oe.y&&we>=Oe.x&&he>=Oe.y)return!0;const _e=[new Pe(Ae,tt),new Pe(Ae,he),new Pe(we,he),new Pe(we,tt)];if(Se.length>2){for(const Oe of _e)if(fo(Se,Oe))return!0}for(let Oe=0;Oe<Se.length-1;Oe++)if(mo(Se[Oe],Se[Oe+1],_e))return!0;return!1}(n.cameraQueryGeometry,ee-v,ce-v,ge+v,me+v));for(const ee of j)E.push(ee);E.sort(lf);const z={};let X;for(let ee=0;ee<E.length;ee++){const ce=E[ee];if(ce===X)continue;X=ce;const ge=this.featureIndexArray.get(ce);let me=null;this.loadMatchingFeature(z,ge.bucketIndex,ge.sourceLayerIndex,ge.featureIndex,a,S.layers,S.availableImages,u,g,b,(Se,Ae,tt)=>(me||(me=ts(Se)),Ae.queryIntersectsFeature(p,Se,tt,me,this.z,n.transform,t,n.pixelPosMatrix)))}return z}loadMatchingFeature(n,u,g,b,S,t,a,p,v,C,E){const I=this.bucketLayerIDs[u];if(t&&!function(ee,ce){for(let ge=0;ge<ee.length;ge++)if(ce.indexOf(ee[ge])>=0)return!0;return!1}(t,I))return;const j=this.sourceLayerCoder.decode(g),z=this.vtLayers[j].feature(b);if(S.needGeometry){const ee=Ko(z,!0);if(!S.filter(new nr(this.tileID.overscaledZ),ee,this.tileID.canonical))return}else if(!S.filter(new nr(this.tileID.overscaledZ),z))return;const X=this.getId(z,j);for(let ee=0;ee<I.length;ee++){const ce=I[ee];if(t&&t.indexOf(ce)<0)continue;const ge=p[ce];if(!ge)continue;let me={};X&&C&&(me=C.getState(ge.sourceLayer||"_geojsonTileLayer",X));const Se=U({},v[ce]);Se.paint=Ld(Se.paint,ge.paint,z,me,a),Se.layout=Ld(Se.layout,ge.layout,z,me,a);const Ae=!E||E(z,ge,me);if(!Ae)continue;const tt=new f1(z,this.z,this.x,this.y,X);tt.layer=Se;let we=n[ce];we===void 0&&(we=n[ce]=[]),we.push({featureIndex:b,feature:tt,intersectionZ:Ae})}}lookupSymbolFeatures(n,u,g,b,S,t,a,p){const v={};this.loadVTLayers();const C=Dc(S);for(const E of n)this.loadMatchingFeature(v,g,b,E,C,t,a,p,u);return v}hasLayer(n){for(const u of this.bucketLayerIDs)for(const g of u)if(n===g)return!0;return!1}getId(n,u){let g=n.id;return this.promoteId&&(g=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[u]],typeof g=="boolean"&&(g=Number(g))),g}}function Ld(l,n,u,g,b){return G(l,(S,t)=>{const a=n instanceof Al?n.get(t):null;return a&&a.evaluate?a.evaluate(u,g,b):a})}function af(l){let n=1/0,u=1/0,g=-1/0,b=-1/0;for(const S of l)n=Math.min(n,S.x),u=Math.min(u,S.y),g=Math.max(g,S.x),b=Math.max(b,S.y);return{minX:n,minY:u,maxX:g,maxY:b}}function lf(l,n){return n-l}var m1;Nt("FeatureIndex",Bh,{omit:["rawTileData","sourceLayerCoder"]}),c.PerformanceMarkers=void 0,(m1=c.PerformanceMarkers||(c.PerformanceMarkers={})).create="create",m1.load="load",m1.fullLoad="fullLoad";let nc=null,rc=[];const mu=1e3/30,cf={mark(l){performance.mark(l)},frame(l){const n=l;nc!=null&&rc.push(n-nc),nc=n},clearMetrics(){nc=null,rc=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const l in c.PerformanceMarkers)performance.clearMarks(c.PerformanceMarkers[l])},getPerformanceMetrics(){performance.measure("loadTime",c.PerformanceMarkers.create,c.PerformanceMarkers.load),performance.measure("fullLoadTime",c.PerformanceMarkers.create,c.PerformanceMarkers.fullLoad);const l=performance.getEntriesByName("loadTime")[0].duration,n=performance.getEntriesByName("fullLoadTime")[0].duration,u=rc.length,g=1/(rc.reduce((S,t)=>S+t,0)/u/1e3),b=rc.filter(S=>S>mu).reduce((S,t)=>S+(t-mu)/mu,0);return{loadTime:l,fullLoadTime:n,fps:g,percentDroppedFrames:b/(u+b)*100}}};c.AJAXError=Bt,c.ARRAY_TYPE=ui,c.Actor=class{constructor(l,n,u){this.target=l,this.parent=n,this.mapId=u,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},H(["receive","process"],this),this.invoker=new sf(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ye()?l:window}send(l,n,u,g,b=!1){const S=Math.round(1e18*Math.random()).toString(36).substring(0,10);u&&(this.callbacks[S]=u);const t=dt(this.globalScope)?void 0:[];return this.target.postMessage({id:S,type:l,hasCallback:!!u,targetMapId:g,mustQueue:b,sourceMapId:this.mapId,data:Ds(n,t)},t),{cancel:()=>{u&&delete this.callbacks[S],this.target.postMessage({id:S,type:"<cancel>",targetMapId:g,sourceMapId:this.mapId})}}}receive(l){const n=l.data,u=n.id;if(u&&(!n.targetMapId||this.mapId===n.targetMapId))if(n.type==="<cancel>"){delete this.tasks[u];const g=this.cancelCallbacks[u];delete this.cancelCallbacks[u],g&&g()}else ye()||n.mustQueue?(this.tasks[u]=n,this.taskQueue.push(u),this.invoker.trigger()):this.processTask(u,n)}process(){if(!this.taskQueue.length)return;const l=this.taskQueue.shift(),n=this.tasks[l];delete this.tasks[l],this.taskQueue.length&&this.invoker.trigger(),n&&this.processTask(l,n)}processTask(l,n){if(n.type==="<response>"){const u=this.callbacks[l];delete this.callbacks[l],u&&(n.error?u(Is(n.error)):u(null,Is(n.data)))}else{let u=!1;const g=dt(this.globalScope)?void 0:[],b=n.hasCallback?(a,p)=>{u=!0,delete this.cancelCallbacks[l],this.target.postMessage({id:l,type:"<response>",sourceMapId:this.mapId,error:a?Ds(a):null,data:Ds(p,g)},g)}:a=>{u=!0};let S=null;const t=Is(n.data);if(this.parent[n.type])S=this.parent[n.type](n.sourceMapId,t,b);else if(this.parent.getWorkerSource){const a=n.type.split(".");S=this.parent.getWorkerSource(n.sourceMapId,a[0],t.source)[a[1]](t,b)}else b(new Error(`Could not find function ${n.type}`));!u&&S&&S.cancel&&(this.cancelCallbacks[l]=S.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},c.AlphaImage=Hl,c.CanonicalTileID=zh,c.CollisionBoxArray=ze,c.CollisionCircleLayoutArray=class extends F{},c.Color=W,c.DEMData=Fh,c.DataConstantProperty=Zt,c.DictionaryCoder=p1,c.EXTENT=Ir,c.ErrorEvent=Et,c.EvaluationParameters=nr,c.Event=yt,c.Evented=nt,c.FeatureIndex=Bh,c.FillBucket=ns,c.FillExtrusionBucket=pd,c.GeoJSONFeature=f1,c.ImageAtlas=Nh,c.ImagePosition=xd,c.LineBucket=Eh,c.LineStripIndexArray=class extends Ie{},c.LngLat=Er,c.LngLatBounds=fi,c.MercatorCoordinate=pu,c.ONE_EM=Vn,c.OverscaledTileID=rs,c.PerformanceUtils=cf,c.PosArray=gn,c.Properties=Pr,c.QuadTriangleArray=class extends Y{},c.RGBAImage=Di,c.RasterBoundsArray=class extends Fi{},c.RequestPerformance=class{constructor(l){this._marks={start:[l.url,"start"].join("#"),end:[l.url,"end"].join("#"),measure:l.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let l=performance.getEntriesByName(this._marks.measure);return l.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),l=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),l}},c.ResourceType=Rt,c.SegmentVector=In,c.SymbolBucket=Jl,c.Transitionable=$c,c.TriangleIndexArray=hr,c.Uniform1f=Ra,c.Uniform1i=class extends ci{constructor(l,n){super(l,n),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1i(this.location,l))}},c.Uniform2f=class extends ci{constructor(l,n){super(l,n),this.current=[0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]||(this.current=l,this.gl.uniform2f(this.location,l[0],l[1]))}},c.Uniform3f=class extends ci{constructor(l,n){super(l,n),this.current=[0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]||(this.current=l,this.gl.uniform3f(this.location,l[0],l[1],l[2]))}},c.Uniform4f=Fl,c.UniformColor=uo,c.UniformMatrix4f=class extends ci{constructor(l,n){super(l,n),this.current=J1}set(l){if(l[12]!==this.current[12]||l[0]!==this.current[0])return this.current=l,void this.gl.uniformMatrix4fv(this.location,!1,l);for(let n=1;n<16;n++)if(l[n]!==this.current[n]){this.current=l,this.gl.uniformMatrix4fv(this.location,!1,l);break}}},c.UnwrappedTileID=Ed,c.ValidationError=Je,c.ZoomHistory=La,c.add=function(l,n,u){return l[0]=n[0]+u[0],l[1]=n[1]+u[1],l[2]=n[2]+u[2],l},c.addDynamicAttributes=du,c.asyncAll=function(l,n,u){if(!l.length)return u(null,[]);let g=l.length;const b=new Array(l.length);let S=null;l.forEach((t,a)=>{n(t,(p,v)=>{p&&(S=p),b[a]=v,--g==0&&u(S,b)})})},c.bezier=P,c.bindAll=H,c.cacheEntryPossiblyAdded=function(l){it++,it>be&&(l.getActor().send("enforceCacheSizeLimit",K),it=0)},c.clamp=N,c.clearTileCache=function(l){const n=caches.delete(je);l&&n.catch(l).then(()=>l())},c.clipLine=ra,c.clone=function(l){var n=new ui(16);return n[0]=l[0],n[1]=l[1],n[2]=l[2],n[3]=l[3],n[4]=l[4],n[5]=l[5],n[6]=l[6],n[7]=l[7],n[8]=l[8],n[9]=l[9],n[10]=l[10],n[11]=l[11],n[12]=l[12],n[13]=l[13],n[14]=l[14],n[15]=l[15],n},c.clone$1=oe,c.clone$2=function(l){var n=new ui(3);return n[0]=l[0],n[1]=l[1],n[2]=l[2],n},c.collisionCircleLayout=Up,c.config=de,c.copy=function(l,n){return l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3],l[4]=n[4],l[5]=n[5],l[6]=n[6],l[7]=n[7],l[8]=n[8],l[9]=n[9],l[10]=n[10],l[11]=n[11],l[12]=n[12],l[13]=n[13],l[14]=n[14],l[15]=n[15],l},c.create=function(){var l=new ui(16);return ui!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0),l[0]=1,l[5]=1,l[10]=1,l[15]=1,l},c.create$1=Cr,c.createExpression=Cl,c.createFilter=Dc,c.createLayout=jr,c.createStyleLayer=function(l){return l.type==="custom"?new O0(l):new z0[l.type](l)},c.cross=function(l,n,u){var g=n[0],b=n[1],S=n[2],t=u[0],a=u[1],p=u[2];return l[0]=b*p-S*a,l[1]=S*t-g*p,l[2]=g*a-b*t,l},c.dot=function(l,n){return l[0]*n[0]+l[1]*n[1]+l[2]*n[2]},c.dot$1=function(l,n){return l[0]*n[0]+l[1]*n[1]+l[2]*n[2]+l[3]*n[3]},c.ease=D,c.emitValidationErrors=Oc,c.enforceCacheSizeLimit=function(l){Be(),Ee&&Ee.then(n=>{n.keys().then(u=>{for(let g=0;g<u.length-l;g++)n.delete(u[g])})})},c.equals=function(l,n){var u=l[0],g=l[1],b=l[2],S=l[3],t=l[4],a=l[5],p=l[6],v=l[7],C=l[8],E=l[9],I=l[10],j=l[11],z=l[12],X=l[13],ee=l[14],ce=l[15],ge=n[0],me=n[1],Se=n[2],Ae=n[3],tt=n[4],we=n[5],he=n[6],_e=n[7],Oe=n[8],Ye=n[9],at=n[10],ot=n[11],We=n[12],At=n[13],wt=n[14],dn=n[15];return Math.abs(u-ge)<=wi*Math.max(1,Math.abs(u),Math.abs(ge))&&Math.abs(g-me)<=wi*Math.max(1,Math.abs(g),Math.abs(me))&&Math.abs(b-Se)<=wi*Math.max(1,Math.abs(b),Math.abs(Se))&&Math.abs(S-Ae)<=wi*Math.max(1,Math.abs(S),Math.abs(Ae))&&Math.abs(t-tt)<=wi*Math.max(1,Math.abs(t),Math.abs(tt))&&Math.abs(a-we)<=wi*Math.max(1,Math.abs(a),Math.abs(we))&&Math.abs(p-he)<=wi*Math.max(1,Math.abs(p),Math.abs(he))&&Math.abs(v-_e)<=wi*Math.max(1,Math.abs(v),Math.abs(_e))&&Math.abs(C-Oe)<=wi*Math.max(1,Math.abs(C),Math.abs(Oe))&&Math.abs(E-Ye)<=wi*Math.max(1,Math.abs(E),Math.abs(Ye))&&Math.abs(I-at)<=wi*Math.max(1,Math.abs(I),Math.abs(at))&&Math.abs(j-ot)<=wi*Math.max(1,Math.abs(j),Math.abs(ot))&&Math.abs(z-We)<=wi*Math.max(1,Math.abs(z),Math.abs(We))&&Math.abs(X-At)<=wi*Math.max(1,Math.abs(X),Math.abs(At))&&Math.abs(ee-wt)<=wi*Math.max(1,Math.abs(ee),Math.abs(wt))&&Math.abs(ce-dn)<=wi*Math.max(1,Math.abs(ce),Math.abs(dn))},c.evaluateSizeForFeature=function(l,{uSize:n,uSizeT:u},{lowerSize:g,upperSize:b}){return l.kind==="source"?g/Bs:l.kind==="composite"?dr(g/Bs,b/Bs,u):n},c.evaluateSizeForZoom=function(l,n){let u=0,g=0;if(l.kind==="constant")g=l.layoutSize;else if(l.kind!=="source"){const{interpolationType:b,minZoom:S,maxZoom:t}=l,a=b?N(Vr.interpolationFactor(b,n,S,t),0,1):0;l.kind==="camera"?g=dr(l.minSize,l.maxSize,a):u=a}return{uSizeT:u,uSize:g}},c.evaluateVariableOffset=Jp,c.evented=Ta,c.exported=ht,c.exported$1=ft,c.extend=U,c.filterObject=te,c.fromRotation=function(l,n){var u=Math.sin(n),g=Math.cos(n);return l[0]=g,l[1]=u,l[2]=0,l[3]=-u,l[4]=g,l[5]=0,l[6]=0,l[7]=0,l[8]=1,l},c.fromScaling=function(l,n){return l[0]=n[0],l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=n[1],l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=n[2],l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l},c.getAnchorAlignment=Fr,c.getAnchorJustification=bo,c.getArrayBuffer=Mn,c.getImage=Nn,c.getJSON=function(l,n){return hn(U(l,{type:"json"}),n)},c.getOverlapMode=Mr,c.getRTLTextPluginStatus=Bc,c.getReferrer=Pt,c.getVideo=function(l,n){const u=window.document.createElement("video");u.muted=!0,u.onloadstart=function(){n(null,u)};for(let g=0;g<l.length;g++){const b=window.document.createElement("source");jn(l[g])||(u.crossOrigin="Anonymous"),b.src=l[g],u.appendChild(b)}return{cancel:()=>{}}},c.identity=qc,c.invert=function(l,n){var u=n[0],g=n[1],b=n[2],S=n[3],t=n[4],a=n[5],p=n[6],v=n[7],C=n[8],E=n[9],I=n[10],j=n[11],z=n[12],X=n[13],ee=n[14],ce=n[15],ge=u*a-g*t,me=u*p-b*t,Se=u*v-S*t,Ae=g*p-b*a,tt=g*v-S*a,we=b*v-S*p,he=C*X-E*z,_e=C*ee-I*z,Oe=C*ce-j*z,Ye=E*ee-I*X,at=E*ce-j*X,ot=I*ce-j*ee,We=ge*ot-me*at+Se*Ye+Ae*Oe-tt*_e+we*he;return We?(l[0]=(a*ot-p*at+v*Ye)*(We=1/We),l[1]=(b*at-g*ot-S*Ye)*We,l[2]=(X*we-ee*tt+ce*Ae)*We,l[3]=(I*tt-E*we-j*Ae)*We,l[4]=(p*Oe-t*ot-v*_e)*We,l[5]=(u*ot-b*Oe+S*_e)*We,l[6]=(ee*Se-z*we-ce*me)*We,l[7]=(C*we-I*Se+j*me)*We,l[8]=(t*at-a*Oe+v*he)*We,l[9]=(g*Oe-u*at-S*he)*We,l[10]=(z*tt-X*Se+ce*ge)*We,l[11]=(E*Se-C*tt-j*ge)*We,l[12]=(a*_e-t*Ye-p*he)*We,l[13]=(u*Ye-g*_e+b*he)*We,l[14]=(X*me-z*Ae-ee*ge)*We,l[15]=(C*Ae-E*me+I*ge)*We,l):null},c.isImageBitmap=Xe,c.isSafari=dt,c.isWorker=ye,c.keysDifference=function(l,n){const u=[];for(const g in l)g in n||u.push(g);return u},c.lazyLoadRTLTextPlugin=function(){An.isLoading()||An.isLoaded()||Bc()!=="deferred"||Rl()},c.makeRequest=hn,c.mapObject=G,c.mercatorXfromLng=ia,c.mercatorYfromLat=h1,c.mercatorZfromAltitude=Wa,c.mul=sd,c.mul$1=function(l,n,u){return l[0]=n[0]*u[0],l[1]=n[1]*u[1],l[2]=n[2]*u[2],l[3]=n[3]*u[3],l},c.multiply=id,c.nextPowerOfTwo=function(l){return l<=1?1:Math.pow(2,Math.ceil(Math.log(l)/Math.LN2))},c.normalize=function(l,n){var u=n[0],g=n[1],b=n[2],S=u*u+g*g+b*b;return S>0&&(S=1/Math.sqrt(S)),l[0]=n[0]*S,l[1]=n[1]*S,l[2]=n[2]*S,l},c.number=dr,c.ortho=function(l,n,u,g,b,S,t){var a=1/(n-u),p=1/(g-b),v=1/(S-t);return l[0]=-2*a,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*p,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*v,l[11]=0,l[12]=(n+u)*a,l[13]=(b+g)*p,l[14]=(t+S)*v,l[15]=1,l},c.parseCacheControl=Ke,c.parseGlyphPbf=function(l){return new Th(l).readFields(Fs,[])},c.pbf=Th,c.performSymbolLayout=function(l){l.bucket.createArrays(),l.bucket.tilePixelRatio=Ir/(512*l.bucket.overscaling),l.bucket.compareText={},l.bucket.iconsNeedLinear=!1;const n=l.bucket.layers[0].layout,u=l.bucket.layers[0]._unevaluatedLayout._values,g={layoutIconSize:u["icon-size"].possiblyEvaluate(new nr(l.bucket.zoom+1),l.canonical),layoutTextSize:u["text-size"].possiblyEvaluate(new nr(l.bucket.zoom+1),l.canonical),textMaxSize:u["text-size"].possiblyEvaluate(new nr(18))};if(l.bucket.textSizeData.kind==="composite"){const{minZoom:p,maxZoom:v}=l.bucket.textSizeData;g.compositeTextSizes=[u["text-size"].possiblyEvaluate(new nr(p),l.canonical),u["text-size"].possiblyEvaluate(new nr(v),l.canonical)]}if(l.bucket.iconSizeData.kind==="composite"){const{minZoom:p,maxZoom:v}=l.bucket.iconSizeData;g.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new nr(p),l.canonical),u["icon-size"].possiblyEvaluate(new nr(v),l.canonical)]}const b=n.get("text-line-height")*Vn,S=n.get("text-rotation-alignment")!=="viewport"&&n.get("symbol-placement")!=="point",t=n.get("text-keep-upright"),a=n.get("text-size");for(const p of l.bucket.features){const v=n.get("text-font").evaluate(p,{},l.canonical).join(","),C=a.evaluate(p,{},l.canonical),E=g.layoutTextSize.evaluate(p,{},l.canonical),I=g.layoutIconSize.evaluate(p,{},l.canonical),j={horizontal:{},vertical:void 0},z=p.text;let X,ee=[0,0];if(z){const me=z.toString(),Se=n.get("text-letter-spacing").evaluate(p,{},l.canonical)*Vn,Ae=zc(me)?Se:0,tt=n.get("text-anchor").evaluate(p,{},l.canonical),we=n.get("text-variable-anchor");if(!we){const at=n.get("text-radial-offset").evaluate(p,{},l.canonical);ee=at?Jp(tt,[at*Vn,u1]):n.get("text-offset").evaluate(p,{},l.canonical).map(ot=>ot*Vn)}let he=S?"center":n.get("text-justify").evaluate(p,{},l.canonical);const _e=n.get("symbol-placement"),Oe=_e==="point"?n.get("text-max-width").evaluate(p,{},l.canonical)*Vn:0,Ye=()=>{l.bucket.allowVerticalPlacement&&to(me)&&(j.vertical=Wl(z,l.glyphMap,l.glyphPositions,l.imagePositions,v,Oe,b,tt,"left",Ae,ee,c.WritingMode.vertical,!0,_e,E,C))};if(!S&&we){const at=he==="auto"?we.map(We=>bo(We)):[he];let ot=!1;for(let We=0;We<at.length;We++){const At=at[We];if(!j.horizontal[At])if(ot)j.horizontal[At]=j.horizontal[0];else{const wt=Wl(z,l.glyphMap,l.glyphPositions,l.imagePositions,v,Oe,b,"center",At,Ae,ee,c.WritingMode.horizontal,!1,_e,E,C);wt&&(j.horizontal[At]=wt,ot=wt.positionedLines.length===1)}}Ye()}else{he==="auto"&&(he=bo(tt));const at=Wl(z,l.glyphMap,l.glyphPositions,l.imagePositions,v,Oe,b,tt,he,Ae,ee,c.WritingMode.horizontal,!1,_e,E,C);at&&(j.horizontal[he]=at),Ye(),to(me)&&S&&t&&(j.vertical=Wl(z,l.glyphMap,l.glyphPositions,l.imagePositions,v,Oe,b,tt,he,Ae,ee,c.WritingMode.vertical,!1,_e,E,C))}}let ce=!1;if(p.icon&&p.icon.name){const me=l.imageMap[p.icon.name];me&&(X=Gl(l.imagePositions[p.icon.name],n.get("icon-offset").evaluate(p,{},l.canonical),n.get("icon-anchor").evaluate(p,{},l.canonical)),ce=!!me.sdf,l.bucket.sdfIcons===void 0?l.bucket.sdfIcons=ce:l.bucket.sdfIcons!==ce&&ae("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(me.pixelRatio!==l.bucket.pixelRatio||n.get("icon-rotate").constantOr(1)!==0)&&(l.bucket.iconsNeedLinear=!0))}const ge=bd(j.horizontal)||j.vertical;l.bucket.iconsInText=!!ge&&ge.iconsInText,(ge||X)&&ef(l.bucket,p,j,X,l.imageMap,g,E,I,ee,ce,l.canonical)}l.showCollisionBoxes&&l.bucket.generateCollisionDebugBuffers()},c.perspective=function(l,n,u,g,b){var S,t=1/Math.tan(n/2);return l[0]=t/u,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=t,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=-1,l[12]=0,l[13]=0,l[15]=0,b!=null&&b!==1/0?(l[10]=(b+g)*(S=1/(g-b)),l[14]=2*b*g*S):(l[10]=-1,l[14]=-2*g),l},c.pick=function(l,n){const u={};for(let g=0;g<n.length;g++){const b=n[g];b in l&&(u[b]=l[b])}return u},c.plugin=An,c.pointGeometry=Pe,c.polygonIntersectsPolygon=Qo,c.potpack=Kp,c.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],c.register=Nt,c.registerForPluginStateChange=function(l){return l({pluginStatus:oi,pluginURL:ro}),Ta.on("pluginStateChange",l),l},c.renderColorRamp=ad,c.rotateX=function(l,n,u){var g=Math.sin(u),b=Math.cos(u),S=n[4],t=n[5],a=n[6],p=n[7],v=n[8],C=n[9],E=n[10],I=n[11];return n!==l&&(l[0]=n[0],l[1]=n[1],l[2]=n[2],l[3]=n[3],l[12]=n[12],l[13]=n[13],l[14]=n[14],l[15]=n[15]),l[4]=S*b+v*g,l[5]=t*b+C*g,l[6]=a*b+E*g,l[7]=p*b+I*g,l[8]=v*b-S*g,l[9]=C*b-t*g,l[10]=E*b-a*g,l[11]=I*b-p*g,l},c.rotateZ=function(l,n,u){var g=Math.sin(u),b=Math.cos(u),S=n[0],t=n[1],a=n[2],p=n[3],v=n[4],C=n[5],E=n[6],I=n[7];return n!==l&&(l[8]=n[8],l[9]=n[9],l[10]=n[10],l[11]=n[11],l[12]=n[12],l[13]=n[13],l[14]=n[14],l[15]=n[15]),l[0]=S*b+v*g,l[1]=t*b+C*g,l[2]=a*b+E*g,l[3]=p*b+I*g,l[4]=v*b-S*g,l[5]=C*b-t*g,l[6]=E*b-a*g,l[7]=I*b-p*g,l},c.scale=function(l,n,u){var g=u[0],b=u[1],S=u[2];return l[0]=n[0]*g,l[1]=n[1]*g,l[2]=n[2]*g,l[3]=n[3]*g,l[4]=n[4]*b,l[5]=n[5]*b,l[6]=n[6]*b,l[7]=n[7]*b,l[8]=n[8]*S,l[9]=n[9]*S,l[10]=n[10]*S,l[11]=n[11]*S,l[12]=n[12],l[13]=n[13],l[14]=n[14],l[15]=n[15],l},c.scale$1=function(l,n,u){return l[0]=n[0]*u,l[1]=n[1]*u,l[2]=n[2]*u,l},c.setCacheLimits=function(l,n){K=l,be=n},c.setRTLTextPlugin=function(l,n,u=!1){if(oi===Il||oi===Fc||oi===gs)throw new Error("setRTLTextPlugin cannot be called multiple times.");ro=ht.resolveURL(l),oi=Il,Nl=n,Go(),u||Rl()},c.spec=Le,c.sphericalToCartesian=function([l,n,u]){return n+=90,n*=Math.PI/180,u*=Math.PI/180,{x:l*Math.cos(n)*Math.sin(u),y:l*Math.sin(n)*Math.sin(u),z:l*Math.cos(u)}},c.sqrLen=function(l){var n=l[0],u=l[1];return n*n+u*u},c.sub=function(l,n,u){return l[0]=n[0]-u[0],l[1]=n[1]-u[1],l[2]=n[2]-u[2],l},c.toEvaluationFeature=Ko,c.transformMat3=function(l,n,u){var g=n[0],b=n[1],S=n[2];return l[0]=g*u[0]+b*u[3]+S*u[6],l[1]=g*u[1]+b*u[4]+S*u[7],l[2]=g*u[2]+b*u[5]+S*u[8],l},c.transformMat4=vr,c.transformMat4$1=function(l,n,u){var g=n[0],b=n[1];return l[0]=u[0]*g+u[4]*b+u[12],l[1]=u[1]*g+u[5]*b+u[13],l},c.translate=function(l,n,u){var g,b,S,t,a,p,v,C,E,I,j,z,X=u[0],ee=u[1],ce=u[2];return n===l?(l[12]=n[0]*X+n[4]*ee+n[8]*ce+n[12],l[13]=n[1]*X+n[5]*ee+n[9]*ce+n[13],l[14]=n[2]*X+n[6]*ee+n[10]*ce+n[14],l[15]=n[3]*X+n[7]*ee+n[11]*ce+n[15]):(b=n[1],S=n[2],t=n[3],a=n[4],p=n[5],v=n[6],C=n[7],E=n[8],I=n[9],j=n[10],z=n[11],l[0]=g=n[0],l[1]=b,l[2]=S,l[3]=t,l[4]=a,l[5]=p,l[6]=v,l[7]=C,l[8]=E,l[9]=I,l[10]=j,l[11]=z,l[12]=g*X+a*ee+E*ce+n[12],l[13]=b*X+p*ee+I*ce+n[13],l[14]=S*X+v*ee+j*ce+n[14],l[15]=t*X+C*ee+z*ce+n[15]),l},c.triggerPluginCompletionEvent=K1,c.unicodeBlockLookup=Mt,c.uniqueId=function(){return q++},c.validateCustomStyleLayer=function(l){const n=[],u=l.id;return u===void 0&&n.push({message:`layers.${u}: missing required property "id"`}),l.render===void 0&&n.push({message:`layers.${u}: missing required method "render"`}),l.renderingMode&&l.renderingMode!=="2d"&&l.renderingMode!=="3d"&&n.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),n},c.validateLight=q1,c.validateStyle=Js,c.vectorTile=vo,c.warnOnce=ae,c.wrap=$}),m(["./shared"],function(c){function L(ne){const V=typeof ne;if(V==="number"||V==="boolean"||V==="string"||ne==null)return JSON.stringify(ne);if(Array.isArray(ne)){let J="[";for(const re of ne)J+=`${L(re)},`;return`${J}]`}const O=Object.keys(ne).sort();let W="{";for(let J=0;J<O.length;J++)W+=`${JSON.stringify(O[J])}:${L(ne[O[J]])},`;return`${W}}`}function T(ne){let V="";for(const O of c.refProperties)V+=`/${L(ne[O])}`;return V}class P{constructor(V){this.keyCache={},V&&this.replace(V)}replace(V){this._layerConfigs={},this._layers={},this.update(V,[])}update(V,O){for(const J of V){this._layerConfigs[J.id]=J;const re=this._layers[J.id]=c.createStyleLayer(J);re._featureFilter=c.createFilter(re.filter),this.keyCache[J.id]&&delete this.keyCache[J.id]}for(const J of O)delete this.keyCache[J],delete this._layerConfigs[J],delete this._layers[J];this.familiesBySource={};const W=function(J,re){const fe={};for(let pe=0;pe<J.length;pe++){const Te=re&&re[J[pe].id]||T(J[pe]);re&&(re[J[pe].id]=Te);let Ue=fe[Te];Ue||(Ue=fe[Te]=[]),Ue.push(J[pe])}const ve=[];for(const pe in fe)ve.push(fe[pe]);return ve}(Object.values(this._layerConfigs),this.keyCache);for(const J of W){const re=J.map(st=>this._layers[st.id]),fe=re[0];if(fe.visibility==="none")continue;const ve=fe.source||"";let pe=this.familiesBySource[ve];pe||(pe=this.familiesBySource[ve]={});const Te=fe.sourceLayer||"_geojsonTileLayer";let Ue=pe[Te];Ue||(Ue=pe[Te]=[]),Ue.push(re)}}}class D{constructor(V){const O={},W=[];for(const ve in V){const pe=V[ve],Te=O[ve]={};for(const Ue in pe){const st=pe[+Ue];if(!st||st.bitmap.width===0||st.bitmap.height===0)continue;const $e={x:0,y:0,w:st.bitmap.width+2,h:st.bitmap.height+2};W.push($e),Te[Ue]={rect:$e,metrics:st.metrics}}}const{w:J,h:re}=c.potpack(W),fe=new c.AlphaImage({width:J||1,height:re||1});for(const ve in V){const pe=V[ve];for(const Te in pe){const Ue=pe[+Te];if(!Ue||Ue.bitmap.width===0||Ue.bitmap.height===0)continue;const st=O[ve][Te].rect;c.AlphaImage.copy(Ue.bitmap,fe,{x:0,y:0},{x:st.x+1,y:st.y+1},Ue.bitmap)}}this.image=fe,this.positions=O}}c.register("GlyphAtlas",D);class N{constructor(V){this.tileID=new c.OverscaledTileID(V.tileID.overscaledZ,V.tileID.wrap,V.tileID.canonical.z,V.tileID.canonical.x,V.tileID.canonical.y),this.uid=V.uid,this.zoom=V.zoom,this.pixelRatio=V.pixelRatio,this.tileSize=V.tileSize,this.source=V.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=V.showCollisionBoxes,this.collectResourceTiming=!!V.collectResourceTiming,this.returnDependencies=!!V.returnDependencies,this.promoteId=V.promoteId}parse(V,O,W,J,re){this.status="parsing",this.data=V,this.collisionBoxArray=new c.CollisionBoxArray;const fe=new c.DictionaryCoder(Object.keys(V.layers).sort()),ve=new c.FeatureIndex(this.tileID,this.promoteId);ve.bucketLayerIDs=[];const pe={},Te={featureIndex:ve,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:W},Ue=O.familiesBySource[this.source];for(const Xt in Ue){const sn=V.layers[Xt];if(!sn)continue;sn.version===1&&c.warnOnce(`Vector tile source "${this.source}" layer "${Xt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const an=fe.encode(Xt),mr=[];for(let er=0;er<sn.length;er++){const Bn=sn.feature(er),kr=ve.getId(Bn,Xt);mr.push({feature:Bn,id:kr,index:er,sourceLayerIndex:an})}for(const er of Ue[Xt]){const Bn=er[0];Bn.source!==this.source&&c.warnOnce(`layer.source = ${Bn.source} does not equal this.source = ${this.source}`),Bn.minzoom&&this.zoom<Math.floor(Bn.minzoom)||Bn.maxzoom&&this.zoom>=Bn.maxzoom||Bn.visibility!=="none"&&($(er,this.zoom,W),(pe[Bn.id]=Bn.createBucket({index:ve.bucketLayerIDs.length,layers:er,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:an,sourceID:this.source})).populate(mr,Te,this.tileID.canonical),ve.bucketLayerIDs.push(er.map(kr=>kr.id)))}}let st,$e,_t,bt;const zt=c.mapObject(Te.glyphDependencies,Xt=>Object.keys(Xt).map(Number));Object.keys(zt).length?J.send("getGlyphs",{uid:this.uid,stacks:zt},(Xt,sn)=>{st||(st=Xt,$e=sn,Qt.call(this))}):$e={};const Ct=Object.keys(Te.iconDependencies);Ct.length?J.send("getImages",{icons:Ct,source:this.source,tileID:this.tileID,type:"icons"},(Xt,sn)=>{st||(st=Xt,_t=sn,Qt.call(this))}):_t={};const on=Object.keys(Te.patternDependencies);function Qt(){if(st)return re(st);if($e&&_t&&bt){const Xt=new D($e),sn=new c.ImageAtlas(_t,bt);for(const an in pe){const mr=pe[an];mr instanceof c.SymbolBucket?($(mr.layers,this.zoom,W),c.performSymbolLayout({bucket:mr,glyphMap:$e,glyphPositions:Xt.positions,imageMap:_t,imagePositions:sn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):mr.hasPattern&&(mr instanceof c.LineBucket||mr instanceof c.FillBucket||mr instanceof c.FillExtrusionBucket)&&($(mr.layers,this.zoom,W),mr.addFeatures(Te,this.tileID.canonical,sn.patternPositions))}this.status="done",re(null,{buckets:Object.values(pe).filter(an=>!an.isEmpty()),featureIndex:ve,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Xt.image,imageAtlas:sn,glyphMap:this.returnDependencies?$e:null,iconMap:this.returnDependencies?_t:null,glyphPositions:this.returnDependencies?Xt.positions:null})}}on.length?J.send("getImages",{icons:on,source:this.source,tileID:this.tileID,type:"patterns"},(Xt,sn)=>{st||(st=Xt,bt=sn,Qt.call(this))}):bt={},Qt.call(this)}}function $(ne,V,O){const W=new c.EvaluationParameters(V);for(const J of ne)J.recalculate(W,O)}function U(ne,V){const O=c.getArrayBuffer(ne.request,(W,J,re,fe)=>{W?V(W):J&&V(null,{vectorTile:new c.vectorTile.VectorTile(new c.pbf(J)),rawData:J,cacheControl:re,expires:fe})});return()=>{O.cancel(),V()}}class q{constructor(V,O,W,J){this.actor=V,this.layerIndex=O,this.availableImages=W,this.loadVectorData=J||U,this.loading={},this.loaded={}}loadTile(V,O){const W=V.uid;this.loading||(this.loading={});const J=!!(V&&V.request&&V.request.collectResourceTiming)&&new c.RequestPerformance(V.request),re=this.loading[W]=new N(V);re.abort=this.loadVectorData(V,(fe,ve)=>{if(delete this.loading[W],fe||!ve)return re.status="done",this.loaded[W]=re,O(fe);const pe=ve.rawData,Te={};ve.expires&&(Te.expires=ve.expires),ve.cacheControl&&(Te.cacheControl=ve.cacheControl);const Ue={};if(J){const st=J.finish();st&&(Ue.resourceTiming=JSON.parse(JSON.stringify(st)))}re.vectorTile=ve.vectorTile,re.parse(ve.vectorTile,this.layerIndex,this.availableImages,this.actor,(st,$e)=>{if(st||!$e)return O(st);O(null,c.extend({rawTileData:pe.slice(0)},$e,Te,Ue))}),this.loaded=this.loaded||{},this.loaded[W]=re})}reloadTile(V,O){const W=this.loaded,J=V.uid,re=this;if(W&&W[J]){const fe=W[J];fe.showCollisionBoxes=V.showCollisionBoxes;const ve=(pe,Te)=>{const Ue=fe.reloadCallback;Ue&&(delete fe.reloadCallback,fe.parse(fe.vectorTile,re.layerIndex,this.availableImages,re.actor,Ue)),O(pe,Te)};fe.status==="parsing"?fe.reloadCallback=ve:fe.status==="done"&&(fe.vectorTile?fe.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor,ve):ve())}}abortTile(V,O){const W=this.loading,J=V.uid;W&&W[J]&&W[J].abort&&(W[J].abort(),delete W[J]),O()}removeTile(V,O){const W=this.loaded,J=V.uid;W&&W[J]&&delete W[J],O()}}class H{constructor(){this.loaded={}}loadTile(V,O){const{uid:W,encoding:J,rawImageData:re}=V,fe=c.isImageBitmap(re)?this.getImageData(re):re,ve=new c.DEMData(W,fe,J);this.loaded=this.loaded||{},this.loaded[W]=ve,O(null,ve)}getImageData(V){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(V.width,V.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=V.width,this.offscreenCanvas.height=V.height,this.offscreenCanvasContext.drawImage(V,0,0,V.width,V.height);const O=this.offscreenCanvasContext.getImageData(-1,-1,V.width+2,V.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new c.RGBAImage({width:O.width,height:O.height},O.data)}removeTile(V){const O=this.loaded,W=V.uid;O&&O[W]&&delete O[W]}}var G=function ne(V,O){var W,J=V&&V.type;if(J==="FeatureCollection")for(W=0;W<V.features.length;W++)ne(V.features[W],O);else if(J==="GeometryCollection")for(W=0;W<V.geometries.length;W++)ne(V.geometries[W],O);else if(J==="Feature")ne(V.geometry,O);else if(J==="Polygon")te(V.coordinates,O);else if(J==="MultiPolygon")for(W=0;W<V.coordinates.length;W++)te(V.coordinates[W],O);return V};function te(ne,V){if(ne.length!==0){oe(ne[0],V);for(var O=1;O<ne.length;O++)oe(ne[O],!1)}}function oe(ne,V){for(var O=0,W=0,J=0,re=ne.length,fe=re-1;J<re;fe=J++){var ve=(ne[J][0]-ne[fe][0])*(ne[fe][1]+ne[J][1]),pe=O+ve;W+=Math.abs(O)>=Math.abs(ve)?O-pe+ve:ve-pe+O,O=pe}O+W>=0!=!!V&&ne.reverse()}const Ce=c.vectorTile.VectorTileFeature.prototype.toGeoJSON;class ae{constructor(V){this._feature=V,this.extent=c.EXTENT,this.type=V.type,this.properties=V.tags,"id"in V&&!isNaN(V.id)&&(this.id=parseInt(V.id,10))}loadGeometry(){if(this._feature.type===1){const V=[];for(const O of this._feature.geometry)V.push([new c.pointGeometry(O[0],O[1])]);return V}{const V=[];for(const O of this._feature.geometry){const W=[];for(const J of O)W.push(new c.pointGeometry(J[0],J[1]));V.push(W)}return V}}toGeoJSON(V,O,W){return Ce.call(this,V,O,W)}}class Ne{constructor(V){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=c.EXTENT,this.length=V.length,this._features=V}feature(V){return new ae(this._features[V])}}var Fe={exports:{}},ye=c.pointGeometry,Ke=c.vectorTile.VectorTileFeature,Me=qe;function qe(ne,V){this.options=V||{},this.features=ne,this.length=ne.length}function Re(ne,V){this.id=typeof ne.id=="number"?ne.id:void 0,this.type=ne.type,this.rawGeometry=ne.type===1?[ne.geometry]:ne.geometry,this.properties=ne.tags,this.extent=V||4096}qe.prototype.feature=function(ne){return new Re(this.features[ne],this.options.extent)},Re.prototype.loadGeometry=function(){var ne=this.rawGeometry;this.geometry=[];for(var V=0;V<ne.length;V++){for(var O=ne[V],W=[],J=0;J<O.length;J++)W.push(new ye(O[J][0],O[J][1]));this.geometry.push(W)}return this.geometry},Re.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ne=this.geometry,V=1/0,O=-1/0,W=1/0,J=-1/0,re=0;re<ne.length;re++)for(var fe=ne[re],ve=0;ve<fe.length;ve++){var pe=fe[ve];V=Math.min(V,pe.x),O=Math.max(O,pe.x),W=Math.min(W,pe.y),J=Math.max(J,pe.y)}return[V,W,O,J]},Re.prototype.toGeoJSON=Ke.prototype.toGeoJSON;var dt=c.pbf,Xe=Me;function ht(ne){var V=new dt;return function(O,W){for(var J in O.layers)W.writeMessage(3,Pe,O.layers[J])}(ne,V),V.finish()}function Pe(ne,V){var O;V.writeVarintField(15,ne.version||1),V.writeStringField(1,ne.name||""),V.writeVarintField(5,ne.extent||4096);var W={keys:[],values:[],keycache:{},valuecache:{}};for(O=0;O<ne.length;O++)W.feature=ne.feature(O),V.writeMessage(2,ke,W);var J=W.keys;for(O=0;O<J.length;O++)V.writeStringField(3,J[O]);var re=W.values;for(O=0;O<re.length;O++)V.writeMessage(4,be,re[O])}function ke(ne,V){var O=ne.feature;O.id!==void 0&&V.writeVarintField(1,O.id),V.writeMessage(2,de,ne),V.writeVarintField(3,O.type),V.writeMessage(4,K,O)}function de(ne,V){var O=ne.feature,W=ne.keys,J=ne.values,re=ne.keycache,fe=ne.valuecache;for(var ve in O.properties){var pe=O.properties[ve],Te=re[ve];if(pe!==null){Te===void 0&&(W.push(ve),re[ve]=Te=W.length-1),V.writeVarint(Te);var Ue=typeof pe;Ue!=="string"&&Ue!=="boolean"&&Ue!=="number"&&(pe=JSON.stringify(pe));var st=Ue+":"+pe,$e=fe[st];$e===void 0&&(J.push(pe),fe[st]=$e=J.length-1),V.writeVarint($e)}}}function je(ne,V){return(V<<3)+(7&ne)}function Ee(ne){return ne<<1^ne>>31}function K(ne,V){for(var O=ne.loadGeometry(),W=ne.type,J=0,re=0,fe=O.length,ve=0;ve<fe;ve++){var pe=O[ve],Te=1;W===1&&(Te=pe.length),V.writeVarint(je(1,Te));for(var Ue=W===3?pe.length-1:pe.length,st=0;st<Ue;st++){st===1&&W!==1&&V.writeVarint(je(2,Ue-1));var $e=pe[st].x-J,_t=pe[st].y-re;V.writeVarint(Ee($e)),V.writeVarint(Ee(_t)),J+=$e,re+=_t}W===3&&V.writeVarint(je(7,1))}}function be(ne,V){var O=typeof ne;O==="string"?V.writeStringField(1,ne):O==="boolean"?V.writeBooleanField(7,ne):O==="number"&&(ne%1!=0?V.writeDoubleField(3,ne):ne<0?V.writeSVarintField(6,ne):V.writeVarintField(5,ne))}function Be(ne,V,O,W,J,re){if(J-W<=O)return;const fe=W+J>>1;it(ne,V,fe,W,J,re%2),Be(ne,V,O,W,fe-1,re+1),Be(ne,V,O,fe+1,J,re+1)}function it(ne,V,O,W,J,re){for(;J>W;){if(J-W>600){const Te=J-W+1,Ue=O-W+1,st=Math.log(Te),$e=.5*Math.exp(2*st/3),_t=.5*Math.sqrt(st*$e*(Te-$e)/Te)*(Ue-Te/2<0?-1:1);it(ne,V,O,Math.max(W,Math.floor(O-Ue*$e/Te+_t)),Math.min(J,Math.floor(O+(Te-Ue)*$e/Te+_t)),re)}const fe=V[2*O+re];let ve=W,pe=J;for(ft(ne,V,W,O),V[2*J+re]>fe&&ft(ne,V,W,J);ve<pe;){for(ft(ne,V,ve,pe),ve++,pe--;V[2*ve+re]<fe;)ve++;for(;V[2*pe+re]>fe;)pe--}V[2*W+re]===fe?ft(ne,V,W,pe):(pe++,ft(ne,V,pe,J)),pe<=O&&(W=pe+1),O<=pe&&(J=pe-1)}}function ft(ne,V,O,W){mt(ne,O,W),mt(V,2*O,2*W),mt(V,2*O+1,2*W+1)}function mt(ne,V,O){const W=ne[V];ne[V]=ne[O],ne[O]=W}function xt(ne,V,O,W){const J=ne-O,re=V-W;return J*J+re*re}Fe.exports=ht,Fe.exports.fromVectorTileJs=ht,Fe.exports.fromGeojsonVt=function(ne,V){V=V||{};var O={};for(var W in ne)O[W]=new Xe(ne[W].features,V),O[W].name=W,O[W].version=V.version,O[W].extent=V.extent;return ht({layers:O})},Fe.exports.GeoJSONWrapper=Xe;const ut=ne=>ne[0],vt=ne=>ne[1];class Tt{constructor(V,O=ut,W=vt,J=64,re=Float64Array){this.nodeSize=J,this.points=V;const fe=V.length<65536?Uint16Array:Uint32Array,ve=this.ids=new fe(V.length),pe=this.coords=new re(2*V.length);for(let Te=0;Te<V.length;Te++)ve[Te]=Te,pe[2*Te]=O(V[Te]),pe[2*Te+1]=W(V[Te]);Be(ve,pe,J,0,ve.length-1,0)}range(V,O,W,J){return function(re,fe,ve,pe,Te,Ue,st){const $e=[0,re.length-1,0],_t=[];let bt,zt;for(;$e.length;){const Ct=$e.pop(),on=$e.pop(),Qt=$e.pop();if(on-Qt<=st){for(let an=Qt;an<=on;an++)bt=fe[2*an],zt=fe[2*an+1],bt>=ve&&bt<=Te&&zt>=pe&&zt<=Ue&&_t.push(re[an]);continue}const Xt=Math.floor((Qt+on)/2);bt=fe[2*Xt],zt=fe[2*Xt+1],bt>=ve&&bt<=Te&&zt>=pe&&zt<=Ue&&_t.push(re[Xt]);const sn=(Ct+1)%2;(Ct===0?ve<=bt:pe<=zt)&&($e.push(Qt),$e.push(Xt-1),$e.push(sn)),(Ct===0?Te>=bt:Ue>=zt)&&($e.push(Xt+1),$e.push(on),$e.push(sn))}return _t}(this.ids,this.coords,V,O,W,J,this.nodeSize)}within(V,O,W){return function(J,re,fe,ve,pe,Te){const Ue=[0,J.length-1,0],st=[],$e=pe*pe;for(;Ue.length;){const _t=Ue.pop(),bt=Ue.pop(),zt=Ue.pop();if(bt-zt<=Te){for(let sn=zt;sn<=bt;sn++)xt(re[2*sn],re[2*sn+1],fe,ve)<=$e&&st.push(J[sn]);continue}const Ct=Math.floor((zt+bt)/2),on=re[2*Ct],Qt=re[2*Ct+1];xt(on,Qt,fe,ve)<=$e&&st.push(J[Ct]);const Xt=(_t+1)%2;(_t===0?fe-pe<=on:ve-pe<=Qt)&&(Ue.push(zt),Ue.push(Ct-1),Ue.push(Xt)),(_t===0?fe+pe>=on:ve+pe>=Qt)&&(Ue.push(Ct+1),Ue.push(bt),Ue.push(Xt))}return st}(this.ids,this.coords,V,O,W,this.nodeSize)}}const Rt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ne=>ne},Bt=Math.fround||(Pt=new Float32Array(1),ne=>(Pt[0]=+ne,Pt[0]));var Pt;class jt{constructor(V){this.options=Dn(Object.create(Rt),V),this.trees=new Array(this.options.maxZoom+1)}load(V){const{log:O,minZoom:W,maxZoom:J,nodeSize:re}=this.options;O&&console.time("total time");const fe=`prepare ${V.length} points`;O&&console.time(fe),this.points=V;let ve=[];for(let pe=0;pe<V.length;pe++)V[pe].geometry&&ve.push(Mn(V[pe],pe));this.trees[J+1]=new Tt(ve,bn,yt,re,Float32Array),O&&console.timeEnd(fe);for(let pe=J;pe>=W;pe--){const Te=+Date.now();ve=this._cluster(ve,pe),this.trees[pe]=new Tt(ve,bn,yt,re,Float32Array),O&&console.log("z%d: %d clusters in %dms",pe,ve.length,+Date.now()-Te)}return O&&console.timeEnd("total time"),this}getClusters(V,O){let W=((V[0]+180)%360+360)%360-180;const J=Math.max(-90,Math.min(90,V[1]));let re=V[2]===180?180:((V[2]+180)%360+360)%360-180;const fe=Math.max(-90,Math.min(90,V[3]));if(V[2]-V[0]>=360)W=-180,re=180;else if(W>re){const Ue=this.getClusters([W,J,180,fe],O),st=this.getClusters([-180,J,re,fe],O);return Ue.concat(st)}const ve=this.trees[this._limitZoom(O)],pe=ve.range(Yt(W),xn(fe),Yt(re),xn(J)),Te=[];for(const Ue of pe){const st=ve.points[Ue];Te.push(st.numPoints?jn(st):this.points[st.index])}return Te}getChildren(V){const O=this._getOriginId(V),W=this._getOriginZoom(V),J="No cluster with the specified id.",re=this.trees[W];if(!re)throw new Error(J);const fe=re.points[O];if(!fe)throw new Error(J);const ve=this.options.radius/(this.options.extent*Math.pow(2,W-1)),pe=re.within(fe.x,fe.y,ve),Te=[];for(const Ue of pe){const st=re.points[Ue];st.parentId===V&&Te.push(st.numPoints?jn(st):this.points[st.index])}if(Te.length===0)throw new Error(J);return Te}getLeaves(V,O,W){const J=[];return this._appendLeaves(J,V,O=O||10,W=W||0,0),J}getTile(V,O,W){const J=this.trees[this._limitZoom(V)],re=Math.pow(2,V),{extent:fe,radius:ve}=this.options,pe=ve/fe,Te=(W-pe)/re,Ue=(W+1+pe)/re,st={features:[]};return this._addTileFeatures(J.range((O-pe)/re,Te,(O+1+pe)/re,Ue),J.points,O,W,re,st),O===0&&this._addTileFeatures(J.range(1-pe/re,Te,1,Ue),J.points,re,W,re,st),O===re-1&&this._addTileFeatures(J.range(0,Te,pe/re,Ue),J.points,-1,W,re,st),st.features.length?st:null}getClusterExpansionZoom(V){let O=this._getOriginZoom(V)-1;for(;O<=this.options.maxZoom;){const W=this.getChildren(V);if(O++,W.length!==1)break;V=W[0].properties.cluster_id}return O}_appendLeaves(V,O,W,J,re){const fe=this.getChildren(O);for(const ve of fe){const pe=ve.properties;if(pe&&pe.cluster?re+pe.point_count<=J?re+=pe.point_count:re=this._appendLeaves(V,pe.cluster_id,W,J,re):re<J?re++:V.push(ve),V.length===W)break}return re}_addTileFeatures(V,O,W,J,re,fe){for(const ve of V){const pe=O[ve],Te=pe.numPoints;let Ue,st,$e;if(Te)Ue=Jn(pe),st=pe.x,$e=pe.y;else{const zt=this.points[pe.index];Ue=zt.properties,st=Yt(zt.geometry.coordinates[0]),$e=xn(zt.geometry.coordinates[1])}const _t={type:1,geometry:[[Math.round(this.options.extent*(st*re-W)),Math.round(this.options.extent*($e*re-J))]],tags:Ue};let bt;Te?bt=pe.id:this.options.generateId?bt=pe.index:this.points[pe.index].id&&(bt=this.points[pe.index].id),bt!==void 0&&(_t.id=bt),fe.features.push(_t)}}_limitZoom(V){return Math.max(this.options.minZoom,Math.min(Math.floor(+V),this.options.maxZoom+1))}_cluster(V,O){const W=[],{radius:J,extent:re,reduce:fe,minPoints:ve}=this.options,pe=J/(re*Math.pow(2,O));for(let Te=0;Te<V.length;Te++){const Ue=V[Te];if(Ue.zoom<=O)continue;Ue.zoom=O;const st=this.trees[O+1],$e=st.within(Ue.x,Ue.y,pe),_t=Ue.numPoints||1;let bt=_t;for(const zt of $e){const Ct=st.points[zt];Ct.zoom>O&&(bt+=Ct.numPoints||1)}if(bt>_t&&bt>=ve){let zt=Ue.x*_t,Ct=Ue.y*_t,on=fe&&_t>1?this._map(Ue,!0):null;const Qt=(Te<<5)+(O+1)+this.points.length;for(const Xt of $e){const sn=st.points[Xt];if(sn.zoom<=O)continue;sn.zoom=O;const an=sn.numPoints||1;zt+=sn.x*an,Ct+=sn.y*an,sn.parentId=Qt,fe&&(on||(on=this._map(Ue,!0)),fe(on,this._map(sn)))}Ue.parentId=Qt,W.push(hn(zt/bt,Ct/bt,Qt,bt,on))}else if(W.push(Ue),bt>1)for(const zt of $e){const Ct=st.points[zt];Ct.zoom<=O||(Ct.zoom=O,W.push(Ct))}}return W}_getOriginId(V){return V-this.points.length>>5}_getOriginZoom(V){return(V-this.points.length)%32}_map(V,O){if(V.numPoints)return O?Dn({},V.properties):V.properties;const W=this.points[V.index].properties,J=this.options.map(W);return O&&J===W?Dn({},J):J}}function hn(ne,V,O,W,J){return{x:Bt(ne),y:Bt(V),zoom:1/0,id:O,parentId:-1,numPoints:W,properties:J}}function Mn(ne,V){const[O,W]=ne.geometry.coordinates;return{x:Bt(Yt(O)),y:Bt(xn(W)),zoom:1/0,index:V,parentId:-1}}function jn(ne){return{type:"Feature",id:ne.id,properties:Jn(ne),geometry:{type:"Point",coordinates:[(V=ne.x,360*(V-.5)),Nn(ne.y)]}};var V}function Jn(ne){const V=ne.numPoints,O=V>=1e4?`${Math.round(V/1e3)}k`:V>=1e3?Math.round(V/100)/10+"k":V;return Dn(Dn({},ne.properties),{cluster:!0,cluster_id:ne.id,point_count:V,point_count_abbreviated:O})}function Yt(ne){return ne/360+.5}function xn(ne){const V=Math.sin(ne*Math.PI/180),O=.5-.25*Math.log((1+V)/(1-V))/Math.PI;return O<0?0:O>1?1:O}function Nn(ne){const V=(180-360*ne)*Math.PI/180;return 360*Math.atan(Math.exp(V))/Math.PI-90}function Dn(ne,V){for(const O in V)ne[O]=V[O];return ne}function bn(ne){return ne.x}function yt(ne){return ne.y}function Et(ne,V,O,W){for(var J,re=W,fe=O-V>>1,ve=O-V,pe=ne[V],Te=ne[V+1],Ue=ne[O],st=ne[O+1],$e=V+3;$e<O;$e+=3){var _t=nt(ne[$e],ne[$e+1],pe,Te,Ue,st);if(_t>re)J=$e,re=_t;else if(_t===re){var bt=Math.abs($e-fe);bt<ve&&(J=$e,ve=bt)}}re>W&&(J-V>3&&Et(ne,V,J,W),ne[J+2]=re,O-J>3&&Et(ne,J,O,W))}function nt(ne,V,O,W,J,re){var fe=J-O,ve=re-W;if(fe!==0||ve!==0){var pe=((ne-O)*fe+(V-W)*ve)/(fe*fe+ve*ve);pe>1?(O=J,W=re):pe>0&&(O+=fe*pe,W+=ve*pe)}return(fe=ne-O)*fe+(ve=V-W)*ve}function Le(ne,V,O,W){var J={id:ne===void 0?null:ne,type:V,geometry:O,tags:W,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(re){var fe=re.geometry,ve=re.type;if(ve==="Point"||ve==="MultiPoint"||ve==="LineString")Je(re,fe);else if(ve==="Polygon"||ve==="MultiLineString")for(var pe=0;pe<fe.length;pe++)Je(re,fe[pe]);else if(ve==="MultiPolygon")for(pe=0;pe<fe.length;pe++)for(var Te=0;Te<fe[pe].length;Te++)Je(re,fe[pe][Te])}(J),J}function Je(ne,V){for(var O=0;O<V.length;O+=3)ne.minX=Math.min(ne.minX,V[O]),ne.minY=Math.min(ne.minY,V[O+1]),ne.maxX=Math.max(ne.maxX,V[O]),ne.maxY=Math.max(ne.maxY,V[O+1])}function ln(ne,V,O,W){if(V.geometry){var J=V.geometry.coordinates,re=V.geometry.type,fe=Math.pow(O.tolerance/((1<<O.maxZoom)*O.extent),2),ve=[],pe=V.id;if(O.promoteId?pe=V.properties[O.promoteId]:O.generateId&&(pe=W||0),re==="Point")cn(J,ve);else if(re==="MultiPoint")for(var Te=0;Te<J.length;Te++)cn(J[Te],ve);else if(re==="LineString")Gt(J,ve,fe,!1);else if(re==="MultiLineString"){if(O.lineMetrics){for(Te=0;Te<J.length;Te++)Gt(J[Te],ve=[],fe,!1),ne.push(Le(pe,"LineString",ve,V.properties));return}pn(J,ve,fe,!1)}else if(re==="Polygon")pn(J,ve,fe,!0);else{if(re!=="MultiPolygon"){if(re==="GeometryCollection"){for(Te=0;Te<V.geometry.geometries.length;Te++)ln(ne,{id:pe,geometry:V.geometry.geometries[Te],properties:V.properties},O,W);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Te=0;Te<J.length;Te++){var Ue=[];pn(J[Te],Ue,fe,!0),ve.push(Ue)}}ne.push(Le(pe,re,ve,V.properties))}}function cn(ne,V){V.push(Cn(ne[0])),V.push(ct(ne[1])),V.push(0)}function Gt(ne,V,O,W){for(var J,re,fe=0,ve=0;ve<ne.length;ve++){var pe=Cn(ne[ve][0]),Te=ct(ne[ve][1]);V.push(pe),V.push(Te),V.push(0),ve>0&&(fe+=W?(J*Te-pe*re)/2:Math.sqrt(Math.pow(pe-J,2)+Math.pow(Te-re,2))),J=pe,re=Te}var Ue=V.length-3;V[2]=1,Et(V,0,Ue,O),V[Ue+2]=1,V.size=Math.abs(fe),V.start=0,V.end=V.size}function pn(ne,V,O,W){for(var J=0;J<ne.length;J++){var re=[];Gt(ne[J],re,O,W),V.push(re)}}function Cn(ne){return ne/360+.5}function ct(ne){var V=Math.sin(ne*Math.PI/180),O=.5-.25*Math.log((1+V)/(1-V))/Math.PI;return O<0?0:O>1?1:O}function Ot(ne,V,O,W,J,re,fe,ve){if(W/=V,re>=(O/=V)&&fe<W)return ne;if(fe<O||re>=W)return null;for(var pe=[],Te=0;Te<ne.length;Te++){var Ue=ne[Te],st=Ue.geometry,$e=Ue.type,_t=J===0?Ue.minX:Ue.minY,bt=J===0?Ue.maxX:Ue.maxY;if(_t>=O&&bt<W)pe.push(Ue);else if(!(bt<O||_t>=W)){var zt=[];if($e==="Point"||$e==="MultiPoint")et(st,zt,O,W,J);else if($e==="LineString")$t(st,zt,O,W,J,!1,ve.lineMetrics);else if($e==="MultiLineString")mn(st,zt,O,W,J,!1);else if($e==="Polygon")mn(st,zt,O,W,J,!0);else if($e==="MultiPolygon")for(var Ct=0;Ct<st.length;Ct++){var on=[];mn(st[Ct],on,O,W,J,!0),on.length&&zt.push(on)}if(zt.length){if(ve.lineMetrics&&$e==="LineString"){for(Ct=0;Ct<zt.length;Ct++)pe.push(Le(Ue.id,$e,zt[Ct],Ue.tags));continue}$e!=="LineString"&&$e!=="MultiLineString"||(zt.length===1?($e="LineString",zt=zt[0]):$e="MultiLineString"),$e!=="Point"&&$e!=="MultiPoint"||($e=zt.length===3?"Point":"MultiPoint"),pe.push(Le(Ue.id,$e,zt,Ue.tags))}}}return pe.length?pe:null}function et(ne,V,O,W,J){for(var re=0;re<ne.length;re+=3){var fe=ne[re+J];fe>=O&&fe<=W&&(V.push(ne[re]),V.push(ne[re+1]),V.push(ne[re+2]))}}function $t(ne,V,O,W,J,re,fe){for(var ve,pe,Te=Dt(ne),Ue=J===0?nn:sr,st=ne.start,$e=0;$e<ne.length-3;$e+=3){var _t=ne[$e],bt=ne[$e+1],zt=ne[$e+2],Ct=ne[$e+3],on=ne[$e+4],Qt=J===0?_t:bt,Xt=J===0?Ct:on,sn=!1;fe&&(ve=Math.sqrt(Math.pow(_t-Ct,2)+Math.pow(bt-on,2))),Qt<O?Xt>O&&(pe=Ue(Te,_t,bt,Ct,on,O),fe&&(Te.start=st+ve*pe)):Qt>W?Xt<W&&(pe=Ue(Te,_t,bt,Ct,on,W),fe&&(Te.start=st+ve*pe)):Fn(Te,_t,bt,zt),Xt<O&&Qt>=O&&(pe=Ue(Te,_t,bt,Ct,on,O),sn=!0),Xt>W&&Qt<=W&&(pe=Ue(Te,_t,bt,Ct,on,W),sn=!0),!re&&sn&&(fe&&(Te.end=st+ve*pe),V.push(Te),Te=Dt(ne)),fe&&(st+=ve)}var an=ne.length-3;_t=ne[an],bt=ne[an+1],zt=ne[an+2],(Qt=J===0?_t:bt)>=O&&Qt<=W&&Fn(Te,_t,bt,zt),an=Te.length-3,re&&an>=3&&(Te[an]!==Te[0]||Te[an+1]!==Te[1])&&Fn(Te,Te[0],Te[1],Te[2]),Te.length&&V.push(Te)}function Dt(ne){var V=[];return V.size=ne.size,V.start=ne.start,V.end=ne.end,V}function mn(ne,V,O,W,J,re){for(var fe=0;fe<ne.length;fe++)$t(ne[fe],V,O,W,J,re,!1)}function Fn(ne,V,O,W){ne.push(V),ne.push(O),ne.push(W)}function nn(ne,V,O,W,J,re){var fe=(re-V)/(W-V);return ne.push(re),ne.push(O+(J-O)*fe),ne.push(1),fe}function sr(ne,V,O,W,J,re){var fe=(re-O)/(J-O);return ne.push(V+(W-V)*fe),ne.push(re),ne.push(1),fe}function He(ne,V){for(var O=[],W=0;W<ne.length;W++){var J,re=ne[W],fe=re.type;if(fe==="Point"||fe==="MultiPoint"||fe==="LineString")J=kt(re.geometry,V);else if(fe==="MultiLineString"||fe==="Polygon"){J=[];for(var ve=0;ve<re.geometry.length;ve++)J.push(kt(re.geometry[ve],V))}else if(fe==="MultiPolygon")for(J=[],ve=0;ve<re.geometry.length;ve++){for(var pe=[],Te=0;Te<re.geometry[ve].length;Te++)pe.push(kt(re.geometry[ve][Te],V));J.push(pe)}O.push(Le(re.id,fe,J,re.tags))}return O}function kt(ne,V){var O=[];O.size=ne.size,ne.start!==void 0&&(O.start=ne.start,O.end=ne.end);for(var W=0;W<ne.length;W+=3)O.push(ne[W]+V,ne[W+1],ne[W+2]);return O}function en(ne,V){if(ne.transformed)return ne;var O,W,J,re=1<<ne.z,fe=ne.x,ve=ne.y;for(O=0;O<ne.features.length;O++){var pe=ne.features[O],Te=pe.geometry,Ue=pe.type;if(pe.geometry=[],Ue===1)for(W=0;W<Te.length;W+=2)pe.geometry.push(Ft(Te[W],Te[W+1],V,re,fe,ve));else for(W=0;W<Te.length;W++){var st=[];for(J=0;J<Te[W].length;J+=2)st.push(Ft(Te[W][J],Te[W][J+1],V,re,fe,ve));pe.geometry.push(st)}}return ne.transformed=!0,ne}function Ft(ne,V,O,W,J,re){return[Math.round(O*(ne*W-J)),Math.round(O*(V*W-re))]}function Vt(ne,V,O,W,J){for(var re=V===J.maxZoom?0:J.tolerance/((1<<V)*J.extent),fe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:O,y:W,z:V,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ve=0;ve<ne.length;ve++){fe.numFeatures++,Qn(fe,ne[ve],re,J);var pe=ne[ve].minX,Te=ne[ve].minY,Ue=ne[ve].maxX,st=ne[ve].maxY;pe<fe.minX&&(fe.minX=pe),Te<fe.minY&&(fe.minY=Te),Ue>fe.maxX&&(fe.maxX=Ue),st>fe.maxY&&(fe.maxY=st)}return fe}function Qn(ne,V,O,W){var J=V.geometry,re=V.type,fe=[];if(re==="Point"||re==="MultiPoint")for(var ve=0;ve<J.length;ve+=3)fe.push(J[ve]),fe.push(J[ve+1]),ne.numPoints++,ne.numSimplified++;else if(re==="LineString")qn(fe,J,ne,O,!1,!1);else if(re==="MultiLineString"||re==="Polygon")for(ve=0;ve<J.length;ve++)qn(fe,J[ve],ne,O,re==="Polygon",ve===0);else if(re==="MultiPolygon")for(var pe=0;pe<J.length;pe++){var Te=J[pe];for(ve=0;ve<Te.length;ve++)qn(fe,Te[ve],ne,O,!0,ve===0)}if(fe.length){var Ue=V.tags||null;if(re==="LineString"&&W.lineMetrics){for(var st in Ue={},V.tags)Ue[st]=V.tags[st];Ue.mapbox_clip_start=J.start/J.size,Ue.mapbox_clip_end=J.end/J.size}var $e={geometry:fe,type:re==="Polygon"||re==="MultiPolygon"?3:re==="LineString"||re==="MultiLineString"?2:1,tags:Ue};V.id!==null&&($e.id=V.id),ne.features.push($e)}}function qn(ne,V,O,W,J,re){var fe=W*W;if(W>0&&V.size<(J?fe:W))O.numPoints+=V.length/3;else{for(var ve=[],pe=0;pe<V.length;pe+=3)(W===0||V[pe+2]>fe)&&(O.numSimplified++,ve.push(V[pe]),ve.push(V[pe+1])),O.numPoints++;J&&function(Te,Ue){for(var st=0,$e=0,_t=Te.length,bt=_t-2;$e<_t;bt=$e,$e+=2)st+=(Te[$e]-Te[bt])*(Te[$e+1]+Te[bt+1]);if(st>0===Ue)for($e=0,_t=Te.length;$e<_t/2;$e+=2){var zt=Te[$e],Ct=Te[$e+1];Te[$e]=Te[_t-2-$e],Te[$e+1]=Te[_t-1-$e],Te[_t-2-$e]=zt,Te[_t-1-$e]=Ct}}(ve,re),ne.push(ve)}}function tr(ne,V){var O=(V=this.options=function(J,re){for(var fe in re)J[fe]=re[fe];return J}(Object.create(this.options),V)).debug;if(O&&console.time("preprocess data"),V.maxZoom<0||V.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(V.promoteId&&V.generateId)throw new Error("promoteId and generateId cannot be used together.");var W=function(J,re){var fe=[];if(J.type==="FeatureCollection")for(var ve=0;ve<J.features.length;ve++)ln(fe,J.features[ve],re,ve);else ln(fe,J.type==="Feature"?J:{geometry:J},re);return fe}(ne,V);this.tiles={},this.tileCoords=[],O&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",V.indexMaxZoom,V.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),W=function(J,re){var fe=re.buffer/re.extent,ve=J,pe=Ot(J,1,-1-fe,fe,0,-1,2,re),Te=Ot(J,1,1-fe,2+fe,0,-1,2,re);return(pe||Te)&&(ve=Ot(J,1,-fe,1+fe,0,-1,2,re)||[],pe&&(ve=He(pe,1).concat(ve)),Te&&(ve=ve.concat(He(Te,-1)))),ve}(W,V),W.length&&this.splitTile(W,0,0,0),O&&(W.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Tr(ne,V,O){return 32*((1<<ne)*O+V)+ne}function _r(ne,V){const O=ne.tileID.canonical;if(!this._geoJSONIndex)return V(null,null);const W=this._geoJSONIndex.getTile(O.z,O.x,O.y);if(!W)return V(null,null);const J=new Ne(W.features);let re=Fe.exports(J);re.byteOffset===0&&re.byteLength===re.buffer.byteLength||(re=new Uint8Array(re)),V(null,{vectorTile:J,rawData:re.buffer})}tr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},tr.prototype.splitTile=function(ne,V,O,W,J,re,fe){for(var ve=[ne,V,O,W],pe=this.options,Te=pe.debug;ve.length;){W=ve.pop(),O=ve.pop(),V=ve.pop(),ne=ve.pop();var Ue=1<<V,st=Tr(V,O,W),$e=this.tiles[st];if(!$e&&(Te>1&&console.time("creation"),$e=this.tiles[st]=Vt(ne,V,O,W,pe),this.tileCoords.push({z:V,x:O,y:W}),Te)){Te>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",V,O,W,$e.numFeatures,$e.numPoints,$e.numSimplified),console.timeEnd("creation"));var _t="z"+V;this.stats[_t]=(this.stats[_t]||0)+1,this.total++}if($e.source=ne,J){if(V===pe.maxZoom||V===J)continue;var bt=1<<J-V;if(O!==Math.floor(re/bt)||W!==Math.floor(fe/bt))continue}else if(V===pe.indexMaxZoom||$e.numPoints<=pe.indexMaxPoints)continue;if($e.source=null,ne.length!==0){Te>1&&console.time("clipping");var zt,Ct,on,Qt,Xt,sn,an=.5*pe.buffer/pe.extent,mr=.5-an,er=.5+an,Bn=1+an;zt=Ct=on=Qt=null,Xt=Ot(ne,Ue,O-an,O+er,0,$e.minX,$e.maxX,pe),sn=Ot(ne,Ue,O+mr,O+Bn,0,$e.minX,$e.maxX,pe),ne=null,Xt&&(zt=Ot(Xt,Ue,W-an,W+er,1,$e.minY,$e.maxY,pe),Ct=Ot(Xt,Ue,W+mr,W+Bn,1,$e.minY,$e.maxY,pe),Xt=null),sn&&(on=Ot(sn,Ue,W-an,W+er,1,$e.minY,$e.maxY,pe),Qt=Ot(sn,Ue,W+mr,W+Bn,1,$e.minY,$e.maxY,pe),sn=null),Te>1&&console.timeEnd("clipping"),ve.push(zt||[],V+1,2*O,2*W),ve.push(Ct||[],V+1,2*O,2*W+1),ve.push(on||[],V+1,2*O+1,2*W),ve.push(Qt||[],V+1,2*O+1,2*W+1)}}},tr.prototype.getTile=function(ne,V,O){var W=this.options,J=W.extent,re=W.debug;if(ne<0||ne>24)return null;var fe=1<<ne,ve=Tr(ne,V=(V%fe+fe)%fe,O);if(this.tiles[ve])return en(this.tiles[ve],J);re>1&&console.log("drilling down to z%d-%d-%d",ne,V,O);for(var pe,Te=ne,Ue=V,st=O;!pe&&Te>0;)Te--,Ue=Math.floor(Ue/2),st=Math.floor(st/2),pe=this.tiles[Tr(Te,Ue,st)];return pe&&pe.source?(re>1&&console.log("found parent tile z%d-%d-%d",Te,Ue,st),re>1&&console.time("drilling down"),this.splitTile(pe.source,Te,Ue,st,ne,V,O),re>1&&console.timeEnd("drilling down"),this.tiles[ve]?en(this.tiles[ve],J):null):null};class fs extends q{constructor(V,O,W,J){super(V,O,W,_r),J&&(this.loadGeoJSON=J)}loadData(V,O){var W;(W=this._pendingRequest)===null||W===void 0||W.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const J=!!(V&&V.request&&V.request.collectResourceTiming)&&new c.RequestPerformance(V.request);this._pendingCallback=O,this._pendingRequest=this.loadGeoJSON(V,(re,fe)=>{if(delete this._pendingCallback,delete this._pendingRequest,re||!fe)return O(re);if(typeof fe!="object")return O(new Error(`Input data given to '${V.source}' is not a valid GeoJSON object.`));{G(fe,!0);try{if(V.filter){const pe=c.createExpression(V.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(pe.result==="error")throw new Error(pe.value.map(Ue=>`${Ue.key}: ${Ue.message}`).join(", "));fe={type:"FeatureCollection",features:fe.features.filter(Ue=>pe.value.evaluate({zoom:0},Ue))}}this._geoJSONIndex=V.cluster?new jt(function({superclusterOptions:pe,clusterProperties:Te}){if(!Te||!pe)return pe;const Ue={},st={},$e={accumulated:null,zoom:0},_t={properties:null},bt=Object.keys(Te);for(const zt of bt){const[Ct,on]=Te[zt],Qt=c.createExpression(on),Xt=c.createExpression(typeof Ct=="string"?[Ct,["accumulated"],["get",zt]]:Ct);Ue[zt]=Qt.value,st[zt]=Xt.value}return pe.map=zt=>{_t.properties=zt;const Ct={};for(const on of bt)Ct[on]=Ue[on].evaluate($e,_t);return Ct},pe.reduce=(zt,Ct)=>{_t.properties=Ct;for(const on of bt)$e.accumulated=zt[on],zt[on]=st[on].evaluate($e,_t)},pe}(V)).load(fe.features):function(pe,Te){return new tr(pe,Te)}(fe,V.geojsonVtOptions)}catch(pe){return O(pe)}this.loaded={};const ve={};if(J){const pe=J.finish();pe&&(ve.resourceTiming={},ve.resourceTiming[V.source]=JSON.parse(JSON.stringify(pe)))}O(null,ve)}})}reloadTile(V,O){const W=this.loaded;return W&&W[V.uid]?super.reloadTile(V,O):this.loadTile(V,O)}loadGeoJSON(V,O){if(V.request)return c.getJSON(V.request,O);if(typeof V.data=="string")try{O(null,JSON.parse(V.data))}catch{O(new Error(`Input data given to '${V.source}' is not a valid GeoJSON object.`))}else O(new Error(`Input data given to '${V.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(V,O){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),O()}getClusterExpansionZoom(V,O){try{O(null,this._geoJSONIndex.getClusterExpansionZoom(V.clusterId))}catch(W){O(W)}}getClusterChildren(V,O){try{O(null,this._geoJSONIndex.getChildren(V.clusterId))}catch(W){O(W)}}getClusterLeaves(V,O){try{O(null,this._geoJSONIndex.getLeaves(V.clusterId,V.limit,V.offset))}catch(W){O(W)}}}class yi{constructor(V){this.self=V,this.actor=new c.Actor(V,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:q,geojson:fs},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(O,W)=>{if(this.workerSourceTypes[O])throw new Error(`Worker source with name "${O}" already registered.`);this.workerSourceTypes[O]=W},this.self.registerRTLTextPlugin=O=>{if(c.plugin.isParsed())throw new Error("RTL text plugin already registered.");c.plugin.applyArabicShaping=O.applyArabicShaping,c.plugin.processBidirectionalText=O.processBidirectionalText,c.plugin.processStyledBidirectionalText=O.processStyledBidirectionalText}}setReferrer(V,O){this.referrer=O}setImages(V,O,W){this.availableImages[V]=O;for(const J in this.workerSources[V]){const re=this.workerSources[V][J];for(const fe in re)re[fe].availableImages=O}W()}setLayers(V,O,W){this.getLayerIndex(V).replace(O),W()}updateLayers(V,O,W){this.getLayerIndex(V).update(O.layers,O.removedIds),W()}loadTile(V,O,W){this.getWorkerSource(V,O.type,O.source).loadTile(O,W)}loadDEMTile(V,O,W){this.getDEMWorkerSource(V,O.source).loadTile(O,W)}reloadTile(V,O,W){this.getWorkerSource(V,O.type,O.source).reloadTile(O,W)}abortTile(V,O,W){this.getWorkerSource(V,O.type,O.source).abortTile(O,W)}removeTile(V,O,W){this.getWorkerSource(V,O.type,O.source).removeTile(O,W)}removeDEMTile(V,O){this.getDEMWorkerSource(V,O.source).removeTile(O)}removeSource(V,O,W){if(!this.workerSources[V]||!this.workerSources[V][O.type]||!this.workerSources[V][O.type][O.source])return;const J=this.workerSources[V][O.type][O.source];delete this.workerSources[V][O.type][O.source],J.removeSource!==void 0?J.removeSource(O,W):W()}loadWorkerSource(V,O,W){try{this.self.importScripts(O.url),W()}catch(J){W(J.toString())}}syncRTLPluginState(V,O,W){try{c.plugin.setState(O);const J=c.plugin.getPluginURL();if(c.plugin.isLoaded()&&!c.plugin.isParsed()&&J!=null){this.self.importScripts(J);const re=c.plugin.isParsed();W(re?void 0:new Error(`RTL Text Plugin failed to import scripts from ${J}`),re)}}catch(J){W(J.toString())}}getAvailableImages(V){let O=this.availableImages[V];return O||(O=[]),O}getLayerIndex(V){let O=this.layerIndexes[V];return O||(O=this.layerIndexes[V]=new P),O}getWorkerSource(V,O,W){if(this.workerSources[V]||(this.workerSources[V]={}),this.workerSources[V][O]||(this.workerSources[V][O]={}),!this.workerSources[V][O][W]){const J={send:(re,fe,ve)=>{this.actor.send(re,fe,ve,V)}};this.workerSources[V][O][W]=new this.workerSourceTypes[O](J,this.getLayerIndex(V),this.getAvailableImages(V))}return this.workerSources[V][O][W]}getDEMWorkerSource(V,O){return this.demWorkerSources[V]||(this.demWorkerSources[V]={}),this.demWorkerSources[V][O]||(this.demWorkerSources[V][O]=new H),this.demWorkerSources[V][O]}enforceCacheSizeLimit(V,O){c.enforceCacheSizeLimit(O)}}return c.isWorker()&&(self.worker=new yi(self)),yi}),m(["./shared"],function(c){var L=T;function T(_){return!function(s){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var y,w,M=new Blob([""],{type:"text/javascript"}),k=URL.createObjectURL(M);try{w=new Worker(k),y=!0}catch{y=!1}return w&&w.terminate(),URL.revokeObjectURL(k),y}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var y=document.createElement("canvas");y.width=y.height=1;var w=y.getContext("2d");if(!w)return!1;var M=w.getImageData(0,0,1,1);return M&&M.width===y.width}()?(P[h=s&&s.failIfMajorPerformanceCaveat]===void 0&&(P[h]=function(y){var w,M=function(k){var R=document.createElement("canvas"),A=Object.create(T.webGLContextAttributes);return A.failIfMajorPerformanceCaveat=k,R.getContext("webgl",A)||R.getContext("experimental-webgl",A)}(y);if(!M)return!1;try{w=M.createShader(M.VERTEX_SHADER)}catch{return!1}return!(!w||M.isContextLost())&&(M.shaderSource(w,"void main() {}"),M.compileShader(w),M.getShaderParameter(w,M.COMPILE_STATUS)===!0)}(h)),P[h]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var h}(_)}var P={};function D(_,s){if(Array.isArray(_)){if(!Array.isArray(s)||_.length!==s.length)return!1;for(let h=0;h<_.length;h++)if(!D(_[h],s[h]))return!1;return!0}if(typeof _=="object"&&_!==null&&s!==null){if(typeof s!="object"||Object.keys(_).length!==Object.keys(s).length)return!1;for(const h in _)if(!D(_[h],s[h]))return!1;return!0}return _===s}T.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class N{static testProp(s){if(!N.docStyle)return s[0];for(let h=0;h<s.length;h++)if(s[h]in N.docStyle)return s[h];return s[0]}static create(s,h,y){const w=window.document.createElement(s);return h!==void 0&&(w.className=h),y&&y.appendChild(w),w}static createNS(s,h){return window.document.createElementNS(s,h)}static disableDrag(){N.docStyle&&N.selectProp&&(N.userSelect=N.docStyle[N.selectProp],N.docStyle[N.selectProp]="none")}static enableDrag(){N.docStyle&&N.selectProp&&(N.docStyle[N.selectProp]=N.userSelect)}static setTransform(s,h){s.style[N.transformProp]=h}static addEventListener(s,h,y,w={}){s.addEventListener(h,y,"passive"in w?w:w.capture)}static removeEventListener(s,h,y,w={}){s.removeEventListener(h,y,"passive"in w?w:w.capture)}static suppressClickInternal(s){s.preventDefault(),s.stopPropagation(),window.removeEventListener("click",N.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",N.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",N.suppressClickInternal,!0)},0)}static mousePos(s,h){const y=s.getBoundingClientRect();return new c.pointGeometry(h.clientX-y.left-s.clientLeft,h.clientY-y.top-s.clientTop)}static touchPos(s,h){const y=s.getBoundingClientRect(),w=[];for(let M=0;M<h.length;M++)w.push(new c.pointGeometry(h[M].clientX-y.left-s.clientLeft,h[M].clientY-y.top-s.clientTop));return w}static mouseButton(s){return s.button}static remove(s){s.parentNode&&s.parentNode.removeChild(s)}}N.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,N.selectProp=N.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),N.transformProp=N.testProp(["transform","WebkitTransform"]);class ${constructor(s){this._transformRequestFn=s}transformRequest(s,h){return this._transformRequestFn&&this._transformRequestFn(s,h)||{url:s}}normalizeSpriteURL(s,h,y){const w=function(M){const k=M.match(U);if(!k)throw new Error(`Unable to parse URL "${M}"`);return{protocol:k[1],authority:k[2],path:k[3]||"/",params:k[4]?k[4].split("&"):[]}}(s);return w.path+=`${h}${y}`,function(M){const k=M.params.length?`?${M.params.join("&")}`:"";return`${M.protocol}://${M.authority}${M.path}${k}`}(w)}setTransformRequest(s){this._transformRequestFn=s}}const U=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class q{constructor(s,h,y,w){this.context=s,this.format=y,this.texture=s.gl.createTexture(),this.update(h,w)}update(s,h,y){const{width:w,height:M}=s,k=!(this.size&&this.size[0]===w&&this.size[1]===M||y),{context:R}=this,{gl:A}=R;if(this.useMipmap=!!(h&&h.useMipmap),A.bindTexture(A.TEXTURE_2D,this.texture),R.pixelStoreUnpackFlipY.set(!1),R.pixelStoreUnpack.set(1),R.pixelStoreUnpackPremultiplyAlpha.set(this.format===A.RGBA&&(!h||h.premultiply!==!1)),k)this.size=[w,M],s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||c.isImageBitmap(s)?A.texImage2D(A.TEXTURE_2D,0,this.format,this.format,A.UNSIGNED_BYTE,s):A.texImage2D(A.TEXTURE_2D,0,this.format,w,M,0,this.format,A.UNSIGNED_BYTE,s.data);else{const{x:F,y:Z}=y||{x:0,y:0};s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||c.isImageBitmap(s)?A.texSubImage2D(A.TEXTURE_2D,0,F,Z,A.RGBA,A.UNSIGNED_BYTE,s):A.texSubImage2D(A.TEXTURE_2D,0,F,Z,w,M,A.RGBA,A.UNSIGNED_BYTE,s.data)}this.useMipmap&&this.isSizePowerOfTwo()&&A.generateMipmap(A.TEXTURE_2D)}bind(s,h,y){const{context:w}=this,{gl:M}=w;M.bindTexture(M.TEXTURE_2D,this.texture),y!==M.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(y=M.LINEAR),s!==this.filter&&(M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MAG_FILTER,s),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MIN_FILTER,y||s),this.filter=s),h!==this.wrap&&(M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_S,h),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_T,h),this.wrap=h)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:s}=this.context;s.deleteTexture(this.texture),this.texture=null}}function H(_){const{userImage:s}=_;return!!(s&&s.render&&s.render())&&(_.data.replace(new Uint8Array(s.data.buffer)),!0)}class G extends c.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(s){if(this.loaded!==s&&(this.loaded=s,s)){for(const{ids:h,callback:y}of this.requestors)this._notify(h,y);this.requestors=[]}}getImage(s){return this.images[s]}addImage(s,h){if(this.images[s])throw new Error(`Image id ${s} already exist, use updateImage instead`);this._validate(s,h)&&(this.images[s]=h)}_validate(s,h){let y=!0;return this._validateStretch(h.stretchX,h.data&&h.data.width)||(this.fire(new c.ErrorEvent(new Error(`Image "${s}" has invalid "stretchX" value`))),y=!1),this._validateStretch(h.stretchY,h.data&&h.data.height)||(this.fire(new c.ErrorEvent(new Error(`Image "${s}" has invalid "stretchY" value`))),y=!1),this._validateContent(h.content,h)||(this.fire(new c.ErrorEvent(new Error(`Image "${s}" has invalid "content" value`))),y=!1),y}_validateStretch(s,h){if(!s)return!0;let y=0;for(const w of s){if(w[0]<y||w[1]<w[0]||h<w[1])return!1;y=w[1]}return!0}_validateContent(s,h){return!(s&&(s.length!==4||s[0]<0||h.data.width<s[0]||s[1]<0||h.data.height<s[1]||s[2]<0||h.data.width<s[2]||s[3]<0||h.data.height<s[3]||s[2]<s[0]||s[3]<s[1]))}updateImage(s,h){const y=this.images[s];if(y.data.width!==h.data.width||y.data.height!==h.data.height)throw new Error(`size mismatch between old image (${y.data.width}x${y.data.height}) and new image (${h.data.width}x${h.data.height}).`);h.version=y.version+1,this.images[s]=h,this.updatedImages[s]=!0}removeImage(s){const h=this.images[s];delete this.images[s],delete this.patterns[s],h.userImage&&h.userImage.onRemove&&h.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(s,h){let y=!0;if(!this.isLoaded())for(const w of s)this.images[w]||(y=!1);this.isLoaded()||y?this._notify(s,h):this.requestors.push({ids:s,callback:h})}_notify(s,h){const y={};for(const w of s){this.images[w]||this.fire(new c.Event("styleimagemissing",{id:w}));const M=this.images[w];M?y[w]={data:M.data.clone(),pixelRatio:M.pixelRatio,sdf:M.sdf,version:M.version,stretchX:M.stretchX,stretchY:M.stretchY,content:M.content,hasRenderCallback:!!(M.userImage&&M.userImage.render)}:c.warnOnce(`Image "${w}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}h(null,y)}getPixelSize(){const{width:s,height:h}=this.atlasImage;return{width:s,height:h}}getPattern(s){const h=this.patterns[s],y=this.getImage(s);if(!y)return null;if(h&&h.position.version===y.version)return h.position;if(h)h.position.version=y.version;else{const w={w:y.data.width+2,h:y.data.height+2,x:0,y:0},M=new c.ImagePosition(w,y);this.patterns[s]={bin:w,position:M}}return this._updatePatternAtlas(),this.patterns[s].position}bind(s){const h=s.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new q(s,this.atlasImage,h.RGBA),this.atlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE)}_updatePatternAtlas(){const s=[];for(const M in this.patterns)s.push(this.patterns[M].bin);const{w:h,h:y}=c.potpack(s),w=this.atlasImage;w.resize({width:h||1,height:y||1});for(const M in this.patterns){const{bin:k}=this.patterns[M],R=k.x+1,A=k.y+1,F=this.images[M].data,Z=F.width,Y=F.height;c.RGBAImage.copy(F,w,{x:0,y:0},{x:R,y:A},{width:Z,height:Y}),c.RGBAImage.copy(F,w,{x:0,y:Y-1},{x:R,y:A-1},{width:Z,height:1}),c.RGBAImage.copy(F,w,{x:0,y:0},{x:R,y:A+Y},{width:Z,height:1}),c.RGBAImage.copy(F,w,{x:Z-1,y:0},{x:R-1,y:A},{width:1,height:Y}),c.RGBAImage.copy(F,w,{x:0,y:0},{x:R+Z,y:A},{width:1,height:Y})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(s){for(const h of s){if(this.callbackDispatchedThisFrame[h])continue;this.callbackDispatchedThisFrame[h]=!0;const y=this.images[h];y||c.warnOnce(`Image with ID: "${h}" was not found`),H(y)&&this.updateImage(h,y)}}}const te=1e20;function oe(_,s,h,y,w,M,k,R,A){for(let F=s;F<s+y;F++)Ce(_,h*M+F,M,w,k,R,A);for(let F=h;F<h+w;F++)Ce(_,F*M+s,1,y,k,R,A)}function Ce(_,s,h,y,w,M,k){M[0]=0,k[0]=-1e20,k[1]=te,w[0]=_[s];for(let R=1,A=0,F=0;R<y;R++){w[R]=_[s+R*h];const Z=R*R;do{const Y=M[A];F=(w[R]-w[Y]+Z-Y*Y)/(R-Y)/2}while(F<=k[A]&&--A>-1);A++,M[A]=R,k[A]=F,k[A+1]=te}for(let R=0,A=0;R<y;R++){for(;k[A+1]<R;)A++;const F=M[A],Z=R-F;_[s+R*h]=w[F]+Z*Z}}class ae{constructor(s,h){this.requestManager=s,this.localIdeographFontFamily=h,this.entries={}}setURL(s){this.url=s}getGlyphs(s,h){const y=[];for(const w in s)for(const M of s[w])y.push({stack:w,id:M});c.asyncAll(y,({stack:w,id:M},k)=>{let R=this.entries[w];R||(R=this.entries[w]={glyphs:{},requests:{},ranges:{}});let A=R.glyphs[M];if(A!==void 0)return void k(null,{stack:w,id:M,glyph:A});if(A=this._tinySDF(R,w,M),A)return R.glyphs[M]=A,void k(null,{stack:w,id:M,glyph:A});const F=Math.floor(M/256);if(256*F>65535)return void k(new Error("glyphs > 65535 not supported"));if(R.ranges[F])return void k(null,{stack:w,id:M,glyph:A});let Z=R.requests[F];Z||(Z=R.requests[F]=[],ae.loadGlyphRange(w,F,this.url,this.requestManager,(Y,Q)=>{if(Q){for(const le in Q)this._doesCharSupportLocalGlyph(+le)||(R.glyphs[+le]=Q[+le]);R.ranges[F]=!0}for(const le of Z)le(Y,Q);delete R.requests[F]})),Z.push((Y,Q)=>{Y?k(Y):Q&&k(null,{stack:w,id:M,glyph:Q[M]||null})})},(w,M)=>{if(w)h(w);else if(M){const k={};for(const{stack:R,id:A,glyph:F}of M)(k[R]||(k[R]={}))[A]=F&&{id:F.id,bitmap:F.bitmap.clone(),metrics:F.metrics};h(null,k)}})}_doesCharSupportLocalGlyph(s){return!!this.localIdeographFontFamily&&(c.unicodeBlockLookup["CJK Unified Ideographs"](s)||c.unicodeBlockLookup["Hangul Syllables"](s)||c.unicodeBlockLookup.Hiragana(s)||c.unicodeBlockLookup.Katakana(s))}_tinySDF(s,h,y){const w=this.localIdeographFontFamily;if(!w||!this._doesCharSupportLocalGlyph(y))return;let M=s.tinySDF;if(!M){let R="400";/bold/i.test(h)?R="900":/medium/i.test(h)?R="500":/light/i.test(h)&&(R="200"),M=s.tinySDF=new ae.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:w,fontWeight:R})}const k=M.draw(String.fromCharCode(y));return{id:y,bitmap:new c.AlphaImage({width:k.width||30,height:k.height||30},k.data),metrics:{width:k.glyphWidth||24,height:k.glyphHeight||24,left:k.glyphLeft||0,top:k.glyphTop-27||-8,advance:k.glyphAdvance||24}}}}ae.loadGlyphRange=function(_,s,h,y,w){const M=256*s,k=M+255,R=y.transformRequest(h.replace("{fontstack}",_).replace("{range}",`${M}-${k}`),c.ResourceType.Glyphs);c.getArrayBuffer(R,(A,F)=>{if(A)w(A);else if(F){const Z={};for(const Y of c.parseGlyphPbf(F))Z[Y.id]=Y;w(null,Z)}})},ae.TinySDF=class{constructor({fontSize:_=24,buffer:s=3,radius:h=8,cutoff:y=.25,fontFamily:w="sans-serif",fontWeight:M="normal",fontStyle:k="normal"}={}){this.buffer=s,this.cutoff=y,this.radius=h;const R=this.size=_+4*s,A=this._createCanvas(R),F=this.ctx=A.getContext("2d",{willReadFrequently:!0});F.font=`${k} ${M} ${_}px ${w}`,F.textBaseline="alphabetic",F.textAlign="left",F.fillStyle="black",this.gridOuter=new Float64Array(R*R),this.gridInner=new Float64Array(R*R),this.f=new Float64Array(R),this.z=new Float64Array(R+1),this.v=new Uint16Array(R)}_createCanvas(_){const s=document.createElement("canvas");return s.width=s.height=_,s}draw(_){const{width:s,actualBoundingBoxAscent:h,actualBoundingBoxDescent:y,actualBoundingBoxLeft:w,actualBoundingBoxRight:M}=this.ctx.measureText(_),k=Math.ceil(h),R=Math.min(this.size-this.buffer,Math.ceil(M-w)),A=Math.min(this.size-this.buffer,k+Math.ceil(y)),F=R+2*this.buffer,Z=A+2*this.buffer,Y=Math.max(F*Z,0),Q=new Uint8ClampedArray(Y),le={data:Q,width:F,height:Z,glyphWidth:R,glyphHeight:A,glyphTop:k,glyphLeft:0,glyphAdvance:s};if(R===0||A===0)return le;const{ctx:se,buffer:ie,gridInner:xe,gridOuter:De}=this;se.clearRect(ie,ie,R,A),se.fillText(_,ie,ie+k);const Ie=se.getImageData(ie,ie,R,A);De.fill(te,0,Y),xe.fill(0,0,Y);for(let ue=0;ue<A;ue++)for(let Ve=0;Ve<R;Ve++){const ze=Ie.data[4*(ue*R+Ve)+3]/255;if(ze===0)continue;const Ge=(ue+ie)*F+Ve+ie;if(ze===1)De[Ge]=0,xe[Ge]=te;else{const rt=.5-ze;De[Ge]=rt>0?rt*rt:0,xe[Ge]=rt<0?rt*rt:0}}oe(De,0,0,F,Z,F,this.f,this.v,this.z),oe(xe,ie,ie,R,A,F,this.f,this.v,this.z);for(let ue=0;ue<Y;ue++){const Ve=Math.sqrt(De[ue])-Math.sqrt(xe[ue]);Q[ue]=Math.round(255-255*(Ve/this.radius+this.cutoff))}return le}};const Ne=new c.Properties({anchor:new c.DataConstantProperty(c.spec.light.anchor),position:new class{constructor(){this.specification=c.spec.light.position}possiblyEvaluate(_,s){return c.sphericalToCartesian(_.expression.evaluate(s))}interpolate(_,s,h){return{x:c.number(_.x,s.x,h),y:c.number(_.y,s.y,h),z:c.number(_.z,s.z,h)}}},color:new c.DataConstantProperty(c.spec.light.color),intensity:new c.DataConstantProperty(c.spec.light.intensity)}),Fe="-transition";class ye extends c.Evented{constructor(s){super(),this._transitionable=new c.Transitionable(Ne),this.setLight(s),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(s,h={}){if(!this._validate(c.validateLight,s,h))for(const y in s){const w=s[y];y.endsWith(Fe)?this._transitionable.setTransition(y.slice(0,-Fe.length),w):this._transitionable.setValue(y,w)}}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,h,y){return(!y||y.validate!==!1)&&c.emitValidationErrors(this,s.call(c.validateStyle,c.extend({value:h,style:{glyphs:!0,sprite:!0},styleSpec:c.spec})))}}class Ke{constructor(s,h){this.width=s,this.height=h,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(s,h){const y=s.join(",")+String(h);return this.dashEntry[y]||(this.dashEntry[y]=this.addDash(s,h)),this.dashEntry[y]}getDashRanges(s,h,y){const w=[];let M=s.length%2==1?-s[s.length-1]*y:0,k=s[0]*y,R=!0;w.push({left:M,right:k,isDash:R,zeroLength:s[0]===0});let A=s[0];for(let F=1;F<s.length;F++){R=!R;const Z=s[F];M=A*y,A+=Z,k=A*y,w.push({left:M,right:k,isDash:R,zeroLength:Z===0})}return w}addRoundDash(s,h,y){const w=h/2;for(let M=-y;M<=y;M++){const k=this.width*(this.nextRow+y+M);let R=0,A=s[R];for(let F=0;F<this.width;F++){F/A.right>1&&(A=s[++R]);const Z=Math.abs(F-A.left),Y=Math.abs(F-A.right),Q=Math.min(Z,Y);let le;const se=M/y*(w+1);if(A.isDash){const ie=w-Math.abs(se);le=Math.sqrt(Q*Q+ie*ie)}else le=w-Math.sqrt(Q*Q+se*se);this.data[k+F]=Math.max(0,Math.min(255,le+128))}}}addRegularDash(s){for(let R=s.length-1;R>=0;--R){const A=s[R],F=s[R+1];A.zeroLength?s.splice(R,1):F&&F.isDash===A.isDash&&(F.left=A.left,s.splice(R,1))}const h=s[0],y=s[s.length-1];h.isDash===y.isDash&&(h.left=y.left-this.width,y.right=h.right+this.width);const w=this.width*this.nextRow;let M=0,k=s[M];for(let R=0;R<this.width;R++){R/k.right>1&&(k=s[++M]);const A=Math.abs(R-k.left),F=Math.abs(R-k.right),Z=Math.min(A,F);this.data[w+R]=Math.max(0,Math.min(255,(k.isDash?Z:-Z)+128))}}addDash(s,h){const y=h?7:0,w=2*y+1;if(this.nextRow+w>this.height)return c.warnOnce("LineAtlas out of space"),null;let M=0;for(let R=0;R<s.length;R++)M+=s[R];if(M!==0){const R=this.width/M,A=this.getDashRanges(s,this.width,R);h?this.addRoundDash(A,R,y):this.addRegularDash(A)}const k={y:(this.nextRow+y+.5)/this.height,height:2*y/this.height,width:M};return this.nextRow+=w,this.dirty=!0,k}bind(s){const h=s.gl;this.texture?(h.bindTexture(h.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.width,this.height,h.ALPHA,h.UNSIGNED_BYTE,this.data))):(this.texture=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.texture),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texImage2D(h.TEXTURE_2D,0,h.ALPHA,this.width,this.height,0,h.ALPHA,h.UNSIGNED_BYTE,this.data))}}class Me{constructor(s,h){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=c.uniqueId();const y=this.workerPool.acquire(this.id);for(let w=0;w<y.length;w++){const M=new Me.Actor(y[w],h,this.id);M.name=`Worker ${w}`,this.actors.push(M)}if(!this.actors.length)throw new Error("No actors found")}broadcast(s,h,y){c.asyncAll(this.actors,(w,M)=>{w.send(s,h,M)},y=y||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(s=>{s.remove()}),this.actors=[],this.workerPool.release(this.id)}}function qe(_,s,h){const y=function(w,M){if(w)return h(w);if(M){const k=c.pick(c.extend(M,_),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);M.vector_layers&&(k.vectorLayers=M.vector_layers,k.vectorLayerIds=k.vectorLayers.map(R=>R.id)),h(null,k)}};return _.url?c.getJSON(s.transformRequest(_.url,c.ResourceType.Source),y):c.exported.frame(()=>y(null,_))}Me.Actor=c.Actor;class Re{constructor(s,h,y){this.bounds=c.LngLatBounds.convert(this.validateBounds(s)),this.minzoom=h||0,this.maxzoom=y||24}validateBounds(s){return Array.isArray(s)&&s.length===4?[Math.max(-180,s[0]),Math.max(-90,s[1]),Math.min(180,s[2]),Math.min(90,s[3])]:[-180,-90,180,90]}contains(s){const h=Math.pow(2,s.z),y=Math.floor(c.mercatorXfromLng(this.bounds.getWest())*h),w=Math.floor(c.mercatorYfromLat(this.bounds.getNorth())*h),M=Math.ceil(c.mercatorXfromLng(this.bounds.getEast())*h),k=Math.ceil(c.mercatorYfromLat(this.bounds.getSouth())*h);return s.x>=y&&s.x<M&&s.y>=w&&s.y<k}}class dt extends c.Evented{constructor(s,h,y,w){if(super(),this.id=s,this.dispatcher=y,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.extend(this,c.pick(h,["url","scheme","tileSize","promoteId"])),this._options=c.extend({type:"vector"},h),this._collectResourceTiming=h.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(w)}load(){this._loaded=!1,this.fire(new c.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=qe(this._options,this.map._requestManager,(s,h)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),s?this.fire(new c.ErrorEvent(s)):h&&(c.extend(this,h),h.bounds&&(this.tileBounds=new Re(h.bounds,this.minzoom,this.maxzoom)),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}onAdd(s){this.map=s,this.load()}setSourceProperty(s){this._tileJSONRequest&&this._tileJSONRequest.cancel(),s(),this.load()}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return c.extend({},this._options)}loadTile(s,h){const y=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),w={request:this.map._requestManager.transformRequest(y,c.ResourceType.Tile),uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,tileSize:this.tileSize*s.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function M(k,R){return delete s.request,s.aborted?h(null):k&&k.status!==404?h(k):(R&&R.resourceTiming&&(s.resourceTiming=R.resourceTiming),this.map._refreshExpiredTiles&&R&&s.setExpiryData(R),s.loadVectorData(R,this.map.painter),c.cacheEntryPossiblyAdded(this.dispatcher),h(null),void(s.reloadCallback&&(this.loadTile(s,s.reloadCallback),s.reloadCallback=null)))}w.request.collectResourceTiming=this._collectResourceTiming,s.actor&&s.state!=="expired"?s.state==="loading"?s.reloadCallback=h:s.request=s.actor.send("reloadTile",w,M.bind(this)):(s.actor=this.dispatcher.getActor(),s.request=s.actor.send("loadTile",w,M.bind(this)))}abortTile(s){s.request&&(s.request.cancel(),delete s.request),s.actor&&s.actor.send("abortTile",{uid:s.uid,type:this.type,source:this.id},void 0)}unloadTile(s){s.unloadVectorData(),s.actor&&s.actor.send("removeTile",{uid:s.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Xe extends c.Evented{constructor(s,h,y,w){super(),this.id=s,this.dispatcher=y,this.setEventedParent(w),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.extend({type:"raster"},h),c.extend(this,c.pick(h,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new c.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=qe(this._options,this.map._requestManager,(s,h)=>{this._tileJSONRequest=null,this._loaded=!0,s?this.fire(new c.ErrorEvent(s)):h&&(c.extend(this,h),h.bounds&&(this.tileBounds=new Re(h.bounds,this.minzoom,this.maxzoom)),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(s){this.map=s,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return c.extend({},this._options)}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}loadTile(s,h){const y=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);s.request=c.getImage(this.map._requestManager.transformRequest(y,c.ResourceType.Tile),(w,M,k)=>{if(delete s.request,s.aborted)s.state="unloaded",h(null);else if(w)s.state="errored",h(w);else if(M){this.map._refreshExpiredTiles&&s.setExpiryData(k);const R=this.map.painter.context,A=R.gl;s.texture=this.map.painter.getTileTexture(M.width),s.texture?s.texture.update(M,{useMipmap:!0}):(s.texture=new q(R,M,A.RGBA,{useMipmap:!0}),s.texture.bind(A.LINEAR,A.CLAMP_TO_EDGE,A.LINEAR_MIPMAP_NEAREST),R.extTextureFilterAnisotropic&&A.texParameterf(A.TEXTURE_2D,R.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,R.extTextureFilterAnisotropicMax)),s.state="loaded",c.cacheEntryPossiblyAdded(this.dispatcher),h(null)}})}abortTile(s,h){s.request&&(s.request.cancel(),delete s.request),h()}unloadTile(s,h){s.texture&&this.map.painter.saveTileTexture(s.texture),h()}hasTransition(){return!1}}let ht;class Pe extends Xe{constructor(s,h,y,w){super(s,h,y,w),this.type="raster-dem",this.maxzoom=22,this._options=c.extend({type:"raster-dem"},h),this.encoding=h.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(s,h){const y=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function w(M,k){M&&(s.state="errored",h(M)),k&&(s.dem=k,s.needsHillshadePrepare=!0,s.needsTerrainPrepare=!0,s.state="loaded",h(null))}s.request=c.getImage(this.map._requestManager.transformRequest(y,c.ResourceType.Tile),(function(M,k){if(delete s.request,s.aborted)s.state="unloaded",h(null);else if(M)s.state="errored",h(M);else if(k){this.map._refreshExpiredTiles&&s.setExpiryData(k),delete k.cacheControl,delete k.expires;const R=c.isImageBitmap(k)&&(ht==null&&(ht=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),ht)?k:c.exported.getImageData(k,1),A={uid:s.uid,coord:s.tileID,source:this.id,rawImageData:R,encoding:this.encoding};s.actor&&s.state!=="expired"||(s.actor=this.dispatcher.getActor(),s.actor.send("loadDEMTile",A,w.bind(this)))}}).bind(this)),s.neighboringTiles=this._getNeighboringTiles(s.tileID)}_getNeighboringTiles(s){const h=s.canonical,y=Math.pow(2,h.z),w=(h.x-1+y)%y,M=h.x===0?s.wrap-1:s.wrap,k=(h.x+1+y)%y,R=h.x+1===y?s.wrap+1:s.wrap,A={};return A[new c.OverscaledTileID(s.overscaledZ,M,h.z,w,h.y).key]={backfilled:!1},A[new c.OverscaledTileID(s.overscaledZ,R,h.z,k,h.y).key]={backfilled:!1},h.y>0&&(A[new c.OverscaledTileID(s.overscaledZ,M,h.z,w,h.y-1).key]={backfilled:!1},A[new c.OverscaledTileID(s.overscaledZ,s.wrap,h.z,h.x,h.y-1).key]={backfilled:!1},A[new c.OverscaledTileID(s.overscaledZ,R,h.z,k,h.y-1).key]={backfilled:!1}),h.y+1<y&&(A[new c.OverscaledTileID(s.overscaledZ,M,h.z,w,h.y+1).key]={backfilled:!1},A[new c.OverscaledTileID(s.overscaledZ,s.wrap,h.z,h.x,h.y+1).key]={backfilled:!1},A[new c.OverscaledTileID(s.overscaledZ,R,h.z,k,h.y+1).key]={backfilled:!1}),A}unloadTile(s){s.demTexture&&this.map.painter.saveTileTexture(s.demTexture),s.fbo&&(s.fbo.destroy(),delete s.fbo),s.dem&&delete s.dem,delete s.neighboringTiles,s.state="unloaded",s.actor&&s.actor.send("removeDEMTile",{uid:s.uid,source:this.id})}}class ke extends c.Evented{constructor(s,h,y,w){super(),this.id=s,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=y.getActor(),this.setEventedParent(w),this._data=h.data,this._options=c.extend({},h),this._collectResourceTiming=h.collectResourceTiming,h.maxzoom!==void 0&&(this.maxzoom=h.maxzoom),h.type&&(this.type=h.type),h.attribution&&(this.attribution=h.attribution),this.promoteId=h.promoteId;const M=c.EXTENT/this.tileSize;this.workerOptions=c.extend({source:this.id,cluster:h.cluster||!1,geojsonVtOptions:{buffer:(h.buffer!==void 0?h.buffer:128)*M,tolerance:(h.tolerance!==void 0?h.tolerance:.375)*M,extent:c.EXTENT,maxZoom:this.maxzoom,lineMetrics:h.lineMetrics||!1,generateId:h.generateId||!1},superclusterOptions:{maxZoom:h.clusterMaxZoom!==void 0?h.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,h.clusterMinPoints||2),extent:c.EXTENT,radius:(h.clusterRadius||50)*M,log:!1,generateId:h.generateId||!1},clusterProperties:h.clusterProperties,filter:h.filter},h.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(s){this.map=s,this.load()}setData(s){return this._data=s,this._updateWorkerData("content"),this}getClusterExpansionZoom(s,h){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:s,source:this.id},h),this}getClusterChildren(s,h){return this.actor.send("geojson.getClusterChildren",{clusterId:s,source:this.id},h),this}getClusterLeaves(s,h,y,w){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:s,limit:h,offset:y},w),this}_updateWorkerData(s){const h=c.extend({},this.workerOptions),y=this._data;typeof y=="string"?(h.request=this.map._requestManager.transformRequest(c.exported.resolveURL(y),c.ResourceType.Source),h.request.collectResourceTiming=this._collectResourceTiming):h.data=JSON.stringify(y),this._pendingLoads++,this.fire(new c.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,h,(w,M)=>{if(this._pendingLoads--,this._removed||M&&M.abandoned)return void this.fire(new c.Event("dataabort",{dataType:"source",sourceDataType:s}));let k=null;if(M&&M.resourceTiming&&M.resourceTiming[this.id]&&(k=M.resourceTiming[this.id].slice(0)),w)return void this.fire(new c.ErrorEvent(w));const R={dataType:"source",sourceDataType:s};this._collectResourceTiming&&k&&k.length>0&&c.extend(R,{resourceTiming:k}),this.fire(new c.Event("data",R))})}loaded(){return this._pendingLoads===0}loadTile(s,h){const y=s.actor?"reloadTile":"loadTile";s.actor=this.actor;const w={type:this.type,uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};s.request=this.actor.send(y,w,(M,k)=>(delete s.request,s.unloadVectorData(),s.aborted?h(null):M?h(M):(s.loadVectorData(k,this.map.painter,y==="reloadTile"),h(null))))}abortTile(s){s.request&&(s.request.cancel(),delete s.request),s.aborted=!0}unloadTile(s){s.unloadVectorData(),this.actor.send("removeTile",{uid:s.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return c.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var de=c.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class je extends c.Evented{constructor(s,h,y,w){super(),this.id=s,this.dispatcher=y,this.coordinates=h.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(w),this.options=h}load(s,h){this._loaded=!1,this.fire(new c.Event("dataloading",{dataType:"source"})),this.url=this.options.url,c.getImage(this.map._requestManager.transformRequest(this.url,c.ResourceType.Image),(y,w)=>{this._loaded=!0,y?this.fire(new c.ErrorEvent(y)):w&&(this.image=w,s&&(this.coordinates=s),h&&h(),this._finishLoading())})}loaded(){return this._loaded}updateImage(s){return this.image&&s.url?(this.options.url=s.url,this.load(s.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}setCoordinates(s){this.coordinates=s;const h=s.map(c.MercatorCoordinate.fromLngLat);this.tileID=function(w){let M=1/0,k=1/0,R=-1/0,A=-1/0;for(const Q of w)M=Math.min(M,Q.x),k=Math.min(k,Q.y),R=Math.max(R,Q.x),A=Math.max(A,Q.y);const F=Math.max(R-M,A-k),Z=Math.max(0,Math.floor(-Math.log(F)/Math.LN2)),Y=Math.pow(2,Z);return new c.CanonicalTileID(Z,Math.floor((M+R)/2*Y),Math.floor((k+A)/2*Y))}(h),this.minzoom=this.maxzoom=this.tileID.z;const y=h.map(w=>this.tileID.getTilePoint(w)._round());return this._boundsArray=new c.RasterBoundsArray,this._boundsArray.emplaceBack(y[0].x,y[0].y,0,0),this._boundsArray.emplaceBack(y[1].x,y[1].y,c.EXTENT,0),this._boundsArray.emplaceBack(y[3].x,y[3].y,0,c.EXTENT),this._boundsArray.emplaceBack(y[2].x,y[2].y,c.EXTENT,c.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const s=this.map.painter.context,h=s.gl;this.boundsBuffer||(this.boundsBuffer=s.createVertexBuffer(this._boundsArray,de.members)),this.boundsSegments||(this.boundsSegments=c.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new q(s,this.image,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE));for(const y in this.tiles){const w=this.tiles[y];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture)}}loadTile(s,h){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={},h(null)):(s.state="errored",h(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Ee extends je{constructor(s,h,y,w){super(s,h,y,w),this.roundZoom=!0,this.type="video",this.options=h}load(){this._loaded=!1;const s=this.options;this.urls=[];for(const h of s.urls)this.urls.push(this.map._requestManager.transformRequest(h,c.ResourceType.Source).url);c.getVideo(this.urls,(h,y)=>{this._loaded=!0,h?this.fire(new c.ErrorEvent(h)):y&&(this.video=y,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(s){if(this.video){const h=this.video.seekable;s<h.start(0)||s>h.end(0)?this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${h.start(0)} and ${h.end(0)}-second mark.`))):this.video.currentTime=s}}getVideo(){return this.video}onAdd(s){this.map||(this.map=s,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const s=this.map.painter.context,h=s.gl;this.boundsBuffer||(this.boundsBuffer=s.createVertexBuffer(this._boundsArray,de.members)),this.boundsSegments||(this.boundsSegments=c.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE),h.texSubImage2D(h.TEXTURE_2D,0,0,0,h.RGBA,h.UNSIGNED_BYTE,this.video)):(this.texture=new q(s,this.video,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE));for(const y in this.tiles){const w=this.tiles[y];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class K extends je{constructor(s,h,y,w){super(s,h,y,w),h.coordinates?Array.isArray(h.coordinates)&&h.coordinates.length===4&&!h.coordinates.some(M=>!Array.isArray(M)||M.length!==2||M.some(k=>typeof k!="number"))||this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${s}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${s}`,null,'missing required property "coordinates"'))),h.animate&&typeof h.animate!="boolean"&&this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${s}`,null,'optional "animate" property must be a boolean value'))),h.canvas?typeof h.canvas=="string"||h.canvas instanceof HTMLCanvasElement||this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${s}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${s}`,null,'missing required property "canvas"'))),this.options=h,this.animate=h.animate===void 0||h.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(s){this.map=s,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let s=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,s=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,s=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const h=this.map.painter.context,y=h.gl;this.boundsBuffer||(this.boundsBuffer=h.createVertexBuffer(this._boundsArray,de.members)),this.boundsSegments||(this.boundsSegments=c.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(s||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new q(h,this.canvas,y.RGBA,{premultiply:!0});for(const w in this.tiles){const M=this.tiles[w];M.state!=="loaded"&&(M.state="loaded",M.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const s of[this.canvas.width,this.canvas.height])if(isNaN(s)||s<=0)return!0;return!1}}const be={vector:dt,raster:Xe,"raster-dem":Pe,geojson:ke,video:Ee,image:je,canvas:K};function Be(_,s){const h=c.create();return c.translate(h,h,[1,1,0]),c.scale(h,h,[.5*_.width,.5*_.height,1]),c.multiply(h,h,_.calculatePosMatrix(s.toUnwrapped()))}function it(_,s,h,y,w,M){const k=function(Y,Q,le){if(Y)for(const se of Y){const ie=Q[se];if(ie&&ie.source===le&&ie.type==="fill-extrusion")return!0}else for(const se in Q){const ie=Q[se];if(ie.source===le&&ie.type==="fill-extrusion")return!0}return!1}(w&&w.layers,s,_.id),R=M.maxPitchScaleFactor(),A=_.tilesIn(y,R,k);A.sort(ft);const F=[];for(const Y of A)F.push({wrappedTileID:Y.tileID.wrapped().key,queryResults:Y.tile.queryRenderedFeatures(s,h,_._state,Y.queryGeometry,Y.cameraQueryGeometry,Y.scale,w,M,R,Be(_.transform,Y.tileID))});const Z=function(Y){const Q={},le={};for(const se of Y){const ie=se.queryResults,xe=se.wrappedTileID,De=le[xe]=le[xe]||{};for(const Ie in ie){const ue=ie[Ie],Ve=De[Ie]=De[Ie]||{},ze=Q[Ie]=Q[Ie]||[];for(const Ge of ue)Ve[Ge.featureIndex]||(Ve[Ge.featureIndex]=!0,ze.push(Ge))}}return Q}(F);for(const Y in Z)Z[Y].forEach(Q=>{const le=Q.feature,se=_.getFeatureState(le.layer["source-layer"],le.id);le.source=le.layer.source,le.layer["source-layer"]&&(le.sourceLayer=le.layer["source-layer"]),le.state=se});return Z}function ft(_,s){const h=_.tileID,y=s.tileID;return h.overscaledZ-y.overscaledZ||h.canonical.y-y.canonical.y||h.wrap-y.wrap||h.canonical.x-y.canonical.x}class mt{constructor(s,h){this.tileID=s,this.uid=c.uniqueId(),this.uses=0,this.tileSize=h,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(s){const h=s+this.timeAdded;h<c.exported.now()||this.fadeEndTime&&h<this.fadeEndTime||(this.fadeEndTime=h)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(s){this.demTexture&&s.saveTileTexture(this.demTexture),this.textures.forEach(h=>s.saveTileTexture(h)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(s,h,y){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",s){s.featureIndex&&(this.latestFeatureIndex=s.featureIndex,s.rawTileData?(this.latestRawTileData=s.rawTileData,this.latestFeatureIndex.rawTileData=s.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=s.collisionBoxArray,this.buckets=function(w,M){const k={};if(!M)return k;for(const R of w){const A=R.layerIds.map(F=>M.getLayer(F)).filter(Boolean);if(A.length!==0){R.layers=A,R.stateDependentLayerIds&&(R.stateDependentLayers=R.stateDependentLayerIds.map(F=>A.filter(Z=>Z.id===F)[0]));for(const F of A)k[F.id]=R}}return k}(s.buckets,h.style),this.hasSymbolBuckets=!1;for(const w in this.buckets){const M=this.buckets[w];if(M instanceof c.SymbolBucket){if(this.hasSymbolBuckets=!0,!y)break;M.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const w in this.buckets){const M=this.buckets[w];if(M instanceof c.SymbolBucket&&M.hasRTLText){this.hasRTLText=!0,c.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const w in this.buckets){const M=this.buckets[w];this.queryPadding=Math.max(this.queryPadding,h.style.getLayer(w).queryRadius(M))}s.imageAtlas&&(this.imageAtlas=s.imageAtlas),s.glyphAtlasImage&&(this.glyphAtlasImage=s.glyphAtlasImage)}else this.collisionBoxArray=new c.CollisionBoxArray}unloadVectorData(){for(const s in this.buckets)this.buckets[s].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(s){return this.buckets[s.id]}upload(s){for(const y in this.buckets){const w=this.buckets[y];w.uploadPending()&&w.upload(s)}const h=s.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new q(s,this.imageAtlas.image,h.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new q(s,this.glyphAtlasImage,h.ALPHA),this.glyphAtlasImage=null)}prepare(s){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(s,this.imageAtlasTexture)}queryRenderedFeatures(s,h,y,w,M,k,R,A,F,Z){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:w,cameraQueryGeometry:M,scale:k,tileSize:this.tileSize,pixelPosMatrix:Z,transform:A,params:R,queryPadding:this.queryPadding*F},s,h,y):{}}querySourceFeatures(s,h){const y=this.latestFeatureIndex;if(!y||!y.rawTileData)return;const w=y.loadVTLayers(),M=h?h.sourceLayer:"",k=w._geojsonTileLayer||w[M];if(!k)return;const R=c.createFilter(h&&h.filter),{z:A,x:F,y:Z}=this.tileID.canonical,Y={z:A,x:F,y:Z};for(let Q=0;Q<k.length;Q++){const le=k.feature(Q);if(R.needGeometry){const xe=c.toEvaluationFeature(le,!0);if(!R.filter(new c.EvaluationParameters(this.tileID.overscaledZ),xe,this.tileID.canonical))continue}else if(!R.filter(new c.EvaluationParameters(this.tileID.overscaledZ),le))continue;const se=y.getId(le,M),ie=new c.GeoJSONFeature(le,A,F,Z,se);ie.tile=Y,s.push(ie)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(s){const h=this.expirationTime;if(s.cacheControl){const y=c.parseCacheControl(s.cacheControl);y["max-age"]&&(this.expirationTime=Date.now()+1e3*y["max-age"])}else s.expires&&(this.expirationTime=new Date(s.expires).getTime());if(this.expirationTime){const y=Date.now();let w=!1;if(this.expirationTime>y)w=!1;else if(h)if(this.expirationTime<h)w=!0;else{const M=this.expirationTime-h;M?this.expirationTime=y+Math.max(M,3e4):w=!0}else w=!0;w?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(s,h){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(s).length===0)return;const y=this.latestFeatureIndex.loadVTLayers();for(const w in this.buckets){if(!h.style.hasLayer(w))continue;const M=this.buckets[w],k=M.layers[0].sourceLayer||"_geojsonTileLayer",R=y[k],A=s[k];if(!R||!A||Object.keys(A).length===0)continue;M.update(A,R,this.imageAtlas&&this.imageAtlas.patternPositions||{});const F=h&&h.style&&h.style.getLayer(w);F&&(this.queryPadding=Math.max(this.queryPadding,F.queryRadius(M)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<c.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(s){this.symbolFadeHoldUntil=c.exported.now()+s}setDependencies(s,h){const y={};for(const w of h)y[w]=!0;this.dependencies[s]=y}hasDependency(s,h){for(const y of s){const w=this.dependencies[y];if(w){for(const M of h)if(w[M])return!0}}return!1}}class xt{constructor(s,h){this.max=s,this.onRemove=h,this.reset()}reset(){for(const s in this.data)for(const h of this.data[s])h.timeout&&clearTimeout(h.timeout),this.onRemove(h.value);return this.data={},this.order=[],this}add(s,h,y){const w=s.wrapped().key;this.data[w]===void 0&&(this.data[w]=[]);const M={value:h,timeout:void 0};if(y!==void 0&&(M.timeout=setTimeout(()=>{this.remove(s,M)},y)),this.data[w].push(M),this.order.push(w),this.order.length>this.max){const k=this._getAndRemoveByKey(this.order[0]);k&&this.onRemove(k)}return this}has(s){return s.wrapped().key in this.data}getAndRemove(s){return this.has(s)?this._getAndRemoveByKey(s.wrapped().key):null}_getAndRemoveByKey(s){const h=this.data[s].shift();return h.timeout&&clearTimeout(h.timeout),this.data[s].length===0&&delete this.data[s],this.order.splice(this.order.indexOf(s),1),h.value}getByKey(s){const h=this.data[s];return h?h[0].value:null}get(s){return this.has(s)?this.data[s.wrapped().key][0].value:null}remove(s,h){if(!this.has(s))return this;const y=s.wrapped().key,w=h===void 0?0:this.data[y].indexOf(h),M=this.data[y][w];return this.data[y].splice(w,1),M.timeout&&clearTimeout(M.timeout),this.data[y].length===0&&delete this.data[y],this.onRemove(M.value),this.order.splice(this.order.indexOf(y),1),this}setMaxSize(s){for(this.max=s;this.order.length>this.max;){const h=this._getAndRemoveByKey(this.order[0]);h&&this.onRemove(h)}return this}filter(s){const h=[];for(const y in this.data)for(const w of this.data[y])s(w.value)||h.push(w);for(const y of h)this.remove(y.value.tileID,y)}}class ut{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(s,h,y){const w=String(h);if(this.stateChanges[s]=this.stateChanges[s]||{},this.stateChanges[s][w]=this.stateChanges[s][w]||{},c.extend(this.stateChanges[s][w],y),this.deletedStates[s]===null){this.deletedStates[s]={};for(const M in this.state[s])M!==w&&(this.deletedStates[s][M]=null)}else if(this.deletedStates[s]&&this.deletedStates[s][w]===null){this.deletedStates[s][w]={};for(const M in this.state[s][w])y[M]||(this.deletedStates[s][w][M]=null)}else for(const M in y)this.deletedStates[s]&&this.deletedStates[s][w]&&this.deletedStates[s][w][M]===null&&delete this.deletedStates[s][w][M]}removeFeatureState(s,h,y){if(this.deletedStates[s]===null)return;const w=String(h);if(this.deletedStates[s]=this.deletedStates[s]||{},y&&h!==void 0)this.deletedStates[s][w]!==null&&(this.deletedStates[s][w]=this.deletedStates[s][w]||{},this.deletedStates[s][w][y]=null);else if(h!==void 0)if(this.stateChanges[s]&&this.stateChanges[s][w])for(y in this.deletedStates[s][w]={},this.stateChanges[s][w])this.deletedStates[s][w][y]=null;else this.deletedStates[s][w]=null;else this.deletedStates[s]=null}getState(s,h){const y=String(h),w=c.extend({},(this.state[s]||{})[y],(this.stateChanges[s]||{})[y]);if(this.deletedStates[s]===null)return{};if(this.deletedStates[s]){const M=this.deletedStates[s][h];if(M===null)return{};for(const k in M)delete w[k]}return w}initializeTileState(s,h){s.setFeatureState(this.state,h)}coalesceChanges(s,h){const y={};for(const w in this.stateChanges){this.state[w]=this.state[w]||{};const M={};for(const k in this.stateChanges[w])this.state[w][k]||(this.state[w][k]={}),c.extend(this.state[w][k],this.stateChanges[w][k]),M[k]=this.state[w][k];y[w]=M}for(const w in this.deletedStates){this.state[w]=this.state[w]||{};const M={};if(this.deletedStates[w]===null)for(const k in this.state[w])M[k]={},this.state[w][k]={};else for(const k in this.deletedStates[w]){if(this.deletedStates[w][k]===null)this.state[w][k]={};else for(const R of Object.keys(this.deletedStates[w][k]))delete this.state[w][k][R];M[k]=this.state[w][k]}y[w]=y[w]||{},c.extend(y[w],M)}if(this.stateChanges={},this.deletedStates={},Object.keys(y).length!==0)for(const w in s)s[w].setFeatureState(y,h)}}class vt extends c.Evented{constructor(s,h,y){super(),this.id=s,this.dispatcher=y,this.on("data",w=>{w.dataType==="source"&&w.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&w.dataType==="source"&&w.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(w,M,k,R){const A=new be[M.type](w,M,k,R);if(A.id!==w)throw new Error(`Expected Source id to be ${w} instead of ${A.id}`);return c.bindAll(["load","abort","unload","serialize","prepare"],A),A}(s,h,y,this),this._tiles={},this._cache=new xt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ut}onAdd(s){this.map=s,this._maxTileCacheSize=s?s._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(s)}onRemove(s){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(s)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const s in this._tiles){const h=this._tiles[s];if(h.state!=="loaded"&&h.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const s=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,s&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(s,h){return this._source.loadTile(s,h)}_unloadTile(s){if(this._source.unloadTile)return this._source.unloadTile(s,()=>{})}_abortTile(s){this._source.abortTile&&this._source.abortTile(s,()=>{}),this._source.fire(new c.Event("dataabort",{tile:s,coord:s.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(s){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const h in this._tiles){const y=this._tiles[h];y.upload(s),y.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(s=>s.tileID).sort(Tt).map(s=>s.key)}getRenderableIds(s){const h=[];for(const y in this._tiles)this._isIdRenderable(y,s)&&h.push(this._tiles[y]);return s?h.sort((y,w)=>{const M=y.tileID,k=w.tileID,R=new c.pointGeometry(M.canonical.x,M.canonical.y)._rotate(this.transform.angle),A=new c.pointGeometry(k.canonical.x,k.canonical.y)._rotate(this.transform.angle);return M.overscaledZ-k.overscaledZ||A.y-R.y||A.x-R.x}).map(y=>y.tileID.key):h.map(y=>y.tileID).sort(Tt).map(y=>y.key)}hasRenderableParent(s){const h=this.findLoadedParent(s,0);return!!h&&this._isIdRenderable(h.tileID.key)}_isIdRenderable(s,h){return this._tiles[s]&&this._tiles[s].hasData()&&!this._coveredTiles[s]&&(h||!this._tiles[s].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const s in this._tiles)this._tiles[s].state!=="errored"&&this._reloadTile(s,"reloading")}}_reloadTile(s,h){const y=this._tiles[s];y&&(y.state!=="loading"&&(y.state=h),this._loadTile(y,this._tileLoaded.bind(this,y,s,h)))}_tileLoaded(s,h,y,w){if(w)return s.state="errored",void(w.status!==404?this._source.fire(new c.ErrorEvent(w,{tile:s})):this.update(this.transform,this.terrain));s.timeAdded=c.exported.now(),y==="expired"&&(s.refreshedUponExpiration=!0),this._setTileReloadTimer(h,s),this.getSource().type==="raster-dem"&&s.dem&&this._backfillDEM(s),this._state.initializeTileState(s,this.map?this.map.painter:null),s.aborted||this._source.fire(new c.Event("data",{dataType:"source",tile:s,coord:s.tileID}))}_backfillDEM(s){const h=this.getRenderableIds();for(let w=0;w<h.length;w++){const M=h[w];if(s.neighboringTiles&&s.neighboringTiles[M]){const k=this.getTileByID(M);y(s,k),y(k,s)}}function y(w,M){w.needsHillshadePrepare=!0,w.needsTerrainPrepare=!0;let k=M.tileID.canonical.x-w.tileID.canonical.x;const R=M.tileID.canonical.y-w.tileID.canonical.y,A=Math.pow(2,w.tileID.canonical.z),F=M.tileID.key;k===0&&R===0||Math.abs(R)>1||(Math.abs(k)>1&&(Math.abs(k+A)===1?k+=A:Math.abs(k-A)===1&&(k-=A)),M.dem&&w.dem&&(w.dem.backfillBorder(M.dem,k,R),w.neighboringTiles&&w.neighboringTiles[F]&&(w.neighboringTiles[F].backfilled=!0)))}}getTile(s){return this.getTileByID(s.key)}getTileByID(s){return this._tiles[s]}_retainLoadedChildren(s,h,y,w){for(const M in this._tiles){let k=this._tiles[M];if(w[M]||!k.hasData()||k.tileID.overscaledZ<=h||k.tileID.overscaledZ>y)continue;let R=k.tileID;for(;k&&k.tileID.overscaledZ>h+1;){const F=k.tileID.scaledTo(k.tileID.overscaledZ-1);k=this._tiles[F.key],k&&k.hasData()&&(R=F)}let A=R;for(;A.overscaledZ>h;)if(A=A.scaledTo(A.overscaledZ-1),s[A.key]){w[R.key]=R;break}}}findLoadedParent(s,h){if(s.key in this._loadedParentTiles){const y=this._loadedParentTiles[s.key];return y&&y.tileID.overscaledZ>=h?y:null}for(let y=s.overscaledZ-1;y>=h;y--){const w=s.scaledTo(y),M=this._getLoadedTile(w);if(M)return M}}_getLoadedTile(s){const h=this._tiles[s.key];return h&&h.hasData()?h:this._cache.getByKey(s.wrapped().key)}updateCacheSize(s){const h=Math.ceil(s.width/this._source.tileSize)+1,y=Math.ceil(s.height/this._source.tileSize)+1,w=Math.floor(h*y*5),M=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(M)}handleWrapJump(s){const h=Math.round((s-(this._prevLng===void 0?s:this._prevLng))/360);if(this._prevLng=s,h){const y={};for(const w in this._tiles){const M=this._tiles[w];M.tileID=M.tileID.unwrapTo(M.tileID.wrap+h),y[M.tileID.key]=M}this._tiles=y;for(const w in this._timers)clearTimeout(this._timers[w]),delete this._timers[w];for(const w in this._tiles)this._setTileReloadTimer(w,this._tiles[w])}}update(s,h){if(this.transform=s,this.terrain=h,!this._sourceLoaded||this._paused)return;let y;this.updateCacheSize(s),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?y=s.getVisibleUnwrappedCoordinates(this._source.tileID).map(F=>new c.OverscaledTileID(F.canonical.z,F.wrap,F.canonical.z,F.canonical.x,F.canonical.y)):(y=s.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:h}),this._source.hasTile&&(y=y.filter(F=>this._source.hasTile(F)))):y=[];const w=s.coveringZoomLevel(this._source),M=Math.max(w-vt.maxOverzooming,this._source.minzoom),k=Math.max(w+vt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const F={};for(const Z of y)if(Z.canonical.z>this._source.minzoom){const Y=Z.scaledTo(Z.canonical.z-1);F[Y.key]=Y;const Q=Z.scaledTo(Math.max(this._source.minzoom,Math.min(Z.canonical.z,5)));F[Q.key]=Q}y=y.concat(Object.values(F))}const R=this._updateRetainedTiles(y,w);if(Rt(this._source.type)){const F={},Z={},Y=Object.keys(R);for(const Q of Y){const le=R[Q],se=this._tiles[Q];if(!se||se.fadeEndTime&&se.fadeEndTime<=c.exported.now())continue;const ie=this.findLoadedParent(le,M);ie&&(this._addTile(ie.tileID),F[ie.tileID.key]=ie.tileID),Z[Q]=le}this._retainLoadedChildren(Z,w,k,R);for(const Q in F)R[Q]||(this._coveredTiles[Q]=!0,R[Q]=F[Q]);if(h){const Q={},le={};for(const se of y)this._tiles[se.key].hasData()?Q[se.key]=se:le[se.key]=se;for(const se in le){const ie=le[se].children(this._source.maxzoom);this._tiles[ie[0].key]&&this._tiles[ie[1].key]&&this._tiles[ie[2].key]&&this._tiles[ie[3].key]&&(Q[ie[0].key]=R[ie[0].key]=ie[0],Q[ie[1].key]=R[ie[1].key]=ie[1],Q[ie[2].key]=R[ie[2].key]=ie[2],Q[ie[3].key]=R[ie[3].key]=ie[3],delete le[se])}for(const se in le){const ie=this.findLoadedParent(le[se],this._source.minzoom);if(ie){Q[ie.tileID.key]=R[ie.tileID.key]=ie.tileID;for(const xe in Q)Q[xe].isChildOf(ie.tileID)&&delete Q[xe]}}for(const se in this._tiles)Q[se]||(this._coveredTiles[se]=!0)}}for(const F in R)this._tiles[F].clearFadeHold();const A=c.keysDifference(this._tiles,R);for(const F of A){const Z=this._tiles[F];Z.hasSymbolBuckets&&!Z.holdingForFade()?Z.setHoldDuration(this.map._fadeDuration):Z.hasSymbolBuckets&&!Z.symbolFadeFinished()||this._removeTile(F)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const s in this._tiles)this._tiles[s].holdingForFade()&&this._removeTile(s)}_updateRetainedTiles(s,h){const y={},w={},M=Math.max(h-vt.maxOverzooming,this._source.minzoom),k=Math.max(h+vt.maxUnderzooming,this._source.minzoom),R={};for(const A of s){const F=this._addTile(A);y[A.key]=A,F.hasData()||h<this._source.maxzoom&&(R[A.key]=A)}this._retainLoadedChildren(R,h,k,y);for(const A of s){let F=this._tiles[A.key];if(F.hasData())continue;if(h+1>this._source.maxzoom){const Y=A.children(this._source.maxzoom)[0],Q=this.getTile(Y);if(Q&&Q.hasData()){y[Y.key]=Y;continue}}else{const Y=A.children(this._source.maxzoom);if(y[Y[0].key]&&y[Y[1].key]&&y[Y[2].key]&&y[Y[3].key])continue}let Z=F.wasRequested();for(let Y=A.overscaledZ-1;Y>=M;--Y){const Q=A.scaledTo(Y);if(w[Q.key]||(w[Q.key]=!0,F=this.getTile(Q),!F&&Z&&(F=this._addTile(Q)),F&&(y[Q.key]=Q,Z=F.wasRequested(),F.hasData())))break}}return y}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const s in this._tiles){const h=[];let y,w=this._tiles[s].tileID;for(;w.overscaledZ>0;){if(w.key in this._loadedParentTiles){y=this._loadedParentTiles[w.key];break}h.push(w.key);const M=w.scaledTo(w.overscaledZ-1);if(y=this._getLoadedTile(M),y)break;w=M}for(const M of h)this._loadedParentTiles[M]=y}}_addTile(s){let h=this._tiles[s.key];if(h)return h;h=this._cache.getAndRemove(s),h&&(this._setTileReloadTimer(s.key,h),h.tileID=s,this._state.initializeTileState(h,this.map?this.map.painter:null),this._cacheTimers[s.key]&&(clearTimeout(this._cacheTimers[s.key]),delete this._cacheTimers[s.key],this._setTileReloadTimer(s.key,h)));const y=h;return h||(h=new mt(s,this._source.tileSize*s.overscaleFactor()),this._loadTile(h,this._tileLoaded.bind(this,h,s.key,h.state))),h.uses++,this._tiles[s.key]=h,y||this._source.fire(new c.Event("dataloading",{tile:h,coord:h.tileID,dataType:"source"})),h}_setTileReloadTimer(s,h){s in this._timers&&(clearTimeout(this._timers[s]),delete this._timers[s]);const y=h.getExpiryTimeout();y&&(this._timers[s]=setTimeout(()=>{this._reloadTile(s,"expired"),delete this._timers[s]},y))}_removeTile(s){const h=this._tiles[s];h&&(h.uses--,delete this._tiles[s],this._timers[s]&&(clearTimeout(this._timers[s]),delete this._timers[s]),h.uses>0||(h.hasData()&&h.state!=="reloading"?this._cache.add(h.tileID,h,h.getExpiryTimeout()):(h.aborted=!0,this._abortTile(h),this._unloadTile(h))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const s in this._tiles)this._removeTile(s);this._cache.reset()}tilesIn(s,h,y){const w=[],M=this.transform;if(!M)return w;const k=y?M.getCameraQueryGeometry(s):s,R=s.map(se=>M.pointCoordinate(se,this.terrain)),A=k.map(se=>M.pointCoordinate(se,this.terrain)),F=this.getIds();let Z=1/0,Y=1/0,Q=-1/0,le=-1/0;for(const se of A)Z=Math.min(Z,se.x),Y=Math.min(Y,se.y),Q=Math.max(Q,se.x),le=Math.max(le,se.y);for(let se=0;se<F.length;se++){const ie=this._tiles[F[se]];if(ie.holdingForFade())continue;const xe=ie.tileID,De=Math.pow(2,M.zoom-ie.tileID.overscaledZ),Ie=h*ie.queryPadding*c.EXTENT/ie.tileSize/De,ue=[xe.getTilePoint(new c.MercatorCoordinate(Z,Y)),xe.getTilePoint(new c.MercatorCoordinate(Q,le))];if(ue[0].x-Ie<c.EXTENT&&ue[0].y-Ie<c.EXTENT&&ue[1].x+Ie>=0&&ue[1].y+Ie>=0){const Ve=R.map(Ge=>xe.getTilePoint(Ge)),ze=A.map(Ge=>xe.getTilePoint(Ge));w.push({tile:ie,tileID:xe,queryGeometry:Ve,cameraQueryGeometry:ze,scale:De})}}return w}getVisibleCoordinates(s){const h=this.getRenderableIds(s).map(y=>this._tiles[y].tileID);for(const y of h)y.posMatrix=this.transform.calculatePosMatrix(y.toUnwrapped());return h}hasTransition(){if(this._source.hasTransition())return!0;if(Rt(this._source.type))for(const s in this._tiles){const h=this._tiles[s];if(h.fadeEndTime!==void 0&&h.fadeEndTime>=c.exported.now())return!0}return!1}setFeatureState(s,h,y){this._state.updateState(s=s||"_geojsonTileLayer",h,y)}removeFeatureState(s,h,y){this._state.removeFeatureState(s=s||"_geojsonTileLayer",h,y)}getFeatureState(s,h){return this._state.getState(s=s||"_geojsonTileLayer",h)}setDependencies(s,h,y){const w=this._tiles[s];w&&w.setDependencies(h,y)}reloadTilesForDependencies(s,h){for(const y in this._tiles)this._tiles[y].hasDependency(s,h)&&this._reloadTile(y,"reloading");this._cache.filter(y=>!y.hasDependency(s,h))}}function Tt(_,s){const h=Math.abs(2*_.wrap)-+(_.wrap<0),y=Math.abs(2*s.wrap)-+(s.wrap<0);return _.overscaledZ-s.overscaledZ||y-h||s.canonical.y-_.canonical.y||s.canonical.x-_.canonical.x}function Rt(_){return _==="raster"||_==="image"||_==="video"}vt.maxOverzooming=10,vt.maxUnderzooming=3;const Bt="mapboxgl_preloaded_worker_pool";class Pt{constructor(){this.active={}}acquire(s){if(!this.workers)for(this.workers=[];this.workers.length<Pt.workerCount;)this.workers.push(new Worker(Fi.workerUrl));return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],this.numActive()===0&&(this.workers.forEach(h=>{h.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Bt]}numActive(){return Object.keys(this.active).length}}const jt=Math.floor(c.exported.hardwareConcurrency/2);let hn;function Mn(){return hn||(hn=new Pt),hn}function jn(_,s){const h={};for(const y in _)y!=="ref"&&(h[y]=_[y]);return c.refProperties.forEach(y=>{y in s&&(h[y]=s[y])}),h}function Jn(_){_=_.slice();const s=Object.create(null);for(let h=0;h<_.length;h++)s[_[h].id]=_[h];for(let h=0;h<_.length;h++)"ref"in _[h]&&(_[h]=jn(_[h],s[_[h].ref]));return _}Pt.workerCount=Math.max(Math.min(jt,6),1);const Yt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function xn(_,s,h){h.push({command:Yt.addSource,args:[_,s[_]]})}function Nn(_,s,h){s.push({command:Yt.removeSource,args:[_]}),h[_]=!0}function Dn(_,s,h,y){Nn(_,h,y),xn(_,s,h)}function bn(_,s,h){let y;for(y in _[h])if(Object.prototype.hasOwnProperty.call(_[h],y)&&y!=="data"&&!D(_[h][y],s[h][y]))return!1;for(y in s[h])if(Object.prototype.hasOwnProperty.call(s[h],y)&&y!=="data"&&!D(_[h][y],s[h][y]))return!1;return!0}function yt(_,s,h,y,w,M){let k;for(k in s=s||{},_=_||{})Object.prototype.hasOwnProperty.call(_,k)&&(D(_[k],s[k])||h.push({command:M,args:[y,k,s[k],w]}));for(k in s)Object.prototype.hasOwnProperty.call(s,k)&&!Object.prototype.hasOwnProperty.call(_,k)&&(D(_[k],s[k])||h.push({command:M,args:[y,k,s[k],w]}))}function Et(_){return _.id}function nt(_,s){return _[s.id]=s,_}class Le{constructor(s,h){this.reset(s,h)}reset(s,h){this.points=s||[],this._distances=[0];for(let y=1;y<this.points.length;y++)this._distances[y]=this._distances[y-1]+this.points[y].dist(this.points[y-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(h||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(s){if(this.points.length===1)return this.points[0];s=c.clamp(s,0,1);let h=1,y=this._distances[h];const w=s*this.paddedLength+this.padding;for(;y<w&&h<this._distances.length;)y=this._distances[++h];const M=h-1,k=this._distances[M],R=y-k,A=R>0?(w-k)/R:0;return this.points[M].mult(1-A).add(this.points[h].mult(A))}}function Je(_,s){let h=!0;return _==="always"||_!=="never"&&s!=="never"||(h=!1),h}class ln{constructor(s,h,y){const w=this.boxCells=[],M=this.circleCells=[];this.xCellCount=Math.ceil(s/y),this.yCellCount=Math.ceil(h/y);for(let k=0;k<this.xCellCount*this.yCellCount;k++)w.push([]),M.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=s,this.height=h,this.xScale=this.xCellCount/s,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(s,h,y,w,M){this._forEachCell(h,y,w,M,this._insertBoxCell,this.boxUid++),this.boxKeys.push(s),this.bboxes.push(h),this.bboxes.push(y),this.bboxes.push(w),this.bboxes.push(M)}insertCircle(s,h,y,w){this._forEachCell(h-w,y-w,h+w,y+w,this._insertCircleCell,this.circleUid++),this.circleKeys.push(s),this.circles.push(h),this.circles.push(y),this.circles.push(w)}_insertBoxCell(s,h,y,w,M,k){this.boxCells[M].push(k)}_insertCircleCell(s,h,y,w,M,k){this.circleCells[M].push(k)}_query(s,h,y,w,M,k,R){if(y<0||s>this.width||w<0||h>this.height)return[];const A=[];if(s<=0&&h<=0&&this.width<=y&&this.height<=w){if(M)return[{key:null,x1:s,y1:h,x2:y,y2:w}];for(let F=0;F<this.boxKeys.length;F++)A.push({key:this.boxKeys[F],x1:this.bboxes[4*F],y1:this.bboxes[4*F+1],x2:this.bboxes[4*F+2],y2:this.bboxes[4*F+3]});for(let F=0;F<this.circleKeys.length;F++){const Z=this.circles[3*F],Y=this.circles[3*F+1],Q=this.circles[3*F+2];A.push({key:this.circleKeys[F],x1:Z-Q,y1:Y-Q,x2:Z+Q,y2:Y+Q})}}else this._forEachCell(s,h,y,w,this._queryCell,A,{hitTest:M,overlapMode:k,seenUids:{box:{},circle:{}}},R);return A}query(s,h,y,w){return this._query(s,h,y,w,!1,null)}hitTest(s,h,y,w,M,k){return this._query(s,h,y,w,!0,M,k).length>0}hitTestCircle(s,h,y,w,M){const k=s-y,R=s+y,A=h-y,F=h+y;if(R<0||k>this.width||F<0||A>this.height)return!1;const Z=[];return this._forEachCell(k,A,R,F,this._queryCellCircle,Z,{hitTest:!0,overlapMode:w,circle:{x:s,y:h,radius:y},seenUids:{box:{},circle:{}}},M),Z.length>0}_queryCell(s,h,y,w,M,k,R,A){const{seenUids:F,hitTest:Z,overlapMode:Y}=R,Q=this.boxCells[M];if(Q!==null){const se=this.bboxes;for(const ie of Q)if(!F.box[ie]){F.box[ie]=!0;const xe=4*ie,De=this.boxKeys[ie];if(s<=se[xe+2]&&h<=se[xe+3]&&y>=se[xe+0]&&w>=se[xe+1]&&(!A||A(De))&&(!Z||!Je(Y,De.overlapMode))&&(k.push({key:De,x1:se[xe],y1:se[xe+1],x2:se[xe+2],y2:se[xe+3]}),Z))return!0}}const le=this.circleCells[M];if(le!==null){const se=this.circles;for(const ie of le)if(!F.circle[ie]){F.circle[ie]=!0;const xe=3*ie,De=this.circleKeys[ie];if(this._circleAndRectCollide(se[xe],se[xe+1],se[xe+2],s,h,y,w)&&(!A||A(De))&&(!Z||!Je(Y,De.overlapMode))){const Ie=se[xe],ue=se[xe+1],Ve=se[xe+2];if(k.push({key:De,x1:Ie-Ve,y1:ue-Ve,x2:Ie+Ve,y2:ue+Ve}),Z)return!0}}}return!1}_queryCellCircle(s,h,y,w,M,k,R,A){const{circle:F,seenUids:Z,overlapMode:Y}=R,Q=this.boxCells[M];if(Q!==null){const se=this.bboxes;for(const ie of Q)if(!Z.box[ie]){Z.box[ie]=!0;const xe=4*ie,De=this.boxKeys[ie];if(this._circleAndRectCollide(F.x,F.y,F.radius,se[xe+0],se[xe+1],se[xe+2],se[xe+3])&&(!A||A(De))&&!Je(Y,De.overlapMode))return k.push(!0),!0}}const le=this.circleCells[M];if(le!==null){const se=this.circles;for(const ie of le)if(!Z.circle[ie]){Z.circle[ie]=!0;const xe=3*ie,De=this.circleKeys[ie];if(this._circlesCollide(se[xe],se[xe+1],se[xe+2],F.x,F.y,F.radius)&&(!A||A(De))&&!Je(Y,De.overlapMode))return k.push(!0),!0}}}_forEachCell(s,h,y,w,M,k,R,A){const F=this._convertToXCellCoord(s),Z=this._convertToYCellCoord(h),Y=this._convertToXCellCoord(y),Q=this._convertToYCellCoord(w);for(let le=F;le<=Y;le++)for(let se=Z;se<=Q;se++)if(M.call(this,s,h,y,w,this.xCellCount*se+le,k,R,A))return}_convertToXCellCoord(s){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(s*this.xScale)))}_convertToYCellCoord(s){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(s*this.yScale)))}_circlesCollide(s,h,y,w,M,k){const R=w-s,A=M-h,F=y+k;return F*F>R*R+A*A}_circleAndRectCollide(s,h,y,w,M,k,R){const A=(k-w)/2,F=Math.abs(s-(w+A));if(F>A+y)return!1;const Z=(R-M)/2,Y=Math.abs(h-(M+Z));if(Y>Z+y)return!1;if(F<=A||Y<=Z)return!0;const Q=F-A,le=Y-Z;return Q*Q+le*le<=y*y}}function cn(_,s,h,y,w){const M=c.create();return s?(c.scale(M,M,[1/w,1/w,1]),h||c.rotateZ(M,M,y.angle)):c.multiply(M,y.labelPlaneMatrix,_),M}function Gt(_,s,h,y,w){if(s){const M=c.clone(_);return c.scale(M,M,[w,w,1]),h||c.rotateZ(M,M,-y.angle),M}return y.glCoordMatrix}function pn(_,s,h){let y;h?(y=[_.x,_.y,h(_.x,_.y),1],c.transformMat4(y,y,s)):(y=[_.x,_.y,0,1],He(y,y,s));const w=y[3];return{point:new c.pointGeometry(y[0]/w,y[1]/w),signedDistanceFromCamera:w}}function Cn(_,s){return .5+_/s*.5}function ct(_,s){const h=_[0]/_[3],y=_[1]/_[3];return h>=-s[0]&&h<=s[0]&&y>=-s[1]&&y<=s[1]}function Ot(_,s,h,y,w,M,k,R,A,F){const Z=y?_.textSizeData:_.iconSizeData,Y=c.evaluateSizeForZoom(Z,h.transform.zoom),Q=[256/h.width*2+1,256/h.height*2+1],le=y?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;le.clear();const se=_.lineVertexArray,ie=y?_.text.placedSymbolArray:_.icon.placedSymbolArray,xe=h.transform.width/h.transform.height;let De=!1;for(let Ie=0;Ie<ie.length;Ie++){const ue=ie.get(Ie);if(ue.hidden||ue.writingMode===c.WritingMode.vertical&&!De){sr(ue.numGlyphs,le);continue}let Ve;if(De=!1,F?(Ve=[ue.anchorX,ue.anchorY,F(ue.anchorX,ue.anchorY),1],c.transformMat4(Ve,Ve,s)):(Ve=[ue.anchorX,ue.anchorY,0,1],He(Ve,Ve,s)),!ct(Ve,Q)){sr(ue.numGlyphs,le);continue}const ze=Cn(h.transform.cameraToCenterDistance,Ve[3]),Ge=c.evaluateSizeForFeature(Z,Y,ue),rt=k?Ge/ze:Ge*ze,gt=new c.pointGeometry(ue.anchorX,ue.anchorY),Qe=pn(gt,w,F).point,It={},St=Dt(ue,rt,!1,R,s,w,M,_.glyphOffsetArray,se,le,Qe,gt,It,xe,A,F);De=St.useVertical,(St.notEnoughRoom||De||St.needsFlipping&&Dt(ue,rt,!0,R,s,w,M,_.glyphOffsetArray,se,le,Qe,gt,It,xe,A,F).notEnoughRoom)&&sr(ue.numGlyphs,le)}y?_.text.dynamicLayoutVertexBuffer.updateData(le):_.icon.dynamicLayoutVertexBuffer.updateData(le)}function et(_,s,h,y,w,M,k,R,A,F,Z,Y,Q){const le=R.glyphStartIndex+R.numGlyphs,se=R.lineStartIndex,ie=R.lineStartIndex+R.lineLength,xe=s.getoffsetX(R.glyphStartIndex),De=s.getoffsetX(le-1),Ie=Fn(_*xe,h,y,w,M,k,R.segment,se,ie,A,F,Z,Y,Q);if(!Ie)return null;const ue=Fn(_*De,h,y,w,M,k,R.segment,se,ie,A,F,Z,Y,Q);return ue?{first:Ie,last:ue}:null}function $t(_,s,h,y){return _===c.WritingMode.horizontal&&Math.abs(h.y-s.y)>Math.abs(h.x-s.x)*y?{useVertical:!0}:(_===c.WritingMode.vertical?s.y<h.y:s.x>h.x)?{needsFlipping:!0}:null}function Dt(_,s,h,y,w,M,k,R,A,F,Z,Y,Q,le,se,ie){const xe=s/24,De=_.lineOffsetX*xe,Ie=_.lineOffsetY*xe;let ue;if(_.numGlyphs>1){const Ve=_.glyphStartIndex+_.numGlyphs,ze=_.lineStartIndex,Ge=_.lineStartIndex+_.lineLength,rt=et(xe,R,De,Ie,h,Z,Y,_,A,M,Q,se,ie);if(!rt)return{notEnoughRoom:!0};const gt=pn(rt.first.point,k,ie).point,Qe=pn(rt.last.point,k,ie).point;if(y&&!h){const It=$t(_.writingMode,gt,Qe,le);if(It)return It}ue=[rt.first];for(let It=_.glyphStartIndex+1;It<Ve-1;It++)ue.push(Fn(xe*R.getoffsetX(It),De,Ie,h,Z,Y,_.segment,ze,Ge,A,M,Q,se,ie));ue.push(rt.last)}else{if(y&&!h){const ze=pn(Y,w,ie).point,Ge=_.lineStartIndex+_.segment+1,rt=new c.pointGeometry(A.getx(Ge),A.gety(Ge)),gt=pn(rt,w,ie),Qe=gt.signedDistanceFromCamera>0?gt.point:mn(Y,rt,ze,1,w,ie),It=$t(_.writingMode,ze,Qe,le);if(It)return It}const Ve=Fn(xe*R.getoffsetX(_.glyphStartIndex),De,Ie,h,Z,Y,_.segment,_.lineStartIndex,_.lineStartIndex+_.lineLength,A,M,Q,se,ie);if(!Ve)return{notEnoughRoom:!0};ue=[Ve]}for(const Ve of ue)c.addDynamicAttributes(F,Ve.point,Ve.angle);return{}}function mn(_,s,h,y,w,M){const k=pn(_.add(_.sub(s)._unit()),w,M).point,R=h.sub(k);return h.add(R._mult(y/R.mag()))}function Fn(_,s,h,y,w,M,k,R,A,F,Z,Y,Q,le){const se=y?_-s:_+s;let ie=se>0?1:-1,xe=0;y&&(ie*=-1,xe=Math.PI),ie<0&&(xe+=Math.PI);let De=ie>0?R+k:R+k+1,Ie=w,ue=w,Ve=0,ze=0;const Ge=Math.abs(se),rt=[];for(;Ve+ze<=Ge;){if(De+=ie,De<R||De>=A)return null;if(ue=Ie,rt.push(Ie),Ie=Y[De],Ie===void 0){const Lt=new c.pointGeometry(F.getx(De),F.gety(De)),un=pn(Lt,Z,le);if(un.signedDistanceFromCamera>0)Ie=Y[De]=un.point;else{const gn=De-ie;Ie=mn(Ve===0?M:new c.pointGeometry(F.getx(gn),F.gety(gn)),Lt,ue,Ge-Ve+1,Z,le)}}Ve+=ze,ze=ue.dist(Ie)}const gt=(Ge-Ve)/ze,Qe=Ie.sub(ue),It=Qe.mult(gt)._add(ue);It._add(Qe._unit()._perp()._mult(h*ie));const St=xe+Math.atan2(Ie.y-ue.y,Ie.x-ue.x);return rt.push(It),{point:It,angle:Q?St:0,path:rt}}const nn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function sr(_,s){for(let h=0;h<_;h++){const y=s.length;s.resize(y+4),s.float32.set(nn,3*y)}}function He(_,s,h){const y=s[0],w=s[1];return _[0]=h[0]*y+h[4]*w+h[12],_[1]=h[1]*y+h[5]*w+h[13],_[3]=h[3]*y+h[7]*w+h[15],_}const kt=100;class en{constructor(s,h=new ln(s.width+200,s.height+200,25),y=new ln(s.width+200,s.height+200,25)){this.transform=s,this.grid=h,this.ignoredGrid=y,this.pitchfactor=Math.cos(s._pitch)*s.cameraToCenterDistance,this.screenRightBoundary=s.width+kt,this.screenBottomBoundary=s.height+kt,this.gridRightBoundary=s.width+200,this.gridBottomBoundary=s.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(s,h,y,w,M,k){const R=this.projectAndGetPerspectiveRatio(w,s.anchorPointX,s.anchorPointY,k),A=y*R.perspectiveRatio,F=s.x1*A+R.point.x,Z=s.y1*A+R.point.y,Y=s.x2*A+R.point.x,Q=s.y2*A+R.point.y;return!this.isInsideGrid(F,Z,Y,Q)||h!=="always"&&this.grid.hitTest(F,Z,Y,Q,h,M)||R.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[F,Z,Y,Q],offscreen:this.isOffscreen(F,Z,Y,Q)}}placeCollisionCircles(s,h,y,w,M,k,R,A,F,Z,Y,Q,le,se){const ie=[],xe=new c.pointGeometry(h.anchorX,h.anchorY),De=pn(xe,k,se),Ie=Cn(this.transform.cameraToCenterDistance,De.signedDistanceFromCamera),ue=(Z?M/Ie:M*Ie)/c.ONE_EM,Ve=pn(xe,R,se).point,ze=et(ue,w,h.lineOffsetX*ue,h.lineOffsetY*ue,!1,Ve,xe,h,y,R,{},!1,se);let Ge=!1,rt=!1,gt=!0;if(ze){const Qe=.5*Q*Ie+le,It=new c.pointGeometry(-100,-100),St=new c.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),Lt=new Le,un=ze.first,gn=ze.last;let Kt=[];for(let _n=un.path.length-1;_n>=1;_n--)Kt.push(un.path[_n]);for(let _n=1;_n<gn.path.length;_n++)Kt.push(gn.path[_n]);const Gn=2.5*Qe;if(A){const _n=Kt.map(wn=>pn(wn,A,se));Kt=_n.some(wn=>wn.signedDistanceFromCamera<=0)?[]:_n.map(wn=>wn.point)}let En=[];if(Kt.length>0){const _n=Kt[0].clone(),wn=Kt[0].clone();for(let Ln=1;Ln<Kt.length;Ln++)_n.x=Math.min(_n.x,Kt[Ln].x),_n.y=Math.min(_n.y,Kt[Ln].y),wn.x=Math.max(wn.x,Kt[Ln].x),wn.y=Math.max(wn.y,Kt[Ln].y);En=_n.x>=It.x&&wn.x<=St.x&&_n.y>=It.y&&wn.y<=St.y?[Kt]:wn.x<It.x||_n.x>St.x||wn.y<It.y||_n.y>St.y?[]:c.clipLine([Kt],It.x,It.y,St.x,St.y)}for(const _n of En){Lt.reset(_n,.25*Qe);let wn=0;wn=Lt.length<=.5*Qe?1:Math.ceil(Lt.paddedLength/Gn)+1;for(let Ln=0;Ln<wn;Ln++){const li=Ln/Math.max(wn-1,1),Dr=Lt.lerp(li),br=Dr.x+kt,Yr=Dr.y+kt;ie.push(br,Yr,Qe,0);const _i=br-Qe,hr=Yr-Qe,Xr=br+Qe,ao=Yr+Qe;if(gt=gt&&this.isOffscreen(_i,hr,Xr,ao),rt=rt||this.isInsideGrid(_i,hr,Xr,ao),s!=="always"&&this.grid.hitTestCircle(br,Yr,Qe,s,Y)&&(Ge=!0,!F))return{circles:[],offscreen:!1,collisionDetected:Ge}}}}return{circles:!F&&Ge||!rt||Ie<this.perspectiveRatioCutoff?[]:ie,offscreen:gt,collisionDetected:Ge}}queryRenderedSymbols(s){if(s.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const h=[];let y=1/0,w=1/0,M=-1/0,k=-1/0;for(const Z of s){const Y=new c.pointGeometry(Z.x+kt,Z.y+kt);y=Math.min(y,Y.x),w=Math.min(w,Y.y),M=Math.max(M,Y.x),k=Math.max(k,Y.y),h.push(Y)}const R=this.grid.query(y,w,M,k).concat(this.ignoredGrid.query(y,w,M,k)),A={},F={};for(const Z of R){const Y=Z.key;if(A[Y.bucketInstanceId]===void 0&&(A[Y.bucketInstanceId]={}),A[Y.bucketInstanceId][Y.featureIndex])continue;const Q=[new c.pointGeometry(Z.x1,Z.y1),new c.pointGeometry(Z.x2,Z.y1),new c.pointGeometry(Z.x2,Z.y2),new c.pointGeometry(Z.x1,Z.y2)];c.polygonIntersectsPolygon(h,Q)&&(A[Y.bucketInstanceId][Y.featureIndex]=!0,F[Y.bucketInstanceId]===void 0&&(F[Y.bucketInstanceId]=[]),F[Y.bucketInstanceId].push(Y.featureIndex))}return F}insertCollisionBox(s,h,y,w,M,k){(y?this.ignoredGrid:this.grid).insert({bucketInstanceId:w,featureIndex:M,collisionGroupID:k,overlapMode:h},s[0],s[1],s[2],s[3])}insertCollisionCircles(s,h,y,w,M,k){const R=y?this.ignoredGrid:this.grid,A={bucketInstanceId:w,featureIndex:M,collisionGroupID:k,overlapMode:h};for(let F=0;F<s.length;F+=4)R.insertCircle(A,s[F],s[F+1],s[F+2])}projectAndGetPerspectiveRatio(s,h,y,w){let M;return w?(M=[h,y,w(h,y),1],c.transformMat4(M,M,s)):(M=[h,y,0,1],He(M,M,s)),{point:new c.pointGeometry((M[0]/M[3]+1)/2*this.transform.width+kt,(-M[1]/M[3]+1)/2*this.transform.height+kt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/M[3]*.5}}isOffscreen(s,h,y,w){return y<kt||s>=this.screenRightBoundary||w<kt||h>this.screenBottomBoundary}isInsideGrid(s,h,y,w){return y>=0&&s<this.gridRightBoundary&&w>=0&&h<this.gridBottomBoundary}getViewportMatrix(){const s=c.identity([]);return c.translate(s,s,[-100,-100,0]),s}}function Ft(_,s,h){return s*(c.EXTENT/(_.tileSize*Math.pow(2,h-_.tileID.overscaledZ)))}class Vt{constructor(s,h,y,w){this.opacity=s?Math.max(0,Math.min(1,s.opacity+(s.placed?h:-h))):w&&y?1:0,this.placed=y}isHidden(){return this.opacity===0&&!this.placed}}class Qn{constructor(s,h,y,w,M){this.text=new Vt(s?s.text:null,h,y,M),this.icon=new Vt(s?s.icon:null,h,w,M)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class qn{constructor(s,h,y){this.text=s,this.icon=h,this.skipFade=y}}class tr{constructor(){this.invProjMatrix=c.create(),this.viewportMatrix=c.create(),this.circles=[]}}class Tr{constructor(s,h,y,w,M){this.bucketInstanceId=s,this.featureIndex=h,this.sourceLayerIndex=y,this.bucketIndex=w,this.tileID=M}}class _r{constructor(s){this.crossSourceCollisions=s,this.maxGroupID=0,this.collisionGroups={}}get(s){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[s]){const h=++this.maxGroupID;this.collisionGroups[s]={ID:h,predicate:y=>y.collisionGroupID===h}}return this.collisionGroups[s]}}function fs(_,s,h,y,w){const{horizontalAlign:M,verticalAlign:k}=c.getAnchorAlignment(_),R=-(M-.5)*s,A=-(k-.5)*h,F=c.evaluateVariableOffset(_,y);return new c.pointGeometry(R+F[0]*w,A+F[1]*w)}function yi(_,s,h,y,w,M){const{x1:k,x2:R,y1:A,y2:F,anchorPointX:Z,anchorPointY:Y}=_,Q=new c.pointGeometry(s,h);return y&&Q._rotate(w?M:-M),{x1:k+Q.x,y1:A+Q.y,x2:R+Q.x,y2:F+Q.y,anchorPointX:Z,anchorPointY:Y}}class ne{constructor(s,h,y,w,M){this.transform=s.clone(),this.terrain=h,this.collisionIndex=new en(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=y,this.retainedQueryData={},this.collisionGroups=new _r(w),this.collisionCircleArrays={},this.prevPlacement=M,M&&(M.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(s,h,y,w){const M=y.getBucket(h),k=y.latestFeatureIndex;if(!M||!k||h.id!==M.layerIds[0])return;const R=y.collisionBoxArray,A=M.layers[0].layout,F=Math.pow(2,this.transform.zoom-y.tileID.overscaledZ),Z=y.tileSize/c.EXTENT,Y=this.transform.calculatePosMatrix(y.tileID.toUnwrapped()),Q=A.get("text-pitch-alignment")==="map",le=A.get("text-rotation-alignment")==="map",se=Ft(y,1,this.transform.zoom),ie=cn(Y,Q,le,this.transform,se);let xe=null;if(Q){const Ie=Gt(Y,Q,le,this.transform,se);xe=c.multiply([],this.transform.labelPlaneMatrix,Ie)}this.retainedQueryData[M.bucketInstanceId]=new Tr(M.bucketInstanceId,k,M.sourceLayerIndex,M.index,y.tileID);const De={bucket:M,layout:A,posMatrix:Y,textLabelPlaneMatrix:ie,labelToScreenMatrix:xe,scale:F,textPixelRatio:Z,holdingForFade:y.holdingForFade(),collisionBoxArray:R,partiallyEvaluatedTextSize:c.evaluateSizeForZoom(M.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(M.sourceID)};if(w)for(const Ie of M.sortKeyRanges){const{sortKey:ue,symbolInstanceStart:Ve,symbolInstanceEnd:ze}=Ie;s.push({sortKey:ue,symbolInstanceStart:Ve,symbolInstanceEnd:ze,parameters:De})}else s.push({symbolInstanceStart:0,symbolInstanceEnd:M.symbolInstances.length,parameters:De})}attemptAnchorPlacement(s,h,y,w,M,k,R,A,F,Z,Y,Q,le,se,ie,xe){const De=[Q.textOffset0,Q.textOffset1],Ie=fs(s,y,w,De,M),ue=this.collisionIndex.placeCollisionBox(yi(h,Ie.x,Ie.y,k,R,this.transform.angle),Y,A,F,Z.predicate,xe);if((!ie||this.collisionIndex.placeCollisionBox(yi(ie,Ie.x,Ie.y,k,R,this.transform.angle),Y,A,F,Z.predicate,xe).box.length!==0)&&ue.box.length>0){let Ve;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Q.crossTileID]&&this.prevPlacement.placements[Q.crossTileID]&&this.prevPlacement.placements[Q.crossTileID].text&&(Ve=this.prevPlacement.variableOffsets[Q.crossTileID].anchor),Q.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Q.crossTileID]={textOffset:De,width:y,height:w,anchor:s,textBoxScale:M,prevAnchor:Ve},this.markUsedJustification(le,s,Q,se),le.allowVerticalPlacement&&(this.markUsedOrientation(le,se,Q),this.placedOrientations[Q.crossTileID]=se),{shift:Ie,placedGlyphBoxes:ue}}}placeLayerBucketPart(s,h,y){const{bucket:w,layout:M,posMatrix:k,textLabelPlaneMatrix:R,labelToScreenMatrix:A,textPixelRatio:F,holdingForFade:Z,collisionBoxArray:Y,partiallyEvaluatedTextSize:Q,collisionGroup:le}=s.parameters,se=M.get("text-optional"),ie=M.get("icon-optional"),xe=c.getOverlapMode(M,"text-overlap","text-allow-overlap"),De=xe==="always",Ie=c.getOverlapMode(M,"icon-overlap","icon-allow-overlap"),ue=Ie==="always",Ve=M.get("text-rotation-alignment")==="map",ze=M.get("text-pitch-alignment")==="map",Ge=M.get("icon-text-fit")!=="none",rt=M.get("symbol-z-order")==="viewport-y",gt=De&&(ue||!w.hasIconData()||ie),Qe=ue&&(De||!w.hasTextData()||se);!w.collisionArrays&&Y&&w.deserializeCollisionBoxes(Y);const It=(St,Lt)=>{if(h[St.crossTileID])return;if(Z)return void(this.placements[St.crossTileID]=new qn(!1,!1,!1));let un=!1,gn=!1,Kt=!0,Gn=null,En={box:null,offscreen:null},_n={box:null},wn=null,Ln=null,li=null,Dr=0,br=0,Yr=0;Lt.textFeatureIndex?Dr=Lt.textFeatureIndex:St.useRuntimeCollisionCircles&&(Dr=St.featureIndex),Lt.verticalTextFeatureIndex&&(br=Lt.verticalTextFeatureIndex);const _i=this.retainedQueryData[w.bucketInstanceId].tileID,hr=this.terrain?(In,Tn)=>this.terrain.getElevation(_i,In,Tn):null;for(const In of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const Tn=Lt[In];Tn&&(Tn.elevation=hr?hr(Tn.anchorPointX,Tn.anchorPointY):0)}const Xr=Lt.textBox;if(Xr){const In=fn=>{let vn=c.WritingMode.horizontal;if(w.allowVerticalPlacement&&!fn&&this.prevPlacement){const yr=this.prevPlacement.placedOrientations[St.crossTileID];yr&&(this.placedOrientations[St.crossTileID]=yr,vn=yr,this.markUsedOrientation(w,vn,St))}return vn},Tn=(fn,vn)=>{if(w.allowVerticalPlacement&&St.numVerticalGlyphVertices>0&&Lt.verticalTextBox){for(const yr of w.writingModes)if(yr===c.WritingMode.vertical?(En=vn(),_n=En):En=fn(),En&&En.box&&En.box.length)break}else En=fn()};if(M.get("text-variable-anchor")){let fn=M.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[St.crossTileID]){const ar=this.prevPlacement.variableOffsets[St.crossTileID];fn.indexOf(ar.anchor)>0&&(fn=fn.filter(Pi=>Pi!==ar.anchor),fn.unshift(ar.anchor))}const vn=(ar,Pi,lo)=>{const co=ar.x2-ar.x1,Ol=ar.y2-ar.y1,Na=St.textBoxScale,zl=Ge&&Ie==="never"?Pi:null;let ci={box:[],offscreen:!1};const Ra=xe!=="never"?2*fn.length:fn.length;for(let Fl=0;Fl<Ra;++Fl){const uo=this.attemptAnchorPlacement(fn[Fl%fn.length],ar,co,Ol,Na,Ve,ze,F,k,le,Fl>=fn.length?xe:"never",St,w,lo,zl,hr);if(uo&&(ci=uo.placedGlyphBoxes,ci&&ci.box&&ci.box.length)){un=!0,Gn=uo.shift;break}}return ci};Tn(()=>vn(Xr,Lt.iconBox,c.WritingMode.horizontal),()=>{const ar=Lt.verticalTextBox;return w.allowVerticalPlacement&&!(En&&En.box&&En.box.length)&&St.numVerticalGlyphVertices>0&&ar?vn(ar,Lt.verticalIconBox,c.WritingMode.vertical):{box:null,offscreen:null}}),En&&(un=En.box,Kt=En.offscreen);const yr=In(En&&En.box);if(!un&&this.prevPlacement){const ar=this.prevPlacement.variableOffsets[St.crossTileID];ar&&(this.variableOffsets[St.crossTileID]=ar,this.markUsedJustification(w,ar.anchor,St,yr))}}else{const fn=(vn,yr)=>{const ar=this.collisionIndex.placeCollisionBox(vn,xe,F,k,le.predicate,hr);return ar&&ar.box&&ar.box.length&&(this.markUsedOrientation(w,yr,St),this.placedOrientations[St.crossTileID]=yr),ar};Tn(()=>fn(Xr,c.WritingMode.horizontal),()=>{const vn=Lt.verticalTextBox;return w.allowVerticalPlacement&&St.numVerticalGlyphVertices>0&&vn?fn(vn,c.WritingMode.vertical):{box:null,offscreen:null}}),In(En&&En.box&&En.box.length)}}if(wn=En,un=wn&&wn.box&&wn.box.length>0,Kt=wn&&wn.offscreen,St.useRuntimeCollisionCircles){const In=w.text.placedSymbolArray.get(St.centerJustifiedTextSymbolIndex),Tn=c.evaluateSizeForFeature(w.textSizeData,Q,In),fn=M.get("text-padding");Ln=this.collisionIndex.placeCollisionCircles(xe,In,w.lineVertexArray,w.glyphOffsetArray,Tn,k,R,A,y,ze,le.predicate,St.collisionCircleDiameter,fn,hr),Ln.circles.length&&Ln.collisionDetected&&!y&&c.warnOnce("Collisions detected, but collision boxes are not shown"),un=De||Ln.circles.length>0&&!Ln.collisionDetected,Kt=Kt&&Ln.offscreen}if(Lt.iconFeatureIndex&&(Yr=Lt.iconFeatureIndex),Lt.iconBox){const In=Tn=>{const fn=Ge&&Gn?yi(Tn,Gn.x,Gn.y,Ve,ze,this.transform.angle):Tn;return this.collisionIndex.placeCollisionBox(fn,Ie,F,k,le.predicate,hr)};_n&&_n.box&&_n.box.length&&Lt.verticalIconBox?(li=In(Lt.verticalIconBox),gn=li.box.length>0):(li=In(Lt.iconBox),gn=li.box.length>0),Kt=Kt&&li.offscreen}const ao=se||St.numHorizontalGlyphVertices===0&&St.numVerticalGlyphVertices===0,Ia=ie||St.numIconVertices===0;if(ao||Ia?Ia?ao||(gn=gn&&un):un=gn&&un:gn=un=gn&&un,un&&wn&&wn.box&&this.collisionIndex.insertCollisionBox(wn.box,xe,M.get("text-ignore-placement"),w.bucketInstanceId,_n&&_n.box&&br?br:Dr,le.ID),gn&&li&&this.collisionIndex.insertCollisionBox(li.box,Ie,M.get("icon-ignore-placement"),w.bucketInstanceId,Yr,le.ID),Ln&&(un&&this.collisionIndex.insertCollisionCircles(Ln.circles,xe,M.get("text-ignore-placement"),w.bucketInstanceId,Dr,le.ID),y)){const In=w.bucketInstanceId;let Tn=this.collisionCircleArrays[In];Tn===void 0&&(Tn=this.collisionCircleArrays[In]=new tr);for(let fn=0;fn<Ln.circles.length;fn+=4)Tn.circles.push(Ln.circles[fn+0]),Tn.circles.push(Ln.circles[fn+1]),Tn.circles.push(Ln.circles[fn+2]),Tn.circles.push(Ln.collisionDetected?1:0)}if(St.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(w.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[St.crossTileID]=new qn(un||gt,gn||Qe,Kt||w.justReloaded),h[St.crossTileID]=!0};if(rt){if(s.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const St=w.getSortedSymbolIndexes(this.transform.angle);for(let Lt=St.length-1;Lt>=0;--Lt){const un=St[Lt];It(w.symbolInstances.get(un),w.collisionArrays[un])}}else for(let St=s.symbolInstanceStart;St<s.symbolInstanceEnd;St++)It(w.symbolInstances.get(St),w.collisionArrays[St]);if(y&&w.bucketInstanceId in this.collisionCircleArrays){const St=this.collisionCircleArrays[w.bucketInstanceId];c.invert(St.invProjMatrix,k),St.viewportMatrix=this.collisionIndex.getViewportMatrix()}w.justReloaded=!1}markUsedJustification(s,h,y,w){let M;M=w===c.WritingMode.vertical?y.verticalPlacedTextSymbolIndex:{left:y.leftJustifiedTextSymbolIndex,center:y.centerJustifiedTextSymbolIndex,right:y.rightJustifiedTextSymbolIndex}[c.getAnchorJustification(h)];const k=[y.leftJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.rightJustifiedTextSymbolIndex,y.verticalPlacedTextSymbolIndex];for(const R of k)R>=0&&(s.text.placedSymbolArray.get(R).crossTileID=M>=0&&R!==M?0:y.crossTileID)}markUsedOrientation(s,h,y){const w=h===c.WritingMode.horizontal||h===c.WritingMode.horizontalOnly?h:0,M=h===c.WritingMode.vertical?h:0,k=[y.leftJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.rightJustifiedTextSymbolIndex];for(const R of k)s.text.placedSymbolArray.get(R).placedOrientation=w;y.verticalPlacedTextSymbolIndex&&(s.text.placedSymbolArray.get(y.verticalPlacedTextSymbolIndex).placedOrientation=M)}commit(s){this.commitTime=s,this.zoomAtLastRecencyCheck=this.transform.zoom;const h=this.prevPlacement;let y=!1;this.prevZoomAdjustment=h?h.zoomAdjustment(this.transform.zoom):0;const w=h?h.symbolFadeChange(s):1,M=h?h.opacities:{},k=h?h.variableOffsets:{},R=h?h.placedOrientations:{};for(const A in this.placements){const F=this.placements[A],Z=M[A];Z?(this.opacities[A]=new Qn(Z,w,F.text,F.icon),y=y||F.text!==Z.text.placed||F.icon!==Z.icon.placed):(this.opacities[A]=new Qn(null,w,F.text,F.icon,F.skipFade),y=y||F.text||F.icon)}for(const A in M){const F=M[A];if(!this.opacities[A]){const Z=new Qn(F,w,!1,!1);Z.isHidden()||(this.opacities[A]=Z,y=y||F.text.placed||F.icon.placed)}}for(const A in k)this.variableOffsets[A]||!this.opacities[A]||this.opacities[A].isHidden()||(this.variableOffsets[A]=k[A]);for(const A in R)this.placedOrientations[A]||!this.opacities[A]||this.opacities[A].isHidden()||(this.placedOrientations[A]=R[A]);if(h&&h.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");y?this.lastPlacementChangeTime=s:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=h?h.lastPlacementChangeTime:s)}updateLayerOpacities(s,h){const y={};for(const w of h){const M=w.getBucket(s);M&&w.latestFeatureIndex&&s.id===M.layerIds[0]&&this.updateBucketOpacities(M,y,w.collisionBoxArray)}}updateBucketOpacities(s,h,y){s.hasTextData()&&s.text.opacityVertexArray.clear(),s.hasIconData()&&s.icon.opacityVertexArray.clear(),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexArray.clear(),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexArray.clear();const w=s.layers[0].layout,M=new Qn(null,0,!1,!1,!0),k=w.get("text-allow-overlap"),R=w.get("icon-allow-overlap"),A=w.get("text-variable-anchor"),F=w.get("text-rotation-alignment")==="map",Z=w.get("text-pitch-alignment")==="map",Y=w.get("icon-text-fit")!=="none",Q=new Qn(null,0,k&&(R||!s.hasIconData()||w.get("icon-optional")),R&&(k||!s.hasTextData()||w.get("text-optional")),!0);!s.collisionArrays&&y&&(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData())&&s.deserializeCollisionBoxes(y);const le=(se,ie,xe)=>{for(let De=0;De<ie/4;De++)se.opacityVertexArray.emplaceBack(xe)};for(let se=0;se<s.symbolInstances.length;se++){const ie=s.symbolInstances.get(se),{numHorizontalGlyphVertices:xe,numVerticalGlyphVertices:De,crossTileID:Ie}=ie;let ue=this.opacities[Ie];h[Ie]?ue=M:ue||(ue=Q,this.opacities[Ie]=ue),h[Ie]=!0;const Ve=ie.numIconVertices>0,ze=this.placedOrientations[ie.crossTileID],Ge=ze===c.WritingMode.vertical,rt=ze===c.WritingMode.horizontal||ze===c.WritingMode.horizontalOnly;if(xe>0||De>0){const gt=Te(ue.text);le(s.text,xe,Ge?Ue:gt),le(s.text,De,rt?Ue:gt);const Qe=ue.text.isHidden();[ie.rightJustifiedTextSymbolIndex,ie.centerJustifiedTextSymbolIndex,ie.leftJustifiedTextSymbolIndex].forEach(Lt=>{Lt>=0&&(s.text.placedSymbolArray.get(Lt).hidden=Qe||Ge?1:0)}),ie.verticalPlacedTextSymbolIndex>=0&&(s.text.placedSymbolArray.get(ie.verticalPlacedTextSymbolIndex).hidden=Qe||rt?1:0);const It=this.variableOffsets[ie.crossTileID];It&&this.markUsedJustification(s,It.anchor,ie,ze);const St=this.placedOrientations[ie.crossTileID];St&&(this.markUsedJustification(s,"left",ie,St),this.markUsedOrientation(s,St,ie))}if(Ve){const gt=Te(ue.icon),Qe=!(Y&&ie.verticalPlacedIconSymbolIndex&&Ge);ie.placedIconSymbolIndex>=0&&(le(s.icon,ie.numIconVertices,Qe?gt:Ue),s.icon.placedSymbolArray.get(ie.placedIconSymbolIndex).hidden=ue.icon.isHidden()),ie.verticalPlacedIconSymbolIndex>=0&&(le(s.icon,ie.numVerticalIconVertices,Qe?Ue:gt),s.icon.placedSymbolArray.get(ie.verticalPlacedIconSymbolIndex).hidden=ue.icon.isHidden())}if(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData()){const gt=s.collisionArrays[se];if(gt){let Qe=new c.pointGeometry(0,0);if(gt.textBox||gt.verticalTextBox){let St=!0;if(A){const Lt=this.variableOffsets[Ie];Lt?(Qe=fs(Lt.anchor,Lt.width,Lt.height,Lt.textOffset,Lt.textBoxScale),F&&Qe._rotate(Z?this.transform.angle:-this.transform.angle)):St=!1}gt.textBox&&V(s.textCollisionBox.collisionVertexArray,ue.text.placed,!St||Ge,Qe.x,Qe.y),gt.verticalTextBox&&V(s.textCollisionBox.collisionVertexArray,ue.text.placed,!St||rt,Qe.x,Qe.y)}const It=!!(!rt&&gt.verticalIconBox);gt.iconBox&&V(s.iconCollisionBox.collisionVertexArray,ue.icon.placed,It,Y?Qe.x:0,Y?Qe.y:0),gt.verticalIconBox&&V(s.iconCollisionBox.collisionVertexArray,ue.icon.placed,!It,Y?Qe.x:0,Y?Qe.y:0)}}}if(s.sortFeatures(this.transform.angle),this.retainedQueryData[s.bucketInstanceId]&&(this.retainedQueryData[s.bucketInstanceId].featureSortOrder=s.featureSortOrder),s.hasTextData()&&s.text.opacityVertexBuffer&&s.text.opacityVertexBuffer.updateData(s.text.opacityVertexArray),s.hasIconData()&&s.icon.opacityVertexBuffer&&s.icon.opacityVertexBuffer.updateData(s.icon.opacityVertexArray),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexBuffer&&s.iconCollisionBox.collisionVertexBuffer.updateData(s.iconCollisionBox.collisionVertexArray),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexBuffer&&s.textCollisionBox.collisionVertexBuffer.updateData(s.textCollisionBox.collisionVertexArray),s.text.opacityVertexArray.length!==s.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${s.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${s.text.layoutVertexArray.length}) / 4`);if(s.icon.opacityVertexArray.length!==s.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${s.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${s.icon.layoutVertexArray.length}) / 4`);if(s.bucketInstanceId in this.collisionCircleArrays){const se=this.collisionCircleArrays[s.bucketInstanceId];s.placementInvProjMatrix=se.invProjMatrix,s.placementViewportMatrix=se.viewportMatrix,s.collisionCircleArray=se.circles,delete this.collisionCircleArrays[s.bucketInstanceId]}}symbolFadeChange(s){return this.fadeDuration===0?1:(s-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(s){return Math.max(0,(this.transform.zoom-s)/1.5)}hasTransitions(s){return this.stale||s-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(s,h){const y=this.zoomAtLastRecencyCheck===h?1-this.zoomAdjustment(h):1;return this.zoomAtLastRecencyCheck=h,this.commitTime+this.fadeDuration*y>s}setStale(){this.stale=!0}}function V(_,s,h,y,w){_.emplaceBack(s?1:0,h?1:0,y||0,w||0),_.emplaceBack(s?1:0,h?1:0,y||0,w||0),_.emplaceBack(s?1:0,h?1:0,y||0,w||0),_.emplaceBack(s?1:0,h?1:0,y||0,w||0)}const O=Math.pow(2,25),W=Math.pow(2,24),J=Math.pow(2,17),re=Math.pow(2,16),fe=Math.pow(2,9),ve=Math.pow(2,8),pe=Math.pow(2,1);function Te(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;const s=_.placed?1:0,h=Math.floor(127*_.opacity);return h*O+s*W+h*J+s*re+h*fe+s*ve+h*pe+s}const Ue=0;class st{constructor(s){this._sortAcrossTiles=s.layout.get("symbol-z-order")!=="viewport-y"&&!s.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(s,h,y,w,M){const k=this._bucketParts;for(;this._currentTileIndex<s.length;)if(h.getBucketParts(k,w,s[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,M())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,k.sort((R,A)=>R.sortKey-A.sortKey));this._currentPartIndex<k.length;)if(h.placeLayerBucketPart(k[this._currentPartIndex],this._seenCrossTileIDs,y),this._currentPartIndex++,M())return!0;return!1}}class $e{constructor(s,h,y,w,M,k,R,A){this.placement=new ne(s,h,k,R,A),this._currentPlacementIndex=y.length-1,this._forceFullPlacement=w,this._showCollisionBoxes=M,this._done=!1}isDone(){return this._done}continuePlacement(s,h,y){const w=c.exported.now(),M=()=>{const k=c.exported.now()-w;return!this._forceFullPlacement&&k>2};for(;this._currentPlacementIndex>=0;){const k=h[s[this._currentPlacementIndex]],R=this.placement.collisionIndex.transform.zoom;if(k.type==="symbol"&&(!k.minzoom||k.minzoom<=R)&&(!k.maxzoom||k.maxzoom>R)){if(this._inProgressLayer||(this._inProgressLayer=new st(k)),this._inProgressLayer.continuePlacement(y[k.source],this.placement,this._showCollisionBoxes,k,M))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(s){return this.placement.commit(s),this.placement}}const _t=512/c.EXTENT/2;class bt{constructor(s,h,y){this.tileID=s,this.indexedSymbolInstances={},this.bucketInstanceId=y;for(let w=0;w<h.length;w++){const M=h.get(w),k=M.key;this.indexedSymbolInstances[k]||(this.indexedSymbolInstances[k]=[]),this.indexedSymbolInstances[k].push({crossTileID:M.crossTileID,coord:this.getScaledCoordinates(M,s)})}}getScaledCoordinates(s,h){const y=_t/Math.pow(2,h.canonical.z-this.tileID.canonical.z);return{x:Math.floor((h.canonical.x*c.EXTENT+s.anchorX)*y),y:Math.floor((h.canonical.y*c.EXTENT+s.anchorY)*y)}}findMatches(s,h,y){const w=this.tileID.canonical.z<h.canonical.z?1:Math.pow(2,this.tileID.canonical.z-h.canonical.z);for(let M=0;M<s.length;M++){const k=s.get(M);if(k.crossTileID)continue;const R=this.indexedSymbolInstances[k.key];if(!R)continue;const A=this.getScaledCoordinates(k,h);for(const F of R)if(Math.abs(F.coord.x-A.x)<=w&&Math.abs(F.coord.y-A.y)<=w&&!y[F.crossTileID]){y[F.crossTileID]=!0,k.crossTileID=F.crossTileID;break}}}}class zt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ct{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(s){const h=Math.round((s-this.lng)/360);if(h!==0)for(const y in this.indexes){const w=this.indexes[y],M={};for(const k in w){const R=w[k];R.tileID=R.tileID.unwrapTo(R.tileID.wrap+h),M[R.tileID.key]=R}this.indexes[y]=M}this.lng=s}addBucket(s,h,y){if(this.indexes[s.overscaledZ]&&this.indexes[s.overscaledZ][s.key]){if(this.indexes[s.overscaledZ][s.key].bucketInstanceId===h.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(s.overscaledZ,this.indexes[s.overscaledZ][s.key])}for(let M=0;M<h.symbolInstances.length;M++)h.symbolInstances.get(M).crossTileID=0;this.usedCrossTileIDs[s.overscaledZ]||(this.usedCrossTileIDs[s.overscaledZ]={});const w=this.usedCrossTileIDs[s.overscaledZ];for(const M in this.indexes){const k=this.indexes[M];if(Number(M)>s.overscaledZ)for(const R in k){const A=k[R];A.tileID.isChildOf(s)&&A.findMatches(h.symbolInstances,s,w)}else{const R=k[s.scaledTo(Number(M)).key];R&&R.findMatches(h.symbolInstances,s,w)}}for(let M=0;M<h.symbolInstances.length;M++){const k=h.symbolInstances.get(M);k.crossTileID||(k.crossTileID=y.generate(),w[k.crossTileID]=!0)}return this.indexes[s.overscaledZ]===void 0&&(this.indexes[s.overscaledZ]={}),this.indexes[s.overscaledZ][s.key]=new bt(s,h.symbolInstances,h.bucketInstanceId),!0}removeBucketCrossTileIDs(s,h){for(const y in h.indexedSymbolInstances)for(const w of h.indexedSymbolInstances[y])delete this.usedCrossTileIDs[s][w.crossTileID]}removeStaleBuckets(s){let h=!1;for(const y in this.indexes){const w=this.indexes[y];for(const M in w)s[w[M].bucketInstanceId]||(this.removeBucketCrossTileIDs(y,w[M]),delete w[M],h=!0)}return h}}class on{constructor(){this.layerIndexes={},this.crossTileIDs=new zt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(s,h,y){let w=this.layerIndexes[s.id];w===void 0&&(w=this.layerIndexes[s.id]=new Ct);let M=!1;const k={};w.handleWrapJump(y);for(const R of h){const A=R.getBucket(s);A&&s.id===A.layerIds[0]&&(A.bucketInstanceId||(A.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(R.tileID,A,this.crossTileIDs)&&(M=!0),k[A.bucketInstanceId]=!0)}return w.removeStaleBuckets(k)&&(M=!0),M}pruneUnusedLayers(s){const h={};s.forEach(y=>{h[y]=!0});for(const y in this.layerIndexes)h[y]||delete this.layerIndexes[y]}}var Qt=c.createLayout([{name:"a_pos",type:"Int16",components:2}]);class Xt extends c.Evented{constructor(s){super(),this.sourceCache=s,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=s._cache.max,s.usedForTerrain=!0,s.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const s in this._tiles){const h=this._tiles[s];h.textures.forEach(y=>y.destroy()),h.textures=[]}}update(s,h){this.sourceCache.update(s,h),this._renderableTilesKeys=[];for(const y of s.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:h}))this._renderableTilesKeys.push(y.key),this._tiles[y.key]||(y.posMatrix=new Float64Array(16),c.ortho(y.posMatrix,0,c.EXTENT,0,c.EXTENT,0,1),this._tiles[y.key]=new mt(y,this.tileSize))}removeOutdated(s){const h={};this.renderHistory=this.renderHistory.filter((y,w)=>this.renderHistory.indexOf(y)===w).slice(0,this.renderHistorySize);for(const y of this._renderableTilesKeys)h[y]=!0;for(const y of this.renderHistory)h[y]=!0;for(const y in this._tiles)h[y]||(this._tiles[y].clearTextures(s),delete this._tiles[y])}getRenderableTiles(){return this._renderableTilesKeys.map(s=>this.getTileByID(s))}getTileByID(s){return this._tiles[s]}getTerrainCoords(s){const h={};for(const y of this._renderableTilesKeys){const w=this._tiles[y].tileID;if(w.canonical.equals(s.canonical)){const M=s.clone();M.posMatrix=new Float64Array(16),c.ortho(M.posMatrix,0,c.EXTENT,0,c.EXTENT,0,1),h[y]=M}else if(w.canonical.isChildOf(s.canonical)){const M=s.clone();M.posMatrix=new Float64Array(16);const k=w.canonical.z-s.canonical.z,R=w.canonical.x-(w.canonical.x>>k<<k),A=w.canonical.y-(w.canonical.y>>k<<k),F=c.EXTENT>>k;c.ortho(M.posMatrix,0,F,0,F,0,1),c.translate(M.posMatrix,M.posMatrix,[-R*F,-A*F,0]),h[y]=M}else if(s.canonical.isChildOf(w.canonical)){const M=s.clone();M.posMatrix=new Float64Array(16);const k=s.canonical.z-w.canonical.z,R=s.canonical.x-(s.canonical.x>>k<<k),A=s.canonical.y-(s.canonical.y>>k<<k),F=c.EXTENT>>k;c.ortho(M.posMatrix,0,c.EXTENT,0,c.EXTENT,0,1),c.translate(M.posMatrix,M.posMatrix,[R*F,A*F,0]),c.scale(M.posMatrix,M.posMatrix,[1/2**k,1/2**k,0]),h[y]=M}}return h}getSourceTile(s,h){const y=this.sourceCache._source;let w=s.overscaledZ-this.deltaZoom;if(w>y.maxzoom&&(w=y.maxzoom),w<y.minzoom)return null;this._sourceTileCache[s.key]||(this._sourceTileCache[s.key]=s.scaledTo(w).key);let M=this.sourceCache.getTileByID(this._sourceTileCache[s.key]);if((!M||!M.dem)&&h)for(;w>=y.minzoom&&(!M||!M.dem);)M=this.sourceCache.getTileByID(s.scaledTo(w--).key);return M}tilesAfterTime(s=Date.now()){return Object.values(this._tiles).filter(h=>h.timeLoaded>=s)}}class sn{constructor(s,h,y){this.style=s,this.sourceCache=new Xt(h),this.options=y,this.exaggeration=typeof y.exaggeration=="number"?y.exaggeration:1,this.elevationOffset=typeof y.elevationOffset=="number"?y.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(s,h,y,w=c.EXTENT){if(!(h>=0&&h<w&&y>=0&&y<w))return this.elevationOffset;let M=0;const k=this.getTerrainData(s);if(k.tile&&k.tile.dem){const R=c.transformMat4$1([],[h/w*c.EXTENT,y/w*c.EXTENT],k.u_terrain_matrix),A=[R[0]*k.tile.dem.dim,R[1]*k.tile.dem.dim],F=[Math.floor(A[0]),Math.floor(A[1])],Z=k.tile.dem.get(F[0],F[1]),Y=k.tile.dem.get(F[0],F[1]+1),Q=k.tile.dem.get(F[0]+1,F[1]),le=k.tile.dem.get(F[0]+1,F[1]+1);M=c.number(c.number(Z,Y,A[0]-F[0]),c.number(Q,le,A[0]-F[0]),A[1]-F[1])}return M}rememberForRerender(s,h){for(const y in this.sourceCache._tiles){const w=this.sourceCache._tiles[y];(w.tileID.equals(h)||w.tileID.isChildOf(h))&&(s===this.sourceCache.sourceCache.id&&(w.timeLoaded=Date.now()),this._rerender[s]=this._rerender[s]||{},this._rerender[s][w.tileID.key]=!0)}}needsRerender(s,h){return this._rerender[s]&&this._rerender[s][h.key]}clearRerenderCache(){this._rerender={}}getElevation(s,h,y,w=c.EXTENT){return(this.getDEMElevation(s,h,y,w)+this.elevationOffset)*this.exaggeration}getTerrainData(s){if(!this._emptyDemTexture){const w=this.style.map.painter.context,M=new c.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new q(w,M,w.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new q(w,new c.RGBAImage({width:1,height:1}),w.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(w.gl.NEAREST,w.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=c.identity([])}const h=this.sourceCache.getSourceTile(s,!0);if(h&&h.dem&&(!h.demTexture||h.needsTerrainPrepare)){const w=this.style.map.painter.context;h.demTexture=this.style.map.painter.getTileTexture(h.dem.stride),h.demTexture?h.demTexture.update(h.dem.getPixels(),{premultiply:!1}):h.demTexture=new q(w,h.dem.getPixels(),w.gl.RGBA,{premultiply:!1}),h.demTexture.bind(w.gl.NEAREST,w.gl.CLAMP_TO_EDGE),h.needsTerrainPrepare=!1}const y=h&&h+h.tileID.key+s.key;if(y&&!this._demMatrixCache[y]){const w=this.sourceCache.sourceCache._source.maxzoom;let M=s.canonical.z-h.tileID.canonical.z;s.overscaledZ>s.canonical.z&&(s.canonical.z>=w?M=s.canonical.z-w:c.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const k=s.canonical.x-(s.canonical.x>>M<<M),R=s.canonical.y-(s.canonical.y>>M<<M),A=c.fromScaling(new Float64Array(16),[1/(c.EXTENT<<M),1/(c.EXTENT<<M),0]);c.translate(A,A,[k*c.EXTENT,R*c.EXTENT,0]),this._demMatrixCache[s.key]={matrix:A,coord:s}}return{u_depth:2,u_terrain:3,u_terrain_dim:h&&h.dem&&h.dem.dim||1,u_terrain_matrix:y?this._demMatrixCache[s.key].matrix:this._emptyDemMatrix,u_terrain_unpack:h&&h.dem&&h.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(h&&h.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:h}}getRTTFramebuffer(){const s=this.style.map.painter;if(!this._rttFramebuffer){const h=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=s.context.createFramebuffer(h,h,!0),this._rttFramebuffer.depthAttachment.set(s.context.createRenderbuffer(s.context.gl.DEPTH_COMPONENT16,h,h))}return this._rttFramebuffer}getFramebuffer(s){const h=this.style.map.painter,y=h.width/devicePixelRatio,w=h.height/devicePixelRatio;return!this._fbo||this._fbo.width===y&&this._fbo.height===w||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new q(h.context,{width:y,height:w,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new q(h.context,{width:y,height:w,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=h.context.createFramebuffer(y,w,!0),this._fbo.depthAttachment.set(h.context.createRenderbuffer(h.context.gl.DEPTH_COMPONENT16,y,w))),this._fbo.colorAttachment.set(s==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const s=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const h=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let M=0,k=0;M<this._coordsTextureSize;M++)for(let R=0;R<this._coordsTextureSize;R++,k+=4)h[k+0]=255&R,h[k+1]=255&M,h[k+2]=R>>8<<4|M>>8,h[k+3]=0;const y=new c.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(h.buffer)),w=new q(s,y,s.gl.RGBA,{premultiply:!1});return w.bind(s.gl.NEAREST,s.gl.CLAMP_TO_EDGE),this._coordsTexture=w,w}pointCoordinate(s){const h=new Uint8Array(4),y=this.style.map.painter,w=y.context,M=w.gl;w.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),M.readPixels(s.x,y.height/devicePixelRatio-s.y-1,1,1,M.RGBA,M.UNSIGNED_BYTE,h),w.bindFramebuffer.set(null);const k=h[0]+(h[2]>>4<<8),R=h[1]+((15&h[2])<<8),A=this.coordsIndex[255-h[3]],F=A&&this.sourceCache.getTileByID(A);if(!F)return null;const Z=this._coordsTextureSize,Y=(1<<F.tileID.canonical.z)*Z;return new c.MercatorCoordinate((F.tileID.canonical.x*Z+k)/Y,(F.tileID.canonical.y*Z+R)/Y,this.getElevation(F.tileID,k,R,Z))}getTerrainMesh(){if(this._mesh)return this._mesh;const s=this.style.map.painter.context,h=new c.PosArray,y=new c.TriangleIndexArray,w=this.meshSize,M=c.EXTENT/w,k=w*w;for(let R=0;R<=w;R++)for(let A=0;A<=w;A++)h.emplaceBack(A*M,R*M);for(let R=0;R<k;R+=w+1)for(let A=0;A<w;A++)y.emplaceBack(A+R,w+A+R+1,w+A+R+2),y.emplaceBack(A+R,w+A+R+2,A+R+1);return this._mesh={indexBuffer:s.createIndexBuffer(y),vertexBuffer:s.createVertexBuffer(h,Qt.members),segments:c.SegmentVector.simpleSegment(0,0,h.length,y.length)},this._mesh}getMinMaxElevation(s){const h=this.getTerrainData(s).tile,y={minElevation:null,maxElevation:null};return h&&h.dem&&(y.minElevation=(h.dem.min+this.elevationOffset)*this.exaggeration,y.maxElevation=(h.dem.max+this.elevationOffset)*this.exaggeration),y}}const an=(_,s)=>c.emitValidationErrors(_,s&&s.filter(h=>h.identifier!=="source.canvas")),mr=c.pick(Yt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),er=c.pick(Yt,["setCenter","setZoom","setBearing","setPitch"]),Bn=function(){const _={},s=c.spec.$version;for(const h in c.spec.$root){const y=c.spec.$root[h];if(y.required){let w=null;w=h==="version"?s:y.type==="array"?[]:{},w!=null&&(_[h]=w)}}return _}();class kr extends c.Evented{constructor(s,h={}){super(),this.map=s,this.dispatcher=new Me(Mn(),this),this.imageManager=new G,this.imageManager.setEventedParent(this),this.glyphManager=new ae(s._requestManager,h.localIdeographFontFamily),this.lineAtlas=new Ke(256,512),this.crossTileSymbolIndex=new on,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new c.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",c.getReferrer());const y=this;this._rtlTextPluginCallback=kr.registerForPluginStateChange(w=>{y.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:w.pluginStatus,pluginURL:w.pluginURL},(M,k)=>{if(c.triggerPluginCompletionEvent(M),k&&k.every(R=>R))for(const R in y.sourceCaches)y.sourceCaches[R].reload()})}),this.on("data",w=>{if(w.dataType!=="source"||w.sourceDataType!=="metadata")return;const M=this.sourceCaches[w.sourceId];if(!M)return;const k=M.getSource();if(k&&k.vectorLayerIds)for(const R in this._layers){const A=this._layers[R];A.source===k.id&&this._validateLayer(A)}})}loadURL(s,h={}){this.fire(new c.Event("dataloading",{dataType:"style"}));const y=typeof h.validate!="boolean"||h.validate,w=this.map._requestManager.transformRequest(s,c.ResourceType.Style);this._request=c.getJSON(w,(M,k)=>{this._request=null,M?this.fire(new c.ErrorEvent(M)):k&&this._load(k,y)})}loadJSON(s,h={}){this.fire(new c.Event("dataloading",{dataType:"style"})),this._request=c.exported.frame(()=>{this._request=null,this._load(s,h.validate!==!1)})}loadEmpty(){this.fire(new c.Event("dataloading",{dataType:"style"})),this._load(Bn,!1)}_load(s,h){if(h&&an(this,c.validateStyle(s)))return;this._loaded=!0,this.stylesheet=s;for(const w in s.sources)this.addSource(w,s.sources[w],{validate:!1});s.sprite?this._loadSprite(s.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(s.glyphs);const y=Jn(this.stylesheet.layers);this._order=y.map(w=>w.id),this._layers={},this._serializedLayers={};for(let w of y)w=c.createStyleLayer(w),w.setEventedParent(this,{layer:{id:w.id}}),this._layers[w.id]=w,this._serializedLayers[w.id]=w.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new ye(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new c.Event("data",{dataType:"style"})),this.fire(new c.Event("style.load"))}_loadSprite(s){this._spriteRequest=function(h,y,w,M){let k,R,A;const F=w>1?"@2x":"";let Z=c.getJSON(y.transformRequest(y.normalizeSpriteURL(h,F,".json"),c.ResourceType.SpriteJSON),(le,se)=>{Z=null,A||(A=le,k=se,Q())}),Y=c.getImage(y.transformRequest(y.normalizeSpriteURL(h,F,".png"),c.ResourceType.SpriteImage),(le,se)=>{Y=null,A||(A=le,R=se,Q())});function Q(){if(A)M(A);else if(k&&R){const le=c.exported.getImageData(R),se={};for(const ie in k){const{width:xe,height:De,x:Ie,y:ue,sdf:Ve,pixelRatio:ze,stretchX:Ge,stretchY:rt,content:gt}=k[ie],Qe=new c.RGBAImage({width:xe,height:De});c.RGBAImage.copy(le,Qe,{x:Ie,y:ue},{x:0,y:0},{width:xe,height:De}),se[ie]={data:Qe,pixelRatio:ze,sdf:Ve,stretchX:Ge,stretchY:rt,content:gt}}M(null,se)}}return{cancel(){Z&&(Z.cancel(),Z=null),Y&&(Y.cancel(),Y=null)}}}(s,this.map._requestManager,this.map.getPixelRatio(),(h,y)=>{if(this._spriteRequest=null,h)this.fire(new c.ErrorEvent(h));else if(y)for(const w in y)this.imageManager.addImage(w,y[w]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.Event("data",{dataType:"style"}))})}_validateLayer(s){const h=this.sourceCaches[s.source];if(!h)return;const y=s.sourceLayer;if(!y)return;const w=h.getSource();(w.type==="geojson"||w.vectorLayerIds&&w.vectorLayerIds.indexOf(y)===-1)&&this.fire(new c.ErrorEvent(new Error(`Source layer "${y}" does not exist on source "${w.id}" as specified by style layer "${s.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const s in this.sourceCaches)if(!this.sourceCaches[s].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(s){const h=[];for(const y of s){const w=this._layers[y];w.type!=="custom"&&h.push(w.serialize())}return h}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const s in this.sourceCaches)if(this.sourceCaches[s].hasTransition())return!0;for(const s in this._layers)if(this._layers[s].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(s){if(!this._loaded)return;const h=this._changed;if(this._changed){const w=Object.keys(this._updatedLayers),M=Object.keys(this._removedLayers);(w.length||M.length)&&this._updateWorkerLayers(w,M);for(const k in this._updatedSources){const R=this._updatedSources[k];if(R==="reload")this._reloadSource(k);else{if(R!=="clear")throw new Error(`Invalid action ${R}`);this._clearSource(k)}}this._updateTilesForChangedImages();for(const k in this._updatedPaintProps)this._layers[k].updateTransitions(s);this.light.updateTransitions(s),this._resetUpdates()}const y={};for(const w in this.sourceCaches){const M=this.sourceCaches[w];y[w]=M.used,M.used=!1}for(const w of this._order){const M=this._layers[w];M.recalculate(s,this._availableImages),!M.isHidden(s.zoom)&&M.source&&(this.sourceCaches[M.source].used=!0)}for(const w in y){const M=this.sourceCaches[w];y[w]!==M.used&&M.fire(new c.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:w}))}this.light.recalculate(s),this.z=s.zoom,h&&this.fire(new c.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const s=Object.keys(this._changedImages);if(s.length){for(const h in this.sourceCaches)this.sourceCaches[h].reloadTilesForDependencies(["icons","patterns"],s);this._changedImages={}}}_updateWorkerLayers(s,h){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(s),removedIds:h})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(s){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),s){const h=this.sourceCaches[s.source];if(!h)throw new Error(`cannot load terrain, because there exists no source with ID: ${s.source}`);this.terrain=new sn(this,h,s),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=y=>{y.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=y=>{y.tile&&(y.sourceId===s.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(y.sourceId,y.tile.tileID)):y.source.type==="geojson"&&this.terrain.rememberForRerender(y.sourceId,y.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new c.Event("terrain",{terrain:s}))}setState(s){if(this._checkLoaded(),an(this,c.validateStyle(s)))return!1;(s=c.clone$1(s)).layers=Jn(s.layers);const h=function(w,M){if(!w)return[{command:Yt.setStyle,args:[M]}];let k=[];try{if(!D(w.version,M.version))return[{command:Yt.setStyle,args:[M]}];D(w.center,M.center)||k.push({command:Yt.setCenter,args:[M.center]}),D(w.zoom,M.zoom)||k.push({command:Yt.setZoom,args:[M.zoom]}),D(w.bearing,M.bearing)||k.push({command:Yt.setBearing,args:[M.bearing]}),D(w.pitch,M.pitch)||k.push({command:Yt.setPitch,args:[M.pitch]}),D(w.sprite,M.sprite)||k.push({command:Yt.setSprite,args:[M.sprite]}),D(w.glyphs,M.glyphs)||k.push({command:Yt.setGlyphs,args:[M.glyphs]}),D(w.transition,M.transition)||k.push({command:Yt.setTransition,args:[M.transition]}),D(w.light,M.light)||k.push({command:Yt.setLight,args:[M.light]});const R={},A=[];(function(Z,Y,Q,le){let se;for(se in Y=Y||{},Z=Z||{})Object.prototype.hasOwnProperty.call(Z,se)&&(Object.prototype.hasOwnProperty.call(Y,se)||Nn(se,Q,le));for(se in Y)Object.prototype.hasOwnProperty.call(Y,se)&&(Object.prototype.hasOwnProperty.call(Z,se)?D(Z[se],Y[se])||(Z[se].type==="geojson"&&Y[se].type==="geojson"&&bn(Z,Y,se)?Q.push({command:Yt.setGeoJSONSourceData,args:[se,Y[se].data]}):Dn(se,Y,Q,le)):xn(se,Y,Q))})(w.sources,M.sources,A,R);const F=[];w.layers&&w.layers.forEach(Z=>{R[Z.source]?k.push({command:Yt.removeLayer,args:[Z.id]}):F.push(Z)}),k=k.concat(A),function(Z,Y,Q){Y=Y||[];const le=(Z=Z||[]).map(Et),se=Y.map(Et),ie=Z.reduce(nt,{}),xe=Y.reduce(nt,{}),De=le.slice(),Ie=Object.create(null);let ue,Ve,ze,Ge,rt,gt,Qe;for(ue=0,Ve=0;ue<le.length;ue++)ze=le[ue],Object.prototype.hasOwnProperty.call(xe,ze)?Ve++:(Q.push({command:Yt.removeLayer,args:[ze]}),De.splice(De.indexOf(ze,Ve),1));for(ue=0,Ve=0;ue<se.length;ue++)ze=se[se.length-1-ue],De[De.length-1-ue]!==ze&&(Object.prototype.hasOwnProperty.call(ie,ze)?(Q.push({command:Yt.removeLayer,args:[ze]}),De.splice(De.lastIndexOf(ze,De.length-Ve),1)):Ve++,gt=De[De.length-ue],Q.push({command:Yt.addLayer,args:[xe[ze],gt]}),De.splice(De.length-ue,0,ze),Ie[ze]=!0);for(ue=0;ue<se.length;ue++)if(ze=se[ue],Ge=ie[ze],rt=xe[ze],!Ie[ze]&&!D(Ge,rt))if(D(Ge.source,rt.source)&&D(Ge["source-layer"],rt["source-layer"])&&D(Ge.type,rt.type)){for(Qe in yt(Ge.layout,rt.layout,Q,ze,null,Yt.setLayoutProperty),yt(Ge.paint,rt.paint,Q,ze,null,Yt.setPaintProperty),D(Ge.filter,rt.filter)||Q.push({command:Yt.setFilter,args:[ze,rt.filter]}),D(Ge.minzoom,rt.minzoom)&&D(Ge.maxzoom,rt.maxzoom)||Q.push({command:Yt.setLayerZoomRange,args:[ze,rt.minzoom,rt.maxzoom]}),Ge)Object.prototype.hasOwnProperty.call(Ge,Qe)&&Qe!=="layout"&&Qe!=="paint"&&Qe!=="filter"&&Qe!=="metadata"&&Qe!=="minzoom"&&Qe!=="maxzoom"&&(Qe.indexOf("paint.")===0?yt(Ge[Qe],rt[Qe],Q,ze,Qe.slice(6),Yt.setPaintProperty):D(Ge[Qe],rt[Qe])||Q.push({command:Yt.setLayerProperty,args:[ze,Qe,rt[Qe]]}));for(Qe in rt)Object.prototype.hasOwnProperty.call(rt,Qe)&&!Object.prototype.hasOwnProperty.call(Ge,Qe)&&Qe!=="layout"&&Qe!=="paint"&&Qe!=="filter"&&Qe!=="metadata"&&Qe!=="minzoom"&&Qe!=="maxzoom"&&(Qe.indexOf("paint.")===0?yt(Ge[Qe],rt[Qe],Q,ze,Qe.slice(6),Yt.setPaintProperty):D(Ge[Qe],rt[Qe])||Q.push({command:Yt.setLayerProperty,args:[ze,Qe,rt[Qe]]}))}else Q.push({command:Yt.removeLayer,args:[ze]}),gt=De[De.lastIndexOf(ze)+1],Q.push({command:Yt.addLayer,args:[rt,gt]})}(F,M.layers,k)}catch(R){console.warn("Unable to compute style diff:",R),k=[{command:Yt.setStyle,args:[M]}]}return k}(this.serialize(),s).filter(w=>!(w.command in er));if(h.length===0)return!1;const y=h.filter(w=>!(w.command in mr));if(y.length>0)throw new Error(`Unimplemented: ${y.map(w=>w.command).join(", ")}.`);return h.forEach(w=>{w.command!=="setTransition"&&this[w.command].apply(this,w.args)}),this.stylesheet=s,!0}addImage(s,h){if(this.getImage(s))return this.fire(new c.ErrorEvent(new Error(`An image named "${s}" already exists.`)));this.imageManager.addImage(s,h),this._afterImageUpdated(s)}updateImage(s,h){this.imageManager.updateImage(s,h)}getImage(s){return this.imageManager.getImage(s)}removeImage(s){if(!this.getImage(s))return this.fire(new c.ErrorEvent(new Error(`An image named "${s}" does not exist.`)));this.imageManager.removeImage(s),this._afterImageUpdated(s)}_afterImageUpdated(s){this._availableImages=this.imageManager.listImages(),this._changedImages[s]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(s,h,y={}){if(this._checkLoaded(),this.sourceCaches[s]!==void 0)throw new Error(`Source "${s}" already exists.`);if(!h.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(h).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(h.type)>=0&&this._validate(c.validateStyle.source,`sources.${s}`,h,null,y))return;this.map&&this.map._collectResourceTiming&&(h.collectResourceTiming=!0);const w=this.sourceCaches[s]=new vt(s,h,this.dispatcher);w.style=this,w.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:w.serialize(),sourceId:s})),w.onAdd(this.map),this._changed=!0}removeSource(s){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error("There is no source with this ID");for(const y in this._layers)if(this._layers[y].source===s)return this.fire(new c.ErrorEvent(new Error(`Source "${s}" cannot be removed while layer "${y}" is using it.`)));const h=this.sourceCaches[s];delete this.sourceCaches[s],delete this._updatedSources[s],h.fire(new c.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:s})),h.setEventedParent(null),h.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(s,h){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error(`There is no source with this ID=${s}`);const y=this.sourceCaches[s].getSource();if(y.type!=="geojson")throw new Error(`geojsonSource.type is ${y.type}, which is !== 'geojson`);y.setData(h),this._changed=!0}getSource(s){return this.sourceCaches[s]&&this.sourceCaches[s].getSource()}addLayer(s,h,y={}){this._checkLoaded();const w=s.id;if(this.getLayer(w))return void this.fire(new c.ErrorEvent(new Error(`Layer "${w}" already exists on this map.`)));let M;if(s.type==="custom"){if(an(this,c.validateCustomStyleLayer(s)))return;M=c.createStyleLayer(s)}else{if(typeof s.source=="object"&&(this.addSource(w,s.source),s=c.clone$1(s),s=c.extend(s,{source:w})),this._validate(c.validateStyle.layer,`layers.${w}`,s,{arrayIndex:-1},y))return;M=c.createStyleLayer(s),this._validateLayer(M),M.setEventedParent(this,{layer:{id:w}}),this._serializedLayers[M.id]=M.serialize()}const k=h?this._order.indexOf(h):this._order.length;if(h&&k===-1)this.fire(new c.ErrorEvent(new Error(`Cannot add layer "${w}" before non-existing layer "${h}".`)));else{if(this._order.splice(k,0,w),this._layerOrderChanged=!0,this._layers[w]=M,this._removedLayers[w]&&M.source&&M.type!=="custom"){const R=this._removedLayers[w];delete this._removedLayers[w],R.type!==M.type?this._updatedSources[M.source]="clear":(this._updatedSources[M.source]="reload",this.sourceCaches[M.source].pause())}this._updateLayer(M),M.onAdd&&M.onAdd(this.map)}}moveLayer(s,h){if(this._checkLoaded(),this._changed=!0,!this._layers[s])return void this.fire(new c.ErrorEvent(new Error(`The layer '${s}' does not exist in the map's style and cannot be moved.`)));if(s===h)return;const y=this._order.indexOf(s);this._order.splice(y,1);const w=h?this._order.indexOf(h):this._order.length;h&&w===-1?this.fire(new c.ErrorEvent(new Error(`Cannot move layer "${s}" before non-existing layer "${h}".`))):(this._order.splice(w,0,s),this._layerOrderChanged=!0)}removeLayer(s){this._checkLoaded();const h=this._layers[s];if(!h)return void this.fire(new c.ErrorEvent(new Error(`Cannot remove non-existing layer "${s}".`)));h.setEventedParent(null);const y=this._order.indexOf(s);this._order.splice(y,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[s]=h,delete this._layers[s],delete this._serializedLayers[s],delete this._updatedLayers[s],delete this._updatedPaintProps[s],h.onRemove&&h.onRemove(this.map)}getLayer(s){return this._layers[s]}hasLayer(s){return s in this._layers}setLayerZoomRange(s,h,y){this._checkLoaded();const w=this.getLayer(s);w?w.minzoom===h&&w.maxzoom===y||(h!=null&&(w.minzoom=h),y!=null&&(w.maxzoom=y),this._updateLayer(w)):this.fire(new c.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${s}".`)))}setFilter(s,h,y={}){this._checkLoaded();const w=this.getLayer(s);if(w){if(!D(w.filter,h))return h==null?(w.filter=void 0,void this._updateLayer(w)):void(this._validate(c.validateStyle.filter,`layers.${w.id}.filter`,h,null,y)||(w.filter=c.clone$1(h),this._updateLayer(w)))}else this.fire(new c.ErrorEvent(new Error(`Cannot filter non-existing layer "${s}".`)))}getFilter(s){return c.clone$1(this.getLayer(s).filter)}setLayoutProperty(s,h,y,w={}){this._checkLoaded();const M=this.getLayer(s);M?D(M.getLayoutProperty(h),y)||(M.setLayoutProperty(h,y,w),this._updateLayer(M)):this.fire(new c.ErrorEvent(new Error(`Cannot style non-existing layer "${s}".`)))}getLayoutProperty(s,h){const y=this.getLayer(s);if(y)return y.getLayoutProperty(h);this.fire(new c.ErrorEvent(new Error(`Cannot get style of non-existing layer "${s}".`)))}setPaintProperty(s,h,y,w={}){this._checkLoaded();const M=this.getLayer(s);M?D(M.getPaintProperty(h),y)||(M.setPaintProperty(h,y,w)&&this._updateLayer(M),this._changed=!0,this._updatedPaintProps[s]=!0):this.fire(new c.ErrorEvent(new Error(`Cannot style non-existing layer "${s}".`)))}getPaintProperty(s,h){return this.getLayer(s).getPaintProperty(h)}setFeatureState(s,h){this._checkLoaded();const y=s.source,w=s.sourceLayer,M=this.sourceCaches[y];if(M===void 0)return void this.fire(new c.ErrorEvent(new Error(`The source '${y}' does not exist in the map's style.`)));const k=M.getSource().type;k==="geojson"&&w?this.fire(new c.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):k!=="vector"||w?(s.id===void 0&&this.fire(new c.ErrorEvent(new Error("The feature id parameter must be provided."))),M.setFeatureState(w,s.id,h)):this.fire(new c.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(s,h){this._checkLoaded();const y=s.source,w=this.sourceCaches[y];if(w===void 0)return void this.fire(new c.ErrorEvent(new Error(`The source '${y}' does not exist in the map's style.`)));const M=w.getSource().type,k=M==="vector"?s.sourceLayer:void 0;M!=="vector"||k?h&&typeof s.id!="string"&&typeof s.id!="number"?this.fire(new c.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):w.removeFeatureState(k,s.id,h):this.fire(new c.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(s){this._checkLoaded();const h=s.source,y=s.sourceLayer,w=this.sourceCaches[h];if(w!==void 0)return w.getSource().type!=="vector"||y?(s.id===void 0&&this.fire(new c.ErrorEvent(new Error("The feature id parameter must be provided."))),w.getFeatureState(y,s.id)):void this.fire(new c.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new c.ErrorEvent(new Error(`The source '${h}' does not exist in the map's style.`)))}getTransition(){return c.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return c.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:c.mapObject(this.sourceCaches,s=>s.serialize()),layers:this._serializeLayers(this._order)},s=>s!==void 0)}_updateLayer(s){this._updatedLayers[s.id]=!0,s.source&&!this._updatedSources[s.source]&&this.sourceCaches[s.source].getSource().type!=="raster"&&(this._updatedSources[s.source]="reload",this.sourceCaches[s.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(s){const h=k=>this._layers[k].type==="fill-extrusion",y={},w=[];for(let k=this._order.length-1;k>=0;k--){const R=this._order[k];if(h(R)){y[R]=k;for(const A of s){const F=A[R];if(F)for(const Z of F)w.push(Z)}}}w.sort((k,R)=>R.intersectionZ-k.intersectionZ);const M=[];for(let k=this._order.length-1;k>=0;k--){const R=this._order[k];if(h(R))for(let A=w.length-1;A>=0;A--){const F=w[A].feature;if(y[F.layer.id]<k)break;M.push(F),w.pop()}else for(const A of s){const F=A[R];if(F)for(const Z of F)M.push(Z.feature)}}return M}queryRenderedFeatures(s,h,y){h&&h.filter&&this._validate(c.validateStyle.filter,"queryRenderedFeatures.filter",h.filter,null,h);const w={};if(h&&h.layers){if(!Array.isArray(h.layers))return this.fire(new c.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const k of h.layers){const R=this._layers[k];if(!R)return this.fire(new c.ErrorEvent(new Error(`The layer '${k}' does not exist in the map's style and cannot be queried for features.`))),[];w[R.source]=!0}}const M=[];h.availableImages=this._availableImages;for(const k in this.sourceCaches)h.layers&&!w[k]||M.push(it(this.sourceCaches[k],this._layers,this._serializedLayers,s,h,y));return this.placement&&M.push(function(k,R,A,F,Z,Y,Q){const le={},se=Y.queryRenderedSymbols(F),ie=[];for(const xe of Object.keys(se).map(Number))ie.push(Q[xe]);ie.sort(ft);for(const xe of ie){const De=xe.featureIndex.lookupSymbolFeatures(se[xe.bucketInstanceId],R,xe.bucketIndex,xe.sourceLayerIndex,Z.filter,Z.layers,Z.availableImages,k);for(const Ie in De){const ue=le[Ie]=le[Ie]||[],Ve=De[Ie];Ve.sort((ze,Ge)=>{const rt=xe.featureSortOrder;if(rt){const gt=rt.indexOf(ze.featureIndex);return rt.indexOf(Ge.featureIndex)-gt}return Ge.featureIndex-ze.featureIndex});for(const ze of Ve)ue.push(ze)}}for(const xe in le)le[xe].forEach(De=>{const Ie=De.feature,ue=A[k[xe].source].getFeatureState(Ie.layer["source-layer"],Ie.id);Ie.source=Ie.layer.source,Ie.layer["source-layer"]&&(Ie.sourceLayer=Ie.layer["source-layer"]),Ie.state=ue});return le}(this._layers,this._serializedLayers,this.sourceCaches,s,h,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(M)}querySourceFeatures(s,h){h&&h.filter&&this._validate(c.validateStyle.filter,"querySourceFeatures.filter",h.filter,null,h);const y=this.sourceCaches[s];return y?function(w,M){const k=w.getRenderableIds().map(F=>w.getTileByID(F)),R=[],A={};for(let F=0;F<k.length;F++){const Z=k[F],Y=Z.tileID.canonical.key;A[Y]||(A[Y]=!0,Z.querySourceFeatures(R,M))}return R}(y,h):[]}addSourceType(s,h,y){return kr.getSourceType(s)?y(new Error(`A source type called "${s}" already exists.`)):(kr.setSourceType(s,h),h.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:s,url:h.workerSourceURL},y):y(null,null))}getLight(){return this.light.getLight()}setLight(s,h={}){this._checkLoaded();const y=this.light.getLight();let w=!1;for(const k in s)if(!D(s[k],y[k])){w=!0;break}if(!w)return;const M={now:c.exported.now(),transition:c.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(s,h),this.light.updateTransitions(M)}_validate(s,h,y,w,M={}){return(!M||M.validate!==!1)&&an(this,s.call(c.validateStyle,c.extend({key:h,style:this.serialize(),value:y,styleSpec:c.spec},w)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),c.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const s in this._layers)this._layers[s].setEventedParent(null);for(const s in this.sourceCaches){const h=this.sourceCaches[s];h.setEventedParent(null),h.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(s){this.sourceCaches[s].clearTiles()}_reloadSource(s){this.sourceCaches[s].resume(),this.sourceCaches[s].reload()}_updateSources(s){for(const h in this.sourceCaches)this.sourceCaches[h].update(s,this.terrain)}_generateCollisionBoxes(){for(const s in this.sourceCaches)this._reloadSource(s)}_updatePlacement(s,h,y,w,M=!1){let k=!1,R=!1;const A={};for(const F of this._order){const Z=this._layers[F];if(Z.type!=="symbol")continue;if(!A[Z.source]){const Q=this.sourceCaches[Z.source];A[Z.source]=Q.getRenderableIds(!0).map(le=>Q.getTileByID(le)).sort((le,se)=>se.tileID.overscaledZ-le.tileID.overscaledZ||(le.tileID.isLessThan(se.tileID)?-1:1))}const Y=this.crossTileSymbolIndex.addLayer(Z,A[Z.source],s.center.lng);k=k||Y}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((M=M||this._layerOrderChanged||y===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(c.exported.now(),s.zoom))&&(this.pauseablePlacement=new $e(s,this.terrain,this._order,M,h,y,w,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,A),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(c.exported.now()),R=!0),k&&this.pauseablePlacement.placement.setStale()),R||k)for(const F of this._order){const Z=this._layers[F];Z.type==="symbol"&&this.placement.updateLayerOpacities(Z,A[Z.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(c.exported.now())}_releaseSymbolFadeTiles(){for(const s in this.sourceCaches)this.sourceCaches[s].releaseSymbolFadeTiles()}getImages(s,h,y){this.imageManager.getImages(h.icons,y),this._updateTilesForChangedImages();const w=this.sourceCaches[h.source];w&&w.setDependencies(h.tileID.key,h.type,h.icons)}getGlyphs(s,h,y){this.glyphManager.getGlyphs(h.stacks,y)}getResource(s,h,y){return c.makeRequest(h,y)}}kr.getSourceType=function(_){return be[_]},kr.setSourceType=function(_,s){be[_]=s},kr.registerForPluginStateChange=c.registerForPluginStateChange;var vi="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const Ao={prelude:Wn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Wn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Wn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Wn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Wn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Wn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Wn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Wn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Wn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Wn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Wn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Wn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Wn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Wn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Wn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Wn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Wn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Wn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Wn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Wn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Wn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Wn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Wn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Wn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Wn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Wn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Wn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",vi),terrainDepth:Wn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",vi),terrainCoords:Wn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",vi)};function Wn(_,s){const h=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,y=s.match(/attribute ([\w]+) ([\w]+)/g),w=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),M=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),k=M?M.concat(w):w,R={};return{fragmentSource:_=_.replace(h,(A,F,Z,Y,Q)=>(R[Q]=!0,F==="define"?`
#ifndef HAS_UNIFORM_u_${Q}
varying ${Z} ${Y} ${Q};
#else
uniform ${Z} ${Y} u_${Q};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Q}
    ${Z} ${Y} ${Q} = u_${Q};
#endif
`)),vertexSource:s=s.replace(h,(A,F,Z,Y,Q)=>{const le=Y==="float"?"vec2":"vec4",se=Q.match(/color/)?"color":le;return R[Q]?F==="define"?`
#ifndef HAS_UNIFORM_u_${Q}
uniform lowp float u_${Q}_t;
attribute ${Z} ${le} a_${Q};
varying ${Z} ${Y} ${Q};
#else
uniform ${Z} ${Y} u_${Q};
#endif
`:se==="vec4"?`
#ifndef HAS_UNIFORM_u_${Q}
    ${Q} = a_${Q};
#else
    ${Z} ${Y} ${Q} = u_${Q};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Q}
    ${Q} = unpack_mix_${se}(a_${Q}, u_${Q}_t);
#else
    ${Z} ${Y} ${Q} = u_${Q};
#endif
`:F==="define"?`
#ifndef HAS_UNIFORM_u_${Q}
uniform lowp float u_${Q}_t;
attribute ${Z} ${le} a_${Q};
#else
uniform ${Z} ${Y} u_${Q};
#endif
`:se==="vec4"?`
#ifndef HAS_UNIFORM_u_${Q}
    ${Z} ${Y} ${Q} = a_${Q};
#else
    ${Z} ${Y} ${Q} = u_${Q};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Q}
    ${Z} ${Y} ${Q} = unpack_mix_${se}(a_${Q}, u_${Q}_t);
#else
    ${Z} ${Y} ${Q} = u_${Q};
#endif
`}),staticAttributes:y,staticUniforms:k}}class nh{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(s,h,y,w,M,k,R,A,F){this.context=s;let Z=this.boundPaintVertexBuffers.length!==w.length;for(let Y=0;!Z&&Y<w.length;Y++)this.boundPaintVertexBuffers[Y]!==w[Y]&&(Z=!0);s.extVertexArrayObject&&this.vao&&this.boundProgram===h&&this.boundLayoutVertexBuffer===y&&!Z&&this.boundIndexBuffer===M&&this.boundVertexOffset===k&&this.boundDynamicVertexBuffer===R&&this.boundDynamicVertexBuffer2===A&&this.boundDynamicVertexBuffer3===F?(s.bindVertexArrayOES.set(this.vao),R&&R.bind(),M&&M.dynamicDraw&&M.bind(),A&&A.bind(),F&&F.bind()):this.freshBind(h,y,w,M,k,R,A,F)}freshBind(s,h,y,w,M,k,R,A){let F;const Z=s.numAttributes,Y=this.context,Q=Y.gl;if(Y.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Y.extVertexArrayObject.createVertexArrayOES(),Y.bindVertexArrayOES.set(this.vao),F=0,this.boundProgram=s,this.boundLayoutVertexBuffer=h,this.boundPaintVertexBuffers=y,this.boundIndexBuffer=w,this.boundVertexOffset=M,this.boundDynamicVertexBuffer=k,this.boundDynamicVertexBuffer2=R,this.boundDynamicVertexBuffer3=A;else{F=Y.currentNumAttributes||0;for(let le=Z;le<F;le++)Q.disableVertexAttribArray(le)}h.enableAttributes(Q,s);for(const le of y)le.enableAttributes(Q,s);k&&k.enableAttributes(Q,s),R&&R.enableAttributes(Q,s),A&&A.enableAttributes(Q,s),h.bind(),h.setVertexAttribPointers(Q,s,M);for(const le of y)le.bind(),le.setVertexAttribPointers(Q,s,M);k&&(k.bind(),k.setVertexAttribPointers(Q,s,M)),w&&w.bind(),R&&(R.bind(),R.setVertexAttribPointers(Q,s,M)),A&&(A.bind(),A.setVertexAttribPointers(Q,s,M)),Y.currentNumAttributes=Z}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function jo(_){const s=[];for(let h=0;h<_.length;h++){if(_[h]===null)continue;const y=_[h].split(" ");s.push(y.pop())}return s}class vc{constructor(s,h,y,w,M,k,R){const A=s.gl;this.program=A.createProgram();const F=jo(y.staticAttributes),Z=w?w.getBinderAttributes():[],Y=F.concat(Z),Q=Ao.prelude.staticUniforms?jo(Ao.prelude.staticUniforms):[],le=y.staticUniforms?jo(y.staticUniforms):[],se=w?w.getBinderUniforms():[],ie=Q.concat(le).concat(se),xe=[];for(const rt of ie)xe.indexOf(rt)<0&&xe.push(rt);const De=w?w.defines():[];k&&De.push("#define OVERDRAW_INSPECTOR;"),R&&De.push("#define TERRAIN3D;");const Ie=De.concat(Ao.prelude.fragmentSource,y.fragmentSource).join(`
`),ue=De.concat(Ao.prelude.vertexSource,y.vertexSource).join(`
`),Ve=A.createShader(A.FRAGMENT_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);A.shaderSource(Ve,Ie),A.compileShader(Ve),A.attachShader(this.program,Ve);const ze=A.createShader(A.VERTEX_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);A.shaderSource(ze,ue),A.compileShader(ze),A.attachShader(this.program,ze),this.attributes={};const Ge={};this.numAttributes=Y.length;for(let rt=0;rt<this.numAttributes;rt++)Y[rt]&&(A.bindAttribLocation(this.program,rt,Y[rt]),this.attributes[Y[rt]]=rt);A.linkProgram(this.program),A.deleteShader(ze),A.deleteShader(Ve);for(let rt=0;rt<xe.length;rt++){const gt=xe[rt];if(gt&&!Ge[gt]){const Qe=A.getUniformLocation(this.program,gt);Qe&&(Ge[gt]=Qe)}}this.fixedUniforms=M(s,Ge),this.terrainUniforms=((rt,gt)=>({u_depth:new c.Uniform1i(rt,gt.u_depth),u_terrain:new c.Uniform1i(rt,gt.u_terrain),u_terrain_dim:new c.Uniform1f(rt,gt.u_terrain_dim),u_terrain_matrix:new c.UniformMatrix4f(rt,gt.u_terrain_matrix),u_terrain_unpack:new c.Uniform4f(rt,gt.u_terrain_unpack),u_terrain_offset:new c.Uniform1f(rt,gt.u_terrain_offset),u_terrain_exaggeration:new c.Uniform1f(rt,gt.u_terrain_exaggeration)}))(s,Ge),this.binderUniforms=w?w.getUniforms(s,Ge):[]}draw(s,h,y,w,M,k,R,A,F,Z,Y,Q,le,se,ie,xe,De,Ie){const ue=s.gl;if(this.failedToCreate)return;if(s.program.set(this.program),s.setDepthMode(y),s.setStencilMode(w),s.setColorMode(M),s.setCullFace(k),A){s.activeTexture.set(ue.TEXTURE2),ue.bindTexture(ue.TEXTURE_2D,A.depthTexture),s.activeTexture.set(ue.TEXTURE3),ue.bindTexture(ue.TEXTURE_2D,A.texture);for(const ze in this.terrainUniforms)this.terrainUniforms[ze].set(A[ze])}for(const ze in this.fixedUniforms)this.fixedUniforms[ze].set(R[ze]);ie&&ie.setUniforms(s,this.binderUniforms,le,{zoom:se});let Ve=0;switch(h){case ue.LINES:Ve=2;break;case ue.TRIANGLES:Ve=3;break;case ue.LINE_STRIP:Ve=1}for(const ze of Q.get()){const Ge=ze.vaos||(ze.vaos={});(Ge[F]||(Ge[F]=new nh)).bind(s,this,Z,ie?ie.getPaintVertexBuffers():[],Y,ze.vertexOffset,xe,De,Ie),ue.drawElements(h,ze.primitiveLength*Ve,ue.UNSIGNED_SHORT,ze.primitiveOffset*Ve*2)}}}function Oo(_,s,h){const y=1/Ft(h,1,s.transform.tileZoom),w=Math.pow(2,h.tileID.overscaledZ),M=h.tileSize*Math.pow(2,s.transform.tileZoom)/w,k=M*(h.tileID.canonical.x+h.tileID.wrap*w),R=M*h.tileID.canonical.y;return{u_image:0,u_texsize:h.imageAtlasTexture.size,u_scale:[y,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[k>>16,R>>16],u_pixel_coord_lower:[65535&k,65535&R]}}const hl=(_,s,h,y)=>{const w=s.style.light,M=w.properties.get("position"),k=[M.x,M.y,M.z],R=c.create$1();w.properties.get("anchor")==="viewport"&&c.fromRotation(R,-s.transform.angle),c.transformMat3(k,k,R);const A=w.properties.get("color");return{u_matrix:_,u_lightpos:k,u_lightintensity:w.properties.get("intensity"),u_lightcolor:[A.r,A.g,A.b],u_vertical_gradient:+h,u_opacity:y}},Su=(_,s,h,y,w,M,k)=>c.extend(hl(_,s,h,y),Oo(M,s,k),{u_height_factor:-Math.pow(2,w.overscaledZ)/k.tileSize/8}),Mu=_=>({u_matrix:_}),pl=(_,s,h,y)=>c.extend(Mu(_),Oo(h,s,y)),Eu=(_,s)=>({u_matrix:_,u_world:s}),xc=(_,s,h,y,w)=>c.extend(pl(_,s,h,y),{u_world:w}),Yi=(_,s,h,y)=>{const w=_.transform;let M,k;if(y.paint.get("circle-pitch-alignment")==="map"){const R=Ft(h,1,w.zoom);M=!0,k=[R,R]}else M=!1,k=w.pixelsToGLUnits;return{u_camera_to_center_distance:w.cameraToCenterDistance,u_scale_with_map:+(y.paint.get("circle-pitch-scale")==="map"),u_matrix:_.translatePosMatrix(s.posMatrix,h,y.paint.get("circle-translate"),y.paint.get("circle-translate-anchor")),u_pitch_with_map:+M,u_device_pixel_ratio:_.pixelRatio,u_extrude_scale:k}},_c=(_,s,h)=>{const y=Ft(h,1,s.zoom),w=Math.pow(2,s.zoom-h.tileID.overscaledZ),M=h.tileID.overscaleFactor();return{u_matrix:_,u_camera_to_center_distance:s.cameraToCenterDistance,u_pixels_to_tile_units:y,u_extrude_scale:[s.pixelsToGLUnits[0]/(y*w),s.pixelsToGLUnits[1]/(y*w)],u_overscale_factor:M}},Ws=(_,s,h=1)=>({u_matrix:_,u_color:s,u_overlay:0,u_overlay_scale:h}),$n=_=>({u_matrix:_}),fl=(_,s,h,y)=>({u_matrix:_,u_extrude_scale:Ft(s,1,h),u_intensity:y});function ml(_,s){const h=Math.pow(2,s.canonical.z),y=s.canonical.y;return[new c.MercatorCoordinate(0,y/h).toLngLat().lat,new c.MercatorCoordinate(0,(y+1)/h).toLngLat().lat]}const zo=(_,s,h,y)=>{const w=_.transform;return{u_matrix:fa(_,s,h,y),u_ratio:1/Ft(s,1,w.zoom),u_device_pixel_ratio:_.pixelRatio,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},gl=(_,s,h,y,w)=>c.extend(zo(_,s,h,w),{u_image:0,u_image_height:y}),pa=(_,s,h,y,w)=>{const M=_.transform,k=Fo(s,M);return{u_matrix:fa(_,s,h,w),u_texsize:s.imageAtlasTexture.size,u_ratio:1/Ft(s,1,M.zoom),u_device_pixel_ratio:_.pixelRatio,u_image:0,u_scale:[k,y.fromScale,y.toScale],u_fade:y.t,u_units_to_pixels:[1/M.pixelsToGLUnits[0],1/M.pixelsToGLUnits[1]]}},dr=(_,s,h,y,w,M)=>{const k=_.lineAtlas,R=Fo(s,_.transform),A=h.layout.get("line-cap")==="round",F=k.getDash(y.from,A),Z=k.getDash(y.to,A),Y=F.width*w.fromScale,Q=Z.width*w.toScale;return c.extend(zo(_,s,h,M),{u_patternscale_a:[R/Y,-F.height/2],u_patternscale_b:[R/Q,-Z.height/2],u_sdfgamma:k.width/(256*Math.min(Y,Q)*_.pixelRatio)/2,u_image:0,u_tex_y_a:F.y,u_tex_y_b:Z.y,u_mix:w.t})};function Fo(_,s){return 1/Ft(_,1,s.tileZoom)}function fa(_,s,h,y){return _.translatePosMatrix(y?y.posMatrix:s.tileID.posMatrix,s,h.paint.get("line-translate"),h.paint.get("line-translate-anchor"))}const Ms=(_,s,h,y,w)=>{return{u_matrix:_,u_tl_parent:s,u_scale_parent:h,u_buffer_scale:1,u_fade_t:y.mix,u_opacity:y.opacity*w.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:w.paint.get("raster-brightness-min"),u_brightness_high:w.paint.get("raster-brightness-max"),u_saturation_factor:(k=w.paint.get("raster-saturation"),k>0?1-1/(1.001-k):-k),u_contrast_factor:(M=w.paint.get("raster-contrast"),M>0?1/(1-M):1+M),u_spin_weights:Es(w.paint.get("raster-hue-rotate"))};var M,k};function Es(_){_*=Math.PI/180;const s=Math.sin(_),h=Math.cos(_);return[(2*h+1)/3,(-Math.sqrt(3)*s-h+1)/3,(Math.sqrt(3)*s-h+1)/3]}const Xi=(_,s,h,y,w,M,k,R,A,F)=>{const Z=w.transform;return{u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:Z.cameraToCenterDistance,u_pitch:Z.pitch/360*2*Math.PI,u_rotate_symbol:+h,u_aspect_ratio:Z.width/Z.height,u_fade_change:w.options.fadeDuration?w.symbolFadeChange:1,u_matrix:M,u_label_plane_matrix:k,u_coord_matrix:R,u_is_text:+A,u_pitch_with_map:+y,u_texsize:F,u_texture:0}},Bo=(_,s,h,y,w,M,k,R,A,F,Z)=>{const Y=w.transform;return c.extend(Xi(_,s,h,y,w,M,k,R,A,F),{u_gamma_scale:y?Math.cos(Y._pitch)*Y.cameraToCenterDistance:1,u_device_pixel_ratio:w.pixelRatio,u_is_halo:1})},yl=(_,s,h,y,w,M,k,R,A,F)=>c.extend(Bo(_,s,h,y,w,M,k,R,!0,A),{u_texsize_icon:F,u_texture_icon:1}),Gs=(_,s,h)=>({u_matrix:_,u_opacity:s,u_color:h}),Lu=(_,s,h,y,w,M)=>c.extend(function(k,R,A,F){const Z=A.imageManager.getPattern(k.from.toString()),Y=A.imageManager.getPattern(k.to.toString()),{width:Q,height:le}=A.imageManager.getPixelSize(),se=Math.pow(2,F.tileID.overscaledZ),ie=F.tileSize*Math.pow(2,A.transform.tileZoom)/se,xe=ie*(F.tileID.canonical.x+F.tileID.wrap*se),De=ie*F.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Z.tl,u_pattern_br_a:Z.br,u_pattern_tl_b:Y.tl,u_pattern_br_b:Y.br,u_texsize:[Q,le],u_mix:R.t,u_pattern_size_a:Z.displaySize,u_pattern_size_b:Y.displaySize,u_scale_a:R.fromScale,u_scale_b:R.toScale,u_tile_units_to_pixels:1/Ft(F,1,A.transform.tileZoom),u_pixel_coord_upper:[xe>>16,De>>16],u_pixel_coord_lower:[65535&xe,65535&De]}}(y,M,h,w),{u_matrix:_,u_opacity:s}),wc={fillExtrusion:(_,s)=>({u_matrix:new c.UniformMatrix4f(_,s.u_matrix),u_lightpos:new c.Uniform3f(_,s.u_lightpos),u_lightintensity:new c.Uniform1f(_,s.u_lightintensity),u_lightcolor:new c.Uniform3f(_,s.u_lightcolor),u_vertical_gradient:new c.Uniform1f(_,s.u_vertical_gradient),u_opacity:new c.Uniform1f(_,s.u_opacity)}),fillExtrusionPattern:(_,s)=>({u_matrix:new c.UniformMatrix4f(_,s.u_matrix),u_lightpos:new c.Uniform3f(_,s.u_lightpos),u_lightintensity:new c.Uniform1f(_,s.u_lightintensity),u_lightcolor:new c.Uniform3f(_,s.u_lightcolor),u_vertical_gradient:new c.Uniform1f(_,s.u_vertical_gradient),u_height_factor:new c.Uniform1f(_,s.u_height_factor),u_image:new c.Uniform1i(_,s.u_image),u_texsize:new c.Uniform2f(_,s.u_texsize),u_pixel_coord_upper:new c.Uniform2f(_,s.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(_,s.u_pixel_coord_lower),u_scale:new c.Uniform3f(_,s.u_scale),u_fade:new c.Uniform1f(_,s.u_fade),u_opacity:new c.Uniform1f(_,s.u_opacity)}),fill:(_,s)=>({u_matrix:new c.UniformMatrix4f(_,s.u_matrix)}),fillPattern:(_,s)=>({u_matrix:new c.UniformMatrix4f(_,s.u_matrix),u_image:new c.Uniform1i(_,s.u_image),u_texsize:new c.Uniform2f(_,s.u_texsize),u_pixel_coord_upper:new c.Uniform2f(_,s.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(_,s.u_pixel_coord_lower),u_scale:new c.Uniform3f(_,s.u_scale),u_fade:new c.Uniform1f(_,s.u_fade)}),fillOutline:(_,s)=>({u_matrix:new c.UniformMatrix4f(_,s.u_matrix),u_world:new c.Uniform2f(_,s.u_world)}),fillOutlinePattern:(_,s)=>({u_matrix:new c.UniformMatrix4f(_,s.u_matrix),u_world:new c.Uniform2f(_,s.u_world),u_image:new c.Uniform1i(_,s.u_image),u_texsize:new c.Uniform2f(_,s.u_texsize),u_pixel_coord_upper:new c.Uniform2f(_,s.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(_,s.u_pixel_coord_lower),u_scale:new c.Uniform3f(_,s.u_scale),u_fade:new c.Uniform1f(_,s.u_fade)}),circle:(_,s)=>({u_camera_to_center_distance:new c.Uniform1f(_,s.u_camera_to_center_distance),u_scale_with_map:new c.Uniform1i(_,s.u_scale_with_map),u_pitch_with_map:new c.Uniform1i(_,s.u_pitch_with_map),u_extrude_scale:new c.Uniform2f(_,s.u_extrude_scale),u_device_pixel_ratio:new c.Uniform1f(_,s.u_device_pixel_ratio),u_matrix:new c.UniformMatrix4f(_,s.u_matrix)}),collisionBox:(_,s)=>({u_matrix:new c.UniformMatrix4f(_,s.u_matrix),u_camera_to_center_distance:new c.Uniform1f(_,s.u_camera_to_center_distance),u_pixels_to_tile_units:new c.Uniform1f(_,s.u_pixels_to_tile_units),u_extrude_scale:new c.Uniform2f(_,s.u_extrude_scale),u_overscale_factor:new c.Uniform1f(_,s.u_overscale_factor)}),collisionCircle:(_,s)=>({u_matrix:new c.UniformMatrix4f(_,s.u_matrix),u_inv_matrix:new c.UniformMatrix4f(_,s.u_inv_matrix),u_camera_to_center_distance:new c.Uniform1f(_,s.u_camera_to_center_distance),u_viewport_size:new c.Uniform2f(_,s.u_viewport_size)}),debug:(_,s)=>({u_color:new c.UniformColor(_,s.u_color),u_matrix:new c.UniformMatrix4f(_,s.u_matrix),u_overlay:new c.Uniform1i(_,s.u_overlay),u_overlay_scale:new c.Uniform1f(_,s.u_overlay_scale)}),clippingMask:(_,s)=>({u_matrix:new c.UniformMatrix4f(_,s.u_matrix)}),heatmap:(_,s)=>({u_extrude_scale:new c.Uniform1f(_,s.u_extrude_scale),u_intensity:new c.Uniform1f(_,s.u_intensity),u_matrix:new c.UniformMatrix4f(_,s.u_matrix)}),heatmapTexture:(_,s)=>({u_matrix:new c.UniformMatrix4f(_,s.u_matrix),u_world:new c.Uniform2f(_,s.u_world),u_image:new c.Uniform1i(_,s.u_image),u_color_ramp:new c.Uniform1i(_,s.u_color_ramp),u_opacity:new c.Uniform1f(_,s.u_opacity)}),hillshade:(_,s)=>({u_matrix:new c.UniformMatrix4f(_,s.u_matrix),u_image:new c.Uniform1i(_,s.u_image),u_latrange:new c.Uniform2f(_,s.u_latrange),u_light:new c.Uniform2f(_,s.u_light),u_shadow:new c.UniformColor(_,s.u_shadow),u_highlight:new c.UniformColor(_,s.u_highlight),u_accent:new c.UniformColor(_,s.u_accent)}),hillshadePrepare:(_,s)=>({u_matrix:new c.UniformMatrix4f(_,s.u_matrix),u_image:new c.Uniform1i(_,s.u_image),u_dimension:new c.Uniform2f(_,s.u_dimension),u_zoom:new c.Uniform1f(_,s.u_zoom),u_unpack:new c.Uniform4f(_,s.u_unpack)}),line:(_,s)=>({u_matrix:new c.UniformMatrix4f(_,s.u_matrix),u_ratio:new c.Uniform1f(_,s.u_ratio),u_device_pixel_ratio:new c.Uniform1f(_,s.u_device_pixel_ratio),u_units_to_pixels:new c.Uniform2f(_,s.u_units_to_pixels)}),lineGradient:(_,s)=>({u_matrix:new c.UniformMatrix4f(_,s.u_matrix),u_ratio:new c.Uniform1f(_,s.u_ratio),u_device_pixel_ratio:new c.Uniform1f(_,s.u_device_pixel_ratio),u_units_to_pixels:new c.Uniform2f(_,s.u_units_to_pixels),u_image:new c.Uniform1i(_,s.u_image),u_image_height:new c.Uniform1f(_,s.u_image_height)}),linePattern:(_,s)=>({u_matrix:new c.UniformMatrix4f(_,s.u_matrix),u_texsize:new c.Uniform2f(_,s.u_texsize),u_ratio:new c.Uniform1f(_,s.u_ratio),u_device_pixel_ratio:new c.Uniform1f(_,s.u_device_pixel_ratio),u_image:new c.Uniform1i(_,s.u_image),u_units_to_pixels:new c.Uniform2f(_,s.u_units_to_pixels),u_scale:new c.Uniform3f(_,s.u_scale),u_fade:new c.Uniform1f(_,s.u_fade)}),lineSDF:(_,s)=>({u_matrix:new c.UniformMatrix4f(_,s.u_matrix),u_ratio:new c.Uniform1f(_,s.u_ratio),u_device_pixel_ratio:new c.Uniform1f(_,s.u_device_pixel_ratio),u_units_to_pixels:new c.Uniform2f(_,s.u_units_to_pixels),u_patternscale_a:new c.Uniform2f(_,s.u_patternscale_a),u_patternscale_b:new c.Uniform2f(_,s.u_patternscale_b),u_sdfgamma:new c.Uniform1f(_,s.u_sdfgamma),u_image:new c.Uniform1i(_,s.u_image),u_tex_y_a:new c.Uniform1f(_,s.u_tex_y_a),u_tex_y_b:new c.Uniform1f(_,s.u_tex_y_b),u_mix:new c.Uniform1f(_,s.u_mix)}),raster:(_,s)=>({u_matrix:new c.UniformMatrix4f(_,s.u_matrix),u_tl_parent:new c.Uniform2f(_,s.u_tl_parent),u_scale_parent:new c.Uniform1f(_,s.u_scale_parent),u_buffer_scale:new c.Uniform1f(_,s.u_buffer_scale),u_fade_t:new c.Uniform1f(_,s.u_fade_t),u_opacity:new c.Uniform1f(_,s.u_opacity),u_image0:new c.Uniform1i(_,s.u_image0),u_image1:new c.Uniform1i(_,s.u_image1),u_brightness_low:new c.Uniform1f(_,s.u_brightness_low),u_brightness_high:new c.Uniform1f(_,s.u_brightness_high),u_saturation_factor:new c.Uniform1f(_,s.u_saturation_factor),u_contrast_factor:new c.Uniform1f(_,s.u_contrast_factor),u_spin_weights:new c.Uniform3f(_,s.u_spin_weights)}),symbolIcon:(_,s)=>({u_is_size_zoom_constant:new c.Uniform1i(_,s.u_is_size_zoom_constant),u_is_size_feature_constant:new c.Uniform1i(_,s.u_is_size_feature_constant),u_size_t:new c.Uniform1f(_,s.u_size_t),u_size:new c.Uniform1f(_,s.u_size),u_camera_to_center_distance:new c.Uniform1f(_,s.u_camera_to_center_distance),u_pitch:new c.Uniform1f(_,s.u_pitch),u_rotate_symbol:new c.Uniform1i(_,s.u_rotate_symbol),u_aspect_ratio:new c.Uniform1f(_,s.u_aspect_ratio),u_fade_change:new c.Uniform1f(_,s.u_fade_change),u_matrix:new c.UniformMatrix4f(_,s.u_matrix),u_label_plane_matrix:new c.UniformMatrix4f(_,s.u_label_plane_matrix),u_coord_matrix:new c.UniformMatrix4f(_,s.u_coord_matrix),u_is_text:new c.Uniform1i(_,s.u_is_text),u_pitch_with_map:new c.Uniform1i(_,s.u_pitch_with_map),u_texsize:new c.Uniform2f(_,s.u_texsize),u_texture:new c.Uniform1i(_,s.u_texture)}),symbolSDF:(_,s)=>({u_is_size_zoom_constant:new c.Uniform1i(_,s.u_is_size_zoom_constant),u_is_size_feature_constant:new c.Uniform1i(_,s.u_is_size_feature_constant),u_size_t:new c.Uniform1f(_,s.u_size_t),u_size:new c.Uniform1f(_,s.u_size),u_camera_to_center_distance:new c.Uniform1f(_,s.u_camera_to_center_distance),u_pitch:new c.Uniform1f(_,s.u_pitch),u_rotate_symbol:new c.Uniform1i(_,s.u_rotate_symbol),u_aspect_ratio:new c.Uniform1f(_,s.u_aspect_ratio),u_fade_change:new c.Uniform1f(_,s.u_fade_change),u_matrix:new c.UniformMatrix4f(_,s.u_matrix),u_label_plane_matrix:new c.UniformMatrix4f(_,s.u_label_plane_matrix),u_coord_matrix:new c.UniformMatrix4f(_,s.u_coord_matrix),u_is_text:new c.Uniform1i(_,s.u_is_text),u_pitch_with_map:new c.Uniform1i(_,s.u_pitch_with_map),u_texsize:new c.Uniform2f(_,s.u_texsize),u_texture:new c.Uniform1i(_,s.u_texture),u_gamma_scale:new c.Uniform1f(_,s.u_gamma_scale),u_device_pixel_ratio:new c.Uniform1f(_,s.u_device_pixel_ratio),u_is_halo:new c.Uniform1i(_,s.u_is_halo)}),symbolTextAndIcon:(_,s)=>({u_is_size_zoom_constant:new c.Uniform1i(_,s.u_is_size_zoom_constant),u_is_size_feature_constant:new c.Uniform1i(_,s.u_is_size_feature_constant),u_size_t:new c.Uniform1f(_,s.u_size_t),u_size:new c.Uniform1f(_,s.u_size),u_camera_to_center_distance:new c.Uniform1f(_,s.u_camera_to_center_distance),u_pitch:new c.Uniform1f(_,s.u_pitch),u_rotate_symbol:new c.Uniform1i(_,s.u_rotate_symbol),u_aspect_ratio:new c.Uniform1f(_,s.u_aspect_ratio),u_fade_change:new c.Uniform1f(_,s.u_fade_change),u_matrix:new c.UniformMatrix4f(_,s.u_matrix),u_label_plane_matrix:new c.UniformMatrix4f(_,s.u_label_plane_matrix),u_coord_matrix:new c.UniformMatrix4f(_,s.u_coord_matrix),u_is_text:new c.Uniform1i(_,s.u_is_text),u_pitch_with_map:new c.Uniform1i(_,s.u_pitch_with_map),u_texsize:new c.Uniform2f(_,s.u_texsize),u_texsize_icon:new c.Uniform2f(_,s.u_texsize_icon),u_texture:new c.Uniform1i(_,s.u_texture),u_texture_icon:new c.Uniform1i(_,s.u_texture_icon),u_gamma_scale:new c.Uniform1f(_,s.u_gamma_scale),u_device_pixel_ratio:new c.Uniform1f(_,s.u_device_pixel_ratio),u_is_halo:new c.Uniform1i(_,s.u_is_halo)}),background:(_,s)=>({u_matrix:new c.UniformMatrix4f(_,s.u_matrix),u_opacity:new c.Uniform1f(_,s.u_opacity),u_color:new c.UniformColor(_,s.u_color)}),backgroundPattern:(_,s)=>({u_matrix:new c.UniformMatrix4f(_,s.u_matrix),u_opacity:new c.Uniform1f(_,s.u_opacity),u_image:new c.Uniform1i(_,s.u_image),u_pattern_tl_a:new c.Uniform2f(_,s.u_pattern_tl_a),u_pattern_br_a:new c.Uniform2f(_,s.u_pattern_br_a),u_pattern_tl_b:new c.Uniform2f(_,s.u_pattern_tl_b),u_pattern_br_b:new c.Uniform2f(_,s.u_pattern_br_b),u_texsize:new c.Uniform2f(_,s.u_texsize),u_mix:new c.Uniform1f(_,s.u_mix),u_pattern_size_a:new c.Uniform2f(_,s.u_pattern_size_a),u_pattern_size_b:new c.Uniform2f(_,s.u_pattern_size_b),u_scale_a:new c.Uniform1f(_,s.u_scale_a),u_scale_b:new c.Uniform1f(_,s.u_scale_b),u_pixel_coord_upper:new c.Uniform2f(_,s.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(_,s.u_pixel_coord_lower),u_tile_units_to_pixels:new c.Uniform1f(_,s.u_tile_units_to_pixels)}),terrain:(_,s)=>({u_matrix:new c.UniformMatrix4f(_,s.u_matrix),u_texture:new c.Uniform1i(_,s.u_texture)}),terrainDepth:(_,s)=>({u_matrix:new c.UniformMatrix4f(_,s.u_matrix)}),terrainCoords:(_,s)=>({u_matrix:new c.UniformMatrix4f(_,s.u_matrix),u_texture:new c.Uniform1i(_,s.u_texture),u_terrain_coords_id:new c.Uniform1f(_,s.u_terrain_coords_id)})};class $o{constructor(s,h,y){this.context=s;const w=s.gl;this.buffer=w.createBuffer(),this.dynamicDraw=!!y,this.context.unbindVAO(),s.bindElementBuffer.set(this.buffer),w.bufferData(w.ELEMENT_ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(s){const h=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,0,s.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Tu={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ku{constructor(s,h,y,w){this.length=h.length,this.attributes=y,this.itemSize=h.bytesPerElement,this.dynamicDraw=w,this.context=s;const M=s.gl;this.buffer=M.createBuffer(),s.bindVertexBuffer.set(this.buffer),M.bufferData(M.ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?M.DYNAMIC_DRAW:M.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(s){if(s.length!==this.length)throw new Error(`Length of new data is ${s.length}, which doesn't match current length of ${this.length}`);const h=this.context.gl;this.bind(),h.bufferSubData(h.ARRAY_BUFFER,0,s.arrayBuffer)}enableAttributes(s,h){for(let y=0;y<this.attributes.length;y++){const w=h.attributes[this.attributes[y].name];w!==void 0&&s.enableVertexAttribArray(w)}}setVertexAttribPointers(s,h,y){for(let w=0;w<this.attributes.length;w++){const M=this.attributes[w],k=h.attributes[M.name];k!==void 0&&s.vertexAttribPointer(k,M.components,s[Tu[M.type]],!1,this.itemSize,M.offset+this.itemSize*(y||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Rn{constructor(s){this.gl=s.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(s){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class F1 extends Rn{getDefault(){return c.Color.transparent}set(s){const h=this.current;(s.r!==h.r||s.g!==h.g||s.b!==h.b||s.a!==h.a||this.dirty)&&(this.gl.clearColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class vl extends Rn{getDefault(){return 1}set(s){(s!==this.current||this.dirty)&&(this.gl.clearDepth(s),this.current=s,this.dirty=!1)}}class Ls extends Rn{getDefault(){return 0}set(s){(s!==this.current||this.dirty)&&(this.gl.clearStencil(s),this.current=s,this.dirty=!1)}}class ma extends Rn{getDefault(){return[!0,!0,!0,!0]}set(s){const h=this.current;(s[0]!==h[0]||s[1]!==h[1]||s[2]!==h[2]||s[3]!==h[3]||this.dirty)&&(this.gl.colorMask(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class Vr extends Rn{getDefault(){return!0}set(s){(s!==this.current||this.dirty)&&(this.gl.depthMask(s),this.current=s,this.dirty=!1)}}class ga extends Rn{getDefault(){return 255}set(s){(s!==this.current||this.dirty)&&(this.gl.stencilMask(s),this.current=s,this.dirty=!1)}}class bc extends Rn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(s){const h=this.current;(s.func!==h.func||s.ref!==h.ref||s.mask!==h.mask||this.dirty)&&(this.gl.stencilFunc(s.func,s.ref,s.mask),this.current=s,this.dirty=!1)}}class Cc extends Rn{getDefault(){const s=this.gl;return[s.KEEP,s.KEEP,s.KEEP]}set(s){const h=this.current;(s[0]!==h[0]||s[1]!==h[1]||s[2]!==h[2]||this.dirty)&&(this.gl.stencilOp(s[0],s[1],s[2]),this.current=s,this.dirty=!1)}}class xl extends Rn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const h=this.gl;s?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this.current=s,this.dirty=!1}}class ya extends Rn{getDefault(){return[0,1]}set(s){const h=this.current;(s[0]!==h[0]||s[1]!==h[1]||this.dirty)&&(this.gl.depthRange(s[0],s[1]),this.current=s,this.dirty=!1)}}class va extends Rn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const h=this.gl;s?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this.current=s,this.dirty=!1}}class Sc extends Rn{getDefault(){return this.gl.LESS}set(s){(s!==this.current||this.dirty)&&(this.gl.depthFunc(s),this.current=s,this.dirty=!1)}}class ms extends Rn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const h=this.gl;s?h.enable(h.BLEND):h.disable(h.BLEND),this.current=s,this.dirty=!1}}class xa extends Rn{getDefault(){const s=this.gl;return[s.ONE,s.ZERO]}set(s){const h=this.current;(s[0]!==h[0]||s[1]!==h[1]||this.dirty)&&(this.gl.blendFunc(s[0],s[1]),this.current=s,this.dirty=!1)}}class _l extends Rn{getDefault(){return c.Color.transparent}set(s){const h=this.current;(s.r!==h.r||s.g!==h.g||s.b!==h.b||s.a!==h.a||this.dirty)&&(this.gl.blendColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class Pu extends Rn{getDefault(){return this.gl.FUNC_ADD}set(s){(s!==this.current||this.dirty)&&(this.gl.blendEquation(s),this.current=s,this.dirty=!1)}}class Ts extends Rn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const h=this.gl;s?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this.current=s,this.dirty=!1}}class Mc extends Rn{getDefault(){return this.gl.BACK}set(s){(s!==this.current||this.dirty)&&(this.gl.cullFace(s),this.current=s,this.dirty=!1)}}class B1 extends Rn{getDefault(){return this.gl.CCW}set(s){(s!==this.current||this.dirty)&&(this.gl.frontFace(s),this.current=s,this.dirty=!1)}}class Ti extends Rn{getDefault(){return null}set(s){(s!==this.current||this.dirty)&&(this.gl.useProgram(s),this.current=s,this.dirty=!1)}}class _a extends Rn{getDefault(){return this.gl.TEXTURE0}set(s){(s!==this.current||this.dirty)&&(this.gl.activeTexture(s),this.current=s,this.dirty=!1)}}class Du extends Rn{getDefault(){const s=this.gl;return[0,0,s.drawingBufferWidth,s.drawingBufferHeight]}set(s){const h=this.current;(s[0]!==h[0]||s[1]!==h[1]||s[2]!==h[2]||s[3]!==h[3]||this.dirty)&&(this.gl.viewport(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class wl extends Rn{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,s),this.current=s,this.dirty=!1}}class Iu extends Rn{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const h=this.gl;h.bindRenderbuffer(h.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class wa extends Rn{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const h=this.gl;h.bindTexture(h.TEXTURE_2D,s),this.current=s,this.dirty=!1}}class bl extends Rn{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const h=this.gl;h.bindBuffer(h.ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class Vo extends Rn{getDefault(){return null}set(s){const h=this.gl;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class ks extends Rn{constructor(s){super(s),this.vao=s.extVertexArrayObject}getDefault(){return null}set(s){this.vao&&(s!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(s),this.current=s,this.dirty=!1)}}class Nu extends Rn{getDefault(){return 4}set(s){if(s===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_ALIGNMENT,s),this.current=s,this.dirty=!1}}class $1 extends Rn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s),this.current=s,this.dirty=!1}}class Ru extends Rn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,s),this.current=s,this.dirty=!1}}class Ys extends Rn{constructor(s,h){super(s),this.context=s,this.parent=h}getDefault(){return null}}class Ec extends Ys{setDirty(){this.dirty=!0}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,s,0),this.current=s,this.dirty=!1}}class ba extends Ys{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_ATTACHMENT,h.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class Ca{constructor(s,h,y,w){this.context=s,this.width=h,this.height=y;const M=s.gl,k=this.framebuffer=M.createFramebuffer();if(this.colorAttachment=new Ec(s,k),w&&(this.depthAttachment=new ba(s,k)),M.checkFramebufferStatus(M.FRAMEBUFFER)!==M.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const s=this.context.gl,h=this.colorAttachment.get();if(h&&s.deleteTexture(h),this.depthAttachment){const y=this.depthAttachment.get();y&&s.deleteRenderbuffer(y)}s.deleteFramebuffer(this.framebuffer)}}class wr{constructor(s,h,y){this.blendFunction=s,this.blendColor=h,this.mask=y}}wr.Replace=[1,0],wr.disabled=new wr(wr.Replace,c.Color.transparent,[!1,!1,!1,!1]),wr.unblended=new wr(wr.Replace,c.Color.transparent,[!0,!0,!0,!0]),wr.alphaBlended=new wr([1,771],c.Color.transparent,[!0,!0,!0,!0]);class Au{constructor(s){this.gl=s,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new F1(this),this.clearDepth=new vl(this),this.clearStencil=new Ls(this),this.colorMask=new ma(this),this.depthMask=new Vr(this),this.stencilMask=new ga(this),this.stencilFunc=new bc(this),this.stencilOp=new Cc(this),this.stencilTest=new xl(this),this.depthRange=new ya(this),this.depthTest=new va(this),this.depthFunc=new Sc(this),this.blend=new ms(this),this.blendFunc=new xa(this),this.blendColor=new _l(this),this.blendEquation=new Pu(this),this.cullFace=new Ts(this),this.cullFaceSide=new Mc(this),this.frontFace=new B1(this),this.program=new Ti(this),this.activeTexture=new _a(this),this.viewport=new Du(this),this.bindFramebuffer=new wl(this),this.bindRenderbuffer=new Iu(this),this.bindTexture=new wa(this),this.bindVertexBuffer=new bl(this),this.bindElementBuffer=new Vo(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ks(this),this.pixelStoreUnpack=new Nu(this),this.pixelStoreUnpackPremultiplyAlpha=new $1(this),this.pixelStoreUnpackFlipY=new Ru(this),this.extTextureFilterAnisotropic=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=s.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=s.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(s.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=s.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=s.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(s,h){return new $o(this,s,h)}createVertexBuffer(s,h,y){return new ku(this,s,h,y)}createRenderbuffer(s,h,y){const w=this.gl,M=w.createRenderbuffer();return this.bindRenderbuffer.set(M),w.renderbufferStorage(w.RENDERBUFFER,s,h,y),this.bindRenderbuffer.set(null),M}createFramebuffer(s,h,y){return new Ca(this,s,h,y)}clear({color:s,depth:h}){const y=this.gl;let w=0;s&&(w|=y.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),h!==void 0&&(w|=y.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),y.clear(w)}setCullFace(s){s.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(s.mode),this.frontFace.set(s.frontFace))}setDepthMode(s){s.func!==this.gl.ALWAYS||s.mask?(this.depthTest.set(!0),this.depthFunc.set(s.func),this.depthMask.set(s.mask),this.depthRange.set(s.range)):this.depthTest.set(!1)}setStencilMode(s){s.test.func!==this.gl.ALWAYS||s.mask?(this.stencilTest.set(!0),this.stencilMask.set(s.mask),this.stencilOp.set([s.fail,s.depthFail,s.pass]),this.stencilFunc.set({func:s.test.func,ref:s.ref,mask:s.test.mask})):this.stencilTest.set(!1)}setColorMode(s){D(s.blendFunction,wr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(s.blendFunction),this.blendColor.set(s.blendColor)),this.colorMask.set(s.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Ut{constructor(s,h,y){this.func=s,this.mask=h,this.range=y}}Ut.ReadOnly=!1,Ut.ReadWrite=!0,Ut.disabled=new Ut(519,Ut.ReadOnly,[0,1]);const Ho=7680;class gr{constructor(s,h,y,w,M,k){this.test=s,this.ref=h,this.mask=y,this.fail=w,this.depthFail=M,this.pass=k}}gr.disabled=new gr({func:519,mask:0},0,0,Ho,Ho,Ho);class or{constructor(s,h,y){this.enable=s,this.mode=h,this.frontFace=y}}let Xs;function V1(_,s,h,y,w,M,k){const R=_.context,A=R.gl,F=_.useProgram("collisionBox"),Z=[];let Y=0,Q=0;for(let ue=0;ue<y.length;ue++){const Ve=y[ue],ze=s.getTile(Ve),Ge=ze.getBucket(h);if(!Ge)continue;let rt=Ve.posMatrix;w[0]===0&&w[1]===0||(rt=_.translatePosMatrix(Ve.posMatrix,ze,w,M));const gt=k?Ge.textCollisionBox:Ge.iconCollisionBox,Qe=Ge.collisionCircleArray;if(Qe.length>0){const It=c.create(),St=rt;c.mul(It,Ge.placementInvProjMatrix,_.transform.glCoordMatrix),c.mul(It,It,Ge.placementViewportMatrix),Z.push({circleArray:Qe,circleOffset:Q,transform:St,invTransform:It,coord:Ve}),Y+=Qe.length/4,Q=Y}gt&&F.draw(R,A.LINES,Ut.disabled,gr.disabled,_.colorModeForRenderPass(),or.disabled,_c(rt,_.transform,ze),_.style.terrain&&_.style.terrain.getTerrainData(Ve),h.id,gt.layoutVertexBuffer,gt.indexBuffer,gt.segments,null,_.transform.zoom,null,null,gt.collisionVertexBuffer)}if(!k||!Z.length)return;const le=_.useProgram("collisionCircle"),se=new c.CollisionCircleLayoutArray;se.resize(4*Y),se._trim();let ie=0;for(const ue of Z)for(let Ve=0;Ve<ue.circleArray.length/4;Ve++){const ze=4*Ve,Ge=ue.circleArray[ze+0],rt=ue.circleArray[ze+1],gt=ue.circleArray[ze+2],Qe=ue.circleArray[ze+3];se.emplace(ie++,Ge,rt,gt,Qe,0),se.emplace(ie++,Ge,rt,gt,Qe,1),se.emplace(ie++,Ge,rt,gt,Qe,2),se.emplace(ie++,Ge,rt,gt,Qe,3)}(!Xs||Xs.length<2*Y)&&(Xs=function(ue){const Ve=2*ue,ze=new c.QuadTriangleArray;ze.resize(Ve),ze._trim();for(let Ge=0;Ge<Ve;Ge++){const rt=6*Ge;ze.uint16[rt+0]=4*Ge+0,ze.uint16[rt+1]=4*Ge+1,ze.uint16[rt+2]=4*Ge+2,ze.uint16[rt+3]=4*Ge+2,ze.uint16[rt+4]=4*Ge+3,ze.uint16[rt+5]=4*Ge+0}return ze}(Y));const xe=R.createIndexBuffer(Xs,!0),De=R.createVertexBuffer(se,c.collisionCircleLayout.members,!0);for(const ue of Z){const Ve={u_matrix:ue.transform,u_inv_matrix:ue.invTransform,u_camera_to_center_distance:(Ie=_.transform).cameraToCenterDistance,u_viewport_size:[Ie.width,Ie.height]};le.draw(R,A.TRIANGLES,Ut.disabled,gr.disabled,_.colorModeForRenderPass(),or.disabled,Ve,_.style.terrain&&_.style.terrain.getTerrainData(ue.coord),h.id,De,xe,c.SegmentVector.simpleSegment(0,2*ue.circleOffset,ue.circleArray.length,ue.circleArray.length/2),null,_.transform.zoom,null,null,null)}var Ie;De.destroy(),xe.destroy()}or.disabled=new or(!1,1029,2305),or.backCCW=new or(!0,1029,2305);const ju=c.identity(new Float32Array(16));function H1(_,s,h,y,w,M){const{horizontalAlign:k,verticalAlign:R}=c.getAnchorAlignment(_),A=-(k-.5)*s,F=-(R-.5)*h,Z=c.evaluateVariableOffset(_,y);return new c.pointGeometry((A/w+Z[0])*M,(F/w+Z[1])*M)}function rh(_,s,h,y,w,M,k,R,A,F,Z){const Y=_.text.placedSymbolArray,Q=_.text.dynamicLayoutVertexArray,le=_.icon.dynamicLayoutVertexArray,se={};Q.clear();for(let ie=0;ie<Y.length;ie++){const xe=Y.get(ie),De=_.allowVerticalPlacement&&!xe.placedOrientation,Ie=xe.hidden||!xe.crossTileID||De?null:y[xe.crossTileID];if(Ie){const ue=new c.pointGeometry(xe.anchorX,xe.anchorY),Ve=pn(ue,h?k:M,Z),ze=Cn(w.cameraToCenterDistance,Ve.signedDistanceFromCamera);let Ge=c.evaluateSizeForFeature(_.textSizeData,A,xe)*ze/c.ONE_EM;h&&(Ge*=_.tilePixelRatio/R);const{width:rt,height:gt,anchor:Qe,textOffset:It,textBoxScale:St}=Ie,Lt=H1(Qe,rt,gt,It,St,Ge),un=h?pn(ue.add(Lt),M,Z).point:Ve.point.add(s?Lt.rotate(-w.angle):Lt),gn=_.allowVerticalPlacement&&xe.placedOrientation===c.WritingMode.vertical?Math.PI/2:0;for(let Kt=0;Kt<xe.numGlyphs;Kt++)c.addDynamicAttributes(Q,un,gn);F&&xe.associatedIconIndex>=0&&(se[xe.associatedIconIndex]={shiftedAnchor:un,angle:gn})}else sr(xe.numGlyphs,Q)}if(F){le.clear();const ie=_.icon.placedSymbolArray;for(let xe=0;xe<ie.length;xe++){const De=ie.get(xe);if(De.hidden)sr(De.numGlyphs,le);else{const Ie=se[xe];if(Ie)for(let ue=0;ue<De.numGlyphs;ue++)c.addDynamicAttributes(le,Ie.shiftedAnchor,Ie.angle);else sr(De.numGlyphs,le)}}_.icon.dynamicLayoutVertexBuffer.updateData(le)}_.text.dynamicLayoutVertexBuffer.updateData(Q)}function Ou(_,s,h){return h.iconsInText&&s?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function Sa(_,s,h,y,w,M,k,R,A,F,Z,Y){const Q=_.context,le=Q.gl,se=_.transform,ie=R==="map",xe=A==="map",De=R!=="viewport"&&h.layout.get("symbol-placement")!=="point",Ie=ie&&!xe&&!De,ue=!h.layout.get("symbol-sort-key").isConstant();let Ve=!1;const ze=_.depthModeForSublayer(0,Ut.ReadOnly),Ge=h.layout.get("text-variable-anchor"),rt=[];for(const gt of y){const Qe=s.getTile(gt),It=Qe.getBucket(h);if(!It)continue;const St=w?It.text:It.icon;if(!St||!St.segments.get().length)continue;const Lt=St.programConfigurations.get(h.id),un=w||It.sdfIcons,gn=w?It.textSizeData:It.iconSizeData,Kt=xe||se.pitch!==0,Gn=_.useProgram(Ou(un,w,It),Lt),En=c.evaluateSizeForZoom(gn,se.zoom),_n=_.style.terrain&&_.style.terrain.getTerrainData(gt);let wn,Ln,li,Dr,br=[0,0],Yr=null;if(w){if(Ln=Qe.glyphAtlasTexture,li=le.LINEAR,wn=Qe.glyphAtlasTexture.size,It.iconsInText){br=Qe.imageAtlasTexture.size,Yr=Qe.imageAtlasTexture;const Pi=gn.kind==="composite"||gn.kind==="camera";Dr=Kt||_.options.rotating||_.options.zooming||Pi?le.LINEAR:le.NEAREST}}else{const Pi=h.layout.get("icon-size").constantOr(0)!==1||It.iconsNeedLinear;Ln=Qe.imageAtlasTexture,li=un||_.options.rotating||_.options.zooming||Pi||Kt?le.LINEAR:le.NEAREST,wn=Qe.imageAtlasTexture.size}const _i=Ft(Qe,1,_.transform.zoom),hr=cn(gt.posMatrix,xe,ie,_.transform,_i),Xr=Gt(gt.posMatrix,xe,ie,_.transform,_i),ao=Ge&&It.hasTextData(),Ia=h.layout.get("icon-text-fit")!=="none"&&ao&&It.hasIconData();if(De){const Pi=_.style.terrain?(co,Ol)=>_.style.terrain.getElevation(gt,co,Ol):null,lo=h.layout.get("text-rotation-alignment")==="map";Ot(It,gt.posMatrix,_,w,hr,Xr,xe,F,lo,Pi)}const In=_.translatePosMatrix(gt.posMatrix,Qe,M,k),Tn=De||w&&Ge||Ia?ju:hr,fn=_.translatePosMatrix(Xr,Qe,M,k,!0),vn=un&&h.paint.get(w?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let yr;yr=un?It.iconsInText?yl(gn.kind,En,Ie,xe,_,In,Tn,fn,wn,br):Bo(gn.kind,En,Ie,xe,_,In,Tn,fn,w,wn):Xi(gn.kind,En,Ie,xe,_,In,Tn,fn,w,wn);const ar={program:Gn,buffers:St,uniformValues:yr,atlasTexture:Ln,atlasTextureIcon:Yr,atlasInterpolation:li,atlasInterpolationIcon:Dr,isSDF:un,hasHalo:vn};if(ue&&It.canOverlap){Ve=!0;const Pi=St.segments.get();for(const lo of Pi)rt.push({segments:new c.SegmentVector([lo]),sortKey:lo.sortKey,state:ar,terrainData:_n})}else rt.push({segments:St.segments,sortKey:0,state:ar,terrainData:_n})}Ve&&rt.sort((gt,Qe)=>gt.sortKey-Qe.sortKey);for(const gt of rt){const Qe=gt.state;if(Q.activeTexture.set(le.TEXTURE0),Qe.atlasTexture.bind(Qe.atlasInterpolation,le.CLAMP_TO_EDGE),Qe.atlasTextureIcon&&(Q.activeTexture.set(le.TEXTURE1),Qe.atlasTextureIcon&&Qe.atlasTextureIcon.bind(Qe.atlasInterpolationIcon,le.CLAMP_TO_EDGE)),Qe.isSDF){const It=Qe.uniformValues;Qe.hasHalo&&(It.u_is_halo=1,Cl(Qe.buffers,gt.segments,h,_,Qe.program,ze,Z,Y,It,gt.terrainData)),It.u_is_halo=0}Cl(Qe.buffers,gt.segments,h,_,Qe.program,ze,Z,Y,Qe.uniformValues,gt.terrainData)}}function Cl(_,s,h,y,w,M,k,R,A,F){const Z=y.context;w.draw(Z,Z.gl.TRIANGLES,M,k,R,or.disabled,A,F,h.id,_.layoutVertexBuffer,_.indexBuffer,s,h.paint,y.transform.zoom,_.programConfigurations.get(h.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function Lc(_,s,h,y,w,M,k){const R=_.context.gl,A=h.paint.get("fill-pattern"),F=A&&A.constantOr(1),Z=h.getCrossfadeParameters();let Y,Q,le,se,ie;k?(Q=F&&!h.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Y=R.LINES):(Q=F?"fillPattern":"fill",Y=R.TRIANGLES);for(const xe of y){const De=s.getTile(xe);if(F&&!De.patternsLoaded())continue;const Ie=De.getBucket(h);if(!Ie)continue;const ue=Ie.programConfigurations.get(h.id),Ve=_.useProgram(Q,ue),ze=_.style.terrain&&_.style.terrain.getTerrainData(xe);F&&(_.context.activeTexture.set(R.TEXTURE0),De.imageAtlasTexture.bind(R.LINEAR,R.CLAMP_TO_EDGE),ue.updatePaintBuffers(Z));const Ge=A.constantOr(null);if(Ge&&De.imageAtlas){const Qe=De.imageAtlas,It=Qe.patternPositions[Ge.to.toString()],St=Qe.patternPositions[Ge.from.toString()];It&&St&&ue.setConstantPatternPositions(It,St)}const rt=ze?xe:null,gt=_.translatePosMatrix(rt?rt.posMatrix:xe.posMatrix,De,h.paint.get("fill-translate"),h.paint.get("fill-translate-anchor"));if(k){se=Ie.indexBuffer2,ie=Ie.segments2;const Qe=[R.drawingBufferWidth,R.drawingBufferHeight];le=Q==="fillOutlinePattern"&&F?xc(gt,_,Z,De,Qe):Eu(gt,Qe)}else se=Ie.indexBuffer,ie=Ie.segments,le=F?pl(gt,_,Z,De):Mu(gt);Ve.draw(_.context,Y,w,_.stencilModeForClipping(xe),M,or.disabled,le,ze,h.id,Ie.layoutVertexBuffer,se,ie,h.paint,_.transform.zoom,ue)}}function Sl(_,s,h,y,w,M,k){const R=_.context,A=R.gl,F=h.paint.get("fill-extrusion-pattern"),Z=F.constantOr(1),Y=h.getCrossfadeParameters(),Q=h.paint.get("fill-extrusion-opacity");for(const le of y){const se=s.getTile(le),ie=se.getBucket(h);if(!ie)continue;const xe=_.style.terrain&&_.style.terrain.getTerrainData(le),De=ie.programConfigurations.get(h.id),Ie=_.useProgram(Z?"fillExtrusionPattern":"fillExtrusion",De);Z&&(_.context.activeTexture.set(A.TEXTURE0),se.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),De.updatePaintBuffers(Y));const ue=F.constantOr(null);if(ue&&se.imageAtlas){const rt=se.imageAtlas,gt=rt.patternPositions[ue.to.toString()],Qe=rt.patternPositions[ue.from.toString()];gt&&Qe&&De.setConstantPatternPositions(gt,Qe)}const Ve=_.translatePosMatrix(le.posMatrix,se,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),ze=h.paint.get("fill-extrusion-vertical-gradient"),Ge=Z?Su(Ve,_,ze,Q,le,Y,se):hl(Ve,_,ze,Q);Ie.draw(R,R.gl.TRIANGLES,w,M,k,or.backCCW,Ge,xe,h.id,ie.layoutVertexBuffer,ie.indexBuffer,ie.segments,h.paint,_.transform.zoom,De,_.style.terrain&&ie.centroidVertexBuffer)}}function U1(_,s,h,y,w,M,k){const R=_.context,A=R.gl,F=h.fbo;if(!F)return;const Z=_.useProgram("hillshade"),Y=_.style.terrain&&_.style.terrain.getTerrainData(s);R.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,F.colorAttachment.get()),Z.draw(R,A.TRIANGLES,w,M,k,or.disabled,((Q,le,se,ie)=>{const xe=se.paint.get("hillshade-shadow-color"),De=se.paint.get("hillshade-highlight-color"),Ie=se.paint.get("hillshade-accent-color");let ue=se.paint.get("hillshade-illumination-direction")*(Math.PI/180);se.paint.get("hillshade-illumination-anchor")==="viewport"&&(ue-=Q.transform.angle);const Ve=!Q.options.moving;return{u_matrix:ie?ie.posMatrix:Q.transform.calculatePosMatrix(le.tileID.toUnwrapped(),Ve),u_image:0,u_latrange:ml(0,le.tileID),u_light:[se.paint.get("hillshade-exaggeration"),ue],u_shadow:xe,u_highlight:De,u_accent:Ie}})(_,h,y,Y?s:null),Y,y.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}function Tc(_,s,h,y,w,M){const k=_.context,R=k.gl,A=s.dem;if(A&&A.data){const F=A.dim,Z=A.stride,Y=A.getPixels();if(k.activeTexture.set(R.TEXTURE1),k.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||_.getTileTexture(Z),s.demTexture){const le=s.demTexture;le.update(Y,{premultiply:!1}),le.bind(R.NEAREST,R.CLAMP_TO_EDGE)}else s.demTexture=new q(k,Y,R.RGBA,{premultiply:!1}),s.demTexture.bind(R.NEAREST,R.CLAMP_TO_EDGE);k.activeTexture.set(R.TEXTURE0);let Q=s.fbo;if(!Q){const le=new q(k,{width:F,height:F,data:null},R.RGBA);le.bind(R.LINEAR,R.CLAMP_TO_EDGE),Q=s.fbo=k.createFramebuffer(F,F,!0),Q.colorAttachment.set(le.texture)}k.bindFramebuffer.set(Q.framebuffer),k.viewport.set([0,0,F,F]),_.useProgram("hillshadePrepare").draw(k,R.TRIANGLES,y,w,M,or.disabled,((le,se)=>{const ie=se.stride,xe=c.create();return c.ortho(xe,0,c.EXTENT,-c.EXTENT,0,0,1),c.translate(xe,xe,[0,-c.EXTENT,0]),{u_matrix:xe,u_image:1,u_dimension:[ie,ie],u_zoom:le.overscaledZ,u_unpack:se.getUnpackVector()}})(s.tileID,A),null,h.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments),s.needsHillshadePrepare=!1}}function kc(_,s,h,y,w,M){const k=y.paint.get("raster-fade-duration");if(!M&&k>0){const R=c.exported.now(),A=(R-_.timeAdded)/k,F=s?(R-s.timeAdded)/k:-1,Z=h.getSource(),Y=w.coveringZoomLevel({tileSize:Z.tileSize,roundZoom:Z.roundZoom}),Q=!s||Math.abs(s.tileID.overscaledZ-Y)>Math.abs(_.tileID.overscaledZ-Y),le=Q&&_.refreshedUponExpiration?1:c.clamp(Q?A:1-F,0,1);return _.refreshedUponExpiration&&A>=1&&(_.refreshedUponExpiration=!1),s?{opacity:1,mix:1-le}:{opacity:le,mix:0}}return{opacity:1,mix:0}}const Ki=new c.Color(1,0,0,1),Pc=new c.Color(0,1,0,1),Uo=new c.Color(0,0,1,1),Z1=new c.Color(1,0,1,1),Zo=new c.Color(0,1,1,1);function Ma(_,s,h,y){El(_,0,s+h/2,_.transform.width,h,y)}function Ml(_,s,h,y){El(_,s-h/2,0,h,_.transform.height,y)}function El(_,s,h,y,w,M){const k=_.context,R=k.gl;R.enable(R.SCISSOR_TEST),R.scissor(s*_.pixelRatio,h*_.pixelRatio,y*_.pixelRatio,w*_.pixelRatio),k.clear({color:M}),R.disable(R.SCISSOR_TEST)}function Dc(_,s,h){const y=_.context,w=y.gl,M=h.posMatrix,k=_.useProgram("debug"),R=Ut.disabled,A=gr.disabled,F=_.colorModeForRenderPass(),Z="$debug",Y=_.style.terrain&&_.style.terrain.getTerrainData(h);y.activeTexture.set(w.TEXTURE0),_.emptyTexture.bind(w.LINEAR,w.CLAMP_TO_EDGE);const Q=s.getTileByID(h.key).latestRawTileData,le=Math.floor((Q&&Q.byteLength||0)/1024),se=s.getTile(h).tileSize,ie=512/Math.min(se,512)*(h.overscaledZ/_.transform.zoom)*.5;let xe=h.canonical.toString();h.overscaledZ!==h.canonical.z&&(xe+=` => ${h.overscaledZ}`),function(De,Ie){De.initDebugOverlayCanvas();const ue=De.debugOverlayCanvas,Ve=De.context.gl,ze=De.debugOverlayCanvas.getContext("2d");ze.clearRect(0,0,ue.width,ue.height),ze.shadowColor="white",ze.shadowBlur=2,ze.lineWidth=1.5,ze.strokeStyle="white",ze.textBaseline="top",ze.font="bold 36px Open Sans, sans-serif",ze.fillText(Ie,5,5),ze.strokeText(Ie,5,5),De.debugOverlayTexture.update(ue),De.debugOverlayTexture.bind(Ve.LINEAR,Ve.CLAMP_TO_EDGE)}(_,`${xe} ${le}kB`),k.draw(y,w.TRIANGLES,R,A,wr.alphaBlended,or.disabled,Ws(M,c.Color.transparent,ie),null,Z,_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments),k.draw(y,w.LINE_STRIP,R,A,F,or.disabled,Ws(M,c.Color.red),Y,Z,_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments)}function qo(_,s,h){const y=_.context,w=y.gl,M=_.colorModeForRenderPass(),k=new Ut(w.LEQUAL,Ut.ReadWrite,_.depthRangeFor3D),R=_.useProgram("terrain"),A=s.getTerrainMesh(),F=s.getTerrainData(h.tileID);y.bindFramebuffer.set(null),y.viewport.set([0,0,_.width,_.height]),y.activeTexture.set(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,s.getRTTFramebuffer().colorAttachment.get());const Z=_.transform.calculatePosMatrix(h.tileID.toUnwrapped());R.draw(y,w.TRIANGLES,k,gr.disabled,M,or.backCCW,{u_matrix:Z,u_texture:0},F,"terrain",A.vertexBuffer,A.indexBuffer,A.segments)}function zu(_,s,h,y){const w=_.context,M=h.tileSize*s.qualityFactor;h.textures[y]||(h.textures[y]=_.getTileTexture(M)||new q(w,{width:M,height:M,data:null},w.gl.RGBA),h.textures[y].bind(w.gl.LINEAR,w.gl.CLAMP_TO_EDGE),y===0&&s.sourceCache.renderHistory.unshift(h.tileID.key));const k=s.getRTTFramebuffer();k.colorAttachment.set(h.textures[y].texture),w.bindFramebuffer.set(k.framebuffer),w.viewport.set([0,0,M,M])}class Ic{constructor(s){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=s,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=s.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const s=this.painter.style,h=s.terrain;for(const y in s.sourceCaches){this._coordsDescendingInv[y]={};const w=s.sourceCaches[y].getVisibleCoordinates();for(const M of w){const k=h.sourceCache.getTerrainCoords(M);for(const R in k)this._coordsDescendingInv[y][R]||(this._coordsDescendingInv[y][R]=[]),this._coordsDescendingInv[y][R].push(k[R])}}for(const y of s._order){const w=s._layers[y],M=w.source;if(this._renderToTexture[w.type]&&!this._coordsDescendingInvStr[M]){this._coordsDescendingInvStr[M]={};for(const k in this._coordsDescendingInv[M])this._coordsDescendingInvStr[M][k]=this._coordsDescendingInv[M][k].map(R=>R.key).sort().join()}}return this._renderableTiles.forEach(y=>{for(const w in this._coordsDescendingInvStr){const M=this._coordsDescendingInvStr[w][y.tileID.key];M&&M!==y.textureCoords[w]&&y.clearTextures(this.painter),h.needsRerender(w,y.tileID)&&y.clearTextures(this.painter)}this._rerender[y.tileID.key]=!y.textures.length}),h.clearRerenderCache(),h.sourceCache.removeOutdated(this.painter),this}renderLayer(s){const h=s.type,y=this.painter,w=y.style._order,M=y.currentLayer,k=M+1===w.length;if(this._renderToTexture[h]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=h,this._stacks[this._stacks.length-1].push(w[M]),!k))return!0;if(this._renderToTexture[this._prevType]||h==="hillshade"||this._renderToTexture[h]&&k){this._prevType=h;const R=this._stacks.length-1,A=this._stacks[R]||[];for(const F of this._renderableTiles){if(zu(y,y.style.terrain,F,R),this._rerender[F.tileID.key]){y.context.clear({color:c.Color.transparent});for(let Z=0;Z<A.length;Z++){const Y=y.style._layers[A[Z]],Q=Y.source?this._coordsDescendingInv[Y.source][F.tileID.key]:[F.tileID];y._renderTileClippingMasks(Y,Q),y.renderLayer(y,y.style.sourceCaches[Y.source],Y,Q),Y.source&&(F.textureCoords[Y.source]=this._coordsDescendingInvStr[Y.source][F.tileID.key])}}qo(y,y.style.terrain,F)}if(h==="hillshade"){this._stacks.push([w[M]]);for(const F of this._renderableTiles){const Z=this._coordsDescendingInv[s.source][F.tileID.key];zu(y,y.style.terrain,F,this._stacks.length-1),y.context.clear({color:c.Color.transparent}),y._renderTileClippingMasks(s,Z),y.renderLayer(y,y.style.sourceCaches[s.source],s,Z),qo(y,y.style.terrain,F)}return!0}return this._renderToTexture[h]}return!1}}const Nc={symbol:function(_,s,h,y,w){if(_.renderPass!=="translucent")return;const M=gr.disabled,k=_.colorModeForRenderPass();h.layout.get("text-variable-anchor")&&function(R,A,F,Z,Y,Q,le){const se=A.transform,ie=Y==="map",xe=Q==="map";for(const De of R){const Ie=Z.getTile(De),ue=Ie.getBucket(F);if(!ue||!ue.text||!ue.text.segments.get().length)continue;const Ve=c.evaluateSizeForZoom(ue.textSizeData,se.zoom),ze=Ft(Ie,1,A.transform.zoom),Ge=cn(De.posMatrix,xe,ie,A.transform,ze),rt=F.layout.get("icon-text-fit")!=="none"&&ue.hasIconData();if(Ve){const gt=Math.pow(2,se.zoom-Ie.tileID.overscaledZ);rh(ue,ie,xe,le,se,Ge,De.posMatrix,gt,Ve,rt,A.style.terrain?(Qe,It)=>A.style.terrain.getElevation(De,Qe,It):null)}}}(y,_,h,s,h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),w),h.paint.get("icon-opacity").constantOr(1)!==0&&Sa(_,s,h,y,!1,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),h.layout.get("icon-rotation-alignment"),h.layout.get("icon-pitch-alignment"),h.layout.get("icon-keep-upright"),M,k),h.paint.get("text-opacity").constantOr(1)!==0&&Sa(_,s,h,y,!0,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),h.layout.get("text-keep-upright"),M,k),s.map.showCollisionBoxes&&(V1(_,s,h,y,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),!0),V1(_,s,h,y,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),!1))},circle:function(_,s,h,y){if(_.renderPass!=="translucent")return;const w=h.paint.get("circle-opacity"),M=h.paint.get("circle-stroke-width"),k=h.paint.get("circle-stroke-opacity"),R=!h.layout.get("circle-sort-key").isConstant();if(w.constantOr(1)===0&&(M.constantOr(1)===0||k.constantOr(1)===0))return;const A=_.context,F=A.gl,Z=_.depthModeForSublayer(0,Ut.ReadOnly),Y=gr.disabled,Q=_.colorModeForRenderPass(),le=[];for(let se=0;se<y.length;se++){const ie=y[se],xe=s.getTile(ie),De=xe.getBucket(h);if(!De)continue;const Ie=De.programConfigurations.get(h.id),ue=_.useProgram("circle",Ie),Ve=De.layoutVertexBuffer,ze=De.indexBuffer,Ge=_.style.terrain&&_.style.terrain.getTerrainData(ie),rt={programConfiguration:Ie,program:ue,layoutVertexBuffer:Ve,indexBuffer:ze,uniformValues:Yi(_,ie,xe,h),terrainData:Ge};if(R){const gt=De.segments.get();for(const Qe of gt)le.push({segments:new c.SegmentVector([Qe]),sortKey:Qe.sortKey,state:rt})}else le.push({segments:De.segments,sortKey:0,state:rt})}R&&le.sort((se,ie)=>se.sortKey-ie.sortKey);for(const se of le){const{programConfiguration:ie,program:xe,layoutVertexBuffer:De,indexBuffer:Ie,uniformValues:ue,terrainData:Ve}=se.state;xe.draw(A,F.TRIANGLES,Z,Y,Q,or.disabled,ue,Ve,h.id,De,Ie,se.segments,h.paint,_.transform.zoom,ie)}},heatmap:function(_,s,h,y){if(h.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const w=_.context,M=w.gl,k=gr.disabled,R=new wr([M.ONE,M.ONE],c.Color.transparent,[!0,!0,!0,!0]);(function(A,F,Z){const Y=A.gl;A.activeTexture.set(Y.TEXTURE1),A.viewport.set([0,0,F.width/4,F.height/4]);let Q=Z.heatmapFbo;if(Q)Y.bindTexture(Y.TEXTURE_2D,Q.colorAttachment.get()),A.bindFramebuffer.set(Q.framebuffer);else{const le=Y.createTexture();Y.bindTexture(Y.TEXTURE_2D,le),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_WRAP_S,Y.CLAMP_TO_EDGE),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_WRAP_T,Y.CLAMP_TO_EDGE),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_MIN_FILTER,Y.LINEAR),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_MAG_FILTER,Y.LINEAR),Q=Z.heatmapFbo=A.createFramebuffer(F.width/4,F.height/4,!1),function(se,ie,xe,De){const Ie=se.gl;Ie.texImage2D(Ie.TEXTURE_2D,0,Ie.RGBA,ie.width/4,ie.height/4,0,Ie.RGBA,se.extRenderToTextureHalfFloat?se.extTextureHalfFloat.HALF_FLOAT_OES:Ie.UNSIGNED_BYTE,null),De.colorAttachment.set(xe)}(A,F,le,Q)}})(w,_,h),w.clear({color:c.Color.transparent});for(let A=0;A<y.length;A++){const F=y[A];if(s.hasRenderableParent(F))continue;const Z=s.getTile(F),Y=Z.getBucket(h);if(!Y)continue;const Q=Y.programConfigurations.get(h.id),le=_.useProgram("heatmap",Q),{zoom:se}=_.transform;le.draw(w,M.TRIANGLES,Ut.disabled,k,R,or.disabled,fl(F.posMatrix,Z,se,h.paint.get("heatmap-intensity")),null,h.id,Y.layoutVertexBuffer,Y.indexBuffer,Y.segments,h.paint,_.transform.zoom,Q)}w.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(w,M){const k=w.context,R=k.gl,A=M.heatmapFbo;if(!A)return;k.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,A.colorAttachment.get()),k.activeTexture.set(R.TEXTURE1);let F=M.colorRampTexture;F||(F=M.colorRampTexture=new q(k,M.colorRamp,R.RGBA)),F.bind(R.LINEAR,R.CLAMP_TO_EDGE),w.useProgram("heatmapTexture").draw(k,R.TRIANGLES,Ut.disabled,gr.disabled,w.colorModeForRenderPass(),or.disabled,((Z,Y,Q,le)=>{const se=c.create();c.ortho(se,0,Z.width,Z.height,0,0,1);const ie=Z.context.gl;return{u_matrix:se,u_world:[ie.drawingBufferWidth,ie.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Y.paint.get("heatmap-opacity")}})(w,M),null,M.id,w.viewportBuffer,w.quadTriangleIndexBuffer,w.viewportSegments,M.paint,w.transform.zoom)}(_,h))},line:function(_,s,h,y){if(_.renderPass!=="translucent")return;const w=h.paint.get("line-opacity"),M=h.paint.get("line-width");if(w.constantOr(1)===0||M.constantOr(1)===0)return;const k=_.depthModeForSublayer(0,Ut.ReadOnly),R=_.colorModeForRenderPass(),A=h.paint.get("line-dasharray"),F=h.paint.get("line-pattern"),Z=F.constantOr(1),Y=h.paint.get("line-gradient"),Q=h.getCrossfadeParameters(),le=Z?"linePattern":A?"lineSDF":Y?"lineGradient":"line",se=_.context,ie=se.gl;let xe=!0;for(const De of y){const Ie=s.getTile(De);if(Z&&!Ie.patternsLoaded())continue;const ue=Ie.getBucket(h);if(!ue)continue;const Ve=ue.programConfigurations.get(h.id),ze=_.context.program.get(),Ge=_.useProgram(le,Ve),rt=xe||Ge.program!==ze,gt=_.style.terrain&&_.style.terrain.getTerrainData(De),Qe=F.constantOr(null);if(Qe&&Ie.imageAtlas){const Lt=Ie.imageAtlas,un=Lt.patternPositions[Qe.to.toString()],gn=Lt.patternPositions[Qe.from.toString()];un&&gn&&Ve.setConstantPatternPositions(un,gn)}const It=gt?De:null,St=Z?pa(_,Ie,h,Q,It):A?dr(_,Ie,h,A,Q,It):Y?gl(_,Ie,h,ue.lineClipsArray.length,It):zo(_,Ie,h,It);if(Z)se.activeTexture.set(ie.TEXTURE0),Ie.imageAtlasTexture.bind(ie.LINEAR,ie.CLAMP_TO_EDGE),Ve.updatePaintBuffers(Q);else if(A&&(rt||_.lineAtlas.dirty))se.activeTexture.set(ie.TEXTURE0),_.lineAtlas.bind(se);else if(Y){const Lt=ue.gradients[h.id];let un=Lt.texture;if(h.gradientVersion!==Lt.version){let gn=256;if(h.stepInterpolant){const Kt=s.getSource().maxzoom,Gn=De.canonical.z===Kt?Math.ceil(1<<_.transform.maxZoom-De.canonical.z):1;gn=c.clamp(c.nextPowerOfTwo(ue.maxLineLength/c.EXTENT*1024*Gn),256,se.maxTextureSize)}Lt.gradient=c.renderColorRamp({expression:h.gradientExpression(),evaluationKey:"lineProgress",resolution:gn,image:Lt.gradient||void 0,clips:ue.lineClipsArray}),Lt.texture?Lt.texture.update(Lt.gradient):Lt.texture=new q(se,Lt.gradient,ie.RGBA),Lt.version=h.gradientVersion,un=Lt.texture}se.activeTexture.set(ie.TEXTURE0),un.bind(h.stepInterpolant?ie.NEAREST:ie.LINEAR,ie.CLAMP_TO_EDGE)}Ge.draw(se,ie.TRIANGLES,k,_.stencilModeForClipping(De),R,or.disabled,St,gt,h.id,ue.layoutVertexBuffer,ue.indexBuffer,ue.segments,h.paint,_.transform.zoom,Ve,ue.layoutVertexBuffer2),xe=!1}},fill:function(_,s,h,y){const w=h.paint.get("fill-color"),M=h.paint.get("fill-opacity");if(M.constantOr(1)===0)return;const k=_.colorModeForRenderPass(),R=h.paint.get("fill-pattern"),A=_.opaquePassEnabledForLayer()&&!R.constantOr(1)&&w.constantOr(c.Color.transparent).a===1&&M.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===A){const F=_.depthModeForSublayer(1,_.renderPass==="opaque"?Ut.ReadWrite:Ut.ReadOnly);Lc(_,s,h,y,F,k,!1)}if(_.renderPass==="translucent"&&h.paint.get("fill-antialias")){const F=_.depthModeForSublayer(h.getPaintProperty("fill-outline-color")?2:0,Ut.ReadOnly);Lc(_,s,h,y,F,k,!0)}},"fill-extrusion":function(_,s,h,y){const w=h.paint.get("fill-extrusion-opacity");if(w!==0&&_.renderPass==="translucent"){const M=new Ut(_.context.gl.LEQUAL,Ut.ReadWrite,_.depthRangeFor3D);if(w!==1||h.paint.get("fill-extrusion-pattern").constantOr(1))Sl(_,s,h,y,M,gr.disabled,wr.disabled),Sl(_,s,h,y,M,_.stencilModeFor3D(),_.colorModeForRenderPass());else{const k=_.colorModeForRenderPass();Sl(_,s,h,y,M,gr.disabled,k)}}},hillshade:function(_,s,h,y){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const w=_.context,M=_.depthModeForSublayer(0,Ut.ReadOnly),k=_.colorModeForRenderPass(),[R,A]=_.renderPass==="translucent"?_.stencilConfigForOverlap(y):[{},y];for(const F of A){const Z=s.getTile(F);Z.needsHillshadePrepare!==void 0&&Z.needsHillshadePrepare&&_.renderPass==="offscreen"?Tc(_,Z,h,M,gr.disabled,k):_.renderPass==="translucent"&&U1(_,F,Z,h,M,R[F.overscaledZ],k)}w.viewport.set([0,0,_.width,_.height])},raster:function(_,s,h,y){if(_.renderPass!=="translucent"||h.paint.get("raster-opacity")===0||!y.length)return;const w=_.context,M=w.gl,k=s.getSource(),R=_.useProgram("raster"),A=_.colorModeForRenderPass(),[F,Z]=k instanceof je?[{},y]:_.stencilConfigForOverlap(y),Y=Z[Z.length-1].overscaledZ,Q=!_.options.moving;for(const le of Z){const se=_.depthModeForSublayer(le.overscaledZ-Y,h.paint.get("raster-opacity")===1?Ut.ReadWrite:Ut.ReadOnly,M.LESS),ie=s.getTile(le);ie.registerFadeDuration(h.paint.get("raster-fade-duration"));const xe=s.findLoadedParent(le,0),De=kc(ie,xe,s,h,_.transform,_.style.terrain);let Ie,ue;const Ve=h.paint.get("raster-resampling")==="nearest"?M.NEAREST:M.LINEAR;w.activeTexture.set(M.TEXTURE0),ie.texture.bind(Ve,M.CLAMP_TO_EDGE,M.LINEAR_MIPMAP_NEAREST),w.activeTexture.set(M.TEXTURE1),xe?(xe.texture.bind(Ve,M.CLAMP_TO_EDGE,M.LINEAR_MIPMAP_NEAREST),Ie=Math.pow(2,xe.tileID.overscaledZ-ie.tileID.overscaledZ),ue=[ie.tileID.canonical.x*Ie%1,ie.tileID.canonical.y*Ie%1]):ie.texture.bind(Ve,M.CLAMP_TO_EDGE,M.LINEAR_MIPMAP_NEAREST);const ze=_.style.terrain&&_.style.terrain.getTerrainData(le),Ge=ze?le:null,rt=Ge?Ge.posMatrix:_.transform.calculatePosMatrix(le.toUnwrapped(),Q),gt=Ms(rt,ue||[0,0],Ie||1,De,h);k instanceof je?R.draw(w,M.TRIANGLES,se,gr.disabled,A,or.disabled,gt,ze,h.id,k.boundsBuffer,_.quadTriangleIndexBuffer,k.boundsSegments):R.draw(w,M.TRIANGLES,se,F[le.overscaledZ],A,or.disabled,gt,ze,h.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}},background:function(_,s,h,y){const w=h.paint.get("background-color"),M=h.paint.get("background-opacity");if(M===0)return;const k=_.context,R=k.gl,A=_.transform,F=A.tileSize,Z=h.paint.get("background-pattern");if(_.isPatternMissing(Z))return;const Y=!Z&&w.a===1&&M===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==Y)return;const Q=gr.disabled,le=_.depthModeForSublayer(0,Y==="opaque"?Ut.ReadWrite:Ut.ReadOnly),se=_.colorModeForRenderPass(),ie=_.useProgram(Z?"backgroundPattern":"background"),xe=y||A.coveringTiles({tileSize:F,terrain:_.style.terrain});Z&&(k.activeTexture.set(R.TEXTURE0),_.imageManager.bind(_.context));const De=h.getCrossfadeParameters();for(const Ie of xe){const ue=y?Ie.posMatrix:_.transform.calculatePosMatrix(Ie.toUnwrapped()),Ve=Z?Lu(ue,M,_,Z,{tileID:Ie,tileSize:F},De):Gs(ue,M,w),ze=_.style.terrain&&_.style.terrain.getTerrainData(Ie);ie.draw(k,R.TRIANGLES,le,Q,se,or.disabled,Ve,ze,h.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}},debug:function(_,s,h){for(let y=0;y<h.length;y++)Dc(_,s,h[y])},custom:function(_,s,h){const y=_.context,w=h.implementation;if(_.renderPass==="offscreen"){const M=w.prerender;M&&(_.setCustomLayerDefaults(),y.setColorMode(_.colorModeForRenderPass()),M.call(w,y.gl,_.transform.customLayerMatrix()),y.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),y.setColorMode(_.colorModeForRenderPass()),y.setStencilMode(gr.disabled);const M=w.renderingMode==="3d"?new Ut(_.context.gl.LEQUAL,Ut.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,Ut.ReadOnly);y.setDepthMode(M),w.render(y.gl,_.transform.customLayerMatrix()),y.setDirty(),_.setBaseState(),y.bindFramebuffer.set(null)}}};class Fu{constructor(s,h){this.context=new Au(s),this.transform=h,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:c.create(),renderTime:0},this.setup(),this.numSublayers=vt.maxUnderzooming+vt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new on,this.gpuTimers={}}resize(s,h,y){if(this.width=s*y,this.height=h*y,this.pixelRatio=y,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const w of this.style._order)this.style._layers[w].resize()}setup(){const s=this.context,h=new c.PosArray;h.emplaceBack(0,0),h.emplaceBack(c.EXTENT,0),h.emplaceBack(0,c.EXTENT),h.emplaceBack(c.EXTENT,c.EXTENT),this.tileExtentBuffer=s.createVertexBuffer(h,Qt.members),this.tileExtentSegments=c.SegmentVector.simpleSegment(0,0,4,2);const y=new c.PosArray;y.emplaceBack(0,0),y.emplaceBack(c.EXTENT,0),y.emplaceBack(0,c.EXTENT),y.emplaceBack(c.EXTENT,c.EXTENT),this.debugBuffer=s.createVertexBuffer(y,Qt.members),this.debugSegments=c.SegmentVector.simpleSegment(0,0,4,5);const w=new c.RasterBoundsArray;w.emplaceBack(0,0,0,0),w.emplaceBack(c.EXTENT,0,c.EXTENT,0),w.emplaceBack(0,c.EXTENT,0,c.EXTENT),w.emplaceBack(c.EXTENT,c.EXTENT,c.EXTENT,c.EXTENT),this.rasterBoundsBuffer=s.createVertexBuffer(w,de.members),this.rasterBoundsSegments=c.SegmentVector.simpleSegment(0,0,4,2);const M=new c.PosArray;M.emplaceBack(0,0),M.emplaceBack(1,0),M.emplaceBack(0,1),M.emplaceBack(1,1),this.viewportBuffer=s.createVertexBuffer(M,Qt.members),this.viewportSegments=c.SegmentVector.simpleSegment(0,0,4,2);const k=new c.LineStripIndexArray;k.emplaceBack(0),k.emplaceBack(1),k.emplaceBack(3),k.emplaceBack(2),k.emplaceBack(0),this.tileBorderIndexBuffer=s.createIndexBuffer(k);const R=new c.TriangleIndexArray;R.emplaceBack(0,1,2),R.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=s.createIndexBuffer(R),this.emptyTexture=new q(s,{width:1,height:1,data:new Uint8Array([0,0,0,0])},s.gl.RGBA);const A=this.context.gl;this.stencilClearMode=new gr({func:A.ALWAYS,mask:0},0,255,A.ZERO,A.ZERO,A.ZERO)}clearStencil(){const s=this.context,h=s.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const y=c.create();c.ortho(y,0,this.width,this.height,0,0,1),c.scale(y,y,[h.drawingBufferWidth,h.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(s,h.TRIANGLES,Ut.disabled,this.stencilClearMode,wr.disabled,or.disabled,$n(y),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(s,h){if(this.currentStencilSource===s.source||!s.isTileClipped()||!h||!h.length)return;this.currentStencilSource=s.source;const y=this.context,w=y.gl;this.nextStencilID+h.length>256&&this.clearStencil(),y.setColorMode(wr.disabled),y.setDepthMode(Ut.disabled);const M=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const k of h){const R=this._tileClippingMaskIDs[k.key]=this.nextStencilID++,A=this.style.terrain&&this.style.terrain.getTerrainData(k);M.draw(y,w.TRIANGLES,Ut.disabled,new gr({func:w.ALWAYS,mask:0},R,255,w.KEEP,w.KEEP,w.REPLACE),wr.disabled,or.disabled,$n(k.posMatrix),A,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const s=this.nextStencilID++,h=this.context.gl;return new gr({func:h.NOTEQUAL,mask:255},s,255,h.KEEP,h.KEEP,h.REPLACE)}stencilModeForClipping(s){const h=this.context.gl;return new gr({func:h.EQUAL,mask:255},this._tileClippingMaskIDs[s.key],0,h.KEEP,h.KEEP,h.REPLACE)}stencilConfigForOverlap(s){const h=this.context.gl,y=s.sort((k,R)=>R.overscaledZ-k.overscaledZ),w=y[y.length-1].overscaledZ,M=y[0].overscaledZ-w+1;if(M>1){this.currentStencilSource=void 0,this.nextStencilID+M>256&&this.clearStencil();const k={};for(let R=0;R<M;R++)k[R+w]=new gr({func:h.GEQUAL,mask:255},R+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=M,[k,y]}return[{[w]:gr.disabled},y]}colorModeForRenderPass(){const s=this.context.gl;return this._showOverdrawInspector?new wr([s.CONSTANT_COLOR,s.ONE],new c.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?wr.unblended:wr.alphaBlended}depthModeForSublayer(s,h,y){if(!this.opaquePassEnabledForLayer())return Ut.disabled;const w=1-((1+this.currentLayer)*this.numSublayers+s)*this.depthEpsilon;return new Ut(y||this.context.gl.LEQUAL,h,[w,w])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(s,h){this.style=s,this.options=h,this.lineAtlas=s.lineAtlas,this.imageManager=s.imageManager,this.glyphManager=s.glyphManager,this.symbolFadeChange=s.placement.symbolFadeChange(c.exported.now()),this.imageManager.beginFrame();const y=this.style._order,w=this.style.sourceCaches,M=this.style.terrain&&new Ic(this);for(const F in w){const Z=w[F];Z.used&&Z.prepare(this.context)}const k={},R={},A={};for(const F in w){const Z=w[F];k[F]=Z.getVisibleCoordinates(),R[F]=k[F].slice().reverse(),A[F]=Z.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let F=0;F<y.length;F++)if(this.style._layers[y[F]].is3D()){this.opaquePassCutoff=F;break}if(M){this.opaquePassCutoff=0;const F=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!c.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||F.length)&&(c.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(Z,Y){const Q=Z.context,le=Q.gl,se=wr.unblended,ie=new Ut(le.LEQUAL,Ut.ReadWrite,[0,1]),xe=Y.getTerrainMesh(),De=Y.sourceCache.getRenderableTiles(),Ie=Z.useProgram("terrainDepth");Q.bindFramebuffer.set(Y.getFramebuffer("depth").framebuffer),Q.viewport.set([0,0,Z.width/devicePixelRatio,Z.height/devicePixelRatio]),Q.clear({color:c.Color.transparent,depth:1});for(const ue of De){const Ve=Y.getTerrainData(ue.tileID),ze=Z.transform.calculatePosMatrix(ue.tileID.toUnwrapped());Ie.draw(Q,le.TRIANGLES,ie,gr.disabled,se,or.backCCW,{u_matrix:ze},Ve,"terrain",xe.vertexBuffer,xe.indexBuffer,xe.segments)}Q.bindFramebuffer.set(null),Q.viewport.set([0,0,Z.width,Z.height])}(this,this.style.terrain),function(Z,Y){const Q=Z.context,le=Q.gl,se=wr.unblended,ie=new Ut(le.LEQUAL,Ut.ReadWrite,[0,1]),xe=Y.getTerrainMesh(),De=Y.getCoordsTexture(),Ie=Y.sourceCache.getRenderableTiles(),ue=Z.useProgram("terrainCoords");Q.bindFramebuffer.set(Y.getFramebuffer("coords").framebuffer),Q.viewport.set([0,0,Z.width/devicePixelRatio,Z.height/devicePixelRatio]),Q.clear({color:c.Color.transparent,depth:1}),Y.coordsIndex=[];for(const Ve of Ie){const ze=Y.getTerrainData(Ve.tileID);Q.activeTexture.set(le.TEXTURE0),le.bindTexture(le.TEXTURE_2D,De.texture);const Ge=Z.transform.calculatePosMatrix(Ve.tileID.toUnwrapped());ue.draw(Q,le.TRIANGLES,ie,gr.disabled,se,or.backCCW,{u_matrix:Ge,u_terrain_coords_id:(255-Y.coordsIndex.length)/255,u_texture:0},ze,"terrain",xe.vertexBuffer,xe.indexBuffer,xe.segments),Y.coordsIndex.push(Ve.tileID.key)}Q.bindFramebuffer.set(null),Q.viewport.set([0,0,Z.width,Z.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const F of y){const Z=this.style._layers[F];if(!Z.hasOffscreenPass()||Z.isHidden(this.transform.zoom))continue;const Y=R[Z.source];(Z.type==="custom"||Y.length)&&this.renderLayer(this,w[Z.source],Z,Y)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:h.showOverdrawInspector?c.Color.black:c.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=h.showOverdrawInspector,this.depthRangeFor3D=[0,1-(s._order.length+2)*this.numSublayers*this.depthEpsilon],!M)for(this.renderPass="opaque",this.currentLayer=y.length-1;this.currentLayer>=0;this.currentLayer--){const F=this.style._layers[y[this.currentLayer]],Z=w[F.source],Y=k[F.source];this._renderTileClippingMasks(F,Y),this.renderLayer(this,Z,F,Y)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<y.length;this.currentLayer++){const F=this.style._layers[y[this.currentLayer]],Z=w[F.source];if(M&&M.renderLayer(F))continue;const Y=(F.type==="symbol"?A:R)[F.source];this._renderTileClippingMasks(F,k[F.source]),this.renderLayer(this,Z,F,Y)}if(this.options.showTileBoundaries){let F,Z;Object.values(this.style._layers).forEach(Y=>{Y.source&&!Y.isHidden(this.transform.zoom)&&(Y.source!==(Z&&Z.id)&&(Z=this.style.sourceCaches[Y.source]),(!F||F.getSource().maxzoom<Z.getSource().maxzoom)&&(F=Z))}),F&&Nc.debug(this,F,F.getVisibleCoordinates())}this.options.showPadding&&function(F){const Z=F.transform.padding;Ma(F,F.transform.height-(Z.top||0),3,Ki),Ma(F,Z.bottom||0,3,Pc),Ml(F,Z.left||0,3,Uo),Ml(F,F.transform.width-(Z.right||0),3,Z1);const Y=F.transform.centerPoint;(function(Q,le,se,ie){El(Q,le-1,se-10,2,20,ie),El(Q,le-10,se-1,20,2,ie)})(F,Y.x,F.transform.height-Y.y,Zo)}(this),this.context.setDefault()}renderLayer(s,h,y,w){y.isHidden(this.transform.zoom)||(y.type==="background"||y.type==="custom"||(w||[]).length)&&(this.id=y.id,this.gpuTimingStart(y),Nc[y.type](s,h,y,w,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(s){if(!this.options.gpuTiming)return;const h=this.context.extTimerQuery;let y=this.gpuTimers[s.id];y||(y=this.gpuTimers[s.id]={calls:0,cpuTime:0,query:h.createQueryEXT()}),y.calls++,h.beginQueryEXT(h.TIME_ELAPSED_EXT,y.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const s=this.context.extTimerQuery;s.endQueryEXT(s.TIME_ELAPSED_EXT)}collectGpuTimers(){const s=this.gpuTimers;return this.gpuTimers={},s}queryGpuTimers(s){const h={};for(const y in s){const w=s[y],M=this.context.extTimerQuery,k=M.getQueryObjectEXT(w.query,M.QUERY_RESULT_EXT)/1e6;M.deleteQueryEXT(w.query),h[y]=k}return h}translatePosMatrix(s,h,y,w,M){if(!y[0]&&!y[1])return s;const k=M?w==="map"?this.transform.angle:0:w==="viewport"?-this.transform.angle:0;if(k){const F=Math.sin(k),Z=Math.cos(k);y=[y[0]*Z-y[1]*F,y[0]*F+y[1]*Z]}const R=[M?y[0]:Ft(h,y[0],this.transform.zoom),M?y[1]:Ft(h,y[1],this.transform.zoom),0],A=new Float32Array(16);return c.translate(A,s,R),A}saveTileTexture(s){const h=this._tileTextures[s.size[0]];h?h.push(s):this._tileTextures[s.size[0]]=[s]}getTileTexture(s){const h=this._tileTextures[s];return h&&h.length>0?h.pop():null}isPatternMissing(s){if(!s)return!1;if(!s.from||!s.to)return!0;const h=this.imageManager.getPattern(s.from.toString()),y=this.imageManager.getPattern(s.to.toString());return!h||!y}useProgram(s,h){this.cache=this.cache||{};const y=s+(h?h.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[y]||(this.cache[y]=new vc(this.context,s,Ao[s],h,wc[s],this._showOverdrawInspector,this.style.terrain)),this.cache[y]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const s=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(s.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new q(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class Ll{constructor(s,h){this.points=s,this.planes=h}static fromInvProjectionMatrix(s,h,y){const w=Math.pow(2,y),M=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(R=>{const A=1/(R=c.transformMat4([],R,s))[3]/h*w;return c.mul$1(R,R,[A,A,1/R[3],A])}),k=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(R=>{const A=c.sub([],M[R[0]],M[R[1]]),F=c.sub([],M[R[2]],M[R[1]]),Z=c.normalize([],c.cross([],A,F)),Y=-c.dot(Z,M[R[1]]);return Z.concat(Y)});return new Ll(M,k)}}class Qi{constructor(s,h){this.min=s,this.max=h,this.center=c.scale$1([],c.add([],this.min,this.max),.5)}quadrant(s){const h=[s%2==0,s<2],y=c.clone$2(this.min),w=c.clone$2(this.max);for(let M=0;M<h.length;M++)y[M]=h[M]?this.min[M]:this.center[M],w[M]=h[M]?this.center[M]:this.max[M];return w[2]=this.max[2],new Qi(y,w)}distanceX(s){return Math.max(Math.min(this.max[0],s[0]),this.min[0])-s[0]}distanceY(s){return Math.max(Math.min(this.max[1],s[1]),this.min[1])-s[1]}intersects(s){const h=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let y=!0;for(let w=0;w<s.planes.length;w++){const M=s.planes[w];let k=0;for(let R=0;R<h.length;R++)c.dot$1(M,h[R])>=0&&k++;if(k===0)return 0;k!==h.length&&(y=!1)}if(y)return 2;for(let w=0;w<3;w++){let M=Number.MAX_VALUE,k=-Number.MAX_VALUE;for(let R=0;R<s.points.length;R++){const A=s.points[R][w]-this.min[w];M=Math.min(M,A),k=Math.max(k,A)}if(k<0||M>this.max[w]-this.min[w])return 0}return 1}}class Ps{constructor(s=0,h=0,y=0,w=0){if(isNaN(s)||s<0||isNaN(h)||h<0||isNaN(y)||y<0||isNaN(w)||w<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=s,this.bottom=h,this.left=y,this.right=w}interpolate(s,h,y){return h.top!=null&&s.top!=null&&(this.top=c.number(s.top,h.top,y)),h.bottom!=null&&s.bottom!=null&&(this.bottom=c.number(s.bottom,h.bottom,y)),h.left!=null&&s.left!=null&&(this.left=c.number(s.left,h.left,y)),h.right!=null&&s.right!=null&&(this.right=c.number(s.right,h.right,y)),this}getCenter(s,h){const y=c.clamp((this.left+s-this.right)/2,0,s),w=c.clamp((this.top+h-this.bottom)/2,0,h);return new c.pointGeometry(y,w)}equals(s){return this.top===s.top&&this.bottom===s.bottom&&this.left===s.left&&this.right===s.right}clone(){return new Ps(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Rc{constructor(s,h,y,w,M){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=M===void 0||!!M,this._minZoom=s||0,this._maxZoom=h||22,this._minPitch=y??0,this._maxPitch=w??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new c.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ps,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const s=new Rc(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return s.tileSize=this.tileSize,s.latRange=this.latRange,s.width=this.width,s.height=this.height,s._center=this._center,s._elevation=this._elevation,s.zoom=this.zoom,s.angle=this.angle,s._fov=this._fov,s._pitch=this._pitch,s._unmodified=this._unmodified,s._edgeInsets=this._edgeInsets.clone(),s._calcMatrices(),s}get minZoom(){return this._minZoom}set minZoom(s){this._minZoom!==s&&(this._minZoom=s,this.zoom=Math.max(this.zoom,s))}get maxZoom(){return this._maxZoom}set maxZoom(s){this._maxZoom!==s&&(this._maxZoom=s,this.zoom=Math.min(this.zoom,s))}get minPitch(){return this._minPitch}set minPitch(s){this._minPitch!==s&&(this._minPitch=s,this.pitch=Math.max(this.pitch,s))}get maxPitch(){return this._maxPitch}set maxPitch(s){this._maxPitch!==s&&(this._maxPitch=s,this.pitch=Math.min(this.pitch,s))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(s){s===void 0?s=!0:s===null&&(s=!1),this._renderWorldCopies=s}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new c.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(s){const h=-c.wrap(s,-180,180)*Math.PI/180;var y;this.angle!==h&&(this._unmodified=!1,this.angle=h,this._calcMatrices(),this.rotationMatrix=(y=new c.ARRAY_TYPE(4),c.ARRAY_TYPE!=Float32Array&&(y[1]=0,y[2]=0),y[0]=1,y[3]=1,y),function(w,M,k){var R=M[0],A=M[1],F=M[2],Z=M[3],Y=Math.sin(k),Q=Math.cos(k);w[0]=R*Q+F*Y,w[1]=A*Q+Z*Y,w[2]=R*-Y+F*Q,w[3]=A*-Y+Z*Q}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(s){const h=c.clamp(s,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==h&&(this._unmodified=!1,this._pitch=h,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(s){s=Math.max(.01,Math.min(60,s)),this._fov!==s&&(this._unmodified=!1,this._fov=s/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(s){const h=Math.min(Math.max(s,this.minZoom),this.maxZoom);this._zoom!==h&&(this._unmodified=!1,this._zoom=h,this.scale=this.zoomScale(h),this.tileZoom=Math.floor(h),this.zoomFraction=h-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(s){s.lat===this._center.lat&&s.lng===this._center.lng||(this._unmodified=!1,this._center=s,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(s){s!==this._elevation&&(this._elevation=s,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(s){this._edgeInsets.equals(s)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,s,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(s){return this._edgeInsets.equals(s)}interpolatePadding(s,h,y){this._unmodified=!1,this._edgeInsets.interpolate(s,h,y),this._constrain(),this._calcMatrices()}coveringZoomLevel(s){const h=(s.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/s.tileSize));return Math.max(0,h)}getVisibleUnwrappedCoordinates(s){const h=[new c.UnwrappedTileID(0,s)];if(this._renderWorldCopies){const y=this.pointCoordinate(new c.pointGeometry(0,0)),w=this.pointCoordinate(new c.pointGeometry(this.width,0)),M=this.pointCoordinate(new c.pointGeometry(this.width,this.height)),k=this.pointCoordinate(new c.pointGeometry(0,this.height)),R=Math.floor(Math.min(y.x,w.x,M.x,k.x)),A=Math.floor(Math.max(y.x,w.x,M.x,k.x)),F=1;for(let Z=R-F;Z<=A+F;Z++)Z!==0&&h.push(new c.UnwrappedTileID(Z,s))}return h}coveringTiles(s){var h,y;let w=this.coveringZoomLevel(s);const M=w;if(s.minzoom!==void 0&&w<s.minzoom)return[];s.maxzoom!==void 0&&w>s.maxzoom&&(w=s.maxzoom);const k=this.pointCoordinate(this.getCameraPoint()),R=c.MercatorCoordinate.fromLngLat(this.center),A=Math.pow(2,w),F=[A*k.x,A*k.y,0],Z=[A*R.x,A*R.y,0],Y=Ll.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,w);let Q=s.minzoom||0;!s.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(Q=w);const le=s.terrain?2/Math.min(this.tileSize,s.tileSize)*this.tileSize:3,se=ue=>({aabb:new Qi([ue*A,0,0],[(ue+1)*A,A,0]),zoom:0,x:0,y:0,wrap:ue,fullyVisible:!1}),ie=[],xe=[],De=w,Ie=s.reparseOverscaled?M:w;if(this._renderWorldCopies)for(let ue=1;ue<=3;ue++)ie.push(se(-ue)),ie.push(se(ue));for(ie.push(se(0));ie.length>0;){const ue=ie.pop(),Ve=ue.x,ze=ue.y;let Ge=ue.fullyVisible;if(!Ge){const Lt=ue.aabb.intersects(Y);if(Lt===0)continue;Ge=Lt===2}const rt=s.terrain?F:Z,gt=ue.aabb.distanceX(rt),Qe=ue.aabb.distanceY(rt),It=Math.max(Math.abs(gt),Math.abs(Qe)),St=le+(1<<De-ue.zoom)-2;if(ue.zoom===De||It>St&&ue.zoom>=Q){const Lt=De-ue.zoom,un=F[0]-.5-(Ve<<Lt),gn=F[1]-.5-(ze<<Lt);xe.push({tileID:new c.OverscaledTileID(ue.zoom===De?Ie:ue.zoom,ue.wrap,ue.zoom,Ve,ze),distanceSq:c.sqrLen([Z[0]-.5-Ve,Z[1]-.5-ze]),tileDistanceToCamera:Math.sqrt(un*un+gn*gn)})}else for(let Lt=0;Lt<4;Lt++){const un=(Ve<<1)+Lt%2,gn=(ze<<1)+(Lt>>1),Kt=ue.zoom+1;let Gn=ue.aabb.quadrant(Lt);if(s.terrain){const En=new c.OverscaledTileID(Kt,ue.wrap,Kt,un,gn),_n=s.terrain.getMinMaxElevation(En),wn=(h=_n.minElevation)!==null&&h!==void 0?h:this.elevation,Ln=(y=_n.maxElevation)!==null&&y!==void 0?y:this.elevation;Gn=new Qi([Gn.min[0],Gn.min[1],wn],[Gn.max[0],Gn.max[1],Ln])}ie.push({aabb:Gn,zoom:Kt,x:un,y:gn,wrap:ue.wrap,fullyVisible:Ge})}}return xe.sort((ue,Ve)=>ue.distanceSq-Ve.distanceSq).map(ue=>ue.tileID)}resize(s,h){this.width=s,this.height=h,this.pixelsToGLUnits=[2/s,-2/h],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(s){return Math.pow(2,s)}scaleZoom(s){return Math.log(s)/Math.LN2}project(s){const h=c.clamp(s.lat,-this.maxValidLatitude,this.maxValidLatitude);return new c.pointGeometry(c.mercatorXfromLng(s.lng)*this.worldSize,c.mercatorYfromLat(h)*this.worldSize)}unproject(s){return new c.MercatorCoordinate(s.x/this.worldSize,s.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(s){this.freezeElevation||(this.elevation=s?this.getElevation(this._center,s):0)}getElevation(s,h){const y=c.MercatorCoordinate.fromLngLat(s),w=(1<<this.tileZoom)*c.EXTENT,M=y.x*w,k=y.y*w,R=Math.floor(M/c.EXTENT),A=Math.floor(k/c.EXTENT),F=new c.OverscaledTileID(this.tileZoom,0,this.tileZoom,R,A);return h.getElevation(F,M%c.EXTENT,k%c.EXTENT,c.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(s){const h=this.pointLocation(this.centerPoint,s),y=this.getElevation(h,s);if(!(this.elevation-y))return;const w=this.getCameraPosition(),M=c.MercatorCoordinate.fromLngLat(w.lngLat,w.altitude),k=c.MercatorCoordinate.fromLngLat(h,y),R=M.x-k.x,A=M.y-k.y,F=M.z-k.z,Z=Math.sqrt(R*R+A*A+F*F),Y=this.scaleZoom(this.cameraToCenterDistance/Z/this.tileSize);this._elevation=y,this._center=h,this.zoom=Y}setLocationAtPoint(s,h){const y=this.pointCoordinate(h),w=this.pointCoordinate(this.centerPoint),M=this.locationCoordinate(s),k=new c.MercatorCoordinate(M.x-(y.x-w.x),M.y-(y.y-w.y));this.center=this.coordinateLocation(k),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(s,h){return h?this.coordinatePoint(this.locationCoordinate(s),this.getElevation(s,h),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(s))}pointLocation(s,h){return this.coordinateLocation(this.pointCoordinate(s,h))}locationCoordinate(s){return c.MercatorCoordinate.fromLngLat(s)}coordinateLocation(s){return s&&s.toLngLat()}pointCoordinate(s,h){if(h){const Q=h.pointCoordinate(s);if(Q!=null)return Q}const y=[s.x,s.y,0,1],w=[s.x,s.y,1,1];c.transformMat4(y,y,this.pixelMatrixInverse),c.transformMat4(w,w,this.pixelMatrixInverse);const M=y[3],k=w[3],R=y[1]/M,A=w[1]/k,F=y[2]/M,Z=w[2]/k,Y=F===Z?0:(0-F)/(Z-F);return new c.MercatorCoordinate(c.number(y[0]/M,w[0]/k,Y)/this.worldSize,c.number(R,A,Y)/this.worldSize)}coordinatePoint(s,h=0,y=this.pixelMatrix){const w=[s.x*this.worldSize,s.y*this.worldSize,h,1];return c.transformMat4(w,w,y),new c.pointGeometry(w[0]/w[3],w[1]/w[3])}getBounds(){const s=Math.max(0,this.height/2-this.getHorizon());return new c.LngLatBounds().extend(this.pointLocation(new c.pointGeometry(0,s))).extend(this.pointLocation(new c.pointGeometry(this.width,s))).extend(this.pointLocation(new c.pointGeometry(this.width,this.height))).extend(this.pointLocation(new c.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new c.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(s){s?(this.lngRange=[s.getWest(),s.getEast()],this.latRange=[s.getSouth(),s.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(s,h=!1){const y=s.key,w=h?this._alignedPosMatrixCache:this._posMatrixCache;if(w[y])return w[y];const M=s.canonical,k=this.worldSize/this.zoomScale(M.z),R=M.x+Math.pow(2,M.z)*s.wrap,A=c.identity(new Float64Array(16));return c.translate(A,A,[R*k,M.y*k,0]),c.scale(A,A,[k/c.EXTENT,k/c.EXTENT,1]),c.multiply(A,h?this.alignedProjMatrix:this.projMatrix,A),w[y]=new Float32Array(A),w[y]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let s,h,y,w,M=-90,k=90,R=-180,A=180;const F=this.size,Z=this._unmodified;if(this.latRange){const le=this.latRange;M=c.mercatorYfromLat(le[1])*this.worldSize,k=c.mercatorYfromLat(le[0])*this.worldSize,s=k-M<F.y?F.y/(k-M):0}if(this.lngRange){const le=this.lngRange;R=c.wrap(c.mercatorXfromLng(le[0])*this.worldSize,0,this.worldSize),A=c.wrap(c.mercatorXfromLng(le[1])*this.worldSize,0,this.worldSize),A<R&&(A+=this.worldSize),h=A-R<F.x?F.x/(A-R):0}const Y=this.point,Q=Math.max(h||0,s||0);if(Q)return this.center=this.unproject(new c.pointGeometry(h?(A+R)/2:Y.x,s?(k+M)/2:Y.y)),this.zoom+=this.scaleZoom(Q),this._unmodified=Z,void(this._constraining=!1);if(this.latRange){const le=Y.y,se=F.y/2;le-se<M&&(w=M+se),le+se>k&&(w=k-se)}if(this.lngRange){const le=(R+A)/2,se=c.wrap(Y.x,le-this.worldSize/2,le+this.worldSize/2),ie=F.x/2;se-ie<R&&(y=R+ie),se+ie>A&&(y=A-ie)}y===void 0&&w===void 0||(this.center=this.unproject(new c.pointGeometry(y!==void 0?y:Y.x,w!==void 0?w:Y.y)).wrap()),this._unmodified=Z,this._constraining=!1}_calcMatrices(){if(!this.height)return;const s=this.centerOffset,h=this.point.x,y=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=c.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let w=c.identity(new Float64Array(16));c.scale(w,w,[this.width/2,-this.height/2,1]),c.translate(w,w,[1,-1,0]),this.labelPlaneMatrix=w,w=c.identity(new Float64Array(16)),c.scale(w,w,[1,-1,1]),c.translate(w,w,[-1,-1,0]),c.scale(w,w,[2/this.width,2/this.height,1]),this.glCoordMatrix=w,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const M=Math.PI/2+this._pitch,k=this._fov*(.5+s.y/this.height),R=Math.sin(k)*this.cameraToSeaLevelDistance/Math.sin(c.clamp(Math.PI-M-k,.01,Math.PI-.01)),A=this.getHorizon(),F=2*Math.atan(A/this.cameraToCenterDistance)*(.5+s.y/(2*A)),Z=Math.sin(F)*this.cameraToSeaLevelDistance/Math.sin(c.clamp(Math.PI-M-F,.01,Math.PI-.01)),Y=Math.cos(Math.PI/2-this._pitch)*R+this.cameraToSeaLevelDistance,Q=Math.cos(Math.PI/2-this._pitch)*Z+this.cameraToSeaLevelDistance,le=1.01*Math.min(Y,Q),se=this.height/50;w=new Float64Array(16),c.perspective(w,this._fov,this.width/this.height,se,le),w[8]=2*-s.x/this.width,w[9]=2*s.y/this.height,c.scale(w,w,[1,-1,1]),c.translate(w,w,[0,0,-this.cameraToCenterDistance]),c.rotateX(w,w,this._pitch),c.rotateZ(w,w,this.angle),c.translate(w,w,[-h,-y,0]),this.mercatorMatrix=c.scale([],w,[this.worldSize,this.worldSize,this.worldSize]),c.scale(w,w,[1,1,this._pixelPerMeter]),this.pixelMatrix=c.multiply(new Float64Array(16),this.labelPlaneMatrix,w),c.translate(w,w,[0,0,-this.elevation]),this.projMatrix=w,this.invProjMatrix=c.invert([],w),this.pixelMatrix3D=c.multiply(new Float64Array(16),this.labelPlaneMatrix,w);const ie=this.width%2/2,xe=this.height%2/2,De=Math.cos(this.angle),Ie=Math.sin(this.angle),ue=h-Math.round(h)+De*ie+Ie*xe,Ve=y-Math.round(y)+De*xe+Ie*ie,ze=new Float64Array(w);if(c.translate(ze,ze,[ue>.5?ue-1:ue,Ve>.5?Ve-1:Ve,0]),this.alignedProjMatrix=ze,w=c.invert(new Float64Array(16),this.pixelMatrix),!w)throw new Error("failed to invert matrix");this.pixelMatrixInverse=w,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const s=this.pointCoordinate(new c.pointGeometry(0,0)),h=[s.x*this.worldSize,s.y*this.worldSize,0,1];return c.transformMat4(h,h,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const s=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.pointGeometry(0,s))}getCameraQueryGeometry(s){const h=this.getCameraPoint();if(s.length===1)return[s[0],h];{let y=h.x,w=h.y,M=h.x,k=h.y;for(const R of s)y=Math.min(y,R.x),w=Math.min(w,R.y),M=Math.max(M,R.x),k=Math.max(k,R.y);return[new c.pointGeometry(y,w),new c.pointGeometry(M,w),new c.pointGeometry(M,k),new c.pointGeometry(y,k),new c.pointGeometry(y,w)]}}}class Tl{constructor(s){this._hashName=s&&encodeURIComponent(s),c.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(h,y){let w=!1,M=null;const k=()=>{M=null,w&&(h(),M=setTimeout(k,300),w=!1)};return()=>(w=!0,M||k(),M)}(this._updateHashUnthrottled.bind(this))}addTo(s){return this._map=s,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(s){const h=this._map.getCenter(),y=Math.round(100*this._map.getZoom())/100,w=Math.ceil((y*Math.LN2+Math.log(512/360/.5))/Math.LN10),M=Math.pow(10,w),k=Math.round(h.lng*M)/M,R=Math.round(h.lat*M)/M,A=this._map.getBearing(),F=this._map.getPitch();let Z="";if(Z+=s?`/${k}/${R}/${y}`:`${y}/${R}/${k}`,(A||F)&&(Z+="/"+Math.round(10*A)/10),F&&(Z+=`/${Math.round(F)}`),this._hashName){const Y=this._hashName;let Q=!1;const le=window.location.hash.slice(1).split("&").map(se=>{const ie=se.split("=")[0];return ie===Y?(Q=!0,`${ie}=${Z}`):se}).filter(se=>se);return Q||le.push(`${Y}=${Z}`),`#${le.join("&")}`}return`#${Z}`}_getCurrentHash(){const s=window.location.hash.replace("#","");if(this._hashName){let h;return s.split("&").map(y=>y.split("=")).forEach(y=>{y[0]===this._hashName&&(h=y)}),(h&&h[1]||"").split("/")}return s.split("/")}_onHashChange(){const s=this._getCurrentHash();if(s.length>=3&&!s.some(h=>isNaN(h))){const h=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(s[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+s[2],+s[1]],zoom:+s[0],bearing:h,pitch:+(s[4]||0)}),!0}return!1}_updateHashUnthrottled(){const s=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,s)}catch{}}}const kl={linearity:.3,easing:c.bezier(0,0,.3,1)},Bu=c.extend({deceleration:2500,maxSpeed:1400},kl),Ac=c.extend({deceleration:20,maxSpeed:1400},kl),Ks=c.extend({deceleration:1e3,maxSpeed:360},kl),$u=c.extend({deceleration:1e3,maxSpeed:90},kl);class Vu{constructor(s){this._map=s,this.clear()}clear(){this._inertiaBuffer=[]}record(s){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:c.exported.now(),settings:s})}_drainInertiaBuffer(){const s=this._inertiaBuffer,h=c.exported.now();for(;s.length>0&&h-s[0].time>160;)s.shift()}_onMoveEnd(s){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const h={zoom:0,bearing:0,pitch:0,pan:new c.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:M}of this._inertiaBuffer)h.zoom+=M.zoomDelta||0,h.bearing+=M.bearingDelta||0,h.pitch+=M.pitchDelta||0,M.panDelta&&h.pan._add(M.panDelta),M.around&&(h.around=M.around),M.pinchAround&&(h.pinchAround=M.pinchAround);const y=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,w={};if(h.pan.mag()){const M=Pl(h.pan.mag(),y,c.extend({},Bu,s||{}));w.offset=h.pan.mult(M.amount/h.pan.mag()),w.center=this._map.transform.center,Ea(w,M)}if(h.zoom){const M=Pl(h.zoom,y,Ac);w.zoom=this._map.transform.zoom+M.amount,Ea(w,M)}if(h.bearing){const M=Pl(h.bearing,y,Ks);w.bearing=this._map.transform.bearing+c.clamp(M.amount,-179,179),Ea(w,M)}if(h.pitch){const M=Pl(h.pitch,y,$u);w.pitch=this._map.transform.pitch+M.amount,Ea(w,M)}if(w.zoom||w.bearing){const M=h.pinchAround===void 0?h.around:h.pinchAround;w.around=M?this._map.unproject(M):this._map.getCenter()}return this.clear(),c.extend(w,{noMoveStart:!0})}}function Ea(_,s){(!_.duration||_.duration<s.duration)&&(_.duration=s.duration,_.easing=s.easing)}function Pl(_,s,h){const{maxSpeed:y,linearity:w,deceleration:M}=h,k=c.clamp(_*w/(s/1e3),-y,y),R=Math.abs(k)/(M*w);return{easing:h.easing,duration:1e3*R,amount:k*(R/2)}}class ki extends c.Event{constructor(s,h,y,w={}){const M=N.mousePos(h.getCanvasContainer(),y),k=h.unproject(M);super(s,c.extend({point:M,lngLat:k,originalEvent:y},w)),this._defaultPrevented=!1,this.target=h}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class si extends c.Event{constructor(s,h,y){const w=s==="touchend"?y.changedTouches:y.touches,M=N.touchPos(h.getCanvasContainer(),w),k=M.map(A=>h.unproject(A)),R=M.reduce((A,F,Z,Y)=>A.add(F.div(Y.length)),new c.pointGeometry(0,0));super(s,{points:M,point:R,lngLats:k,lngLat:h.unproject(R),originalEvent:y}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class ih extends c.Event{constructor(s,h,y){super(s,{originalEvent:y}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Qs{constructor(s,h){this._map=s,this._clickTolerance=h.clickTolerance}reset(){delete this._mousedownPos}wheel(s){return this._firePreventable(new ih(s.type,this._map,s))}mousedown(s,h){return this._mousedownPos=h,this._firePreventable(new ki(s.type,this._map,s))}mouseup(s){this._map.fire(new ki(s.type,this._map,s))}click(s,h){this._mousedownPos&&this._mousedownPos.dist(h)>=this._clickTolerance||this._map.fire(new ki(s.type,this._map,s))}dblclick(s){return this._firePreventable(new ki(s.type,this._map,s))}mouseover(s){this._map.fire(new ki(s.type,this._map,s))}mouseout(s){this._map.fire(new ki(s.type,this._map,s))}touchstart(s){return this._firePreventable(new si(s.type,this._map,s))}touchmove(s){this._map.fire(new si(s.type,this._map,s))}touchend(s){this._map.fire(new si(s.type,this._map,s))}touchcancel(s){this._map.fire(new si(s.type,this._map,s))}_firePreventable(s){if(this._map.fire(s),s.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class zi{constructor(s){this._map=s}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(s){this._map.fire(new ki(s.type,this._map,s))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ki("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(s){this._delayContextMenu?this._contextMenuEvent=s:this._ignoreContextMenu||this._map.fire(new ki(s.type,this._map,s)),this._map.listens("contextmenu")&&s.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ji{constructor(s,h){this._map=s,this._el=s.getCanvasContainer(),this._container=s.getContainer(),this._clickTolerance=h.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(s,h){this.isEnabled()&&s.shiftKey&&s.button===0&&(N.disableDrag(),this._startPos=this._lastPos=h,this._active=!0)}mousemoveWindow(s,h){if(!this._active)return;const y=h;if(this._lastPos.equals(y)||!this._box&&y.dist(this._startPos)<this._clickTolerance)return;const w=this._startPos;this._lastPos=y,this._box||(this._box=N.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",s));const M=Math.min(w.x,y.x),k=Math.max(w.x,y.x),R=Math.min(w.y,y.y),A=Math.max(w.y,y.y);N.setTransform(this._box,`translate(${M}px,${R}px)`),this._box.style.width=k-M+"px",this._box.style.height=A-R+"px"}mouseupWindow(s,h){if(!this._active||s.button!==0)return;const y=this._startPos,w=h;if(this.reset(),N.suppressClick(),y.x!==w.x||y.y!==w.y)return this._map.fire(new c.Event("boxzoomend",{originalEvent:s})),{cameraAnimation:M=>M.fitScreenCoordinates(y,w,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",s)}keydown(s){this._active&&s.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",s))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(N.remove(this._box),this._box=null),N.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(s,h){return this._map.fire(new c.Event(s,{originalEvent:h}))}}function Js(_,s){if(_.length!==s.length)throw new Error(`The number of touches and points are not equal - touches ${_.length}, points ${s.length}`);const h={};for(let y=0;y<_.length;y++)h[_[y].identifier]=s[y];return h}class q1{constructor(s){this.reset(),this.numTouches=s.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(s,h,y){(this.centroid||y.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=s.timeStamp),y.length===this.numTouches&&(this.centroid=function(w){const M=new c.pointGeometry(0,0);for(const k of w)M._add(k);return M.div(w.length)}(h),this.touches=Js(y,h)))}touchmove(s,h,y){if(this.aborted||!this.centroid)return;const w=Js(y,h);for(const M in this.touches){const k=this.touches[M],R=w[M];(!R||R.dist(k)>30)&&(this.aborted=!0)}}touchend(s,h,y){if((!this.centroid||s.timeStamp-this.startTime>500)&&(this.aborted=!0),y.length===0){const w=!this.aborted&&this.centroid;if(this.reset(),w)return w}}}class jc{constructor(s){this.singleTap=new q1(s),this.numTaps=s.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(s,h,y){this.singleTap.touchstart(s,h,y)}touchmove(s,h,y){this.singleTap.touchmove(s,h,y)}touchend(s,h,y){const w=this.singleTap.touchend(s,h,y);if(w){const M=s.timeStamp-this.lastTime<500,k=!this.lastTap||this.lastTap.dist(w)<30;if(M&&k||this.reset(),this.count++,this.lastTime=s.timeStamp,this.lastTap=w,this.count===this.numTaps)return this.reset(),w}}}class W1{constructor(){this._zoomIn=new jc({numTouches:1,numTaps:2}),this._zoomOut=new jc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(s,h,y){this._zoomIn.touchstart(s,h,y),this._zoomOut.touchstart(s,h,y)}touchmove(s,h,y){this._zoomIn.touchmove(s,h,y),this._zoomOut.touchmove(s,h,y)}touchend(s,h,y){const w=this._zoomIn.touchend(s,h,y),M=this._zoomOut.touchend(s,h,y);return w?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:k.getZoom()+1,around:k.unproject(w)},{originalEvent:s})}):M?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:k.getZoom()-1,around:k.unproject(M)},{originalEvent:s})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Oc={0:1,2:2};class Wo{constructor(s){this.reset(),this._clickTolerance=s.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(s,h){return!1}_move(s,h){return{}}mousedown(s,h){if(this._lastPoint)return;const y=N.mouseButton(s);this._correctButton(s,y)&&(this._lastPoint=h,this._eventButton=y)}mousemoveWindow(s,h){const y=this._lastPoint;if(y){if(s.preventDefault(),function(w,M){const k=Oc[M];return w.buttons===void 0||(w.buttons&k)!==k}(s,this._eventButton))this.reset();else if(this._moved||!(h.dist(y)<this._clickTolerance))return this._moved=!0,this._lastPoint=h,this._move(y,h)}}mouseupWindow(s){this._lastPoint&&N.mouseButton(s)===this._eventButton&&(this._moved&&N.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class eo extends Wo{mousedown(s,h){super.mousedown(s,h),this._lastPoint&&(this._active=!0)}_correctButton(s,h){return h===0&&!s.ctrlKey}_move(s,h){return{around:h,panDelta:h.sub(s)}}}class Nt extends Wo{_correctButton(s,h){return h===0&&s.ctrlKey||h===2}_move(s,h){const y=.8*(h.x-s.x);if(y)return this._active=!0,{bearingDelta:y}}contextmenu(s){s.preventDefault()}}class Dl extends Wo{_correctButton(s,h){return h===0&&s.ctrlKey||h===2}_move(s,h){const y=-.5*(h.y-s.y);if(y)return this._active=!0,{pitchDelta:y}}contextmenu(s){s.preventDefault()}}class Ds{constructor(s,h){this._minTouches=s.cooperativeGestures?2:1,this._clickTolerance=s.clickTolerance||1,this._map=h,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new c.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(s,h,y){return this._calculateTransform(s,h,y)}touchmove(s,h,y){if(this._map._cooperativeGestures&&(this._minTouches===2&&y.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(s,!1,y.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(y.length<this._minTouches))return s.preventDefault(),this._calculateTransform(s,h,y)}touchend(s,h,y){this._calculateTransform(s,h,y),this._active&&y.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(s,h,y){y.length>0&&(this._active=!0);const w=Js(y,h),M=new c.pointGeometry(0,0),k=new c.pointGeometry(0,0);let R=0;for(const F in w){const Z=w[F],Y=this._touches[F];Y&&(M._add(Z),k._add(Z.sub(Y)),R++,w[F]=Z)}if(this._touches=w,R<this._minTouches||!k.mag())return;const A=k.div(R);return this._sum._add(A),this._sum.mag()<this._clickTolerance?void 0:{around:M.div(R),panDelta:A}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Is{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(s){}_move(s,h,y){return{}}touchstart(s,h,y){this._firstTwoTouches||y.length<2||(this._firstTwoTouches=[y[0].identifier,y[1].identifier],this._start([h[0],h[1]]))}touchmove(s,h,y){if(!this._firstTwoTouches)return;s.preventDefault();const[w,M]=this._firstTwoTouches,k=La(y,h,w),R=La(y,h,M);if(!k||!R)return;const A=this._aroundCenter?null:k.add(R).div(2);return this._move([k,R],A,s)}touchend(s,h,y){if(!this._firstTwoTouches)return;const[w,M]=this._firstTwoTouches,k=La(y,h,w),R=La(y,h,M);k&&R||(this._active&&N.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(s){this._enabled=!0,this._aroundCenter=!!s&&s.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function La(_,s,h){for(let y=0;y<_.length;y++)if(_[y].identifier===h)return s[y]}function Mt(_,s){return Math.log(_/s)/Math.LN2}class to extends Is{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(s){this._startDistance=this._distance=s[0].dist(s[1])}_move(s,h){const y=this._distance;if(this._distance=s[0].dist(s[1]),this._active||!(Math.abs(Mt(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Mt(this._distance,y),pinchAround:h}}}function zc(_,s){return 180*_.angleWith(s)/Math.PI}class G1 extends Is{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(s){this._startVector=this._vector=s[0].sub(s[1]),this._minDiameter=s[0].dist(s[1])}_move(s,h){const y=this._vector;if(this._vector=s[0].sub(s[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:zc(this._vector,y),pinchAround:h}}_isBelowThreshold(s){this._minDiameter=Math.min(this._minDiameter,s.mag());const h=25/(Math.PI*this._minDiameter)*360,y=zc(s,this._startVector);return Math.abs(y)<h}}function no(_){return Math.abs(_.y)>Math.abs(_.x)}class Hu extends Is{constructor(s){super(),this._map=s}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(s,h,y){super.touchstart(s,h,y),this._currentTouchCount=y.length}_start(s){this._lastPoints=s,no(s[0].sub(s[1]))&&(this._valid=!1)}_move(s,h,y){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const w=s[0].sub(this._lastPoints[0]),M=s[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(w,M,y.timeStamp),this._valid?(this._lastPoints=s,this._active=!0,{pitchDelta:(w.y+M.y)/2*-.5}):void 0}gestureBeginsVertically(s,h,y){if(this._valid!==void 0)return this._valid;const w=s.mag()>=2,M=h.mag()>=2;if(!w&&!M)return;if(!w||!M)return this._firstMove===void 0&&(this._firstMove=y),y-this._firstMove<100&&void 0;const k=s.y>0==h.y>0;return no(s)&&no(h)&&k}}const Uu={panStep:100,bearingStep:15,pitchStep:10};class Y1{constructor(){const s=Uu;this._panStep=s.panStep,this._bearingStep=s.bearingStep,this._pitchStep=s.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(s){if(s.altKey||s.ctrlKey||s.metaKey)return;let h=0,y=0,w=0,M=0,k=0;switch(s.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:s.shiftKey?y=-1:(s.preventDefault(),M=-1);break;case 39:s.shiftKey?y=1:(s.preventDefault(),M=1);break;case 38:s.shiftKey?w=1:(s.preventDefault(),k=-1);break;case 40:s.shiftKey?w=-1:(s.preventDefault(),k=1);break;default:return}return this._rotationDisabled&&(y=0,w=0),{cameraAnimation:R=>{const A=R.getZoom();R.easeTo({duration:300,easeId:"keyboardHandler",easing:X1,zoom:h?Math.round(A)+h*(s.shiftKey?2:1):A,bearing:R.getBearing()+y*this._bearingStep,pitch:R.getPitch()+w*this._pitchStep,offset:[-M*this._panStep,-k*this._panStep],center:R.getCenter()},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function X1(_){return _*(2-_)}const Il=4.000244140625;class Fc{constructor(s,h){this._map=s,this._el=s.getCanvasContainer(),this._handler=h,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,c.bindAll(["_onTimeout"],this)}setZoomRate(s){this._defaultZoomRate=s}setWheelZoomRate(s){this._wheelZoomRate=s}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(s){this.isEnabled()||(this._enabled=!0,this._aroundCenter=s&&s.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(s){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;s.preventDefault()}let h=s.deltaMode===WheelEvent.DOM_DELTA_LINE?40*s.deltaY:s.deltaY;const y=c.exported.now(),w=y-(this._lastWheelEventTime||0);this._lastWheelEventTime=y,h!==0&&h%Il==0?this._type="wheel":h!==0&&Math.abs(h)<4?this._type="trackpad":w>400?(this._type=null,this._lastValue=h,this._timeout=setTimeout(this._onTimeout,40,s)):this._type||(this._type=Math.abs(w*h)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,h+=this._lastValue)),s.shiftKey&&h&&(h/=4),this._type&&(this._lastWheelEvent=s,this._delta-=h,this._active||this._start(s)),s.preventDefault()}_onTimeout(s){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(s)}_start(s){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const h=N.mousePos(this._el,s);this._around=c.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(h)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const s=this._map.transform;if(this._delta!==0){const R=this._type==="wheel"&&Math.abs(this._delta)>Il?this._wheelZoomRate:this._defaultZoomRate;let A=2/(1+Math.exp(-Math.abs(this._delta*R)));this._delta<0&&A!==0&&(A=1/A);const F=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):s.scale;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(F*A))),this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const h=typeof this._targetZoom=="number"?this._targetZoom:s.zoom,y=this._startZoom,w=this._easing;let M,k=!1;if(this._type==="wheel"&&y&&w){const R=Math.min((c.exported.now()-this._lastWheelEventTime)/200,1),A=w(R);M=c.number(y,h,A),R<1?this._frameId||(this._frameId=!0):k=!0}else M=h,k=!0;return this._active=!0,k&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!k,zoomDelta:M-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(s){let h=c.ease;if(this._prevEase){const y=this._prevEase,w=(c.exported.now()-y.start)/y.duration,M=y.easing(w+.01)-y.easing(w),k=.27/Math.sqrt(M*M+1e-4)*.01,R=Math.sqrt(.0729-k*k);h=c.bezier(k,R,.25,1)}return this._prevEase={start:c.exported.now(),duration:s,easing:h},h}reset(){this._active=!1}}class gs{constructor(s,h){this._clickZoom=s,this._tapZoom=h}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Nl{constructor(){this.reset()}reset(){this._active=!1}dblclick(s,h){return s.preventDefault(),{cameraAnimation:y=>{y.easeTo({duration:300,zoom:y.getZoom()+(s.shiftKey?-1:1),around:y.unproject(h)},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class oi{constructor(){this._tap=new jc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(s,h,y){this._swipePoint||(this._tapTime&&s.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?y.length>0&&(this._swipePoint=h[0],this._swipeTouch=y[0].identifier):this._tap.touchstart(s,h,y))}touchmove(s,h,y){if(this._tapTime){if(this._swipePoint){if(y[0].identifier!==this._swipeTouch)return;const w=h[0],M=w.y-this._swipePoint.y;return this._swipePoint=w,s.preventDefault(),this._active=!0,{zoomDelta:M/128}}}else this._tap.touchmove(s,h,y)}touchend(s,h,y){this._tapTime?this._swipePoint&&y.length===0&&this.reset():this._tap.touchend(s,h,y)&&(this._tapTime=s.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ro{constructor(s,h,y){this._el=s,this._mousePan=h,this._touchPan=y}enable(s){this._inertiaOptions=s||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class K1{constructor(s,h,y){this._pitchWithRotate=s.pitchWithRotate,this._mouseRotate=h,this._mousePitch=y}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Go{constructor(s,h,y,w){this._el=s,this._touchZoom=h,this._touchRotate=y,this._tapDragZoom=w,this._rotationDisabled=!1,this._enabled=!0}enable(s){this._touchZoom.enable(s),this._rotationDisabled||this._touchRotate.enable(s),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ta=_=>_.zoom||_.drag||_.pitch||_.rotate;class Bc extends c.Event{}function Rl(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta}class An{constructor(s,h){this._map=s,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Vu(s),this._bearingSnap=h.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(h),c.bindAll(["handleEvent","handleWindowEvent"],this);const y=this._el;this._listeners=[[y,"touchstart",{passive:!0}],[y,"touchmove",{passive:!1}],[y,"touchend",void 0],[y,"touchcancel",void 0],[y,"mousedown",void 0],[y,"mousemove",void 0],[y,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[y,"mouseover",void 0],[y,"mouseout",void 0],[y,"dblclick",void 0],[y,"click",void 0],[y,"keydown",{capture:!1}],[y,"keyup",void 0],[y,"wheel",{passive:!1}],[y,"contextmenu",void 0],[window,"blur",void 0]];for(const[w,M,k]of this._listeners)N.addEventListener(w,M,w===document?this.handleWindowEvent:this.handleEvent,k)}destroy(){for(const[s,h,y]of this._listeners)N.removeEventListener(s,h,s===document?this.handleWindowEvent:this.handleEvent,y)}_addDefaultHandlers(s){const h=this._map,y=h.getCanvasContainer();this._add("mapEvent",new Qs(h,s));const w=h.boxZoom=new Ji(h,s);this._add("boxZoom",w);const M=new W1,k=new Nl;h.doubleClickZoom=new gs(k,M),this._add("tapZoom",M),this._add("clickZoom",k);const R=new oi;this._add("tapDragZoom",R);const A=h.touchPitch=new Hu(h);this._add("touchPitch",A);const F=new Nt(s),Z=new Dl(s);h.dragRotate=new K1(s,F,Z),this._add("mouseRotate",F,["mousePitch"]),this._add("mousePitch",Z,["mouseRotate"]);const Y=new eo(s),Q=new Ds(s,h);h.dragPan=new ro(y,Y,Q),this._add("mousePan",Y),this._add("touchPan",Q,["touchZoom","touchRotate"]);const le=new G1,se=new to;h.touchZoomRotate=new Go(y,se,le,R),this._add("touchRotate",le,["touchPan","touchZoom"]),this._add("touchZoom",se,["touchPan","touchRotate"]);const ie=h.scrollZoom=new Fc(h,this);this._add("scrollZoom",ie,["mousePan"]);const xe=h.keyboard=new Y1;this._add("keyboard",xe),this._add("blockableMapEvent",new zi(h));for(const De of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])s.interactive&&s[De]&&h[De].enable(s[De])}_add(s,h,y){this._handlers.push({handlerName:s,handler:h,allowed:y}),this._handlersById[s]=h}stop(s){if(!this._updatingCamera){for(const{handler:h}of this._handlers)h.reset();this._inertia.clear(),this._fireEvents({},{},s),this._changes=[]}}isActive(){for(const{handler:s}of this._handlers)if(s.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ta(this._eventsInProgress)||this.isZooming()}_blockedByActive(s,h,y){for(const w in s)if(w!==y&&(!h||h.indexOf(w)<0))return!0;return!1}handleWindowEvent(s){this.handleEvent(s,`${s.type}Window`)}_getMapTouches(s){const h=[];for(const y of s)this._el.contains(y.target)&&h.push(y);return h}handleEvent(s,h){if(s.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const y=s.type==="renderFrame"?void 0:s,w={needsRenderFrame:!1},M={},k={},R=s.touches,A=R?this._getMapTouches(R):void 0,F=A?N.touchPos(this._el,A):N.mousePos(this._el,s);for(const{handlerName:Q,handler:le,allowed:se}of this._handlers){if(!le.isEnabled())continue;let ie;this._blockedByActive(k,se,Q)?le.reset():le[h||s.type]&&(ie=le[h||s.type](s,F,A),this.mergeHandlerResult(w,M,ie,Q,y),ie&&ie.needsRenderFrame&&this._triggerRenderFrame()),(ie||le.isActive())&&(k[Q]=le)}const Z={};for(const Q in this._previousActiveHandlers)k[Q]||(Z[Q]=y);this._previousActiveHandlers=k,(Object.keys(Z).length||Rl(w))&&(this._changes.push([w,M,Z]),this._triggerRenderFrame()),(Object.keys(k).length||Rl(w))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Y}=w;Y&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Y(this._map))}mergeHandlerResult(s,h,y,w,M){if(!y)return;c.extend(s,y);const k={handlerName:w,originalEvent:y.originalEvent||M};y.zoomDelta!==void 0&&(h.zoom=k),y.panDelta!==void 0&&(h.drag=k),y.pitchDelta!==void 0&&(h.pitch=k),y.bearingDelta!==void 0&&(h.rotate=k)}_applyChanges(){const s={},h={},y={};for(const[w,M,k]of this._changes)w.panDelta&&(s.panDelta=(s.panDelta||new c.pointGeometry(0,0))._add(w.panDelta)),w.zoomDelta&&(s.zoomDelta=(s.zoomDelta||0)+w.zoomDelta),w.bearingDelta&&(s.bearingDelta=(s.bearingDelta||0)+w.bearingDelta),w.pitchDelta&&(s.pitchDelta=(s.pitchDelta||0)+w.pitchDelta),w.around!==void 0&&(s.around=w.around),w.pinchAround!==void 0&&(s.pinchAround=w.pinchAround),w.noInertia&&(s.noInertia=w.noInertia),c.extend(h,M),c.extend(y,k);this._updateMapTransform(s,h,y),this._changes=[]}_updateMapTransform(s,h,y){const w=this._map,M=w.transform,k=w.style&&w.style.terrain;if(!(Rl(s)||k&&this._drag))return this._fireEvents(h,y,!0);let{panDelta:R,zoomDelta:A,bearingDelta:F,pitchDelta:Z,around:Y,pinchAround:Q}=s;Q!==void 0&&(Y=Q),w._stop(!0),Y=Y||w.transform.centerPoint;const le=M.pointLocation(R?Y.sub(R):Y);F&&(M.bearing+=F),Z&&(M.pitch+=Z),A&&(M.zoom+=A),k?h.drag&&!this._drag?(this._drag={center:M.centerPoint,lngLat:M.pointLocation(Y),point:Y,handlerName:h.drag.handlerName},w.fire(new c.Event("freezeElevation",{freeze:!0}))):this._drag&&y[this._drag.handlerName]?(w.fire(new c.Event("freezeElevation",{freeze:!1})),this._drag=null):h.drag&&this._drag&&(M.center=M.pointLocation(M.centerPoint.sub(R))):M.setLocationAtPoint(le,Y),this._map._update(),s.noInertia||this._inertia.record(s),this._fireEvents(h,y,!0)}_fireEvents(s,h,y){const w=Ta(this._eventsInProgress),M=Ta(s),k={};for(const Z in s){const{originalEvent:Y}=s[Z];this._eventsInProgress[Z]||(k[`${Z}start`]=Y),this._eventsInProgress[Z]=s[Z]}!w&&M&&this._fireEvent("movestart",M.originalEvent);for(const Z in k)this._fireEvent(Z,k[Z]);M&&this._fireEvent("move",M.originalEvent);for(const Z in s){const{originalEvent:Y}=s[Z];this._fireEvent(Z,Y)}const R={};let A;for(const Z in this._eventsInProgress){const{handlerName:Y,originalEvent:Q}=this._eventsInProgress[Z];this._handlersById[Y].isActive()||(delete this._eventsInProgress[Z],A=h[Y]||Q,R[`${Z}end`]=A)}for(const Z in R)this._fireEvent(Z,R[Z]);const F=Ta(this._eventsInProgress);if(y&&(w||M)&&!F){this._updatingCamera=!0;const Z=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Y=Q=>Q!==0&&-this._bearingSnap<Q&&Q<this._bearingSnap;Z?(Y(Z.bearing||this._map.getBearing())&&(Z.bearing=0),this._map.easeTo(Z,{originalEvent:A})):(this._map.fire(new c.Event("moveend",{originalEvent:A})),Y(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(s,h){this._map.fire(new c.Event(s,h?{originalEvent:h}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(s=>{delete this._frameId,this.handleEvent(new Bc("renderFrame",{timeStamp:s})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const nr={extend:(_,...s)=>c.extend(_,...s),run(_){_()},logToElement(_,s=!1,h="log"){const y=window.document.getElementById(h);y&&(s&&(y.innerHTML=""),y.innerHTML+=`<br>${_}`)}};class Yo extends c.Evented{constructor(s,h){super(),this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=h.bearingSnap,c.bindAll(["_renderFrameCallback"],this)}getCenter(){return new c.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(s,h){return this.jumpTo({center:s},h)}panBy(s,h,y){return s=c.pointGeometry.convert(s).mult(-1),this.panTo(this.transform.center,c.extend({offset:s},h),y)}panTo(s,h,y){return this.easeTo(c.extend({center:s},h),y)}getZoom(){return this.transform.zoom}setZoom(s,h){return this.jumpTo({zoom:s},h),this}zoomTo(s,h,y){return this.easeTo(c.extend({zoom:s},h),y)}zoomIn(s,h){return this.zoomTo(this.getZoom()+1,s,h),this}zoomOut(s,h){return this.zoomTo(this.getZoom()-1,s,h),this}getBearing(){return this.transform.bearing}setBearing(s,h){return this.jumpTo({bearing:s},h),this}getPadding(){return this.transform.padding}setPadding(s,h){return this.jumpTo({padding:s},h),this}rotateTo(s,h,y){return this.easeTo(c.extend({bearing:s},h),y)}resetNorth(s,h){return this.rotateTo(0,c.extend({duration:1e3},s),h),this}resetNorthPitch(s,h){return this.easeTo(c.extend({bearing:0,pitch:0,duration:1e3},s),h),this}snapToNorth(s,h){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(s,h):this}getPitch(){return this.transform.pitch}setPitch(s,h){return this.jumpTo({pitch:s},h),this}cameraForBounds(s,h){s=c.LngLatBounds.convert(s);const y=h&&h.bearing||0;return this._cameraForBoxAndBearing(s.getNorthWest(),s.getSouthEast(),y,h)}_cameraForBoxAndBearing(s,h,y,w){const M={top:0,bottom:0,right:0,left:0};if(typeof(w=c.extend({padding:M,offset:[0,0],maxZoom:this.transform.maxZoom},w)).padding=="number"){const ze=w.padding;w.padding={top:ze,bottom:ze,right:ze,left:ze}}w.padding=c.extend(M,w.padding);const k=this.transform,R=k.padding,A=k.project(c.LngLat.convert(s)),F=k.project(c.LngLat.convert(h)),Z=A.rotate(-y*Math.PI/180),Y=F.rotate(-y*Math.PI/180),Q=new c.pointGeometry(Math.max(Z.x,Y.x),Math.max(Z.y,Y.y)),le=new c.pointGeometry(Math.min(Z.x,Y.x),Math.min(Z.y,Y.y)),se=Q.sub(le),ie=(k.width-(R.left+R.right+w.padding.left+w.padding.right))/se.x,xe=(k.height-(R.top+R.bottom+w.padding.top+w.padding.bottom))/se.y;if(xe<0||ie<0)return void c.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const De=Math.min(k.scaleZoom(k.scale*Math.min(ie,xe)),w.maxZoom),Ie=c.pointGeometry.convert(w.offset),ue=new c.pointGeometry((w.padding.left-w.padding.right)/2,(w.padding.top-w.padding.bottom)/2).rotate(y*Math.PI/180),Ve=Ie.add(ue).mult(k.scale/k.zoomScale(De));return{center:k.unproject(A.add(F).div(2).sub(Ve)),zoom:De,bearing:y}}fitBounds(s,h,y){return this._fitInternal(this.cameraForBounds(s,h),h,y)}fitScreenCoordinates(s,h,y,w,M){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(c.pointGeometry.convert(s)),this.transform.pointLocation(c.pointGeometry.convert(h)),y,w),w,M)}_fitInternal(s,h,y){return s?(delete(h=c.extend(s,h)).padding,h.linear?this.easeTo(h,y):this.flyTo(h,y)):this}jumpTo(s,h){this.stop();const y=this.transform;let w=!1,M=!1,k=!1;return"zoom"in s&&y.zoom!==+s.zoom&&(w=!0,y.zoom=+s.zoom),s.center!==void 0&&(y.center=c.LngLat.convert(s.center)),"bearing"in s&&y.bearing!==+s.bearing&&(M=!0,y.bearing=+s.bearing),"pitch"in s&&y.pitch!==+s.pitch&&(k=!0,y.pitch=+s.pitch),s.padding==null||y.isPaddingEqual(s.padding)||(y.padding=s.padding),this.fire(new c.Event("movestart",h)).fire(new c.Event("move",h)),w&&this.fire(new c.Event("zoomstart",h)).fire(new c.Event("zoom",h)).fire(new c.Event("zoomend",h)),M&&this.fire(new c.Event("rotatestart",h)).fire(new c.Event("rotate",h)).fire(new c.Event("rotateend",h)),k&&this.fire(new c.Event("pitchstart",h)).fire(new c.Event("pitch",h)).fire(new c.Event("pitchend",h)),this.fire(new c.Event("moveend",h))}calculateCameraOptionsFromTo(s,h,y,w=0){const M=c.MercatorCoordinate.fromLngLat(s,h),k=c.MercatorCoordinate.fromLngLat(y,w),R=k.x-M.x,A=k.y-M.y,F=k.z-M.z,Z=Math.hypot(R,A,F);if(Z===0)throw new Error("Can't calculate camera options with same From and To");const Y=Math.hypot(R,A),Q=this.transform.scaleZoom(this.transform.cameraToCenterDistance/Z/this.transform.tileSize),le=180*Math.atan2(R,-A)/Math.PI;let se=180*Math.acos(Y/Z)/Math.PI;return se=F<0?90-se:90+se,{center:k.toLngLat(),zoom:Q,pitch:se,bearing:le}}easeTo(s,h){this._stop(!1,s.easeId),((s=c.extend({offset:[0,0],duration:500,easing:c.ease},s)).animate===!1||!s.essential&&c.exported.prefersReducedMotion)&&(s.duration=0);const y=this.transform,w=this.getZoom(),M=this.getBearing(),k=this.getPitch(),R=this.getPadding(),A="zoom"in s?+s.zoom:w,F="bearing"in s?this._normalizeBearing(s.bearing,M):M,Z="pitch"in s?+s.pitch:k,Y="padding"in s?s.padding:y.padding,Q=c.pointGeometry.convert(s.offset);let le=y.centerPoint.add(Q);const se=y.pointLocation(le),ie=c.LngLat.convert(s.center||se);this._normalizeCenter(ie);const xe=y.project(se),De=y.project(ie).sub(xe),Ie=y.zoomScale(A-w);let ue,Ve;s.around&&(ue=c.LngLat.convert(s.around),Ve=y.locationPoint(ue));const ze={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||A!==w,this._rotating=this._rotating||M!==F,this._pitching=this._pitching||Z!==k,this._padding=!y.isPaddingEqual(Y),this._easeId=s.easeId,this._prepareEase(h,s.noMoveStart,ze),this._ease(Ge=>{if(this._zooming&&(y.zoom=c.number(w,A,Ge)),this._rotating&&(y.bearing=c.number(M,F,Ge)),this._pitching&&(y.pitch=c.number(k,Z,Ge)),this._padding&&(y.interpolatePadding(R,Y,Ge),le=y.centerPoint.add(Q)),ue)y.setLocationAtPoint(ue,Ve);else{const rt=y.zoomScale(y.zoom-w),gt=A>w?Math.min(2,Ie):Math.max(.5,Ie),Qe=Math.pow(gt,1-Ge),It=y.unproject(xe.add(De.mult(Ge*Qe)).mult(rt));y.setLocationAtPoint(y.renderWorldCopies?It.wrap():It,le)}this._fireMoveEvents(h)},Ge=>{this._afterEase(h,Ge)},s),this}_prepareEase(s,h,y={}){this._moving=!0,this.fire(new c.Event("freezeElevation",{freeze:!0})),h||y.moving||this.fire(new c.Event("movestart",s)),this._zooming&&!y.zooming&&this.fire(new c.Event("zoomstart",s)),this._rotating&&!y.rotating&&this.fire(new c.Event("rotatestart",s)),this._pitching&&!y.pitching&&this.fire(new c.Event("pitchstart",s))}_fireMoveEvents(s){this.fire(new c.Event("move",s)),this._zooming&&this.fire(new c.Event("zoom",s)),this._rotating&&this.fire(new c.Event("rotate",s)),this._pitching&&this.fire(new c.Event("pitch",s))}_afterEase(s,h){if(this._easeId&&h&&this._easeId===h)return;delete this._easeId,this.fire(new c.Event("freezeElevation",{freeze:!1}));const y=this._zooming,w=this._rotating,M=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,y&&this.fire(new c.Event("zoomend",s)),w&&this.fire(new c.Event("rotateend",s)),M&&this.fire(new c.Event("pitchend",s)),this.fire(new c.Event("moveend",s))}flyTo(s,h){if(!s.essential&&c.exported.prefersReducedMotion){const Kt=c.pick(s,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Kt,h)}this.stop(),s=c.extend({offset:[0,0],speed:1.2,curve:1.42,easing:c.ease},s);const y=this.transform,w=this.getZoom(),M=this.getBearing(),k=this.getPitch(),R=this.getPadding(),A="zoom"in s?c.clamp(+s.zoom,y.minZoom,y.maxZoom):w,F="bearing"in s?this._normalizeBearing(s.bearing,M):M,Z="pitch"in s?+s.pitch:k,Y="padding"in s?s.padding:y.padding,Q=y.zoomScale(A-w),le=c.pointGeometry.convert(s.offset);let se=y.centerPoint.add(le);const ie=y.pointLocation(se),xe=c.LngLat.convert(s.center||ie);this._normalizeCenter(xe);const De=y.project(ie),Ie=y.project(xe).sub(De);let ue=s.curve;const Ve=Math.max(y.width,y.height),ze=Ve/Q,Ge=Ie.mag();if("minZoom"in s){const Kt=c.clamp(Math.min(s.minZoom,w,A),y.minZoom,y.maxZoom),Gn=Ve/y.zoomScale(Kt-w);ue=Math.sqrt(Gn/Ge*2)}const rt=ue*ue;function gt(Kt){const Gn=(ze*ze-Ve*Ve+(Kt?-1:1)*rt*rt*Ge*Ge)/(2*(Kt?ze:Ve)*rt*Ge);return Math.log(Math.sqrt(Gn*Gn+1)-Gn)}function Qe(Kt){return(Math.exp(Kt)-Math.exp(-Kt))/2}function It(Kt){return(Math.exp(Kt)+Math.exp(-Kt))/2}const St=gt(0);let Lt=function(Kt){return It(St)/It(St+ue*Kt)},un=function(Kt){return Ve*((It(St)*(Qe(Gn=St+ue*Kt)/It(Gn))-Qe(St))/rt)/Ge;var Gn},gn=(gt(1)-St)/ue;if(Math.abs(Ge)<1e-6||!isFinite(gn)){if(Math.abs(Ve-ze)<1e-6)return this.easeTo(s,h);const Kt=ze<Ve?-1:1;gn=Math.abs(Math.log(ze/Ve))/ue,un=function(){return 0},Lt=function(Gn){return Math.exp(Kt*ue*Gn)}}return s.duration="duration"in s?+s.duration:1e3*gn/("screenSpeed"in s?+s.screenSpeed/ue:+s.speed),s.maxDuration&&s.duration>s.maxDuration&&(s.duration=0),this._zooming=!0,this._rotating=M!==F,this._pitching=Z!==k,this._padding=!y.isPaddingEqual(Y),this._prepareEase(h,!1),this._ease(Kt=>{const Gn=Kt*gn,En=1/Lt(Gn);y.zoom=Kt===1?A:w+y.scaleZoom(En),this._rotating&&(y.bearing=c.number(M,F,Kt)),this._pitching&&(y.pitch=c.number(k,Z,Kt)),this._padding&&(y.interpolatePadding(R,Y,Kt),se=y.centerPoint.add(le));const _n=Kt===1?xe:y.unproject(De.add(Ie.mult(un(Gn))).mult(En));y.setLocationAtPoint(y.renderWorldCopies?_n.wrap():_n,se),this._fireMoveEvents(h)},()=>this._afterEase(h),s),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(s,h){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const y=this._onEaseEnd;delete this._onEaseEnd,y.call(this,h)}if(!s){const y=this.handlers;y&&y.stop(!1)}return this}_ease(s,h,y){y.animate===!1||y.duration===0?(s(1),h()):(this._easeStart=c.exported.now(),this._easeOptions=y,this._onEaseFrame=s,this._onEaseEnd=h,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const s=Math.min((c.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(s)),s<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(s,h){s=c.wrap(s,-180,180);const y=Math.abs(s-h);return Math.abs(s-360-h)<y&&(s-=360),Math.abs(s+360-h)<y&&(s+=360),s}_normalizeCenter(s){const h=this.transform;if(!h.renderWorldCopies||h.lngRange)return;const y=s.lng-h.center.lng;s.lng+=y>180?-360:y<-180?360:0}}class io{constructor(s={}){this.options=s,c.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(s){return this._map=s,this._compact=this.options&&this.options.compact,this._container=N.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=N.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=N.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){N.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(s,h){const y=this._map._getUIString(`AttributionControl.${h}`);s.title=y,s.setAttribute("aria-label",y)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(s){!s||s.sourceDataType!=="metadata"&&s.sourceDataType!=="visibility"&&s.dataType!=="style"&&s.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let s=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?s=s.concat(this.options.customAttribution.map(w=>typeof w!="string"?"":w)):typeof this.options.customAttribution=="string"&&s.push(this.options.customAttribution)),this._map.style.stylesheet){const w=this._map.style.stylesheet;this.styleOwner=w.owner,this.styleId=w.id}const h=this._map.style.sourceCaches;for(const w in h){const M=h[w];if(M.used||M.usedForTerrain){const k=M.getSource();k.attribution&&s.indexOf(k.attribution)<0&&s.push(k.attribution)}}s=s.filter(w=>String(w).trim()),s.sort((w,M)=>w.length-M.length),s=s.filter((w,M)=>{for(let k=M+1;k<s.length;k++)if(s[k].indexOf(w)>=0)return!1;return!0});const y=s.join(" | ");y!==this._attribHTML&&(this._attribHTML=y,s.length?(this._innerContainer.innerHTML=y,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class $c{constructor(s={}){this.options=s,c.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(s){this._map=s,this._compact=this.options&&this.options.compact,this._container=N.create("div","maplibregl-ctrl mapboxgl-ctrl");const h=N.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://maplibre.org/",h.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),h.setAttribute("rel","noopener nofollow"),this._container.appendChild(h),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){N.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const s=this._container.children;if(s.length){const h=s[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&h.classList.add("maplibregl-compact","mapboxgl-compact"):h.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class Vc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(s){const h=++this._id;return this._queue.push({callback:s,id:h,cancelled:!1}),h}remove(s){const h=this._currentlyRunning,y=h?this._queue.concat(h):this._queue;for(const w of y)if(w.id===s)return void(w.cancelled=!0)}run(s=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const h=this._currentlyRunning=this._queue;this._queue=[];for(const y of h)if(!y.cancelled&&(y.callback(s),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const ka={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},Hc={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},xi={showCompass:!0,showZoom:!0,visualizePitch:!1};class Al{constructor(s,h,y=!1){this._clickTolerance=10,this.element=h,this.mouseRotate=new Nt({clickTolerance:s.dragRotate._mouseRotate._clickTolerance}),this.map=s,y&&(this.mousePitch=new Dl({clickTolerance:s.dragRotate._mousePitch._clickTolerance})),c.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),N.addEventListener(h,"mousedown",this.mousedown),N.addEventListener(h,"touchstart",this.touchstart,{passive:!1}),N.addEventListener(h,"touchmove",this.touchmove),N.addEventListener(h,"touchend",this.touchend),N.addEventListener(h,"touchcancel",this.reset)}down(s,h){this.mouseRotate.mousedown(s,h),this.mousePitch&&this.mousePitch.mousedown(s,h),N.disableDrag()}move(s,h){const y=this.map,w=this.mouseRotate.mousemoveWindow(s,h);if(w&&w.bearingDelta&&y.setBearing(y.getBearing()+w.bearingDelta),this.mousePitch){const M=this.mousePitch.mousemoveWindow(s,h);M&&M.pitchDelta&&y.setPitch(y.getPitch()+M.pitchDelta)}}off(){const s=this.element;N.removeEventListener(s,"mousedown",this.mousedown),N.removeEventListener(s,"touchstart",this.touchstart,{passive:!1}),N.removeEventListener(s,"touchmove",this.touchmove),N.removeEventListener(s,"touchend",this.touchend),N.removeEventListener(s,"touchcancel",this.reset),this.offTemp()}offTemp(){N.enableDrag(),N.removeEventListener(window,"mousemove",this.mousemove),N.removeEventListener(window,"mouseup",this.mouseup)}mousedown(s){this.down(c.extend({},s,{ctrlKey:!0,preventDefault:()=>s.preventDefault()}),N.mousePos(this.element,s)),N.addEventListener(window,"mousemove",this.mousemove),N.addEventListener(window,"mouseup",this.mouseup)}mousemove(s){this.move(s,N.mousePos(this.element,s))}mouseup(s){this.mouseRotate.mouseupWindow(s),this.mousePitch&&this.mousePitch.mouseupWindow(s),this.offTemp()}touchstart(s){s.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=N.touchPos(this.element,s.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>s.preventDefault()},this._startPos))}touchmove(s){s.targetTouches.length!==1?this.reset():(this._lastPos=N.touchPos(this.element,s.targetTouches)[0],this.move({preventDefault:()=>s.preventDefault()},this._lastPos))}touchend(s){s.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Zt(_,s,h){if(_=new c.LngLat(_.lng,_.lat),s){const y=new c.LngLat(_.lng-360,_.lat),w=new c.LngLat(_.lng+360,_.lat),M=h.locationPoint(_).distSqr(s);h.locationPoint(y).distSqr(s)<M?_=y:h.locationPoint(w).distSqr(s)<M&&(_=w)}for(;Math.abs(_.lng-h.center.lng)>180;){const y=h.locationPoint(_);if(y.x>=0&&y.y>=0&&y.x<=h.width&&y.y<=h.height)break;_.lng>h.center.lng?_.lng-=360:_.lng+=360}return _}const Jt={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Pa(_,s,h){const y=_.classList;for(const w in Jt)y.remove(`maplibregl-${h}-anchor-${w}`,`mapboxgl-${h}-anchor-${w}`);y.add(`maplibregl-${h}-anchor-${s}`,`mapboxgl-${h}-anchor-${s}`)}class so extends c.Evented{constructor(s,h){if(super(),(s instanceof HTMLElement||h)&&(s=c.extend({element:s},h)),c.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._scale=s&&s.scale||1,this._draggable=s&&s.draggable||!1,this._clickTolerance=s&&s.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&s.pitchAlignment!=="auto"?s.pitchAlignment:this._rotationAlignment,s&&s.element)this._element=s.element,this._offset=c.pointGeometry.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=N.create("div"),this._element.setAttribute("aria-label","Map marker");const y=N.createNS("http://www.w3.org/2000/svg","svg"),w=41,M=27;y.setAttributeNS(null,"display","block"),y.setAttributeNS(null,"height",`${w}px`),y.setAttributeNS(null,"width",`${M}px`),y.setAttributeNS(null,"viewBox",`0 0 ${M} ${w}`);const k=N.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"stroke","none"),k.setAttributeNS(null,"stroke-width","1"),k.setAttributeNS(null,"fill","none"),k.setAttributeNS(null,"fill-rule","evenodd");const R=N.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"fill-rule","nonzero");const A=N.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"transform","translate(3.0, 29.0)"),A.setAttributeNS(null,"fill","#000000");const F=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ie of F){const ue=N.createNS("http://www.w3.org/2000/svg","ellipse");ue.setAttributeNS(null,"opacity","0.04"),ue.setAttributeNS(null,"cx","10.5"),ue.setAttributeNS(null,"cy","5.80029008"),ue.setAttributeNS(null,"rx",Ie.rx),ue.setAttributeNS(null,"ry",Ie.ry),A.appendChild(ue)}const Z=N.createNS("http://www.w3.org/2000/svg","g");Z.setAttributeNS(null,"fill",this._color);const Y=N.createNS("http://www.w3.org/2000/svg","path");Y.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Z.appendChild(Y);const Q=N.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"opacity","0.25"),Q.setAttributeNS(null,"fill","#000000");const le=N.createNS("http://www.w3.org/2000/svg","path");le.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Q.appendChild(le);const se=N.createNS("http://www.w3.org/2000/svg","g");se.setAttributeNS(null,"transform","translate(6.0, 7.0)"),se.setAttributeNS(null,"fill","#FFFFFF");const ie=N.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"transform","translate(8.0, 8.0)");const xe=N.createNS("http://www.w3.org/2000/svg","circle");xe.setAttributeNS(null,"fill","#000000"),xe.setAttributeNS(null,"opacity","0.25"),xe.setAttributeNS(null,"cx","5.5"),xe.setAttributeNS(null,"cy","5.5"),xe.setAttributeNS(null,"r","5.4999962");const De=N.createNS("http://www.w3.org/2000/svg","circle");De.setAttributeNS(null,"fill","#FFFFFF"),De.setAttributeNS(null,"cx","5.5"),De.setAttributeNS(null,"cy","5.5"),De.setAttributeNS(null,"r","5.4999962"),ie.appendChild(xe),ie.appendChild(De),R.appendChild(A),R.appendChild(Z),R.appendChild(Q),R.appendChild(se),R.appendChild(ie),y.appendChild(R),y.setAttributeNS(null,"height",w*this._scale+"px"),y.setAttributeNS(null,"width",M*this._scale+"px"),this._element.appendChild(y),this._offset=c.pointGeometry.convert(s&&s.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",y=>{y.preventDefault()}),this._element.addEventListener("mousedown",y=>{y.preventDefault()}),Pa(this._element,this._anchor,"marker"),this._popup=null}addTo(s){return this.remove(),this._map=s,s.getCanvasContainer().appendChild(this._element),s.on("move",this._update),s.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),N.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(s){return this._lngLat=c.LngLat.convert(s),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(s){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),s){if(!("offset"in s.options)){const w=Math.sqrt(Math.pow(13.5,2)/2);s.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[w,-1*(38.1-13.5+w)],"bottom-right":[-w,-1*(38.1-13.5+w)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=s,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(s){const h=s.code,y=s.charCode||s.keyCode;h!=="Space"&&h!=="Enter"&&y!==32&&y!==13||this.togglePopup()}_onMapClick(s){const h=s.originalEvent.target,y=this._element;this._popup&&(h===y||y.contains(h))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const s=this._popup;return s?(s.isOpen()?s.remove():s.addTo(this._map),this):this}_update(s){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Zt(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let h="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?h=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(h=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let y="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?y="rotateX(0deg)":this._pitchAlignment==="map"&&(y=`rotateX(${this._map.getPitch()}deg)`),s&&s.type!=="moveend"||(this._pos=this._pos.round()),N.setTransform(this._element,`${Jt[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${y} ${h}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const w=this._map.unproject(this._pos),M=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=w.distanceTo(this._lngLat)>20*M?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(s){return this._offset=c.pointGeometry.convert(s),this._update(),this}_onMove(s){if(!this._isDragging){const h=this._clickTolerance||this._map._clickTolerance;this._isDragging=s.point.dist(this._pointerdownPos)>=h}this._isDragging&&(this._pos=s.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new c.Event("dragstart"))),this.fire(new c.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new c.Event("dragend")),this._state="inactive"}_addDragHandler(s){this._element.contains(s.originalEvent.target)&&(s.preventDefault(),this._positionDelta=s.point.sub(this._pos).add(this._offset),this._pointerdownPos=s.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(s){return this._draggable=!!s,this._map&&(s?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(s){return this._rotation=s||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(s){return this._rotationAlignment=s||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(s){return this._pitchAlignment=s&&s!=="auto"?s:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Da={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Pr,Ns=0,ai=!1;const Zu={maxWidth:100,unit:"metric"};function jl(_,s,h){const y=h&&h.maxWidth||100,w=_._container.clientHeight/2,M=_.unproject([0,w]),k=_.unproject([y,w]),R=M.distanceTo(k);if(h&&h.unit==="imperial"){const A=3.2808*R;A>5280?rr(s,y,A/5280,_._getUIString("ScaleControl.Miles")):rr(s,y,A,_._getUIString("ScaleControl.Feet"))}else h&&h.unit==="nautical"?rr(s,y,R/1852,_._getUIString("ScaleControl.NauticalMiles")):R>=1e3?rr(s,y,R/1e3,_._getUIString("ScaleControl.Kilometers")):rr(s,y,R,_._getUIString("ScaleControl.Meters"))}function rr(_,s,h,y){const w=function(M){const k=Math.pow(10,`${Math.floor(M)}`.length-1);let R=M/k;return R=R>=10?10:R>=5?5:R>=3?3:R>=2?2:R>=1?1:function(A){const F=Math.pow(10,Math.ceil(-Math.log(A)/Math.LN10));return Math.round(A*F)/F}(R),k*R}(h);_.style.width=s*(w/h)+"px",_.innerHTML=`${w}&nbsp;${y}`}const jr={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Q1=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function oo(_){if(_){if(typeof _=="number"){const s=Math.round(Math.sqrt(.5*Math.pow(_,2)));return{center:new c.pointGeometry(0,0),top:new c.pointGeometry(0,_),"top-left":new c.pointGeometry(s,s),"top-right":new c.pointGeometry(-s,s),bottom:new c.pointGeometry(0,-_),"bottom-left":new c.pointGeometry(s,-s),"bottom-right":new c.pointGeometry(-s,-s),left:new c.pointGeometry(_,0),right:new c.pointGeometry(-_,0)}}if(_ instanceof c.pointGeometry||Array.isArray(_)){const s=c.pointGeometry.convert(_);return{center:s,top:s,"top-left":s,"top-right":s,bottom:s,"bottom-left":s,"bottom-right":s,left:s,right:s}}return{center:c.pointGeometry.convert(_.center||[0,0]),top:c.pointGeometry.convert(_.top||[0,0]),"top-left":c.pointGeometry.convert(_["top-left"]||[0,0]),"top-right":c.pointGeometry.convert(_["top-right"]||[0,0]),bottom:c.pointGeometry.convert(_.bottom||[0,0]),"bottom-left":c.pointGeometry.convert(_["bottom-left"]||[0,0]),"bottom-right":c.pointGeometry.convert(_["bottom-right"]||[0,0]),left:c.pointGeometry.convert(_.left||[0,0]),right:c.pointGeometry.convert(_.right||[0,0])}}return oo(new c.pointGeometry(0,0))}const Fi={supported:L,setRTLTextPlugin:c.setRTLTextPlugin,getRTLTextPluginStatus:c.getRTLTextPluginStatus,Map:class extends Yo{constructor(_){var s;if(c.PerformanceUtils.mark(c.PerformanceMarkers.create),(_=c.extend({},Hc,_)).minZoom!=null&&_.maxZoom!=null&&_.minZoom>_.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(_.minPitch!=null&&_.maxPitch!=null&&_.minPitch>_.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(_.minPitch!=null&&_.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(_.maxPitch!=null&&_.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Rc(_.minZoom,_.maxZoom,_.minPitch,_.maxPitch,_.renderWorldCopies),{bearingSnap:_.bearingSnap}),this._interactive=_.interactive,this._cooperativeGestures=_.cooperativeGestures,this._maxTileCacheSize=_.maxTileCacheSize,this._failIfMajorPerformanceCaveat=_.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=_.preserveDrawingBuffer,this._antialias=_.antialias,this._trackResize=_.trackResize,this._bearingSnap=_.bearingSnap,this._refreshExpiredTiles=_.refreshExpiredTiles,this._fadeDuration=_.fadeDuration,this._crossSourceCollisions=_.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=_.collectResourceTiming,this._renderTaskQueue=new Vc,this._controls=[],this._mapId=c.uniqueId(),this._locale=c.extend({},ka,_.locale),this._clickTolerance=_.clickTolerance,this._pixelRatio=(s=_.pixelRatio)!==null&&s!==void 0?s:devicePixelRatio,this._requestManager=new $(_.transformRequest),typeof _.container=="string"){if(this._container=document.getElementById(_.container),!this._container)throw new Error(`Container '${_.container}' not found.`)}else{if(!(_.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=_.container}if(_.maxBounds&&this.setMaxBounds(_.maxBounds),c.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new An(this,_),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=_.hash&&new Tl(typeof _.hash=="string"&&_.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:_.center,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch}),_.bounds&&(this.resize(),this.fitBounds(_.bounds,c.extend({},_.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=_.localIdeographFontFamily,_.style&&this.setStyle(_.style,{localIdeographFontFamily:_.localIdeographFontFamily}),_.attributionControl&&this.addControl(new io({customAttribution:_.customAttribution})),_.maplibreLogo&&this.addControl(new $c,_.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",h=>{this._update(h.dataType==="style"),this.fire(new c.Event(`${h.dataType}data`,h))}),this.on("dataloading",h=>{this.fire(new c.Event(`${h.dataType}dataloading`,h))}),this.on("dataabort",h=>{this.fire(new c.Event("sourcedataabort",h))})}_getMapId(){return this._mapId}addControl(_,s){if(s===void 0&&(s=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new c.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const h=_.onAdd(this);this._controls.push(_);const y=this._controlPositions[s];return s.indexOf("bottom")!==-1?y.insertBefore(h,y.firstChild):y.appendChild(h),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new c.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const s=this._controls.indexOf(_);return s>-1&&this._controls.splice(s,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}calculateCameraOptionsFromTo(_,s,h,y){return y==null&&this.style.terrain&&(y=this.transform.getElevation(h,this.style.terrain)),super.calculateCameraOptionsFromTo(_,s,h,y)}resize(_){const s=this._containerDimensions(),h=s[0],y=s[1];this._resizeCanvas(h,y,this.getPixelRatio()),this.transform.resize(h,y),this.painter.resize(h,y,this.getPixelRatio());const w=!this._moving;return w&&(this.stop(),this.fire(new c.Event("movestart",_)).fire(new c.Event("move",_))),this.fire(new c.Event("resize",_)),w&&this.fire(new c.Event("moveend",_)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(_){const[s,h]=this._containerDimensions();this._pixelRatio=_,this._resizeCanvas(s,h,_),this.painter.resize(s,h,_)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(_){return this.transform.setMaxBounds(c.LngLatBounds.convert(_)),this._update()}setMinZoom(_){if((_=_??-2)>=-2&&_<=this.transform.maxZoom)return this.transform.minZoom=_,this._update(),this.getZoom()<_&&this.setZoom(_),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_??22)>=this.transform.minZoom)return this.transform.maxZoom=_,this._update(),this.getZoom()>_&&this.setZoom(_),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.minPitch=_,this._update(),this.getPitch()<_&&this.setPitch(_),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(_>=this.transform.minPitch)return this.transform.maxPitch=_,this._update(),this.getPitch()>_&&this.setPitch(_),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.renderWorldCopies=_,this._update()}project(_){return this.transform.locationPoint(c.LngLat.convert(_),this.style&&this.style.terrain)}unproject(_){return this.transform.pointLocation(c.pointGeometry.convert(_),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(_,s,h){if(_==="mouseenter"||_==="mouseover"){let y=!1;return{layer:s,listener:h,delegates:{mousemove:M=>{const k=this.getLayer(s)?this.queryRenderedFeatures(M.point,{layers:[s]}):[];k.length?y||(y=!0,h.call(this,new ki(_,this,M.originalEvent,{features:k}))):y=!1},mouseout:()=>{y=!1}}}}if(_==="mouseleave"||_==="mouseout"){let y=!1;return{layer:s,listener:h,delegates:{mousemove:k=>{(this.getLayer(s)?this.queryRenderedFeatures(k.point,{layers:[s]}):[]).length?y=!0:y&&(y=!1,h.call(this,new ki(_,this,k.originalEvent)))},mouseout:k=>{y&&(y=!1,h.call(this,new ki(_,this,k.originalEvent)))}}}}{const y=w=>{const M=this.getLayer(s)?this.queryRenderedFeatures(w.point,{layers:[s]}):[];M.length&&(w.features=M,h.call(this,w),delete w.features)};return{layer:s,listener:h,delegates:{[_]:y}}}}on(_,s,h){if(h===void 0)return super.on(_,s);const y=this._createDelegatedListener(_,s,h);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(y);for(const w in y.delegates)this.on(w,y.delegates[w]);return this}once(_,s,h){if(h===void 0)return super.once(_,s);const y=this._createDelegatedListener(_,s,h);for(const w in y.delegates)this.once(w,y.delegates[w]);return this}off(_,s,h){return h===void 0?super.off(_,s):(this._delegatedListeners&&this._delegatedListeners[_]&&(y=>{const w=this._delegatedListeners[_];for(let M=0;M<w.length;M++){const k=w[M];if(k.layer===s&&k.listener===h){for(const R in k.delegates)this.off(R,k.delegates[R]);return w.splice(M,1),this}}})(),this)}queryRenderedFeatures(_,s){if(!this.style)return[];let h;if(s!==void 0||_===void 0||_ instanceof c.pointGeometry||Array.isArray(_)||(s=_,_=void 0),s=s||{},(_=_||[[0,0],[this.transform.width,this.transform.height]])instanceof c.pointGeometry||typeof _[0]=="number")h=[c.pointGeometry.convert(_)];else{const y=c.pointGeometry.convert(_[0]),w=c.pointGeometry.convert(_[1]);h=[y,new c.pointGeometry(w.x,y.y),w,new c.pointGeometry(y.x,w.y),y]}return this.style.queryRenderedFeatures(h,s,this.transform)}querySourceFeatures(_,s){return this.style.querySourceFeatures(_,s)}setStyle(_,s){return(s=c.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},s)).diff!==!1&&s.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&_?(this._diffStyle(_,s),this):(this._localIdeographFontFamily=s.localIdeographFontFamily,this._updateStyle(_,s))}setTransformRequest(_){return this._requestManager.setTransformRequest(_),this}_getUIString(_){const s=this._locale[_];if(s==null)throw new Error(`Missing UI string '${_}'`);return s}_updateStyle(_,s){return this.style&&(this.style.setEventedParent(null),this.style._remove()),_?(this.style=new kr(this,s||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_):this.style.loadJSON(_),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new kr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,s){if(typeof _=="string"){const h=this._requestManager.transformRequest(_,c.ResourceType.Style);c.getJSON(h,(y,w)=>{y?this.fire(new c.ErrorEvent(y)):w&&this._updateDiff(w,s)})}else typeof _=="object"&&this._updateDiff(_,s)}_updateDiff(_,s){try{this.style.setState(_)&&this._update(!0)}catch(h){c.warnOnce(`Unable to perform style diff: ${h.message||h.error||h}.  Rebuilding the style from scratch.`),this._updateStyle(_,s)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():c.warnOnce("There is no style added to the map.")}addSource(_,s){return this._lazyInitEmptyStyle(),this.style.addSource(_,s),this._update(!0)}isSourceLoaded(_){const s=this.style&&this.style.sourceCaches[_];if(s!==void 0)return s.loaded();this.fire(new c.ErrorEvent(new Error(`There is no source with ID '${_}'`)))}setTerrain(_){return this.style.setTerrain(_),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const _=this.style&&this.style.sourceCaches;for(const s in _){const h=_[s]._tiles;for(const y in h){const w=h[y];if(w.state!=="loaded"&&w.state!=="errored")return!1}}return!0}addSourceType(_,s,h){return this._lazyInitEmptyStyle(),this.style.addSourceType(_,s,h)}removeSource(_){return this.style.removeSource(_),this._update(!0)}getSource(_){return this.style.getSource(_)}addImage(_,s,{pixelRatio:h=1,sdf:y=!1,stretchX:w,stretchY:M,content:k}={}){if(this._lazyInitEmptyStyle(),s instanceof HTMLImageElement||c.isImageBitmap(s)){const{width:R,height:A,data:F}=c.exported.getImageData(s);this.style.addImage(_,{data:new c.RGBAImage({width:R,height:A},F),pixelRatio:h,stretchX:w,stretchY:M,content:k,sdf:y,version:0})}else{if(s.width===void 0||s.height===void 0)return this.fire(new c.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:R,height:A,data:F}=s,Z=s;this.style.addImage(_,{data:new c.RGBAImage({width:R,height:A},new Uint8Array(F)),pixelRatio:h,stretchX:w,stretchY:M,content:k,sdf:y,version:0,userImage:Z}),Z.onAdd&&Z.onAdd(this,_)}}}updateImage(_,s){const h=this.style.getImage(_);if(!h)return this.fire(new c.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const y=s instanceof HTMLImageElement||c.isImageBitmap(s)?c.exported.getImageData(s):s,{width:w,height:M,data:k}=y;if(w===void 0||M===void 0)return this.fire(new c.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(w!==h.data.width||M!==h.data.height)return this.fire(new c.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const R=!(s instanceof HTMLImageElement||c.isImageBitmap(s));h.data.replace(k,R),this.style.updateImage(_,h)}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new c.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_,s){c.getImage(this._requestManager.transformRequest(_,c.ResourceType.Image),s)}listImages(){return this.style.listImages()}addLayer(_,s){return this._lazyInitEmptyStyle(),this.style.addLayer(_,s),this._update(!0)}moveLayer(_,s){return this.style.moveLayer(_,s),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}setLayerZoomRange(_,s,h){return this.style.setLayerZoomRange(_,s,h),this._update(!0)}setFilter(_,s,h={}){return this.style.setFilter(_,s,h),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,s,h,y={}){return this.style.setPaintProperty(_,s,h,y),this._update(!0)}getPaintProperty(_,s){return this.style.getPaintProperty(_,s)}setLayoutProperty(_,s,h,y={}){return this.style.setLayoutProperty(_,s,h,y),this._update(!0)}getLayoutProperty(_,s){return this.style.getLayoutProperty(_,s)}setLight(_,s={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,s),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(_,s){return this.style.setFeatureState(_,s),this._update()}removeFeatureState(_,s){return this.style.removeFeatureState(_,s),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let _=0,s=0;return this._container&&(_=this._container.clientWidth||400,s=this._container.clientHeight||300),[_,s]}_setupContainer(){const _=this._container;_.classList.add("maplibregl-map","mapboxgl-map");const s=this._canvasContainer=N.create("div","maplibregl-canvas-container mapboxgl-canvas-container",_);this._interactive&&s.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=N.create("canvas","maplibregl-canvas mapboxgl-canvas",s),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const h=this._containerDimensions();this._resizeCanvas(h[0],h[1],this.getPixelRatio());const y=this._controlContainer=N.create("div","maplibregl-control-container mapboxgl-control-container",_),w=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(M=>{w[M]=N.create("div",`maplibregl-ctrl-${M} mapboxgl-ctrl-${M}`,y)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const _=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=N.create("div","maplibregl-cooperative-gesture-screen",_);let s="Control",h=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(h=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map",s="Meta"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${h}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,document.addEventListener("keydown",y=>{y.key===s&&(this._metaPress=!0)}),document.addEventListener("keyup",y=>{y.key===s&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",y=>{this._onCooperativeGesture(y,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(_,s,h){this._canvas.width=h*_,this._canvas.height=h*s,this._canvas.style.width=`${_}px`,this._canvas.style.height=`${s}px`}_setupPainter(){const _=c.extend({},L.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),s=this._canvas.getContext("webgl",_)||this._canvas.getContext("experimental-webgl",_);s?(this.painter=new Fu(s,this.transform),c.exported$1.testSupport(s)):this.fire(new c.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(_){_.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new c.Event("webglcontextlost",{originalEvent:_}))}_contextRestored(_){this._setupPainter(),this.resize(),this._update(),this.fire(new c.Event("webglcontextrestored",{originalEvent:_}))}_onMapScroll(_){if(_.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(_,s,h){return!s&&h<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_render(_){let s,h=0;const y=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(s=y.createQueryEXT(),y.beginQueryEXT(y.TIME_ELAPSED_EXT,s),h=c.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(_),this._removed)return;let w=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const k=this.transform.zoom,R=c.exported.now();this.style.zoomHistory.update(k,R);const A=new c.EvaluationParameters(k,{now:R,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),F=A.crossFadingFactor();F===1&&F===this._crossFadingFactor||(w=!0,this._crossFadingFactor=F),this.style.update(A)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new c.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,c.PerformanceUtils.mark(c.PerformanceMarkers.load),this.fire(new c.Event("load"))),this.style&&(this.style.hasTransitions()||w)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const k=c.exported.now()-h;y.endQueryEXT(y.TIME_ELAPSED_EXT,s),setTimeout(()=>{const R=y.getQueryObjectEXT(s,y.QUERY_RESULT_EXT)/1e6;y.deleteQueryEXT(s),this.fire(new c.Event("gpu-timing-frame",{cpuTime:k,gpuTime:R}))},50)}if(this.listens("gpu-timing-layer")){const k=this.painter.collectGpuTimers();setTimeout(()=>{const R=this.painter.queryGpuTimers(k);this.fire(new c.Event("gpu-timing-layer",{layerTimes:R}))},50)}const M=this._sourcesDirty||this._styleDirty||this._placementDirty;return M||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new c.Event("idle")),!this._loaded||this._fullyLoaded||M||(this._fullyLoaded=!0,c.PerformanceUtils.mark(c.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const s of this._controls)s.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const _=this.painter.context.gl.getExtension("WEBGL_lose_context");_&&_.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),N.remove(this._canvasContainer),N.remove(this._controlContainer),this._cooperativeGestures&&N.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),c.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new c.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=c.exported.frame(_=>{c.PerformanceUtils.frame(_),this._frame=null,this._render(_)}))}_onWindowOnline(){this._update()}_onWindowResize(_){this._trackResize&&this.resize({originalEvent:_})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}_setCacheLimits(_,s){c.setCacheLimits(_,s)}get version(){return"2.4.0"}},NavigationControl:class{constructor(_){this.options=c.extend({},xi,_),this._container=N.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",s=>s.preventDefault()),this.options.showZoom&&(c.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",s=>this._map.zoomIn({},{originalEvent:s})),N.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",s=>this._map.zoomOut({},{originalEvent:s})),N.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(c.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",s=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:s}):this._map.resetNorth({},{originalEvent:s})}),this._compassIcon=N.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const _=this._map.getZoom(),s=_===this._map.getMaxZoom(),h=_===this._map.getMinZoom();this._zoomInButton.disabled=s,this._zoomOutButton.disabled=h,this._zoomInButton.setAttribute("aria-disabled",s.toString()),this._zoomOutButton.setAttribute("aria-disabled",h.toString())}_rotateCompassArrow(){const _=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=_}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Al(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){N.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(_,s){const h=N.create("button",_,this._container);return h.type="button",h.addEventListener("click",s),h}_setButtonTitle(_,s){const h=this._map._getUIString(`NavigationControl.${s}`);_.title=h,_.setAttribute("aria-label",h)}},GeolocateControl:class extends c.Evented{constructor(_){super(),this.options=c.extend({},Da,_),c.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(_){var s;return this._map=_,this._container=N.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),s=this._setupUI,Pr!==void 0?s(Pr):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(h=>{Pr=h.state!=="denied",s(Pr)}):(Pr=!!window.navigator.geolocation,s(Pr)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),N.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ns=0,ai=!1}_isOutOfMapMaxBounds(_){const s=this._map.getMaxBounds(),h=_.coords;return s&&(h.longitude<s.getWest()||h.longitude>s.getEast()||h.latitude<s.getSouth()||h.latitude>s.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(_){if(this._map){if(this._isOutOfMapMaxBounds(_))return this._setErrorState(),this.fire(new c.Event("outofmaxbounds",_)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=_,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(_),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(_),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new c.Event("geolocate",_)),this._finish()}}_updateCamera(_){const s=new c.LngLat(_.coords.longitude,_.coords.latitude),h=_.coords.accuracy,y=this._map.getBearing(),w=c.extend({bearing:y},this.options.fitBoundsOptions);this._map.fitBounds(s.toBounds(h),w,{geolocateSource:!0})}_updateMarker(_){if(_){const s=new c.LngLat(_.coords.longitude,_.coords.latitude);this._accuracyCircleMarker.setLngLat(s).addTo(this._map),this._userLocationDotMarker.setLngLat(s).addTo(this._map),this._accuracy=_.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const _=this._map._container.clientHeight/2,s=this._map.unproject([0,_]),h=this._map.unproject([1,_]),y=s.distanceTo(h),w=Math.ceil(2*this._accuracy/y);this._circleElement.style.width=`${w}px`,this._circleElement.style.height=`${w}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(_){if(this._map){if(this.options.trackUserLocation)if(_.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=s,this._geolocateButton.setAttribute("aria-label",s),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(_.code===3&&ai)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new c.Event("error",_)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(_){if(this._container.addEventListener("contextmenu",s=>s.preventDefault()),this._geolocateButton=N.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),N.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",_===!1){c.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=s,this._geolocateButton.setAttribute("aria-label",s)}else{const s=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=s,this._geolocateButton.setAttribute("aria-label",s)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=N.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new so(this._dotElement),this._circleElement=N.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new so({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",s=>{s.geolocateSource||this._watchState!=="ACTIVE_LOCK"||s.originalEvent&&s.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new c.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return c.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ns--,ai=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new c.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Ns++,Ns>1?(_={maximumAge:6e5,timeout:0},ai=!0):(_=this.options.positionOptions,ai=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,_)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:io,LogoControl:$c,ScaleControl:class{constructor(_){this.options=c.extend({},Zu,_),c.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){jl(this._map,this._container,this.options)}onAdd(_){return this._map=_,this._container=N.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){N.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(_){this.options.unit=_,jl(this._map,this._container,this.options)}},FullscreenControl:class{constructor(_){this._fullscreen=!1,_&&_.container&&(_.container instanceof HTMLElement?this._container=_.container:c.warnOnce("Full screen control 'container' must be a DOM element.")),c.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=N.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",c.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){N.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const _=this._fullscreenButton=N.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);N.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(_){this.options=_,c.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(_){return this._map=_,this._container=N.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=N.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),N.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){N.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends c.Evented{constructor(_){super(),this.options=c.extend(Object.create(jr),_),c.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new c.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&N.remove(this._content),this._container&&(N.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new c.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(_){return this._lngLat=c.LngLat.convert(_),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(document.createTextNode(_))}setHTML(_){const s=document.createDocumentFragment(),h=document.createElement("body");let y;for(h.innerHTML=_;y=h.firstChild,y;)s.appendChild(y);return this.setDOMContent(s)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=N.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(_),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(_){this._container&&this._container.classList.add(_)}removeClassName(_){this._container&&this._container.classList.remove(_)}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){if(this._container)return this._container.classList.toggle(_)}_createCloseButton(){this.options.closeButton&&(this._closeButton=N.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(_){this._update(_.point)}_onMouseMove(_){this._update(_.point)}_onDrag(_){this._update(_.point)}_update(_){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=N.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=N.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(M=>this._container.classList.add(M)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Zt(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!_))return;const s=this._pos=this._trackPointer&&_?_:this._map.project(this._lngLat);let h=this.options.anchor;const y=oo(this.options.offset);if(!h){const M=this._container.offsetWidth,k=this._container.offsetHeight;let R;R=s.y+y.bottom.y<k?["top"]:s.y>this._map.transform.height-k?["bottom"]:[],s.x<M/2?R.push("left"):s.x>this._map.transform.width-M/2&&R.push("right"),h=R.length===0?"bottom":R.join("-")}const w=s.add(y[h]).round();N.setTransform(this._container,`${Jt[h]} translate(${w.x}px,${w.y}px)`),Pa(this._container,h,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const _=this._container.querySelector(Q1);_&&_.focus()}_onClose(){this.remove()}},Marker:so,Style:kr,LngLat:c.LngLat,LngLatBounds:c.LngLatBounds,Point:c.pointGeometry,MercatorCoordinate:c.MercatorCoordinate,Evented:c.Evented,AJAXError:c.AJAXError,config:c.config,CanvasSource:K,GeoJSONSource:ke,ImageSource:je,RasterDEMTileSource:Pe,RasterTileSource:Xe,VectorTileSource:dt,VideoSource:Ee,prewarm:function(){Mn().acquire(Bt)},clearPrewarmedResources:function(){const _=hn;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(Bt),hn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return Pt.workerCount},set workerCount(_){Pt.workerCount=_},get maxParallelImageRequests(){return c.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(_){c.config.MAX_PARALLEL_IMAGE_REQUESTS=_},clearStorage(_){c.clearTileCache(_)},workerUrl:"",addProtocol(_,s){c.config.REGISTERED_PROTOCOLS[_]=s},removeProtocol(_){delete c.config.REGISTERED_PROTOCOLS[_]}};return nr.extend(Fi,{isSafari:c.isSafari,getPerformanceMetrics:c.PerformanceUtils.getPerformanceMetrics}),Fi});var x=d;return x})}(Ef)),Ef.exports}var X5=uv();const Do=gc(X5),dv=l5({__proto__:null,default:Do},[X5]),Qd={version:8,sources:{"esri-imagery":{type:"raster",tiles:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"],tileSize:256,attribution:"Tiles © Esri — Source: Esri, Maxar, Earthstar Geographics, and the GIS User Community"},"osm-overlay":{type:"raster",tiles:["https://ows.terrestris.de/osm/service?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&FORMAT=image/png&TRANSPARENT=TRUE&LAYERS=OSM-WMS&SRS=EPSG:3857&BBOX={bbox-epsg-3857}&WIDTH=256&HEIGHT=256"],tileSize:256,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'},terrain:{type:"raster-dem",tiles:["https://demotiles.maplibre.org/terrain-tiles/tiles/{z}/{x}/{y}.png"],tileSize:256,maxzoom:14,encoding:"terrarium"}},layers:[{id:"esri-imagery",type:"raster",source:"esri-imagery",minzoom:0,maxzoom:19},{id:"osm-overlay",type:"raster",source:"osm-overlay",minzoom:0,maxzoom:19,paint:{"raster-opacity":1}}]},cl=c0(u0(e=>({origin:null,destination:null,routeGeo:null,routeSteps:[],transportMode:"walking",gender:"male",alternativeRoutes:[],setOrigin:o=>e({origin:o}),setDestination:o=>e({destination:o}),setRouteGeo:o=>e({routeGeo:o}),setRouteSteps:o=>e({routeSteps:o}),setTransportMode:o=>e({transportMode:o}),setGender:o=>e({gender:o}),setAlternativeRoutes:o=>e({alternativeRoutes:o}),clearRoute:()=>e({origin:null,destination:null,routeGeo:null,routeSteps:[],alternativeRoutes:[],transportMode:"walking",gender:"male"})}),{name:"route-storage",version:1})),hv=({className:e=""})=>{const o=cl(r=>r.transportMode),i=cl(r=>r.setTransportMode);return f.jsxs("div",{className:`mode-options ${e}`,children:[f.jsxs("button",{className:`transport-btn ${o==="walking"?"active":""}`,onClick:()=>i("walking"),children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:o==="walking"?"#2196F3":"#666",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M13 4m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),f.jsx("path",{d:"M7 21l3 -4"}),f.jsx("path",{d:"M16 21l-2 -4l-3 -3l1 -6"}),f.jsx("path",{d:"M6 12l2 -3l4 -1l3 3l3 1"})]}),f.jsx(pt,{id:"transportWalk"})]}),f.jsxs("button",{className:`transport-btn ${o==="electric-car"?"active":""}`,onClick:()=>i("electric-car"),children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",viewBox:"0 0 25 25",fill:o==="electric-car"?"#2196F3":"#1E2023",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.5 2.5C8.72876 2.5 6.84315 2.5 5.67157 3.67157C4.60848 4.73467 4.51004 6.3857 4.50093 9.5H3.5C2.94772 9.5 2.5 9.94772 2.5 10.5V11.5C2.5 11.8148 2.64819 12.1111 2.9 12.3L4.5 13.5C4.50911 16.6143 4.60848 18.2653 5.67157 19.3284C5.91375 19.5706 6.18645 19.7627 6.5 19.9151V21.4999C6.5 22.0522 6.94772 22.4999 7.5 22.4999H9C9.55228 22.4999 10 22.0522 10 21.4999V20.4815C10.7271 20.5 11.5542 20.5 12.5 20.5C13.4458 20.5 14.2729 20.5 15 20.4815V21.4999C15 22.0522 15.4477 22.4999 16 22.4999H17.5C18.0523 22.4999 18.5 22.0522 18.5 21.4999V19.9151C18.8136 19.7627 19.0862 19.5706 19.3284 19.3284C20.3915 18.2653 20.4909 16.6143 20.5 13.5L22.1 12.3C22.3518 12.1111 22.5 11.8148 22.5 11.5V10.5C22.5 9.94772 22.0523 9.5 21.5 9.5H20.4991C20.49 6.3857 20.3915 4.73467 19.3284 3.67157C18.1569 2.5 16.2712 2.5 12.5 2.5ZM6 10C6 11.4142 6 12.1213 6.43934 12.5607C6.87868 13 7.58579 13 9 13H12.5H16C17.4142 13 18.1213 13 18.5607 12.5607C19 12.1213 19 11.4142 19 10V7.5C19 6.08579 19 5.37868 18.5607 4.93934C18.1213 4.5 17.4142 4.5 16 4.5H12.5H9C7.58579 4.5 6.87868 4.5 6.43934 4.93934C6 5.37868 6 6.08579 6 7.5V10ZM6.75 16.5C6.75 16.0858 7.08579 15.75 7.5 15.75H9C9.41421 15.75 9.75 16.0858 9.75 16.5C9.75 16.9142 9.41421 17.25 9 17.25H7.5C7.08579 17.25 6.75 16.9142 6.75 16.5ZM18.25 16.5C18.25 16.0858 17.9142 15.75 17.5 15.75H16C15.5858 15.75 15.25 16.0858 15.25 16.5C15.25 16.9142 15.5858 17.25 16 17.25H17.5C17.9142 17.25 18.25 16.9142 18.25 16.5Z",fill:o==="electric-car"?"#2196F3":"#1E2023"})}),f.jsx(pt,{id:"transportCar"})]}),f.jsxs("button",{className:`transport-btn ${o==="wheelchair"?"active":""}`,onClick:()=>i("wheelchair"),children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:o==="wheelchair"?"#2196F3":"#666",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M11 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),f.jsx("path",{d:"M11 7l0 8l4 0l4 5"}),f.jsx("path",{d:"M11 11l5 0"}),f.jsx("path",{d:"M7 11.5a5 5 0 1 0 6 7.5"})]}),f.jsx(pt,{id:"transportWheelchair"})]})]})},pv=6371e3,gf=30,fv=20,q3={fa:"ورودی مسقف",en:"Covered Entrance",ar:"مدخل مسقوف",ur:"ڈھکا ہوا داخلہ"};function d0(){const e=Gi.getState().language;return q3[e]||q3.fa}function K5(e,o){var x;const i=e[0],r=e[1],d=((x=o.geometry)==null?void 0:x.coordinates[0])||o.coordinates[0];let m=!1;for(let c=0,L=d.length-1;c<d.length;L=c++){const T=d[c][0],P=d[c][1],D=d[L][0],N=d[L][1];P>r!=N>r&&i<(D-T)*(r-P)/(N-P)+T&&(m=!m)}return m}function mv(e,o){return{type:"FeatureCollection",features:e.features.filter(r=>K5(r.geometry.coordinates,o))}}const gv=e=>!e&&e!==0?[]:Array.isArray(e)?e:typeof e=="string"?e.trim()?e.split(","):[]:[e];function lm(e,o){const i=typeof o=="string"?o.toLowerCase():"",r=gv(e).map(d=>typeof d=="string"?d.toLowerCase().trim():"").filter(Boolean);return r.length?i==="family"?r.includes("family"):r.includes("family")?!0:r.includes(i):!0}function Pd(e,o){if(!e||!o)return 1/0;const i=D=>D*Math.PI/180,[r,d]=e,[m,x]=o,c=i(m-r),L=i(x-d),T=Math.sin(c/2)**2+Math.cos(i(r))*Math.cos(i(m))*Math.sin(L/2)**2,P=2*Math.atan2(Math.sqrt(T),Math.sqrt(1-T));return pv*P}function yv(e){return e?e.type==="LineString"?e.coordinates.map(o=>[o[1],o[0]]):e.type==="MultiLineString"?e.coordinates.flat().map(o=>[o[1],o[0]]):[]:[]}function vv(e){if(e==null)return null;if(typeof e=="number"&&!Number.isNaN(e))return e;if(typeof e=="string"){const o=e.match(/^PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?$/i);if(o){const r=parseInt(o[1]||"0",10),d=parseInt(o[2]||"0",10),m=parseInt(o[3]||"0",10),x=r*60+d+Math.round(m/60);return Number.isNaN(x)?null:x}if(e.includes(":")){const r=e.split(":").map(d=>parseInt(d,10));if(r.every(d=>!Number.isNaN(d))){const[d,m,x]=[r.length===3?r[0]:0,r.length===3?r[1]:r[0],r.length===3?r[2]:r.length===2?r[1]:0];return d*60+m+Math.round(x/60)}}const i=e.match(/(\d+(?:\.\d+)?)/);if(i){const r=parseFloat(i[1]);if(!Number.isNaN(r))return Math.round(r)}}return null}function cm(e,o){let i=0;if(Array.isArray(e)&&e.length>1)for(let d=1;d<e.length;d+=1)i+=Pd(e[d-1],e[d]);if(o){const d=[o.estimatedTimeMinutes,o.timeMinutes,o.durationMinutes,o.duration,o.estimatedTime,o.time];for(const m of d){const x=vv(m);if(x!=null)return{distanceMeters:i,estimatedMinutes:x}}}if(i===0)return{distanceMeters:i,estimatedMinutes:null};const r=Math.max(1,Math.round(i/60));return{distanceMeters:i,estimatedMinutes:r}}function xv(e,o){if(!e)return!0;const i=e.transportModes;return Array.isArray(i)&&i.length>0?i.includes(o):!0}function Ff(e,o){try{return K5(e,o)}catch(i){return console.warn("Error in pointInPolygon:",i),!1}}function cc(e,o){const i=[e[1],e[0]];return o.find(r=>Ff(i,r))}function Zh(e,o){const i=[];return e.forEach(r=>{var x;const d=cc(r,o),m=d?(x=d.properties)==null?void 0:x.subGroup:null;m&&i[i.length-1]!==m&&i.push(m)}),i}function _v(e,o){if(!e||!o||e===o)return!1;const i=e.geometry.coordinates[0],r=o.geometry.coordinates[0];for(let d=0;d<i.length-1;d++)for(let m=0;m<r.length-1;m++)if(Math.min(Math.hypot(i[d][0]-r[m][0],i[d][1]-r[m][1]),Math.hypot(i[d+1][0]-r[m][0],i[d+1][1]-r[m][1]),Math.hypot(i[d][0]-r[m+1][0],i[d][1]-r[m+1][1]),Math.hypot(i[d+1][0]-r[m+1][0],i[d+1][1]-r[m+1][1]))<1e-5)return!0;return!1}function Fd(e,o){if(!o)return[];try{const i={type:"FeatureCollection",features:e.map((d,m)=>({type:"Feature",geometry:{type:"Point",coordinates:[d[1],d[0]]},properties:{index:m}}))};return mv(i,o).features.map(d=>d.properties.index)}catch(i){return console.warn("Error in getNodesInPolygon:",i),[]}}function wv(e,o,i){var d;const r=[];for(let m=0;m<e.length;m++){const x=e[m];if(((d=x[2])==null?void 0:d.nodeFunction)==="connection"){const L=[x[0],x[1]],T=cc(L,[o,i]);if(T===o||T===i){const P=Fd(e,o),D=Fd(e,i);P.length>0&&D.length>0&&r.push({index:m,node:x,polygon:T})}}}return r}function bv(e,o,i){const r=Fd(e,o),d=Fd(e,i);if(r.length===0||d.length===0)return[];const m=[];for(const x of r)for(const c of d){const L=Math.hypot(e[x][0]-e[c][0],e[x][1]-e[c][1]);m.push({from:x,to:c,distance:L})}return m.sort((x,c)=>x.distance-c.distance).slice(0,2)}function Q5(e,o,i,r){function d(P,D,N){const $=(D[0]-P[0])*(N[1]-D[1])-(D[1]-P[1])*(N[0]-D[0]);return Math.abs($)<1e-10?0:$>0?1:2}function m(P,D,N){return D[1]<=Math.max(P[1],N[1])&&D[1]>=Math.min(P[1],N[1])&&D[0]<=Math.max(P[0],N[0])&&D[0]>=Math.min(P[0],N[0])}const x=d(e,o,i),c=d(e,o,r),L=d(i,r,e),T=d(i,r,o);return!!(x!==c&&L!==T||x===0&&m(e,i,o)||c===0&&m(e,r,o)||L===0&&m(i,e,r)||T===0&&m(i,o,r))}function Wm(e,o,i,r){var c,L;const d=[e[1],e[0]],m=[o[1],o[0]],x=d0();for(const T of i){if(((c=T.properties)==null?void 0:c.name)===x||Fd(r,T).length>0)continue;const D=T.geometry.coordinates[0];for(let N=0;N<D.length-1;N++){const $=D[N],U=D[N+1];if(Q5(d,m,$,U))return console.log(`Line blocked by empty polygon: ${(L=T.properties)==null?void 0:L.subGroupValue}`),!0}}return!1}function Cv(e){const o=e.geometry.coordinates[0];let i=0,r=0,d=0;for(let m=0,x=o.length-1;m<o.length;x=m++){const c=o[x][0],L=o[x][1],T=o[m][0],P=o[m][1],D=c*P-T*L;i+=D,r+=(c+T)*D,d+=(L+P)*D}return i*=.5,Math.abs(i)<1e-12?o[0]:(r/=6*i,d/=6*i,[r,d])}function W3(e,o,i){var c;const r=cc(e,i);if(!r)return[o];if(cc(o,i)!==r)return[o];const d=d0();if(((c=r.properties)==null?void 0:c.name)===d)return[o];if(!rp(e,o,[r]))return[o];const m=Cv(r),x=[m[1],m[0]];return!rp(e,x,[r])&&!rp(x,o,[r])?[x,o]:[o]}function rp(e,o,i){var x;const r=[e[1],e[0]],d=[o[1],o[0]],m=d0();for(const c of i){if(((x=c.properties)==null?void 0:x.name)===m)continue;const L=c.geometry.coordinates[0],T=[e[1],e[0]],P=[o[1],o[0]],D=Ff(T,c),N=Ff(P,c);if(!(D&&N))for(let $=0;$<L.length-1;$++){const U=L[$],q=L[$+1];if(Q5(r,d,U,q))return!0}}return!1}function G3(e,o,i){const r=c=>c*Math.PI/180,d=c=>c*180/Math.PI,m=(c,L)=>{const[T,P]=c,[D,N]=L,$=Math.sin(r(D-T))*Math.cos(r(N)),U=Math.cos(r(P))*Math.sin(r(N))-Math.sin(r(P))*Math.cos(r(N))*Math.cos(r(D-T));return(d(Math.atan2($,U))+360)%360};for(let c=1;c<e.length&&c-1<o.length;c++){const L=[e[c-1][1],e[c-1][0]],T=[e[c][1],e[c][0]],P=m(L,T);let D=null;i.forEach(N=>{var G;const $=N.geometry.coordinates,U=m(L,$);let q=Math.abs(P-U);q>180&&(q=360-q);const H=Math.hypot($[0]-T[0],$[1]-T[1]);q<=20&&H<=6e-4&&(!D||q<D.diff||q===D.diff&&H<D.distance)&&(D={name:((G=N.properties)==null?void 0:G.name)||"",distance:H,diff:q})}),D&&(o[c-1].landmark=D.name,o[c-1].landmarkDistance=Math.round(D.distance*1e5))}}function Sv(e,o,i){var T,P;const r=o[e],d=[r[0],r[1]],m=cc(d,i),x=(T=r[2])==null?void 0:T.nodeFunction,c=[],L=4e-4;for(let D=0;D<o.length;D++){if(D===e)continue;const N=o[D],$=[N[0],N[1]],U=cc($,i),q=(P=N[2])==null?void 0:P.nodeFunction,H=Math.hypot(d[0]-$[0],d[1]-$[1]);let G=!1,te="",oe=H;x==="connection"||q==="connection"?H<=L&&(G=!0,te="connection-priority",oe=H*1):m&&U&&m===U?(G=!0,te="same-polygon",oe=H):H<=L?Wm(d,$,i,o)?(G=!1,te="blocked-by-empty-polygon"):m&&U&&m!==U?wv(o,m,U).length>0?(G=!0,te="cross-polygon-penalized",oe=H*2):(G=!0,te="cross-polygon-80m",oe=H*1.2):m&&U&&_v(m,U)?bv(o,m,U).some(Ne=>Ne.from===e&&Ne.to===D||Ne.from===D&&Ne.to===e)?(G=!0,te="closest-door-between-polygons",oe=H*.8):(G=!0,te="cross-polygon-80m",oe=H*1.2):(G=!0,te="cross-polygon-80m",oe=H):!rp(d,$,i)&&!Wm(d,$,i,o)&&m&&U&&m===U&&(G=!0,te="unobstructed-same-polygon",oe=H),G&&c.push({index:D,weight:oe,reason:te})}return c}function Y3(e,o,i,r){const d=(T,P)=>Math.hypot(T[0]-P[0],T[1]-P[1]),m=new Set([o]),x={},c={},L={};for(e.forEach((T,P)=>{c[P]=1/0,L[P]=1/0}),c[o]=0,L[o]=d(e[o],e[i]);m.size>0;){let T=null,P=1/0;for(const N of m)L[N]<P&&(P=L[N],T=N);if(T===i){const N=[];let $=T;for(;$!==void 0;)N.unshift(e[$]),$=x[$];return N}m.delete(T);const D=Sv(T,e,r);for(const N of D){const $=c[T]+N.weight;$<c[N.index]&&(x[N.index]=T,c[N.index]=$,L[N.index]=$+d(e[N.index],e[i]),m.add(N.index))}}return[]}function Bf(e,o,i,r="walking",d="male"){console.log("analyzeRoute called with Connection Priority Logic");const m={"electric-car":["electric-car","electricCar","electricVan"]},x=(K,be)=>{if(!K)return!0;const Be=m[be]||[be];for(const it of Be)if(Object.prototype.hasOwnProperty.call(K,it))return K[it]!==!1;return!0};if(!i)return null;const c=i.features.filter(K=>{var be,Be,it;return K.geometry.type==="Point"&&((be=K.properties)==null?void 0:be.nodeFunction)==="door"&&x((Be=K.properties)==null?void 0:Be.services,r)&&lm((it=K.properties)==null?void 0:it.gender,d)}),L=i.features.filter(K=>{var be,Be,it;return K.geometry.type==="Point"&&((be=K.properties)==null?void 0:be.nodeFunction)==="connection"&&x((Be=K.properties)==null?void 0:Be.services,r)&&lm((it=K.properties)==null?void 0:it.gender,d)}),T=i.features.filter(K=>{var be;return K.geometry.type==="Point"&&((be=K.properties)==null?void 0:be.nodeFunction)==="poi"}),P=i.features.filter(K=>K.geometry.type==="Polygon"),D=[];c.forEach(K=>{const[be,Be]=K.geometry.coordinates;D.push([Be,be,K.properties,0,K])}),L.forEach(K=>{const[be,Be]=K.geometry.coordinates;D.push([Be,be,K.properties,0,K])});const N=d0(),$=P.filter(K=>{var Be;return((Be=K.properties)==null?void 0:Be.name)===N?!0:D.filter(it=>Ff([it[1],it[0]],K)).some(it=>{var ft,mt;return((ft=it[2])==null?void 0:ft.nodeFunction)==="door"||((mt=it[2])==null?void 0:mt.nodeFunction)==="connection"})});function U(K,be=fv){let Be=null,it=1/0;for(let ft=0;ft<D.length;ft++){const mt=D[ft],xt=[mt[0],mt[1]],ut=Pd(K,xt);ut<it&&(it=ut,Be={node:mt,index:ft,distance:ut})}return!Be||Be.distance>be?null:Be}function q(){var it,ft;const K=i.features.filter(mt=>{var ut;const xt=(ut=mt.geometry)==null?void 0:ut.type;return xt==="LineString"||xt==="MultiLineString"}),be=[];for(const mt of K){if(!x((it=mt.properties)==null?void 0:it.services,r)||!lm((ft=mt.properties)==null?void 0:ft.gender,d)||!xv(mt.properties,r))continue;const xt=yv(mt.geometry);if(xt.length<2)continue;const ut=Pd(e.coordinates,xt[0]),vt=Pd(o.coordinates,xt[xt.length-1]),Tt=Pd(e.coordinates,xt[xt.length-1]),Rt=Pd(o.coordinates,xt[0]);let Bt=null;if(ut<=gf&&vt<=gf?Bt=xt.slice():Tt<=gf&&Rt<=gf&&(Bt=xt.slice().reverse()),!Bt)continue;const Pt=Bt.map(xn=>xn.slice());Pt[0]=[...e.coordinates],Pt[Pt.length-1]=[...o.coordinates];const jt=[],hn=new Set;for(let xn=0;xn<Pt.length-1;xn++){const Nn=U(Pt[xn]);if(!Nn||hn.has(Nn.index))continue;hn.add(Nn.index);const Dn=Nn.node,bn=Dn[2]||{};bn.nodeFunction==="door"?jt.push({coordinates:[Dn[0],Dn[1]],type:"stepPassDoor",name:bn.name||"",services:bn.services||{}}):bn.nodeFunction==="connection"&&jt.push({coordinates:[Dn[0],Dn[1]],type:"stepPassConnection",title:bn.subGroup||bn.name||"",services:bn.services||{}})}jt.push({coordinates:o.coordinates,type:"stepArriveDestination",name:o.name||""}),G3(Pt,jt,T);const Mn={type:"Feature",geometry:{type:"LineString",coordinates:Pt.map(xn=>[xn[1],xn[0]])}},{distanceMeters:jn,estimatedMinutes:Jn}=cm(Pt,mt.properties||{}),Yt=Zh(Pt,$);be.push({route:{path:Pt,geo:Mn,steps:jt,sahns:Yt,estimatedMinutes:Jn,distanceMeters:jn,source:"predefined"},estimatedMinutes:Jn??1/0,distanceMeters:jn})}if(be.length===0)return[];be.sort((mt,xt)=>mt.estimatedMinutes!==xt.estimatedMinutes?mt.estimatedMinutes-xt.estimatedMinutes:(mt.distanceMeters||1/0)-(xt.distanceMeters||1/0));const Be=be.map(mt=>mt.route);return console.log("Using predefined geojson routes with distances",Be.map(mt=>mt.distanceMeters||0)),Be}console.log(`Found ${c.length} doors, ${L.length} connections, ${$.length} navigable polygons`),console.log(`Total nodes available: ${D.length}`),console.log("Polygon analysis with turf.js:");const H=[];$.forEach(K=>{var Be;const be=Fd(D,K);console.log(`  ${(Be=K.properties)==null?void 0:Be.subGroupValue}: ${be.length} nodes`),be.length===0&&H.push(K)}),console.log(`Found ${H.length} empty polygons:`),H.forEach(K=>{var be;console.log(`  - ${(be=K.properties)==null?void 0:be.subGroupValue}`)});function G(K,be=2){var mt;const Be=[];for(let xt=0;xt<D.length;xt++){const ut=D[xt],vt=[ut[0],ut[1]];if(!rp(K,vt,$)&&!Wm(K,vt,$,D)){const Tt=Math.hypot(K[0]-vt[0],K[1]-vt[1]),Rt=cc(vt,$),Bt=Rt?(mt=Rt.properties)==null?void 0:mt.subGroupValue:"none";Be.push({index:xt,node:ut,distance:Tt,polyId:Bt})}}Be.sort((xt,ut)=>xt.distance-ut.distance),console.log(`Found ${Be.length} unobstructed nodes from [${K[0]}, ${K[1]}]`);const it=[],ft=new Set;for(const xt of Be)if(ft.has(xt.polyId)||(it.push(xt),ft.add(xt.polyId)),it.length>=be)break;if(it.length<be){for(const xt of Be)if(it.includes(xt)||it.push(xt),it.length>=be)break}return it.slice(0,be)}const te=G(e.coordinates,3),oe=G(o.coordinates,3),Ce=te[0],ae=oe[0];console.log("Start entry:",Ce?`Node ${Ce.index}`:"None"),console.log("End entry:",ae?`Node ${ae.index}`:"None");const Ne=q();function Fe(K){return K.map(be=>{const Be=be.steps.filter(ft=>ft.type!=="stepArriveDestination").map(ft=>ft.name||ft.title).filter(Boolean),it=be.sahns||Zh(be.path,$);return{steps:be.steps,geo:be.geo,from:e.name||"",to:o.name||"",via:Be,sahns:it,estimatedMinutes:be.estimatedMinutes,distanceMeters:be.distanceMeters,source:be.source||"predefined"}})}if(!Ce||!ae){if(console.log("Could not find valid entry/exit points"),Ne.length>0){const[K,...be]=Ne,Be=Fe(be);return{path:K.path,geo:K.geo,steps:K.steps,sahns:K.sahns||Zh(K.path,$),alternatives:Be,estimatedMinutes:K.estimatedMinutes,distanceMeters:K.distanceMeters,source:K.source||"predefined"}}return null}const ye=Y3(D,Ce.index,ae.index,$);if(ye.length===0||ye.length===1){if(console.log("No valid path found between entry points"),Ne.length>0){const[K,...be]=Ne,Be=Fe(be);return{path:K.path,geo:K.geo,steps:K.steps,sahns:K.sahns||Zh(K.path,$),alternatives:Be,estimatedMinutes:K.estimatedMinutes,distanceMeters:K.distanceMeters,source:K.source||"predefined"}}return null}function Ke(K){const be=[e.coordinates],Be=[];K.forEach(ut=>{const vt=[ut[0],ut[1]],Tt=be[be.length-1];W3(Tt,vt,$).forEach(Bt=>be.push(Bt)),ut[2].nodeFunction==="door"?Be.push({coordinates:vt,type:"stepPassDoor",name:ut[2].name||"",services:ut[2].services||{}}):ut[2].nodeFunction==="connection"&&Be.push({coordinates:vt,type:"stepPassConnection",title:ut[2].subGroup||ut[2].name||"",services:ut[2].services||{}})});const it=be[be.length-1];W3(it,o.coordinates,$).forEach(ut=>be.push(ut)),Be.push({coordinates:o.coordinates,type:"stepArriveDestination",name:o.name||""});const mt={type:"Feature",geometry:{type:"LineString",coordinates:be.map(ut=>[ut[1],ut[0]])}};G3(be,Be,T);const xt=cm(be,null);return{path:be,steps:Be,geo:mt,distanceMeters:xt.distanceMeters,estimatedMinutes:xt.estimatedMinutes,source:"computed"}}const Me=Ke(ye);let qe=Ne[0]||Me;if(!qe)return null;const Re=new Set;qe.path.forEach(K=>{var Be;const be=cc(K,$);be&&Re.add((Be=be.properties)==null?void 0:Be.subGroupValue)});const dt=Zh(qe.path,$);if(qe.estimatedMinutes==null||qe.distanceMeters==null){const K=cm(qe.path,null);qe.distanceMeters==null&&(qe.distanceMeters=K.distanceMeters),qe.estimatedMinutes==null&&(qe.estimatedMinutes=K.estimatedMinutes)}const Xe=K=>`${K[0].toFixed(6)}:${K[1].toFixed(6)}`,ht=new Set(qe.path.map(Xe)),Pe=te.slice(0),ke=oe.slice(0),de=[];Ne.length>1&&de.push(...Ne.slice(1));function je(K=!0){Pe.forEach(be=>{ke.forEach(Be=>{if(Ne.length===0&&be.index===Ce.index&&Be.index===ae.index)return;const it=Y3(D,be.index,Be.index,$);if(it.length===0||it.length===1)return;const ft=Ke(it);if(K&&$.length>0){const ut=new Set;if(ft.path.forEach(Tt=>{var Bt;const Rt=cc(Tt,$);Rt&&ut.add((Bt=Rt.properties)==null?void 0:Bt.subGroupValue)}),![...ut].some(Tt=>!Re.has(Tt)))return}const mt=(ut,vt)=>{if(ut.length!==vt.length)return!1;for(let Tt=0;Tt<ut.length;Tt++)if(Math.abs(ut[Tt][0]-vt[Tt][0])>1e-6||Math.abs(ut[Tt][1]-vt[Tt][1])>1e-6)return!1;return!0};if(mt(ft.geo.geometry.coordinates,qe.geo.geometry.coordinates)||de.some(ut=>mt(ut.geo.geometry.coordinates,ft.geo.geometry.coordinates)))return;const xt=new Set;ft.path.forEach(ut=>{const vt=Xe(ut);ht.has(vt)||xt.add(vt)}),!(xt.size<4)&&de.push(ft)})})}de.length===0&&(je(!0),de.length===0&&je(!1)),de.sort((K,be)=>{const Be=K.estimatedMinutes??1/0,it=be.estimatedMinutes??1/0;if(Be!==it)return Be-it;const ft=K.distanceMeters??1/0,mt=be.distanceMeters??1/0;return ft-mt});const Ee=Fe(de);return console.log(`Final path has ${qe.path.length} points`),{path:qe.path,geo:qe.geo,steps:qe.steps,sahns:dt,alternatives:Ee,estimatedMinutes:qe.estimatedMinutes,distanceMeters:qe.distanceMeters,source:qe.source||"computed"}}const J5=e=>e==null?"":String(e).replace(/\d/g,i=>"۰۱۲۳۴۵۶۷۸۹"[i]),Mv=(e,o)=>{if(e==null)return"";const i=String(e);return o==="en"?i:J5(i)},h0=()=>{const e=Gi(o=>o.language);return o=>Mv(o,e)},Ev=()=>{var Yt,xn,Nn,Dn,bn;const[e,o]=B.useState(!1),[i,r]=B.useState(!0),d=B.useRef(null),m=qs(),x=ii(),c=h0(),{origin:L,destination:T,routeGeo:P,routeSteps:D,alternativeRoutes:N,gender:$,setOrigin:U,setDestination:q,setRouteGeo:H,setRouteSteps:G,setAlternativeRoutes:te,setGender:oe}=cl(),Ce=Gi(yt=>yt.language),ae=sessionStorage.getItem("qrLat"),Ne=sessionStorage.getItem("qrLng"),Fe=sessionStorage.getItem("routeSahns")?JSON.parse(sessionStorage.getItem("routeSahns")):[],[ye,Ke]=B.useState(L||(ae&&Ne?{name:x.formatMessage({id:"mapCurrentLocationName"}),coordinates:[parseFloat(ae),parseFloat(Ne)]}:{name:x.formatMessage({id:"defaultBabRezaName"}),coordinates:[36.297,59.6069]})),[Me,qe]=B.useState(T||{name:x.formatMessage({id:"destSahnEnqelabName"}),coordinates:[36.2975,59.6072]}),Re=P;B.useEffect(()=>{U(ye)},[ye,U]),B.useEffect(()=>{q(Me)},[Me,q]);const{transportMode:dt}=cl(),[Xe,ht]=B.useState($||"family"),[Pe,ke]=B.useState({time:"9",distance:"75",mode:dt}),[de,je]=B.useState(null),[Ee,K]=B.useState(null),[be,Be]=B.useState([]),[it,ft]=B.useState([]),[mt,xt]=B.useState(!1),[ut,vt]=B.useState(null);B.useEffect(()=>{oe(Xe)},[Xe,oe]),Ze.useEffect(()=>{window.scrollTo(0,0)},[]),Ze.useEffect(()=>{var Et;let yt;if(Re){const nt=((Et=Re.geometry)==null?void 0:Et.coordinates)||[],Le=nt.slice(1).reduce((Je,ln,cn)=>{const Gt=nt[cn];return Je+Math.hypot(ln[0]-Gt[0],ln[1]-Gt[1])*1e5},0);yt={time:`${Math.max(1,Math.round(Le/60))}`,distance:`${Math.round(Le)}`,mode:dt}}else dt==="walking"?yt={time:"0",distance:"0",mode:"walking"}:dt==="electric-car"?yt={time:"0",distance:"0",mode:"electric-car"}:dt==="wheelchair"&&(yt={time:"0",distance:"0",mode:"wheelchair"});if(yt){ke(yt);try{sessionStorage.setItem("routeSummaryData",JSON.stringify(yt))}catch(nt){console.warn("failed to persist route summary",nt)}}},[dt,Re]),B.useEffect(()=>{!ye.coordinates&&!(ae&&Ne)&&navigator.geolocation.getCurrentPosition(yt=>Ke(Et=>({...Et,coordinates:[yt.coords.latitude,yt.coords.longitude]})),yt=>console.error("gps error",yt))},[ye.coordinates,ae,Ne]),B.useEffect(()=>{(()=>{const Et=sessionStorage.getItem("updatedOrigin"),nt=sessionStorage.getItem("updatedDestination");Et&&(Ke(JSON.parse(Et)),sessionStorage.removeItem("updatedOrigin")),nt&&(qe(JSON.parse(nt)),sessionStorage.removeItem("updatedDestination"))})()},[]);const Tt=()=>{sessionStorage.setItem("returnToFinalSearch","true"),sessionStorage.setItem("activeInput","origin"),sessionStorage.setItem("currentOrigin",JSON.stringify(ye)),sessionStorage.setItem("currentDestination",JSON.stringify(Me)),m("/mpr",{state:{showOriginModal:!0,fromFinalSearch:!0}})},Rt=()=>{sessionStorage.setItem("returnToFinalSearch","true"),sessionStorage.setItem("activeInput","destination"),sessionStorage.setItem("currentOrigin",JSON.stringify(ye)),m("/mpr",{state:{showDestinationModal:!0,fromFinalSearch:!0}})};B.useEffect(()=>{const yt=ll(Ce);fetch(yt).then(Et=>Et.json()).then(vt).catch(Et=>console.error("failed to load geojson",Et))},[Ce]),B.useEffect(()=>{Me.coordinates||qe(yt=>({...yt,coordinates:[36.2975,59.6072]}))},[Me.coordinates]),B.useEffect(()=>{if(!ut)return;const yt=Bf(ye,Me,ut,dt,Xe);if(!yt){Kn.error(x.formatMessage({id:"noRouteFound"})),H(null),G([]),te([]),sessionStorage.removeItem("routeGeo"),sessionStorage.removeItem("routeSteps"),sessionStorage.removeItem("alternativeRoutes"),sessionStorage.removeItem("routeSahns");return}const{geo:Et,steps:nt,alternatives:Le,sahns:Je}=yt;console.log("analyzeRoute result:",{geo:Et,steps:nt,alternatives:Le}),H(Et),G(nt),te(Le),sessionStorage.setItem("routeGeo",JSON.stringify(Et)),sessionStorage.setItem("routeSteps",JSON.stringify(nt)),sessionStorage.setItem("alternativeRoutes",JSON.stringify(Le)),sessionStorage.setItem("routeSahns",JSON.stringify(Je)),sessionStorage.setItem("origin",JSON.stringify(ye)),sessionStorage.setItem("destination",JSON.stringify(Me))},[ut,ye,Me,dt,Xe,H,G,te,x]),Ze.useMemo(()=>N?N.map((yt,Et)=>{var Je,ln;const nt=((ln=(Je=yt.geo)==null?void 0:Je.geometry)==null?void 0:ln.coordinates)||[],Le=nt.slice(1).reduce((cn,Gt,pn)=>{const Cn=nt[pn];return cn+Math.hypot(Gt[0]-Cn[0],Gt[1]-Cn[1])*1e5},0);return{id:Et+1,from:yt.from,to:yt.to,via:yt.sahns||[],totalTime:`${Math.max(1,Math.round(Le/60))} ${x.formatMessage({id:"minutesUnit"})}`,totalDistance:`${Math.round(Le)} ${x.formatMessage({id:"meters"})}`}}):[],[N,x]);const Bt=Ze.useMemo(()=>(N||[]).flatMap((yt,Et)=>[`alt-route-line-${Et}`,`alt-route-border-${Et}`]),[N]);B.useEffect(()=>{var yt;if(d.current&&Re){const Et=((yt=Re.geometry)==null?void 0:yt.coordinates)||[];if(Et.length>0){const nt=new Do.LngLatBounds([Et[0][0],Et[0][1]],[Et[0][0],Et[0][1]]);Et.forEach(([Le,Je])=>nt.extend([Le,Je])),d.current.fitBounds(nt,{padding:80,duration:700})}}},[Re]),B.useEffect(()=>{var yt,Et;(!Re||!(((Et=(yt=Re.geometry)==null?void 0:yt.coordinates)==null?void 0:Et.length)>0))&&(je(null),K(null))},[Re]),B.useEffect(()=>{var Le;if(!Re)return;const yt=((Le=Re.geometry)==null?void 0:Le.coordinates)||[];if(yt.length===0)return;const Et=yt.slice(1).reduce((Je,ln,cn)=>{const Gt=yt[cn];return Je+Math.hypot(ln[0]-Gt[0],ln[1]-Gt[1])*1e5},0);K(Math.max(1,Math.round(Et/60)));let nt=null;for(let Je=0;Je<yt.length;Je++){const[ln,cn]=yt[Je];if(!(N||[]).some(pn=>pn.geo.geometry.coordinates.some(([Cn,ct])=>Math.abs(Cn-ln)<1e-6&&Math.abs(ct-cn)<1e-6))){nt=[cn,ln];break}}if(!nt){const Je=Math.floor(yt.length/2);nt=[yt[Je][1],yt[Je][0]]}je(nt)},[Re,N]),B.useEffect(()=>{if(!N||N.length===0||!Re){Be([]),ft([]);return}const yt=[],Et=[];N.forEach(nt=>{var cn,Gt,pn,Cn;const Le=((Gt=(cn=nt.geo)==null?void 0:cn.geometry)==null?void 0:Gt.coordinates)||[];if(Le.length===0){yt.push(null),Et.push(null);return}const Je=Le.slice(1).reduce((ct,Ot,et)=>{const $t=Le[et];return ct+Math.hypot(Ot[0]-$t[0],Ot[1]-$t[1])*1e5},0);Et.push(Math.max(1,Math.round(Je/60)));let ln=null;for(let ct=0;ct<Le.length;ct++){const[Ot,et]=Le[ct];if(!((Cn=(pn=Re==null?void 0:Re.geometry)==null?void 0:pn.coordinates)==null?void 0:Cn.some(([Dt,mn])=>Math.abs(Dt-Ot)<1e-6&&Math.abs(mn-et)<1e-6))){ln=[et,Ot];break}}if(!ln){const ct=Math.floor(Le.length/2);ln=[Le[ct][1],Le[ct][0]]}yt.push(ln)}),Be(yt),ft(Et)},[N,Re]);const Pt=()=>{o(!0),r(!i);const yt=Me,Et=ye;if(Ke(yt),qe(Et),U(yt),q(Et),sessionStorage.setItem("origin",JSON.stringify(yt)),sessionStorage.setItem("destination",JSON.stringify(Et)),sessionStorage.setItem("qrLat",String(yt.coordinates[0])),sessionStorage.setItem("qrLng",String(yt.coordinates[1])),ut){const nt=Bf(yt,Et,ut,dt,Xe);if(nt){const{geo:Le,steps:Je,alternatives:ln,sahns:cn}=nt;H(Le),G(Je),te(ln),sessionStorage.setItem("routeGeo",JSON.stringify(Le)),sessionStorage.setItem("routeSteps",JSON.stringify(Je)),sessionStorage.setItem("alternativeRoutes",JSON.stringify(ln)),sessionStorage.setItem("routeSahns",JSON.stringify(cn))}}},jt=yt=>{if(!(yt!=null&&yt.geo)||!(yt!=null&&yt.steps)){console.warn("Selected alternative route is missing geo or steps");return}const Et={geo:P,steps:D,from:(L==null?void 0:L.name)||ye.name,to:(T==null?void 0:T.name)||Me.name,via:yt.via||[],sahns:Fe},nt=N.filter(Le=>Le!==yt);Et.geo&&Et.steps&&nt.push(Et),H(yt.geo),G(yt.steps),te(nt),sessionStorage.setItem("routeGeo",JSON.stringify(yt.geo)),sessionStorage.setItem("routeSteps",JSON.stringify(yt.steps)),sessionStorage.setItem("alternativeRoutes",JSON.stringify(nt)),sessionStorage.setItem("routeSahns",JSON.stringify(yt.sahns||[]))},hn=()=>{m("/rng")},Mn=()=>{m("/rop")},jn=()=>{xt(!1)},Jn=()=>{if(xt(!1),!ye.coordinates||!Me.coordinates)return;const yt=`${ye.coordinates[0]},${ye.coordinates[1]}`,Et=`${Me.coordinates[0]},${Me.coordinates[1]}`,Le=`https://www.google.com/maps/dir/?api=1&origin=${yt}&destination=${Et}&travelmode=${dt==="electric-car"?"driving":"walking"}`,Je={title:x.formatMessage({id:"shareRoute"}),text:x.formatMessage({id:"routeSummary"},{origin:ye.name,destination:Me.name}),url:Le};navigator.share?navigator.share(Je).catch(ln=>console.error("share failed",ln)):window.open(Le,"_blank")};return f.jsxs("div",{className:"final-search-page",lang:Ce,children:[f.jsxs("div",{className:"mpr",children:[f.jsxs("div",{className:"header",children:[f.jsx("button",{className:"back-btn",onClick:()=>m(-1),children:f.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.2244 4.55806C11.4685 4.31398 11.8642 4.31398 12.1083 4.55806L17.1083 9.55806C17.3524 9.80214 17.3524 10.1979 17.1083 10.4419L12.1083 15.4419C11.8642 15.686 11.4685 15.686 11.2244 15.4419C10.9803 15.1979 10.9803 14.8021 11.2244 14.5581L15.1575 10.625H3.33301C2.98783 10.625 2.70801 10.3452 2.70801 10C2.70801 9.65482 2.98783 9.375 3.33301 9.375H15.1575L11.2244 5.44194C10.9803 5.19786 10.9803 4.80214 11.2244 4.55806Z",fill:"#1E2023"})})}),f.jsxs("div",{className:"menu-container",children:[f.jsx("button",{className:`menu-btn ${mt?"active":""}`,onClick:()=>xt(!mt),children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),f.jsx("path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),f.jsx("path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]})}),f.jsxs("div",{className:`menu-dropdown ${mt?"open":""}`,children:[f.jsxs("button",{className:"menu-item",onClick:jn,children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M17.286 21.09q -1.69 .001 -5.288 -2.615q -3.596 2.617 -5.288 2.616q -2.726 0 -.495 -6.8q -9.389 -6.775 2.135 -6.775h.076q 1.785 -5.516 3.574 -5.516q 1.785 0 3.574 5.516h.076q 11.525 0 2.133 6.774q 2.23 6.802 -.497 6.8"})]}),f.jsx(pt,{id:"saveDestination"})]}),f.jsxs("button",{className:"menu-item",onClick:Jn,children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M6 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),f.jsx("path",{d:"M18 6m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),f.jsx("path",{d:"M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),f.jsx("path",{d:"M8.7 10.7l6.6 -3.4"}),f.jsx("path",{d:"M8.7 13.3l6.6 3.4"})]}),f.jsx(pt,{id:"shareRoute"})]})]})]})]}),f.jsxs(Kd,{ref:d,mapLib:Do,mapStyle:Qd,style:{width:"100%",height:"100%"},initialViewState:{longitude:((((Yt=ye.coordinates)==null?void 0:Yt[1])??0)+(((xn=Me.coordinates)==null?void 0:xn[1])??0))/2,latitude:((((Nn=ye.coordinates)==null?void 0:Nn[0])??0)+(((Dn=Me.coordinates)==null?void 0:Dn[0])??0))/2,zoom:18},attributionControl:!1,interactiveLayerIds:Bt,onClick:yt=>{const Et=yt.features&&yt.features[0];if(Et&&Et.layer&&(Et.layer.id.startsWith("alt-route-line-")||Et.layer.id.startsWith("alt-route-border-"))){const nt=parseInt(Et.layer.id.replace(/alt-route-(?:line|border)-/,""));!Number.isNaN(nt)&&N[nt]&&jt(N[nt])}},children:[ye.coordinates&&f.jsx(Wr,{longitude:ye.coordinates[1],latitude:ye.coordinates[0],anchor:"bottom",children:f.jsx("div",{className:"marker-circle"})}),Me.coordinates&&f.jsx(Wr,{longitude:Me.coordinates[1],latitude:Me.coordinates[0],anchor:"bottom",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",viewBox:"0 0 24 24",fill:"#F44336",children:f.jsx("path",{d:"M18.364 4.636a9 9 0 0 1 .203 12.519l-.203 .21l-4.243 4.242a3 3 0 0 1 -4.097 .135l-.144 -.135l-4.244 -4.243a9 9 0 0 1 12.728 -12.728zm-6.364 3.364a3 3 0 1 0 0 6a3 3 0 1 0 0 -6z"})})}),N&&N.map((yt,Et)=>f.jsxs(Ze.Fragment,{children:[f.jsxs(Io,{id:`alt-route-${Et}`,type:"geojson",data:yt.geo,children:[f.jsx(ds,{id:`alt-route-border-${Et}`,type:"line",paint:{"line-color":"#0f71ef","line-width":10},layout:{"line-cap":"round","line-join":"round"}}),f.jsx(ds,{id:`alt-route-line-${Et}`,type:"line",paint:{"line-color":"#D5E4F6","line-width":8},layout:{"line-cap":"round","line-join":"round"}})]}),be[Et]&&it[Et]!==null&&f.jsx(qm,{className:"alt-popup-container",longitude:be[Et][1],latitude:be[Et][0],closeButton:!1,closeOnClick:!1,anchor:"bottom",children:f.jsxs("div",{className:"time-popup alt-popup",children:[c(it[Et])," ",x.formatMessage({id:"minutesUnit"})]})})]},Et)),Re&&f.jsx(Io,{id:"main-route",type:"geojson",data:Re,children:f.jsx(ds,{id:"main-line",type:"line",paint:{"line-color":"#0f71ef","line-width":10}})}),de&&Ee!==null&&f.jsx(qm,{className:"main-popup-container",longitude:de[1],latitude:de[0],closeButton:!1,closeOnClick:!1,anchor:"bottom",children:f.jsxs("div",{className:"time-popup main-popup",children:[c(Ee)," ",x.formatMessage({id:"minutesUnit"})]})}),f.jsx(y2,{routeCoords:(bn=Re==null?void 0:Re.geometry)==null?void 0:bn.coordinates})]}),f.jsx("div",{className:"map-fade"})]}),f.jsxs("div",{className:"location-section-container",children:[f.jsxs("div",{className:"location-icons-container",children:[f.jsx("div",{className:"location-icon origin-icon",children:f.jsx("div",{className:"n-circle"})}),f.jsxs("div",{className:"tdots",children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#e0e0e0",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-dots-vertical",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),f.jsx("path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),f.jsx("path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]}),f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#e0e0e0",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-dots-vertical",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),f.jsx("path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),f.jsx("path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]})]}),f.jsx("div",{className:"location-icon destination-icon",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"#F44336",children:f.jsx("path",{d:"M18.364 4.636a9 9 0 0 1 .203 12.519l-.203 .21l-4.243 4.242a3 3 0 0 1 -4.097 .135l-.144 -.135l-4.244 -4.243a9 9 0 0 1 12.728 -12.728zm-6.364 3.364a3 3 0 1 0 0 6a3 3 0 1 0 0 -6z"})})})]}),f.jsxs("div",{className:"location-section",children:[f.jsxs("div",{className:"location-input origin-input",onClick:Tt,children:[f.jsx("div",{className:"location-details",children:f.jsx("div",{className:"location-name",children:ye.name})}),f.jsx("div",{className:`current-location-label ${i?"visible":"hidden"}`})]}),f.jsx("div",{className:"swap-container",children:f.jsx("button",{className:"swap-btn",onClick:Pt,children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`swap-icon ${i?"":"rotated"}`,children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M3 9l4 -4l4 4m-4 -4v14"}),f.jsx("path",{d:"M21 15l-4 4l-4 -4m4 4v-14"})]})})}),f.jsx("div",{className:"location-input destination-input",onClick:Rt,children:f.jsx("div",{className:"location-details",children:f.jsx("div",{className:"location-name",children:Me.name})})})]})]}),f.jsxs("div",{className:"options-section",children:[f.jsx(hv,{}),f.jsx("div",{className:"options-divider"}),f.jsxs("div",{className:"options-row",children:[f.jsxs("button",{className:`gender-btn ${Xe==="family"?"active":""}`,onClick:()=>ht("family"),children:[f.jsx("div",{className:"gender-circle",children:Xe==="family"&&f.jsx("div",{className:"gender-circle-fill"})}),f.jsx(pt,{id:"routeForFamily"})]}),f.jsxs("button",{className:`gender-btn ${Xe==="male"?"active":""}`,onClick:()=>ht("male"),children:[f.jsx("div",{className:"gender-circle",children:Xe==="male"&&f.jsx("div",{className:"gender-circle-fill"})}),f.jsx(pt,{id:"routeForMen"})]}),f.jsxs("button",{className:`gender-btn ${Xe==="female"?"active":""}`,onClick:()=>ht("female"),children:[f.jsx("div",{className:"gender-circle",children:Xe==="female"&&f.jsx("div",{className:"gender-circle-fill"})}),f.jsx(pt,{id:"routeForWomen"})]})]})]}),f.jsxs("div",{className:"route-info",children:[f.jsx("div",{className:"route-summary",children:f.jsx(pt,{id:"routeSummary",values:{origin:ye.name,destination:Me.name}})}),f.jsx("div",{className:"info-details",children:f.jsxs("div",{className:"info-distance",children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#181717",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M3 19a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}),f.jsx("path",{d:"M19 7a2 2 0 1 0 0 -4a2 2 0 0 0 0 4z"}),f.jsx("path",{d:"M11 19h5.5a3.5 3.5 0 0 0 0 -7h-8a3.5 3.5 0 0 1 0 -7h4.5"})]}),f.jsxs("span",{children:[c(Pe.distance)," ",f.jsx(pt,{id:"meters"})]})]})})]}),f.jsx("div",{className:"action-gap"}),f.jsxs("div",{className:"action-buttons2",children:[f.jsxs("button",{className:"navigate-btn",onClick:hn,children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"#fff",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M11.092 2.581a1 1 0 0 1 1.754 -.116l.062 .116l8.005 17.365c.198 .566 .05 1.196 -.378 1.615a1.53 1.53 0 0 1 -1.459 .393l-7.077 -2.398l-6.899 2.338a1.535 1.535 0 0 1 -1.52 -.231l-.112 -.1c-.398 -.386 -.556 -.954 -.393 -1.556l.047 -.15l7.97 -17.276z"})]}),f.jsx(pt,{id:"navigate"})]}),f.jsxs("button",{className:"overview-btn",onClick:Mn,children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#2196F3",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M3 19a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}),f.jsx("path",{d:"M19 7a2 2 0 1 0 0 -4a2 2 0 0 0 0 4z"}),f.jsx("path",{d:"M11 19h5.5a3.5 3.5 0 0 0 0 -7h-8a3.5 3.5 0 0 1 0 -7h4.5"})]}),f.jsx(pt,{id:"routeOverview"})]})]})]})},Lv=()=>{const[e,o]=B.useState(1),i=qs(),r=Gi(c=>c.setLanguage),d=ii(),m=[{id:1,name:"فارسی",code:"(FA)",locale:"fa",englishName:"Persian"},{id:2,name:" اُردُو",code:"(Ur)",locale:"ur",englishName:"Urdu"},{id:3,name:"العربیة",code:"(AR)",locale:"ar",englishName:"Arabic"},{id:4,name:"English",code:"(EN)",locale:"en",englishName:"English"}],x=()=>{if(e){const c=m.find(L=>L.id===e);c&&r(c.locale),sessionStorage.getItem("qrLat"),sessionStorage.getItem("qrLng"),i("/mpb")}};return f.jsxs("div",{className:"lang-page-container",children:[f.jsx("img",{src:Of,alt:d.formatMessage({id:"logoAlt"}),className:"lang-logo"}),f.jsxs("div",{className:"lang-welcome-text",children:[f.jsx("h1",{className:"welcome-heading",children:f.jsx(pt,{id:"welcome"})}),f.jsx("p",{className:"welcome-paragraph",dangerouslySetInnerHTML:{__html:d.formatMessage({id:"selectLanguage"})}})]}),f.jsx("div",{className:"lang-options-list",children:m.map(c=>f.jsxs("div",{className:`lang-option ${e===c.id?"selected":""}`,onClick:()=>o(c.id),children:[f.jsx("div",{className:"selection-circle",children:e===c.id&&f.jsx("div",{className:"inner-circle"})}),f.jsxs("div",{className:"lang-text-container",children:[f.jsx("span",{className:`lang-code lang-code-${c.code.replace(/[()]/g,"").toLowerCase()}`,children:c.code}),f.jsx("span",{className:`lang-name ${c.locale==="en"?"force-rtl":""}`,children:d.locale==="en"?c.englishName:c.name})]})]},c.id))}),f.jsx("button",{className:`lang-login-btn ${e?"":"disabled"}`,disabled:!e,onClick:x,children:f.jsx(pt,{id:"loginButton"})})]})},Tv=()=>{const e=ii(),[o,i]=B.useState(""),[r,d]=B.useState(!1),[m,x]=B.useState(""),[c,L]=B.useState(["","","","",""]),[T,P]=B.useState(!1),D=H=>/^09[0-9]{9}$/.test(H),N=H=>{const G=H.target.value.replace(/\D/g,"");G.length<=11&&(i(G),P(!1))},$=(H,G)=>{const te=H.target.value.replace(/\D/g,""),oe=[...c];te.length<=1&&(oe[G]=te,L(oe),te&&G<4?document.getElementById(`code-input-${G+1}`).focus():H.nativeEvent.inputType==="deleteContentBackward"&&!te&&G>0&&document.getElementById(`code-input-${G-1}`).focus())},U=(H,G)=>{H.key==="ArrowLeft"&&G>0?document.getElementById(`code-input-${G-1}`).focus():H.key==="ArrowRight"&&G<4&&document.getElementById(`code-input-${G+1}`).focus()},q=H=>{if(H.preventDefault(),!D(o)){P(!0);return}const G=["۰","۱","۲","۳","۴","۵","۶","۷","۸","۹"],te=o.split("").map(oe=>G[parseInt(oe)]).join("");x(te),d(!0)};return f.jsxs("div",{className:"login-page",children:[T&&f.jsxs("div",{className:"error-message",children:[f.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:"error-icon",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12ZM12 6.25C12.4142 6.25 12.75 6.58579 12.75 7V13C12.75 13.4142 12.4142 13.75 12 13.75C11.5858 13.75 11.25 13.4142 11.25 13V7C11.25 6.58579 11.5858 6.25 12 6.25ZM12 17C12.5523 17 13 16.5523 13 16C13 15.4477 12.5523 15 12 15C11.4477 15 11 15.4477 11 16C11 16.5523 11.4477 17 12 17Z",fill:"#EA4335"})}),f.jsx(pt,{id:"invalidPhone"})]}),f.jsxs("div",{className:"login-container",children:[f.jsx("div",{className:"logo-container",children:f.jsx("img",{src:Of,alt:e.formatMessage({id:"logoAlt"}),className:"login-logo"})}),f.jsxs("div",{className:"login-text-content",children:[f.jsx("h1",{className:"login-title",children:r?f.jsx(pt,{id:"enterVerification"}):f.jsx(pt,{id:"loginTitle"})}),r?f.jsxs("div",{className:"verification-message",children:[f.jsx("p",{children:f.jsx(pt,{id:"sentCode",values:{phone:f.jsx("span",{dir:"ltr",className:"phone-number",children:m})}})}),f.jsxs("div",{className:"verification-edit",children:[f.jsx("span",{children:f.jsx(pt,{id:"wrongPhone"})}),f.jsx("button",{type:"button",className:"edit-button",onClick:()=>d(!1),children:f.jsx(pt,{id:"edit"})})]})]}):f.jsx("p",{className:"login-description",children:f.jsx(pt,{id:"enterPhone"})})]}),r?f.jsxs("div",{className:"verification-container",dir:"ltr",children:[f.jsx("div",{className:"verification-code-inputs",children:c.map((H,G)=>f.jsx("input",{id:`code-input-${G}`,type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:"1",value:H,onChange:te=>$(te,G),onKeyDown:te=>U(te,G),className:"code-input",dir:"ltr",autoFocus:G===0},G))}),f.jsx("div",{className:"verification-resend",children:f.jsx("span",{children:f.jsx(pt,{id:"resendCode",values:{seconds:50}})})})]}):f.jsxs("form",{className:"login-form",onSubmit:q,children:[f.jsx("div",{className:"form-group",children:f.jsxs("div",{className:"phone-input-container",children:[f.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 20 20",fill:"none",className:"phone-icon",children:[f.jsx("path",{d:"M11.0503 1.56673C11.1055 1.22599 11.4276 0.994843 11.7684 1.05001C11.7894 1.05404 11.8573 1.06673 11.8929 1.07465C11.964 1.09048 12.0632 1.11486 12.1868 1.15089C12.4341 1.22292 12.7797 1.34159 13.1943 1.53171C14.0246 1.91233 15.1294 2.57817 16.2759 3.72467C17.4224 4.87117 18.0882 5.97602 18.4689 6.80625C18.659 7.22093 18.7777 7.56643 18.8497 7.81375C18.8857 7.93742 18.9101 8.03661 18.9259 8.10772C18.9338 8.14327 18.9396 8.17182 18.9437 8.19291L18.9485 8.21891C19.0036 8.55965 18.7746 8.89508 18.4338 8.95025C18.0941 9.00525 17.774 8.77523 17.7175 8.43608C17.7157 8.42698 17.711 8.40251 17.7058 8.37944C17.6955 8.33329 17.6778 8.2601 17.6496 8.16331C17.5932 7.96969 17.4952 7.68192 17.3326 7.32719C17.0077 6.6186 16.4236 5.64011 15.392 4.60856C14.3605 3.577 13.382 2.99284 12.6734 2.66798C12.3187 2.50535 12.0309 2.40741 11.8373 2.35101C11.7405 2.32282 11.6188 2.2949 11.5727 2.28462C11.2335 2.2281 10.9953 1.9065 11.0503 1.56673Z",fill:"#1E2023"}),f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.2389 4.44128C11.3337 4.10939 11.6796 3.9172 12.0115 4.01203L11.8398 4.61298C12.0115 4.01203 12.0115 4.01203 12.0115 4.01203L12.0127 4.01238L12.014 4.01274L12.0168 4.01356L12.0232 4.01548L12.0397 4.02062C12.0523 4.02464 12.068 4.02987 12.0867 4.03651C12.1241 4.04979 12.1736 4.06868 12.2343 4.09468C12.3557 4.14671 12.5215 4.22706 12.7253 4.34765C13.1332 4.58906 13.69 4.99004 14.3442 5.64418C14.9983 6.29833 15.3993 6.85515 15.6407 7.26303C15.7613 7.46679 15.8416 7.63268 15.8937 7.75408C15.9197 7.81476 15.9385 7.86422 15.9518 7.90165C15.9585 7.92036 15.9637 7.93605 15.9677 7.94861L15.9729 7.9651L15.9748 7.97156L15.9756 7.97434L15.976 7.97562C15.976 7.97562 15.9763 7.97682 15.3754 8.14852L15.9763 7.97682C16.0711 8.30871 15.879 8.65464 15.5471 8.74947C15.218 8.84349 14.8751 8.65536 14.7769 8.32864L14.7738 8.31966C14.7694 8.30714 14.7602 8.28249 14.7447 8.24648C14.7139 8.17454 14.658 8.05684 14.565 7.89968C14.3792 7.58573 14.0436 7.11136 13.4603 6.52807C12.877 5.94477 12.4026 5.60918 12.0887 5.42338C11.9315 5.33036 11.8138 5.27445 11.7419 5.24361C11.7059 5.22818 11.6812 5.21899 11.6687 5.21455L11.6597 5.21147C11.333 5.11323 11.1448 4.77036 11.2389 4.44128Z",fill:"#1E2023"}),f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.17353 3.67237C5.57358 2.27231 7.9362 2.37874 8.91105 4.12551L9.45189 5.09462C10.0885 6.2353 9.81721 7.67453 8.88529 8.61784C8.87288 8.63485 8.8071 8.73062 8.79891 8.89797C8.78845 9.11157 8.86431 9.60555 9.62967 10.3709C10.3948 11.136 10.8887 11.2121 11.1024 11.2017C11.2699 11.1935 11.3657 11.1277 11.3827 11.1153C12.3261 10.1834 13.7653 9.91209 14.906 10.5487L15.8751 11.0895C17.6218 12.0644 17.7283 14.427 16.3282 15.827C15.5793 16.5759 14.5836 17.2413 13.4134 17.2857C11.6793 17.3514 8.79993 16.9036 5.94844 14.0521C3.09695 11.2006 2.64913 8.32129 2.71487 6.58718C2.75923 5.41701 3.42464 4.42125 4.17353 3.67237ZM7.81953 4.73467C7.32035 3.84022 5.97893 3.63472 5.05741 4.55625C4.41129 5.20237 3.99123 5.91555 3.96397 6.63453C3.90915 8.08065 4.26619 10.6021 6.83232 13.1683C9.39846 15.7344 11.9199 16.0914 13.366 16.0366C14.085 16.0093 14.7982 15.5893 15.4443 14.9432C16.3659 14.0216 16.1604 12.6802 15.2659 12.181L14.2968 11.6402C13.694 11.3038 12.8472 11.4185 12.2528 12.0129C12.1944 12.0713 11.8227 12.4181 11.1631 12.4502C10.4879 12.483 9.67065 12.1797 8.74578 11.2548C7.82061 10.3296 7.51734 9.51212 7.5504 8.83684C7.5827 8.17724 7.92955 7.80591 7.98759 7.74786C8.58202 7.15343 8.69681 6.30662 8.36037 5.70378L7.81953 4.73467Z",fill:"#1E2023"})]}),f.jsx("input",{type:"tel",value:o,onChange:N,placeholder:e.formatMessage({id:"phonePlaceholder"}),dir:"ltr",className:`phone-input ${T?"error":""}`,maxLength:"11"})]})}),f.jsx("button",{type:"submit",className:`login-button ${D(o)?"active":""}`,disabled:!D(o),children:f.jsx(pt,{id:"loginButton"})})]}),!r&&f.jsx("div",{className:"login-terms",children:f.jsx("p",{dangerouslySetInnerHTML:{__html:e.formatMessage({id:"terms"})}})})]})]})};async function ap(e){try{const o=Gi.getState().language,r=await(await fetch("./data/locationData.json")).json(),d=Array.isArray(r)?r.find(x=>x.id===e):r;if(!d)return null;const{title:m}=d;return m&&typeof m=="object"&&!Array.isArray(m)?m[o]||m.fa||Object.values(m)[0]:m||null}catch(o){return console.error("failed to load location title",o),null}}const kv={sahn:"#4caf50",eyvan:"#2196f3",ravaq:"#9c27b0",masjed:"#ff9800",madrese:"#3f51b5",khadamat:"#607d8b",elmi:"#00bcd4",cemetery:"#795548",qrcode:"#607d8b",elevator:"#ffc107",other:"#757575"},Pv=(e,o,i=35,r=1)=>{const d=kv[e]||"#999";let m=ps.find(x=>x.value===e)||ps.find(x=>x.value===o)||ps.find(x=>x.value==="other");return f.jsx("div",{style:{width:i,height:i,backgroundColor:d,opacity:r,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 6px rgba(0,0,0,0.3)"},children:f.jsx("div",{className:`map-category-icon ${m.icon}`,style:{width:"22px",height:"22px",marginTop:0},children:f.jsx("img",{src:m.png,alt:m.label||"icon",width:"22",height:"22"})})})},Dv=({setUserLocation:e,selectedDestination:o,onMapClick:i,isSelectingLocation:r,selectedCategory:d,userLocation:m,isTracking:x=!0,onUserMove:c})=>{const L=ii(),[T,P]=B.useState({latitude:36.288,longitude:59.6157,zoom:16}),[D,N]=B.useState(null),[$,U]=B.useState(null),[q,H]=B.useState(null),[G,te]=B.useState(null),[oe,Ce]=B.useState(null),ae=Gi(Me=>Me.language),Ne=B.useCallback(Me=>{P(Me.viewState),c&&Me.originalEvent&&c()},[c]);B.useEffect(()=>{const Me=sessionStorage.getItem("qrLat"),qe=sessionStorage.getItem("qrLng"),Re=sessionStorage.getItem("qrId"),dt={lat:36.288,lng:59.6157};if(Me&&qe){const ke={lat:parseFloat(Me),lng:parseFloat(qe)};N(ke),(async()=>{let de=L.formatMessage({id:"mapCurrentLocationName"});if(Re){const je=await ap(Re);je&&(de=je)}e({name:de,coordinates:[ke.lat,ke.lng]})})(),P(de=>({...de,latitude:ke.lat,longitude:ke.lng,zoom:18}));return}const Xe=ke=>{if(sessionStorage.getItem("qrLat")&&sessionStorage.getItem("qrLng"))return;const de={lat:ke.coords.latitude,lng:ke.coords.longitude};N(de),e({name:L.formatMessage({id:"mapCurrentLocationName"}),coordinates:[de.lat,de.lng]})},ht=ke=>{console.error("Error getting location",ke),N(dt),e({name:L.formatMessage({id:"defaultBabRezaName"}),coordinates:[dt.lat,dt.lng]})};let Pe;return x&&(navigator.geolocation.getCurrentPosition(Xe,ht,{enableHighAccuracy:!1,timeout:1e4,maximumAge:6e4}),Pe=navigator.geolocation.watchPosition(Xe,ht,{enableHighAccuracy:!1,maximumAge:0,timeout:1e4})),()=>{Pe&&navigator.geolocation.clearWatch(Pe)}},[e,L,x]),B.useEffect(()=>{if(m!=null&&m.coordinates){const[Me,qe]=m.coordinates;N({lat:Me,lng:qe}),(x||!$)&&P(dt=>({...dt,latitude:Me,longitude:qe,zoom:18}))}},[m,x]),B.useEffect(()=>{if(o!=null&&o.coordinates){const[Me,qe]=o.coordinates;U({lat:Me,lng:qe}),D||P(dt=>({...dt,latitude:Me,longitude:qe,zoom:18}))}else U(null)},[o]),B.useEffect(()=>{if(o!=null&&o.coordinates){const[Me,qe]=o.coordinates;U({lat:Me,lng:qe}),(!$||$.lat!==Me||$.lng!==qe)&&P(dt=>({...dt,latitude:Me,longitude:qe,zoom:18}))}else U(null)},[o]);const Fe=Me=>{if(r){const{lng:qe,lat:Re}=Me.lngLat,dt={lat:Re,lng:qe};H(dt);let Xe=null;if(G){let ht=1/0;G.features.forEach(Pe=>{if(Pe.geometry.type==="Point"){const[ke,de]=Pe.geometry.coordinates,je=Math.hypot(ke-qe,de-Re);je<ht&&(ht=je,Xe=Pe)}}),ht>5e-4&&(Xe=null)}i&&i(dt,Xe)}};B.useEffect(()=>{const Me=ll(ae);fetch(Me).then(qe=>qe.json()).then(te).catch(qe=>console.error("failed to load geojson",qe))},[ae]),B.useEffect(()=>{if(D&&$&&G){const Me=G.features.filter(ht=>{var Pe;return ht.geometry.type==="Point"&&["door","connection"].includes((Pe=ht.properties)==null?void 0:Pe.nodeFunction)}),qe=ht=>{let Pe=null,ke=1/0;return Me.forEach(de=>{const[je,Ee]=de.geometry.coordinates,K=Math.hypot(je-ht.lng,Ee-ht.lat);K<ke&&(ke=K,Pe={lng:je,lat:Ee})}),Pe},Re=qe(D),dt=qe($),Xe=[[D.lng,D.lat],...Re?[[Re.lng,Re.lat]]:[],...dt?[[dt.lng,dt.lat]]:[],[$.lng,$.lat]];Ce(Xe)}else Ce(null)},[D,$,G]);const ye=G?G.features.filter(Me=>Me.geometry.type==="Point"):[],Ke=G?G.features.filter(Me=>Me.geometry.type==="Polygon"||Me.geometry.type==="MultiPolygon"):[];return f.jsxs(Kd,{mapLib:Do,mapStyle:Qd,style:{width:"100%",height:"100%"},...T,onMove:Ne,onClick:Fe,interactive:!0,children:[D&&f.jsx(Wr,{longitude:D.lng,latitude:D.lat,anchor:"center",children:f.jsx("div",{className:"map-marker-origin",children:f.jsx("div",{className:"map-marker-origin-inner"})})}),$&&f.jsx(Wr,{longitude:$.lng,latitude:$.lat,anchor:"center",children:f.jsx("div",{className:"map-marker-destination",children:f.jsx("div",{className:"map-marker-destination-inner"})})}),q&&r&&f.jsx(Wr,{longitude:q.lng,latitude:q.lat,anchor:"center",children:f.jsx("div",{className:"map-marker-selecting",children:f.jsx("div",{className:"map-marker-selecting-inner"})})}),oe&&f.jsx(Io,{id:"route",type:"geojson",data:{type:"Feature",geometry:{type:"LineString",coordinates:oe}},children:f.jsx(ds,{id:"route-line",type:"line",paint:{"line-color":"#4285F4","line-width":4,"line-opacity":.7}})}),Ke.length>0&&f.jsx(Io,{id:"polygons",type:"geojson",data:{type:"FeatureCollection",features:Ke},children:f.jsx(ds,{id:"polygon-lines",type:"line",paint:{"line-color":"#333","line-width":2}})}),"// Point features (doors, services, etc.) - Only show when a category is selected",d&&ye.map((Me,qe)=>{var be;const[Re,dt]=Me.geometry.coordinates,{group:Xe,nodeFunction:ht}=Me.properties||{},Pe=d&&Me.properties&&Me.properties[d.property]===d.value,ke=!!d,de=ke?Pe?40:25:35,je=ke?Pe?1:.4:1,Ee=(be=Me.properties)==null?void 0:be.uniqueId,K=Ee?`${Ee}-${qe}`:qe;return f.jsx(Wr,{longitude:Re,latitude:dt,anchor:"center",children:f.jsxs("div",{style:{position:"relative"},children:[Pv(Xe,ht,de,je),Pe&&f.jsx("div",{style:{position:"absolute",top:-4,left:-4,right:-4,bottom:-4,border:"2px solid #e53935",borderRadius:"50%"}})]})},K)})]})},X3=c0(u0((e,o)=>({recentSearches:[],addSearch:i=>e(r=>{const d=r.recentSearches.findIndex(x=>x.name===i.name&&x.location===i.location);let m=[...r.recentSearches];return d!==-1&&m.splice(d,1),m.unshift({...i,id:i.id||Date.now()}),{recentSearches:m.slice(0,5)}}),clearSearches:()=>e({recentSearches:[]})}),{name:"recent-search-storage",version:1})),Iv=()=>{const e=qs(),o=ii(),i=Gi(He=>He.language),[r,d]=B.useState(!1),[m,x]=B.useState(!1),[c,L]=B.useState(null),T=sessionStorage.getItem("qrLat"),P=sessionStorage.getItem("qrLng"),D=sessionStorage.getItem("qrId"),N=T&&P?{name:o.formatMessage({id:"mapCurrentLocationName"}),coordinates:[parseFloat(T),parseFloat(P)]}:{name:o.formatMessage({id:"defaultBabRezaName"}),coordinates:[36.297,59.6069]},[$,U]=B.useState(N),[q,H]=B.useState(""),[G,te]=B.useState(null),[oe,Ce]=B.useState(!1),[ae,Ne]=B.useState(!1),[Fe,ye]=B.useState(!0),[Ke,Me]=B.useState(null),[qe,Re]=B.useState(null),[dt,Xe]=B.useState(!1),[ht,Pe]=B.useState(null),[ke,de]=B.useState(null),[je,Ee]=B.useState(null),[K,be]=B.useState([]),[Be,it]=B.useState(null),[ft,mt]=B.useState([]),[xt,ut]=B.useState(!1),[vt,Tt]=B.useState(!1),[Rt,Bt]=B.useState([]);B.useEffect(()=>{T&&P&&D&&ap(D).then(He=>{He&&U({name:He,coordinates:[parseFloat(T),parseFloat(P)]})})},[T,P,D,i]);const Pt=cl(He=>He.setOrigin),jt=cl(He=>He.setDestination),hn=X3(He=>He.recentSearches),Mn=X3(He=>He.addSearch);B.useRef(null),B.useRef(null);const jn=B.useRef(null),Jn=B.useRef(null),Yt=B.useRef(null),[xn,Nn]=B.useState(null),[Dn,bn]=B.useState([]),yt=He=>{const kt=[],en=Qn=>{typeof Qn[0]=="number"?kt.push(Qn):Qn.forEach(en)};en(He);const Ft=kt.map(Qn=>Qn[1]),Vt=kt.map(Qn=>Qn[0]);return[(Math.min(...Vt)+Math.max(...Vt))/2,(Math.min(...Ft)+Math.max(...Ft))/2]},Et=He=>{if(!He)return null;const{geometry:kt}=He;return kt.type==="Point"?kt.coordinates:kt.type==="Polygon"||kt.type==="MultiPolygon"?yt(kt.coordinates):null},nt=He=>{it(He);const kt=(Po[He.value]||[]).map(en=>({...en,label:Cn(xn,en.value,en.label),description:ct(xn,en.value,o.formatMessage({id:en.description||"subgroupDefaultDesc"}))}));mt(kt),H(""),Tt(!0)},Le=()=>{it(null),mt([]),H(""),Tt(!1)};B.useEffect(()=>{const He=sessionStorage.getItem("returnToFinalSearch"),kt=sessionStorage.getItem("activeInput");if(He==="true"){if(kt==="origin"){const en=sessionStorage.getItem("currentDestination"),Ft=sessionStorage.getItem("currentOrigin");if(en)try{L(JSON.parse(en))}catch(Vt){console.error("failed to parse currentDestination",Vt)}if(Ft)try{U(JSON.parse(Ft))}catch(Vt){console.error("failed to parse currentOrigin",Vt)}x(!0),te("origin")}else if(kt==="destination"){const en=sessionStorage.getItem("currentOrigin");if(en)try{U(JSON.parse(en))}catch(Ft){console.error("failed to parse currentOrigin",Ft)}d(!0),te("destination"),ye(!1)}sessionStorage.removeItem("returnToFinalSearch"),sessionStorage.removeItem("activeInput")}},[]);const Je=q?Dn.map(He=>{var en,Ft,Vt;const kt=Et(He);return{id:((en=He.properties)==null?void 0:en.uniqueId)||He.id,name:((Ft=He.properties)==null?void 0:Ft.name)||"",location:((Vt=He.properties)==null?void 0:Vt.subGroup)||"",coordinates:kt?[kt[1],kt[0]]:null}}):hn;B.useEffect(()=>{$!=null&&$.coordinates&&(c!=null&&c.coordinates)&&!r&&!m&&!ae&&(Pt({name:$.name,coordinates:$.coordinates}),jt({name:c.name,coordinates:c.coordinates}),e("/fs"))},[$,c,e,Pt,jt,r,m,ae]),B.useEffect(()=>{$&&$.name!==o.formatMessage({id:"mapCurrentLocationName"})&&$.name!==o.formatMessage({id:"defaultBabRezaName"})&&ye(!1)},[$]);const ln=He=>{const kt={id:He.value,name:He.label,location:o.formatMessage({id:Be.label}),coordinates:null};Gt(kt)},cn=He=>{console.log("Selected subgroup:",He.value,"Has image:",!!He.img),ln(He)},Gt=He=>{var kt,en;G==="destination"?(L(He),Mn(He),d(!1),(kt=location.state)!=null&&kt.showDestinationModal&&(sessionStorage.setItem("updatedDestination",JSON.stringify(He)),e("/fs"))):(ye(!1),U({name:He.name,coordinates:He.coordinates}),x(!1),(en=location.state)!=null&&en.showOriginModal&&(sessionStorage.setItem("updatedOrigin",JSON.stringify({name:He.name,coordinates:He.coordinates})),e("/fs"))),H("")},pn=He=>{H(He.target.value.toLowerCase())};B.useEffect(()=>{const He=ll(i);fetch(He).then(kt=>kt.json()).then(Nn).catch(kt=>console.error("failed to load geojson",kt))},[i]),B.useEffect(()=>{if(xn&&q){const He=q.toLowerCase(),kt=xn.features.filter(en=>{var Qn,qn;const Ft=(((Qn=en.properties)==null?void 0:Qn.name)||"").toLowerCase(),Vt=(((qn=en.properties)==null?void 0:qn.subGroup)||"").toLowerCase();return Ft.includes(He)||Vt.includes(He)});bn(kt)}else bn([])},[q,xn]);const Cn=(He,kt,en)=>{var Ft;if(He){const Vt=He.features.find(Qn=>{var qn;return((qn=Qn.properties)==null?void 0:qn.subGroupValue)===kt});if((Ft=Vt==null?void 0:Vt.properties)!=null&&Ft.subGroup)return Vt.properties.subGroup}return en},ct=(He,kt,en)=>{var Ft;if(He){const Vt=He.features.find(Qn=>{var qn;return((qn=Qn.properties)==null?void 0:qn.subGroupValue)===kt});if((Ft=Vt==null?void 0:Vt.properties)!=null&&Ft.description)return Vt.properties.description}return en},Ot=()=>{if(!c&&$){const He={name:$.name,location:$.location||$.name,coordinates:$.coordinates};L(He),sessionStorage.setItem("currentDestination",JSON.stringify(He));const kt={name:o.formatMessage({id:"defaultBabRezaName"}),coordinates:[36.297,59.6069]};U(kt),sessionStorage.setItem("currentOrigin",JSON.stringify(kt)),ye(!1);return}if($&&c){const He={name:c.name,coordinates:c.coordinates,location:c.location||c.name},kt={name:$.name,coordinates:$.coordinates,location:$.location||$.name};U(He),L(kt),sessionStorage.setItem("currentOrigin",JSON.stringify(He)),sessionStorage.setItem("currentDestination",JSON.stringify(kt)),ye(!1),setTimeout(()=>ye(!0),100)}Yt.current&&(Yt.current.classList.add("rotate"),setTimeout(()=>{Yt.current&&Yt.current.classList.remove("rotate")},500))},et=He=>{Ee(kt=>{if(kt&&kt.value===He.value)return be([]),null;{const en=Po[He.value]||[],Ft=en.some(Vt=>Vt.img);return be(Ft?en:[]),He}})},$t=He=>{te(He),He==="destination"?d(!0):(x(!0),navigator.geolocation&&navigator.geolocation.getCurrentPosition(()=>Ce(!0),()=>Ce(!1)))},Dt=()=>{ye(!0),T&&P&&D?ap(D).then(He=>{U({name:He||o.formatMessage({id:"mapCurrentLocationName"}),coordinates:[parseFloat(T),parseFloat(P)]})}):U(He=>({...He,name:o.formatMessage({id:"mapCurrentLocationName"})})),x(!1)},mn=()=>{Ne(!0),ye(!1),d(!1),x(!1)},Fn=(He,kt)=>{var en;if(ae){const Ft=((en=kt==null?void 0:kt.properties)==null?void 0:en.name)||o.formatMessage({id:"mapSelectedLocation"}),Vt={name:Ft,coordinates:[He.lat,He.lng],type:G};Me(Vt),G==="destination"?L({name:Ft,location:o.formatMessage({id:"mapSelectedLocationFromMap"}),coordinates:[He.lat,He.lng]}):U({name:Ft,coordinates:[He.lat,He.lng]}),Ne(!1)}},nn=()=>{H("")},sr=()=>{Ne(!1),G==="destination"?d(!0):x(!0)};return B.useEffect(()=>{const He=kt=>{jn.current&&!jn.current.contains(kt.target)&&(d(!1),x(!1),H(""))};return document.addEventListener("mousedown",He),()=>{document.removeEventListener("mousedown",He)}},[]),B.useEffect(()=>{(r||m)&&Jn.current&&Jn.current.focus()},[r,m]),f.jsxs("div",{className:"map-routing-page",children:[f.jsxs("header",{className:"map-routing-header",children:[ae?f.jsx("button",{className:"map-back-button",onClick:sr,children:f.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.2244 4.55806C11.4685 4.31398 11.8642 4.31398 12.1083 4.55806L17.1083 9.55806C17.3524 9.80214 17.3524 10.1979 17.1083 10.4419L12.1083 15.4419C11.8642 15.686 11.4685 15.686 11.2244 15.4419C10.9803 15.1979 10.9803 14.8021 11.2244 14.5581L15.1575 10.625H3.33301C2.98783 10.625 2.70801 10.3452 2.70801 10C2.70801 9.65482 2.98783 9.375 3.33301 9.375H15.1575L11.2244 5.44194C10.9803 5.19786 10.9803 4.80214 11.2244 4.55806Z",fill:"#1E2023"})})}):f.jsx("button",{className:"map-back-button",onClick:()=>e(-1),children:f.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.2244 4.55806C11.4685 4.31398 11.8642 4.31398 12.1083 4.55806L17.1083 9.55806C17.3524 9.80214 17.3524 10.1979 17.1083 10.4419L12.1083 15.4419C11.8642 15.686 11.4685 15.686 11.2244 15.4419C10.9803 15.1979 10.9803 14.8021 11.2244 14.5581L15.1575 10.625H3.33301C2.98783 10.625 2.70801 10.3452 2.70801 10C2.70801 9.65482 2.98783 9.375 3.33301 9.375H15.1575L11.2244 5.44194C10.9803 5.19786 10.9803 4.80214 11.2244 4.55806Z",fill:"#1E2023"})})}),f.jsx("h1",{className:"map-header-title",children:ae?o.formatMessage({id:"mapSelectFromMap"}):o.formatMessage({id:"mapRoutingTitle"})}),f.jsx("button",{className:"map-profile-button",onClick:()=>e("/Profile"),children:f.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("circle",{cx:"9.99984",cy:"5",r:"3.33333",fill:"#1E2023"}),f.jsx("ellipse",{cx:"9.99984",cy:"14.1667",rx:"5.83333",ry:"3.33333",fill:"#1E2023"})]})})]}),!ae&&f.jsx("div",{className:"map-categories-scroll",children:f.jsx("div",{className:"map-categories-list",children:ps.map(He=>f.jsxs("div",{className:`map-category-item ${je&&je.value===He.value?"active":""}`,onClick:()=>et(He),children:[f.jsx("div",{className:`map-category-icon ${He.icon} ${je&&je.value===He.value?"active":""}`,children:f.jsx("img",{src:He.png,alt:He.label,width:"22",height:"22"})}),f.jsx("span",{className:`map-category-name ${je&&je.value===He.value?"active":""}`,children:o.formatMessage({id:He.label})})]},He.value))})}),f.jsxs("div",{className:`map-routing-container ${ae?"hide-attribution":""}`,children:[f.jsx(Dv,{setUserLocation:U,selectedDestination:c,onMapClick:Fn,isSelectingLocation:ae,selectedCategory:je,userLocation:$,mapSelectedLocation:Ke,isTracking:Fe,onUserMove:()=>ye(!1)}),!ae&&f.jsx("button",{className:`map-gps-button ${Fe?"active":""}`,onClick:()=>ye(He=>!He),children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M12 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),f.jsx("path",{d:"M12 12m-8 0a8 8 0 1 0 16 0a8 8 0 1 0 -16 0"}),f.jsx("path",{d:"M12 2l0 2"}),f.jsx("path",{d:"M12 20l0 2"}),f.jsx("path",{d:"M20 12l2 0"}),f.jsx("path",{d:"M2 12l2 0"})]})})]}),K.length>0&&f.jsx("div",{className:"map-subgroups-container",children:f.jsx("div",{className:"map-subgroups-scroll",children:K.map(He=>He.img&&f.jsxs("div",{className:"map-subgroup-card",children:[f.jsxs("div",{className:"map-subgroup-main",children:[f.jsxs("div",{className:"map-subgroup-content",children:[f.jsxs("div",{className:"map-subgroup-top",children:[f.jsx("div",{className:"subgroup-search-icon",children:f.jsx("img",{src:je.png,alt:je.label||"category icon",width:"22",height:"22"})}),f.jsx("h3",{className:"map-subgroup-title",children:He.label})]}),f.jsx("p",{className:"map-subgroup-address",children:He.address}),f.jsxs("div",{className:"subgroup-rating-section",children:[f.jsx("div",{className:"subgroup-rating-stars",children:[1,2,3,4,5].map(kt=>f.jsxs("svg",{className:kt<=Math.round(He.rating)?"filled":"",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z"})]},kt))}),f.jsxs("span",{className:"subgroup-views",children:["( ",He.views," ",o.formatMessage({id:"commentsLabel"}),")"]})]})]}),f.jsx("div",{className:"map-subgroup-image",children:f.jsx("img",{src:Array.isArray(He.img)?He.img[0]:He.img,alt:He.label})})]}),f.jsxs("div",{className:"map-subgroup-actions",children:[f.jsxs("button",{className:"map-subgroup-btn route-btn",onClick:()=>e("/fs"),children:[f.jsx("svg",{width:"19",height:"16",viewBox:"0 0 19 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.2851 14.6752C16.7753 14.2188 16.9902 13.4967 16.6398 12.7983L11.1179 1.7918C10.4769 0.514157 8.52263 0.514157 7.88165 1.7918L2.35977 12.7983C2.00936 13.4967 2.2243 14.2188 2.71445 14.6752C3.20874 15.1354 4.01591 15.348 4.78988 14.9806L4.52496 14.5396L4.78988 14.9806L9.21767 12.8793L8.95274 12.4382L9.21767 12.8793C9.39648 12.7944 9.60309 12.7944 9.7819 12.8793L14.2097 14.9806L14.4746 14.5396L14.2097 14.9806C14.9837 15.348 15.7908 15.1354 16.2851 14.6752ZM14.7395 14.0985L14.4766 14.5364L14.7395 14.0985L10.3118 11.9971C9.80183 11.7551 9.19774 11.7551 8.68781 11.9971L4.26003 14.0985C3.99319 14.2251 3.72448 14.1675 3.52817 13.9847C3.32773 13.798 3.23735 13.5043 3.38724 13.2056L8.90911 2.19909C9.15361 1.71173 9.84595 1.71173 10.0905 2.19909L15.6123 13.2056C15.7622 13.5043 15.6718 13.7981 15.4714 13.9847C15.2751 14.1675 15.0064 14.2251 14.7395 14.0985Z",fill:"#0F71EF"})}),f.jsx(pt,{id:"navigate"})]}),f.jsxs("button",{className:"map-subgroup-btn save-btn",children:[f.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{d:"M6 3.50016C5.72386 3.50016 5.5 3.72402 5.5 4.00016C5.5 4.27631 5.72386 4.50016 6 4.50016H10C10.2761 4.50016 10.5 4.27631 10.5 4.00016C10.5 3.72402 10.2761 3.50016 10 3.50016H6Z",fill:"#0F71EF"}),f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.96167 0.833496C6.57996 0.833486 5.49144 0.833479 4.64085 0.949076C3.76748 1.06777 3.07073 1.31662 2.52323 1.87005C1.97646 2.42274 1.73128 3.12484 1.6142 4.0051C1.49998 4.86384 1.49999 5.96324 1.5 7.36088V10.7595C1.49999 11.7645 1.49999 12.5603 1.56401 13.1594C1.62727 13.7514 1.76298 14.2855 2.15056 14.6427C2.4615 14.9293 2.85474 15.1099 3.27443 15.1579C3.79941 15.218 4.28959 14.9673 4.77246 14.6253C5.26108 14.2792 5.85384 13.7549 6.60169 13.0934L6.62603 13.0719C6.97274 12.7652 7.20748 12.5583 7.40333 12.4151C7.59261 12.2767 7.70818 12.2267 7.80559 12.207C7.93395 12.1812 8.06605 12.1812 8.19441 12.207C8.29182 12.2267 8.40739 12.2767 8.59667 12.4151C8.79252 12.5583 9.02726 12.7652 9.37397 13.0719L9.39835 13.0935C10.1462 13.7549 10.7389 14.2792 11.2275 14.6253C11.7104 14.9673 12.2006 15.218 12.7256 15.1579C13.1453 15.1099 13.5385 14.9293 13.8494 14.6427C14.237 14.2855 14.3727 13.7514 14.436 13.1594C14.5 12.5603 14.5 11.7645 14.5 10.7595V7.36086C14.5 5.96324 14.5 4.86383 14.3858 4.0051C14.2687 3.12484 14.0235 2.42274 13.4768 1.87005C12.9293 1.31662 12.2325 1.06777 11.3591 0.949076C10.5086 0.833479 9.42004 0.833486 8.03833 0.833496H7.96167ZM3.23413 2.57334C3.56531 2.23857 4.01501 2.04332 4.77552 1.93997C5.55097 1.83458 6.5715 1.8335 8 1.8335C9.4285 1.8335 10.449 1.83458 11.2245 1.93997C11.985 2.04332 12.4347 2.23857 12.7659 2.57334C13.0978 2.90885 13.2919 3.36562 13.3945 4.13695C13.499 4.92211 13.5 5.95498 13.5 7.39851V10.7274C13.5 11.7716 13.4993 12.5136 13.4417 13.0531C13.3826 13.606 13.2736 13.8135 13.1718 13.9074C13.0159 14.051 12.8199 14.1406 12.6119 14.1644C12.4788 14.1797 12.2557 14.1281 11.8056 13.8093C11.3665 13.4983 10.8141 13.0106 10.0365 12.3229L10.019 12.3074C9.6942 12.0201 9.42479 11.7818 9.18693 11.6079C8.93828 11.426 8.68749 11.2863 8.39188 11.2267C8.13318 11.1746 7.86682 11.1746 7.60812 11.2267C7.31251 11.2863 7.06172 11.426 6.81307 11.6079C6.57522 11.7818 6.30581 12.0201 5.98097 12.3074L5.96351 12.3229C5.18592 13.0106 4.63351 13.4983 4.19443 13.8093C3.7443 14.1281 3.52121 14.1797 3.38812 14.1644C3.18012 14.1406 2.98412 14.051 2.82825 13.9074C2.72642 13.8135 2.61743 13.606 2.55835 13.0531C2.50069 12.5136 2.5 11.7716 2.5 10.7274V7.39851C2.5 5.95498 2.50104 4.92211 2.60547 4.13695C2.70806 3.36562 2.90222 2.90885 3.23413 2.57334Z",fill:"#0F71EF"})]}),f.jsx(pt,{id:"savePlace"})]}),f.jsxs("button",{className:"map-subgroup-btn",onClick:()=>e("/location"),children:[f.jsx("svg",{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.79691 0.833496H9.20341C10.1151 0.833483 10.85 0.833472 11.428 0.911179C12.0281 0.991856 12.5333 1.16445 12.9346 1.56573C13.1336 1.76471 13.2763 1.98925 13.3795 2.23825C14.0009 2.31608 14.5226 2.48705 14.9346 2.8991C15.3359 3.30038 15.5085 3.80563 15.5891 4.4057C15.6669 4.98368 15.6668 5.71856 15.6668 6.63028V9.37011C15.6668 10.2818 15.6669 11.0167 15.5891 11.5947C15.5085 12.1948 15.3359 12.7 14.9346 13.1013C14.5225 13.5133 14.0009 13.6843 13.3795 13.7622C13.2763 14.0111 13.1336 14.2356 12.9346 14.4346C12.5333 14.8359 12.0281 15.0085 11.428 15.0891C10.85 15.1669 10.1151 15.1668 9.20341 15.1668H7.79692C6.88519 15.1668 6.15031 15.1669 5.57233 15.0891C4.97226 15.0085 4.46701 14.8359 4.06573 14.4346C3.86677 14.2356 3.72403 14.0111 3.62083 13.7622C2.99946 13.6843 2.47778 13.5133 2.06573 13.1013C1.66445 12.7 1.49186 12.1948 1.41118 11.5947C1.33347 11.0167 1.33348 10.2818 1.3335 9.37011V6.63028C1.33348 5.71856 1.33347 4.98368 1.41118 4.4057C1.49186 3.80563 1.66445 3.30038 2.06573 2.8991C2.47777 2.48705 2.99944 2.31608 3.6208 2.23824C3.724 1.98925 3.86675 1.76471 4.06573 1.56573C4.46701 1.16445 4.97226 0.991856 5.57233 0.911179C6.15031 0.833472 6.88519 0.833483 7.79691 0.833496ZM3.38579 3.29381C3.09404 3.36412 2.91217 3.46688 2.77284 3.6062C2.58833 3.79071 2.46803 4.04976 2.40226 4.53894C2.33456 5.04251 2.3335 5.70992 2.3335 6.66686V9.33353C2.3335 10.2905 2.33456 10.9579 2.40226 11.4615C2.46803 11.9506 2.58833 12.2097 2.77284 12.3942C2.91217 12.5335 3.09405 12.6363 3.38579 12.7066C3.33347 12.1658 3.33348 11.5025 3.3335 10.7034V5.29691C3.33348 4.49785 3.33347 3.83462 3.38579 3.29381ZM13.6145 12.7066C13.9063 12.6363 14.0882 12.5335 14.2275 12.3942C14.412 12.2097 14.5323 11.9506 14.5981 11.4615C14.6658 10.9579 14.6668 10.2905 14.6668 9.33353V6.66686C14.6668 5.70992 14.6658 5.04251 14.5981 4.53894C14.5323 4.04976 14.412 3.79071 14.2275 3.6062C14.0882 3.46688 13.9063 3.36412 13.6145 3.29381C13.6669 3.83462 13.6668 4.49785 13.6668 5.29692V10.7034C13.6668 11.5025 13.6669 12.1658 13.6145 12.7066ZM5.70558 1.90226C5.21639 1.96803 4.95735 2.08833 4.77284 2.27284C4.58833 2.45735 4.46803 2.71639 4.40226 3.20558C4.33456 3.70914 4.3335 4.37655 4.3335 5.3335V10.6668C4.3335 11.6238 4.33456 12.2912 4.40226 12.7947C4.46803 13.2839 4.58833 13.543 4.77284 13.7275C4.95735 13.912 5.21639 14.0323 5.70558 14.0981C6.20914 14.1658 6.87655 14.1668 7.8335 14.1668H9.16683C10.1238 14.1668 10.7912 14.1658 11.2947 14.0981C11.7839 14.0323 12.043 13.912 12.2275 13.7275C12.412 13.543 12.5323 13.2839 12.5981 12.7947C12.6658 12.2912 12.6668 11.6238 12.6668 10.6668V5.3335C12.6668 4.37655 12.6658 3.70914 12.5981 3.20558C12.5323 2.71639 12.412 2.45735 12.2275 2.27284C12.043 2.08833 11.7839 1.96803 11.2947 1.90226C10.7912 1.83456 10.1238 1.8335 9.16683 1.8335H7.8335C6.87655 1.8335 6.20914 1.83456 5.70558 1.90226ZM6.00016 6.00016C6.00016 5.72402 6.22402 5.50016 6.50016 5.50016H10.5002C10.7763 5.50016 11.0002 5.72402 11.0002 6.00016C11.0002 6.27631 10.7763 6.50016 10.5002 6.50016H6.50016C6.22402 6.50016 6.00016 6.27631 6.00016 6.00016ZM6.00016 8.66683C6.00016 8.39069 6.22402 8.16683 6.50016 8.16683H10.5002C10.7763 8.16683 11.0002 8.39069 11.0002 8.66683C11.0002 8.94297 10.7763 9.16683 10.5002 9.16683H6.50016C6.22402 9.16683 6.00016 8.94297 6.00016 8.66683ZM6.00016 11.3335C6.00016 11.0574 6.22402 10.8335 6.50016 10.8335H8.50016C8.77631 10.8335 9.00016 11.0574 9.00016 11.3335C9.00016 11.6096 8.77631 11.8335 8.50016 11.8335H6.50016C6.22402 11.8335 6.00016 11.6096 6.00016 11.3335Z",fill:"#0F71EF"})}),f.jsx(pt,{id:"detailsButton"})]})]})]},He.value))})}),!r&&!m&&!ae&&K.length===0&&f.jsx(f.Fragment,{children:f.jsxs("div",{className:"map-destination-input-container",ref:jn,children:[f.jsxs("div",{className:"location-icons-container",children:[f.jsx("div",{className:"location-icon origin-icon",children:f.jsx("div",{className:"n-circle"})}),f.jsxs("div",{className:"tdots",children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#e0e0e0",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-dots-vertical",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),f.jsx("path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),f.jsx("path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]}),f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#e0e0e0",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-dots-vertical",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),f.jsx("path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),f.jsx("path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]})]}),f.jsx("div",{className:"location-icon destination-icon",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"#F44336",children:f.jsx("path",{d:"M18.364 4.636a9 9 0 0 1 .203 12.519l-.203 .21l-4.243 4.242a3 3 0 0 1 -4.097 .135l-.144 -.135l-4.244 -4.243a9 9 0 0 1 12.728 -12.728zm-6.364 3.364a3 3 0 1 0 0 6a3 3 0 1 0 0 -6z"})})})]}),f.jsxs("div",{className:"map-location-inputs-container",children:[f.jsx("div",{className:"map-inputs-divider"}),f.jsx("div",{className:"map-current-location",onClick:()=>$t("origin"),children:f.jsx("div",{className:"map-location-text",children:f.jsx("span",{className:"map-location-name",children:($==null?void 0:$.name)||o.formatMessage({id:"defaultBabRezaName"})})})}),f.jsx("button",{className:"map-swap-button",onClick:Ot,ref:Yt,children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrows-sort",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M3 9l4 -4l4 4m-4 -4v14"}),f.jsx("path",{d:"M21 15l-4 4l-4 -4m4 4v-14"})]})}),f.jsx("div",{className:"map-destination-input-wrapper",onClick:()=>$t("destination"),children:f.jsx("input",{type:"text",placeholder:o.formatMessage({id:"destinationPlaceholder"}),value:c?c.name:"",readOnly:!0})})]})]})}),(r||m)&&f.jsxs("div",{className:`map-search-modal ${r||m?"fade-in":""}`,ref:jn,children:[f.jsxs("div",{className:"map-search-header",children:[f.jsxs("form",{className:"map-search-form",children:[!Be&&f.jsx("button",{type:"button",className:"map-modal-back-button",onClick:()=>{G==="destination"?d(!1):x(!1)},children:f.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.2244 4.55806C11.4685 4.31398 11.8642 4.31398 12.1083 4.55806L17.1083 9.55806C17.3524 9.80214 17.3524 10.1979 17.1083 10.4419L12.1083 15.4419C11.8642 15.686 11.4685 15.686 11.2244 15.4419C10.9803 15.1979 10.9803 14.8021 11.2244 14.5581L15.1575 10.625H3.33301C2.98783 10.625 2.70801 10.3452 2.70801 10C2.70801 9.65482 2.98783 9.375 3.33301 9.375H15.1575L11.2244 5.44194C10.9803 5.19786 10.9803 4.80214 11.2244 4.55806Z",fill:"#1E2023"})})}),Be?f.jsxs("div",{className:"selected-category-header",children:[f.jsx("div",{className:"selected-category-icon",children:f.jsx("img",{src:Be.png,alt:Be.label||"category icon",width:"22",height:"22"})}),f.jsx("span",{children:o.formatMessage({id:Be.label})})]}):f.jsx("input",{type:"text",placeholder:G==="destination"?o.formatMessage({id:"destinationSearchPlaceholder"}):o.formatMessage({id:"originSearchPlaceholder"}),value:q,onChange:pn,autoFocus:!0,ref:Jn}),(q||Be)&&f.jsx("button",{type:"button",className:"map-clear-search",onClick:()=>{Be?Le():nn()},children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M18 6l-12 12"}),f.jsx("path",{d:"M6 6l12 12"})]})})]}),!Be&&f.jsx("div",{className:"map-categories-scroll2",children:f.jsx("div",{className:"map-categories-list2",children:ps.map(He=>f.jsxs("div",{className:`map-category-item2 ${Be&&Be.value===He.value?"active":""}`,onClick:()=>nt(He),children:[f.jsx("div",{className:`map-category-icon ${He.icon} ${Be&&Be.value===He.value?"active":""}`,children:f.jsx("img",{src:He.png,width:"22",height:"22"})}),f.jsx("span",{className:`map-category-name ${Be&&Be.value===He.value?"active":""}`,children:o.formatMessage({id:He.label})})]},He.value))})})]}),Be&&f.jsx("div",{className:"map-subgroups-search-results",children:f.jsxs("div",{className:"subgroups-container",children:[f.jsx("div",{className:"subgroups-with-images",children:f.jsx("div",{className:"subgroups-grid",children:ft.filter(He=>He.img).map((He,kt)=>f.jsx("div",{className:"subgroup-item with-image",onClick:()=>{if(cn(He),ht==="route"){const en={id:ke.value,name:ke.label,coordinates:qe.coordinates,location:o.formatMessage({id:Be.label})};Gt(en),Xe(!1)}},style:{backgroundImage:He.img?`url(${Array.isArray(He.img)?He.img[0]:He.img})`:"none",backgroundSize:"cover",backgroundPosition:"center",backgroundColor:"rgba(255,255,255,0.7)",backgroundBlendMode:"lighten"},children:f.jsxs("div",{className:"subgroup-info",children:[f.jsx("h4",{children:He.label}),He.description&&f.jsx("p",{children:He.description})]})},kt))})}),f.jsx("div",{className:"subgroups-without-images",children:ft.filter(He=>!He.img).map((He,kt)=>f.jsx("div",{className:"subgroup-search-item",onClick:()=>ln(He),children:f.jsxs("div",{className:"subgroup-search-box",children:[f.jsxs("div",{className:"subgroup-search-info",children:[f.jsx("div",{className:"subgroup-search-icon",children:f.jsx("img",{src:Be.png,alt:Be.label||"category icon",width:"22",height:"22"})}),f.jsx("span",{className:"subgroup-search-name",children:He.label})]}),He.description&&f.jsx("span",{className:"subgroup-search-description",children:He.description})]})},kt))})]})}),!Be&&f.jsxs(f.Fragment,{children:[!q&&f.jsxs("div",{className:"map-options-section",children:[f.jsxs("div",{className:"map-option-item",onClick:mn,children:[f.jsx("div",{className:"map-option-icon",children:f.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.4885 1.43864C12.4052 1.29299 10.9817 1.29166 8.99984 1.29166C7.01798 1.29166 5.59447 1.29299 4.51115 1.43864C3.44582 1.58187 2.80355 1.85428 2.32883 2.32899C1.85412 2.80371 1.58171 3.44598 1.43848 4.51131C1.29283 5.59463 1.2915 7.01814 1.2915 9C1.2915 10.9819 1.29283 12.4054 1.43848 13.4887C1.58171 14.554 1.85412 15.1963 2.32883 15.671C2.71852 16.0607 3.22112 16.3141 3.97797 16.4715L16.4714 3.97813C16.3139 3.22128 16.0605 2.71868 15.6708 2.32899C15.1961 1.85428 14.5539 1.58187 13.4885 1.43864ZM16.6559 5.56137L11.5508 10.6665L16.0568 15.1726C16.3023 14.7565 16.4624 14.2232 16.5612 13.4887C16.7068 12.4054 16.7082 10.9819 16.7082 9C16.7082 7.60122 16.7075 6.48057 16.6559 5.56137ZM15.173 16.0566L10.6669 11.5504L5.56121 16.6561C6.48041 16.7077 7.60106 16.7083 8.99984 16.7083C10.9817 16.7083 12.4052 16.707 13.4885 16.5614C14.2234 16.4626 14.7569 16.3023 15.173 16.0566ZM13.6551 0.199786C14.859 0.361652 15.809 0.699436 16.5547 1.44511C17.3004 2.19079 17.6382 3.14081 17.8 4.34475C17.9582 5.52099 17.9582 7.02852 17.9582 8.95219V9.04781C17.9582 10.9715 17.9582 12.479 17.8 13.6552C17.6382 14.8592 17.3004 15.8092 16.5547 16.5549C15.809 17.3006 14.859 17.6383 13.6551 17.8002C12.4788 17.9583 10.9713 17.9583 9.04765 17.9583H8.95203C7.02836 17.9583 5.52083 17.9583 4.34459 17.8002C3.14065 17.6383 2.19063 17.3006 1.44495 16.5549C0.699276 15.8092 0.361493 14.8592 0.199626 13.6552C0.0414851 12.479 0.0414935 10.9715 0.0415041 9.04781V8.95218C0.0414933 7.02852 0.0414847 5.52099 0.199626 4.34475C0.361492 3.14081 0.699276 2.19079 1.44495 1.44511C2.19063 0.699437 3.14065 0.361653 4.34459 0.199786C5.52083 0.0416453 7.02836 0.0416537 8.95202 0.0416643H9.04765C10.9713 0.0416535 12.4788 0.0416449 13.6551 0.199786ZM2.95817 6.29768C2.95817 4.41182 4.58689 2.95825 6.49984 2.95825C8.41279 2.95825 10.0415 4.41182 10.0415 6.29768C10.0415 7.98624 9.00333 9.97915 7.2788 10.7161C6.78335 10.9278 6.21633 10.9278 5.72087 10.7161C3.99634 9.97915 2.95817 7.98624 2.95817 6.29768ZM6.49984 4.20825C5.19113 4.20825 4.20817 5.18526 4.20817 6.29768C4.20817 7.5839 5.0318 9.06229 6.21208 9.56668C6.39379 9.64433 6.60589 9.64433 6.78759 9.56668C7.96788 9.06229 8.7915 7.5839 8.7915 6.29768C8.7915 5.18526 7.80855 4.20825 6.49984 4.20825Z",fill:"#0F71EF"}),f.jsx("path",{d:"M7.33317 6.5C7.33317 6.96024 6.96007 7.33333 6.49984 7.33333C6.0396 7.33333 5.6665 6.96024 5.6665 6.5C5.6665 6.03976 6.0396 5.66666 6.49984 5.66666C6.96007 5.66666 7.33317 6.03976 7.33317 6.5Z",fill:"#0F71EF"})]})}),f.jsx("span",{className:"map-option-text",children:f.jsx(pt,{id:"chooseFromMap"})})]}),oe&&G==="origin"&&f.jsxs("div",{className:"map-option-item",onClick:Dt,children:[f.jsx("div",{className:"map-option-icon",children:f.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.4885 1.43864C12.4052 1.29299 10.9817 1.29166 8.99984 1.29166C7.01798 1.29166 5.59447 1.29299 4.51115 1.43864C3.44582 1.58187 2.80355 1.85428 2.32883 2.32899C1.85412 2.80371 1.58171 3.44598 1.43848 4.51131C1.29283 5.59463 1.2915 7.01814 1.2915 9C1.2915 10.9819 1.29283 12.4054 1.43848 13.4887C1.58171 14.554 1.85412 15.1963 2.32883 15.671C2.71852 16.0607 3.22112 16.3141 3.97797 16.4715L16.4714 3.97813C16.3139 3.22128 16.0605 2.71868 15.6708 2.32899C15.1961 1.85428 14.5539 1.58187 13.4885 1.43864ZM16.6559 5.56137L11.5508 10.6665L16.0568 15.1726C16.3023 14.7565 16.4624 14.2232 16.5612 13.4887C16.7068 12.4054 16.7082 10.9819 16.7082 9C16.7082 7.60122 16.7075 6.48057 16.6559 5.56137ZM15.173 16.0566L10.6669 11.5504L5.56121 16.6561C6.48041 16.7077 7.60106 16.7083 8.99984 16.7083C10.9817 16.7083 12.4052 16.707 13.4885 16.5614C14.2234 16.4626 14.7569 16.3023 15.173 16.0566ZM13.6551 0.199786C14.859 0.361652 15.809 0.699436 16.5547 1.44511C17.3004 2.19079 17.6382 3.14081 17.8 4.34475C17.9582 5.52099 17.9582 7.02852 17.9582 8.95219V9.04781C17.9582 10.9715 17.9582 12.479 17.8 13.6552C17.6382 14.8592 17.3004 15.8092 16.5547 16.5549C15.809 17.3006 14.859 17.6383 13.6551 17.8002C12.4788 17.9583 10.9713 17.9583 9.04765 17.9583H8.95203C7.02836 17.9583 5.52083 17.9583 4.34459 17.8002C3.14065 17.6383 2.19063 17.3006 1.44495 16.5549C0.699276 15.8092 0.361493 14.8592 0.199626 13.6552C0.0414851 12.479 0.0414935 10.9715 0.0415041 9.04781V8.95218C0.0414933 7.02852 0.0414847 5.52099 0.199626 4.34475C0.361492 3.14081 0.699276 2.19079 1.44495 1.44511C2.19063 0.699437 3.14065 0.361653 4.34459 0.199786C5.52083 0.0416453 7.02836 0.0416537 8.95202 0.0416643H9.04765C10.9713 0.0416535 12.4788 0.0416449 13.6551 0.199786ZM2.95817 6.29768C2.95817 4.41182 4.58689 2.95825 6.49984 2.95825C8.41279 2.95825 10.0415 4.41182 10.0415 6.29768C10.0415 7.98624 9.00333 9.97915 7.2788 10.7161C6.78335 10.9278 6.21633 10.9278 5.72087 10.7161C3.99634 9.97915 2.95817 7.98624 2.95817 6.29768ZM6.49984 4.20825C5.19113 4.20825 4.20817 5.18526 4.20817 6.29768C4.20817 7.5839 5.0318 9.06229 6.21208 9.56668C6.39379 9.64433 6.60589 9.64433 6.78759 9.56668C7.96788 9.06229 8.7915 7.5839 8.7915 6.29768C8.7915 5.18526 7.80855 4.20825 6.49984 4.20825Z",fill:"#0F71EF"}),f.jsx("path",{d:"M7.33317 6.5C7.33317 6.96024 6.96007 7.33333 6.49984 7.33333C6.0396 7.33333 5.6665 6.96024 5.6665 6.5C5.6665 6.03976 6.0396 5.66666 6.49984 5.66666C6.96007 5.66666 7.33317 6.03976 7.33317 6.5Z",fill:"#0F71EF"})]})}),f.jsx("span",{className:"map-option-text",children:o.formatMessage({id:"mapCurrentLocation"},{loc:($==null?void 0:$.name)||""})})]})]}),!q&&f.jsxs(f.Fragment,{children:[f.jsx("h2",{className:"map-recent-title",children:o.formatMessage({id:"mapRecentSearches"})}),hn.length===0?f.jsx("p",{className:"map-no-recent",children:o.formatMessage({id:"mapNoRecentSearches"})}):f.jsx("ul",{className:"map-destination-list",children:hn.map(He=>f.jsxs("li",{onClick:()=>Gt(He),children:[f.jsx("div",{className:"map-recent-icon",children:f.jsx("svg",{width:"15",height:"15",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.96259 2.95683C5.17657 0.745974 8.77558 0.769482 11.0031 2.997C13.2316 5.22548 13.2541 8.82663 11.0404 11.0404C8.82667 13.2541 5.22552 13.2315 2.99704 11.0031C1.67644 9.68246 1.1311 7.88082 1.36528 6.17239C1.39809 5.933 1.61875 5.76554 1.85814 5.79835C2.09753 5.83117 2.265 6.05183 2.23218 6.29122C2.03386 7.73809 2.49541 9.26398 3.61577 10.3843C5.50841 12.277 8.5555 12.2878 10.4217 10.4216C12.2878 8.55546 12.277 5.50837 10.3844 3.61573C8.49269 1.72405 5.44775 1.71226 3.58132 3.57556L4.01749 3.57775C4.25911 3.57896 4.454 3.77582 4.45279 4.01745C4.45157 4.25907 4.25471 4.45396 4.01309 4.45275L2.52816 4.44529C2.28825 4.44408 2.09406 4.2499 2.09286 4.00999L2.0854 2.52506C2.08418 2.28343 2.27907 2.08657 2.5207 2.08536C2.76232 2.08414 2.95918 2.27904 2.9604 2.52066L2.96259 2.95683ZM7.00002 4.2291C7.24164 4.2291 7.43752 4.42498 7.43752 4.66661V6.81876L8.76773 8.14897C8.93859 8.31983 8.93859 8.59684 8.76773 8.7677C8.59688 8.93855 8.31986 8.93855 8.14901 8.7677L6.56251 7.1812V4.66661C6.56251 4.42498 6.75839 4.2291 7.00002 4.2291Z",fill:"#858585"})})}),f.jsxs("div",{className:"map-destination-info",children:[f.jsx("span",{className:"map-destination-name",children:He.name}),f.jsx("span",{className:"map-destination-location",children:He.location})]}),f.jsx("button",{className:"map-recent-option",children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-dots-vertical",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),f.jsx("path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),f.jsx("path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]})})]},He.id))})]}),q&&Je.length>0&&f.jsx("ul",{className:"map-destination-list",children:Je.map(He=>f.jsxs("li",{onClick:()=>Gt(He),children:[f.jsx("div",{className:"map-recent-icon",children:f.jsx("svg",{width:"15",height:"15",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.96259 2.95683C5.17657 0.745974 8.77558 0.769482 11.0031 2.997C13.2316 5.22548 13.2541 8.82663 11.0404 11.0404C8.82667 13.2541 5.22552 13.2315 2.99704 11.0031C1.67644 9.68246 1.1311 7.88082 1.36528 6.17239C1.39809 5.933 1.61875 5.76554 1.85814 5.79835C2.09753 5.83117 2.265 6.05183 2.23218 6.29122C2.03386 7.73809 2.49541 9.26398 3.61577 10.3843C5.50841 12.277 8.5555 12.2878 10.4217 10.4216C12.2878 8.55546 12.277 5.50837 10.3844 3.61573C8.49269 1.72405 5.44775 1.71226 3.58132 3.57556L4.01749 3.57775C4.25911 3.57896 4.454 3.77582 4.45279 4.01745C4.45157 4.25907 4.25471 4.45396 4.01309 4.45275L2.52816 4.44529C2.28825 4.44408 2.09406 4.2499 2.09286 4.00999L2.0854 2.52506C2.08418 2.28343 2.27907 2.08657 2.5207 2.08536C2.76232 2.08414 2.95918 2.27904 2.9604 2.52066L2.96259 2.95683ZM7.00002 4.2291C7.24164 4.2291 7.43752 4.42498 7.43752 4.66661V6.81876L8.76773 8.14897C8.93859 8.31983 8.93859 8.59684 8.76773 8.7677C8.59688 8.93855 8.31986 8.93855 8.14901 8.7677L6.56251 7.1812V4.66661C6.56251 4.42498 6.75839 4.2291 7.00002 4.2291Z",fill:"#858585"})})}),f.jsxs("div",{className:"map-destination-info",children:[f.jsx("span",{className:"map-destination-name",children:He.name}),f.jsx("span",{className:"map-destination-location",children:He.location})]}),f.jsx("button",{className:"map-recent-option",children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-dots-vertical",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),f.jsx("path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),f.jsx("path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]})})]},He.id))})]})]})]})};class Nv{constructor(){this.isActive=!1,this.stepCount=0,this.heading=0,this.geoPosition=null,this.geoPath=[],this.listeners=new Set,this._lastMagnitude=0,this.motionHandler=this._handleMotion.bind(this),this.orientationHandler=this._handleOrientation.bind(this)}addListener(o){return this.listeners.add(o),()=>this.listeners.delete(o)}_emit(o){const i={type:o,isActive:this.isActive,stepCount:this.stepCount,geoPosition:this.geoPosition,geoPath:this.geoPath.slice(),heading:this.heading};this.listeners.forEach(r=>r(i))}async start(o){this.geoPosition={...o},this.geoPath=[this.geoPosition],this.stepCount=0,this.isActive=!0,await this._startSensors(),this._emit("serviceStateChanged")}stop(){this._stopSensors(),this.isActive=!1,this._emit("serviceStateChanged")}reset(o){this.stepCount=0,o?(this.geoPosition={...o},this.geoPath=[this.geoPosition]):this.geoPath=[],this._emit("serviceStateChanged")}async _startSensors(){if(!(typeof window>"u")){if(typeof DeviceMotionEvent>"u"||typeof DeviceOrientationEvent>"u"){this._emit("sensorsUnsupported");return}try{if(typeof DeviceMotionEvent.requestPermission=="function"&&await DeviceMotionEvent.requestPermission()!=="granted"){this._emit("permissionNeeded");return}if(typeof DeviceOrientationEvent.requestPermission=="function"&&await DeviceOrientationEvent.requestPermission()!=="granted"){this._emit("permissionNeeded");return}}catch(o){console.warn("Sensor permission error",o)}window.addEventListener("devicemotion",this.motionHandler),window.addEventListener("deviceorientationabsolute",this.orientationHandler),window.addEventListener("deviceorientation",this.orientationHandler)}}_stopSensors(){typeof window>"u"||(window.removeEventListener("devicemotion",this.motionHandler),window.removeEventListener("deviceorientationabsolute",this.orientationHandler),window.removeEventListener("deviceorientation",this.orientationHandler))}_handleMotion(o){if(!this.isActive)return;const i=o.accelerationIncludingGravity||o.acceleration;if(!i)return;const r=Math.sqrt(i.x**2+i.y**2+i.z**2),d=12;r>d&&this._lastMagnitude<=d&&(this.stepCount+=1,this._processStep()),this._lastMagnitude=r}_handleOrientation(o){if(!this.isActive)return;const i=o.alpha;i!=null&&(this.heading=(360-i)%360,this._emit("orientationChanged"))}_processStep(){if(!this.geoPosition)return;const o=.7,i=this.heading*Math.PI/180,r=o*Math.cos(i)/111111,d=o*Math.sin(i)/(111111*Math.cos(this.geoPosition.lat*Math.PI/180));this.geoPosition={lat:this.geoPosition.lat+r,lng:this.geoPosition.lng+d},this.geoPath.push({...this.geoPosition}),this._emit("stepDetected")}processGpsData(o,i){this.isActive&&i!=null&&i<8&&(this.geoPosition={...o},this.geoPath.push({...o}),this._emit("gpsCorrection"))}}const w1=new Nv,K3=()=>f.jsxs("div",{style:{position:"relative",width:"80px",height:"80px"},children:[f.jsxs("svg",{width:"80",height:"80",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("defs",{children:f.jsx("filter",{id:"soft-shadow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:f.jsx("feDropShadow",{dx:"0",dy:"4",stdDeviation:"4",floodColor:"#000000",floodOpacity:"0.3"})})}),f.jsxs("g",{filter:"url(#soft-shadow)",children:[f.jsx("path",{d:"M 50 10 L 90 60 A 10 10 0 0 1 80 70 L 20 70 A 10 10 0 0 1 10 60 Z",fill:"#6B7280"}),f.jsx("path",{d:"M 50 5 L 90 55 A 10 10 0 0 1 80 65 L 20 65 A 10 10 0 0 1 10 55 Z",fill:"#4A90E2"})]})]}),f.jsx("div",{style:{position:"absolute",top:"45%",left:"50%",transform:"translate(-50%, -50%)"},children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M13 4m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),f.jsx("path",{d:"M7 21l3 -4"}),f.jsx("path",{d:"M16 21l-2 -4l-3 -3l1 -6"}),f.jsx("path",{d:"M6 12l2 -3l4 -1l3 3l3 1"})]})})]}),Rv="https://demotiles.maplibre.org/terrain-tiles/tiles/0/0/0.png",Av=B.forwardRef(({userLocation:e,routeSteps:o,currentStep:i,isInfoModalOpen:r,isMapModalOpen:d,is3DView:m,routeGeo:x,alternativeRoutes:c=[],onSelectAlternativeRoute:L,showAlternativeRoutes:T=!1},P)=>{var Pe;const D=B.useRef(null),N=e&&e.length===2?e:[36.297,59.606],[$,U]=B.useState(null),[q,H]=B.useState([]),[G,te]=B.useState(w1.isActive),[oe,Ce]=B.useState(0),[ae,Ne]=B.useState(!1),[Fe,ye]=B.useState(null),Ke=Gi(ke=>ke.language);B.useEffect(()=>{let ke=!1;const de=new AbortController;return(async()=>{try{const Ee=await fetch(Rv,{signal:de.signal});if(ke)return;if(Ee.ok){const K=Ee.headers.get("content-type")||"";K.includes("image/png")||K.includes("image/jpeg")?Ne(!0):(console.warn("Unexpected terrain tile content type. Disabling terrain.",K),Ne(!1))}else console.warn("Terrain tile request failed with status",Ee.status),Ne(!1)}catch(Ee){ke||(console.warn("Failed to verify terrain tiles. Disabling terrain.",Ee),Ne(!1))}})(),()=>{ke=!0,de.abort()}},[]);const Me=G?[]:c.flatMap((ke,de)=>[`alt-route-line-${de}`,`alt-route-border-${de}`]);B.useEffect(()=>w1.addListener(de=>{te(de.isActive),de.geoPosition&&U(de.geoPosition),de.geoPath&&H(de.geoPath),de.heading!==void 0&&de.heading!==null&&Ce(de.heading)}),[]),B.useEffect(()=>{const ke=ll(Ke);fetch(ke).then(de=>de.json()).then(ye).catch(de=>console.error("failed to load geojson",de))},[Ke]);const qe=()=>{if(!Fe)return null;const ke=new Set;return Fe.features.filter(de=>{var Be;if(de.geometry.type!=="Point")return!1;const{group:je,subGroupValue:Ee}=de.properties||{},K=(Be=Po[je])==null?void 0:Be.find(it=>it.value===Ee);return!(K&&K.img&&(Array.isArray(K.img)?K.img.length>0:!0))||ke.has(Ee)?!1:(ke.add(Ee),!0)}).map((de,je)=>{var mt;const[Ee,K]=de.geometry.coordinates,{group:be,subGroupValue:Be}=de.properties||{},it=(mt=Po[be])==null?void 0:mt.find(xt=>xt.value===Be),ft=Array.isArray(it.img)?it.img[0]:it.img;return f.jsx(Wr,{longitude:Ee,latitude:K,anchor:"center",children:f.jsxs("div",{className:"image-marker-container",children:[f.jsx("svg",{width:"55",height:"63",viewBox:"0 0 55 63",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M54.6562 27.3281C54.6562 39.6299 46.5275 50.0319 35.3486 53.459C35.1079 53.8493 34.8535 54.2605 34.585 54.6924L33.1699 56.9687C30.7353 60.8845 29.5175 62.8418 27.7412 62.8418C25.9651 62.8417 24.7479 60.8842 22.3135 56.9687L20.8975 54.6924C20.6938 54.3648 20.4993 54.0485 20.3115 53.7451C8.61859 50.6476 8.59898e-05 39.9953 -1.19455e-06 27.3281C-5.34814e-07 12.2351 12.2351 -1.85429e-06 27.3281 -1.19455e-06C42.4211 0.000106671 54.6562 12.2352 54.6562 27.3281Z",fill:"white"})}),f.jsx("div",{className:"image-marker-content",style:{backgroundImage:`url(${ft})`}})]})},`image-${je}`)})};B.useEffect(()=>{if(D.current){const ke=setTimeout(()=>{D.current.resize(),e&&e.length===2&&D.current.flyTo({center:[e[1],e[0]],zoom:m?17:18,pitch:m?60:0})},400);return()=>clearTimeout(ke)}},[d,e,m]),B.useEffect(()=>{D.current&&(D.current.setPitch(m?60:0),D.current.easeTo({zoom:m?17:18}))},[m]);const Re=B.useRef(0);B.useEffect(()=>{D.current&&(Re.current=D.current.getPitch())},[m]),B.useEffect(()=>{const ke=D.current;if(!ke)return;const de=ke.getCanvas(),je=K=>{K.preventDefault(),Re.current=ke.getPitch()},Ee=()=>{ke.setPitch(Re.current)};return de.addEventListener("webglcontextlost",je,!1),de.addEventListener("webglcontextrestored",Ee,!1),()=>{de.removeEventListener("webglcontextlost",je,!1),de.removeEventListener("webglcontextrestored",Ee,!1)}},[]);const dt=B.useRef(null);B.useEffect(()=>{if(!D.current)return;if(dt.current===null){dt.current=oe,D.current.setBearing(oe);return}let ke=oe-dt.current;ke>180&&(ke-=360),ke<-180&&(ke+=360),dt.current=(dt.current+ke*.2+360)%360,D.current.easeTo({bearing:dt.current,duration:200})},[oe]),B.useEffect(()=>{D.current&&(G&&$?D.current.setCenter([$.lng,$.lat]):!G&&e&&e.length===2&&D.current.setCenter([e[1],e[0]]))},[$,e,G]),B.useEffect(()=>{if(D.current&&x&&i<x.geometry.coordinates.length-1){const ke=x.geometry.coordinates[i],de=x.geometry.coordinates[i+1],je=new Do.LngLatBounds([ke[0],ke[1]],[ke[0],ke[1]]);je.extend([de[0],de[1]]);const Ee=Math.hypot(de[0]-ke[0],de[1]-ke[1])*1e5,K={padding:80,duration:700};Ee<50&&(K.maxZoom=17),D.current.fitBounds(je,K)}},[i,x]),B.useEffect(()=>{var ke;if(D.current&&x){const de=((ke=x.geometry)==null?void 0:ke.coordinates)||[];if(de.length>0){const je=new Do.LngLatBounds([de[0][0],de[0][1]],[de[0][0],de[0][1]]);de.forEach(([Ee,K])=>je.extend([Ee,K])),D.current.fitBounds(je,{padding:80,duration:700})}}},[x]);const Xe=()=>{var ke;if(D.current&&x){const de=((ke=x.geometry)==null?void 0:ke.coordinates)||[];if(de.length>0){const je=new Do.LngLatBounds([de[0][0],de[0][1]],[de[0][0],de[0][1]]);de.forEach(([Ee,K])=>je.extend([Ee,K])),D.current.fitBounds(je,{padding:80,duration:700,maxZoom:16})}}};B.useImperativeHandle(P,()=>({fitRouteBounds:Xe,getMap:()=>D.current}));const ht=()=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"34",height:"34",viewBox:"0 0 24 24",fill:"#ff0000",stroke:"white",strokeWidth:"1",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M18.364 4.636a9 9 0 0 1 .203 12.519l-.203 .21l-4.243 4.242a3 3 0 0 1 -4.097 .135l-.144 -.135l-4.244 -4.243a9 9 0 0 1 12.728 -12.728zm-6.364 3.364a3 3 0 1 0 0 6a3 3 0 0 0 0 -6z"})]});return f.jsxs(Kd,{ref:D,mapLib:Do,mapStyle:Qd,interactiveLayerIds:Me,onClick:ke=>{const de=ke.features&&ke.features[0];if(de&&de.layer&&(de.layer.id.startsWith("alt-route-line-")||de.layer.id.startsWith("alt-route-border-"))){const je=parseInt(de.layer.id.replace(/alt-route-(?:line|border)-/,""));!Number.isNaN(je)&&c[je]&&L&&L(c[je])}},initialViewState:{longitude:N[1],latitude:N[0],zoom:m?17:18,pitch:0},attributionControl:!1,terrain:m&&ae?{source:"terrain",exaggeration:1.5}:void 0,children:[!G&&f.jsx(Wr,{longitude:e[1],latitude:e[0],anchor:"center",children:f.jsx(K3,{})}),G&&$&&f.jsx(Wr,{longitude:$.lng,latitude:$.lat,anchor:"center",children:f.jsx(K3,{})}),G&&q.length>1&&f.jsx(Io,{id:"dr-path",type:"geojson",data:{type:"Feature",geometry:{type:"LineString",coordinates:q.map(ke=>[ke.lng,ke.lat])}},children:f.jsx(ds,{id:"dr-line",type:"line",paint:{"line-color":"#e53935","line-width":3,"line-opacity":.7}})}),o&&o.length>0&&f.jsx(Wr,{longitude:o[o.length-1].coordinates[1],latitude:o[o.length-1].coordinates[0],anchor:"bottom",children:f.jsx(ht,{})}),x&&f.jsxs(Io,{id:"route",type:"geojson",data:x,children:[f.jsx(ds,{id:"route-line",type:"line",paint:{"line-color":"white","line-width":8},layout:{"line-cap":"round","line-join":"round"}}),f.jsx(ds,{id:"route-border",type:"line",paint:{"line-color":"#0F71EF","line-width":8,"line-dasharray":[0,2]},layout:{"line-cap":"round","line-join":"round"}})]}),!G&&T&&c.map((ke,de)=>f.jsxs(Io,{id:`alt-route-${de}`,type:"geojson",data:ke.geo,children:[f.jsx(ds,{id:`alt-route-border-${de}`,type:"line",paint:{"line-color":"#d5dada","line-width":8},layout:{"line-cap":"round","line-join":"round"}}),f.jsx(ds,{id:`alt-route-line-${de}`,type:"line",paint:{"line-color":"grey","line-width":8,"line-dasharray":[0,2]},layout:{"line-cap":"round","line-join":"round"}})]},de)),f.jsx(y2,{routeCoords:(Pe=x==null?void 0:x.geometry)==null?void 0:Pe.coordinates}),qe()]})}),jv="https://api.aipaa.ir/auth/token/",Ov="https://api.aipaa.ir/api/v1/voice/tts-file-response/?expire-file=yes";let Id=null,v2=0;const zv="Joneidd",Fv="1qaz!@#!QAZ",Bv="cK5uzw5ydbUr79iybFYhxlWOKnFXqYlsp07JULr8",$v=async()=>{const e=await fetch(jv,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:zv,password:Fv,client_id:Bv,grant_type:"password"})});if(!e.ok)throw new Error(`Authentication failed with status ${e.status}`);const o=await e.json(),i=o.access||o.access_token||o.token,r=o.expires_in||o.expire_in||300;if(!i)throw new Error("Authentication response missing access token");return Id=i,v2=Date.now()+(r-5)*1e3,Id},Q3=async()=>Id&&Date.now()<v2?Id:(Id=null,$v()),Vv=async(e,o={})=>{if(!e||!e.trim())throw new Error("No text provided for TTS");let i=await Q3();for(let r=0;r<2;r+=1){const d=new FormData;d.append("input_text",e),Object.entries(o).forEach(([c,L])=>{L!=null&&d.append(c,typeof L=="object"?JSON.stringify(L):L)});const m=await fetch(Ov,{method:"POST",headers:{Authorization:`Bearer ${i}`},body:d});if(m.status===401&&r===0){Id=null,v2=0,i=await Q3();continue}if(!m.ok){let c=`TTS request failed with status ${m.status}`;try{if((m.headers.get("content-type")||"").includes("application/json")){const T=await m.json();T!=null&&T.detail?c=Array.isArray(T.detail)?T.detail.map(P=>P.msg||P).join(", "):T.detail:T!=null&&T.message&&(c=T.message)}}catch{}throw new Error(c)}if((m.headers.get("content-type")||"").includes("application/json")){const c=await m.json();if(c!=null&&c.file){const L=c.file.startsWith("data:")?c.file.split(",")[1]:c.file,T=atob(L),P=new Array(T.length);for(let N=0;N<T.length;N+=1)P[N]=T.charCodeAt(N);const D=new Uint8Array(P);return new Blob([D],{type:c.mime_type||"audio/wav"})}if(c!=null&&c.file_url){const L=await fetch(c.file_url);if(!L.ok)throw new Error("Failed to download TTS audio file");return L.blob()}throw new Error("Unexpected TTS response format")}return m.blob()}throw new Error("Unauthorized TTS request")},e6={fetchSpeech:Vv},Hv=()=>{const e=ii(),o=h0(),i=B.useRef(null),r=B.useRef(typeof Audio<"u"?new Audio:null),d=B.useRef(null),[m,x]=B.useState(!0),[c,L]=B.useState(!0),[T,P]=B.useState(null),[D,N]=B.useState(0),$=sessionStorage.getItem("qrLat"),U=sessionStorage.getItem("qrLng"),q=sessionStorage.getItem("routeSahns")?JSON.parse(sessionStorage.getItem("routeSahns")):[],[H,G]=B.useState($&&U?[parseFloat($),parseFloat(U)]:[36.288,59.6157]),[te,oe]=B.useState(!0),[Ce,ae]=B.useState(!1),[Ne,Fe]=B.useState(!1),[ye,Ke]=B.useState(!1),[Me,qe]=B.useState(null),[Re,dt]=B.useState(""),[Xe,ht]=B.useState("on"),[Pe,ke]=B.useState(!1),[de,je]=B.useState(!1),[Ee,K]=B.useState(!1),[be,Be]=B.useState(!1),[it,ft]=B.useState(!1),[mt,xt]=B.useState(!1),[ut,vt]=B.useState(!1),[Tt,Rt]=B.useState(!1),[Bt,Pt]=B.useState(null),[jt,hn]=B.useState([]),[Mn,jn]=B.useState(!1),[Jn,Yt]=B.useState(w1.isActive),xn=qs(),{origin:Nn,destination:Dn,routeSteps:bn,routeGeo:yt,alternativeRoutes:Et,transportMode:nt,gender:Le,setOrigin:Je,setDestination:ln,setRouteGeo:cn,setRouteSteps:Gt,setAlternativeRoutes:pn}=cl(),Cn=Gi(O=>O.language),[ct,Ot]=B.useState({zoom:Tt?17:18,center:H||[36.288,59.6157],pitch:Tt?60:0,isAlternativeRoutes:!1});B.useEffect(()=>()=>{r.current&&(r.current.pause(),r.current.currentTime=0,r.current.src=""),d.current&&(URL.revokeObjectURL(d.current),d.current=null)},[]),B.useEffect(()=>w1.addListener(W=>{Yt(W.isActive),W.geoPosition&&Pt(W.geoPosition),W.geoPath&&hn(W.geoPath)}),[]),B.useEffect(()=>{const O=r.current;if(!O)return;const W=()=>{O.pause(),O.currentTime=0,d.current&&(URL.revokeObjectURL(d.current),d.current=null),O.src=""},J=(T==null?void 0:T.steps)||[];if(!Pe||Xe==="off"||!Array.isArray(J)||J.length===0){W();return}const re=J[D];if(!re){W();return}if(Xe==="alertOnly"&&!new Set(["left","right","bend-left","bend-right","down","arrived"]).has(re.direction)){W();return}const ve=[];re.instruction&&ve.push(re.instruction);const pe=J[D+1];pe!=null&&pe.instruction&&ve.push(e.formatMessage({id:"nextStepAnnouncement"},{instruction:pe.instruction}));const Te=ve.join(". ").trim();if(!Te){W();return}let Ue=!1;return(async()=>{try{W();const $e=await e6.fetchSpeech(Te,Cn?{language:Cn}:{});if(Ue)return;const _t=URL.createObjectURL($e);d.current=_t,O.src=_t,await O.play()}catch($e){Ue||(console.error("Failed to play navigation audio",$e),Kn.error(e.formatMessage({id:"ttsPlaybackError"})))}})(),()=>{Ue=!0,O.pause()}},[D,e,Pe,Cn,T,Xe]),B.useEffect(()=>{Jn&&ft(!1)},[Jn]),B.useEffect(()=>{const O=sessionStorage.getItem("routeGeo"),W=sessionStorage.getItem("routeSteps"),J=sessionStorage.getItem("alternativeRoutes"),re=sessionStorage.getItem("origin"),fe=sessionStorage.getItem("destination");if(O&&W){cn(JSON.parse(O)),Gt(JSON.parse(W));let ve=J?JSON.parse(J):[];const pe=re?JSON.parse(re):Nn,Te=fe?JSON.parse(fe):Dn;ve=ve.map(Ue=>({...Ue,from:Ue.from||(pe==null?void 0:pe.name)||"",to:Ue.to||(Te==null?void 0:Te.name)||""})),pn(ve),re&&Je(JSON.parse(re)),fe&&ln(JSON.parse(fe))}},[cn,Gt,pn,Je,ln]),B.useEffect(()=>{var ve,pe;if(!$||!U)return;const O=parseFloat($),W=parseFloat(U),J=sessionStorage.getItem("routeGeo"),re=sessionStorage.getItem("routeSteps");if(J&&re)return;const fe=!Nn||((ve=Nn.coordinates)==null?void 0:ve[0])!==O||((pe=Nn.coordinates)==null?void 0:pe[1])!==W;if(!bn.length||fe){const Te={name:e.formatMessage({id:"mapCurrentLocationName"}),coordinates:[O,W]},Ue=Dn||{name:e.formatMessage({id:"destSahnEnqelabName"}),coordinates:[36.2975,59.6072]},st=ll(Cn);fetch(st).then($e=>$e.json()).then($e=>{const _t=Bf(Te,Ue,$e,"walking",Le);if(!_t){Kn.error(e.formatMessage({id:"noRouteFound"})),cn(null),Gt([]),pn([]);return}const{geo:bt,steps:zt,alternatives:Ct,sahns:on}=_t;Je(Te),ln(Ue),cn(bt),Gt(zt),pn(Ct),sessionStorage.setItem("routeSahns",JSON.stringify(on))}).catch($e=>console.error("failed to build route from QR",$e))}},[$,U,Nn,Dn,bn.length,Cn,e,Le,Je,ln,cn,Gt,pn]),B.useEffect(()=>{const O=sessionStorage.getItem("routeGeo"),W=sessionStorage.getItem("routeSteps");if(O&&W&&(!yt||!bn.length)||!Nn||!Dn||yt&&bn.length)return;const J=ll(Cn);fetch(J).then(re=>re.json()).then(re=>{const fe=Bf(Nn,Dn,re,nt,Le);if(!fe){Kn.error(e.formatMessage({id:"noRouteFound"})),cn(null),Gt([]),pn([]);return}const{geo:ve,steps:pe,alternatives:Te,sahns:Ue}=fe;cn(ve),Gt(pe),pn(Te),sessionStorage.setItem("routeSahns",JSON.stringify(Ue))}).catch(re=>console.error("failed to rebuild route",re))},[nt,Le,Nn,Dn,Cn,e,yt,bn.length,cn,Gt,pn]);const et=O=>{if(!O)return 0;let W=0;return O.forEach(J=>{const re=J.time;re.includes(e.formatMessage({id:"minutesUnit"}))?W+=parseInt(re.split(" ")[0]):re.includes(e.formatMessage({id:"secondsUnit"}))&&(W+=Math.ceil(parseInt(re.split(" ")[0])/60))}),W};B.useEffect(()=>{if(!yt||bn.length)return;let O,W,J;try{const re=sessionStorage.getItem("routeSummaryData");if(re){const fe=JSON.parse(re);O=parseInt(fe.time,10),W=parseInt(fe.distance,10),J=fe.mode}}catch(re){console.warn("failed to read stored route summary",re)}if(!O||!W){const re=yt.geometry.coordinates||[];if(re.length===0)return;W=re.slice(1).reduce((fe,ve,pe)=>{const Te=re[pe];return fe+Math.hypot(ve[0]-Te[0],ve[1]-Te[1])*1e5},0),O=Math.max(1,Math.round(W/60))}P(re=>({steps:[],totalTime:Dt(O),arrivalTime:mn(O),totalDistance:`${Math.round(W)} ${e.formatMessage({id:"meters"})}`,alternativeRoutes:[],mode:J||nt,...re}))},[yt,bn.length,nt,e]);const $t=()=>{if(!Me){Kn.error(e.formatMessage({id:"emergencySelectType"}));return}if(!Re.trim()){Kn.error(e.formatMessage({id:"emergencyEnterDetails"}));return}const O={type:Me,description:Re,location:H,timestamp:new Date().toISOString()};console.log("Emergency data:",O),setTimeout(()=>{Kn.success(e.formatMessage({id:"emergencySubmissionSuccess"})),qe(null),dt(""),Ft()},1e3)};B.useEffect(()=>{(()=>{var W;if(!navigator.geolocation){vt(!0);return}(W=navigator.permissions)==null||W.query({name:"geolocation"}).then(J=>{vt(J.state==="denied"&&!c);const re=()=>{vt(J.state==="denied"&&!c)};return J.addEventListener("change",re),()=>J.removeEventListener("change",re)}).catch(()=>{vt(!1)})})()},[c]),B.useEffect(()=>{var O;navigator.geolocation&&((O=navigator.permissions)==null||O.query({name:"geolocation"}).then(W=>{vt(W.state==="denied"&&!c)}))},[c]),B.useEffect(()=>{var O;navigator.geolocation&&((O=navigator.permissions)==null||O.query({name:"geolocation"}).then(W=>{vt(W.state==="denied"&&!c)}))},[c]);const Dt=O=>{if(O<1){const re=O*60;return`${Math.round(re)} ${e.formatMessage({id:"secondsUnit"})}`}const W=Math.floor(O),J=Math.round((O-W)*60);return J>0?`${W} ${e.formatMessage({id:"minutesUnit"})} ${J} ${e.formatMessage({id:"secondsUnit"})}`:`${W} ${e.formatMessage({id:"minutesUnit"})}`},mn=O=>{const W=new Date,J=new Date(W.getTime()+O*6e4);let re=J.getHours();const fe=J.getMinutes().toString().padStart(2,"0");return re=re%12,re=re||12,`${re}:${fe}`},Fn=O=>O*Math.PI/180,nn=O=>O*180/Math.PI,sr=(O,W)=>{const[J,re]=O,[fe,ve]=W,pe=Math.sin(Fn(fe-J))*Math.cos(Fn(ve)),Te=Math.cos(Fn(re))*Math.sin(Fn(ve))-Math.sin(Fn(re))*Math.cos(Fn(ve))*Math.cos(Fn(fe-J));return(nn(Math.atan2(pe,Te))+360)%360},He=(O,W)=>{const J=(O-W+540)%360-180,re=Math.abs(J);return re<30?"up":re>150?"down":re<100?J>0?"left":"right":J>0?"bend-left":"bend-right"};B.useEffect(()=>{bn.length||yt||fetch("./data/routeData.json").then(O=>O.json()).then(O=>{const W=O.route.steps,J=et(W),re=Dt(J),fe=mn(J);P({...O.route,totalTime:re,arrivalTime:fe})}).catch(O=>console.error("Error loading route data:",O))},[bn.length,yt]),B.useEffect(()=>{if(!bn||bn.length===0||!yt)return;const O=yt.geometry.coordinates,W=bn.map(($e,_t)=>{let bt=0;if(_t>0){const[Qt,Xt]=O[_t-1],[sn,an]=O[_t];bt=Math.hypot(sn-Qt,an-Xt)*1e5}const zt=$e.type?e.formatMessage({id:$e.type},{name:$e.name,title:$e.title,num:_t+1}):$e.instruction||"",Ct=$e.landmark?`${zt}، ${e.formatMessage({id:"landmarkSuffix"},{name:$e.landmark,distance:Math.round(bt)})}`:zt;let on="arrived";if(_t<O.length-2){const Qt=sr(O[_t],O[_t+1]),Xt=sr(O[_t+1],O[_t+2]);on=He(Qt,Xt)}return{id:_t+1,instruction:Ct,distance:`${Math.round(bt)} ${e.formatMessage({id:"meters"})}`,time:`${Math.max(1,Math.round(bt/60))} ${e.formatMessage({id:"minutesUnit"})}`,coordinates:$e.coordinates,services:$e.services||{},direction:on}});let J,re,fe;try{const $e=sessionStorage.getItem("routeSummaryData");if($e){const _t=JSON.parse($e);J=parseInt(_t.time,10),re=parseInt(_t.distance,10),fe=_t.mode}}catch($e){console.warn("failed to read stored route summary",$e)}const ve=J||et(W),pe=re||W.reduce(($e,_t)=>$e+parseInt(_t.distance),0),Te=Dt(ve),Ue=mn(ve),st=(Et||[]).map(($e,_t)=>{const bt=$e.geo.geometry.coordinates,zt=$e.steps.map((Qt,Xt)=>{let sn=0;if(Xt>0){const[Bn,kr]=bt[Xt-1],[vi,Ao]=bt[Xt];sn=Math.hypot(vi-Bn,Ao-kr)*1e5}const an=Qt.type?e.formatMessage({id:Qt.type},{name:Qt.name,title:Qt.title,num:Xt+1}):Qt.instruction||"",mr=Qt.landmark?`${an}، ${e.formatMessage({id:"landmarkSuffix"},{name:Qt.landmark,distance:Math.round(sn)})}`:an;let er="arrived";if(Xt<bt.length-2){const Bn=sr(bt[Xt],bt[Xt+1]),kr=sr(bt[Xt+1],bt[Xt+2]);er=He(Bn,kr)}return{id:Xt+1,instruction:mr,distance:`${Math.round(sn)} ${e.formatMessage({id:"meters"})}`,time:`${Math.max(1,Math.round(sn/60))} ${e.formatMessage({id:"minutesUnit"})}`,coordinates:Qt.coordinates,direction:er}}),Ct=et(zt),on=zt.reduce((Qt,Xt)=>Qt+parseInt(Xt.distance),0);return{id:_t+1,steps:zt,geo:$e.geo,totalTime:Dt(Ct),totalDistance:`${on} ${e.formatMessage({id:"meters"})}`,from:$e.from,to:$e.to,via:$e.sahns||[]}});P({steps:W,totalTime:Te,arrivalTime:Ue,totalDistance:`${pe} ${e.formatMessage({id:"meters"})}`,alternativeRoutes:st,mode:fe||nt});try{sessionStorage.setItem("routeSummaryData",JSON.stringify({time:ve.toString(),distance:pe.toString(),mode:nt}))}catch($e){console.warn("failed to persist route summary",$e)}},[bn,yt,Et,nt]),B.useEffect(()=>{if(!T)return;const O=setInterval(()=>{const W=et(T.steps),J=mn(W);P(re=>({...re,arrivalTime:J}))},6e4);return()=>clearInterval(O)},[T]),B.useEffect(()=>{if((!$||!U)&&navigator.geolocation){const O={enableHighAccuracy:!0,timeout:1e4,maximumAge:0},W=fe=>{sessionStorage.getItem("qrLat")&&sessionStorage.getItem("qrLng")||(G([fe.coords.latitude,fe.coords.longitude]),w1.processGpsData({lat:fe.coords.latitude,lng:fe.coords.longitude},fe.coords.accuracy))},J=fe=>{console.warn(`ERROR(${fe.code}): ${fe.message}`),G([36.288,59.6157])},re=navigator.geolocation.watchPosition(W,J,O);return()=>navigator.geolocation.clearWatch(re)}},[$,U]),B.useEffect(()=>{if(!T||!Pe)return;const O=setInterval(()=>{D<T.steps.length-1?N(W=>W+1):(ke(!1),Rt(!1))},3e4);return()=>clearInterval(O)},[D,T,Pe]);const kt=()=>{x(!m)},en=()=>{L(!c)},Ft=()=>{Ne?(qe(null),dt(""),je(!0),setTimeout(()=>{Fe(!1),je(!1)},300)):(Fe(!0),ye&&(K(!0),setTimeout(()=>{Ke(!1),K(!1)},300)))},Vt=()=>{ye?(K(!0),setTimeout(()=>{Ke(!1),K(!1),L(te)},300)):(oe(c),Ke(!0),L(!1),Ne&&(je(!0),setTimeout(()=>{Fe(!1),je(!1)},300)))},Qn=()=>{var W;const O=!Pe;if(ke(O),O&&D>=((W=T==null?void 0:T.steps)==null?void 0:W.length)-1&&N(0),O){const[J,re]=H;w1.start({lat:J,lng:re})}else w1.stop();!be&&!it&&Rt(O)},qn=O=>{qe(O)},tr=O=>{ht(O)},Tr=()=>{if(i.current){const O=i.current.getMap();O&&Ot({zoom:O.getZoom(),center:[O.getCenter().lat,O.getCenter().lng],pitch:O.getPitch()})}xt(Tt),Rt(!1),Be(!0),L(!0),i.current&&i.current.fitRouteBounds&&i.current.fitRouteBounds()},_r=()=>{if(i.current){const O=i.current.getMap();O&&O.flyTo({center:[ct.center[1],ct.center[0]],zoom:ct.zoom,pitch:ct.pitch,duration:700})}Rt(mt),Be(!1)},fs=()=>{var O,W;if((O=i.current)!=null&&O.getMap){const J=i.current.getMap();Ot({zoom:J.getZoom(),center:[J.getCenter().lat,J.getCenter().lng],pitch:J.getPitch(),isAlternativeRoutes:!0})}xt(Tt),Rt(!1),ft(!0),jn(!0),L(!0),(W=i.current)!=null&&W.fitRouteBounds&&i.current.fitRouteBounds()},yi=()=>{var O;(O=i.current)!=null&&O.getMap&&i.current.getMap().flyTo({center:[ct.center[1],ct.center[0]],zoom:ct.zoom,pitch:ct.pitch,duration:700}),Rt(mt),ft(!1),jn(!1)},ne=O=>{if(!(O!=null&&O.geo)||!(O!=null&&O.steps)){console.warn("Selected alternative route is missing geo or steps");return}const W={geo:yt,steps:bn,from:(Nn==null?void 0:Nn.name)||"",to:(Dn==null?void 0:Dn.name)||"",via:O.via||[],sahns:q},J=Et.filter(re=>re.geo!==O.geo);W.geo&&W.steps&&J.push(W),cn(O.geo),Gt(O.steps),pn(J),sessionStorage.setItem("routeGeo",JSON.stringify(O.geo)),sessionStorage.setItem("routeSteps",JSON.stringify(O.steps)),sessionStorage.setItem("alternativeRoutes",JSON.stringify(J)),sessionStorage.setItem("routeSahns",JSON.stringify(O.via||[])),N(0),ke(!1),ft(!1),jn(!1)},V=O=>{switch(O){case"right":return f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-right",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M5 12l14 0"}),f.jsx("path",{d:"M15 16l4 -4"}),f.jsx("path",{d:"M15 8l4 4"})]});case"left":return f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-left",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M5 12l14 0"}),f.jsx("path",{d:"M5 12l4 4"}),f.jsx("path",{d:"M5 12l4 -4"})]});case"up":return f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-up",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M12 5l0 14"}),f.jsx("path",{d:"M16 9l-4 -4"}),f.jsx("path",{d:"M8 9l4 -4"})]});case"down":return f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-down",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M12 5l0 14"}),f.jsx("path",{d:"M16 15l-4 4"}),f.jsx("path",{d:"M8 15l4 4"})]});case"bend-right":return f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-merge-alt-left",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M8 7l4 -4l4 4"}),f.jsx("path",{d:"M18 21v.01"}),f.jsx("path",{d:"M18 18.01v.01"}),f.jsx("path",{d:"M17 15.02v.01"}),f.jsx("path",{d:"M14 13.03v.01"}),f.jsx("path",{d:"M12 3v5.394a6.737 6.737 0 0 1 -3 5.606a6.737 6.737 0 0 0 -3 5.606v1.394"})]});case"bend-left":return f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-merge-alt-right",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M16 7l-4 -4l-4 4"}),f.jsx("path",{d:"M6 21v.01"}),f.jsx("path",{d:"M6 18.01v.01"}),f.jsx("path",{d:"M7 15.02v.01"}),f.jsx("path",{d:"M10 13.03v.01"}),f.jsx("path",{d:"M12 3v5.394a6.737 6.737 0 0 0 3 5.606a6.737 6.737 0 0 1 3 5.606v1.394"})]});case"arrived":return f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"#e74c3c",className:"icon icon-tabler icons-tabler-filled icon-tabler-map-pin",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M18.364 4.636a9 9 0 0 1 .203 12.519l-.203 .21l-4.243 4.242a3 3 0 0 1 -4.097 .135l-.144 -.135l-4.244 -4.243a9 9 0 0 1 12.728 -12.728zm-6.364 3.364a3 3 0 1 0 0 6a3 3 0 0 0 0 -6z"})]});default:return f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-right",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M5 12l14 0"}),f.jsx("path",{d:"M15 16l4 -4"}),f.jsx("path",{d:"M15 8l4 4"})]})}};return T?f.jsxs("div",{className:"routing-page",children:[c&&m&&!be&&!it&&f.jsx("div",{className:"info-modal-overlay",onClick:O=>{O.target===O.currentTarget&&en()}}),(Ne||ye)&&f.jsx("div",{className:"modal-overlay",onClick:()=>{Ne&&Ft(),ye&&Vt()}}),(Ne||de)&&f.jsxs("div",{className:`emergency-modal ${de?"closing":""}`,children:[f.jsx("div",{className:"modal-toggle2 emergency-toggle",onClick:Ft,children:f.jsx("div",{className:"toggle-handle2"})}),f.jsxs("div",{className:"emergency-modal-content",children:[f.jsx("h3",{className:"emergency-modal-title",children:f.jsx(pt,{id:"emergencyTitle"})}),f.jsx("p",{className:"emergency-modal-subtitle",children:f.jsx(pt,{id:"emergencySubtitle"})}),f.jsxs("div",{className:"emergency-options",children:[f.jsx("button",{className:`emergency-option ${Me==="fire"?"selected":""}`,onClick:()=>qn("fire"),children:f.jsx(pt,{id:"emergencyFire"})}),f.jsx("button",{className:`emergency-option ${Me==="theft"?"selected":""}`,onClick:()=>qn("theft"),children:f.jsx(pt,{id:"emergencyTheft"})}),f.jsx("button",{className:`emergency-option ${Me==="medical"?"selected":""}`,onClick:()=>qn("medical"),children:f.jsx(pt,{id:"emergencyMedical"})}),f.jsx("button",{className:`emergency-option ${Me==="missing"?"selected":""}`,onClick:()=>qn("missing"),children:f.jsx(pt,{id:"emergencyMissing"})})]}),f.jsx("div",{className:"emergency-description",children:f.jsx("textarea",{placeholder:e.formatMessage({id:"emergencyPlaceholder"}),className:"emergency-textarea",value:Re,onChange:O=>dt(O.target.value)})}),f.jsx("button",{className:"emergency-submit-button",onClick:$t,children:f.jsx(pt,{id:"emergencySubmit"})})]})]}),(ye||Ee)&&f.jsxs("div",{className:`sound-modal ${Ee?"closing":""}`,children:[f.jsx("div",{className:"modal-toggle2 sound-toggle",onClick:Vt,children:f.jsx("div",{className:"toggle-handle2"})}),f.jsxs("div",{className:"sound-modal-content",children:[f.jsx("h3",{className:"sound-modal-title",children:f.jsx(pt,{id:"soundSettingsTitle"})}),f.jsxs("div",{className:"sound-options",children:[f.jsxs("div",{className:"option-box",children:[f.jsx("button",{className:`sound-option ${Xe==="on"?"selected":""}`,onClick:()=>tr("on"),children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"34",height:"34",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-volume",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M15 8a5 5 0 0 1 0 8"}),f.jsx("path",{d:"M17.7 5a9 9 0 0 1 0 14"}),f.jsx("path",{d:"M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5"})]})}),f.jsx("span",{className:`option-text ${Xe==="on"?"selected":""}`,children:f.jsx(pt,{id:"soundOptionOn"})})]}),f.jsxs("div",{className:"option-box",children:[f.jsx("button",{className:`sound-option ${Xe==="alertOnly"?"selected":""}`,onClick:()=>tr("alertOnly"),children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"34",height:"34",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-alert-triangle",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M12 9v4"}),f.jsx("path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z"}),f.jsx("path",{d:"M12 16h.01"})]})}),f.jsx("span",{className:`option-text ${Xe==="alertOnly"?"selected":""}`,children:f.jsx(pt,{id:"soundOptionAlertOnly"})})]}),f.jsxs("div",{className:"option-box",children:[f.jsx("button",{className:`sound-option ${Xe==="off"?"selected":""}`,onClick:()=>tr("off"),children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"34",height:"34",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-volume-off",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M15 8a5 5 0 0 1 1.912 4.934m-1.377 2.602a5 5 0 0 1 -.535 .464"}),f.jsx("path",{d:"M17.7 5a9 9 0 0 1 2.362 11.086m-1.676 2.299a9 9 0 0 1 -.686 .615"}),f.jsx("path",{d:"M9.069 5.054l.431 -.554a.8 .8 0 0 1 1.5 .5v2m0 4v8a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l1.294 -1.664"}),f.jsx("path",{d:"M3 3l18 18"})]})}),f.jsx("span",{className:`option-text ${Xe==="off"?"selected":""}`,children:f.jsx(pt,{id:"soundOptionOff"})})]})]})]})]}),f.jsx("div",{className:"guide-text-layer",children:f.jsx("div",{className:"guide-steps-container",children:T.steps.map((O,W)=>f.jsxs("div",{className:`guide-step ${W===D?"active":""}`,style:{display:W<D?"none":"block",order:W===D?-1:W},children:[f.jsxs("div",{className:"step-header",children:[f.jsxs("div",{className:"step-distance-container",children:[f.jsx("span",{className:"direction-icon",children:V(O.direction)}),f.jsx("span",{className:"step-distance",children:O.distance})]}),f.jsx("span",{className:"step-time",children:O.time})]}),f.jsx("p",{className:"step-instruction",children:O.instruction}),W<T.steps.length-1&&f.jsx("hr",{className:"step-divider"})]},O.id))})}),f.jsxs("div",{className:`map-modal ${m?"open":"closed"}`,children:[f.jsx("div",{className:"modal-toggle map-toggle",onClick:kt,children:f.jsx("div",{className:"toggle-handle"})}),f.jsx("div",{className:`map-container ${m?"open":"closed"} ${!be&&!it&&c?"dark-overlay":"No-dark-overlay"}`,onClick:()=>{m&&c&&en()},children:f.jsx(Av,{ref:i,userLocation:H,routeSteps:T.steps,currentStep:D,isInfoModalOpen:c,isMapModalOpen:m,destination:Dn,is3DView:Tt,routeGeo:yt,alternativeRoutes:T.alternativeRoutes,onSelectAlternativeRoute:ne,showAlternativeRoutes:Mn})}),f.jsxs("button",{className:"emergency-button",onClick:Ft,children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",className:"icon icon-tabler icons-tabler-filled icon-tabler-alert-triangle",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M12 1.67c.955 0 1.845 .467 2.39 1.247l.105 .16l8.114 13.548a2.914 2.914 0 0 1 -2.307 4.363l-.195 .008h-16.225a2.914 2.914 0 0 1 -2.582 -4.2l.099 -.185l8.11 -13.538a2.914 2.914 0 0 1 2.491 -1.403zm.01 13.33l-.127 .007a1 1 0 0 0 0 1.986l.117 .007l.127 -.007a1 1 0 0 0 0 -1.986l-.117 -.007zm-.01 -7a1 1 0 0 0 -.993 .883l-.007 .117v4l.007 .117a1 1 0 0 0 1.986 0l.007 -.117v-4l-.007 -.117a1 1 0 0 0 -.993 -.883z"})]}),f.jsx("span",{children:f.jsx(pt,{id:"emergencyButtonLabel"})})]}),ut&&f.jsx("div",{className:`gps-offline-notification ${c?"hidden":""}`,children:f.jsxs("div",{className:"gps-offline-content",children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",className:"icon icon-tabler icons-tabler-filled icon-tabler-alert-circle",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M12 2c5.523 0 10 4.477 10 10a10 10 0 0 1 -19.995 .324l-.005 -.324l.004 -.28c.148 -5.393 4.566 -9.72 9.996 -9.72zm.01 13l-.127 .007a1 1 0 0 0 0 1.986l.117 .007l.127 -.007a1 1 0 0 0 0 -1.986l-.117 -.007zm-.01 -8a1 1 0 0 0 -.993 .883l-.007 .117v4l.007 .117a1 1 0 0 0 1.986 0l.007 -.117v-4l-.007 -.117a1 1 0 0 0 -.993 -.883z"})]}),f.jsx("div",{className:"gps-offline-text",children:f.jsx("div",{className:"gps-offline-message",children:f.jsx(pt,{id:"gpsOfflineMessage"})})})]})}),f.jsx("div",{className:`info-modal-wrapper ${m?"visible":"hidden"}`,children:be?f.jsx("div",{className:"all-routes-view",children:f.jsxs("div",{className:"all-routes-content",children:[f.jsxs("div",{className:"all-routes-header",children:[f.jsxs("div",{className:"all-routes-info",children:[f.jsx("span",{children:f.jsx(pt,{id:"arrivalTime"})}),f.jsx("span",{className:"all-routes-arrival-time",children:o(T.arrivalTime)})]}),f.jsx("div",{className:"all-routes-details",children:f.jsxs("div",{className:"all-routes-item",children:[f.jsx("div",{className:"all-routes-icon",children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-route",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M3 19a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}),f.jsx("path",{d:"M19 7a2 2 0 1 0 0 -4a2 2 0 0 0 0 4z"}),f.jsx("path",{d:"M11 19h5.5a3.5 3.5 0 0 0 0 -7h-8a3.5 3.5 0 0 1 0 -7h4.5"})]})}),f.jsx("div",{className:"all-routes-text",children:f.jsx("span",{className:"all-routes-value",children:o(T.totalDistance)})})]})})]}),f.jsxs("button",{className:"return-to-route-button2",onClick:_r,children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M11.092 2.581a1 1 0 0 1 1.754 -.116l.062 .116l8.005 17.365c.198 .566 .05 1.196 -.378 1.615a1.53 1.53 0 0 1 -1.459 .393l-7.077 -2.398l-6.899 2.338a1.535 1.535 0 0 1 -1.52 -.231l-.112 -.1c-.398 -.386 -.556 -.954 -.393 -1.556l.047 -.15l7.97 -17.276z"})]}),f.jsx("span",{className:"return-to-route-text",children:f.jsx(pt,{id:"returnToRoute"})})]})]})}):it?f.jsxs("div",{className:"alternative-routes-view",children:[f.jsxs("button",{className:"return-to-route-button5",onClick:yi,children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M11.092 2.581a1 1 0 0 1 1.754 -.116l.062 .116l8.005 17.365c.198 .566 .05 1.196 -.378 1.615a1.53 1.53 0 0 1 -1.459 .393l-7.077 -2.398l-6.899 2.338a1.535 1.535 0 0 1 -1.52 -.231l-.112 -.1c-.398 -.386 -.556 -.954 -.393 -1.556l.047 -.15l7.97 -17.276z"})]}),f.jsx("span",{className:"return-to-route-text",children:f.jsx(pt,{id:"returnToRoute"})})]}),f.jsx("div",{className:"alternative-routes-container",children:T.alternativeRoutes.map(O=>f.jsxs("div",{className:"alternative-route-card",onClick:()=>ne(O),children:[f.jsxs("div",{className:"route-title",children:[f.jsxs("span",{children:[f.jsx(pt,{id:"from"})," ",O.from]}),f.jsxs("span",{children:[f.jsx(pt,{id:"to"})," ",O.to]})]}),f.jsx("div",{className:"route-via",children:Array.isArray(O.via)?O.via.join(" – "):""}),f.jsxs("div",{className:"route-stats",children:[f.jsxs("div",{className:"route-stat",children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-walk",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M13 4m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),f.jsx("path",{d:"M7 21l3 -4"}),f.jsx("path",{d:"M16 21l-2 -4l-3 -3l1 -6"}),f.jsx("path",{d:"M6 12l2 -3l4 -1l3 3l3 1"})]}),f.jsx("span",{children:o(O.totalTime)})]}),f.jsxs("div",{className:"route-stat",children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-route",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M3 19a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}),f.jsx("path",{d:"M19 7a2 2 0 1 0 0 -4a2 2 0 0 0 0 4z"}),f.jsx("path",{d:"M11 19h5.5a3.5 3.5 0 0 0 0 -7h-8a3.5 3.5 0 0 1 0 -7h4.5"})]}),f.jsx("span",{children:o(O.totalDistance)})]})]}),f.jsxs("button",{className:"start-route-button7",children:[f.jsxs("svg",{className:"rbt",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M11.092 2.581a1 1 0 0 1 1.754 -.116l.062 .116l8.005 17.365c.198 .566 .05 1.196 -.378 1.615a1.53 1.53 0 0 1 -1.459 .393l-7.077 -2.398l-6.899 2.338a1.535 1.535 0 0 1 -1.52 -.231l-.112 -.1c-.398 -.386 -.556 -.954 -.393 -1.556l.047 -.15l7.97 -17.276z"})]}),f.jsx(pt,{id:"startRouting"})]})]},O.id))})]}):f.jsxs("div",{className:`info-modal ${c?"open":"closed"}`,children:[f.jsxs("div",{className:"info-content",children:[f.jsx("div",{className:"modal-toggle3 info-toggle",onClick:en,children:f.jsx("div",{className:"toggle-handle3"})}),f.jsxs("div",{className:"info-header",children:[f.jsx("button",{className:"close-button",onClick:()=>xn(-1),children:f.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.2244 4.55806C11.4685 4.31398 11.8642 4.31398 12.1083 4.55806L17.1083 9.55806C17.3524 9.80214 17.3524 10.1979 17.1083 10.4419L12.1083 15.4419C11.8642 15.686 11.4685 15.686 11.2244 15.4419C10.9803 15.1979 10.9803 14.8021 11.2244 14.5581L15.1575 10.625H3.33301C2.98783 10.625 2.70801 10.3452 2.70801 10C2.70801 9.65482 2.98783 9.375 3.33301 9.375H15.1575L11.2244 5.44194C10.9803 5.19786 10.9803 4.80214 11.2244 4.55806Z",fill:"#1E2023"})})}),f.jsxs("div",{className:"info-title",children:[f.jsxs("div",{className:"info-stat",children:[f.jsx("span",{children:f.jsx(pt,{id:"arrivalTime"})}),f.jsx("span",{className:"arrival-time",children:o(T.arrivalTime)})]}),f.jsxs("div",{className:"info-details",children:[f.jsx("div",{className:"info-item"}),f.jsxs("div",{className:"info-item",children:[f.jsx("div",{className:"info-icon",children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-route",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M3 19a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}),f.jsx("path",{d:"M19 7a2 2 0 1 0 0 -4a2 2 0 0 0 0 4z"}),f.jsx("path",{d:"M11 19h5.5a3.5 3.5 0 0 0 0 -7h-8a3.5 3.5 0 0 1 0 -7h4.5"})]})}),f.jsx("div",{className:"info-text",children:f.jsx("span",{className:"info-value",children:o(T.totalDistance)})})]})]})]}),f.jsx("button",{className:"sound-button",onClick:O=>{O.stopPropagation(),O.preventDefault(),Vt()},style:{position:"relative",zIndex:1e3},children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-volume",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M15 8a5 5 0 0 1 0 8"}),f.jsx("path",{d:"M17.7 5a9 9 0 0 1 0 14"}),f.jsx("path",{d:"M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5"})]})})]})]}),c&&f.jsx(f.Fragment,{children:f.jsxs("div",{className:"route-buttons",children:[f.jsxs("button",{className:"route-button",onClick:()=>xn("/rop"),children:[f.jsx("div",{className:"button-icon",children:f.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.916 11.6666C14.3052 11.6666 12.9993 12.8819 12.9993 14.3811C12.9993 15.8684 13.9302 17.6041 15.3827 18.2248C15.7212 18.3695 16.1108 18.3695 16.4494 18.2248C17.9018 17.6041 18.8327 15.8684 18.8327 14.3811C18.8327 12.8819 17.5268 11.6666 15.916 11.6666ZM15.916 15.4166C16.3763 15.4166 16.7493 15.0435 16.7493 14.5833C16.7493 14.1231 16.3763 13.75 15.916 13.75C15.4558 13.75 15.0827 14.1231 15.0827 14.5833C15.0827 15.0435 15.4558 15.4166 15.916 15.4166Z",fill:"#1E2023"}),f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.08268 1.66663C3.47185 1.66663 2.16602 2.88192 2.16602 4.38106C2.16602 5.86845 3.09692 7.6041 4.54932 8.22478C4.8879 8.36947 5.27746 8.36947 5.61604 8.22478C7.06845 7.6041 7.99935 5.86845 7.99935 4.38106C7.99935 2.88192 6.69351 1.66663 5.08268 1.66663ZM5.08268 5.41663C5.54292 5.41663 5.91602 5.04353 5.91602 4.58329C5.91602 4.12306 5.54292 3.74996 5.08268 3.74996C4.62245 3.74996 4.24935 4.12306 4.24935 4.58329C4.24935 5.04353 4.62245 5.41663 5.08268 5.41663Z",fill:"#1E2023"}),f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.87573 4.16663C9.87573 3.82145 10.1556 3.54163 10.5007 3.54163H13.944C16.2367 3.54163 17.1086 6.53579 15.1743 7.76668L6.49826 13.2878C5.61904 13.8473 6.01537 15.2083 7.0575 15.2083H8.99185L8.80879 15.0252C8.56471 14.7812 8.56471 14.3854 8.80879 14.1414C9.05287 13.8973 9.4486 13.8973 9.69267 14.1414L10.9427 15.3914C11.1868 15.6354 11.1868 16.0312 10.9427 16.2752L9.69267 17.5252C9.4486 17.7693 9.05287 17.7693 8.80879 17.5252C8.56471 17.2812 8.56471 16.8854 8.80879 16.6414L8.99185 16.4583H7.0575C4.7648 16.4583 3.89291 13.4641 5.82716 12.2332L14.5032 6.71211C15.3824 6.15261 14.9861 4.79163 13.944 4.79163H10.5007C10.1556 4.79163 9.87573 4.5118 9.87573 4.16663Z",fill:"#1E2023"})]})}),f.jsx("span",{children:f.jsx(pt,{id:"routeOverview"})})]}),f.jsx("span",{className:"sdivider"}),f.jsxs("button",{className:"route-button",onClick:Tr,children:[f.jsx("div",{className:"button-icon",children:f.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{d:"M2.52957 4.28868C2.16602 4.70251 2.16602 5.41203 2.16602 6.83108V14.6588C2.16602 15.6638 2.16602 16.1663 2.42818 16.5446C2.69034 16.9229 3.14869 17.0818 4.06538 17.3996L5.14387 17.7735C5.72799 17.976 6.17744 18.1318 6.55462 18.2322C6.80069 18.2976 7.02713 18.1045 7.02713 17.8499V5.22472C7.02713 5.01728 6.87405 4.84223 6.67299 4.79122C6.34863 4.70895 5.95874 4.57378 5.42436 4.38852C4.12999 3.93978 3.4828 3.71541 2.99036 3.94326C2.81553 4.02415 2.65865 4.14175 2.52957 4.28868Z",fill:"#1E2023"}),f.jsx("path",{d:"M11.0163 2.90043L9.73636 3.78793C9.2733 4.109 8.93395 4.3443 8.64414 4.51206C8.5068 4.59156 8.41602 4.73539 8.41602 4.89408V17.4332C8.41602 17.742 8.736 17.9348 8.99615 17.7684C9.27537 17.5898 9.5951 17.3681 9.98236 17.0996L11.2623 16.2121C11.7254 15.891 12.0648 15.6557 12.3546 15.488C12.4919 15.4085 12.5827 15.2646 12.5827 15.1059V2.56683C12.5827 2.258 12.2627 2.06518 12.0025 2.2316C11.7233 2.41022 11.4036 2.63191 11.0163 2.90043Z",fill:"#1E2023"}),f.jsx("path",{d:"M16.9333 2.60041L15.8548 2.22651C15.2707 2.02399 14.8213 1.8682 14.4441 1.76786C14.198 1.70241 13.9716 1.89555 13.9716 2.15017V14.7753C13.9716 14.9827 14.1246 15.1578 14.3257 15.2088C14.6501 15.2911 15.04 15.4263 15.5743 15.6115C16.8687 16.0602 17.5159 16.2846 18.0083 16.0568C18.1832 15.9759 18.3401 15.8583 18.4691 15.7113C18.8327 15.2975 18.8327 14.588 18.8327 13.1689V5.3412C18.8327 4.33622 18.8327 3.83372 18.5705 3.45542C18.3084 3.07712 17.85 2.91822 16.9333 2.60041Z",fill:"#1E2023"})]})}),f.jsx("span",{children:f.jsx(pt,{id:"allRoutes"})})]}),T.alternativeRoutes.length>0&&f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"sdivider"}),f.jsxs("button",{className:"route-button",onClick:fs,children:[f.jsx("div",{className:"button-icon",children:f.jsx("svg",{width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.96447 3.46447C2.5 4.92893 2.5 7.28595 2.5 12C2.5 16.714 2.5 19.0711 3.96447 20.5355C5.42893 22 7.78595 22 12.5 22C17.214 22 19.5711 22 21.0355 20.5355C22.5 19.0711 22.5 16.714 22.5 12C22.5 7.28595 22.5 4.92893 21.0355 3.46447C19.5711 2 17.214 2 12.5 2C7.78595 2 5.42893 2 3.96447 3.46447ZM8.53033 5.96967C8.82322 6.26256 8.82322 6.73744 8.53033 7.03033L8.31066 7.25H8.5C10.1795 7.25 11.6554 8.12162 12.5 9.43718C13.3446 8.12162 14.8205 7.25 16.5 7.25H16.6893L16.4697 7.03033C16.1768 6.73744 16.1768 6.26256 16.4697 5.96967C16.7626 5.67678 17.2374 5.67678 17.5303 5.96967L19.0303 7.46967C19.3232 7.76256 19.3232 8.23744 19.0303 8.53033L17.5303 10.0303C17.2374 10.3232 16.7626 10.3232 16.4697 10.0303C16.1768 9.73744 16.1768 9.26256 16.4697 8.96967L16.6893 8.75H16.5C14.7051 8.75 13.25 10.2051 13.25 12V18C13.25 18.4142 12.9142 18.75 12.5 18.75C12.0858 18.75 11.75 18.4142 11.75 18V12C11.75 10.2051 10.2949 8.75 8.5 8.75H8.31066L8.53033 8.96967C8.82322 9.26256 8.82322 9.73744 8.53033 10.0303C8.23744 10.3232 7.76256 10.3232 7.46967 10.0303L5.96967 8.53033C5.67678 8.23744 5.67678 7.76256 5.96967 7.46967L7.46967 5.96967C7.76256 5.67678 8.23744 5.67678 8.53033 5.96967Z",fill:"#1E2023"})})}),f.jsx("span",{children:f.jsx(pt,{id:"otherRoutes"})})]})]})]})}),f.jsxs("div",{className:"bottom-controls",children:[f.jsx("button",{className:`start-routing-button ${Pe?"stop-routing":""}`,onClick:()=>{Qn(),Pe||en()},children:Pe?f.jsx(pt,{id:"stopRouting"}):f.jsx(pt,{id:"startRouting"})}),f.jsxs("div",{className:"pc-container",children:[f.jsx("button",{className:"expand-button",onClick:en,children:f.jsx("svg",{width:"22",height:"22",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M15.8346 7.49988L10.0013 12.4999L4.16797 7.49988",stroke:"#1E2023",strokeWidth:"1.65",strokeLinecap:"round",strokeLinejoin:"round"})})}),f.jsx("button",{className:"profile-button",onClick:()=>xn("/Profile"),children:f.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("circle",{cx:"9.99984",cy:"5",r:"3.33333",fill:"#1E2023"}),f.jsx("ellipse",{cx:"9.99984",cy:"14.1667",rx:"5.83333",ry:"3.33333",fill:"#1E2023"})]})})]})]})]})}),!m&&f.jsxs("button",{className:"return-to-route-button",onClick:kt,children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M11.092 2.581a1 1 0 0 1 1.754 -.116l.062 .116l8.005 17.365c.198 .566 .05 1.196 -.378 1.615a1.53 1.53 0 0 1 -1.459 .393l-7.077 -2.398l-6.899 2.338a1.535 1.535 0 0 1 -1.52 -.231l-.112 -.1c-.398 -.386 -.556 -.954 -.393 -1.556l.047 -.15l7.97 -17.276z"})]}),f.jsx("span",{className:"return-to-route-text",children:f.jsx(pt,{id:"returnToRoute"})})]})]})]}):f.jsx("div",{className:"loading",children:f.jsx(pt,{id:"loading"})})},Uv={sahn:"#4caf50",eyvan:"#2196f3",ravaq:"#9c27b0",masjed:"#ff9800",madrese:"#3f51b5",khadamat:"#607d8b",elmi:"#00bcd4",cemetery:"#795548",qrcode:"#607d8b",elevator:"#ffc107",other:"#757575"},Zv=(e,o,i=35,r=1)=>{const d=Uv[e]||"#999";let m=ps.find(x=>x.value===e)||ps.find(x=>x.value===o)||ps.find(x=>x.value==="other");return f.jsx("div",{style:{width:i,height:i,backgroundColor:d,opacity:r,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 6px rgba(0,0,0,0.3)"},children:f.jsx("div",{className:`map-category-icon ${m.icon}`,style:{width:"22px",height:"22px",marginTop:0},children:f.jsx("img",{src:m.png,alt:m.label||"icon",width:"22",height:"22"})})})},qv=({setUserLocation:e,selectedDestination:o=null,onMapClick:i,selectedCategory:r,userLocation:d,isTracking:m=!0,onUserMove:x,showImageMarkers:c=!0,isQrCodeEntry:L=!1})=>{var Re,dt;const T=ii(),[P,D]=B.useState({latitude:36.288,longitude:59.6157,zoom:16}),[N,$]=B.useState(null),[U,q]=B.useState(null),[H,G]=B.useState(null),[te,oe]=B.useState(null),Ce=Gi(Xe=>Xe.language),[ae,Ne]=B.useState(null),Fe=B.useCallback(Xe=>{D(Xe.viewState),x&&Xe.originalEvent&&x()},[x]);B.useEffect(()=>{const Xe=sessionStorage.getItem("qrLat"),ht=sessionStorage.getItem("qrLng"),Pe=sessionStorage.getItem("qrId"),ke={lat:36.288,lng:59.6157};if(Xe&&ht){const de={lat:parseFloat(Xe),lng:parseFloat(ht)};$(de),(async()=>{let je=T.formatMessage({id:"mapCurrentLocationName"});if(Pe){const Ee=await ap(Pe);Ee&&(je=Ee)}e({name:je,coordinates:[de.lat,de.lng]})})(),D(je=>({...je,latitude:de.lat-4e-4,longitude:de.lng,zoom:18}));return}if($(ke),e({name:T.formatMessage({id:"defaultBabRezaName"}),coordinates:[ke.lat,ke.lng]}),m){const de=K=>{console.log("GPS location available but not used as primary:",K.coords)},je=K=>{console.error("Error getting GPS location",K)};navigator.geolocation.getCurrentPosition(de,je,{enableHighAccuracy:!1,timeout:1e4,maximumAge:6e4});const Ee=navigator.geolocation.watchPosition(de,je,{enableHighAccuracy:!1,maximumAge:0,timeout:1e4});return()=>{Ee&&navigator.geolocation.clearWatch(Ee)}}},[e,T,m]),B.useEffect(()=>{if(d!=null&&d.coordinates){const[Xe,ht]=d.coordinates,Pe={lat:Xe,lng:ht};$(Pe);const ke=sessionStorage.getItem("mapSelectedLat")&&sessionStorage.getItem("mapSelectedLng");m&&!ke&&D(de=>({...de,latitude:Pe.lat-4e-4,longitude:Pe.lng-0,zoom:18}))}},[d,m]),B.useEffect(()=>{if(o!=null&&o.coordinates){const[Xe,ht]=o.coordinates;q({lat:Xe,lng:ht}),N||D(ke=>({...ke,latitude:Xe,longitude:ht,zoom:18}))}else q(null)},[o]);const ye=Xe=>{const{lng:ht,lat:Pe}=Xe.lngLat,ke={lat:Pe,lng:ht};let de=null;if(H){let je=1/0;H.features.forEach(Ee=>{var K;if(Ee.geometry.type==="Point"){const[be,Be]=Ee.geometry.coordinates,it=Math.hypot(be-ht,Be-Pe),{group:ft,subGroupValue:mt}=Ee.properties||{},xt=(K=Po[ft])==null?void 0:K.find(vt=>vt.value===mt),ut=xt&&xt.img;if(!r&&!ut||r&&ft!==r.value)return;it<je&&(je=it,de=Ee)}}),je>5e-4&&(de=null)}Ne(de),i&&i(ke,de)};B.useEffect(()=>{const Xe=ll(Ce);fetch(Xe).then(ht=>ht.json()).then(G).catch(ht=>console.error("failed to load geojson",ht))},[Ce]),B.useEffect(()=>{if(N&&U&&H){const Xe=H.features.filter(je=>{var Ee;return je.geometry.type==="Point"&&["door","connection"].includes((Ee=je.properties)==null?void 0:Ee.nodeFunction)}),ht=je=>{let Ee=null,K=1/0;return Xe.forEach(be=>{const[Be,it]=be.geometry.coordinates,ft=Math.hypot(Be-je.lng,it-je.lat);ft<K&&(K=ft,Ee={lng:Be,lat:it})}),Ee},Pe=ht(N),ke=ht(U),de=[[N.lng,N.lat],...Pe?[[Pe.lng,Pe.lat]]:[],...ke?[[ke.lng,ke.lat]]:[],[U.lng,U.lat]];oe(de)}else oe(null)},[N,U,H]);const Ke=H?H.features.filter(Xe=>{var je;if(Xe.geometry.type!=="Point")return!1;const{group:ht,subGroupValue:Pe}=Xe.properties||{},ke=(je=Po[ht])==null?void 0:je.find(Ee=>Ee.value===Pe),de=ke&&ke.img;return!(!r||r&&ht!==r.value||de)}):[],Me=H?H.features.filter(Xe=>Xe.geometry.type==="Polygon"||Xe.geometry.type==="MultiPolygon"):[],qe=()=>{if(!H)return null;const Xe=new Set;return H.features.filter(ht=>{var Ee;if(ht.geometry.type!=="Point")return!1;const{group:Pe,subGroupValue:ke}=ht.properties||{},de=(Ee=Po[Pe])==null?void 0:Ee.find(K=>K.value===ke);return!(de&&de.img&&(Array.isArray(de.img)?de.img.length>0:!0))||Xe.has(ke)?!1:(Xe.add(ke),!r||Pe===r.value)}).map((ht,Pe)=>{var Be;const[ke,de]=ht.geometry.coordinates,{group:je,subGroupValue:Ee}=ht.properties||{},K=(Be=Po[je])==null?void 0:Be.find(it=>it.value===Ee),be=Array.isArray(K.img)?K.img[0]:K.img;return f.jsx(Wr,{longitude:ke,latitude:de,anchor:"center",children:f.jsxs("div",{className:"image-marker-container",children:[f.jsx("svg",{width:"55",height:"63",viewBox:"0 0 55 63",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M54.6562 27.3281C54.6562 39.6299 46.5275 50.0319 35.3486 53.459C35.1079 53.8493 34.8535 54.2605 34.585 54.6924L33.1699 56.9687C30.7353 60.8845 29.5175 62.8418 27.7412 62.8418C25.9651 62.8417 24.7479 60.8842 22.3135 56.9687L20.8975 54.6924C20.6938 54.3648 20.4993 54.0485 20.3115 53.7451C8.61859 50.6476 8.59898e-05 39.9953 -1.19455e-06 27.3281C-5.34814e-07 12.2351 12.2351 -1.85429e-06 27.3281 -1.19455e-06C42.4211 0.000106671 54.6562 12.2352 54.6562 27.3281Z",fill:"white"})}),f.jsx("div",{className:"image-marker-content",style:{backgroundImage:`url(${be})`}})]})},`image-${Pe}`)})};return f.jsxs(Kd,{mapLib:Do,mapStyle:Qd,style:{width:"100%",height:"100%"},...P,onMove:Fe,onClick:ye,interactive:!0,children:[N&&L&&f.jsx(Wr,{longitude:N.lng,latitude:N.lat,anchor:"center",children:f.jsx("div",{className:"map-marker-origin",children:f.jsx("div",{className:"map-marker-origin-inner"})})}),ae&&ae.geometry.type==="Point"&&f.jsx(Wr,{longitude:ae.geometry.coordinates[0],latitude:ae.geometry.coordinates[1],anchor:"bottom",offset:[0,75],children:f.jsx("div",{className:"location-bubble",children:f.jsxs("svg",{width:"140",height:"40",viewBox:"0 0 140 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("rect",{x:"0.5",y:"0.5",width:"139",height:"39",rx:"19.5",fill:"white"}),f.jsx("rect",{x:"0.5",y:"0.5",width:"139",height:"39",rx:"19.5",stroke:"#0F71EF"}),f.jsx("text",{x:"70",y:"22",textAnchor:"middle",dominantBaseline:"middle",fill:"#0F71EF",fontFamily:"Vazir, Tahoma, sans-serif",fontSize:"12",fontWeight:"600",children:((Re=ae.properties)==null?void 0:Re.name)||((dt=ae.properties)==null?void 0:dt.subGroup)})]})})}),U&&f.jsx(Wr,{longitude:U.lng,latitude:U.lat,anchor:"center",children:f.jsx("div",{className:"map-marker-destination",children:f.jsx("div",{className:"map-marker-destination-inner"})})}),te&&f.jsx(Io,{id:"route",type:"geojson",data:{type:"Feature",geometry:{type:"LineString",coordinates:te}},children:f.jsx(ds,{id:"route-line",type:"line",paint:{"line-color":"#4285F4","line-width":4,"line-opacity":.7}})}),Me.length>0&&f.jsx(Io,{id:"polygons",type:"geojson",data:{type:"FeatureCollection",features:Me},children:f.jsx(ds,{id:"polygon-lines",type:"line",paint:{"line-color":"#333","line-width":2}})}),qe(),Ke.map((Xe,ht)=>{var mt;const[Pe,ke]=Xe.geometry.coordinates,{group:de,nodeFunction:je}=Xe.properties||{},Ee=r&&Xe.properties&&Xe.properties[r.property]===r.value,K=!!r,be=K?Ee?40:25:35,Be=K?Ee?1:.4:1,it=(mt=Xe.properties)==null?void 0:mt.uniqueId,ft=it?`${it}-${ht}`:ht;return f.jsx(Wr,{longitude:Pe,latitude:ke,anchor:"center",children:f.jsxs("div",{style:{position:"relative"},children:[Zv(de,je,be,Be),Ee&&f.jsx("div",{style:{position:"absolute",top:-4,left:-4,right:-4,bottom:-4,border:"2px solid #e53935",borderRadius:"50%"}})]})},ft)})]})},Wv=()=>{var Et;const e=qs(),o=ii(),i=Gi(nt=>nt.language),[r,d]=B.useState(null),m=sessionStorage.getItem("qrLat"),x=sessionStorage.getItem("qrLng"),c=sessionStorage.getItem("qrId"),L=m&&x?{name:o.formatMessage({id:"mapCurrentLocationName"}),coordinates:[parseFloat(m),parseFloat(x)]}:{name:o.formatMessage({id:"defaultBabRezaName"}),coordinates:[36.288,59.6157]},[T,P]=B.useState(L),[D,N]=B.useState(!0),[$,U]=B.useState(null),[q,H]=B.useState(null),[G,te]=B.useState(!1),[oe,Ce]=B.useState(!1),ae=B.useRef(null),[Ne,Fe]=B.useState(null),[ye,Ke]=B.useState("mostVisited"),[Me,qe]=B.useState(!0),[Re,dt]=B.useState(null),[Xe,ht]=B.useState(!1),[Pe,ke]=B.useState(!1),[de,je]=B.useState(!1),[Ee,K]=B.useState(0),[be,Be]=B.useState(!1),[it,ft]=B.useState(!1),[mt,xt]=B.useState(0),[ut,vt]=B.useState(0),[Tt,Rt]=B.useState(140),[Bt,Pt]=B.useState(!1),[jt,hn]=B.useState(!1);B.useEffect(()=>{m&&x&&c&&ap(c).then(nt=>{nt&&P({name:nt,coordinates:[parseFloat(m),parseFloat(x)]})})},[m,x,c,i]);const Mn=cl(nt=>nt.setOrigin),jn=()=>{it||(de&&Xe&&G?Pe?(ke(!1),Rt(window.innerHeight*.3)):Tt<=window.innerHeight*.3?(Rt(140),te(!1),ke(!1),je(!1)):(ke(!0),Rt(window.innerHeight)):G?Pe?(ke(!1),Rt(window.innerHeight*.41)):(Rt(140),te(!1),ke(!1)):(te(!0),Xe?(Rt(window.innerHeight*.41),ke(!1)):(Rt(window.innerHeight),ke(!0))))},Jn=()=>{const nt=(Re==null?void 0:Re.value)==="rozemonavare",Le=(Re==null?void 0:Re.value)==="saghakhaneh";if(nt||Le){let Je,ln,cn;nt?(Je=36.288005181401,ln=59.61569271248,cn="rozemonavare_12"):Le&&(Je=36.288464700649,ln=59.616118862511,cn="saghakhaneh_15"),e(`/location?id=${cn}&lat=${Je}&lng=${ln}`,{state:{location:Re}})}else e("/location",{state:{location:Re}})},Yt=(nt,Le)=>{var Gt,pn,Cn;const Je=((Gt=Le==null?void 0:Le.properties)==null?void 0:Gt.name)||o.formatMessage({id:"mapSelectedLocation"}),ln={name:Je,coordinates:[nt.lat,nt.lng]};if(d(ln),sessionStorage.setItem("mapSelectedLat",nt.lat.toString()),sessionStorage.setItem("mapSelectedLng",nt.lng.toString()),(pn=Le==null?void 0:Le.properties)!=null&&pn.uniqueId&&sessionStorage.setItem("mapSelectedId",Le.properties.uniqueId),hn(!0),sessionStorage.getItem("qrLat")&&sessionStorage.getItem("qrLng")?Mn({name:T.name,coordinates:T.coordinates}):(P({name:Je,coordinates:[nt.lat,nt.lng]}),Mn({name:ln.name,coordinates:ln.coordinates})),(Cn=Le==null?void 0:Le.properties)!=null&&Cn.subGroupValue){const ct=Object.values(Po).flat().find(Ot=>Ot.value===Le.properties.subGroupValue);ct&&ct.img?(dt({...ct,coordinates:[nt.lat,nt.lng]}),ht(!0),te(!0),ke(!1)):ht(!1)}else ht(!1)};B.useEffect(()=>{if(c==="sahn-payambar-azam_2658"&&m&&x){const nt=Po.sahn.find(Le=>Le.value==="sahn-payambar-azam");if(nt){dt({...nt,coordinates:[parseFloat(m),parseFloat(x)]}),ht(!0),te(!0),ke(!1);const Le=window.innerHeight*.3;Rt(Le),je(!0)}}},[c,m,x,i]);const xn=nt=>{ft(!0),vt(nt.touches[0].clientY),xt(Tt),Be(!0)},Nn=nt=>{if(!it)return;const Le=nt.touches[0].clientY,Je=ut-Le,ln=mt+Je,cn=Math.max(140,Math.min(ln,window.innerHeight));Rt(cn)};B.useEffect(()=>{const nt=()=>{Pe&&Rt(window.innerHeight)};return window.addEventListener("resize",nt),()=>window.removeEventListener("resize",nt)},[Pe]);const Dn=()=>{if(!it)return;ft(!1),Be(!1);const nt=window.innerHeight;Tt<150?(Rt(140),te(!1),ke(!1)):Tt<nt*.7?(Rt(window.innerHeight*.41),ke(!1),te(!0)):(Rt(nt),ke(!0),te(!0))};B.useEffect(()=>{qe(!q)},[q]);const bn=nt=>{const Le=q&&q.value===nt.value;H(Le?null:nt),qe(!!Le)},yt=()=>{setIsSearchFocused(!1)};return B.useEffect(()=>{fetch("./data/routing-data.json").then(nt=>nt.json()).then(nt=>Fe(nt)).catch(nt=>console.error("Failed to load routing-data.json",nt))},[]),f.jsxs("div",{className:"map-routing-page",children:[f.jsxs("header",{className:"map-routing-header",children:[f.jsx("button",{className:"map-menu-button",children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-menu-2",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M4 6l16 0"}),f.jsx("path",{d:"M4 12l16 0"}),f.jsx("path",{d:"M4 18l16 0"})]})}),f.jsx("h1",{className:"map-header-title",children:o.formatMessage({id:"mapRoutingTitle"})}),f.jsx("button",{className:"map-profile-button",onClick:()=>e("/Profile"),children:f.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("circle",{cx:"9.99984",cy:"5",r:"3.33333",fill:"#1E2023"}),f.jsx("ellipse",{cx:"9.99984",cy:"14.1667",rx:"5.83333",ry:"3.33333",fill:"#1E2023"})]})})]}),f.jsx("div",{className:"map-categories-scroll",children:f.jsx("div",{className:"map-categories-list",children:ps.map(nt=>f.jsxs("div",{className:`map-category-item ${q&&q.value===nt.value?"active":""}`,onClick:()=>bn(nt),children:[f.jsx("div",{className:`map-category-icon ${nt.icon} ${q&&q.value===nt.value?"active":""}`,children:f.jsx("img",{src:nt.png,alt:nt.label,width:"22",height:"22"})}),f.jsx("span",{className:`map-category-name ${q&&q.value===nt.value?"active":""}`,children:o.formatMessage({id:nt.label})})]},nt.value))})}),f.jsxs("div",{className:"map-routing-container",children:[f.jsx(qv,{setUserLocation:P,selectedDestination:null,onMapClick:Yt,selectedCategory:q,userLocation:T,mapSelectedLocation:$,isTracking:D,onUserMove:()=>N(!1),showImageMarkers:Me,isQrCodeEntry:de}),f.jsx("button",{className:`map-gps-button ${D?"active":""}`,onClick:()=>N(nt=>!nt),children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M12 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),f.jsx("path",{d:"M12 12m-8 0a8 8 0 1 0 16 0a8 8 0 1 0 -16 0"}),f.jsx("path",{d:"M12 2l0 2"}),f.jsx("path",{d:"M12 20l0 2"}),f.jsx("path",{d:"M20 12l2 0"}),f.jsx("path",{d:"M2 12l2 0"})]})})]}),f.jsxs("div",{className:`search-bar-container ${G?"expanded":""} ${Pe?"fully-expanded":""} ${it?"dragging":""} ${de?"qr-code-entry":""}`,style:it||Bt?{height:`${Tt}px`,transform:"translateY(0)"}:{},children:[f.jsx("div",{className:"search-bar-toggle",onClick:jn,onTouchStart:xn,onTouchMove:Nn,onTouchEnd:Dn,children:f.jsx("div",{className:"toggle-handle"})}),f.jsxs("form",{className:`search-bar ${G?"expanded":""}`,children:[f.jsx("input",{type:"text",placeholder:o.formatMessage({id:"searchPlaceholder"}),onClick:()=>e("/mpr"),onBlur:yt,ref:ae}),f.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.58342 2.29163C5.55634 2.29163 2.29175 5.55622 2.29175 9.58329C2.29175 13.6104 5.55634 16.875 9.58342 16.875C13.6105 16.875 16.8751 13.6104 16.8751 9.58329C16.8751 5.55622 13.6105 2.29163 9.58342 2.29163ZM1.04175 9.58329C1.04175 4.86586 4.86598 1.04163 9.58342 1.04163C14.3008 1.04163 18.1251 4.86586 18.1251 9.58329C18.1251 11.7171 17.3427 13.6681 16.0491 15.1651L18.7754 17.8914C19.0194 18.1354 19.0194 18.5312 18.7754 18.7752C18.5313 19.0193 18.1356 19.0193 17.8915 18.7752L15.1653 16.049C13.6682 17.3426 11.7172 18.125 9.58342 18.125C4.86598 18.125 1.04175 14.3007 1.04175 9.58329Z",fill:"#1E2023"})})]}),G&&Xe&&Re&&f.jsxs("div",{className:"selected-location-section",children:[f.jsx("div",{className:"selected-location-images",children:f.jsx("div",{className:"location-image-scroll",children:Array.isArray(Re.img)?Re.img.map((nt,Le)=>f.jsx("div",{className:"location-main-image",style:{backgroundImage:`url(${nt})`}},Le)):f.jsx("div",{className:"location-main-image",style:{backgroundImage:`url(${Re.img})`}})})}),f.jsx("div",{className:"selected-location-info",children:f.jsxs("div",{className:"location-details7",children:[f.jsx("h2",{className:"selected-location-title",children:Re.label}),f.jsxs("div",{className:"location-meta7",children:[f.jsx("span",{className:"location-address",children:Re.address}),f.jsx("span",{className:"place-meta-separator",children:"|"}),f.jsxs("span",{className:"place-distance",children:[Re.distance," ",o.formatMessage({id:"meter"})]}),f.jsx("span",{className:"place-meta-separator",children:"|"}),f.jsxs("span",{className:"place-time",children:[Re.time," ",o.formatMessage({id:"walking"})]})]}),f.jsxs("div",{className:"location-description",children:[f.jsx("p",{children:Re.description&&Re.description.split(" ").length>4?`${Re.description.split(" ").slice(0,4).join(" ")} ...`:Re.description}),f.jsxs("button",{className:"cultural-info-btn",onClick:Jn,children:[o.formatMessage({id:"moreCulturalInfo"}),f.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.0203 3.64645C7.21556 3.84171 7.21556 4.15829 7.0203 4.35355L3.87385 7.5H13.3334C13.6096 7.5 13.8334 7.72386 13.8334 8C13.8334 8.27614 13.6096 8.5 13.3334 8.5H3.87385L7.0203 11.6464C7.21556 11.8417 7.21556 12.1583 7.0203 12.3536C6.82504 12.5488 6.50846 12.5488 6.31319 12.3536L2.31319 8.35355C2.11793 8.15829 2.11793 7.84171 2.31319 7.64645L6.31319 3.64645C6.50846 3.45118 6.82504 3.45118 7.0203 3.64645Z",fill:"#0F71EF"})})]})]})]})})]}),Ne&&f.jsxs("div",{className:"shrine-events-section",children:[f.jsxs("div",{className:"shrine-events-header",children:[f.jsx("h2",{className:"shrine-events-title",children:o.formatMessage({id:"shrineEventsTitle"})}),f.jsxs("button",{className:"view-all-events",children:[o.formatMessage({id:"viewAll"}),f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M15 6l-6 6l6 6"})]})]})]}),f.jsx("div",{className:"shrine-events-list",children:(Et=Ne.places.shrineEvents)==null?void 0:Et.map((nt,Le)=>f.jsxs("div",{className:"shrine-event-item",children:[f.jsx("div",{className:"place-image-placeholder",style:{backgroundImage:`url(${nt.image})`}}),f.jsxs("div",{className:"place-info",children:[f.jsx("h3",{className:"place-title",children:nt.title}),f.jsx("p",{className:"place-description",children:nt.description}),f.jsxs("div",{className:"place-info2",children:[f.jsxs("span",{className:"place-address",children:[f.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.2073 2.9087C9.5 3.53569 9.5 4.68259 9.5 6.9764V18.0236C9.5 20.3174 9.5 21.4643 10.2073 22.0913C10.9145 22.7183 11.9955 22.5297 14.1576 22.1526L16.4864 21.7465C18.8809 21.3288 20.0781 21.12 20.7891 20.2417C21.5 19.3635 21.5 18.0933 21.5 15.5529V9.44711C21.5 6.90671 21.5 5.63652 20.7891 4.75826C20.0781 3.87999 18.8809 3.67118 16.4864 3.25354L14.1576 2.84736C11.9955 2.47026 10.9145 2.28171 10.2073 2.9087ZM12.5 10.6686C12.9142 10.6686 13.25 11.02 13.25 11.4535V13.5465C13.25 13.98 12.9142 14.3314 12.5 14.3314C12.0858 14.3314 11.75 13.98 11.75 13.5465V11.4535C11.75 11.02 12.0858 10.6686 12.5 10.6686Z",fill:"#1E2023"}),f.jsx("path",{d:"M8.04717 5C5.98889 5.003 4.91599 5.04826 4.23223 5.73202C3.5 6.46425 3.5 7.64276 3.5 9.99979V14.9998C3.5 17.3568 3.5 18.5353 4.23223 19.2676C4.91599 19.9513 5.98889 19.9966 8.04717 19.9996C7.99985 19.3763 7.99992 18.6557 8.00001 17.8768V7.1227C7.99992 6.34388 7.99985 5.6233 8.04717 5Z",fill:"#1E2023"})]}),nt.location]}),f.jsx("div",{className:"place-meta",children:f.jsxs("span",{className:"shrine-event-time",children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"black",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M17 3.34a10 10 0 1 1 -14.995 8.984l-.005 -.324l.005 -.324a10 10 0 0 1 14.995 -8.336zm-5 2.66a1 1 0 0 0 -.993 .883l-.007 .117v5l.009 .131a1 1 0 0 0 .197 .477l.087 .1l3 3l.094 .082a1 1 0 0 0 1.226 0l.094 -.083l.083 -.094a1 1 0 0 0 0 -1.226l-.083 -.094l-2.707 -2.708v-4.585l-.007 -.117a1 1 0 0 0 -.993 -.883z"})]}),nt.time]})})]}),f.jsx("div",{className:"place-actions",children:f.jsxs("button",{className:"place-action-btn",onClick:()=>e("/fs"),children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M11.092 2.581a1 1 0 0 1 1.754 -.116l.062 .116l8.005 17.365c.198 .566 .05 1.196 -.378 1.615a1.53 1.53 0 0 1 -1.459 .393l-7.077 -2.398l-6.899 2.338a1.535 1.535 0 0 1 -1.52 -.231l-.112 -.1c-.398 -.386 -.556 -.954 -.393 -1.556l.047 -.15l7.97 -17.276z"})]}),o.formatMessage({id:"navigate"})]})})]})]},Le))})]}),Ne&&f.jsxs("div",{className:"routing-places-section",children:[f.jsxs("div",{className:"section-header",children:[f.jsx("h2",{className:"section-title6",children:o.formatMessage({id:"landmarkPlaces"})}),f.jsxs("button",{className:"view-all-btn5",children:[o.formatMessage({id:"viewAll"}),f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M15 6l-6 6l6 6"})]})]})]}),f.jsx("div",{className:"places-horizontal-list",children:Ne.places.landmarkPlaces.map((nt,Le)=>f.jsxs("div",{className:"place-card",children:[f.jsxs("div",{className:"image-container",children:[f.jsx("div",{className:"place-image",style:{backgroundImage:`url(${nt.image})`}}),f.jsx("button",{className:"transparent-save-btn",children:f.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{d:"M7.5 4.37508C7.15482 4.37508 6.875 4.6549 6.875 5.00008C6.875 5.34526 7.15482 5.62508 7.5 5.62508H12.5C12.8452 5.62508 13.125 5.34526 13.125 5.00008C13.125 4.6549 12.8452 4.37508 12.5 4.37508H7.5Z",fill:"black"}),f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.95209 1.04175C8.22495 1.04174 6.8643 1.04173 5.80107 1.18622C4.70935 1.33459 3.83841 1.64565 3.15403 2.33745C2.47058 3.02831 2.1641 3.90593 2.01775 5.00626C1.87498 6.07967 1.87499 7.45393 1.875 9.20097V13.4493C1.87499 14.7056 1.87498 15.7002 1.95501 16.4491C2.03409 17.1891 2.20373 17.8568 2.6882 18.3033C3.07688 18.6615 3.56842 18.8873 4.09304 18.9473C4.74927 19.0224 5.36199 18.7091 5.96557 18.2815C6.57636 17.8489 7.3173 17.1935 8.25212 16.3667L8.28254 16.3398C8.71593 15.9564 9.00935 15.6978 9.25416 15.5187C9.49076 15.3457 9.63522 15.2832 9.75698 15.2587C9.91743 15.2263 10.0826 15.2263 10.243 15.2587C10.3648 15.2832 10.5092 15.3457 10.7458 15.5187C10.9906 15.6978 11.2841 15.9564 11.7175 16.3398L11.7479 16.3667C12.6827 17.1935 13.4237 17.8489 14.0344 18.2815C14.638 18.7091 15.2507 19.0224 15.907 18.9473C16.4316 18.8873 16.9231 18.6615 17.3118 18.3033C17.7963 17.8568 17.9659 17.1891 18.045 16.4491C18.125 15.7002 18.125 14.7056 18.125 13.4493V9.20095C18.125 7.45393 18.125 6.07966 17.9823 5.00626C17.8359 3.90593 17.5294 3.02831 16.846 2.33745C16.1616 1.64565 15.2907 1.33459 14.1989 1.18622C13.1357 1.04173 11.7751 1.04174 10.0479 1.04175H9.95209ZM4.04267 3.21655C4.45664 2.7981 5.01876 2.55403 5.9694 2.42484C6.93871 2.2931 8.21438 2.29175 10 2.29175C11.7856 2.29175 13.0613 2.2931 14.0306 2.42484C14.9812 2.55403 15.5434 2.7981 15.9573 3.21655C16.3722 3.63594 16.6149 4.20691 16.7432 5.17106C16.8737 6.15251 16.875 7.44361 16.875 9.24801V13.4092C16.875 14.7144 16.8741 15.6419 16.8021 16.3163C16.7282 17.0074 16.592 17.2668 16.4647 17.3841C16.2699 17.5636 16.0248 17.6757 15.7649 17.7054C15.5985 17.7245 15.3196 17.66 14.757 17.2615C14.2081 16.8727 13.5176 16.2632 12.5456 15.4035L12.5238 15.3842C12.1177 15.025 11.781 14.7271 11.4837 14.5097C11.1728 14.2824 10.8594 14.1077 10.4899 14.0333C10.1665 13.9681 9.83352 13.9681 9.51015 14.0333C9.14064 14.1077 8.82715 14.2824 8.51633 14.5097C8.21902 14.7271 7.88226 15.025 7.47621 15.3842L7.45439 15.4035C6.48239 16.2632 5.79189 16.8727 5.24304 17.2615C4.68038 17.66 4.40151 17.7245 4.23515 17.7054C3.97516 17.6757 3.73014 17.5636 3.53531 17.3841C3.40803 17.2668 3.27179 17.0074 3.19793 16.3163C3.12587 15.6419 3.125 14.7144 3.125 13.4092V9.24801C3.125 7.44361 3.1263 6.15251 3.25684 5.17106C3.38508 4.20691 3.62777 3.63594 4.04267 3.21655Z",fill:"black"})]})})]}),f.jsxs("div",{className:"place-details",children:[f.jsx("h4",{className:"place-name",children:nt.title}),f.jsxs("div",{className:"place-meta",children:[f.jsxs("span",{className:"place-distance",children:[nt.distance," ",o.formatMessage({id:"meter"})]}),f.jsx("span",{className:"place-meta-separator",children:"|"}),f.jsxs("span",{className:"place-time",children:[nt.time," ",o.formatMessage({id:"walking"})]})]}),f.jsxs("div",{className:"place-rating-section",children:[f.jsx("div",{className:"place-rating-stars",children:[1,2,3,4,5].map(Je=>f.jsxs("svg",{className:Je<=Math.round(nt.rating)?"filled":"",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z"})]},Je))}),f.jsxs("span",{className:"place-views",children:["( ",nt.views," ",o.formatMessage({id:"commentsLabel"}),")"]})]})]})]},Le))})]}),Ne&&f.jsxs("div",{className:"routing-places-section",children:[f.jsxs("div",{className:"section-header",children:[f.jsx("h2",{className:"section-title6",children:o.formatMessage({id:"mostVisited"})}),f.jsxs("button",{className:"view-all-btn5",children:[o.formatMessage({id:"viewAll"}),f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M15 6l-6 6l6 6"})]})]})]}),f.jsx("div",{className:"places-horizontal-list",children:Ne.places.mostVisited.map((nt,Le)=>f.jsxs("div",{className:"place-card",children:[f.jsxs("div",{className:"image-container",children:[f.jsx("div",{className:"place-image",style:{backgroundImage:`url(${nt.image})`}}),f.jsx("button",{className:"transparent-save-btn",children:f.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{d:"M7.5 4.37508C7.15482 4.37508 6.875 4.6549 6.875 5.00008C6.875 5.34526 7.15482 5.62508 7.5 5.62508H12.5C12.8452 5.62508 13.125 5.34526 13.125 5.00008C13.125 4.6549 12.8452 4.37508 12.5 4.37508H7.5Z",fill:"black"}),f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.95209 1.04175C8.22495 1.04174 6.8643 1.04173 5.80107 1.18622C4.70935 1.33459 3.83841 1.64565 3.15403 2.33745C2.47058 3.02831 2.1641 3.90593 2.01775 5.00626C1.87498 6.07967 1.87499 7.45393 1.875 9.20097V13.4493C1.87499 14.7056 1.87498 15.7002 1.95501 16.4491C2.03409 17.1891 2.20373 17.8568 2.6882 18.3033C3.07688 18.6615 3.56842 18.8873 4.09304 18.9473C4.74927 19.0224 5.36199 18.7091 5.96557 18.2815C6.57636 17.8489 7.3173 17.1935 8.25212 16.3667L8.28254 16.3398C8.71593 15.9564 9.00935 15.6978 9.25416 15.5187C9.49076 15.3457 9.63522 15.2832 9.75698 15.2587C9.91743 15.2263 10.0826 15.2263 10.243 15.2587C10.3648 15.2832 10.5092 15.3457 10.7458 15.5187C10.9906 15.6978 11.2841 15.9564 11.7175 16.3398L11.7479 16.3667C12.6827 17.1935 13.4237 17.8489 14.0344 18.2815C14.638 18.7091 15.2507 19.0224 15.907 18.9473C16.4316 18.8873 16.9231 18.6615 17.3118 18.3033C17.7963 17.8568 17.9659 17.1891 18.045 16.4491C18.125 15.7002 18.125 14.7056 18.125 13.4493V9.20095C18.125 7.45393 18.125 6.07966 17.9823 5.00626C17.8359 3.90593 17.5294 3.02831 16.846 2.33745C16.1616 1.64565 15.2907 1.33459 14.1989 1.18622C13.1357 1.04173 11.7751 1.04174 10.0479 1.04175H9.95209ZM4.04267 3.21655C4.45664 2.7981 5.01876 2.55403 5.9694 2.42484C6.93871 2.2931 8.21438 2.29175 10 2.29175C11.7856 2.29175 13.0613 2.2931 14.0306 2.42484C14.9812 2.55403 15.5434 2.7981 15.9573 3.21655C16.3722 3.63594 16.6149 4.20691 16.7432 5.17106C16.8737 6.15251 16.875 7.44361 16.875 9.24801V13.4092C16.875 14.7144 16.8741 15.6419 16.8021 16.3163C16.7282 17.0074 16.592 17.2668 16.4647 17.3841C16.2699 17.5636 16.0248 17.6757 15.7649 17.7054C15.5985 17.7245 15.3196 17.66 14.757 17.2615C14.2081 16.8727 13.5176 16.2632 12.5456 15.4035L12.5238 15.3842C12.1177 15.025 11.781 14.7271 11.4837 14.5097C11.1728 14.2824 10.8594 14.1077 10.4899 14.0333C10.1665 13.9681 9.83352 13.9681 9.51015 14.0333C9.14064 14.1077 8.82715 14.2824 8.51633 14.5097C8.21902 14.7271 7.88226 15.025 7.47621 15.3842L7.45439 15.4035C6.48239 16.2632 5.79189 16.8727 5.24304 17.2615C4.68038 17.66 4.40151 17.7245 4.23515 17.7054C3.97516 17.6757 3.73014 17.5636 3.53531 17.3841C3.40803 17.2668 3.27179 17.0074 3.19793 16.3163C3.12587 15.6419 3.125 14.7144 3.125 13.4092V9.24801C3.125 7.44361 3.1263 6.15251 3.25684 5.17106C3.38508 4.20691 3.62777 3.63594 4.04267 3.21655Z",fill:"black"})]})})]}),f.jsxs("div",{className:"place-details",children:[f.jsx("h4",{className:"place-name",children:nt.title}),f.jsxs("div",{className:"place-meta",children:[f.jsxs("span",{className:"place-distance",children:[nt.distance," ",o.formatMessage({id:"meter"})]}),f.jsx("span",{className:"place-meta-separator",children:"|"}),f.jsxs("span",{className:"place-time",children:[nt.time," ",o.formatMessage({id:"walking"})]})]}),f.jsxs("div",{className:"place-rating-section",children:[f.jsx("div",{className:"place-rating-stars",children:[1,2,3,4,5].map(Je=>f.jsxs("svg",{className:Je<=Math.round(nt.rating)?"filled":"",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z"})]},Je))}),f.jsxs("span",{className:"place-views",children:["( ",nt.views," ",o.formatMessage({id:"commentsLabel"}),")"]})]})]})]},Le))})]}),Ne&&f.jsxs("div",{className:"routing-places-section",children:[f.jsxs("div",{className:"section-header",children:[f.jsx("h2",{className:"section-title6",children:o.formatMessage({id:"nearMe"})}),f.jsxs("button",{className:"view-all-btn5",children:[o.formatMessage({id:"viewAll"}),f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M15 6l-6 6l6 6"})]})]})]}),f.jsx("div",{className:"places-horizontal-list",children:Ne.places.nearest.map((nt,Le)=>f.jsxs("div",{className:"place-card",children:[f.jsxs("div",{className:"image-container",children:[f.jsx("div",{className:"place-image",style:{backgroundImage:`url(${nt.image})`}}),f.jsx("button",{className:"transparent-save-btn",children:f.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{d:"M7.5 4.37508C7.15482 4.37508 6.875 4.6549 6.875 5.00008C6.875 5.34526 7.15482 5.62508 7.5 5.62508H12.5C12.8452 5.62508 13.125 5.34526 13.125 5.00008C13.125 4.6549 12.8452 4.37508 12.5 4.37508H7.5Z",fill:"black"}),f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.95209 1.04175C8.22495 1.04174 6.8643 1.04173 5.80107 1.18622C4.70935 1.33459 3.83841 1.64565 3.15403 2.33745C2.47058 3.02831 2.1641 3.90593 2.01775 5.00626C1.87498 6.07967 1.87499 7.45393 1.875 9.20097V13.4493C1.87499 14.7056 1.87498 15.7002 1.95501 16.4491C2.03409 17.1891 2.20373 17.8568 2.6882 18.3033C3.07688 18.6615 3.56842 18.8873 4.09304 18.9473C4.74927 19.0224 5.36199 18.7091 5.96557 18.2815C6.57636 17.8489 7.3173 17.1935 8.25212 16.3667L8.28254 16.3398C8.71593 15.9564 9.00935 15.6978 9.25416 15.5187C9.49076 15.3457 9.63522 15.2832 9.75698 15.2587C9.91743 15.2263 10.0826 15.2263 10.243 15.2587C10.3648 15.2832 10.5092 15.3457 10.7458 15.5187C10.9906 15.6978 11.2841 15.9564 11.7175 16.3398L11.7479 16.3667C12.6827 17.1935 13.4237 17.8489 14.0344 18.2815C14.638 18.7091 15.2507 19.0224 15.907 18.9473C16.4316 18.8873 16.9231 18.6615 17.3118 18.3033C17.7963 17.8568 17.9659 17.1891 18.045 16.4491C18.125 15.7002 18.125 14.7056 18.125 13.4493V9.20095C18.125 7.45393 18.125 6.07966 17.9823 5.00626C17.8359 3.90593 17.5294 3.02831 16.846 2.33745C16.1616 1.64565 15.2907 1.33459 14.1989 1.18622C13.1357 1.04173 11.7751 1.04174 10.0479 1.04175H9.95209ZM4.04267 3.21655C4.45664 2.7981 5.01876 2.55403 5.9694 2.42484C6.93871 2.2931 8.21438 2.29175 10 2.29175C11.7856 2.29175 13.0613 2.2931 14.0306 2.42484C14.9812 2.55403 15.5434 2.7981 15.9573 3.21655C16.3722 3.63594 16.6149 4.20691 16.7432 5.17106C16.8737 6.15251 16.875 7.44361 16.875 9.24801V13.4092C16.875 14.7144 16.8741 15.6419 16.8021 16.3163C16.7282 17.0074 16.592 17.2668 16.4647 17.3841C16.2699 17.5636 16.0248 17.6757 15.7649 17.7054C15.5985 17.7245 15.3196 17.66 14.757 17.2615C14.2081 16.8727 13.5176 16.2632 12.5456 15.4035L12.5238 15.3842C12.1177 15.025 11.781 14.7271 11.4837 14.5097C11.1728 14.2824 10.8594 14.1077 10.4899 14.0333C10.1665 13.9681 9.83352 13.9681 9.51015 14.0333C9.14064 14.1077 8.82715 14.2824 8.51633 14.5097C8.21902 14.7271 7.88226 15.025 7.47621 15.3842L7.45439 15.4035C6.48239 16.2632 5.79189 16.8727 5.24304 17.2615C4.68038 17.66 4.40151 17.7245 4.23515 17.7054C3.97516 17.6757 3.73014 17.5636 3.53531 17.3841C3.40803 17.2668 3.27179 17.0074 3.19793 16.3163C3.12587 15.6419 3.125 14.7144 3.125 13.4092V9.24801C3.125 7.44361 3.1263 6.15251 3.25684 5.17106C3.38508 4.20691 3.62777 3.63594 4.04267 3.21655Z",fill:"black"})]})})]}),f.jsxs("div",{className:"place-details",children:[f.jsx("h4",{className:"place-name",children:nt.title}),f.jsxs("div",{className:"place-meta",children:[f.jsxs("span",{className:"place-distance",children:[nt.distance," ",o.formatMessage({id:"meter"})]}),f.jsx("span",{className:"place-meta-separator",children:"|"}),f.jsxs("span",{className:"place-time",children:[nt.time," ",o.formatMessage({id:"walking"})]})]}),f.jsxs("div",{className:"place-rating-section",children:[f.jsx("div",{className:"place-rating-stars",children:[1,2,3,4,5].map(Je=>f.jsxs("svg",{className:Je<=Math.round(nt.rating)?"filled":"",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z"})]},Je))}),f.jsxs("span",{className:"place-views",children:["( ",nt.views," ",o.formatMessage({id:"commentsLabel"}),")"]})]})]})]},Le))})]})]})]})},Gv=()=>{var Ee,K,be,Be,it,ft,mt,xt;const e=qs(),o=ii(),i=h0(),r=B.useRef(null),[d,m]=B.useState(0),[x,c]=B.useState("right"),[L,T]=B.useState(""),[P,D]=B.useState(""),[N,$]=B.useState(null),[U,q]=B.useState(null),[H,G]=B.useState(0),te=ut=>ut*Math.PI/180,oe=ut=>ut*180/Math.PI,Ce=(ut,vt)=>{const[Tt,Rt]=ut,[Bt,Pt]=vt,jt=Math.sin(te(Bt-Tt))*Math.cos(te(Pt)),hn=Math.cos(te(Rt))*Math.sin(te(Pt))-Math.sin(te(Rt))*Math.cos(te(Pt))*Math.cos(te(Bt-Tt));return(oe(Math.atan2(jt,hn))+360)%360},ae=(ut,vt)=>{const Tt=(ut-vt+540)%360-180,Rt=Math.abs(Tt);return Rt<30?"up":Rt>150?"down":Rt<100?Tt>0?"left":"right":Tt>0?"bend-left":"bend-right"},{routeGeo:Ne,routeSteps:Fe}=cl(),ye=((Ee=Ne==null?void 0:Ne.geometry)==null?void 0:Ee.coordinates)||[],Ke=ut=>{q(ut),G(0)},Me=()=>{q(null),G(0)},qe=()=>{if(!ye||ye.length===0)return null;const vt=(()=>{const Rt=[];return Object.values(Po).forEach(Bt=>{if(Bt&&Bt.length>0){const Pt=Bt.slice(0,2);Rt.push(...Pt)}}),Rt})(),Tt=[];return ye.length>=4&&[0,Math.floor(ye.length/3),Math.floor(ye.length*2/3),ye.length-1].forEach((Bt,Pt)=>{vt[Pt]&&ye[Bt]&&Tt.push({subgroup:vt[Pt],coord:ye[Bt]})}),Tt.map((Rt,Bt)=>{const{subgroup:Pt,coord:jt}=Rt,[hn,Mn]=jt,jn=Pt.img&&(Array.isArray(Pt.img)?Pt.img.length>0:!0);return f.jsx(Wr,{longitude:hn,latitude:Mn,anchor:"center",onClick:Jn=>{Jn.originalEvent.stopPropagation(),Ke(Pt)},children:jn?f.jsxs("div",{className:"image-marker-container2",children:[f.jsx("svg",{width:"55",height:"63",viewBox:"0 0 55 63",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M54.6562 27.3281C54.6562 39.6299 46.5275 50.0319 35.3486 53.459C35.1079 53.8493 34.8535 54.2605 34.585 54.6924L33.1699 56.9687C30.7353 60.8845 29.5175 62.8418 27.7412 62.8418C25.9651 62.8417 24.7479 60.8842 22.3135 56.9687L20.8975 54.6924C20.6938 54.3648 20.4993 54.0485 20.3115 53.7451C8.61859 50.6476 8.59898e-05 39.9953 -1.19455e-06 27.3281C-5.34814e-07 12.2351 12.2351 -1.85429e-06 27.3281 -1.19455e-06C42.4211 0.000106671 54.6562 12.2352 54.6562 27.3281Z",fill:"white"})}),f.jsx("div",{className:"image-marker-content2",style:{backgroundImage:`url(${Array.isArray(Pt.img)?Pt.img[0]:Pt.img})`}})]}):f.jsxs("div",{className:"icon-marker-container",children:[f.jsx("div",{className:"icon-marker-background",children:f.jsx("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("circle",{cx:"20",cy:"20",r:"19",fill:"white",stroke:"#0f71ef",strokeWidth:"2"})})}),f.jsx("div",{className:"icon-marker-content",children:f.jsx("div",{className:"subgroup-default-icon",children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"#0f71ef",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("circle",{cx:"12",cy:"12",r:"9",fill:"none",stroke:"#0f71ef",strokeWidth:"2"}),f.jsx("circle",{cx:"12",cy:"9",r:"1",fill:"#0f71ef"}),f.jsx("path",{d:"M12 15l0 3",stroke:"#0f71ef",strokeWidth:"2"})]})})})]})},`marker-${Bt}-${Pt.value}`)})},Re=B.useMemo(()=>{const ut=ye.slice(1).map((Bt,Pt)=>{const jt=Fe==null?void 0:Fe[Pt],hn=jt&&jt.type?o.formatMessage({id:jt.type},{name:jt.name,title:jt.title,num:Pt+1}):jt!=null&&jt.instruction?jt.instruction:o.formatMessage({id:"stepArriveDestination"},{name:(jt==null?void 0:jt.name)||o.formatMessage({id:"destination"})}),Mn=Math.hypot(Bt[0]-ye[Pt][0],Bt[1]-ye[Pt][1])*1e5,jn=jt!=null&&jt.landmark?`${hn}، ${o.formatMessage({id:"landmarkSuffix"},{name:jt.landmark,distance:Math.round(Mn)})}`:hn;return{id:Pt+1,coordinates:[ye[Pt],Bt],instruction:jn,services:(jt==null?void 0:jt.services)||{},distance:Mn,doorNames:(jt==null?void 0:jt.type)==="stepPassDoor"?[jt.name]:[]}}),vt=Bt=>Ce(Bt[0],Bt[Bt.length-1]),Tt=(Bt,Pt)=>{const jt=vt(Bt),hn=vt(Pt);let Mn=Math.abs(jt-hn);return Mn>180&&(Mn=360-Mn),Mn},Rt=[];for(let Bt=0;Bt<ut.length;Bt++){const Pt=ut[Bt];if(Pt.distance>=30){Rt.push({...Pt});continue}const jt=Rt[Rt.length-1],hn=ut[Bt+1],Mn=jt?Tt(jt.coordinates,Pt.coordinates):1/0,jn=hn?Tt(Pt.coordinates,hn.coordinates):1/0;Mn<=jn&&jt||!hn?jt?(jt.coordinates.push(Pt.coordinates[1]),jt.distance+=Pt.distance,jt.doorNames=[...jt.doorNames||[],...Pt.doorNames||[]]):Rt.push({...Pt}):hn?(hn.coordinates=[Pt.coordinates[0],...hn.coordinates],hn.distance+=Pt.distance,hn.doorNames=[...Pt.doorNames||[],...hn.doorNames||[]]):Rt.push({...Pt})}return Rt.map((Bt,Pt)=>{const jt=Bt.doorNames&&Bt.doorNames.length>1?o.formatMessage({id:"doorToDoor"},{from:Bt.doorNames[0],to:Bt.doorNames[Bt.doorNames.length-1]}):Bt.instruction;return{id:Pt+1,coordinates:Bt.coordinates,instruction:jt,services:Bt.services,distance:Bt.distance}})},[ye,Fe,o]),[dt,Xe]=B.useState({latitude:((K=ye[0])==null?void 0:K[1])||0,longitude:((be=ye[0])==null?void 0:be[0])||0,zoom:16});B.useEffect(()=>{window.scrollTo(0,0)},[]);const ht=B.useMemo(()=>{var vt;const ut=(vt=Re[d])==null?void 0:vt.coordinates;return ut?{type:"Feature",geometry:{type:"LineString",coordinates:ut}}:null},[d,Re]);B.useEffect(()=>{if(Re[d]){const ut=Re[d],vt=ut.coordinates,[Tt,Rt]=vt[0],[Bt,Pt]=vt[vt.length-1],jt=ut.distance;if(T(`${i(Math.round(jt))} ${o.formatMessage({id:"meters"})}`),D(`${i(Math.max(1,Math.round(jt/60)))} ${o.formatMessage({id:"minutesUnit"})}`),d===Re.length-1)c("arrived");else{const Mn=Re[d+1].coordinates,jn=Ce(vt[0],vt[vt.length-1]),Jn=Ce(Mn[0],Mn[Mn.length-1]);c(ae(jn,Jn))}const hn=jt<50;if(Xe({latitude:(Rt+Pt)/2,longitude:(Tt+Bt)/2,zoom:hn?17:18}),$([(Tt+Bt)/2,(Rt+Pt)/2]),r.current){const Mn=new Do.LngLatBounds([Tt,Rt],[Bt,Pt]),jn={padding:50,duration:700};hn&&(jn.maxZoom=17),r.current.fitBounds(Mn,jn)}}},[d,Re]),B.useEffect(()=>{(!ye||ye.length===0)&&$(null)},[ye]);const Pe={type:"Feature",geometry:{type:"LineString",coordinates:ye}},ke=()=>{d<Re.length-1&&m(d+1)},de=()=>{d>0&&m(d-1)},je=()=>{switch(x){case"right":return f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-right",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M5 12l14 0"}),f.jsx("path",{d:"M15 16l4 -4"}),f.jsx("path",{d:"M15 8l4 4"})]});case"left":return f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-left",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M5 12l14 0"}),f.jsx("path",{d:"M5 12l4 4"}),f.jsx("path",{d:"M5 12l4 -4"})]});case"up":return f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-up",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M12 5l0 14"}),f.jsx("path",{d:"M16 9l-4 -4"}),f.jsx("path",{d:"M8 9l4 -4"})]});case"down":return f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-down",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M12 5l0 14"}),f.jsx("path",{d:"M16 15l-4 4"}),f.jsx("path",{d:"M8 15l4 4"})]});case"bend-right":return f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-merge-alt-left",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M8 7l4 -4l4 4"}),f.jsx("path",{d:"M18 21v.01"}),f.jsx("path",{d:"M18 18.01v.01"}),f.jsx("path",{d:"M17 15.02v.01"}),f.jsx("path",{d:"M14 13.03v.01"}),f.jsx("path",{d:"M12 3v5.394a6.737 6.737 0 0 1 -3 5.606a6.737 6.737 0 0 0 -3 5.606v1.394"})]});case"bend-left":return f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-merge-alt-right",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M16 7l-4 -4l-4 4"}),f.jsx("path",{d:"M6 21v.01"}),f.jsx("path",{d:"M6 18.01v.01"}),f.jsx("path",{d:"M7 15.02v.01"}),f.jsx("path",{d:"M10 13.03v.01"}),f.jsx("path",{d:"M12 3v5.394a6.737 6.737 0 0 0 3 5.606a6.737 6.737 0 0 1 3 5.606v1.394"})]});case"arrived":return f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"35",height:"35",viewBox:"0 0 24 24",fill:"#e74c3c",className:"icon icon-tabler icons-tabler-filled icon-tabler-map-pin",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M18.364 4.636a9 9 0 0 1 .203 12.519l-.203 .21l-4.243 4.242a3 3 0 0 1 -4.097 .135l-.144 -.135l-4.244 -4.243a9 9 0 0 1 12.728 -12.728zm-6.364 3.364a3 3 0 1 0 0 6a3 3 0 0 0 0 -6z"})]});default:return f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-right",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M5 12l14 0"}),f.jsx("path",{d:"M15 16l4 -4"}),f.jsx("path",{d:"M15 8l4 4"})]})}};return f.jsxs("div",{className:"route-overview-container fade-in",children:[f.jsxs("div",{className:"header-container",children:[f.jsxs("header",{className:"route-overview-header",children:[f.jsx("button",{className:"route-back-button",onClick:()=>e(-1),children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-x",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M18 6l-12 12"}),f.jsx("path",{d:"M6 6l12 12"})]})}),f.jsx("h1",{className:"route-header-title",children:o.formatMessage({id:"routeOverview"})}),f.jsx("button",{className:"map-profile-button",onClick:()=>e("/Profile"),children:f.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("circle",{cx:"9.99984",cy:"5",r:"3.33333",fill:"#1E2023"}),f.jsx("ellipse",{cx:"9.99984",cy:"14.1667",rx:"5.83333",ry:"3.33333",fill:"#1E2023"})]})})]}),f.jsx("div",{className:"header-gradient"})]}),f.jsx("div",{className:"route-map-container",children:f.jsxs(Kd,{ref:r,mapLib:Do,mapStyle:Qd,initialViewState:dt,attributionControl:!1,style:{width:"100%",height:"100%"},children:[f.jsx(Wr,{longitude:(Be=ye[0])==null?void 0:Be[0],latitude:(it=ye[0])==null?void 0:it[1],anchor:"bottom",children:f.jsx("div",{className:"c-circle"})}),f.jsx(Wr,{longitude:(ft=ye[ye.length-1])==null?void 0:ft[0],latitude:(mt=ye[ye.length-1])==null?void 0:mt[1],anchor:"bottom",children:f.jsx("div",{className:"des-marker",children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"35",height:"35",viewBox:"0 0 24 24",fill:"#e74c3c",className:"icon icon-tabler icons-tabler-filled icon-tabler-map-pin",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M18.364 4.636a9 9 0 0 1 .203 12.519l-.203 .21l-4.243 4.242a3 3 0 0 1 -4.097 .135l-.144 -.135l-4.244 -4.243a9 9 0 0 1 12.728 -12.728zm-6.364 3.364a3 3 0 1 0 0 6a3 3 0 0 0 0 -6z"})]})})}),qe(),f.jsx(Io,{id:"route",type:"geojson",data:Pe,children:f.jsx(ds,{id:"route-line",type:"line",paint:{"line-color":"#0f71ef","line-width":10}})}),ht&&f.jsx(Io,{id:"highlight",type:"geojson",data:ht,children:f.jsx(ds,{id:"highlight-line",type:"line",paint:{"line-color":"#e74c3c","line-width":8}})}),N&&f.jsx(qm,{className:"main-popup-container",longitude:N[0],latitude:N[1],closeButton:!1,closeOnClick:!1,anchor:"bottom",children:f.jsx("div",{className:"time-popup main-popup",children:P})}),f.jsx(y2,{routeCoords:ye})]})}),f.jsxs("button",{className:"start-routing-btn",onClick:()=>e("/rng"),children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",viewBox:"0 0 24 24",fill:"currentColor",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M11.092 2.581a1 1 0 0 1 1.754 -.116l.062 .116l8.005 17.365c.198 .566 .05 1.196 -.378 1.615a1.53 1.53 0 0 1 -1.459 .393l-7.077 -2.398l-6.899 2.338a1.535 1.535 0 0 1 -1.52 -.231l-.112 -.1c-.398 -.386 -.556 -.954 -.393 -1.556l.047 -.15l7.97 -17.276z"})]}),o.formatMessage({id:"startRouting"})]}),f.jsxs("div",{className:"route-info-container",children:[f.jsxs("div",{className:"route-stats",children:[f.jsxs("div",{className:"route-distance",children:[f.jsx("span",{className:"direction-icon",children:je()}),f.jsx("span",{className:"distance-value",children:L})]}),f.jsx("div",{className:"route-time",children:f.jsx("span",{className:"time-value",children:P})})]}),f.jsxs("div",{className:"route-instruction-container",children:[f.jsx("div",{className:"route-instruction",children:f.jsx("p",{className:"instruction-text",children:(xt=Re[d])==null?void 0:xt.instruction})}),f.jsxs("div",{className:"carousel-controls",children:[f.jsxs("button",{className:"carousel-prev",onClick:de,disabled:d===0,children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:f.jsx("path",{d:"M9 6l6 6l-6 6",stroke:"currentColor",strokeWidth:"2",fill:"none"})}),o.formatMessage({id:"previous"})]}),f.jsxs("div",{className:"mid-controls",children:[f.jsx("div",{className:"step-counter",children:o.formatMessage({id:"stepPrefix"},{num:d+1,total:Re.length})}),f.jsx("div",{className:`carousel-dots4 ${Re.length>10?"has-very-many-dots":Re.length>5?"has-many-dots":""}`,children:Re.map((ut,vt)=>f.jsx("span",{className:`dot4 ${vt===d?"active":""}`,onClick:()=>m(vt)},vt))})]}),f.jsxs("button",{className:"carousel-next",onClick:ke,disabled:d===Re.length-1,children:[o.formatMessage({id:"next"}),f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:f.jsx("path",{d:"M15 6l-6 6l6 6",stroke:"currentColor",strokeWidth:"2",fill:"none"})})]})]})]})]}),U&&f.jsx("div",{className:"subgroup-modal-overlay",onClick:Me,children:f.jsxs("div",{className:"subgroup-modal-content",onClick:ut=>ut.stopPropagation(),children:[f.jsxs("div",{className:"modal-image-section",children:[f.jsx("div",{className:"main-image2",style:{backgroundImage:`url(${Array.isArray(U.img)?U.img[H]:U.img})`},children:U.img&&Array.isArray(U.img)&&U.img.length>1&&f.jsx("div",{className:"image-thumbnails2",children:U.img.slice(0,3).map((ut,vt)=>f.jsx("div",{className:`thumbnail2 ${vt===H?"active":""}`,style:{backgroundImage:`url(${ut})`},onClick:()=>G(vt)},vt))})}),f.jsx("div",{className:"image-fade3"})]}),f.jsx("div",{className:"btn-box3",children:f.jsx("button",{className:"continue-route-btn",onClick:Me,children:o.formatMessage({id:"closeAndContinue"})})})]})})]})};function t6(e,o){return function(){return e.apply(o,arguments)}}const{toString:Yv}=Object.prototype,{getPrototypeOf:x2}=Object,{iterator:p0,toStringTag:n6}=Symbol,f0=(e=>o=>{const i=Yv.call(o);return e[i]||(e[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),ha=e=>(e=e.toLowerCase(),o=>f0(o)===e),m0=e=>o=>typeof o===e,{isArray:Jd}=Array,lp=m0("undefined");function Xv(e){return e!==null&&!lp(e)&&e.constructor!==null&&!lp(e.constructor)&&Cs(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const r6=ha("ArrayBuffer");function Kv(e){let o;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?o=ArrayBuffer.isView(e):o=e&&e.buffer&&r6(e.buffer),o}const Qv=m0("string"),Cs=m0("function"),i6=m0("number"),g0=e=>e!==null&&typeof e=="object",Jv=e=>e===!0||e===!1,Lf=e=>{if(f0(e)!=="object")return!1;const o=x2(e);return(o===null||o===Object.prototype||Object.getPrototypeOf(o)===null)&&!(n6 in e)&&!(p0 in e)},ex=ha("Date"),tx=ha("File"),nx=ha("Blob"),rx=ha("FileList"),ix=e=>g0(e)&&Cs(e.pipe),sx=e=>{let o;return e&&(typeof FormData=="function"&&e instanceof FormData||Cs(e.append)&&((o=f0(e))==="formdata"||o==="object"&&Cs(e.toString)&&e.toString()==="[object FormData]"))},ox=ha("URLSearchParams"),[ax,lx,cx,ux]=["ReadableStream","Request","Response","Headers"].map(ha),dx=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function yp(e,o,{allOwnKeys:i=!1}={}){if(e===null||typeof e>"u")return;let r,d;if(typeof e!="object"&&(e=[e]),Jd(e))for(r=0,d=e.length;r<d;r++)o.call(null,e[r],r,e);else{const m=i?Object.getOwnPropertyNames(e):Object.keys(e),x=m.length;let c;for(r=0;r<x;r++)c=m[r],o.call(null,e[c],c,e)}}function s6(e,o){o=o.toLowerCase();const i=Object.keys(e);let r=i.length,d;for(;r-- >0;)if(d=i[r],o===d.toLowerCase())return d;return null}const b1=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,o6=e=>!lp(e)&&e!==b1;function Gm(){const{caseless:e}=o6(this)&&this||{},o={},i=(r,d)=>{const m=e&&s6(o,d)||d;Lf(o[m])&&Lf(r)?o[m]=Gm(o[m],r):Lf(r)?o[m]=Gm({},r):Jd(r)?o[m]=r.slice():o[m]=r};for(let r=0,d=arguments.length;r<d;r++)arguments[r]&&yp(arguments[r],i);return o}const hx=(e,o,i,{allOwnKeys:r}={})=>(yp(o,(d,m)=>{i&&Cs(d)?e[m]=t6(d,i):e[m]=d},{allOwnKeys:r}),e),px=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),fx=(e,o,i,r)=>{e.prototype=Object.create(o.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:o.prototype}),i&&Object.assign(e.prototype,i)},mx=(e,o,i,r)=>{let d,m,x;const c={};if(o=o||{},e==null)return o;do{for(d=Object.getOwnPropertyNames(e),m=d.length;m-- >0;)x=d[m],(!r||r(x,e,o))&&!c[x]&&(o[x]=e[x],c[x]=!0);e=i!==!1&&x2(e)}while(e&&(!i||i(e,o))&&e!==Object.prototype);return o},gx=(e,o,i)=>{e=String(e),(i===void 0||i>e.length)&&(i=e.length),i-=o.length;const r=e.indexOf(o,i);return r!==-1&&r===i},yx=e=>{if(!e)return null;if(Jd(e))return e;let o=e.length;if(!i6(o))return null;const i=new Array(o);for(;o-- >0;)i[o]=e[o];return i},vx=(e=>o=>e&&o instanceof e)(typeof Uint8Array<"u"&&x2(Uint8Array)),xx=(e,o)=>{const r=(e&&e[p0]).call(e);let d;for(;(d=r.next())&&!d.done;){const m=d.value;o.call(e,m[0],m[1])}},_x=(e,o)=>{let i;const r=[];for(;(i=e.exec(o))!==null;)r.push(i);return r},wx=ha("HTMLFormElement"),bx=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,r,d){return r.toUpperCase()+d}),J3=(({hasOwnProperty:e})=>(o,i)=>e.call(o,i))(Object.prototype),Cx=ha("RegExp"),a6=(e,o)=>{const i=Object.getOwnPropertyDescriptors(e),r={};yp(i,(d,m)=>{let x;(x=o(d,m,e))!==!1&&(r[m]=x||d)}),Object.defineProperties(e,r)},Sx=e=>{a6(e,(o,i)=>{if(Cs(e)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const r=e[i];if(Cs(r)){if(o.enumerable=!1,"writable"in o){o.writable=!1;return}o.set||(o.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},Mx=(e,o)=>{const i={},r=d=>{d.forEach(m=>{i[m]=!0})};return Jd(e)?r(e):r(String(e).split(o)),i},Ex=()=>{},Lx=(e,o)=>e!=null&&Number.isFinite(e=+e)?e:o;function Tx(e){return!!(e&&Cs(e.append)&&e[n6]==="FormData"&&e[p0])}const kx=e=>{const o=new Array(10),i=(r,d)=>{if(g0(r)){if(o.indexOf(r)>=0)return;if(!("toJSON"in r)){o[d]=r;const m=Jd(r)?[]:{};return yp(r,(x,c)=>{const L=i(x,d+1);!lp(L)&&(m[c]=L)}),o[d]=void 0,m}}return r};return i(e,0)},Px=ha("AsyncFunction"),Dx=e=>e&&(g0(e)||Cs(e))&&Cs(e.then)&&Cs(e.catch),l6=((e,o)=>e?setImmediate:o?((i,r)=>(b1.addEventListener("message",({source:d,data:m})=>{d===b1&&m===i&&r.length&&r.shift()()},!1),d=>{r.push(d),b1.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",Cs(b1.postMessage)),Ix=typeof queueMicrotask<"u"?queueMicrotask.bind(b1):typeof process<"u"&&process.nextTick||l6,Nx=e=>e!=null&&Cs(e[p0]),lt={isArray:Jd,isArrayBuffer:r6,isBuffer:Xv,isFormData:sx,isArrayBufferView:Kv,isString:Qv,isNumber:i6,isBoolean:Jv,isObject:g0,isPlainObject:Lf,isReadableStream:ax,isRequest:lx,isResponse:cx,isHeaders:ux,isUndefined:lp,isDate:ex,isFile:tx,isBlob:nx,isRegExp:Cx,isFunction:Cs,isStream:ix,isURLSearchParams:ox,isTypedArray:vx,isFileList:rx,forEach:yp,merge:Gm,extend:hx,trim:dx,stripBOM:px,inherits:fx,toFlatObject:mx,kindOf:f0,kindOfTest:ha,endsWith:gx,toArray:yx,forEachEntry:xx,matchAll:_x,isHTMLForm:wx,hasOwnProperty:J3,hasOwnProp:J3,reduceDescriptors:a6,freezeMethods:Sx,toObjectSet:Mx,toCamelCase:bx,noop:Ex,toFiniteNumber:Lx,findKey:s6,global:b1,isContextDefined:o6,isSpecCompliantForm:Tx,toJSONObject:kx,isAsyncFn:Px,isThenable:Dx,setImmediate:l6,asap:Ix,isIterable:Nx};function Pn(e,o,i,r,d){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",o&&(this.code=o),i&&(this.config=i),r&&(this.request=r),d&&(this.response=d,this.status=d.status?d.status:null)}lt.inherits(Pn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:lt.toJSONObject(this.config),code:this.code,status:this.status}}});const c6=Pn.prototype,u6={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{u6[e]={value:e}});Object.defineProperties(Pn,u6);Object.defineProperty(c6,"isAxiosError",{value:!0});Pn.from=(e,o,i,r,d,m)=>{const x=Object.create(c6);return lt.toFlatObject(e,x,function(L){return L!==Error.prototype},c=>c!=="isAxiosError"),Pn.call(x,e.message,o,i,r,d),x.cause=e,x.name=e.name,m&&Object.assign(x,m),x};const Rx=null;function Ym(e){return lt.isPlainObject(e)||lt.isArray(e)}function d6(e){return lt.endsWith(e,"[]")?e.slice(0,-2):e}function eg(e,o,i){return e?e.concat(o).map(function(d,m){return d=d6(d),!i&&m?"["+d+"]":d}).join(i?".":""):o}function Ax(e){return lt.isArray(e)&&!e.some(Ym)}const jx=lt.toFlatObject(lt,{},null,function(o){return/^is[A-Z]/.test(o)});function y0(e,o,i){if(!lt.isObject(e))throw new TypeError("target must be an object");o=o||new FormData,i=lt.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(q,H){return!lt.isUndefined(H[q])});const r=i.metaTokens,d=i.visitor||P,m=i.dots,x=i.indexes,L=(i.Blob||typeof Blob<"u"&&Blob)&&lt.isSpecCompliantForm(o);if(!lt.isFunction(d))throw new TypeError("visitor must be a function");function T(U){if(U===null)return"";if(lt.isDate(U))return U.toISOString();if(!L&&lt.isBlob(U))throw new Pn("Blob is not supported. Use a Buffer instead.");return lt.isArrayBuffer(U)||lt.isTypedArray(U)?L&&typeof Blob=="function"?new Blob([U]):Buffer.from(U):U}function P(U,q,H){let G=U;if(U&&!H&&typeof U=="object"){if(lt.endsWith(q,"{}"))q=r?q:q.slice(0,-2),U=JSON.stringify(U);else if(lt.isArray(U)&&Ax(U)||(lt.isFileList(U)||lt.endsWith(q,"[]"))&&(G=lt.toArray(U)))return q=d6(q),G.forEach(function(oe,Ce){!(lt.isUndefined(oe)||oe===null)&&o.append(x===!0?eg([q],Ce,m):x===null?q:q+"[]",T(oe))}),!1}return Ym(U)?!0:(o.append(eg(H,q,m),T(U)),!1)}const D=[],N=Object.assign(jx,{defaultVisitor:P,convertValue:T,isVisitable:Ym});function $(U,q){if(!lt.isUndefined(U)){if(D.indexOf(U)!==-1)throw Error("Circular reference detected in "+q.join("."));D.push(U),lt.forEach(U,function(G,te){(!(lt.isUndefined(G)||G===null)&&d.call(o,G,lt.isString(te)?te.trim():te,q,N))===!0&&$(G,q?q.concat(te):[te])}),D.pop()}}if(!lt.isObject(e))throw new TypeError("data must be an object");return $(e),o}function tg(e){const o={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return o[r]})}function _2(e,o){this._pairs=[],e&&y0(e,this,o)}const h6=_2.prototype;h6.append=function(o,i){this._pairs.push([o,i])};h6.toString=function(o){const i=o?function(r){return o.call(this,r,tg)}:tg;return this._pairs.map(function(d){return i(d[0])+"="+i(d[1])},"").join("&")};function Ox(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function p6(e,o,i){if(!o)return e;const r=i&&i.encode||Ox;lt.isFunction(i)&&(i={serialize:i});const d=i&&i.serialize;let m;if(d?m=d(o,i):m=lt.isURLSearchParams(o)?o.toString():new _2(o,i).toString(r),m){const x=e.indexOf("#");x!==-1&&(e=e.slice(0,x)),e+=(e.indexOf("?")===-1?"?":"&")+m}return e}class ng{constructor(){this.handlers=[]}use(o,i,r){return this.handlers.push({fulfilled:o,rejected:i,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(o){this.handlers[o]&&(this.handlers[o]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(o){lt.forEach(this.handlers,function(r){r!==null&&o(r)})}}const f6={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},zx=typeof URLSearchParams<"u"?URLSearchParams:_2,Fx=typeof FormData<"u"?FormData:null,Bx=typeof Blob<"u"?Blob:null,$x={isBrowser:!0,classes:{URLSearchParams:zx,FormData:Fx,Blob:Bx},protocols:["http","https","file","blob","url","data"]},w2=typeof window<"u"&&typeof document<"u",Xm=typeof navigator=="object"&&navigator||void 0,Vx=w2&&(!Xm||["ReactNative","NativeScript","NS"].indexOf(Xm.product)<0),Hx=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ux=w2&&window.location.href||"http://localhost",Zx=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:w2,hasStandardBrowserEnv:Vx,hasStandardBrowserWebWorkerEnv:Hx,navigator:Xm,origin:Ux},Symbol.toStringTag,{value:"Module"})),qi={...Zx,...$x};function qx(e,o){return y0(e,new qi.classes.URLSearchParams,Object.assign({visitor:function(i,r,d,m){return qi.isNode&&lt.isBuffer(i)?(this.append(r,i.toString("base64")),!1):m.defaultVisitor.apply(this,arguments)}},o))}function Wx(e){return lt.matchAll(/\w+|\[(\w*)]/g,e).map(o=>o[0]==="[]"?"":o[1]||o[0])}function Gx(e){const o={},i=Object.keys(e);let r;const d=i.length;let m;for(r=0;r<d;r++)m=i[r],o[m]=e[m];return o}function m6(e){function o(i,r,d,m){let x=i[m++];if(x==="__proto__")return!0;const c=Number.isFinite(+x),L=m>=i.length;return x=!x&&lt.isArray(d)?d.length:x,L?(lt.hasOwnProp(d,x)?d[x]=[d[x],r]:d[x]=r,!c):((!d[x]||!lt.isObject(d[x]))&&(d[x]=[]),o(i,r,d[x],m)&&lt.isArray(d[x])&&(d[x]=Gx(d[x])),!c)}if(lt.isFormData(e)&&lt.isFunction(e.entries)){const i={};return lt.forEachEntry(e,(r,d)=>{o(Wx(r),d,i,0)}),i}return null}function Yx(e,o,i){if(lt.isString(e))try{return(o||JSON.parse)(e),lt.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(i||JSON.stringify)(e)}const vp={transitional:f6,adapter:["xhr","http","fetch"],transformRequest:[function(o,i){const r=i.getContentType()||"",d=r.indexOf("application/json")>-1,m=lt.isObject(o);if(m&&lt.isHTMLForm(o)&&(o=new FormData(o)),lt.isFormData(o))return d?JSON.stringify(m6(o)):o;if(lt.isArrayBuffer(o)||lt.isBuffer(o)||lt.isStream(o)||lt.isFile(o)||lt.isBlob(o)||lt.isReadableStream(o))return o;if(lt.isArrayBufferView(o))return o.buffer;if(lt.isURLSearchParams(o))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),o.toString();let c;if(m){if(r.indexOf("application/x-www-form-urlencoded")>-1)return qx(o,this.formSerializer).toString();if((c=lt.isFileList(o))||r.indexOf("multipart/form-data")>-1){const L=this.env&&this.env.FormData;return y0(c?{"files[]":o}:o,L&&new L,this.formSerializer)}}return m||d?(i.setContentType("application/json",!1),Yx(o)):o}],transformResponse:[function(o){const i=this.transitional||vp.transitional,r=i&&i.forcedJSONParsing,d=this.responseType==="json";if(lt.isResponse(o)||lt.isReadableStream(o))return o;if(o&&lt.isString(o)&&(r&&!this.responseType||d)){const x=!(i&&i.silentJSONParsing)&&d;try{return JSON.parse(o)}catch(c){if(x)throw c.name==="SyntaxError"?Pn.from(c,Pn.ERR_BAD_RESPONSE,this,null,this.response):c}}return o}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:qi.classes.FormData,Blob:qi.classes.Blob},validateStatus:function(o){return o>=200&&o<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};lt.forEach(["delete","get","head","post","put","patch"],e=>{vp.headers[e]={}});const Xx=lt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Kx=e=>{const o={};let i,r,d;return e&&e.split(`
`).forEach(function(x){d=x.indexOf(":"),i=x.substring(0,d).trim().toLowerCase(),r=x.substring(d+1).trim(),!(!i||o[i]&&Xx[i])&&(i==="set-cookie"?o[i]?o[i].push(r):o[i]=[r]:o[i]=o[i]?o[i]+", "+r:r)}),o},rg=Symbol("internals");function qh(e){return e&&String(e).trim().toLowerCase()}function Tf(e){return e===!1||e==null?e:lt.isArray(e)?e.map(Tf):String(e)}function Qx(e){const o=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=i.exec(e);)o[r[1]]=r[2];return o}const Jx=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function um(e,o,i,r,d){if(lt.isFunction(r))return r.call(this,o,i);if(d&&(o=i),!!lt.isString(o)){if(lt.isString(r))return o.indexOf(r)!==-1;if(lt.isRegExp(r))return r.test(o)}}function e_(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(o,i,r)=>i.toUpperCase()+r)}function t_(e,o){const i=lt.toCamelCase(" "+o);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+i,{value:function(d,m,x){return this[r].call(this,o,d,m,x)},configurable:!0})})}let Ss=class{constructor(o){o&&this.set(o)}set(o,i,r){const d=this;function m(c,L,T){const P=qh(L);if(!P)throw new Error("header name must be a non-empty string");const D=lt.findKey(d,P);(!D||d[D]===void 0||T===!0||T===void 0&&d[D]!==!1)&&(d[D||L]=Tf(c))}const x=(c,L)=>lt.forEach(c,(T,P)=>m(T,P,L));if(lt.isPlainObject(o)||o instanceof this.constructor)x(o,i);else if(lt.isString(o)&&(o=o.trim())&&!Jx(o))x(Kx(o),i);else if(lt.isObject(o)&&lt.isIterable(o)){let c={},L,T;for(const P of o){if(!lt.isArray(P))throw TypeError("Object iterator must return a key-value pair");c[T=P[0]]=(L=c[T])?lt.isArray(L)?[...L,P[1]]:[L,P[1]]:P[1]}x(c,i)}else o!=null&&m(i,o,r);return this}get(o,i){if(o=qh(o),o){const r=lt.findKey(this,o);if(r){const d=this[r];if(!i)return d;if(i===!0)return Qx(d);if(lt.isFunction(i))return i.call(this,d,r);if(lt.isRegExp(i))return i.exec(d);throw new TypeError("parser must be boolean|regexp|function")}}}has(o,i){if(o=qh(o),o){const r=lt.findKey(this,o);return!!(r&&this[r]!==void 0&&(!i||um(this,this[r],r,i)))}return!1}delete(o,i){const r=this;let d=!1;function m(x){if(x=qh(x),x){const c=lt.findKey(r,x);c&&(!i||um(r,r[c],c,i))&&(delete r[c],d=!0)}}return lt.isArray(o)?o.forEach(m):m(o),d}clear(o){const i=Object.keys(this);let r=i.length,d=!1;for(;r--;){const m=i[r];(!o||um(this,this[m],m,o,!0))&&(delete this[m],d=!0)}return d}normalize(o){const i=this,r={};return lt.forEach(this,(d,m)=>{const x=lt.findKey(r,m);if(x){i[x]=Tf(d),delete i[m];return}const c=o?e_(m):String(m).trim();c!==m&&delete i[m],i[c]=Tf(d),r[c]=!0}),this}concat(...o){return this.constructor.concat(this,...o)}toJSON(o){const i=Object.create(null);return lt.forEach(this,(r,d)=>{r!=null&&r!==!1&&(i[d]=o&&lt.isArray(r)?r.join(", "):r)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([o,i])=>o+": "+i).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(o){return o instanceof this?o:new this(o)}static concat(o,...i){const r=new this(o);return i.forEach(d=>r.set(d)),r}static accessor(o){const r=(this[rg]=this[rg]={accessors:{}}).accessors,d=this.prototype;function m(x){const c=qh(x);r[c]||(t_(d,x),r[c]=!0)}return lt.isArray(o)?o.forEach(m):m(o),this}};Ss.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);lt.reduceDescriptors(Ss.prototype,({value:e},o)=>{let i=o[0].toUpperCase()+o.slice(1);return{get:()=>e,set(r){this[i]=r}}});lt.freezeMethods(Ss);function dm(e,o){const i=this||vp,r=o||i,d=Ss.from(r.headers);let m=r.data;return lt.forEach(e,function(c){m=c.call(i,m,d.normalize(),o?o.status:void 0)}),d.normalize(),m}function g6(e){return!!(e&&e.__CANCEL__)}function eh(e,o,i){Pn.call(this,e??"canceled",Pn.ERR_CANCELED,o,i),this.name="CanceledError"}lt.inherits(eh,Pn,{__CANCEL__:!0});function y6(e,o,i){const r=i.config.validateStatus;!i.status||!r||r(i.status)?e(i):o(new Pn("Request failed with status code "+i.status,[Pn.ERR_BAD_REQUEST,Pn.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function n_(e){const o=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return o&&o[1]||""}function r_(e,o){e=e||10;const i=new Array(e),r=new Array(e);let d=0,m=0,x;return o=o!==void 0?o:1e3,function(L){const T=Date.now(),P=r[m];x||(x=T),i[d]=L,r[d]=T;let D=m,N=0;for(;D!==d;)N+=i[D++],D=D%e;if(d=(d+1)%e,d===m&&(m=(m+1)%e),T-x<o)return;const $=P&&T-P;return $?Math.round(N*1e3/$):void 0}}function i_(e,o){let i=0,r=1e3/o,d,m;const x=(T,P=Date.now())=>{i=P,d=null,m&&(clearTimeout(m),m=null),e.apply(null,T)};return[(...T)=>{const P=Date.now(),D=P-i;D>=r?x(T,P):(d=T,m||(m=setTimeout(()=>{m=null,x(d)},r-D)))},()=>d&&x(d)]}const $f=(e,o,i=3)=>{let r=0;const d=r_(50,250);return i_(m=>{const x=m.loaded,c=m.lengthComputable?m.total:void 0,L=x-r,T=d(L),P=x<=c;r=x;const D={loaded:x,total:c,progress:c?x/c:void 0,bytes:L,rate:T||void 0,estimated:T&&c&&P?(c-x)/T:void 0,event:m,lengthComputable:c!=null,[o?"download":"upload"]:!0};e(D)},i)},ig=(e,o)=>{const i=e!=null;return[r=>o[0]({lengthComputable:i,total:e,loaded:r}),o[1]]},sg=e=>(...o)=>lt.asap(()=>e(...o)),s_=qi.hasStandardBrowserEnv?((e,o)=>i=>(i=new URL(i,qi.origin),e.protocol===i.protocol&&e.host===i.host&&(o||e.port===i.port)))(new URL(qi.origin),qi.navigator&&/(msie|trident)/i.test(qi.navigator.userAgent)):()=>!0,o_=qi.hasStandardBrowserEnv?{write(e,o,i,r,d,m){const x=[e+"="+encodeURIComponent(o)];lt.isNumber(i)&&x.push("expires="+new Date(i).toGMTString()),lt.isString(r)&&x.push("path="+r),lt.isString(d)&&x.push("domain="+d),m===!0&&x.push("secure"),document.cookie=x.join("; ")},read(e){const o=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return o?decodeURIComponent(o[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function a_(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function l_(e,o){return o?e.replace(/\/?\/$/,"")+"/"+o.replace(/^\/+/,""):e}function v6(e,o,i){let r=!a_(o);return e&&(r||i==!1)?l_(e,o):o}const og=e=>e instanceof Ss?{...e}:e;function N1(e,o){o=o||{};const i={};function r(T,P,D,N){return lt.isPlainObject(T)&&lt.isPlainObject(P)?lt.merge.call({caseless:N},T,P):lt.isPlainObject(P)?lt.merge({},P):lt.isArray(P)?P.slice():P}function d(T,P,D,N){if(lt.isUndefined(P)){if(!lt.isUndefined(T))return r(void 0,T,D,N)}else return r(T,P,D,N)}function m(T,P){if(!lt.isUndefined(P))return r(void 0,P)}function x(T,P){if(lt.isUndefined(P)){if(!lt.isUndefined(T))return r(void 0,T)}else return r(void 0,P)}function c(T,P,D){if(D in o)return r(T,P);if(D in e)return r(void 0,T)}const L={url:m,method:m,data:m,baseURL:x,transformRequest:x,transformResponse:x,paramsSerializer:x,timeout:x,timeoutMessage:x,withCredentials:x,withXSRFToken:x,adapter:x,responseType:x,xsrfCookieName:x,xsrfHeaderName:x,onUploadProgress:x,onDownloadProgress:x,decompress:x,maxContentLength:x,maxBodyLength:x,beforeRedirect:x,transport:x,httpAgent:x,httpsAgent:x,cancelToken:x,socketPath:x,responseEncoding:x,validateStatus:c,headers:(T,P,D)=>d(og(T),og(P),D,!0)};return lt.forEach(Object.keys(Object.assign({},e,o)),function(P){const D=L[P]||d,N=D(e[P],o[P],P);lt.isUndefined(N)&&D!==c||(i[P]=N)}),i}const x6=e=>{const o=N1({},e);let{data:i,withXSRFToken:r,xsrfHeaderName:d,xsrfCookieName:m,headers:x,auth:c}=o;o.headers=x=Ss.from(x),o.url=p6(v6(o.baseURL,o.url,o.allowAbsoluteUrls),e.params,e.paramsSerializer),c&&x.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):"")));let L;if(lt.isFormData(i)){if(qi.hasStandardBrowserEnv||qi.hasStandardBrowserWebWorkerEnv)x.setContentType(void 0);else if((L=x.getContentType())!==!1){const[T,...P]=L?L.split(";").map(D=>D.trim()).filter(Boolean):[];x.setContentType([T||"multipart/form-data",...P].join("; "))}}if(qi.hasStandardBrowserEnv&&(r&&lt.isFunction(r)&&(r=r(o)),r||r!==!1&&s_(o.url))){const T=d&&m&&o_.read(m);T&&x.set(d,T)}return o},c_=typeof XMLHttpRequest<"u",u_=c_&&function(e){return new Promise(function(i,r){const d=x6(e);let m=d.data;const x=Ss.from(d.headers).normalize();let{responseType:c,onUploadProgress:L,onDownloadProgress:T}=d,P,D,N,$,U;function q(){$&&$(),U&&U(),d.cancelToken&&d.cancelToken.unsubscribe(P),d.signal&&d.signal.removeEventListener("abort",P)}let H=new XMLHttpRequest;H.open(d.method.toUpperCase(),d.url,!0),H.timeout=d.timeout;function G(){if(!H)return;const oe=Ss.from("getAllResponseHeaders"in H&&H.getAllResponseHeaders()),ae={data:!c||c==="text"||c==="json"?H.responseText:H.response,status:H.status,statusText:H.statusText,headers:oe,config:e,request:H};y6(function(Fe){i(Fe),q()},function(Fe){r(Fe),q()},ae),H=null}"onloadend"in H?H.onloadend=G:H.onreadystatechange=function(){!H||H.readyState!==4||H.status===0&&!(H.responseURL&&H.responseURL.indexOf("file:")===0)||setTimeout(G)},H.onabort=function(){H&&(r(new Pn("Request aborted",Pn.ECONNABORTED,e,H)),H=null)},H.onerror=function(){r(new Pn("Network Error",Pn.ERR_NETWORK,e,H)),H=null},H.ontimeout=function(){let Ce=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded";const ae=d.transitional||f6;d.timeoutErrorMessage&&(Ce=d.timeoutErrorMessage),r(new Pn(Ce,ae.clarifyTimeoutError?Pn.ETIMEDOUT:Pn.ECONNABORTED,e,H)),H=null},m===void 0&&x.setContentType(null),"setRequestHeader"in H&&lt.forEach(x.toJSON(),function(Ce,ae){H.setRequestHeader(ae,Ce)}),lt.isUndefined(d.withCredentials)||(H.withCredentials=!!d.withCredentials),c&&c!=="json"&&(H.responseType=d.responseType),T&&([N,U]=$f(T,!0),H.addEventListener("progress",N)),L&&H.upload&&([D,$]=$f(L),H.upload.addEventListener("progress",D),H.upload.addEventListener("loadend",$)),(d.cancelToken||d.signal)&&(P=oe=>{H&&(r(!oe||oe.type?new eh(null,e,H):oe),H.abort(),H=null)},d.cancelToken&&d.cancelToken.subscribe(P),d.signal&&(d.signal.aborted?P():d.signal.addEventListener("abort",P)));const te=n_(d.url);if(te&&qi.protocols.indexOf(te)===-1){r(new Pn("Unsupported protocol "+te+":",Pn.ERR_BAD_REQUEST,e));return}H.send(m||null)})},d_=(e,o)=>{const{length:i}=e=e?e.filter(Boolean):[];if(o||i){let r=new AbortController,d;const m=function(T){if(!d){d=!0,c();const P=T instanceof Error?T:this.reason;r.abort(P instanceof Pn?P:new eh(P instanceof Error?P.message:P))}};let x=o&&setTimeout(()=>{x=null,m(new Pn(`timeout ${o} of ms exceeded`,Pn.ETIMEDOUT))},o);const c=()=>{e&&(x&&clearTimeout(x),x=null,e.forEach(T=>{T.unsubscribe?T.unsubscribe(m):T.removeEventListener("abort",m)}),e=null)};e.forEach(T=>T.addEventListener("abort",m));const{signal:L}=r;return L.unsubscribe=()=>lt.asap(c),L}},h_=function*(e,o){let i=e.byteLength;if(i<o){yield e;return}let r=0,d;for(;r<i;)d=r+o,yield e.slice(r,d),r=d},p_=async function*(e,o){for await(const i of f_(e))yield*h_(i,o)},f_=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const o=e.getReader();try{for(;;){const{done:i,value:r}=await o.read();if(i)break;yield r}}finally{await o.cancel()}},ag=(e,o,i,r)=>{const d=p_(e,o);let m=0,x,c=L=>{x||(x=!0,r&&r(L))};return new ReadableStream({async pull(L){try{const{done:T,value:P}=await d.next();if(T){c(),L.close();return}let D=P.byteLength;if(i){let N=m+=D;i(N)}L.enqueue(new Uint8Array(P))}catch(T){throw c(T),T}},cancel(L){return c(L),d.return()}},{highWaterMark:2})},v0=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",_6=v0&&typeof ReadableStream=="function",m_=v0&&(typeof TextEncoder=="function"?(e=>o=>e.encode(o))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),w6=(e,...o)=>{try{return!!e(...o)}catch{return!1}},g_=_6&&w6(()=>{let e=!1;const o=new Request(qi.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!o}),lg=64*1024,Km=_6&&w6(()=>lt.isReadableStream(new Response("").body)),Vf={stream:Km&&(e=>e.body)};v0&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(o=>{!Vf[o]&&(Vf[o]=lt.isFunction(e[o])?i=>i[o]():(i,r)=>{throw new Pn(`Response type '${o}' is not supported`,Pn.ERR_NOT_SUPPORT,r)})})})(new Response);const y_=async e=>{if(e==null)return 0;if(lt.isBlob(e))return e.size;if(lt.isSpecCompliantForm(e))return(await new Request(qi.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(lt.isArrayBufferView(e)||lt.isArrayBuffer(e))return e.byteLength;if(lt.isURLSearchParams(e)&&(e=e+""),lt.isString(e))return(await m_(e)).byteLength},v_=async(e,o)=>{const i=lt.toFiniteNumber(e.getContentLength());return i??y_(o)},x_=v0&&(async e=>{let{url:o,method:i,data:r,signal:d,cancelToken:m,timeout:x,onDownloadProgress:c,onUploadProgress:L,responseType:T,headers:P,withCredentials:D="same-origin",fetchOptions:N}=x6(e);T=T?(T+"").toLowerCase():"text";let $=d_([d,m&&m.toAbortSignal()],x),U;const q=$&&$.unsubscribe&&(()=>{$.unsubscribe()});let H;try{if(L&&g_&&i!=="get"&&i!=="head"&&(H=await v_(P,r))!==0){let ae=new Request(o,{method:"POST",body:r,duplex:"half"}),Ne;if(lt.isFormData(r)&&(Ne=ae.headers.get("content-type"))&&P.setContentType(Ne),ae.body){const[Fe,ye]=ig(H,$f(sg(L)));r=ag(ae.body,lg,Fe,ye)}}lt.isString(D)||(D=D?"include":"omit");const G="credentials"in Request.prototype;U=new Request(o,{...N,signal:$,method:i.toUpperCase(),headers:P.normalize().toJSON(),body:r,duplex:"half",credentials:G?D:void 0});let te=await fetch(U);const oe=Km&&(T==="stream"||T==="response");if(Km&&(c||oe&&q)){const ae={};["status","statusText","headers"].forEach(Ke=>{ae[Ke]=te[Ke]});const Ne=lt.toFiniteNumber(te.headers.get("content-length")),[Fe,ye]=c&&ig(Ne,$f(sg(c),!0))||[];te=new Response(ag(te.body,lg,Fe,()=>{ye&&ye(),q&&q()}),ae)}T=T||"text";let Ce=await Vf[lt.findKey(Vf,T)||"text"](te,e);return!oe&&q&&q(),await new Promise((ae,Ne)=>{y6(ae,Ne,{data:Ce,headers:Ss.from(te.headers),status:te.status,statusText:te.statusText,config:e,request:U})})}catch(G){throw q&&q(),G&&G.name==="TypeError"&&/Load failed|fetch/i.test(G.message)?Object.assign(new Pn("Network Error",Pn.ERR_NETWORK,e,U),{cause:G.cause||G}):Pn.from(G,G&&G.code,e,U)}}),Qm={http:Rx,xhr:u_,fetch:x_};lt.forEach(Qm,(e,o)=>{if(e){try{Object.defineProperty(e,"name",{value:o})}catch{}Object.defineProperty(e,"adapterName",{value:o})}});const cg=e=>`- ${e}`,__=e=>lt.isFunction(e)||e===null||e===!1,b6={getAdapter:e=>{e=lt.isArray(e)?e:[e];const{length:o}=e;let i,r;const d={};for(let m=0;m<o;m++){i=e[m];let x;if(r=i,!__(i)&&(r=Qm[(x=String(i)).toLowerCase()],r===void 0))throw new Pn(`Unknown adapter '${x}'`);if(r)break;d[x||"#"+m]=r}if(!r){const m=Object.entries(d).map(([c,L])=>`adapter ${c} `+(L===!1?"is not supported by the environment":"is not available in the build"));let x=o?m.length>1?`since :
`+m.map(cg).join(`
`):" "+cg(m[0]):"as no adapter specified";throw new Pn("There is no suitable adapter to dispatch the request "+x,"ERR_NOT_SUPPORT")}return r},adapters:Qm};function hm(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new eh(null,e)}function ug(e){return hm(e),e.headers=Ss.from(e.headers),e.data=dm.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),b6.getAdapter(e.adapter||vp.adapter)(e).then(function(r){return hm(e),r.data=dm.call(e,e.transformResponse,r),r.headers=Ss.from(r.headers),r},function(r){return g6(r)||(hm(e),r&&r.response&&(r.response.data=dm.call(e,e.transformResponse,r.response),r.response.headers=Ss.from(r.response.headers))),Promise.reject(r)})}const C6="1.9.0",x0={};["object","boolean","number","function","string","symbol"].forEach((e,o)=>{x0[e]=function(r){return typeof r===e||"a"+(o<1?"n ":" ")+e}});const dg={};x0.transitional=function(o,i,r){function d(m,x){return"[Axios v"+C6+"] Transitional option '"+m+"'"+x+(r?". "+r:"")}return(m,x,c)=>{if(o===!1)throw new Pn(d(x," has been removed"+(i?" in "+i:"")),Pn.ERR_DEPRECATED);return i&&!dg[x]&&(dg[x]=!0,console.warn(d(x," has been deprecated since v"+i+" and will be removed in the near future"))),o?o(m,x,c):!0}};x0.spelling=function(o){return(i,r)=>(console.warn(`${r} is likely a misspelling of ${o}`),!0)};function w_(e,o,i){if(typeof e!="object")throw new Pn("options must be an object",Pn.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let d=r.length;for(;d-- >0;){const m=r[d],x=o[m];if(x){const c=e[m],L=c===void 0||x(c,m,e);if(L!==!0)throw new Pn("option "+m+" must be "+L,Pn.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new Pn("Unknown option "+m,Pn.ERR_BAD_OPTION)}}const kf={assertOptions:w_,validators:x0},Ya=kf.validators;let E1=class{constructor(o){this.defaults=o||{},this.interceptors={request:new ng,response:new ng}}async request(o,i){try{return await this._request(o,i)}catch(r){if(r instanceof Error){let d={};Error.captureStackTrace?Error.captureStackTrace(d):d=new Error;const m=d.stack?d.stack.replace(/^.+\n/,""):"";try{r.stack?m&&!String(r.stack).endsWith(m.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+m):r.stack=m}catch{}}throw r}}_request(o,i){typeof o=="string"?(i=i||{},i.url=o):i=o||{},i=N1(this.defaults,i);const{transitional:r,paramsSerializer:d,headers:m}=i;r!==void 0&&kf.assertOptions(r,{silentJSONParsing:Ya.transitional(Ya.boolean),forcedJSONParsing:Ya.transitional(Ya.boolean),clarifyTimeoutError:Ya.transitional(Ya.boolean)},!1),d!=null&&(lt.isFunction(d)?i.paramsSerializer={serialize:d}:kf.assertOptions(d,{encode:Ya.function,serialize:Ya.function},!0)),i.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?i.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:i.allowAbsoluteUrls=!0),kf.assertOptions(i,{baseUrl:Ya.spelling("baseURL"),withXsrfToken:Ya.spelling("withXSRFToken")},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let x=m&&lt.merge(m.common,m[i.method]);m&&lt.forEach(["delete","get","head","post","put","patch","common"],U=>{delete m[U]}),i.headers=Ss.concat(x,m);const c=[];let L=!0;this.interceptors.request.forEach(function(q){typeof q.runWhen=="function"&&q.runWhen(i)===!1||(L=L&&q.synchronous,c.unshift(q.fulfilled,q.rejected))});const T=[];this.interceptors.response.forEach(function(q){T.push(q.fulfilled,q.rejected)});let P,D=0,N;if(!L){const U=[ug.bind(this),void 0];for(U.unshift.apply(U,c),U.push.apply(U,T),N=U.length,P=Promise.resolve(i);D<N;)P=P.then(U[D++],U[D++]);return P}N=c.length;let $=i;for(D=0;D<N;){const U=c[D++],q=c[D++];try{$=U($)}catch(H){q.call(this,H);break}}try{P=ug.call(this,$)}catch(U){return Promise.reject(U)}for(D=0,N=T.length;D<N;)P=P.then(T[D++],T[D++]);return P}getUri(o){o=N1(this.defaults,o);const i=v6(o.baseURL,o.url,o.allowAbsoluteUrls);return p6(i,o.params,o.paramsSerializer)}};lt.forEach(["delete","get","head","options"],function(o){E1.prototype[o]=function(i,r){return this.request(N1(r||{},{method:o,url:i,data:(r||{}).data}))}});lt.forEach(["post","put","patch"],function(o){function i(r){return function(m,x,c){return this.request(N1(c||{},{method:o,headers:r?{"Content-Type":"multipart/form-data"}:{},url:m,data:x}))}}E1.prototype[o]=i(),E1.prototype[o+"Form"]=i(!0)});let b_=class S6{constructor(o){if(typeof o!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(m){i=m});const r=this;this.promise.then(d=>{if(!r._listeners)return;let m=r._listeners.length;for(;m-- >0;)r._listeners[m](d);r._listeners=null}),this.promise.then=d=>{let m;const x=new Promise(c=>{r.subscribe(c),m=c}).then(d);return x.cancel=function(){r.unsubscribe(m)},x},o(function(m,x,c){r.reason||(r.reason=new eh(m,x,c),i(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(o){if(this.reason){o(this.reason);return}this._listeners?this._listeners.push(o):this._listeners=[o]}unsubscribe(o){if(!this._listeners)return;const i=this._listeners.indexOf(o);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){const o=new AbortController,i=r=>{o.abort(r)};return this.subscribe(i),o.signal.unsubscribe=()=>this.unsubscribe(i),o.signal}static source(){let o;return{token:new S6(function(d){o=d}),cancel:o}}};function C_(e){return function(i){return e.apply(null,i)}}function S_(e){return lt.isObject(e)&&e.isAxiosError===!0}const Jm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Jm).forEach(([e,o])=>{Jm[o]=e});function M6(e){const o=new E1(e),i=t6(E1.prototype.request,o);return lt.extend(i,E1.prototype,o,{allOwnKeys:!0}),lt.extend(i,o,null,{allOwnKeys:!0}),i.create=function(d){return M6(N1(e,d))},i}const ri=M6(vp);ri.Axios=E1;ri.CanceledError=eh;ri.CancelToken=b_;ri.isCancel=g6;ri.VERSION=C6;ri.toFormData=y0;ri.AxiosError=Pn;ri.Cancel=ri.CanceledError;ri.all=function(o){return Promise.all(o)};ri.spread=C_;ri.isAxiosError=S_;ri.mergeConfig=N1;ri.AxiosHeaders=Ss;ri.formToJSON=e=>m6(lt.isHTMLForm(e)?new FormData(e):e);ri.getAdapter=b6.getAdapter;ri.HttpStatusCode=Jm;ri.default=ri;const{Axios:dZ,AxiosError:hZ,CanceledError:pZ,isCancel:fZ,CancelToken:mZ,VERSION:gZ,all:yZ,Cancel:vZ,isAxiosError:xZ,spread:_Z,toFormData:wZ,AxiosHeaders:bZ,HttpStatusCode:CZ,formToJSON:SZ,getAdapter:MZ,mergeConfig:EZ}=ri;function M_(e,o="fa"){var r,d;const i=m=>m&&typeof m=="object"&&!Array.isArray(m)?m[o]||m.fa||Object.values(m)[0]:m;return{...e,title:i(e.title),location:i(e.location),openingHours:i(e.openingHours),about:{short:i((r=e==null?void 0:e.about)==null?void 0:r.short),full:i((d=e==null?void 0:e.about)==null?void 0:d.full)},events:Array.isArray(e.events)?e.events.map(m=>({...m,title:i(m.title),description:i(m.description)})):e.events}}const E_="/golden_path/assets/videos/vid1.mp4",L_="/golden_path/assets/videos/vid2.mp4",T_="/golden_path/assets/videos/vid3.mp4",k_="/golden_path/assets/videos/vid4.mp4",P_="/golden_path/img/s45.jpg",D_="/golden_path/assets/pdfs/pdf1.pdf",I_={v1:E_,v2:L_,v3:T_,v4:k_,p1:P_,pdf1:D_},hg=e=>I_[e]||"";Object.values(Po).flat().reduce((e,o)=>(e[o.label]=o.value,e),{});const N_=()=>{var pn,Cn;const e=qs(),o=mp(),r=(()=>{let ct=o.search||window.location.search;return!ct&&window.location.hash.includes("?")&&(ct=window.location.hash.split("?")[1],ct&&(ct="?"+ct)),ct&&ct.includes("&amp;")&&(ct=ct.replace(/&amp;/g,"&")),new URLSearchParams(ct)})().get("id"),d=ii(),m=h0(),[x,c]=B.useState(0),[L,T]=B.useState(""),[P,D]=B.useState([]),[N,$]=B.useState(!1),[U,q]=B.useState(!1),[H,G]=B.useState(0),[te,oe]=B.useState(0),[Ce,ae]=B.useState(0),[Ne,Fe]=B.useState(0),[ye,Ke]=B.useState(null),[Me,qe]=B.useState(!0),[Re,dt]=B.useState(null),[Xe,ht]=B.useState(0),[Pe,ke]=B.useState(0),[de,je]=B.useState(!1),[Ee,K]=B.useState(null),[be,Be]=B.useState(null),[it,ft]=B.useState(null),[mt,xt]=B.useState(!1),ut=B.useRef(null),vt=B.useRef(null),Tt=B.useRef(null),Rt=B.useRef(null),[Bt,Pt]=B.useState(null);cl(ct=>ct.setDestination);const jt=Gi(ct=>ct.language);B.useEffect(()=>{const ct=sessionStorage.getItem("qrLat"),Ot=sessionStorage.getItem("qrLng"),et=sessionStorage.getItem("qrId"),$t=!!(ct&&Ot);je($t),$t&&K({lat:parseFloat(ct),lng:parseFloat(Ot),id:et||null});const Dt=sessionStorage.getItem("mapSelectedLat")||ct,mn=sessionStorage.getItem("mapSelectedLng")||Ot,Fn=sessionStorage.getItem("mapSelectedId")||et;Dt&&mn&&Be({lat:parseFloat(Dt),lng:parseFloat(mn),id:Fn})},[]);const hn=ct=>{ht(ct.targetTouches[0].clientX)},Mn=ct=>{ke(ct.targetTouches[0].clientX)},jn=()=>{const ct=document.documentElement.dir==="rtl";Xe-Pe>50&&Yt(ct?(x-1+ye.images.length)%ye.images.length:(x+1)%ye.images.length),Xe-Pe<-50&&Yt(ct?(x+1)%ye.images.length:(x-1+ye.images.length)%ye.images.length)};B.useEffect(()=>{const ct=new Audio;return Tt.current=ct,()=>{ct.pause(),ct.src="",Rt.current&&(URL.revokeObjectURL(Rt.current),Rt.current=null)}},[]);const Jn=()=>{Tt.current&&(Tt.current.pause(),Tt.current.currentTime=0,Tt.current.src=""),Rt.current&&(URL.revokeObjectURL(Rt.current),Rt.current=null)};B.useEffect(()=>{var sr,He;if(!(ye!=null&&ye.about))return;const ct=((sr=ye.about)==null?void 0:sr.short)??"",Ot=((He=ye.about)==null?void 0:He.full)??"",et=ct.trim(),$t=Ot.trim(),Dt=(kt,en)=>{if(!en)return"";const Ft=en.trim();if(!kt)return Ft;const Vt=kt.trim();if(!Vt)return Ft;if(Ft.startsWith(Vt))return Ft.slice(Vt.length).trim();const Qn=Ft.indexOf(Vt);if(Qn!==-1){const _r=Ft.slice(Qn+Vt.length).trim();if(_r)return _r}const qn=_r=>/\s/.test(_r);let tr=0,Tr=0;for(;tr<Ft.length&&Tr<Vt.length;){const _r=Ft[tr],fs=Vt[Tr];if(qn(_r)&&qn(fs)){for(;tr<Ft.length&&qn(Ft[tr]);)tr+=1;for(;Tr<Vt.length&&qn(Vt[Tr]);)Tr+=1;continue}if(_r===fs){tr+=1,Tr+=1;continue}break}if(Tr===Vt.length){for(;tr<Ft.length&&qn(Ft[tr]);)tr+=1;const _r=Ft.slice(tr).trim();if(_r)return _r}return Ft};let mn;if(N?mn=Dt(et,$t)||$t||et||"":mn=et||$t||"",!(mn!=null&&mn.trim()))return;let Fn=!1;return(async()=>{try{Jn();const kt=await e6.fetchSpeech(mn,jt?{language:jt}:{});if(Fn)return;const en=URL.createObjectURL(kt);if(Rt.current=en,!Tt.current)return;Tt.current.src=en,await Tt.current.play()}catch{}})(),()=>{Fn=!0,Jn()}},[d,jt,ye,N]),B.useEffect(()=>{if(ut.current&&ye){const Ot=document.documentElement.dir==="rtl"?`${x*100}%`:`-${x*100}%`;ut.current.style.transform=`translateX(${Ot})`}},[ye,x]);const Yt=ct=>{ct!==x&&c(ct)};B.useEffect(()=>{if(!(ye!=null&&ye.images))return;const ct=setInterval(()=>{c(Ot=>(Ot+1)%ye.images.length)},5e3);return()=>clearInterval(ct)},[ye]);const xn=()=>{!N&&vt.current&&vt.current.scrollIntoView({behavior:"smooth",block:"nearest"}),$(!N)},Nn=()=>{q(!0),document.body.style.overflow="hidden"},Dn=()=>{q(!1),document.body.style.overflow="auto"},bn=ct=>{G(ct)},yt=ct=>{oe(ct)},Et=()=>{oe(0)},nt=ct=>{if(ct.preventDefault(),L.trim()){const Ot={author:d.formatMessage({id:"defaultCommentAuthor"}),text:L,date:["fa","ur","ar"].includes(jt)?new Date().toLocaleDateString("fa-IR"):new Date().toLocaleDateString(),rating:H||0};D(et=>[Ot,...et]),T(""),ae(et=>et+1),G(0),oe(0),q(!1),document.body.style.overflow="auto",Je()}};B.useEffect(()=>{const ct=sessionStorage.getItem("qrLat"),Ot=sessionStorage.getItem("qrLng"),et=sessionStorage.getItem("qrId"),$t=!!(ct&&Ot),Dt=!!et;je($t&&Dt),$t&&Dt&&K({lat:parseFloat(ct),lng:parseFloat(Ot),id:et});const mn=sessionStorage.getItem("mapSelectedLat")||sessionStorage.getItem("qrLat"),Fn=sessionStorage.getItem("mapSelectedLng")||sessionStorage.getItem("qrLng"),nn=sessionStorage.getItem("mapSelectedId")||sessionStorage.getItem("qrId");mn&&Fn&&Be({lat:parseFloat(mn),lng:parseFloat(Fn),id:nn})},[]);const Le=()=>{if(!Ee||!be)return!1;const ct=Math.abs(Ee.lat-be.lat),Ot=Math.abs(Ee.lng-be.lng),et=1e-4,$t=ct<et&&Ot<et,Dt=!Ee.id||!be.id||Ee.id===be.id;return $t&&Dt},Je=()=>{if(P.length===0){Fe(0);return}const ct=P.reduce((Ot,et)=>Ot+(et.rating||0),0)/P.length;Fe(ct)},ln=ct=>{const Ot=hg(ct.fileKey);if(!Ot){Kn.error(d.formatMessage({id:"videoLoadError"}));return}ft({...ct,mediaUrl:Ot}),document.body.style.overflow="hidden"},cn=()=>{ft(null),xt(!1),document.body.style.overflow="auto"},Gt=async ct=>{var et;const Ot=hg(ct.fileKey);if(Ot)try{if((await fetch(Ot,{method:"HEAD"})).ok){const Dt=window.open("","_blank"),mn=`
          <!DOCTYPE html>
          <html>
          <head>
            <title>${((et=ct.title)==null?void 0:et[jt])||"PDF Document"}</title>
            <style>
              body { margin: 0; padding: 20px; background: #f5f5f5; }
              .container { max-width: 100%; height: 100vh; }
              embed { width: 100%; height: 100%; border: none; }
            </style>
          </head>
          <body>
            <div class="container">
              <embed src="${Ot}" type="application/pdf">
            </div>
          </body>
          </html>
        `;Dt.document.write(mn),Dt.document.close()}else throw new Error("PDF not found")}catch($t){console.error("Error opening PDF:",$t);const Dt=document.createElement("a");Dt.href=Ot,Dt.target="_blank",Dt.rel="noopener noreferrer",document.body.appendChild(Dt),Dt.click(),document.body.removeChild(Dt)}};return B.useEffect(()=>{const ct=ll(jt);fetch(ct).then(Ot=>Ot.json()).then(Pt).catch(Ot=>console.error("failed to load geojson",Ot))},[jt]),B.useEffect(()=>{(async()=>{try{let et=(await ri.get("./data/locationData.json")).data;const Dt=new URLSearchParams(window.location.search).get("id");Dt&&(Dt==="rozemonavare_12"||Dt==="saghakhaneh_15")?et=Array.isArray(et)?et.find(mn=>mn.id===Dt)||et[0]:et:et=Array.isArray(et)?et.find(mn=>mn.id===r)||et[0]:et,et=M_(et,jt),Ke(et),D(et.comments||[]),ae(et.views||0),Fe(et.averageRating||0),qe(!1)}catch(Ot){dt(Ot.message),qe(!1)}})()},[r,jt]),B.useEffect(()=>{Je()},[P]),Me?f.jsx("div",{className:"loading",children:d.formatMessage({id:"loading"})}):Re?f.jsx("div",{className:"error",children:d.formatMessage({id:"fetchError"},{error:Re})}):ye?f.jsxs("div",{className:"location-page",children:[f.jsxs("div",{className:"carousel-wrapper",children:[f.jsxs("div",{className:"fixed-header-icons",children:[f.jsx("button",{className:"back-btn6",onClick:()=>e(-1),children:f.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.2244 4.55806C11.4685 4.31398 11.8642 4.31398 12.1083 4.55806L17.1083 9.55806C17.3524 9.80214 17.3524 10.1979 17.1083 10.4419L12.1083 15.4419C11.8642 15.686 11.4685 15.686 11.2244 15.4419C10.9803 15.1979 10.9803 14.8021 11.2244 14.5581L15.1575 10.625H3.33301C2.98783 10.625 2.70801 10.3452 2.70801 10C2.70801 9.65482 2.98783 9.375 3.33301 9.375H15.1575L11.2244 5.44194C10.9803 5.19786 10.9803 4.80214 11.2244 4.55806Z",fill:"black"})})}),f.jsx("button",{className:"profile-icon",onClick:()=>e("/Profile"),children:f.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("circle",{cx:"9.99984",cy:"5",r:"3.33333",fill:"#1E2023"}),f.jsx("ellipse",{cx:"9.99984",cy:"14.1667",rx:"5.83333",ry:"3.33333",fill:"#1E2023"})]})})]}),f.jsxs("div",{className:"carousel-container",children:[f.jsx("div",{className:"carousel",ref:ut,style:{transform:`translateX(-${x*100}%)`},onTouchStart:hn,onTouchMove:Mn,onTouchEnd:jn,children:(pn=ye.images)==null?void 0:pn.map((ct,Ot)=>f.jsx("div",{className:"carousel-slide",children:f.jsx("img",{src:ct,alt:d.formatMessage({id:"imageAlt"},{title:ye.title,n:Ot+1}),loading:Ot>0?"lazy":"eager",style:{width:"100%",height:"100%",objectFit:"cover"}})},Ot))}),f.jsx("div",{className:"carousel-fade"})]}),f.jsx("div",{className:"carousel-dots",children:(Cn=ye.images)==null?void 0:Cn.map((ct,Ot)=>f.jsx("button",{className:`dot ${Ot===x?"active":""}`,onClick:()=>Yt(Ot),"aria-label":d.formatMessage({id:"goToSlide"},{n:Ot+1})},Ot))})]}),f.jsxs("section",{className:"location-info2",children:[f.jsxs("div",{className:"you-are-here",children:[f.jsx("div",{className:"line left-line"}),f.jsx("div",{className:"circle"}),f.jsx("span",{children:de?f.jsx(pt,{id:"youAreHere"}):f.jsx(pt,{id:"youAreHereQr",values:{placeName:ye.title}})}),f.jsx("div",{className:"line right-line"})]}),f.jsx("h1",{children:ye.title}),f.jsx("h2",{children:ye.location}),f.jsxs("div",{className:"location-meta",children:[f.jsxs("div",{className:"opening-hours-badge",children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-clock",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"}),f.jsx("path",{d:"M12 7v5l3 3"})]}),f.jsx("span",{children:ye.openingHours})]}),f.jsxs("div",{className:"views-rating",children:[f.jsxs("span",{className:"rating",children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z"})]}),m(Ne.toFixed(1))]}),f.jsxs("span",{className:"views",children:["(",m(Ce)," ",d.formatMessage({id:"commentsLabel"}),")"]})]})]}),f.jsxs("div",{className:"about-location",ref:vt,children:[f.jsx("h3",{children:f.jsx(pt,{id:"aboutLocation",values:{title:ye.title}})}),f.jsxs("div",{className:`about-content ${N?"expanded":""}`,children:[f.jsxs("p",{children:[N?ye.about.full:ye.about.short,!N&&f.jsx("button",{className:"read-more",onClick:xn,children:f.jsx(pt,{id:"readMore"})})]}),N&&f.jsx("div",{className:"close-button-container",children:f.jsx("button",{className:"read-more close-button",onClick:xn,children:f.jsx(pt,{id:"close"})})})]})]})]}),ye.contents&&ye.contents.length>0&&f.jsxs("section",{className:"content-section",children:[f.jsx("h3",{children:f.jsx(pt,{id:"audioTextContent",values:{title:ye.title}})}),f.jsx("div",{className:"content-list",children:ye.contents.map(ct=>f.jsxs("div",{className:"content-item",children:[f.jsxs("div",{className:"content-media",children:[ct.type==="audio"&&f.jsx("div",{className:"audio-thumbnail",style:{backgroundImage:`url(${ct.thumbnail})`},children:f.jsx("div",{className:"play-icon",children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("circle",{cx:"12",cy:"12",r:"10"}),f.jsx("polygon",{points:"10 8 16 12 10 16 10 8"})]})})}),ct.type==="video"&&f.jsx("div",{className:"video-thumbnail-container",children:f.jsx("button",{className:"video-thumbnail-link",onClick:()=>ln(ct),children:f.jsx("div",{className:"video-thumbnail",style:{backgroundImage:`url(${ct.thumbnail})`},children:f.jsx("div",{className:"play-icon",children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("circle",{cx:"12",cy:"12",r:"10"}),f.jsx("polygon",{points:"10 8 16 12 10 16 10 8"})]})})})})}),ct.type==="pdf"&&f.jsxs("div",{className:"pdf-thumbnail",onClick:()=>Gt(ct),children:[ct.thumbnail?f.jsx("img",{src:ct.thumbnail,alt:ct.title[jt]||"PDF document",onError:Ot=>{Ot.target.style.display="none"}}):null,f.jsx("div",{className:"pdf-icon-overlay",children:f.jsx("div",{className:"pdf-icon",children:f.jsxs("svg",{width:"50",height:"50",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{opacity:"0.5",d:"M19.9997 36.6668C29.2044 36.6668 36.6663 29.2049 36.6663 20.0002C36.6663 10.7954 29.2044 3.3335 19.9997 3.3335C10.7949 3.3335 3.33301 10.7954 3.33301 20.0002C3.33301 29.2049 10.7949 36.6668 19.9997 36.6668Z",fill:"white"}),f.jsx("path",{d:"M11.6316 21.108V24H9.57964V15.468H12.9756C13.6396 15.468 14.2196 15.596 14.7156 15.852C15.2196 16.1 15.6076 16.444 15.8796 16.884C16.1516 17.316 16.2876 17.808 16.2876 18.36C16.2876 18.912 16.1516 19.396 15.8796 19.812C15.6156 20.228 15.2316 20.548 14.7276 20.772C14.2236 20.996 13.6276 21.108 12.9396 21.108H11.6316ZM12.9756 19.512C13.3756 19.512 13.6796 19.416 13.8876 19.224C14.0956 19.024 14.1996 18.74 14.1996 18.372C14.1996 17.964 14.0916 17.644 13.8756 17.412C13.6676 17.172 13.3756 17.052 12.9996 17.052H11.6316V19.512H12.9756ZM17.396 24V15.468H20.144C20.904 15.468 21.584 15.644 22.184 15.996C22.784 16.34 23.252 16.82 23.588 17.436C23.924 18.052 24.092 18.748 24.092 19.524V19.92C24.092 20.688 23.928 21.384 23.6 22.008C23.272 22.624 22.812 23.112 22.22 23.472C21.636 23.824 20.964 24 20.204 24H17.396ZM20.168 22.416C20.752 22.416 21.204 22.204 21.524 21.78C21.844 21.356 22.004 20.736 22.004 19.92V19.548C22.004 18.732 21.844 18.112 21.524 17.688C21.204 17.264 20.744 17.052 20.144 17.052H19.448V22.416H20.168ZM25.1539 15.468H30.8539V17.052H27.2059V19.02H30.5179V20.604H27.2059V24H25.1539V15.468Z",fill:"white"})]})})})]})]}),f.jsxs("div",{className:"content-info",children:[f.jsx("h4",{children:ct.title[jt]}),f.jsx("p",{children:ct.description[jt]})]})]},ct.id))})]}),f.jsxs("section",{className:"comments-section",children:[f.jsxs("div",{className:"comments-header",children:[f.jsx("h3",{children:f.jsx(pt,{id:"commentsTitle",values:{count:P.length}})}),f.jsxs("button",{className:"view-all-btn",children:[f.jsx(pt,{id:"viewAll"}),f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M15 6l-6 6l6 6"})]})]})]}),f.jsxs("div",{className:"comment-input-wrapper",onClick:Nn,children:[f.jsxs("div",{className:"comment-input-header",children:[f.jsx("svg",{width:"20",height:"20",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99992 1.83337C4.59416 1.83337 1.83325 4.59428 1.83325 8.00004C1.83325 8.98741 2.06494 9.91924 2.47645 10.7454C2.64161 11.077 2.70521 11.4736 2.60101 11.863L2.20394 13.347C2.13101 13.6196 2.38036 13.8689 2.65291 13.796L4.13694 13.399C4.5264 13.2947 4.92292 13.3583 5.25452 13.5235C6.08072 13.935 7.01255 14.1667 7.99992 14.1667C11.4057 14.1667 14.1666 11.4058 14.1666 8.00004C14.1666 4.59428 11.4057 1.83337 7.99992 1.83337ZM0.833252 8.00004C0.833252 4.042 4.04188 0.833374 7.99992 0.833374C11.958 0.833374 15.1666 4.042 15.1666 8.00004C15.1666 11.9581 11.958 15.1667 7.99992 15.1667C6.85438 15.1667 5.77027 14.8976 4.80868 14.4186C4.66519 14.3472 4.51868 14.332 4.39541 14.365L2.91139 14.762C1.8955 15.0339 0.966101 14.1045 1.23792 13.0886L1.63499 11.6045C1.66797 11.4813 1.65281 11.3348 1.58134 11.1913C1.10239 10.2297 0.833252 9.14558 0.833252 8.00004ZM4.83325 7.00004C4.83325 6.7239 5.05711 6.50004 5.33325 6.50004H10.6666C10.9427 6.50004 11.1666 6.7239 11.1666 7.00004C11.1666 7.27618 10.9427 7.50004 10.6666 7.50004H5.33325C5.05711 7.50004 4.83325 7.27618 4.83325 7.00004ZM4.83325 9.33337C4.83325 9.05723 5.05711 8.83337 5.33325 8.83337H8.99992C9.27606 8.83337 9.49992 9.05723 9.49992 9.33337C9.49992 9.60952 9.27606 9.83337 8.99992 9.83337H5.33325C5.05711 9.83337 4.83325 9.60952 4.83325 9.33337Z",fill:"#1E2023"})}),f.jsx("h4",{children:f.jsx(pt,{id:"commentPromptTitle"})})]}),f.jsx("p",{className:"comment-instruction",children:f.jsx(pt,{id:"commentPromptInstruction"})}),f.jsxs("div",{className:"comment-input-container",children:[f.jsx("input",{type:"text",placeholder:d.formatMessage({id:"commentPlaceholder"}),readOnly:!0}),f.jsx("button",{type:"button",className:"send-comment",children:f.jsx("svg",{width:"17",height:"18",viewBox:"0 0 17 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M9.39464 15.0728L5.34893 13.05C1.81466 11.2829 0.0475295 10.3993 0.0475289 9.00008C0.047529 7.60087 1.81466 6.7173 5.34892 4.95017L9.39463 2.92732C12.2471 1.50107 13.6734 0.787951 14.5002 1.00685C15.2868 1.21509 15.9011 1.82943 16.1094 2.61602C16.3283 3.44287 15.6152 4.86911 14.1889 7.72161C14.0122 8.07512 13.6508 8.31029 13.2555 8.31213L6.79714 8.34219C6.4338 8.34388 6.14063 8.6398 6.14232 9.00314C6.14401 9.36648 6.43993 9.65966 6.80327 9.65797L13.1574 9.62839C13.593 9.62637 13.9941 9.88892 14.1889 10.2786C15.6152 13.131 16.3283 14.5573 16.1094 15.3841C15.9011 16.1707 15.2868 16.7851 14.5002 16.9933C13.6734 17.2122 12.2471 16.4991 9.39464 15.0728Z",fill:"#1E2023"})})})]})]}),f.jsx("div",{className:"comment-list-horizontal",children:P.map((ct,Ot)=>f.jsxs("div",{className:"comment-item",children:[f.jsxs("div",{className:"comment-header",children:[f.jsxs("div",{className:"comment-author-section",children:[f.jsx("div",{className:"profile-avatar2"}),f.jsx("span",{className:"comment-author",children:ct.author})]}),f.jsx("span",{className:"comment-date",children:ct.date})]}),f.jsx("div",{className:"comment-text",children:ct.text}),f.jsx("div",{className:"comment-rating-section",children:f.jsx("div",{className:"rating-stars",children:[1,2,3,4,5].map(et=>f.jsxs("svg",{className:et<=ct.rating?"filled":"",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z"})]},et))})})]},Ot))})]}),U&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"modal-overlay",onClick:Dn}),f.jsxs("div",{className:"comment-modal",children:[f.jsx("div",{className:"search-bar-toggle6",onClick:Dn,children:f.jsx("div",{className:"toggle-handle6"})}),f.jsx("div",{className:"modal-header",children:f.jsx("h3",{children:f.jsx(pt,{id:"commentModalTitle"})})}),f.jsxs("div",{className:"modal-content",children:[f.jsx("p",{className:"modal-instruction",children:f.jsx(pt,{id:"commentModalInstruction"})}),f.jsxs("div",{className:"rating-section",children:[f.jsx("p",{children:f.jsx(pt,{id:"ratingPrompt"})}),f.jsx("div",{className:"stars",children:[5,4,3,2,1].map(ct=>f.jsx("span",{onMouseEnter:()=>yt(ct),onMouseLeave:Et,onClick:()=>bn(ct),children:f.jsxs("svg",{className:`star-icon ${ct<=(te||H)?"filled":""}`,xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z"})]})},ct))})]}),f.jsx("div",{className:"modal-comment-input",children:f.jsx("textarea",{placeholder:d.formatMessage({id:"commentPlaceholder"}),value:L,onChange:ct=>T(ct.target.value)})}),f.jsx("button",{className:"submit-comment",onClick:nt,children:f.jsx(pt,{id:"submitComment"})})]})]})]}),de&&f.jsx("div",{className:"fixed-bottom-button-container",children:f.jsxs("button",{className:"fixed-bottom-button",onClick:()=>e("/mpr"),children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"#FFFFFF",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M11.092 2.581a1 1 0 0 1 1.754 -.116l.062 .116l8.005 17.365c.198 .566 .05 1.196 -.378 1.615a1.53 1.53 0 0 1 -1.459 .393l-7.077 -2.398l-6.899 2.338a1.535 1.535 0 0 1 -1.52 -.231l-.112 -.1c-.398 -.386 -.556 -.954 -.393 -1.556l.047 -.15l7.97 -17.276z"})]}),f.jsx(pt,{id:Le()?"navigateFromMpr":"navigateToMpr"})]})}),it&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"video-modal-overlay",onClick:cn}),f.jsx("div",{className:`video-modal ${mt?"fullscreen":""}`,children:f.jsx("div",{className:"video-container",children:f.jsxs("video",{controls:!0,autoPlay:!0,className:"video-player",controlsList:"nodownload",onLoadStart:()=>{const ct=document.querySelector(".video-player");ct&&ct.classList.add("loading")},onCanPlay:()=>{const ct=document.querySelector(".video-player");ct&&ct.classList.remove("loading")},onEnded:()=>{},children:[f.jsx("source",{src:it.mediaUrl,type:"video/mp4"}),f.jsx("div",{className:"video-loading-spinner"}),"Your browser does not support the video tag."]})})})]}),de&&f.jsx("div",{className:"fixed-bottom-button-container",children:f.jsxs("button",{className:"fixed-bottom-button",onClick:()=>e("/mpr"),children:[f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"#FFFFFF",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M11.092 2.581a1 1 0 0 1 1.754 -.116l.062 .116l8.005 17.365c.198 .566 .05 1.196 -.378 1.615a1.53 1.53 0 0 1 -1.459 .393l-7.077 -2.398l-6.899 2.338a1.535 1.535 0 0 1 -1.52 -.231l-.112 -.1c-.398 -.386 -.556 -.954 -.393 -1.556l.047 -.15l7.97 -17.276z"})]}),f.jsx(pt,{id:Le()?"navigateFromMpr":"navigateToMpr"})]})})]}):f.jsx("div",{className:"no-data",children:d.formatMessage({id:"noDataFound"})})},R_=()=>{const[e,o]=B.useState(1),i=qs(),r=Gi(c=>c.setLanguage),d=ii(),m=[{id:1,name:"فارسی",code:"(FA)",locale:"fa",englishName:"Persian"},{id:2,name:"اردو",code:"(Ur)",locale:"ur",englishName:"Urdu"},{id:3,name:"العربية",code:"(AR)",locale:"ar",englishName:"Arabic"},{id:4,name:"English",code:"(EN)",locale:"en",englishName:"English"}],x=()=>{if(e){const c=m.find(L=>L.id===e);c&&r(c.locale),i("/profile")}};return f.jsxs("div",{className:"plang-container",children:[f.jsxs("div",{className:"plang-header",children:[f.jsx("button",{className:"back-arrow11 ",onClick:()=>i(-1),children:f.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M3.33301 10H16.6663M16.6663 10L11.6663 5M16.6663 10L11.6663 15",stroke:"#1E2023",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),f.jsxs("h1",{className:"plang-heading",children:[" ",f.jsx(pt,{id:"plang.title"})," "]}),f.jsx("div",{className:"plang-description",children:f.jsxs("div",{children:[f.jsxs("h2",{children:[" ",f.jsx(pt,{id:"plang.subtitle"})," "]}),f.jsx("p",{children:f.jsx(pt,{id:"plang.description"})})]})})]}),f.jsx("div",{className:"lang-options-list2",children:m.map(c=>f.jsxs("div",{className:`lang-option ${e===c.id?"selected":""}`,onClick:()=>o(c.id),children:[f.jsx("div",{className:"selection-circle",children:e===c.id&&f.jsx("div",{className:"inner-circle"})}),f.jsxs("div",{className:"lang-text-container2",children:[f.jsx("span",{className:`lang-code lang-code-${c.code.replace(/[()]/g,"").toLowerCase()}`,children:c.code}),f.jsx("span",{className:`lang-name ${c.locale==="en"?"force-rtl":""}`,children:d.locale==="en"?c.englishName:c.name})]})]},c.id))}),f.jsx("button",{id:"confirmContinue",className:`plang-confirm-btn ${e?"":"disabled"}`,disabled:!e,onClick:x,children:f.jsx(pt,{id:"confirmContinue"})})]})};function A_(){const e=qs(),o=ii(),i=B.useRef(null),[r,d]=B.useState({firstName:"",lastName:"",phoneNumber:"",province:"",city:""}),[m,x]=B.useState(null),[c,L]=B.useState({type:"",text:""});B.useEffect(()=>{const Me=localStorage.getItem("userProfile");if(Me){const Re=JSON.parse(Me);d(dt=>({...dt,...Re})),Re.avatar&&x(Re.avatar)}const qe=localStorage.getItem("userAvatar");qe&&!m&&x(qe)},[]),B.useEffect(()=>{if(c.text){const Me=setTimeout(()=>{L({type:"",text:""})},3e3);return()=>clearTimeout(Me)}},[c]);const T=[{id:1,name:"تهران",cities:["تهران","شهریار","اسلامشهر","رباط کریم","قدس"]},{id:2,name:"خراسان رضوی",cities:["مشهد","نیشابور","سبزوار","قوچان","کاشمر"]},{id:3,name:"اصفهان",cities:["اصفهان","کاشان","خمینی شهر","شاهین شهر","نجف آباد"]},{id:4,name:"فارس",cities:["شیراز","مرودشت","کازرون","لار","جهرم"]},{id:5,name:"آذربایجان شرقی",cities:["تبریز","مراغه","مرند","اهر","اسکو"]},{id:6,name:"مازندران",cities:["ساری","بابل","آمل","قائم شهر","نور"]},{id:7,name:"خوزستان",cities:["اهواز","آبادان","خرمشهر","دزفول","شوشتر"]},{id:8,name:"البرز",cities:["کرج","هشتگرد","نظرآباد","طالقان","اشتهارد"]}],[P,D]=B.useState([]),[N,$]=B.useState(!1),[U,q]=B.useState(!1),H=()=>{var Me;(Me=i.current)==null||Me.click()},G=Me=>{const qe=Me.target.files[0];if(qe){const Re=new FileReader;Re.onload=dt=>{x(dt.target.result),localStorage.setItem("userAvatar",dt.target.result)},Re.readAsDataURL(qe)}},te=(Me,qe)=>{if(d(Re=>({...Re,[Me]:qe})),Me==="province"){const Re=T.find(dt=>dt.name===qe);D(Re?Re.cities:[]),d(dt=>({...dt,city:""}))}},oe=Me=>{te("province",Me),$(!1)},Ce=Me=>{te("city",Me),q(!1)},ae=Me=>Me?/^(\+98|0)?9\d{9}$/.test(Me.replace(/\D/g,"")):!1,Ne=Me=>{if(!Me)return"";const qe=Me.replace(/\D/g,"");return qe.startsWith("+98")?`${qe}`:qe.startsWith("0")?`98-${qe.substring(1)}+`:qe.length===10?`98${qe}`:Me},Fe=()=>{const Me=Ne(r.phoneNumber),qe={...r,phoneNumber:Me,avatar:m||localStorage.getItem("userAvatar"),profileCompleted:!0,updatedAt:new Date().toISOString()};localStorage.setItem("userProfile",JSON.stringify(qe)),L({type:"success",text:o.formatMessage({id:"profileUpdatedSuccess"})}),setTimeout(()=>{e("/profile")},1500)},ye=()=>r.firstName&&r.lastName?`${r.firstName} ${r.lastName}`:o.formatMessage({id:"Username"}),Ke=r.firstName&&r.lastName;return f.jsxs("div",{className:"profile-info-container",children:[c.text&&f.jsx("div",{className:`message-notification ${c.type}`,children:c.text}),f.jsxs("div",{className:"profile-info-header",children:[f.jsx("button",{className:"back-arrow3",onClick:()=>e(-1),children:f.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.2244 4.55806C11.4685 4.31398 11.8642 4.31398 12.1083 4.55806L17.1083 9.55806C17.3524 9.80214 17.3524 10.1979 17.1083 10.4419L12.1083 15.4419C11.8642 15.686 11.4685 15.686 11.2244 15.4419C10.9803 15.1979 10.9803 14.8021 11.2244 14.5581L15.1575 10.625H3.33301C2.98783 10.625 2.70801 10.3452 2.70801 10C2.70801 9.65482 2.98783 9.375 3.33301 9.375H15.1575L11.2244 5.44194C10.9803 5.19786 10.9803 4.80214 11.2244 4.55806Z",fill:"black"})})}),f.jsx("h1",{className:"profile-info-title",children:f.jsx(pt,{id:"completeProfileTitle"})}),f.jsx("button",{className:"menu-button",children:f.jsxs("svg",{width:"50",height:"50",viewBox:"0 0 44 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("rect",{x:"0.5",y:"0.5",width:"43",height:"43",rx:"21.5",stroke:"#D9D9D9"}),f.jsx("path",{d:"M26.1667 22.0001C26.1667 21.0796 26.9129 20.3334 27.8333 20.3334C28.7538 20.3334 29.5 21.0796 29.5 22.0001C29.5 22.9206 28.7538 23.6667 27.8333 23.6667C26.9129 23.6667 26.1667 22.9206 26.1667 22.0001Z",fill:"#1E2023"}),f.jsx("path",{d:"M20.3333 22.0001C20.3333 21.0796 21.0795 20.3334 22 20.3334C22.9205 20.3334 23.6667 21.0796 23.6667 22.0001C23.6667 22.9206 22.9205 23.6667 22 23.6667C21.0795 23.6667 20.3333 22.9206 20.3333 22.0001Z",fill:"#1E2023"}),f.jsx("path",{d:"M14.5 22.0001C14.5 21.0796 15.2462 20.3334 16.1667 20.3334C17.0871 20.3334 17.8333 21.0796 17.8333 22.0001C17.8333 22.9206 17.0871 23.6667 16.1667 23.6667C15.2462 23.6667 14.5 22.9206 14.5 22.0001Z",fill:"#1E2023"})]})})]}),f.jsxs("div",{className:"profile-avatar-section",children:[f.jsxs("div",{className:"avatar-container",onClick:H,children:[m?f.jsx("img",{src:m,alt:"Profile Avatar",className:"profile-avatar-image"}):f.jsx("div",{className:"profile-avatar-default",children:f.jsxs("svg",{width:"55",height:"56",viewBox:"0 0 55 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsxs("g",{clipPath:"url(#clip0_224_9691)",children:[f.jsx("mask",{id:"mask0_224_9691",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"55",height:"56",children:f.jsx("path",{d:"M27.4999 55.4287C12.3749 55.4287 0.0712891 43.125 0.0712891 28.0001C0.0712891 12.8752 12.3749 0.571533 27.4999 0.571533C42.6248 0.571533 54.9284 12.8752 54.9284 28.0001C54.9284 43.125 42.6248 55.4287 27.4999 55.4287Z",fill:"white"})}),f.jsxs("g",{mask:"url(#mask0_224_9691)",children:[f.jsx("path",{d:"M27.4999 55.4287C12.3749 55.4287 0.0712891 43.125 0.0712891 28.0001C0.0712891 12.8752 12.3749 0.571533 27.4999 0.571533C42.6248 0.571533 54.9284 12.8752 54.9284 28.0001C54.9284 43.125 42.6248 55.4287 27.4999 55.4287Z",fill:"#E7F1FE"}),f.jsx("path",{opacity:"0.5",fillRule:"evenodd",clipRule:"evenodd",d:"M32.7994 31.9187H18.2784C12.5738 31.9187 7.90625 36.7063 7.90625 42.6051V49.2522C9.21312 50.3016 10.603 51.2185 12.0551 52.0092C16.0774 54.1914 20.6848 55.4289 25.5389 55.4289C30.3931 55.4289 34.9983 54.1914 39.0227 52.0092C40.4727 51.2185 41.8646 50.3016 43.1715 49.2522V42.6051C43.1715 36.7063 38.5248 31.9187 32.7994 31.9187Z",fill:"url(#paint0_linear_224_9691)"}),f.jsx("path",{opacity:"0.5",fillRule:"evenodd",clipRule:"evenodd",d:"M25.5378 9.71313C19.7909 9.71313 15.0889 14.3942 15.0889 20.1621C15.0889 25.93 19.7909 30.6111 25.5378 30.6111C31.3056 30.6111 35.9868 25.93 35.9868 20.1621C35.9868 14.3942 31.3056 9.71313 25.5378 9.71313Z",fill:"url(#paint1_linear_224_9691)"}),f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M26.8496 11.0208C21.4618 11.0208 17.0537 15.4093 17.0537 20.8167C17.0537 26.224 21.4618 30.6125 26.8496 30.6125C32.257 30.6125 36.6456 26.224 36.6456 20.8167C36.6456 15.4093 32.257 11.0208 26.8496 11.0208Z",fill:"url(#paint2_linear_224_9691)"}),f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M34.3491 33.8762H20.6348C15.247 33.8762 10.8389 38.2648 10.8389 43.6722V49.7652C12.0732 50.7271 13.3858 51.5677 14.7572 52.2926C18.5561 54.2929 22.9074 55.4272 27.4919 55.4272C32.0764 55.4272 36.4258 54.2929 40.2266 52.2926C41.5961 51.5677 42.9106 50.7271 44.1449 49.7652V43.6722C44.1449 38.2648 39.7564 33.8762 34.3491 33.8762Z",fill:"url(#paint3_linear_224_9691)"})]})]}),f.jsxs("defs",{children:[f.jsxs("linearGradient",{id:"paint0_linear_224_9691",x1:"71.0299",y1:"37.1067",x2:"13.64",y2:"56.0111",gradientUnits:"userSpaceOnUse",children:[f.jsx("stop",{stopColor:"#0F71EF"}),f.jsx("stop",{offset:"1",stopColor:"white"})]}),f.jsxs("linearGradient",{id:"paint1_linear_224_9691",x1:"49.2108",y1:"25.9274",x2:"19.6461",y2:"18.01",gradientUnits:"userSpaceOnUse",children:[f.jsx("stop",{stopColor:"#858585"}),f.jsx("stop",{offset:"1",stopColor:"white"})]}),f.jsxs("linearGradient",{id:"paint2_linear_224_9691",x1:"33.9429",y1:"22.7948",x2:"-0.159482",y2:"11.0208",gradientUnits:"userSpaceOnUse",children:[f.jsx("stop",{stopColor:"#0F71EF"}),f.jsx("stop",{offset:"1",stopColor:"white"})]}),f.jsxs("linearGradient",{id:"paint3_linear_224_9691",x1:"14.1789",y1:"48.5383",x2:"38.6573",y2:"29.0982",gradientUnits:"userSpaceOnUse",children:[f.jsx("stop",{stopColor:"#0F71EF"}),f.jsx("stop",{offset:"1",stopColor:"white"})]}),f.jsx("clipPath",{id:"clip0_224_9691",children:f.jsx("rect",{width:"54.8571",height:"54.8571",fill:"white",transform:"translate(0.0712891 0.571533)"})})]})]})}),f.jsx("div",{className:"camera-icon",children:f.jsx("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.43274 2.61722C4.58839 1.85312 5.26834 1.3125 6.04736 1.3125H7.9533C8.73231 1.3125 9.41226 1.85312 9.56791 2.61722C9.60384 2.79361 9.76365 2.923 9.92983 2.923H9.93939L9.94894 2.92342C10.7676 2.95922 11.3964 3.05968 11.9214 3.40409C12.2522 3.62108 12.5367 3.90027 12.7584 4.22604C13.0343 4.63136 13.1559 5.09655 13.2142 5.65918C13.2712 6.20888 13.2712 6.89792 13.2712 7.77061V7.8203C13.2712 8.69299 13.2712 9.38203 13.2142 9.93173C13.1559 10.4944 13.0343 10.9596 12.7584 11.3649C12.5367 11.6906 12.2522 11.9698 11.9214 12.1868C11.5111 12.456 11.0406 12.5747 10.47 12.6317C9.91136 12.6875 9.21059 12.6875 8.32066 12.6875H5.67999C4.79006 12.6875 4.0893 12.6875 3.53064 12.6317C2.96004 12.5747 2.48959 12.456 2.07924 12.1868C1.74847 11.9698 1.46394 11.6906 1.24224 11.3649C0.966394 10.9596 0.844733 10.4944 0.786438 9.93173C0.729483 9.38203 0.729487 8.69299 0.729492 7.82029V7.77062C0.729487 6.89792 0.729483 6.20888 0.786438 5.65918C0.844733 5.09655 0.966394 4.63136 1.24224 4.22604C1.46394 3.90027 1.74847 3.62108 2.07924 3.40409C2.60422 3.05968 3.23304 2.95922 4.05171 2.92342L4.06126 2.923H4.07082C4.23701 2.923 4.39681 2.79361 4.43274 2.61722ZM6.04736 2.1875C5.67337 2.1875 5.36061 2.44591 5.29013 2.79187C5.176 3.35218 4.67924 3.79275 4.08152 3.79795C3.29483 3.83291 2.87345 3.92954 2.5592 4.1357C2.3238 4.29013 2.12221 4.48823 1.96561 4.71833C1.80452 4.95504 1.70772 5.25773 1.65678 5.74936C1.60504 6.24871 1.60449 6.89243 1.60449 7.79545C1.60449 8.69847 1.60504 9.3422 1.65678 9.84155C1.70772 10.3332 1.80452 10.6359 1.96561 10.8726C2.12221 11.1027 2.3238 11.3008 2.5592 11.4552C2.80276 11.615 3.11442 11.7108 3.6176 11.761C4.12769 11.812 4.78479 11.8125 5.70403 11.8125H8.29662C9.21587 11.8125 9.87296 11.812 10.3831 11.761C10.8862 11.7108 11.1979 11.615 11.4415 11.4552C11.6769 11.3008 11.8784 11.1027 12.035 10.8726C12.1961 10.6359 12.2929 10.3332 12.3439 9.84155C12.3956 9.3422 12.3962 8.69847 12.3962 7.79545C12.3962 6.89243 12.3956 6.24871 12.3439 5.74936C12.2929 5.25773 12.1961 4.95504 12.035 4.71833C11.8784 4.48823 11.6769 4.29013 11.4415 4.1357C11.1272 3.92954 10.7058 3.83291 9.91913 3.79795C9.32141 3.79275 8.82466 3.35218 8.71052 2.79187C8.64005 2.44591 8.32728 2.1875 7.9533 2.1875H6.04736ZM7.00033 6.27083C6.27545 6.27083 5.68783 6.85846 5.68783 7.58333C5.68783 8.30821 6.27545 8.89583 7.00033 8.89583C7.7252 8.89583 8.31283 8.30821 8.31283 7.58333C8.31283 6.85846 7.7252 6.27083 7.00033 6.27083ZM4.81283 7.58333C4.81283 6.37521 5.7922 5.39583 7.00033 5.39583C8.20845 5.39583 9.18783 6.37521 9.18783 7.58333C9.18783 8.79146 8.20845 9.77083 7.00033 9.77083C5.7922 9.77083 4.81283 8.79146 4.81283 7.58333ZM10.0628 5.83333C10.0628 5.59171 10.2587 5.39583 10.5003 5.39583H11.0837C11.3253 5.39583 11.5212 5.59171 11.5212 5.83333C11.5212 6.07496 11.3253 6.27083 11.0837 6.27083H10.5003C10.2587 6.27083 10.0628 6.07496 10.0628 5.83333Z",fill:"white"})})})]}),f.jsx("input",{type:"file",ref:i,onChange:G,accept:"image/*",style:{display:"none"}}),f.jsxs("div",{className:"user-info",children:[f.jsx("p",{className:"user-name",children:ye()}),f.jsx("p",{className:"user-phone",children:r.phoneNumber?Ne(r.phoneNumber):f.jsx(pt,{id:"phoneNumber"})})]})]}),f.jsxs("div",{className:"profile-form",children:[f.jsxs("div",{className:"form-field",children:[f.jsx("div",{className:"field-label-container",children:f.jsxs("label",{className:"field-label",children:[f.jsx(pt,{id:"firstName"}),f.jsx("span",{className:"required-star",children:"*"})]})}),f.jsx("div",{className:`input-container ${r.firstName?"filled":""}`,children:f.jsx("input",{type:"text",placeholder:o.formatMessage({id:"enterFirstName"}),value:r.firstName,onChange:Me=>te("firstName",Me.target.value),className:"form-input"})})]}),f.jsxs("div",{className:"form-field",children:[f.jsx("div",{className:"field-label-container",children:f.jsxs("label",{className:"field-label",children:[f.jsx(pt,{id:"lastName"}),f.jsx("span",{className:"required-star",children:"*"})]})}),f.jsx("div",{className:`input-container ${r.lastName?"filled":""}`,children:f.jsx("input",{type:"text",placeholder:o.formatMessage({id:"enterLastName"}),value:r.lastName,onChange:Me=>te("lastName",Me.target.value),className:"form-input"})})]}),f.jsxs("div",{className:"form-field",children:[f.jsx("div",{className:"field-label-container",children:f.jsx("label",{className:"field-label",children:f.jsx(pt,{id:"phoneNumber"})})}),f.jsxs("div",{className:`input-container ${ae(r.phoneNumber)?"valid":""}`,children:[f.jsx("input",{type:"tel",placeholder:o.formatMessage({id:"enterPhoneNumber"}),value:r.phoneNumber,onChange:Me=>te("phoneNumber",Me.target.value),className:"form-input phone-input",dir:"auto"}),ae(r.phoneNumber)&&f.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"validation-icon",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.8146 4.23518C2.5 4.6834 2.5 6.01573 2.5 8.68038V9.99264C2.5 14.691 6.03247 16.9711 8.2488 17.9392C8.85001 18.2019 9.15062 18.3332 10 18.3332C10.8494 18.3332 11.15 18.2019 11.7512 17.9392C13.9675 16.9711 17.5 14.691 17.5 9.99264V8.68038C17.5 6.01573 17.5 4.6834 17.1854 4.23518C16.8708 3.78695 15.6181 3.35813 13.1126 2.5005L12.6352 2.3371C11.3292 1.89004 10.6762 1.6665 10 1.6665C9.32384 1.6665 8.67082 1.89004 7.36477 2.3371L6.88743 2.5005C4.38194 3.35813 3.12919 3.78695 2.8146 4.23518ZM12.5495 8.74943C12.7794 8.49195 12.7571 8.09685 12.4996 7.86696C12.2421 7.63707 11.847 7.65943 11.6171 7.91691L9.10714 10.7281L8.38288 9.91691C8.15298 9.65943 7.75789 9.63707 7.50041 9.86696C7.24293 10.0969 7.22056 10.4919 7.45046 10.7494L8.64093 12.0828C8.75951 12.2156 8.9291 12.2915 9.10714 12.2915C9.28518 12.2915 9.45478 12.2156 9.57335 12.0828L12.5495 8.74943Z",fill:"#0F71EF"})})]})]}),f.jsxs("div",{className:"form-field",children:[f.jsx("div",{className:"field-label-container",children:f.jsx("label",{className:"field-label",children:f.jsx(pt,{id:"province"})})}),f.jsxs("div",{className:`input-container dropdown-container ${r.province?"filled":""}`,children:[f.jsx("input",{type:"text",placeholder:o.formatMessage({id:"selectProvince"}),value:r.province,onChange:Me=>te("province",Me.target.value),onFocus:()=>$(!0),className:"form-input"}),f.jsx("button",{className:"dropdown-arrow",onClick:()=>$(!N),children:f.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M4 6L8 10L12 6",stroke:"#858585",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),N&&f.jsx("div",{className:"dropdown-list",children:T.map(Me=>f.jsx("div",{className:"dropdown-item",onClick:()=>oe(Me.name),children:Me.name},Me.id))})]})]}),f.jsxs("div",{className:"form-field",children:[f.jsx("div",{className:"field-label-container",children:f.jsx("label",{className:"field-label",children:f.jsx(pt,{id:"city"})})}),f.jsxs("div",{className:`input-container dropdown-container ${r.city?"filled":""}`,children:[f.jsx("input",{type:"text",placeholder:o.formatMessage({id:"selectCity"}),value:r.city,onChange:Me=>te("city",Me.target.value),onFocus:()=>r.province&&q(!0),className:"form-input",disabled:!r.province}),f.jsx("button",{className:"dropdown-arrow",onClick:()=>r.province&&q(!U),disabled:!r.province,children:f.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M4 6L8 10L12 6",stroke:"#858585",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),U&&r.province&&f.jsx("div",{className:"dropdown-list",children:P.map((Me,qe)=>f.jsx("div",{className:"dropdown-item",onClick:()=>Ce(Me),children:Me},qe))})]})]})]}),f.jsx("div",{className:"submit-section",children:f.jsx("button",{className:`submit-button ${Ke?"active":""}`,onClick:Fe,disabled:!Ke,children:f.jsx(pt,{id:"confirmAndSave"})})})]})}function j_(){const e=qs();ii();const[o,i]=B.useState([]),d=[{id:1,date:"یکشنبه 17 فروردین 1۴۰۴",time:"۱۳:۱۶",type:"walking",distance:"۷۰۰ ",origin:"میدان باب الحوائج علیه السلام",destination:"صحن انقلاب اسلامی",mapData:null},{id:2,date:"شنبه 16 فروردین 1۴۰۴",time:"۲۳:۲۴",type:"walking",distance:"۸۰۰",origin:"میدان باب الحوائج علیه السلام",destination:"صحن آزادی",mapData:null}];return f.jsxs("div",{className:"proute-container",children:[f.jsxs("div",{className:"proute-header",children:[f.jsx("button",{className:"back-arrow5",onClick:()=>e(-1),children:f.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.2244 4.55806C11.4685 4.31398 11.8642 4.31398 12.1083 4.55806L17.1083 9.55806C17.3524 9.80214 17.3524 10.1979 17.1083 10.4419L12.1083 15.4419C11.8642 15.686 11.4685 15.686 11.2244 15.4419C10.9803 15.1979 10.9803 14.8021 11.2244 14.5581L15.1575 10.625H3.33301C2.98783 10.625 2.70801 10.3452 2.70801 10C2.70801 9.65482 2.98783 9.375 3.33301 9.375H15.1575L11.2244 5.44194C10.9803 5.19786 10.9803 4.80214 11.2244 4.55806Z",fill:"black"})})}),f.jsx("h1",{className:"proute-title",children:f.jsx(pt,{id:"myRoutesTitle"})})]}),f.jsx("div",{className:"proute-content",children:d.length===0?f.jsxs("div",{className:"empty-routes",children:[f.jsx("div",{className:"empty-icon",children:f.jsx("svg",{width:"40",height:"40",viewBox:"0 0 22 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.58301 3.021C3.44392 3.021 2.52051 3.94441 2.52051 5.0835C2.52051 6.22258 3.44392 7.146 4.58301 7.146C5.72209 7.146 6.64551 6.22258 6.64551 5.0835C6.64551 3.94441 5.72209 3.021 4.58301 3.021ZM1.14551 5.0835C1.14551 3.18502 2.68453 1.646 4.58301 1.646C6.48149 1.646 8.02051 3.18502 8.02051 5.0835C8.02051 6.98197 6.48149 8.521 4.58301 8.521C2.68453 8.521 1.14551 6.98197 1.14551 5.0835ZM9.39551 5.0835C9.39551 4.7038 9.70331 4.396 10.083 4.396H14.7872C17.3092 4.396 18.2683 7.68958 16.1406 9.04356L6.59695 15.1168C5.62982 15.7322 6.06578 17.2293 7.21211 17.2293H10.2566L10.0552 17.028C9.78672 16.7595 9.78672 16.3242 10.0552 16.0557C10.3237 15.7872 10.759 15.7872 11.0275 16.0557L12.4025 17.4307C12.671 17.6992 12.671 18.1345 12.4025 18.403L11.0275 19.778C10.759 20.0464 10.3237 20.0464 10.0552 19.778C9.78672 19.5095 9.78672 19.0742 10.0552 18.8057L10.2566 18.6043H7.21211C4.69014 18.6043 3.73107 15.3107 5.85875 13.9568L15.4024 7.88352C16.3695 7.26808 15.9336 5.771 14.7872 5.771H10.083C9.70331 5.771 9.39551 5.46319 9.39551 5.0835ZM17.4163 15.8543C16.2773 15.8543 15.3538 16.7777 15.3538 17.9168C15.3538 19.0559 16.2773 19.9793 17.4163 19.9793C18.5554 19.9793 19.4788 19.0559 19.4788 17.9168C19.4788 16.7777 18.5554 15.8543 17.4163 15.8543ZM13.9788 17.9168C13.9788 16.0183 15.5179 14.4793 17.4163 14.4793C19.3148 14.4793 20.8538 16.0183 20.8538 17.9168C20.8538 19.8153 19.3148 21.3543 17.4163 21.3543C15.5179 21.3543 13.9788 19.8153 13.9788 17.9168Z",fill:"#1E2023"})})}),f.jsx("p",{className:"empty-text",children:f.jsx(pt,{id:"noRoutesMessage"})})]}):f.jsx("div",{className:"routes-list",children:d.map(m=>f.jsxs("div",{className:"route-card",children:[f.jsx("div",{className:"route-map",children:f.jsx("div",{className:"map-placeholder"})}),f.jsxs("div",{className:"route-details",children:[f.jsxs("div",{className:"route-date-time",children:[f.jsx("span",{className:"route-date",children:m.date}),f.jsx("span",{className:"place-meta-separator5",children:"."}),f.jsx("span",{className:"route-time",children:m.time})]}),f.jsxs("div",{className:"route-metrics",children:[f.jsxs("div",{className:"metric-item",children:[f.jsx("span",{className:"metric-icon",children:f.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{d:"M9.33344 3.00016C9.33344 3.92064 8.58725 4.66683 7.66677 4.66683C6.7463 4.66683 6.00011 3.92064 6.00011 3.00016C6.00011 2.07969 6.7463 1.3335 7.66677 1.3335C8.58725 1.3335 9.33344 2.07969 9.33344 3.00016Z",fill:"#1E2023"}),f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.352 7.16896C8.3266 7.16714 8.29479 7.16683 8.18 7.16683H7.4526L7.39183 7.77451C7.2758 8.93479 7.23546 9.40102 7.33911 9.8422C7.44276 10.2834 7.68652 10.6828 8.3071 11.6701L10.0237 14.4007C10.1706 14.6345 10.1003 14.9432 9.86647 15.0901C9.63268 15.2371 9.32402 15.1667 9.17706 14.9329L7.46049 12.2023C7.44415 12.1763 7.428 12.1506 7.41202 12.1252C6.85545 11.2401 6.51201 10.694 6.36562 10.0709C6.21923 9.44786 6.28353 8.80592 6.38773 7.76561C6.39072 7.73574 6.39374 7.70554 6.3968 7.67501L6.44755 7.16745C6.11344 7.16916 5.86628 7.17563 5.66674 7.19985C5.41526 7.23037 5.29798 7.28348 5.2149 7.35013C5.13182 7.41677 5.05452 7.51974 4.97018 7.75861C4.88129 8.01033 4.80475 8.35084 4.69083 8.86348L4.4882 9.77529C4.4283 10.0449 4.16121 10.2148 3.89164 10.1549C3.62208 10.095 3.45211 9.82793 3.51201 9.55836L3.72115 8.61726C3.82681 8.14169 3.91577 7.74134 4.02723 7.42565C4.14552 7.09066 4.30664 6.79672 4.58917 6.57009C4.87169 6.34345 5.19359 6.24993 5.54626 6.20713C5.87861 6.1668 6.28872 6.16681 6.77589 6.16683L8.18 6.16683C8.18556 6.16683 8.19104 6.16683 8.19644 6.16683C8.28715 6.16681 8.35761 6.1668 8.42352 6.17152C9.16617 6.22477 9.80287 6.72189 10.0346 7.42946C10.0552 7.49225 10.0723 7.56062 10.0943 7.64862L10.0983 7.66456C10.1357 7.81422 10.1468 7.85672 10.1571 7.8864C10.2973 8.29044 10.7205 8.52279 11.1367 8.42412C11.1672 8.41687 11.2091 8.40346 11.3554 8.35468L11.842 8.19249C12.104 8.10516 12.3871 8.24674 12.4744 8.50871C12.5618 8.77069 12.4202 9.05385 12.1582 9.14117L11.6717 9.30336C11.6643 9.3058 11.6571 9.3082 11.65 9.31057C11.5354 9.34882 11.4473 9.37819 11.3674 9.39714C10.4519 9.61421 9.52072 9.10304 9.21235 8.21415C9.18542 8.13652 9.16293 8.04648 9.13364 7.92921C9.13183 7.92194 9.12999 7.91457 9.12812 7.9071C9.10028 7.79573 9.09226 7.76495 9.08433 7.74075C8.97898 7.41913 8.68957 7.19317 8.352 7.16896ZM6.27746 11.2508C6.50722 11.404 6.56931 11.7144 6.41613 11.9442L4.41613 14.9442C4.26296 15.1739 3.95252 15.236 3.72276 15.0829C3.49299 14.9297 3.43091 14.6192 3.58408 14.3895L5.58408 11.3895C5.73726 11.1597 6.04769 11.0976 6.27746 11.2508Z",fill:"#1E2023"})]})}),f.jsx("span",{className:"metric-text",children:f.jsx(pt,{id:"routemode"})}),f.jsx("span",{className:"metric-text",children:f.jsx(pt,{id:"transportWalk"})})]}),f.jsxs("div",{className:"metric-item",children:[f.jsx("span",{className:"metric-icon",children:f.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("circle",{cx:"3.33301",cy:"3.3335",r:"2",fill:"#1E2023"}),f.jsx("circle",{cx:"12.667",cy:"12.6665",r:"2",fill:"#1E2023"}),f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.83372 3.3335C6.83372 3.05735 7.05758 2.8335 7.33372 2.8335H10.755C12.5891 2.8335 13.2867 5.22883 11.7393 6.21354L4.79841 10.6304C4.09504 11.078 4.4121 12.1668 5.2458 12.1668H7.45995L7.3135 12.0204C7.11824 11.8251 7.11824 11.5085 7.3135 11.3133C7.50877 11.118 7.82535 11.118 8.02061 11.3133L9.02061 12.3133C9.21587 12.5085 9.21587 12.8251 9.02061 13.0204L8.02061 14.0204C7.82535 14.2156 7.50877 14.2156 7.3135 14.0204C7.11824 13.8251 7.11824 13.5085 7.3135 13.3133L7.45995 13.1668H5.2458C3.41164 13.1668 2.71413 10.7715 4.26153 9.78678L11.2024 5.36988C11.9057 4.92228 11.5887 3.8335 10.755 3.8335H7.33372C7.05758 3.8335 6.83372 3.60964 6.83372 3.3335Z",fill:"#1E2023"})]})}),f.jsxs("span",{className:"metric-text",children:[" ",f.jsx(pt,{id:"distance"})," "]}),f.jsxs("span",{className:"metric-text",children:[m.distance," ",f.jsx(pt,{id:"meter"})]})]})]}),f.jsxs("div",{className:"route-locations",children:[f.jsxs("div",{className:"location-item",children:[f.jsx("span",{className:"location-icon8 origin",children:f.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("circle",{cx:"6",cy:"6",r:"4.5",transform:"matrix(-1 0 0 1 12 0)",fill:"white",stroke:"#0F71EF",strokeWidth:"3"})})}),f.jsxs("span",{children:[f.jsx(pt,{id:"origin"})," :"]}),f.jsx("span",{className:"location-text8",children:m.origin})]}),f.jsx("div",{className:"location-item2",children:f.jsx("span",{className:"location-icon9",children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#e0e0e0",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-dots-vertical",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),f.jsx("path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),f.jsx("path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]})})}),f.jsxs("div",{className:"location-item",children:[f.jsx("span",{className:"location-icon8 destination",children:f.jsx("svg",{width:"12",height:"15",viewBox:"0 0 12 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 0C2.68629 0 0 3.00194 0 6.375C0 9.72163 1.91499 13.3593 4.9028 14.7558C5.59931 15.0814 6.40069 15.0814 7.0972 14.7558C10.085 13.3593 12 9.72163 12 6.375C12 3.00194 9.31371 0 6 0ZM6 7.5C6.82843 7.5 7.5 6.82843 7.5 6C7.5 5.17157 6.82843 4.5 6 4.5C5.17157 4.5 4.5 5.17157 4.5 6C4.5 6.82843 5.17157 7.5 6 7.5Z",fill:"#EA4335"})})}),f.jsxs("span",{children:[f.jsx(pt,{id:"destination"})," :"]}),f.jsx("span",{className:"location-text8",children:m.destination})]})]}),f.jsxs("button",{className:"repeat-route-btn",children:[f.jsx("svg",{width:"22",height:"22",viewBox:"0 0 19 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.273 2.29297C14.5836 2.29297 14.8355 2.54481 14.8355 2.85547V6.03745C14.8355 6.34811 14.5836 6.59995 14.273 6.59995H11.091C10.7803 6.59995 10.5285 6.34811 10.5285 6.03745C10.5285 5.72679 10.7803 5.47495 11.091 5.47495H12.8613C10.7272 3.79264 7.62403 3.93595 5.65511 5.90487C3.53163 8.02834 3.53163 11.4712 5.65511 13.5947C7.77858 15.7181 11.2214 15.7181 13.3449 13.5947C14.7675 12.172 15.2378 10.1568 14.7529 8.34116C14.6728 8.04102 14.8511 7.73273 15.1512 7.65257C15.4514 7.57242 15.7597 7.75076 15.8398 8.0509C16.4241 10.2386 15.8585 12.672 14.1404 14.3901C11.5776 16.953 7.42243 16.953 4.85961 14.3901C2.2968 11.8273 2.2968 7.67219 4.85961 5.10937C7.28362 2.68536 11.1322 2.55407 13.7105 4.71551V2.85547C13.7105 2.54481 13.9623 2.29297 14.273 2.29297Z",fill:"white"})}),f.jsx(pt,{id:"repeatRoute"})]})]})]},m.id))})})]})}function O_(){const e=qs();ii();const[o,i]=B.useState(()=>{const d=localStorage.getItem("savedLocations");return d?JSON.parse(d):[]}),r=o;return f.jsxs("div",{className:"pfp-container",children:[f.jsxs("div",{className:"pfp-header",children:[f.jsx("button",{className:"back-arrow5 ",onClick:()=>e(-1),children:f.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M3.33301 10H16.6663M16.6663 10L11.6663 5M16.6663 10L11.6663 15",stroke:"#1E2023",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),f.jsx("h1",{className:"pfp-title ",children:f.jsx(pt,{id:"savedLocationsTitle"})})]}),f.jsx("div",{className:"pfp-content",children:r.length===0?f.jsxs("div",{className:"empty-state",children:[f.jsx("div",{className:"empty-icon3",children:f.jsx("svg",{width:"57",height:"56",viewBox:"0 0 57 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M49.5 25.894V37.5453C49.5 44.7706 49.5 48.3833 47.7871 49.9619C46.9702 50.7147 45.939 51.1877 44.8405 51.3134C42.5373 51.577 39.8476 49.198 34.4683 44.4401C32.0905 42.337 30.9016 41.2854 29.526 41.0083C28.8487 40.8719 28.1513 40.8719 27.474 41.0083C26.0984 41.2854 24.9095 42.337 22.5317 44.4401C17.1524 49.198 14.4627 51.577 12.1595 51.3134C11.061 51.1877 10.0298 50.7147 9.21291 49.9619C7.5 48.3833 7.5 44.7706 7.5 37.5453V25.894C7.5 15.8873 7.5 10.8839 10.5754 7.77521C13.6508 4.6665 18.6005 4.6665 28.5 4.6665C38.3995 4.6665 43.3492 4.6665 46.4246 7.77521C49.5 10.8839 49.5 15.8873 49.5 25.894ZM19.75 13.9998C19.75 13.0333 20.5335 12.2498 21.5 12.2498H35.5C36.4665 12.2498 37.25 13.0333 37.25 13.9998C37.25 14.9663 36.4665 15.7498 35.5 15.7498H21.5C20.5335 15.7498 19.75 14.9663 19.75 13.9998Z",fill:"black"})})}),f.jsx("h2",{className:"empty-title",children:f.jsx(pt,{id:"noSavedLocationsTitle"})}),f.jsx("p",{className:"empty-description",children:f.jsx(pt,{id:"noSavedLocationsDescription"})}),f.jsx("button",{className:"add-location-btn",onClick:()=>e("/pmap"),children:f.jsx(pt,{id:"addLocationButton"})})]}):f.jsxs("div",{className:"locations-section",children:[f.jsx("div",{className:"locations-list",children:r.map(d=>f.jsxs("div",{className:"location-card",children:[f.jsxs("div",{className:"location-info",children:[f.jsx("div",{className:"location-favorite-icon",children:f.jsxs("svg",{width:"34",height:"34",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("rect",{width:"32",height:"32",rx:"16",fill:"#E7F1FE"}),f.jsx("path",{d:"M14.3397 12.155C15.0785 10.8295 15.448 10.1667 16.0003 10.1667C16.5527 10.1667 16.9221 10.8295 17.661 12.155L17.8521 12.4979C18.0621 12.8745 18.1671 13.0629 18.3308 13.1871C18.4945 13.3114 18.6983 13.3575 19.1061 13.4498L19.4773 13.5338C20.9121 13.8584 21.6295 14.0207 21.8002 14.5696C21.9708 15.1185 21.4818 15.6904 20.5036 16.8342L20.2505 17.1301C19.9726 17.4552 19.8336 17.6177 19.7711 17.8187C19.7085 18.0198 19.7296 18.2366 19.7716 18.6703L19.8098 19.0651C19.9577 20.5913 20.0317 21.3543 19.5848 21.6935C19.138 22.0328 18.4663 21.7235 17.1228 21.1049L16.7753 20.9449C16.3935 20.7691 16.2027 20.6812 16.0003 20.6812C15.798 20.6812 15.6071 20.7691 15.2254 20.9449L14.8778 21.1049C13.5344 21.7235 12.8627 22.0328 12.4158 21.6935C11.969 21.3543 12.0429 20.5913 12.1908 19.0651L12.2291 18.6703C12.2711 18.2366 12.2921 18.0198 12.2296 17.8187C12.1671 17.6177 12.0281 17.4552 11.7501 17.1301L11.497 16.8342C10.5189 15.6904 10.0298 15.1185 10.2005 14.5696C10.3712 14.0207 11.0886 13.8584 12.5234 13.5338L12.8946 13.4498C13.3023 13.3575 13.5062 13.3114 13.6699 13.1871C13.8336 13.0629 13.9385 12.8745 14.1485 12.4979L14.3397 12.155Z",fill:"#0F71EF"})]})}),f.jsxs("div",{className:"location-details",children:[f.jsx("h3",{className:"location-name",children:d.name}),f.jsx("p",{className:"location-address",children:d.address})]})]}),f.jsx("button",{className:"location-options-btn",children:f.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{d:"M8.00033 11.3333C8.73671 11.3333 9.33366 11.9303 9.33366 12.6667C9.33366 13.403 8.73671 14 8.00033 14C7.26395 14 6.66699 13.403 6.66699 12.6667C6.66699 11.9303 7.26395 11.3333 8.00033 11.3333Z",fill:"#1E2023"}),f.jsx("path",{d:"M8.00033 6.66667C8.73671 6.66667 9.33366 7.26362 9.33366 8C9.33366 8.73638 8.73671 9.33333 8.00033 9.33333C7.26395 9.33333 6.66699 8.73638 6.66699 8C6.66699 7.26362 7.26395 6.66667 8.00033 6.66667Z",fill:"#1E2023"}),f.jsx("path",{d:"M8.00033 2C8.73671 2 9.33366 2.59695 9.33366 3.33333C9.33366 4.06971 8.73671 4.66667 8.00033 4.66667C7.26395 4.66667 6.66699 4.06971 6.66699 3.33333C6.66699 2.59695 7.26395 2 8.00033 2Z",fill:"#1E2023"})]})})]},d.id))}),f.jsx("div",{className:"add-location-section",children:f.jsx("button",{className:"add-location-button",onClick:()=>e("/pmap"),children:f.jsx(pt,{id:"addLocationButton2"})})})]})})]})}const z_={sahn:"#4caf50",eyvan:"#2196f3",ravaq:"#9c27b0",masjed:"#ff9800",madrese:"#3f51b5",khadamat:"#607d8b",elmi:"#00bcd4",cemetery:"#795548",qrcode:"#607d8b",elevator:"#ffc107",other:"#757575"},F_=(e,o,i=35,r=1)=>{const d=z_[e]||"#999";let m=ps.find(x=>x.value===e)||ps.find(x=>x.value===o)||ps.find(x=>x.value==="other");return f.jsx("div",{style:{width:i,height:i,backgroundColor:d,opacity:r,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 6px rgba(0,0,0,0.3)"},children:f.jsx("div",{className:`map-category-icon ${m.icon}`,style:{width:"22px",height:"22px",marginTop:0},children:f.jsx("img",{src:m.png,alt:m.label||"icon",width:"22",height:"22"})})})},B_=()=>{const e=qs(),o=ii(),i=Gi(Ee=>Ee.language),[r,d]=B.useState({latitude:36.288,longitude:59.6157,zoom:16}),[m,x]=B.useState(null),[c,L]=B.useState(!1),[T,P]=B.useState(""),[D,N]=B.useState(null),[$,U]=B.useState([]),[q,H]=B.useState([]),[G,te]=B.useState(!1),[oe,Ce]=B.useState(!0),ae=B.useRef(null),Ne=B.useRef(null);B.useEffect(()=>{const Ee=ll(i);fetch(Ee).then(K=>K.json()).then(K=>{var be;N(K),console.log("GeoJSON loaded successfully:",(be=K.features)==null?void 0:be.length,"features")}).catch(K=>console.error("failed to load geojson",K))},[i]),B.useEffect(()=>{if(D&&T){const Ee=T.toLowerCase(),K=D.features.filter(be=>{var ft,mt;const Be=(((ft=be.properties)==null?void 0:ft.name)||"").toLowerCase(),it=(((mt=be.properties)==null?void 0:mt.subGroup)||"").toLowerCase();return Be.includes(Ee)||it.includes(Ee)});U(K)}else U([])},[T,D]);const Fe=B.useCallback(Ee=>{var mt;const{lng:K,lat:be}=Ee.lngLat;console.log("Map clicked at:",be,K);let Be=null,it=o.formatMessage({id:"mapSelectedLocation"});if(D){let xt=1/0;D.features.forEach(ut=>{if(ut.geometry.type==="Point"){const[vt,Tt]=ut.geometry.coordinates,Rt=Math.hypot(vt-K,Tt-be);Rt<xt&&(xt=Rt,Be=ut)}}),xt<=5e-4&&((mt=Be==null?void 0:Be.properties)!=null&&mt.name)&&(it=Be.properties.name,console.log("Found closest feature:",it))}const ft={name:it,coordinates:[be,K],feature:Be};x(ft),H(xt=>{var Tt;const ut={id:Date.now().toString(),name:ft.name,location:((Tt=Be==null?void 0:Be.properties)==null?void 0:Tt.subGroup)||"",coordinates:[be,K]},vt=xt.filter(Rt=>Rt.name!==ft.name);return[ut,...vt].slice(0,10)})},[D,o]),ye=()=>{Ce(!1),L(!0)},Ke=Ee=>{x({name:Ee.name,coordinates:Ee.coordinates,location:Ee.location}),Ce(!0),L(!1),P(""),Ee.coordinates&&d(K=>({...K,latitude:Ee.coordinates[0],longitude:Ee.coordinates[1],zoom:18})),H(K=>{const be=K.filter(Be=>Be.id!==Ee.id);return[Ee,...be].slice(0,10)})},Me=()=>{Ce(!0),L(!1)},qe=()=>{Ce(!0),L(!1),P("")},Re=()=>{P("")},dt=Ee=>{P(Ee.target.value)},Xe=Ee=>{if(!Ee)return null;const{geometry:K}=Ee;return K.type==="Point"?K.coordinates:null},ht=()=>{var ft,mt;if(!m){console.log("No location selected");return}const Ee=m.name,K=((mt=(ft=m.feature)==null?void 0:ft.properties)==null?void 0:mt.subGroup)||m.location||"حرم مطهر رضوی",be={id:Date.now().toString(),name:Ee,address:K},Be=JSON.parse(localStorage.getItem("savedLocations")||"[]"),it=[be,...Be];localStorage.setItem("savedLocations",JSON.stringify(it)),e("/pfp")},Pe=T?$.map(Ee=>{var be,Be,it;const K=Xe(Ee);return{id:((be=Ee.properties)==null?void 0:be.uniqueId)||Ee.id,name:((Be=Ee.properties)==null?void 0:Be.name)||"",location:((it=Ee.properties)==null?void 0:it.subGroup)||"",coordinates:K?[K[1],K[0]]:null}}):q;B.useEffect(()=>{const Ee=K=>{Ne.current&&!Ne.current.contains(K.target)&&(L(!1),P(""))};return c&&document.addEventListener("mousedown",Ee),()=>{document.removeEventListener("mousedown",Ee)}},[c]),B.useEffect(()=>{c&&ae.current&&ae.current.focus()},[c]);const ke=B.useCallback(Ee=>{d(Ee.viewState)},[]),de=B.useCallback(()=>{te(!0),console.log("Map loaded successfully")},[]),je=D?D.features.filter(Ee=>Ee.geometry.type==="Point"):[];return console.log("Map features:",je.length),console.log("Selected place:",m),f.jsxs("div",{className:"pmap-page",children:[oe&&f.jsx("button",{className:"pmap-back-button",onClick:()=>e(-1),children:f.jsx("svg",{width:"22",height:"22",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M3.33301 10H16.6663M16.6663 10L11.6663 5M16.6663 10L11.6663 15",stroke:"#1E2023",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),f.jsx("div",{className:"pmap-container",children:f.jsxs(Kd,{mapLib:Do,mapStyle:Qd,style:{width:"100%",height:"100%"},...r,onMove:ke,onClick:Fe,onLoad:de,interactive:!0,children:[m&&m.coordinates&&f.jsxs(f.Fragment,{children:[f.jsx(Wr,{longitude:m.coordinates[1],latitude:m.coordinates[0],anchor:"center",children:f.jsx("svg",{width:"18",height:"18",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("circle",{cx:"7.5",cy:"7.5",r:"5.6775",transform:"matrix(-1 0 0 1 15 0)",fill:"white",stroke:"#0F71EF",strokeWidth:"3.645"})})}),f.jsx(Wr,{longitude:m.coordinates[1],latitude:m.coordinates[0],anchor:"bottom",children:f.jsxs("div",{className:"pmap-combined-marker",children:[f.jsx("svg",{width:"53",height:"62",viewBox:"0 0 53 62",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M26.4102 0C40.9961 0 52.8203 11.8242 52.8203 26.4102C52.8203 38.7442 44.3649 49.1022 32.9346 52.0068C32.7025 52.383 32.4579 52.7793 32.1992 53.1953L30.832 55.3955C28.4792 59.1797 27.3024 61.0712 25.5859 61.0713C23.8694 61.0713 22.6927 59.1797 20.3398 55.3955L18.9717 53.1953C18.5716 52.5518 18.2034 51.9573 17.8682 51.4072C7.4744 47.8564 0 38.0066 0 26.4102C0 11.8242 11.8242 0 26.4102 0Z",fill:"white"})}),f.jsx("div",{className:"pmap-marker-star",children:f.jsx("svg",{width:"21",height:"22",viewBox:"0 0 21 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M8.00902 5.23233C9.11734 3.24411 9.6715 2.25 10.5 2.25C11.3285 2.25 11.8827 3.24411 12.991 5.23233L13.2777 5.7467C13.5927 6.31169 13.7501 6.59419 13.9957 6.78058C14.2412 6.96697 14.547 7.03616 15.1586 7.17454L15.7154 7.30052C17.8676 7.78749 18.9437 8.03097 19.1998 8.85426C19.4558 9.67756 18.7222 10.5354 17.2549 12.2512L16.8753 12.6951C16.4584 13.1826 16.2499 13.4264 16.1561 13.728C16.0623 14.0296 16.0939 14.3548 16.1569 15.0054L16.2143 15.5976C16.4361 17.8868 16.547 19.0314 15.8767 19.5402C15.2065 20.049 14.1989 19.5851 12.1838 18.6573L11.6625 18.4172C11.0898 18.1536 10.8035 18.0217 10.5 18.0217C10.1965 18.0217 9.91019 18.1536 9.33755 18.4172L8.81621 18.6573C6.80109 19.5851 5.79353 20.049 5.12325 19.5402C4.45298 19.0314 4.56389 17.8868 4.78572 15.5976L4.84311 15.0054C4.90615 14.3548 4.93767 14.0296 4.84388 13.728C4.75009 13.4264 4.54162 13.1826 4.12468 12.6951L3.74509 12.2512C2.27784 10.5354 1.54422 9.67756 1.80024 8.85426C2.05627 8.03097 3.13237 7.78749 5.28459 7.30053L5.8414 7.17454C6.45299 7.03616 6.75879 6.96697 7.00433 6.78058C7.24986 6.59419 7.40733 6.31169 7.72228 5.7467L8.00902 5.23233Z",fill:"#FFFFFF"})})})]})})]}),je.map((Ee,K)=>{var ut;const[be,Be]=Ee.geometry.coordinates,{group:it,nodeFunction:ft}=Ee.properties||{},mt=(ut=Ee.properties)==null?void 0:ut.uniqueId,xt=mt?`${mt}-${K}`:K;return f.jsx(Wr,{longitude:be,latitude:Be,anchor:"center",children:F_(it,ft,25,.8)},xt)})]})}),f.jsx("div",{className:"pmap-search-container",children:f.jsxs("div",{className:"pmap-search-box",children:[f.jsxs("div",{className:"pmap-search-input-wrapper",onClick:ye,children:[f.jsx("button",{className:"pmap-star-icon",children:f.jsx("svg",{width:"22",height:"22",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M7.62796 4.50731C8.6835 2.61376 9.21127 1.66699 10.0003 1.66699C10.7894 1.66699 11.3171 2.61376 12.3727 4.5073L12.6458 4.99719C12.9457 5.53527 13.0957 5.80431 13.3295 5.98183C13.5634 6.15935 13.8546 6.22524 14.4371 6.35703L14.9674 6.47702C17.0171 6.94079 18.042 7.17267 18.2858 7.95677C18.5296 8.74086 17.831 9.55788 16.4336 11.1919L16.0721 11.6147C15.675 12.079 15.4764 12.3112 15.3871 12.5984C15.2978 12.8857 15.3278 13.1954 15.3878 13.815L15.4425 14.379C15.6538 16.5592 15.7594 17.6492 15.121 18.1338C14.4827 18.6184 13.5231 18.1766 11.6039 17.293L11.1074 17.0644C10.5621 16.8133 10.2894 16.6877 10.0003 16.6877C9.71128 16.6877 9.4386 16.8133 8.89323 17.0644L8.39672 17.293C6.47755 18.1766 5.51797 18.6184 4.87962 18.1338C4.24126 17.6492 4.34689 16.5592 4.55816 14.379L4.61281 13.815C4.67285 13.1954 4.70286 12.8857 4.61354 12.5984C4.52423 12.3112 4.32568 12.079 3.92859 11.6147L3.56707 11.1919C2.1697 9.55789 1.47101 8.74086 1.71484 7.95677C1.95867 7.17267 2.98354 6.94079 5.03327 6.47702L5.56356 6.35703C6.14603 6.22524 6.43727 6.15935 6.67111 5.98183C6.90495 5.80431 7.05493 5.53527 7.35488 4.99719L7.62796 4.50731Z",fill:"#0F71EF"})})}),f.jsx("input",{type:"text",placeholder:o.formatMessage({id:"pmapSearchPlaceholder"}),value:m?m.name:"",readOnly:!0,className:"pmap-search-input"}),f.jsx("div",{className:"pmap-search-icons",children:f.jsx("div",{className:"pmap-search-icon",children:f.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.4163 2.2915C14.4434 2.2915 17.708 5.55609 17.708 9.58317C17.708 13.6102 14.4434 16.8748 10.4163 16.8748C6.38926 16.8748 3.12467 13.6102 3.12467 9.58317C3.12467 5.55609 6.38926 2.2915 10.4163 2.2915ZM18.958 9.58317C18.958 4.86574 15.1338 1.0415 10.4163 1.0415C5.69891 1.0415 1.87467 4.86574 1.87467 9.58317C1.87467 11.7169 2.65707 13.668 3.95062 15.165L1.2244 17.8912C0.980322 18.1353 0.980322 18.531 1.2244 18.7751C1.46848 19.0192 1.8642 19.0192 2.10828 18.7751L4.8345 16.0489C6.33156 17.3424 8.28258 18.1248 10.4163 18.1248C15.1338 18.1248 18.958 14.3006 18.958 9.58317Z",fill:"#1E2023"})})})})]}),f.jsx("button",{className:"pmap-confirm-button",onClick:ht,children:f.jsx(pt,{id:"confirmLocation"})})]})}),c&&f.jsxs("div",{className:"pmap-search-modal fade-in",ref:Ne,children:[f.jsx("div",{className:"pmap-search-header",children:f.jsxs("form",{className:"pmap-search-form",children:[f.jsx("button",{type:"button",className:"pmap-modal-back-button",onClick:qe,children:f.jsx("svg",{width:"22",height:"22",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.2244 4.55806C11.4685 4.31398 11.8642 4.31398 12.1083 4.55806L17.1083 9.55806C17.3524 9.80214 17.3524 10.1979 17.1083 10.4419L12.1083 15.4419C11.8642 15.686 11.4685 15.686 11.2244 15.4419C10.9803 15.1979 10.9803 14.8021 11.2244 14.5581L15.1575 10.625H3.33301C2.98783 10.625 2.70801 10.3452 2.70801 10C2.70801 9.65482 2.98783 9.375 3.33301 9.375H15.1575L11.2244 5.44194C10.9803 5.19786 10.9803 4.80214 11.2244 4.55806Z",fill:"black"})})}),f.jsx("input",{type:"text",placeholder:o.formatMessage({id:"pmapSearchPlaceholder"}),value:T,onChange:dt,autoFocus:!0,ref:ae}),T&&f.jsx("button",{type:"button",className:"pmap-clear-search",onClick:Re,children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.jsx("path",{d:"M18 6l-12 12"}),f.jsx("path",{d:"M6 6l12 12"})]})})]})}),f.jsx("div",{className:"pmap-options-section",children:f.jsxs("div",{className:"pmap-option-item",onClick:Me,children:[f.jsx("div",{className:"pmap-option-icon",children:f.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.4885 1.43864C12.4052 1.29299 10.9817 1.29166 8.99984 1.29166C7.01798 1.29166 5.59447 1.29299 4.51115 1.43864C3.44582 1.58187 2.80355 1.85428 2.32883 2.32899C1.85412 2.80371 1.58171 3.44598 1.43848 4.51131C1.29283 5.59463 1.2915 7.01814 1.2915 9C1.2915 10.9819 1.29283 12.4054 1.43848 13.4887C1.58171 14.554 1.85412 15.1963 2.32883 15.671C2.71852 16.0607 3.22112 16.3141 3.97797 16.4715L16.4714 3.97813C16.3139 3.22128 16.0605 2.71868 15.6708 2.32899C15.1961 1.85428 14.5539 1.58187 13.4885 1.43864ZM16.6559 5.56137L11.5508 10.6665L16.0568 15.1726C16.3023 14.7565 16.4624 14.2232 16.5612 13.4887C16.7068 12.4054 16.7082 10.9819 16.7082 9C16.7082 7.60122 16.7075 6.48057 16.6559 5.56137ZM15.173 16.0566L10.6669 11.5504L5.56121 16.6561C6.48041 16.7077 7.60106 16.7083 8.99984 16.7083C10.9817 16.7083 12.4052 16.707 13.4885 16.5614C14.2234 16.4626 14.7569 16.3023 15.173 16.0566ZM13.6551 0.199786C14.859 0.361652 15.809 0.699436 16.5547 1.44511C17.3004 2.19079 17.6382 3.14081 17.8 4.34475C17.9582 5.52099 17.9582 7.02852 17.9582 8.95219V9.04781C17.9582 10.9715 17.9582 12.479 17.8 13.6552C17.6382 14.8592 17.3004 15.8092 16.5547 16.5549C15.809 17.3006 14.859 17.6383 13.6551 17.8002C12.4788 17.9583 10.9713 17.9583 9.04765 17.9583H8.95203C7.02836 17.9583 5.52083 17.9583 4.34459 17.8002C3.14065 17.6383 2.19063 17.3006 1.44495 16.5549C0.699276 15.8092 0.361493 14.8592 0.199626 13.6552C0.0414851 12.479 0.0414935 10.9715 0.0415041 9.04781V8.95218C0.0414933 7.02852 0.0414847 5.52099 0.199626 4.34475C0.361492 3.14081 0.699276 2.19079 1.44495 1.44511C2.19063 0.699437 3.14065 0.361653 4.34459 0.199786C5.52083 0.0416453 7.02836 0.0416537 8.95202 0.0416643H9.04765C10.9713 0.0416535 12.4788 0.0416449 13.6551 0.199786ZM2.95817 6.29768C2.95817 4.41182 4.58689 2.95825 6.49984 2.95825C8.41279 2.95825 10.0415 4.41182 10.0415 6.29768C10.0415 7.98624 9.00333 9.97915 7.2788 10.7161C6.78335 10.9278 6.21633 10.9278 5.72087 10.7161C3.99634 9.97915 2.95817 7.98624 2.95817 6.29768ZM6.49984 4.20825C5.19113 4.20825 4.20817 5.18526 4.20817 6.29768C4.20817 7.5839 5.0318 9.06229 6.21208 9.56668C6.39379 9.64433 6.60589 9.64433 6.78759 9.56668C7.96788 9.06229 8.7915 7.5839 8.7915 6.29768C8.7915 5.18526 7.80855 4.20825 6.49984 4.20825Z",fill:"#0F71EF"}),f.jsx("path",{d:"M7.33317 6.5C7.33317 6.96024 6.96007 7.33333 6.49984 7.33333C6.0396 7.33333 5.6665 6.96024 5.6665 6.5C5.6665 6.03976 6.0396 5.66666 6.49984 5.66666C6.96007 5.66666 7.33317 6.03976 7.33317 6.5Z",fill:"#0F71EF"})]})}),f.jsx("span",{className:"pmap-option-text",children:f.jsx(pt,{id:"chooseFromMap"})})]})}),!T&&f.jsxs(f.Fragment,{children:[f.jsx("h2",{className:"pmap-recent-title",children:f.jsx(pt,{id:"recentSearches"})}),q.length===0?f.jsx("p",{className:"pmap-no-recent",children:f.jsx(pt,{id:"noRecentSearches"})}):f.jsx("ul",{className:"pmap-destination-list",children:q.map(Ee=>f.jsxs("li",{onClick:()=>Ke(Ee),children:[f.jsx("div",{className:"pmap-recent-icon",children:f.jsx("svg",{width:"15",height:"15",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.96259 2.95683C5.17657 0.745974 8.77558 0.769482 11.0031 2.997C13.2316 5.22548 13.2541 8.82663 11.0404 11.0404C8.82667 13.2541 5.22552 13.2315 2.99704 11.0031C1.67644 9.68246 1.1311 7.88082 1.36528 6.17239C1.39809 5.933 1.61875 5.76554 1.85814 5.79835C2.09753 5.83117 2.265 6.05183 2.23218 6.29122C2.03386 7.73809 2.49541 9.26398 3.61577 10.3843C5.50841 12.277 8.5555 12.2878 10.4217 10.4216C12.2878 8.55546 12.277 5.50837 10.3844 3.61573C8.49269 1.72405 5.44775 1.71226 3.58132 3.57556L4.01749 3.57775C4.25911 3.57896 4.454 3.77582 4.45279 4.01745C4.45157 4.25907 4.25471 4.45396 4.01309 4.45275L2.52816 4.44529C2.28825 4.44408 2.09406 4.2499 2.09286 4.00999L2.0854 2.52506C2.08418 2.28343 2.27907 2.08657 2.5207 2.08536C2.76232 2.08414 2.95918 2.27904 2.9604 2.52066L2.96259 2.95683ZM7.00002 4.2291C7.24164 4.2291 7.43752 4.42498 7.43752 4.66661V6.81876L8.76773 8.14897C8.93859 8.31983 8.93859 8.59684 8.76773 8.7677C8.59688 8.93855 8.31986 8.93855 8.14901 8.7677L6.56251 7.1812V4.66661C6.56251 4.42498 6.75839 4.2291 7.00002 4.2291Z",fill:"#858585"})})}),f.jsxs("div",{className:"pmap-destination-info",children:[f.jsx("span",{className:"pmap-destination-name",children:Ee.name}),f.jsx("span",{className:"pmap-destination-location",children:Ee.location})]})]},Ee.id))})]}),T&&Pe.length>0&&f.jsx("ul",{className:"pmap-destination-list",children:Pe.map(Ee=>f.jsxs("li",{onClick:()=>Ke(Ee),children:[f.jsx("div",{className:"pmap-recent-icon",children:f.jsx("svg",{width:"15",height:"15",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.96259 2.95683C5.17657 0.745974 8.77558 0.769482 11.0031 2.997C13.2316 5.22548 13.2541 8.82663 11.0404 11.0404C8.82667 13.2541 5.22552 13.2315 2.99704 11.0031C1.67644 9.68246 1.1311 7.88082 1.36528 6.17239C1.39809 5.933 1.61875 5.76554 1.85814 5.79835C2.09753 5.83117 2.265 6.05183 2.23218 6.29122C2.03386 7.73809 2.49541 9.26398 3.61577 10.3843C5.50841 12.277 8.5555 12.2878 10.4217 10.4216C12.2878 8.55546 12.277 5.50837 10.3844 3.61573C8.49269 1.72405 5.44775 1.71226 3.58132 3.57556L4.01749 3.57775C4.25911 3.57896 4.454 3.77582 4.45279 4.01745C4.45157 4.25907 4.25471 4.45396 4.01309 4.45275L2.52816 4.44529C2.28825 4.44408 2.09406 4.2499 2.09286 4.00999L2.0854 2.52506C2.08418 2.28343 2.27907 2.08657 2.5207 2.08536C2.76232 2.08414 2.95918 2.27904 2.9604 2.52066L2.96259 2.95683ZM7.00002 4.2291C7.24164 4.2291 7.43752 4.42498 7.43752 4.66661V6.81876L8.76773 8.14897C8.93859 8.31983 8.93859 8.59684 8.76773 8.7677C8.59688 8.93855 8.31986 8.93855 8.14901 8.7677L6.56251 7.1812V4.66661C6.56251 4.42498 6.75839 4.2291 7.00002 4.2291Z",fill:"#858585"})})}),f.jsxs("div",{className:"pmap-destination-info",children:[f.jsx("span",{className:"pmap-destination-name",children:Ee.name}),f.jsx("span",{className:"pmap-destination-location",children:Ee.location})]})]},Ee.id))})]})]})},$_="/golden_path/assets/logo2-DSoK8U2d.png";var pm,pg;function V_(){if(pg)return pm;pg=1,pm={toJalaali:o,toGregorian:i,isValidJalaaliDate:r,isLeapJalaaliYear:d,jalaaliMonthLength:m,jalCal:c,j2d:L,d2j:T,g2d:P,d2g:D,jalaaliToDateObject:$,jalaaliWeek:N};var e=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function o(H,G,te){return Object.prototype.toString.call(H)==="[object Date]"&&(te=H.getDate(),G=H.getMonth()+1,H=H.getFullYear()),T(P(H,G,te))}function i(H,G,te){return D(L(H,G,te))}function r(H,G,te){return H>=-61&&H<=3177&&G>=1&&G<=12&&te>=1&&te<=m(H,G)}function d(H){return x(H)===0}function m(H,G){return G<=6?31:G<=11||d(H)?30:29}function x(H){var G=e.length,te=e[0],oe,Ce,ae,Ne,Fe;if(H<te||H>=e[G-1])throw new Error("Invalid Jalaali year "+H);for(Fe=1;Fe<G&&(oe=e[Fe],Ce=oe-te,!(H<oe));Fe+=1)te=oe;return Ne=H-te,Ce-Ne<6&&(Ne=Ne-Ce+U(Ce+4,33)*33),ae=q(q(Ne+1,33)-1,4),ae===-1&&(ae=4),ae}function c(H,G){var te=e.length,oe=H+621,Ce=-14,ae=e[0],Ne,Fe,ye,Ke,Me,qe,Re;if(H<ae||H>=e[te-1])throw new Error("Invalid Jalaali year "+H);for(Re=1;Re<te&&(Ne=e[Re],Fe=Ne-ae,!(H<Ne));Re+=1)Ce=Ce+U(Fe,33)*8+U(q(Fe,33),4),ae=Ne;return qe=H-ae,Ce=Ce+U(qe,33)*8+U(q(qe,33)+3,4),q(Fe,33)===4&&Fe-qe===4&&(Ce+=1),Ke=U(oe,4)-U((U(oe,100)+1)*3,4)-150,Me=20+Ce-Ke,G?{gy:oe,march:Me}:(Fe-qe<6&&(qe=qe-Fe+U(Fe+4,33)*33),ye=q(q(qe+1,33)-1,4),ye===-1&&(ye=4),{leap:ye,gy:oe,march:Me})}function L(H,G,te){var oe=c(H,!0);return P(oe.gy,3,oe.march)+(G-1)*31-U(G,7)*(G-7)+te-1}function T(H){var G=D(H).gy,te=G-621,oe=c(te,!1),Ce=P(G,3,oe.march),ae,Ne,Fe;if(Fe=H-Ce,Fe>=0){if(Fe<=185)return Ne=1+U(Fe,31),ae=q(Fe,31)+1,{jy:te,jm:Ne,jd:ae};Fe-=186}else te-=1,Fe+=179,oe.leap===1&&(Fe+=1);return Ne=7+U(Fe,30),ae=q(Fe,30)+1,{jy:te,jm:Ne,jd:ae}}function P(H,G,te){var oe=U((H+U(G-8,6)+100100)*1461,4)+U(153*q(G+9,12)+2,5)+te-34840408;return oe=oe-U(U(H+100100+U(G-8,6),100)*3,4)+752,oe}function D(H){var G,te,oe,Ce,ae;return G=4*H+139361631,G=G+U(U(4*H+183187720,146097)*3,4)*4-3908,te=U(q(G,1461),4)*5+308,oe=U(q(te,153),5)+1,Ce=q(U(te,153),12)+1,ae=U(G,1461)-100100+U(8-Ce,6),{gy:ae,gm:Ce,gd:oe}}function N(H,G,te){var oe=$(H,G,te).getDay(),Ce=oe==6?0:-(oe+1),ae=6+Ce;return{saturday:T(L(H,G,te+Ce)),friday:T(L(H,G,te+ae))}}function $(H,G,te,oe,Ce,ae,Ne){var Fe=i(H,G,te);return new Date(Fe.gy,Fe.gm-1,Fe.gd,oe||0,Ce||0,ae||0,Ne||0)}function U(H,G){return~~(H/G)}function q(H,G){return H-~~(H/G)*G}return pm}var H_=V_();function E6(e){var o,i,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var d=e.length;for(o=0;o<d;o++)e[o]&&(i=E6(e[o]))&&(r&&(r+=" "),r+=i)}else for(i in e)e[i]&&(r&&(r+=" "),r+=i);return r}function ji(){for(var e,o,i=0,r="",d=arguments.length;i<d;i++)(e=arguments[i])&&(o=E6(e))&&(r&&(r+=" "),r+=o);return r}const L6=6048e5,U_=864e5,_0=6e4,w0=36e5,Z_=1e3,fg=Symbol.for("constructDateFrom");function fr(e,o){return typeof e=="function"?e(o):e&&typeof e=="object"&&fg in e?e[fg](o):e instanceof Date?new e.constructor(o):new Date(o)}function rn(e,o){return fr(o||e,e)}function ca(e,o,i){const r=rn(e,i==null?void 0:i.in);return isNaN(o)?fr((i==null?void 0:i.in)||e,NaN):(o&&r.setDate(r.getDate()+o),r)}function ua(e,o,i){const r=rn(e,i==null?void 0:i.in);if(isNaN(o))return fr(e,NaN);if(!o)return r;const d=r.getDate(),m=fr(e,r.getTime());m.setMonth(r.getMonth()+o+1,0);const x=m.getDate();return d>=x?m:(r.setFullYear(m.getFullYear(),m.getMonth(),d),r)}function T6(e,o,i){return fr(e,+rn(e)+o)}function q_(e,o,i){return T6(e,o*w0)}let W_={};function z1(){return W_}function mc(e,o){var c,L,T,P;const i=z1(),r=(o==null?void 0:o.weekStartsOn)??((L=(c=o==null?void 0:o.locale)==null?void 0:c.options)==null?void 0:L.weekStartsOn)??i.weekStartsOn??((P=(T=i.locale)==null?void 0:T.options)==null?void 0:P.weekStartsOn)??0,d=rn(e,o==null?void 0:o.in),m=d.getDay(),x=(m<r?7:0)+m-r;return d.setDate(d.getDate()-x),d.setHours(0,0,0,0),d}function Bd(e,o){return mc(e,{...o,weekStartsOn:1})}function k6(e,o){const i=rn(e,o==null?void 0:o.in),r=i.getFullYear(),d=fr(i,0);d.setFullYear(r+1,0,4),d.setHours(0,0,0,0);const m=Bd(d),x=fr(i,0);x.setFullYear(r,0,4),x.setHours(0,0,0,0);const c=Bd(x);return i.getTime()>=m.getTime()?r+1:i.getTime()>=c.getTime()?r:r-1}function Hf(e){const o=rn(e),i=new Date(Date.UTC(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds(),o.getMilliseconds()));return i.setUTCFullYear(o.getFullYear()),+e-+i}function yc(e,...o){const i=fr.bind(null,o.find(r=>typeof r=="object"));return o.map(i)}function R1(e,o){const i=rn(e,o==null?void 0:o.in);return i.setHours(0,0,0,0),i}function $d(e,o,i){const[r,d]=yc(i==null?void 0:i.in,e,o),m=R1(r),x=R1(d),c=+m-Hf(m),L=+x-Hf(x);return Math.round((c-L)/U_)}function G_(e,o){const i=k6(e,o),r=fr(e,0);return r.setFullYear(i,0,4),r.setHours(0,0,0,0),Bd(r)}function e2(e,o,i){const r=rn(e,i==null?void 0:i.in);return r.setTime(r.getTime()+o*_0),r}function b2(e,o,i){return ua(e,o*3,i)}function Y_(e,o,i){return T6(e,o*1e3)}function Uf(e,o,i){return ca(e,o*7,i)}function uc(e,o,i){return ua(e,o*12,i)}function mg(e,o){let i,r=o==null?void 0:o.in;return e.forEach(d=>{!r&&typeof d=="object"&&(r=fr.bind(null,d));const m=rn(d,r);(!i||i<m||isNaN(+m))&&(i=m)}),fr(r,i||NaN)}function gg(e,o){let i,r=o==null?void 0:o.in;return e.forEach(d=>{!r&&typeof d=="object"&&(r=fr.bind(null,d));const m=rn(d,r);(!i||i>m||isNaN(+m))&&(i=m)}),fr(r,i||NaN)}function X_(e,o,i){const[r,d]=yc(i==null?void 0:i.in,e,o);return+R1(r)==+R1(d)}function dc(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Zf(e){return!(!dc(e)&&typeof e!="number"||isNaN(+rn(e)))}function qf(e,o,i){const[r,d]=yc(i==null?void 0:i.in,e,o),m=r.getFullYear()-d.getFullYear(),x=r.getMonth()-d.getMonth();return m*12+x}function L1(e,o){const i=rn(e,o==null?void 0:o.in);return Math.trunc(i.getMonth()/3)+1}function Wf(e,o,i){const[r,d]=yc(i==null?void 0:i.in,e,o),m=r.getFullYear()-d.getFullYear(),x=L1(r)-L1(d);return m*4+x}function Gf(e,o,i){const[r,d]=yc(i==null?void 0:i.in,e,o);return r.getFullYear()-d.getFullYear()}function K_(e,o,i){const[r,d]=yc(i==null?void 0:i.in,e,o),m=yg(r,d),x=Math.abs($d(r,d));r.setDate(r.getDate()-m*x);const c=+(yg(r,d)===-m),L=m*(x-c);return L===0?0:L}function yg(e,o){const i=e.getFullYear()-o.getFullYear()||e.getMonth()-o.getMonth()||e.getDate()-o.getDate()||e.getHours()-o.getHours()||e.getMinutes()-o.getMinutes()||e.getSeconds()-o.getSeconds()||e.getMilliseconds()-o.getMilliseconds();return i<0?-1:i>0?1:i}function P6(e,o){const i=rn(e,o==null?void 0:o.in);return i.setHours(23,59,59,999),i}function D6(e,o){const i=rn(e,o==null?void 0:o.in),r=i.getMonth();return i.setFullYear(i.getFullYear(),r+1,0),i.setHours(23,59,59,999),i}function t2(e,o){const i=rn(e,o==null?void 0:o.in),r=i.getMonth(),d=r-r%3;return i.setMonth(d,1),i.setHours(0,0,0,0),i}function I6(e,o){const i=rn(e,o==null?void 0:o.in);return i.setDate(1),i.setHours(0,0,0,0),i}function N6(e,o){const i=rn(e,o==null?void 0:o.in),r=i.getFullYear();return i.setFullYear(r+1,0,0),i.setHours(23,59,59,999),i}function b0(e,o){const i=rn(e,o==null?void 0:o.in);return i.setFullYear(i.getFullYear(),0,1),i.setHours(0,0,0,0),i}function Q_(e,o){var c,L;const i=z1(),r=i.weekStartsOn??((L=(c=i.locale)==null?void 0:c.options)==null?void 0:L.weekStartsOn)??0,d=rn(e,o==null?void 0:o.in),m=d.getDay(),x=(m<r?-7:0)+6-(m-r);return d.setDate(d.getDate()+x),d.setHours(23,59,59,999),d}const J_={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ew=(e,o,i)=>{let r;const d=J_[e];return typeof d=="string"?r=d:o===1?r=d.one:r=d.other.replace("{{count}}",o.toString()),i!=null&&i.addSuffix?i.comparison&&i.comparison>0?"in "+r:r+" ago":r};function fm(e){return(o={})=>{const i=o.width?String(o.width):e.defaultWidth;return e.formats[i]||e.formats[e.defaultWidth]}}const tw={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},nw={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},rw={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},iw={date:fm({formats:tw,defaultWidth:"full"}),time:fm({formats:nw,defaultWidth:"full"}),dateTime:fm({formats:rw,defaultWidth:"full"})},sw={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ow=(e,o,i,r)=>sw[e];function Wh(e){return(o,i)=>{const r=i!=null&&i.context?String(i.context):"standalone";let d;if(r==="formatting"&&e.formattingValues){const x=e.defaultFormattingWidth||e.defaultWidth,c=i!=null&&i.width?String(i.width):x;d=e.formattingValues[c]||e.formattingValues[x]}else{const x=e.defaultWidth,c=i!=null&&i.width?String(i.width):e.defaultWidth;d=e.values[c]||e.values[x]}const m=e.argumentCallback?e.argumentCallback(o):o;return d[m]}}const aw={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},lw={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},cw={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},uw={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dw={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},hw={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},pw=(e,o)=>{const i=Number(e),r=i%100;if(r>20||r<10)switch(r%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},fw={ordinalNumber:pw,era:Wh({values:aw,defaultWidth:"wide"}),quarter:Wh({values:lw,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Wh({values:cw,defaultWidth:"wide"}),day:Wh({values:uw,defaultWidth:"wide"}),dayPeriod:Wh({values:dw,defaultWidth:"wide",formattingValues:hw,defaultFormattingWidth:"wide"})};function Gh(e){return(o,i={})=>{const r=i.width,d=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],m=o.match(d);if(!m)return null;const x=m[0],c=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],L=Array.isArray(c)?gw(c,D=>D.test(x)):mw(c,D=>D.test(x));let T;T=e.valueCallback?e.valueCallback(L):L,T=i.valueCallback?i.valueCallback(T):T;const P=o.slice(x.length);return{value:T,rest:P}}}function mw(e,o){for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&o(e[i]))return i}function gw(e,o){for(let i=0;i<e.length;i++)if(o(e[i]))return i}function yw(e){return(o,i={})=>{const r=o.match(e.matchPattern);if(!r)return null;const d=r[0],m=o.match(e.parsePattern);if(!m)return null;let x=e.valueCallback?e.valueCallback(m[0]):m[0];x=i.valueCallback?i.valueCallback(x):x;const c=o.slice(d.length);return{value:x,rest:c}}}const vw=/^(\d+)(th|st|nd|rd)?/i,xw=/\d+/i,_w={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ww={any:[/^b/i,/^(a|c)/i]},bw={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Cw={any:[/1/i,/2/i,/3/i,/4/i]},Sw={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Mw={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ew={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Lw={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Tw={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},kw={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Pw={ordinalNumber:yw({matchPattern:vw,parsePattern:xw,valueCallback:e=>parseInt(e,10)}),era:Gh({matchPatterns:_w,defaultMatchWidth:"wide",parsePatterns:ww,defaultParseWidth:"any"}),quarter:Gh({matchPatterns:bw,defaultMatchWidth:"wide",parsePatterns:Cw,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Gh({matchPatterns:Sw,defaultMatchWidth:"wide",parsePatterns:Mw,defaultParseWidth:"any"}),day:Gh({matchPatterns:Ew,defaultMatchWidth:"wide",parsePatterns:Lw,defaultParseWidth:"any"}),dayPeriod:Gh({matchPatterns:Tw,defaultMatchWidth:"any",parsePatterns:kw,defaultParseWidth:"any"})},R6={code:"en-US",formatDistance:ew,formatLong:iw,formatRelative:ow,localize:fw,match:Pw,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Dw(e,o){const i=rn(e,o==null?void 0:o.in);return $d(i,b0(i))+1}function C2(e,o){const i=rn(e,o==null?void 0:o.in),r=+Bd(i)-+G_(i);return Math.round(r/L6)+1}function S2(e,o){var P,D,N,$;const i=rn(e,o==null?void 0:o.in),r=i.getFullYear(),d=z1(),m=(o==null?void 0:o.firstWeekContainsDate)??((D=(P=o==null?void 0:o.locale)==null?void 0:P.options)==null?void 0:D.firstWeekContainsDate)??d.firstWeekContainsDate??(($=(N=d.locale)==null?void 0:N.options)==null?void 0:$.firstWeekContainsDate)??1,x=fr((o==null?void 0:o.in)||e,0);x.setFullYear(r+1,0,m),x.setHours(0,0,0,0);const c=mc(x,o),L=fr((o==null?void 0:o.in)||e,0);L.setFullYear(r,0,m),L.setHours(0,0,0,0);const T=mc(L,o);return+i>=+c?r+1:+i>=+T?r:r-1}function Iw(e,o){var c,L,T,P;const i=z1(),r=(o==null?void 0:o.firstWeekContainsDate)??((L=(c=o==null?void 0:o.locale)==null?void 0:c.options)==null?void 0:L.firstWeekContainsDate)??i.firstWeekContainsDate??((P=(T=i.locale)==null?void 0:T.options)==null?void 0:P.firstWeekContainsDate)??1,d=S2(e,o),m=fr((o==null?void 0:o.in)||e,0);return m.setFullYear(d,0,r),m.setHours(0,0,0,0),mc(m,o)}function A6(e,o){const i=rn(e,o==null?void 0:o.in),r=+mc(i,o)-+Iw(i,o);return Math.round(r/L6)+1}function pr(e,o){const i=e<0?"-":"",r=Math.abs(e).toString().padStart(o,"0");return i+r}const gu={y(e,o){const i=e.getFullYear(),r=i>0?i:1-i;return pr(o==="yy"?r%100:r,o.length)},M(e,o){const i=e.getMonth();return o==="M"?String(i+1):pr(i+1,2)},d(e,o){return pr(e.getDate(),o.length)},a(e,o){const i=e.getHours()/12>=1?"pm":"am";switch(o){case"a":case"aa":return i.toUpperCase();case"aaa":return i;case"aaaaa":return i[0];case"aaaa":default:return i==="am"?"a.m.":"p.m."}},h(e,o){return pr(e.getHours()%12||12,o.length)},H(e,o){return pr(e.getHours(),o.length)},m(e,o){return pr(e.getMinutes(),o.length)},s(e,o){return pr(e.getSeconds(),o.length)},S(e,o){const i=o.length,r=e.getMilliseconds(),d=Math.trunc(r*Math.pow(10,i-3));return pr(d,o.length)}},Td={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},vg={G:function(e,o,i){const r=e.getFullYear()>0?1:0;switch(o){case"G":case"GG":case"GGG":return i.era(r,{width:"abbreviated"});case"GGGGG":return i.era(r,{width:"narrow"});case"GGGG":default:return i.era(r,{width:"wide"})}},y:function(e,o,i){if(o==="yo"){const r=e.getFullYear(),d=r>0?r:1-r;return i.ordinalNumber(d,{unit:"year"})}return gu.y(e,o)},Y:function(e,o,i,r){const d=S2(e,r),m=d>0?d:1-d;if(o==="YY"){const x=m%100;return pr(x,2)}return o==="Yo"?i.ordinalNumber(m,{unit:"year"}):pr(m,o.length)},R:function(e,o){const i=k6(e);return pr(i,o.length)},u:function(e,o){const i=e.getFullYear();return pr(i,o.length)},Q:function(e,o,i){const r=Math.ceil((e.getMonth()+1)/3);switch(o){case"Q":return String(r);case"QQ":return pr(r,2);case"Qo":return i.ordinalNumber(r,{unit:"quarter"});case"QQQ":return i.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return i.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,o,i){const r=Math.ceil((e.getMonth()+1)/3);switch(o){case"q":return String(r);case"qq":return pr(r,2);case"qo":return i.ordinalNumber(r,{unit:"quarter"});case"qqq":return i.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return i.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,o,i){const r=e.getMonth();switch(o){case"M":case"MM":return gu.M(e,o);case"Mo":return i.ordinalNumber(r+1,{unit:"month"});case"MMM":return i.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return i.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(r,{width:"wide",context:"formatting"})}},L:function(e,o,i){const r=e.getMonth();switch(o){case"L":return String(r+1);case"LL":return pr(r+1,2);case"Lo":return i.ordinalNumber(r+1,{unit:"month"});case"LLL":return i.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return i.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(r,{width:"wide",context:"standalone"})}},w:function(e,o,i,r){const d=A6(e,r);return o==="wo"?i.ordinalNumber(d,{unit:"week"}):pr(d,o.length)},I:function(e,o,i){const r=C2(e);return o==="Io"?i.ordinalNumber(r,{unit:"week"}):pr(r,o.length)},d:function(e,o,i){return o==="do"?i.ordinalNumber(e.getDate(),{unit:"date"}):gu.d(e,o)},D:function(e,o,i){const r=Dw(e);return o==="Do"?i.ordinalNumber(r,{unit:"dayOfYear"}):pr(r,o.length)},E:function(e,o,i){const r=e.getDay();switch(o){case"E":case"EE":case"EEE":return i.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return i.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(r,{width:"short",context:"formatting"});case"EEEE":default:return i.day(r,{width:"wide",context:"formatting"})}},e:function(e,o,i,r){const d=e.getDay(),m=(d-r.weekStartsOn+8)%7||7;switch(o){case"e":return String(m);case"ee":return pr(m,2);case"eo":return i.ordinalNumber(m,{unit:"day"});case"eee":return i.day(d,{width:"abbreviated",context:"formatting"});case"eeeee":return i.day(d,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(d,{width:"short",context:"formatting"});case"eeee":default:return i.day(d,{width:"wide",context:"formatting"})}},c:function(e,o,i,r){const d=e.getDay(),m=(d-r.weekStartsOn+8)%7||7;switch(o){case"c":return String(m);case"cc":return pr(m,o.length);case"co":return i.ordinalNumber(m,{unit:"day"});case"ccc":return i.day(d,{width:"abbreviated",context:"standalone"});case"ccccc":return i.day(d,{width:"narrow",context:"standalone"});case"cccccc":return i.day(d,{width:"short",context:"standalone"});case"cccc":default:return i.day(d,{width:"wide",context:"standalone"})}},i:function(e,o,i){const r=e.getDay(),d=r===0?7:r;switch(o){case"i":return String(d);case"ii":return pr(d,o.length);case"io":return i.ordinalNumber(d,{unit:"day"});case"iii":return i.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return i.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return i.day(r,{width:"short",context:"formatting"});case"iiii":default:return i.day(r,{width:"wide",context:"formatting"})}},a:function(e,o,i){const d=e.getHours()/12>=1?"pm":"am";switch(o){case"a":case"aa":return i.dayPeriod(d,{width:"abbreviated",context:"formatting"});case"aaa":return i.dayPeriod(d,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return i.dayPeriod(d,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(d,{width:"wide",context:"formatting"})}},b:function(e,o,i){const r=e.getHours();let d;switch(r===12?d=Td.noon:r===0?d=Td.midnight:d=r/12>=1?"pm":"am",o){case"b":case"bb":return i.dayPeriod(d,{width:"abbreviated",context:"formatting"});case"bbb":return i.dayPeriod(d,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return i.dayPeriod(d,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(d,{width:"wide",context:"formatting"})}},B:function(e,o,i){const r=e.getHours();let d;switch(r>=17?d=Td.evening:r>=12?d=Td.afternoon:r>=4?d=Td.morning:d=Td.night,o){case"B":case"BB":case"BBB":return i.dayPeriod(d,{width:"abbreviated",context:"formatting"});case"BBBBB":return i.dayPeriod(d,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(d,{width:"wide",context:"formatting"})}},h:function(e,o,i){if(o==="ho"){let r=e.getHours()%12;return r===0&&(r=12),i.ordinalNumber(r,{unit:"hour"})}return gu.h(e,o)},H:function(e,o,i){return o==="Ho"?i.ordinalNumber(e.getHours(),{unit:"hour"}):gu.H(e,o)},K:function(e,o,i){const r=e.getHours()%12;return o==="Ko"?i.ordinalNumber(r,{unit:"hour"}):pr(r,o.length)},k:function(e,o,i){let r=e.getHours();return r===0&&(r=24),o==="ko"?i.ordinalNumber(r,{unit:"hour"}):pr(r,o.length)},m:function(e,o,i){return o==="mo"?i.ordinalNumber(e.getMinutes(),{unit:"minute"}):gu.m(e,o)},s:function(e,o,i){return o==="so"?i.ordinalNumber(e.getSeconds(),{unit:"second"}):gu.s(e,o)},S:function(e,o){return gu.S(e,o)},X:function(e,o,i){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(o){case"X":return _g(r);case"XXXX":case"XX":return x1(r);case"XXXXX":case"XXX":default:return x1(r,":")}},x:function(e,o,i){const r=e.getTimezoneOffset();switch(o){case"x":return _g(r);case"xxxx":case"xx":return x1(r);case"xxxxx":case"xxx":default:return x1(r,":")}},O:function(e,o,i){const r=e.getTimezoneOffset();switch(o){case"O":case"OO":case"OOO":return"GMT"+xg(r,":");case"OOOO":default:return"GMT"+x1(r,":")}},z:function(e,o,i){const r=e.getTimezoneOffset();switch(o){case"z":case"zz":case"zzz":return"GMT"+xg(r,":");case"zzzz":default:return"GMT"+x1(r,":")}},t:function(e,o,i){const r=Math.trunc(+e/1e3);return pr(r,o.length)},T:function(e,o,i){return pr(+e,o.length)}};function xg(e,o=""){const i=e>0?"-":"+",r=Math.abs(e),d=Math.trunc(r/60),m=r%60;return m===0?i+String(d):i+String(d)+o+pr(m,2)}function _g(e,o){return e%60===0?(e>0?"-":"+")+pr(Math.abs(e)/60,2):x1(e,o)}function x1(e,o=""){const i=e>0?"-":"+",r=Math.abs(e),d=pr(Math.trunc(r/60),2),m=pr(r%60,2);return i+d+o+m}const wg=(e,o)=>{switch(e){case"P":return o.date({width:"short"});case"PP":return o.date({width:"medium"});case"PPP":return o.date({width:"long"});case"PPPP":default:return o.date({width:"full"})}},j6=(e,o)=>{switch(e){case"p":return o.time({width:"short"});case"pp":return o.time({width:"medium"});case"ppp":return o.time({width:"long"});case"pppp":default:return o.time({width:"full"})}},Nw=(e,o)=>{const i=e.match(/(P+)(p+)?/)||[],r=i[1],d=i[2];if(!d)return wg(e,o);let m;switch(r){case"P":m=o.dateTime({width:"short"});break;case"PP":m=o.dateTime({width:"medium"});break;case"PPP":m=o.dateTime({width:"long"});break;case"PPPP":default:m=o.dateTime({width:"full"});break}return m.replace("{{date}}",wg(r,o)).replace("{{time}}",j6(d,o))},n2={p:j6,P:Nw},Rw=/^D+$/,Aw=/^Y+$/,jw=["D","DD","YY","YYYY"];function Ow(e){return Rw.test(e)}function zw(e){return Aw.test(e)}function Fw(e,o,i){const r=Bw(e,o,i);if(console.warn(r),jw.includes(e))throw new RangeError(r)}function Bw(e,o,i){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${o}\`) for formatting ${r} to the input \`${i}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const $w=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Vw=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Hw=/^'([^]*?)'?$/,Uw=/''/g,Zw=/[a-zA-Z]/;function bg(e,o,i){var P,D,N,$,U,q,H,G;const r=z1(),d=(i==null?void 0:i.locale)??r.locale??R6,m=(i==null?void 0:i.firstWeekContainsDate)??((D=(P=i==null?void 0:i.locale)==null?void 0:P.options)==null?void 0:D.firstWeekContainsDate)??r.firstWeekContainsDate??(($=(N=r.locale)==null?void 0:N.options)==null?void 0:$.firstWeekContainsDate)??1,x=(i==null?void 0:i.weekStartsOn)??((q=(U=i==null?void 0:i.locale)==null?void 0:U.options)==null?void 0:q.weekStartsOn)??r.weekStartsOn??((G=(H=r.locale)==null?void 0:H.options)==null?void 0:G.weekStartsOn)??0,c=rn(e,i==null?void 0:i.in);if(!Zf(c))throw new RangeError("Invalid time value");let L=o.match(Vw).map(te=>{const oe=te[0];if(oe==="p"||oe==="P"){const Ce=n2[oe];return Ce(te,d.formatLong)}return te}).join("").match($w).map(te=>{if(te==="''")return{isToken:!1,value:"'"};const oe=te[0];if(oe==="'")return{isToken:!1,value:qw(te)};if(vg[oe])return{isToken:!0,value:te};if(oe.match(Zw))throw new RangeError("Format string contains an unescaped latin alphabet character `"+oe+"`");return{isToken:!1,value:te}});d.localize.preprocessor&&(L=d.localize.preprocessor(c,L));const T={firstWeekContainsDate:m,weekStartsOn:x,locale:d};return L.map(te=>{if(!te.isToken)return te.value;const oe=te.value;(!(i!=null&&i.useAdditionalWeekYearTokens)&&zw(oe)||!(i!=null&&i.useAdditionalDayOfYearTokens)&&Ow(oe))&&Fw(oe,o,String(e));const Ce=vg[oe[0]];return Ce(c,oe,d.localize,T)}).join("")}function qw(e){const o=e.match(Hw);return o?o[1].replace(Uw,"'"):e}function Cg(e,o){return rn(e,o==null?void 0:o.in).getDate()}function Ww(e,o){return rn(e,o==null?void 0:o.in).getDay()}function Gw(e,o){const i=rn(e,o==null?void 0:o.in),r=i.getFullYear(),d=i.getMonth(),m=fr(i,0);return m.setFullYear(r,d+1,0),m.setHours(0,0,0,0),m.getDate()}function Yw(){return Object.assign({},z1())}function hc(e,o){return rn(e,o==null?void 0:o.in).getHours()}function Xw(e,o){const i=rn(e,o==null?void 0:o.in).getDay();return i===0?7:i}function pc(e,o){return rn(e,o==null?void 0:o.in).getMinutes()}function Wi(e,o){return rn(e,o==null?void 0:o.in).getMonth()}function xu(e){return rn(e).getSeconds()}function r2(e){return+rn(e)}function On(e,o){return rn(e,o==null?void 0:o.in).getFullYear()}function wu(e,o){return+rn(e)>+rn(o)}function il(e,o){return+rn(e)<+rn(o)}function Kw(e,o){return+rn(e)==+rn(o)}function Qw(e,o){const i=Jw(o)?new o(0):fr(o,0);return i.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),i.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),i}function Jw(e){var o;return typeof e=="function"&&((o=e.prototype)==null?void 0:o.constructor)===e}const eb=10;class O6{constructor(){Wt(this,"subPriority",0)}validate(o,i){return!0}}class tb extends O6{constructor(o,i,r,d,m){super(),this.value=o,this.validateValue=i,this.setValue=r,this.priority=d,m&&(this.subPriority=m)}validate(o,i){return this.validateValue(o,this.value,i)}set(o,i,r){return this.setValue(o,i,this.value,r)}}class nb extends O6{constructor(i,r){super();Wt(this,"priority",eb);Wt(this,"subPriority",-1);this.context=i||(d=>fr(r,d))}set(i,r){return r.timestampIsSet?i:fr(i,Qw(i,this.context))}}class ir{run(o,i,r,d){const m=this.parse(o,i,r,d);return m?{setter:new tb(m.value,this.validate,this.set,this.priority,this.subPriority),rest:m.rest}:null}validate(o,i,r){return!0}}class rb extends ir{constructor(){super(...arguments);Wt(this,"priority",140);Wt(this,"incompatibleTokens",["R","u","t","T"])}parse(i,r,d){switch(r){case"G":case"GG":case"GGG":return d.era(i,{width:"abbreviated"})||d.era(i,{width:"narrow"});case"GGGGG":return d.era(i,{width:"narrow"});case"GGGG":default:return d.era(i,{width:"wide"})||d.era(i,{width:"abbreviated"})||d.era(i,{width:"narrow"})}}set(i,r,d){return r.era=d,i.setFullYear(d,0,1),i.setHours(0,0,0,0),i}}const ti={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},tl={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function ni(e,o){return e&&{value:o(e.value),rest:e.rest}}function $r(e,o){const i=o.match(e);return i?{value:parseInt(i[0],10),rest:o.slice(i[0].length)}:null}function nl(e,o){const i=o.match(e);if(!i)return null;if(i[0]==="Z")return{value:0,rest:o.slice(1)};const r=i[1]==="+"?1:-1,d=i[2]?parseInt(i[2],10):0,m=i[3]?parseInt(i[3],10):0,x=i[5]?parseInt(i[5],10):0;return{value:r*(d*w0+m*_0+x*Z_),rest:o.slice(i[0].length)}}function z6(e){return $r(ti.anyDigitsSigned,e)}function Gr(e,o){switch(e){case 1:return $r(ti.singleDigit,o);case 2:return $r(ti.twoDigits,o);case 3:return $r(ti.threeDigits,o);case 4:return $r(ti.fourDigits,o);default:return $r(new RegExp("^\\d{1,"+e+"}"),o)}}function Yf(e,o){switch(e){case 1:return $r(ti.singleDigitSigned,o);case 2:return $r(ti.twoDigitsSigned,o);case 3:return $r(ti.threeDigitsSigned,o);case 4:return $r(ti.fourDigitsSigned,o);default:return $r(new RegExp("^-?\\d{1,"+e+"}"),o)}}function M2(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function F6(e,o){const i=o>0,r=i?o:1-o;let d;if(r<=50)d=e||100;else{const m=r+50,x=Math.trunc(m/100)*100,c=e>=m%100;d=e+x-(c?100:0)}return i?d:1-d}function B6(e){return e%400===0||e%4===0&&e%100!==0}class ib extends ir{constructor(){super(...arguments);Wt(this,"priority",130);Wt(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(i,r,d){const m=x=>({year:x,isTwoDigitYear:r==="yy"});switch(r){case"y":return ni(Gr(4,i),m);case"yo":return ni(d.ordinalNumber(i,{unit:"year"}),m);default:return ni(Gr(r.length,i),m)}}validate(i,r){return r.isTwoDigitYear||r.year>0}set(i,r,d){const m=i.getFullYear();if(d.isTwoDigitYear){const c=F6(d.year,m);return i.setFullYear(c,0,1),i.setHours(0,0,0,0),i}const x=!("era"in r)||r.era===1?d.year:1-d.year;return i.setFullYear(x,0,1),i.setHours(0,0,0,0),i}}class sb extends ir{constructor(){super(...arguments);Wt(this,"priority",130);Wt(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(i,r,d){const m=x=>({year:x,isTwoDigitYear:r==="YY"});switch(r){case"Y":return ni(Gr(4,i),m);case"Yo":return ni(d.ordinalNumber(i,{unit:"year"}),m);default:return ni(Gr(r.length,i),m)}}validate(i,r){return r.isTwoDigitYear||r.year>0}set(i,r,d,m){const x=S2(i,m);if(d.isTwoDigitYear){const L=F6(d.year,x);return i.setFullYear(L,0,m.firstWeekContainsDate),i.setHours(0,0,0,0),mc(i,m)}const c=!("era"in r)||r.era===1?d.year:1-d.year;return i.setFullYear(c,0,m.firstWeekContainsDate),i.setHours(0,0,0,0),mc(i,m)}}class ob extends ir{constructor(){super(...arguments);Wt(this,"priority",130);Wt(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(i,r){return Yf(r==="R"?4:r.length,i)}set(i,r,d){const m=fr(i,0);return m.setFullYear(d,0,4),m.setHours(0,0,0,0),Bd(m)}}class ab extends ir{constructor(){super(...arguments);Wt(this,"priority",130);Wt(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(i,r){return Yf(r==="u"?4:r.length,i)}set(i,r,d){return i.setFullYear(d,0,1),i.setHours(0,0,0,0),i}}class lb extends ir{constructor(){super(...arguments);Wt(this,"priority",120);Wt(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(i,r,d){switch(r){case"Q":case"QQ":return Gr(r.length,i);case"Qo":return d.ordinalNumber(i,{unit:"quarter"});case"QQQ":return d.quarter(i,{width:"abbreviated",context:"formatting"})||d.quarter(i,{width:"narrow",context:"formatting"});case"QQQQQ":return d.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return d.quarter(i,{width:"wide",context:"formatting"})||d.quarter(i,{width:"abbreviated",context:"formatting"})||d.quarter(i,{width:"narrow",context:"formatting"})}}validate(i,r){return r>=1&&r<=4}set(i,r,d){return i.setMonth((d-1)*3,1),i.setHours(0,0,0,0),i}}class cb extends ir{constructor(){super(...arguments);Wt(this,"priority",120);Wt(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(i,r,d){switch(r){case"q":case"qq":return Gr(r.length,i);case"qo":return d.ordinalNumber(i,{unit:"quarter"});case"qqq":return d.quarter(i,{width:"abbreviated",context:"standalone"})||d.quarter(i,{width:"narrow",context:"standalone"});case"qqqqq":return d.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return d.quarter(i,{width:"wide",context:"standalone"})||d.quarter(i,{width:"abbreviated",context:"standalone"})||d.quarter(i,{width:"narrow",context:"standalone"})}}validate(i,r){return r>=1&&r<=4}set(i,r,d){return i.setMonth((d-1)*3,1),i.setHours(0,0,0,0),i}}class ub extends ir{constructor(){super(...arguments);Wt(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);Wt(this,"priority",110)}parse(i,r,d){const m=x=>x-1;switch(r){case"M":return ni($r(ti.month,i),m);case"MM":return ni(Gr(2,i),m);case"Mo":return ni(d.ordinalNumber(i,{unit:"month"}),m);case"MMM":return d.month(i,{width:"abbreviated",context:"formatting"})||d.month(i,{width:"narrow",context:"formatting"});case"MMMMM":return d.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return d.month(i,{width:"wide",context:"formatting"})||d.month(i,{width:"abbreviated",context:"formatting"})||d.month(i,{width:"narrow",context:"formatting"})}}validate(i,r){return r>=0&&r<=11}set(i,r,d){return i.setMonth(d,1),i.setHours(0,0,0,0),i}}class db extends ir{constructor(){super(...arguments);Wt(this,"priority",110);Wt(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(i,r,d){const m=x=>x-1;switch(r){case"L":return ni($r(ti.month,i),m);case"LL":return ni(Gr(2,i),m);case"Lo":return ni(d.ordinalNumber(i,{unit:"month"}),m);case"LLL":return d.month(i,{width:"abbreviated",context:"standalone"})||d.month(i,{width:"narrow",context:"standalone"});case"LLLLL":return d.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return d.month(i,{width:"wide",context:"standalone"})||d.month(i,{width:"abbreviated",context:"standalone"})||d.month(i,{width:"narrow",context:"standalone"})}}validate(i,r){return r>=0&&r<=11}set(i,r,d){return i.setMonth(d,1),i.setHours(0,0,0,0),i}}function hb(e,o,i){const r=rn(e,i==null?void 0:i.in),d=A6(r,i)-o;return r.setDate(r.getDate()-d*7),rn(r,i==null?void 0:i.in)}class pb extends ir{constructor(){super(...arguments);Wt(this,"priority",100);Wt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(i,r,d){switch(r){case"w":return $r(ti.week,i);case"wo":return d.ordinalNumber(i,{unit:"week"});default:return Gr(r.length,i)}}validate(i,r){return r>=1&&r<=53}set(i,r,d,m){return mc(hb(i,d,m),m)}}function fb(e,o,i){const r=rn(e,i==null?void 0:i.in),d=C2(r,i)-o;return r.setDate(r.getDate()-d*7),r}class mb extends ir{constructor(){super(...arguments);Wt(this,"priority",100);Wt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(i,r,d){switch(r){case"I":return $r(ti.week,i);case"Io":return d.ordinalNumber(i,{unit:"week"});default:return Gr(r.length,i)}}validate(i,r){return r>=1&&r<=53}set(i,r,d){return Bd(fb(i,d))}}const gb=[31,28,31,30,31,30,31,31,30,31,30,31],yb=[31,29,31,30,31,30,31,31,30,31,30,31];class vb extends ir{constructor(){super(...arguments);Wt(this,"priority",90);Wt(this,"subPriority",1);Wt(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(i,r,d){switch(r){case"d":return $r(ti.date,i);case"do":return d.ordinalNumber(i,{unit:"date"});default:return Gr(r.length,i)}}validate(i,r){const d=i.getFullYear(),m=B6(d),x=i.getMonth();return m?r>=1&&r<=yb[x]:r>=1&&r<=gb[x]}set(i,r,d){return i.setDate(d),i.setHours(0,0,0,0),i}}class xb extends ir{constructor(){super(...arguments);Wt(this,"priority",90);Wt(this,"subpriority",1);Wt(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(i,r,d){switch(r){case"D":case"DD":return $r(ti.dayOfYear,i);case"Do":return d.ordinalNumber(i,{unit:"date"});default:return Gr(r.length,i)}}validate(i,r){const d=i.getFullYear();return B6(d)?r>=1&&r<=366:r>=1&&r<=365}set(i,r,d){return i.setMonth(0,d),i.setHours(0,0,0,0),i}}function E2(e,o,i){var D,N,$,U;const r=z1(),d=(i==null?void 0:i.weekStartsOn)??((N=(D=i==null?void 0:i.locale)==null?void 0:D.options)==null?void 0:N.weekStartsOn)??r.weekStartsOn??((U=($=r.locale)==null?void 0:$.options)==null?void 0:U.weekStartsOn)??0,m=rn(e,i==null?void 0:i.in),x=m.getDay(),L=(o%7+7)%7,T=7-d,P=o<0||o>6?o-(x+T)%7:(L+T)%7-(x+T)%7;return ca(m,P,i)}class _b extends ir{constructor(){super(...arguments);Wt(this,"priority",90);Wt(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(i,r,d){switch(r){case"E":case"EE":case"EEE":return d.day(i,{width:"abbreviated",context:"formatting"})||d.day(i,{width:"short",context:"formatting"})||d.day(i,{width:"narrow",context:"formatting"});case"EEEEE":return d.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return d.day(i,{width:"short",context:"formatting"})||d.day(i,{width:"narrow",context:"formatting"});case"EEEE":default:return d.day(i,{width:"wide",context:"formatting"})||d.day(i,{width:"abbreviated",context:"formatting"})||d.day(i,{width:"short",context:"formatting"})||d.day(i,{width:"narrow",context:"formatting"})}}validate(i,r){return r>=0&&r<=6}set(i,r,d,m){return i=E2(i,d,m),i.setHours(0,0,0,0),i}}class wb extends ir{constructor(){super(...arguments);Wt(this,"priority",90);Wt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(i,r,d,m){const x=c=>{const L=Math.floor((c-1)/7)*7;return(c+m.weekStartsOn+6)%7+L};switch(r){case"e":case"ee":return ni(Gr(r.length,i),x);case"eo":return ni(d.ordinalNumber(i,{unit:"day"}),x);case"eee":return d.day(i,{width:"abbreviated",context:"formatting"})||d.day(i,{width:"short",context:"formatting"})||d.day(i,{width:"narrow",context:"formatting"});case"eeeee":return d.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return d.day(i,{width:"short",context:"formatting"})||d.day(i,{width:"narrow",context:"formatting"});case"eeee":default:return d.day(i,{width:"wide",context:"formatting"})||d.day(i,{width:"abbreviated",context:"formatting"})||d.day(i,{width:"short",context:"formatting"})||d.day(i,{width:"narrow",context:"formatting"})}}validate(i,r){return r>=0&&r<=6}set(i,r,d,m){return i=E2(i,d,m),i.setHours(0,0,0,0),i}}class bb extends ir{constructor(){super(...arguments);Wt(this,"priority",90);Wt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(i,r,d,m){const x=c=>{const L=Math.floor((c-1)/7)*7;return(c+m.weekStartsOn+6)%7+L};switch(r){case"c":case"cc":return ni(Gr(r.length,i),x);case"co":return ni(d.ordinalNumber(i,{unit:"day"}),x);case"ccc":return d.day(i,{width:"abbreviated",context:"standalone"})||d.day(i,{width:"short",context:"standalone"})||d.day(i,{width:"narrow",context:"standalone"});case"ccccc":return d.day(i,{width:"narrow",context:"standalone"});case"cccccc":return d.day(i,{width:"short",context:"standalone"})||d.day(i,{width:"narrow",context:"standalone"});case"cccc":default:return d.day(i,{width:"wide",context:"standalone"})||d.day(i,{width:"abbreviated",context:"standalone"})||d.day(i,{width:"short",context:"standalone"})||d.day(i,{width:"narrow",context:"standalone"})}}validate(i,r){return r>=0&&r<=6}set(i,r,d,m){return i=E2(i,d,m),i.setHours(0,0,0,0),i}}function Cb(e,o,i){const r=rn(e,i==null?void 0:i.in),d=Xw(r,i),m=o-d;return ca(r,m,i)}class Sb extends ir{constructor(){super(...arguments);Wt(this,"priority",90);Wt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(i,r,d){const m=x=>x===0?7:x;switch(r){case"i":case"ii":return Gr(r.length,i);case"io":return d.ordinalNumber(i,{unit:"day"});case"iii":return ni(d.day(i,{width:"abbreviated",context:"formatting"})||d.day(i,{width:"short",context:"formatting"})||d.day(i,{width:"narrow",context:"formatting"}),m);case"iiiii":return ni(d.day(i,{width:"narrow",context:"formatting"}),m);case"iiiiii":return ni(d.day(i,{width:"short",context:"formatting"})||d.day(i,{width:"narrow",context:"formatting"}),m);case"iiii":default:return ni(d.day(i,{width:"wide",context:"formatting"})||d.day(i,{width:"abbreviated",context:"formatting"})||d.day(i,{width:"short",context:"formatting"})||d.day(i,{width:"narrow",context:"formatting"}),m)}}validate(i,r){return r>=1&&r<=7}set(i,r,d){return i=Cb(i,d),i.setHours(0,0,0,0),i}}class Mb extends ir{constructor(){super(...arguments);Wt(this,"priority",80);Wt(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(i,r,d){switch(r){case"a":case"aa":case"aaa":return d.dayPeriod(i,{width:"abbreviated",context:"formatting"})||d.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaaa":return d.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return d.dayPeriod(i,{width:"wide",context:"formatting"})||d.dayPeriod(i,{width:"abbreviated",context:"formatting"})||d.dayPeriod(i,{width:"narrow",context:"formatting"})}}set(i,r,d){return i.setHours(M2(d),0,0,0),i}}class Eb extends ir{constructor(){super(...arguments);Wt(this,"priority",80);Wt(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(i,r,d){switch(r){case"b":case"bb":case"bbb":return d.dayPeriod(i,{width:"abbreviated",context:"formatting"})||d.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbbb":return d.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return d.dayPeriod(i,{width:"wide",context:"formatting"})||d.dayPeriod(i,{width:"abbreviated",context:"formatting"})||d.dayPeriod(i,{width:"narrow",context:"formatting"})}}set(i,r,d){return i.setHours(M2(d),0,0,0),i}}class Lb extends ir{constructor(){super(...arguments);Wt(this,"priority",80);Wt(this,"incompatibleTokens",["a","b","t","T"])}parse(i,r,d){switch(r){case"B":case"BB":case"BBB":return d.dayPeriod(i,{width:"abbreviated",context:"formatting"})||d.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBBB":return d.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return d.dayPeriod(i,{width:"wide",context:"formatting"})||d.dayPeriod(i,{width:"abbreviated",context:"formatting"})||d.dayPeriod(i,{width:"narrow",context:"formatting"})}}set(i,r,d){return i.setHours(M2(d),0,0,0),i}}class Tb extends ir{constructor(){super(...arguments);Wt(this,"priority",70);Wt(this,"incompatibleTokens",["H","K","k","t","T"])}parse(i,r,d){switch(r){case"h":return $r(ti.hour12h,i);case"ho":return d.ordinalNumber(i,{unit:"hour"});default:return Gr(r.length,i)}}validate(i,r){return r>=1&&r<=12}set(i,r,d){const m=i.getHours()>=12;return m&&d<12?i.setHours(d+12,0,0,0):!m&&d===12?i.setHours(0,0,0,0):i.setHours(d,0,0,0),i}}class kb extends ir{constructor(){super(...arguments);Wt(this,"priority",70);Wt(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(i,r,d){switch(r){case"H":return $r(ti.hour23h,i);case"Ho":return d.ordinalNumber(i,{unit:"hour"});default:return Gr(r.length,i)}}validate(i,r){return r>=0&&r<=23}set(i,r,d){return i.setHours(d,0,0,0),i}}class Pb extends ir{constructor(){super(...arguments);Wt(this,"priority",70);Wt(this,"incompatibleTokens",["h","H","k","t","T"])}parse(i,r,d){switch(r){case"K":return $r(ti.hour11h,i);case"Ko":return d.ordinalNumber(i,{unit:"hour"});default:return Gr(r.length,i)}}validate(i,r){return r>=0&&r<=11}set(i,r,d){return i.getHours()>=12&&d<12?i.setHours(d+12,0,0,0):i.setHours(d,0,0,0),i}}class Db extends ir{constructor(){super(...arguments);Wt(this,"priority",70);Wt(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(i,r,d){switch(r){case"k":return $r(ti.hour24h,i);case"ko":return d.ordinalNumber(i,{unit:"hour"});default:return Gr(r.length,i)}}validate(i,r){return r>=1&&r<=24}set(i,r,d){const m=d<=24?d%24:d;return i.setHours(m,0,0,0),i}}class Ib extends ir{constructor(){super(...arguments);Wt(this,"priority",60);Wt(this,"incompatibleTokens",["t","T"])}parse(i,r,d){switch(r){case"m":return $r(ti.minute,i);case"mo":return d.ordinalNumber(i,{unit:"minute"});default:return Gr(r.length,i)}}validate(i,r){return r>=0&&r<=59}set(i,r,d){return i.setMinutes(d,0,0),i}}class Nb extends ir{constructor(){super(...arguments);Wt(this,"priority",50);Wt(this,"incompatibleTokens",["t","T"])}parse(i,r,d){switch(r){case"s":return $r(ti.second,i);case"so":return d.ordinalNumber(i,{unit:"second"});default:return Gr(r.length,i)}}validate(i,r){return r>=0&&r<=59}set(i,r,d){return i.setSeconds(d,0),i}}class Rb extends ir{constructor(){super(...arguments);Wt(this,"priority",30);Wt(this,"incompatibleTokens",["t","T"])}parse(i,r){const d=m=>Math.trunc(m*Math.pow(10,-r.length+3));return ni(Gr(r.length,i),d)}set(i,r,d){return i.setMilliseconds(d),i}}class Ab extends ir{constructor(){super(...arguments);Wt(this,"priority",10);Wt(this,"incompatibleTokens",["t","T","x"])}parse(i,r){switch(r){case"X":return nl(tl.basicOptionalMinutes,i);case"XX":return nl(tl.basic,i);case"XXXX":return nl(tl.basicOptionalSeconds,i);case"XXXXX":return nl(tl.extendedOptionalSeconds,i);case"XXX":default:return nl(tl.extended,i)}}set(i,r,d){return r.timestampIsSet?i:fr(i,i.getTime()-Hf(i)-d)}}class jb extends ir{constructor(){super(...arguments);Wt(this,"priority",10);Wt(this,"incompatibleTokens",["t","T","X"])}parse(i,r){switch(r){case"x":return nl(tl.basicOptionalMinutes,i);case"xx":return nl(tl.basic,i);case"xxxx":return nl(tl.basicOptionalSeconds,i);case"xxxxx":return nl(tl.extendedOptionalSeconds,i);case"xxx":default:return nl(tl.extended,i)}}set(i,r,d){return r.timestampIsSet?i:fr(i,i.getTime()-Hf(i)-d)}}class Ob extends ir{constructor(){super(...arguments);Wt(this,"priority",40);Wt(this,"incompatibleTokens","*")}parse(i){return z6(i)}set(i,r,d){return[fr(i,d*1e3),{timestampIsSet:!0}]}}class zb extends ir{constructor(){super(...arguments);Wt(this,"priority",20);Wt(this,"incompatibleTokens","*")}parse(i){return z6(i)}set(i,r,d){return[fr(i,d),{timestampIsSet:!0}]}}const Fb={G:new rb,y:new ib,Y:new sb,R:new ob,u:new ab,Q:new lb,q:new cb,M:new ub,L:new db,w:new pb,I:new mb,d:new vb,D:new xb,E:new _b,e:new wb,c:new bb,i:new Sb,a:new Mb,b:new Eb,B:new Lb,h:new Tb,H:new kb,K:new Pb,k:new Db,m:new Ib,s:new Nb,S:new Rb,X:new Ab,x:new jb,t:new Ob,T:new zb},Bb=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,$b=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Vb=/^'([^]*?)'?$/,Hb=/''/g,Ub=/\S/,Zb=/[a-zA-Z]/;function qb(e,o,i,r){var H,G,te,oe,Ce,ae,Ne,Fe;const d=()=>fr((r==null?void 0:r.in)||i,NaN),m=Yw(),x=(r==null?void 0:r.locale)??m.locale??R6,c=(r==null?void 0:r.firstWeekContainsDate)??((G=(H=r==null?void 0:r.locale)==null?void 0:H.options)==null?void 0:G.firstWeekContainsDate)??m.firstWeekContainsDate??((oe=(te=m.locale)==null?void 0:te.options)==null?void 0:oe.firstWeekContainsDate)??1,L=(r==null?void 0:r.weekStartsOn)??((ae=(Ce=r==null?void 0:r.locale)==null?void 0:Ce.options)==null?void 0:ae.weekStartsOn)??m.weekStartsOn??((Fe=(Ne=m.locale)==null?void 0:Ne.options)==null?void 0:Fe.weekStartsOn)??0;if(!o)return e?d():rn(i,r==null?void 0:r.in);const T={firstWeekContainsDate:c,weekStartsOn:L,locale:x},P=[new nb(r==null?void 0:r.in,i)],D=o.match($b).map(ye=>{const Ke=ye[0];if(Ke in n2){const Me=n2[Ke];return Me(ye,x.formatLong)}return ye}).join("").match(Bb),N=[];for(let ye of D){const Ke=ye[0],Me=Fb[Ke];if(Me){const{incompatibleTokens:qe}=Me;if(Array.isArray(qe)){const dt=N.find(Xe=>qe.includes(Xe.token)||Xe.token===Ke);if(dt)throw new RangeError(`The format string mustn't contain \`${dt.fullToken}\` and \`${ye}\` at the same time`)}else if(Me.incompatibleTokens==="*"&&N.length>0)throw new RangeError(`The format string mustn't contain \`${ye}\` and any other token at the same time`);N.push({token:Ke,fullToken:ye});const Re=Me.run(e,ye,x.match,T);if(!Re)return d();P.push(Re.setter),e=Re.rest}else{if(Ke.match(Zb))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Ke+"`");if(ye==="''"?ye="'":Ke==="'"&&(ye=Wb(ye)),e.indexOf(ye)===0)e=e.slice(ye.length);else return d()}}if(e.length>0&&Ub.test(e))return d();const $=P.map(ye=>ye.priority).sort((ye,Ke)=>Ke-ye).filter((ye,Ke,Me)=>Me.indexOf(ye)===Ke).map(ye=>P.filter(Ke=>Ke.priority===ye).sort((Ke,Me)=>Me.subPriority-Ke.subPriority)).map(ye=>ye[0]);let U=rn(i,r==null?void 0:r.in);if(isNaN(+U))return d();const q={};for(const ye of $){if(!ye.validate(U,T))return d();const Ke=ye.set(U,q,T);Array.isArray(Ke)?(U=Ke[0],Object.assign(q,Ke[1])):U=Ke}return U}function Wb(e){return e.match(Vb)[1].replace(Hb,"'")}function Gb(e,o,i){const[r,d]=yc(i==null?void 0:i.in,e,o);return r.getFullYear()===d.getFullYear()&&r.getMonth()===d.getMonth()}function Yb(e,o,i){const[r,d]=yc(i==null?void 0:i.in,e,o);return+t2(r)==+t2(d)}function Xb(e,o,i){const[r,d]=yc(i==null?void 0:i.in,e,o);return r.getFullYear()===d.getFullYear()}function cp(e,o,i){const r=+rn(e,i==null?void 0:i.in),[d,m]=[+rn(o.start,i==null?void 0:i.in),+rn(o.end,i==null?void 0:i.in)].sort((x,c)=>x-c);return r>=d&&r<=m}function Kb(e,o,i){return ca(e,-1,i)}function Qb(e,o){const i=()=>fr(o==null?void 0:o.in,NaN),d=nC(e);let m;if(d.date){const T=rC(d.date,2);m=iC(T.restDateString,T.year)}if(!m||isNaN(+m))return i();const x=+m;let c=0,L;if(d.time&&(c=sC(d.time),isNaN(c)))return i();if(d.timezone){if(L=oC(d.timezone),isNaN(L))return i()}else{const T=new Date(x+c),P=rn(0,o==null?void 0:o.in);return P.setFullYear(T.getUTCFullYear(),T.getUTCMonth(),T.getUTCDate()),P.setHours(T.getUTCHours(),T.getUTCMinutes(),T.getUTCSeconds(),T.getUTCMilliseconds()),P}return rn(x+c+L,o==null?void 0:o.in)}const yf={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Jb=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,eC=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,tC=/^([+-])(\d{2})(?::?(\d{2}))?$/;function nC(e){const o={},i=e.split(yf.dateTimeDelimiter);let r;if(i.length>2)return o;if(/:/.test(i[0])?r=i[0]:(o.date=i[0],r=i[1],yf.timeZoneDelimiter.test(o.date)&&(o.date=e.split(yf.timeZoneDelimiter)[0],r=e.substr(o.date.length,e.length))),r){const d=yf.timezone.exec(r);d?(o.time=r.replace(d[1],""),o.timezone=d[1]):o.time=r}return o}function rC(e,o){const i=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+o)+"})|(\\d{2}|[+-]\\d{"+(2+o)+"})$)"),r=e.match(i);if(!r)return{year:NaN,restDateString:""};const d=r[1]?parseInt(r[1]):null,m=r[2]?parseInt(r[2]):null;return{year:m===null?d:m*100,restDateString:e.slice((r[1]||r[2]).length)}}function iC(e,o){if(o===null)return new Date(NaN);const i=e.match(Jb);if(!i)return new Date(NaN);const r=!!i[4],d=Yh(i[1]),m=Yh(i[2])-1,x=Yh(i[3]),c=Yh(i[4]),L=Yh(i[5])-1;if(r)return dC(o,c,L)?aC(o,c,L):new Date(NaN);{const T=new Date(0);return!cC(o,m,x)||!uC(o,d)?new Date(NaN):(T.setUTCFullYear(o,m,Math.max(d,x)),T)}}function Yh(e){return e?parseInt(e):1}function sC(e){const o=e.match(eC);if(!o)return NaN;const i=mm(o[1]),r=mm(o[2]),d=mm(o[3]);return hC(i,r,d)?i*w0+r*_0+d*1e3:NaN}function mm(e){return e&&parseFloat(e.replace(",","."))||0}function oC(e){if(e==="Z")return 0;const o=e.match(tC);if(!o)return 0;const i=o[1]==="+"?-1:1,r=parseInt(o[2]),d=o[3]&&parseInt(o[3])||0;return pC(r,d)?i*(r*w0+d*_0):NaN}function aC(e,o,i){const r=new Date(0);r.setUTCFullYear(e,0,4);const d=r.getUTCDay()||7,m=(o-1)*7+i+1-d;return r.setUTCDate(r.getUTCDate()+m),r}const lC=[31,null,31,30,31,30,31,31,30,31,30,31];function $6(e){return e%400===0||e%4===0&&e%100!==0}function cC(e,o,i){return o>=0&&o<=11&&i>=1&&i<=(lC[o]||($6(e)?29:28))}function uC(e,o){return o>=1&&o<=($6(e)?366:365)}function dC(e,o,i){return o>=1&&o<=53&&i>=0&&i<=6}function hC(e,o,i){return e===24?o===0&&i===0:i>=0&&i<60&&o>=0&&o<60&&e>=0&&e<25}function pC(e,o){return o>=0&&o<=59}function To(e,o,i){const r=rn(e,i==null?void 0:i.in),d=r.getFullYear(),m=r.getDate(),x=fr(e,0);x.setFullYear(d,o,15),x.setHours(0,0,0,0);const c=Gw(x);return r.setMonth(o,Math.min(m,c)),r}function Pf(e,o,i){const r=rn(e,i==null?void 0:i.in);return r.setHours(o),r}function Df(e,o,i){const r=rn(e,i==null?void 0:i.in);return r.setMinutes(o),r}function Dd(e,o,i){const r=rn(e,i==null?void 0:i.in),d=Math.trunc(r.getMonth()/3)+1,m=o-d;return To(r,r.getMonth()+m*3)}function If(e,o,i){const r=rn(e,i==null?void 0:i.in);return r.setSeconds(o),r}function Qa(e,o,i){const r=rn(e,i==null?void 0:i.in);return isNaN(+r)?fr(e,NaN):(r.setFullYear(o),r)}function T1(e,o,i){return ua(e,-o,i)}function V6(e,o,i){return b2(e,-1,i)}function Sg(e,o,i){return Uf(e,-1,i)}function Vd(e,o,i){return uc(e,-o,i)}function C0(){return typeof window<"u"}function th(e){return H6(e)?(e.nodeName||"").toLowerCase():"#document"}function Zs(e){var o;return(e==null||(o=e.ownerDocument)==null?void 0:o.defaultView)||window}function dl(e){var o;return(o=(H6(e)?e.ownerDocument:e.document)||window.document)==null?void 0:o.documentElement}function H6(e){return C0()?e instanceof Node||e instanceof Zs(e).Node:!1}function hs(e){return C0()?e instanceof Element||e instanceof Zs(e).Element:!1}function ul(e){return C0()?e instanceof HTMLElement||e instanceof Zs(e).HTMLElement:!1}function Mg(e){return!C0()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Zs(e).ShadowRoot}const fC=new Set(["inline","contents"]);function xp(e){const{overflow:o,overflowX:i,overflowY:r,display:d}=No(e);return/auto|scroll|overlay|hidden|clip/.test(o+r+i)&&!fC.has(d)}const mC=new Set(["table","td","th"]);function gC(e){return mC.has(th(e))}const yC=[":popover-open",":modal"];function S0(e){return yC.some(o=>{try{return e.matches(o)}catch{return!1}})}const vC=["transform","translate","scale","rotate","perspective"],xC=["transform","translate","scale","rotate","perspective","filter"],_C=["paint","layout","strict","content"];function L2(e){const o=T2(),i=hs(e)?No(e):e;return vC.some(r=>i[r]?i[r]!=="none":!1)||(i.containerType?i.containerType!=="normal":!1)||!o&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!o&&(i.filter?i.filter!=="none":!1)||xC.some(r=>(i.willChange||"").includes(r))||_C.some(r=>(i.contain||"").includes(r))}function wC(e){let o=bu(e);for(;ul(o)&&!Hd(o);){if(L2(o))return o;if(S0(o))return null;o=bu(o)}return null}function T2(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const bC=new Set(["html","body","#document"]);function Hd(e){return bC.has(th(e))}function No(e){return Zs(e).getComputedStyle(e)}function M0(e){return hs(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function bu(e){if(th(e)==="html")return e;const o=e.assignedSlot||e.parentNode||Mg(e)&&e.host||dl(e);return Mg(o)?o.host:o}function U6(e){const o=bu(e);return Hd(o)?e.ownerDocument?e.ownerDocument.body:e.body:ul(o)&&xp(o)?o:U6(o)}function up(e,o,i){var r;o===void 0&&(o=[]),i===void 0&&(i=!0);const d=U6(e),m=d===((r=e.ownerDocument)==null?void 0:r.body),x=Zs(d);if(m){const c=i2(x);return o.concat(x,x.visualViewport||[],xp(d)?d:[],c&&i?up(c):[])}return o.concat(d,up(d,[],i))}function i2(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const Ud=Math.min,k1=Math.max,Xf=Math.round,vf=Math.floor,ol=e=>({x:e,y:e}),CC={left:"right",right:"left",bottom:"top",top:"bottom"},SC={start:"end",end:"start"};function MC(e,o,i){return k1(e,Ud(o,i))}function E0(e,o){return typeof e=="function"?e(o):e}function Zd(e){return e.split("-")[0]}function _p(e){return e.split("-")[1]}function EC(e){return e==="x"?"y":"x"}function k2(e){return e==="y"?"height":"width"}const LC=new Set(["top","bottom"]);function C1(e){return LC.has(Zd(e))?"y":"x"}function P2(e){return EC(C1(e))}function TC(e,o,i){i===void 0&&(i=!1);const r=_p(e),d=P2(e),m=k2(d);let x=d==="x"?r===(i?"end":"start")?"right":"left":r==="start"?"bottom":"top";return o.reference[m]>o.floating[m]&&(x=Kf(x)),[x,Kf(x)]}function kC(e){const o=Kf(e);return[s2(e),o,s2(o)]}function s2(e){return e.replace(/start|end/g,o=>SC[o])}const Eg=["left","right"],Lg=["right","left"],PC=["top","bottom"],DC=["bottom","top"];function IC(e,o,i){switch(e){case"top":case"bottom":return i?o?Lg:Eg:o?Eg:Lg;case"left":case"right":return o?PC:DC;default:return[]}}function NC(e,o,i,r){const d=_p(e);let m=IC(Zd(e),i==="start",r);return d&&(m=m.map(x=>x+"-"+d),o&&(m=m.concat(m.map(s2)))),m}function Kf(e){return e.replace(/left|right|bottom|top/g,o=>CC[o])}function RC(e){return{top:0,right:0,bottom:0,left:0,...e}}function Z6(e){return typeof e!="number"?RC(e):{top:e,right:e,bottom:e,left:e}}function Qf(e){const{x:o,y:i,width:r,height:d}=e;return{width:r,height:d,top:i,left:o,right:o+r,bottom:i+d,x:o,y:i}}var AC=typeof document<"u",jC=function(){},Jf=AC?B.useLayoutEffect:jC;const OC={...d2},zC=OC.useInsertionEffect,FC=zC||(e=>e());function BC(e){const o=B.useRef(()=>{});return FC(()=>{o.current=e}),B.useCallback(function(){for(var i=arguments.length,r=new Array(i),d=0;d<i;d++)r[d]=arguments[d];return o.current==null?void 0:o.current(...r)},[])}function Tg(e,o,i){let{reference:r,floating:d}=e;const m=C1(o),x=P2(o),c=k2(x),L=Zd(o),T=m==="y",P=r.x+r.width/2-d.width/2,D=r.y+r.height/2-d.height/2,N=r[c]/2-d[c]/2;let $;switch(L){case"top":$={x:P,y:r.y-d.height};break;case"bottom":$={x:P,y:r.y+r.height};break;case"right":$={x:r.x+r.width,y:D};break;case"left":$={x:r.x-d.width,y:D};break;default:$={x:r.x,y:r.y}}switch(_p(o)){case"start":$[x]-=N*(i&&T?-1:1);break;case"end":$[x]+=N*(i&&T?-1:1);break}return $}const $C=async(e,o,i)=>{const{placement:r="bottom",strategy:d="absolute",middleware:m=[],platform:x}=i,c=m.filter(Boolean),L=await(x.isRTL==null?void 0:x.isRTL(o));let T=await x.getElementRects({reference:e,floating:o,strategy:d}),{x:P,y:D}=Tg(T,r,L),N=r,$={},U=0;for(let q=0;q<c.length;q++){const{name:H,fn:G}=c[q],{x:te,y:oe,data:Ce,reset:ae}=await G({x:P,y:D,initialPlacement:r,placement:N,strategy:d,middlewareData:$,rects:T,platform:x,elements:{reference:e,floating:o}});P=te??P,D=oe??D,$={...$,[H]:{...$[H],...Ce}},ae&&U<=50&&(U++,typeof ae=="object"&&(ae.placement&&(N=ae.placement),ae.rects&&(T=ae.rects===!0?await x.getElementRects({reference:e,floating:o,strategy:d}):ae.rects),{x:P,y:D}=Tg(T,N,L)),q=-1)}return{x:P,y:D,placement:N,strategy:d,middlewareData:$}};async function VC(e,o){var i;o===void 0&&(o={});const{x:r,y:d,platform:m,rects:x,elements:c,strategy:L}=e,{boundary:T="clippingAncestors",rootBoundary:P="viewport",elementContext:D="floating",altBoundary:N=!1,padding:$=0}=E0(o,e),U=Z6($),H=c[N?D==="floating"?"reference":"floating":D],G=Qf(await m.getClippingRect({element:(i=await(m.isElement==null?void 0:m.isElement(H)))==null||i?H:H.contextElement||await(m.getDocumentElement==null?void 0:m.getDocumentElement(c.floating)),boundary:T,rootBoundary:P,strategy:L})),te=D==="floating"?{x:r,y:d,width:x.floating.width,height:x.floating.height}:x.reference,oe=await(m.getOffsetParent==null?void 0:m.getOffsetParent(c.floating)),Ce=await(m.isElement==null?void 0:m.isElement(oe))?await(m.getScale==null?void 0:m.getScale(oe))||{x:1,y:1}:{x:1,y:1},ae=Qf(m.convertOffsetParentRelativeRectToViewportRelativeRect?await m.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:te,offsetParent:oe,strategy:L}):te);return{top:(G.top-ae.top+U.top)/Ce.y,bottom:(ae.bottom-G.bottom+U.bottom)/Ce.y,left:(G.left-ae.left+U.left)/Ce.x,right:(ae.right-G.right+U.right)/Ce.x}}const HC=e=>({name:"arrow",options:e,async fn(o){const{x:i,y:r,placement:d,rects:m,platform:x,elements:c,middlewareData:L}=o,{element:T,padding:P=0}=E0(e,o)||{};if(T==null)return{};const D=Z6(P),N={x:i,y:r},$=P2(d),U=k2($),q=await x.getDimensions(T),H=$==="y",G=H?"top":"left",te=H?"bottom":"right",oe=H?"clientHeight":"clientWidth",Ce=m.reference[U]+m.reference[$]-N[$]-m.floating[U],ae=N[$]-m.reference[$],Ne=await(x.getOffsetParent==null?void 0:x.getOffsetParent(T));let Fe=Ne?Ne[oe]:0;(!Fe||!await(x.isElement==null?void 0:x.isElement(Ne)))&&(Fe=c.floating[oe]||m.floating[U]);const ye=Ce/2-ae/2,Ke=Fe/2-q[U]/2-1,Me=Ud(D[G],Ke),qe=Ud(D[te],Ke),Re=Me,dt=Fe-q[U]-qe,Xe=Fe/2-q[U]/2+ye,ht=MC(Re,Xe,dt),Pe=!L.arrow&&_p(d)!=null&&Xe!==ht&&m.reference[U]/2-(Xe<Re?Me:qe)-q[U]/2<0,ke=Pe?Xe<Re?Xe-Re:Xe-dt:0;return{[$]:N[$]+ke,data:{[$]:ht,centerOffset:Xe-ht-ke,...Pe&&{alignmentOffset:ke}},reset:Pe}}}),UC=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(o){var i,r;const{placement:d,middlewareData:m,rects:x,initialPlacement:c,platform:L,elements:T}=o,{mainAxis:P=!0,crossAxis:D=!0,fallbackPlacements:N,fallbackStrategy:$="bestFit",fallbackAxisSideDirection:U="none",flipAlignment:q=!0,...H}=E0(e,o);if((i=m.arrow)!=null&&i.alignmentOffset)return{};const G=Zd(d),te=C1(c),oe=Zd(c)===c,Ce=await(L.isRTL==null?void 0:L.isRTL(T.floating)),ae=N||(oe||!q?[Kf(c)]:kC(c)),Ne=U!=="none";!N&&Ne&&ae.push(...NC(c,q,U,Ce));const Fe=[c,...ae],ye=await VC(o,H),Ke=[];let Me=((r=m.flip)==null?void 0:r.overflows)||[];if(P&&Ke.push(ye[G]),D){const Xe=TC(d,x,Ce);Ke.push(ye[Xe[0]],ye[Xe[1]])}if(Me=[...Me,{placement:d,overflows:Ke}],!Ke.every(Xe=>Xe<=0)){var qe,Re;const Xe=(((qe=m.flip)==null?void 0:qe.index)||0)+1,ht=Fe[Xe];if(ht&&(!(D==="alignment"?te!==C1(ht):!1)||Me.every(de=>C1(de.placement)===te?de.overflows[0]>0:!0)))return{data:{index:Xe,overflows:Me},reset:{placement:ht}};let Pe=(Re=Me.filter(ke=>ke.overflows[0]<=0).sort((ke,de)=>ke.overflows[1]-de.overflows[1])[0])==null?void 0:Re.placement;if(!Pe)switch($){case"bestFit":{var dt;const ke=(dt=Me.filter(de=>{if(Ne){const je=C1(de.placement);return je===te||je==="y"}return!0}).map(de=>[de.placement,de.overflows.filter(je=>je>0).reduce((je,Ee)=>je+Ee,0)]).sort((de,je)=>de[1]-je[1])[0])==null?void 0:dt[0];ke&&(Pe=ke);break}case"initialPlacement":Pe=c;break}if(d!==Pe)return{reset:{placement:Pe}}}return{}}}},ZC=new Set(["left","top"]);async function qC(e,o){const{placement:i,platform:r,elements:d}=e,m=await(r.isRTL==null?void 0:r.isRTL(d.floating)),x=Zd(i),c=_p(i),L=C1(i)==="y",T=ZC.has(x)?-1:1,P=m&&L?-1:1,D=E0(o,e);let{mainAxis:N,crossAxis:$,alignmentAxis:U}=typeof D=="number"?{mainAxis:D,crossAxis:0,alignmentAxis:null}:{mainAxis:D.mainAxis||0,crossAxis:D.crossAxis||0,alignmentAxis:D.alignmentAxis};return c&&typeof U=="number"&&($=c==="end"?U*-1:U),L?{x:$*P,y:N*T}:{x:N*T,y:$*P}}const WC=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(o){var i,r;const{x:d,y:m,placement:x,middlewareData:c}=o,L=await qC(o,e);return x===((i=c.offset)==null?void 0:i.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:d+L.x,y:m+L.y,data:{...L,placement:x}}}}};function q6(e){const o=No(e);let i=parseFloat(o.width)||0,r=parseFloat(o.height)||0;const d=ul(e),m=d?e.offsetWidth:i,x=d?e.offsetHeight:r,c=Xf(i)!==m||Xf(r)!==x;return c&&(i=m,r=x),{width:i,height:r,$:c}}function D2(e){return hs(e)?e:e.contextElement}function Nd(e){const o=D2(e);if(!ul(o))return ol(1);const i=o.getBoundingClientRect(),{width:r,height:d,$:m}=q6(o);let x=(m?Xf(i.width):i.width)/r,c=(m?Xf(i.height):i.height)/d;return(!x||!Number.isFinite(x))&&(x=1),(!c||!Number.isFinite(c))&&(c=1),{x,y:c}}const GC=ol(0);function W6(e){const o=Zs(e);return!T2()||!o.visualViewport?GC:{x:o.visualViewport.offsetLeft,y:o.visualViewport.offsetTop}}function YC(e,o,i){return o===void 0&&(o=!1),!i||o&&i!==Zs(e)?!1:o}function A1(e,o,i,r){o===void 0&&(o=!1),i===void 0&&(i=!1);const d=e.getBoundingClientRect(),m=D2(e);let x=ol(1);o&&(r?hs(r)&&(x=Nd(r)):x=Nd(e));const c=YC(m,i,r)?W6(m):ol(0);let L=(d.left+c.x)/x.x,T=(d.top+c.y)/x.y,P=d.width/x.x,D=d.height/x.y;if(m){const N=Zs(m),$=r&&hs(r)?Zs(r):r;let U=N,q=i2(U);for(;q&&r&&$!==U;){const H=Nd(q),G=q.getBoundingClientRect(),te=No(q),oe=G.left+(q.clientLeft+parseFloat(te.paddingLeft))*H.x,Ce=G.top+(q.clientTop+parseFloat(te.paddingTop))*H.y;L*=H.x,T*=H.y,P*=H.x,D*=H.y,L+=oe,T+=Ce,U=Zs(q),q=i2(U)}}return Qf({width:P,height:D,x:L,y:T})}function L0(e,o){const i=M0(e).scrollLeft;return o?o.left+i:A1(dl(e)).left+i}function G6(e,o){const i=e.getBoundingClientRect(),r=i.left+o.scrollLeft-L0(e,i),d=i.top+o.scrollTop;return{x:r,y:d}}function XC(e){let{elements:o,rect:i,offsetParent:r,strategy:d}=e;const m=d==="fixed",x=dl(r),c=o?S0(o.floating):!1;if(r===x||c&&m)return i;let L={scrollLeft:0,scrollTop:0},T=ol(1);const P=ol(0),D=ul(r);if((D||!D&&!m)&&((th(r)!=="body"||xp(x))&&(L=M0(r)),ul(r))){const $=A1(r);T=Nd(r),P.x=$.x+r.clientLeft,P.y=$.y+r.clientTop}const N=x&&!D&&!m?G6(x,L):ol(0);return{width:i.width*T.x,height:i.height*T.y,x:i.x*T.x-L.scrollLeft*T.x+P.x+N.x,y:i.y*T.y-L.scrollTop*T.y+P.y+N.y}}function KC(e){return Array.from(e.getClientRects())}function QC(e){const o=dl(e),i=M0(e),r=e.ownerDocument.body,d=k1(o.scrollWidth,o.clientWidth,r.scrollWidth,r.clientWidth),m=k1(o.scrollHeight,o.clientHeight,r.scrollHeight,r.clientHeight);let x=-i.scrollLeft+L0(e);const c=-i.scrollTop;return No(r).direction==="rtl"&&(x+=k1(o.clientWidth,r.clientWidth)-d),{width:d,height:m,x,y:c}}const kg=25;function JC(e,o){const i=Zs(e),r=dl(e),d=i.visualViewport;let m=r.clientWidth,x=r.clientHeight,c=0,L=0;if(d){m=d.width,x=d.height;const P=T2();(!P||P&&o==="fixed")&&(c=d.offsetLeft,L=d.offsetTop)}const T=L0(r);if(T<=0){const P=r.ownerDocument,D=P.body,N=getComputedStyle(D),$=P.compatMode==="CSS1Compat"&&parseFloat(N.marginLeft)+parseFloat(N.marginRight)||0,U=Math.abs(r.clientWidth-D.clientWidth-$);U<=kg&&(m-=U)}else T<=kg&&(m+=T);return{width:m,height:x,x:c,y:L}}const eS=new Set(["absolute","fixed"]);function tS(e,o){const i=A1(e,!0,o==="fixed"),r=i.top+e.clientTop,d=i.left+e.clientLeft,m=ul(e)?Nd(e):ol(1),x=e.clientWidth*m.x,c=e.clientHeight*m.y,L=d*m.x,T=r*m.y;return{width:x,height:c,x:L,y:T}}function Pg(e,o,i){let r;if(o==="viewport")r=JC(e,i);else if(o==="document")r=QC(dl(e));else if(hs(o))r=tS(o,i);else{const d=W6(e);r={x:o.x-d.x,y:o.y-d.y,width:o.width,height:o.height}}return Qf(r)}function Y6(e,o){const i=bu(e);return i===o||!hs(i)||Hd(i)?!1:No(i).position==="fixed"||Y6(i,o)}function nS(e,o){const i=o.get(e);if(i)return i;let r=up(e,[],!1).filter(c=>hs(c)&&th(c)!=="body"),d=null;const m=No(e).position==="fixed";let x=m?bu(e):e;for(;hs(x)&&!Hd(x);){const c=No(x),L=L2(x);!L&&c.position==="fixed"&&(d=null),(m?!L&&!d:!L&&c.position==="static"&&!!d&&eS.has(d.position)||xp(x)&&!L&&Y6(e,x))?r=r.filter(P=>P!==x):d=c,x=bu(x)}return o.set(e,r),r}function rS(e){let{element:o,boundary:i,rootBoundary:r,strategy:d}=e;const x=[...i==="clippingAncestors"?S0(o)?[]:nS(o,this._c):[].concat(i),r],c=x[0],L=x.reduce((T,P)=>{const D=Pg(o,P,d);return T.top=k1(D.top,T.top),T.right=Ud(D.right,T.right),T.bottom=Ud(D.bottom,T.bottom),T.left=k1(D.left,T.left),T},Pg(o,c,d));return{width:L.right-L.left,height:L.bottom-L.top,x:L.left,y:L.top}}function iS(e){const{width:o,height:i}=q6(e);return{width:o,height:i}}function sS(e,o,i){const r=ul(o),d=dl(o),m=i==="fixed",x=A1(e,!0,m,o);let c={scrollLeft:0,scrollTop:0};const L=ol(0);function T(){L.x=L0(d)}if(r||!r&&!m)if((th(o)!=="body"||xp(d))&&(c=M0(o)),r){const $=A1(o,!0,m,o);L.x=$.x+o.clientLeft,L.y=$.y+o.clientTop}else d&&T();m&&!r&&d&&T();const P=d&&!r&&!m?G6(d,c):ol(0),D=x.left+c.scrollLeft-L.x-P.x,N=x.top+c.scrollTop-L.y-P.y;return{x:D,y:N,width:x.width,height:x.height}}function gm(e){return No(e).position==="static"}function Dg(e,o){if(!ul(e)||No(e).position==="fixed")return null;if(o)return o(e);let i=e.offsetParent;return dl(e)===i&&(i=i.ownerDocument.body),i}function X6(e,o){const i=Zs(e);if(S0(e))return i;if(!ul(e)){let d=bu(e);for(;d&&!Hd(d);){if(hs(d)&&!gm(d))return d;d=bu(d)}return i}let r=Dg(e,o);for(;r&&gC(r)&&gm(r);)r=Dg(r,o);return r&&Hd(r)&&gm(r)&&!L2(r)?i:r||wC(e)||i}const oS=async function(e){const o=this.getOffsetParent||X6,i=this.getDimensions,r=await i(e.floating);return{reference:sS(e.reference,await o(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function aS(e){return No(e).direction==="rtl"}const lS={convertOffsetParentRelativeRectToViewportRelativeRect:XC,getDocumentElement:dl,getClippingRect:rS,getOffsetParent:X6,getElementRects:oS,getClientRects:KC,getDimensions:iS,getScale:Nd,isElement:hs,isRTL:aS};function K6(e,o){return e.x===o.x&&e.y===o.y&&e.width===o.width&&e.height===o.height}function cS(e,o){let i=null,r;const d=dl(e);function m(){var c;clearTimeout(r),(c=i)==null||c.disconnect(),i=null}function x(c,L){c===void 0&&(c=!1),L===void 0&&(L=1),m();const T=e.getBoundingClientRect(),{left:P,top:D,width:N,height:$}=T;if(c||o(),!N||!$)return;const U=vf(D),q=vf(d.clientWidth-(P+N)),H=vf(d.clientHeight-(D+$)),G=vf(P),oe={rootMargin:-U+"px "+-q+"px "+-H+"px "+-G+"px",threshold:k1(0,Ud(1,L))||1};let Ce=!0;function ae(Ne){const Fe=Ne[0].intersectionRatio;if(Fe!==L){if(!Ce)return x();Fe?x(!1,Fe):r=setTimeout(()=>{x(!1,1e-7)},1e3)}Fe===1&&!K6(T,e.getBoundingClientRect())&&x(),Ce=!1}try{i=new IntersectionObserver(ae,{...oe,root:d.ownerDocument})}catch{i=new IntersectionObserver(ae,oe)}i.observe(e)}return x(!0),m}function uS(e,o,i,r){r===void 0&&(r={});const{ancestorScroll:d=!0,ancestorResize:m=!0,elementResize:x=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:L=!1}=r,T=D2(e),P=d||m?[...T?up(T):[],...up(o)]:[];P.forEach(G=>{d&&G.addEventListener("scroll",i,{passive:!0}),m&&G.addEventListener("resize",i)});const D=T&&c?cS(T,i):null;let N=-1,$=null;x&&($=new ResizeObserver(G=>{let[te]=G;te&&te.target===T&&$&&($.unobserve(o),cancelAnimationFrame(N),N=requestAnimationFrame(()=>{var oe;(oe=$)==null||oe.observe(o)})),i()}),T&&!L&&$.observe(T),$.observe(o));let U,q=L?A1(e):null;L&&H();function H(){const G=A1(e);q&&!K6(q,G)&&i(),q=G,U=requestAnimationFrame(H)}return i(),()=>{var G;P.forEach(te=>{d&&te.removeEventListener("scroll",i),m&&te.removeEventListener("resize",i)}),D==null||D(),(G=$)==null||G.disconnect(),$=null,L&&cancelAnimationFrame(U)}}const dS=WC,hS=UC,Ig=HC,pS=(e,o,i)=>{const r=new Map,d={platform:lS,...i},m={...d.platform,_c:r};return $C(e,o,{...d,platform:m})};var fS=typeof document<"u",mS=function(){},Nf=fS?B.useLayoutEffect:mS;function e0(e,o){if(e===o)return!0;if(typeof e!=typeof o)return!1;if(typeof e=="function"&&e.toString()===o.toString())return!0;let i,r,d;if(e&&o&&typeof e=="object"){if(Array.isArray(e)){if(i=e.length,i!==o.length)return!1;for(r=i;r--!==0;)if(!e0(e[r],o[r]))return!1;return!0}if(d=Object.keys(e),i=d.length,i!==Object.keys(o).length)return!1;for(r=i;r--!==0;)if(!{}.hasOwnProperty.call(o,d[r]))return!1;for(r=i;r--!==0;){const m=d[r];if(!(m==="_owner"&&e.$$typeof)&&!e0(e[m],o[m]))return!1}return!0}return e!==e&&o!==o}function Q6(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Ng(e,o){const i=Q6(e);return Math.round(o*i)/i}function ym(e){const o=B.useRef(e);return Nf(()=>{o.current=e}),o}function gS(e){e===void 0&&(e={});const{placement:o="bottom",strategy:i="absolute",middleware:r=[],platform:d,elements:{reference:m,floating:x}={},transform:c=!0,whileElementsMounted:L,open:T}=e,[P,D]=B.useState({x:0,y:0,strategy:i,placement:o,middlewareData:{},isPositioned:!1}),[N,$]=B.useState(r);e0(N,r)||$(r);const[U,q]=B.useState(null),[H,G]=B.useState(null),te=B.useCallback(de=>{de!==Ne.current&&(Ne.current=de,q(de))},[]),oe=B.useCallback(de=>{de!==Fe.current&&(Fe.current=de,G(de))},[]),Ce=m||U,ae=x||H,Ne=B.useRef(null),Fe=B.useRef(null),ye=B.useRef(P),Ke=L!=null,Me=ym(L),qe=ym(d),Re=ym(T),dt=B.useCallback(()=>{if(!Ne.current||!Fe.current)return;const de={placement:o,strategy:i,middleware:N};qe.current&&(de.platform=qe.current),pS(Ne.current,Fe.current,de).then(je=>{const Ee={...je,isPositioned:Re.current!==!1};Xe.current&&!e0(ye.current,Ee)&&(ye.current=Ee,r0.flushSync(()=>{D(Ee)}))})},[N,o,i,qe,Re]);Nf(()=>{T===!1&&ye.current.isPositioned&&(ye.current.isPositioned=!1,D(de=>({...de,isPositioned:!1})))},[T]);const Xe=B.useRef(!1);Nf(()=>(Xe.current=!0,()=>{Xe.current=!1}),[]),Nf(()=>{if(Ce&&(Ne.current=Ce),ae&&(Fe.current=ae),Ce&&ae){if(Me.current)return Me.current(Ce,ae,dt);dt()}},[Ce,ae,dt,Me,Ke]);const ht=B.useMemo(()=>({reference:Ne,floating:Fe,setReference:te,setFloating:oe}),[te,oe]),Pe=B.useMemo(()=>({reference:Ce,floating:ae}),[Ce,ae]),ke=B.useMemo(()=>{const de={position:i,left:0,top:0};if(!Pe.floating)return de;const je=Ng(Pe.floating,P.x),Ee=Ng(Pe.floating,P.y);return c?{...de,transform:"translate("+je+"px, "+Ee+"px)",...Q6(Pe.floating)>=1.5&&{willChange:"transform"}}:{position:i,left:je,top:Ee}},[i,c,Pe.floating,P.x,P.y]);return B.useMemo(()=>({...P,update:dt,refs:ht,elements:Pe,floatingStyles:ke}),[P,dt,ht,Pe,ke])}const yS=e=>{function o(i){return{}.hasOwnProperty.call(i,"current")}return{name:"arrow",options:e,fn(i){const{element:r,padding:d}=typeof e=="function"?e(i):e;return r&&o(r)?r.current!=null?Ig({element:r.current,padding:d}).fn(i):{}:r?Ig({element:r,padding:d}).fn(i):{}}}},vS=(e,o)=>({...dS(e),options:[e,o]}),xS=(e,o)=>({...hS(e),options:[e,o]}),_S=(e,o)=>({...yS(e),options:[e,o]}),wS={...d2};let Rg=!1,bS=0;const Ag=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+bS++;function CS(){const[e,o]=B.useState(()=>Rg?Ag():void 0);return Jf(()=>{e==null&&o(Ag())},[]),B.useEffect(()=>{Rg=!0},[]),e}const SS=wS.useId,J6=SS||CS,MS=B.forwardRef(function(o,i){const{context:{placement:r,elements:{floating:d},middlewareData:{arrow:m,shift:x}},width:c=14,height:L=7,tipRadius:T=0,strokeWidth:P=0,staticOffset:D,stroke:N,d:$,style:{transform:U,...q}={},...H}=o,G=J6(),[te,oe]=B.useState(!1);if(Jf(()=>{if(!d)return;No(d).direction==="rtl"&&oe(!0)},[d]),!d)return null;const[Ce,ae]=r.split("-"),Ne=Ce==="top"||Ce==="bottom";let Fe=D;(Ne&&x!=null&&x.x||!Ne&&x!=null&&x.y)&&(Fe=null);const ye=P*2,Ke=ye/2,Me=c/2*(T/-8+1),qe=L/2*T/4,Re=!!$,dt=Fe&&ae==="end"?"bottom":"top";let Xe=Fe&&ae==="end"?"right":"left";Fe&&te&&(Xe=ae==="end"?"left":"right");const ht=(m==null?void 0:m.x)!=null?Fe||m.x:"",Pe=(m==null?void 0:m.y)!=null?Fe||m.y:"",ke=$||"M0,0"+(" H"+c)+(" L"+(c-Me)+","+(L-qe))+(" Q"+c/2+","+L+" "+Me+","+(L-qe))+" Z",de={top:Re?"rotate(180deg)":"",left:Re?"rotate(90deg)":"rotate(-90deg)",bottom:Re?"":"rotate(180deg)",right:Re?"rotate(-90deg)":"rotate(90deg)"}[Ce];return f.jsxs("svg",{...H,"aria-hidden":!0,ref:i,width:Re?c:c+ye,height:c,viewBox:"0 0 "+c+" "+(L>c?L:c),style:{position:"absolute",pointerEvents:"none",[Xe]:ht,[dt]:Pe,[Ce]:Ne||Re?"100%":"calc(100% - "+ye/2+"px)",transform:[de,U].filter(je=>!!je).join(" "),...q},children:[ye>0&&f.jsx("path",{clipPath:"url(#"+G+")",fill:"none",stroke:N,strokeWidth:ye+($?0:1),d:ke}),f.jsx("path",{stroke:ye&&!$?H.fill:"none",d:ke}),f.jsx("clipPath",{id:G,children:f.jsx("rect",{x:-Ke,y:Ke*(Re?-1:1),width:c+ye,height:c})})]})});function ES(){const e=new Map;return{emit(o,i){var r;(r=e.get(o))==null||r.forEach(d=>d(i))},on(o,i){e.has(o)||e.set(o,new Set),e.get(o).add(i)},off(o,i){var r;(r=e.get(o))==null||r.delete(i)}}}const LS=B.createContext(null),TS=B.createContext(null),kS=()=>{var e;return((e=B.useContext(LS))==null?void 0:e.id)||null},PS=()=>B.useContext(TS);function DS(e){const{open:o=!1,onOpenChange:i,elements:r}=e,d=J6(),m=B.useRef({}),[x]=B.useState(()=>ES()),c=kS()!=null,[L,T]=B.useState(r.reference),P=BC(($,U,q)=>{m.current.openEvent=$?U:void 0,x.emit("openchange",{open:$,event:U,reason:q,nested:c}),i==null||i($,U,q)}),D=B.useMemo(()=>({setPositionReference:T}),[]),N=B.useMemo(()=>({reference:L||r.reference||null,floating:r.floating||null,domReference:r.reference}),[L,r.reference,r.floating]);return B.useMemo(()=>({dataRef:m,open:o,onOpenChange:P,elements:N,events:x,floatingId:d,refs:D}),[o,P,N,x,d,D])}function IS(e){e===void 0&&(e={});const{nodeId:o}=e,i=DS({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||i,d=r.elements,[m,x]=B.useState(null),[c,L]=B.useState(null),P=(d==null?void 0:d.domReference)||m,D=B.useRef(null),N=PS();Jf(()=>{P&&(D.current=P)},[P]);const $=gS({...e,elements:{...d,...c&&{reference:c}}}),U=B.useCallback(oe=>{const Ce=hs(oe)?{getBoundingClientRect:()=>oe.getBoundingClientRect(),getClientRects:()=>oe.getClientRects(),contextElement:oe}:oe;L(Ce),$.refs.setReference(Ce)},[$.refs]),q=B.useCallback(oe=>{(hs(oe)||oe===null)&&(D.current=oe,x(oe)),(hs($.refs.reference.current)||$.refs.reference.current===null||oe!==null&&!hs(oe))&&$.refs.setReference(oe)},[$.refs]),H=B.useMemo(()=>({...$.refs,setReference:q,setPositionReference:U,domReference:D}),[$.refs,q,U]),G=B.useMemo(()=>({...$.elements,domReference:P}),[$.elements,P]),te=B.useMemo(()=>({...$,...r,refs:H,elements:G,nodeId:o}),[$,H,G,o,r]);return Jf(()=>{r.dataRef.current.floatingContext=te;const oe=N==null?void 0:N.nodesRef.current.find(Ce=>Ce.id===o);oe&&(oe.context=te)}),B.useMemo(()=>({...$,context:te,refs:H,elements:G}),[$,H,G,te])}/*!
  react-datepicker v8.7.0
  https://github.com/Hacker0x01/react-datepicker
  Released under the MIT License.
*/var o2=function(o,i){return o2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,d){r.__proto__=d}||function(r,d){for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(r[m]=d[m])},o2(o,i)};function Oi(e,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");o2(e,o);function i(){this.constructor=e}e.prototype=o===null?Object.create(o):(i.prototype=o.prototype,new i)}var Zn=function(){return Zn=Object.assign||function(i){for(var r,d=1,m=arguments.length;d<m;d++){r=arguments[d];for(var x in r)Object.prototype.hasOwnProperty.call(r,x)&&(i[x]=r[x])}return i},Zn.apply(this,arguments)};function sl(e,o,i){if(i||arguments.length===2)for(var r=0,d=o.length,m;r<d;r++)(m||!(r in o))&&(m||(m=Array.prototype.slice.call(o,0,r)),m[r]=o[r]);return e.concat(m||Array.prototype.slice.call(o))}var NS=function(e){var o=e.showTimeSelectOnly,i=o===void 0?!1:o,r=e.showTime,d=r===void 0?!1:r,m=e.className,x=e.children,c=i?"Choose Time":"Choose Date".concat(d?" and Time":"");return Ze.createElement("div",{className:m,role:"dialog","aria-label":c,"aria-modal":"true"},x)},RS=function(e,o){var i=B.useRef(null),r=B.useRef(e);r.current=e;var d=B.useCallback(function(m){var x,c=m.composed&&m.composedPath&&m.composedPath().find(function(L){return L instanceof Node})||m.target;i.current&&!i.current.contains(c)&&(o&&c instanceof HTMLElement&&c.classList.contains(o)||(x=r.current)===null||x===void 0||x.call(r,m))},[o]);return B.useEffect(function(){return document.addEventListener("mousedown",d),function(){document.removeEventListener("mousedown",d)}},[d]),i},T0=function(e){var o=e.children,i=e.onClickOutside,r=e.className,d=e.containerRef,m=e.style,x=e.ignoreClass,c=RS(i,x);return Ze.createElement("div",{className:r,style:m,ref:function(L){c.current=L,d&&(d.current=L)}},o)},Ht;(function(e){e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.PageUp="PageUp",e.PageDown="PageDown",e.Home="Home",e.End="End",e.Enter="Enter",e.Space=" ",e.Tab="Tab",e.Escape="Escape",e.Backspace="Backspace",e.X="x"})(Ht||(Ht={}));function e4(){var e=typeof window<"u"?window:globalThis;return e}var wp=12;function ur(e){if(e==null)return new Date;var o=typeof e=="string"?Qb(e):rn(e);return k0(o)?o:new Date}function vm(e,o,i,r,d){d===void 0&&(d=ur());for(var m=qd(i)||qd(I2()),x=Array.isArray(o)?o:[o],c=0,L=x;c<L.length;c++){var T=L[c],P=qb(e,T,d,{locale:m});if(k0(P)&&(!r||e===Ar(P,T,i)))return P}return null}function k0(e,o){return Zf(e)&&!il(e,new Date("1/1/1800"))}function Ar(e,o,i){if(i==="en")return bg(e,o,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var r=i?qd(i):void 0;return i&&!r&&console.warn('A locale object was not found for the provided string ["'.concat(i,'"].')),r=r||qd(I2()),bg(e,o,{locale:r,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function Eo(e,o){var i=o.dateFormat,r=o.locale,d=Array.isArray(i)&&i.length>0?i[0]:i;return e&&Ar(e,d,r)||""}var t4=" - ";function AS(e,o,i){if(!e&&!o)return"";var r=e?Eo(e,i):"",d=o?Eo(o,i):"",m=i.rangeSeparator||t4;return"".concat(r).concat(m).concat(d)}function jS(e,o){if(!(e!=null&&e.length))return"";var i=e[0]?Eo(e[0],o):"";if(e.length===1)return i;if(e.length===2&&e[1]){var r=Eo(e[1],o);return"".concat(i,", ").concat(r)}var d=e.length-1;return"".concat(i," (+").concat(d,")")}function xm(e,o){var i=o.hour,r=i===void 0?0:i,d=o.minute,m=d===void 0?0:d,x=o.second,c=x===void 0?0:x;return Pf(Df(If(e,c),m),r)}function OS(e){return C2(e)}function zS(e,o){return Ar(e,"ddd",o)}function Rf(e){return R1(e)}function _u(e,o,i){var r=qd(o||I2());return mc(e,{locale:r,weekStartsOn:i})}function fc(e){return I6(e)}function ep(e){return b0(e)}function jg(e){return t2(e)}function Og(){return R1(ur())}function zg(e){return P6(e)}function FS(e){return Q_(e)}function BS(e){return D6(e)}function el(e,o){return e&&o?Xb(e,o):!e&&!o}function us(e,o){return e&&o?Gb(e,o):!e&&!o}function t0(e,o){return e&&o?Yb(e,o):!e&&!o}function Un(e,o){return e&&o?X_(e,o):!e&&!o}function S1(e,o){return e&&o?Kw(e,o):!e&&!o}function _1(e,o,i){var r,d=R1(o),m=P6(i);try{r=cp(e,{start:d,end:m})}catch{r=!1}return r}function I2(){var e=e4();return e.__localeId__}function qd(e){if(typeof e=="string"){var o=e4();return o.__localeData__?o.__localeData__[e]:void 0}else return e}function $S(e,o,i){return o(Ar(e,"EEEE",i))}function VS(e,o){return Ar(e,"EEEEEE",o)}function HS(e,o){return Ar(e,"EEE",o)}function N2(e,o){return Ar(To(ur(),e),"LLLL",o)}function n4(e,o){return Ar(To(ur(),e),"LLL",o)}function US(e,o){return Ar(Dd(ur(),e),"QQQ",o)}function ko(e,o){var i=o===void 0?{}:o,r=i.minDate,d=i.maxDate,m=i.excludeDates,x=i.excludeDateIntervals,c=i.includeDates,L=i.includeDateIntervals,T=i.filterDate;return bp(e,{minDate:r,maxDate:d})||m&&m.some(function(P){return P instanceof Date?Un(e,P):Un(e,P.date)})||x&&x.some(function(P){var D=P.start,N=P.end;return cp(e,{start:D,end:N})})||c&&!c.some(function(P){return Un(e,P)})||L&&!L.some(function(P){var D=P.start,N=P.end;return cp(e,{start:D,end:N})})||T&&!T(ur(e))||!1}function R2(e,o){var i=o===void 0?{}:o,r=i.excludeDates,d=i.excludeDateIntervals;return d&&d.length>0?d.some(function(m){var x=m.start,c=m.end;return cp(e,{start:x,end:c})}):r&&r.some(function(m){var x;return m instanceof Date?Un(e,m):Un(e,(x=m.date)!==null&&x!==void 0?x:new Date)})||!1}function r4(e,o){var i=o===void 0?{}:o,r=i.minDate,d=i.maxDate,m=i.excludeDates,x=i.includeDates,c=i.filterDate;return bp(e,{minDate:r?I6(r):void 0,maxDate:d?D6(d):void 0})||(m==null?void 0:m.some(function(L){return us(e,L instanceof Date?L:L.date)}))||x&&!x.some(function(L){return us(e,L)})||c&&!c(ur(e))||!1}function xf(e,o,i,r){var d=On(e),m=Wi(e),x=On(o),c=Wi(o),L=On(r);return d===x&&d===L?m<=i&&i<=c:d<x?L===d&&m<=i||L===x&&c>=i||L<x&&L>d:!1}function ZS(e,o){var i=o===void 0?{}:o,r=i.minDate,d=i.maxDate,m=i.excludeDates,x=i.includeDates;return bp(e,{minDate:r,maxDate:d})||m&&m.some(function(c){return us(c instanceof Date?c:c.date,e)})||x&&!x.some(function(c){return us(c,e)})||!1}function _f(e,o){var i=o===void 0?{}:o,r=i.minDate,d=i.maxDate,m=i.excludeDates,x=i.includeDates,c=i.filterDate;return bp(e,{minDate:r,maxDate:d})||(m==null?void 0:m.some(function(L){return t0(e,L instanceof Date?L:L.date)}))||x&&!x.some(function(L){return t0(e,L)})||c&&!c(ur(e))||!1}function wf(e,o,i){if(!o||!i||!Zf(o)||!Zf(i))return!1;var r=On(o),d=On(i);return r<=e&&d>=e}function Af(e,o){var i=o===void 0?{}:o,r=i.minDate,d=i.maxDate,m=i.excludeDates,x=i.includeDates,c=i.filterDate,L=new Date(e,0,1);return bp(L,{minDate:r?b0(r):void 0,maxDate:d?N6(d):void 0})||(m==null?void 0:m.some(function(T){return el(L,T instanceof Date?T:T.date)}))||x&&!x.some(function(T){return el(L,T)})||c&&!c(ur(L))||!1}function bf(e,o,i,r){var d=On(e),m=L1(e),x=On(o),c=L1(o),L=On(r);return d===x&&d===L?m<=i&&i<=c:d<x?L===d&&m<=i||L===x&&c>=i||L<x&&L>d:!1}function bp(e,o){var i,r=o===void 0?{}:o,d=r.minDate,m=r.maxDate;return(i=d&&$d(e,d)<0||m&&$d(e,m)>0)!==null&&i!==void 0?i:!1}function Fg(e,o){return o.some(function(i){return hc(i)===hc(e)&&pc(i)===pc(e)&&xu(i)===xu(e)})}function Bg(e,o){var i=o===void 0?{}:o,r=i.excludeTimes,d=i.includeTimes,m=i.filterTime;return r&&Fg(e,r)||d&&!Fg(e,d)||m&&!m(e)||!1}function $g(e,o){var i=o.minTime,r=o.maxTime;if(!i||!r)throw new Error("Both minTime and maxTime props required");var d=ur();d=Pf(d,hc(e)),d=Df(d,pc(e)),d=If(d,xu(e));var m=ur();m=Pf(m,hc(i)),m=Df(m,pc(i)),m=If(m,xu(i));var x=ur();x=Pf(x,hc(r)),x=Df(x,pc(r)),x=If(x,xu(r));var c;try{c=!cp(d,{start:m,end:x})}catch{c=!1}return c}function Vg(e,o){var i=o===void 0?{}:o,r=i.minDate,d=i.includeDates,m=T1(e,1);return r&&qf(r,m)>0||d&&d.every(function(x){return qf(x,m)>0})||!1}function Hg(e,o){var i=o===void 0?{}:o,r=i.maxDate,d=i.includeDates,m=ua(e,1);return r&&qf(m,r)>0||d&&d.every(function(x){return qf(m,x)>0})||!1}function qS(e,o){var i=o===void 0?{}:o,r=i.minDate,d=i.includeDates,m=b0(e),x=V6(m);return r&&Wf(r,x)>0||d&&d.every(function(c){return Wf(c,x)>0})||!1}function WS(e,o){var i=o===void 0?{}:o,r=i.maxDate,d=i.includeDates,m=N6(e),x=b2(m,1);return r&&Wf(x,r)>0||d&&d.every(function(c){return Wf(x,c)>0})||!1}function Ug(e,o){var i=o===void 0?{}:o,r=i.minDate,d=i.includeDates,m=Vd(e,1);return r&&Gf(r,m)>0||d&&d.every(function(x){return Gf(x,m)>0})||!1}function GS(e,o){var i=o===void 0?{}:o,r=i.minDate,d=i.yearItemNumber,m=d===void 0?wp:d,x=ep(Vd(e,m)),c=lc(x,m).endPeriod,L=r&&On(r);return L&&L>c||!1}function Zg(e,o){var i=o===void 0?{}:o,r=i.maxDate,d=i.includeDates,m=uc(e,1);return r&&Gf(m,r)>0||d&&d.every(function(x){return Gf(m,x)>0})||!1}function YS(e,o){var i=o===void 0?{}:o,r=i.maxDate,d=i.yearItemNumber,m=d===void 0?wp:d,x=uc(e,m),c=lc(x,m).startPeriod,L=r&&On(r);return L&&L<c||!1}function i4(e){var o=e.minDate,i=e.includeDates;if(i&&o){var r=i.filter(function(d){return $d(d,o)>=0});return gg(r)}else return i?gg(i):o}function s4(e){var o=e.maxDate,i=e.includeDates;if(i&&o){var r=i.filter(function(d){return $d(d,o)<=0});return mg(r)}else return i?mg(i):o}function qg(e,o){var i;e===void 0&&(e=[]),o===void 0&&(o="react-datepicker__day--highlighted");for(var r=new Map,d=0,m=e.length;d<m;d++){var x=e[d];if(dc(x)){var c=Ar(x,"MM.dd.yyyy"),L=r.get(c)||[];L.includes(o)||(L.push(o),r.set(c,L))}else if(typeof x=="object"){var T=Object.keys(x),P=(i=T[0])!==null&&i!==void 0?i:"",D=x[P];if(typeof P=="string"&&Array.isArray(D))for(var N=0,$=D.length;N<$;N++){var U=D[N];if(U){var c=Ar(U,"MM.dd.yyyy"),L=r.get(c)||[];L.includes(P)||(L.push(P),r.set(c,L))}}}}return r}function XS(e,o){return e.length!==o.length?!1:e.every(function(i,r){return i===o[r]})}function KS(e,o){e===void 0&&(e=[]),o===void 0&&(o="react-datepicker__day--holidays");var i=new Map;return e.forEach(function(r){var d=r.date,m=r.holidayName;if(dc(d)){var x=Ar(d,"MM.dd.yyyy"),c=i.get(x)||{className:"",holidayNames:[]};if(!("className"in c&&c.className===o&&XS(c.holidayNames,[m]))){c.className=o;var L=c.holidayNames;c.holidayNames=L?sl(sl([],L,!0),[m],!1):[m],i.set(x,c)}}}),i}function QS(e,o,i,r,d){for(var m=d.length,x=[],c=0;c<m;c++){var L=e,T=d[c];T&&(L=q_(L,hc(T)),L=e2(L,pc(T)),L=Y_(L,xu(T)));var P=e2(e,(i+1)*r);wu(L,o)&&il(L,P)&&T!=null&&x.push(T)}return x}function Wg(e){return e<10?"0".concat(e):"".concat(e)}function lc(e,o){o===void 0&&(o=wp);var i=Math.ceil(On(e)/o)*o,r=i-(o-1);return{startPeriod:r,endPeriod:i}}function JS(e){var o=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24);return Math.round((+i-+o)/36e5)}function Gg(e){var o=e.getSeconds(),i=e.getMilliseconds();return rn(e.getTime()-o*1e3-i)}function eM(e,o){return Gg(e).getTime()===Gg(o).getTime()}function Yg(e){if(!dc(e))throw new Error("Invalid date");var o=new Date(e);return o.setHours(0,0,0,0),o}function _m(e,o){if(!dc(e)||!dc(o))throw new Error("Invalid date received");var i=Yg(e),r=Yg(o);return il(i,r)}function o4(e){return e.key===Ht.Space}var tM=function(e){Oi(o,e);function o(i){var r=e.call(this,i)||this;return r.inputRef=Ze.createRef(),r.onTimeChange=function(d){var m,x;r.setState({time:d});var c=r.props.date,L=c instanceof Date&&!isNaN(+c),T=L?c:new Date;if(d!=null&&d.includes(":")){var P=d.split(":"),D=P[0],N=P[1];T.setHours(Number(D)),T.setMinutes(Number(N))}(x=(m=r.props).onChange)===null||x===void 0||x.call(m,T)},r.renderTimeInput=function(){var d=r.state.time,m=r.props,x=m.date,c=m.timeString,L=m.customTimeInput;return L?B.cloneElement(L,{date:x,value:d,onChange:r.onTimeChange}):Ze.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:r.inputRef,onClick:function(){var T;(T=r.inputRef.current)===null||T===void 0||T.focus()},required:!0,value:d,onChange:function(T){r.onTimeChange(T.target.value||c)}})},r.state={time:r.props.timeString},r}return o.getDerivedStateFromProps=function(i,r){return i.timeString!==r.time?{time:i.timeString}:null},o.prototype.render=function(){return Ze.createElement("div",{className:"react-datepicker__input-time-container"},Ze.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),Ze.createElement("div",{className:"react-datepicker-time__input-container"},Ze.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},o}(B.Component),nM=function(e){Oi(o,e);function o(){var i=e!==null&&e.apply(this,arguments)||this;return i.dayEl=B.createRef(),i.handleClick=function(r){!i.isDisabled()&&i.props.onClick&&i.props.onClick(r)},i.handleMouseEnter=function(r){!i.isDisabled()&&i.props.onMouseEnter&&i.props.onMouseEnter(r)},i.handleOnKeyDown=function(r){var d,m,x=r.key;x===Ht.Space&&(r.preventDefault(),r.key=Ht.Enter),(m=(d=i.props).handleOnKeyDown)===null||m===void 0||m.call(d,r)},i.isSameDay=function(r){return Un(i.props.day,r)},i.isKeyboardSelected=function(){var r;if(i.props.disabledKeyboardNavigation)return!1;var d=i.props.selectsMultiple?(r=i.props.selectedDates)===null||r===void 0?void 0:r.some(function(x){return i.isSameDayOrWeek(x)}):i.isSameDayOrWeek(i.props.selected),m=i.props.preSelection&&i.isDisabled(i.props.preSelection);return!d&&i.isSameDayOrWeek(i.props.preSelection)&&!m},i.isDisabled=function(r){return r===void 0&&(r=i.props.day),ko(r,{minDate:i.props.minDate,maxDate:i.props.maxDate,excludeDates:i.props.excludeDates,excludeDateIntervals:i.props.excludeDateIntervals,includeDateIntervals:i.props.includeDateIntervals,includeDates:i.props.includeDates,filterDate:i.props.filterDate})},i.isExcluded=function(){return R2(i.props.day,{excludeDates:i.props.excludeDates,excludeDateIntervals:i.props.excludeDateIntervals})},i.isStartOfWeek=function(){return Un(i.props.day,_u(i.props.day,i.props.locale,i.props.calendarStartDay))},i.isSameWeek=function(r){return i.props.showWeekPicker&&Un(r,_u(i.props.day,i.props.locale,i.props.calendarStartDay))},i.isSameDayOrWeek=function(r){return i.isSameDay(r)||i.isSameWeek(r)},i.getHighLightedClass=function(){var r=i.props,d=r.day,m=r.highlightDates;if(!m)return!1;var x=Ar(d,"MM.dd.yyyy");return m.get(x)},i.getHolidaysClass=function(){var r,d=i.props,m=d.day,x=d.holidays;if(!x)return[void 0];var c=Ar(m,"MM.dd.yyyy");return x.has(c)?[(r=x.get(c))===null||r===void 0?void 0:r.className]:[void 0]},i.isInRange=function(){var r=i.props,d=r.day,m=r.startDate,x=r.endDate;return!m||!x?!1:_1(d,m,x)},i.isInSelectingRange=function(){var r,d=i.props,m=d.day,x=d.selectsStart,c=d.selectsEnd,L=d.selectsRange,T=d.selectsDisabledDaysInRange,P=d.startDate,D=d.swapRange,N=d.endDate,$=(r=i.props.selectingDate)!==null&&r!==void 0?r:i.props.preSelection;if(!(x||c||L)||!$||!T&&i.isDisabled())return!1;if(x&&N&&(il($,N)||S1($,N)))return _1(m,$,N);if(c&&P&&(wu($,P)||S1($,P)))return _1(m,P,$);if(L&&P&&!N){if(S1($,P)||wu($,P))return _1(m,P,$);if(D&&il($,P))return _1(m,$,P)}return!1},i.isSelectingRangeStart=function(){var r;if(!i.isInSelectingRange())return!1;var d=i.props,m=d.day,x=d.startDate,c=d.selectsStart,L=d.swapRange,T=d.selectsRange,P=(r=i.props.selectingDate)!==null&&r!==void 0?r:i.props.preSelection;return c?Un(m,P):T&&L&&x&&P?Un(m,il(P,x)?P:x):Un(m,x)},i.isSelectingRangeEnd=function(){var r;if(!i.isInSelectingRange())return!1;var d=i.props,m=d.day,x=d.endDate,c=d.selectsEnd,L=d.selectsRange,T=d.swapRange,P=d.startDate,D=(r=i.props.selectingDate)!==null&&r!==void 0?r:i.props.preSelection;return c?Un(m,D):L&&T&&P&&D?Un(m,il(D,P)?P:D):L?Un(m,D):Un(m,x)},i.isRangeStart=function(){var r=i.props,d=r.day,m=r.startDate,x=r.endDate;return!m||!x?!1:Un(m,d)},i.isRangeEnd=function(){var r=i.props,d=r.day,m=r.startDate,x=r.endDate;return!m||!x?!1:Un(x,d)},i.isWeekend=function(){var r=Ww(i.props.day);return r===0||r===6},i.isAfterMonth=function(){return i.props.month!==void 0&&(i.props.month+1)%12===Wi(i.props.day)},i.isBeforeMonth=function(){return i.props.month!==void 0&&(Wi(i.props.day)+1)%12===i.props.month},i.isCurrentDay=function(){return i.isSameDay(ur())},i.isSelected=function(){var r;return i.props.selectsMultiple?(r=i.props.selectedDates)===null||r===void 0?void 0:r.some(function(d){return i.isSameDayOrWeek(d)}):i.isSameDayOrWeek(i.props.selected)},i.getClassNames=function(r){var d=i.props.dayClassName?i.props.dayClassName(r):void 0;return ji("react-datepicker__day",d,"react-datepicker__day--"+zS(i.props.day),{"react-datepicker__day--disabled":i.isDisabled(),"react-datepicker__day--excluded":i.isExcluded(),"react-datepicker__day--selected":i.isSelected(),"react-datepicker__day--keyboard-selected":i.isKeyboardSelected(),"react-datepicker__day--range-start":i.isRangeStart(),"react-datepicker__day--range-end":i.isRangeEnd(),"react-datepicker__day--in-range":i.isInRange(),"react-datepicker__day--in-selecting-range":i.isInSelectingRange(),"react-datepicker__day--selecting-range-start":i.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":i.isSelectingRangeEnd(),"react-datepicker__day--today":i.isCurrentDay(),"react-datepicker__day--weekend":i.isWeekend(),"react-datepicker__day--outside-month":i.isAfterMonth()||i.isBeforeMonth()},i.getHighLightedClass(),i.getHolidaysClass())},i.getAriaLabel=function(){var r=i.props,d=r.day,m=r.ariaLabelPrefixWhenEnabled,x=m===void 0?"Choose":m,c=r.ariaLabelPrefixWhenDisabled,L=c===void 0?"Not available":c,T=i.isDisabled()||i.isExcluded()?L:x;return"".concat(T," ").concat(Ar(d,"PPPP",i.props.locale))},i.getTitle=function(){var r=i.props,d=r.day,m=r.holidays,x=m===void 0?new Map:m,c=r.excludeDates,L=Ar(d,"MM.dd.yyyy"),T=[];return x.has(L)&&T.push.apply(T,x.get(L).holidayNames),i.isExcluded()&&T.push(c==null?void 0:c.filter(function(P){return P instanceof Date?Un(P,d):Un(P==null?void 0:P.date,d)}).map(function(P){if(!(P instanceof Date))return P==null?void 0:P.message})),T.join(", ")},i.getTabIndex=function(){var r=i.props.selected,d=i.props.preSelection,m=!(i.props.showWeekPicker&&(i.props.showWeekNumber||!i.isStartOfWeek()))&&(i.isKeyboardSelected()||i.isSameDay(r)&&Un(d,r))?0:-1;return m},i.handleFocusDay=function(){var r;i.shouldFocusDay()&&((r=i.dayEl.current)===null||r===void 0||r.focus({preventScroll:!0}))},i.renderDayContents=function(){return i.props.monthShowsDuplicateDaysEnd&&i.isAfterMonth()||i.props.monthShowsDuplicateDaysStart&&i.isBeforeMonth()?null:i.props.renderDayContents?i.props.renderDayContents(Cg(i.props.day),i.props.day):Cg(i.props.day)},i.render=function(){return Ze.createElement("div",{ref:i.dayEl,className:i.getClassNames(i.props.day),onKeyDown:i.handleOnKeyDown,onClick:i.handleClick,onMouseEnter:i.props.usePointerEvent?void 0:i.handleMouseEnter,onPointerEnter:i.props.usePointerEvent?i.handleMouseEnter:void 0,tabIndex:i.getTabIndex(),"aria-label":i.getAriaLabel(),role:"gridcell",title:i.getTitle(),"aria-disabled":i.isDisabled(),"aria-current":i.isCurrentDay()?"date":void 0,"aria-selected":i.isSelected()||i.isInRange()},i.renderDayContents(),i.getTitle()!==""&&Ze.createElement("span",{className:"overlay"},i.getTitle()))},i}return o.prototype.componentDidMount=function(){this.handleFocusDay()},o.prototype.componentDidUpdate=function(){this.handleFocusDay()},o.prototype.shouldFocusDay=function(){var i=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(i=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(i=!1),this.isDayActiveElement()&&(i=!0),this.isDuplicateDay()&&(i=!1)),i},o.prototype.isDayActiveElement=function(){var i,r,d;return((r=(i=this.props.containerRef)===null||i===void 0?void 0:i.current)===null||r===void 0?void 0:r.contains(document.activeElement))&&((d=document.activeElement)===null||d===void 0?void 0:d.classList.contains("react-datepicker__day"))},o.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},o}(B.Component),rM=function(e){Oi(o,e);function o(){var i=e!==null&&e.apply(this,arguments)||this;return i.weekNumberEl=B.createRef(),i.handleClick=function(r){i.props.onClick&&i.props.onClick(r)},i.handleOnKeyDown=function(r){var d,m,x=r.key;x===Ht.Space&&(r.preventDefault(),r.key=Ht.Enter),(m=(d=i.props).handleOnKeyDown)===null||m===void 0||m.call(d,r)},i.isKeyboardSelected=function(){return!i.props.disabledKeyboardNavigation&&!Un(i.props.date,i.props.selected)&&Un(i.props.date,i.props.preSelection)},i.getTabIndex=function(){return i.props.showWeekPicker&&i.props.showWeekNumber&&(i.isKeyboardSelected()||Un(i.props.date,i.props.selected)&&Un(i.props.preSelection,i.props.selected))?0:-1},i.handleFocusWeekNumber=function(r){var d=!1;i.getTabIndex()===0&&!(r!=null&&r.isInputFocused)&&Un(i.props.date,i.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(d=!0),i.props.inline&&!i.props.shouldFocusDayInline&&(d=!1),i.props.containerRef&&i.props.containerRef.current&&i.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(d=!0)),d&&i.weekNumberEl.current&&i.weekNumberEl.current.focus({preventScroll:!0})},i}return Object.defineProperty(o,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),o.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},o.prototype.componentDidUpdate=function(i){this.handleFocusWeekNumber(i)},o.prototype.render=function(){var i=this.props,r=i.weekNumber,d=i.isWeekDisabled,m=i.ariaLabelPrefix,x=m===void 0?o.defaultProps.ariaLabelPrefix:m,c=i.onClick,L={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!c&&!d,"react-datepicker__week-number--selected":!!c&&Un(this.props.date,this.props.selected)};return Ze.createElement("div",{ref:this.weekNumberEl,className:ji(L),"aria-label":"".concat(x," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex(),role:"gridcell"},r)},o}(B.Component),iM=function(e){Oi(o,e);function o(){var i=e!==null&&e.apply(this,arguments)||this;return i.isDisabled=function(r){return ko(r,{minDate:i.props.minDate,maxDate:i.props.maxDate,excludeDates:i.props.excludeDates,excludeDateIntervals:i.props.excludeDateIntervals,includeDateIntervals:i.props.includeDateIntervals,includeDates:i.props.includeDates,filterDate:i.props.filterDate})},i.handleDayClick=function(r,d){i.props.onDayClick&&i.props.onDayClick(r,d)},i.handleDayMouseEnter=function(r){i.props.onDayMouseEnter&&i.props.onDayMouseEnter(r)},i.handleWeekClick=function(r,d,m){for(var x,c,L,T=new Date(r),P=0;P<7;P++){var D=new Date(r);D.setDate(D.getDate()+P);var N=!i.isDisabled(D);if(N){T=D;break}}typeof i.props.onWeekSelect=="function"&&i.props.onWeekSelect(T,d,m),i.props.showWeekPicker&&i.handleDayClick(T,m),((x=i.props.shouldCloseOnSelect)!==null&&x!==void 0?x:o.defaultProps.shouldCloseOnSelect)&&((L=(c=i.props).setOpen)===null||L===void 0||L.call(c,!1))},i.formatWeekNumber=function(r){return i.props.formatWeekNumber?i.props.formatWeekNumber(r):OS(r)},i.isWeekDisabled=function(){for(var r=i.startOfWeek(),d=ca(r,6),m=new Date(r);m<=d;){if(!i.isDisabled(m))return!1;m=ca(m,1)}return!0},i.renderDays=function(){var r=i.startOfWeek(),d=[],m=i.formatWeekNumber(r);if(i.props.showWeekNumber){var x=i.props.onWeekSelect||i.props.showWeekPicker?i.handleWeekClick.bind(i,r,m):void 0;d.push(Ze.createElement(rM,Zn({key:"W"},o.defaultProps,i.props,{weekNumber:m,isWeekDisabled:i.isWeekDisabled(),date:r,onClick:x})))}return d.concat([0,1,2,3,4,5,6].map(function(c){var L=ca(r,c);return Ze.createElement(nM,Zn({},o.defaultProps,i.props,{ariaLabelPrefixWhenEnabled:i.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:i.props.disabledDayAriaLabelPrefix,key:L.valueOf(),day:L,onClick:i.handleDayClick.bind(i,L),onMouseEnter:i.handleDayMouseEnter.bind(i,L)}))}))},i.startOfWeek=function(){return _u(i.props.day,i.props.locale,i.props.calendarStartDay)},i.isKeyboardSelected=function(){return!i.props.disabledKeyboardNavigation&&!Un(i.startOfWeek(),i.props.selected)&&Un(i.startOfWeek(),i.props.preSelection)},i}return Object.defineProperty(o,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),o.prototype.render=function(){var i={"react-datepicker__week":!0,"react-datepicker__week--selected":Un(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()},r=this.props.weekClassName?this.props.weekClassName(this.startOfWeek()):void 0;return Ze.createElement("div",{className:ji(i,r),role:"row"},this.renderDays())},o}(B.Component),Xh,sM=6,Rd={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},wm=(Xh={},Xh[Rd.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},Xh[Rd.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},Xh[Rd.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},Xh),Cf=1;function Xg(e,o){return e?Rd.FOUR_COLUMNS:o?Rd.TWO_COLUMNS:Rd.THREE_COLUMNS}var oM=function(e){Oi(o,e);function o(){var i=e!==null&&e.apply(this,arguments)||this;return i.MONTH_REFS=sl([],Array(12),!0).map(function(){return B.createRef()}),i.QUARTER_REFS=sl([],Array(4),!0).map(function(){return B.createRef()}),i.isDisabled=function(r){return ko(r,{minDate:i.props.minDate,maxDate:i.props.maxDate,excludeDates:i.props.excludeDates,excludeDateIntervals:i.props.excludeDateIntervals,includeDateIntervals:i.props.includeDateIntervals,includeDates:i.props.includeDates,filterDate:i.props.filterDate})},i.isExcluded=function(r){return R2(r,{excludeDates:i.props.excludeDates,excludeDateIntervals:i.props.excludeDateIntervals})},i.handleDayClick=function(r,d){var m,x;(x=(m=i.props).onDayClick)===null||x===void 0||x.call(m,r,d,i.props.orderInDisplay)},i.handleDayMouseEnter=function(r){var d,m;(m=(d=i.props).onDayMouseEnter)===null||m===void 0||m.call(d,r)},i.handleMouseLeave=function(){var r,d;(d=(r=i.props).onMouseLeave)===null||d===void 0||d.call(r)},i.isRangeStartMonth=function(r){var d=i.props,m=d.day,x=d.startDate,c=d.endDate;return!x||!c?!1:us(To(m,r),x)},i.isRangeStartQuarter=function(r){var d=i.props,m=d.day,x=d.startDate,c=d.endDate;return!x||!c?!1:t0(Dd(m,r),x)},i.isRangeEndMonth=function(r){var d=i.props,m=d.day,x=d.startDate,c=d.endDate;return!x||!c?!1:us(To(m,r),c)},i.isRangeEndQuarter=function(r){var d=i.props,m=d.day,x=d.startDate,c=d.endDate;return!x||!c?!1:t0(Dd(m,r),c)},i.isInSelectingRangeMonth=function(r){var d,m=i.props,x=m.day,c=m.selectsStart,L=m.selectsEnd,T=m.selectsRange,P=m.startDate,D=m.endDate,N=(d=i.props.selectingDate)!==null&&d!==void 0?d:i.props.preSelection;return!(c||L||T)||!N?!1:c&&D?xf(N,D,r,x):L&&P||T&&P&&!D?xf(P,N,r,x):!1},i.isSelectingMonthRangeStart=function(r){var d;if(!i.isInSelectingRangeMonth(r))return!1;var m=i.props,x=m.day,c=m.startDate,L=m.selectsStart,T=To(x,r),P=(d=i.props.selectingDate)!==null&&d!==void 0?d:i.props.preSelection;return L?us(T,P):us(T,c)},i.isSelectingMonthRangeEnd=function(r){var d;if(!i.isInSelectingRangeMonth(r))return!1;var m=i.props,x=m.day,c=m.endDate,L=m.selectsEnd,T=m.selectsRange,P=To(x,r),D=(d=i.props.selectingDate)!==null&&d!==void 0?d:i.props.preSelection;return L||T?us(P,D):us(P,c)},i.isInSelectingRangeQuarter=function(r){var d,m=i.props,x=m.day,c=m.selectsStart,L=m.selectsEnd,T=m.selectsRange,P=m.startDate,D=m.endDate,N=(d=i.props.selectingDate)!==null&&d!==void 0?d:i.props.preSelection;return!(c||L||T)||!N?!1:c&&D?bf(N,D,r,x):L&&P||T&&P&&!D?bf(P,N,r,x):!1},i.isWeekInMonth=function(r){var d=i.props.day,m=ca(r,6);return us(r,d)||us(m,d)},i.isCurrentMonth=function(r,d){return On(r)===On(ur())&&d===Wi(ur())},i.isCurrentQuarter=function(r,d){return On(r)===On(ur())&&d===L1(ur())},i.isSelectedMonth=function(r,d,m){return Wi(m)===d&&On(r)===On(m)},i.isSelectMonthInList=function(r,d,m){return m.some(function(x){return i.isSelectedMonth(r,d,x)})},i.isSelectedQuarter=function(r,d,m){return L1(r)===d&&On(r)===On(m)},i.isMonthSelected=function(){var r=i.props,d=r.day,m=r.selected,x=r.selectedDates,c=r.selectsMultiple,L=Wi(d);return c?x==null?void 0:x.some(function(T){return i.isSelectedMonth(d,L,T)}):!!m&&i.isSelectedMonth(d,L,m)},i.renderWeeks=function(){for(var r=[],d=i.props.fixedHeight,m=0,x=!1,c=_u(fc(i.props.day),i.props.locale,i.props.calendarStartDay),L=function(U){return i.props.showWeekPicker?_u(U,i.props.locale,i.props.calendarStartDay):i.props.preSelection},T=function(U){return i.props.showWeekPicker?_u(U,i.props.locale,i.props.calendarStartDay):i.props.selected},P=i.props.selected?T(i.props.selected):void 0,D=i.props.preSelection?L(i.props.preSelection):void 0;r.push(Ze.createElement(iM,Zn({},i.props,{ariaLabelPrefix:i.props.weekAriaLabelPrefix,key:m,day:c,month:Wi(i.props.day),onDayClick:i.handleDayClick,onDayMouseEnter:i.handleDayMouseEnter,selected:P,preSelection:D,showWeekNumber:i.props.showWeekNumbers}))),!x;){m++,c=Uf(c,1);var N=d&&m>=sM,$=!d&&!i.isWeekInMonth(c);if(N||$)if(i.props.peekNextMonth)x=!0;else break}return r},i.onMonthClick=function(r,d){var m=i.isMonthDisabledForLabelDate(d),x=m.isDisabled,c=m.labelDate;x||i.handleDayClick(fc(c),r)},i.onMonthMouseEnter=function(r){var d=i.isMonthDisabledForLabelDate(r),m=d.isDisabled,x=d.labelDate;m||i.handleDayMouseEnter(fc(x))},i.handleMonthNavigation=function(r,d){var m,x,c,L;(x=(m=i.props).setPreSelection)===null||x===void 0||x.call(m,d),(L=(c=i.MONTH_REFS[r])===null||c===void 0?void 0:c.current)===null||L===void 0||L.focus()},i.handleKeyboardNavigation=function(r,d,m){var x,c=i.props,L=c.selected,T=c.preSelection,P=c.setPreSelection,D=c.minDate,N=c.maxDate,$=c.showFourColumnMonthYearPicker,U=c.showTwoColumnMonthYearPicker;if(T){var q=Xg($,U),H=i.getVerticalOffset(q),G=(x=wm[q])===null||x===void 0?void 0:x.grid,te=function(Fe,ye,Ke){var Me,qe,Re=ye,dt=Ke;switch(Fe){case Ht.ArrowRight:Re=ua(ye,Cf),dt=Ke===11?0:Ke+Cf;break;case Ht.ArrowLeft:Re=T1(ye,Cf),dt=Ke===0?11:Ke-Cf;break;case Ht.ArrowUp:Re=T1(ye,H),dt=!((Me=G==null?void 0:G[0])===null||Me===void 0)&&Me.includes(Ke)?Ke+12-H:Ke-H;break;case Ht.ArrowDown:Re=ua(ye,H),dt=!((qe=G==null?void 0:G[G.length-1])===null||qe===void 0)&&qe.includes(Ke)?Ke-12+H:Ke+H;break}return{newCalculatedDate:Re,newCalculatedMonth:dt}},oe=function(Fe,ye,Ke){for(var Me=40,qe=Fe,Re=!1,dt=0,Xe=te(qe,ye,Ke),ht=Xe.newCalculatedDate,Pe=Xe.newCalculatedMonth;!Re;){if(dt>=Me){ht=ye,Pe=Ke;break}if(D&&ht<D){qe=Ht.ArrowRight;var ke=te(qe,ht,Pe);ht=ke.newCalculatedDate,Pe=ke.newCalculatedMonth}if(N&&ht>N){qe=Ht.ArrowLeft;var ke=te(qe,ht,Pe);ht=ke.newCalculatedDate,Pe=ke.newCalculatedMonth}if(ZS(ht,i.props)){var ke=te(qe,ht,Pe);ht=ke.newCalculatedDate,Pe=ke.newCalculatedMonth}else Re=!0;dt++}return{newCalculatedDate:ht,newCalculatedMonth:Pe}};if(d===Ht.Enter){i.isMonthDisabled(m)||(i.onMonthClick(r,m),P==null||P(L));return}var Ce=oe(d,T,m),ae=Ce.newCalculatedDate,Ne=Ce.newCalculatedMonth;switch(d){case Ht.ArrowRight:case Ht.ArrowLeft:case Ht.ArrowUp:case Ht.ArrowDown:i.handleMonthNavigation(Ne,ae);break}}},i.getVerticalOffset=function(r){var d,m;return(m=(d=wm[r])===null||d===void 0?void 0:d.verticalNavigationOffset)!==null&&m!==void 0?m:0},i.onMonthKeyDown=function(r,d){var m=i.props,x=m.disabledKeyboardNavigation,c=m.handleOnMonthKeyDown,L=r.key;L!==Ht.Tab&&r.preventDefault(),x||i.handleKeyboardNavigation(r,L,d),c&&c(r)},i.onQuarterClick=function(r,d){var m=Dd(i.props.day,d);_f(m,i.props)||i.handleDayClick(jg(m),r)},i.onQuarterMouseEnter=function(r){var d=Dd(i.props.day,r);_f(d,i.props)||i.handleDayMouseEnter(jg(d))},i.handleQuarterNavigation=function(r,d){var m,x,c,L;i.isDisabled(d)||i.isExcluded(d)||((x=(m=i.props).setPreSelection)===null||x===void 0||x.call(m,d),(L=(c=i.QUARTER_REFS[r-1])===null||c===void 0?void 0:c.current)===null||L===void 0||L.focus())},i.onQuarterKeyDown=function(r,d){var m,x,c=r.key;if(!i.props.disabledKeyboardNavigation)switch(c){case Ht.Enter:i.onQuarterClick(r,d),(x=(m=i.props).setPreSelection)===null||x===void 0||x.call(m,i.props.selected);break;case Ht.ArrowRight:if(!i.props.preSelection)break;i.handleQuarterNavigation(d===4?1:d+1,b2(i.props.preSelection,1));break;case Ht.ArrowLeft:if(!i.props.preSelection)break;i.handleQuarterNavigation(d===1?4:d-1,V6(i.props.preSelection));break}},i.isMonthDisabledForLabelDate=function(r){var d,m=i.props,x=m.day,c=m.minDate,L=m.maxDate,T=m.excludeDates,P=m.includeDates,D=To(x,r);return{isDisabled:(d=(c||L||T||P)&&r4(D,i.props))!==null&&d!==void 0?d:!1,labelDate:D}},i.isMonthDisabled=function(r){var d=i.isMonthDisabledForLabelDate(r).isDisabled;return d},i.getMonthClassNames=function(r){var d=i.props,m=d.day,x=d.startDate,c=d.endDate,L=d.preSelection,T=d.monthClassName,P=T?T(To(m,r)):void 0,D=i.getSelection();return ji("react-datepicker__month-text","react-datepicker__month-".concat(r),P,{"react-datepicker__month-text--disabled":i.isMonthDisabled(r),"react-datepicker__month-text--selected":D?i.isSelectMonthInList(m,r,D):void 0,"react-datepicker__month-text--keyboard-selected":!i.props.disabledKeyboardNavigation&&L&&i.isSelectedMonth(m,r,L)&&!i.isMonthSelected()&&!i.isMonthDisabled(r),"react-datepicker__month-text--in-selecting-range":i.isInSelectingRangeMonth(r),"react-datepicker__month-text--in-range":x&&c?xf(x,c,r,m):void 0,"react-datepicker__month-text--range-start":i.isRangeStartMonth(r),"react-datepicker__month-text--range-end":i.isRangeEndMonth(r),"react-datepicker__month-text--selecting-range-start":i.isSelectingMonthRangeStart(r),"react-datepicker__month-text--selecting-range-end":i.isSelectingMonthRangeEnd(r),"react-datepicker__month-text--today":i.isCurrentMonth(m,r)})},i.getTabIndex=function(r){if(i.props.preSelection==null)return"-1";var d=Wi(i.props.preSelection),m=i.isMonthDisabledForLabelDate(d).isDisabled,x=r===d&&!(m||i.props.disabledKeyboardNavigation)?"0":"-1";return x},i.getQuarterTabIndex=function(r){if(i.props.preSelection==null)return"-1";var d=L1(i.props.preSelection),m=_f(i.props.day,i.props),x=r===d&&!(m||i.props.disabledKeyboardNavigation)?"0":"-1";return x},i.getAriaLabel=function(r){var d=i.props,m=d.chooseDayAriaLabelPrefix,x=m===void 0?"Choose":m,c=d.disabledDayAriaLabelPrefix,L=c===void 0?"Not available":c,T=d.day,P=d.locale,D=To(T,r),N=i.isDisabled(D)||i.isExcluded(D)?L:x;return"".concat(N," ").concat(Ar(D,"MMMM yyyy",P))},i.getQuarterClassNames=function(r){var d=i.props,m=d.day,x=d.startDate,c=d.endDate,L=d.selected,T=d.minDate,P=d.maxDate,D=d.excludeDates,N=d.includeDates,$=d.filterDate,U=d.preSelection,q=d.disabledKeyboardNavigation,H=(T||P||D||N||$)&&_f(Dd(m,r),i.props);return ji("react-datepicker__quarter-text","react-datepicker__quarter-".concat(r),{"react-datepicker__quarter-text--disabled":H,"react-datepicker__quarter-text--selected":L?i.isSelectedQuarter(m,r,L):void 0,"react-datepicker__quarter-text--keyboard-selected":!q&&U&&i.isSelectedQuarter(m,r,U)&&!H,"react-datepicker__quarter-text--in-selecting-range":i.isInSelectingRangeQuarter(r),"react-datepicker__quarter-text--in-range":x&&c?bf(x,c,r,m):void 0,"react-datepicker__quarter-text--range-start":i.isRangeStartQuarter(r),"react-datepicker__quarter-text--range-end":i.isRangeEndQuarter(r),"react-datepicker__quarter-text--today":i.isCurrentQuarter(m,r)})},i.getMonthContent=function(r){var d=i.props,m=d.showFullMonthYearPicker,x=d.renderMonthContent,c=d.locale,L=d.day,T=n4(r,c),P=N2(r,c);return x?x(r,T,P,L):m?P:T},i.getQuarterContent=function(r){var d,m=i.props,x=m.renderQuarterContent,c=m.locale,L=US(r,c);return(d=x==null?void 0:x(r,L))!==null&&d!==void 0?d:L},i.renderMonths=function(){var r,d=i.props,m=d.showTwoColumnMonthYearPicker,x=d.showFourColumnMonthYearPicker,c=d.day,L=d.selected,T=(r=wm[Xg(x,m)])===null||r===void 0?void 0:r.grid;return T==null?void 0:T.map(function(P,D){return Ze.createElement("div",{className:"react-datepicker__month-wrapper",key:D},P.map(function(N,$){return Ze.createElement("div",{ref:i.MONTH_REFS[N],key:$,onClick:function(U){i.onMonthClick(U,N)},onKeyDown:function(U){o4(U)&&(U.preventDefault(),U.key=Ht.Enter),i.onMonthKeyDown(U,N)},onMouseEnter:i.props.usePointerEvent?void 0:function(){return i.onMonthMouseEnter(N)},onPointerEnter:i.props.usePointerEvent?function(){return i.onMonthMouseEnter(N)}:void 0,tabIndex:Number(i.getTabIndex(N)),className:i.getMonthClassNames(N),"aria-disabled":i.isMonthDisabled(N),role:"option","aria-label":i.getAriaLabel(N),"aria-current":i.isCurrentMonth(c,N)?"date":void 0,"aria-selected":L?i.isSelectedMonth(c,N,L):void 0},i.getMonthContent(N))}))})},i.renderQuarters=function(){var r=i.props,d=r.day,m=r.selected,x=[1,2,3,4];return Ze.createElement("div",{className:"react-datepicker__quarter-wrapper"},x.map(function(c,L){return Ze.createElement("div",{key:L,ref:i.QUARTER_REFS[L],role:"option",onClick:function(T){i.onQuarterClick(T,c)},onKeyDown:function(T){i.onQuarterKeyDown(T,c)},onMouseEnter:i.props.usePointerEvent?void 0:function(){return i.onQuarterMouseEnter(c)},onPointerEnter:i.props.usePointerEvent?function(){return i.onQuarterMouseEnter(c)}:void 0,className:i.getQuarterClassNames(c),"aria-selected":m?i.isSelectedQuarter(d,c,m):void 0,tabIndex:Number(i.getQuarterTabIndex(c)),"aria-current":i.isCurrentQuarter(d,c)?"date":void 0},i.getQuarterContent(c))}))},i.getClassNames=function(){var r=i.props,d=r.selectingDate,m=r.selectsStart,x=r.selectsEnd,c=r.showMonthYearPicker,L=r.showQuarterYearPicker,T=r.showWeekPicker;return ji("react-datepicker__month",{"react-datepicker__month--selecting-range":d&&(m||x)},{"react-datepicker__monthPicker":c},{"react-datepicker__quarterPicker":L},{"react-datepicker__weekPicker":T})},i}return o.prototype.getSelection=function(){var i=this.props,r=i.selected,d=i.selectedDates,m=i.selectsMultiple;if(m)return d;if(r)return[r]},o.prototype.render=function(){var i=this.props,r=i.showMonthYearPicker,d=i.showQuarterYearPicker,m=i.day,x=i.ariaLabelPrefix,c=x===void 0?"Month ":x,L=c?c.trim()+" ":"",T=r||d;return T?Ze.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(L).concat(Ar(m,"MMMM, yyyy",this.props.locale)),role:"listbox"},r?this.renderMonths():this.renderQuarters()):Ze.createElement("div",{role:"table"},this.props.dayNamesHeader&&Ze.createElement("div",{role:"rowgroup"},this.props.dayNamesHeader),Ze.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(L).concat(Ar(m,"MMMM, yyyy",this.props.locale)),role:"rowgroup"},this.renderWeeks()))},o}(B.Component),aM=function(e){Oi(o,e);function o(){var i=e!==null&&e.apply(this,arguments)||this;return i.monthOptionButtonsRef={},i.isSelectedMonth=function(r){return i.props.month===r},i.handleOptionKeyDown=function(r,d){var m;switch(d.key){case"Enter":d.preventDefault(),i.onChange(r);break;case"Escape":d.preventDefault(),i.props.onCancel();break;case"ArrowUp":case"ArrowDown":{d.preventDefault();var x=(r+(d.key==="ArrowUp"?-1:1)+i.props.monthNames.length)%i.props.monthNames.length;(m=i.monthOptionButtonsRef[x])===null||m===void 0||m.focus();break}}},i.renderOptions=function(){return i.monthOptionButtonsRef={},i.props.monthNames.map(function(r,d){return Ze.createElement("div",{ref:function(m){i.monthOptionButtonsRef[d]=m,i.isSelectedMonth(d)&&(m==null||m.focus())},role:"button",tabIndex:0,className:i.isSelectedMonth(d)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:r,onClick:i.onChange.bind(i,d),onKeyDown:i.handleOptionKeyDown.bind(i,d),"aria-selected":i.isSelectedMonth(d)?"true":void 0},i.isSelectedMonth(d)?Ze.createElement("span",{className:"react-datepicker__month-option--selected"},"✓"):"",r)})},i.onChange=function(r){return i.props.onChange(r)},i.handleClickOutside=function(){return i.props.onCancel()},i}return o.prototype.render=function(){return Ze.createElement(T0,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},o}(B.Component),lM=function(e){Oi(o,e);function o(){var i=e!==null&&e.apply(this,arguments)||this;return i.state={dropdownVisible:!1},i.renderSelectOptions=function(r){return r.map(function(d,m){return Ze.createElement("option",{key:d,value:m},d)})},i.renderSelectMode=function(r){return Ze.createElement("select",{value:i.props.month,className:"react-datepicker__month-select",onChange:function(d){return i.onChange(parseInt(d.target.value))}},i.renderSelectOptions(r))},i.renderReadView=function(r,d){return Ze.createElement("button",{key:"read",type:"button",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:i.toggleDropdown},Ze.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),Ze.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},d[i.props.month]))},i.renderDropdown=function(r){return Ze.createElement(aM,Zn({key:"dropdown"},i.props,{monthNames:r,onChange:i.onChange,onCancel:i.toggleDropdown}))},i.renderScrollMode=function(r){var d=i.state.dropdownVisible,m=[i.renderReadView(!d,r)];return d&&m.unshift(i.renderDropdown(r)),m},i.onChange=function(r){i.toggleDropdown(),r!==i.props.month&&i.props.onChange(r)},i.toggleDropdown=function(){return i.setState({dropdownVisible:!i.state.dropdownVisible})},i}return o.prototype.render=function(){var i=this,r=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(m){return n4(m,i.props.locale)}:function(m){return N2(m,i.props.locale)}),d;switch(this.props.dropdownMode){case"scroll":d=this.renderScrollMode(r);break;case"select":d=this.renderSelectMode(r);break}return Ze.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},d)},o}(B.Component);function cM(e,o){for(var i=[],r=fc(e),d=fc(o);!wu(r,d);)i.push(ur(r)),r=ua(r,1);return i}var uM=function(e){Oi(o,e);function o(i){var r=e.call(this,i)||this;return r.renderOptions=function(){return r.state.monthYearsList.map(function(d){var m=r2(d),x=el(r.props.date,d)&&us(r.props.date,d);return Ze.createElement("div",{className:x?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:m,onClick:r.onChange.bind(r,m),"aria-selected":x?"true":void 0},x?Ze.createElement("span",{className:"react-datepicker__month-year-option--selected"},"✓"):"",Ar(d,r.props.dateFormat,r.props.locale))})},r.onChange=function(d){return r.props.onChange(d)},r.handleClickOutside=function(){r.props.onCancel()},r.state={monthYearsList:cM(r.props.minDate,r.props.maxDate)},r}return o.prototype.render=function(){var i=ji({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return Ze.createElement(T0,{className:i,onClickOutside:this.handleClickOutside},this.renderOptions())},o}(B.Component),dM=function(e){Oi(o,e);function o(){var i=e!==null&&e.apply(this,arguments)||this;return i.state={dropdownVisible:!1},i.renderSelectOptions=function(){for(var r=fc(i.props.minDate),d=fc(i.props.maxDate),m=[];!wu(r,d);){var x=r2(r);m.push(Ze.createElement("option",{key:x,value:x},Ar(r,i.props.dateFormat,i.props.locale))),r=ua(r,1)}return m},i.onSelectChange=function(r){i.onChange(parseInt(r.target.value))},i.renderSelectMode=function(){return Ze.createElement("select",{value:r2(fc(i.props.date)),className:"react-datepicker__month-year-select",onChange:i.onSelectChange},i.renderSelectOptions())},i.renderReadView=function(r){var d=Ar(i.props.date,i.props.dateFormat,i.props.locale);return Ze.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:i.toggleDropdown},Ze.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),Ze.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},d))},i.renderDropdown=function(){return Ze.createElement(uM,Zn({key:"dropdown"},i.props,{onChange:i.onChange,onCancel:i.toggleDropdown}))},i.renderScrollMode=function(){var r=i.state.dropdownVisible,d=[i.renderReadView(!r)];return r&&d.unshift(i.renderDropdown()),d},i.onChange=function(r){i.toggleDropdown();var d=ur(r);el(i.props.date,d)&&us(i.props.date,d)||i.props.onChange(d)},i.toggleDropdown=function(){return i.setState({dropdownVisible:!i.state.dropdownVisible})},i}return o.prototype.render=function(){var i;switch(this.props.dropdownMode){case"scroll":i=this.renderScrollMode();break;case"select":i=this.renderSelectMode();break}return Ze.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},i)},o}(B.Component),hM=function(e){Oi(o,e);function o(){var i=e!==null&&e.apply(this,arguments)||this;return i.state={height:null},i.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var r,d,m;i.list&&(i.list.scrollTop=(m=i.centerLi&&o.calcCenterPosition(i.props.monthRef?i.props.monthRef.clientHeight-((d=(r=i.header)===null||r===void 0?void 0:r.clientHeight)!==null&&d!==void 0?d:0):i.list.clientHeight,i.centerLi))!==null&&m!==void 0?m:0)})},i.handleClick=function(r){var d,m;(i.props.minTime||i.props.maxTime)&&$g(r,i.props)||(i.props.excludeTimes||i.props.includeTimes||i.props.filterTime)&&Bg(r,i.props)||(m=(d=i.props).onChange)===null||m===void 0||m.call(d,r)},i.isSelectedTime=function(r){return i.props.selected&&eM(i.props.selected,r)},i.isDisabledTime=function(r){return(i.props.minTime||i.props.maxTime)&&$g(r,i.props)||(i.props.excludeTimes||i.props.includeTimes||i.props.filterTime)&&Bg(r,i.props)},i.liClasses=function(r){var d,m=["react-datepicker__time-list-item",i.props.timeClassName?i.props.timeClassName(r):void 0];return i.isSelectedTime(r)&&m.push("react-datepicker__time-list-item--selected"),i.isDisabledTime(r)&&m.push("react-datepicker__time-list-item--disabled"),i.props.injectTimes&&(hc(r)*3600+pc(r)*60+xu(r))%(((d=i.props.intervals)!==null&&d!==void 0?d:o.defaultProps.intervals)*60)!==0&&m.push("react-datepicker__time-list-item--injected"),m.join(" ")},i.handleOnKeyDown=function(r,d){var m,x;r.key===Ht.Space&&(r.preventDefault(),r.key=Ht.Enter),(r.key===Ht.ArrowUp||r.key===Ht.ArrowLeft)&&r.target instanceof HTMLElement&&r.target.previousSibling&&(r.preventDefault(),r.target.previousSibling instanceof HTMLElement&&r.target.previousSibling.focus()),(r.key===Ht.ArrowDown||r.key===Ht.ArrowRight)&&r.target instanceof HTMLElement&&r.target.nextSibling&&(r.preventDefault(),r.target.nextSibling instanceof HTMLElement&&r.target.nextSibling.focus()),r.key===Ht.Enter&&i.handleClick(d),(x=(m=i.props).handleOnKeyDown)===null||x===void 0||x.call(m,r)},i.renderTimes=function(){for(var r,d=[],m=typeof i.props.format=="string"?i.props.format:"p",x=(r=i.props.intervals)!==null&&r!==void 0?r:o.defaultProps.intervals,c=i.props.selected||i.props.openToDate||ur(),L=Rf(c),T=i.props.injectTimes&&i.props.injectTimes.sort(function(H,G){return H.getTime()-G.getTime()}),P=60*JS(c),D=P/x,N=0;N<D;N++){var $=e2(L,N*x);if(d.push($),T){var U=QS(L,$,N,x,T);d=d.concat(U)}}var q=d.reduce(function(H,G){return G.getTime()<=c.getTime()?G:H},d[0]);return d.map(function(H){return Ze.createElement("li",{key:H.valueOf(),onClick:i.handleClick.bind(i,H),className:i.liClasses(H),ref:function(G){H===q&&(i.centerLi=G)},onKeyDown:function(G){i.handleOnKeyDown(G,H)},tabIndex:H===q?0:-1,role:"option","aria-selected":i.isSelectedTime(H)?"true":void 0,"aria-disabled":i.isDisabledTime(H)?"true":void 0},Ar(H,m,i.props.locale))})},i.renderTimeCaption=function(){return i.props.showTimeCaption===!1?Ze.createElement(Ze.Fragment,null):Ze.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(i.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(r){i.header=r}},Ze.createElement("div",{className:"react-datepicker-time__header"},i.props.timeCaption))},i}return Object.defineProperty(o,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),o.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},o.prototype.componentWillUnmount=function(){var i;(i=this.resizeObserver)===null||i===void 0||i.disconnect()},o.prototype.observeDatePickerHeightChanges=function(){var i=this,r=this.props.monthRef;this.updateContainerHeight(),r&&(this.resizeObserver=new ResizeObserver(function(){i.updateContainerHeight()}),this.resizeObserver.observe(r))},o.prototype.updateContainerHeight=function(){this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},o.prototype.render=function(){var i=this,r,d=this.state.height;return Ze.createElement("div",{className:"react-datepicker__time-container ".concat(((r=this.props.todayButton)!==null&&r!==void 0?r:o.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),Ze.createElement("div",{className:"react-datepicker__time"},Ze.createElement("div",{className:"react-datepicker__time-box"},Ze.createElement("ul",{className:"react-datepicker__time-list",ref:function(m){i.list=m},style:d?{height:d}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},o.calcCenterPosition=function(i,r){return r.offsetTop-(i/2-r.clientHeight/2)},o}(B.Component),Kg=3,pM=function(e){Oi(o,e);function o(i){var r=e.call(this,i)||this;return r.YEAR_REFS=sl([],Array(r.props.yearItemNumber),!0).map(function(){return B.createRef()}),r.isDisabled=function(d){return ko(d,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(d){return R2(d,{excludeDates:r.props.excludeDates})},r.selectingDate=function(){var d;return(d=r.props.selectingDate)!==null&&d!==void 0?d:r.props.preSelection},r.updateFocusOnPaginate=function(d){var m=function(){var x,c;(c=(x=r.YEAR_REFS[d])===null||x===void 0?void 0:x.current)===null||c===void 0||c.focus()};window.requestAnimationFrame(m)},r.handleYearClick=function(d,m){r.props.onDayClick&&r.props.onDayClick(d,m)},r.handleYearNavigation=function(d,m){var x,c,L,T,P=r.props,D=P.date,N=P.yearItemNumber;if(!(D===void 0||N===void 0)){var $=lc(D,N).startPeriod;r.isDisabled(m)||r.isExcluded(m)||((c=(x=r.props).setPreSelection)===null||c===void 0||c.call(x,m),d-$<0?r.updateFocusOnPaginate(N-($-d)):d-$>=N?r.updateFocusOnPaginate(Math.abs(N-(d-$))):(T=(L=r.YEAR_REFS[d-$])===null||L===void 0?void 0:L.current)===null||T===void 0||T.focus())}},r.isSameDay=function(d,m){return Un(d,m)},r.isCurrentYear=function(d){return d===On(ur())},r.isRangeStart=function(d){return r.props.startDate&&r.props.endDate&&el(Qa(ur(),d),r.props.startDate)},r.isRangeEnd=function(d){return r.props.startDate&&r.props.endDate&&el(Qa(ur(),d),r.props.endDate)},r.isInRange=function(d){return wf(d,r.props.startDate,r.props.endDate)},r.isInSelectingRange=function(d){var m=r.props,x=m.selectsStart,c=m.selectsEnd,L=m.selectsRange,T=m.startDate,P=m.endDate;return!(x||c||L)||!r.selectingDate()?!1:x&&P?wf(d,r.selectingDate(),P):c&&T||L&&T&&!P?wf(d,T,r.selectingDate()):!1},r.isSelectingRangeStart=function(d){var m;if(!r.isInSelectingRange(d))return!1;var x=r.props,c=x.startDate,L=x.selectsStart,T=Qa(ur(),d);return L?el(T,(m=r.selectingDate())!==null&&m!==void 0?m:null):el(T,c??null)},r.isSelectingRangeEnd=function(d){var m;if(!r.isInSelectingRange(d))return!1;var x=r.props,c=x.endDate,L=x.selectsEnd,T=x.selectsRange,P=Qa(ur(),d);return L||T?el(P,(m=r.selectingDate())!==null&&m!==void 0?m:null):el(P,c??null)},r.isKeyboardSelected=function(d){if(!(r.props.disabledKeyboardNavigation||r.props.date===void 0||r.props.preSelection==null)){var m=r.props,x=m.minDate,c=m.maxDate,L=m.excludeDates,T=m.includeDates,P=m.filterDate,D=m.selected,N=ep(Qa(r.props.date,d)),$=(x||c||L||T||P)&&Af(d,r.props),U=!!D&&Un(N,ep(D)),q=Un(N,ep(r.props.preSelection));return!r.props.inline&&!U&&q&&!$}},r.isSelectedYear=function(d){var m=r.props,x=m.selectsMultiple,c=m.selected,L=m.selectedDates;return x?L==null?void 0:L.some(function(T){return d===On(T)}):!!c&&d===On(c)},r.onYearClick=function(d,m){var x=r.props.date;x!==void 0&&r.handleYearClick(ep(Qa(x,m)),d)},r.onYearKeyDown=function(d,m){var x,c,L=d.key,T=r.props,P=T.date,D=T.yearItemNumber,N=T.handleOnKeyDown;if(L!==Ht.Tab&&d.preventDefault(),!r.props.disabledKeyboardNavigation)switch(L){case Ht.Enter:if(r.props.selected==null)break;r.onYearClick(d,m),(c=(x=r.props).setPreSelection)===null||c===void 0||c.call(x,r.props.selected);break;case Ht.ArrowRight:if(r.props.preSelection==null)break;r.handleYearNavigation(m+1,uc(r.props.preSelection,1));break;case Ht.ArrowLeft:if(r.props.preSelection==null)break;r.handleYearNavigation(m-1,Vd(r.props.preSelection,1));break;case Ht.ArrowUp:{if(P===void 0||D===void 0||r.props.preSelection==null)break;var $=lc(P,D).startPeriod,U=Kg,q=m-U;if(q<$){var H=D%U;m>=$&&m<$+H?U=H:U+=H,q=m-U}r.handleYearNavigation(q,Vd(r.props.preSelection,U));break}case Ht.ArrowDown:{if(P===void 0||D===void 0||r.props.preSelection==null)break;var G=lc(P,D).endPeriod,U=Kg,q=m+U;if(q>G){var H=D%U;m<=G&&m>G-H?U=H:U+=H,q=m+U}r.handleYearNavigation(q,uc(r.props.preSelection,U));break}}N&&N(d)},r.getYearClassNames=function(d){var m=r.props,x=m.date,c=m.minDate,L=m.maxDate,T=m.excludeDates,P=m.includeDates,D=m.filterDate,N=m.yearClassName;return ji("react-datepicker__year-text","react-datepicker__year-".concat(d),x?N==null?void 0:N(Qa(x,d)):void 0,{"react-datepicker__year-text--selected":r.isSelectedYear(d),"react-datepicker__year-text--disabled":(c||L||T||P||D)&&Af(d,r.props),"react-datepicker__year-text--keyboard-selected":r.isKeyboardSelected(d),"react-datepicker__year-text--range-start":r.isRangeStart(d),"react-datepicker__year-text--range-end":r.isRangeEnd(d),"react-datepicker__year-text--in-range":r.isInRange(d),"react-datepicker__year-text--in-selecting-range":r.isInSelectingRange(d),"react-datepicker__year-text--selecting-range-start":r.isSelectingRangeStart(d),"react-datepicker__year-text--selecting-range-end":r.isSelectingRangeEnd(d),"react-datepicker__year-text--today":r.isCurrentYear(d)})},r.getYearTabIndex=function(d){if(r.props.disabledKeyboardNavigation||r.props.preSelection==null)return"-1";var m=On(r.props.preSelection),x=Af(d,r.props);return d===m&&!x?"0":"-1"},r.getYearContent=function(d){return r.props.renderYearContent?r.props.renderYearContent(d):d},r}return o.prototype.render=function(){var i=this,r=[],d=this.props,m=d.date,x=d.yearItemNumber,c=d.onYearMouseEnter,L=d.onYearMouseLeave;if(m===void 0)return null;for(var T=lc(m,x),P=T.startPeriod,D=T.endPeriod,N=function(q){r.push(Ze.createElement("div",{ref:$.YEAR_REFS[q-P],onClick:function(H){i.onYearClick(H,q)},onKeyDown:function(H){o4(H)&&(H.preventDefault(),H.key=Ht.Enter),i.onYearKeyDown(H,q)},tabIndex:Number($.getYearTabIndex(q)),className:$.getYearClassNames(q),onMouseEnter:$.props.usePointerEvent?void 0:function(H){return c(H,q)},onPointerEnter:$.props.usePointerEvent?function(H){return c(H,q)}:void 0,onMouseLeave:$.props.usePointerEvent?void 0:function(H){return L(H,q)},onPointerLeave:$.props.usePointerEvent?function(H){return L(H,q)}:void 0,key:q,"aria-current":$.isCurrentYear(q)?"date":void 0},$.getYearContent(q)))},$=this,U=P;U<=D;U++)N(U);return Ze.createElement("div",{className:"react-datepicker__year"},Ze.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},r))},o}(B.Component);function fM(e,o,i,r){for(var d=[],m=0;m<2*o+1;m++){var x=e+o-m,c=!0;i&&(c=On(i)<=x),r&&c&&(c=On(r)>=x),c&&d.push(x)}return d}var mM=function(e){Oi(o,e);function o(i){var r=e.call(this,i)||this;r.yearOptionButtonsRef={},r.handleOptionKeyDown=function(c,L){var T;switch(L.key){case"Enter":L.preventDefault(),r.onChange(c);break;case"Escape":L.preventDefault(),r.props.onCancel();break;case"ArrowUp":case"ArrowDown":{L.preventDefault();var P=c+(L.key==="ArrowUp"?1:-1);r.yearOptionButtonsRef[P]&&((T=r.yearOptionButtonsRef[P])===null||T===void 0||T.focus());break}}},r.renderOptions=function(){r.yearOptionButtonsRef={};var c=r.props.year,L=r.state.yearsList.map(function(D){return Ze.createElement("div",{ref:function(N){r.yearOptionButtonsRef[D]=N,D===c&&(N==null||N.focus())},role:"button",tabIndex:0,className:c===D?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:D,onClick:r.onChange.bind(r,D),onKeyDown:r.handleOptionKeyDown.bind(r,D),"aria-selected":c===D?"true":void 0},c===D?Ze.createElement("span",{className:"react-datepicker__year-option--selected"},"✓"):"",D)}),T=r.props.minDate?On(r.props.minDate):null,P=r.props.maxDate?On(r.props.maxDate):null;return(!P||!r.state.yearsList.find(function(D){return D===P}))&&L.unshift(Ze.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:r.incrementYears},Ze.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!T||!r.state.yearsList.find(function(D){return D===T}))&&L.push(Ze.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:r.decrementYears},Ze.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),L},r.onChange=function(c){r.props.onChange(c)},r.handleClickOutside=function(){r.props.onCancel()},r.shiftYears=function(c){var L=r.state.yearsList.map(function(T){return T+c});r.setState({yearsList:L})},r.incrementYears=function(){return r.shiftYears(1)},r.decrementYears=function(){return r.shiftYears(-1)};var d=i.yearDropdownItemNumber,m=i.scrollableYearDropdown,x=d||(m?10:5);return r.state={yearsList:fM(r.props.year,x,r.props.minDate,r.props.maxDate)},r.dropdownRef=B.createRef(),r}return o.prototype.componentDidMount=function(){var i=this.dropdownRef.current;if(i){var r=i.children?Array.from(i.children):null,d=r?r.find(function(m){return m.ariaSelected}):null;i.scrollTop=d&&d instanceof HTMLElement?d.offsetTop+(d.clientHeight-i.clientHeight)/2:(i.scrollHeight-i.clientHeight)/2}},o.prototype.render=function(){var i=ji({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return Ze.createElement(T0,{className:i,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},o}(B.Component),gM=function(e){Oi(o,e);function o(){var i=e!==null&&e.apply(this,arguments)||this;return i.state={dropdownVisible:!1},i.renderSelectOptions=function(){for(var r=i.props.minDate?On(i.props.minDate):1900,d=i.props.maxDate?On(i.props.maxDate):2100,m=[],x=r;x<=d;x++)m.push(Ze.createElement("option",{key:x,value:x},x));return m},i.onSelectChange=function(r){i.onChange(parseInt(r.target.value))},i.renderSelectMode=function(){return Ze.createElement("select",{value:i.props.year,className:"react-datepicker__year-select",onChange:i.onSelectChange},i.renderSelectOptions())},i.renderReadView=function(r){return Ze.createElement("button",{key:"read",type:"button",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:i.toggleDropdown},Ze.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),Ze.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},i.props.year))},i.renderDropdown=function(){return Ze.createElement(mM,Zn({key:"dropdown"},i.props,{onChange:i.onChange,onCancel:i.toggleDropdown}))},i.renderScrollMode=function(){var r=i.state.dropdownVisible,d=[i.renderReadView(!r)];return r&&d.unshift(i.renderDropdown()),d},i.onChange=function(r){i.toggleDropdown(),r!==i.props.year&&i.props.onChange(r)},i.toggleDropdown=function(r){i.setState({dropdownVisible:!i.state.dropdownVisible},function(){i.props.adjustDateOnChange&&i.handleYearChange(i.props.date,r)})},i.handleYearChange=function(r,d){var m;(m=i.onSelect)===null||m===void 0||m.call(i,r,d),i.setOpen()},i.onSelect=function(r,d){var m,x;(x=(m=i.props).onSelect)===null||x===void 0||x.call(m,r,d)},i.setOpen=function(){var r,d;(d=(r=i.props).setOpen)===null||d===void 0||d.call(r,!0)},i}return o.prototype.render=function(){var i;switch(this.props.dropdownMode){case"scroll":i=this.renderScrollMode();break;case"select":i=this.renderSelectMode();break}return Ze.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},i)},o}(B.Component),yM=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],a4="react-datepicker-ignore-onclickoutside",vM=function(e){var o=(e.className||"").split(/\s+/);return yM.some(function(i){return o.indexOf(i)>=0})},xM=function(e){Oi(o,e);function o(i){var r=e.call(this,i)||this;return r.monthContainer=void 0,r.handleClickOutside=function(d){r.props.onClickOutside(d)},r.setClickOutsideRef=function(){return r.containerRef.current},r.handleDropdownFocus=function(d){var m,x;vM(d.target)&&((x=(m=r.props).onDropdownFocus)===null||x===void 0||x.call(m,d))},r.getDateInView=function(){var d=r.props,m=d.preSelection,x=d.selected,c=d.openToDate,L=i4(r.props),T=s4(r.props),P=ur(),D=c||x||m;return D||(L&&il(P,L)?L:T&&wu(P,T)?T:P)},r.increaseMonth=function(){r.setState(function(d){var m=d.date;return{date:ua(m,1)}},function(){return r.handleMonthChange(r.state.date)})},r.decreaseMonth=function(){r.setState(function(d){var m=d.date;return{date:T1(m,1)}},function(){return r.handleMonthChange(r.state.date)})},r.handleDayClick=function(d,m,x){r.props.onSelect(d,m,x),r.props.setPreSelection&&r.props.setPreSelection(d)},r.handleDayMouseEnter=function(d){r.setState({selectingDate:d}),r.props.onDayMouseEnter&&r.props.onDayMouseEnter(d)},r.handleMonthMouseLeave=function(){r.setState({selectingDate:void 0}),r.props.onMonthMouseLeave&&r.props.onMonthMouseLeave()},r.handleYearMouseEnter=function(d,m){r.setState({selectingDate:Qa(ur(),m)}),r.props.onYearMouseEnter&&r.props.onYearMouseEnter(d,m)},r.handleYearMouseLeave=function(d,m){r.props.onYearMouseLeave&&r.props.onYearMouseLeave(d,m)},r.handleYearChange=function(d){var m,x,c,L;(x=(m=r.props).onYearChange)===null||x===void 0||x.call(m,d),r.setState({isRenderAriaLiveMessage:!0}),r.props.adjustDateOnChange&&(r.props.onSelect(d),(L=(c=r.props).setOpen)===null||L===void 0||L.call(c,!0)),r.props.setPreSelection&&r.props.setPreSelection(d)},r.getEnabledPreSelectionDateForMonth=function(d){if(!ko(d,r.props))return d;for(var m=fc(d),x=BS(d),c=K_(x,m),L=null,T=0;T<=c;T++){var P=ca(m,T);if(!ko(P,r.props)){L=P;break}}return L},r.handleMonthChange=function(d){var m,x,c,L=(m=r.getEnabledPreSelectionDateForMonth(d))!==null&&m!==void 0?m:d;r.handleCustomMonthChange(L),r.props.adjustDateOnChange&&(r.props.onSelect(L),(c=(x=r.props).setOpen)===null||c===void 0||c.call(x,!0)),r.props.setPreSelection&&r.props.setPreSelection(L)},r.handleCustomMonthChange=function(d){var m,x;(x=(m=r.props).onMonthChange)===null||x===void 0||x.call(m,d),r.setState({isRenderAriaLiveMessage:!0})},r.handleMonthYearChange=function(d){r.handleYearChange(d),r.handleMonthChange(d)},r.changeYear=function(d){r.setState(function(m){var x=m.date;return{date:Qa(x,Number(d))}},function(){return r.handleYearChange(r.state.date)})},r.changeMonth=function(d){r.setState(function(m){var x=m.date;return{date:To(x,Number(d))}},function(){return r.handleMonthChange(r.state.date)})},r.changeMonthYear=function(d){r.setState(function(m){var x=m.date;return{date:Qa(To(x,Wi(d)),On(d))}},function(){return r.handleMonthYearChange(r.state.date)})},r.header=function(d){d===void 0&&(d=r.state.date);var m=_u(d,r.props.locale,r.props.calendarStartDay),x=[];return r.props.showWeekNumbers&&x.push(Ze.createElement("div",{key:"W",className:"react-datepicker__day-name",role:"columnheader"},Ze.createElement("span",{className:"react-datepicker__sr-only"},"Week number"),Ze.createElement("span",{"aria-hidden":"true"},r.props.weekLabel||"#"))),x.concat([0,1,2,3,4,5,6].map(function(c){var L=ca(m,c),T=r.formatWeekday(L,r.props.locale),P=r.props.weekDayClassName?r.props.weekDayClassName(L):void 0;return Ze.createElement("div",{key:c,role:"columnheader",className:ji("react-datepicker__day-name",P)},Ze.createElement("span",{className:"react-datepicker__sr-only"},Ar(L,"EEEE",r.props.locale)),Ze.createElement("span",{"aria-hidden":"true"},T))}))},r.formatWeekday=function(d,m){return r.props.formatWeekDay?$S(d,r.props.formatWeekDay,m):r.props.useWeekdaysShort?HS(d,m):VS(d,m)},r.decreaseYear=function(){r.setState(function(d){var m,x=d.date;return{date:Vd(x,r.props.showYearPicker?(m=r.props.yearItemNumber)!==null&&m!==void 0?m:o.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.clearSelectingDate=function(){r.setState({selectingDate:void 0})},r.renderPreviousButton=function(){var d,m,x;if(!r.props.renderCustomHeader){var c=(d=r.props.monthsShown)!==null&&d!==void 0?d:o.defaultProps.monthsShown,L=r.props.showPreviousMonths?c-1:0,T=(m=r.props.monthSelectedIn)!==null&&m!==void 0?m:L,P=T1(r.state.date,T),D;switch(!0){case r.props.showMonthYearPicker:D=Ug(r.state.date,r.props);break;case r.props.showYearPicker:D=GS(r.state.date,r.props);break;case r.props.showQuarterYearPicker:D=qS(r.state.date,r.props);break;default:D=Vg(P,r.props);break}if(!(!((x=r.props.forceShowMonthNavigation)!==null&&x!==void 0?x:o.defaultProps.forceShowMonthNavigation)&&!r.props.showDisabledMonthNavigation&&D||r.props.showTimeSelectOnly)){var N=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],$=["react-datepicker__navigation","react-datepicker__navigation--previous"],U=r.decreaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(U=r.decreaseYear),D&&r.props.showDisabledMonthNavigation&&($.push("react-datepicker__navigation--previous--disabled"),U=void 0);var q=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,H=r.props,G=H.previousMonthButtonLabel,te=G===void 0?o.defaultProps.previousMonthButtonLabel:G,oe=H.previousYearButtonLabel,Ce=oe===void 0?o.defaultProps.previousYearButtonLabel:oe,ae=r.props,Ne=ae.previousMonthAriaLabel,Fe=Ne===void 0?typeof te=="string"?te:"Previous Month":Ne,ye=ae.previousYearAriaLabel,Ke=ye===void 0?typeof Ce=="string"?Ce:"Previous Year":ye;return Ze.createElement("button",{type:"button",className:$.join(" "),onClick:U,onKeyDown:r.props.handleOnKeyDown,"aria-label":q?Ke:Fe},Ze.createElement("span",{className:N.join(" ")},q?Ce:te))}}},r.increaseYear=function(){r.setState(function(d){var m,x=d.date;return{date:uc(x,r.props.showYearPicker?(m=r.props.yearItemNumber)!==null&&m!==void 0?m:o.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.renderNextButton=function(){var d;if(!r.props.renderCustomHeader){var m;switch(!0){case r.props.showMonthYearPicker:m=Zg(r.state.date,r.props);break;case r.props.showYearPicker:m=YS(r.state.date,r.props);break;case r.props.showQuarterYearPicker:m=WS(r.state.date,r.props);break;default:m=Hg(r.state.date,r.props);break}if(!(!((d=r.props.forceShowMonthNavigation)!==null&&d!==void 0?d:o.defaultProps.forceShowMonthNavigation)&&!r.props.showDisabledMonthNavigation&&m||r.props.showTimeSelectOnly)){var x=["react-datepicker__navigation","react-datepicker__navigation--next"],c=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];r.props.showTimeSelect&&x.push("react-datepicker__navigation--next--with-time"),r.props.todayButton&&x.push("react-datepicker__navigation--next--with-today-button");var L=r.increaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(L=r.increaseYear),m&&r.props.showDisabledMonthNavigation&&(x.push("react-datepicker__navigation--next--disabled"),L=void 0);var T=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,P=r.props,D=P.nextMonthButtonLabel,N=D===void 0?o.defaultProps.nextMonthButtonLabel:D,$=P.nextYearButtonLabel,U=$===void 0?o.defaultProps.nextYearButtonLabel:$,q=r.props,H=q.nextMonthAriaLabel,G=H===void 0?typeof N=="string"?N:"Next Month":H,te=q.nextYearAriaLabel,oe=te===void 0?typeof U=="string"?U:"Next Year":te;return Ze.createElement("button",{type:"button",className:x.join(" "),onClick:L,onKeyDown:r.props.handleOnKeyDown,"aria-label":T?oe:G},Ze.createElement("span",{className:c.join(" ")},T?U:N))}}},r.renderCurrentMonth=function(d){d===void 0&&(d=r.state.date);var m=["react-datepicker__current-month"];return r.props.showYearDropdown&&m.push("react-datepicker__current-month--hasYearDropdown"),r.props.showMonthDropdown&&m.push("react-datepicker__current-month--hasMonthDropdown"),r.props.showMonthYearDropdown&&m.push("react-datepicker__current-month--hasMonthYearDropdown"),Ze.createElement("h2",{className:m.join(" ")},Ar(d,r.props.dateFormat,r.props.locale))},r.renderYearDropdown=function(d){if(d===void 0&&(d=!1),!(!r.props.showYearDropdown||d))return Ze.createElement(gM,Zn({},o.defaultProps,r.props,{date:r.state.date,onChange:r.changeYear,year:On(r.state.date)}))},r.renderMonthDropdown=function(d){if(d===void 0&&(d=!1),!(!r.props.showMonthDropdown||d))return Ze.createElement(lM,Zn({},o.defaultProps,r.props,{month:Wi(r.state.date),onChange:r.changeMonth}))},r.renderMonthYearDropdown=function(d){if(d===void 0&&(d=!1),!(!r.props.showMonthYearDropdown||d))return Ze.createElement(dM,Zn({},o.defaultProps,r.props,{date:r.state.date,onChange:r.changeMonthYear}))},r.handleTodayButtonClick=function(d){r.props.onSelect(Og(),d),r.props.setPreSelection&&r.props.setPreSelection(Og())},r.renderTodayButton=function(){if(!(!r.props.todayButton||r.props.showTimeSelectOnly))return Ze.createElement("div",{className:"react-datepicker__today-button",onClick:r.handleTodayButtonClick},r.props.todayButton)},r.renderDayNamesHeader=function(d){return Ze.createElement("div",{className:"react-datepicker__day-names",role:"row"},r.header(d))},r.renderDefaultHeader=function(d){var m=d.monthDate,x=d.i;return Ze.createElement("div",{className:"react-datepicker__header ".concat(r.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},r.renderCurrentMonth(m),Ze.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(r.props.dropdownMode),onFocus:r.handleDropdownFocus},r.renderMonthDropdown(x!==0),r.renderMonthYearDropdown(x!==0),r.renderYearDropdown(x!==0)))},r.renderCustomHeader=function(d){var m,x,c=d.monthDate,L=d.i;if(r.props.showTimeSelect&&!r.state.monthContainer||r.props.showTimeSelectOnly)return null;var T=r.props,P=T.showYearPicker,D=T.yearItemNumber,N;if(P){var $=lc(c,D),U=$.startPeriod,q=$.endPeriod;N={startYear:U,endYear:q}}var H=Vg(r.state.date,r.props),G=Hg(r.state.date,r.props),te=Ug(r.state.date,r.props),oe=Zg(r.state.date,r.props);return Ze.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:r.props.onDropdownFocus},(x=(m=r.props).renderCustomHeader)===null||x===void 0?void 0:x.call(m,Zn(Zn(Zn({},r.state),P&&{visibleYearsRange:N}),{customHeaderCount:L,monthDate:c,changeMonth:r.changeMonth,changeYear:r.changeYear,decreaseMonth:r.decreaseMonth,increaseMonth:r.increaseMonth,decreaseYear:r.decreaseYear,increaseYear:r.increaseYear,prevMonthButtonDisabled:H,nextMonthButtonDisabled:G,prevYearButtonDisabled:te,nextYearButtonDisabled:oe})))},r.renderYearHeader=function(d){var m=d.monthDate,x=r.props,c=x.showYearPicker,L=x.yearItemNumber,T=L===void 0?o.defaultProps.yearItemNumber:L,P=lc(m,T),D=P.startPeriod,N=P.endPeriod;return Ze.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},c?"".concat(D," - ").concat(N):On(m))},r.renderHeader=function(d){var m=d.monthDate,x=d.i,c=x===void 0?0:x,L={monthDate:m,i:c};switch(!0){case r.props.renderCustomHeader!==void 0:return r.renderCustomHeader(L);case(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker):return r.renderYearHeader(L);default:return r.renderDefaultHeader(L)}},r.renderMonths=function(){var d,m;if(!(r.props.showTimeSelectOnly||r.props.showYearPicker)){for(var x=[],c=(d=r.props.monthsShown)!==null&&d!==void 0?d:o.defaultProps.monthsShown,L=r.props.showPreviousMonths?c-1:0,T=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?uc(r.state.date,L):T1(r.state.date,L),P=(m=r.props.monthSelectedIn)!==null&&m!==void 0?m:L,D=0;D<c;++D){var N=D-P+L,$=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?uc(T,N):ua(T,N),U="month-".concat(D),q=D<c-1,H=D>0;x.push(Ze.createElement("div",{key:U,ref:function(G){r.monthContainer=G??void 0},className:"react-datepicker__month-container"},r.renderHeader({monthDate:$,i:D}),Ze.createElement(oM,Zn({},o.defaultProps,r.props,{containerRef:r.containerRef,ariaLabelPrefix:r.props.monthAriaLabelPrefix,day:$,onDayClick:r.handleDayClick,handleOnKeyDown:r.props.handleOnDayKeyDown,handleOnMonthKeyDown:r.props.handleOnKeyDown,onDayMouseEnter:r.handleDayMouseEnter,onMouseLeave:r.handleMonthMouseLeave,orderInDisplay:D,selectingDate:r.state.selectingDate,monthShowsDuplicateDaysEnd:q,monthShowsDuplicateDaysStart:H,dayNamesHeader:r.renderDayNamesHeader($)}))))}return x}},r.renderYears=function(){if(!r.props.showTimeSelectOnly&&r.props.showYearPicker)return Ze.createElement("div",{className:"react-datepicker__year--container"},r.renderHeader({monthDate:r.state.date}),Ze.createElement(pM,Zn({},o.defaultProps,r.props,{selectingDate:r.state.selectingDate,date:r.state.date,onDayClick:r.handleDayClick,clearSelectingDate:r.clearSelectingDate,onYearMouseEnter:r.handleYearMouseEnter,onYearMouseLeave:r.handleYearMouseLeave})))},r.renderTimeSection=function(){if(r.props.showTimeSelect&&(r.state.monthContainer||r.props.showTimeSelectOnly))return Ze.createElement(hM,Zn({},o.defaultProps,r.props,{onChange:r.props.onTimeChange,format:r.props.timeFormat,intervals:r.props.timeIntervals,monthRef:r.state.monthContainer}))},r.renderInputTimeSection=function(){var d=r.props.selected?new Date(r.props.selected):void 0,m=d&&k0(d)&&!!r.props.selected,x=m?"".concat(Wg(d.getHours()),":").concat(Wg(d.getMinutes())):"";if(r.props.showTimeInput)return Ze.createElement(tM,Zn({},o.defaultProps,r.props,{date:d,timeString:x,onChange:r.props.onTimeChange}))},r.renderAriaLiveRegion=function(){var d,m=lc(r.state.date,(d=r.props.yearItemNumber)!==null&&d!==void 0?d:o.defaultProps.yearItemNumber),x=m.startPeriod,c=m.endPeriod,L;return r.props.showYearPicker?L="".concat(x," - ").concat(c):r.props.showMonthYearPicker||r.props.showQuarterYearPicker?L=On(r.state.date):L="".concat(N2(Wi(r.state.date),r.props.locale)," ").concat(On(r.state.date)),Ze.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},r.state.isRenderAriaLiveMessage&&L)},r.renderChildren=function(){if(r.props.children)return Ze.createElement("div",{className:"react-datepicker__children-container"},r.props.children)},r.containerRef=B.createRef(),r.state={date:r.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},r}return Object.defineProperty(o,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,outsideClickIgnoreClass:a4,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:wp}},enumerable:!1,configurable:!0}),o.prototype.componentDidMount=function(){var i=this;this.props.showTimeSelect&&(this.assignMonthContainer=function(){i.setState({monthContainer:i.monthContainer})}())},o.prototype.componentDidUpdate=function(i){var r=this;if(this.props.preSelection&&(!Un(this.props.preSelection,i.preSelection)||this.props.monthSelectedIn!==i.monthSelectedIn)){var d=!us(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return d&&r.handleCustomMonthChange(r.state.date)})}else this.props.openToDate&&!Un(this.props.openToDate,i.openToDate)&&this.setState({date:this.props.openToDate})},o.prototype.render=function(){var i=this.props.container||NS;return Ze.createElement(T0,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},Ze.createElement("div",{style:{display:"contents"},ref:this.containerRef},Ze.createElement(i,{className:ji("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},o}(B.Component),_M=function(e){var o=e.icon,i=e.className,r=i===void 0?"":i,d=e.onClick,m="react-datepicker__calendar-icon";if(typeof o=="string")return Ze.createElement("i",{className:"".concat(m," ").concat(o," ").concat(r),"aria-hidden":"true",onClick:d});if(Ze.isValidElement(o)){var x=o;return Ze.cloneElement(x,{className:"".concat(x.props.className||""," ").concat(m," ").concat(r),onClick:function(c){typeof x.props.onClick=="function"&&x.props.onClick(c),typeof d=="function"&&d(c)}})}return Ze.createElement("svg",{className:"".concat(m," ").concat(r),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:d},Ze.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},l4=function(e){Oi(o,e);function o(i){var r=e.call(this,i)||this;return r.portalRoot=null,r.el=document.createElement("div"),r}return o.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},o.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},o.prototype.render=function(){return f8.createPortal(this.props.children,this.el)},o}(B.Component),wM="[tabindex], a, button, input, select, textarea",bM=function(e){return(e instanceof HTMLAnchorElement||!e.disabled)&&e.tabIndex!==-1},c4=function(e){Oi(o,e);function o(i){var r=e.call(this,i)||this;return r.getTabChildren=function(){var d;return Array.prototype.slice.call((d=r.tabLoopRef.current)===null||d===void 0?void 0:d.querySelectorAll(wM),1,-1).filter(bM)},r.handleFocusStart=function(){var d=r.getTabChildren();d&&d.length>1&&d[d.length-1].focus()},r.handleFocusEnd=function(){var d=r.getTabChildren();d&&d.length>1&&d[0].focus()},r.tabLoopRef=B.createRef(),r}return o.prototype.render=function(){var i;return((i=this.props.enableTabLoop)!==null&&i!==void 0?i:o.defaultProps.enableTabLoop)?Ze.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},Ze.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,Ze.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},o.defaultProps={enableTabLoop:!0},o}(B.Component);function CM(e){function o(i){var r,d=typeof i.hidePopper=="boolean"?i.hidePopper:!0,m=B.useRef(null),x=IS(Zn({open:!d,whileElementsMounted:uS,placement:i.popperPlacement,middleware:sl([xS({padding:15}),vS(10),_S({element:m})],(r=i.popperModifiers)!==null&&r!==void 0?r:[],!0)},i.popperProps)),c=Zn(Zn({},i),{hidePopper:d,popperProps:Zn(Zn({},x),{arrowRef:m})});return Ze.createElement(e,Zn({},c))}return o.displayName="withFloating(".concat(e.displayName||e.name||"Component",")"),o}var SM=function(e){var o=e.className,i=e.wrapperClassName,r=e.hidePopper,d=r===void 0?!0:r,m=e.popperComponent,x=e.targetComponent,c=e.enableTabLoop,L=e.popperOnKeyDown,T=e.portalId,P=e.portalHost,D=e.popperProps,N=e.showArrow,$=void 0;if(!d){var U=ji("react-datepicker-popper",o);$=Ze.createElement(c4,{enableTabLoop:c},Ze.createElement("div",{ref:D.refs.setFloating,style:D.floatingStyles,className:U,"data-placement":D.placement,onKeyDown:L},m,N&&Ze.createElement(MS,{ref:D.arrowRef,context:D.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}e.popperContainer&&($=B.createElement(e.popperContainer,{},$)),T&&!d&&($=Ze.createElement(l4,{portalId:T,portalHost:P},$));var q=ji("react-datepicker-wrapper",i);return Ze.createElement(Ze.Fragment,null,Ze.createElement("div",{ref:D.refs.setReference,className:q},x),$)},MM=CM(SM);function EM(e,o){return e&&o?Wi(e)!==Wi(o)||On(e)!==On(o):e!==o}var bm="Date input not valid.",LM=function(e){Oi(o,e);function o(i){var r=e.call(this,i)||this;return r.calendar=null,r.input=null,r.getPreSelection=function(){return r.props.openToDate?r.props.openToDate:r.props.selectsEnd&&r.props.startDate?r.props.startDate:r.props.selectsStart&&r.props.endDate?r.props.endDate:ur()},r.modifyHolidays=function(){var d;return(d=r.props.holidays)===null||d===void 0?void 0:d.reduce(function(m,x){var c=new Date(x.date);return k0(c)?sl(sl([],m,!0),[Zn(Zn({},x),{date:c})],!1):m},[])},r.calcInitialState=function(){var d,m=r.getPreSelection(),x=i4(r.props),c=s4(r.props),L=x&&il(m,Rf(x))?x:c&&wu(m,zg(c))?c:m;return{open:r.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:(d=r.props.selectsRange?r.props.startDate:r.props.selected)!==null&&d!==void 0?d:L,highlightDates:qg(r.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},r.getInputValue=function(){var d,m=r.props,x=m.locale,c=m.startDate,L=m.endDate,T=m.rangeSeparator,P=m.selected,D=m.selectedDates,N=m.selectsMultiple,$=m.selectsRange,U=m.value,q=(d=r.props.dateFormat)!==null&&d!==void 0?d:o.defaultProps.dateFormat,H=r.state.inputValue;return typeof U=="string"?U:typeof H=="string"?H:$?AS(c,L,{dateFormat:q,locale:x,rangeSeparator:T}):N?jS(D??[],{dateFormat:q,locale:x}):Eo(P,{dateFormat:q,locale:x})},r.resetHiddenStatus=function(){r.setState(Zn(Zn({},r.state),{wasHidden:!1}))},r.setHiddenStatus=function(){r.setState(Zn(Zn({},r.state),{wasHidden:!0}))},r.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&r.setHiddenStatus()},r.clearPreventFocusTimeout=function(){r.preventFocusTimeout&&clearTimeout(r.preventFocusTimeout)},r.setFocus=function(){var d,m;(m=(d=r.input)===null||d===void 0?void 0:d.focus)===null||m===void 0||m.call(d,{preventScroll:!0})},r.setBlur=function(){var d,m;(m=(d=r.input)===null||d===void 0?void 0:d.blur)===null||m===void 0||m.call(d),r.cancelFocusInput()},r.deferBlur=function(){requestAnimationFrame(function(){r.setBlur()})},r.setOpen=function(d,m){m===void 0&&(m=!1),r.setState({open:d,preSelection:d&&r.state.open?r.state.preSelection:r.calcInitialState().preSelection,lastPreSelectChange:Cm},function(){d||r.setState(function(x){return{focused:m?x.focused:!1}},function(){!m&&r.deferBlur(),r.setState({inputValue:null})})})},r.inputOk=function(){return dc(r.state.preSelection)},r.isCalendarOpen=function(){return r.props.open===void 0?r.state.open&&!r.props.disabled&&!r.props.readOnly:r.props.open},r.handleFocus=function(d){var m,x,c=r.state.wasHidden,L=c?r.state.open:!0;c&&r.resetHiddenStatus(),r.state.preventFocus||((x=(m=r.props).onFocus)===null||x===void 0||x.call(m,d),L&&!r.props.preventOpenOnFocus&&!r.props.readOnly&&r.setOpen(!0)),r.setState({focused:!0})},r.sendFocusBackToInput=function(){r.preventFocusTimeout&&r.clearPreventFocusTimeout(),r.setState({preventFocus:!0},function(){r.preventFocusTimeout=setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})})},r.cancelFocusInput=function(){clearTimeout(r.inputFocusTimeout),r.inputFocusTimeout=void 0},r.deferFocusInput=function(){r.cancelFocusInput(),r.inputFocusTimeout=setTimeout(function(){return r.setFocus()},1)},r.handleDropdownFocus=function(){r.cancelFocusInput()},r.resetInputValue=function(){r.setState(Zn(Zn({},r.state),{inputValue:null}))},r.handleBlur=function(d){var m,x;(!r.state.open||r.props.withPortal||r.props.showTimeInput)&&((x=(m=r.props).onBlur)===null||x===void 0||x.call(m,d)),r.resetInputValue(),r.state.open&&r.props.open===!1&&r.setOpen(!1),r.setState({focused:!1})},r.handleCalendarClickOutside=function(d){var m,x;r.props.inline||r.setOpen(!1),(x=(m=r.props).onClickOutside)===null||x===void 0||x.call(m,d),r.props.withPortal&&d.preventDefault()},r.handleChange=function(){for(var d,m,x,c,L,T=[],P=0;P<arguments.length;P++)T[P]=arguments[P];var D=T[0];if(!(r.props.onChangeRaw&&(r.props.onChangeRaw.apply(r,T),!D||typeof D.isDefaultPrevented!="function"||D.isDefaultPrevented()))){r.setState({inputValue:(D==null?void 0:D.target)instanceof HTMLInputElement?D.target.value:null,lastPreSelectChange:TM});var N=r.props,$=N.selectsRange,U=N.startDate,q=N.endDate,H=(d=r.props.dateFormat)!==null&&d!==void 0?d:o.defaultProps.dateFormat,G=(m=r.props.strictParsing)!==null&&m!==void 0?m:o.defaultProps.strictParsing,te=(D==null?void 0:D.target)instanceof HTMLInputElement?D.target.value:"";if($){var oe=r.props.rangeSeparator,Ce=oe.trim(),ae=te.split(H.includes(Ce)?oe:Ce,2).map(function(dt){return dt.trim()}),Ne=ae[0],Fe=ae[1],ye=vm(Ne??"",H,r.props.locale,G),Ke=ye?vm(Fe??"",H,r.props.locale,G):null,Me=(U==null?void 0:U.getTime())!==(ye==null?void 0:ye.getTime()),qe=(q==null?void 0:q.getTime())!==(Ke==null?void 0:Ke.getTime());if(!Me&&!qe||ye&&ko(ye,r.props)||Ke&&ko(Ke,r.props))return;(c=(x=r.props).onChange)===null||c===void 0||c.call(x,[ye,Ke],D)}else{var Re=vm(te,H,r.props.locale,G,(L=r.props.selected)!==null&&L!==void 0?L:void 0);(Re||!te)&&r.setSelected(Re,D,!0)}}},r.handleSelect=function(d,m,x){if(!r.props.readOnly){var c=r.props,L=c.selectsRange,T=c.startDate,P=c.endDate,D=c.swapRange,N=!L||T&&!P&&(D||!_m(d,T));r.props.shouldCloseOnSelect&&!r.props.showTimeSelect&&N&&r.sendFocusBackToInput(),r.props.onChangeRaw&&r.props.onChangeRaw(m),r.setSelected(d,m,!1,x),r.props.showDateSelect&&r.setState({isRenderAriaLiveMessage:!0}),!r.props.shouldCloseOnSelect||r.props.showTimeSelect?r.setPreSelection(d):N&&r.setOpen(!1)}},r.setSelected=function(d,m,x,c){var L,T,P=d;if(r.props.showYearPicker){if(P!==null&&Af(On(P),r.props))return}else if(r.props.showMonthYearPicker){if(P!==null&&r4(P,r.props))return}else if(P!==null&&ko(P,r.props))return;var D=r.props,N=D.onChange,$=D.selectsRange,U=D.startDate,q=D.endDate,H=D.selectsMultiple,G=D.selectedDates,te=D.minTime,oe=D.swapRange;if(!S1(r.props.selected,P)||r.props.allowSameDay||$||H)if(P!==null&&(r.props.selected&&(!x||!r.props.showTimeSelect&&!r.props.showTimeSelectOnly&&!r.props.showTimeInput)&&(P=xm(P,{hour:hc(r.props.selected),minute:pc(r.props.selected),second:xu(r.props.selected)})),!x&&(r.props.showTimeSelect||r.props.showTimeSelectOnly)&&te&&(P=xm(P,{hour:te.getHours(),minute:te.getMinutes(),second:te.getSeconds()})),r.props.inline||r.setState({preSelection:P}),r.props.focusSelectedMonth||r.setState({monthSelectedIn:c})),$){var Ce=!U&&!q,ae=U&&!q,Ne=!U&&!!q,Fe=U&&q;Ce?N==null||N([P,null],m):ae?P===null?N==null||N([null,null],m):_m(P,U)?oe?N==null||N([P,U],m):N==null||N([P,null],m):N==null||N([U,P],m):Ne&&(P&&_m(P,q)?N==null||N([P,q],m):N==null||N([P,null],m)),Fe&&(N==null||N([P,null],m))}else if(H){if(P!==null)if(!(G!=null&&G.length))N==null||N([P],m);else{var ye=G.some(function(Me){return Un(Me,P)});if(ye){var Ke=G.filter(function(Me){return!Un(Me,P)});N==null||N(Ke,m)}else N==null||N(sl(sl([],G,!0),[P],!1),m)}}else N==null||N(P,m);x||((T=(L=r.props).onSelect)===null||T===void 0||T.call(L,P,m),r.setState({inputValue:null}))},r.setPreSelection=function(d){if(!r.props.readOnly){var m=dc(r.props.minDate),x=dc(r.props.maxDate),c=!0;if(d){var L=Rf(d);if(m&&x)c=_1(d,r.props.minDate,r.props.maxDate);else if(m){var T=Rf(r.props.minDate);c=wu(d,T)||S1(L,T)}else if(x){var P=zg(r.props.maxDate);c=il(d,P)||S1(L,P)}}c&&r.setState({preSelection:d})}},r.toggleCalendar=function(){r.setOpen(!r.state.open)},r.handleTimeChange=function(d){var m,x;if(!(r.props.selectsRange||r.props.selectsMultiple)){var c=r.props.selected?r.props.selected:r.getPreSelection(),L=r.props.selected?d:xm(c,{hour:hc(d),minute:pc(d)});r.setState({preSelection:L}),(x=(m=r.props).onChange)===null||x===void 0||x.call(m,L),r.props.shouldCloseOnSelect&&!r.props.showTimeInput&&(r.sendFocusBackToInput(),r.setOpen(!1)),r.props.showTimeInput&&r.setOpen(!0),(r.props.showTimeSelectOnly||r.props.showTimeSelect)&&r.setState({isRenderAriaLiveMessage:!0}),r.setState({inputValue:null})}},r.onInputClick=function(){var d,m;!r.props.disabled&&!r.props.readOnly&&r.setOpen(!0),(m=(d=r.props).onInputClick)===null||m===void 0||m.call(d)},r.onInputKeyDown=function(d){var m,x,c,L,T,P;(x=(m=r.props).onKeyDown)===null||x===void 0||x.call(m,d);var D=d.key;if(!r.state.open&&!r.props.inline&&!r.props.preventOpenOnFocus){(D===Ht.ArrowDown||D===Ht.ArrowUp||D===Ht.Enter)&&((c=r.onInputClick)===null||c===void 0||c.call(r));return}if(r.state.open){if(D===Ht.ArrowDown||D===Ht.ArrowUp){d.preventDefault();var N=r.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":r.props.showWeekPicker&&r.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':r.props.showFullMonthYearPicker||r.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',$=((L=r.calendar)===null||L===void 0?void 0:L.containerRef.current)instanceof Element&&r.calendar.containerRef.current.querySelector(N);$ instanceof HTMLElement&&$.focus({preventScroll:!0});return}var U=ur(r.state.preSelection);D===Ht.Enter?(d.preventDefault(),d.target.blur(),r.inputOk()&&r.state.lastPreSelectChange===Cm?(r.handleSelect(U,d),!r.props.shouldCloseOnSelect&&r.setPreSelection(U)):r.setOpen(!1)):D===Ht.Escape?(d.preventDefault(),d.target.blur(),r.sendFocusBackToInput(),r.setOpen(!1)):D===Ht.Tab&&r.setOpen(!1),r.inputOk()||(P=(T=r.props).onInputError)===null||P===void 0||P.call(T,{code:1,msg:bm})}},r.onPortalKeyDown=function(d){var m=d.key;m===Ht.Escape&&(d.preventDefault(),r.setState({preventFocus:!0},function(){r.setOpen(!1),setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})}))},r.onDayKeyDown=function(d){var m,x,c,L,T,P,D=r.props,N=D.minDate,$=D.maxDate,U=D.disabledKeyboardNavigation,q=D.showWeekPicker,H=D.shouldCloseOnSelect,G=D.locale,te=D.calendarStartDay,oe=D.adjustDateOnChange,Ce=D.inline;if((x=(m=r.props).onKeyDown)===null||x===void 0||x.call(m,d),!U){var ae=d.key,Ne=d.shiftKey,Fe=ur(r.state.preSelection),ye=function(ht,Pe){var ke=Pe;switch(ht){case Ht.ArrowRight:ke=q?Uf(Pe,1):ca(Pe,1);break;case Ht.ArrowLeft:ke=q?Sg(Pe):Kb(Pe);break;case Ht.ArrowUp:ke=Sg(Pe);break;case Ht.ArrowDown:ke=Uf(Pe,1);break;case Ht.PageUp:ke=Ne?Vd(Pe,1):T1(Pe,1);break;case Ht.PageDown:ke=Ne?uc(Pe,1):ua(Pe,1);break;case Ht.Home:ke=_u(Pe,G,te);break;case Ht.End:ke=FS(Pe);break}return ke},Ke=function(ht,Pe){for(var ke=40,de=ht,je=!1,Ee=0,K=ye(ht,Pe);!je;){if(Ee>=ke){K=Pe;break}N&&K<N&&(de=Ht.ArrowRight,K=ko(N,r.props)?ye(de,K):N),$&&K>$&&(de=Ht.ArrowLeft,K=ko($,r.props)?ye(de,K):$),ko(K,r.props)?((de===Ht.PageUp||de===Ht.Home)&&(de=Ht.ArrowRight),(de===Ht.PageDown||de===Ht.End)&&(de=Ht.ArrowLeft),K=ye(de,K)):je=!0,Ee++}return K};if(ae===Ht.Enter){d.preventDefault(),r.handleSelect(Fe,d),!H&&r.setPreSelection(Fe);return}else if(ae===Ht.Escape){d.preventDefault(),r.setOpen(!1),r.inputOk()||(L=(c=r.props).onInputError)===null||L===void 0||L.call(c,{code:1,msg:bm});return}var Me=null;switch(ae){case Ht.ArrowLeft:case Ht.ArrowRight:case Ht.ArrowUp:case Ht.ArrowDown:case Ht.PageUp:case Ht.PageDown:case Ht.Home:case Ht.End:Me=Ke(ae,Fe);break}if(!Me){(P=(T=r.props).onInputError)===null||P===void 0||P.call(T,{code:1,msg:bm});return}if(d.preventDefault(),r.setState({lastPreSelectChange:Cm}),oe&&r.setSelected(Me),r.setPreSelection(Me),Ce){var qe=Wi(Fe),Re=Wi(Me),dt=On(Fe),Xe=On(Me);qe!==Re||dt!==Xe?r.setState({shouldFocusDayInline:!0}):r.setState({shouldFocusDayInline:!1})}}},r.onPopperKeyDown=function(d){var m=d.key;m===Ht.Escape&&(d.preventDefault(),r.sendFocusBackToInput(),r.setOpen(!1))},r.onClearClick=function(d){d&&d.preventDefault&&d.preventDefault(),r.sendFocusBackToInput();var m=r.props,x=m.selectsRange,c=m.onChange;x?c==null||c([null,null],d):c==null||c(null,d),r.setState({inputValue:null})},r.clear=function(){r.onClearClick()},r.onScroll=function(d){typeof r.props.closeOnScroll=="boolean"&&r.props.closeOnScroll?(d.target===document||d.target===document.documentElement||d.target===document.body)&&r.setOpen(!1):typeof r.props.closeOnScroll=="function"&&r.props.closeOnScroll(d)&&r.setOpen(!1)},r.renderCalendar=function(){var d,m;return!r.props.inline&&!r.isCalendarOpen()?null:Ze.createElement(xM,Zn({showMonthYearDropdown:void 0,ref:function(x){r.calendar=x}},r.props,r.state,{setOpen:r.setOpen,dateFormat:(d=r.props.dateFormatCalendar)!==null&&d!==void 0?d:o.defaultProps.dateFormatCalendar,onSelect:r.handleSelect,onClickOutside:r.handleCalendarClickOutside,holidays:KS(r.modifyHolidays()),outsideClickIgnoreClass:r.props.outsideClickIgnoreClass,onDropdownFocus:r.handleDropdownFocus,onTimeChange:r.handleTimeChange,className:r.props.calendarClassName,container:r.props.calendarContainer,handleOnKeyDown:r.props.onKeyDown,handleOnDayKeyDown:r.onDayKeyDown,setPreSelection:r.setPreSelection,dropdownMode:(m=r.props.dropdownMode)!==null&&m!==void 0?m:o.defaultProps.dropdownMode}),r.props.children)},r.renderAriaLiveRegion=function(){var d,m=r.props.locale,x=(d=r.props.dateFormat)!==null&&d!==void 0?d:o.defaultProps.dateFormat,c=r.props.showTimeInput||r.props.showTimeSelect,L=c?"PPPPp":"PPPP",T;return r.props.selectsRange?T="Selected start date: ".concat(Eo(r.props.startDate,{dateFormat:L,locale:m}),". ").concat(r.props.endDate?"End date: "+Eo(r.props.endDate,{dateFormat:L,locale:m}):""):r.props.showTimeSelectOnly?T="Selected time: ".concat(Eo(r.props.selected,{dateFormat:x,locale:m})):r.props.showYearPicker?T="Selected year: ".concat(Eo(r.props.selected,{dateFormat:"yyyy",locale:m})):r.props.showMonthYearPicker?T="Selected month: ".concat(Eo(r.props.selected,{dateFormat:"MMMM yyyy",locale:m})):r.props.showQuarterYearPicker?T="Selected quarter: ".concat(Eo(r.props.selected,{dateFormat:"yyyy, QQQ",locale:m})):T="Selected date: ".concat(Eo(r.props.selected,{dateFormat:L,locale:m})),Ze.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},T)},r.renderDateInput=function(){var d,m,x=ji(r.props.className,(d={},d[r.props.outsideClickIgnoreClass||o.defaultProps.outsideClickIgnoreClass]=r.state.open,d)),c=r.props.customInput||Ze.createElement("input",{type:"text"}),L=r.props.customInputRef||"ref";return B.cloneElement(c,(m={},m[L]=function(T){r.input=T},m.value=r.getInputValue(),m.onBlur=r.handleBlur,m.onChange=r.handleChange,m.onClick=r.onInputClick,m.onFocus=r.handleFocus,m.onKeyDown=r.onInputKeyDown,m.id=r.props.id,m.name=r.props.name,m.form=r.props.form,m.autoFocus=r.props.autoFocus,m.placeholder=r.props.placeholderText,m.disabled=r.props.disabled,m.autoComplete=r.props.autoComplete,m.className=ji(c.props.className,x),m.title=r.props.title,m.readOnly=r.props.readOnly,m.required=r.props.required,m.tabIndex=r.props.tabIndex,m["aria-describedby"]=r.props.ariaDescribedBy,m["aria-invalid"]=r.props.ariaInvalid,m["aria-labelledby"]=r.props.ariaLabelledBy,m["aria-required"]=r.props.ariaRequired,m))},r.renderClearButton=function(){var d=r.props,m=d.isClearable,x=d.disabled,c=d.selected,L=d.startDate,T=d.endDate,P=d.clearButtonTitle,D=d.clearButtonClassName,N=D===void 0?"":D,$=d.ariaLabelClose,U=$===void 0?"Close":$,q=d.selectedDates,H=d.readOnly;return m&&!H&&(c!=null||L!=null||T!=null||q!=null&&q.length)?Ze.createElement("button",{type:"button",className:ji("react-datepicker__close-icon",N,{"react-datepicker__close-icon--disabled":x}),disabled:x,"aria-label":U,onClick:r.onClearClick,title:P,tabIndex:-1}):null},r.state=r.calcInitialState(),r.preventFocusTimeout=void 0,r}return Object.defineProperty(o,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,outsideClickIgnoreClass:a4,readOnly:!1,rangeSeparator:t4,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:wp,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),o.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},o.prototype.componentDidUpdate=function(i,r){var d,m,x,c;i.inline&&EM(i.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&i.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),i.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:qg(this.props.highlightDates)}),!r.focused&&!S1(i.selected,this.props.selected)&&this.setState({inputValue:null}),r.open!==this.state.open&&(r.open===!1&&this.state.open===!0&&((m=(d=this.props).onCalendarOpen)===null||m===void 0||m.call(d)),r.open===!0&&this.state.open===!1&&((c=(x=this.props).onCalendarClose)===null||c===void 0||c.call(x)))},o.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},o.prototype.renderInputContainer=function(){var i=this.props,r=i.showIcon,d=i.icon,m=i.calendarIconClassname,x=i.calendarIconClassName,c=i.toggleCalendarOnIconClick,L=this.state.open;return m&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),Ze.createElement("div",{className:"react-datepicker__input-container".concat(r?" react-datepicker__view-calendar-icon":"")},r&&Ze.createElement(_M,Zn({icon:d,className:ji(x,!x&&m,L&&"react-datepicker-ignore-onclickoutside")},c?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},o.prototype.render=function(){var i=this.renderCalendar();if(this.props.inline)return i;if(this.props.withPortal){var r=this.state.open?Ze.createElement(c4,{enableTabLoop:this.props.enableTabLoop},Ze.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},i)):null;return this.state.open&&this.props.portalId&&(r=Ze.createElement(l4,Zn({portalId:this.props.portalId},this.props),r)),Ze.createElement("div",null,this.renderInputContainer(),r)}return Ze.createElement(MM,Zn({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:i,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},o}(B.Component),TM="input",Cm="navigate",Sm={exports:{}},Mm,Qg;function kM(){if(Qg)return Mm;Qg=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Mm=e,Mm}var Em,Jg;function PM(){if(Jg)return Em;Jg=1;var e=kM();function o(){}function i(){}return i.resetWarningCache=o,Em=function(){function r(x,c,L,T,P,D){if(D!==e){var N=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw N.name="Invariant Violation",N}}r.isRequired=r;function d(){return r}var m={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:d,element:r,elementType:r,instanceOf:d,node:r,objectOf:d,oneOf:d,oneOfType:d,shape:d,exact:d,checkPropTypes:i,resetWarningCache:o};return m.PropTypes=m,m},Em}var e5;function DM(){return e5||(e5=1,Sm.exports=PM()()),Sm.exports}var IM=DM();const Or=gc(IM);var Lm,t5;function NM(){if(t5)return Lm;t5=1;function e(c){return c&&typeof c=="object"&&"default"in c?c.default:c}var o=Wd(),i=e(o);function r(c,L,T){return L in c?Object.defineProperty(c,L,{value:T,enumerable:!0,configurable:!0,writable:!0}):c[L]=T,c}function d(c,L){c.prototype=Object.create(L.prototype),c.prototype.constructor=c,c.__proto__=L}var m=!!(typeof window<"u"&&window.document&&window.document.createElement);function x(c,L,T){if(typeof c!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof L!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof T<"u"&&typeof T!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function P(D){return D.displayName||D.name||"Component"}return function(N){if(typeof N!="function")throw new Error("Expected WrappedComponent to be a React component.");var $=[],U;function q(){U=c($.map(function(G){return G.props})),H.canUseDOM?L(U):T&&(U=T(U))}var H=function(G){d(te,G);function te(){return G.apply(this,arguments)||this}te.peek=function(){return U},te.rewind=function(){if(te.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var ae=U;return U=void 0,$=[],ae};var oe=te.prototype;return oe.UNSAFE_componentWillMount=function(){$.push(this),q()},oe.componentDidUpdate=function(){q()},oe.componentWillUnmount=function(){var ae=$.indexOf(this);$.splice(ae,1),q()},oe.render=function(){return i.createElement(N,this.props)},te}(o.PureComponent);return r(H,"displayName","SideEffect("+P(N)+")"),r(H,"canUseDOM",m),H}}return Lm=x,Lm}var RM=NM();const AM=gc(RM);var Tm,n5;function jM(){if(n5)return Tm;n5=1;var e=typeof Element<"u",o=typeof Map=="function",i=typeof Set=="function",r=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function d(m,x){if(m===x)return!0;if(m&&x&&typeof m=="object"&&typeof x=="object"){if(m.constructor!==x.constructor)return!1;var c,L,T;if(Array.isArray(m)){if(c=m.length,c!=x.length)return!1;for(L=c;L--!==0;)if(!d(m[L],x[L]))return!1;return!0}var P;if(o&&m instanceof Map&&x instanceof Map){if(m.size!==x.size)return!1;for(P=m.entries();!(L=P.next()).done;)if(!x.has(L.value[0]))return!1;for(P=m.entries();!(L=P.next()).done;)if(!d(L.value[1],x.get(L.value[0])))return!1;return!0}if(i&&m instanceof Set&&x instanceof Set){if(m.size!==x.size)return!1;for(P=m.entries();!(L=P.next()).done;)if(!x.has(L.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(m)&&ArrayBuffer.isView(x)){if(c=m.length,c!=x.length)return!1;for(L=c;L--!==0;)if(m[L]!==x[L])return!1;return!0}if(m.constructor===RegExp)return m.source===x.source&&m.flags===x.flags;if(m.valueOf!==Object.prototype.valueOf&&typeof m.valueOf=="function"&&typeof x.valueOf=="function")return m.valueOf()===x.valueOf();if(m.toString!==Object.prototype.toString&&typeof m.toString=="function"&&typeof x.toString=="function")return m.toString()===x.toString();if(T=Object.keys(m),c=T.length,c!==Object.keys(x).length)return!1;for(L=c;L--!==0;)if(!Object.prototype.hasOwnProperty.call(x,T[L]))return!1;if(e&&m instanceof Element)return!1;for(L=c;L--!==0;)if(!((T[L]==="_owner"||T[L]==="__v"||T[L]==="__o")&&m.$$typeof)&&!d(m[T[L]],x[T[L]]))return!1;return!0}return m!==m&&x!==x}return Tm=function(x,c){try{return d(x,c)}catch(L){if((L.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw L}},Tm}var OM=jM();const zM=gc(OM);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var km,r5;function FM(){if(r5)return km;r5=1;var e=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function r(m){if(m==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(m)}function d(){try{if(!Object.assign)return!1;var m=new String("abc");if(m[5]="de",Object.getOwnPropertyNames(m)[0]==="5")return!1;for(var x={},c=0;c<10;c++)x["_"+String.fromCharCode(c)]=c;var L=Object.getOwnPropertyNames(x).map(function(P){return x[P]});if(L.join("")!=="0123456789")return!1;var T={};return"abcdefghijklmnopqrst".split("").forEach(function(P){T[P]=P}),Object.keys(Object.assign({},T)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return km=d()?Object.assign:function(m,x){for(var c,L=r(m),T,P=1;P<arguments.length;P++){c=Object(arguments[P]);for(var D in c)o.call(c,D)&&(L[D]=c[D]);if(e){T=e(c);for(var N=0;N<T.length;N++)i.call(c,T[N])&&(L[T[N]]=c[T[N]])}}return L},km}var BM=FM();const $M=gc(BM);var P1={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},Sn={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(Sn).map(function(e){return Sn[e]});var zr={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},n0={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},dp={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},VM=Object.keys(n0).reduce(function(e,o){return e[n0[o]]=o,e},{}),HM=[Sn.NOSCRIPT,Sn.SCRIPT,Sn.STYLE],la="data-react-helmet",UM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ZM=function(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")},qM=function(){function e(o,i){for(var r=0;r<i.length;r++){var d=i[r];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(o,d.key,d)}}return function(o,i,r){return i&&e(o.prototype,i),r&&e(o,r),o}}(),ws=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var i=arguments[o];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},WM=function(e,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(e,o):e.__proto__=o)},i5=function(e,o){var i={};for(var r in e)o.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r]);return i},GM=function(e,o){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:e},a2=function(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return i===!1?String(o):String(o).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},YM=function(o){var i=Ad(o,Sn.TITLE),r=Ad(o,dp.TITLE_TEMPLATE);if(r&&i)return r.replace(/%s/g,function(){return Array.isArray(i)?i.join(""):i});var d=Ad(o,dp.DEFAULT_TITLE);return i||d||void 0},XM=function(o){return Ad(o,dp.ON_CHANGE_CLIENT_STATE)||function(){}},Pm=function(o,i){return i.filter(function(r){return typeof r[o]<"u"}).map(function(r){return r[o]}).reduce(function(r,d){return ws({},r,d)},{})},KM=function(o,i){return i.filter(function(r){return typeof r[Sn.BASE]<"u"}).map(function(r){return r[Sn.BASE]}).reverse().reduce(function(r,d){if(!r.length)for(var m=Object.keys(d),x=0;x<m.length;x++){var c=m[x],L=c.toLowerCase();if(o.indexOf(L)!==-1&&d[L])return r.concat(d)}return r},[])},Kh=function(o,i,r){var d={};return r.filter(function(m){return Array.isArray(m[o])?!0:(typeof m[o]<"u"&&tE("Helmet: "+o+' should be of type "Array". Instead found type "'+UM(m[o])+'"'),!1)}).map(function(m){return m[o]}).reverse().reduce(function(m,x){var c={};x.filter(function(N){for(var $=void 0,U=Object.keys(N),q=0;q<U.length;q++){var H=U[q],G=H.toLowerCase();i.indexOf(G)!==-1&&!($===zr.REL&&N[$].toLowerCase()==="canonical")&&!(G===zr.REL&&N[G].toLowerCase()==="stylesheet")&&($=G),i.indexOf(H)!==-1&&(H===zr.INNER_HTML||H===zr.CSS_TEXT||H===zr.ITEM_PROP)&&($=H)}if(!$||!N[$])return!1;var te=N[$].toLowerCase();return d[$]||(d[$]={}),c[$]||(c[$]={}),d[$][te]?!1:(c[$][te]=!0,!0)}).reverse().forEach(function(N){return m.push(N)});for(var L=Object.keys(c),T=0;T<L.length;T++){var P=L[T],D=$M({},d[P],c[P]);d[P]=D}return m},[]).reverse()},Ad=function(o,i){for(var r=o.length-1;r>=0;r--){var d=o[r];if(d.hasOwnProperty(i))return d[i]}return null},QM=function(o){return{baseTag:KM([zr.HREF,zr.TARGET],o),bodyAttributes:Pm(P1.BODY,o),defer:Ad(o,dp.DEFER),encode:Ad(o,dp.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Pm(P1.HTML,o),linkTags:Kh(Sn.LINK,[zr.REL,zr.HREF],o),metaTags:Kh(Sn.META,[zr.NAME,zr.CHARSET,zr.HTTPEQUIV,zr.PROPERTY,zr.ITEM_PROP],o),noscriptTags:Kh(Sn.NOSCRIPT,[zr.INNER_HTML],o),onChangeClientState:XM(o),scriptTags:Kh(Sn.SCRIPT,[zr.SRC,zr.INNER_HTML],o),styleTags:Kh(Sn.STYLE,[zr.CSS_TEXT],o),title:YM(o),titleAttributes:Pm(P1.TITLE,o)}},l2=function(){var e=Date.now();return function(o){var i=Date.now();i-e>16?(e=i,o(i)):setTimeout(function(){l2(o)},0)}}(),s5=function(o){return clearTimeout(o)},JM=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||l2:global.requestAnimationFrame||l2,eE=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||s5:global.cancelAnimationFrame||s5,tE=function(o){return console&&typeof console.warn=="function"&&console.warn(o)},Qh=null,nE=function(o){Qh&&eE(Qh),o.defer?Qh=JM(function(){o5(o,function(){Qh=null})}):(o5(o),Qh=null)},o5=function(o,i){var r=o.baseTag,d=o.bodyAttributes,m=o.htmlAttributes,x=o.linkTags,c=o.metaTags,L=o.noscriptTags,T=o.onChangeClientState,P=o.scriptTags,D=o.styleTags,N=o.title,$=o.titleAttributes;c2(Sn.BODY,d),c2(Sn.HTML,m),rE(N,$);var U={baseTag:kd(Sn.BASE,r),linkTags:kd(Sn.LINK,x),metaTags:kd(Sn.META,c),noscriptTags:kd(Sn.NOSCRIPT,L),scriptTags:kd(Sn.SCRIPT,P),styleTags:kd(Sn.STYLE,D)},q={},H={};Object.keys(U).forEach(function(G){var te=U[G],oe=te.newTags,Ce=te.oldTags;oe.length&&(q[G]=oe),Ce.length&&(H[G]=U[G].oldTags)}),i&&i(),T(o,q,H)},u4=function(o){return Array.isArray(o)?o.join(""):o},rE=function(o,i){typeof o<"u"&&document.title!==o&&(document.title=u4(o)),c2(Sn.TITLE,i)},c2=function(o,i){var r=document.getElementsByTagName(o)[0];if(r){for(var d=r.getAttribute(la),m=d?d.split(","):[],x=[].concat(m),c=Object.keys(i),L=0;L<c.length;L++){var T=c[L],P=i[T]||"";r.getAttribute(T)!==P&&r.setAttribute(T,P),m.indexOf(T)===-1&&m.push(T);var D=x.indexOf(T);D!==-1&&x.splice(D,1)}for(var N=x.length-1;N>=0;N--)r.removeAttribute(x[N]);m.length===x.length?r.removeAttribute(la):r.getAttribute(la)!==c.join(",")&&r.setAttribute(la,c.join(","))}},kd=function(o,i){var r=document.head||document.querySelector(Sn.HEAD),d=r.querySelectorAll(o+"["+la+"]"),m=Array.prototype.slice.call(d),x=[],c=void 0;return i&&i.length&&i.forEach(function(L){var T=document.createElement(o);for(var P in L)if(L.hasOwnProperty(P))if(P===zr.INNER_HTML)T.innerHTML=L.innerHTML;else if(P===zr.CSS_TEXT)T.styleSheet?T.styleSheet.cssText=L.cssText:T.appendChild(document.createTextNode(L.cssText));else{var D=typeof L[P]>"u"?"":L[P];T.setAttribute(P,D)}T.setAttribute(la,"true"),m.some(function(N,$){return c=$,T.isEqualNode(N)})?m.splice(c,1):x.push(T)}),m.forEach(function(L){return L.parentNode.removeChild(L)}),x.forEach(function(L){return r.appendChild(L)}),{oldTags:m,newTags:x}},d4=function(o){return Object.keys(o).reduce(function(i,r){var d=typeof o[r]<"u"?r+'="'+o[r]+'"':""+r;return i?i+" "+d:d},"")},iE=function(o,i,r,d){var m=d4(r),x=u4(i);return m?"<"+o+" "+la+'="true" '+m+">"+a2(x,d)+"</"+o+">":"<"+o+" "+la+'="true">'+a2(x,d)+"</"+o+">"},sE=function(o,i,r){return i.reduce(function(d,m){var x=Object.keys(m).filter(function(T){return!(T===zr.INNER_HTML||T===zr.CSS_TEXT)}).reduce(function(T,P){var D=typeof m[P]>"u"?P:P+'="'+a2(m[P],r)+'"';return T?T+" "+D:D},""),c=m.innerHTML||m.cssText||"",L=HM.indexOf(o)===-1;return d+"<"+o+" "+la+'="true" '+x+(L?"/>":">"+c+"</"+o+">")},"")},h4=function(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(o).reduce(function(r,d){return r[n0[d]||d]=o[d],r},i)},oE=function(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(o).reduce(function(r,d){return r[VM[d]||d]=o[d],r},i)},aE=function(o,i,r){var d,m=(d={key:i},d[la]=!0,d),x=h4(r,m);return[Ze.createElement(Sn.TITLE,x,i)]},lE=function(o,i){return i.map(function(r,d){var m,x=(m={key:d},m[la]=!0,m);return Object.keys(r).forEach(function(c){var L=n0[c]||c;if(L===zr.INNER_HTML||L===zr.CSS_TEXT){var T=r.innerHTML||r.cssText;x.dangerouslySetInnerHTML={__html:T}}else x[L]=r[c]}),Ze.createElement(o,x)})},ac=function(o,i,r){switch(o){case Sn.TITLE:return{toComponent:function(){return aE(o,i.title,i.titleAttributes)},toString:function(){return iE(o,i.title,i.titleAttributes,r)}};case P1.BODY:case P1.HTML:return{toComponent:function(){return h4(i)},toString:function(){return d4(i)}};default:return{toComponent:function(){return lE(o,i)},toString:function(){return sE(o,i,r)}}}},p4=function(o){var i=o.baseTag,r=o.bodyAttributes,d=o.encode,m=o.htmlAttributes,x=o.linkTags,c=o.metaTags,L=o.noscriptTags,T=o.scriptTags,P=o.styleTags,D=o.title,N=D===void 0?"":D,$=o.titleAttributes;return{base:ac(Sn.BASE,i,d),bodyAttributes:ac(P1.BODY,r,d),htmlAttributes:ac(P1.HTML,m,d),link:ac(Sn.LINK,x,d),meta:ac(Sn.META,c,d),noscript:ac(Sn.NOSCRIPT,L,d),script:ac(Sn.SCRIPT,T,d),style:ac(Sn.STYLE,P,d),title:ac(Sn.TITLE,{title:N,titleAttributes:$},d)}},cE=function(o){var i,r;return r=i=function(d){WM(m,d);function m(){return ZM(this,m),GM(this,d.apply(this,arguments))}return m.prototype.shouldComponentUpdate=function(c){return!zM(this.props,c)},m.prototype.mapNestedChildrenToProps=function(c,L){if(!L)return null;switch(c.type){case Sn.SCRIPT:case Sn.NOSCRIPT:return{innerHTML:L};case Sn.STYLE:return{cssText:L}}throw new Error("<"+c.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},m.prototype.flattenArrayTypeChildren=function(c){var L,T=c.child,P=c.arrayTypeChildren,D=c.newChildProps,N=c.nestedChildren;return ws({},P,(L={},L[T.type]=[].concat(P[T.type]||[],[ws({},D,this.mapNestedChildrenToProps(T,N))]),L))},m.prototype.mapObjectTypeChildren=function(c){var L,T,P=c.child,D=c.newProps,N=c.newChildProps,$=c.nestedChildren;switch(P.type){case Sn.TITLE:return ws({},D,(L={},L[P.type]=$,L.titleAttributes=ws({},N),L));case Sn.BODY:return ws({},D,{bodyAttributes:ws({},N)});case Sn.HTML:return ws({},D,{htmlAttributes:ws({},N)})}return ws({},D,(T={},T[P.type]=ws({},N),T))},m.prototype.mapArrayTypeChildrenToProps=function(c,L){var T=ws({},L);return Object.keys(c).forEach(function(P){var D;T=ws({},T,(D={},D[P]=c[P],D))}),T},m.prototype.warnOnInvalidChildren=function(c,L){return!0},m.prototype.mapChildrenToProps=function(c,L){var T=this,P={};return Ze.Children.forEach(c,function(D){if(!(!D||!D.props)){var N=D.props,$=N.children,U=i5(N,["children"]),q=oE(U);switch(T.warnOnInvalidChildren(D,$),D.type){case Sn.LINK:case Sn.META:case Sn.NOSCRIPT:case Sn.SCRIPT:case Sn.STYLE:P=T.flattenArrayTypeChildren({child:D,arrayTypeChildren:P,newChildProps:q,nestedChildren:$});break;default:L=T.mapObjectTypeChildren({child:D,newProps:L,newChildProps:q,nestedChildren:$});break}}}),L=this.mapArrayTypeChildrenToProps(P,L),L},m.prototype.render=function(){var c=this.props,L=c.children,T=i5(c,["children"]),P=ws({},T);return L&&(P=this.mapChildrenToProps(L,P)),Ze.createElement(o,P)},qM(m,null,[{key:"canUseDOM",set:function(c){o.canUseDOM=c}}]),m}(Ze.Component),i.propTypes={base:Or.object,bodyAttributes:Or.object,children:Or.oneOfType([Or.arrayOf(Or.node),Or.node]),defaultTitle:Or.string,defer:Or.bool,encodeSpecialCharacters:Or.bool,htmlAttributes:Or.object,link:Or.arrayOf(Or.object),meta:Or.arrayOf(Or.object),noscript:Or.arrayOf(Or.object),onChangeClientState:Or.func,script:Or.arrayOf(Or.object),style:Or.arrayOf(Or.object),title:Or.string,titleAttributes:Or.object,titleTemplate:Or.string},i.defaultProps={defer:!0,encodeSpecialCharacters:!0},i.peek=o.peek,i.rewind=function(){var d=o.rewind();return d||(d=p4({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),d},r},uE=function(){return null},dE=AM(QM,nE,p4)(uE),u2=cE(dE);u2.renderStatic=u2.rewind;const hE=()=>{const[e,o]=B.useState("dashboard"),[i,r]=B.useState({total:152,approved:89,rejected:46}),d=i.total-i.approved-i.rejected,m=i.approved/i.total*360,x=i.rejected/i.total*360;d/i.total*360;const[c,L]=B.useState(!1),[T,P]=B.useState([]);ii();const[D,N]=B.useState(""),[$,U]=B.useState(new Date),[q,H]=B.useState(!1),G=B.useRef(null),[te,oe]=B.useState(["منوی اصلی","داشبورد","آمار کلی استارتاپ من"]);B.useEffect(()=>{P([{id:1,fullName:"سیدمحمدحسین میرشفیعی ",phone:" ۹۱۹۳۹۳۷۸۶۹ ۹۸+",registerDate:" ۱۸ مرداد ۱۴۰۴",gender:"مرد"},{id:2,fullName:"محمدجواد سلگی",phone:"۹۱۹۳۹۳۷۸۶۹ ۹۸+",registerDate:"۲۰ مرداد ۱۴۰۴",gender:"مرد"},{id:3,fullName:"محمد رضایی",phone:"۴۹۳۸۷۶۵۴۳۲ ۹۸+",registerDate:"۲۲ مرداد ۱۴۰۴",gender:"مرد"},{id:4,fullName:"ساسان جاجرمی",phone:"۹۱۹۳۹۳۷۸۶۹ ۹۸+",registerDate:"۲۵ مرداد ۱۴۰۴",gender:"مرد"},{id:5,fullName:"مرتضی یوسف نیا",phone:"۹۱۹۳۹۳۷۸۶۹ ۹۸+",registerDate:"۲۷ مرداد ۱۴۰۴",gender:"مرد"}])},[]);const Ce=()=>{L(!c)},ae=Ke=>{N(Ke.target.value)},Ne=T.filter(Ke=>Ke.fullName.toLowerCase().includes(D.toLowerCase())),Fe=(Ke,Me)=>{o(Ke),oe(["منوی اصلی",Me,"آمار کلی استارتاپ من"])},ye=Ke=>{const Me=H_.toJalaali(Ke.getFullYear(),Ke.getMonth()+1,Ke.getDate()),qe=["فروردین","اردیبهشت","خرداد","تیر","مرداد","شهریور","مهر","آبان","آذر","دی","بهمن","اسفند"];return`${Me.jd} ${qe[Me.jm-1]} ${Me.jy}`};return B.useEffect(()=>{const Ke=Me=>{q&&G.current&&!G.current.contains(Me.target)&&!Me.target.closest(".calendar-btn")&&H(!1)};return document.addEventListener("mousedown",Ke),()=>{document.removeEventListener("mousedown",Ke)}},[q]),B.useEffect(()=>{/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)&&setTimeout(()=>{document.body.style.zoom="1",document.body.style.display="none",document.body.offsetHeight,document.body.style.display="block"},100)},[]),f.jsxs("div",{className:"admin-panel admin-panel-isolated",children:[f.jsxs(u2,{children:[f.jsx("title",{children:"Admin Panel"}),f.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"}),f.jsx("meta",{name:"theme-color",content:"#000000"}),f.jsx("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),f.jsx("meta",{name:"apple-mobile-web-app-status-bar-style",content:"black-translucent"})]}),f.jsxs("div",{className:"admin-header",children:[f.jsxs("div",{className:"header-right",children:[f.jsx("div",{className:"sidebar-logo",children:f.jsx("img",{src:$_,alt:"Logo"})}),f.jsxs("div",{className:"admin-profile",children:[f.jsx("div",{className:"profile-image"}),f.jsxs("div",{className:"profile-info",children:[f.jsxs("div",{className:"admin-name",children:[f.jsx("span",{children:"مصطفی شاملو"}),f.jsx("svg",{width:"16",height:"16",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.6921 7.09327C3.91674 6.83119 4.3113 6.80084 4.57338 7.02548L9.99997 11.6768L15.4266 7.02548C15.6886 6.80084 16.0832 6.83119 16.3078 7.09327C16.5325 7.35535 16.5021 7.74991 16.24 7.97455L10.4067 12.9745C10.1727 13.1752 9.82728 13.1752 9.59323 12.9745L3.75989 7.97455C3.49781 7.74991 3.46746 7.35535 3.6921 7.09327Z",fill:"#1E2023"})})]}),f.jsx("div",{className:"admin-role",children:"ادمین . مدیر ارشد محصول"})]})]})]}),f.jsxs("div",{className:"header-left",children:[f.jsxs("form",{className:"search-box5",children:[f.jsx("svg",{width:"18",height:"18",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"search-box5-icon",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.4167 2.29166C14.4438 2.29166 17.7084 5.55625 17.7084 9.58332C17.7084 13.6104 14.4438 16.875 10.4167 16.875C6.38963 16.875 3.12504 13.6104 3.12504 9.58332C3.12504 5.55625 6.38963 2.29166 10.4167 2.29166ZM18.9584 9.58332C18.9584 4.86589 15.1341 1.04166 10.4167 1.04166C5.69928 1.04166 1.87504 4.86589 1.87504 9.58332C1.87504 11.7171 2.65743 13.6681 3.95099 15.1652L1.22476 17.8914C0.980688 18.1355 0.980688 18.5312 1.22476 18.7753C1.46884 19.0193 1.86457 19.0193 2.10865 18.7753L4.83487 16.049C6.33192 17.3426 8.28295 18.125 10.4167 18.125C15.1341 18.125 18.9584 14.3008 18.9584 9.58332Z",fill:"#858585"})}),f.jsx("input",{type:"text",placeholder:"جستجو کنید ...",className:"search-box5-input"})]}),f.jsxs("div",{className:"notifications-btn",children:[f.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.8549 2.09564C13.8149 2.09564 12.9719 2.93869 12.9719 3.97865C12.9719 5.01861 13.8149 5.86166 14.8549 5.86166C15.8948 5.86166 16.7379 5.01861 16.7379 3.97865C16.7379 2.93869 15.8948 2.09564 14.8549 2.09564ZM11.7165 3.97865C11.7165 2.24539 13.1216 0.840302 14.8549 0.840302C16.5881 0.840302 17.9932 2.24539 17.9932 3.97865C17.9932 5.71192 16.5881 7.117 14.8549 7.117C13.1216 7.117 11.7165 5.71192 11.7165 3.97865ZM7.27561 2.51409L9.8335 2.51409C10.1802 2.51409 10.4612 2.79511 10.4612 3.14176C10.4612 3.48841 10.1802 3.76943 9.8335 3.76943H7.32282C5.72701 3.76943 4.5933 3.77076 3.73326 3.88639C2.89127 3.99959 2.40616 4.21189 2.05198 4.56607C1.6978 4.92025 1.48551 5.40535 1.3723 6.24734C1.25667 7.10739 1.25534 8.2411 1.25534 9.83691C1.25534 11.4327 1.25667 12.5664 1.3723 13.4265C1.48551 14.2685 1.6978 14.7536 2.05198 15.1077C2.40616 15.4619 2.89127 15.6742 3.73326 15.7874C4.5933 15.9031 5.72701 15.9044 7.32282 15.9044H10.6704C12.2662 15.9044 13.3999 15.9031 14.26 15.7874C15.1019 15.6742 15.587 15.4619 15.9412 15.1077C16.2954 14.7536 16.5077 14.2685 16.6209 13.4265C16.7365 12.5664 16.7379 11.4327 16.7379 9.83691C16.7379 9.5248 16.7401 9.2968 16.7421 9.10081C16.7452 8.78343 16.7475 8.54995 16.7381 8.17907C16.7293 7.83253 17.0031 7.54446 17.3496 7.53565C17.6961 7.52684 17.9842 7.80063 17.993 8.14717C18.0029 8.53724 18.0004 8.80349 17.9972 9.13998C17.9953 9.33576 17.9932 9.55533 17.9932 9.83691V9.88412C17.9932 11.4221 17.9932 12.6403 17.8651 13.5937C17.7331 14.5749 17.4552 15.3691 16.8289 15.9954C16.2026 16.6217 15.4084 16.8996 14.4272 17.0316C13.4738 17.1597 12.2556 17.1597 10.7176 17.1597H7.27561C5.7376 17.1597 4.51939 17.1597 3.56598 17.0316C2.58479 16.8996 1.79062 16.6217 1.16432 15.9954C0.538022 15.3691 0.260076 14.5749 0.128158 13.5937C-2.35736e-05 12.6403 -1.29997e-05 11.4221 2.69156e-07 9.88412V9.78969C-1.29997e-05 8.25168 -2.35736e-05 7.03347 0.128158 6.08007C0.260076 5.09888 0.538022 4.30471 1.16432 3.67841C1.79062 3.05211 2.58479 2.77416 3.56598 2.64225C4.51939 2.51406 5.7376 2.51407 7.27561 2.51409ZM3.49306 6.08751C3.71498 5.8212 4.11076 5.78522 4.37707 6.00714L6.18384 7.51278C6.96462 8.16344 7.50671 8.61372 7.96437 8.90806C8.40738 9.19299 8.70782 9.28864 8.99661 9.28864C9.2854 9.28864 9.58583 9.19299 10.0288 8.90806C10.4865 8.61372 11.0286 8.16344 11.8094 7.51278C12.0757 7.29086 12.4715 7.32684 12.6934 7.59314C12.9153 7.85945 12.8793 8.25524 12.613 8.47716L12.5816 8.50337C11.8398 9.12155 11.2386 9.62259 10.7079 9.96388C10.1551 10.3194 9.61681 10.544 8.99661 10.544C8.3764 10.544 7.83807 10.3194 7.28531 9.96388C6.75467 9.6226 6.15344 9.12156 5.41166 8.50339L3.57342 6.97152C3.30711 6.7496 3.27113 6.35381 3.49306 6.08751Z",fill:"#0F71EF"}),f.jsx("path",{d:"M11.7165 3.97865C11.7165 2.24539 13.1216 0.840302 14.8549 0.840302C16.5881 0.840302 17.9932 2.24539 17.9932 3.97865C17.9932 5.71192 16.5881 7.117 14.8549 7.117C13.1216 7.117 11.7165 5.71192 11.7165 3.97865Z",fill:"#03234D"})]}),f.jsx("span",{children:"اعلان ها"}),f.jsx("div",{className:"notification-badge",children:"3"})]})]})]}),f.jsxs("div",{className:"admin-content-wrapper",children:[f.jsxs("div",{className:"admin-sidebar",children:[f.jsxs("div",{className:"sidebar-menu",children:[f.jsx("span",{className:"menu-title3",children:"منوی اصلی"}),f.jsxs("div",{id:"dashboard-menu-item",className:`menu-item ${e==="dashboard"?"active":""}`,onClick:()=>Fe("dashboard","داشبورد"),children:[f.jsx("span",{className:"menu-icon",children:f.jsxs("svg",{width:"15",height:"16",viewBox:"0 0 15 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{d:"M3.42847 1.06232C3.98584 1.06232 4.37472 1.06308 4.67847 1.08478C4.97661 1.1061 5.14999 1.14536 5.28198 1.20294C5.67214 1.3732 5.98382 1.68484 6.15405 2.07501C6.21162 2.20702 6.2509 2.38036 6.27222 2.67853C6.29392 2.9823 6.29468 3.3711 6.29468 3.92853C6.29468 4.4859 6.29392 4.87478 6.27222 5.17853C6.25089 5.47668 6.21164 5.65005 6.15405 5.78204C5.98381 6.17222 5.67216 6.48387 5.28198 6.65411C5.14999 6.7117 4.97662 6.75095 4.67847 6.77228C4.37472 6.79398 3.98584 6.79474 3.42847 6.79474C2.87104 6.79474 2.48224 6.79398 2.17847 6.77228C1.8803 6.75096 1.70695 6.71168 1.57495 6.65411C1.18478 6.48388 0.873136 6.1722 0.702881 5.78204C0.645295 5.65006 0.606041 5.47667 0.584717 5.17853C0.563015 4.87478 0.562256 4.4859 0.562256 3.92853C0.562256 3.3711 0.563014 2.9823 0.584717 2.67853C0.606034 2.38031 0.645297 2.20702 0.702881 2.07501C0.873126 1.68481 1.18474 1.37319 1.57495 1.20294C1.70696 1.14536 1.88025 1.1061 2.17847 1.08478C2.48224 1.06308 2.87104 1.06232 3.42847 1.06232Z",stroke:"black",strokeWidth:"1.12501"}),f.jsx("path",{d:"M3.42847 9.2049C3.98584 9.2049 4.37472 9.20565 4.67847 9.22736C4.97661 9.24868 5.14999 9.28793 5.28198 9.34552C5.67214 9.51578 5.98382 9.82742 6.15405 10.2176C6.21162 10.3496 6.2509 10.5229 6.27222 10.8211C6.29392 11.1249 6.29468 11.5137 6.29468 12.0711C6.29468 12.6285 6.29392 13.0174 6.27222 13.3211C6.25089 13.6193 6.21164 13.7926 6.15405 13.9246C5.98381 14.3148 5.67216 14.6264 5.28198 14.7967C5.14999 14.8543 4.97662 14.8935 4.67847 14.9149C4.37472 14.9366 3.98584 14.9373 3.42847 14.9373C2.87104 14.9373 2.48224 14.9366 2.17847 14.9149C1.8803 14.8935 1.70695 14.8543 1.57495 14.7967C1.18478 14.6265 0.873136 14.3148 0.702881 13.9246C0.645295 13.7926 0.606041 13.6192 0.584717 13.3211C0.563015 13.0174 0.562256 12.6285 0.562256 12.0711C0.562256 11.5137 0.563014 11.1249 0.584717 10.8211C0.606034 10.5229 0.645297 10.3496 0.702881 10.2176C0.873126 9.82738 1.18474 9.51577 1.57495 9.34552C1.70696 9.28794 1.88025 9.24867 2.17847 9.22736C2.48224 9.20565 2.87104 9.2049 3.42847 9.2049Z",stroke:"black",strokeWidth:"1.12501"}),f.jsx("path",{d:"M11.5715 1.06232C12.1289 1.06232 12.5178 1.06308 12.8215 1.08478C13.1197 1.1061 13.2931 1.14536 13.425 1.20294C13.8152 1.3732 14.1269 1.68484 14.2971 2.07501C14.3547 2.20702 14.394 2.38036 14.4153 2.67853C14.437 2.9823 14.4377 3.3711 14.4377 3.92853C14.4377 4.4859 14.437 4.87478 14.4153 5.17853C14.394 5.47668 14.3547 5.65005 14.2971 5.78204C14.1269 6.17222 13.8152 6.48387 13.425 6.65411C13.2931 6.7117 13.1197 6.75095 12.8215 6.77228C12.5178 6.79398 12.1289 6.79474 11.5715 6.79474C11.0141 6.79474 10.6253 6.79398 10.3215 6.77228C10.0234 6.75096 9.85002 6.71168 9.71802 6.65411C9.32785 6.48388 9.0162 6.1722 8.84595 5.78204C8.78836 5.65006 8.74911 5.47667 8.72778 5.17853C8.70608 4.87478 8.70532 4.4859 8.70532 3.92853C8.70532 3.3711 8.70608 2.9823 8.72778 2.67853C8.7491 2.38031 8.78836 2.20702 8.84595 2.07501C9.01619 1.68481 9.32781 1.37319 9.71802 1.20294C9.85003 1.14536 10.0233 1.1061 10.3215 1.08478C10.6253 1.06308 11.0141 1.06232 11.5715 1.06232Z",stroke:"black",strokeWidth:"1.12501"}),f.jsx("path",{d:"M11.5715 9.2049C12.1289 9.2049 12.5178 9.20565 12.8215 9.22736C13.1197 9.24868 13.2931 9.28793 13.425 9.34552C13.8152 9.51578 14.1269 9.82742 14.2971 10.2176C14.3547 10.3496 14.394 10.5229 14.4153 10.8211C14.437 11.1249 14.4377 11.5137 14.4377 12.0711C14.4377 12.6285 14.437 13.0174 14.4153 13.3211C14.394 13.6193 14.3547 13.7926 14.2971 13.9246C14.1269 14.3148 13.8152 14.6264 13.425 14.7967C13.2931 14.8543 13.1197 14.8935 12.8215 14.9149C12.5178 14.9366 12.1289 14.9373 11.5715 14.9373C11.0141 14.9373 10.6253 14.9366 10.3215 14.9149C10.0234 14.8935 9.85002 14.8543 9.71802 14.7967C9.32785 14.6265 9.0162 14.3148 8.84595 13.9246C8.78836 13.7926 8.74911 13.6192 8.72778 13.3211C8.70608 13.0174 8.70532 12.6285 8.70532 12.0711C8.70532 11.5137 8.70608 11.1249 8.72778 10.8211C8.7491 10.5229 8.78836 10.3496 8.84595 10.2176C9.01619 9.82738 9.32781 9.51577 9.71802 9.34552C9.85003 9.28794 10.0233 9.24867 10.3215 9.22736C10.6253 9.20565 11.0141 9.2049 11.5715 9.2049Z",stroke:"black",strokeWidth:"1.12501"})]})}),f.jsx("span",{children:" داشبورد  "})]}),f.jsxs("div",{className:`menu-item ${e==="reports"?"active":""}`,onClick:()=>Fe("reports","گزارشات"),children:[f.jsx("span",{className:"menu-icon",children:f.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.19768 9.99579C3.19768 9.71643 3.42414 9.48997 3.70349 9.48997H9.09885C9.3782 9.48997 9.60466 9.71643 9.60466 9.99579C9.60466 10.2751 9.3782 10.5016 9.09885 10.5016H3.70349C3.42414 10.5016 3.19768 10.2751 3.19768 9.99579Z",fill:"#858585"}),f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.19768 12.3563C3.19768 12.0769 3.42414 11.8504 3.70349 11.8504H7.4128C7.69215 11.8504 7.91862 12.0769 7.91862 12.3563C7.91862 12.6356 7.69215 12.8621 7.4128 12.8621H3.70349C3.42414 12.8621 3.19768 12.6356 3.19768 12.3563Z",fill:"#858585"}),f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.91862 2.12812C7.60811 2.07536 7.18483 2.07136 6.42126 2.07136C5.12862 2.07136 4.20981 2.07242 3.51321 2.16565C2.83077 2.25699 2.43864 2.42831 2.15361 2.71334C1.86819 2.99876 1.69711 3.38968 1.60589 4.06821C1.5127 4.76129 1.51163 5.6749 1.51163 6.9609V9.65858C1.51163 10.9446 1.5127 11.8582 1.60589 12.5513C1.69711 13.2298 1.86819 13.6207 2.15361 13.9061C2.43903 14.1916 2.82996 14.3626 3.50848 14.4539C4.20156 14.547 5.11517 14.5481 6.40117 14.5481H9.09885C10.3848 14.5481 11.2985 14.547 11.9915 14.4539C12.6701 14.3626 13.061 14.1916 13.3464 13.9061C13.6318 13.6207 13.8029 13.2298 13.8941 12.5513C13.9873 11.8582 13.9884 10.9446 13.9884 9.65858V9.36379C13.9884 8.32787 13.9811 7.83679 13.8712 7.46671H11.7603C10.9963 7.46673 10.372 7.46674 9.87908 7.40047C9.36385 7.3312 8.91716 7.18129 8.5606 6.82473C8.20404 6.46817 8.05413 6.02148 7.98486 5.50625C7.91859 5.01334 7.9186 4.38901 7.91862 3.62501V2.12812ZM8.93025 2.65099V3.5888C8.93025 4.39791 8.93132 4.95386 8.98746 5.37146C9.04165 5.7745 9.13866 5.97213 9.27593 6.1094C9.4132 6.24667 9.61083 6.34368 10.0139 6.39786C10.4315 6.45401 10.9874 6.45508 11.7965 6.45508H13.1585C12.9586 6.26116 12.7024 6.0288 12.3698 5.72942L9.69991 3.32653C9.37256 3.03192 9.12892 2.81445 8.93025 2.65099ZM6.5195 1.05971C7.4533 1.05946 8.0566 1.0593 8.61187 1.27237C9.16712 1.48545 9.61354 1.88744 10.3042 2.50939C10.3281 2.53086 10.3522 2.5526 10.3766 2.57459L13.0465 4.97748C13.0749 5.00306 13.103 5.02832 13.1308 5.05326C13.929 5.77128 14.4453 6.23558 14.7229 6.85904C15.0006 7.48249 15.0004 8.17678 15 9.25047C15 9.28778 15 9.32555 15 9.36379V9.69662C15 10.936 15 11.9178 14.8967 12.6861C14.7904 13.4768 14.5665 14.1168 14.0617 14.6215C13.557 15.1262 12.917 15.3502 12.1263 15.4565C11.358 15.5598 10.3763 15.5598 9.1369 15.5597H6.36313C5.1237 15.5598 4.142 15.5598 3.37369 15.4565C2.58298 15.3502 1.94299 15.1262 1.43828 14.6215C0.933571 14.1168 0.709585 13.4768 0.603277 12.6861C0.499981 11.9178 0.49999 10.936 0.5 9.69663V6.92285C0.49999 5.68343 0.499981 4.70172 0.603277 3.93341C0.709585 3.14271 0.933571 2.50272 1.43828 1.99801C1.94339 1.4929 2.58552 1.26916 3.37901 1.16296C4.15052 1.05971 5.13711 1.05972 6.38331 1.05973L6.42126 1.05973C6.45442 1.05973 6.48716 1.05972 6.5195 1.05971Z",fill:"#858585"}),f.jsx("path",{d:"M7.91862 2.12812H8.01862V2.04368L7.93537 2.02953L7.91862 2.12812ZM3.51321 2.16565L3.49994 2.06654L3.51321 2.16565ZM2.15361 2.71334L2.0829 2.64263L2.15361 2.71334ZM1.60589 4.06821L1.50678 4.05489H1.50678L1.60589 4.06821ZM1.60589 12.5513L1.50678 12.5646H1.50678L1.60589 12.5513ZM2.15361 13.9061L2.22432 13.8354H2.22432L2.15361 13.9061ZM3.50848 14.4539L3.52181 14.3548L3.50848 14.4539ZM11.9915 14.4539L11.9782 14.3548L11.9915 14.4539ZM13.8941 12.5513L13.795 12.5379L13.8941 12.5513ZM13.8712 7.46671L13.967 7.43823L13.9458 7.36671H13.8712V7.46671ZM11.7603 7.46671V7.36671H11.7603L11.7603 7.46671ZM9.87908 7.40047L9.86575 7.49958L9.87908 7.40047ZM8.5606 6.82473L8.48989 6.89544L8.5606 6.82473ZM7.98486 5.50625L7.88575 5.51958L7.98486 5.50625ZM7.91862 3.62501L8.01862 3.62501V3.62501H7.91862ZM8.93025 2.65099L8.99378 2.57376L8.83025 2.43921V2.65099H8.93025ZM8.98746 5.37146L8.88836 5.38478L8.98746 5.37146ZM10.0139 6.39786L10.0272 6.29876L10.0139 6.39786ZM13.1585 6.45508V6.55508H13.4052L13.2281 6.38331L13.1585 6.45508ZM12.3698 5.72942L12.3029 5.80375L12.3698 5.72942ZM9.69991 3.32653L9.7668 3.2522L9.69991 3.32653ZM8.61187 1.27237L8.64769 1.17901V1.17901L8.61187 1.27237ZM6.5195 1.05971L6.51953 1.15971L6.5195 1.05971ZM10.3042 2.50939L10.2373 2.5837L10.2373 2.5837L10.3042 2.50939ZM10.3766 2.57459L10.3098 2.64892V2.64892L10.3766 2.57459ZM13.0465 4.97748L12.9796 5.05181V5.05181L13.0465 4.97748ZM13.1308 5.05326L13.1976 4.97891V4.97891L13.1308 5.05326ZM14.7229 6.85904L14.6316 6.89972V6.89972L14.7229 6.85904ZM15 9.25047L15.1 9.2505V9.2505L15 9.25047ZM15 9.69662H14.9V9.69662L15 9.69662ZM14.8967 12.6861L14.7976 12.6727L14.8967 12.6861ZM14.0617 14.6215L13.991 14.5508L13.991 14.5508L14.0617 14.6215ZM12.1263 15.4565L12.113 15.3574L12.1263 15.4565ZM9.1369 15.5597L9.1369 15.4597H9.1369V15.5597ZM6.36313 15.5597V15.4597H6.36313L6.36313 15.5597ZM3.37369 15.4565L3.38701 15.3574L3.37369 15.4565ZM1.43828 14.6215L1.50899 14.5508V14.5508L1.43828 14.6215ZM0.603277 12.6861L0.702386 12.6727H0.702386L0.603277 12.6861ZM0.5 9.69663L0.6 9.69663V9.69663H0.5ZM0.5 6.92285H0.6V6.92285L0.5 6.92285ZM0.603277 3.93341L0.504169 3.92009L0.603277 3.93341ZM1.43828 1.99801L1.50899 2.06872L1.43828 1.99801ZM3.37901 1.16296L3.36575 1.06385L3.37901 1.16296ZM6.38331 1.05973L6.38331 1.15973H6.38331L6.38331 1.05973ZM6.42126 1.05973L6.42126 1.15973H6.42126V1.05973ZM3.70349 9.48997V9.38997C3.36891 9.38997 3.09768 9.6612 3.09768 9.99579H3.19768H3.29768C3.29768 9.77166 3.47937 9.58997 3.70349 9.58997V9.48997ZM9.09885 9.48997V9.38997H3.70349V9.48997V9.58997H9.09885V9.48997ZM9.60466 9.99579H9.70467C9.70467 9.6612 9.43343 9.38997 9.09885 9.38997V9.48997V9.58997C9.32298 9.58997 9.50466 9.77166 9.50466 9.99579H9.60466ZM9.09885 10.5016V10.6016C9.43343 10.6016 9.70467 10.3304 9.70467 9.99579H9.60466H9.50466C9.50466 10.2199 9.32298 10.4016 9.09885 10.4016V10.5016ZM3.70349 10.5016V10.6016H9.09885V10.5016V10.4016H3.70349V10.5016ZM3.19768 9.99579H3.09768C3.09768 10.3304 3.36891 10.6016 3.70349 10.6016V10.5016V10.4016C3.47937 10.4016 3.29768 10.2199 3.29768 9.99579H3.19768ZM3.70349 11.8504V11.7504C3.36891 11.7504 3.09768 12.0217 3.09768 12.3563H3.19768H3.29768C3.29768 12.1321 3.47937 11.9504 3.70349 11.9504V11.8504ZM7.4128 11.8504V11.7504H3.70349V11.8504V11.9504H7.4128V11.8504ZM7.91862 12.3563H8.01862C8.01862 12.0217 7.74738 11.7504 7.4128 11.7504V11.8504V11.9504C7.63693 11.9504 7.81862 12.1321 7.81862 12.3563H7.91862ZM7.4128 12.8621V12.9621C7.74738 12.9621 8.01862 12.6908 8.01862 12.3563H7.91862H7.81862C7.81862 12.5804 7.63693 12.7621 7.4128 12.7621V12.8621ZM3.70349 12.8621V12.9621H7.4128V12.8621V12.7621H3.70349V12.8621ZM3.19768 12.3563H3.09768C3.09768 12.6908 3.36891 12.9621 3.70349 12.9621V12.8621V12.7621C3.47937 12.7621 3.29768 12.5804 3.29768 12.3563H3.19768ZM6.42126 2.07136V2.17136C7.18843 2.17136 7.60166 2.17569 7.90186 2.22671L7.91862 2.12812L7.93537 2.02953C7.61456 1.97502 7.18123 1.97136 6.42126 1.97136V2.07136ZM3.51321 2.16565L3.52647 2.26477C4.21489 2.17263 5.12576 2.17136 6.42126 2.17136V2.07136V1.97136C5.13148 1.97136 4.20473 1.97221 3.49994 2.06654L3.51321 2.16565ZM2.15361 2.71334L2.22432 2.78405C2.48762 2.52076 2.85506 2.35463 3.52647 2.26477L3.51321 2.16565L3.49994 2.06654C2.80648 2.15935 2.38966 2.33587 2.0829 2.64263L2.15361 2.71334ZM1.60589 4.06821L1.70499 4.08153C1.79472 3.41414 1.96056 3.04781 2.22432 2.78405L2.15361 2.71334L2.0829 2.64263C1.77583 2.9497 1.5995 3.36522 1.50678 4.05489L1.60589 4.06821ZM1.51163 6.9609H1.61163C1.61163 5.67203 1.61292 4.76639 1.70499 4.08153L1.60589 4.06821L1.50678 4.05489C1.41249 4.75618 1.41163 5.67777 1.41163 6.9609H1.51163ZM1.51163 9.65858H1.61163V6.9609H1.51163H1.41163V9.65858H1.51163ZM1.60589 12.5513L1.70499 12.5379C1.61292 11.8531 1.61163 10.9474 1.61163 9.65858H1.51163H1.41163C1.41163 10.9417 1.41249 11.8633 1.50678 12.5646L1.60589 12.5513ZM2.15361 13.9061L2.22432 13.8354C1.96056 13.5717 1.79472 13.2053 1.70499 12.5379L1.60589 12.5513L1.50678 12.5646C1.5995 13.2543 1.77583 13.6698 2.0829 13.9768L2.15361 13.9061ZM3.50848 14.4539L3.52181 14.3548C2.85442 14.265 2.48809 14.0992 2.22432 13.8354L2.15361 13.9061L2.0829 13.9768C2.38998 14.2839 2.8055 14.4602 3.49516 14.553L3.50848 14.4539ZM6.40117 14.5481V14.4481C5.11231 14.4481 4.20666 14.4468 3.52181 14.3548L3.50848 14.4539L3.49516 14.553C4.19646 14.6473 5.11804 14.6481 6.40117 14.6481V14.5481ZM9.09885 14.5481V14.4481H6.40117V14.5481V14.6481H9.09885V14.5481ZM11.9915 14.4539L11.9782 14.3548C11.2934 14.4468 10.3877 14.4481 9.09885 14.4481V14.5481V14.6481C10.382 14.6481 11.3036 14.6473 12.0049 14.553L11.9915 14.4539ZM13.3464 13.9061L13.2757 13.8354C13.0119 14.0992 12.6456 14.265 11.9782 14.3548L11.9915 14.4539L12.0049 14.553C12.6945 14.4602 13.11 14.2839 13.4171 13.9768L13.3464 13.9061ZM13.8941 12.5513L13.795 12.5379C13.7053 13.2053 13.5395 13.5717 13.2757 13.8354L13.3464 13.9061L13.4171 13.9768C13.7242 13.6698 13.9005 13.2543 13.9932 12.5646L13.8941 12.5513ZM13.9884 9.65858H13.8884C13.8884 10.9474 13.8871 11.8531 13.795 12.5379L13.8941 12.5513L13.9932 12.5646C14.0875 11.8633 14.0884 10.9417 14.0884 9.65858H13.9884ZM13.9884 9.36379H13.8884V9.65858H13.9884H14.0884V9.36379H13.9884ZM13.8712 7.46671L13.7753 7.49519C13.8801 7.8479 13.8884 8.32115 13.8884 9.36379H13.9884H14.0884C14.0884 8.33459 14.0821 7.82568 13.967 7.43823L13.8712 7.46671ZM9.87908 7.40047L9.86575 7.49958C10.3668 7.56695 10.9989 7.56673 11.7603 7.56671L11.7603 7.46671L11.7603 7.36671C10.9937 7.36673 10.3772 7.36654 9.8924 7.30137L9.87908 7.40047ZM8.5606 6.82473L8.48989 6.89544C8.86815 7.2737 9.33949 7.42883 9.86575 7.49958L9.87908 7.40047L9.8924 7.30137C9.38822 7.23358 8.96617 7.08888 8.63131 6.75402L8.5606 6.82473ZM7.98486 5.50625L7.88575 5.51958C7.9565 6.04584 8.11163 6.51718 8.48989 6.89544L8.5606 6.82473L8.63131 6.75402C8.29645 6.41916 8.15175 5.99711 8.08396 5.49293L7.98486 5.50625ZM7.91862 3.62501L7.81862 3.62501C7.8186 4.38645 7.81838 5.01852 7.88575 5.51958L7.98486 5.50625L8.08396 5.49293C8.01879 5.00817 8.0186 4.39158 8.01862 3.62501L7.91862 3.62501ZM8.93025 3.5888H9.03025V2.65099H8.93025H8.83025V3.5888H8.93025ZM8.98746 5.37146L9.08657 5.35813C9.03154 4.94876 9.03025 4.4008 9.03025 3.5888H8.93025H8.83025C8.83025 4.39502 8.83111 4.95896 8.88836 5.38478L8.98746 5.37146ZM9.27593 6.1094L9.34664 6.03869C9.231 5.92306 9.13926 5.75 9.08657 5.35813L8.98746 5.37146L8.88836 5.38478C8.94405 5.799 9.04631 6.0212 9.20522 6.18011L9.27593 6.1094ZM10.0139 6.39786L10.0272 6.29876C9.63533 6.24607 9.46227 6.15433 9.34664 6.03869L9.27593 6.1094L9.20522 6.18011C9.36413 6.33902 9.58633 6.44128 10.0005 6.49697L10.0139 6.39786ZM11.7965 6.45508V6.35508C10.9845 6.35508 10.4366 6.3538 10.0272 6.29876L10.0139 6.39786L10.0005 6.49697C10.4264 6.55422 10.9903 6.55508 11.7965 6.55508V6.45508ZM13.1585 6.45508V6.35508H11.7965V6.45508V6.55508H13.1585V6.45508ZM12.3698 5.72942L12.3029 5.80375C12.6358 6.10334 12.8905 6.33446 13.0889 6.52686L13.1585 6.45508L13.2281 6.38331C13.0266 6.18786 12.7691 5.95425 12.4367 5.65509L12.3698 5.72942ZM9.69991 3.32653L9.63301 3.40086L12.3029 5.80375L12.3698 5.72942L12.4367 5.65509L9.7668 3.2522L9.69991 3.32653ZM8.93025 2.65099L8.86671 2.72821C9.06335 2.89 9.30529 3.10591 9.63301 3.40086L9.69991 3.32653L9.7668 3.2522C9.43983 2.95792 9.19449 2.73889 8.99378 2.57376L8.93025 2.65099ZM8.61187 1.27237L8.64769 1.17901C8.07151 0.957909 7.44742 0.959461 6.51948 0.959709L6.5195 1.05971L6.51953 1.15971C7.45919 1.15946 8.0417 1.16069 8.57604 1.36574L8.61187 1.27237ZM10.3042 2.50939L10.3711 2.43508C9.68477 1.81701 9.22386 1.40011 8.64769 1.17901L8.61187 1.27237L8.57604 1.36574C9.11039 1.57079 9.54232 1.95787 10.2373 2.5837L10.3042 2.50939ZM10.3766 2.57459L10.4435 2.50026C10.4191 2.47828 10.395 2.45655 10.3711 2.43508L10.3042 2.50939L10.2373 2.5837C10.2612 2.60517 10.2853 2.62691 10.3098 2.64892L10.3766 2.57459ZM13.0465 4.97748L13.1134 4.90315L10.4435 2.50026L10.3766 2.57459L10.3098 2.64892L12.9796 5.05181L13.0465 4.97748ZM13.1308 5.05326L13.1976 4.97891C13.1699 4.95396 13.1418 4.92872 13.1134 4.90315L13.0465 4.97748L12.9796 5.05181C13.0081 5.0774 13.0362 5.10267 13.0639 5.12761L13.1308 5.05326ZM14.7229 6.85904L14.8143 6.81836C14.5261 6.17139 13.9908 5.69234 13.1976 4.97891L13.1308 5.05326L13.0639 5.12761C13.8673 5.85022 14.3644 6.29977 14.6316 6.89972L14.7229 6.85904ZM15 9.25047L15.1 9.2505C15.1004 8.18368 15.1024 7.46531 14.8143 6.81836L14.7229 6.85904L14.6316 6.89972C14.8988 7.49967 14.9004 8.16989 14.9 9.25043L15 9.25047ZM15 9.36379H15.1C15.1 9.32556 15.1 9.28781 15.1 9.2505L15 9.25047L14.9 9.25043C14.9 9.28774 14.9 9.32553 14.9 9.36379H15ZM14.8967 12.6861L14.9959 12.6994C15.1002 11.9229 15.1 10.9334 15.1 9.69662L15 9.69662L14.9 9.69662C14.9 10.9387 14.8998 11.9126 14.7976 12.6727L14.8967 12.6861ZM14.0617 14.6215L14.1324 14.6922C14.6589 14.1658 14.8881 13.5012 14.9959 12.6994L14.8967 12.6861L14.7976 12.6727C14.6928 13.4524 14.474 14.0677 13.991 14.5508L14.0617 14.6215ZM12.1263 15.4565L12.1397 15.5556C12.9414 15.4478 13.606 15.2186 14.1325 14.6922L14.0617 14.6215L13.991 14.5508C13.508 15.0338 12.8927 15.2525 12.113 15.3574L12.1263 15.4565ZM9.1369 15.5597L9.13689 15.6597C10.3737 15.6598 11.3632 15.66 12.1397 15.5556L12.1263 15.4565L12.113 15.3574C11.3529 15.4596 10.379 15.4598 9.1369 15.4597L9.1369 15.5597ZM3.37369 15.4565L3.36036 15.5556C4.13684 15.66 5.12637 15.6598 6.36313 15.6597L6.36313 15.5597L6.36313 15.4597C5.12104 15.4598 4.14715 15.4596 3.38701 15.3574L3.37369 15.4565ZM1.43828 14.6215L1.36757 14.6922C1.89397 15.2186 2.5586 15.4478 3.36036 15.5556L3.37369 15.4565L3.38701 15.3574C2.60736 15.2525 1.99201 15.0338 1.50899 14.5508L1.43828 14.6215ZM0.603277 12.6861L0.504169 12.6994C0.611963 13.5012 0.841169 14.1658 1.36757 14.6922L1.43828 14.6215L1.50899 14.5508C1.02597 14.0677 0.807206 13.4524 0.702386 12.6727L0.603277 12.6861ZM0.5 9.69663L0.4 9.69662C0.39999 10.9334 0.399774 11.9229 0.504169 12.6994L0.603277 12.6861L0.702386 12.6727C0.600188 11.9126 0.59999 10.9387 0.6 9.69663L0.5 9.69663ZM0.603277 3.93341L0.504169 3.92009C0.399774 4.69657 0.39999 5.68609 0.4 6.92285L0.5 6.92285L0.6 6.92285C0.59999 5.68077 0.600188 4.70687 0.702386 3.94674L0.603277 3.93341ZM1.43828 1.99801L1.36757 1.9273C0.841169 2.4537 0.611963 3.11833 0.504169 3.92009L0.603277 3.93341L0.702386 3.94674C0.807206 3.16709 1.02597 2.55174 1.50899 2.06872L1.43828 1.99801ZM3.37901 1.16296L3.36575 1.06385C2.56131 1.17151 1.89445 1.40042 1.36757 1.9273L1.43828 1.99801L1.50899 2.06872C1.99233 1.58538 2.60973 1.36681 3.39228 1.26208L3.37901 1.16296ZM6.38331 1.05973L6.38331 0.959726C5.13976 0.959716 4.14539 0.959502 3.36575 1.06385L3.37901 1.16296L3.39228 1.26208C4.15565 1.15991 5.13446 1.15972 6.38331 1.15973L6.38331 1.05973ZM6.42126 1.05973L6.42127 0.959727L6.38331 0.959726L6.38331 1.05973L6.38331 1.15973L6.42126 1.15973L6.42126 1.05973ZM6.5195 1.05971L6.51948 0.959709C6.48713 0.959718 6.4544 0.959727 6.42126 0.959727V1.05973V1.15973C6.45443 1.15973 6.48719 1.15972 6.51953 1.15971L6.5195 1.05971ZM11.7603 7.46671V7.56671H13.8712V7.46671V7.36671H11.7603V7.46671ZM7.91862 2.12812H7.81862V3.62501H7.91862H8.01862V2.12812H7.91862ZM15 9.69662H15.1V9.36379H15H14.9V9.69662H15ZM6.36313 15.5597V15.6597H9.1369V15.5597V15.4597H6.36313V15.5597ZM0.5 6.92285H0.4V9.69663H0.5H0.6V6.92285H0.5Z",fill:"#858585"})]})}),f.jsx("span",{children:"گزارشات"}),f.jsx("svg",{className:"submenu-arrow",width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.95363 5.98434C3.13334 5.77467 3.44899 5.75039 3.65866 5.9301L7.99993 9.65119L12.3412 5.9301C12.5509 5.75039 12.8665 5.77467 13.0462 5.98434C13.2259 6.194 13.2017 6.50965 12.992 6.68936L8.32532 10.6894C8.13808 10.8499 7.86178 10.8499 7.67453 10.6894L3.00787 6.68936C2.7982 6.50965 2.77392 6.194 2.95363 5.98434Z",fill:"#858585"})})]}),f.jsxs("div",{className:`menu-item ${e==="mapmanage"?"active":""}`,onClick:()=>Fe("mapmanage","مدیریت نقشه"),children:[f.jsx("span",{className:"menu-icon",children:f.jsxs("svg",{width:"17",height:"15",viewBox:"0 0 17 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{d:"M6.88062 0.408569C7.42203 0.308727 7.92904 0.444893 8.45972 0.695679C8.97962 0.941402 9.59269 1.3324 10.3533 1.8158L11.6101 2.61462H9.59058C8.90188 2.17737 8.40702 1.86664 7.9978 1.67322C7.56467 1.46853 7.30152 1.43067 7.0769 1.47205C6.9783 1.49026 6.8806 1.5191 6.78589 1.55798C6.56384 1.64924 6.34362 1.83652 6.05542 2.26111C5.983 2.3678 5.909 2.48532 5.83179 2.61462H5.36597C5.07738 2.61462 4.79679 2.65391 4.52905 2.72791C4.75617 2.30825 4.96049 1.94894 5.16089 1.65369C5.50074 1.15305 5.86891 0.765878 6.37476 0.557983C6.53798 0.490934 6.70771 0.440514 6.88062 0.408569Z",fill:"#858585"}),f.jsx("path",{d:"M6.88062 0.408569L6.86248 0.310228L6.86245 0.310233L6.88062 0.408569ZM8.45972 0.695679L8.50245 0.605268L8.50244 0.605266L8.45972 0.695679ZM10.3533 1.8158L10.4069 1.7314L10.4069 1.7314L10.3533 1.8158ZM11.6101 2.61462V2.71462H11.9539L11.6637 2.53023L11.6101 2.61462ZM9.59058 2.61462L9.53698 2.69905L9.56151 2.71462H9.59058V2.61462ZM7.9978 1.67322L8.04054 1.58281L8.04053 1.58281L7.9978 1.67322ZM7.0769 1.47205L7.05879 1.3737L7.05874 1.37371L7.0769 1.47205ZM6.78589 1.55798L6.74791 1.46548L6.74788 1.46549L6.78589 1.55798ZM6.05542 2.26111L5.97268 2.20495L5.97268 2.20495L6.05542 2.26111ZM5.83179 2.61462V2.71462H5.88855L5.91765 2.66589L5.83179 2.61462ZM4.52905 2.72791L4.44111 2.68031L4.32932 2.88686L4.55569 2.82429L4.52905 2.72791ZM5.16089 1.65369L5.07815 1.59752L5.07815 1.59753L5.16089 1.65369ZM6.37476 0.557983L6.33676 0.465483L6.33674 0.46549L6.37476 0.557983ZM6.88062 0.408569L6.89875 0.506911C7.41089 0.412467 7.89535 0.539576 8.41699 0.786091L8.45972 0.695679L8.50244 0.605266C7.96273 0.350211 7.43317 0.204987 6.86248 0.310228L6.88062 0.408569ZM8.45972 0.695679L8.41699 0.786089C8.92991 1.02851 9.53684 1.4154 10.2996 1.90019L10.3533 1.8158L10.4069 1.7314C9.64853 1.2494 9.02933 0.85429 8.50245 0.605268L8.45972 0.695679ZM10.3533 1.8158L10.2996 1.90019L11.5565 2.69902L11.6101 2.61462L11.6637 2.53023L10.4069 1.7314L10.3533 1.8158ZM11.6101 2.61462V2.51462H9.59058V2.61462V2.71462H11.6101V2.61462ZM9.59058 2.61462L9.64418 2.5302C8.95734 2.09413 8.45661 1.77947 8.04054 1.58281L7.9978 1.67322L7.95507 1.76363C8.35742 1.9538 8.84643 2.26062 9.53698 2.69905L9.59058 2.61462ZM7.9978 1.67322L8.04053 1.58281C7.5982 1.37377 7.31255 1.32695 7.05879 1.3737L7.0769 1.47205L7.09502 1.57039C7.29048 1.53438 7.53114 1.56329 7.95508 1.76363L7.9978 1.67322ZM7.0769 1.47205L7.05874 1.37371C6.95321 1.39321 6.84889 1.42402 6.74791 1.46548L6.78589 1.55798L6.82387 1.65049C6.91232 1.61418 7.00338 1.58732 7.09507 1.57038L7.0769 1.47205ZM6.78589 1.55798L6.74788 1.46549C6.49967 1.5675 6.26575 1.77319 5.97268 2.20495L6.05542 2.26111L6.13816 2.31727C6.42149 1.89986 6.62801 1.73098 6.8239 1.65048L6.78589 1.55798ZM6.05542 2.26111L5.97268 2.20495C5.89891 2.31363 5.82386 2.43285 5.74593 2.56336L5.83179 2.61462L5.91765 2.66589C5.99414 2.53779 6.06709 2.42197 6.13816 2.31727L6.05542 2.26111ZM5.83179 2.61462V2.51462H5.36597V2.61462V2.71462H5.83179V2.61462ZM5.36597 2.61462V2.51462C5.06826 2.51462 4.77871 2.55515 4.50241 2.63152L4.52905 2.72791L4.55569 2.82429C4.81486 2.75266 5.0865 2.71462 5.36597 2.71462V2.61462ZM4.52905 2.72791L4.617 2.7755C4.84389 2.35626 5.04622 2.00069 5.24363 1.70985L5.16089 1.65369L5.07815 1.59753C4.87475 1.89719 4.66845 2.26023 4.44111 2.68031L4.52905 2.72791ZM5.16089 1.65369L5.24363 1.70985C5.57864 1.21633 5.93312 0.847606 6.41277 0.650477L6.37476 0.557983L6.33674 0.46549C5.8047 0.684151 5.42283 1.08977 5.07815 1.59752L5.16089 1.65369ZM6.37476 0.557983L6.41275 0.650483C6.56976 0.585989 6.73285 0.537562 6.89878 0.506905L6.88062 0.408569L6.86245 0.310233C6.68257 0.343466 6.5062 0.395879 6.33676 0.465483L6.37476 0.557983Z",fill:"#858585"}),f.jsx("path",{d:"M12.3828 2.67065C14.3482 2.67083 15.9225 4.27192 15.9961 6.24194H15.999V6.34839C15.9991 6.36096 16 6.37387 16 6.38647V11.1472C16 11.1573 15.9991 11.1674 15.999 11.1775V11.2917H15.9961C15.9221 13.2615 14.348 14.8629 12.3828 14.863H4.69336C2.68013 14.863 1.07634 13.1827 1.07617 11.1472V6.38647C1.07617 4.35087 2.68002 2.67065 4.69336 2.67065H12.3828ZM4.69336 3.75269C3.30912 3.75269 2.1582 4.91572 2.1582 6.38647V11.1472C2.15837 12.6178 3.30922 13.781 4.69336 13.781H12.3828C13.7211 13.7808 14.8384 12.6931 14.9111 11.2917H12.0762C10.6821 11.2917 9.55118 10.1613 9.55078 8.76733C9.55078 7.37298 10.6818 6.24194 12.0762 6.24194H14.9111C14.8388 4.84027 13.7213 3.75286 12.3828 3.75269H4.69336ZM12.0762 7.32397C11.279 7.32397 10.6328 7.97021 10.6328 8.76733C10.6332 9.56411 11.2793 10.2107 12.0762 10.2107H14.918V7.32397H12.0762Z",fill:"#858585"}),f.jsx("path",{d:"M12.3828 2.67065L12.3828 2.57065H12.3828V2.67065ZM15.9961 6.24194L15.8962 6.24568L15.8998 6.34194H15.9961V6.24194ZM15.999 6.24194H16.099V6.14194H15.999V6.24194ZM15.999 6.34839H15.899L15.899 6.34936L15.999 6.34839ZM16 11.1472L16.1 11.1472V11.1472H16ZM15.999 11.1775L15.899 11.1767V11.1775H15.999ZM15.999 11.2917V11.3917H16.099V11.2917H15.999ZM15.9961 11.2917V11.1917H15.8998L15.8962 11.288L15.9961 11.2917ZM12.3828 14.863V14.963H12.3828L12.3828 14.863ZM1.07617 11.1472H0.976172V11.1472L1.07617 11.1472ZM2.1582 11.1472H2.0582V11.1472L2.1582 11.1472ZM12.3828 13.781V13.881H12.3828L12.3828 13.781ZM14.9111 11.2917L15.011 11.2969L15.0165 11.1917H14.9111V11.2917ZM9.55078 8.76733H9.45078V8.76736L9.55078 8.76733ZM14.9111 6.24194V6.34194H15.0164L15.011 6.23679L14.9111 6.24194ZM12.3828 3.75269L12.3828 3.65269H12.3828V3.75269ZM10.6328 8.76733H10.5328V8.76738L10.6328 8.76733ZM14.918 10.2107V10.3107H15.018V10.2107H14.918ZM14.918 7.32397H15.018V7.22397H14.918V7.32397ZM12.3828 2.67065L12.3828 2.77065C14.2913 2.77083 15.8244 4.32618 15.8962 6.24568L15.9961 6.24194L16.096 6.23821C16.0205 4.21766 14.4052 2.57084 12.3828 2.57065L12.3828 2.67065ZM15.9961 6.24194V6.34194H15.999V6.24194V6.14194H15.9961V6.24194ZM15.999 6.24194H15.899V6.34839H15.999H16.099V6.24194H15.999ZM15.999 6.34839L15.899 6.34936C15.8991 6.35725 15.8994 6.36512 15.8996 6.37101C15.8999 6.37746 15.9 6.38219 15.9 6.38647H16H16.1C16.1 6.37816 16.0997 6.37013 16.0995 6.36383C16.0992 6.35698 16.0991 6.3521 16.099 6.34741L15.999 6.34839ZM16 6.38647H15.9V11.1472H16H16.1V6.38647H16ZM16 11.1472L15.9 11.1472C15.9 11.1496 15.8999 11.1525 15.8996 11.1577C15.8994 11.1622 15.8991 11.1694 15.899 11.1767L15.999 11.1775L16.099 11.1783C16.099 11.1755 16.0992 11.1726 16.0994 11.167C16.0997 11.1621 16.1 11.1549 16.1 11.1472L16 11.1472ZM15.999 11.1775H15.899V11.2917H15.999H16.099V11.1775H15.999ZM15.999 11.2917V11.1917H15.9961V11.2917V11.3917H15.999V11.2917ZM15.9961 11.2917L15.8962 11.288C15.8241 13.2072 14.2911 14.7629 12.3828 14.763L12.3828 14.863L12.3828 14.963C14.405 14.9629 16.0202 13.3157 16.096 11.2955L15.9961 11.2917ZM12.3828 14.863V14.763H4.69336V14.863V14.963H12.3828V14.863ZM4.69336 14.863V14.763C2.73844 14.763 1.17634 13.1306 1.17617 11.1472L1.07617 11.1472L0.976172 11.1472C0.976347 13.2348 2.62181 14.963 4.69336 14.963V14.863ZM1.07617 11.1472H1.17617V6.38647H1.07617H0.976172V11.1472H1.07617ZM1.07617 6.38647H1.17617C1.17617 4.40296 2.73833 2.77065 4.69336 2.77065V2.67065V2.57065C2.62171 2.57065 0.976172 4.29877 0.976172 6.38647H1.07617ZM4.69336 2.67065V2.77065H12.3828V2.67065V2.57065H4.69336V2.67065ZM4.69336 3.75269V3.65269C3.25112 3.65269 2.0582 4.86331 2.0582 6.38647H2.1582H2.2582C2.2582 4.96814 3.36712 3.85269 4.69336 3.85269V3.75269ZM2.1582 6.38647H2.0582V11.1472H2.1582H2.2582V6.38647H2.1582ZM2.1582 11.1472L2.0582 11.1472C2.05838 12.6702 3.25121 13.881 4.69336 13.881V13.781V13.681C3.36723 13.681 2.25837 12.5654 2.2582 11.1472L2.1582 11.1472ZM4.69336 13.781V13.881H12.3828V13.781V13.681H4.69336V13.781ZM12.3828 13.781L12.3828 13.881C13.7773 13.8808 14.9357 12.7484 15.011 11.2969L14.9111 11.2917L14.8113 11.2866C14.7412 12.6378 13.6649 13.6808 12.3828 13.681L12.3828 13.781ZM14.9111 11.2917V11.1917H12.0762V11.2917V11.3917H14.9111V11.2917ZM12.0762 11.2917V11.1917C10.7373 11.1917 9.65117 10.1061 9.65078 8.76731L9.55078 8.76733L9.45078 8.76736C9.4512 10.2166 10.6269 11.3917 12.0762 11.3917V11.2917ZM9.55078 8.76733H9.65078C9.65078 7.42821 10.737 6.34194 12.0762 6.34194V6.24194V6.14194C10.6266 6.14194 9.45078 7.31775 9.45078 8.76733H9.55078ZM12.0762 6.24194V6.34194H14.9111V6.24194V6.14194H12.0762V6.24194ZM14.9111 6.24194L15.011 6.23679C14.936 4.78496 13.7775 3.65287 12.3828 3.65269L12.3828 3.75269L12.3828 3.85269C13.6651 3.85285 14.7415 4.89559 14.8113 6.2471L14.9111 6.24194ZM12.3828 3.75269V3.65269H4.69336V3.75269V3.85269H12.3828V3.75269ZM12.0762 7.32397V7.22397C11.2238 7.22397 10.5328 7.91498 10.5328 8.76733H10.6328H10.7328C10.7328 8.02544 11.3343 7.42397 12.0762 7.42397V7.32397ZM10.6328 8.76733L10.5328 8.76738C10.5332 9.6193 11.224 10.3107 12.0762 10.3107V10.2107V10.1107C11.3346 10.1107 10.7332 9.50892 10.7328 8.76728L10.6328 8.76733ZM12.0762 10.2107V10.3107H14.918V10.2107V10.1107H12.0762V10.2107ZM14.918 10.2107H15.018V7.32397H14.918H14.818V10.2107H14.918ZM14.918 7.32397V7.22397H12.0762V7.32397V7.42397H14.918V7.32397Z",fill:"#858585"}),f.jsx("ellipse",{cx:"12.2155",cy:"8.76522",rx:"0.540691",ry:"0.595202",fill:"#858585",stroke:"#858585",strokeWidth:"0.2"})]})}),f.jsx("span",{children:"مدیریت نقشه"})]}),f.jsxs("div",{className:"menu-item with-submenu",children:[f.jsxs("div",{className:`menu-item ${e==="usermanage"?"active":""}`,onClick:()=>{Ce(),Fe("usermanage","مدیریت کاربران")},children:[f.jsx("span",{className:"menu-icon",children:f.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.19768 9.99579C3.19768 9.71643 3.42414 9.48997 3.70349 9.48997H9.09885C9.3782 9.48997 9.60466 9.71643 9.60466 9.99579C9.60466 10.2751 9.3782 10.5016 9.09885 10.5016H3.70349C3.42414 10.5016 3.19768 10.2751 3.19768 9.99579Z",fill:"#858585"}),f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.19768 12.3563C3.19768 12.0769 3.42414 11.8504 3.70349 11.8504H7.4128C7.69215 11.8504 7.91862 12.0769 7.91862 12.3563C7.91862 12.6356 7.69215 12.8621 7.4128 12.8621H3.70349C3.42414 12.8621 3.19768 12.6356 3.19768 12.3563Z",fill:"#858585"}),f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.91862 2.12812C7.60811 2.07536 7.18483 2.07136 6.42126 2.07136C5.12862 2.07136 4.20981 2.07242 3.51321 2.16565C2.83077 2.25699 2.43864 2.42831 2.15361 2.71334C1.86819 2.99876 1.69711 3.38968 1.60589 4.06821C1.5127 4.76129 1.51163 5.6749 1.51163 6.9609V9.65858C1.51163 10.9446 1.5127 11.8582 1.60589 12.5513C1.69711 13.2298 1.86819 13.6207 2.15361 13.9061C2.43903 14.1916 2.82996 14.3626 3.50848 14.4539C4.20156 14.547 5.11517 14.5481 6.40117 14.5481H9.09885C10.3848 14.5481 11.2985 14.547 11.9915 14.4539C12.6701 14.3626 13.061 14.1916 13.3464 13.9061C13.6318 13.6207 13.8029 13.2298 13.8941 12.5513C13.9873 11.8582 13.9884 10.9446 13.9884 9.65858V9.36379C13.9884 8.32787 13.9811 7.83679 13.8712 7.46671H11.7603C10.9963 7.46673 10.372 7.46674 9.87908 7.40047C9.36385 7.3312 8.91716 7.18129 8.5606 6.82473C8.20404 6.46817 8.05413 6.02148 7.98486 5.50625C7.91859 5.01334 7.9186 4.38901 7.91862 3.62501V2.12812ZM8.93025 2.65099V3.5888C8.93025 4.39791 8.93132 4.95386 8.98746 5.37146C9.04165 5.7745 9.13866 5.97213 9.27593 6.1094C9.4132 6.24667 9.61083 6.34368 10.0139 6.39786C10.4315 6.45401 10.9874 6.45508 11.7965 6.45508H13.1585C12.9586 6.26116 12.7024 6.0288 12.3698 5.72942L9.69991 3.32653C9.37256 3.03192 9.12892 2.81445 8.93025 2.65099ZM6.5195 1.05971C7.4533 1.05946 8.0566 1.0593 8.61187 1.27237C9.16712 1.48545 9.61354 1.88744 10.3042 2.50939C10.3281 2.53086 10.3522 2.5526 10.3766 2.57459L13.0465 4.97748C13.0749 5.00306 13.103 5.02832 13.1308 5.05326C13.929 5.77128 14.4453 6.23558 14.7229 6.85904C15.0006 7.48249 15.0004 8.17678 15 9.25047C15 9.28778 15 9.32555 15 9.36379V9.69662C15 10.936 15 11.9178 14.8967 12.6861C14.7904 13.4768 14.5665 14.1168 14.0617 14.6215C13.557 15.1262 12.917 15.3502 12.1263 15.4565C11.358 15.5598 10.3763 15.5598 9.1369 15.5597H6.36313C5.1237 15.5598 4.142 15.5598 3.37369 15.4565C2.58298 15.3502 1.94299 15.1262 1.43828 14.6215C0.933571 14.1168 0.709585 13.4768 0.603277 12.6861C0.499981 11.9178 0.49999 10.936 0.5 9.69663V6.92285C0.49999 5.68343 0.499981 4.70172 0.603277 3.93341C0.709585 3.14271 0.933571 2.50272 1.43828 1.99801C1.94339 1.4929 2.58552 1.26916 3.37901 1.16296C4.15052 1.05971 5.13711 1.05972 6.38331 1.05973L6.42126 1.05973C6.45442 1.05973 6.48716 1.05972 6.5195 1.05971Z",fill:"#858585"}),f.jsx("path",{d:"M7.91862 2.12812H8.01862V2.04368L7.93537 2.02953L7.91862 2.12812ZM3.51321 2.16565L3.49994 2.06654L3.51321 2.16565ZM2.15361 2.71334L2.0829 2.64263L2.15361 2.71334ZM1.60589 4.06821L1.50678 4.05489H1.50678L1.60589 4.06821ZM1.60589 12.5513L1.50678 12.5646H1.50678L1.60589 12.5513ZM2.15361 13.9061L2.22432 13.8354H2.22432L2.15361 13.9061ZM3.50848 14.4539L3.52181 14.3548L3.50848 14.4539ZM11.9915 14.4539L11.9782 14.3548L11.9915 14.4539ZM13.8941 12.5513L13.795 12.5379L13.8941 12.5513ZM13.8712 7.46671L13.967 7.43823L13.9458 7.36671H13.8712V7.46671ZM11.7603 7.46671V7.36671H11.7603L11.7603 7.46671ZM9.87908 7.40047L9.86575 7.49958L9.87908 7.40047ZM8.5606 6.82473L8.48989 6.89544L8.5606 6.82473ZM7.98486 5.50625L7.88575 5.51958L7.98486 5.50625ZM7.91862 3.62501L8.01862 3.62501V3.62501H7.91862ZM8.93025 2.65099L8.99378 2.57376L8.83025 2.43921V2.65099H8.93025ZM8.98746 5.37146L8.88836 5.38478L8.98746 5.37146ZM10.0139 6.39786L10.0272 6.29876L10.0139 6.39786ZM13.1585 6.45508V6.55508H13.4052L13.2281 6.38331L13.1585 6.45508ZM12.3698 5.72942L12.3029 5.80375L12.3698 5.72942ZM9.69991 3.32653L9.7668 3.2522L9.69991 3.32653ZM8.61187 1.27237L8.64769 1.17901V1.17901L8.61187 1.27237ZM6.5195 1.05971L6.51953 1.15971L6.5195 1.05971ZM10.3042 2.50939L10.2373 2.5837L10.2373 2.5837L10.3042 2.50939ZM10.3766 2.57459L10.3098 2.64892V2.64892L10.3766 2.57459ZM13.0465 4.97748L12.9796 5.05181V5.05181L13.0465 4.97748ZM13.1308 5.05326L13.1976 4.97891V4.97891L13.1308 5.05326ZM14.7229 6.85904L14.6316 6.89972V6.89972L14.7229 6.85904ZM15 9.25047L15.1 9.2505V9.2505L15 9.25047ZM15 9.69662H14.9V9.69662L15 9.69662ZM14.8967 12.6861L14.7976 12.6727L14.8967 12.6861ZM14.0617 14.6215L13.991 14.5508L13.991 14.5508L14.0617 14.6215ZM12.1263 15.4565L12.113 15.3574L12.1263 15.4565ZM9.1369 15.5597L9.1369 15.4597H9.1369V15.5597ZM6.36313 15.5597V15.4597H6.36313L6.36313 15.5597ZM3.37369 15.4565L3.38701 15.3574L3.37369 15.4565ZM1.43828 14.6215L1.50899 14.5508V14.5508L1.43828 14.6215ZM0.603277 12.6861L0.702386 12.6727H0.702386L0.603277 12.6861ZM0.5 9.69663L0.6 9.69663V9.69663H0.5ZM0.5 6.92285H0.6V6.92285L0.5 6.92285ZM0.603277 3.93341L0.504169 3.92009L0.603277 3.93341ZM1.43828 1.99801L1.50899 2.06872L1.43828 1.99801ZM3.37901 1.16296L3.36575 1.06385L3.37901 1.16296ZM6.38331 1.05973L6.38331 1.15973H6.38331L6.38331 1.05973ZM6.42126 1.05973L6.42126 1.15973H6.42126V1.05973ZM3.70349 9.48997V9.38997C3.36891 9.38997 3.09768 9.6612 3.09768 9.99579H3.19768H3.29768C3.29768 9.77166 3.47937 9.58997 3.70349 9.58997V9.48997ZM9.09885 9.48997V9.38997H3.70349V9.48997V9.58997H9.09885V9.48997ZM9.60466 9.99579H9.70467C9.70467 9.6612 9.43343 9.38997 9.09885 9.38997V9.48997V9.58997C9.32298 9.58997 9.50466 9.77166 9.50466 9.99579H9.60466ZM9.09885 10.5016V10.6016C9.43343 10.6016 9.70467 10.3304 9.70467 9.99579H9.60466H9.50466C9.50466 10.2199 9.32298 10.4016 9.09885 10.4016V10.5016ZM3.70349 10.5016V10.6016H9.09885V10.5016V10.4016H3.70349V10.5016ZM3.19768 9.99579H3.09768C3.09768 10.3304 3.36891 10.6016 3.70349 10.6016V10.5016V10.4016C3.47937 10.4016 3.29768 10.2199 3.29768 9.99579H3.19768ZM3.70349 11.8504V11.7504C3.36891 11.7504 3.09768 12.0217 3.09768 12.3563H3.19768H3.29768C3.29768 12.1321 3.47937 11.9504 3.70349 11.9504V11.8504ZM7.4128 11.8504V11.7504H3.70349V11.8504V11.9504H7.4128V11.8504ZM7.91862 12.3563H8.01862C8.01862 12.0217 7.74738 11.7504 7.4128 11.7504V11.8504V11.9504C7.63693 11.9504 7.81862 12.1321 7.81862 12.3563H7.91862ZM7.4128 12.8621V12.9621C7.74738 12.9621 8.01862 12.6908 8.01862 12.3563H7.91862H7.81862C7.81862 12.5804 7.63693 12.7621 7.4128 12.7621V12.8621ZM3.70349 12.8621V12.9621H7.4128V12.8621V12.7621H3.70349V12.8621ZM3.19768 12.3563H3.09768C3.09768 12.6908 3.36891 12.9621 3.70349 12.9621V12.8621V12.7621C3.47937 12.7621 3.29768 12.5804 3.29768 12.3563H3.19768ZM6.42126 2.07136V2.17136C7.18843 2.17136 7.60166 2.17569 7.90186 2.22671L7.91862 2.12812L7.93537 2.02953C7.61456 1.97502 7.18123 1.97136 6.42126 1.97136V2.07136ZM3.51321 2.16565L3.52647 2.26477C4.21489 2.17263 5.12576 2.17136 6.42126 2.17136V2.07136V1.97136C5.13148 1.97136 4.20473 1.97221 3.49994 2.06654L3.51321 2.16565ZM2.15361 2.71334L2.22432 2.78405C2.48762 2.52076 2.85506 2.35463 3.52647 2.26477L3.51321 2.16565L3.49994 2.06654C2.80648 2.15935 2.38966 2.33587 2.0829 2.64263L2.15361 2.71334ZM1.60589 4.06821L1.70499 4.08153C1.79472 3.41414 1.96056 3.04781 2.22432 2.78405L2.15361 2.71334L2.0829 2.64263C1.77583 2.9497 1.5995 3.36522 1.50678 4.05489L1.60589 4.06821ZM1.51163 6.9609H1.61163C1.61163 5.67203 1.61292 4.76639 1.70499 4.08153L1.60589 4.06821L1.50678 4.05489C1.41249 4.75618 1.41163 5.67777 1.41163 6.9609H1.51163ZM1.51163 9.65858H1.61163V6.9609H1.51163H1.41163V9.65858H1.51163ZM1.60589 12.5513L1.70499 12.5379C1.61292 11.8531 1.61163 10.9474 1.61163 9.65858H1.51163H1.41163C1.41163 10.9417 1.41249 11.8633 1.50678 12.5646L1.60589 12.5513ZM2.15361 13.9061L2.22432 13.8354C1.96056 13.5717 1.79472 13.2053 1.70499 12.5379L1.60589 12.5513L1.50678 12.5646C1.5995 13.2543 1.77583 13.6698 2.0829 13.9768L2.15361 13.9061ZM3.50848 14.4539L3.52181 14.3548C2.85442 14.265 2.48809 14.0992 2.22432 13.8354L2.15361 13.9061L2.0829 13.9768C2.38998 14.2839 2.8055 14.4602 3.49516 14.553L3.50848 14.4539ZM6.40117 14.5481V14.4481C5.11231 14.4481 4.20666 14.4468 3.52181 14.3548L3.50848 14.4539L3.49516 14.553C4.19646 14.6473 5.11804 14.6481 6.40117 14.6481V14.5481ZM9.09885 14.5481V14.4481H6.40117V14.5481V14.6481H9.09885V14.5481ZM11.9915 14.4539L11.9782 14.3548C11.2934 14.4468 10.3877 14.4481 9.09885 14.4481V14.5481V14.6481C10.382 14.6481 11.3036 14.6473 12.0049 14.553L11.9915 14.4539ZM13.3464 13.9061L13.2757 13.8354C13.0119 14.0992 12.6456 14.265 11.9782 14.3548L11.9915 14.4539L12.0049 14.553C12.6945 14.4602 13.11 14.2839 13.4171 13.9768L13.3464 13.9061ZM13.8941 12.5513L13.795 12.5379C13.7053 13.2053 13.5395 13.5717 13.2757 13.8354L13.3464 13.9061L13.4171 13.9768C13.7242 13.6698 13.9005 13.2543 13.9932 12.5646L13.8941 12.5513ZM13.9884 9.65858H13.8884C13.8884 10.9474 13.8871 11.8531 13.795 12.5379L13.8941 12.5513L13.9932 12.5646C14.0875 11.8633 14.0884 10.9417 14.0884 9.65858H13.9884ZM13.9884 9.36379H13.8884V9.65858H13.9884H14.0884V9.36379H13.9884ZM13.8712 7.46671L13.7753 7.49519C13.8801 7.8479 13.8884 8.32115 13.8884 9.36379H13.9884H14.0884C14.0884 8.33459 14.0821 7.82568 13.967 7.43823L13.8712 7.46671ZM9.87908 7.40047L9.86575 7.49958C10.3668 7.56695 10.9989 7.56673 11.7603 7.56671L11.7603 7.46671L11.7603 7.36671C10.9937 7.36673 10.3772 7.36654 9.8924 7.30137L9.87908 7.40047ZM8.5606 6.82473L8.48989 6.89544C8.86815 7.2737 9.33949 7.42883 9.86575 7.49958L9.87908 7.40047L9.8924 7.30137C9.38822 7.23358 8.96617 7.08888 8.63131 6.75402L8.5606 6.82473ZM7.98486 5.50625L7.88575 5.51958C7.9565 6.04584 8.11163 6.51718 8.48989 6.89544L8.5606 6.82473L8.63131 6.75402C8.29645 6.41916 8.15175 5.99711 8.08396 5.49293L7.98486 5.50625ZM7.91862 3.62501L7.81862 3.62501C7.8186 4.38645 7.81838 5.01852 7.88575 5.51958L7.98486 5.50625L8.08396 5.49293C8.01879 5.00817 8.0186 4.39158 8.01862 3.62501L7.91862 3.62501ZM8.93025 3.5888H9.03025V2.65099H8.93025H8.83025V3.5888H8.93025ZM8.98746 5.37146L9.08657 5.35813C9.03154 4.94876 9.03025 4.4008 9.03025 3.5888H8.93025H8.83025C8.83025 4.39502 8.83111 4.95896 8.88836 5.38478L8.98746 5.37146ZM9.27593 6.1094L9.34664 6.03869C9.231 5.92306 9.13926 5.75 9.08657 5.35813L8.98746 5.37146L8.88836 5.38478C8.94405 5.799 9.04631 6.0212 9.20522 6.18011L9.27593 6.1094ZM10.0139 6.39786L10.0272 6.29876C9.63533 6.24607 9.46227 6.15433 9.34664 6.03869L9.27593 6.1094L9.20522 6.18011C9.36413 6.33902 9.58633 6.44128 10.0005 6.49697L10.0139 6.39786ZM11.7965 6.45508V6.35508C10.9845 6.35508 10.4366 6.3538 10.0272 6.29876L10.0139 6.39786L10.0005 6.49697C10.4264 6.55422 10.9903 6.55508 11.7965 6.55508V6.45508ZM13.1585 6.45508V6.35508H11.7965V6.45508V6.55508H13.1585V6.45508ZM12.3698 5.72942L12.3029 5.80375C12.6358 6.10334 12.8905 6.33446 13.0889 6.52686L13.1585 6.45508L13.2281 6.38331C13.0266 6.18786 12.7691 5.95425 12.4367 5.65509L12.3698 5.72942ZM9.69991 3.32653L9.63301 3.40086L12.3029 5.80375L12.3698 5.72942L12.4367 5.65509L9.7668 3.2522L9.69991 3.32653ZM8.93025 2.65099L8.86671 2.72821C9.06335 2.89 9.30529 3.10591 9.63301 3.40086L9.69991 3.32653L9.7668 3.2522C9.43983 2.95792 9.19449 2.73889 8.99378 2.57376L8.93025 2.65099ZM8.61187 1.27237L8.64769 1.17901C8.07151 0.957909 7.44742 0.959461 6.51948 0.959709L6.5195 1.05971L6.51953 1.15971C7.45919 1.15946 8.0417 1.16069 8.57604 1.36574L8.61187 1.27237ZM10.3042 2.50939L10.3711 2.43508C9.68477 1.81701 9.22386 1.40011 8.64769 1.17901L8.61187 1.27237L8.57604 1.36574C9.11039 1.57079 9.54232 1.95787 10.2373 2.5837L10.3042 2.50939ZM10.3766 2.57459L10.4435 2.50026C10.4191 2.47828 10.395 2.45655 10.3711 2.43508L10.3042 2.50939L10.2373 2.5837C10.2612 2.60517 10.2853 2.62691 10.3098 2.64892L10.3766 2.57459ZM13.0465 4.97748L13.1134 4.90315L10.4435 2.50026L10.3766 2.57459L10.3098 2.64892L12.9796 5.05181L13.0465 4.97748ZM13.1308 5.05326L13.1976 4.97891C13.1699 4.95396 13.1418 4.92872 13.1134 4.90315L13.0465 4.97748L12.9796 5.05181C13.0081 5.0774 13.0362 5.10267 13.0639 5.12761L13.1308 5.05326ZM14.7229 6.85904L14.8143 6.81836C14.5261 6.17139 13.9908 5.69234 13.1976 4.97891L13.1308 5.05326L13.0639 5.12761C13.8673 5.85022 14.3644 6.29977 14.6316 6.89972L14.7229 6.85904ZM15 9.25047L15.1 9.2505C15.1004 8.18368 15.1024 7.46531 14.8143 6.81836L14.7229 6.85904L14.6316 6.89972C14.8988 7.49967 14.9004 8.16989 14.9 9.25043L15 9.25047ZM15 9.36379H15.1C15.1 9.32556 15.1 9.28781 15.1 9.2505L15 9.25047L14.9 9.25043C14.9 9.28774 14.9 9.32553 14.9 9.36379H15ZM14.8967 12.6861L14.9959 12.6994C15.1002 11.9229 15.1 10.9334 15.1 9.69662L15 9.69662L14.9 9.69662C14.9 10.9387 14.8998 11.9126 14.7976 12.6727L14.8967 12.6861ZM14.0617 14.6215L14.1324 14.6922C14.6589 14.1658 14.8881 13.5012 14.9959 12.6994L14.8967 12.6861L14.7976 12.6727C14.6928 13.4524 14.474 14.0677 13.991 14.5508L14.0617 14.6215ZM12.1263 15.4565L12.1397 15.5556C12.9414 15.4478 13.606 15.2186 14.1325 14.6922L14.0617 14.6215L13.991 14.5508C13.508 15.0338 12.8927 15.2525 12.113 15.3574L12.1263 15.4565ZM9.1369 15.5597L9.13689 15.6597C10.3737 15.6598 11.3632 15.66 12.1397 15.5556L12.1263 15.4565L12.113 15.3574C11.3529 15.4596 10.379 15.4598 9.1369 15.4597L9.1369 15.5597ZM3.37369 15.4565L3.36036 15.5556C4.13684 15.66 5.12637 15.6598 6.36313 15.6597L6.36313 15.5597L6.36313 15.4597C5.12104 15.4598 4.14715 15.4596 3.38701 15.3574L3.37369 15.4565ZM1.43828 14.6215L1.36757 14.6922C1.89397 15.2186 2.5586 15.4478 3.36036 15.5556L3.37369 15.4565L3.38701 15.3574C2.60736 15.2525 1.99201 15.0338 1.50899 14.5508L1.43828 14.6215ZM0.603277 12.6861L0.504169 12.6994C0.611963 13.5012 0.841169 14.1658 1.36757 14.6922L1.43828 14.6215L1.50899 14.5508C1.02597 14.0677 0.807206 13.4524 0.702386 12.6727L0.603277 12.6861ZM0.5 9.69663L0.4 9.69662C0.39999 10.9334 0.399774 11.9229 0.504169 12.6994L0.603277 12.6861L0.702386 12.6727C0.600188 11.9126 0.59999 10.9387 0.6 9.69663L0.5 9.69663ZM0.603277 3.93341L0.504169 3.92009C0.399774 4.69657 0.39999 5.68609 0.4 6.92285L0.5 6.92285L0.6 6.92285C0.59999 5.68077 0.600188 4.70687 0.702386 3.94674L0.603277 3.93341ZM1.43828 1.99801L1.36757 1.9273C0.841169 2.4537 0.611963 3.11833 0.504169 3.92009L0.603277 3.93341L0.702386 3.94674C0.807206 3.16709 1.02597 2.55174 1.50899 2.06872L1.43828 1.99801ZM3.37901 1.16296L3.36575 1.06385C2.56131 1.17151 1.89445 1.40042 1.36757 1.9273L1.43828 1.99801L1.50899 2.06872C1.99233 1.58538 2.60973 1.36681 3.39228 1.26208L3.37901 1.16296ZM6.38331 1.05973L6.38331 0.959726C5.13976 0.959716 4.14539 0.959502 3.36575 1.06385L3.37901 1.16296L3.39228 1.26208C4.15565 1.15991 5.13446 1.15972 6.38331 1.15973L6.38331 1.05973ZM6.42126 1.05973L6.42127 0.959727L6.38331 0.959726L6.38331 1.05973L6.38331 1.15973L6.42126 1.15973L6.42126 1.05973ZM6.5195 1.05971L6.51948 0.959709C6.48713 0.959718 6.4544 0.959727 6.42126 0.959727V1.05973V1.15973C6.45443 1.15973 6.48719 1.15972 6.51953 1.15971L6.5195 1.05971ZM11.7603 7.46671V7.56671H13.8712V7.46671V7.36671H11.7603V7.46671ZM7.91862 2.12812H7.81862V3.62501H7.91862H8.01862V2.12812H7.91862ZM15 9.69662H15.1V9.36379H15H14.9V9.69662H15ZM6.36313 15.5597V15.6597H9.1369V15.5597V15.4597H6.36313V15.5597ZM0.5 6.92285H0.4V9.69663H0.5H0.6V6.92285H0.5Z",fill:"#858585"})]})}),f.jsx("span",{children:"مدیریت کاربران"}),f.jsx("svg",{className:`submenu-arrow ${c?"open":""}`,width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.95363 5.98434C3.13334 5.77467 3.44899 5.75039 3.65866 5.9301L7.99993 9.65119L12.3412 5.9301C12.5509 5.75039 12.8665 5.77467 13.0462 5.98434C13.2259 6.194 13.2017 6.50965 12.992 6.68936L8.32532 10.6894C8.13808 10.8499 7.86178 10.8499 7.67453 10.6894L3.00787 6.68936C2.7982 6.50965 2.77392 6.194 2.95363 5.98434Z",fill:"#858585"})})]}),c&&f.jsxs("div",{className:"submenu-items",children:[f.jsxs("div",{className:"submenu-item",children:[f.jsx("div",{className:"submenu-branch"}),f.jsx("span",{children:"مدیریت نقش ها"})]}),f.jsxs("div",{className:"submenu-item",children:[f.jsx("div",{className:"submenu-branch"}),f.jsx("span",{children:"دسترسی نقش ها به کاربران"})]})]})]}),f.jsxs("div",{className:`menu-item ${e==="facmanage"?"active":""}`,onClick:()=>Fe("facmanage","مدیریت امکانات"),children:[f.jsx("span",{className:"menu-icon",children:f.jsxs("svg",{width:"16",height:"15",viewBox:"0 0 16 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.19768 9.23462C3.19768 8.95526 3.42414 8.7288 3.70349 8.7288H9.09885C9.3782 8.7288 9.60466 8.95526 9.60466 9.23462C9.60466 9.51397 9.3782 9.74043 9.09885 9.74043H3.70349C3.42414 9.74043 3.19768 9.51397 3.19768 9.23462Z",fill:"#858585"}),f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.19768 11.5951C3.19768 11.3157 3.42414 11.0893 3.70349 11.0893H7.4128C7.69215 11.0893 7.91862 11.3157 7.91862 11.5951C7.91862 11.8744 7.69215 12.1009 7.4128 12.1009H3.70349C3.42414 12.1009 3.19768 11.8744 3.19768 11.5951Z",fill:"#858585"}),f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.91862 1.36695C7.60811 1.31419 7.18483 1.31019 6.42126 1.31019C5.12862 1.31019 4.20981 1.31125 3.51321 1.40448C2.83077 1.49582 2.43864 1.66714 2.15361 1.95217C1.86819 2.23759 1.69711 2.62851 1.60589 3.30704C1.5127 4.00012 1.51163 4.91373 1.51163 6.19973V8.89741C1.51163 10.1834 1.5127 11.097 1.60589 11.7901C1.69711 12.4686 1.86819 12.8595 2.15361 13.145C2.43903 13.4304 2.82996 13.6015 3.50848 13.6927C4.20156 13.7859 5.11517 13.787 6.40117 13.787H9.09885C10.3848 13.787 11.2985 13.7859 11.9915 13.6927C12.6701 13.6015 13.061 13.4304 13.3464 13.145C13.6318 12.8595 13.8029 12.4686 13.8941 11.7901C13.9873 11.097 13.9884 10.1834 13.9884 8.89741V8.60262C13.9884 7.5667 13.9811 7.07562 13.8712 6.70554H11.7603C10.9963 6.70556 10.372 6.70557 9.87908 6.6393C9.36385 6.57003 8.91716 6.42012 8.5606 6.06356C8.20404 5.707 8.05413 5.26031 7.98486 4.74508C7.91859 4.25217 7.9186 3.62784 7.91862 2.86384V1.36695ZM8.93025 1.88982V2.82763C8.93025 3.63674 8.93132 4.19269 8.98746 4.61029C9.04165 5.01333 9.13866 5.21096 9.27593 5.34823C9.4132 5.4855 9.61083 5.58251 10.0139 5.6367C10.4315 5.69284 10.9874 5.69391 11.7965 5.69391H13.1585C12.9586 5.49999 12.7024 5.26763 12.3698 4.96825L9.69991 2.56536C9.37256 2.27075 9.12892 2.05328 8.93025 1.88982ZM6.5195 0.29854C7.4533 0.29829 8.0566 0.298129 8.61187 0.511204C9.16712 0.724276 9.61354 1.12627 10.3042 1.74822C10.3281 1.76969 10.3522 1.79143 10.3766 1.81342L13.0465 4.21631C13.0749 4.24189 13.103 4.26715 13.1308 4.2921C13.929 5.01011 14.4453 5.47441 14.7229 6.09787C15.0006 6.72132 15.0004 7.41562 15 8.4893C15 8.52661 15 8.56438 15 8.60262V8.93545C15 10.1749 15 11.1566 14.8967 11.9249C14.7904 12.7156 14.5665 13.3556 14.0617 13.8603C13.557 14.365 12.917 14.589 12.1263 14.6953C11.358 14.7986 10.3763 14.7986 9.1369 14.7986H6.36313C5.1237 14.7986 4.142 14.7986 3.37369 14.6953C2.58298 14.589 1.94299 14.365 1.43828 13.8603C0.933571 13.3556 0.709585 12.7156 0.603277 11.9249C0.499981 11.1566 0.49999 10.1749 0.5 8.93546V6.16168C0.49999 4.92226 0.499981 3.94055 0.603277 3.17224C0.709585 2.38154 0.933571 1.74155 1.43828 1.23684C1.94339 0.731734 2.58552 0.507992 3.37901 0.401794C4.15052 0.298538 5.13711 0.298546 6.38331 0.298557L6.42126 0.298557C6.45442 0.298557 6.48716 0.298548 6.5195 0.29854Z",fill:"#858585"}),f.jsx("path",{d:"M7.91862 1.36695H8.01862V1.28251L7.93537 1.26836L7.91862 1.36695ZM3.51321 1.40448L3.49994 1.30537L3.51321 1.40448ZM2.15361 1.95217L2.0829 1.88146L2.15361 1.95217ZM1.60589 3.30704L1.50678 3.29372H1.50678L1.60589 3.30704ZM1.60589 11.7901L1.50678 11.8034H1.50678L1.60589 11.7901ZM2.15361 13.145L2.22432 13.0743H2.22432L2.15361 13.145ZM3.50848 13.6927L3.52181 13.5936L3.50848 13.6927ZM11.9915 13.6927L11.9782 13.5936L11.9915 13.6927ZM13.8941 11.7901L13.795 11.7768L13.8941 11.7901ZM13.8712 6.70554L13.967 6.67706L13.9458 6.60554H13.8712V6.70554ZM11.7603 6.70554V6.60554H11.7603L11.7603 6.70554ZM9.87908 6.6393L9.86575 6.73841L9.87908 6.6393ZM8.5606 6.06356L8.48989 6.13427L8.5606 6.06356ZM7.98486 4.74508L7.88575 4.75841L7.98486 4.74508ZM7.91862 2.86384L8.01862 2.86384V2.86384H7.91862ZM8.93025 1.88982L8.99378 1.81259L8.83025 1.67804V1.88982H8.93025ZM8.98746 4.61029L8.88836 4.62361L8.98746 4.61029ZM10.0139 5.6367L10.0272 5.53759L10.0139 5.6367ZM13.1585 5.69391V5.79391H13.4052L13.2281 5.62214L13.1585 5.69391ZM12.3698 4.96825L12.3029 5.04258L12.3698 4.96825ZM9.69991 2.56536L9.7668 2.49103L9.69991 2.56536ZM8.61187 0.511204L8.64769 0.417842V0.417842L8.61187 0.511204ZM6.5195 0.29854L6.51953 0.39854L6.5195 0.29854ZM10.3042 1.74822L10.2373 1.82253L10.2373 1.82253L10.3042 1.74822ZM10.3766 1.81342L10.3098 1.88775V1.88775L10.3766 1.81342ZM13.0465 4.21631L12.9796 4.29064V4.29064L13.0465 4.21631ZM13.1308 4.2921L13.1976 4.21775V4.21775L13.1308 4.2921ZM14.7229 6.09787L14.6316 6.13855V6.13855L14.7229 6.09787ZM15 8.4893L15.1 8.48933V8.48933L15 8.4893ZM15 8.93545H14.9V8.93545L15 8.93545ZM14.8967 11.9249L14.7976 11.9116L14.8967 11.9249ZM14.0617 13.8603L13.991 13.7896L13.991 13.7896L14.0617 13.8603ZM12.1263 14.6953L12.113 14.5962L12.1263 14.6953ZM9.1369 14.7986L9.1369 14.6986H9.1369V14.7986ZM6.36313 14.7986V14.6986H6.36313L6.36313 14.7986ZM3.37369 14.6953L3.38701 14.5962L3.37369 14.6953ZM1.43828 13.8603L1.50899 13.7896V13.7896L1.43828 13.8603ZM0.603277 11.9249L0.702386 11.9116H0.702386L0.603277 11.9249ZM0.5 8.93546L0.6 8.93546V8.93546H0.5ZM0.5 6.16168H0.6V6.16168L0.5 6.16168ZM0.603277 3.17224L0.504169 3.15892L0.603277 3.17224ZM1.43828 1.23684L1.50899 1.30755L1.43828 1.23684ZM3.37901 0.401794L3.36575 0.302678L3.37901 0.401794ZM6.38331 0.298557L6.38331 0.398557H6.38331L6.38331 0.298557ZM6.42126 0.298557L6.42126 0.398557H6.42126V0.298557ZM3.70349 8.7288V8.6288C3.36891 8.6288 3.09768 8.90003 3.09768 9.23462H3.19768H3.29768C3.29768 9.01049 3.47937 8.8288 3.70349 8.8288V8.7288ZM9.09885 8.7288V8.6288H3.70349V8.7288V8.8288H9.09885V8.7288ZM9.60466 9.23462H9.70467C9.70467 8.90003 9.43343 8.6288 9.09885 8.6288V8.7288V8.8288C9.32298 8.8288 9.50466 9.01049 9.50466 9.23462H9.60466ZM9.09885 9.74043V9.84043C9.43343 9.84043 9.70467 9.5692 9.70467 9.23462H9.60466H9.50466C9.50466 9.45874 9.32298 9.64043 9.09885 9.64043V9.74043ZM3.70349 9.74043V9.84043H9.09885V9.74043V9.64043H3.70349V9.74043ZM3.19768 9.23462H3.09768C3.09768 9.5692 3.36891 9.84043 3.70349 9.84043V9.74043V9.64043C3.47937 9.64043 3.29768 9.45874 3.29768 9.23462H3.19768ZM3.70349 11.0893V10.9893C3.36891 10.9893 3.09768 11.2605 3.09768 11.5951H3.19768H3.29768C3.29768 11.371 3.47937 11.1893 3.70349 11.1893V11.0893ZM7.4128 11.0893V10.9893H3.70349V11.0893V11.1893H7.4128V11.0893ZM7.91862 11.5951H8.01862C8.01862 11.2605 7.74738 10.9893 7.4128 10.9893V11.0893V11.1893C7.63693 11.1893 7.81862 11.371 7.81862 11.5951H7.91862ZM7.4128 12.1009V12.2009C7.74738 12.2009 8.01862 11.9297 8.01862 11.5951H7.91862H7.81862C7.81862 11.8192 7.63693 12.0009 7.4128 12.0009V12.1009ZM3.70349 12.1009V12.2009H7.4128V12.1009V12.0009H3.70349V12.1009ZM3.19768 11.5951H3.09768C3.09768 11.9297 3.36891 12.2009 3.70349 12.2009V12.1009V12.0009C3.47937 12.0009 3.29768 11.8192 3.29768 11.5951H3.19768ZM6.42126 1.31019V1.41019C7.18843 1.41019 7.60166 1.41452 7.90186 1.46554L7.91862 1.36695L7.93537 1.26836C7.61456 1.21385 7.18123 1.21019 6.42126 1.21019V1.31019ZM3.51321 1.40448L3.52647 1.5036C4.21489 1.41146 5.12576 1.41019 6.42126 1.41019V1.31019V1.21019C5.13148 1.21019 4.20473 1.21104 3.49994 1.30537L3.51321 1.40448ZM2.15361 1.95217L2.22432 2.02288C2.48762 1.75959 2.85506 1.59346 3.52647 1.5036L3.51321 1.40448L3.49994 1.30537C2.80648 1.39818 2.38966 1.5747 2.0829 1.88146L2.15361 1.95217ZM1.60589 3.30704L1.70499 3.32037C1.79472 2.65297 1.96056 2.28665 2.22432 2.02288L2.15361 1.95217L2.0829 1.88146C1.77583 2.18853 1.5995 2.60405 1.50678 3.29372L1.60589 3.30704ZM1.51163 6.19973H1.61163C1.61163 4.91086 1.61292 4.00522 1.70499 3.32037L1.60589 3.30704L1.50678 3.29372C1.41249 3.99501 1.41163 4.9166 1.41163 6.19973H1.51163ZM1.51163 8.89741H1.61163V6.19973H1.51163H1.41163V8.89741H1.51163ZM1.60589 11.7901L1.70499 11.7768C1.61292 11.0919 1.61163 10.1863 1.61163 8.89741H1.51163H1.41163C1.41163 10.1805 1.41249 11.1021 1.50678 11.8034L1.60589 11.7901ZM2.15361 13.145L2.22432 13.0743C1.96056 12.8105 1.79472 12.4442 1.70499 11.7768L1.60589 11.7901L1.50678 11.8034C1.5995 12.4931 1.77583 12.9086 2.0829 13.2157L2.15361 13.145ZM3.50848 13.6927L3.52181 13.5936C2.85442 13.5039 2.48809 13.338 2.22432 13.0743L2.15361 13.145L2.0829 13.2157C2.38998 13.5228 2.8055 13.6991 3.49516 13.7918L3.50848 13.6927ZM6.40117 13.787V13.6869C5.11231 13.6869 4.20666 13.6857 3.52181 13.5936L3.50848 13.6927L3.49516 13.7918C4.19646 13.8861 5.11804 13.887 6.40117 13.887V13.787ZM9.09885 13.787V13.6869H6.40117V13.787V13.887H9.09885V13.787ZM11.9915 13.6927L11.9782 13.5936C11.2934 13.6857 10.3877 13.6869 9.09885 13.6869V13.787V13.887C10.382 13.887 11.3036 13.8861 12.0049 13.7918L11.9915 13.6927ZM13.3464 13.145L13.2757 13.0743C13.0119 13.338 12.6456 13.5039 11.9782 13.5936L11.9915 13.6927L12.0049 13.7918C12.6945 13.6991 13.11 13.5228 13.4171 13.2157L13.3464 13.145ZM13.8941 11.7901L13.795 11.7768C13.7053 12.4442 13.5395 12.8105 13.2757 13.0743L13.3464 13.145L13.4171 13.2157C13.7242 12.9086 13.9005 12.4931 13.9932 11.8034L13.8941 11.7901ZM13.9884 8.89741H13.8884C13.8884 10.1863 13.8871 11.0919 13.795 11.7768L13.8941 11.7901L13.9932 11.8034C14.0875 11.1021 14.0884 10.1805 14.0884 8.89741H13.9884ZM13.9884 8.60262H13.8884V8.89741H13.9884H14.0884V8.60262H13.9884ZM13.8712 6.70554L13.7753 6.73402C13.8801 7.08673 13.8884 7.55998 13.8884 8.60262H13.9884H14.0884C14.0884 7.57342 14.0821 7.06451 13.967 6.67706L13.8712 6.70554ZM9.87908 6.6393L9.86575 6.73841C10.3668 6.80578 10.9989 6.80556 11.7603 6.80554L11.7603 6.70554L11.7603 6.60554C10.9937 6.60556 10.3772 6.60537 9.8924 6.5402L9.87908 6.6393ZM8.5606 6.06356L8.48989 6.13427C8.86815 6.51253 9.33949 6.66766 9.86575 6.73841L9.87908 6.6393L9.8924 6.5402C9.38822 6.47241 8.96617 6.32771 8.63131 5.99285L8.5606 6.06356ZM7.98486 4.74508L7.88575 4.75841C7.9565 5.28468 8.11163 5.75601 8.48989 6.13427L8.5606 6.06356L8.63131 5.99285C8.29645 5.65799 8.15175 5.23594 8.08396 4.73176L7.98486 4.74508ZM7.91862 2.86384L7.81862 2.86384C7.8186 3.62528 7.81838 4.25735 7.88575 4.75841L7.98486 4.74508L8.08396 4.73176C8.01879 4.247 8.0186 3.63041 8.01862 2.86384L7.91862 2.86384ZM8.93025 2.82763H9.03025V1.88982H8.93025H8.83025V2.82763H8.93025ZM8.98746 4.61029L9.08657 4.59696C9.03154 4.18759 9.03025 3.63964 9.03025 2.82763H8.93025H8.83025C8.83025 3.63385 8.83111 4.19779 8.88836 4.62361L8.98746 4.61029ZM9.27593 5.34823L9.34664 5.27752C9.231 5.16189 9.13926 4.98883 9.08657 4.59696L8.98746 4.61029L8.88836 4.62361C8.94405 5.03783 9.04631 5.26003 9.20522 5.41894L9.27593 5.34823ZM10.0139 5.6367L10.0272 5.53759C9.63533 5.4849 9.46227 5.39316 9.34664 5.27752L9.27593 5.34823L9.20522 5.41894C9.36413 5.57785 9.58633 5.68011 10.0005 5.7358L10.0139 5.6367ZM11.7965 5.69391V5.59391C10.9845 5.59391 10.4366 5.59263 10.0272 5.53759L10.0139 5.6367L10.0005 5.7358C10.4264 5.79305 10.9903 5.79391 11.7965 5.79391V5.69391ZM13.1585 5.69391V5.59391H11.7965V5.69391V5.79391H13.1585V5.69391ZM12.3698 4.96825L12.3029 5.04258C12.6358 5.34218 12.8905 5.57329 13.0889 5.76569L13.1585 5.69391L13.2281 5.62214C13.0266 5.42669 12.7691 5.19308 12.4367 4.89392L12.3698 4.96825ZM9.69991 2.56536L9.63301 2.63969L12.3029 5.04258L12.3698 4.96825L12.4367 4.89392L9.7668 2.49103L9.69991 2.56536ZM8.93025 1.88982L8.86671 1.96704C9.06335 2.12883 9.30529 2.34474 9.63301 2.63969L9.69991 2.56536L9.7668 2.49103C9.43983 2.19675 9.19449 1.97772 8.99378 1.81259L8.93025 1.88982ZM8.61187 0.511204L8.64769 0.417842C8.07151 0.196739 7.44742 0.198292 6.51948 0.19854L6.5195 0.29854L6.51953 0.39854C7.45919 0.398289 8.0417 0.399518 8.57604 0.604566L8.61187 0.511204ZM10.3042 1.74822L10.3711 1.67391C9.68477 1.05584 9.22386 0.638936 8.64769 0.417842L8.61187 0.511204L8.57604 0.604566C9.11039 0.809617 9.54232 1.1967 10.2373 1.82253L10.3042 1.74822ZM10.3766 1.81342L10.4435 1.73909C10.4191 1.71711 10.395 1.69538 10.3711 1.67391L10.3042 1.74822L10.2373 1.82253C10.2612 1.844 10.2853 1.86575 10.3098 1.88775L10.3766 1.81342ZM13.0465 4.21631L13.1134 4.14198L10.4435 1.73909L10.3766 1.81342L10.3098 1.88775L12.9796 4.29064L13.0465 4.21631ZM13.1308 4.2921L13.1976 4.21775C13.1699 4.19279 13.1418 4.16755 13.1134 4.14198L13.0465 4.21631L12.9796 4.29064C13.0081 4.31623 13.0362 4.3415 13.0639 4.36645L13.1308 4.2921ZM14.7229 6.09787L14.8143 6.05719C14.5261 5.41022 13.9908 4.93117 13.1976 4.21775L13.1308 4.2921L13.0639 4.36645C13.8673 5.08905 14.3644 5.5386 14.6316 6.13855L14.7229 6.09787ZM15 8.4893L15.1 8.48933C15.1004 7.42251 15.1024 6.70415 14.8143 6.05719L14.7229 6.09787L14.6316 6.13855C14.8988 6.7385 14.9004 7.40872 14.9 8.48927L15 8.4893ZM15 8.60262H15.1C15.1 8.56439 15.1 8.52664 15.1 8.48933L15 8.4893L14.9 8.48926C14.9 8.52657 14.9 8.56436 14.9 8.60262H15ZM14.8967 11.9249L14.9959 11.9382C15.1002 11.1617 15.1 10.1722 15.1 8.93545L15 8.93545L14.9 8.93545C14.9 10.1775 14.8998 11.1514 14.7976 11.9116L14.8967 11.9249ZM14.0617 13.8603L14.1324 13.931C14.6589 13.4046 14.8881 12.74 14.9959 11.9382L14.8967 11.9249L14.7976 11.9116C14.6928 12.6912 14.474 13.3066 13.991 13.7896L14.0617 13.8603ZM12.1263 14.6953L12.1397 14.7944C12.9414 14.6866 13.606 14.4574 14.1325 13.931L14.0617 13.8603L13.991 13.7896C13.508 14.2726 12.8927 14.4914 12.113 14.5962L12.1263 14.6953ZM9.1369 14.7986L9.13689 14.8986C10.3737 14.8986 11.3632 14.8988 12.1397 14.7944L12.1263 14.6953L12.113 14.5962C11.3529 14.6984 10.379 14.6986 9.1369 14.6986L9.1369 14.7986ZM3.37369 14.6953L3.36036 14.7944C4.13684 14.8988 5.12637 14.8986 6.36313 14.8986L6.36313 14.7986L6.36313 14.6986C5.12104 14.6986 4.14715 14.6984 3.38701 14.5962L3.37369 14.6953ZM1.43828 13.8603L1.36757 13.931C1.89397 14.4574 2.5586 14.6866 3.36036 14.7944L3.37369 14.6953L3.38701 14.5962C2.60736 14.4914 1.99201 14.2726 1.50899 13.7896L1.43828 13.8603ZM0.603277 11.9249L0.504169 11.9382C0.611963 12.74 0.841169 13.4046 1.36757 13.931L1.43828 13.8603L1.50899 13.7896C1.02597 13.3066 0.807206 12.6912 0.702386 11.9116L0.603277 11.9249ZM0.5 8.93546L0.4 8.93546C0.39999 10.1722 0.399774 11.1617 0.504169 11.9382L0.603277 11.9249L0.702386 11.9116C0.600188 11.1514 0.59999 10.1775 0.6 8.93546L0.5 8.93546ZM0.603277 3.17224L0.504169 3.15892C0.399774 3.9354 0.39999 4.92492 0.4 6.16168L0.5 6.16168L0.6 6.16168C0.59999 4.9196 0.600188 3.9457 0.702386 3.18557L0.603277 3.17224ZM1.43828 1.23684L1.36757 1.16613C0.841169 1.69253 0.611963 2.35716 0.504169 3.15892L0.603277 3.17224L0.702386 3.18557C0.807206 2.40592 1.02597 1.79057 1.50899 1.30755L1.43828 1.23684ZM3.37901 0.401794L3.36575 0.302678C2.56131 0.410341 1.89445 0.639254 1.36757 1.16613L1.43828 1.23684L1.50899 1.30755C1.99233 0.824213 2.60973 0.605643 3.39228 0.50091L3.37901 0.401794ZM6.38331 0.298557L6.38331 0.198557C5.13976 0.198546 4.14539 0.198333 3.36575 0.302678L3.37901 0.401794L3.39228 0.50091C4.15565 0.398743 5.13446 0.398546 6.38331 0.398557L6.38331 0.298557ZM6.42126 0.298557L6.42127 0.198557L6.38331 0.198557L6.38331 0.298557L6.38331 0.398557L6.42126 0.398557L6.42126 0.298557ZM6.5195 0.29854L6.51948 0.19854C6.48713 0.198548 6.4544 0.198557 6.42126 0.198557V0.298557V0.398557C6.45443 0.398557 6.48719 0.398548 6.51953 0.39854L6.5195 0.29854ZM11.7603 6.70554V6.80554H13.8712V6.70554V6.60554H11.7603V6.70554ZM7.91862 1.36695H7.81862V2.86384H7.91862H8.01862V1.36695H7.91862ZM15 8.93545H15.1V8.60262H15H14.9V8.93545H15ZM6.36313 14.7986V14.8986H9.1369V14.7986V14.6986H6.36313V14.7986ZM0.5 6.16168H0.4V8.93546H0.5H0.6V6.16168H0.5Z",fill:"#858585"})]})}),f.jsx("span",{children:"مدیریت امکانات"}),f.jsx("svg",{className:"submenu-arrow",width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.95363 5.98434C3.13334 5.77467 3.44899 5.75039 3.65866 5.9301L7.99993 9.65119L12.3412 5.9301C12.5509 5.75039 12.8665 5.77467 13.0462 5.98434C13.2259 6.194 13.2017 6.50965 12.992 6.68936L8.32532 10.6894C8.13808 10.8499 7.86178 10.8499 7.67453 10.6894L3.00787 6.68936C2.7982 6.50965 2.77392 6.194 2.95363 5.98434Z",fill:"#858585"})})]})]}),f.jsxs("div",{className:"sidebar-footer",children:[f.jsx("span",{className:"menu-title3",children:" حساب کاربری  "}),f.jsxs("div",{className:"menu-item",children:[f.jsx("span",{className:"menu-icon",children:f.jsxs("svg",{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{d:"M8.99245 10.7857C7.45342 10.7857 6.20435 9.53661 6.20435 7.99758C6.20435 6.45854 7.45342 5.20947 8.99245 5.20947C10.5315 5.20947 11.7806 6.45854 11.7806 7.99758C11.7806 9.53661 10.5315 10.7857 8.99245 10.7857ZM8.99245 6.32471C8.07052 6.32471 7.31959 7.07564 7.31959 7.99758C7.31959 8.91951 8.07052 9.67044 8.99245 9.67044C9.91438 9.67044 10.6653 8.91951 10.6653 7.99758C10.6653 7.07564 9.91438 6.32471 8.99245 6.32471Z",fill:"#858585",stroke:"#858585",strokeWidth:"0.2"}),f.jsx("path",{d:"M11.3792 15.5739C11.223 15.5739 11.0669 15.5516 10.9108 15.5144C10.4498 15.388 10.0632 15.098 9.81784 14.6891L9.72862 14.5404C9.28996 13.782 8.68773 13.782 8.24907 14.5404L8.16729 14.6817C7.92193 15.098 7.53532 15.3954 7.07435 15.5144C6.60595 15.6408 6.12268 15.5739 5.71375 15.3285L4.43494 14.5925C4.21024 14.4637 4.01313 14.2919 3.85487 14.0869C3.69662 13.8819 3.58033 13.6478 3.51266 13.3978C3.44499 13.1478 3.42726 12.8869 3.46049 12.6301C3.49372 12.3733 3.57725 12.1255 3.70632 11.901C3.92193 11.5218 3.98141 11.1798 3.85502 10.9642C3.72862 10.7486 3.40892 10.6222 2.97026 10.6222C1.88476 10.6222 1 9.73743 1 8.65193V7.34338C1 6.25788 1.88476 5.37312 2.97026 5.37312C3.40892 5.37312 3.72862 5.24673 3.85502 5.03112C3.98141 4.8155 3.92937 4.47349 3.70632 4.09431C3.4461 3.64078 3.37918 3.10546 3.51301 2.59989C3.64684 2.08688 3.97398 1.66309 4.43494 1.40286L5.72119 0.666803C6.56134 0.168662 7.66914 0.458625 8.17472 1.31364L8.26394 1.46234C8.7026 2.22071 9.30483 2.22071 9.74349 1.46234L9.82528 1.32108C10.3309 0.458625 11.4387 0.168662 12.2862 0.674238L13.5651 1.4103C13.7898 1.53905 13.9869 1.71083 14.1451 1.91582C14.3034 2.12081 14.4197 2.35499 14.4873 2.60497C14.555 2.85494 14.5727 3.11581 14.5395 3.37264C14.5063 3.62947 14.4227 3.87723 14.2937 4.10175C14.0781 4.48093 14.0186 4.82294 14.145 5.03855C14.2714 5.25416 14.5911 5.38056 15.0297 5.38056C16.1152 5.38056 17 6.26532 17 7.35082V8.65937C17 9.74487 16.1152 10.6296 15.0297 10.6296C14.5911 10.6296 14.2714 10.756 14.145 10.9716C14.0186 11.1872 14.0706 11.5293 14.2937 11.9084C14.5539 12.362 14.6283 12.8973 14.487 13.4029C14.4224 13.6544 14.3073 13.8902 14.1488 14.096C13.9904 14.3017 13.7918 14.4732 13.5651 14.5999L12.2788 15.3359C11.9963 15.4921 11.6914 15.5739 11.3792 15.5739ZM8.99256 12.8229C9.65427 12.8229 10.2714 13.2393 10.6952 13.9754L10.777 14.1166C10.8662 14.2727 11.0149 14.3843 11.1933 14.4289C11.3717 14.4735 11.5502 14.4512 11.6989 14.362L12.9851 13.6185C13.1814 13.5052 13.3251 13.3191 13.385 13.1006C13.4448 12.882 13.416 12.6486 13.3048 12.4512C12.881 11.7226 12.829 10.9716 13.1561 10.3991C13.4833 9.82665 14.1599 9.49952 15.0074 9.49952C15.4833 9.49952 15.8625 9.12033 15.8625 8.6445V7.33595C15.8625 6.86755 15.4833 6.48093 15.0074 6.48093C14.1599 6.48093 13.4833 6.15379 13.1561 5.5813C12.829 5.00881 12.881 4.25788 13.3048 3.52926C13.4164 3.33595 13.4461 3.10546 13.3866 2.88242C13.3271 2.65937 13.1859 2.48093 12.9926 2.36197L11.7063 1.62591C11.6287 1.58041 11.5429 1.55066 11.4538 1.53837C11.3647 1.52608 11.274 1.53148 11.187 1.55427C11.1 1.57706 11.0183 1.61679 10.9467 1.67118C10.8751 1.72558 10.8148 1.79357 10.7695 1.87126L10.6877 2.01253C10.2639 2.74859 9.64684 3.16494 8.98513 3.16494C8.32342 3.16494 7.70632 2.74859 7.28253 2.01253L7.20074 1.86383C7.10835 1.71188 6.9603 1.602 6.78811 1.55756C6.61592 1.51313 6.43319 1.53765 6.27881 1.62591L4.99256 2.36941C4.79627 2.48264 4.65258 2.66875 4.59271 2.88732C4.53285 3.10588 4.56165 3.33924 4.67286 3.53669C5.09665 4.26532 5.1487 5.01625 4.82156 5.58874C4.49442 6.16123 3.81784 6.48836 2.97026 6.48836C2.49442 6.48836 2.11524 6.86755 2.11524 7.34338V8.65193C2.11524 9.12033 2.49442 9.50695 2.97026 9.50695C3.81784 9.50695 4.49442 9.83409 4.82156 10.4066C5.1487 10.9791 5.09665 11.73 4.67286 12.4586C4.56134 12.6519 4.5316 12.8824 4.59108 13.1055C4.65056 13.3285 4.79182 13.507 4.98513 13.6259L6.27138 14.362C6.42751 14.4586 6.61338 14.4809 6.78439 14.4363C6.96282 14.3917 7.11152 14.2727 7.20818 14.1166L7.28996 13.9754C7.71375 13.2467 8.33085 12.8229 8.99256 12.8229Z",fill:"#858585",stroke:"#858585",strokeWidth:"0.2"})]})}),f.jsx("span",{children:"تنظیمات"})]}),f.jsxs("div",{className:"menu-item",children:[f.jsx("span",{className:"menu-icon",children:f.jsxs("svg",{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{d:"M8.99245 10.7857C7.45342 10.7857 6.20435 9.53661 6.20435 7.99758C6.20435 6.45854 7.45342 5.20947 8.99245 5.20947C10.5315 5.20947 11.7806 6.45854 11.7806 7.99758C11.7806 9.53661 10.5315 10.7857 8.99245 10.7857ZM8.99245 6.32471C8.07052 6.32471 7.31959 7.07564 7.31959 7.99758C7.31959 8.91951 8.07052 9.67044 8.99245 9.67044C9.91438 9.67044 10.6653 8.91951 10.6653 7.99758C10.6653 7.07564 9.91438 6.32471 8.99245 6.32471Z",fill:"#858585",stroke:"#858585",strokeWidth:"0.2"}),f.jsx("path",{d:"M11.3792 15.5739C11.223 15.5739 11.0669 15.5516 10.9108 15.5144C10.4498 15.388 10.0632 15.098 9.81784 14.6891L9.72862 14.5404C9.28996 13.782 8.68773 13.782 8.24907 14.5404L8.16729 14.6817C7.92193 15.098 7.53532 15.3954 7.07435 15.5144C6.60595 15.6408 6.12268 15.5739 5.71375 15.3285L4.43494 14.5925C4.21024 14.4637 4.01313 14.2919 3.85487 14.0869C3.69662 13.8819 3.58033 13.6478 3.51266 13.3978C3.44499 13.1478 3.42726 12.8869 3.46049 12.6301C3.49372 12.3733 3.57725 12.1255 3.70632 11.901C3.92193 11.5218 3.98141 11.1798 3.85502 10.9642C3.72862 10.7486 3.40892 10.6222 2.97026 10.6222C1.88476 10.6222 1 9.73743 1 8.65193V7.34338C1 6.25788 1.88476 5.37312 2.97026 5.37312C3.40892 5.37312 3.72862 5.24673 3.85502 5.03112C3.98141 4.8155 3.92937 4.47349 3.70632 4.09431C3.4461 3.64078 3.37918 3.10546 3.51301 2.59989C3.64684 2.08688 3.97398 1.66309 4.43494 1.40286L5.72119 0.666803C6.56134 0.168662 7.66914 0.458625 8.17472 1.31364L8.26394 1.46234C8.7026 2.22071 9.30483 2.22071 9.74349 1.46234L9.82528 1.32108C10.3309 0.458625 11.4387 0.168662 12.2862 0.674238L13.5651 1.4103C13.7898 1.53905 13.9869 1.71083 14.1451 1.91582C14.3034 2.12081 14.4197 2.35499 14.4873 2.60497C14.555 2.85494 14.5727 3.11581 14.5395 3.37264C14.5063 3.62947 14.4227 3.87723 14.2937 4.10175C14.0781 4.48093 14.0186 4.82294 14.145 5.03855C14.2714 5.25416 14.5911 5.38056 15.0297 5.38056C16.1152 5.38056 17 6.26532 17 7.35082V8.65937C17 9.74487 16.1152 10.6296 15.0297 10.6296C14.5911 10.6296 14.2714 10.756 14.145 10.9716C14.0186 11.1872 14.0706 11.5293 14.2937 11.9084C14.5539 12.362 14.6283 12.8973 14.487 13.4029C14.4224 13.6544 14.3073 13.8902 14.1488 14.096C13.9904 14.3017 13.7918 14.4732 13.5651 14.5999L12.2788 15.3359C11.9963 15.4921 11.6914 15.5739 11.3792 15.5739ZM8.99256 12.8229C9.65427 12.8229 10.2714 13.2393 10.6952 13.9754L10.777 14.1166C10.8662 14.2727 11.0149 14.3843 11.1933 14.4289C11.3717 14.4735 11.5502 14.4512 11.6989 14.362L12.9851 13.6185C13.1814 13.5052 13.3251 13.3191 13.385 13.1006C13.4448 12.882 13.416 12.6486 13.3048 12.4512C12.881 11.7226 12.829 10.9716 13.1561 10.3991C13.4833 9.82665 14.1599 9.49952 15.0074 9.49952C15.4833 9.49952 15.8625 9.12033 15.8625 8.6445V7.33595C15.8625 6.86755 15.4833 6.48093 15.0074 6.48093C14.1599 6.48093 13.4833 6.15379 13.1561 5.5813C12.829 5.00881 12.881 4.25788 13.3048 3.52926C13.4164 3.33595 13.4461 3.10546 13.3866 2.88242C13.3271 2.65937 13.1859 2.48093 12.9926 2.36197L11.7063 1.62591C11.6287 1.58041 11.5429 1.55066 11.4538 1.53837C11.3647 1.52608 11.274 1.53148 11.187 1.55427C11.1 1.57706 11.0183 1.61679 10.9467 1.67118C10.8751 1.72558 10.8148 1.79357 10.7695 1.87126L10.6877 2.01253C10.2639 2.74859 9.64684 3.16494 8.98513 3.16494C8.32342 3.16494 7.70632 2.74859 7.28253 2.01253L7.20074 1.86383C7.10835 1.71188 6.9603 1.602 6.78811 1.55756C6.61592 1.51313 6.43319 1.53765 6.27881 1.62591L4.99256 2.36941C4.79627 2.48264 4.65258 2.66875 4.59271 2.88732C4.53285 3.10588 4.56165 3.33924 4.67286 3.53669C5.09665 4.26532 5.1487 5.01625 4.82156 5.58874C4.49442 6.16123 3.81784 6.48836 2.97026 6.48836C2.49442 6.48836 2.11524 6.86755 2.11524 7.34338V8.65193C2.11524 9.12033 2.49442 9.50695 2.97026 9.50695C3.81784 9.50695 4.49442 9.83409 4.82156 10.4066C5.1487 10.9791 5.09665 11.73 4.67286 12.4586C4.56134 12.6519 4.5316 12.8824 4.59108 13.1055C4.65056 13.3285 4.79182 13.507 4.98513 13.6259L6.27138 14.362C6.42751 14.4586 6.61338 14.4809 6.78439 14.4363C6.96282 14.3917 7.11152 14.2727 7.20818 14.1166L7.28996 13.9754C7.71375 13.2467 8.33085 12.8229 8.99256 12.8229Z",fill:"#858585",stroke:"#858585",strokeWidth:"0.2"})]})}),f.jsx("span",{children:"تغییر رمز عبور"})]}),f.jsxs("div",{className:"menu-item",children:[f.jsx("span",{className:"menu-icon",children:f.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{d:"M8.97093 5.11628C8.97093 4.71812 8.64816 4.39535 8.25 4.39535C7.85184 4.39535 7.52907 4.71812 7.52907 5.11628C7.52907 5.51444 7.85184 5.83721 8.25 5.83721C8.64816 5.83721 8.97093 5.51444 8.97093 5.11628Z",fill:"#858585"}),f.jsx("path",{d:"M8.25 12.1453C8.54862 12.1453 8.7907 11.9033 8.7907 11.6047V7.27907C8.7907 6.98045 8.54862 6.73837 8.25 6.73837C7.95138 6.73837 7.7093 6.98045 7.7093 7.27907V11.6047C7.7093 11.9033 7.95138 12.1453 8.25 12.1453Z",fill:"#858585"}),f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.29137 0.25H8.20863C6.54445 0.249991 5.24025 0.249984 4.22267 0.386794C3.18112 0.526828 2.35924 0.81905 1.71415 1.46415C1.06905 2.10924 0.776828 2.93112 0.636794 3.97267C0.499984 4.99025 0.499991 6.29444 0.5 7.95862V8.04137C0.499991 9.70555 0.499984 11.0097 0.636794 12.0273C0.776828 13.0689 1.06905 13.8908 1.71415 14.5359C2.35924 15.181 3.18112 15.4732 4.22267 15.6132C5.24026 15.75 6.54445 15.75 8.20864 15.75H8.29136C9.95555 15.75 11.2597 15.75 12.2773 15.6132C13.3189 15.4732 14.1408 15.181 14.7859 14.5359C15.431 13.8908 15.7232 13.0689 15.8632 12.0273C16 11.0097 16 9.70555 16 8.04136V7.95864C16 6.29445 16 4.99026 15.8632 3.97267C15.7232 2.93112 15.431 2.10924 14.7859 1.46415C14.1408 0.81905 13.3189 0.526828 12.2773 0.386794C11.2597 0.249984 9.95555 0.249991 8.29137 0.25ZM2.47881 2.22881C2.88949 1.81812 3.44513 1.58246 4.36676 1.45855C5.30396 1.33254 6.53547 1.3314 8.25 1.3314C9.96453 1.3314 11.196 1.33254 12.1332 1.45855C13.0549 1.58246 13.6105 1.81812 14.0212 2.22881C14.4319 2.63949 14.6675 3.19513 14.7915 4.11676C14.9175 5.05396 14.9186 6.28547 14.9186 8C14.9186 9.71453 14.9175 10.946 14.7915 11.8832C14.6675 12.8049 14.4319 13.3605 14.0212 13.7712C13.6105 14.1819 13.0549 14.4175 12.1332 14.5415C11.196 14.6675 9.96453 14.6686 8.25 14.6686C6.53547 14.6686 5.30396 14.6675 4.36676 14.5415C3.44513 14.4175 2.88949 14.1819 2.47881 13.7712C2.06812 13.3605 1.83246 12.8049 1.70855 11.8832C1.58254 10.946 1.5814 9.71453 1.5814 8C1.5814 6.28547 1.58254 5.05396 1.70855 4.11676C1.83246 3.19513 2.06812 2.63949 2.47881 2.22881Z",fill:"#858585"}),f.jsx("path",{d:"M8.97093 5.11628C8.97093 4.71812 8.64816 4.39535 8.25 4.39535C7.85184 4.39535 7.52907 4.71812 7.52907 5.11628C7.52907 5.51444 7.85184 5.83721 8.25 5.83721C8.64816 5.83721 8.97093 5.51444 8.97093 5.11628Z",stroke:"#858585",strokeWidth:"0.2"}),f.jsx("path",{d:"M8.25 12.1453C8.54862 12.1453 8.7907 11.9033 8.7907 11.6047V7.27907C8.7907 6.98045 8.54862 6.73837 8.25 6.73837C7.95138 6.73837 7.7093 6.98045 7.7093 7.27907V11.6047C7.7093 11.9033 7.95138 12.1453 8.25 12.1453Z",stroke:"#858585",strokeWidth:"0.2"}),f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.29137 0.25H8.20863C6.54445 0.249991 5.24025 0.249984 4.22267 0.386794C3.18112 0.526828 2.35924 0.81905 1.71415 1.46415C1.06905 2.10924 0.776828 2.93112 0.636794 3.97267C0.499984 4.99025 0.499991 6.29444 0.5 7.95862V8.04137C0.499991 9.70555 0.499984 11.0097 0.636794 12.0273C0.776828 13.0689 1.06905 13.8908 1.71415 14.5359C2.35924 15.181 3.18112 15.4732 4.22267 15.6132C5.24026 15.75 6.54445 15.75 8.20864 15.75H8.29136C9.95555 15.75 11.2597 15.75 12.2773 15.6132C13.3189 15.4732 14.1408 15.181 14.7859 14.5359C15.431 13.8908 15.7232 13.0689 15.8632 12.0273C16 11.0097 16 9.70555 16 8.04136V7.95864C16 6.29445 16 4.99026 15.8632 3.97267C15.7232 2.93112 15.431 2.10924 14.7859 1.46415C14.1408 0.81905 13.3189 0.526828 12.2773 0.386794C11.2597 0.249984 9.95555 0.249991 8.29137 0.25ZM2.47881 2.22881C2.88949 1.81812 3.44513 1.58246 4.36676 1.45855C5.30396 1.33254 6.53547 1.3314 8.25 1.3314C9.96453 1.3314 11.196 1.33254 12.1332 1.45855C13.0549 1.58246 13.6105 1.81812 14.0212 2.22881C14.4319 2.63949 14.6675 3.19513 14.7915 4.11676C14.9175 5.05396 14.9186 6.28547 14.9186 8C14.9186 9.71453 14.9175 10.946 14.7915 11.8832C14.6675 12.8049 14.4319 13.3605 14.0212 13.7712C13.6105 14.1819 13.0549 14.4175 12.1332 14.5415C11.196 14.6675 9.96453 14.6686 8.25 14.6686C6.53547 14.6686 5.30396 14.6675 4.36676 14.5415C3.44513 14.4175 2.88949 14.1819 2.47881 13.7712C2.06812 13.3605 1.83246 12.8049 1.70855 11.8832C1.58254 10.946 1.5814 9.71453 1.5814 8C1.5814 6.28547 1.58254 5.05396 1.70855 4.11676C1.83246 3.19513 2.06812 2.63949 2.47881 2.22881Z",stroke:"#858585",strokeWidth:"0.2"})]})}),f.jsx("span",{children:"پشتیبانی"})]}),f.jsxs("div",{className:"menu-item",children:[f.jsx("span",{className:"menu-icon9",children:f.jsxs("svg",{width:"16",height:"18",viewBox:"0 0 16 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{d:"M8.84615 1.44869C8.84615 1.11945 8.57925 0.852539 8.25 0.852539C7.92075 0.852539 7.65385 1.11945 7.65385 1.44869V4.62818C7.65385 4.95743 7.92075 5.22433 8.25 5.22433C8.57925 5.22433 8.84615 4.95743 8.84615 4.62818V1.44869Z",fill:"#EA4335"}),f.jsx("path",{d:"M5.69997 3.35383C6.00326 3.22568 6.14524 2.87594 6.0171 2.57266C5.88896 2.26937 5.53922 2.12738 5.23593 2.25552C2.45405 3.43088 0.5 6.18526 0.5 9.39741C0.5 13.6776 3.96979 17.1474 8.25 17.1474C12.5302 17.1474 16 13.6776 16 9.39741C16 6.18526 14.0459 3.43088 11.2641 2.25552C10.9608 2.12738 10.611 2.26937 10.4829 2.57266C10.3548 2.87594 10.4967 3.22568 10.8 3.35383C13.1561 4.34928 14.8077 6.68116 14.8077 9.39741C14.8077 13.0191 11.8717 15.9551 8.25 15.9551C4.62829 15.9551 1.69231 13.0191 1.69231 9.39741C1.69231 6.68116 3.34389 4.34928 5.69997 3.35383Z",fill:"#EA4335"}),f.jsx("path",{d:"M8.84615 1.44869C8.84615 1.11945 8.57925 0.852539 8.25 0.852539C7.92075 0.852539 7.65385 1.11945 7.65385 1.44869V4.62818C7.65385 4.95743 7.92075 5.22433 8.25 5.22433C8.57925 5.22433 8.84615 4.95743 8.84615 4.62818V1.44869Z",stroke:"#EA4335",strokeWidth:"0.2",strokeLinecap:"round"}),f.jsx("path",{d:"M5.69997 3.35383C6.00326 3.22568 6.14524 2.87594 6.0171 2.57266C5.88896 2.26937 5.53922 2.12738 5.23593 2.25552C2.45405 3.43088 0.5 6.18526 0.5 9.39741C0.5 13.6776 3.96979 17.1474 8.25 17.1474C12.5302 17.1474 16 13.6776 16 9.39741C16 6.18526 14.0459 3.43088 11.2641 2.25552C10.9608 2.12738 10.611 2.26937 10.4829 2.57266C10.3548 2.87594 10.4967 3.22568 10.8 3.35383C13.1561 4.34928 14.8077 6.68116 14.8077 9.39741C14.8077 13.0191 11.8717 15.9551 8.25 15.9551C4.62829 15.9551 1.69231 13.0191 1.69231 9.39741C1.69231 6.68116 3.34389 4.34928 5.69997 3.35383Z",stroke:"#EA4335",strokeWidth:"0.2",strokeLinecap:"round"})]})}),f.jsx("span",{className:"menu-item-exit",children:"خروج از حساب"})]})]})]}),f.jsxs("div",{className:"admin-content",children:[f.jsxs("div",{className:"content-header",children:[f.jsx("div",{className:"breadcrumb-nav",children:te.map((Ke,Me)=>f.jsxs("span",{className:"breadcrumb-item",children:[Ke,Me<te.length-1&&f.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M10 12L6 8L10 4",stroke:"#858585",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})]},Me))}),f.jsxs("div",{className:"header-content-wrapper",children:[f.jsxs("div",{children:[f.jsx("h1",{children:"آمار و جزئیات کلی محصول مسیربایی حرم تا امروز"}),f.jsx("p",{children:"لورم ایسدوم متن ساختگی با تولید سادگی نامفهوم از صنعت استفاده از طراحان گرافیک است چاپگرها"})]}),f.jsxs("div",{className:"calendar-section",children:[f.jsx("div",{className:"date-display",children:ye($)}),f.jsx("button",{className:"calendar-btn",onClick:()=>H(!q),children:f.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("circle",{cx:"20",cy:"20",r:"20",fill:"#F2F2F2"}),f.jsx("path",{d:"M17.1433 12.6388C17.2606 12.639 17.361 12.7402 17.361 12.8575V15.0001C17.361 15.1175 17.2606 15.2177 17.1433 15.2179C17.0258 15.2179 16.9246 15.1176 16.9245 15.0001V12.8575C16.9245 12.74 17.0257 12.6388 17.1433 12.6388Z",fill:"#1E2023",stroke:"#1E2023",strokeWidth:"0.634921"}),f.jsx("path",{d:"M22.8576 12.6388C22.9749 12.639 23.0753 12.7402 23.0753 12.8575V15.0001C23.0753 15.1175 22.9749 15.2177 22.8576 15.2179C22.7401 15.2179 22.6389 15.1176 22.6388 15.0001V12.8575C22.6388 12.74 22.74 12.6388 22.8576 12.6388Z",fill:"#1E2023",stroke:"#1E2023",strokeWidth:"0.634921"}),f.jsx("path",{d:"M17.5 21.7857C17.4071 21.7857 17.3143 21.7643 17.2286 21.7286C17.1357 21.6929 17.0643 21.6429 16.9929 21.5786C16.8643 21.4429 16.7857 21.2643 16.7857 21.0714C16.7857 20.9786 16.8071 20.8857 16.8429 20.8C16.8786 20.7143 16.9286 20.6357 16.9929 20.5643C17.0643 20.5 17.1357 20.45 17.2286 20.4143C17.4857 20.3071 17.8071 20.3643 18.0071 20.5643C18.1357 20.7 18.2143 20.8857 18.2143 21.0714C18.2143 21.1143 18.2071 21.1643 18.2 21.2143C18.1929 21.2572 18.1786 21.3 18.1571 21.3429C18.1429 21.3857 18.1214 21.4286 18.0929 21.4714C18.0714 21.5072 18.0357 21.5429 18.0071 21.5786C17.8714 21.7071 17.6857 21.7857 17.5 21.7857Z",fill:"#1E2023"}),f.jsx("path",{d:"M20 21.7857C19.9071 21.7857 19.8143 21.7643 19.7286 21.7286C19.6357 21.6928 19.5643 21.6428 19.4929 21.5785C19.3643 21.4428 19.2857 21.2643 19.2857 21.0714C19.2857 20.9786 19.3071 20.8857 19.3429 20.8C19.3786 20.7143 19.4286 20.6357 19.4929 20.5643C19.5643 20.5 19.6357 20.45 19.7286 20.4143C19.9857 20.3 20.3071 20.3643 20.5071 20.5643C20.6357 20.7 20.7143 20.8857 20.7143 21.0714C20.7143 21.1143 20.7071 21.1643 20.7 21.2143C20.6929 21.2571 20.6786 21.3 20.6571 21.3428C20.6429 21.3857 20.6214 21.4285 20.5929 21.4714C20.5714 21.5071 20.5357 21.5428 20.5071 21.5785C20.3714 21.7071 20.1857 21.7857 20 21.7857Z",fill:"#1E2023"}),f.jsx("path",{d:"M22.5 21.7857C22.4071 21.7857 22.3143 21.7643 22.2286 21.7286C22.1357 21.6928 22.0643 21.6428 21.9929 21.5785C21.9643 21.5428 21.9357 21.5071 21.9071 21.4714C21.8786 21.4285 21.8571 21.3857 21.8429 21.3428C21.8214 21.3 21.8071 21.2571 21.8 21.2143C21.7929 21.1643 21.7857 21.1143 21.7857 21.0714C21.7857 20.8857 21.8643 20.7 21.9929 20.5643C22.0643 20.5 22.1357 20.45 22.2286 20.4143C22.4929 20.3 22.8071 20.3643 23.0071 20.5643C23.1357 20.7 23.2143 20.8857 23.2143 21.0714C23.2143 21.1143 23.2071 21.1643 23.2 21.2143C23.1929 21.2571 23.1786 21.3 23.1571 21.3428C23.1429 21.3857 23.1214 21.4285 23.0929 21.4714C23.0714 21.5071 23.0357 21.5428 23.0071 21.5785C22.8714 21.7071 22.6857 21.7857 22.5 21.7857Z",fill:"#1E2023"}),f.jsx("path",{d:"M17.5 24.2857C17.4071 24.2857 17.3143 24.2643 17.2286 24.2286C17.1429 24.1928 17.0643 24.1428 16.9929 24.0785C16.8643 23.4428 16.7857 23.7571 16.7857 23.5714C16.7857 23.4786 16.8071 23.3857 16.8429 23.3C16.8786 23.2071 16.9286 23.1286 16.9929 23.0643C17.2571 22.8 17.7429 22.8 18.0071 23.0643C18.1357 23.2 18.2143 23.3857 18.2143 23.5714C18.2143 23.7571 18.1357 23.9428 18.0071 24.0785C17.8714 24.2071 17.6857 24.2857 17.5 24.2857Z",fill:"#1E2023"}),f.jsx("path",{d:"M20 24.2857C19.8143 24.2857 19.6286 24.2071 19.4929 24.0785C19.3643 23.9428 19.2857 23.7571 19.2857 23.5714C19.2857 23.4786 19.3071 23.3857 19.3429 23.3C19.3786 23.2071 19.4286 23.1286 19.4929 23.0643C19.7571 22.8 20.2429 22.8 20.5071 23.0643C20.5714 23.1286 20.6214 23.2071 20.6571 23.3C20.6929 23.3857 20.7143 23.4786 20.7143 23.5714C20.7143 23.7571 20.6357 23.9428 20.5071 24.0785C20.3714 24.2071 20.1857 24.2857 20 24.2857Z",fill:"#1E2023"}),f.jsx("path",{d:"M22.5 24.2857C22.3143 24.2857 22.1286 24.2072 21.9929 24.0786C21.9286 24.0143 21.8786 23.9357 21.8429 23.8429C21.8071 23.7572 21.7857 23.6643 21.7857 23.5715C21.7857 23.4786 21.8071 23.3857 21.8429 23.3C21.8786 23.2072 21.9286 23.1286 21.9929 23.0643C22.1571 22.9 22.4071 22.8215 22.6357 22.8715C22.6857 22.8786 22.7286 22.8929 22.7714 22.9143C22.8143 22.9286 22.8571 22.95 22.9 22.9786C22.9357 23 22.9714 23.0357 23.0071 23.0643C23.1357 23.2 23.2143 23.3857 23.2143 23.5715C23.2143 23.7572 23.1357 23.9429 23.0071 24.0786C22.8714 24.2072 22.6857 24.2857 22.5 24.2857Z",fill:"#1E2023"}),f.jsx("path",{d:"M26.0714 18.4571H13.9286C13.6357 18.4571 13.3929 18.2143 13.3929 17.9214C13.3929 17.6285 13.6357 17.3857 13.9286 17.3857H26.0714C26.3643 17.3857 26.6071 17.6285 26.6071 17.9214C26.6071 18.2143 26.3643 18.4571 26.0714 18.4571Z",fill:"#1E2023"}),f.jsx("path",{d:"M22.8571 27.6786H17.1429C14.5357 27.6786 13.0357 26.1786 13.0357 23.5714V17.5C13.0357 14.8929 14.5357 13.3929 17.1429 13.3929H22.8571C25.4643 13.3929 26.9643 14.8929 26.9643 17.5V23.5714C26.9643 26.1786 25.4643 27.6786 22.8571 27.6786ZM17.1429 14.4643C15.1 14.4643 14.1071 15.4571 14.1071 17.5V23.5714C14.1071 25.6143 15.1 26.6071 17.1429 26.6071H22.8571C24.9 26.6071 25.8929 25.6143 25.8929 23.5714V17.5C25.8929 15.4571 24.9 14.4643 22.8571 14.4643H17.1429Z",fill:"#1E2023"})]})}),q&&f.jsx("div",{className:"calendar-popup",ref:G,children:f.jsx(LM,{selected:$,onChange:Ke=>{U(Ke),H(!1)},inline:!0,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",renderCustomHeader:({date:Ke,decreaseMonth:Me,increaseMonth:qe,prevMonthButtonDisabled:Re,nextMonthButtonDisabled:dt})=>f.jsxs("div",{className:"custom-header",children:[f.jsx("button",{onClick:Me,disabled:Re,children:"‹"}),f.jsx("span",{children:Ke.toLocaleDateString("fa-IR",{year:"numeric",month:"long"})}),f.jsx("button",{onClick:qe,disabled:dt,children:"›"})]})})})]})]})]}),f.jsxs("div",{className:"charts-section",children:[f.jsxs("div",{className:"chart-container-middle",children:[f.jsxs("div",{className:"stats-cards-container",children:[f.jsxs("div",{className:"stat-card",children:[f.jsx("div",{className:"stat-card-icon",children:f.jsxs("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("rect",{x:"4",y:"4",width:"48",height:"48",rx:"24",fill:"#0F71EF"}),f.jsx("rect",{x:"4",y:"4",width:"48",height:"48",rx:"24",stroke:"#F5F6FF",strokeWidth:"8"}),f.jsx("path",{d:"M28.1706 36.6377C27.2958 36.6377 26.4291 36.3809 25.7469 35.8753L22.2958 33.299C21.3809 32.6169 20.6666 31.1963 20.6666 30.0567V24.0936C20.6666 22.8576 21.5735 21.5414 22.7373 21.108L26.7421 19.6072C27.5366 19.3103 28.7886 19.3103 29.5832 19.6072L33.596 21.108C34.7597 21.5414 35.6666 22.8576 35.6666 24.0936V30.0567C35.6666 31.1963 34.9523 32.6169 34.0374 33.299L30.5864 35.8753C29.9122 36.3809 29.0454 36.6377 28.1706 36.6377ZM27.1674 20.7308L23.1626 22.2316C22.4724 22.4885 21.8705 23.3552 21.8705 24.0936V30.0567C21.8705 30.8191 22.4082 31.8865 23.0101 32.336L26.4612 34.9122C27.3841 35.6024 28.9491 35.6024 29.8721 34.9122L33.3231 32.336C33.9331 31.8785 34.4628 30.8111 34.4628 30.0567V24.0936C34.4628 23.3633 33.8608 22.4965 33.1706 22.2316L29.1658 20.7308C28.6361 20.5302 27.7051 20.5302 27.1674 20.7308Z",fill:"white"}),f.jsx("path",{d:"M27.1674 20.7308L23.1626 22.2316C22.4724 22.4885 21.8705 23.3552 21.8705 24.0936V30.0567C21.8705 30.8191 22.4082 31.8865 23.0101 32.336L26.4612 34.9122C27.3841 35.6024 28.9491 35.6024 29.8721 34.9122L33.3231 32.336C33.9331 31.8785 34.4628 30.8111 34.4628 30.0567V24.0936C34.4628 23.3633 33.8608 22.4965 33.1706 22.2316L29.1658 20.7308C28.6361 20.5302 27.7051 20.5302 27.1674 20.7308Z",fill:"white"}),f.jsx("path",{d:"M28.1706 27.7373H28.1144C26.9507 27.7052 26.1 26.8143 26.1 25.7309C26.1 24.6233 27.0069 23.7164 28.1144 23.7164C29.222 23.7164 30.1289 24.6233 30.1289 25.7309C30.1284 26.2526 29.9258 26.7539 29.5637 27.1295C29.2016 27.5051 28.708 27.7258 28.1866 27.7453C28.1786 27.7373 28.1786 27.7373 28.1706 27.7373ZM28.1144 24.9203C27.665 24.9203 27.3038 25.2814 27.3038 25.7309C27.3038 26.1723 27.6489 26.5254 28.0823 26.5415H28.1706C28.3764 26.5291 28.5695 26.438 28.71 26.2871C28.8504 26.1362 28.9274 25.937 28.925 25.7309C28.9261 25.6241 28.9058 25.5182 28.8655 25.4194C28.8251 25.3206 28.7655 25.2308 28.69 25.1553C28.6145 25.0798 28.5247 25.0202 28.4259 24.9798C28.327 24.9394 28.2212 24.9192 28.1144 24.9203ZM28.1706 32.2959C27.4804 32.2959 26.7822 32.1113 26.2444 31.7501C25.7067 31.397 25.4017 30.8761 25.4017 30.3224C25.4017 29.7686 25.7067 29.2469 26.2444 28.8858C27.3279 28.1635 29.0213 28.1715 30.0968 28.8858C30.6345 29.2389 30.9395 29.7606 30.9395 30.3143C30.9395 30.8681 30.6345 31.3898 30.0968 31.7509C29.559 32.1121 28.8608 32.2959 28.1706 32.2959ZM26.9106 29.8802C26.7099 30.0086 26.5976 30.1691 26.6056 30.3135C26.6056 30.458 26.7179 30.6185 26.9106 30.7469C27.5847 31.1964 28.7565 31.1964 29.4306 30.7469C29.6313 30.6185 29.7436 30.458 29.7436 30.3135C29.7436 30.1691 29.6313 30.0086 29.4387 29.8802C28.7645 29.4387 27.5847 29.4387 26.9106 29.8802Z",fill:"#0F71EF"})]})}),f.jsxs("div",{className:"stat-card-content",children:[f.jsx("div",{className:"stat-card-title",children:"تعداد کاربران"}),f.jsx("div",{className:"stat-card-value",children:"۱,۴۵۶,۰۰۳"})]})]}),f.jsxs("div",{className:"stat-card",children:[f.jsx("div",{className:"stat-card-icon",children:f.jsxs("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("rect",{x:"4",y:"4",width:"48",height:"48",rx:"24",fill:"#0F71EF"}),f.jsx("rect",{x:"4",y:"4",width:"48",height:"48",rx:"24",stroke:"#F5F6FF",strokeWidth:"8"}),f.jsx("path",{d:"M28.1706 36.6377C27.2958 36.6377 26.4291 36.3809 25.7469 35.8753L22.2958 33.299C21.3809 32.6169 20.6666 31.1963 20.6666 30.0567V24.0936C20.6666 22.8576 21.5735 21.5414 22.7373 21.108L26.7421 19.6072C27.5366 19.3103 28.7886 19.3103 29.5832 19.6072L33.596 21.108C34.7597 21.5414 35.6666 22.8576 35.6666 24.0936V30.0567C35.6666 31.1963 34.9523 32.6169 34.0374 33.299L30.5864 35.8753C29.9122 36.3809 29.0454 36.6377 28.1706 36.6377ZM27.1674 20.7308L23.1626 22.2316C22.4724 22.4885 21.8705 23.3552 21.8705 24.0936V30.0567C21.8705 30.8191 22.4082 31.8865 23.0101 32.336L26.4612 34.9122C27.3841 35.6024 28.9491 35.6024 29.8721 34.9122L33.3231 32.336C33.9331 31.8785 34.4628 30.8111 34.4628 30.0567V24.0936C34.4628 23.3633 33.8608 22.4965 33.1706 22.2316L29.1658 20.7308C28.6361 20.5302 27.7051 20.5302 27.1674 20.7308Z",fill:"white"}),f.jsx("path",{d:"M27.1674 20.7308L23.1626 22.2316C22.4724 22.4885 21.8705 23.3552 21.8705 24.0936V30.0567C21.8705 30.8191 22.4082 31.8865 23.0101 32.336L26.4612 34.9122C27.3841 35.6024 28.9491 35.6024 29.8721 34.9122L33.3231 32.336C33.9331 31.8785 34.4628 30.8111 34.4628 30.0567V24.0936C34.4628 23.3633 33.8608 22.4965 33.1706 22.2316L29.1658 20.7308C28.6361 20.5302 27.7051 20.5302 27.1674 20.7308Z",fill:"white"}),f.jsx("path",{d:"M28.1706 27.7373H28.1144C26.9507 27.7052 26.1 26.8143 26.1 25.7309C26.1 24.6233 27.0069 23.7164 28.1144 23.7164C29.222 23.7164 30.1289 24.6233 30.1289 25.7309C30.1284 26.2526 29.9258 26.7539 29.5637 27.1295C29.2016 27.5051 28.708 27.7258 28.1866 27.7453C28.1786 27.7373 28.1786 27.7373 28.1706 27.7373ZM28.1144 24.9203C27.665 24.9203 27.3038 25.2814 27.3038 25.7309C27.3038 26.1723 27.6489 26.5254 28.0823 26.5415H28.1706C28.3764 26.5291 28.5695 26.438 28.71 26.2871C28.8504 26.1362 28.9274 25.937 28.925 25.7309C28.9261 25.6241 28.9058 25.5182 28.8655 25.4194C28.8251 25.3206 28.7655 25.2308 28.69 25.1553C28.6145 25.0798 28.5247 25.0202 28.4259 24.9798C28.327 24.9394 28.2212 24.9192 28.1144 24.9203ZM28.1706 32.2959C27.4804 32.2959 26.7822 32.1113 26.2444 31.7501C25.7067 31.397 25.4017 30.8761 25.4017 30.3224C25.4017 29.7686 25.7067 29.2469 26.2444 28.8858C27.3279 28.1635 29.0213 28.1715 30.0968 28.8858C30.6345 29.2389 30.9395 29.7606 30.9395 30.3143C30.9395 30.8681 30.6345 31.3898 30.0968 31.7509C29.559 32.1121 28.8608 32.2959 28.1706 32.2959ZM26.9106 29.8802C26.7099 30.0086 26.5976 30.1691 26.6056 30.3135C26.6056 30.458 26.7179 30.6185 26.9106 30.7469C27.5847 31.1964 28.7565 31.1964 29.4306 30.7469C29.6313 30.6185 29.7436 30.458 29.7436 30.3135C29.7436 30.1691 29.6313 30.0086 29.4387 29.8802C28.7645 29.4387 27.5847 29.4387 26.9106 29.8802Z",fill:"#0F71EF"})]})}),f.jsxs("div",{className:"stat-card-content",children:[f.jsx("div",{className:"stat-card-title",children:"مسیریابی های موفق"}),f.jsx("div",{className:"stat-card-value",children:"۷۲۸,۱۰۵"})]})]}),f.jsxs("div",{className:"stat-card",children:[f.jsx("div",{className:"stat-card-icon",children:f.jsxs("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("rect",{x:"4",y:"4",width:"48",height:"48",rx:"24",fill:"#0F71EF"}),f.jsx("rect",{x:"4",y:"4",width:"48",height:"48",rx:"24",stroke:"#F5F6FF",strokeWidth:"8"}),f.jsx("path",{d:"M28.1706 36.6377C27.2958 36.6377 26.4291 36.3809 25.7469 35.8753L22.2958 33.299C21.3809 32.6169 20.6666 31.1963 20.6666 30.0567V24.0936C20.6666 22.8576 21.5735 21.5414 22.7373 21.108L26.7421 19.6072C27.5366 19.3103 28.7886 19.3103 29.5832 19.6072L33.596 21.108C34.7597 21.5414 35.6666 22.8576 35.6666 24.0936V30.0567C35.6666 31.1963 34.9523 32.6169 34.0374 33.299L30.5864 35.8753C29.9122 36.3809 29.0454 36.6377 28.1706 36.6377ZM27.1674 20.7308L23.1626 22.2316C22.4724 22.4885 21.8705 23.3552 21.8705 24.0936V30.0567C21.8705 30.8191 22.4082 31.8865 23.0101 32.336L26.4612 34.9122C27.3841 35.6024 28.9491 35.6024 29.8721 34.9122L33.3231 32.336C33.9331 31.8785 34.4628 30.8111 34.4628 30.0567V24.0936C34.4628 23.3633 33.8608 22.4965 33.1706 22.2316L29.1658 20.7308C28.6361 20.5302 27.7051 20.5302 27.1674 20.7308Z",fill:"white"}),f.jsx("path",{d:"M27.1674 20.7308L23.1626 22.2316C22.4724 22.4885 21.8705 23.3552 21.8705 24.0936V30.0567C21.8705 30.8191 22.4082 31.8865 23.0101 32.336L26.4612 34.9122C27.3841 35.6024 28.9491 35.6024 29.8721 34.9122L33.3231 32.336C33.9331 31.8785 34.4628 30.8111 34.4628 30.0567V24.0936C34.4628 23.3633 33.8608 22.4965 33.1706 22.2316L29.1658 20.7308C28.6361 20.5302 27.7051 20.5302 27.1674 20.7308Z",fill:"white"}),f.jsx("path",{d:"M28.1706 27.7373H28.1144C26.9507 27.7052 26.1 26.8143 26.1 25.7309C26.1 24.6233 27.0069 23.7164 28.1144 23.7164C29.222 23.7164 30.1289 24.6233 30.1289 25.7309C30.1284 26.2526 29.9258 26.7539 29.5637 27.1295C29.2016 27.5051 28.708 27.7258 28.1866 27.7453C28.1786 27.7373 28.1786 27.7373 28.1706 27.7373ZM28.1144 24.9203C27.665 24.9203 27.3038 25.2814 27.3038 25.7309C27.3038 26.1723 27.6489 26.5254 28.0823 26.5415H28.1706C28.3764 26.5291 28.5695 26.438 28.71 26.2871C28.8504 26.1362 28.9274 25.937 28.925 25.7309C28.9261 25.6241 28.9058 25.5182 28.8655 25.4194C28.8251 25.3206 28.7655 25.2308 28.69 25.1553C28.6145 25.0798 28.5247 25.0202 28.4259 24.9798C28.327 24.9394 28.2212 24.9192 28.1144 24.9203ZM28.1706 32.2959C27.4804 32.2959 26.7822 32.1113 26.2444 31.7501C25.7067 31.397 25.4017 30.8761 25.4017 30.3224C25.4017 29.7686 25.7067 29.2469 26.2444 28.8858C27.3279 28.1635 29.0213 28.1715 30.0968 28.8858C30.6345 29.2389 30.9395 29.7606 30.9395 30.3143C30.9395 30.8681 30.6345 31.3898 30.0968 31.7509C29.559 32.1121 28.8608 32.2959 28.1706 32.2959ZM26.9106 29.8802C26.7099 30.0086 26.5976 30.1691 26.6056 30.3135C26.6056 30.458 26.7179 30.6185 26.9106 30.7469C27.5847 31.1964 28.7565 31.1964 29.4306 30.7469C29.6313 30.6185 29.7436 30.458 29.7436 30.3135C29.7436 30.1691 29.6313 30.0086 29.4387 29.8802C28.7645 29.4387 27.5847 29.4387 26.9106 29.8802Z",fill:"#0F71EF"})]})}),f.jsxs("div",{className:"stat-card-content",children:[f.jsx("div",{className:"stat-card-title",children:"مراکز فرهنگی موجود"}),f.jsx("div",{className:"stat-card-value",children:"۱۵۶"})]})]})]}),f.jsxs("div",{className:"middle-chart-content",children:[f.jsxs("div",{className:"chart-header",children:[f.jsxs("div",{className:"chart-title",children:[f.jsx("h3",{children:"آمار بازدید هفته اخیر کاربران"}),f.jsx("p",{children:"تعداد بازدید کاربران فعال از اپلیکیشن در هفته اخیر"})]}),f.jsxs("div",{className:"chart-filter",children:[f.jsx("span",{children:"هفته اخیر"}),f.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.69213 7.09327C3.91677 6.83119 4.31133 6.80084 4.57341 7.02548L10 11.6768L15.4266 7.02548C15.6887 6.80084 16.0832 6.83119 16.3079 7.09327C16.5325 7.35535 16.5022 7.74991 16.2401 7.97455L10.4067 12.9745C10.1727 13.1752 9.82731 13.1752 9.59326 12.9745L3.75992 7.97455C3.49784 7.74991 3.46749 7.35535 3.69213 7.09327Z",fill:"#1E2023"})})]})]}),f.jsxs("div",{className:"bar-chart-container",children:[f.jsxs("div",{className:"chart-area",children:[f.jsx("div",{className:"grid-line"}),f.jsx("div",{className:"grid-line"}),f.jsx("div",{className:"grid-line"}),f.jsx("div",{className:"grid-line"}),f.jsxs("div",{className:"bars-container",children:[f.jsxs("div",{className:"bar-wrapper",children:[f.jsx("div",{className:"bar",style:{height:"70%"}}),f.jsx("div",{className:"x-label",children:"شنبه"})]}),f.jsxs("div",{className:"bar-wrapper",children:[f.jsx("div",{className:"bar",style:{height:"45%"}}),f.jsx("div",{className:"x-label",children:"یکشنبه"})]}),f.jsxs("div",{className:"bar-wrapper",children:[f.jsx("div",{className:"bar",style:{height:"85%"}}),f.jsx("div",{className:"x-label",children:"دوشنبه"})]}),f.jsxs("div",{className:"bar-wrapper",children:[f.jsx("div",{className:"bar",style:{height:"60%"}}),f.jsx("div",{className:"x-label",children:"سه شنبه"})]}),f.jsxs("div",{className:"bar-wrapper",children:[f.jsx("div",{className:"bar",style:{height:"30%"}}),f.jsx("div",{className:"x-label",children:"چهارشنبه"})]}),f.jsxs("div",{className:"bar-wrapper",children:[f.jsx("div",{className:"bar",style:{height:"90%"}}),f.jsx("div",{className:"x-label",children:"پنجشنبه"})]}),f.jsxs("div",{className:"bar-wrapper",children:[f.jsx("div",{className:"bar",style:{height:"50%"}}),f.jsx("div",{className:"x-label",children:"جمعه"})]})]})]}),f.jsxs("div",{className:"y-axis",children:[f.jsx("div",{className:"y-label",children:"۱۰۱ - ۲۰۰"}),f.jsx("div",{className:"y-label",children:"۵۱ - ۱۰۰"}),f.jsx("div",{className:"y-label",children:"۱ - ۵۰"}),f.jsx("div",{className:"y-label",children:"۰"})]})]})]})]}),f.jsxs("div",{className:"chart-container-left",children:[f.jsxs("div",{className:"chart-header-with-filter",children:[f.jsx("h3",{children:"نظرات ثبت شده"}),f.jsxs("div",{className:"time-filter",children:[f.jsx("span",{children:"ماه اخیر"}),f.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.64645 5.64645C3.84171 5.45118 4.15829 5.45118 4.35355 5.64645L8 9.29289L11.6464 5.64645C11.8417 5.45118 12.1583 5.45118 12.3536 5.64645C12.5488 5.84171 12.5488 6.15829 12.3536 6.35355L8.35355 10.3536C8.15829 10.5488 7.84171 10.5488 7.64645 10.3536L3.64645 6.35355C3.45118 6.15829 3.45118 5.84171 3.64645 5.64645Z",fill:"#1E2023"})})]})]}),f.jsx("div",{className:"pie-chart-wrapper",children:f.jsx("div",{className:"pie-chart-main",children:f.jsx("div",{className:"pie-chart-visual",style:{background:`conic-gradient(#0F71EF 0deg ${m}deg, white ${m}deg ${m+2}deg, #F44336 ${m+2}deg ${m+x+2}deg, white ${m+x+2}deg ${m+x+4}deg, #F2F2F2 ${m+x+4}deg 360deg)`},children:f.jsx("div",{className:"pie-center"})})})}),f.jsxs("div",{className:"table-header",children:[f.jsx("span",{children:"نظرات و حالت ها"}),f.jsx("span",{children:"تعداد"})]}),f.jsxs("div",{className:"comments-table",children:[f.jsxs("div",{className:"table-row2",children:[f.jsx("span",{children:"کل نظرات ثبت شده (مرداد)"}),f.jsx("span",{className:"count-value",children:i.total})]}),f.jsxs("div",{className:"table-row",children:[f.jsxs("div",{className:"stat-info",children:[f.jsx("div",{className:"stat-color approved"}),f.jsx("span",{children:"تایید و انتشار"})]}),f.jsx("div",{className:"count-value",children:i.approved})]}),f.jsxs("div",{className:"table-row",children:[f.jsxs("div",{className:"stat-info",children:[f.jsx("div",{className:"stat-color rejected"}),f.jsx("span",{children:"رد شده"})]}),f.jsx("div",{className:"count-value",children:i.rejected})]})]})]})]}),f.jsxs("div",{className:"users-section",children:[f.jsxs("div",{className:"section-header",children:[f.jsxs("div",{className:"section-header-top",children:[f.jsxs("div",{className:"title-container",children:[f.jsx("h3",{children:"آخرین کاربران ثبت نام شده در اپلیکیشن"}),f.jsx("button",{className:"refresh-btn",children:f.jsx("svg",{width:"18",height:"18",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M11.047 5.99994C11.047 8.73518 8.8271 10.9551 6.09186 10.9551C3.35662 10.9551 1.68674 8.20002 1.68674 8.20002M1.68674 8.20002H3.92646M1.68674 8.20002V10.6776M1.13672 5.99994C1.13672 3.2647 3.3368 1.0448 6.09186 1.0448C9.39694 1.0448 11.047 3.79986 11.047 3.79986M11.047 3.79986V1.32229M11.047 3.79986H8.84692",stroke:"#1E2023",strokeWidth:"1.08112",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),f.jsxs("div",{className:"search-box-with-icon",children:[f.jsx("svg",{className:"search-icon7",width:"18",height:"18",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.4167 2.29166C14.4438 2.29166 17.7084 5.55625 17.7084 9.58332C17.7084 13.6104 14.4438 16.875 10.4167 16.875C6.38963 16.875 3.12504 13.6104 3.12504 9.58332C3.12504 5.55625 6.38963 2.29166 10.4167 2.29166ZM18.9584 9.58332C18.9584 4.86589 15.1341 1.04166 10.4167 1.04166C5.69928 1.04166 1.87504 4.86589 1.87504 9.58332C1.87504 11.7171 2.65743 13.6681 3.95099 15.1652L1.22476 17.8914C0.980688 18.1355 0.980688 18.5312 1.22476 18.7753C1.46884 19.0193 1.86457 19.0193 2.10865 18.7753L4.83487 16.049C6.33192 17.3426 8.28295 18.125 10.4167 18.125C15.1341 18.125 18.9584 14.3008 18.9584 9.58332Z",fill:"#858585"})}),f.jsx("input",{type:"text",placeholder:"جستجوی نام، نام خانوادگی و..",value:D,onChange:ae,className:"search-input7"})]})]}),f.jsx("p",{children:"لورم اپیسوم متن ساختگی با تولید سادگی نامفهوم از صنعت چاپ و با استفاده از طراحان گرافیک است."})]}),f.jsx("div",{className:"users-table-container",children:f.jsxs("table",{className:"users-table",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"نام و نام خانوادگی"}),f.jsx("th",{children:"شماره تماس"}),f.jsx("th",{children:"تاریخ ثبت نام"}),f.jsx("th",{children:"جنسیت"}),f.jsx("th",{children:"مسیریابی موفق"}),f.jsx("th",{})]})}),f.jsx("tbody",{children:Ne.map(Ke=>f.jsxs("tr",{children:[f.jsx("td",{children:f.jsxs("div",{className:"user-profile-cell",children:[f.jsx("div",{className:"profile-image-small"}),f.jsx("strong",{children:Ke.fullName})]})}),f.jsx("td",{children:Ke.phone}),f.jsx("td",{children:Ke.registerDate}),f.jsx("td",{children:Ke.gender}),f.jsx("td",{children:f.jsxs("span",{className:"success-count",children:[Math.floor(Math.random()*5)+1," بار"]})}),f.jsx("td",{children:f.jsxs("button",{className:"details-btn",children:["جزئیات بیشتر",f.jsx("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.0176 3.63828C11.2404 3.82922 11.2662 4.1646 11.0752 4.38737L7.12156 8.99997L11.0752 13.6126C11.2662 13.8353 11.2404 14.1707 11.0176 14.3617C10.7948 14.5526 10.4595 14.5268 10.2685 14.304L6.01851 9.3457C5.84798 9.14675 5.84798 8.85318 6.01851 8.65424L10.2685 3.6959C10.4595 3.47314 10.7948 3.44734 11.0176 3.63828Z",fill:"#1E2023"})})]})})]},Ke.id))})]})})]})]})]})]})},pE=()=>f.jsx("header",{className:"app-header"}),fE=()=>f.jsx("footer",{className:"app-footer"}),mE=()=>{const e=mp(),o=e.pathname==="/admp";B.useEffect(()=>{o||h2(()=>Promise.resolve({}),__vite__mapDeps([0]))},[o,e.pathname])},gE=()=>{const e=mp(),o=ii(),i=e.pathname==="/login"||e.pathname==="/profile"||e.pathname==="/lang"||e.pathname==="/location"||e.pathname==="/"||e.pathname==="/mpr"||e.pathname==="/fs"||e.pathname==="/rop"||e.pathname==="/rng"||e.pathname==="/mpb"||e.pathname==="/admp"||e.pathname==="/plang"||e.pathname==="/pinfo"||e.pathname==="/proutes"||e.pathname==="/Pfp"||e.pathname==="/Pmap",r=e.pathname==="/admp";mE();const[d,m]=B.useState(null),[x,c]=B.useState(!1);B.useEffect(()=>{document.title=o.formatMessage({id:"appTitle"})},[o.locale]),B.useEffect(()=>{const P=D=>{D.preventDefault(),m(D),c(!0)};return window.addEventListener("beforeinstallprompt",P),()=>window.removeEventListener("beforeinstallprompt",P)},[]);const L=()=>{d&&(d.prompt(),d.userChoice.finally(()=>{m(null),c(!1)}))},T=()=>{c(!1)};return f.jsxs("div",{className:`app ${r?"no-app-styles":""}`,children:[!i&&f.jsx(pE,{}),f.jsxs("main",{className:`main-content ${i?"no-header-footer-layout":""}`,children:[x&&f.jsx("div",{className:"pwa-install-overlay",children:f.jsxs("div",{className:"pwa-install-dialog",children:[f.jsx("h3",{children:f.jsx(pt,{id:"pwaInstallTitle"})}),f.jsx("p",{children:f.jsx(pt,{id:"pwaInstallPrompt"})}),f.jsx("button",{className:"pwa-install-btn",onClick:L,children:f.jsx(pt,{id:"pwaInstallButton"})}),f.jsx("br",{}),f.jsx("button",{className:"pwa-install-close",onClick:T,children:f.jsx(pt,{id:"pwaCloseButton"})})]})}),f.jsxs(o7,{children:[f.jsx(Zi,{path:"/login",element:f.jsx(Tv,{})}),f.jsx(Zi,{path:"/profile",element:f.jsx(_7,{})}),f.jsx(Zi,{path:"/fs",element:f.jsx(Ev,{})}),f.jsx(Zi,{path:"/rop",element:f.jsx(Gv,{})}),f.jsx(Zi,{path:"/",element:f.jsx(Lv,{})}),f.jsx(Zi,{path:"/mpr",element:f.jsx(Iv,{})}),f.jsx(Zi,{path:"/rng",element:f.jsx(Hv,{})}),f.jsx(Zi,{path:"/admp",element:f.jsx(hE,{})}),f.jsx(Zi,{path:"/location",element:f.jsx(N_,{})}),f.jsx(Zi,{path:"/mpb",element:f.jsx(Wv,{})}),f.jsx(Zi,{path:"/pinfo",element:f.jsx(A_,{})}),f.jsx(Zi,{path:"/pmap",element:f.jsx(B_,{})}),f.jsx(Zi,{path:"/plang",element:f.jsx(R_,{})}),f.jsx(Zi,{path:"/proutes",element:f.jsx(j_,{})}),f.jsx(Zi,{path:"/Pfp",element:f.jsx(O_,{})})]})]}),!i&&f.jsx(fE,{})]})};function yE(){const[e,o]=B.useState(document.documentElement.dir==="rtl");return B.useEffect(()=>{const i=new MutationObserver(()=>{o(document.documentElement.dir==="rtl")});return i.observe(document.documentElement,{attributes:!0,attributeFilter:["dir"]}),()=>i.disconnect()},[]),f.jsxs(c7,{children:[f.jsx(Zm,{position:e?Kn.POSITION.TOP_LEFT:Kn.POSITION.TOP_RIGHT,rtl:e,toastClassName:"custom-toast"}),f.jsx(gE,{})]})}const vE="خوش آمدید!",xE="مسیر طلایی",_E="برای ورود به نرم افزار مسیرپایی حرم مطهر رضوی ابتدا زبان برنامه را انتخاب کنید و وارد برنامه شوید.",wE="ورود به برنامه",bE="ورود به نرم افزار!",CE="برای ورود و استفاده از امکانات بیشتر نرم افزار، شماره موبایل خود را وارد کنید.",SE="لوگو نرم افزار",ME="تصویر {n} از {title}",EE='ورود شما به معنی پذیرش <a href="/terms">قوانین</a> و <a href="/privacy">شرایط خصوصی</a> است',LE="خانه",TE="نقشه",kE="اسکن QR",PE="تنظیمات",DE="پروفایل",IE="© {year} مسیر طلایی - تمامی حقوق محفوظ است",NE="درباره ما",RE="تماس با ما",AE="حریم خصوصی",jE="زبان نرم افزار",OE="کد تایید را وارد کنید",zE="کد تایید را به شماره {phone} ارسال کردیم",FE="شماره موبایل اشتباه است؟",BE="ویرایش",$E="ارسال دوباره کد تایید تا ۵۰ ثانیه",VE="شماره موبایل",HE="حساب کاربری",UE="تکمیل پروفایل",ZE="حساب کاربری",qE="اطلاعات حساب کاربری",WE="مسیرهای پیموده شده من",GE="مکان های ذخیره شده",YE="تنظیمات",XE="اطلاع رسانی",KE="آستان قدس",QE="پشتیبانی",JE="سوالات متداول",eL="قوانین و مقررات",tL="خروج",nL="خروج از حساب کاربری",rL="دیدگاه خود را بنویسید...",iL="دیدگاه و نظر خود را بنویسید",sL="دیدگاه خودتان را که مربوط به این مکان می‌باشد را بنویسید. پس از تایید شدن، دیدگاه شما منتشر خواهد شد.",oL="امتیاز دهید:",aL="ارسال و ثبت دیدگاه",lL="شما الان اینجایید!",cL="درباره {title}",uL="بیشتر بخوانید",dL="بستن",hL=" محتواهای چند رسانه  ای {title} ",pL="دیدگاه‌ها ({count})",fL="مشاهده همه",mL="دیدگاه خود را درباره این مکان بنویسید",gL="دیدگاه خود را درباره این مکان بنویسید و به آن امتیاز دهید. پس از تایید شدن، دیدگاه‌تان منتشر می‌شود.",yL="نمایش کمتر",vL="مشاهده بیشتر",xL="برنامه‌های حرم مطهر",_L="مسیریابی",wL="پربازدیدترین‌های حرم",bL="مکان‌های نزدیک من",CL="ذخیره",SL="نظر",ML="کاربر جدید",EL="پیشنهاد‌های جستجو",LL="در حال بارگذاری...",TL="توضیحات",kL="خطا در دریافت اطلاعات: {error}",PL="موردی یافت نشد",DL="رفتن به اسلاید {n}",IL="کجا میخوای بری؟",NL="مبدا را انتخاب کنید",RL="مقصد را انتخاب کنید",AL="جستجوی مقصد",jL="جستجوی مبدا",OL="بستن جستجو",zL="پاک کردن جستجو",FL='نتیجه‌ای برای "{query}" یافت نشد',BL="برای جستجو عبارت مورد نظر را وارد کنید",$L="انتخاب از روی نقشه",VL="توضیحات بیشتر...",HL="تایید و ارسال درخواست",UL="انتخاب موقعیت از روی نقشه",ZL="مسیریابی حرم مطهر",qL="مبداء فعلی شما",WL="مکان فعلی شما ({loc})",GL="موقعیت فعلی شما",YL="موقعیت انتخاب شده",XL="موقعیت انتخاب شده از روی نقشه",KL="جستجوهای اخیر شما",QL="صحن ها",JL="ایوان ها",eT="رواق ها",tT="مساجد",nT="مدارس",rT="خدماتی",iT="فرهنگی",sT="آرامستان",oT="محل اسکن ",aT="آسانسور",lT="سایر",cT="توقف تعقیب موقعیت",uT="تعقیب موقعیت",dT="مرکز به موقعیت فعلی",hT="عرض:",pT="طول:",fT="دقت:",mT="توجه: گام برداری ثبت نمی‌شود. مطمئن شوید دستگاه حرکت دارد و سنسورها فعال هستند.",gT="سنسورهای دستگاه پشتیبانی نمی‌شوند.",yT="برای استفاده، دسترسی به سنسورها را فعال کنید.",vT="درحال کالیبراسیون سنسورها...",xT="توقف ردیابی پیشرفته",_T="شروع ردیابی پیشرفته",wT="بازنشانی سیستم",bT="خروجی لاگ",CT="تعداد گام‌ها:",ST="طول گام (متر):",MT="موقعیت نسبی:",ET="جهت (درجه):",LT="سرعت خطی:",TT="سرعت زاویه‌ای:",kT="طول گام تخمینی:",PT="درخواست کمک‌های فوریتی حرم مطهر",DT="لطفا نوع درخواست خود را انتخاب کنید و توضیحاتی درباره آن بنویسید. در سریع‌ترین زمان ممکن خادمین به مکان شما خواهند رسید.",IT="اعلام حریق",NT="اعلام سرقت",RT="درخواست خدمات پزشکی",AT="اعلام مفقودی",jT="تنظیمات صدا",OT="روشن",zT="فقط هشدار",FT="خاموش",BT="گام بعدی: {instruction}",$T="پخش راهنمای صوتی انجام نشد. لطفاً مسیر را با راهنمای روی صفحه ادامه دهید.",VT="فوریت‌های حرم",HT="زمان رسیدن",UT=" گام های مسیر  ",ZT="همه مسیر",qT="سایر مسیرها",WT="شروع مسیریابی",GT="پایان و بستن سفر",YT="برگرد به مسیر",XT="از",KT="به",QT="متر",JT="متر بر ثانیه",ek="درجه بر ثانیه",tk="کاربر مسیربایی آستان قدس",nk="آستان قدس رضوی",rk="موقعیت فعلی شما",ik="صحن انقلاب",sk="حرم مطهر امام رضا علیه‌السلام، صحن انقلاب",ok="ایوان طلا",ak="حرم مطهر امام رضا علیه‌السلام، بین طبریسی و ...",lk="رواق حضرت معصومه (س)",ck="حرم مطهر امام رضا علیه‌السلام، صحن آیت الله ...",uk="مسجد جامع گوهرشاد",dk="حرم مطهر امام رضا علیه‌السلام، صحن گوهرشاد",hk="صحن پیامبر اعظم",pk="حرم مطهر امام رضا علیه‌السلام، صحن پیامبر...",fk="ذخیره مقصد",mk="ذخیره ",gk="اشتراک گذاری",yk="پیاده",vk="ون برقی",xk="ویلچر",_k="مسیر  برادران",wk="مسیر  خواهران",bk="مسیر  خانواده",Ck="از {origin} به {destination}",Sk="دقیقه",Mk="ثانیه",Ek="قبلی",Lk="بعدی",Tk="نصب اپلیکیشن",kk="برای دسترسی سریع، اپلیکیشن را روی دستگاه خود نصب کنید.",Pk="نصب",Dk="جستجویی  وجود ندارد",Ik="مسیر با حالت انتخابی یافت نشد",Nk="بستن",Rk="حرکت به سمت {name}",Ak="عبور از نقطه اتصال {title}",jk="ورود به صحن بعدی از طریق نقطه اتصال {title}",Ok="عبور از {name}",zk="رسیدن به  {name}",Fk="گام {num}",Bk="به سمت {name} بچرخید و {distance} متر به جلو بروید",$k="از {from} عبور و به {to} برسید",Vk="کد QR را در کادر قرار دهید",Hk="خواندن کد QR ناموفق بود",Uk="درخواست کمک شما با موفقیت ارسال شد",Zk="خطا در ارسال درخواست کمک",qk="لطفاً نوع درخواست کمک را انتخاب کنید",Wk="لطفاً توضیحات بیشتری وارد کنید",Gk="فارسی",Yk="اردو",Xk="عربی",Kk="انگلیسی",Qk="GPS دستگاه شما خاموش است",Jk="مرحله {num} از {total}  ",eP="نسخه نرم‌افزار: {version}",tP="نسخه جدید {version} در دسترس است",nP="ذخیره شد",rP="مشاهده ",iP="اطلاعات فرهنگی",sP="منو",oP="آیا می‌خواهید اطلاعات فرهنگی را مشاهده کنید یا مسیریابی به {placeName} را انجام دهید؟",aP="مسیریابی",lP="اطلاعات فرهنگی",cP="تایید و ادامه",uP="  شماره موبایل وارد شده اشتباه میباشد ",dP="در حال زیارت {placeName} هستید",hP="مسیریابی به این مکان",pP="مکان های شاخص",fP=" دقیقه پیاده روی",mP="متر",gP="اطلاعات فرهنگی بیشتر",yP="مسیریابی از این مکان",vP="جزئیات",xP="نام کاربری",_P="مکان های ذخیره شده",wP="بستن و ادامه مسیر ",bP="تکمیل پروفایل",CP="نام",SP="نام خانوادگی",MP="شماره موبایل",EP="استان",LP="شهر",TP="نام خود را بنویسید",kP="نام خانوادگی خود را بنویسید",PP="شماره موبایل خود را وارد کنید",DP="استان محل سکونت خود را انتخاب کنید",IP="شهر محل سکونت خود را انتخاب کنید",NP="تایید و ذخیره",RP="مسیرهای پیموده شده",AP="نوع مسیریابی :",jP="هنوز مسیری ثبت نشده است",OP="  مسافت:",zP=" مبدا",FP=" مقصد",BP="تکرار مسیر",$P="مکان‌های ذخیره شده",VP="ثبت مکان دلخواه",HP="مکان ذخیره نکرده اید",UP="برای ذخیره کردن مکان دلخواه خود روی نقشه، اطفال روی دکمه زیر ضربه بزنید و مکان دلخواه خود را ذخیره کنید.",ZP="قابلیت افزودن مکان در اینجا پیاده‌سازی خواهد شد",qP="افزودن مکان دلخواه",WP="جستوجو کنید ...",GP="تایید مکان دلخواه",YP="یک مکان از روی نقشه انتخاب کنید",XP="جستجوهای اخیر شما",KP="هیچ جستجوی اخیری وجود ندارد",QP="لغو",JP="پروفایل با موفقیت به‌روزرسانی شد!",eD={welcome:vE,appTitle:xE,selectLanguage:_E,loginButton:wE,loginTitle:bE,enterPhone:CE,logoAlt:SE,imageAlt:ME,terms:EE,home:LE,map:TE,qrScan:kE,settings:PE,profile:DE,copyright:IE,aboutUs:NE,contactUs:RE,privacy:AE,language:jE,enterVerification:OE,sentCode:zE,wrongPhone:FE,edit:BE,resendCode:$E,phonePlaceholder:VE,profileTitle:HE,completeProfile:UE,accountSection:ZE,accountInfo:qE,myRoutes:WE,savedPlaces:GE,settingsSection:YE,notifications:XE,supportSection:KE,support:QE,faq:JE,termsRegulation:eL,logoutTitle:tL,logoutAccount:nL,commentPlaceholder:rL,commentModalTitle:iL,commentModalInstruction:sL,ratingPrompt:oL,submitComment:aL,youAreHere:lL,aboutLocation:cL,readMore:uL,close:dL,audioTextContent:hL,commentsTitle:pL,viewAll:fL,commentPromptTitle:mL,commentPromptInstruction:gL,showLess:yL,showMore:vL,shrineEventsTitle:xL,navigate:_L,mostVisited:wL,nearMe:bL,save:CL,commentsLabel:SL,defaultCommentAuthor:ML,searchSuggestions:EL,loading:LL,subgroupDefaultDesc:TL,fetchError:kL,noDataFound:PL,goToSlide:DL,searchPlaceholder:IL,originPlaceholder:NL,destinationPlaceholder:RL,destinationSearchPlaceholder:AL,originSearchPlaceholder:jL,closeSearch:OL,clearSearch:zL,noResultsFound:FL,enterSearchTerm:BL,chooseFromMap:$L,emergencyPlaceholder:VL,emergencySubmit:HL,mapSelectFromMap:UL,mapRoutingTitle:ZL,mapCurrentOriginLabel:qL,mapCurrentLocation:WL,mapCurrentLocationName:GL,mapSelectedLocation:YL,mapSelectedLocationFromMap:XL,mapRecentSearches:KL,groupCourtyardPlural:QL,groupEyvanPlural:JL,groupRavaqPlural:eT,groupMosques:tT,groupSchools:nT,groupServices:rT,groupCulture:iT,groupCemetery:sT,groupQRScan:oT,groupElevator:aT,groupOther:lT,mapStopFollow:cT,mapStartFollow:uT,mapCenter:dT,mapLatitude:hT,mapLongitude:pT,mapAccuracy:fT,drStepWarning:mT,drSensorsUnsupported:gT,drPermissionNeeded:yT,drCalibrating:vT,drStopTracking:xT,drStartTracking:_T,drReset:wT,drExportLog:bT,drStepCount:CT,drStrideLength:ST,drRelPosition:MT,drHeading:ET,drLinearSpeed:LT,drAngularSpeed:TT,drEstimatedStride:kT,emergencyTitle:PT,emergencySubtitle:DT,emergencyFire:IT,emergencyTheft:NT,emergencyMedical:RT,emergencyMissing:AT,soundSettingsTitle:jT,soundOptionOn:OT,soundOptionAlertOnly:zT,soundOptionOff:FT,nextStepAnnouncement:BT,ttsPlaybackError:$T,emergencyButtonLabel:VT,arrivalTime:HT,routeOverview:UT,allRoutes:ZT,otherRoutes:qT,startRouting:WT,stopRouting:GT,returnToRoute:YT,from:XT,to:KT,meters:QT,metersPerSecond:JT,degreesPerSecond:ek,defaultUserName:tk,defaultLocation:nk,defaultBabRezaName:rk,destSahnEnqelabName:ik,destSahnEnqelabLocation:sk,destEyvanTalaName:ok,destEyvanTalaLocation:ak,destRavaqMasoumehName:lk,destRavaqMasoumehLocation:ck,destMasjedGoharshadName:uk,destMasjedGoharshadLocation:dk,destSahnPayambarAzamName:hk,destSahnPayambarAzamLocation:pk,saveDestination:fk,savePlace:mk,shareRoute:gk,transportWalk:yk,transportCar:vk,transportWheelchair:xk,routeForMen:_k,routeForWomen:wk,routeForFamily:bk,routeSummary:Ck,minutesUnit:Sk,secondsUnit:Mk,previous:Ek,next:Lk,pwaInstallTitle:Tk,pwaInstallPrompt:kk,pwaInstallButton:Pk,mapNoRecentSearches:Dk,noRouteFound:Ik,pwaCloseButton:Nk,stepMoveToDoor:Rk,stepPassConnection:Ak,stepEnterNextSahn:jk,stepPassDoor:Ok,stepArriveDestination:zk,stepNumber:Fk,landmarkSuffix:Bk,doorToDoor:$k,qrScanInstruction:Vk,qrScanError:Hk,emergencySubmissionSuccess:Uk,emergencySubmissionError:Zk,emergencySelectType:qk,emergencyEnterDetails:Wk,fa:Gk,ur:Yk,ar:Xk,en:Kk,gpsOfflineMessage:Qk,stepPrefix:Jk,appVersionLabel:eP,newVersionAvailable:tP,destinationSaved:nP,viewbutton:rP,culturalInfo:iP,menu:sP,routeOrInfoTitle:oP,routeOption:aP,culturalInfoOption:lP,confirmContinue:cP,invalidPhone:uP,youAreHereQr:dP,navigateToMpr:hP,landmarkPlaces:pP,walking:fP,meter:mP,moreCulturalInfo:gP,navigateFromMpr:yP,detailsButton:vP,Username:xP,Savedlocations:_P,closeAndContinue:wP,"plang.title":"انتخاب زبان","plang.subtitle":"زبان برنامه را انتخاب کنید","plang.description":"زبان مورد نظر خودتان را انتخاب کنید و با زدن روی دکمه تایید و ادامه، زبان برنامه تغییر خواهد کرد.",completeProfileTitle:bP,firstName:CP,lastName:SP,phoneNumber:MP,province:EP,city:LP,enterFirstName:TP,enterLastName:kP,enterPhoneNumber:PP,selectProvince:DP,selectCity:IP,confirmAndSave:NP,myRoutesTitle:RP,routemode:AP,noRoutesMessage:jP,distance:OP,origin:zP,destination:FP,repeatRoute:BP,savedLocationsTitle:$P,addLocationButton:VP,noSavedLocationsTitle:HP,noSavedLocationsDescription:UP,addLocationMessage:ZP,addLocationButton2:qP,pmapSearchPlaceholder:WP,confirmLocation:GP,pmapSelectLocation:YP,recentSearches:XP,noRecentSearches:KP,cancel:QP,profileUpdatedSuccess:JP},tD="Welcome!",nD="Golden Path",rD="To access the Golden Path app, first choose your language.",iD="Enter App",sD="Login!",oD="Enter your mobile number to access more features.",aD="App logo",lD="Image {n} of {title}",cD='By logging in you accept the <a href="/terms">terms</a> and <a href="/privacy">privacy policy</a>',uD="Home",dD="Map",hD="QR Scan",pD="Settings",fD="Profile",mD="© {year} Golden Path - All rights reserved",gD="About Us",yD="Contact Us",vD="Privacy",xD="App Language",_D="Enter the verification code",wD="We sent a verification code to {phone}",bD="Is the phone number incorrect?",CD="Edit",SD="Resend code in 50 seconds",MD="Mobile number",ED="Account",LD="Complete Profile",TD="Account",kD="Account Information",PD="My Routes",DD="Saved Locations",ID="Save",ND="Settings",RD="Notifications",AD="Astan Quds",jD="Support",OD="FAQ",zD="Terms and Conditions",FD="Logout",BD="Sign out",$D="Write your comment...",VD="Write your opinion",HD="Write your comment about this place. After approval, your comment will be published.",UD="Rate:",ZD="Submit Comment",qD="You are here!",WD="About {title}",GD="Read more",YD="Close",XD="Multimedia contents of {title}",KD="Comments ({count})",QD="View all",JD="Write your comment about this place",eI="Write your comment about this place and give it a rating. After approval, your comment will be published.",tI="Show less",nI="View more",rI="Shrine programs",iI="Navigate",sI="Most visited places",oI="Places near me",aI="Saved",lI="Views",cI="New user",uI="Search suggestions",dI="Loading...",hI="Description",pI="Error fetching data: {error}",fI="No data found",mI="Go to slide {n}",gI="Where do you want to go?",yI="Select origin",vI="Select destination",xI="Search destination",_I="Search origin",wI="Close search",bI="Clear search",CI='No results found for "{query}"',SI="Enter a search term",MI="Choose from map",EI="More details...",LI="Confirm and send request",TI="Select location from map",kI="Shrine Routing",PI="Current origin",DI="Current location ({loc})",II="Your current location",NI="Selected location",RI="Location selected from map",AI="Recent searches",jI="Courtyards",OI="Eyvans",zI="Ravaqs",FI="Mosques",BI="Schools",$I="Services",VI="Cultural",HI="Cemetery",UI="QR Scan",ZI="Elevator",qI="Other",WI="Stop following",GI="Follow location",YI="Center to current location",XI="Lat:",KI="Lng:",QI="Accuracy:",JI="Warning: steps not detected. Ensure the device is moving and sensors are active.",eN="Device sensors are not supported.",tN="Enable sensor permissions to proceed.",nN="Calibrating sensors...",rN="Stop advanced tracking",iN="Start advanced tracking",sN="Reset system",oN="Export log",aN="Steps:",lN="Stride length (m):",cN="Relative position:",uN="Heading (deg):",dN="Linear speed:",hN="Angular speed:",pN="Estimated stride:",fN="Shrine emergency request",mN="Please select the request type and describe it. Shrine staff will reach you shortly.",gN="Report fire",yN="Report theft",vN="Request medical services",xN="Report missing person",_N="Sound settings",wN="On",bN="Alerts only",CN="Off",SN="Next: {instruction}",MN="Couldn't play navigation audio. Please continue following the on-screen instructions.",EN="Shrine emergencies",LN="Arrival time",TN="Route Steps",kN="All routes",PN="Other routes",DN="Start navigation",IN="End trip",NN="Return to route",RN="From",AN="To",jN="m",ON="m/s",zN="deg/s",FN="Astan Quds User",BN="Astan Quds Razavi",$N="Current Origin",VN="Sahn Enqelab",HN="Imam Reza Shrine, Sahn Enqelab",UN="Golden Eyvan",ZN="Imam Reza Shrine, between Tabarsi ...",qN="Ravaq Hazrat Masoumeh (s)",WN="Imam Reza Shrine, Sahn Ayatollah ...",GN="Goharshad Mosque",YN="Imam Reza Shrine, Sahn Goharshad",XN="Sahn Payambar Azam",KN="Imam Reza Shrine, Sahn Payambar ...",QN="Save destination",JN="Share",eR="Walking",tR="Electric van",nR="Wheelchair",rR="Men ",iR="Women ",sR="Family ",oR="From {origin} to {destination}",aR="min",lR="sec",cR="Previous",uR="Next",dR="Install App",hR="For quick access, install the app on your device.",pR="Install",fR="No recent searches",mR="No route found for selected mode",gR="Close",yR="Head toward {name}",vR="Pass connection {title}",xR="Enter next courtyard via {title}",_R="Go through {name}",wR="Arrive at {name}",bR="Step {num}",CR="turn toward {name} and go {distance} meters ahead",SR="Go through {from} and reach {to}",MR="Align the QR code within the frame",ER="Failed to read QR code",LR="Your emergency request has been submitted successfully",TR="Error submitting emergency request",kR="Please select an emergency type",PR="Please enter more details",DR="Persian",IR="Urdu",NR="Arabic",RR="English",AR="Your GPS is off",jR="Stage {num} of {total}  ",OR="Version: {version}",zR="New version {version} is available",FR="Save",BR="View ",$R="Cultural Information",VR="Menu",HR="Do you want to see cultural information or get directions to {placeName}?",UR="Get Directions",ZR="Cultural Information",qR="Confirm and Continue",WR="The entered phone number is incorrect",GR="You are visiting {placeName}",YR="Navigation to this location",XR="Landmark Place",KR="minutes walk",QR="meter",JR="More cultural info",eA="Navigate from this location",tA="Details",nA="Username",rA="Saved locations",iA=" Close and Continue Route",sA="Complete Profile",oA="First Name",aA="Last Name",lA="Mobile Number",cA="Province",uA="City",dA="Write your first name",hA="Write your last name",pA="Enter your mobile number",fA="Select your province of residence",mA="Select your city of residence",gA="Confirm and Save",yA="My Routes",vA="No routes have been set yet",xA=" Route mode:",_A=" Distance:",wA=" Origin",bA=" Destination",CA="Repeat Route",SA="Saved Locations",MA="Add Location",EA="No Saved Locations",LA="To save your favorite locations on the map, tap the button below and save your desired location.",TA="Add location functionality will be implemented here",kA="Add a favorite location",PA="Search ...",DA="Confirm Selected Location",IA="Select a location from the map",NA="Recent Searches",RA="No recent searches",AA="Cancel",jA="Profile updated successfully!",OA={welcome:tD,appTitle:nD,selectLanguage:rD,loginButton:iD,loginTitle:sD,enterPhone:oD,logoAlt:aD,imageAlt:lD,terms:cD,home:uD,map:dD,qrScan:hD,settings:pD,profile:fD,copyright:mD,aboutUs:gD,contactUs:yD,privacy:vD,language:xD,enterVerification:_D,sentCode:wD,wrongPhone:bD,edit:CD,resendCode:SD,phonePlaceholder:MD,profileTitle:ED,completeProfile:LD,accountSection:TD,accountInfo:kD,myRoutes:PD,savedPlaces:DD,savePlace:ID,settingsSection:ND,notifications:RD,supportSection:AD,support:jD,faq:OD,termsRegulation:zD,logoutTitle:FD,logoutAccount:BD,commentPlaceholder:$D,commentModalTitle:VD,commentModalInstruction:HD,ratingPrompt:UD,submitComment:ZD,youAreHere:qD,aboutLocation:WD,readMore:GD,close:YD,audioTextContent:XD,commentsTitle:KD,viewAll:QD,commentPromptTitle:JD,commentPromptInstruction:eI,showLess:tI,showMore:nI,shrineEventsTitle:rI,navigate:iI,mostVisited:sI,nearMe:oI,save:aI,commentsLabel:lI,defaultCommentAuthor:cI,searchSuggestions:uI,loading:dI,subgroupDefaultDesc:hI,fetchError:pI,noDataFound:fI,goToSlide:mI,searchPlaceholder:gI,originPlaceholder:yI,destinationPlaceholder:vI,destinationSearchPlaceholder:xI,originSearchPlaceholder:_I,closeSearch:wI,clearSearch:bI,noResultsFound:CI,enterSearchTerm:SI,chooseFromMap:MI,emergencyPlaceholder:EI,emergencySubmit:LI,mapSelectFromMap:TI,mapRoutingTitle:kI,mapCurrentOriginLabel:PI,mapCurrentLocation:DI,mapCurrentLocationName:II,mapSelectedLocation:NI,mapSelectedLocationFromMap:RI,mapRecentSearches:AI,groupCourtyardPlural:jI,groupEyvanPlural:OI,groupRavaqPlural:zI,groupMosques:FI,groupSchools:BI,groupServices:$I,groupCulture:VI,groupCemetery:HI,groupQRScan:UI,groupElevator:ZI,groupOther:qI,mapStopFollow:WI,mapStartFollow:GI,mapCenter:YI,mapLatitude:XI,mapLongitude:KI,mapAccuracy:QI,drStepWarning:JI,drSensorsUnsupported:eN,drPermissionNeeded:tN,drCalibrating:nN,drStopTracking:rN,drStartTracking:iN,drReset:sN,drExportLog:oN,drStepCount:aN,drStrideLength:lN,drRelPosition:cN,drHeading:uN,drLinearSpeed:dN,drAngularSpeed:hN,drEstimatedStride:pN,emergencyTitle:fN,emergencySubtitle:mN,emergencyFire:gN,emergencyTheft:yN,emergencyMedical:vN,emergencyMissing:xN,soundSettingsTitle:_N,soundOptionOn:wN,soundOptionAlertOnly:bN,soundOptionOff:CN,nextStepAnnouncement:SN,ttsPlaybackError:MN,emergencyButtonLabel:EN,arrivalTime:LN,routeOverview:TN,allRoutes:kN,otherRoutes:PN,startRouting:DN,stopRouting:IN,returnToRoute:NN,from:RN,to:AN,meters:jN,metersPerSecond:ON,degreesPerSecond:zN,defaultUserName:FN,defaultLocation:BN,defaultBabRezaName:$N,destSahnEnqelabName:VN,destSahnEnqelabLocation:HN,destEyvanTalaName:UN,destEyvanTalaLocation:ZN,destRavaqMasoumehName:qN,destRavaqMasoumehLocation:WN,destMasjedGoharshadName:GN,destMasjedGoharshadLocation:YN,destSahnPayambarAzamName:XN,destSahnPayambarAzamLocation:KN,saveDestination:QN,shareRoute:JN,transportWalk:eR,transportCar:tR,transportWheelchair:nR,routeForMen:rR,routeForWomen:iR,routeForFamily:sR,routeSummary:oR,minutesUnit:aR,secondsUnit:lR,previous:cR,next:uR,pwaInstallTitle:dR,pwaInstallPrompt:hR,pwaInstallButton:pR,mapNoRecentSearches:fR,noRouteFound:mR,pwaCloseButton:gR,stepMoveToDoor:yR,stepPassConnection:vR,stepEnterNextSahn:xR,stepPassDoor:_R,stepArriveDestination:wR,stepNumber:bR,landmarkSuffix:CR,doorToDoor:SR,qrScanInstruction:MR,qrScanError:ER,emergencySubmissionSuccess:LR,emergencySubmissionError:TR,emergencySelectType:kR,emergencyEnterDetails:PR,fa:DR,ur:IR,ar:NR,en:RR,gpsOfflineMessage:AR,stepPrefix:jR,appVersionLabel:OR,newVersionAvailable:zR,destinationSaved:FR,viewbutton:BR,culturalInfo:$R,menu:VR,routeOrInfoTitle:HR,routeOption:UR,culturalInfoOption:ZR,confirmContinue:qR,invalidPhone:WR,youAreHereQr:GR,navigateToMpr:YR,landmarkPlaces:XR,walking:KR,meter:QR,moreCulturalInfo:JR,navigateFromMpr:eA,detailsButton:tA,Username:nA,Savedlocations:rA,closeAndContinue:iA,"plang.title":"Select Language","plang.subtitle":"Choose the app language","plang.description":"Select your desired language and by clicking the confirm and continue button, the app language will be changed.",completeProfileTitle:sA,firstName:oA,lastName:aA,phoneNumber:lA,province:cA,city:uA,enterFirstName:dA,enterLastName:hA,enterPhoneNumber:pA,selectProvince:fA,selectCity:mA,confirmAndSave:gA,myRoutesTitle:yA,noRoutesMessage:vA,routemode:xA,distance:_A,origin:wA,destination:bA,repeatRoute:CA,savedLocationsTitle:SA,addLocationButton:MA,noSavedLocationsTitle:EA,noSavedLocationsDescription:LA,addLocationMessage:TA,addLocationButton2:kA,pmapSearchPlaceholder:PA,confirmLocation:DA,pmapSelectLocation:IA,recentSearches:NA,noRecentSearches:RA,cancel:AA,profileUpdatedSuccess:jA},zA="مرحبا بك!",FA="طريق الذهب",BA="للدخول إلى تطبيق مسار المشاة الخاص بالحر الحرم الرضوي الشريف، أولاً اختر لغة التطبيق ثم ادخل إلى التطبيق.",$A="تسجيل الدخول إلى التطبيق",VA="تسجيل الدخول إلى التطبيق!",HA="للدخول واستخدام الميزات الإضافية للتطبيق، أدخل رقم هاتفك المحمول.",UA="شعار التطبيق",ZA="الصورة {n} من {title}",qA='دخولك يعني الموافقة على <a href="/terms">القوانين</a> و <a href="/privacy">سياسة الخصوصية</a>',WA="الرئيسية",GA="الخريطة",YA="مسح رمز الاستجابة السريعة",XA="الإعدادات",KA="الملف الشخصي",QA="© {year} طريق الذهب - جميع الحقوق محفوظة",JA="نبذة عنا",ej="اتصل بنا",tj="الخصوصية",nj="لغة التطبيق",rj="أدخل رمز التحقق",ij="أرسلنا رمز التحقق إلى الرقم {phone}",sj="رقم الهاتف المحمول خاطئ؟",oj="تعديل",aj="إعادة إرسال رمز التحقق بعد ٥٠ ثانية",lj="رقم الهاتف المحمول",cj="الحساب الشخصي",uj="إكمال الملف الشخصي",dj="قسم الحساب",hj="معلومات الحساب",pj="مساراتي المقطوعة",fj="أماكن محفوظة",mj="قسم الإعدادات",gj="الإشعارات",yj="قسم الدعم",vj="الدعم",xj="الأسئلة الشائعة",_j="الأحكام واللوائح",wj="تسجيل الخروج",bj="تسجيل الخروج من الحساب",Cj="اكتب تعليقك...",Sj="اكتب رأيك وتعليقك",Mj="اكتب تعليقك المتعلق بهذا المكان. بعد الموافقة، سيتم نشر تعليقك.",Ej="قيم:",Lj="إرسال وتسجيل التعليق",Tj="أنت هنا الآن!",kj="حول {title}",Pj="اقرأ المزيد",Dj="إغلاق",Ij="محتويات الوسائط المتعددة {title}",Nj="التعليقات ({count})",Rj="عرض الكل",Aj="اكتب رأيك حول هذا المكان",jj="اكتب تعليقك حول هذا المكان وقم بتقييمه. بعد الموافقة، سيتم نشر تعليقك.",Oj="إظهار أقل",zj="عرض المزيد",Fj="برامج الحرم المطهر",Bj="الملاحة",$j="الأكثر زيارة في الحرم",Vj="الأماكن القريبة مني",Hj="حفظ",Uj="تعليق",Zj="مستخدم جديد",qj="اقتراحات البحث",Wj="جار التحميل...",Gj="الوصف",Yj="خطأ في جلب البيانات: {error}",Xj="لم يتم العثور على بيانات",Kj="الانتقال إلى الشريحة {n}",Qj="أين تريد الذهاب؟",Jj="اختر نقطة البداية",eO="اختر الوجهة",tO="البحث عن الوجهة",nO="البحث عن نقطة البداية",rO="إغلاق البحث",iO="مسح البحث",sO='لم يتم العثور على نتائج لـ "{query}"',oO="أدخل عبارة للبحث",aO="اختر من الخريطة",lO="مزيد من التفاصيل...",cO="تأكيد وإرسال الطلب",uO="اختر الموقع من الخريطة",dO="توجيه الحرم المطهر",hO="موقع البداية الحالي",pO="موقعك الحالي ({loc})",fO="موقعك الحالي",mO="الموقع المحدد",gO="الموقع المحدد من الخريطة",yO="عمليات البحث الأخيرة الخاصة بك",vO="الساحات",xO="الإيوانات",_O="الرواقات",wO="المساجد",bO="المدارس",CO="الخدمات",SO="ثقافي",MO="المقبرة",EO="أماكن مسح ",LO="المصعد",TO="أخرى",kO="إيقاف تتبع الموقع",PO="تتبع الموقع",DO="تمركز على الموقع الحالي",IO="خط العرض:",NO="خط الطول:",RO="الدقة:",AO="تحذير: لا يتم تسجيل الخطوات. تأكد من أن الجهاز يتحرك وأن الحساسات مفعلة.",jO="حساسات الجهاز غير مدعومة.",OO="فعّل صلاحيات الحساسات للاستمرار.",zO="جاري معايرة الحساسات...",FO="إيقاف التتبع المتقدم",BO="بدء التتبع المتقدم",$O="إعادة ضبط النظام",VO="تصدير السجل",HO="عدد الخطوات:",UO="طول الخطوة (متر):",ZO="الموقع النسبي:",qO="الاتجاه (درجة):",WO="السرعة الخطية:",GO="السرعة الزاوية:",YO="طول الخطوة المقدر:",XO="طلب طوارئ الحرم",KO="يرجى اختيار نوع الطلب وكتابة وصف عنه. سيصل الخدم إلى موقعك بأسرع وقت.",QO="بلاغ حريق",JO="بلاغ سرقة",ez="طلب خدمات طبية",tz="بلاغ مفقود",nz="إعدادات الصوت",rz="تشغيل",iz="تنبيهات فقط",sz="إيقاف",oz="الخطوة التالية: {instruction}",az="تعذّر تشغيل الإرشاد الصوتي. يُرجى متابعة التعليمات الظاهرة على الشاشة.",lz="طوارئ الحرم",cz="وقت الوصول",uz="خطوات المسار",dz="كل المسارات",hz="مسارات أخرى",pz="بدء المسار",fz="إنهاء الرحلة",mz="العودة للمسار",gz="من",yz="إلى",vz="متر",xz="متر/ثانية",_z="درجة/ثانية",wz="مستخدم المسير",bz="العتبة الرضوية",Cz="موقعك الحالي",Sz="صحن الثورة",Mz="العتبة الرضوية، صحن الثورة",Ez="الإيوان الذهبي",Lz="العتبة الرضوية، بين طبرسي ...",Tz="رواق السيدة معصومة",kz="العتبة الرضوية، صحن آية الله ...",Pz="مسجد گوهرشاد",Dz="العتبة الرضوية، صحن گوهرشاد",Iz="صحن النبي الأعظم",Nz="العتبة الرضوية، صحن النبي ...",Rz="حفظ الوجهة",Az="مشاركة",jz="مشياً",Oz="حافلة كهربائية",zz="كرسي متحرك",Fz="مسار للرجال",Bz="مسار للنساء",$z=" مسار العائلة",Vz="من {origin} إلى {destination}",Hz="دقيقة",Uz="ثانية",Zz="السابق",qz="التالي",Wz="تثبيت التطبيق",Gz="للوصول السريع، ثبّت التطبيق على جهازك.",Yz="تثبيت",Xz="لا توجد عمليات بحث حديثة",Kz="لم يتم العثور على مسار للحالة المحددة",Qz="إغلاق",Jz="اتجه نحو {name}",eF="عبر نقطة الاتصال {title}",tF="ادخل الساحة التالية عبر {title}",nF="اعبر من {name}",rF="الوصول إلى {name}",iF="الخطوة {num}",sF="ضع رمز QR داخل الإطار",oF="اعبر من {from} وتصل إلى {to}",aF="فشل قراءة رمز QR",lF="تم إرسال طلب المساعدة بنجاح",cF="خطأ في إرسال طلب المساعدة",uF="الرجاء اختيار نوع الطلب",dF="الرجاء إدخال مزيد من التفاصيل",hF="ثم اتجه نحو {name} وتقدم {distance} متراً إلى الأمام",pF="الفارسية",fF="الأردية",mF="العربية",gF="الإنجليزية",yF="جهاز تحديد المواقع الخاص بك مغلق",vF="الخطوة {num} من {total}  ",xF="إصدار التطبيق: {version}",_F="إصدار جديد {version} متوفر",wF=" تم حفظ الموقع ",bF="يحفظ ",CF="منظر ",SF="معلومات ثقافية",MF="قائمة",EF="هل تريد رؤية المعلومات الثقافية أو الحصول على اتجاهات إلى {placeName}؟",LF="الاتجاهات",TF="معلومات ثقافية",kF="تأكيد ومتابعة",PF="رقم الهاتف المدخل غير صحيح",DF="أنت تزور {placeName}",IF="الملاحة إلى هذا الموقع ",NF="الأماكن البارزة",RF=" دقائق سيرا على الأقدام",AF="متر",jF="المزيد من المعلومات الثقافية",OF="التوجيه من هذا الموقع",zF="تفاصيل",FF=" اسم المستخدم ",BF=" المواقع المحفوظة ",$F="إغلاق ومتابعة المسار",VF="إكمال الملف الشخصي",HF="الاسم",UF="اسم العائلة",ZF="رقم الجوال",qF="المحافظة",WF="المدينة",GF="اكتب اسمك",YF="اكتب اسم عائلتك",XF="أدخل رقم هاتفك المحمول",KF="اختر محافظة إقامتك",QF="اختر مدينة إقامتك",JF="تأكيد وحفظ",eB="المسارات المقطوعة",tB="لم يتم تعيين أي مسارات بعد",nB="تكرار المسار",rB="مسافة:",iB=" أصل",sB=" وجهة",oB="وضع التوجيه:",aB="المواقع المحفوظة",lB="إضافة موقع",cB="لم تقم بحفظ أي مواقع",uB="لحفظ مواقعك المفضلة على الخريطة، انقر على الزر أدناه واحفظ الموقع المطلوب.",dB="سيتم تنفيذ وظيفة إضافة الموقع هنا",hB="أضف موقعك المفضل",pB=" ... ابحث",fB="تأكيد الموقع المطلوب",mB="اختر موقعًا من الخريطة",gB="عمليات البحث الأخيرة",yB="لا توجد عمليات بحث حديثة",vB="إلغاء",xB="تم تحديث الملف الشخصي بنجاح!",_B={welcome:zA,appTitle:FA,selectLanguage:BA,loginButton:$A,loginTitle:VA,enterPhone:HA,logoAlt:UA,imageAlt:ZA,terms:qA,home:WA,map:GA,qrScan:YA,settings:XA,profile:KA,copyright:QA,aboutUs:JA,contactUs:ej,privacy:tj,language:nj,enterVerification:rj,sentCode:ij,wrongPhone:sj,edit:oj,resendCode:aj,phonePlaceholder:lj,profileTitle:cj,completeProfile:uj,accountSection:dj,accountInfo:hj,myRoutes:pj,savedPlaces:fj,settingsSection:mj,notifications:gj,supportSection:yj,support:vj,faq:xj,termsRegulation:_j,logoutTitle:wj,logoutAccount:bj,commentPlaceholder:Cj,commentModalTitle:Sj,commentModalInstruction:Mj,ratingPrompt:Ej,submitComment:Lj,youAreHere:Tj,aboutLocation:kj,readMore:Pj,close:Dj,audioTextContent:Ij,commentsTitle:Nj,viewAll:Rj,commentPromptTitle:Aj,commentPromptInstruction:jj,showLess:Oj,showMore:zj,shrineEventsTitle:Fj,navigate:Bj,mostVisited:$j,nearMe:Vj,save:Hj,commentsLabel:Uj,defaultCommentAuthor:Zj,searchSuggestions:qj,loading:Wj,subgroupDefaultDesc:Gj,fetchError:Yj,noDataFound:Xj,goToSlide:Kj,searchPlaceholder:Qj,originPlaceholder:Jj,destinationPlaceholder:eO,destinationSearchPlaceholder:tO,originSearchPlaceholder:nO,closeSearch:rO,clearSearch:iO,noResultsFound:sO,enterSearchTerm:oO,chooseFromMap:aO,emergencyPlaceholder:lO,emergencySubmit:cO,mapSelectFromMap:uO,mapRoutingTitle:dO,mapCurrentOriginLabel:hO,mapCurrentLocation:pO,mapCurrentLocationName:fO,mapSelectedLocation:mO,mapSelectedLocationFromMap:gO,mapRecentSearches:yO,groupCourtyardPlural:vO,groupEyvanPlural:xO,groupRavaqPlural:_O,groupMosques:wO,groupSchools:bO,groupServices:CO,groupCulture:SO,groupCemetery:MO,groupQRScan:EO,groupElevator:LO,groupOther:TO,mapStopFollow:kO,mapStartFollow:PO,mapCenter:DO,mapLatitude:IO,mapLongitude:NO,mapAccuracy:RO,drStepWarning:AO,drSensorsUnsupported:jO,drPermissionNeeded:OO,drCalibrating:zO,drStopTracking:FO,drStartTracking:BO,drReset:$O,drExportLog:VO,drStepCount:HO,drStrideLength:UO,drRelPosition:ZO,drHeading:qO,drLinearSpeed:WO,drAngularSpeed:GO,drEstimatedStride:YO,emergencyTitle:XO,emergencySubtitle:KO,emergencyFire:QO,emergencyTheft:JO,emergencyMedical:ez,emergencyMissing:tz,soundSettingsTitle:nz,soundOptionOn:rz,soundOptionAlertOnly:iz,soundOptionOff:sz,nextStepAnnouncement:oz,ttsPlaybackError:az,emergencyButtonLabel:lz,arrivalTime:cz,routeOverview:uz,allRoutes:dz,otherRoutes:hz,startRouting:pz,stopRouting:fz,returnToRoute:mz,from:gz,to:yz,meters:vz,metersPerSecond:xz,degreesPerSecond:_z,defaultUserName:wz,defaultLocation:bz,defaultBabRezaName:Cz,destSahnEnqelabName:Sz,destSahnEnqelabLocation:Mz,destEyvanTalaName:Ez,destEyvanTalaLocation:Lz,destRavaqMasoumehName:Tz,destRavaqMasoumehLocation:kz,destMasjedGoharshadName:Pz,destMasjedGoharshadLocation:Dz,destSahnPayambarAzamName:Iz,destSahnPayambarAzamLocation:Nz,saveDestination:Rz,shareRoute:Az,transportWalk:jz,transportCar:Oz,transportWheelchair:zz,routeForMen:Fz,routeForWomen:Bz,routeForFamily:$z,routeSummary:Vz,minutesUnit:Hz,secondsUnit:Uz,previous:Zz,next:qz,pwaInstallTitle:Wz,pwaInstallPrompt:Gz,pwaInstallButton:Yz,mapNoRecentSearches:Xz,noRouteFound:Kz,pwaCloseButton:Qz,stepMoveToDoor:Jz,stepPassConnection:eF,stepEnterNextSahn:tF,stepPassDoor:nF,stepArriveDestination:rF,stepNumber:iF,qrScanInstruction:sF,doorToDoor:oF,qrScanError:aF,emergencySubmissionSuccess:lF,emergencySubmissionError:cF,emergencySelectType:uF,emergencyEnterDetails:dF,landmarkSuffix:hF,fa:pF,ur:fF,ar:mF,en:gF,gpsOfflineMessage:yF,stepPrefix:vF,appVersionLabel:xF,newVersionAvailable:_F,destinationSaved:wF,savePlace:bF,viewbutton:CF,culturalInfo:SF,menu:MF,routeOrInfoTitle:EF,routeOption:LF,culturalInfoOption:TF,confirmContinue:kF,invalidPhone:PF,youAreHereQr:DF,navigateToMpr:IF,landmarkPlaces:NF,walking:RF,meter:AF,moreCulturalInfo:jF,navigateFromMpr:OF,detailsButton:zF,Username:FF,Savedlocations:BF,closeAndContinue:$F,"plang.title":"اختيار اللغة","plang.subtitle":"اختر لغة التطبيق","plang.description":"اختر اللغة المطلوبة وبالضغط على زر التأكيد والمتابعة، سيتم تغيير لغة التطبيق.",completeProfileTitle:VF,firstName:HF,lastName:UF,phoneNumber:ZF,province:qF,city:WF,enterFirstName:GF,enterLastName:YF,enterPhoneNumber:XF,selectProvince:KF,selectCity:QF,confirmAndSave:JF,myRoutesTitle:eB,noRoutesMessage:tB,repeatRoute:nB,distance:rB,origin:iB,destination:sB,routemode:oB,savedLocationsTitle:aB,addLocationButton:lB,noSavedLocationsTitle:cB,noSavedLocationsDescription:uB,addLocationMessage:dB,addLocationButton2:hB,pmapSearchPlaceholder:pB,confirmLocation:fB,pmapSelectLocation:mB,recentSearches:gB,noRecentSearches:yB,cancel:vB,profileUpdatedSuccess:xB},wB="خوش آمدید!",bB="مسیر طلائی",CB="حرم مطہر رضوی کے پیدل راستہ ایپ میں داخل ہونے کے لیے، پہلے ایپ کی زبان منتخب کریں اور پھر داخل ہوں۔",SB="ایپ میں لاگ ان کریں",MB="ایپ میں لاگ ان!",EB="ایپ کی مزید خصوصیات استعمال کرنے کے لیے اپنا موبائل نمبر درج کریں۔",LB="ایپ کا لوگو",TB="{title} کی تصویر {n}",kB='آپ کی داخلے کا مطلب ہے <a href="/terms">قوانین</a> اور <a href="/privacy">رازداری کی شرائط</a> کی قبولیت',PB="ہوم",DB="نقشہ",IB="کیو آر اسکین",NB="ترتیبات",RB="پروفائل",AB="© {year} مسیر طلائی - تمام حقوق محفوظ ہیں",jB="ہمارے بارے میں",OB="ہم سے رابطہ کریں",zB="رازداری",FB="ایپ کی زبان",BB="تصدیقی کوڈ درج کریں",$B="ہم نے تصدیقی کوڈ نمبر {phone} پر بھیج دیا ہے",VB="موبائل نمبر غلط ہے؟",HB="ترمیم کریں",UB="تصدیقی کوڈ دوبارہ بھیجیں (۵۰ سیکنڈ میں)",ZB="موبائل نمبر",qB="صارف کا اکاؤنٹ",WB="پروفائل مکمل کریں",GB="اکاؤنٹ",YB="اکاؤنٹ کی معلومات",XB="میرے طے کیے گئے راستے",KB="محفوظ کردہ مقامات",QB="ترتیبات",JB="اطلاعیں",e$="آستان قدس",t$="مدد",n$="اکثر پوچھے گئے سوالات",r$="قوانین و ضوابط",i$="لاگ آؤٹ",s$="اکاؤنٹ سے لاگ آؤٹ",o$="اپنی رائے لکھیں...",a$="اپنی رائے اور نقطہ نظر لکھیں",l$="اس مقام سے متعلق اپنی رائے لکھیں۔ منظوری کے بعد آپ کی رائے شائع ہوگی۔",c$="درجہ بندی کریں:",u$="رائے بھیجیں اور ثبت کریں",d$="آپ یہاں ہیں!",h$="{title} کے بارے میں",p$="مزید پڑھیں",f$="بند کریں",m$="{title} ملٹی میڈیا مواد",g$="تبصرے ({count})",y$="سب دیکھیں",v$="اس جگہ کے بارے میں اپنا تبصرہ لکھیں",x$="اس جگہ کے بارے میں اپنا تبصرہ لکھیں اور اسے درجہ دیں۔ منظوری کے بعد آپ کا تبصرہ شائع ہوگا.",_$="کم دکھائیں",w$="مزید دیکھیں",b$="حرم مطہر کے پروگرام",C$="مسیریابی",S$="سب سے زیادہ دورہ کیا",M$="میرے قریب مقامات",E$="محفوظ کریں",L$="تبصرہ",T$="نیا صارف",k$="تلاش کی تجاویز",P$="لوڈ ہو رہا ہے...",D$="تفصیل",I$="ڈیٹا حاصل کرنے میں خرابی: {error}",N$="کوئی ڈیٹا نہیں ملا",R$="سلائیڈ {n} پر جائیں",A$="آپ کہاں جانا چاہتے ہیں؟",j$="آغاز منتخب کریں",O$="منزل منتخب کریں",z$="منزل تلاش کریں",F$="آغاز تلاش کریں",B$="تلاش بند کریں",$$="تلاش صاف کریں",V$='"{query}" کے لیے کوئی نتیجہ نہیں ملا',H$="تلاش کے لیے عبارت درج کریں",U$="نقشے سے منتخب کریں",Z$="مزید وضاحت...",q$="درخواست کی تصدیق اور ارسال",W$="نقشے سے مقام منتخب کریں",G$="حرم کا راستہ",Y$="آپ کی موجودہ ابتداء",X$="آپ کا موجودہ مقام ({loc})",K$="آپ کا موجودہ مقام",Q$="منتخب مقام",J$="نقشے سے منتخب مقام",eV="آپ کی حالیہ تلاشیں",tV="صحن",nV="ایوان",rV="رواق",iV="مساجد",sV="مدارس",oV="خدمات",aV="ثقافتی",lV="قبرستان",cV="کیو آر کوڈ ",uV="لفٹ",dV="دیگر",hV="مقام کی پیروی روکیں",pV="مقام کی پیروی",fV="موجودہ مقام پر مرکز کریں",mV="عرض البلد:",gV="طول البلد:",yV="درستگی:",vV="خبردار: قدموں کی گنتی نہیں ہورہی۔ یقینی بنائیں کہ آلہ حرکت میں ہے اور سینسر فعال ہیں.",xV="آلے کے سینسر معاون نہیں ہیں.",_V="استعمال کے لیے سینسروں کی اجازت فعال کریں.",wV="سینسرز کی کیلیبریشن جاری ہے...",bV="اعلیٰ ٹریکنگ روکیں",CV="اعلیٰ ٹریکنگ شروع کریں",SV="نظام ری سیٹ کریں",MV="لاگ برآمد کریں",EV="قدموں کی تعداد:",LV="قدم کی لمبائی (میٹر):",TV="نسبتی مقام:",kV="سمت (درجہ):",PV="خطی رفتار:",DV="زاویائی رفتار:",IV="اندازاً قدم کی لمبائی:",NV="حرم ہنگامی درخواست",RV="براہ کرم اپنی درخواست کی قسم منتخب کریں اور وضاحت لکھیں۔ خادمین جلد آپ کے مقام پر پہنچ جائیں گے.",AV="آگ کی اطلاع",jV="چوری کی اطلاع",OV="طبی امداد کی درخواست",zV="گمشدگی کی اطلاع",FV="آواز کی ترتیبات",BV="آن",$V="صرف انتباہ",VV="بند",HV="اگلا مرحلہ: {instruction}",UV="نیویگیشن کی آواز چل نہیں سکی۔ براہ کرم اسکرین پر موجود ہدایات پر عمل جاری رکھیں۔",ZV="حرم ہنگامی حالات",qV="پہنچنے کا وقت",WV="راستے کے مراحل",GV="تمام راستے",YV="دیگر راستے",XV=" روٹنگ شروع کریں ",KV="سفر ختم کریں",QV="  واپس ٹریک پر  ",JV="سے",eH="تک",tH="میٹر",nH="میٹر فی سیکنڈ",rH="ڈگری فی سیکنڈ",iH="راستہ صارف",sH="آستان قدس",oH="آپ کا موجودہ مقام",aH="صحن انقلاب",lH="امام رضا حرم، صحن انقلاب",cH="سنہری ایوان",uH="امام رضا حرم، بین طبریسی ...",dH="رواق حضرت معصومہ",hH="امام رضا حرم، صحن آیت اللہ ...",pH="مسجد گوہرشاد",fH="امام رضا حرم، صحن گوہرشاد",mH="صحن پیامبر اعظم",gH="امام رضا حرم، صحن پیامبر...",yH="حتمی راستے کی تفصیلات",vH="منزل محفوظ کریں",xH="شئیر کریں",_H="پیدل",wH="الیکٹرک وین",bH="وہیل چیئر",CH="مردوں کے لیے راستہ",SH="خواتین کے لیے راستہ",MH="{origin} سے {destination} تک",EH="منٹ",LH="سیکنڈ",TH="پچھلا",kH="اگلا",PH="ایپ انسٹال کریں",DH="تیز رسائی کے لیے ایپ اپنے آلے پر انسٹال کریں۔",IH="انسٹال",NH="کوئی حالیہ تلاش نہیں",RH="منتخب موڈ کے لیے کوئی راستہ نہیں ملا",AH="بند کریں",jH="{name} کی طرف جائیں",OH="کنکشن پوائنٹ {title} سے گزریں",zH="{title} کنکشن کے ذریعے اگلے صحن میں داخل ہوں",FH="{name} سے گزریں",BH="{name} پر پہنچیں",$H="قدم {num}",VH="QR کوڈ کو فریم کے اندر رکھیں",HH="QR کوڈ پڑھا نہیں جا سکا",UH="آپ کی مدد کی درخواست کامیابی کے ساتھ بھیج دی گئی",ZH="مدد کی درخواست بھیجنے میں خرابی",qH="براہ کرم مدد کی قسم منتخب کریں",WH="براہ کرم مزید تفصیلات درج کریں",GH="{name} کی طرف مڑیں اور {distance} میٹر آگے بڑھیں",YH="{from} سے گزریں اور {to} پر پہنچیں",XH="فارسی",KH="اردو",QH="عربی",JH="انگریزی",eU="آپ کا GPS ڈیوائس بند ہے",tU="مرحلہ {num} از {total}  ",nU="ایپ ورژن: {version}",rU="نیا ورژن {version} دستیاب ہے",iU="محفوظ کر لیا",sU="محفوظ کریں",oU="دیکھیں ",aU="ثقافتی معلومات",lU="مینو",cU="کیا آپ ثقافتی معلومات دیکھنا چاہتے ہیں یا {placeName} کی ہدایات حاصل کرنا چاہتے ہیں؟",uU="ہدایات",dU="ثقافتی معلومات",hU="تصدیق کریں اور جاری رکھیں",pU="  درج کردہ فون نمبر غلط ہے  ",fU="آپ {placeName} کی زیارت کر رہے ہیں",mU="اس مقام پر نیویگیشن ",gU="نمایاں مقامات",yU=" منٹ کی واک",vU="میٹر",xU="مزید ثقافتی معلومات",_U="اس مقام سے راستہ تلاش کریں",wU="تفصیلات",bU="صارف نام ",CU=" محفوظ کردہ مقامات ",SU=" بند کریں اور راستہ جاری رکھیں ",MU="پروفائل مکمل کریں",EU="نام",LU="خاندانی نام",TU="موبائل نمبر",kU="صوبہ",PU="شہر",DU="اپنا نام لکھیں",IU="اپنا خاندانی نام لکھیں",NU="اپنا موبائل نمبر درج کریں",RU="اپنی رہائش کا صوبہ منتخب کریں",AU="اپنی رہائش کا شہر منتخب کریں",jU="تصدیق اور محفوظ کریں",OU="طے شدہ راستے",zU="ابھی تک کوئی راستہ طے نہیں ہوا",FU="راستہ دہرائیں",BU="فاصلہ:",$U=" اصل",VU=" منزل",HU="روٹنگ موڈ:",UU="محفوظ شدہ مقامات",ZU="مقام شامل کریں",qU="آپ نے کوئی مقام محفوظ نہیں کیا",WU="نقشے پر اپنے پسندیدہ مقامات کو محفوظ کرنے کے لیے، نیچے دیے گئے بٹن پر ٹیپ کریں اور اپنا مطلوبہ مقام محفوظ کریں۔",GU="مقام شامل کرنے کی فعالیت یہاں نافذ کی جائے گی",YU="ایک پسندیدہ مقام شامل کریں",XU="... تلاش کریں",KU="منتخب مقام کی تصدیق کریں",QU="نقشے سے ایک مقام منتخب کریں",JU="حالیہ تلاش",eZ="کوئی حالیہ تلاش نہیں ہے",tZ="منسوخ کریں",nZ="پروفائل کامیابی سے اپ ڈیٹ ہو گئی!",rZ={welcome:wB,appTitle:bB,selectLanguage:CB,loginButton:SB,loginTitle:MB,enterPhone:EB,logoAlt:LB,imageAlt:TB,terms:kB,home:PB,map:DB,qrScan:IB,settings:NB,profile:RB,copyright:AB,aboutUs:jB,contactUs:OB,privacy:zB,language:FB,enterVerification:BB,sentCode:$B,wrongPhone:VB,edit:HB,resendCode:UB,phonePlaceholder:ZB,profileTitle:qB,completeProfile:WB,accountSection:GB,accountInfo:YB,myRoutes:XB,savedPlaces:KB,settingsSection:QB,notifications:JB,supportSection:e$,support:t$,faq:n$,termsRegulation:r$,logoutTitle:i$,logoutAccount:s$,commentPlaceholder:o$,commentModalTitle:a$,commentModalInstruction:l$,ratingPrompt:c$,submitComment:u$,youAreHere:d$,aboutLocation:h$,readMore:p$,close:f$,audioTextContent:m$,commentsTitle:g$,viewAll:y$,commentPromptTitle:v$,commentPromptInstruction:x$,showLess:_$,showMore:w$,shrineEventsTitle:b$,navigate:C$,mostVisited:S$,nearMe:M$,save:E$,commentsLabel:L$,defaultCommentAuthor:T$,searchSuggestions:k$,loading:P$,subgroupDefaultDesc:D$,fetchError:I$,noDataFound:N$,goToSlide:R$,searchPlaceholder:A$,originPlaceholder:j$,destinationPlaceholder:O$,destinationSearchPlaceholder:z$,originSearchPlaceholder:F$,closeSearch:B$,clearSearch:$$,noResultsFound:V$,enterSearchTerm:H$,chooseFromMap:U$,emergencyPlaceholder:Z$,emergencySubmit:q$,mapSelectFromMap:W$,mapRoutingTitle:G$,mapCurrentOriginLabel:Y$,mapCurrentLocation:X$,mapCurrentLocationName:K$,mapSelectedLocation:Q$,mapSelectedLocationFromMap:J$,mapRecentSearches:eV,groupCourtyardPlural:tV,groupEyvanPlural:nV,groupRavaqPlural:rV,groupMosques:iV,groupSchools:sV,groupServices:oV,groupCulture:aV,groupCemetery:lV,groupQRScan:cV,groupElevator:uV,groupOther:dV,mapStopFollow:hV,mapStartFollow:pV,mapCenter:fV,mapLatitude:mV,mapLongitude:gV,mapAccuracy:yV,drStepWarning:vV,drSensorsUnsupported:xV,drPermissionNeeded:_V,drCalibrating:wV,drStopTracking:bV,drStartTracking:CV,drReset:SV,drExportLog:MV,drStepCount:EV,drStrideLength:LV,drRelPosition:TV,drHeading:kV,drLinearSpeed:PV,drAngularSpeed:DV,drEstimatedStride:IV,emergencyTitle:NV,emergencySubtitle:RV,emergencyFire:AV,emergencyTheft:jV,emergencyMedical:OV,emergencyMissing:zV,soundSettingsTitle:FV,soundOptionOn:BV,soundOptionAlertOnly:$V,soundOptionOff:VV,nextStepAnnouncement:HV,ttsPlaybackError:UV,emergencyButtonLabel:ZV,arrivalTime:qV,routeOverview:WV,allRoutes:GV,otherRoutes:YV,startRouting:XV,stopRouting:KV,returnToRoute:QV,from:JV,to:eH,meters:tH,metersPerSecond:nH,degreesPerSecond:rH,defaultUserName:iH,defaultLocation:sH,defaultBabRezaName:oH,destSahnEnqelabName:aH,destSahnEnqelabLocation:lH,destEyvanTalaName:cH,destEyvanTalaLocation:uH,destRavaqMasoumehName:dH,destRavaqMasoumehLocation:hH,destMasjedGoharshadName:pH,destMasjedGoharshadLocation:fH,destSahnPayambarAzamName:mH,destSahnPayambarAzamLocation:gH,finalSearchTitle:yH,saveDestination:vH,shareRoute:xH,transportWalk:_H,transportCar:wH,transportWheelchair:bH,routeForMen:CH,routeForWomen:SH,routeSummary:MH,minutesUnit:EH,secondsUnit:LH,previous:TH,next:kH,pwaInstallTitle:PH,pwaInstallPrompt:DH,pwaInstallButton:IH,mapNoRecentSearches:NH,noRouteFound:RH,pwaCloseButton:AH,stepMoveToDoor:jH,stepPassConnection:OH,stepEnterNextSahn:zH,stepPassDoor:FH,stepArriveDestination:BH,stepNumber:$H,qrScanInstruction:VH,qrScanError:HH,emergencySubmissionSuccess:UH,emergencySubmissionError:ZH,emergencySelectType:qH,emergencyEnterDetails:WH,landmarkSuffix:GH,doorToDoor:YH,fa:XH,ur:KH,ar:QH,en:JH,gpsOfflineMessage:eU,stepPrefix:tU,appVersionLabel:nU,newVersionAvailable:rU,destinationSaved:iU,savePlace:sU,viewbutton:oU,culturalInfo:aU,menu:lU,routeOrInfoTitle:cU,routeOption:uU,culturalInfoOption:dU,confirmContinue:hU,invalidPhone:pU,youAreHereQr:fU,navigateToMpr:mU,landmarkPlaces:gU,walking:yU,meter:vU,moreCulturalInfo:xU,navigateFromMpr:_U,detailsButton:wU,Username:bU,Savedlocations:CU,closeAndContinue:SU,"plang.title":"زبان منتخب کریں","plang.subtitle":"ایپ کی زبان منتخب کریں","plang.description":"اپنی مطلوبہ زبان منتخب کریں اور تصدیق اور جاری رکھیں بٹن پر کلک کرکے، ایپ کی زبان تبدیل ہو جائے گی۔",completeProfileTitle:MU,firstName:EU,lastName:LU,phoneNumber:TU,province:kU,city:PU,enterFirstName:DU,enterLastName:IU,enterPhoneNumber:NU,selectProvince:RU,selectCity:AU,confirmAndSave:jU,myRoutesTitle:OU,noRoutesMessage:zU,repeatRoute:FU,distance:BU,origin:$U,destination:VU,routemode:HU,savedLocationsTitle:UU,addLocationButton:ZU,noSavedLocationsTitle:qU,noSavedLocationsDescription:WU,addLocationMessage:GU,addLocationButton2:YU,pmapSearchPlaceholder:XU,confirmLocation:KU,pmapSelectLocation:QU,recentSearches:JU,noRecentSearches:eZ,cancel:tZ,profileUpdatedSuccess:nZ},iZ={fa:eD,en:OA,ar:_B,ur:rZ},sZ=({children:e})=>{const o=Gi(m=>m.language);B.useEffect(()=>{document.documentElement.lang=o,document.documentElement.dir=o==="en"?"ltr":"rtl"},[o]);const i=k5(),r=h8({locale:o,messages:iZ[o],defaultLocale:"fa"},i),d=r.formatMessage;return r.formatMessage=(m,x)=>{let c=d(m,x);return["fa","ur","ar"].includes(o)&&(c=J5(c)),c},f.jsx(u8,{value:r,children:e})},oZ=c0(u0((e,o)=>({currentLocation:null,locationHistory:[],savedLocations:[],qrCodeLocations:[],isTracking:!1,routeInfo:null,updateCurrentLocation:i=>e({currentLocation:i}),addLocationToHistory:i=>e(r=>({locationHistory:[...r.locationHistory,{...i,id:Date.now()}]})),saveLocation:(i,r)=>e(d=>({savedLocations:[...d.savedLocations,{...i,id:Date.now(),name:r||`مکان ${d.savedLocations.length+1}`}]})),addQRCodeLocation:(i,r)=>e(d=>({qrCodeLocations:[...d.qrCodeLocations,{id:Date.now(),qrData:i,location:r,scannedAt:new Date().toISOString()}]})),toggleTracking:()=>e(i=>({isTracking:!i.isTracking})),setRouteInfo:i=>e({routeInfo:i}),clearLocationHistory:()=>e({locationHistory:[]}),deleteSavedLocation:i=>e(r=>({savedLocations:r.savedLocations.filter(d=>d.id!==i)}))}),{name:"gps-storage",version:1}));function aZ(e={}){const{immediate:o=!1,onNeedRefresh:i,onOfflineReady:r,onRegistered:d,onRegisteredSW:m,onRegisterError:x}=e;let c,L;const T=async(D=!0)=>{await L};async function P(){if("serviceWorker"in navigator){if(c=await h2(async()=>{const{Workbox:D}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:D}},[]).then(({Workbox:D})=>new D("/golden_path/sw.js",{scope:"/golden_path/",type:"classic"})).catch(D=>{x==null||x(D)}),!c)return;c.addEventListener("activated",D=>{(D.isUpdate||D.isExternal)&&window.location.reload()}),c.addEventListener("installed",D=>{D.isUpdate||r==null||r()}),c.register({immediate:o}).then(D=>{m?m("/golden_path/sw.js",D):d==null||d(D)}).catch(D=>{x==null||x(D)})}}return L=P(),T}let rl=window.location.search;!rl&&window.location.hash.includes("?")&&(rl=window.location.hash.split("?")[1],rl&&(rl="?"+rl));rl&&rl.includes("&amp;")&&(rl=rl.replace(/&amp;/g,"&"));const A2=new URLSearchParams(rl),Dm=A2.get("lat"),Im=A2.get("lng"),a5=A2.get("id");if(Dm&&Im){sessionStorage.setItem("qrLat",Dm),sessionStorage.setItem("qrLng",Im),a5&&sessionStorage.setItem("qrId",a5);const e=oZ.getState().updateCurrentLocation;e({coords:{lat:parseFloat(Dm),lng:parseFloat(Im),accuracy:0},timestamp:Date.now()})}aZ({onNeedRefresh(){console.log("New content is available; please refresh.")},onOfflineReady(){console.log("Content is cached for offline use.")}});I4.createRoot(document.getElementById("root")).render(f.jsx(Ze.StrictMode,{children:f.jsx(sZ,{children:f.jsx(yE,{})})}));
