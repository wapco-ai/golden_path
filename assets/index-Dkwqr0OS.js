function _g(a,p){for(var y=0;y<p.length;y++){const _=p[y];if(typeof _!="string"&&!Array.isArray(_)){for(const E in _)if(E!=="default"&&!(E in a)){const T=Object.getOwnPropertyDescriptor(_,E);T&&Object.defineProperty(a,E,T.get?T:{enumerable:!0,get:()=>_[E]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const p=document.createElement("link").relList;if(p&&p.supports&&p.supports("modulepreload"))return;for(const E of document.querySelectorAll('link[rel="modulepreload"]'))_(E);new MutationObserver(E=>{for(const T of E)if(T.type==="childList")for(const C of T.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&_(C)}).observe(document,{childList:!0,subtree:!0});function y(E){const T={};return E.integrity&&(T.integrity=E.integrity),E.referrerPolicy&&(T.referrerPolicy=E.referrerPolicy),E.crossOrigin==="use-credentials"?T.credentials="include":E.crossOrigin==="anonymous"?T.credentials="omit":T.credentials="same-origin",T}function _(E){if(E.ep)return;E.ep=!0;const T=y(E);fetch(E.href,T)}})();function Sp(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Zp={exports:{}},td={},Xp={exports:{}},pn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tm;function Z0(){if(tm)return pn;tm=1;var a=Symbol.for("react.element"),p=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),C=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),j=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),D=Symbol.iterator;function F(we){return we===null||typeof we!="object"?null:(we=D&&we[D]||we["@@iterator"],typeof we=="function"?we:null)}var te={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ie=Object.assign,W={};function Y(we,Ve,St){this.props=we,this.context=Ve,this.refs=W,this.updater=St||te}Y.prototype.isReactComponent={},Y.prototype.setState=function(we,Ve){if(typeof we!="object"&&typeof we!="function"&&we!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,we,Ve,"setState")},Y.prototype.forceUpdate=function(we){this.updater.enqueueForceUpdate(this,we,"forceUpdate")};function pe(){}pe.prototype=Y.prototype;function ye(we,Ve,St){this.props=we,this.context=Ve,this.refs=W,this.updater=St||te}var ve=ye.prototype=new pe;ve.constructor=ye,ie(ve,Y.prototype),ve.isPureReactComponent=!0;var Be=Array.isArray,Se=Object.prototype.hasOwnProperty,Ke={current:null},Je={key:!0,ref:!0,__self:!0,__source:!0};function He(we,Ve,St){var At,zt={},Nt=null,Kt=null;if(Ve!=null)for(At in Ve.ref!==void 0&&(Kt=Ve.ref),Ve.key!==void 0&&(Nt=""+Ve.key),Ve)Se.call(Ve,At)&&!Je.hasOwnProperty(At)&&(zt[At]=Ve[At]);var Yt=arguments.length-2;if(Yt===1)zt.children=St;else if(1<Yt){for(var Ft=Array(Yt),An=0;An<Yt;An++)Ft[An]=arguments[An+2];zt.children=Ft}if(we&&we.defaultProps)for(At in Yt=we.defaultProps,Yt)zt[At]===void 0&&(zt[At]=Yt[At]);return{$$typeof:a,type:we,key:Nt,ref:Kt,props:zt,_owner:Ke.current}}function gt(we,Ve){return{$$typeof:a,type:we.type,key:Ve,ref:we.ref,props:we.props,_owner:we._owner}}function pt(we){return typeof we=="object"&&we!==null&&we.$$typeof===a}function wt(we){var Ve={"=":"=0",":":"=2"};return"$"+we.replace(/[=:]/g,function(St){return Ve[St]})}var Tt=/\/+/g;function bt(we,Ve){return typeof we=="object"&&we!==null&&we.key!=null?wt(""+we.key):Ve.toString(36)}function mt(we,Ve,St,At,zt){var Nt=typeof we;(Nt==="undefined"||Nt==="boolean")&&(we=null);var Kt=!1;if(we===null)Kt=!0;else switch(Nt){case"string":case"number":Kt=!0;break;case"object":switch(we.$$typeof){case a:case p:Kt=!0}}if(Kt)return Kt=we,zt=zt(Kt),we=At===""?"."+bt(Kt,0):At,Be(zt)?(St="",we!=null&&(St=we.replace(Tt,"$&/")+"/"),mt(zt,Ve,St,"",function(An){return An})):zt!=null&&(pt(zt)&&(zt=gt(zt,St+(!zt.key||Kt&&Kt.key===zt.key?"":(""+zt.key).replace(Tt,"$&/")+"/")+we)),Ve.push(zt)),1;if(Kt=0,At=At===""?".":At+":",Be(we))for(var Yt=0;Yt<we.length;Yt++){Nt=we[Yt];var Ft=At+bt(Nt,Yt);Kt+=mt(Nt,Ve,St,Ft,zt)}else if(Ft=F(we),typeof Ft=="function")for(we=Ft.call(we),Yt=0;!(Nt=we.next()).done;)Nt=Nt.value,Ft=At+bt(Nt,Yt++),Kt+=mt(Nt,Ve,St,Ft,zt);else if(Nt==="object")throw Ve=String(we),Error("Objects are not valid as a React child (found: "+(Ve==="[object Object]"?"object with keys {"+Object.keys(we).join(", ")+"}":Ve)+"). If you meant to render a collection of children, use an array instead.");return Kt}function Ct(we,Ve,St){if(we==null)return we;var At=[],zt=0;return mt(we,At,"","",function(Nt){return Ve.call(St,Nt,zt++)}),At}function Ze(we){if(we._status===-1){var Ve=we._result;Ve=Ve(),Ve.then(function(St){(we._status===0||we._status===-1)&&(we._status=1,we._result=St)},function(St){(we._status===0||we._status===-1)&&(we._status=2,we._result=St)}),we._status===-1&&(we._status=0,we._result=Ve)}if(we._status===1)return we._result.default;throw we._result}var Pt={current:null},We={transition:null},at={ReactCurrentDispatcher:Pt,ReactCurrentBatchConfig:We,ReactCurrentOwner:Ke};function rt(){throw Error("act(...) is not supported in production builds of React.")}return pn.Children={map:Ct,forEach:function(we,Ve,St){Ct(we,function(){Ve.apply(this,arguments)},St)},count:function(we){var Ve=0;return Ct(we,function(){Ve++}),Ve},toArray:function(we){return Ct(we,function(Ve){return Ve})||[]},only:function(we){if(!pt(we))throw Error("React.Children.only expected to receive a single React element child.");return we}},pn.Component=Y,pn.Fragment=y,pn.Profiler=E,pn.PureComponent=ye,pn.StrictMode=_,pn.Suspense=B,pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=at,pn.act=rt,pn.cloneElement=function(we,Ve,St){if(we==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+we+".");var At=ie({},we.props),zt=we.key,Nt=we.ref,Kt=we._owner;if(Ve!=null){if(Ve.ref!==void 0&&(Nt=Ve.ref,Kt=Ke.current),Ve.key!==void 0&&(zt=""+Ve.key),we.type&&we.type.defaultProps)var Yt=we.type.defaultProps;for(Ft in Ve)Se.call(Ve,Ft)&&!Je.hasOwnProperty(Ft)&&(At[Ft]=Ve[Ft]===void 0&&Yt!==void 0?Yt[Ft]:Ve[Ft])}var Ft=arguments.length-2;if(Ft===1)At.children=St;else if(1<Ft){Yt=Array(Ft);for(var An=0;An<Ft;An++)Yt[An]=arguments[An+2];At.children=Yt}return{$$typeof:a,type:we.type,key:zt,ref:Nt,props:At,_owner:Kt}},pn.createContext=function(we){return we={$$typeof:C,_currentValue:we,_currentValue2:we,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},we.Provider={$$typeof:T,_context:we},we.Consumer=we},pn.createElement=He,pn.createFactory=function(we){var Ve=He.bind(null,we);return Ve.type=we,Ve},pn.createRef=function(){return{current:null}},pn.forwardRef=function(we){return{$$typeof:c,render:we}},pn.isValidElement=pt,pn.lazy=function(we){return{$$typeof:$,_payload:{_status:-1,_result:we},_init:Ze}},pn.memo=function(we,Ve){return{$$typeof:j,type:we,compare:Ve===void 0?null:Ve}},pn.startTransition=function(we){var Ve=We.transition;We.transition={};try{we()}finally{We.transition=Ve}},pn.unstable_act=rt,pn.useCallback=function(we,Ve){return Pt.current.useCallback(we,Ve)},pn.useContext=function(we){return Pt.current.useContext(we)},pn.useDebugValue=function(){},pn.useDeferredValue=function(we){return Pt.current.useDeferredValue(we)},pn.useEffect=function(we,Ve){return Pt.current.useEffect(we,Ve)},pn.useId=function(){return Pt.current.useId()},pn.useImperativeHandle=function(we,Ve,St){return Pt.current.useImperativeHandle(we,Ve,St)},pn.useInsertionEffect=function(we,Ve){return Pt.current.useInsertionEffect(we,Ve)},pn.useLayoutEffect=function(we,Ve){return Pt.current.useLayoutEffect(we,Ve)},pn.useMemo=function(we,Ve){return Pt.current.useMemo(we,Ve)},pn.useReducer=function(we,Ve,St){return Pt.current.useReducer(we,Ve,St)},pn.useRef=function(we){return Pt.current.useRef(we)},pn.useState=function(we){return Pt.current.useState(we)},pn.useSyncExternalStore=function(we,Ve,St){return Pt.current.useSyncExternalStore(we,Ve,St)},pn.useTransition=function(){return Pt.current.useTransition()},pn.version="18.3.1",pn}var nm;function hd(){return nm||(nm=1,Xp.exports=Z0()),Xp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rm;function X0(){if(rm)return td;rm=1;var a=hd(),p=Symbol.for("react.element"),y=Symbol.for("react.fragment"),_=Object.prototype.hasOwnProperty,E=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,T={key:!0,ref:!0,__self:!0,__source:!0};function C(c,B,j){var $,D={},F=null,te=null;j!==void 0&&(F=""+j),B.key!==void 0&&(F=""+B.key),B.ref!==void 0&&(te=B.ref);for($ in B)_.call(B,$)&&!T.hasOwnProperty($)&&(D[$]=B[$]);if(c&&c.defaultProps)for($ in B=c.defaultProps,B)D[$]===void 0&&(D[$]=B[$]);return{$$typeof:p,type:c,key:F,ref:te,props:D,_owner:E.current}}return td.Fragment=y,td.jsx=C,td.jsxs=C,td}var im;function K0(){return im||(im=1,Zp.exports=X0()),Zp.exports}var v=K0(),ne=hd();const id=Sp(ne),J0=_g({__proto__:null,default:id},[ne]);var lp={},Kp={exports:{}},$i={},Jp={exports:{}},Yp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var om;function Y0(){return om||(om=1,function(a){function p(We,at){var rt=We.length;We.push(at);e:for(;0<rt;){var we=rt-1>>>1,Ve=We[we];if(0<E(Ve,at))We[we]=at,We[rt]=Ve,rt=we;else break e}}function y(We){return We.length===0?null:We[0]}function _(We){if(We.length===0)return null;var at=We[0],rt=We.pop();if(rt!==at){We[0]=rt;e:for(var we=0,Ve=We.length,St=Ve>>>1;we<St;){var At=2*(we+1)-1,zt=We[At],Nt=At+1,Kt=We[Nt];if(0>E(zt,rt))Nt<Ve&&0>E(Kt,zt)?(We[we]=Kt,We[Nt]=rt,we=Nt):(We[we]=zt,We[At]=rt,we=At);else if(Nt<Ve&&0>E(Kt,rt))We[we]=Kt,We[Nt]=rt,we=Nt;else break e}}return at}function E(We,at){var rt=We.sortIndex-at.sortIndex;return rt!==0?rt:We.id-at.id}if(typeof performance=="object"&&typeof performance.now=="function"){var T=performance;a.unstable_now=function(){return T.now()}}else{var C=Date,c=C.now();a.unstable_now=function(){return C.now()-c}}var B=[],j=[],$=1,D=null,F=3,te=!1,ie=!1,W=!1,Y=typeof setTimeout=="function"?setTimeout:null,pe=typeof clearTimeout=="function"?clearTimeout:null,ye=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ve(We){for(var at=y(j);at!==null;){if(at.callback===null)_(j);else if(at.startTime<=We)_(j),at.sortIndex=at.expirationTime,p(B,at);else break;at=y(j)}}function Be(We){if(W=!1,ve(We),!ie)if(y(B)!==null)ie=!0,Ze(Se);else{var at=y(j);at!==null&&Pt(Be,at.startTime-We)}}function Se(We,at){ie=!1,W&&(W=!1,pe(He),He=-1),te=!0;var rt=F;try{for(ve(at),D=y(B);D!==null&&(!(D.expirationTime>at)||We&&!wt());){var we=D.callback;if(typeof we=="function"){D.callback=null,F=D.priorityLevel;var Ve=we(D.expirationTime<=at);at=a.unstable_now(),typeof Ve=="function"?D.callback=Ve:D===y(B)&&_(B),ve(at)}else _(B);D=y(B)}if(D!==null)var St=!0;else{var At=y(j);At!==null&&Pt(Be,At.startTime-at),St=!1}return St}finally{D=null,F=rt,te=!1}}var Ke=!1,Je=null,He=-1,gt=5,pt=-1;function wt(){return!(a.unstable_now()-pt<gt)}function Tt(){if(Je!==null){var We=a.unstable_now();pt=We;var at=!0;try{at=Je(!0,We)}finally{at?bt():(Ke=!1,Je=null)}}else Ke=!1}var bt;if(typeof ye=="function")bt=function(){ye(Tt)};else if(typeof MessageChannel<"u"){var mt=new MessageChannel,Ct=mt.port2;mt.port1.onmessage=Tt,bt=function(){Ct.postMessage(null)}}else bt=function(){Y(Tt,0)};function Ze(We){Je=We,Ke||(Ke=!0,bt())}function Pt(We,at){He=Y(function(){We(a.unstable_now())},at)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(We){We.callback=null},a.unstable_continueExecution=function(){ie||te||(ie=!0,Ze(Se))},a.unstable_forceFrameRate=function(We){0>We||125<We?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):gt=0<We?Math.floor(1e3/We):5},a.unstable_getCurrentPriorityLevel=function(){return F},a.unstable_getFirstCallbackNode=function(){return y(B)},a.unstable_next=function(We){switch(F){case 1:case 2:case 3:var at=3;break;default:at=F}var rt=F;F=at;try{return We()}finally{F=rt}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(We,at){switch(We){case 1:case 2:case 3:case 4:case 5:break;default:We=3}var rt=F;F=We;try{return at()}finally{F=rt}},a.unstable_scheduleCallback=function(We,at,rt){var we=a.unstable_now();switch(typeof rt=="object"&&rt!==null?(rt=rt.delay,rt=typeof rt=="number"&&0<rt?we+rt:we):rt=we,We){case 1:var Ve=-1;break;case 2:Ve=250;break;case 5:Ve=1073741823;break;case 4:Ve=1e4;break;default:Ve=5e3}return Ve=rt+Ve,We={id:$++,callback:at,priorityLevel:We,startTime:rt,expirationTime:Ve,sortIndex:-1},rt>we?(We.sortIndex=rt,p(j,We),y(B)===null&&We===y(j)&&(W?(pe(He),He=-1):W=!0,Pt(Be,rt-we))):(We.sortIndex=Ve,p(B,We),ie||te||(ie=!0,Ze(Se))),We},a.unstable_shouldYield=wt,a.unstable_wrapCallback=function(We){var at=F;return function(){var rt=F;F=at;try{return We.apply(this,arguments)}finally{F=rt}}}}(Yp)),Yp}var sm;function Q0(){return sm||(sm=1,Jp.exports=Y0()),Jp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var am;function ey(){if(am)return $i;am=1;var a=hd(),p=Q0();function y(e){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+e,l=1;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _=new Set,E={};function T(e,r){C(e,r),C(e+"Capture",r)}function C(e,r){for(E[e]=r,e=0;e<r.length;e++)_.add(r[e])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),B=Object.prototype.hasOwnProperty,j=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$={},D={};function F(e){return B.call(D,e)?!0:B.call($,e)?!1:j.test(e)?D[e]=!0:($[e]=!0,!1)}function te(e,r,l,d){if(l!==null&&l.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return d?!1:l!==null?!l.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function ie(e,r,l,d){if(r===null||typeof r>"u"||te(e,r,l,d))return!0;if(d)return!1;if(l!==null)switch(l.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function W(e,r,l,d,x,S,M){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=d,this.attributeNamespace=x,this.mustUseProperty=l,this.propertyName=e,this.type=r,this.sanitizeURL=S,this.removeEmptyString=M}var Y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Y[e]=new W(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var r=e[0];Y[r]=new W(r,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){Y[e]=new W(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Y[e]=new W(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Y[e]=new W(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){Y[e]=new W(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){Y[e]=new W(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){Y[e]=new W(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){Y[e]=new W(e,5,!1,e.toLowerCase(),null,!1,!1)});var pe=/[\-:]([a-z])/g;function ye(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var r=e.replace(pe,ye);Y[r]=new W(r,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var r=e.replace(pe,ye);Y[r]=new W(r,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var r=e.replace(pe,ye);Y[r]=new W(r,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){Y[e]=new W(e,1,!1,e.toLowerCase(),null,!1,!1)}),Y.xlinkHref=new W("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){Y[e]=new W(e,1,!1,e.toLowerCase(),null,!0,!0)});function ve(e,r,l,d){var x=Y.hasOwnProperty(r)?Y[r]:null;(x!==null?x.type!==0:d||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(ie(r,l,x,d)&&(l=null),d||x===null?F(r)&&(l===null?e.removeAttribute(r):e.setAttribute(r,""+l)):x.mustUseProperty?e[x.propertyName]=l===null?x.type===3?!1:"":l:(r=x.attributeName,d=x.attributeNamespace,l===null?e.removeAttribute(r):(x=x.type,l=x===3||x===4&&l===!0?"":""+l,d?e.setAttributeNS(d,r,l):e.setAttribute(r,l))))}var Be=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Se=Symbol.for("react.element"),Ke=Symbol.for("react.portal"),Je=Symbol.for("react.fragment"),He=Symbol.for("react.strict_mode"),gt=Symbol.for("react.profiler"),pt=Symbol.for("react.provider"),wt=Symbol.for("react.context"),Tt=Symbol.for("react.forward_ref"),bt=Symbol.for("react.suspense"),mt=Symbol.for("react.suspense_list"),Ct=Symbol.for("react.memo"),Ze=Symbol.for("react.lazy"),Pt=Symbol.for("react.offscreen"),We=Symbol.iterator;function at(e){return e===null||typeof e!="object"?null:(e=We&&e[We]||e["@@iterator"],typeof e=="function"?e:null)}var rt=Object.assign,we;function Ve(e){if(we===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);we=r&&r[1]||""}return`
`+we+e}var St=!1;function At(e,r){if(!e||St)return"";St=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(V){var d=V}Reflect.construct(e,[],r)}else{try{r.call()}catch(V){d=V}e.call(r.prototype)}else{try{throw Error()}catch(V){d=V}e()}}catch(V){if(V&&d&&typeof V.stack=="string"){for(var x=V.stack.split(`
`),S=d.stack.split(`
`),M=x.length-1,A=S.length-1;1<=M&&0<=A&&x[M]!==S[A];)A--;for(;1<=M&&0<=A;M--,A--)if(x[M]!==S[A]){if(M!==1||A!==1)do if(M--,A--,0>A||x[M]!==S[A]){var L=`
`+x[M].replace(" at new "," at ");return e.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",e.displayName)),L}while(1<=M&&0<=A);break}}}finally{St=!1,Error.prepareStackTrace=l}return(e=e?e.displayName||e.name:"")?Ve(e):""}function zt(e){switch(e.tag){case 5:return Ve(e.type);case 16:return Ve("Lazy");case 13:return Ve("Suspense");case 19:return Ve("SuspenseList");case 0:case 2:case 15:return e=At(e.type,!1),e;case 11:return e=At(e.type.render,!1),e;case 1:return e=At(e.type,!0),e;default:return""}}function Nt(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Je:return"Fragment";case Ke:return"Portal";case gt:return"Profiler";case He:return"StrictMode";case bt:return"Suspense";case mt:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case wt:return(e.displayName||"Context")+".Consumer";case pt:return(e._context.displayName||"Context")+".Provider";case Tt:var r=e.render;return e=e.displayName,e||(e=r.displayName||r.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ct:return r=e.displayName||null,r!==null?r:Nt(e.type)||"Memo";case Ze:r=e._payload,e=e._init;try{return Nt(e(r))}catch{}}return null}function Kt(e){var r=e.type;switch(e.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=r.render,e=e.displayName||e.name||"",r.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Nt(r);case 8:return r===He?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Yt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ft(e){var r=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function An(e){var r=Ft(e)?"checked":"value",l=Object.getOwnPropertyDescriptor(e.constructor.prototype,r),d=""+e[r];if(!e.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var x=l.get,S=l.set;return Object.defineProperty(e,r,{configurable:!0,get:function(){return x.call(this)},set:function(M){d=""+M,S.call(this,M)}}),Object.defineProperty(e,r,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(M){d=""+M},stopTracking:function(){e._valueTracker=null,delete e[r]}}}}function br(e){e._valueTracker||(e._valueTracker=An(e))}function Qn(e){if(!e)return!1;var r=e._valueTracker;if(!r)return!0;var l=r.getValue(),d="";return e&&(d=Ft(e)?e.checked?"true":"false":e.value),e=d,e!==l?(r.setValue(e),!0):!1}function jn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function si(e,r){var l=r.checked;return rt({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??e._wrapperState.initialChecked})}function Qe(e,r){var l=r.defaultValue==null?"":r.defaultValue,d=r.checked!=null?r.checked:r.defaultChecked;l=Yt(r.value!=null?r.value:l),e._wrapperState={initialChecked:d,initialValue:l,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function tt(e,r){r=r.checked,r!=null&&ve(e,"checked",r,!1)}function Ot(e,r){tt(e,r);var l=Yt(r.value),d=r.type;if(l!=null)d==="number"?(l===0&&e.value===""||e.value!=l)&&(e.value=""+l):e.value!==""+l&&(e.value=""+l);else if(d==="submit"||d==="reset"){e.removeAttribute("value");return}r.hasOwnProperty("value")?dt(e,r.type,l):r.hasOwnProperty("defaultValue")&&dt(e,r.type,Yt(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(e.defaultChecked=!!r.defaultChecked)}function ln(e,r,l){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var d=r.type;if(!(d!=="submit"&&d!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+e._wrapperState.initialValue,l||r===e.value||(e.value=r),e.defaultValue=r}l=e.name,l!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,l!==""&&(e.name=l)}function dt(e,r,l){(r!=="number"||jn(e.ownerDocument)!==e)&&(l==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+l&&(e.defaultValue=""+l))}var tn=Array.isArray;function Br(e,r,l,d){if(e=e.options,r){r={};for(var x=0;x<l.length;x++)r["$"+l[x]]=!0;for(l=0;l<e.length;l++)x=r.hasOwnProperty("$"+e[l].value),e[l].selected!==x&&(e[l].selected=x),x&&d&&(e[l].defaultSelected=!0)}else{for(l=""+Yt(l),r=null,x=0;x<e.length;x++){if(e[x].value===l){e[x].selected=!0,d&&(e[x].defaultSelected=!0);return}r!==null||e[x].disabled||(r=e[x])}r!==null&&(r.selected=!0)}}function kn(e,r){if(r.dangerouslySetInnerHTML!=null)throw Error(y(91));return rt({},r,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function rr(e,r){var l=r.value;if(l==null){if(l=r.children,r=r.defaultValue,l!=null){if(r!=null)throw Error(y(92));if(tn(l)){if(1<l.length)throw Error(y(93));l=l[0]}r=l}r==null&&(r=""),l=r}e._wrapperState={initialValue:Yt(l)}}function On(e,r){var l=Yt(r.value),d=Yt(r.defaultValue);l!=null&&(l=""+l,l!==e.value&&(e.value=l),r.defaultValue==null&&e.defaultValue!==l&&(e.defaultValue=l)),d!=null&&(e.defaultValue=""+d)}function Fr(e){var r=e.textContent;r===e._wrapperState.initialValue&&r!==""&&r!==null&&(e.value=r)}function Hr(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Le(e,r){return e==null||e==="http://www.w3.org/1999/xhtml"?Hr(r):e==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Xe,Sr=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,l,d,x){MSApp.execUnsafeLocalFunction(function(){return e(r,l,d,x)})}:e}(function(e,r){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=r;else{for(Xe=Xe||document.createElement("div"),Xe.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Xe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;r.firstChild;)e.appendChild(r.firstChild)}});function ir(e,r){if(r){var l=e.firstChild;if(l&&l===e.lastChild&&l.nodeType===3){l.nodeValue=r;return}}e.textContent=r}var dn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sn=["Webkit","ms","Moz","O"];Object.keys(dn).forEach(function(e){Sn.forEach(function(r){r=r+e.charAt(0).toUpperCase()+e.substring(1),dn[r]=dn[e]})});function er(e,r,l){return r==null||typeof r=="boolean"||r===""?"":l||typeof r!="number"||r===0||dn.hasOwnProperty(e)&&dn[e]?(""+r).trim():r+"px"}function ji(e,r){e=e.style;for(var l in r)if(r.hasOwnProperty(l)){var d=l.indexOf("--")===0,x=er(l,r[l],d);l==="float"&&(l="cssFloat"),d?e.setProperty(l,x):e[l]=x}}var fr=rt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function et(e,r){if(r){if(fr[e]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(y(137,e));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(y(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(y(61))}if(r.style!=null&&typeof r.style!="object")throw Error(y(62))}}function Bt(e,r){if(e.indexOf("-")===-1)return typeof r.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rt=null;function tr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var lr=null,Lt=null,or=null;function Gr(e){if(e=z(e)){if(typeof lr!="function")throw Error(y(280));var r=e.stateNode;r&&(r=U(r),lr(e.stateNode,e.type,r))}}function je(e){Lt?or?or.push(e):or=[e]:Lt=e}function It(){if(Lt){var e=Lt,r=or;if(or=Lt=null,Gr(e),r)for(e=0;e<r.length;e++)Gr(r[e])}}function $t(e,r){return e(r)}function mn(){}var yi=!1;function Er(e,r,l){if(yi)return e(r,l);yi=!0;try{return $t(e,r,l)}finally{yi=!1,(Lt!==null||or!==null)&&(mn(),It())}}function ai(e,r){var l=e.stateNode;if(l===null)return null;var d=U(l);if(d===null)return null;l=d[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(e=e.type,d=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!d;break e;default:e=!1}if(e)return null;if(l&&typeof l!="function")throw Error(y(231,r,typeof l));return l}var vi=!1;if(c)try{var Gi={};Object.defineProperty(Gi,"passive",{get:function(){vi=!0}}),window.addEventListener("test",Gi,Gi),window.removeEventListener("test",Gi,Gi)}catch{vi=!1}function la(e,r,l,d,x,S,M,A,L){var V=Array.prototype.slice.call(arguments,3);try{r.apply(l,V)}catch(q){this.onError(q)}}var Kr=!1,Z=null,R=!1,O=null,G={onError:function(e){Kr=!0,Z=e}};function J(e,r,l,d,x,S,M,A,L){Kr=!1,Z=null,la.apply(G,arguments)}function ce(e,r,l,d,x,S,M,A,L){if(J.apply(this,arguments),Kr){if(Kr){var V=Z;Kr=!1,Z=null}else throw Error(y(198));R||(R=!0,O=V)}}function me(e){var r=e,l=e;if(e.alternate)for(;r.return;)r=r.return;else{e=r;do r=e,(r.flags&4098)!==0&&(l=r.return),e=r.return;while(e)}return r.tag===3?l:null}function fe(e){if(e.tag===13){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function ue(e){if(me(e)!==e)throw Error(y(188))}function _e(e){var r=e.alternate;if(!r){if(r=me(e),r===null)throw Error(y(188));return r!==e?null:e}for(var l=e,d=r;;){var x=l.return;if(x===null)break;var S=x.alternate;if(S===null){if(d=x.return,d!==null){l=d;continue}break}if(x.child===S.child){for(S=x.child;S;){if(S===l)return ue(x),e;if(S===d)return ue(x),r;S=S.sibling}throw Error(y(188))}if(l.return!==d.return)l=x,d=S;else{for(var M=!1,A=x.child;A;){if(A===l){M=!0,l=x,d=S;break}if(A===d){M=!0,d=x,l=S;break}A=A.sibling}if(!M){for(A=S.child;A;){if(A===l){M=!0,l=S,d=x;break}if(A===d){M=!0,d=S,l=x;break}A=A.sibling}if(!M)throw Error(y(189))}}if(l.alternate!==d)throw Error(y(190))}if(l.tag!==3)throw Error(y(188));return l.stateNode.current===l?e:r}function Ae(e){return e=_e(e),e!==null?Ue(e):null}function Ue(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var r=Ue(e);if(r!==null)return r;e=e.sibling}return null}var $e=p.unstable_scheduleCallback,ft=p.unstable_cancelCallback,ct=p.unstable_shouldYield,vt=p.unstable_requestPaint,ot=p.unstable_now,qt=p.unstable_getCurrentPriorityLevel,Wt=p.unstable_ImmediatePriority,Zt=p.unstable_UserBlockingPriority,Ut=p.unstable_NormalPriority,Vt=p.unstable_LowPriority,$n=p.unstable_IdlePriority,Ln=null,bn=null;function mr(e){if(bn&&typeof bn.onCommitFiberRoot=="function")try{bn.onCommitFiberRoot(Ln,e,void 0,(e.current.flags&128)===128)}catch{}}var Jr=Math.clz32?Math.clz32:ph,ca=Math.log,vn=Math.LN2;function ph(e){return e>>>=0,e===0?32:31-(ca(e)/vn|0)|0}var Wo=64,al=4194304;function Zo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ua(e,r){var l=e.pendingLanes;if(l===0)return 0;var d=0,x=e.suspendedLanes,S=e.pingedLanes,M=l&268435455;if(M!==0){var A=M&~x;A!==0?d=Zo(A):(S&=M,S!==0&&(d=Zo(S)))}else M=l&~x,M!==0?d=Zo(M):S!==0&&(d=Zo(S));if(d===0)return 0;if(r!==0&&r!==d&&(r&x)===0&&(x=d&-d,S=r&-r,x>=S||x===16&&(S&4194240)!==0))return r;if((d&4)!==0&&(d|=l&16),r=e.entangledLanes,r!==0)for(e=e.entanglements,r&=d;0<r;)l=31-Jr(r),x=1<<l,d|=e[l],r&=~x;return d}function cc(e,r){switch(e){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uc(e,r){for(var l=e.suspendedLanes,d=e.pingedLanes,x=e.expirationTimes,S=e.pendingLanes;0<S;){var M=31-Jr(S),A=1<<M,L=x[M];L===-1?((A&l)===0||(A&d)!==0)&&(x[M]=cc(A,r)):L<=r&&(e.expiredLanes|=A),S&=~A}}function ha(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function hc(){var e=Wo;return Wo<<=1,(Wo&4194240)===0&&(Wo=64),e}function ll(e){for(var r=[],l=0;31>l;l++)r.push(e);return r}function xi(e,r,l){e.pendingLanes|=r,r!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,r=31-Jr(r),e[r]=l}function cl(e,r){var l=e.pendingLanes&~r;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=r,e.mutableReadLanes&=r,e.entangledLanes&=r,r=e.entanglements;var d=e.eventTimes;for(e=e.expirationTimes;0<l;){var x=31-Jr(l),S=1<<x;r[x]=0,d[x]=-1,e[x]=-1,l&=~S}}function po(e,r){var l=e.entangledLanes|=r;for(e=e.entanglements;l;){var d=31-Jr(l),x=1<<d;x&r|e[d]&r&&(e[d]|=r),l&=~x}}var fn=0;function da(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var pa,Xo,fa,ws,zn,Ko=!1,bs=[],qi=null,Wi=null,_i=null,Jo=new Map,ma=new Map,fo=[],dc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ul(e,r){switch(e){case"focusin":case"focusout":qi=null;break;case"dragenter":case"dragleave":Wi=null;break;case"mouseover":case"mouseout":_i=null;break;case"pointerover":case"pointerout":Jo.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":ma.delete(r.pointerId)}}function Yo(e,r,l,d,x,S){return e===null||e.nativeEvent!==S?(e={blockedOn:r,domEventName:l,eventSystemFlags:d,nativeEvent:S,targetContainers:[x]},r!==null&&(r=z(r),r!==null&&Xo(r)),e):(e.eventSystemFlags|=d,r=e.targetContainers,x!==null&&r.indexOf(x)===-1&&r.push(x),e)}function pc(e,r,l,d,x){switch(r){case"focusin":return qi=Yo(qi,e,r,l,d,x),!0;case"dragenter":return Wi=Yo(Wi,e,r,l,d,x),!0;case"mouseover":return _i=Yo(_i,e,r,l,d,x),!0;case"pointerover":var S=x.pointerId;return Jo.set(S,Yo(Jo.get(S)||null,e,r,l,d,x)),!0;case"gotpointercapture":return S=x.pointerId,ma.set(S,Yo(ma.get(S)||null,e,r,l,d,x)),!0}return!1}function fc(e){var r=I(e.target);if(r!==null){var l=me(r);if(l!==null){if(r=l.tag,r===13){if(r=fe(l),r!==null){e.blockedOn=r,zn(e.priority,function(){fa(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){e.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}e.blockedOn=null}function un(e){if(e.blockedOn!==null)return!1;for(var r=e.targetContainers;0<r.length;){var l=ks(e.domEventName,e.eventSystemFlags,r[0],e.nativeEvent);if(l===null){l=e.nativeEvent;var d=new l.constructor(l.type,l);Rt=d,l.target.dispatchEvent(d),Rt=null}else return r=z(l),r!==null&&Xo(r),e.blockedOn=l,!1;r.shift()}return!0}function du(e,r,l){un(e)&&l.delete(r)}function ga(){Ko=!1,qi!==null&&un(qi)&&(qi=null),Wi!==null&&un(Wi)&&(Wi=null),_i!==null&&un(_i)&&(_i=null),Jo.forEach(du),ma.forEach(du)}function Zi(e,r){e.blockedOn===r&&(e.blockedOn=null,Ko||(Ko=!0,p.unstable_scheduleCallback(p.unstable_NormalPriority,ga)))}function Ss(e){function r(x){return Zi(x,e)}if(0<bs.length){Zi(bs[0],e);for(var l=1;l<bs.length;l++){var d=bs[l];d.blockedOn===e&&(d.blockedOn=null)}}for(qi!==null&&Zi(qi,e),Wi!==null&&Zi(Wi,e),_i!==null&&Zi(_i,e),Jo.forEach(r),ma.forEach(r),l=0;l<fo.length;l++)d=fo[l],d.blockedOn===e&&(d.blockedOn=null);for(;0<fo.length&&(l=fo[0],l.blockedOn===null);)fc(l),l.blockedOn===null&&fo.shift()}var cr=Be.ReactCurrentBatchConfig,Es=!0;function hl(e,r,l,d){var x=fn,S=cr.transition;cr.transition=null;try{fn=1,ya(e,r,l,d)}finally{fn=x,cr.transition=S}}function dl(e,r,l,d){var x=fn,S=cr.transition;cr.transition=null;try{fn=4,ya(e,r,l,d)}finally{fn=x,cr.transition=S}}function ya(e,r,l,d){if(Es){var x=ks(e,r,l,d);if(x===null)Al(e,r,d,Ts,l),ul(e,d);else if(pc(x,e,r,l,d))d.stopPropagation();else if(ul(e,d),r&4&&-1<dc.indexOf(e)){for(;x!==null;){var S=z(x);if(S!==null&&pa(S),S=ks(e,r,l,d),S===null&&Al(e,r,d,Ts,l),S===x)break;x=S}x!==null&&d.stopPropagation()}else Al(e,r,d,null,l)}}var Ts=null;function ks(e,r,l,d){if(Ts=null,e=tr(d),e=I(e),e!==null)if(r=me(e),r===null)e=null;else if(l=r.tag,l===13){if(e=fe(r),e!==null)return e;e=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;e=null}else r!==e&&(e=null);return Ts=e,null}function pl(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qt()){case Wt:return 1;case Zt:return 4;case Ut:case Vt:return 16;case $n:return 536870912;default:return 16}default:return 16}}var Di=null,Ms=null,va=null;function mc(){if(va)return va;var e,r=Ms,l=r.length,d,x="value"in Di?Di.value:Di.textContent,S=x.length;for(e=0;e<l&&r[e]===x[e];e++);var M=l-e;for(d=1;d<=M&&r[l-d]===x[S-d];d++);return va=x.slice(e,1<d?1-d:void 0)}function Xi(e){var r=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&r===13&&(e=13)):e=r,e===10&&(e=13),32<=e||e===13?e:0}function fl(){return!0}function pu(){return!1}function Yr(e){function r(l,d,x,S,M){this._reactName=l,this._targetInst=x,this.type=d,this.nativeEvent=S,this.target=M,this.currentTarget=null;for(var A in e)e.hasOwnProperty(A)&&(l=e[A],this[A]=l?l(S):S[A]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?fl:pu,this.isPropagationStopped=pu,this}return rt(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=fl)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=fl)},persist:function(){},isPersistent:fl}),r}var Cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gc=Yr(Cs),xa=rt({},Cs,{view:0,detail:0}),yc=Yr(xa),Ps,_a,Qo,Ki=rt({},xa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qo&&(Qo&&e.type==="mousemove"?(Ps=e.screenX-Qo.screenX,_a=e.screenY-Qo.screenY):_a=Ps=0,Qo=e),Ps)},movementY:function(e){return"movementY"in e?e.movementY:_a}}),vc=Yr(Ki),fu=rt({},Ki,{dataTransfer:0}),xc=Yr(fu),mo=rt({},xa,{relatedTarget:0}),ml=Yr(mo),Is=rt({},Cs,{animationName:0,elapsedTime:0,pseudoElement:0}),As=Yr(Is),Un=rt({},Cs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_c=Yr(Un),yt=rt({},Cs,{data:0}),es=Yr(yt),Dn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},go={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mu(e){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(e):(e=go[e])?!!r[e]:!1}function wc(){return mu}var gu=rt({},xa,{key:function(e){if(e.key){var r=Dn[e.key]||e.key;if(r!=="Unidentified")return r}return e.type==="keypress"?(e=Xi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Mn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wc,charCode:function(e){return e.type==="keypress"?Xi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),fh=Yr(gu),bc=rt({},Ki,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ls=Yr(bc),wa=rt({},xa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wc}),gl=Yr(wa),ba=rt({},Cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),yu=Yr(ba),yl=rt({},Ki,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),vl=Yr(yl),wi=[9,13,27,32],xl=c&&"CompositionEvent"in window,ts=null;c&&"documentMode"in document&&(ts=document.documentMode);var vu=c&&"TextEvent"in window&&!ts,ns=c&&(!xl||ts&&8<ts&&11>=ts),zs=" ",Sa=!1;function Ea(e,r){switch(e){case"keyup":return wi.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _l(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var rs=!1;function Sc(e,r){switch(e){case"compositionend":return _l(r);case"keypress":return r.which!==32?null:(Sa=!0,zs);case"textInput":return e=r.data,e===zs&&Sa?null:e;default:return null}}function wl(e,r){if(rs)return e==="compositionend"||!xl&&Ea(e,r)?(e=mc(),va=Ms=Di=null,rs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return ns&&r.locale!=="ko"?null:r.data;default:return null}}var bl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ec(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r==="input"?!!bl[e.type]:r==="textarea"}function Ta(e,r,l,d){je(d),r=Ll(r,"onChange"),0<r.length&&(l=new gc("onChange","change",null,l,d),e.push({event:l,listeners:r}))}var bi=null,Ji=null;function Sl(e){La(e,0)}function ka(e){var r=N(e);if(Qn(r))return e}function Ma(e,r){if(e==="change")return r}var Tc=!1;if(c){var El;if(c){var yo="oninput"in document;if(!yo){var kc=document.createElement("div");kc.setAttribute("oninput","return;"),yo=typeof kc.oninput=="function"}El=yo}else El=!1;Tc=El&&(!document.documentMode||9<document.documentMode)}function Mc(){bi&&(bi.detachEvent("onpropertychange",Rs),Ji=bi=null)}function Rs(e){if(e.propertyName==="value"&&ka(Ji)){var r=[];Ta(r,Ji,e,tr(e)),Er(Sl,r)}}function Ca(e,r,l){e==="focusin"?(Mc(),bi=r,Ji=l,bi.attachEvent("onpropertychange",Rs)):e==="focusout"&&Mc()}function Qr(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ka(Ji)}function Tr(e,r){if(e==="click")return ka(r)}function mh(e,r){if(e==="input"||e==="change")return ka(r)}function vo(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var li=typeof Object.is=="function"?Object.is:vo;function Si(e,r){if(li(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var l=Object.keys(e),d=Object.keys(r);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var x=l[d];if(!B.call(r,x)||!li(e[x],r[x]))return!1}return!0}function xo(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function xu(e,r){var l=xo(e);e=0;for(var d;l;){if(l.nodeType===3){if(d=e+l.textContent.length,e<=r&&d>=r)return{node:l,offset:r-e};e=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=xo(l)}}function Tl(e,r){return e&&r?e===r?!0:e&&e.nodeType===3?!1:r&&r.nodeType===3?Tl(e,r.parentNode):"contains"in e?e.contains(r):e.compareDocumentPosition?!!(e.compareDocumentPosition(r)&16):!1:!1}function _u(){for(var e=window,r=jn();r instanceof e.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)e=r.contentWindow;else break;r=jn(e.document)}return r}function kl(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r&&(r==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||r==="textarea"||e.contentEditable==="true")}function is(e){var r=_u(),l=e.focusedElem,d=e.selectionRange;if(r!==l&&l&&l.ownerDocument&&Tl(l.ownerDocument.documentElement,l)){if(d!==null&&kl(l)){if(r=d.start,e=d.end,e===void 0&&(e=r),"selectionStart"in l)l.selectionStart=r,l.selectionEnd=Math.min(e,l.value.length);else if(e=(r=l.ownerDocument||document)&&r.defaultView||window,e.getSelection){e=e.getSelection();var x=l.textContent.length,S=Math.min(d.start,x);d=d.end===void 0?S:Math.min(d.end,x),!e.extend&&S>d&&(x=d,d=S,S=x),x=xu(l,S);var M=xu(l,d);x&&M&&(e.rangeCount!==1||e.anchorNode!==x.node||e.anchorOffset!==x.offset||e.focusNode!==M.node||e.focusOffset!==M.offset)&&(r=r.createRange(),r.setStart(x.node,x.offset),e.removeAllRanges(),S>d?(e.addRange(r),e.extend(M.node,M.offset)):(r.setEnd(M.node,M.offset),e.addRange(r)))}}for(r=[],e=l;e=e.parentNode;)e.nodeType===1&&r.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<r.length;l++)e=r[l],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var _o=c&&"documentMode"in document&&11>=document.documentMode,ut=null,Pa=null,Yi=null,Qi=!1;function js(e,r,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Qi||ut==null||ut!==jn(d)||(d=ut,"selectionStart"in d&&kl(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Yi&&Si(Yi,d)||(Yi=d,d=Ll(Pa,"onSelect"),0<d.length&&(r=new gc("onSelect","select",null,r,l),e.push({event:r,listeners:d}),r.target=ut)))}function it(e,r){var l={};return l[e.toLowerCase()]=r.toLowerCase(),l["Webkit"+e]="webkit"+r,l["Moz"+e]="moz"+r,l}var wo={animationend:it("Animation","AnimationEnd"),animationiteration:it("Animation","AnimationIteration"),animationstart:it("Animation","AnimationStart"),transitionend:it("Transition","TransitionEnd")},Ml={},wu={};c&&(wu=document.createElement("div").style,"AnimationEvent"in window||(delete wo.animationend.animation,delete wo.animationiteration.animation,delete wo.animationstart.animation),"TransitionEvent"in window||delete wo.transitionend.transition);function bo(e){if(Ml[e])return Ml[e];if(!wo[e])return e;var r=wo[e],l;for(l in r)if(r.hasOwnProperty(l)&&l in wu)return Ml[e]=r[l];return e}var Cc=bo("animationend"),Pc=bo("animationiteration"),bu=bo("animationstart"),Su=bo("transitionend"),Ia=new Map,Cl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ni(e,r){Ia.set(e,r),T(r,[e])}for(var Aa=0;Aa<Cl.length;Aa++){var kr=Cl[Aa],So=kr.toLowerCase(),Eu=kr[0].toUpperCase()+kr.slice(1);Ni(So,"on"+Eu)}Ni(Cc,"onAnimationEnd"),Ni(Pc,"onAnimationIteration"),Ni(bu,"onAnimationStart"),Ni("dblclick","onDoubleClick"),Ni("focusin","onFocus"),Ni("focusout","onBlur"),Ni(Su,"onTransitionEnd"),C("onMouseEnter",["mouseout","mouseover"]),C("onMouseLeave",["mouseout","mouseover"]),C("onPointerEnter",["pointerout","pointerover"]),C("onPointerLeave",["pointerout","pointerover"]),T("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),T("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),T("onBeforeInput",["compositionend","keypress","textInput","paste"]),T("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),T("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),T("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var os="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ds=new Set("cancel close invalid load scroll toggle".split(" ").concat(os));function Pl(e,r,l){var d=e.type||"unknown-event";e.currentTarget=l,ce(d,r,void 0,e),e.currentTarget=null}function La(e,r){r=(r&4)!==0;for(var l=0;l<e.length;l++){var d=e[l],x=d.event;d=d.listeners;e:{var S=void 0;if(r)for(var M=d.length-1;0<=M;M--){var A=d[M],L=A.instance,V=A.currentTarget;if(A=A.listener,L!==S&&x.isPropagationStopped())break e;Pl(x,A,V),S=L}else for(M=0;M<d.length;M++){if(A=d[M],L=A.instance,V=A.currentTarget,A=A.listener,L!==S&&x.isPropagationStopped())break e;Pl(x,A,V),S=L}}}if(R)throw e=O,R=!1,O=null,e}function hn(e,r){var l=r[b];l===void 0&&(l=r[b]=new Set);var d=e+"__bubble";l.has(d)||(Il(r,e,2,!1),l.add(d))}function En(e,r,l){var d=0;r&&(d|=4),Il(l,e,d,r)}var ss="_reactListening"+Math.random().toString(36).slice(2);function Eo(e){if(!e[ss]){e[ss]=!0,_.forEach(function(l){l!=="selectionchange"&&(Ds.has(l)||En(l,!1,e),En(l,!0,e))});var r=e.nodeType===9?e:e.ownerDocument;r===null||r[ss]||(r[ss]=!0,En("selectionchange",!1,r))}}function Il(e,r,l,d){switch(pl(r)){case 1:var x=hl;break;case 4:x=dl;break;default:x=ya}l=x.bind(null,r,l,e),x=void 0,!vi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(x=!0),d?x!==void 0?e.addEventListener(r,l,{capture:!0,passive:x}):e.addEventListener(r,l,!0):x!==void 0?e.addEventListener(r,l,{passive:x}):e.addEventListener(r,l,!1)}function Al(e,r,l,d,x){var S=d;if((r&1)===0&&(r&2)===0&&d!==null)e:for(;;){if(d===null)return;var M=d.tag;if(M===3||M===4){var A=d.stateNode.containerInfo;if(A===x||A.nodeType===8&&A.parentNode===x)break;if(M===4)for(M=d.return;M!==null;){var L=M.tag;if((L===3||L===4)&&(L=M.stateNode.containerInfo,L===x||L.nodeType===8&&L.parentNode===x))return;M=M.return}for(;A!==null;){if(M=I(A),M===null)return;if(L=M.tag,L===5||L===6){d=S=M;continue e}A=A.parentNode}}d=d.return}Er(function(){var V=S,q=tr(l),ee=[];e:{var ae=Ia.get(e);if(ae!==void 0){var se=gc,ge=e;switch(e){case"keypress":if(Xi(l)===0)break e;case"keydown":case"keyup":se=fh;break;case"focusin":ge="focus",se=ml;break;case"focusout":ge="blur",se=ml;break;case"beforeblur":case"afterblur":se=ml;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=vc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=xc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=gl;break;case Cc:case Pc:case bu:se=As;break;case Su:se=yu;break;case"scroll":se=yc;break;case"wheel":se=vl;break;case"copy":case"cut":case"paste":se=_c;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=Ls}var Ee=(r&4)!==0,Re=!Ee&&e==="scroll",de=Ee?ae!==null?ae+"Capture":null:ae;Ee=[];for(var oe=V,he;oe!==null;){he=oe;var Te=he.stateNode;if(he.tag===5&&Te!==null&&(he=Te,de!==null&&(Te=ai(oe,de),Te!=null&&Ee.push(Ns(oe,Te,he)))),Re)break;oe=oe.return}0<Ee.length&&(ae=new se(ae,ge,null,l,q),ee.push({event:ae,listeners:Ee}))}}if((r&7)===0){e:{if(ae=e==="mouseover"||e==="pointerover",se=e==="mouseout"||e==="pointerout",ae&&l!==Rt&&(ge=l.relatedTarget||l.fromElement)&&(I(ge)||ge[m]))break e;if((se||ae)&&(ae=q.window===q?q:(ae=q.ownerDocument)?ae.defaultView||ae.parentWindow:window,se?(ge=l.relatedTarget||l.toElement,se=V,ge=ge?I(ge):null,ge!==null&&(Re=me(ge),ge!==Re||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(se=null,ge=V),se!==ge)){if(Ee=vc,Te="onMouseLeave",de="onMouseEnter",oe="mouse",(e==="pointerout"||e==="pointerover")&&(Ee=Ls,Te="onPointerLeave",de="onPointerEnter",oe="pointer"),Re=se==null?ae:N(se),he=ge==null?ae:N(ge),ae=new Ee(Te,oe+"leave",se,l,q),ae.target=Re,ae.relatedTarget=he,Te=null,I(q)===V&&(Ee=new Ee(de,oe+"enter",ge,l,q),Ee.target=he,Ee.relatedTarget=Re,Te=Ee),Re=Te,se&&ge)t:{for(Ee=se,de=ge,oe=0,he=Ee;he;he=Or(he))oe++;for(he=0,Te=de;Te;Te=Or(Te))he++;for(;0<oe-he;)Ee=Or(Ee),oe--;for(;0<he-oe;)de=Or(de),he--;for(;oe--;){if(Ee===de||de!==null&&Ee===de.alternate)break t;Ee=Or(Ee),de=Or(de)}Ee=null}else Ee=null;se!==null&&za(ee,ae,se,Ee,!1),ge!==null&&Re!==null&&za(ee,Re,ge,Ee,!0)}}e:{if(ae=V?N(V):window,se=ae.nodeName&&ae.nodeName.toLowerCase(),se==="select"||se==="input"&&ae.type==="file")var Ie=Ma;else if(Ec(ae))if(Tc)Ie=mh;else{Ie=Qr;var Fe=Ca}else(se=ae.nodeName)&&se.toLowerCase()==="input"&&(ae.type==="checkbox"||ae.type==="radio")&&(Ie=Tr);if(Ie&&(Ie=Ie(e,V))){Ta(ee,Ie,l,q);break e}Fe&&Fe(e,ae,V),e==="focusout"&&(Fe=ae._wrapperState)&&Fe.controlled&&ae.type==="number"&&dt(ae,"number",ae.value)}switch(Fe=V?N(V):window,e){case"focusin":(Ec(Fe)||Fe.contentEditable==="true")&&(ut=Fe,Pa=V,Yi=null);break;case"focusout":Yi=Pa=ut=null;break;case"mousedown":Qi=!0;break;case"contextmenu":case"mouseup":case"dragend":Qi=!1,js(ee,l,q);break;case"selectionchange":if(_o)break;case"keydown":case"keyup":js(ee,l,q)}var Ne;if(xl)e:{switch(e){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else rs?Ea(e,l)&&(Ce="onCompositionEnd"):e==="keydown"&&l.keyCode===229&&(Ce="onCompositionStart");Ce&&(ns&&l.locale!=="ko"&&(rs||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&rs&&(Ne=mc()):(Di=q,Ms="value"in Di?Di.value:Di.textContent,rs=!0)),Fe=Ll(V,Ce),0<Fe.length&&(Ce=new es(Ce,e,null,l,q),ee.push({event:Ce,listeners:Fe}),Ne?Ce.data=Ne:(Ne=_l(l),Ne!==null&&(Ce.data=Ne)))),(Ne=vu?Sc(e,l):wl(e,l))&&(V=Ll(V,"onBeforeInput"),0<V.length&&(q=new es("onBeforeInput","beforeinput",null,l,q),ee.push({event:q,listeners:V}),q.data=Ne))}La(ee,r)})}function Ns(e,r,l){return{instance:e,listener:r,currentTarget:l}}function Ll(e,r){for(var l=r+"Capture",d=[];e!==null;){var x=e,S=x.stateNode;x.tag===5&&S!==null&&(x=S,S=ai(e,l),S!=null&&d.unshift(Ns(e,S,x)),S=ai(e,r),S!=null&&d.push(Ns(e,S,x))),e=e.return}return d}function Or(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function za(e,r,l,d,x){for(var S=r._reactName,M=[];l!==null&&l!==d;){var A=l,L=A.alternate,V=A.stateNode;if(L!==null&&L===d)break;A.tag===5&&V!==null&&(A=V,x?(L=ai(l,S),L!=null&&M.unshift(Ns(l,L,A))):x||(L=ai(l,S),L!=null&&M.push(Ns(l,L,A)))),l=l.return}M.length!==0&&e.push({event:r,listeners:M})}var xt=/\r\n?/g,kt=/\u0000|\uFFFD/g;function Bs(e){return(typeof e=="string"?e:""+e).replace(xt,`
`).replace(kt,"")}function To(e,r,l){if(r=Bs(r),Bs(e)!==r&&l)throw Error(y(425))}function Fs(){}var Xn=null,eo=null;function Mr(e,r){return e==="textarea"||e==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Ic=typeof setTimeout=="function"?setTimeout:void 0,Ra=typeof clearTimeout=="function"?clearTimeout:void 0,Tn=typeof Promise=="function"?Promise:void 0,nr=typeof queueMicrotask=="function"?queueMicrotask:typeof Tn<"u"?function(e){return Tn.resolve(null).then(e).catch(Tu)}:Ic;function Tu(e){setTimeout(function(){throw e})}function ko(e,r){var l=r,d=0;do{var x=l.nextSibling;if(e.removeChild(l),x&&x.nodeType===8)if(l=x.data,l==="/$"){if(d===0){e.removeChild(x),Ss(r);return}d--}else l!=="$"&&l!=="$?"&&l!=="$!"||d++;l=x}while(l);Ss(r)}function ci(e){for(;e!=null;e=e.nextSibling){var r=e.nodeType;if(r===1||r===3)break;if(r===8){if(r=e.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return e}function f(e){e=e.previousSibling;for(var r=0;e;){if(e.nodeType===8){var l=e.data;if(l==="$"||l==="$!"||l==="$?"){if(r===0)return e;r--}else l==="/$"&&r++}e=e.previousSibling}return null}var n=Math.random().toString(36).slice(2),s="__reactFiber$"+n,h="__reactProps$"+n,m="__reactContainer$"+n,b="__reactEvents$"+n,k="__reactListeners$"+n,P="__reactHandles$"+n;function I(e){var r=e[s];if(r)return r;for(var l=e.parentNode;l;){if(r=l[m]||l[s]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(e=f(e);e!==null;){if(l=e[s])return l;e=f(e)}return r}e=l,l=e.parentNode}return null}function z(e){return e=e[s]||e[m],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function N(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(y(33))}function U(e){return e[h]||null}var H=[],Q=-1;function K(e){return{current:e}}function X(e){0>Q||(e.current=H[Q],H[Q]=null,Q--)}function le(e,r){Q++,H[Q]=e.current,e.current=r}var xe={},be=K(xe),re=K(!1),Me=xe;function ke(e,r){var l=e.type.contextTypes;if(!l)return xe;var d=e.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===r)return d.__reactInternalMemoizedMaskedChildContext;var x={},S;for(S in l)x[S]=r[S];return d&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=x),x}function Pe(e){return e=e.childContextTypes,e!=null}function De(){X(re),X(be)}function Ge(e,r,l){if(be.current!==xe)throw Error(y(168));le(be,r),le(re,l)}function ze(e,r,l){var d=e.stateNode;if(r=r.childContextTypes,typeof d.getChildContext!="function")return l;d=d.getChildContext();for(var x in d)if(!(x in r))throw Error(y(108,Kt(e)||"Unknown",x));return rt({},l,d)}function lt(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||xe,Me=be.current,le(be,e),le(re,re.current),!0}function nt(e,r,l){var d=e.stateNode;if(!d)throw Error(y(169));l?(e=ze(e,r,Me),d.__reactInternalMemoizedMergedChildContext=e,X(re),X(be),le(be,e)):X(re),le(re,l)}var st=null,jt=!1,Gt=!1;function Et(e){st===null?st=[e]:st.push(e)}function xn(e){jt=!0,Et(e)}function nn(){if(!Gt&&st!==null){Gt=!0;var e=0,r=fn;try{var l=st;for(fn=1;e<l.length;e++){var d=l[e];do d=d(!0);while(d!==null)}st=null,jt=!1}catch(x){throw st!==null&&(st=st.slice(e+1)),$e(Wt,nn),x}finally{fn=r,Gt=!1}}return null}var Qt=[],en=0,rn=null,Cr=0,Kn=[],Vn=0,gr=null,$r=1,Rn="";function yr(e,r){Qt[en++]=Cr,Qt[en++]=rn,rn=e,Cr=r}function Mo(e,r,l){Kn[Vn++]=$r,Kn[Vn++]=Rn,Kn[Vn++]=gr,gr=e;var d=$r;e=Rn;var x=32-Jr(d)-1;d&=~(1<<x),l+=1;var S=32-Jr(r)+x;if(30<S){var M=x-x%5;S=(d&(1<<M)-1).toString(32),d>>=M,x-=M,$r=1<<32-Jr(r)+x|l<<x|d,Rn=S+e}else $r=1<<S|l<<x|d,Rn=e}function Os(e){e.return!==null&&(yr(e,1),Mo(e,1,0))}function cn(e){for(;e===rn;)rn=Qt[--en],Qt[en]=null,Cr=Qt[--en],Qt[en]=null;for(;e===gr;)gr=Kn[--Vn],Kn[Vn]=null,Rn=Kn[--Vn],Kn[Vn]=null,$r=Kn[--Vn],Kn[Vn]=null}var on=null,Ht=null,Jt=!1,Nn=null;function Cn(e,r){var l=Rr(5,null,null,0);l.elementType="DELETED",l.stateNode=r,l.return=e,r=e.deletions,r===null?(e.deletions=[l],e.flags|=16):r.push(l)}function ei(e,r){switch(e.tag){case 5:var l=e.type;return r=r.nodeType!==1||l.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(e.stateNode=r,on=e,Ht=ci(r.firstChild),!0):!1;case 6:return r=e.pendingProps===""||r.nodeType!==3?null:r,r!==null?(e.stateNode=r,on=e,Ht=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(l=gr!==null?{id:$r,overflow:Rn}:null,e.memoizedState={dehydrated:r,treeContext:l,retryLane:1073741824},l=Rr(18,null,null,0),l.stateNode=r,l.return=e,e.child=l,on=e,Ht=null,!0):!1;default:return!1}}function Co(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Po(e){if(Jt){var r=Ht;if(r){var l=r;if(!ei(e,r)){if(Co(e))throw Error(y(418));r=ci(l.nextSibling);var d=on;r&&ei(e,r)?Cn(d,l):(e.flags=e.flags&-4097|2,Jt=!1,on=e)}}else{if(Co(e))throw Error(y(418));e.flags=e.flags&-4097|2,Jt=!1,on=e}}}function ja(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;on=e}function $s(e){if(e!==on)return!1;if(!Jt)return ja(e),Jt=!0,!1;var r;if((r=e.tag!==3)&&!(r=e.tag!==5)&&(r=e.type,r=r!=="head"&&r!=="body"&&!Mr(e.type,e.memoizedProps)),r&&(r=Ht)){if(Co(e))throw Da(),Error(y(418));for(;r;)Cn(e,r),r=ci(r.nextSibling)}if(ja(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(y(317));e:{for(e=e.nextSibling,r=0;e;){if(e.nodeType===8){var l=e.data;if(l==="/$"){if(r===0){Ht=ci(e.nextSibling);break e}r--}else l!=="$"&&l!=="$!"&&l!=="$?"||r++}e=e.nextSibling}Ht=null}}else Ht=on?ci(e.stateNode.nextSibling):null;return!0}function Da(){for(var e=Ht;e;)e=ci(e.nextSibling)}function Pr(){Ht=on=null,Jt=!1}function Us(e){Nn===null?Nn=[e]:Nn.push(e)}var Na=Be.ReactCurrentBatchConfig;function Io(e,r,l){if(e=l.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(y(309));var d=l.stateNode}if(!d)throw Error(y(147,e));var x=d,S=""+e;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===S?r.ref:(r=function(M){var A=x.refs;M===null?delete A[S]:A[S]=M},r._stringRef=S,r)}if(typeof e!="string")throw Error(y(284));if(!l._owner)throw Error(y(290,e))}return e}function ku(e,r){throw e=Object.prototype.toString.call(r),Error(y(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e))}function Mu(e){var r=e._init;return r(e._payload)}function zl(e){function r(de,oe){if(e){var he=de.deletions;he===null?(de.deletions=[oe],de.flags|=16):he.push(oe)}}function l(de,oe){if(!e)return null;for(;oe!==null;)r(de,oe),oe=oe.sibling;return null}function d(de,oe){for(de=new Map;oe!==null;)oe.key!==null?de.set(oe.key,oe):de.set(oe.index,oe),oe=oe.sibling;return de}function x(de,oe){return de=ms(de,oe),de.index=0,de.sibling=null,de}function S(de,oe,he){return de.index=he,e?(he=de.alternate,he!==null?(he=he.index,he<oe?(de.flags|=2,oe):he):(de.flags|=2,oe)):(de.flags|=1048576,oe)}function M(de){return e&&de.alternate===null&&(de.flags|=2),de}function A(de,oe,he,Te){return oe===null||oe.tag!==6?(oe=nc(he,de.mode,Te),oe.return=de,oe):(oe=x(oe,he),oe.return=de,oe)}function L(de,oe,he,Te){var Ie=he.type;return Ie===Je?q(de,oe,he.props.children,Te,he.key):oe!==null&&(oe.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===Ze&&Mu(Ie)===oe.type)?(Te=x(oe,he.props),Te.ref=Io(de,oe,he),Te.return=de,Te):(Te=Jc(he.type,he.key,he.props,null,de.mode,Te),Te.ref=Io(de,oe,he),Te.return=de,Te)}function V(de,oe,he,Te){return oe===null||oe.tag!==4||oe.stateNode.containerInfo!==he.containerInfo||oe.stateNode.implementation!==he.implementation?(oe=Yu(he,de.mode,Te),oe.return=de,oe):(oe=x(oe,he.children||[]),oe.return=de,oe)}function q(de,oe,he,Te,Ie){return oe===null||oe.tag!==7?(oe=ta(he,de.mode,Te,Ie),oe.return=de,oe):(oe=x(oe,he),oe.return=de,oe)}function ee(de,oe,he){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return oe=nc(""+oe,de.mode,he),oe.return=de,oe;if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case Se:return he=Jc(oe.type,oe.key,oe.props,null,de.mode,he),he.ref=Io(de,null,oe),he.return=de,he;case Ke:return oe=Yu(oe,de.mode,he),oe.return=de,oe;case Ze:var Te=oe._init;return ee(de,Te(oe._payload),he)}if(tn(oe)||at(oe))return oe=ta(oe,de.mode,he,null),oe.return=de,oe;ku(de,oe)}return null}function ae(de,oe,he,Te){var Ie=oe!==null?oe.key:null;if(typeof he=="string"&&he!==""||typeof he=="number")return Ie!==null?null:A(de,oe,""+he,Te);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case Se:return he.key===Ie?L(de,oe,he,Te):null;case Ke:return he.key===Ie?V(de,oe,he,Te):null;case Ze:return Ie=he._init,ae(de,oe,Ie(he._payload),Te)}if(tn(he)||at(he))return Ie!==null?null:q(de,oe,he,Te,null);ku(de,he)}return null}function se(de,oe,he,Te,Ie){if(typeof Te=="string"&&Te!==""||typeof Te=="number")return de=de.get(he)||null,A(oe,de,""+Te,Ie);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case Se:return de=de.get(Te.key===null?he:Te.key)||null,L(oe,de,Te,Ie);case Ke:return de=de.get(Te.key===null?he:Te.key)||null,V(oe,de,Te,Ie);case Ze:var Fe=Te._init;return se(de,oe,he,Fe(Te._payload),Ie)}if(tn(Te)||at(Te))return de=de.get(he)||null,q(oe,de,Te,Ie,null);ku(oe,Te)}return null}function ge(de,oe,he,Te){for(var Ie=null,Fe=null,Ne=oe,Ce=oe=0,ht=null;Ne!==null&&Ce<he.length;Ce++){Ne.index>Ce?(ht=Ne,Ne=null):ht=Ne.sibling;var Ye=ae(de,Ne,he[Ce],Te);if(Ye===null){Ne===null&&(Ne=ht);break}e&&Ne&&Ye.alternate===null&&r(de,Ne),oe=S(Ye,oe,Ce),Fe===null?Ie=Ye:Fe.sibling=Ye,Fe=Ye,Ne=ht}if(Ce===he.length)return l(de,Ne),Jt&&yr(de,Ce),Ie;if(Ne===null){for(;Ce<he.length;Ce++)Ne=ee(de,he[Ce],Te),Ne!==null&&(oe=S(Ne,oe,Ce),Fe===null?Ie=Ne:Fe.sibling=Ne,Fe=Ne);return Jt&&yr(de,Ce),Ie}for(Ne=d(de,Ne);Ce<he.length;Ce++)ht=se(Ne,de,Ce,he[Ce],Te),ht!==null&&(e&&ht.alternate!==null&&Ne.delete(ht.key===null?Ce:ht.key),oe=S(ht,oe,Ce),Fe===null?Ie=ht:Fe.sibling=ht,Fe=ht);return e&&Ne.forEach(function(Dt){return r(de,Dt)}),Jt&&yr(de,Ce),Ie}function Ee(de,oe,he,Te){var Ie=at(he);if(typeof Ie!="function")throw Error(y(150));if(he=Ie.call(he),he==null)throw Error(y(151));for(var Fe=Ie=null,Ne=oe,Ce=oe=0,ht=null,Ye=he.next();Ne!==null&&!Ye.done;Ce++,Ye=he.next()){Ne.index>Ce?(ht=Ne,Ne=null):ht=Ne.sibling;var Dt=ae(de,Ne,Ye.value,Te);if(Dt===null){Ne===null&&(Ne=ht);break}e&&Ne&&Dt.alternate===null&&r(de,Ne),oe=S(Dt,oe,Ce),Fe===null?Ie=Dt:Fe.sibling=Dt,Fe=Dt,Ne=ht}if(Ye.done)return l(de,Ne),Jt&&yr(de,Ce),Ie;if(Ne===null){for(;!Ye.done;Ce++,Ye=he.next())Ye=ee(de,Ye.value,Te),Ye!==null&&(oe=S(Ye,oe,Ce),Fe===null?Ie=Ye:Fe.sibling=Ye,Fe=Ye);return Jt&&yr(de,Ce),Ie}for(Ne=d(de,Ne);!Ye.done;Ce++,Ye=he.next())Ye=se(Ne,de,Ce,Ye.value,Te),Ye!==null&&(e&&Ye.alternate!==null&&Ne.delete(Ye.key===null?Ce:Ye.key),oe=S(Ye,oe,Ce),Fe===null?Ie=Ye:Fe.sibling=Ye,Fe=Ye);return e&&Ne.forEach(function(Pn){return r(de,Pn)}),Jt&&yr(de,Ce),Ie}function Re(de,oe,he,Te){if(typeof he=="object"&&he!==null&&he.type===Je&&he.key===null&&(he=he.props.children),typeof he=="object"&&he!==null){switch(he.$$typeof){case Se:e:{for(var Ie=he.key,Fe=oe;Fe!==null;){if(Fe.key===Ie){if(Ie=he.type,Ie===Je){if(Fe.tag===7){l(de,Fe.sibling),oe=x(Fe,he.props.children),oe.return=de,de=oe;break e}}else if(Fe.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===Ze&&Mu(Ie)===Fe.type){l(de,Fe.sibling),oe=x(Fe,he.props),oe.ref=Io(de,Fe,he),oe.return=de,de=oe;break e}l(de,Fe);break}else r(de,Fe);Fe=Fe.sibling}he.type===Je?(oe=ta(he.props.children,de.mode,Te,he.key),oe.return=de,de=oe):(Te=Jc(he.type,he.key,he.props,null,de.mode,Te),Te.ref=Io(de,oe,he),Te.return=de,de=Te)}return M(de);case Ke:e:{for(Fe=he.key;oe!==null;){if(oe.key===Fe)if(oe.tag===4&&oe.stateNode.containerInfo===he.containerInfo&&oe.stateNode.implementation===he.implementation){l(de,oe.sibling),oe=x(oe,he.children||[]),oe.return=de,de=oe;break e}else{l(de,oe);break}else r(de,oe);oe=oe.sibling}oe=Yu(he,de.mode,Te),oe.return=de,de=oe}return M(de);case Ze:return Fe=he._init,Re(de,oe,Fe(he._payload),Te)}if(tn(he))return ge(de,oe,he,Te);if(at(he))return Ee(de,oe,he,Te);ku(de,he)}return typeof he=="string"&&he!==""||typeof he=="number"?(he=""+he,oe!==null&&oe.tag===6?(l(de,oe.sibling),oe=x(oe,he),oe.return=de,de=oe):(l(de,oe),oe=nc(he,de.mode,Te),oe.return=de,de=oe),M(de)):l(de,oe)}return Re}var to=zl(!0),Ao=zl(!1),ui=K(null),no=null,Ba=null,as=null;function gh(){as=Ba=no=null}function Cu(e){var r=ui.current;X(ui),e._currentValue=r}function Jn(e,r,l){for(;e!==null;){var d=e.alternate;if((e.childLanes&r)!==r?(e.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),e===l)break;e=e.return}}function Vs(e,r){no=e,as=Ba=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&r)!==0&&(hi=!0),e.firstContext=null)}function Ei(e){var r=e._currentValue;if(as!==e)if(e={context:e,memoizedValue:r,next:null},Ba===null){if(no===null)throw Error(y(308));Ba=e,no.dependencies={lanes:0,firstContext:e}}else Ba=Ba.next=e;return r}var Ti=null;function ls(e){Ti===null?Ti=[e]:Ti.push(e)}function Ac(e,r,l,d){var x=r.interleaved;return x===null?(l.next=l,ls(r)):(l.next=x.next,x.next=l),r.interleaved=l,ro(e,d)}function ro(e,r){e.lanes|=r;var l=e.alternate;for(l!==null&&(l.lanes|=r),l=e,e=e.return;e!==null;)e.childLanes|=r,l=e.alternate,l!==null&&(l.childLanes|=r),l=e,e=e.return;return l.tag===3?l.stateNode:null}var cs=!1;function yh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vh(e,r){e=e.updateQueue,r.updateQueue===e&&(r.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function us(e,r){return{eventTime:e,lane:r,tag:0,payload:null,callback:null,next:null}}function Lo(e,r,l){var d=e.updateQueue;if(d===null)return null;if(d=d.shared,(yn&2)!==0){var x=d.pending;return x===null?r.next=r:(r.next=x.next,x.next=r),d.pending=r,ro(e,l)}return x=d.interleaved,x===null?(r.next=r,ls(d)):(r.next=x.next,x.next=r),d.interleaved=r,ro(e,l)}function Pu(e,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194240)!==0)){var d=r.lanes;d&=e.pendingLanes,l|=d,r.lanes=l,po(e,l)}}function Iu(e,r){var l=e.updateQueue,d=e.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var x=null,S=null;if(l=l.firstBaseUpdate,l!==null){do{var M={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};S===null?x=S=M:S=S.next=M,l=l.next}while(l!==null);S===null?x=S=r:S=S.next=r}else x=S=r;l={baseState:d.baseState,firstBaseUpdate:x,lastBaseUpdate:S,shared:d.shared,effects:d.effects},e.updateQueue=l;return}e=l.lastBaseUpdate,e===null?l.firstBaseUpdate=r:e.next=r,l.lastBaseUpdate=r}function Lc(e,r,l,d){var x=e.updateQueue;cs=!1;var S=x.firstBaseUpdate,M=x.lastBaseUpdate,A=x.shared.pending;if(A!==null){x.shared.pending=null;var L=A,V=L.next;L.next=null,M===null?S=V:M.next=V,M=L;var q=e.alternate;q!==null&&(q=q.updateQueue,A=q.lastBaseUpdate,A!==M&&(A===null?q.firstBaseUpdate=V:A.next=V,q.lastBaseUpdate=L))}if(S!==null){var ee=x.baseState;M=0,q=V=L=null,A=S;do{var ae=A.lane,se=A.eventTime;if((d&ae)===ae){q!==null&&(q=q.next={eventTime:se,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var ge=e,Ee=A;switch(ae=r,se=l,Ee.tag){case 1:if(ge=Ee.payload,typeof ge=="function"){ee=ge.call(se,ee,ae);break e}ee=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Ee.payload,ae=typeof ge=="function"?ge.call(se,ee,ae):ge,ae==null)break e;ee=rt({},ee,ae);break e;case 2:cs=!0}}A.callback!==null&&A.lane!==0&&(e.flags|=64,ae=x.effects,ae===null?x.effects=[A]:ae.push(A))}else se={eventTime:se,lane:ae,tag:A.tag,payload:A.payload,callback:A.callback,next:null},q===null?(V=q=se,L=ee):q=q.next=se,M|=ae;if(A=A.next,A===null){if(A=x.shared.pending,A===null)break;ae=A,A=ae.next,ae.next=null,x.lastBaseUpdate=ae,x.shared.pending=null}}while(!0);if(q===null&&(L=ee),x.baseState=L,x.firstBaseUpdate=V,x.lastBaseUpdate=q,r=x.shared.interleaved,r!==null){x=r;do M|=x.lane,x=x.next;while(x!==r)}else S===null&&(x.shared.lanes=0);qa|=M,e.lanes=M,e.memoizedState=ee}}function xh(e,r,l){if(e=r.effects,r.effects=null,e!==null)for(r=0;r<e.length;r++){var d=e[r],x=d.callback;if(x!==null){if(d.callback=null,d=l,typeof x!="function")throw Error(y(191,x));x.call(d)}}}var zo={},Ro=K(zo),hs=K(zo),Hs=K(zo);function jo(e){if(e===zo)throw Error(y(174));return e}function _h(e,r){switch(le(Hs,r),le(hs,e),le(Ro,zo),e=r.nodeType,e){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:Le(null,"");break;default:e=e===8?r.parentNode:r,r=e.namespaceURI||null,e=e.tagName,r=Le(r,e)}X(Ro),le(Ro,r)}function Rl(){X(Ro),X(hs),X(Hs)}function Ur(e){jo(Hs.current);var r=jo(Ro.current),l=Le(r,e.type);r!==l&&(le(hs,e),le(Ro,l))}function Ir(e){hs.current===e&&(X(Ro),X(hs))}var Hn=K(0);function jl(e){for(var r=e;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Au=[];function Fa(){for(var e=0;e<Au.length;e++)Au[e]._workInProgressVersionPrimary=null;Au.length=0}var Lu=Be.ReactCurrentDispatcher,zu=Be.ReactCurrentBatchConfig,Gs=0,Bn=null,ur=null,vr=null,zc=!1,Rc=!1,Oa=0,wd=0;function Ar(){throw Error(y(321))}function $a(e,r){if(r===null)return!1;for(var l=0;l<r.length&&l<e.length;l++)if(!li(e[l],r[l]))return!1;return!0}function ti(e,r,l,d,x,S){if(Gs=S,Bn=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Lu.current=e===null||e.memoizedState===null?Dp:Ch,e=l(d,x),Rc){S=0;do{if(Rc=!1,Oa=0,25<=S)throw Error(y(301));S+=1,vr=ur=null,r.updateQueue=null,Lu.current=Ph,e=l(d,x)}while(Rc)}if(Lu.current=Vl,r=ur!==null&&ur.next!==null,Gs=0,vr=ur=Bn=null,zc=!1,r)throw Error(y(300));return e}function Ru(){var e=Oa!==0;return Oa=0,e}function Do(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vr===null?Bn.memoizedState=vr=e:vr=vr.next=e,vr}function Bi(){if(ur===null){var e=Bn.alternate;e=e!==null?e.memoizedState:null}else e=ur.next;var r=vr===null?Bn.memoizedState:vr.next;if(r!==null)vr=r,ur=e;else{if(e===null)throw Error(y(310));ur=e,e={memoizedState:ur.memoizedState,baseState:ur.baseState,baseQueue:ur.baseQueue,queue:ur.queue,next:null},vr===null?Bn.memoizedState=vr=e:vr=vr.next=e}return vr}function jc(e,r){return typeof r=="function"?r(e):r}function Dl(e){var r=Bi(),l=r.queue;if(l===null)throw Error(y(311));l.lastRenderedReducer=e;var d=ur,x=d.baseQueue,S=l.pending;if(S!==null){if(x!==null){var M=x.next;x.next=S.next,S.next=M}d.baseQueue=x=S,l.pending=null}if(x!==null){S=x.next,d=d.baseState;var A=M=null,L=null,V=S;do{var q=V.lane;if((Gs&q)===q)L!==null&&(L=L.next={lane:0,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),d=V.hasEagerState?V.eagerState:e(d,V.action);else{var ee={lane:q,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null};L===null?(A=L=ee,M=d):L=L.next=ee,Bn.lanes|=q,qa|=q}V=V.next}while(V!==null&&V!==S);L===null?M=d:L.next=A,li(d,r.memoizedState)||(hi=!0),r.memoizedState=d,r.baseState=M,r.baseQueue=L,l.lastRenderedState=d}if(e=l.interleaved,e!==null){x=e;do S=x.lane,Bn.lanes|=S,qa|=S,x=x.next;while(x!==e)}else x===null&&(l.lanes=0);return[r.memoizedState,l.dispatch]}function Nl(e){var r=Bi(),l=r.queue;if(l===null)throw Error(y(311));l.lastRenderedReducer=e;var d=l.dispatch,x=l.pending,S=r.memoizedState;if(x!==null){l.pending=null;var M=x=x.next;do S=e(S,M.action),M=M.next;while(M!==x);li(S,r.memoizedState)||(hi=!0),r.memoizedState=S,r.baseQueue===null&&(r.baseState=S),l.lastRenderedState=S}return[S,d]}function wh(){}function qs(e,r){var l=Bn,d=Bi(),x=r(),S=!li(d.memoizedState,x);if(S&&(d.memoizedState=x,hi=!0),d=d.queue,bh(Sd.bind(null,l,d,e),[e]),d.getSnapshot!==r||S||vr!==null&&vr.memoizedState.tag&1){if(l.flags|=2048,Dc(9,bd.bind(null,l,d,x,r),void 0,null),xr===null)throw Error(y(349));(Gs&30)!==0||Bl(l,r,x)}return x}function Bl(e,r,l){e.flags|=16384,e={getSnapshot:r,value:l},r=Bn.updateQueue,r===null?(r={lastEffect:null,stores:null},Bn.updateQueue=r,r.stores=[e]):(l=r.stores,l===null?r.stores=[e]:l.push(e))}function bd(e,r,l,d){r.value=l,r.getSnapshot=d,Ed(r)&&Td(e)}function Sd(e,r,l){return l(function(){Ed(r)&&Td(e)})}function Ed(e){var r=e.getSnapshot;e=e.value;try{var l=r();return!li(e,l)}catch{return!0}}function Td(e){var r=ro(e,1);r!==null&&lo(r,e,1,-1)}function kd(e){var r=Do();return typeof e=="function"&&(e=e()),r.memoizedState=r.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jc,lastRenderedState:e},r.queue=e,e=e.dispatch=jp.bind(null,Bn,e),[r.memoizedState,e]}function Dc(e,r,l,d){return e={tag:e,create:r,destroy:l,deps:d,next:null},r=Bn.updateQueue,r===null?(r={lastEffect:null,stores:null},Bn.updateQueue=r,r.lastEffect=e.next=e):(l=r.lastEffect,l===null?r.lastEffect=e.next=e:(d=l.next,l.next=e,e.next=d,r.lastEffect=e)),e}function Md(){return Bi().memoizedState}function Fl(e,r,l,d){var x=Do();Bn.flags|=e,x.memoizedState=Dc(1|r,l,void 0,d===void 0?null:d)}function ju(e,r,l,d){var x=Bi();d=d===void 0?null:d;var S=void 0;if(ur!==null){var M=ur.memoizedState;if(S=M.destroy,d!==null&&$a(d,M.deps)){x.memoizedState=Dc(r,l,S,d);return}}Bn.flags|=e,x.memoizedState=Dc(1|r,l,S,d)}function Ua(e,r){return Fl(8390656,8,e,r)}function bh(e,r){return ju(2048,8,e,r)}function Gn(e,r){return ju(4,2,e,r)}function Nc(e,r){return ju(4,4,e,r)}function Sh(e,r){if(typeof r=="function")return e=e(),r(e),function(){r(null)};if(r!=null)return e=e(),r.current=e,function(){r.current=null}}function Bc(e,r,l){return l=l!=null?l.concat([e]):null,ju(4,4,Sh.bind(null,r,e),l)}function Ol(){}function $l(e,r){var l=Bi();r=r===void 0?null:r;var d=l.memoizedState;return d!==null&&r!==null&&$a(r,d[1])?d[0]:(l.memoizedState=[e,r],e)}function Eh(e,r){var l=Bi();r=r===void 0?null:r;var d=l.memoizedState;return d!==null&&r!==null&&$a(r,d[1])?d[0]:(e=e(),l.memoizedState=[e,r],e)}function Th(e,r,l){return(Gs&21)===0?(e.baseState&&(e.baseState=!1,hi=!0),e.memoizedState=l):(li(l,r)||(l=hc(),Bn.lanes|=l,qa|=l,e.baseState=!0),r)}function Fc(e,r){var l=fn;fn=l!==0&&4>l?l:4,e(!0);var d=zu.transition;zu.transition={};try{e(!1),r()}finally{fn=l,zu.transition=d}}function Du(){return Bi().memoizedState}function kh(e,r,l){var d=Ys(e);if(l={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null},Mh(e))Ul(r,l);else if(l=Ac(e,r,l,d),l!==null){var x=zr();lo(l,e,d,x),Cd(l,r,d)}}function jp(e,r,l){var d=Ys(e),x={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if(Mh(e))Ul(r,x);else{var S=e.alternate;if(e.lanes===0&&(S===null||S.lanes===0)&&(S=r.lastRenderedReducer,S!==null))try{var M=r.lastRenderedState,A=S(M,l);if(x.hasEagerState=!0,x.eagerState=A,li(A,M)){var L=r.interleaved;L===null?(x.next=x,ls(r)):(x.next=L.next,L.next=x),r.interleaved=x;return}}catch{}finally{}l=Ac(e,r,x,d),l!==null&&(x=zr(),lo(l,e,d,x),Cd(l,r,d))}}function Mh(e){var r=e.alternate;return e===Bn||r!==null&&r===Bn}function Ul(e,r){Rc=zc=!0;var l=e.pending;l===null?r.next=r:(r.next=l.next,l.next=r),e.pending=r}function Cd(e,r,l){if((l&4194240)!==0){var d=r.lanes;d&=e.pendingLanes,l|=d,r.lanes=l,po(e,l)}}var Vl={readContext:Ei,useCallback:Ar,useContext:Ar,useEffect:Ar,useImperativeHandle:Ar,useInsertionEffect:Ar,useLayoutEffect:Ar,useMemo:Ar,useReducer:Ar,useRef:Ar,useState:Ar,useDebugValue:Ar,useDeferredValue:Ar,useTransition:Ar,useMutableSource:Ar,useSyncExternalStore:Ar,useId:Ar,unstable_isNewReconciler:!1},Dp={readContext:Ei,useCallback:function(e,r){return Do().memoizedState=[e,r===void 0?null:r],e},useContext:Ei,useEffect:Ua,useImperativeHandle:function(e,r,l){return l=l!=null?l.concat([e]):null,Fl(4194308,4,Sh.bind(null,r,e),l)},useLayoutEffect:function(e,r){return Fl(4194308,4,e,r)},useInsertionEffect:function(e,r){return Fl(4,2,e,r)},useMemo:function(e,r){var l=Do();return r=r===void 0?null:r,e=e(),l.memoizedState=[e,r],e},useReducer:function(e,r,l){var d=Do();return r=l!==void 0?l(r):r,d.memoizedState=d.baseState=r,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},d.queue=e,e=e.dispatch=kh.bind(null,Bn,e),[d.memoizedState,e]},useRef:function(e){var r=Do();return e={current:e},r.memoizedState=e},useState:kd,useDebugValue:Ol,useDeferredValue:function(e){return Do().memoizedState=e},useTransition:function(){var e=kd(!1),r=e[0];return e=Fc.bind(null,e[1]),Do().memoizedState=e,[r,e]},useMutableSource:function(){},useSyncExternalStore:function(e,r,l){var d=Bn,x=Do();if(Jt){if(l===void 0)throw Error(y(407));l=l()}else{if(l=r(),xr===null)throw Error(y(349));(Gs&30)!==0||Bl(d,r,l)}x.memoizedState=l;var S={value:l,getSnapshot:r};return x.queue=S,Ua(Sd.bind(null,d,S,e),[e]),d.flags|=2048,Dc(9,bd.bind(null,d,S,l,r),void 0,null),l},useId:function(){var e=Do(),r=xr.identifierPrefix;if(Jt){var l=Rn,d=$r;l=(d&~(1<<32-Jr(d)-1)).toString(32)+l,r=":"+r+"R"+l,l=Oa++,0<l&&(r+="H"+l.toString(32)),r+=":"}else l=wd++,r=":"+r+"r"+l.toString(32)+":";return e.memoizedState=r},unstable_isNewReconciler:!1},Ch={readContext:Ei,useCallback:$l,useContext:Ei,useEffect:bh,useImperativeHandle:Bc,useInsertionEffect:Gn,useLayoutEffect:Nc,useMemo:Eh,useReducer:Dl,useRef:Md,useState:function(){return Dl(jc)},useDebugValue:Ol,useDeferredValue:function(e){var r=Bi();return Th(r,ur.memoizedState,e)},useTransition:function(){var e=Dl(jc)[0],r=Bi().memoizedState;return[e,r]},useMutableSource:wh,useSyncExternalStore:qs,useId:Du,unstable_isNewReconciler:!1},Ph={readContext:Ei,useCallback:$l,useContext:Ei,useEffect:bh,useImperativeHandle:Bc,useInsertionEffect:Gn,useLayoutEffect:Nc,useMemo:Eh,useReducer:Nl,useRef:Md,useState:function(){return Nl(jc)},useDebugValue:Ol,useDeferredValue:function(e){var r=Bi();return ur===null?r.memoizedState=e:Th(r,ur.memoizedState,e)},useTransition:function(){var e=Nl(jc)[0],r=Bi().memoizedState;return[e,r]},useMutableSource:wh,useSyncExternalStore:qs,useId:Du,unstable_isNewReconciler:!1};function ki(e,r){if(e&&e.defaultProps){r=rt({},r),e=e.defaultProps;for(var l in e)r[l]===void 0&&(r[l]=e[l]);return r}return r}function Ih(e,r,l,d){r=e.memoizedState,l=l(d,r),l=l==null?r:rt({},r,l),e.memoizedState=l,e.lanes===0&&(e.updateQueue.baseState=l)}var Nu={isMounted:function(e){return(e=e._reactInternals)?me(e)===e:!1},enqueueSetState:function(e,r,l){e=e._reactInternals;var d=zr(),x=Ys(e),S=us(d,x);S.payload=r,l!=null&&(S.callback=l),r=Lo(e,S,x),r!==null&&(lo(r,e,x,d),Pu(r,e,x))},enqueueReplaceState:function(e,r,l){e=e._reactInternals;var d=zr(),x=Ys(e),S=us(d,x);S.tag=1,S.payload=r,l!=null&&(S.callback=l),r=Lo(e,S,x),r!==null&&(lo(r,e,x,d),Pu(r,e,x))},enqueueForceUpdate:function(e,r){e=e._reactInternals;var l=zr(),d=Ys(e),x=us(l,d);x.tag=2,r!=null&&(x.callback=r),r=Lo(e,x,d),r!==null&&(lo(r,e,d,l),Pu(r,e,d))}};function Pd(e,r,l,d,x,S,M){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(d,S,M):r.prototype&&r.prototype.isPureReactComponent?!Si(l,d)||!Si(x,S):!0}function Id(e,r,l){var d=!1,x=xe,S=r.contextType;return typeof S=="object"&&S!==null?S=Ei(S):(x=Pe(r)?Me:be.current,d=r.contextTypes,S=(d=d!=null)?ke(e,x):xe),r=new r(l,S),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Nu,e.stateNode=r,r._reactInternals=e,d&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=x,e.__reactInternalMemoizedMaskedChildContext=S),r}function Ad(e,r,l,d){e=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,d),r.state!==e&&Nu.enqueueReplaceState(r,r.state,null)}function No(e,r,l,d){var x=e.stateNode;x.props=l,x.state=e.memoizedState,x.refs={},yh(e);var S=r.contextType;typeof S=="object"&&S!==null?x.context=Ei(S):(S=Pe(r)?Me:be.current,x.context=ke(e,S)),x.state=e.memoizedState,S=r.getDerivedStateFromProps,typeof S=="function"&&(Ih(e,r,S,l),x.state=e.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(r=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),r!==x.state&&Nu.enqueueReplaceState(x,x.state,null),Lc(e,l,x,d),x.state=e.memoizedState),typeof x.componentDidMount=="function"&&(e.flags|=4194308)}function Hl(e,r){try{var l="",d=r;do l+=zt(d),d=d.return;while(d);var x=l}catch(S){x=`
Error generating stack: `+S.message+`
`+S.stack}return{value:e,source:r,stack:x,digest:null}}function Bu(e,r,l){return{value:e,source:null,stack:l??null,digest:r??null}}function Ws(e,r){try{console.error(r.value)}catch(l){setTimeout(function(){throw l})}}var Np=typeof WeakMap=="function"?WeakMap:Map;function Ld(e,r,l){l=us(-1,l),l.tag=3,l.payload={element:null};var d=r.value;return l.callback=function(){qc||(qc=!0,Gh=d),Ws(e,r)},l}function zd(e,r,l){l=us(-1,l),l.tag=3;var d=e.type.getDerivedStateFromError;if(typeof d=="function"){var x=r.value;l.payload=function(){return d(x)},l.callback=function(){Ws(e,r)}}var S=e.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(l.callback=function(){Ws(e,r),typeof d!="function"&&(Ks===null?Ks=new Set([this]):Ks.add(this));var M=r.stack;this.componentDidCatch(r.value,{componentStack:M!==null?M:""})}),l}function Ah(e,r,l){var d=e.pingCache;if(d===null){d=e.pingCache=new Np;var x=new Set;d.set(r,x)}else x=d.get(r),x===void 0&&(x=new Set,d.set(r,x));x.has(l)||(x.add(l),e=$p.bind(null,e,r,l),r.then(e,e))}function Lh(e){do{var r;if((r=e.tag===13)&&(r=e.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return e;e=e.return}while(e!==null);return null}function Rd(e,r,l,d,x){return(e.mode&1)===0?(e===r?e.flags|=65536:(e.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(r=us(-1,1),r.tag=2,Lo(l,r,1))),l.lanes|=1),e):(e.flags|=65536,e.lanes=x,e)}var Bp=Be.ReactCurrentOwner,hi=!1;function ni(e,r,l,d){r.child=e===null?Ao(r,null,l,d):to(r,e.child,l,d)}function Fu(e,r,l,d,x){l=l.render;var S=r.ref;return Vs(r,x),d=ti(e,r,l,d,S,x),l=Ru(),e!==null&&!hi?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~x,ds(e,r,x)):(Jt&&l&&Os(r),r.flags|=1,ni(e,r,d,x),r.child)}function Gl(e,r,l,d,x){if(e===null){var S=l.type;return typeof S=="function"&&!Ju(S)&&S.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(r.tag=15,r.type=S,Ou(e,r,S,d,x)):(e=Jc(l.type,null,d,r,r.mode,x),e.ref=r.ref,e.return=r,r.child=e)}if(S=e.child,(e.lanes&x)===0){var M=S.memoizedProps;if(l=l.compare,l=l!==null?l:Si,l(M,d)&&e.ref===r.ref)return ds(e,r,x)}return r.flags|=1,e=ms(S,d),e.ref=r.ref,e.return=r,r.child=e}function Ou(e,r,l,d,x){if(e!==null){var S=e.memoizedProps;if(Si(S,d)&&e.ref===r.ref)if(hi=!1,r.pendingProps=d=S,(e.lanes&x)!==0)(e.flags&131072)!==0&&(hi=!0);else return r.lanes=e.lanes,ds(e,r,x)}return zh(e,r,l,d,x)}function jd(e,r,l){var d=r.pendingProps,x=d.children,S=e!==null?e.memoizedState:null;if(d.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},le(Xs,di),di|=l;else{if((l&1073741824)===0)return e=S!==null?S.baseLanes|l:l,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:e,cachePool:null,transitions:null},r.updateQueue=null,le(Xs,di),di|=e,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=S!==null?S.baseLanes:l,le(Xs,di),di|=d}else S!==null?(d=S.baseLanes|l,r.memoizedState=null):d=l,le(Xs,di),di|=d;return ni(e,r,x,l),r.child}function Dd(e,r){var l=r.ref;(e===null&&l!==null||e!==null&&e.ref!==l)&&(r.flags|=512,r.flags|=2097152)}function zh(e,r,l,d,x){var S=Pe(l)?Me:be.current;return S=ke(r,S),Vs(r,x),l=ti(e,r,l,d,S,x),d=Ru(),e!==null&&!hi?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~x,ds(e,r,x)):(Jt&&d&&Os(r),r.flags|=1,ni(e,r,l,x),r.child)}function ql(e,r,l,d,x){if(Pe(l)){var S=!0;lt(r)}else S=!1;if(Vs(r,x),r.stateNode===null)$c(e,r),Id(r,l,d),No(r,l,d,x),d=!0;else if(e===null){var M=r.stateNode,A=r.memoizedProps;M.props=A;var L=M.context,V=l.contextType;typeof V=="object"&&V!==null?V=Ei(V):(V=Pe(l)?Me:be.current,V=ke(r,V));var q=l.getDerivedStateFromProps,ee=typeof q=="function"||typeof M.getSnapshotBeforeUpdate=="function";ee||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(A!==d||L!==V)&&Ad(r,M,d,V),cs=!1;var ae=r.memoizedState;M.state=ae,Lc(r,d,M,x),L=r.memoizedState,A!==d||ae!==L||re.current||cs?(typeof q=="function"&&(Ih(r,l,q,d),L=r.memoizedState),(A=cs||Pd(r,l,A,d,ae,L,V))?(ee||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(r.flags|=4194308)):(typeof M.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=L),M.props=d,M.state=L,M.context=V,d=A):(typeof M.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{M=r.stateNode,vh(e,r),A=r.memoizedProps,V=r.type===r.elementType?A:ki(r.type,A),M.props=V,ee=r.pendingProps,ae=M.context,L=l.contextType,typeof L=="object"&&L!==null?L=Ei(L):(L=Pe(l)?Me:be.current,L=ke(r,L));var se=l.getDerivedStateFromProps;(q=typeof se=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(A!==ee||ae!==L)&&Ad(r,M,d,L),cs=!1,ae=r.memoizedState,M.state=ae,Lc(r,d,M,x);var ge=r.memoizedState;A!==ee||ae!==ge||re.current||cs?(typeof se=="function"&&(Ih(r,l,se,d),ge=r.memoizedState),(V=cs||Pd(r,l,V,d,ae,ge,L)||!1)?(q||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(d,ge,L),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(d,ge,L)),typeof M.componentDidUpdate=="function"&&(r.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof M.componentDidUpdate!="function"||A===e.memoizedProps&&ae===e.memoizedState||(r.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||A===e.memoizedProps&&ae===e.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=ge),M.props=d,M.state=ge,M.context=L,d=V):(typeof M.componentDidUpdate!="function"||A===e.memoizedProps&&ae===e.memoizedState||(r.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||A===e.memoizedProps&&ae===e.memoizedState||(r.flags|=1024),d=!1)}return $u(e,r,l,d,S,x)}function $u(e,r,l,d,x,S){Dd(e,r);var M=(r.flags&128)!==0;if(!d&&!M)return x&&nt(r,l,!1),ds(e,r,S);d=r.stateNode,Bp.current=r;var A=M&&typeof l.getDerivedStateFromError!="function"?null:d.render();return r.flags|=1,e!==null&&M?(r.child=to(r,e.child,null,S),r.child=to(r,null,A,S)):ni(e,r,A,S),r.memoizedState=d.state,x&&nt(r,l,!0),r.child}function Nd(e){var r=e.stateNode;r.pendingContext?Ge(e,r.pendingContext,r.pendingContext!==r.context):r.context&&Ge(e,r.context,!1),_h(e,r.containerInfo)}function Bd(e,r,l,d,x){return Pr(),Us(x),r.flags|=256,ni(e,r,l,d),r.child}var Rh={dehydrated:null,treeContext:null,retryLane:0};function jh(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fd(e,r,l){var d=r.pendingProps,x=Hn.current,S=!1,M=(r.flags&128)!==0,A;if((A=M)||(A=e!==null&&e.memoizedState===null?!1:(x&2)!==0),A?(S=!0,r.flags&=-129):(e===null||e.memoizedState!==null)&&(x|=1),le(Hn,x&1),e===null)return Po(r),e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((r.mode&1)===0?r.lanes=1:e.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(M=d.children,e=d.fallback,S?(d=r.mode,S=r.child,M={mode:"hidden",children:M},(d&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=M):S=tc(M,d,0,null),e=ta(e,d,l,null),S.return=r,e.return=r,S.sibling=e,r.child=S,r.child.memoizedState=jh(l),r.memoizedState=Rh,e):Dh(r,M));if(x=e.memoizedState,x!==null&&(A=x.dehydrated,A!==null))return Nh(e,r,M,d,A,x,l);if(S){S=d.fallback,M=r.mode,x=e.child,A=x.sibling;var L={mode:"hidden",children:d.children};return(M&1)===0&&r.child!==x?(d=r.child,d.childLanes=0,d.pendingProps=L,r.deletions=null):(d=ms(x,L),d.subtreeFlags=x.subtreeFlags&14680064),A!==null?S=ms(A,S):(S=ta(S,M,l,null),S.flags|=2),S.return=r,d.return=r,d.sibling=S,r.child=d,d=S,S=r.child,M=e.child.memoizedState,M=M===null?jh(l):{baseLanes:M.baseLanes|l,cachePool:null,transitions:M.transitions},S.memoizedState=M,S.childLanes=e.childLanes&~l,r.memoizedState=Rh,d}return S=e.child,e=S.sibling,d=ms(S,{mode:"visible",children:d.children}),(r.mode&1)===0&&(d.lanes=l),d.return=r,d.sibling=null,e!==null&&(l=r.deletions,l===null?(r.deletions=[e],r.flags|=16):l.push(e)),r.child=d,r.memoizedState=null,d}function Dh(e,r){return r=tc({mode:"visible",children:r},e.mode,0,null),r.return=e,e.child=r}function Oc(e,r,l,d){return d!==null&&Us(d),to(r,e.child,null,l),e=Dh(r,r.pendingProps.children),e.flags|=2,r.memoizedState=null,e}function Nh(e,r,l,d,x,S,M){if(l)return r.flags&256?(r.flags&=-257,d=Bu(Error(y(422))),Oc(e,r,M,d)):r.memoizedState!==null?(r.child=e.child,r.flags|=128,null):(S=d.fallback,x=r.mode,d=tc({mode:"visible",children:d.children},x,0,null),S=ta(S,x,M,null),S.flags|=2,d.return=r,S.return=r,d.sibling=S,r.child=d,(r.mode&1)!==0&&to(r,e.child,null,M),r.child.memoizedState=jh(M),r.memoizedState=Rh,S);if((r.mode&1)===0)return Oc(e,r,M,null);if(x.data==="$!"){if(d=x.nextSibling&&x.nextSibling.dataset,d)var A=d.dgst;return d=A,S=Error(y(419)),d=Bu(S,d,void 0),Oc(e,r,M,d)}if(A=(M&e.childLanes)!==0,hi||A){if(d=xr,d!==null){switch(M&-M){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=(x&(d.suspendedLanes|M))!==0?0:x,x!==0&&x!==S.retryLane&&(S.retryLane=x,ro(e,x),lo(d,e,x,-1))}return Ql(),d=Bu(Error(y(421))),Oc(e,r,M,d)}return x.data==="$?"?(r.flags|=128,r.child=e.child,r=Up.bind(null,e),x._reactRetry=r,null):(e=S.treeContext,Ht=ci(x.nextSibling),on=r,Jt=!0,Nn=null,e!==null&&(Kn[Vn++]=$r,Kn[Vn++]=Rn,Kn[Vn++]=gr,$r=e.id,Rn=e.overflow,gr=r),r=Dh(r,d.children),r.flags|=4096,r)}function Od(e,r,l){e.lanes|=r;var d=e.alternate;d!==null&&(d.lanes|=r),Jn(e.return,r,l)}function Uu(e,r,l,d,x){var S=e.memoizedState;S===null?e.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:x}:(S.isBackwards=r,S.rendering=null,S.renderingStartTime=0,S.last=d,S.tail=l,S.tailMode=x)}function Bh(e,r,l){var d=r.pendingProps,x=d.revealOrder,S=d.tail;if(ni(e,r,d.children,l),d=Hn.current,(d&2)!==0)d=d&1|2,r.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=r.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Od(e,l,r);else if(e.tag===19)Od(e,l,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break e;for(;e.sibling===null;){if(e.return===null||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}d&=1}if(le(Hn,d),(r.mode&1)===0)r.memoizedState=null;else switch(x){case"forwards":for(l=r.child,x=null;l!==null;)e=l.alternate,e!==null&&jl(e)===null&&(x=l),l=l.sibling;l=x,l===null?(x=r.child,r.child=null):(x=l.sibling,l.sibling=null),Uu(r,!1,x,l,S);break;case"backwards":for(l=null,x=r.child,r.child=null;x!==null;){if(e=x.alternate,e!==null&&jl(e)===null){r.child=x;break}e=x.sibling,x.sibling=l,l=x,x=e}Uu(r,!0,l,null,S);break;case"together":Uu(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function $c(e,r){(r.mode&1)===0&&e!==null&&(e.alternate=null,r.alternate=null,r.flags|=2)}function ds(e,r,l){if(e!==null&&(r.dependencies=e.dependencies),qa|=r.lanes,(l&r.childLanes)===0)return null;if(e!==null&&r.child!==e.child)throw Error(y(153));if(r.child!==null){for(e=r.child,l=ms(e,e.pendingProps),r.child=l,l.return=r;e.sibling!==null;)e=e.sibling,l=l.sibling=ms(e,e.pendingProps),l.return=r;l.sibling=null}return r.child}function Fp(e,r,l){switch(r.tag){case 3:Nd(r),Pr();break;case 5:Ur(r);break;case 1:Pe(r.type)&&lt(r);break;case 4:_h(r,r.stateNode.containerInfo);break;case 10:var d=r.type._context,x=r.memoizedProps.value;le(ui,d._currentValue),d._currentValue=x;break;case 13:if(d=r.memoizedState,d!==null)return d.dehydrated!==null?(le(Hn,Hn.current&1),r.flags|=128,null):(l&r.child.childLanes)!==0?Fd(e,r,l):(le(Hn,Hn.current&1),e=ds(e,r,l),e!==null?e.sibling:null);le(Hn,Hn.current&1);break;case 19:if(d=(l&r.childLanes)!==0,(e.flags&128)!==0){if(d)return Bh(e,r,l);r.flags|=128}if(x=r.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),le(Hn,Hn.current),d)break;return null;case 22:case 23:return r.lanes=0,jd(e,r,l)}return ds(e,r,l)}var $d,Vu,Ud,Vd;$d=function(e,r){for(var l=r.child;l!==null;){if(l.tag===5||l.tag===6)e.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break;for(;l.sibling===null;){if(l.return===null||l.return===r)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Vu=function(){},Ud=function(e,r,l,d){var x=e.memoizedProps;if(x!==d){e=r.stateNode,jo(Ro.current);var S=null;switch(l){case"input":x=si(e,x),d=si(e,d),S=[];break;case"select":x=rt({},x,{value:void 0}),d=rt({},d,{value:void 0}),S=[];break;case"textarea":x=kn(e,x),d=kn(e,d),S=[];break;default:typeof x.onClick!="function"&&typeof d.onClick=="function"&&(e.onclick=Fs)}et(l,d);var M;l=null;for(V in x)if(!d.hasOwnProperty(V)&&x.hasOwnProperty(V)&&x[V]!=null)if(V==="style"){var A=x[V];for(M in A)A.hasOwnProperty(M)&&(l||(l={}),l[M]="")}else V!=="dangerouslySetInnerHTML"&&V!=="children"&&V!=="suppressContentEditableWarning"&&V!=="suppressHydrationWarning"&&V!=="autoFocus"&&(E.hasOwnProperty(V)?S||(S=[]):(S=S||[]).push(V,null));for(V in d){var L=d[V];if(A=x!=null?x[V]:void 0,d.hasOwnProperty(V)&&L!==A&&(L!=null||A!=null))if(V==="style")if(A){for(M in A)!A.hasOwnProperty(M)||L&&L.hasOwnProperty(M)||(l||(l={}),l[M]="");for(M in L)L.hasOwnProperty(M)&&A[M]!==L[M]&&(l||(l={}),l[M]=L[M])}else l||(S||(S=[]),S.push(V,l)),l=L;else V==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,A=A?A.__html:void 0,L!=null&&A!==L&&(S=S||[]).push(V,L)):V==="children"?typeof L!="string"&&typeof L!="number"||(S=S||[]).push(V,""+L):V!=="suppressContentEditableWarning"&&V!=="suppressHydrationWarning"&&(E.hasOwnProperty(V)?(L!=null&&V==="onScroll"&&hn("scroll",e),S||A===L||(S=[])):(S=S||[]).push(V,L))}l&&(S=S||[]).push("style",l);var V=S;(r.updateQueue=V)&&(r.flags|=4)}},Vd=function(e,r,l,d){l!==d&&(r.flags|=4)};function ps(e,r){if(!Jt)switch(e.tailMode){case"hidden":r=e.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?e.tail=null:l.sibling=null;break;case"collapsed":l=e.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?r||e.tail===null?e.tail=null:e.tail.sibling=null:d.sibling=null}}function gn(e){var r=e.alternate!==null&&e.alternate.child===e.child,l=0,d=0;if(r)for(var x=e.child;x!==null;)l|=x.lanes|x.childLanes,d|=x.subtreeFlags&14680064,d|=x.flags&14680064,x.return=e,x=x.sibling;else for(x=e.child;x!==null;)l|=x.lanes|x.childLanes,d|=x.subtreeFlags,d|=x.flags,x.return=e,x=x.sibling;return e.subtreeFlags|=d,e.childLanes=l,r}function Fh(e,r,l){var d=r.pendingProps;switch(cn(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gn(r),null;case 1:return Pe(r.type)&&De(),gn(r),null;case 3:return d=r.stateNode,Rl(),X(re),X(be),Fa(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(e===null||e.child===null)&&($s(r)?r.flags|=4:e===null||e.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Nn!==null&&(Xc(Nn),Nn=null))),Vu(e,r),gn(r),null;case 5:Ir(r);var x=jo(Hs.current);if(l=r.type,e!==null&&r.stateNode!=null)Ud(e,r,l,d,x),e.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!d){if(r.stateNode===null)throw Error(y(166));return gn(r),null}if(e=jo(Ro.current),$s(r)){d=r.stateNode,l=r.type;var S=r.memoizedProps;switch(d[s]=r,d[h]=S,e=(r.mode&1)!==0,l){case"dialog":hn("cancel",d),hn("close",d);break;case"iframe":case"object":case"embed":hn("load",d);break;case"video":case"audio":for(x=0;x<os.length;x++)hn(os[x],d);break;case"source":hn("error",d);break;case"img":case"image":case"link":hn("error",d),hn("load",d);break;case"details":hn("toggle",d);break;case"input":Qe(d,S),hn("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!S.multiple},hn("invalid",d);break;case"textarea":rr(d,S),hn("invalid",d)}et(l,S),x=null;for(var M in S)if(S.hasOwnProperty(M)){var A=S[M];M==="children"?typeof A=="string"?d.textContent!==A&&(S.suppressHydrationWarning!==!0&&To(d.textContent,A,e),x=["children",A]):typeof A=="number"&&d.textContent!==""+A&&(S.suppressHydrationWarning!==!0&&To(d.textContent,A,e),x=["children",""+A]):E.hasOwnProperty(M)&&A!=null&&M==="onScroll"&&hn("scroll",d)}switch(l){case"input":br(d),ln(d,S,!0);break;case"textarea":br(d),Fr(d);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(d.onclick=Fs)}d=x,r.updateQueue=d,d!==null&&(r.flags|=4)}else{M=x.nodeType===9?x:x.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Hr(l)),e==="http://www.w3.org/1999/xhtml"?l==="script"?(e=M.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof d.is=="string"?e=M.createElement(l,{is:d.is}):(e=M.createElement(l),l==="select"&&(M=e,d.multiple?M.multiple=!0:d.size&&(M.size=d.size))):e=M.createElementNS(e,l),e[s]=r,e[h]=d,$d(e,r,!1,!1),r.stateNode=e;e:{switch(M=Bt(l,d),l){case"dialog":hn("cancel",e),hn("close",e),x=d;break;case"iframe":case"object":case"embed":hn("load",e),x=d;break;case"video":case"audio":for(x=0;x<os.length;x++)hn(os[x],e);x=d;break;case"source":hn("error",e),x=d;break;case"img":case"image":case"link":hn("error",e),hn("load",e),x=d;break;case"details":hn("toggle",e),x=d;break;case"input":Qe(e,d),x=si(e,d),hn("invalid",e);break;case"option":x=d;break;case"select":e._wrapperState={wasMultiple:!!d.multiple},x=rt({},d,{value:void 0}),hn("invalid",e);break;case"textarea":rr(e,d),x=kn(e,d),hn("invalid",e);break;default:x=d}et(l,x),A=x;for(S in A)if(A.hasOwnProperty(S)){var L=A[S];S==="style"?ji(e,L):S==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&Sr(e,L)):S==="children"?typeof L=="string"?(l!=="textarea"||L!=="")&&ir(e,L):typeof L=="number"&&ir(e,""+L):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(E.hasOwnProperty(S)?L!=null&&S==="onScroll"&&hn("scroll",e):L!=null&&ve(e,S,L,M))}switch(l){case"input":br(e),ln(e,d,!1);break;case"textarea":br(e),Fr(e);break;case"option":d.value!=null&&e.setAttribute("value",""+Yt(d.value));break;case"select":e.multiple=!!d.multiple,S=d.value,S!=null?Br(e,!!d.multiple,S,!1):d.defaultValue!=null&&Br(e,!!d.multiple,d.defaultValue,!0);break;default:typeof x.onClick=="function"&&(e.onclick=Fs)}switch(l){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return gn(r),null;case 6:if(e&&r.stateNode!=null)Vd(e,r,e.memoizedProps,d);else{if(typeof d!="string"&&r.stateNode===null)throw Error(y(166));if(l=jo(Hs.current),jo(Ro.current),$s(r)){if(d=r.stateNode,l=r.memoizedProps,d[s]=r,(S=d.nodeValue!==l)&&(e=on,e!==null))switch(e.tag){case 3:To(d.nodeValue,l,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&To(d.nodeValue,l,(e.mode&1)!==0)}S&&(r.flags|=4)}else d=(l.nodeType===9?l:l.ownerDocument).createTextNode(d),d[s]=r,r.stateNode=d}return gn(r),null;case 13:if(X(Hn),d=r.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Jt&&Ht!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Da(),Pr(),r.flags|=98560,S=!1;else if(S=$s(r),d!==null&&d.dehydrated!==null){if(e===null){if(!S)throw Error(y(318));if(S=r.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(y(317));S[s]=r}else Pr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;gn(r),S=!1}else Nn!==null&&(Xc(Nn),Nn=null),S=!0;if(!S)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=l,r):(d=d!==null,d!==(e!==null&&e.memoizedState!==null)&&d&&(r.child.flags|=8192,(r.mode&1)!==0&&(e===null||(Hn.current&1)!==0?sr===0&&(sr=3):Ql())),r.updateQueue!==null&&(r.flags|=4),gn(r),null);case 4:return Rl(),Vu(e,r),e===null&&Eo(r.stateNode.containerInfo),gn(r),null;case 10:return Cu(r.type._context),gn(r),null;case 17:return Pe(r.type)&&De(),gn(r),null;case 19:if(X(Hn),S=r.memoizedState,S===null)return gn(r),null;if(d=(r.flags&128)!==0,M=S.rendering,M===null)if(d)ps(S,!1);else{if(sr!==0||e!==null&&(e.flags&128)!==0)for(e=r.child;e!==null;){if(M=jl(e),M!==null){for(r.flags|=128,ps(S,!1),d=M.updateQueue,d!==null&&(r.updateQueue=d,r.flags|=4),r.subtreeFlags=0,d=l,l=r.child;l!==null;)S=l,e=d,S.flags&=14680066,M=S.alternate,M===null?(S.childLanes=0,S.lanes=e,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=M.childLanes,S.lanes=M.lanes,S.child=M.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=M.memoizedProps,S.memoizedState=M.memoizedState,S.updateQueue=M.updateQueue,S.type=M.type,e=M.dependencies,S.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),l=l.sibling;return le(Hn,Hn.current&1|2),r.child}e=e.sibling}S.tail!==null&&ot()>Wa&&(r.flags|=128,d=!0,ps(S,!1),r.lanes=4194304)}else{if(!d)if(e=jl(M),e!==null){if(r.flags|=128,d=!0,l=e.updateQueue,l!==null&&(r.updateQueue=l,r.flags|=4),ps(S,!0),S.tail===null&&S.tailMode==="hidden"&&!M.alternate&&!Jt)return gn(r),null}else 2*ot()-S.renderingStartTime>Wa&&l!==1073741824&&(r.flags|=128,d=!0,ps(S,!1),r.lanes=4194304);S.isBackwards?(M.sibling=r.child,r.child=M):(l=S.last,l!==null?l.sibling=M:r.child=M,S.last=M)}return S.tail!==null?(r=S.tail,S.rendering=r,S.tail=r.sibling,S.renderingStartTime=ot(),r.sibling=null,l=Hn.current,le(Hn,d?l&1|2:l&1),r):(gn(r),null);case 22:case 23:return Xu(),d=r.memoizedState!==null,e!==null&&e.memoizedState!==null!==d&&(r.flags|=8192),d&&(r.mode&1)!==0?(di&1073741824)!==0&&(gn(r),r.subtreeFlags&6&&(r.flags|=8192)):gn(r),null;case 24:return null;case 25:return null}throw Error(y(156,r.tag))}function Hd(e,r){switch(cn(r),r.tag){case 1:return Pe(r.type)&&De(),e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 3:return Rl(),X(re),X(be),Fa(),e=r.flags,(e&65536)!==0&&(e&128)===0?(r.flags=e&-65537|128,r):null;case 5:return Ir(r),null;case 13:if(X(Hn),e=r.memoizedState,e!==null&&e.dehydrated!==null){if(r.alternate===null)throw Error(y(340));Pr()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 19:return X(Hn),null;case 4:return Rl(),null;case 10:return Cu(r.type._context),null;case 22:case 23:return Xu(),null;case 24:return null;default:return null}}var Uc=!1,Xt=!1,Zs=typeof WeakSet=="function"?WeakSet:Set,_t=null;function Va(e,r){var l=e.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(d){qn(e,r,d)}else l.current=null}function Hu(e,r,l){try{l()}catch(d){qn(e,r,d)}}var Bo=!1;function Wl(e,r){if(Xn=Es,e=_u(),kl(e)){if("selectionStart"in e)var l={start:e.selectionStart,end:e.selectionEnd};else e:{l=(l=e.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var x=d.anchorOffset,S=d.focusNode;d=d.focusOffset;try{l.nodeType,S.nodeType}catch{l=null;break e}var M=0,A=-1,L=-1,V=0,q=0,ee=e,ae=null;t:for(;;){for(var se;ee!==l||x!==0&&ee.nodeType!==3||(A=M+x),ee!==S||d!==0&&ee.nodeType!==3||(L=M+d),ee.nodeType===3&&(M+=ee.nodeValue.length),(se=ee.firstChild)!==null;)ae=ee,ee=se;for(;;){if(ee===e)break t;if(ae===l&&++V===x&&(A=M),ae===S&&++q===d&&(L=M),(se=ee.nextSibling)!==null)break;ee=ae,ae=ee.parentNode}ee=se}l=A===-1||L===-1?null:{start:A,end:L}}else l=null}l=l||{start:0,end:0}}else l=null;for(eo={focusedElem:e,selectionRange:l},Es=!1,_t=r;_t!==null;)if(r=_t,e=r.child,(r.subtreeFlags&1028)!==0&&e!==null)e.return=r,_t=e;else for(;_t!==null;){r=_t;try{var ge=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var Ee=ge.memoizedProps,Re=ge.memoizedState,de=r.stateNode,oe=de.getSnapshotBeforeUpdate(r.elementType===r.type?Ee:ki(r.type,Ee),Re);de.__reactInternalSnapshotBeforeUpdate=oe}break;case 3:var he=r.stateNode.containerInfo;he.nodeType===1?he.textContent="":he.nodeType===9&&he.documentElement&&he.removeChild(he.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(y(163))}}catch(Te){qn(r,r.return,Te)}if(e=r.sibling,e!==null){e.return=r.return,_t=e;break}_t=r.return}return ge=Bo,Bo=!1,ge}function Zl(e,r,l){var d=r.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var x=d=d.next;do{if((x.tag&e)===e){var S=x.destroy;x.destroy=void 0,S!==void 0&&Hu(r,l,S)}x=x.next}while(x!==d)}}function Gu(e,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do{if((l.tag&e)===e){var d=l.create;l.destroy=d()}l=l.next}while(l!==r)}}function Oh(e){var r=e.ref;if(r!==null){var l=e.stateNode;switch(e.tag){case 5:e=l;break;default:e=l}typeof r=="function"?r(e):r.current=e}}function Gd(e){var r=e.alternate;r!==null&&(e.alternate=null,Gd(r)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(r=e.stateNode,r!==null&&(delete r[s],delete r[h],delete r[b],delete r[k],delete r[P])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function qd(e){return e.tag===5||e.tag===3||e.tag===4}function Wd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||qd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function $h(e,r,l){var d=e.tag;if(d===5||d===6)e=e.stateNode,r?l.nodeType===8?l.parentNode.insertBefore(e,r):l.insertBefore(e,r):(l.nodeType===8?(r=l.parentNode,r.insertBefore(e,l)):(r=l,r.appendChild(e)),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=Fs));else if(d!==4&&(e=e.child,e!==null))for($h(e,r,l),e=e.sibling;e!==null;)$h(e,r,l),e=e.sibling}function Uh(e,r,l){var d=e.tag;if(d===5||d===6)e=e.stateNode,r?l.insertBefore(e,r):l.appendChild(e);else if(d!==4&&(e=e.child,e!==null))for(Uh(e,r,l),e=e.sibling;e!==null;)Uh(e,r,l),e=e.sibling}var Vr=null,io=!1;function oo(e,r,l){for(l=l.child;l!==null;)Ha(e,r,l),l=l.sibling}function Ha(e,r,l){if(bn&&typeof bn.onCommitFiberUnmount=="function")try{bn.onCommitFiberUnmount(Ln,l)}catch{}switch(l.tag){case 5:Xt||Va(l,r);case 6:var d=Vr,x=io;Vr=null,oo(e,r,l),Vr=d,io=x,Vr!==null&&(io?(e=Vr,l=l.stateNode,e.nodeType===8?e.parentNode.removeChild(l):e.removeChild(l)):Vr.removeChild(l.stateNode));break;case 18:Vr!==null&&(io?(e=Vr,l=l.stateNode,e.nodeType===8?ko(e.parentNode,l):e.nodeType===1&&ko(e,l),Ss(e)):ko(Vr,l.stateNode));break;case 4:d=Vr,x=io,Vr=l.stateNode.containerInfo,io=!0,oo(e,r,l),Vr=d,io=x;break;case 0:case 11:case 14:case 15:if(!Xt&&(d=l.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){x=d=d.next;do{var S=x,M=S.destroy;S=S.tag,M!==void 0&&((S&2)!==0||(S&4)!==0)&&Hu(l,r,M),x=x.next}while(x!==d)}oo(e,r,l);break;case 1:if(!Xt&&(Va(l,r),d=l.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=l.memoizedProps,d.state=l.memoizedState,d.componentWillUnmount()}catch(A){qn(l,r,A)}oo(e,r,l);break;case 21:oo(e,r,l);break;case 22:l.mode&1?(Xt=(d=Xt)||l.memoizedState!==null,oo(e,r,l),Xt=d):oo(e,r,l);break;default:oo(e,r,l)}}function Vh(e){var r=e.updateQueue;if(r!==null){e.updateQueue=null;var l=e.stateNode;l===null&&(l=e.stateNode=new Zs),r.forEach(function(d){var x=Vp.bind(null,e,d);l.has(d)||(l.add(d),d.then(x,x))})}}function so(e,r){var l=r.deletions;if(l!==null)for(var d=0;d<l.length;d++){var x=l[d];try{var S=e,M=r,A=M;e:for(;A!==null;){switch(A.tag){case 5:Vr=A.stateNode,io=!1;break e;case 3:Vr=A.stateNode.containerInfo,io=!0;break e;case 4:Vr=A.stateNode.containerInfo,io=!0;break e}A=A.return}if(Vr===null)throw Error(y(160));Ha(S,M,x),Vr=null,io=!1;var L=x.alternate;L!==null&&(L.return=null),x.return=null}catch(V){qn(x,r,V)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Zd(r,e),r=r.sibling}function Zd(e,r){var l=e.alternate,d=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(so(r,e),Fo(e),d&4){try{Zl(3,e,e.return),Gu(3,e)}catch(Ee){qn(e,e.return,Ee)}try{Zl(5,e,e.return)}catch(Ee){qn(e,e.return,Ee)}}break;case 1:so(r,e),Fo(e),d&512&&l!==null&&Va(l,l.return);break;case 5:if(so(r,e),Fo(e),d&512&&l!==null&&Va(l,l.return),e.flags&32){var x=e.stateNode;try{ir(x,"")}catch(Ee){qn(e,e.return,Ee)}}if(d&4&&(x=e.stateNode,x!=null)){var S=e.memoizedProps,M=l!==null?l.memoizedProps:S,A=e.type,L=e.updateQueue;if(e.updateQueue=null,L!==null)try{A==="input"&&S.type==="radio"&&S.name!=null&&tt(x,S),Bt(A,M);var V=Bt(A,S);for(M=0;M<L.length;M+=2){var q=L[M],ee=L[M+1];q==="style"?ji(x,ee):q==="dangerouslySetInnerHTML"?Sr(x,ee):q==="children"?ir(x,ee):ve(x,q,ee,V)}switch(A){case"input":Ot(x,S);break;case"textarea":On(x,S);break;case"select":var ae=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!S.multiple;var se=S.value;se!=null?Br(x,!!S.multiple,se,!1):ae!==!!S.multiple&&(S.defaultValue!=null?Br(x,!!S.multiple,S.defaultValue,!0):Br(x,!!S.multiple,S.multiple?[]:"",!1))}x[h]=S}catch(Ee){qn(e,e.return,Ee)}}break;case 6:if(so(r,e),Fo(e),d&4){if(e.stateNode===null)throw Error(y(162));x=e.stateNode,S=e.memoizedProps;try{x.nodeValue=S}catch(Ee){qn(e,e.return,Ee)}}break;case 3:if(so(r,e),Fo(e),d&4&&l!==null&&l.memoizedState.isDehydrated)try{Ss(r.containerInfo)}catch(Ee){qn(e,e.return,Ee)}break;case 4:so(r,e),Fo(e);break;case 13:so(r,e),Fo(e),x=e.child,x.flags&8192&&(S=x.memoizedState!==null,x.stateNode.isHidden=S,!S||x.alternate!==null&&x.alternate.memoizedState!==null||(Wu=ot())),d&4&&Vh(e);break;case 22:if(q=l!==null&&l.memoizedState!==null,e.mode&1?(Xt=(V=Xt)||q,so(r,e),Xt=V):so(r,e),Fo(e),d&8192){if(V=e.memoizedState!==null,(e.stateNode.isHidden=V)&&!q&&(e.mode&1)!==0)for(_t=e,q=e.child;q!==null;){for(ee=_t=q;_t!==null;){switch(ae=_t,se=ae.child,ae.tag){case 0:case 11:case 14:case 15:Zl(4,ae,ae.return);break;case 1:Va(ae,ae.return);var ge=ae.stateNode;if(typeof ge.componentWillUnmount=="function"){d=ae,l=ae.return;try{r=d,ge.props=r.memoizedProps,ge.state=r.memoizedState,ge.componentWillUnmount()}catch(Ee){qn(d,l,Ee)}}break;case 5:Va(ae,ae.return);break;case 22:if(ae.memoizedState!==null){Vc(ee);continue}}se!==null?(se.return=ae,_t=se):Vc(ee)}q=q.sibling}e:for(q=null,ee=e;;){if(ee.tag===5){if(q===null){q=ee;try{x=ee.stateNode,V?(S=x.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(A=ee.stateNode,L=ee.memoizedProps.style,M=L!=null&&L.hasOwnProperty("display")?L.display:null,A.style.display=er("display",M))}catch(Ee){qn(e,e.return,Ee)}}}else if(ee.tag===6){if(q===null)try{ee.stateNode.nodeValue=V?"":ee.memoizedProps}catch(Ee){qn(e,e.return,Ee)}}else if((ee.tag!==22&&ee.tag!==23||ee.memoizedState===null||ee===e)&&ee.child!==null){ee.child.return=ee,ee=ee.child;continue}if(ee===e)break e;for(;ee.sibling===null;){if(ee.return===null||ee.return===e)break e;q===ee&&(q=null),ee=ee.return}q===ee&&(q=null),ee.sibling.return=ee.return,ee=ee.sibling}}break;case 19:so(r,e),Fo(e),d&4&&Vh(e);break;case 21:break;default:so(r,e),Fo(e)}}function Fo(e){var r=e.flags;if(r&2){try{e:{for(var l=e.return;l!==null;){if(qd(l)){var d=l;break e}l=l.return}throw Error(y(160))}switch(d.tag){case 5:var x=d.stateNode;d.flags&32&&(ir(x,""),d.flags&=-33);var S=Wd(e);Uh(e,S,x);break;case 3:case 4:var M=d.stateNode.containerInfo,A=Wd(e);$h(e,A,M);break;default:throw Error(y(161))}}catch(L){qn(e,e.return,L)}e.flags&=-3}r&4096&&(e.flags&=-4097)}function Xd(e,r,l){_t=e,qu(e)}function qu(e,r,l){for(var d=(e.mode&1)!==0;_t!==null;){var x=_t,S=x.child;if(x.tag===22&&d){var M=x.memoizedState!==null||Uc;if(!M){var A=x.alternate,L=A!==null&&A.memoizedState!==null||Xt;A=Uc;var V=Xt;if(Uc=M,(Xt=L)&&!V)for(_t=x;_t!==null;)M=_t,L=M.child,M.tag===22&&M.memoizedState!==null?Xl(x):L!==null?(L.return=M,_t=L):Xl(x);for(;S!==null;)_t=S,qu(S),S=S.sibling;_t=x,Uc=A,Xt=V}Hh(e)}else(x.subtreeFlags&8772)!==0&&S!==null?(S.return=x,_t=S):Hh(e)}}function Hh(e){for(;_t!==null;){var r=_t;if((r.flags&8772)!==0){var l=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Xt||Gu(5,r);break;case 1:var d=r.stateNode;if(r.flags&4&&!Xt)if(l===null)d.componentDidMount();else{var x=r.elementType===r.type?l.memoizedProps:ki(r.type,l.memoizedProps);d.componentDidUpdate(x,l.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var S=r.updateQueue;S!==null&&xh(r,S,d);break;case 3:var M=r.updateQueue;if(M!==null){if(l=null,r.child!==null)switch(r.child.tag){case 5:l=r.child.stateNode;break;case 1:l=r.child.stateNode}xh(r,M,l)}break;case 5:var A=r.stateNode;if(l===null&&r.flags&4){l=A;var L=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&l.focus();break;case"img":L.src&&(l.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var V=r.alternate;if(V!==null){var q=V.memoizedState;if(q!==null){var ee=q.dehydrated;ee!==null&&Ss(ee)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(y(163))}Xt||r.flags&512&&Oh(r)}catch(ae){qn(r,r.return,ae)}}if(r===e){_t=null;break}if(l=r.sibling,l!==null){l.return=r.return,_t=l;break}_t=r.return}}function Vc(e){for(;_t!==null;){var r=_t;if(r===e){_t=null;break}var l=r.sibling;if(l!==null){l.return=r.return,_t=l;break}_t=r.return}}function Xl(e){for(;_t!==null;){var r=_t;try{switch(r.tag){case 0:case 11:case 15:var l=r.return;try{Gu(4,r)}catch(L){qn(r,l,L)}break;case 1:var d=r.stateNode;if(typeof d.componentDidMount=="function"){var x=r.return;try{d.componentDidMount()}catch(L){qn(r,x,L)}}var S=r.return;try{Oh(r)}catch(L){qn(r,S,L)}break;case 5:var M=r.return;try{Oh(r)}catch(L){qn(r,M,L)}}}catch(L){qn(r,r.return,L)}if(r===e){_t=null;break}var A=r.sibling;if(A!==null){A.return=r.return,_t=A;break}_t=r.return}}var Kl=Math.ceil,Ga=Be.ReactCurrentDispatcher,Jl=Be.ReactCurrentOwner,Fi=Be.ReactCurrentBatchConfig,yn=0,xr=null,hr=null,Lr=0,di=0,Xs=K(0),sr=0,Hc=null,qa=0,Gc=0,ao=0,Yl=null,ar=null,Wu=0,Wa=1/0,Oo=null,qc=!1,Gh=null,Ks=null,Wc=!1,fs=null,Zc=0,Js=0,Zu=null,Za=-1,Xa=0;function zr(){return(yn&6)!==0?ot():Za!==-1?Za:Za=ot()}function Ys(e){return(e.mode&1)===0?1:(yn&2)!==0&&Lr!==0?Lr&-Lr:Na.transition!==null?(Xa===0&&(Xa=hc()),Xa):(e=fn,e!==0||(e=window.event,e=e===void 0?16:pl(e.type)),e)}function lo(e,r,l,d){if(50<Js)throw Js=0,Zu=null,Error(y(185));xi(e,l,d),((yn&2)===0||e!==xr)&&(e===xr&&((yn&2)===0&&(Gc|=l),sr===4&&$o(e,Lr)),pi(e,d),l===1&&yn===0&&(r.mode&1)===0&&(Wa=ot()+500,jt&&nn()))}function pi(e,r){var l=e.callbackNode;uc(e,r);var d=ua(e,e===xr?Lr:0);if(d===0)l!==null&&ft(l),e.callbackNode=null,e.callbackPriority=0;else if(r=d&-d,e.callbackPriority!==r){if(l!=null&&ft(l),r===1)e.tag===0?xn(Yd.bind(null,e)):Et(Yd.bind(null,e)),nr(function(){(yn&6)===0&&nn()}),l=null;else{switch(da(d)){case 1:l=Wt;break;case 4:l=Zt;break;case 16:l=Ut;break;case 536870912:l=$n;break;default:l=Ut}l=Zh(l,Kd.bind(null,e))}e.callbackPriority=r,e.callbackNode=l}}function Kd(e,r){if(Za=-1,Xa=0,(yn&6)!==0)throw Error(y(327));var l=e.callbackNode;if(Qa()&&e.callbackNode!==l)return null;var d=ua(e,e===xr?Lr:0);if(d===0)return null;if((d&30)!==0||(d&e.expiredLanes)!==0||r)r=ec(e,d);else{r=d;var x=yn;yn|=2;var S=ep();(xr!==e||Lr!==r)&&(Oo=null,Wa=ot()+500,Ka(e,r));do try{qh();break}catch(A){Qd(e,A)}while(!0);gh(),Ga.current=S,yn=x,hr!==null?r=0:(xr=null,Lr=0,r=sr)}if(r!==0){if(r===2&&(x=ha(e),x!==0&&(d=x,r=Qs(e,x))),r===1)throw l=Hc,Ka(e,0),$o(e,d),pi(e,ot()),l;if(r===6)$o(e,d);else{if(x=e.current.alternate,(d&30)===0&&!Jd(x)&&(r=ec(e,d),r===2&&(S=ha(e),S!==0&&(d=S,r=Qs(e,S))),r===1))throw l=Hc,Ka(e,0),$o(e,d),pi(e,ot()),l;switch(e.finishedWork=x,e.finishedLanes=d,r){case 0:case 1:throw Error(y(345));case 2:Ya(e,ar,Oo);break;case 3:if($o(e,d),(d&130023424)===d&&(r=Wu+500-ot(),10<r)){if(ua(e,0)!==0)break;if(x=e.suspendedLanes,(x&d)!==d){zr(),e.pingedLanes|=e.suspendedLanes&x;break}e.timeoutHandle=Ic(Ya.bind(null,e,ar,Oo),r);break}Ya(e,ar,Oo);break;case 4:if($o(e,d),(d&4194240)===d)break;for(r=e.eventTimes,x=-1;0<d;){var M=31-Jr(d);S=1<<M,M=r[M],M>x&&(x=M),d&=~S}if(d=x,d=ot()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*Kl(d/1960))-d,10<d){e.timeoutHandle=Ic(Ya.bind(null,e,ar,Oo),d);break}Ya(e,ar,Oo);break;case 5:Ya(e,ar,Oo);break;default:throw Error(y(329))}}}return pi(e,ot()),e.callbackNode===l?Kd.bind(null,e):null}function Qs(e,r){var l=Yl;return e.current.memoizedState.isDehydrated&&(Ka(e,r).flags|=256),e=ec(e,r),e!==2&&(r=ar,ar=l,r!==null&&Xc(r)),e}function Xc(e){ar===null?ar=e:ar.push.apply(ar,e)}function Jd(e){for(var r=e;;){if(r.flags&16384){var l=r.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var d=0;d<l.length;d++){var x=l[d],S=x.getSnapshot;x=x.value;try{if(!li(S(),x))return!1}catch{return!1}}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function $o(e,r){for(r&=~ao,r&=~Gc,e.suspendedLanes|=r,e.pingedLanes&=~r,e=e.expirationTimes;0<r;){var l=31-Jr(r),d=1<<l;e[l]=-1,r&=~d}}function Yd(e){if((yn&6)!==0)throw Error(y(327));Qa();var r=ua(e,0);if((r&1)===0)return pi(e,ot()),null;var l=ec(e,r);if(e.tag!==0&&l===2){var d=ha(e);d!==0&&(r=d,l=Qs(e,d))}if(l===1)throw l=Hc,Ka(e,0),$o(e,r),pi(e,ot()),l;if(l===6)throw Error(y(345));return e.finishedWork=e.current.alternate,e.finishedLanes=r,Ya(e,ar,Oo),pi(e,ot()),null}function Uo(e,r){var l=yn;yn|=1;try{return e(r)}finally{yn=l,yn===0&&(Wa=ot()+500,jt&&nn())}}function ea(e){fs!==null&&fs.tag===0&&(yn&6)===0&&Qa();var r=yn;yn|=1;var l=Fi.transition,d=fn;try{if(Fi.transition=null,fn=1,e)return e()}finally{fn=d,Fi.transition=l,yn=r,(yn&6)===0&&nn()}}function Xu(){di=Xs.current,X(Xs)}function Ka(e,r){e.finishedWork=null,e.finishedLanes=0;var l=e.timeoutHandle;if(l!==-1&&(e.timeoutHandle=-1,Ra(l)),hr!==null)for(l=hr.return;l!==null;){var d=l;switch(cn(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&De();break;case 3:Rl(),X(re),X(be),Fa();break;case 5:Ir(d);break;case 4:Rl();break;case 13:X(Hn);break;case 19:X(Hn);break;case 10:Cu(d.type._context);break;case 22:case 23:Xu()}l=l.return}if(xr=e,hr=e=ms(e.current,null),Lr=di=r,sr=0,Hc=null,ao=Gc=qa=0,ar=Yl=null,Ti!==null){for(r=0;r<Ti.length;r++)if(l=Ti[r],d=l.interleaved,d!==null){l.interleaved=null;var x=d.next,S=l.pending;if(S!==null){var M=S.next;S.next=x,d.next=M}l.pending=d}Ti=null}return e}function Qd(e,r){do{var l=hr;try{if(gh(),Lu.current=Vl,zc){for(var d=Bn.memoizedState;d!==null;){var x=d.queue;x!==null&&(x.pending=null),d=d.next}zc=!1}if(Gs=0,vr=ur=Bn=null,Rc=!1,Oa=0,Jl.current=null,l===null||l.return===null){sr=1,Hc=r,hr=null;break}e:{var S=e,M=l.return,A=l,L=r;if(r=Lr,A.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var V=L,q=A,ee=q.tag;if((q.mode&1)===0&&(ee===0||ee===11||ee===15)){var ae=q.alternate;ae?(q.updateQueue=ae.updateQueue,q.memoizedState=ae.memoizedState,q.lanes=ae.lanes):(q.updateQueue=null,q.memoizedState=null)}var se=Lh(M);if(se!==null){se.flags&=-257,Rd(se,M,A,S,r),se.mode&1&&Ah(S,V,r),r=se,L=V;var ge=r.updateQueue;if(ge===null){var Ee=new Set;Ee.add(L),r.updateQueue=Ee}else ge.add(L);break e}else{if((r&1)===0){Ah(S,V,r),Ql();break e}L=Error(y(426))}}else if(Jt&&A.mode&1){var Re=Lh(M);if(Re!==null){(Re.flags&65536)===0&&(Re.flags|=256),Rd(Re,M,A,S,r),Us(Hl(L,A));break e}}S=L=Hl(L,A),sr!==4&&(sr=2),Yl===null?Yl=[S]:Yl.push(S),S=M;do{switch(S.tag){case 3:S.flags|=65536,r&=-r,S.lanes|=r;var de=Ld(S,L,r);Iu(S,de);break e;case 1:A=L;var oe=S.type,he=S.stateNode;if((S.flags&128)===0&&(typeof oe.getDerivedStateFromError=="function"||he!==null&&typeof he.componentDidCatch=="function"&&(Ks===null||!Ks.has(he)))){S.flags|=65536,r&=-r,S.lanes|=r;var Te=zd(S,A,r);Iu(S,Te);break e}}S=S.return}while(S!==null)}Ja(l)}catch(Ie){r=Ie,hr===l&&l!==null&&(hr=l=l.return);continue}break}while(!0)}function ep(){var e=Ga.current;return Ga.current=Vl,e===null?Vl:e}function Ql(){(sr===0||sr===3||sr===2)&&(sr=4),xr===null||(qa&268435455)===0&&(Gc&268435455)===0||$o(xr,Lr)}function ec(e,r){var l=yn;yn|=2;var d=ep();(xr!==e||Lr!==r)&&(Oo=null,Ka(e,r));do try{Op();break}catch(x){Qd(e,x)}while(!0);if(gh(),yn=l,Ga.current=d,hr!==null)throw Error(y(261));return xr=null,Lr=0,sr}function Op(){for(;hr!==null;)Ku(hr)}function qh(){for(;hr!==null&&!ct();)Ku(hr)}function Ku(e){var r=np(e.alternate,e,di);e.memoizedProps=e.pendingProps,r===null?Ja(e):hr=r,Jl.current=null}function Ja(e){var r=e;do{var l=r.alternate;if(e=r.return,(r.flags&32768)===0){if(l=Fh(l,r,di),l!==null){hr=l;return}}else{if(l=Hd(l,r),l!==null){l.flags&=32767,hr=l;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{sr=6,hr=null;return}}if(r=r.sibling,r!==null){hr=r;return}hr=r=e}while(r!==null);sr===0&&(sr=5)}function Ya(e,r,l){var d=fn,x=Fi.transition;try{Fi.transition=null,fn=1,Wh(e,r,l,d)}finally{Fi.transition=x,fn=d}return null}function Wh(e,r,l,d){do Qa();while(fs!==null);if((yn&6)!==0)throw Error(y(327));l=e.finishedWork;var x=e.finishedLanes;if(l===null)return null;if(e.finishedWork=null,e.finishedLanes=0,l===e.current)throw Error(y(177));e.callbackNode=null,e.callbackPriority=0;var S=l.lanes|l.childLanes;if(cl(e,S),e===xr&&(hr=xr=null,Lr=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Wc||(Wc=!0,Zh(Ut,function(){return Qa(),null})),S=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||S){S=Fi.transition,Fi.transition=null;var M=fn;fn=1;var A=yn;yn|=4,Jl.current=null,Wl(e,l),Zd(l,e),is(eo),Es=!!Xn,eo=Xn=null,e.current=l,Xd(l),vt(),yn=A,fn=M,Fi.transition=S}else e.current=l;if(Wc&&(Wc=!1,fs=e,Zc=x),S=e.pendingLanes,S===0&&(Ks=null),mr(l.stateNode),pi(e,ot()),r!==null)for(d=e.onRecoverableError,l=0;l<r.length;l++)x=r[l],d(x.value,{componentStack:x.stack,digest:x.digest});if(qc)throw qc=!1,e=Gh,Gh=null,e;return(Zc&1)!==0&&e.tag!==0&&Qa(),S=e.pendingLanes,(S&1)!==0?e===Zu?Js++:(Js=0,Zu=e):Js=0,nn(),null}function Qa(){if(fs!==null){var e=da(Zc),r=Fi.transition,l=fn;try{if(Fi.transition=null,fn=16>e?16:e,fs===null)var d=!1;else{if(e=fs,fs=null,Zc=0,(yn&6)!==0)throw Error(y(331));var x=yn;for(yn|=4,_t=e.current;_t!==null;){var S=_t,M=S.child;if((_t.flags&16)!==0){var A=S.deletions;if(A!==null){for(var L=0;L<A.length;L++){var V=A[L];for(_t=V;_t!==null;){var q=_t;switch(q.tag){case 0:case 11:case 15:Zl(8,q,S)}var ee=q.child;if(ee!==null)ee.return=q,_t=ee;else for(;_t!==null;){q=_t;var ae=q.sibling,se=q.return;if(Gd(q),q===V){_t=null;break}if(ae!==null){ae.return=se,_t=ae;break}_t=se}}}var ge=S.alternate;if(ge!==null){var Ee=ge.child;if(Ee!==null){ge.child=null;do{var Re=Ee.sibling;Ee.sibling=null,Ee=Re}while(Ee!==null)}}_t=S}}if((S.subtreeFlags&2064)!==0&&M!==null)M.return=S,_t=M;else e:for(;_t!==null;){if(S=_t,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:Zl(9,S,S.return)}var de=S.sibling;if(de!==null){de.return=S.return,_t=de;break e}_t=S.return}}var oe=e.current;for(_t=oe;_t!==null;){M=_t;var he=M.child;if((M.subtreeFlags&2064)!==0&&he!==null)he.return=M,_t=he;else e:for(M=oe;_t!==null;){if(A=_t,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:Gu(9,A)}}catch(Ie){qn(A,A.return,Ie)}if(A===M){_t=null;break e}var Te=A.sibling;if(Te!==null){Te.return=A.return,_t=Te;break e}_t=A.return}}if(yn=x,nn(),bn&&typeof bn.onPostCommitFiberRoot=="function")try{bn.onPostCommitFiberRoot(Ln,e)}catch{}d=!0}return d}finally{fn=l,Fi.transition=r}}return!1}function Kc(e,r,l){r=Hl(l,r),r=Ld(e,r,1),e=Lo(e,r,1),r=zr(),e!==null&&(xi(e,1,r),pi(e,r))}function qn(e,r,l){if(e.tag===3)Kc(e,e,l);else for(;r!==null;){if(r.tag===3){Kc(r,e,l);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ks===null||!Ks.has(d))){e=Hl(l,e),e=zd(r,e,1),r=Lo(r,e,1),e=zr(),r!==null&&(xi(r,1,e),pi(r,e));break}}r=r.return}}function $p(e,r,l){var d=e.pingCache;d!==null&&d.delete(r),r=zr(),e.pingedLanes|=e.suspendedLanes&l,xr===e&&(Lr&l)===l&&(sr===4||sr===3&&(Lr&130023424)===Lr&&500>ot()-Wu?Ka(e,0):ao|=l),pi(e,r)}function tp(e,r){r===0&&((e.mode&1)===0?r=1:(r=al,al<<=1,(al&130023424)===0&&(al=4194304)));var l=zr();e=ro(e,r),e!==null&&(xi(e,r,l),pi(e,l))}function Up(e){var r=e.memoizedState,l=0;r!==null&&(l=r.retryLane),tp(e,l)}function Vp(e,r){var l=0;switch(e.tag){case 13:var d=e.stateNode,x=e.memoizedState;x!==null&&(l=x.retryLane);break;case 19:d=e.stateNode;break;default:throw Error(y(314))}d!==null&&d.delete(r),tp(e,l)}var np;np=function(e,r,l){if(e!==null)if(e.memoizedProps!==r.pendingProps||re.current)hi=!0;else{if((e.lanes&l)===0&&(r.flags&128)===0)return hi=!1,Fp(e,r,l);hi=(e.flags&131072)!==0}else hi=!1,Jt&&(r.flags&1048576)!==0&&Mo(r,Cr,r.index);switch(r.lanes=0,r.tag){case 2:var d=r.type;$c(e,r),e=r.pendingProps;var x=ke(r,be.current);Vs(r,l),x=ti(null,r,d,e,x,l);var S=Ru();return r.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Pe(d)?(S=!0,lt(r)):S=!1,r.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,yh(r),x.updater=Nu,r.stateNode=x,x._reactInternals=r,No(r,d,e,l),r=$u(null,r,d,!0,S,l)):(r.tag=0,Jt&&S&&Os(r),ni(null,r,x,l),r=r.child),r;case 16:d=r.elementType;e:{switch($c(e,r),e=r.pendingProps,x=d._init,d=x(d._payload),r.type=d,x=r.tag=rp(d),e=ki(d,e),x){case 0:r=zh(null,r,d,e,l);break e;case 1:r=ql(null,r,d,e,l);break e;case 11:r=Fu(null,r,d,e,l);break e;case 14:r=Gl(null,r,d,ki(d.type,e),l);break e}throw Error(y(306,d,""))}return r;case 0:return d=r.type,x=r.pendingProps,x=r.elementType===d?x:ki(d,x),zh(e,r,d,x,l);case 1:return d=r.type,x=r.pendingProps,x=r.elementType===d?x:ki(d,x),ql(e,r,d,x,l);case 3:e:{if(Nd(r),e===null)throw Error(y(387));d=r.pendingProps,S=r.memoizedState,x=S.element,vh(e,r),Lc(r,d,null,l);var M=r.memoizedState;if(d=M.element,S.isDehydrated)if(S={element:d,isDehydrated:!1,cache:M.cache,pendingSuspenseBoundaries:M.pendingSuspenseBoundaries,transitions:M.transitions},r.updateQueue.baseState=S,r.memoizedState=S,r.flags&256){x=Hl(Error(y(423)),r),r=Bd(e,r,d,l,x);break e}else if(d!==x){x=Hl(Error(y(424)),r),r=Bd(e,r,d,l,x);break e}else for(Ht=ci(r.stateNode.containerInfo.firstChild),on=r,Jt=!0,Nn=null,l=Ao(r,null,d,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Pr(),d===x){r=ds(e,r,l);break e}ni(e,r,d,l)}r=r.child}return r;case 5:return Ur(r),e===null&&Po(r),d=r.type,x=r.pendingProps,S=e!==null?e.memoizedProps:null,M=x.children,Mr(d,x)?M=null:S!==null&&Mr(d,S)&&(r.flags|=32),Dd(e,r),ni(e,r,M,l),r.child;case 6:return e===null&&Po(r),null;case 13:return Fd(e,r,l);case 4:return _h(r,r.stateNode.containerInfo),d=r.pendingProps,e===null?r.child=to(r,null,d,l):ni(e,r,d,l),r.child;case 11:return d=r.type,x=r.pendingProps,x=r.elementType===d?x:ki(d,x),Fu(e,r,d,x,l);case 7:return ni(e,r,r.pendingProps,l),r.child;case 8:return ni(e,r,r.pendingProps.children,l),r.child;case 12:return ni(e,r,r.pendingProps.children,l),r.child;case 10:e:{if(d=r.type._context,x=r.pendingProps,S=r.memoizedProps,M=x.value,le(ui,d._currentValue),d._currentValue=M,S!==null)if(li(S.value,M)){if(S.children===x.children&&!re.current){r=ds(e,r,l);break e}}else for(S=r.child,S!==null&&(S.return=r);S!==null;){var A=S.dependencies;if(A!==null){M=S.child;for(var L=A.firstContext;L!==null;){if(L.context===d){if(S.tag===1){L=us(-1,l&-l),L.tag=2;var V=S.updateQueue;if(V!==null){V=V.shared;var q=V.pending;q===null?L.next=L:(L.next=q.next,q.next=L),V.pending=L}}S.lanes|=l,L=S.alternate,L!==null&&(L.lanes|=l),Jn(S.return,l,r),A.lanes|=l;break}L=L.next}}else if(S.tag===10)M=S.type===r.type?null:S.child;else if(S.tag===18){if(M=S.return,M===null)throw Error(y(341));M.lanes|=l,A=M.alternate,A!==null&&(A.lanes|=l),Jn(M,l,r),M=S.sibling}else M=S.child;if(M!==null)M.return=S;else for(M=S;M!==null;){if(M===r){M=null;break}if(S=M.sibling,S!==null){S.return=M.return,M=S;break}M=M.return}S=M}ni(e,r,x.children,l),r=r.child}return r;case 9:return x=r.type,d=r.pendingProps.children,Vs(r,l),x=Ei(x),d=d(x),r.flags|=1,ni(e,r,d,l),r.child;case 14:return d=r.type,x=ki(d,r.pendingProps),x=ki(d.type,x),Gl(e,r,d,x,l);case 15:return Ou(e,r,r.type,r.pendingProps,l);case 17:return d=r.type,x=r.pendingProps,x=r.elementType===d?x:ki(d,x),$c(e,r),r.tag=1,Pe(d)?(e=!0,lt(r)):e=!1,Vs(r,l),Id(r,d,x),No(r,d,x,l),$u(null,r,d,!0,e,l);case 19:return Bh(e,r,l);case 22:return jd(e,r,l)}throw Error(y(156,r.tag))};function Zh(e,r){return $e(e,r)}function Wn(e,r,l,d){this.tag=e,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rr(e,r,l,d){return new Wn(e,r,l,d)}function Ju(e){return e=e.prototype,!(!e||!e.isReactComponent)}function rp(e){if(typeof e=="function")return Ju(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Tt)return 11;if(e===Ct)return 14}return 2}function ms(e,r){var l=e.alternate;return l===null?(l=Rr(e.tag,r,e.key,e.mode),l.elementType=e.elementType,l.type=e.type,l.stateNode=e.stateNode,l.alternate=e,e.alternate=l):(l.pendingProps=r,l.type=e.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=e.flags&14680064,l.childLanes=e.childLanes,l.lanes=e.lanes,l.child=e.child,l.memoizedProps=e.memoizedProps,l.memoizedState=e.memoizedState,l.updateQueue=e.updateQueue,r=e.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=e.sibling,l.index=e.index,l.ref=e.ref,l}function Jc(e,r,l,d,x,S){var M=2;if(d=e,typeof e=="function")Ju(e)&&(M=1);else if(typeof e=="string")M=5;else e:switch(e){case Je:return ta(l.children,x,S,r);case He:M=8,x|=8;break;case gt:return e=Rr(12,l,r,x|2),e.elementType=gt,e.lanes=S,e;case bt:return e=Rr(13,l,r,x),e.elementType=bt,e.lanes=S,e;case mt:return e=Rr(19,l,r,x),e.elementType=mt,e.lanes=S,e;case Pt:return tc(l,x,S,r);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case pt:M=10;break e;case wt:M=9;break e;case Tt:M=11;break e;case Ct:M=14;break e;case Ze:M=16,d=null;break e}throw Error(y(130,e==null?e:typeof e,""))}return r=Rr(M,l,r,x),r.elementType=e,r.type=d,r.lanes=S,r}function ta(e,r,l,d){return e=Rr(7,e,d,r),e.lanes=l,e}function tc(e,r,l,d){return e=Rr(22,e,d,r),e.elementType=Pt,e.lanes=l,e.stateNode={isHidden:!1},e}function nc(e,r,l){return e=Rr(6,e,null,r),e.lanes=l,e}function Yu(e,r,l){return r=Rr(4,e.children!==null?e.children:[],e.key,r),r.lanes=l,r.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},r}function Xh(e,r,l,d,x){this.tag=r,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ll(0),this.expirationTimes=ll(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ll(0),this.identifierPrefix=d,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function Qu(e,r,l,d,x,S,M,A,L){return e=new Xh(e,r,l,A,L),r===1?(r=1,S===!0&&(r|=8)):r=0,S=Rr(3,null,null,r),e.current=S,S.stateNode=e,S.memoizedState={element:d,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},yh(S),e}function Mi(e,r,l){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ke,key:d==null?null:""+d,children:e,containerInfo:r,implementation:l}}function rc(e){if(!e)return xe;e=e._reactInternals;e:{if(me(e)!==e||e.tag!==1)throw Error(y(170));var r=e;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Pe(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(y(171))}if(e.tag===1){var l=e.type;if(Pe(l))return ze(e,l,r)}return r}function Kh(e,r,l,d,x,S,M,A,L){return e=Qu(l,d,!0,e,x,S,M,A,L),e.context=rc(null),l=e.current,d=zr(),x=Ys(l),S=us(d,x),S.callback=r??null,Lo(l,S,x),e.current.lanes=x,xi(e,x,d),pi(e,d),e}function Yc(e,r,l,d){var x=r.current,S=zr(),M=Ys(x);return l=rc(l),r.context===null?r.context=l:r.pendingContext=l,r=us(S,M),r.payload={element:e},d=d===void 0?null:d,d!==null&&(r.callback=d),e=Lo(x,r,M),e!==null&&(lo(e,x,M,S),Pu(e,x,M)),M}function Qc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Jh(e,r){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var l=e.retryLane;e.retryLane=l!==0&&l<r?l:r}}function eh(e,r){Jh(e,r),(e=e.alternate)&&Jh(e,r)}function ip(){return null}var op=typeof reportError=="function"?reportError:function(e){console.error(e)};function eu(e){this._internalRoot=e}el.prototype.render=eu.prototype.render=function(e){var r=this._internalRoot;if(r===null)throw Error(y(409));Yc(e,r,null,null)},el.prototype.unmount=eu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var r=e.containerInfo;ea(function(){Yc(null,e,null,null)}),r[m]=null}};function el(e){this._internalRoot=e}el.prototype.unstable_scheduleHydration=function(e){if(e){var r=ws();e={blockedOn:null,target:e,priority:r};for(var l=0;l<fo.length&&r!==0&&r<fo[l].priority;l++);fo.splice(l,0,e),l===0&&fc(e)}};function tl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ic(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function sp(){}function i(e,r,l,d,x){if(x){if(typeof d=="function"){var S=d;d=function(){var V=Qc(M);S.call(V)}}var M=Kh(r,d,e,0,null,!1,!1,"",sp);return e._reactRootContainer=M,e[m]=M.current,Eo(e.nodeType===8?e.parentNode:e),ea(),M}for(;x=e.lastChild;)e.removeChild(x);if(typeof d=="function"){var A=d;d=function(){var V=Qc(L);A.call(V)}}var L=Qu(e,0,!1,null,null,!1,!1,"",sp);return e._reactRootContainer=L,e[m]=L.current,Eo(e.nodeType===8?e.parentNode:e),ea(function(){Yc(r,L,l,d)}),L}function t(e,r,l,d,x){var S=l._reactRootContainer;if(S){var M=S;if(typeof x=="function"){var A=x;x=function(){var L=Qc(M);A.call(L)}}Yc(r,M,e,x)}else M=i(l,r,e,x,d);return Qc(M)}pa=function(e){switch(e.tag){case 3:var r=e.stateNode;if(r.current.memoizedState.isDehydrated){var l=Zo(r.pendingLanes);l!==0&&(po(r,l|1),pi(r,ot()),(yn&6)===0&&(Wa=ot()+500,nn()))}break;case 13:ea(function(){var d=ro(e,1);if(d!==null){var x=zr();lo(d,e,1,x)}}),eh(e,1)}},Xo=function(e){if(e.tag===13){var r=ro(e,134217728);if(r!==null){var l=zr();lo(r,e,134217728,l)}eh(e,134217728)}},fa=function(e){if(e.tag===13){var r=Ys(e),l=ro(e,r);if(l!==null){var d=zr();lo(l,e,r,d)}eh(e,r)}},ws=function(){return fn},zn=function(e,r){var l=fn;try{return fn=e,r()}finally{fn=l}},lr=function(e,r,l){switch(r){case"input":if(Ot(e,l),r=l.name,l.type==="radio"&&r!=null){for(l=e;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<l.length;r++){var d=l[r];if(d!==e&&d.form===e.form){var x=U(d);if(!x)throw Error(y(90));Qn(d),Ot(d,x)}}}break;case"textarea":On(e,l);break;case"select":r=l.value,r!=null&&Br(e,!!l.multiple,r,!1)}},$t=Uo,mn=ea;var o={usingClientEntryPoint:!1,Events:[z,N,U,je,It,Uo]},u={findFiberByHostInstance:I,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},g={bundleType:u.bundleType,version:u.version,rendererPackageName:u.rendererPackageName,rendererConfig:u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Be.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ae(e),e===null?null:e.stateNode},findFiberByHostInstance:u.findFiberByHostInstance||ip,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var w=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!w.isDisabled&&w.supportsFiber)try{Ln=w.inject(g),bn=w}catch{}}return $i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o,$i.createPortal=function(e,r){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tl(r))throw Error(y(200));return Mi(e,r,null,l)},$i.createRoot=function(e,r){if(!tl(e))throw Error(y(299));var l=!1,d="",x=op;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onRecoverableError!==void 0&&(x=r.onRecoverableError)),r=Qu(e,1,!1,null,null,l,!1,d,x),e[m]=r.current,Eo(e.nodeType===8?e.parentNode:e),new eu(r)},$i.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var r=e._reactInternals;if(r===void 0)throw typeof e.render=="function"?Error(y(188)):(e=Object.keys(e).join(","),Error(y(268,e)));return e=Ae(r),e=e===null?null:e.stateNode,e},$i.flushSync=function(e){return ea(e)},$i.hydrate=function(e,r,l){if(!ic(r))throw Error(y(200));return t(null,e,r,!0,l)},$i.hydrateRoot=function(e,r,l){if(!tl(e))throw Error(y(405));var d=l!=null&&l.hydratedSources||null,x=!1,S="",M=op;if(l!=null&&(l.unstable_strictMode===!0&&(x=!0),l.identifierPrefix!==void 0&&(S=l.identifierPrefix),l.onRecoverableError!==void 0&&(M=l.onRecoverableError)),r=Kh(r,null,e,1,l??null,x,!1,S,M),e[m]=r.current,Eo(e),d)for(e=0;e<d.length;e++)l=d[e],x=l._getVersion,x=x(l._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[l,x]:r.mutableSourceEagerHydrationData.push(l,x);return new el(r)},$i.render=function(e,r,l){if(!ic(r))throw Error(y(200));return t(null,e,r,!1,l)},$i.unmountComponentAtNode=function(e){if(!ic(e))throw Error(y(40));return e._reactRootContainer?(ea(function(){t(null,null,e,!1,function(){e._reactRootContainer=null,e[m]=null})}),!0):!1},$i.unstable_batchedUpdates=Uo,$i.unstable_renderSubtreeIntoContainer=function(e,r,l,d){if(!ic(l))throw Error(y(200));if(e==null||e._reactInternals===void 0)throw Error(y(38));return t(e,r,l,!1,d)},$i.version="18.3.1-next-f1338f8080-20240426",$i}var lm;function wg(){if(lm)return Kp.exports;lm=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(p){console.error(p)}}return a(),Kp.exports=ey(),Kp.exports}var cm;function ty(){if(cm)return lp;cm=1;var a=wg();return lp.createRoot=a.createRoot,lp.hydrateRoot=a.hydrateRoot,lp}var ny=ty();const ry=Sp(ny);var gf=function(a,p){return gf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,_){y.__proto__=_}||function(y,_){for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&(y[E]=_[E])},gf(a,p)};function Go(a,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");gf(a,p);function y(){this.constructor=a}a.prototype=p===null?Object.create(p):(y.prototype=p.prototype,new y)}var Mt=function(){return Mt=Object.assign||function(p){for(var y,_=1,E=arguments.length;_<E;_++){y=arguments[_];for(var T in y)Object.prototype.hasOwnProperty.call(y,T)&&(p[T]=y[T])}return p},Mt.apply(this,arguments)};function nh(a,p){var y={};for(var _ in a)Object.prototype.hasOwnProperty.call(a,_)&&p.indexOf(_)<0&&(y[_]=a[_]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var E=0,_=Object.getOwnPropertySymbols(a);E<_.length;E++)p.indexOf(_[E])<0&&Object.prototype.propertyIsEnumerable.call(a,_[E])&&(y[_[E]]=a[_[E]]);return y}function sa(a,p,y){if(y||arguments.length===2)for(var _=0,E=p.length,T;_<E;_++)(T||!(_ in p))&&(T||(T=Array.prototype.slice.call(p,0,_)),T[_]=p[_]);return a.concat(T||Array.prototype.slice.call(p))}function ia(a,p){var y=p&&p.cache?p.cache:uy,_=p&&p.serializer?p.serializer:ly,E=p&&p.strategy?p.strategy:sy;return E(a,{cache:y,serializer:_})}function iy(a){return a==null||typeof a=="number"||typeof a=="boolean"}function oy(a,p,y,_){var E=iy(_)?_:y(_),T=p.get(E);return typeof T>"u"&&(T=a.call(this,_),p.set(E,T)),T}function bg(a,p,y){var _=Array.prototype.slice.call(arguments,3),E=y(_),T=p.get(E);return typeof T>"u"&&(T=a.apply(this,_),p.set(E,T)),T}function Sg(a,p,y,_,E){return y.bind(p,a,_,E)}function sy(a,p){var y=a.length===1?oy:bg;return Sg(a,this,y,p.cache.create(),p.serializer)}function ay(a,p){return Sg(a,this,bg,p.cache.create(),p.serializer)}var ly=function(){return JSON.stringify(arguments)},cy=function(){function a(){this.cache=Object.create(null)}return a.prototype.get=function(p){return this.cache[p]},a.prototype.set=function(p,y){this.cache[p]=y},a}(),uy={create:function(){return new cy}},oa={variadic:ay},_n;(function(a){a[a.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",a[a.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",a[a.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",a[a.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",a[a.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",a[a.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",a[a.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",a[a.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",a[a.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",a[a.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",a[a.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",a[a.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",a[a.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",a[a.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",a[a.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",a[a.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",a[a.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",a[a.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",a[a.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",a[a.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",a[a.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",a[a.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",a[a.INVALID_TAG=23]="INVALID_TAG",a[a.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",a[a.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",a[a.UNCLOSED_TAG=27]="UNCLOSED_TAG"})(_n||(_n={}));var Yn;(function(a){a[a.literal=0]="literal",a[a.argument=1]="argument",a[a.number=2]="number",a[a.date=3]="date",a[a.time=4]="time",a[a.select=5]="select",a[a.plural=6]="plural",a[a.pound=7]="pound",a[a.tag=8]="tag"})(Yn||(Yn={}));var rh;(function(a){a[a.number=0]="number",a[a.dateTime=1]="dateTime"})(rh||(rh={}));function um(a){return a.type===Yn.literal}function hy(a){return a.type===Yn.argument}function Eg(a){return a.type===Yn.number}function Tg(a){return a.type===Yn.date}function kg(a){return a.type===Yn.time}function Mg(a){return a.type===Yn.select}function Cg(a){return a.type===Yn.plural}function dy(a){return a.type===Yn.pound}function Pg(a){return a.type===Yn.tag}function Ig(a){return!!(a&&typeof a=="object"&&a.type===rh.number)}function yf(a){return!!(a&&typeof a=="object"&&a.type===rh.dateTime)}var Ag=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,py=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function fy(a){var p={};return a.replace(py,function(y){var _=y.length;switch(y[0]){case"G":p.era=_===4?"long":_===5?"narrow":"short";break;case"y":p.year=_===2?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":p.month=["numeric","2-digit","short","long","narrow"][_-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":p.day=["numeric","2-digit"][_-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":p.weekday=_===4?"long":_===5?"narrow":"short";break;case"e":if(_<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");p.weekday=["short","long","narrow","short"][_-4];break;case"c":if(_<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");p.weekday=["short","long","narrow","short"][_-4];break;case"a":p.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":p.hourCycle="h12",p.hour=["numeric","2-digit"][_-1];break;case"H":p.hourCycle="h23",p.hour=["numeric","2-digit"][_-1];break;case"K":p.hourCycle="h11",p.hour=["numeric","2-digit"][_-1];break;case"k":p.hourCycle="h24",p.hour=["numeric","2-digit"][_-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":p.minute=["numeric","2-digit"][_-1];break;case"s":p.second=["numeric","2-digit"][_-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":p.timeZoneName=_<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),p}var my=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function gy(a){if(a.length===0)throw new Error("Number skeleton cannot be empty");for(var p=a.split(my).filter(function(F){return F.length>0}),y=[],_=0,E=p;_<E.length;_++){var T=E[_],C=T.split("/");if(C.length===0)throw new Error("Invalid number skeleton");for(var c=C[0],B=C.slice(1),j=0,$=B;j<$.length;j++){var D=$[j];if(D.length===0)throw new Error("Invalid number skeleton")}y.push({stem:c,options:B})}return y}function yy(a){return a.replace(/^(.*?)-/,"")}var hm=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,Lg=/^(@+)?(\+|#+)?[rs]?$/g,vy=/(\*)(0+)|(#+)(0+)|(0+)/g,zg=/^(0+)$/;function dm(a){var p={};return a[a.length-1]==="r"?p.roundingPriority="morePrecision":a[a.length-1]==="s"&&(p.roundingPriority="lessPrecision"),a.replace(Lg,function(y,_,E){return typeof E!="string"?(p.minimumSignificantDigits=_.length,p.maximumSignificantDigits=_.length):E==="+"?p.minimumSignificantDigits=_.length:_[0]==="#"?p.maximumSignificantDigits=_.length:(p.minimumSignificantDigits=_.length,p.maximumSignificantDigits=_.length+(typeof E=="string"?E.length:0)),""}),p}function Rg(a){switch(a){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function xy(a){var p;if(a[0]==="E"&&a[1]==="E"?(p={notation:"engineering"},a=a.slice(2)):a[0]==="E"&&(p={notation:"scientific"},a=a.slice(1)),p){var y=a.slice(0,2);if(y==="+!"?(p.signDisplay="always",a=a.slice(2)):y==="+?"&&(p.signDisplay="exceptZero",a=a.slice(2)),!zg.test(a))throw new Error("Malformed concise eng/scientific notation");p.minimumIntegerDigits=a.length}return p}function pm(a){var p={},y=Rg(a);return y||p}function _y(a){for(var p={},y=0,_=a;y<_.length;y++){var E=_[y];switch(E.stem){case"percent":case"%":p.style="percent";continue;case"%x100":p.style="percent",p.scale=100;continue;case"currency":p.style="currency",p.currency=E.options[0];continue;case"group-off":case",_":p.useGrouping=!1;continue;case"precision-integer":case".":p.maximumFractionDigits=0;continue;case"measure-unit":case"unit":p.style="unit",p.unit=yy(E.options[0]);continue;case"compact-short":case"K":p.notation="compact",p.compactDisplay="short";continue;case"compact-long":case"KK":p.notation="compact",p.compactDisplay="long";continue;case"scientific":p=Mt(Mt(Mt({},p),{notation:"scientific"}),E.options.reduce(function(B,j){return Mt(Mt({},B),pm(j))},{}));continue;case"engineering":p=Mt(Mt(Mt({},p),{notation:"engineering"}),E.options.reduce(function(B,j){return Mt(Mt({},B),pm(j))},{}));continue;case"notation-simple":p.notation="standard";continue;case"unit-width-narrow":p.currencyDisplay="narrowSymbol",p.unitDisplay="narrow";continue;case"unit-width-short":p.currencyDisplay="code",p.unitDisplay="short";continue;case"unit-width-full-name":p.currencyDisplay="name",p.unitDisplay="long";continue;case"unit-width-iso-code":p.currencyDisplay="symbol";continue;case"scale":p.scale=parseFloat(E.options[0]);continue;case"rounding-mode-floor":p.roundingMode="floor";continue;case"rounding-mode-ceiling":p.roundingMode="ceil";continue;case"rounding-mode-down":p.roundingMode="trunc";continue;case"rounding-mode-up":p.roundingMode="expand";continue;case"rounding-mode-half-even":p.roundingMode="halfEven";continue;case"rounding-mode-half-down":p.roundingMode="halfTrunc";continue;case"rounding-mode-half-up":p.roundingMode="halfExpand";continue;case"integer-width":if(E.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");E.options[0].replace(vy,function(B,j,$,D,F,te){if(j)p.minimumIntegerDigits=$.length;else{if(D&&F)throw new Error("We currently do not support maximum integer digits");if(te)throw new Error("We currently do not support exact integer digits")}return""});continue}if(zg.test(E.stem)){p.minimumIntegerDigits=E.stem.length;continue}if(hm.test(E.stem)){if(E.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");E.stem.replace(hm,function(B,j,$,D,F,te){return $==="*"?p.minimumFractionDigits=j.length:D&&D[0]==="#"?p.maximumFractionDigits=D.length:F&&te?(p.minimumFractionDigits=F.length,p.maximumFractionDigits=F.length+te.length):(p.minimumFractionDigits=j.length,p.maximumFractionDigits=j.length),""});var T=E.options[0];T==="w"?p=Mt(Mt({},p),{trailingZeroDisplay:"stripIfInteger"}):T&&(p=Mt(Mt({},p),dm(T)));continue}if(Lg.test(E.stem)){p=Mt(Mt({},p),dm(E.stem));continue}var C=Rg(E.stem);C&&(p=Mt(Mt({},p),C));var c=xy(E.stem);c&&(p=Mt(Mt({},p),c))}return p}var cp={"001":["H","h"],419:["h","H","hB","hb"],AC:["H","h","hb","hB"],AD:["H","hB"],AE:["h","hB","hb","H"],AF:["H","hb","hB","h"],AG:["h","hb","H","hB"],AI:["H","h","hb","hB"],AL:["h","H","hB"],AM:["H","hB"],AO:["H","hB"],AR:["h","H","hB","hb"],AS:["h","H"],AT:["H","hB"],AU:["h","hb","H","hB"],AW:["H","hB"],AX:["H"],AZ:["H","hB","h"],BA:["H","hB","h"],BB:["h","hb","H","hB"],BD:["h","hB","H"],BE:["H","hB"],BF:["H","hB"],BG:["H","hB","h"],BH:["h","hB","hb","H"],BI:["H","h"],BJ:["H","hB"],BL:["H","hB"],BM:["h","hb","H","hB"],BN:["hb","hB","h","H"],BO:["h","H","hB","hb"],BQ:["H"],BR:["H","hB"],BS:["h","hb","H","hB"],BT:["h","H"],BW:["H","h","hb","hB"],BY:["H","h"],BZ:["H","h","hb","hB"],CA:["h","hb","H","hB"],CC:["H","h","hb","hB"],CD:["hB","H"],CF:["H","h","hB"],CG:["H","hB"],CH:["H","hB","h"],CI:["H","hB"],CK:["H","h","hb","hB"],CL:["h","H","hB","hb"],CM:["H","h","hB"],CN:["H","hB","hb","h"],CO:["h","H","hB","hb"],CP:["H"],CR:["h","H","hB","hb"],CU:["h","H","hB","hb"],CV:["H","hB"],CW:["H","hB"],CX:["H","h","hb","hB"],CY:["h","H","hb","hB"],CZ:["H"],DE:["H","hB"],DG:["H","h","hb","hB"],DJ:["h","H"],DK:["H"],DM:["h","hb","H","hB"],DO:["h","H","hB","hb"],DZ:["h","hB","hb","H"],EA:["H","h","hB","hb"],EC:["h","H","hB","hb"],EE:["H","hB"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],ER:["h","H"],ES:["H","hB","h","hb"],ET:["hB","hb","h","H"],FI:["H"],FJ:["h","hb","H","hB"],FK:["H","h","hb","hB"],FM:["h","hb","H","hB"],FO:["H","h"],FR:["H","hB"],GA:["H","hB"],GB:["H","h","hb","hB"],GD:["h","hb","H","hB"],GE:["H","hB","h"],GF:["H","hB"],GG:["H","h","hb","hB"],GH:["h","H"],GI:["H","h","hb","hB"],GL:["H","h"],GM:["h","hb","H","hB"],GN:["H","hB"],GP:["H","hB"],GQ:["H","hB","h","hb"],GR:["h","H","hb","hB"],GT:["h","H","hB","hb"],GU:["h","hb","H","hB"],GW:["H","hB"],GY:["h","hb","H","hB"],HK:["h","hB","hb","H"],HN:["h","H","hB","hb"],HR:["H","hB"],HU:["H","h"],IC:["H","h","hB","hb"],ID:["H"],IE:["H","h","hb","hB"],IL:["H","hB"],IM:["H","h","hb","hB"],IN:["h","H"],IO:["H","h","hb","hB"],IQ:["h","hB","hb","H"],IR:["hB","H"],IS:["H"],IT:["H","hB"],JE:["H","h","hb","hB"],JM:["h","hb","H","hB"],JO:["h","hB","hb","H"],JP:["H","K","h"],KE:["hB","hb","H","h"],KG:["H","h","hB","hb"],KH:["hB","h","H","hb"],KI:["h","hb","H","hB"],KM:["H","h","hB","hb"],KN:["h","hb","H","hB"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],KW:["h","hB","hb","H"],KY:["h","hb","H","hB"],KZ:["H","hB"],LA:["H","hb","hB","h"],LB:["h","hB","hb","H"],LC:["h","hb","H","hB"],LI:["H","hB","h"],LK:["H","h","hB","hb"],LR:["h","hb","H","hB"],LS:["h","H"],LT:["H","h","hb","hB"],LU:["H","h","hB"],LV:["H","hB","hb","h"],LY:["h","hB","hb","H"],MA:["H","h","hB","hb"],MC:["H","hB"],MD:["H","hB"],ME:["H","hB","h"],MF:["H","hB"],MG:["H","h"],MH:["h","hb","H","hB"],MK:["H","h","hb","hB"],ML:["H"],MM:["hB","hb","H","h"],MN:["H","h","hb","hB"],MO:["h","hB","hb","H"],MP:["h","hb","H","hB"],MQ:["H","hB"],MR:["h","hB","hb","H"],MS:["H","h","hb","hB"],MT:["H","h"],MU:["H","h"],MV:["H","h"],MW:["h","hb","H","hB"],MX:["h","H","hB","hb"],MY:["hb","hB","h","H"],MZ:["H","hB"],NA:["h","H","hB","hb"],NC:["H","hB"],NE:["H"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NI:["h","H","hB","hb"],NL:["H","hB"],NO:["H","h"],NP:["H","h","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],NZ:["h","hb","H","hB"],OM:["h","hB","hb","H"],PA:["h","H","hB","hb"],PE:["h","H","hB","hb"],PF:["H","h","hB"],PG:["h","H"],PH:["h","hB","hb","H"],PK:["h","hB","H"],PL:["H","h"],PM:["H","hB"],PN:["H","h","hb","hB"],PR:["h","H","hB","hb"],PS:["h","hB","hb","H"],PT:["H","hB"],PW:["h","H"],PY:["h","H","hB","hb"],QA:["h","hB","hb","H"],RE:["H","hB"],RO:["H","hB"],RS:["H","hB","h"],RU:["H"],RW:["H","h"],SA:["h","hB","hb","H"],SB:["h","hb","H","hB"],SC:["H","h","hB"],SD:["h","hB","hb","H"],SE:["H"],SG:["h","hb","H","hB"],SH:["H","h","hb","hB"],SI:["H","hB"],SJ:["H"],SK:["H"],SL:["h","hb","H","hB"],SM:["H","h","hB"],SN:["H","h","hB"],SO:["h","H"],SR:["H","hB"],SS:["h","hb","H","hB"],ST:["H","hB"],SV:["h","H","hB","hb"],SX:["H","h","hb","hB"],SY:["h","hB","hb","H"],SZ:["h","hb","H","hB"],TA:["H","h","hb","hB"],TC:["h","hb","H","hB"],TD:["h","H","hB"],TF:["H","h","hB"],TG:["H","hB"],TH:["H","h"],TJ:["H","h"],TL:["H","hB","hb","h"],TM:["H","h"],TN:["h","hB","hb","H"],TO:["h","H"],TR:["H","hB"],TT:["h","hb","H","hB"],TW:["hB","hb","h","H"],TZ:["hB","hb","H","h"],UA:["H","hB","h"],UG:["hB","hb","H","h"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],UY:["h","H","hB","hb"],UZ:["H","hB","h"],VA:["H","h","hB"],VC:["h","hb","H","hB"],VE:["h","H","hB","hb"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],VN:["H","h"],VU:["h","H"],WF:["H","hB"],WS:["h","H"],XK:["H","hB","h"],YE:["h","hB","hb","H"],YT:["H","hB"],ZA:["H","h","hb","hB"],ZM:["h","hb","H","hB"],ZW:["H","h"],"af-ZA":["H","h","hB","hb"],"ar-001":["h","hB","hb","H"],"ca-ES":["H","h","hB"],"en-001":["h","hb","H","hB"],"en-HK":["h","hb","H","hB"],"en-IL":["H","h","hb","hB"],"en-MY":["h","hb","H","hB"],"es-BR":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"gu-IN":["hB","hb","h","H"],"hi-IN":["hB","h","H"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],"ta-IN":["hB","h","hb","H"],"te-IN":["hB","h","H"],"zu-ZA":["H","hB","hb","h"]};function wy(a,p){for(var y="",_=0;_<a.length;_++){var E=a.charAt(_);if(E==="j"){for(var T=0;_+1<a.length&&a.charAt(_+1)===E;)T++,_++;var C=1+(T&1),c=T<2?1:3+(T>>1),B="a",j=by(p);for((j=="H"||j=="k")&&(c=0);c-- >0;)y+=B;for(;C-- >0;)y=j+y}else E==="J"?y+="H":y+=E}return y}function by(a){var p=a.hourCycle;if(p===void 0&&a.hourCycles&&a.hourCycles.length&&(p=a.hourCycles[0]),p)switch(p){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var y=a.language,_;y!=="root"&&(_=a.maximize().region);var E=cp[_||""]||cp[y||""]||cp["".concat(y,"-001")]||cp["001"];return E[0]}var Qp,Sy=new RegExp("^".concat(Ag.source,"*")),Ey=new RegExp("".concat(Ag.source,"*$"));function wn(a,p){return{start:a,end:p}}var Ty=!!String.prototype.startsWith&&"_a".startsWith("a",1),ky=!!String.fromCodePoint,My=!!Object.fromEntries,Cy=!!String.prototype.codePointAt,Py=!!String.prototype.trimStart,Iy=!!String.prototype.trimEnd,Ay=!!Number.isSafeInteger,Ly=Ay?Number.isSafeInteger:function(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a&&Math.abs(a)<=9007199254740991},vf=!0;try{var zy=Dg("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");vf=((Qp=zy.exec("a"))===null||Qp===void 0?void 0:Qp[0])==="a"}catch{vf=!1}var fm=Ty?function(p,y,_){return p.startsWith(y,_)}:function(p,y,_){return p.slice(_,_+y.length)===y},xf=ky?String.fromCodePoint:function(){for(var p=[],y=0;y<arguments.length;y++)p[y]=arguments[y];for(var _="",E=p.length,T=0,C;E>T;){if(C=p[T++],C>1114111)throw RangeError(C+" is not a valid code point");_+=C<65536?String.fromCharCode(C):String.fromCharCode(((C-=65536)>>10)+55296,C%1024+56320)}return _},mm=My?Object.fromEntries:function(p){for(var y={},_=0,E=p;_<E.length;_++){var T=E[_],C=T[0],c=T[1];y[C]=c}return y},jg=Cy?function(p,y){return p.codePointAt(y)}:function(p,y){var _=p.length;if(!(y<0||y>=_)){var E=p.charCodeAt(y),T;return E<55296||E>56319||y+1===_||(T=p.charCodeAt(y+1))<56320||T>57343?E:(E-55296<<10)+(T-56320)+65536}},Ry=Py?function(p){return p.trimStart()}:function(p){return p.replace(Sy,"")},jy=Iy?function(p){return p.trimEnd()}:function(p){return p.replace(Ey,"")};function Dg(a,p){return new RegExp(a,p)}var _f;if(vf){var gm=Dg("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");_f=function(p,y){var _;gm.lastIndex=y;var E=gm.exec(p);return(_=E[1])!==null&&_!==void 0?_:""}}else _f=function(p,y){for(var _=[];;){var E=jg(p,y);if(E===void 0||Ng(E)||Fy(E))break;_.push(E),y+=E>=65536?2:1}return xf.apply(void 0,_)};var Dy=function(){function a(p,y){y===void 0&&(y={}),this.message=p,this.position={offset:0,line:1,column:1},this.ignoreTag=!!y.ignoreTag,this.locale=y.locale,this.requiresOtherClause=!!y.requiresOtherClause,this.shouldParseSkeletons=!!y.shouldParseSkeletons}return a.prototype.parse=function(){if(this.offset()!==0)throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},a.prototype.parseMessage=function(p,y,_){for(var E=[];!this.isEOF();){var T=this.char();if(T===123){var C=this.parseArgument(p,_);if(C.err)return C;E.push(C.val)}else{if(T===125&&p>0)break;if(T===35&&(y==="plural"||y==="selectordinal")){var c=this.clonePosition();this.bump(),E.push({type:Yn.pound,location:wn(c,this.clonePosition())})}else if(T===60&&!this.ignoreTag&&this.peek()===47){if(_)break;return this.error(_n.UNMATCHED_CLOSING_TAG,wn(this.clonePosition(),this.clonePosition()))}else if(T===60&&!this.ignoreTag&&wf(this.peek()||0)){var C=this.parseTag(p,y);if(C.err)return C;E.push(C.val)}else{var C=this.parseLiteral(p,y);if(C.err)return C;E.push(C.val)}}}return{val:E,err:null}},a.prototype.parseTag=function(p,y){var _=this.clonePosition();this.bump();var E=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:Yn.literal,value:"<".concat(E,"/>"),location:wn(_,this.clonePosition())},err:null};if(this.bumpIf(">")){var T=this.parseMessage(p+1,y,!0);if(T.err)return T;var C=T.val,c=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!wf(this.char()))return this.error(_n.INVALID_TAG,wn(c,this.clonePosition()));var B=this.clonePosition(),j=this.parseTagName();return E!==j?this.error(_n.UNMATCHED_CLOSING_TAG,wn(B,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:Yn.tag,value:E,children:C,location:wn(_,this.clonePosition())},err:null}:this.error(_n.INVALID_TAG,wn(c,this.clonePosition())))}else return this.error(_n.UNCLOSED_TAG,wn(_,this.clonePosition()))}else return this.error(_n.INVALID_TAG,wn(_,this.clonePosition()))},a.prototype.parseTagName=function(){var p=this.offset();for(this.bump();!this.isEOF()&&By(this.char());)this.bump();return this.message.slice(p,this.offset())},a.prototype.parseLiteral=function(p,y){for(var _=this.clonePosition(),E="";;){var T=this.tryParseQuote(y);if(T){E+=T;continue}var C=this.tryParseUnquoted(p,y);if(C){E+=C;continue}var c=this.tryParseLeftAngleBracket();if(c){E+=c;continue}break}var B=wn(_,this.clonePosition());return{val:{type:Yn.literal,value:E,location:B},err:null}},a.prototype.tryParseLeftAngleBracket=function(){return!this.isEOF()&&this.char()===60&&(this.ignoreTag||!Ny(this.peek()||0))?(this.bump(),"<"):null},a.prototype.tryParseQuote=function(p){if(this.isEOF()||this.char()!==39)return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if(p==="plural"||p==="selectordinal")break;return null;default:return null}this.bump();var y=[this.char()];for(this.bump();!this.isEOF();){var _=this.char();if(_===39)if(this.peek()===39)y.push(39),this.bump();else{this.bump();break}else y.push(_);this.bump()}return xf.apply(void 0,y)},a.prototype.tryParseUnquoted=function(p,y){if(this.isEOF())return null;var _=this.char();return _===60||_===123||_===35&&(y==="plural"||y==="selectordinal")||_===125&&p>0?null:(this.bump(),xf(_))},a.prototype.parseArgument=function(p,y){var _=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(_n.EXPECT_ARGUMENT_CLOSING_BRACE,wn(_,this.clonePosition()));if(this.char()===125)return this.bump(),this.error(_n.EMPTY_ARGUMENT,wn(_,this.clonePosition()));var E=this.parseIdentifierIfPossible().value;if(!E)return this.error(_n.MALFORMED_ARGUMENT,wn(_,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(_n.EXPECT_ARGUMENT_CLOSING_BRACE,wn(_,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:Yn.argument,value:E,location:wn(_,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(_n.EXPECT_ARGUMENT_CLOSING_BRACE,wn(_,this.clonePosition())):this.parseArgumentOptions(p,y,E,_);default:return this.error(_n.MALFORMED_ARGUMENT,wn(_,this.clonePosition()))}},a.prototype.parseIdentifierIfPossible=function(){var p=this.clonePosition(),y=this.offset(),_=_f(this.message,y),E=y+_.length;this.bumpTo(E);var T=this.clonePosition(),C=wn(p,T);return{value:_,location:C}},a.prototype.parseArgumentOptions=function(p,y,_,E){var T,C=this.clonePosition(),c=this.parseIdentifierIfPossible().value,B=this.clonePosition();switch(c){case"":return this.error(_n.EXPECT_ARGUMENT_TYPE,wn(C,B));case"number":case"date":case"time":{this.bumpSpace();var j=null;if(this.bumpIf(",")){this.bumpSpace();var $=this.clonePosition(),D=this.parseSimpleArgStyleIfPossible();if(D.err)return D;var F=jy(D.val);if(F.length===0)return this.error(_n.EXPECT_ARGUMENT_STYLE,wn(this.clonePosition(),this.clonePosition()));var te=wn($,this.clonePosition());j={style:F,styleLocation:te}}var ie=this.tryParseArgumentClose(E);if(ie.err)return ie;var W=wn(E,this.clonePosition());if(j&&fm(j==null?void 0:j.style,"::",0)){var Y=Ry(j.style.slice(2));if(c==="number"){var D=this.parseNumberSkeletonFromString(Y,j.styleLocation);return D.err?D:{val:{type:Yn.number,value:_,location:W,style:D.val},err:null}}else{if(Y.length===0)return this.error(_n.EXPECT_DATE_TIME_SKELETON,W);var pe=Y;this.locale&&(pe=wy(Y,this.locale));var F={type:rh.dateTime,pattern:pe,location:j.styleLocation,parsedOptions:this.shouldParseSkeletons?fy(pe):{}},ye=c==="date"?Yn.date:Yn.time;return{val:{type:ye,value:_,location:W,style:F},err:null}}}return{val:{type:c==="number"?Yn.number:c==="date"?Yn.date:Yn.time,value:_,location:W,style:(T=j==null?void 0:j.style)!==null&&T!==void 0?T:null},err:null}}case"plural":case"selectordinal":case"select":{var ve=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(_n.EXPECT_SELECT_ARGUMENT_OPTIONS,wn(ve,Mt({},ve)));this.bumpSpace();var Be=this.parseIdentifierIfPossible(),Se=0;if(c!=="select"&&Be.value==="offset"){if(!this.bumpIf(":"))return this.error(_n.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,wn(this.clonePosition(),this.clonePosition()));this.bumpSpace();var D=this.tryParseDecimalInteger(_n.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,_n.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);if(D.err)return D;this.bumpSpace(),Be=this.parseIdentifierIfPossible(),Se=D.val}var Ke=this.tryParsePluralOrSelectOptions(p,c,y,Be);if(Ke.err)return Ke;var ie=this.tryParseArgumentClose(E);if(ie.err)return ie;var Je=wn(E,this.clonePosition());return c==="select"?{val:{type:Yn.select,value:_,options:mm(Ke.val),location:Je},err:null}:{val:{type:Yn.plural,value:_,options:mm(Ke.val),offset:Se,pluralType:c==="plural"?"cardinal":"ordinal",location:Je},err:null}}default:return this.error(_n.INVALID_ARGUMENT_TYPE,wn(C,B))}},a.prototype.tryParseArgumentClose=function(p){return this.isEOF()||this.char()!==125?this.error(_n.EXPECT_ARGUMENT_CLOSING_BRACE,wn(p,this.clonePosition())):(this.bump(),{val:!0,err:null})},a.prototype.parseSimpleArgStyleIfPossible=function(){for(var p=0,y=this.clonePosition();!this.isEOF();){var _=this.char();switch(_){case 39:{this.bump();var E=this.clonePosition();if(!this.bumpUntil("'"))return this.error(_n.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,wn(E,this.clonePosition()));this.bump();break}case 123:{p+=1,this.bump();break}case 125:{if(p>0)p-=1;else return{val:this.message.slice(y.offset,this.offset()),err:null};break}default:this.bump();break}}return{val:this.message.slice(y.offset,this.offset()),err:null}},a.prototype.parseNumberSkeletonFromString=function(p,y){var _=[];try{_=gy(p)}catch{return this.error(_n.INVALID_NUMBER_SKELETON,y)}return{val:{type:rh.number,tokens:_,location:y,parsedOptions:this.shouldParseSkeletons?_y(_):{}},err:null}},a.prototype.tryParsePluralOrSelectOptions=function(p,y,_,E){for(var T,C=!1,c=[],B=new Set,j=E.value,$=E.location;;){if(j.length===0){var D=this.clonePosition();if(y!=="select"&&this.bumpIf("=")){var F=this.tryParseDecimalInteger(_n.EXPECT_PLURAL_ARGUMENT_SELECTOR,_n.INVALID_PLURAL_ARGUMENT_SELECTOR);if(F.err)return F;$=wn(D,this.clonePosition()),j=this.message.slice(D.offset,this.offset())}else break}if(B.has(j))return this.error(y==="select"?_n.DUPLICATE_SELECT_ARGUMENT_SELECTOR:_n.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,$);j==="other"&&(C=!0),this.bumpSpace();var te=this.clonePosition();if(!this.bumpIf("{"))return this.error(y==="select"?_n.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:_n.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,wn(this.clonePosition(),this.clonePosition()));var ie=this.parseMessage(p+1,y,_);if(ie.err)return ie;var W=this.tryParseArgumentClose(te);if(W.err)return W;c.push([j,{value:ie.val,location:wn(te,this.clonePosition())}]),B.add(j),this.bumpSpace(),T=this.parseIdentifierIfPossible(),j=T.value,$=T.location}return c.length===0?this.error(y==="select"?_n.EXPECT_SELECT_ARGUMENT_SELECTOR:_n.EXPECT_PLURAL_ARGUMENT_SELECTOR,wn(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!C?this.error(_n.MISSING_OTHER_CLAUSE,wn(this.clonePosition(),this.clonePosition())):{val:c,err:null}},a.prototype.tryParseDecimalInteger=function(p,y){var _=1,E=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(_=-1);for(var T=!1,C=0;!this.isEOF();){var c=this.char();if(c>=48&&c<=57)T=!0,C=C*10+(c-48),this.bump();else break}var B=wn(E,this.clonePosition());return T?(C*=_,Ly(C)?{val:C,err:null}:this.error(y,B)):this.error(p,B)},a.prototype.offset=function(){return this.position.offset},a.prototype.isEOF=function(){return this.offset()===this.message.length},a.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},a.prototype.char=function(){var p=this.position.offset;if(p>=this.message.length)throw Error("out of bound");var y=jg(this.message,p);if(y===void 0)throw Error("Offset ".concat(p," is at invalid UTF-16 code unit boundary"));return y},a.prototype.error=function(p,y){return{val:null,err:{kind:p,message:this.message,location:y}}},a.prototype.bump=function(){if(!this.isEOF()){var p=this.char();p===10?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=p<65536?1:2)}},a.prototype.bumpIf=function(p){if(fm(this.message,p,this.offset())){for(var y=0;y<p.length;y++)this.bump();return!0}return!1},a.prototype.bumpUntil=function(p){var y=this.offset(),_=this.message.indexOf(p,y);return _>=0?(this.bumpTo(_),!0):(this.bumpTo(this.message.length),!1)},a.prototype.bumpTo=function(p){if(this.offset()>p)throw Error("targetOffset ".concat(p," must be greater than or equal to the current offset ").concat(this.offset()));for(p=Math.min(p,this.message.length);;){var y=this.offset();if(y===p)break;if(y>p)throw Error("targetOffset ".concat(p," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},a.prototype.bumpSpace=function(){for(;!this.isEOF()&&Ng(this.char());)this.bump()},a.prototype.peek=function(){if(this.isEOF())return null;var p=this.char(),y=this.offset(),_=this.message.charCodeAt(y+(p>=65536?2:1));return _??null},a}();function wf(a){return a>=97&&a<=122||a>=65&&a<=90}function Ny(a){return wf(a)||a===47}function By(a){return a===45||a===46||a>=48&&a<=57||a===95||a>=97&&a<=122||a>=65&&a<=90||a==183||a>=192&&a<=214||a>=216&&a<=246||a>=248&&a<=893||a>=895&&a<=8191||a>=8204&&a<=8205||a>=8255&&a<=8256||a>=8304&&a<=8591||a>=11264&&a<=12271||a>=12289&&a<=55295||a>=63744&&a<=64975||a>=65008&&a<=65533||a>=65536&&a<=983039}function Ng(a){return a>=9&&a<=13||a===32||a===133||a>=8206&&a<=8207||a===8232||a===8233}function Fy(a){return a>=33&&a<=35||a===36||a>=37&&a<=39||a===40||a===41||a===42||a===43||a===44||a===45||a>=46&&a<=47||a>=58&&a<=59||a>=60&&a<=62||a>=63&&a<=64||a===91||a===92||a===93||a===94||a===96||a===123||a===124||a===125||a===126||a===161||a>=162&&a<=165||a===166||a===167||a===169||a===171||a===172||a===174||a===176||a===177||a===182||a===187||a===191||a===215||a===247||a>=8208&&a<=8213||a>=8214&&a<=8215||a===8216||a===8217||a===8218||a>=8219&&a<=8220||a===8221||a===8222||a===8223||a>=8224&&a<=8231||a>=8240&&a<=8248||a===8249||a===8250||a>=8251&&a<=8254||a>=8257&&a<=8259||a===8260||a===8261||a===8262||a>=8263&&a<=8273||a===8274||a===8275||a>=8277&&a<=8286||a>=8592&&a<=8596||a>=8597&&a<=8601||a>=8602&&a<=8603||a>=8604&&a<=8607||a===8608||a>=8609&&a<=8610||a===8611||a>=8612&&a<=8613||a===8614||a>=8615&&a<=8621||a===8622||a>=8623&&a<=8653||a>=8654&&a<=8655||a>=8656&&a<=8657||a===8658||a===8659||a===8660||a>=8661&&a<=8691||a>=8692&&a<=8959||a>=8960&&a<=8967||a===8968||a===8969||a===8970||a===8971||a>=8972&&a<=8991||a>=8992&&a<=8993||a>=8994&&a<=9e3||a===9001||a===9002||a>=9003&&a<=9083||a===9084||a>=9085&&a<=9114||a>=9115&&a<=9139||a>=9140&&a<=9179||a>=9180&&a<=9185||a>=9186&&a<=9254||a>=9255&&a<=9279||a>=9280&&a<=9290||a>=9291&&a<=9311||a>=9472&&a<=9654||a===9655||a>=9656&&a<=9664||a===9665||a>=9666&&a<=9719||a>=9720&&a<=9727||a>=9728&&a<=9838||a===9839||a>=9840&&a<=10087||a===10088||a===10089||a===10090||a===10091||a===10092||a===10093||a===10094||a===10095||a===10096||a===10097||a===10098||a===10099||a===10100||a===10101||a>=10132&&a<=10175||a>=10176&&a<=10180||a===10181||a===10182||a>=10183&&a<=10213||a===10214||a===10215||a===10216||a===10217||a===10218||a===10219||a===10220||a===10221||a===10222||a===10223||a>=10224&&a<=10239||a>=10240&&a<=10495||a>=10496&&a<=10626||a===10627||a===10628||a===10629||a===10630||a===10631||a===10632||a===10633||a===10634||a===10635||a===10636||a===10637||a===10638||a===10639||a===10640||a===10641||a===10642||a===10643||a===10644||a===10645||a===10646||a===10647||a===10648||a>=10649&&a<=10711||a===10712||a===10713||a===10714||a===10715||a>=10716&&a<=10747||a===10748||a===10749||a>=10750&&a<=11007||a>=11008&&a<=11055||a>=11056&&a<=11076||a>=11077&&a<=11078||a>=11079&&a<=11084||a>=11085&&a<=11123||a>=11124&&a<=11125||a>=11126&&a<=11157||a===11158||a>=11159&&a<=11263||a>=11776&&a<=11777||a===11778||a===11779||a===11780||a===11781||a>=11782&&a<=11784||a===11785||a===11786||a===11787||a===11788||a===11789||a>=11790&&a<=11798||a===11799||a>=11800&&a<=11801||a===11802||a===11803||a===11804||a===11805||a>=11806&&a<=11807||a===11808||a===11809||a===11810||a===11811||a===11812||a===11813||a===11814||a===11815||a===11816||a===11817||a>=11818&&a<=11822||a===11823||a>=11824&&a<=11833||a>=11834&&a<=11835||a>=11836&&a<=11839||a===11840||a===11841||a===11842||a>=11843&&a<=11855||a>=11856&&a<=11857||a===11858||a>=11859&&a<=11903||a>=12289&&a<=12291||a===12296||a===12297||a===12298||a===12299||a===12300||a===12301||a===12302||a===12303||a===12304||a===12305||a>=12306&&a<=12307||a===12308||a===12309||a===12310||a===12311||a===12312||a===12313||a===12314||a===12315||a===12316||a===12317||a>=12318&&a<=12319||a===12320||a===12336||a===64830||a===64831||a>=65093&&a<=65094}function bf(a){a.forEach(function(p){if(delete p.location,Mg(p)||Cg(p))for(var y in p.options)delete p.options[y].location,bf(p.options[y].value);else Eg(p)&&Ig(p.style)||(Tg(p)||kg(p))&&yf(p.style)?delete p.style.location:Pg(p)&&bf(p.children)})}function Oy(a,p){p===void 0&&(p={}),p=Mt({shouldParseSkeletons:!0,requiresOtherClause:!0},p);var y=new Dy(a,p).parse();if(y.err){var _=SyntaxError(_n[y.err.kind]);throw _.location=y.err.location,_.originalMessage=y.err.message,_}return p!=null&&p.captureLocation||bf(y.val),y.val}var aa;(function(a){a.MISSING_VALUE="MISSING_VALUE",a.INVALID_VALUE="INVALID_VALUE",a.MISSING_INTL_API="MISSING_INTL_API"})(aa||(aa={}));var ac=function(a){Go(p,a);function p(y,_,E){var T=a.call(this,y)||this;return T.code=_,T.originalMessage=E,T}return p.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},p}(Error),ym=function(a){Go(p,a);function p(y,_,E,T){return a.call(this,'Invalid values for "'.concat(y,'": "').concat(_,'". Options are "').concat(Object.keys(E).join('", "'),'"'),aa.INVALID_VALUE,T)||this}return p}(ac),$y=function(a){Go(p,a);function p(y,_,E){return a.call(this,'Value for "'.concat(y,'" must be of type ').concat(_),aa.INVALID_VALUE,E)||this}return p}(ac),Uy=function(a){Go(p,a);function p(y,_){return a.call(this,'The intl string context variable "'.concat(y,'" was not provided to the string "').concat(_,'"'),aa.MISSING_VALUE,_)||this}return p}(ac),Ri;(function(a){a[a.literal=0]="literal",a[a.object=1]="object"})(Ri||(Ri={}));function Vy(a){return a.length<2?a:a.reduce(function(p,y){var _=p[p.length-1];return!_||_.type!==Ri.literal||y.type!==Ri.literal?p.push(y):_.value+=y.value,p},[])}function Bg(a){return typeof a=="function"}function dp(a,p,y,_,E,T,C){if(a.length===1&&um(a[0]))return[{type:Ri.literal,value:a[0].value}];for(var c=[],B=0,j=a;B<j.length;B++){var $=j[B];if(um($)){c.push({type:Ri.literal,value:$.value});continue}if(dy($)){typeof T=="number"&&c.push({type:Ri.literal,value:y.getNumberFormat(p).format(T)});continue}var D=$.value;if(!(E&&D in E))throw new Uy(D,C);var F=E[D];if(hy($)){(!F||typeof F=="string"||typeof F=="number")&&(F=typeof F=="string"||typeof F=="number"?String(F):""),c.push({type:typeof F=="string"?Ri.literal:Ri.object,value:F});continue}if(Tg($)){var te=typeof $.style=="string"?_.date[$.style]:yf($.style)?$.style.parsedOptions:void 0;c.push({type:Ri.literal,value:y.getDateTimeFormat(p,te).format(F)});continue}if(kg($)){var te=typeof $.style=="string"?_.time[$.style]:yf($.style)?$.style.parsedOptions:_.time.medium;c.push({type:Ri.literal,value:y.getDateTimeFormat(p,te).format(F)});continue}if(Eg($)){var te=typeof $.style=="string"?_.number[$.style]:Ig($.style)?$.style.parsedOptions:void 0;te&&te.scale&&(F=F*(te.scale||1)),c.push({type:Ri.literal,value:y.getNumberFormat(p,te).format(F)});continue}if(Pg($)){var ie=$.children,W=$.value,Y=E[W];if(!Bg(Y))throw new $y(W,"function",C);var pe=dp(ie,p,y,_,E,T),ye=Y(pe.map(function(Se){return Se.value}));Array.isArray(ye)||(ye=[ye]),c.push.apply(c,ye.map(function(Se){return{type:typeof Se=="string"?Ri.literal:Ri.object,value:Se}}))}if(Mg($)){var ve=$.options[F]||$.options.other;if(!ve)throw new ym($.value,F,Object.keys($.options),C);c.push.apply(c,dp(ve.value,p,y,_,E));continue}if(Cg($)){var ve=$.options["=".concat(F)];if(!ve){if(!Intl.PluralRules)throw new ac(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,aa.MISSING_INTL_API,C);var Be=y.getPluralRules(p,{type:$.pluralType}).select(F-($.offset||0));ve=$.options[Be]||$.options.other}if(!ve)throw new ym($.value,F,Object.keys($.options),C);c.push.apply(c,dp(ve.value,p,y,_,E,F-($.offset||0)));continue}}return Vy(c)}function Hy(a,p){return p?Mt(Mt(Mt({},a||{}),p||{}),Object.keys(a).reduce(function(y,_){return y[_]=Mt(Mt({},a[_]),p[_]||{}),y},{})):a}function Gy(a,p){return p?Object.keys(a).reduce(function(y,_){return y[_]=Hy(a[_],p[_]),y},Mt({},a)):a}function ef(a){return{create:function(){return{get:function(p){return a[p]},set:function(p,y){a[p]=y}}}}}function qy(a){return a===void 0&&(a={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:ia(function(){for(var p,y=[],_=0;_<arguments.length;_++)y[_]=arguments[_];return new((p=Intl.NumberFormat).bind.apply(p,sa([void 0],y,!1)))},{cache:ef(a.number),strategy:oa.variadic}),getDateTimeFormat:ia(function(){for(var p,y=[],_=0;_<arguments.length;_++)y[_]=arguments[_];return new((p=Intl.DateTimeFormat).bind.apply(p,sa([void 0],y,!1)))},{cache:ef(a.dateTime),strategy:oa.variadic}),getPluralRules:ia(function(){for(var p,y=[],_=0;_<arguments.length;_++)y[_]=arguments[_];return new((p=Intl.PluralRules).bind.apply(p,sa([void 0],y,!1)))},{cache:ef(a.pluralRules),strategy:oa.variadic})}}var Fg=function(){function a(p,y,_,E){y===void 0&&(y=a.defaultLocale);var T=this;if(this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(B){var j=T.formatToParts(B);if(j.length===1)return j[0].value;var $=j.reduce(function(D,F){return!D.length||F.type!==Ri.literal||typeof D[D.length-1]!="string"?D.push(F.value):D[D.length-1]+=F.value,D},[]);return $.length<=1?$[0]||"":$},this.formatToParts=function(B){return dp(T.ast,T.locales,T.formatters,T.formats,B,void 0,T.message)},this.resolvedOptions=function(){var B;return{locale:((B=T.resolvedLocale)===null||B===void 0?void 0:B.toString())||Intl.NumberFormat.supportedLocalesOf(T.locales)[0]}},this.getAst=function(){return T.ast},this.locales=y,this.resolvedLocale=a.resolveLocale(y),typeof p=="string"){if(this.message=p,!a.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");var C=E||{};C.formatters;var c=nh(C,["formatters"]);this.ast=a.__parse(p,Mt(Mt({},c),{locale:this.resolvedLocale}))}else this.ast=p;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=Gy(a.formats,_),this.formatters=E&&E.formatters||qy(this.formatterCache)}return Object.defineProperty(a,"defaultLocale",{get:function(){return a.memoizedDefaultLocale||(a.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),a.memoizedDefaultLocale},enumerable:!1,configurable:!0}),a.memoizedDefaultLocale=null,a.resolveLocale=function(p){if(!(typeof Intl.Locale>"u")){var y=Intl.NumberFormat.supportedLocalesOf(p);return y.length>0?new Intl.Locale(y[0]):new Intl.Locale(typeof p=="string"?p:p[0])}},a.__parse=Oy,a.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},a}(),ou;(function(a){a.FORMAT_ERROR="FORMAT_ERROR",a.UNSUPPORTED_FORMATTER="UNSUPPORTED_FORMATTER",a.INVALID_CONFIG="INVALID_CONFIG",a.MISSING_DATA="MISSING_DATA",a.MISSING_TRANSLATION="MISSING_TRANSLATION"})(ou||(ou={}));var dd=function(a){Go(p,a);function p(y,_,E){var T=this,C=E?E instanceof Error?E:new Error(String(E)):void 0;return T=a.call(this,"[@formatjs/intl Error ".concat(y,"] ").concat(_,`
`).concat(C?`
`.concat(C.message,`
`).concat(C.stack):""))||this,T.code=y,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(T,p),T}return p}(Error),Wy=function(a){Go(p,a);function p(y,_){return a.call(this,ou.UNSUPPORTED_FORMATTER,y,_)||this}return p}(dd),Zy=function(a){Go(p,a);function p(y,_){return a.call(this,ou.INVALID_CONFIG,y,_)||this}return p}(dd),vm=function(a){Go(p,a);function p(y,_){return a.call(this,ou.MISSING_DATA,y,_)||this}return p}(dd),qo=function(a){Go(p,a);function p(y,_,E){var T=a.call(this,ou.FORMAT_ERROR,"".concat(y,`
Locale: `).concat(_,`
`),E)||this;return T.locale=_,T}return p}(dd),tf=function(a){Go(p,a);function p(y,_,E,T){var C=a.call(this,"".concat(y,`
MessageID: `).concat(E==null?void 0:E.id,`
Default Message: `).concat(E==null?void 0:E.defaultMessage,`
Description: `).concat(E==null?void 0:E.description,`
`),_,T)||this;return C.descriptor=E,C.locale=_,C}return p}(qo),Xy=function(a){Go(p,a);function p(y,_){var E=a.call(this,ou.MISSING_TRANSLATION,'Missing message: "'.concat(y.id,'" for locale "').concat(_,'", using ').concat(y.defaultMessage?"default message (".concat(typeof y.defaultMessage=="string"?y.defaultMessage:y.defaultMessage.map(function(T){var C;return(C=T.value)!==null&&C!==void 0?C:JSON.stringify(T)}).join(),")"):"id"," as fallback."))||this;return E.descriptor=y,E}return p}(dd);function Ky(a,p,y){if(y===void 0&&(y=Error),!a)throw new y(p)}function lh(a,p,y){return y===void 0&&(y={}),p.reduce(function(_,E){return E in a?_[E]=a[E]:E in y&&(_[E]=y[E]),_},{})}var Jy=function(a){},Yy=function(a){},Og={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:Jy,onWarn:Yy};function $g(){return{dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}}}function nu(a){return{create:function(){return{get:function(p){return a[p]},set:function(p,y){a[p]=y}}}}}function Qy(a){a===void 0&&(a=$g());var p=Intl.RelativeTimeFormat,y=Intl.ListFormat,_=Intl.DisplayNames,E=ia(function(){for(var c,B=[],j=0;j<arguments.length;j++)B[j]=arguments[j];return new((c=Intl.DateTimeFormat).bind.apply(c,sa([void 0],B,!1)))},{cache:nu(a.dateTime),strategy:oa.variadic}),T=ia(function(){for(var c,B=[],j=0;j<arguments.length;j++)B[j]=arguments[j];return new((c=Intl.NumberFormat).bind.apply(c,sa([void 0],B,!1)))},{cache:nu(a.number),strategy:oa.variadic}),C=ia(function(){for(var c,B=[],j=0;j<arguments.length;j++)B[j]=arguments[j];return new((c=Intl.PluralRules).bind.apply(c,sa([void 0],B,!1)))},{cache:nu(a.pluralRules),strategy:oa.variadic});return{getDateTimeFormat:E,getNumberFormat:T,getMessageFormat:ia(function(c,B,j,$){return new Fg(c,B,j,Mt({formatters:{getNumberFormat:T,getDateTimeFormat:E,getPluralRules:C}},$||{}))},{cache:nu(a.message),strategy:oa.variadic}),getRelativeTimeFormat:ia(function(){for(var c=[],B=0;B<arguments.length;B++)c[B]=arguments[B];return new(p.bind.apply(p,sa([void 0],c,!1)))},{cache:nu(a.relativeTime),strategy:oa.variadic}),getPluralRules:C,getListFormat:ia(function(){for(var c=[],B=0;B<arguments.length;B++)c[B]=arguments[B];return new(y.bind.apply(y,sa([void 0],c,!1)))},{cache:nu(a.list),strategy:oa.variadic}),getDisplayNames:ia(function(){for(var c=[],B=0;B<arguments.length;B++)c[B]=arguments[B];return new(_.bind.apply(_,sa([void 0],c,!1)))},{cache:nu(a.displayNames),strategy:oa.variadic})}}function Ff(a,p,y,_){var E=a&&a[p],T;if(E&&(T=E[y]),T)return T;_(new Wy("No ".concat(p," format named: ").concat(y)))}function up(a,p){return Object.keys(a).reduce(function(y,_){return y[_]=Mt({timeZone:p},a[_]),y},{})}function xm(a,p){var y=Object.keys(Mt(Mt({},a),p));return y.reduce(function(_,E){return _[E]=Mt(Mt({},a[E]||{}),p[E]||{}),_},{})}function _m(a,p){if(!p)return a;var y=Fg.formats;return Mt(Mt(Mt({},y),a),{date:xm(up(y.date,p),up(a.date||{},p)),time:xm(up(y.time,p),up(a.time||{},p))})}var Sf=function(a,p,y,_,E){var T=a.locale,C=a.formats,c=a.messages,B=a.defaultLocale,j=a.defaultFormats,$=a.fallbackOnEmptyString,D=a.onError,F=a.timeZone,te=a.defaultRichTextElements;y===void 0&&(y={id:""});var ie=y.id,W=y.defaultMessage;Ky(!!ie,"[@formatjs/intl] An `id` must be provided to format a message. You can either:\n1. Configure your build toolchain with [babel-plugin-formatjs](https://formatjs.github.io/docs/tooling/babel-plugin)\nor [@formatjs/ts-transformer](https://formatjs.github.io/docs/tooling/ts-transformer) OR\n2. Configure your `eslint` config to include [eslint-plugin-formatjs](https://formatjs.github.io/docs/tooling/linter#enforce-id)\nto autofix this issue");var Y=String(ie),pe=c&&Object.prototype.hasOwnProperty.call(c,Y)&&c[Y];if(Array.isArray(pe)&&pe.length===1&&pe[0].type===Yn.literal)return pe[0].value;if(!_&&pe&&typeof pe=="string"&&!te)return pe.replace(/'\{(.*?)\}'/gi,"{$1}");if(_=Mt(Mt({},te),_||{}),C=_m(C,F),j=_m(j,F),!pe){if($===!1&&pe==="")return pe;if((!W||T&&T.toLowerCase()!==B.toLowerCase())&&D(new Xy(y,T)),W)try{var ye=p.getMessageFormat(W,B,j,E);return ye.format(_)}catch(ve){return D(new tf('Error formatting default message for: "'.concat(Y,'", rendering default message verbatim'),T,y,ve)),typeof W=="string"?W:Y}return Y}try{var ye=p.getMessageFormat(pe,T,C,Mt({formatters:p},E||{}));return ye.format(_)}catch(ve){D(new tf('Error formatting message: "'.concat(Y,'", using ').concat(W?"default message":"id"," as fallback."),T,y,ve))}if(W)try{var ye=p.getMessageFormat(W,B,j,E);return ye.format(_)}catch(ve){D(new tf('Error formatting the default message for: "'.concat(Y,'", rendering message verbatim'),T,y,ve))}return typeof pe=="string"?pe:typeof W=="string"?W:Y},ev=["formatMatcher","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle","dateStyle","timeStyle","calendar","numberingSystem","fractionalSecondDigits"];function pd(a,p,y,_){var E=a.locale,T=a.formats,C=a.onError,c=a.timeZone;_===void 0&&(_={});var B=_.format,j=Mt(Mt({},c&&{timeZone:c}),B&&Ff(T,p,B,C)),$=lh(_,ev,j);return p==="time"&&!$.hour&&!$.minute&&!$.second&&!$.timeStyle&&!$.dateStyle&&($=Mt(Mt({},$),{hour:"numeric",minute:"numeric"})),y(E,$)}function tv(a,p){for(var y=[],_=2;_<arguments.length;_++)y[_-2]=arguments[_];var E=y[0],T=y[1],C=T===void 0?{}:T,c=typeof E=="string"?new Date(E||0):E;try{return pd(a,"date",p,C).format(c)}catch(B){a.onError(new qo("Error formatting date.",a.locale,B))}return String(c)}function nv(a,p){for(var y=[],_=2;_<arguments.length;_++)y[_-2]=arguments[_];var E=y[0],T=y[1],C=T===void 0?{}:T,c=typeof E=="string"?new Date(E||0):E;try{return pd(a,"time",p,C).format(c)}catch(B){a.onError(new qo("Error formatting time.",a.locale,B))}return String(c)}function rv(a,p){for(var y=[],_=2;_<arguments.length;_++)y[_-2]=arguments[_];var E=y[0],T=y[1],C=y[2],c=C===void 0?{}:C,B=typeof E=="string"?new Date(E||0):E,j=typeof T=="string"?new Date(T||0):T;try{return pd(a,"dateTimeRange",p,c).formatRange(B,j)}catch($){a.onError(new qo("Error formatting date time range.",a.locale,$))}return String(B)}function iv(a,p){for(var y=[],_=2;_<arguments.length;_++)y[_-2]=arguments[_];var E=y[0],T=y[1],C=T===void 0?{}:T,c=typeof E=="string"?new Date(E||0):E;try{return pd(a,"date",p,C).formatToParts(c)}catch(B){a.onError(new qo("Error formatting date.",a.locale,B))}return[]}function ov(a,p){for(var y=[],_=2;_<arguments.length;_++)y[_-2]=arguments[_];var E=y[0],T=y[1],C=T===void 0?{}:T,c=typeof E=="string"?new Date(E||0):E;try{return pd(a,"time",p,C).formatToParts(c)}catch(B){a.onError(new qo("Error formatting time.",a.locale,B))}return[]}var sv=["style","type","fallback","languageDisplay"];function av(a,p,y,_){var E=a.locale,T=a.onError,C=Intl.DisplayNames;C||T(new ac(`Intl.DisplayNames is not available in this environment.
Try polyfilling it using "@formatjs/intl-displaynames"
`,aa.MISSING_INTL_API));var c=lh(_,sv);try{return p(E,c).of(y)}catch(B){T(new qo("Error formatting display name.",E,B))}}var lv=["type","style"],wm=Date.now();function cv(a){return"".concat(wm,"_").concat(a,"_").concat(wm)}function uv(a,p,y,_){_===void 0&&(_={});var E=Ug(a,p,y,_).reduce(function(T,C){var c=C.value;return typeof c!="string"?T.push(c):typeof T[T.length-1]=="string"?T[T.length-1]+=c:T.push(c),T},[]);return E.length===1?E[0]:E.length===0?"":E}function Ug(a,p,y,_){var E=a.locale,T=a.onError;_===void 0&&(_={});var C=Intl.ListFormat;C||T(new ac(`Intl.ListFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-listformat"
`,aa.MISSING_INTL_API));var c=lh(_,lv);try{var B={},j=y.map(function($,D){if(typeof $=="object"){var F=cv(D);return B[F]=$,F}return String($)});return p(E,c).formatToParts(j).map(function($){return $.type==="literal"?$:Mt(Mt({},$),{value:B[$.value]||$.value})})}catch($){T(new qo("Error formatting list.",E,$))}return y}var hv=["type"];function dv(a,p,y,_){var E=a.locale,T=a.onError;_===void 0&&(_={}),Intl.PluralRules||T(new ac(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,aa.MISSING_INTL_API));var C=lh(_,hv);try{return p(E,C).select(y)}catch(c){T(new qo("Error formatting plural.",E,c))}return"other"}var pv=["numeric","style"];function fv(a,p,y){var _=a.locale,E=a.formats,T=a.onError;y===void 0&&(y={});var C=y.format,c=!!C&&Ff(E,"relative",C,T)||{},B=lh(y,pv,c);return p(_,B)}function mv(a,p,y,_,E){E===void 0&&(E={}),_||(_="second");var T=Intl.RelativeTimeFormat;T||a.onError(new ac(`Intl.RelativeTimeFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-relativetimeformat"
`,aa.MISSING_INTL_API));try{return fv(a,p,E).format(y,_)}catch(C){a.onError(new qo("Error formatting relative time.",a.locale,C))}return String(y)}var gv=["style","currency","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","currencyDisplay","currencySign","notation","signDisplay","unit","unitDisplay","numberingSystem","trailingZeroDisplay","roundingPriority","roundingIncrement","roundingMode"];function Vg(a,p,y){var _=a.locale,E=a.formats,T=a.onError;y===void 0&&(y={});var C=y.format,c=C&&Ff(E,"number",C,T)||{},B=lh(y,gv,c);return p(_,B)}function yv(a,p,y,_){_===void 0&&(_={});try{return Vg(a,p,_).format(y)}catch(E){a.onError(new qo("Error formatting number.",a.locale,E))}return String(y)}function vv(a,p,y,_){_===void 0&&(_={});try{return Vg(a,p,_).formatToParts(y)}catch(E){a.onError(new qo("Error formatting number.",a.locale,E))}return[]}function xv(a){var p=a?a[Object.keys(a)[0]]:void 0;return typeof p=="string"}function _v(a){a.onWarn&&a.defaultRichTextElements&&xv(a.messages||{})&&a.onWarn(`[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. 
Please consider using "@formatjs/cli" to pre-compile your messages for performance.
For more details see https://formatjs.github.io/docs/getting-started/message-distribution`)}function wv(a,p){var y=Qy(p),_=Mt(Mt({},Og),a),E=_.locale,T=_.defaultLocale,C=_.onError;return E?!Intl.NumberFormat.supportedLocalesOf(E).length&&C?C(new vm('Missing locale data for locale: "'.concat(E,'" in Intl.NumberFormat. Using default locale: "').concat(T,'" as fallback. See https://formatjs.github.io/docs/react-intl#runtime-requirements for more details'))):!Intl.DateTimeFormat.supportedLocalesOf(E).length&&C&&C(new vm('Missing locale data for locale: "'.concat(E,'" in Intl.DateTimeFormat. Using default locale: "').concat(T,'" as fallback. See https://formatjs.github.io/docs/react-intl#runtime-requirements for more details'))):(C&&C(new Zy('"locale" was not configured, using "'.concat(T,'" as fallback. See https://formatjs.github.io/docs/react-intl/api#intlshape for more details'))),_.locale=_.defaultLocale||"en"),_v(_),Mt(Mt({},_),{formatters:y,formatNumber:yv.bind(null,_,y.getNumberFormat),formatNumberToParts:vv.bind(null,_,y.getNumberFormat),formatRelativeTime:mv.bind(null,_,y.getRelativeTimeFormat),formatDate:tv.bind(null,_,y.getDateTimeFormat),formatDateToParts:iv.bind(null,_,y.getDateTimeFormat),formatTime:nv.bind(null,_,y.getDateTimeFormat),formatDateTimeRange:rv.bind(null,_,y.getDateTimeFormat),formatTimeToParts:ov.bind(null,_,y.getDateTimeFormat),formatPlural:dv.bind(null,_,y.getPluralRules),formatMessage:Sf.bind(null,_,y),$t:Sf.bind(null,_,y),formatList:uv.bind(null,_,y.getListFormat),formatListToParts:Ug.bind(null,_,y.getListFormat),formatDisplayName:av.bind(null,_,y.getDisplayNames)})}function bv(a,p,y){if(y===void 0&&(y=Error),!a)throw new y(p)}function Hg(a){bv(a,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}var Gg=Mt(Mt({},Og),{textComponent:ne.Fragment}),Sv={key:42},Ev=function(a){return ne.isValidElement(a)?ne.createElement(ne.Fragment,Sv,a):a},Tv=function(a){var p;return(p=ne.Children.map(a,Ev))!==null&&p!==void 0?p:[]};function kv(a){return function(p){return a(ne.Children.toArray(p))}}function Ef(a,p){if(a===p)return!0;if(!a||!p)return!1;var y=Object.keys(a),_=Object.keys(p),E=y.length;if(_.length!==E)return!1;for(var T=0;T<E;T++){var C=y[T];if(a[C]!==p[C]||!Object.prototype.hasOwnProperty.call(p,C))return!1}return!0}var nf={exports:{}},In={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bm;function Mv(){if(bm)return In;bm=1;var a=typeof Symbol=="function"&&Symbol.for,p=a?Symbol.for("react.element"):60103,y=a?Symbol.for("react.portal"):60106,_=a?Symbol.for("react.fragment"):60107,E=a?Symbol.for("react.strict_mode"):60108,T=a?Symbol.for("react.profiler"):60114,C=a?Symbol.for("react.provider"):60109,c=a?Symbol.for("react.context"):60110,B=a?Symbol.for("react.async_mode"):60111,j=a?Symbol.for("react.concurrent_mode"):60111,$=a?Symbol.for("react.forward_ref"):60112,D=a?Symbol.for("react.suspense"):60113,F=a?Symbol.for("react.suspense_list"):60120,te=a?Symbol.for("react.memo"):60115,ie=a?Symbol.for("react.lazy"):60116,W=a?Symbol.for("react.block"):60121,Y=a?Symbol.for("react.fundamental"):60117,pe=a?Symbol.for("react.responder"):60118,ye=a?Symbol.for("react.scope"):60119;function ve(Se){if(typeof Se=="object"&&Se!==null){var Ke=Se.$$typeof;switch(Ke){case p:switch(Se=Se.type,Se){case B:case j:case _:case T:case E:case D:return Se;default:switch(Se=Se&&Se.$$typeof,Se){case c:case $:case ie:case te:case C:return Se;default:return Ke}}case y:return Ke}}}function Be(Se){return ve(Se)===j}return In.AsyncMode=B,In.ConcurrentMode=j,In.ContextConsumer=c,In.ContextProvider=C,In.Element=p,In.ForwardRef=$,In.Fragment=_,In.Lazy=ie,In.Memo=te,In.Portal=y,In.Profiler=T,In.StrictMode=E,In.Suspense=D,In.isAsyncMode=function(Se){return Be(Se)||ve(Se)===B},In.isConcurrentMode=Be,In.isContextConsumer=function(Se){return ve(Se)===c},In.isContextProvider=function(Se){return ve(Se)===C},In.isElement=function(Se){return typeof Se=="object"&&Se!==null&&Se.$$typeof===p},In.isForwardRef=function(Se){return ve(Se)===$},In.isFragment=function(Se){return ve(Se)===_},In.isLazy=function(Se){return ve(Se)===ie},In.isMemo=function(Se){return ve(Se)===te},In.isPortal=function(Se){return ve(Se)===y},In.isProfiler=function(Se){return ve(Se)===T},In.isStrictMode=function(Se){return ve(Se)===E},In.isSuspense=function(Se){return ve(Se)===D},In.isValidElementType=function(Se){return typeof Se=="string"||typeof Se=="function"||Se===_||Se===j||Se===T||Se===E||Se===D||Se===F||typeof Se=="object"&&Se!==null&&(Se.$$typeof===ie||Se.$$typeof===te||Se.$$typeof===C||Se.$$typeof===c||Se.$$typeof===$||Se.$$typeof===Y||Se.$$typeof===pe||Se.$$typeof===ye||Se.$$typeof===W)},In.typeOf=ve,In}var Sm;function Cv(){return Sm||(Sm=1,nf.exports=Mv()),nf.exports}var rf,Em;function Pv(){if(Em)return rf;Em=1;var a=Cv(),p={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},y={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},_={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},E={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},T={};T[a.ForwardRef]=_,T[a.Memo]=E;function C(ie){return a.isMemo(ie)?E:T[ie.$$typeof]||p}var c=Object.defineProperty,B=Object.getOwnPropertyNames,j=Object.getOwnPropertySymbols,$=Object.getOwnPropertyDescriptor,D=Object.getPrototypeOf,F=Object.prototype;function te(ie,W,Y){if(typeof W!="string"){if(F){var pe=D(W);pe&&pe!==F&&te(ie,pe,Y)}var ye=B(W);j&&(ye=ye.concat(j(W)));for(var ve=C(ie),Be=C(W),Se=0;Se<ye.length;++Se){var Ke=ye[Se];if(!y[Ke]&&!(Y&&Y[Ke])&&!(Be&&Be[Ke])&&!(ve&&ve[Ke])){var Je=$(W,Ke);try{c(ie,Ke,Je)}catch{}}}}return ie}return rf=te,rf}Pv();var Of=typeof window<"u"&&!window.__REACT_INTL_BYPASS_GLOBAL_CONTEXT__?window.__REACT_INTL_CONTEXT__||(window.__REACT_INTL_CONTEXT__=ne.createContext(null)):ne.createContext(null);Of.Consumer;var Iv=Of.Provider,Av=Iv,Lv=Of;function Hi(){var a=ne.useContext(Lv);return Hg(a),a}var Tf;(function(a){a.formatDate="FormattedDate",a.formatTime="FormattedTime",a.formatNumber="FormattedNumber",a.formatList="FormattedList",a.formatDisplayName="FormattedDisplayName"})(Tf||(Tf={}));var kf;(function(a){a.formatDate="FormattedDateParts",a.formatTime="FormattedTimeParts",a.formatNumber="FormattedNumberParts",a.formatList="FormattedListParts"})(kf||(kf={}));function qg(a){var p=function(y){var _=Hi(),E=y.value,T=y.children,C=nh(y,["value","children"]),c=typeof E=="string"?new Date(E||0):E,B=a==="formatDate"?_.formatDateToParts(c,C):_.formatTimeToParts(c,C);return T(B)};return p.displayName=kf[a],p}function fd(a){var p=function(y){var _=Hi(),E=y.value,T=y.children,C=nh(y,["value","children"]),c=_[a](E,C);if(typeof T=="function")return T(c);var B=_.textComponent||ne.Fragment;return ne.createElement(B,null,c)};return p.displayName=Tf[a],p}function Wg(a){return a&&Object.keys(a).reduce(function(p,y){var _=a[y];return p[y]=Bg(_)?kv(_):_,p},{})}var Tm=function(a,p,y,_){for(var E=[],T=4;T<arguments.length;T++)E[T-4]=arguments[T];var C=Wg(_),c=Sf.apply(void 0,sa([a,p,y,C],E,!1));return Array.isArray(c)?Tv(c):c},km=function(a,p){var y=a.defaultRichTextElements,_=nh(a,["defaultRichTextElements"]),E=Wg(y),T=wv(Mt(Mt(Mt({},Gg),_),{defaultRichTextElements:E}),p),C={locale:T.locale,timeZone:T.timeZone,fallbackOnEmptyString:T.fallbackOnEmptyString,formats:T.formats,defaultLocale:T.defaultLocale,defaultFormats:T.defaultFormats,messages:T.messages,onError:T.onError,defaultRichTextElements:E};return Mt(Mt({},T),{formatMessage:Tm.bind(null,C,T.formatters),$t:Tm.bind(null,C,T.formatters)})};function zv(a,p){var y=a.values,_=nh(a,["values"]),E=p.values,T=nh(p,["values"]);return Ef(E,y)&&Ef(_,T)}function Zg(a){var p=Hi(),y=p.formatMessage,_=p.textComponent,E=_===void 0?ne.Fragment:_,T=a.id,C=a.description,c=a.defaultMessage,B=a.values,j=a.children,$=a.tagName,D=$===void 0?E:$,F=a.ignoreTag,te={id:T,description:C,defaultMessage:c},ie=y(te,B,{ignoreTag:F});return typeof j=="function"?j(Array.isArray(ie)?ie:[ie]):D?ne.createElement(D,null,ie):ne.createElement(ne.Fragment,null,ie)}Zg.displayName="FormattedMessage";var qe=ne.memo(Zg,zv);qe.displayName="MemoizedFormattedMessage";function of(a){return{locale:a.locale,timeZone:a.timeZone,fallbackOnEmptyString:a.fallbackOnEmptyString,formats:a.formats,textComponent:a.textComponent,messages:a.messages,defaultLocale:a.defaultLocale,defaultFormats:a.defaultFormats,onError:a.onError,onWarn:a.onWarn,wrapRichTextChunksInFragment:a.wrapRichTextChunksInFragment,defaultRichTextElements:a.defaultRichTextElements}}var Rv=function(a){Go(p,a);function p(){var y=a!==null&&a.apply(this,arguments)||this;return y.cache=$g(),y.state={cache:y.cache,intl:km(of(y.props),y.cache),prevConfig:of(y.props)},y}return p.getDerivedStateFromProps=function(y,_){var E=_.prevConfig,T=_.cache,C=of(y);return Ef(E,C)?null:{intl:km(C,T),prevConfig:C}},p.prototype.render=function(){return Hg(this.state.intl),ne.createElement(Av,{value:this.state.intl},this.props.children)},p.displayName="IntlProvider",p.defaultProps=Gg,p}(ne.PureComponent);fd("formatDate");fd("formatTime");fd("formatNumber");fd("formatList");fd("formatDisplayName");qg("formatDate");qg("formatTime");var Xg=wg();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function od(){return od=Object.assign?Object.assign.bind():function(a){for(var p=1;p<arguments.length;p++){var y=arguments[p];for(var _ in y)Object.prototype.hasOwnProperty.call(y,_)&&(a[_]=y[_])}return a},od.apply(this,arguments)}var oc;(function(a){a.Pop="POP",a.Push="PUSH",a.Replace="REPLACE"})(oc||(oc={}));const Mm="popstate";function jv(a){a===void 0&&(a={});function p(E,T){let{pathname:C="/",search:c="",hash:B=""}=lu(E.location.hash.substr(1));return!C.startsWith("/")&&!C.startsWith(".")&&(C="/"+C),Mf("",{pathname:C,search:c,hash:B},T.state&&T.state.usr||null,T.state&&T.state.key||"default")}function y(E,T){let C=E.document.querySelector("base"),c="";if(C&&C.getAttribute("href")){let B=E.location.href,j=B.indexOf("#");c=j===-1?B:B.slice(0,j)}return c+"#"+(typeof T=="string"?T:vp(T))}function _(E,T){$f(E.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(T)+")")}return Nv(p,y,_,a)}function Nr(a,p){if(a===!1||a===null||typeof a>"u")throw new Error(p)}function $f(a,p){if(!a){typeof console<"u"&&console.warn(p);try{throw new Error(p)}catch{}}}function Dv(){return Math.random().toString(36).substr(2,8)}function Cm(a,p){return{usr:a.state,key:a.key,idx:p}}function Mf(a,p,y,_){return y===void 0&&(y=null),od({pathname:typeof a=="string"?a:a.pathname,search:"",hash:""},typeof p=="string"?lu(p):p,{state:y,key:p&&p.key||_||Dv()})}function vp(a){let{pathname:p="/",search:y="",hash:_=""}=a;return y&&y!=="?"&&(p+=y.charAt(0)==="?"?y:"?"+y),_&&_!=="#"&&(p+=_.charAt(0)==="#"?_:"#"+_),p}function lu(a){let p={};if(a){let y=a.indexOf("#");y>=0&&(p.hash=a.substr(y),a=a.substr(0,y));let _=a.indexOf("?");_>=0&&(p.search=a.substr(_),a=a.substr(0,_)),a&&(p.pathname=a)}return p}function Nv(a,p,y,_){_===void 0&&(_={});let{window:E=document.defaultView,v5Compat:T=!1}=_,C=E.history,c=oc.Pop,B=null,j=$();j==null&&(j=0,C.replaceState(od({},C.state,{idx:j}),""));function $(){return(C.state||{idx:null}).idx}function D(){c=oc.Pop;let Y=$(),pe=Y==null?null:Y-j;j=Y,B&&B({action:c,location:W.location,delta:pe})}function F(Y,pe){c=oc.Push;let ye=Mf(W.location,Y,pe);y&&y(ye,Y),j=$()+1;let ve=Cm(ye,j),Be=W.createHref(ye);try{C.pushState(ve,"",Be)}catch(Se){if(Se instanceof DOMException&&Se.name==="DataCloneError")throw Se;E.location.assign(Be)}T&&B&&B({action:c,location:W.location,delta:1})}function te(Y,pe){c=oc.Replace;let ye=Mf(W.location,Y,pe);y&&y(ye,Y),j=$();let ve=Cm(ye,j),Be=W.createHref(ye);C.replaceState(ve,"",Be),T&&B&&B({action:c,location:W.location,delta:0})}function ie(Y){let pe=E.location.origin!=="null"?E.location.origin:E.location.href,ye=typeof Y=="string"?Y:vp(Y);return ye=ye.replace(/ $/,"%20"),Nr(pe,"No window.location.(origin|href) available to create URL for href: "+ye),new URL(ye,pe)}let W={get action(){return c},get location(){return a(E,C)},listen(Y){if(B)throw new Error("A history only accepts one active listener");return E.addEventListener(Mm,D),B=Y,()=>{E.removeEventListener(Mm,D),B=null}},createHref(Y){return p(E,Y)},createURL:ie,encodeLocation(Y){let pe=ie(Y);return{pathname:pe.pathname,search:pe.search,hash:pe.hash}},push:F,replace:te,go(Y){return C.go(Y)}};return W}var Pm;(function(a){a.data="data",a.deferred="deferred",a.redirect="redirect",a.error="error"})(Pm||(Pm={}));function Bv(a,p,y){return y===void 0&&(y="/"),Fv(a,p,y)}function Fv(a,p,y,_){let E=typeof p=="string"?lu(p):p,T=Uf(E.pathname||"/",y);if(T==null)return null;let C=Kg(a);Ov(C);let c=null;for(let B=0;c==null&&B<C.length;++B){let j=Yv(T);c=Xv(C[B],j)}return c}function Kg(a,p,y,_){p===void 0&&(p=[]),y===void 0&&(y=[]),_===void 0&&(_="");let E=(T,C,c)=>{let B={relativePath:c===void 0?T.path||"":c,caseSensitive:T.caseSensitive===!0,childrenIndex:C,route:T};B.relativePath.startsWith("/")&&(Nr(B.relativePath.startsWith(_),'Absolute route path "'+B.relativePath+'" nested under path '+('"'+_+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),B.relativePath=B.relativePath.slice(_.length));let j=sc([_,B.relativePath]),$=y.concat(B);T.children&&T.children.length>0&&(Nr(T.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+j+'".')),Kg(T.children,p,$,j)),!(T.path==null&&!T.index)&&p.push({path:j,score:Wv(j,T.index),routesMeta:$})};return a.forEach((T,C)=>{var c;if(T.path===""||!((c=T.path)!=null&&c.includes("?")))E(T,C);else for(let B of Jg(T.path))E(T,C,B)}),p}function Jg(a){let p=a.split("/");if(p.length===0)return[];let[y,..._]=p,E=y.endsWith("?"),T=y.replace(/\?$/,"");if(_.length===0)return E?[T,""]:[T];let C=Jg(_.join("/")),c=[];return c.push(...C.map(B=>B===""?T:[T,B].join("/"))),E&&c.push(...C),c.map(B=>a.startsWith("/")&&B===""?"/":B)}function Ov(a){a.sort((p,y)=>p.score!==y.score?y.score-p.score:Zv(p.routesMeta.map(_=>_.childrenIndex),y.routesMeta.map(_=>_.childrenIndex)))}const $v=/^:[\w-]+$/,Uv=3,Vv=2,Hv=1,Gv=10,qv=-2,Im=a=>a==="*";function Wv(a,p){let y=a.split("/"),_=y.length;return y.some(Im)&&(_+=qv),p&&(_+=Vv),y.filter(E=>!Im(E)).reduce((E,T)=>E+($v.test(T)?Uv:T===""?Hv:Gv),_)}function Zv(a,p){return a.length===p.length&&a.slice(0,-1).every((_,E)=>_===p[E])?a[a.length-1]-p[p.length-1]:0}function Xv(a,p,y){let{routesMeta:_}=a,E={},T="/",C=[];for(let c=0;c<_.length;++c){let B=_[c],j=c===_.length-1,$=T==="/"?p:p.slice(T.length)||"/",D=Kv({path:B.relativePath,caseSensitive:B.caseSensitive,end:j},$),F=B.route;if(!D)return null;Object.assign(E,D.params),C.push({params:E,pathname:sc([T,D.pathname]),pathnameBase:nx(sc([T,D.pathnameBase])),route:F}),D.pathnameBase!=="/"&&(T=sc([T,D.pathnameBase]))}return C}function Kv(a,p){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[y,_]=Jv(a.path,a.caseSensitive,a.end),E=p.match(y);if(!E)return null;let T=E[0],C=T.replace(/(.)\/+$/,"$1"),c=E.slice(1);return{params:_.reduce((j,$,D)=>{let{paramName:F,isOptional:te}=$;if(F==="*"){let W=c[D]||"";C=T.slice(0,T.length-W.length).replace(/(.)\/+$/,"$1")}const ie=c[D];return te&&!ie?j[F]=void 0:j[F]=(ie||"").replace(/%2F/g,"/"),j},{}),pathname:T,pathnameBase:C,pattern:a}}function Jv(a,p,y){p===void 0&&(p=!1),y===void 0&&(y=!0),$f(a==="*"||!a.endsWith("*")||a.endsWith("/*"),'Route path "'+a+'" will be treated as if it were '+('"'+a.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+a.replace(/\*$/,"/*")+'".'));let _=[],E="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(C,c,B)=>(_.push({paramName:c,isOptional:B!=null}),B?"/?([^\\/]+)?":"/([^\\/]+)"));return a.endsWith("*")?(_.push({paramName:"*"}),E+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):y?E+="\\/*$":a!==""&&a!=="/"&&(E+="(?:(?=\\/|$))"),[new RegExp(E,p?void 0:"i"),_]}function Yv(a){try{return a.split("/").map(p=>decodeURIComponent(p).replace(/\//g,"%2F")).join("/")}catch(p){return $f(!1,'The URL path "'+a+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+p+").")),a}}function Uf(a,p){if(p==="/")return a;if(!a.toLowerCase().startsWith(p.toLowerCase()))return null;let y=p.endsWith("/")?p.length-1:p.length,_=a.charAt(y);return _&&_!=="/"?null:a.slice(y)||"/"}function Qv(a,p){p===void 0&&(p="/");let{pathname:y,search:_="",hash:E=""}=typeof a=="string"?lu(a):a;return{pathname:y?y.startsWith("/")?y:ex(y,p):p,search:rx(_),hash:ix(E)}}function ex(a,p){let y=p.replace(/\/+$/,"").split("/");return a.split("/").forEach(E=>{E===".."?y.length>1&&y.pop():E!=="."&&y.push(E)}),y.length>1?y.join("/"):"/"}function sf(a,p,y,_){return"Cannot include a '"+a+"' character in a manually specified "+("`to."+p+"` field ["+JSON.stringify(_)+"].  Please separate it out to the ")+("`to."+y+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function tx(a){return a.filter((p,y)=>y===0||p.route.path&&p.route.path.length>0)}function Yg(a,p){let y=tx(a);return p?y.map((_,E)=>E===y.length-1?_.pathname:_.pathnameBase):y.map(_=>_.pathnameBase)}function Qg(a,p,y,_){_===void 0&&(_=!1);let E;typeof a=="string"?E=lu(a):(E=od({},a),Nr(!E.pathname||!E.pathname.includes("?"),sf("?","pathname","search",E)),Nr(!E.pathname||!E.pathname.includes("#"),sf("#","pathname","hash",E)),Nr(!E.search||!E.search.includes("#"),sf("#","search","hash",E)));let T=a===""||E.pathname==="",C=T?"/":E.pathname,c;if(C==null)c=y;else{let D=p.length-1;if(!_&&C.startsWith("..")){let F=C.split("/");for(;F[0]==="..";)F.shift(),D-=1;E.pathname=F.join("/")}c=D>=0?p[D]:"/"}let B=Qv(E,c),j=C&&C!=="/"&&C.endsWith("/"),$=(T||C===".")&&y.endsWith("/");return!B.pathname.endsWith("/")&&(j||$)&&(B.pathname+="/"),B}const sc=a=>a.join("/").replace(/\/\/+/g,"/"),nx=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),rx=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,ix=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a;function ox(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}const e0=["post","put","patch","delete"];new Set(e0);const sx=["get",...e0];new Set(sx);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sd(){return sd=Object.assign?Object.assign.bind():function(a){for(var p=1;p<arguments.length;p++){var y=arguments[p];for(var _ in y)Object.prototype.hasOwnProperty.call(y,_)&&(a[_]=y[_])}return a},sd.apply(this,arguments)}const Vf=ne.createContext(null),ax=ne.createContext(null),cu=ne.createContext(null),Ep=ne.createContext(null),uu=ne.createContext({outlet:null,matches:[],isDataRoute:!1}),t0=ne.createContext(null);function lx(a,p){let{relative:y}=p===void 0?{}:p;md()||Nr(!1);let{basename:_,navigator:E}=ne.useContext(cu),{hash:T,pathname:C,search:c}=r0(a,{relative:y}),B=C;return _!=="/"&&(B=C==="/"?_:sc([_,C])),E.createHref({pathname:B,search:c,hash:T})}function md(){return ne.useContext(Ep)!=null}function gd(){return md()||Nr(!1),ne.useContext(Ep).location}function n0(a){ne.useContext(cu).static||ne.useLayoutEffect(a)}function lc(){let{isDataRoute:a}=ne.useContext(uu);return a?wx():cx()}function cx(){md()||Nr(!1);let a=ne.useContext(Vf),{basename:p,future:y,navigator:_}=ne.useContext(cu),{matches:E}=ne.useContext(uu),{pathname:T}=gd(),C=JSON.stringify(Yg(E,y.v7_relativeSplatPath)),c=ne.useRef(!1);return n0(()=>{c.current=!0}),ne.useCallback(function(j,$){if($===void 0&&($={}),!c.current)return;if(typeof j=="number"){_.go(j);return}let D=Qg(j,JSON.parse(C),T,$.relative==="path");a==null&&p!=="/"&&(D.pathname=D.pathname==="/"?p:sc([p,D.pathname])),($.replace?_.replace:_.push)(D,$.state,$)},[p,_,C,T,a])}function r0(a,p){let{relative:y}=p===void 0?{}:p,{future:_}=ne.useContext(cu),{matches:E}=ne.useContext(uu),{pathname:T}=gd(),C=JSON.stringify(Yg(E,_.v7_relativeSplatPath));return ne.useMemo(()=>Qg(a,JSON.parse(C),T,y==="path"),[a,C,T,y])}function ux(a,p){return hx(a,p)}function hx(a,p,y,_){md()||Nr(!1);let{navigator:E,static:T}=ne.useContext(cu),{matches:C}=ne.useContext(uu),c=C[C.length-1],B=c?c.params:{};c&&c.pathname;let j=c?c.pathnameBase:"/";c&&c.route;let $=gd(),D;if(p){var F;let pe=typeof p=="string"?lu(p):p;j==="/"||(F=pe.pathname)!=null&&F.startsWith(j)||Nr(!1),D=pe}else D=$;let te=D.pathname||"/",ie=te;if(j!=="/"){let pe=j.replace(/^\//,"").split("/");ie="/"+te.replace(/^\//,"").split("/").slice(pe.length).join("/")}let W=Bv(a,{pathname:ie}),Y=gx(W&&W.map(pe=>Object.assign({},pe,{params:Object.assign({},B,pe.params),pathname:sc([j,E.encodeLocation?E.encodeLocation(pe.pathname).pathname:pe.pathname]),pathnameBase:pe.pathnameBase==="/"?j:sc([j,E.encodeLocation?E.encodeLocation(pe.pathnameBase).pathname:pe.pathnameBase])})),C,y,_);return p&&Y?ne.createElement(Ep.Provider,{value:{location:sd({pathname:"/",search:"",hash:"",state:null,key:"default"},D),navigationType:oc.Pop}},Y):Y}function dx(){let a=_x(),p=ox(a)?a.status+" "+a.statusText:a instanceof Error?a.message:JSON.stringify(a),y=a instanceof Error?a.stack:null,E={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ne.createElement(ne.Fragment,null,ne.createElement("h2",null,"Unexpected Application Error!"),ne.createElement("h3",{style:{fontStyle:"italic"}},p),y?ne.createElement("pre",{style:E},y):null,null)}const px=ne.createElement(dx,null);class fx extends ne.Component{constructor(p){super(p),this.state={location:p.location,revalidation:p.revalidation,error:p.error}}static getDerivedStateFromError(p){return{error:p}}static getDerivedStateFromProps(p,y){return y.location!==p.location||y.revalidation!=="idle"&&p.revalidation==="idle"?{error:p.error,location:p.location,revalidation:p.revalidation}:{error:p.error!==void 0?p.error:y.error,location:y.location,revalidation:p.revalidation||y.revalidation}}componentDidCatch(p,y){console.error("React Router caught the following error during render",p,y)}render(){return this.state.error!==void 0?ne.createElement(uu.Provider,{value:this.props.routeContext},ne.createElement(t0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function mx(a){let{routeContext:p,match:y,children:_}=a,E=ne.useContext(Vf);return E&&E.static&&E.staticContext&&(y.route.errorElement||y.route.ErrorBoundary)&&(E.staticContext._deepestRenderedBoundaryId=y.route.id),ne.createElement(uu.Provider,{value:p},_)}function gx(a,p,y,_){var E;if(p===void 0&&(p=[]),y===void 0&&(y=null),_===void 0&&(_=null),a==null){var T;if(!y)return null;if(y.errors)a=y.matches;else if((T=_)!=null&&T.v7_partialHydration&&p.length===0&&!y.initialized&&y.matches.length>0)a=y.matches;else return null}let C=a,c=(E=y)==null?void 0:E.errors;if(c!=null){let $=C.findIndex(D=>D.route.id&&(c==null?void 0:c[D.route.id])!==void 0);$>=0||Nr(!1),C=C.slice(0,Math.min(C.length,$+1))}let B=!1,j=-1;if(y&&_&&_.v7_partialHydration)for(let $=0;$<C.length;$++){let D=C[$];if((D.route.HydrateFallback||D.route.hydrateFallbackElement)&&(j=$),D.route.id){let{loaderData:F,errors:te}=y,ie=D.route.loader&&F[D.route.id]===void 0&&(!te||te[D.route.id]===void 0);if(D.route.lazy||ie){B=!0,j>=0?C=C.slice(0,j+1):C=[C[0]];break}}}return C.reduceRight(($,D,F)=>{let te,ie=!1,W=null,Y=null;y&&(te=c&&D.route.id?c[D.route.id]:void 0,W=D.route.errorElement||px,B&&(j<0&&F===0?(bx("route-fallback"),ie=!0,Y=null):j===F&&(ie=!0,Y=D.route.hydrateFallbackElement||null)));let pe=p.concat(C.slice(0,F+1)),ye=()=>{let ve;return te?ve=W:ie?ve=Y:D.route.Component?ve=ne.createElement(D.route.Component,null):D.route.element?ve=D.route.element:ve=$,ne.createElement(mx,{match:D,routeContext:{outlet:$,matches:pe,isDataRoute:y!=null},children:ve})};return y&&(D.route.ErrorBoundary||D.route.errorElement||F===0)?ne.createElement(fx,{location:y.location,revalidation:y.revalidation,component:W,error:te,children:ye(),routeContext:{outlet:null,matches:pe,isDataRoute:!0}}):ye()},null)}var i0=function(a){return a.UseBlocker="useBlocker",a.UseRevalidator="useRevalidator",a.UseNavigateStable="useNavigate",a}(i0||{}),o0=function(a){return a.UseBlocker="useBlocker",a.UseLoaderData="useLoaderData",a.UseActionData="useActionData",a.UseRouteError="useRouteError",a.UseNavigation="useNavigation",a.UseRouteLoaderData="useRouteLoaderData",a.UseMatches="useMatches",a.UseRevalidator="useRevalidator",a.UseNavigateStable="useNavigate",a.UseRouteId="useRouteId",a}(o0||{});function yx(a){let p=ne.useContext(Vf);return p||Nr(!1),p}function vx(a){let p=ne.useContext(ax);return p||Nr(!1),p}function xx(a){let p=ne.useContext(uu);return p||Nr(!1),p}function s0(a){let p=xx(),y=p.matches[p.matches.length-1];return y.route.id||Nr(!1),y.route.id}function _x(){var a;let p=ne.useContext(t0),y=vx(),_=s0();return p!==void 0?p:(a=y.errors)==null?void 0:a[_]}function wx(){let{router:a}=yx(i0.UseNavigateStable),p=s0(o0.UseNavigateStable),y=ne.useRef(!1);return n0(()=>{y.current=!0}),ne.useCallback(function(E,T){T===void 0&&(T={}),y.current&&(typeof E=="number"?a.navigate(E):a.navigate(E,sd({fromRouteId:p},T)))},[a,p])}const Am={};function bx(a,p,y){Am[a]||(Am[a]=!0)}function Sx(a,p){a==null||a.v7_startTransition,a==null||a.v7_relativeSplatPath}function ol(a){Nr(!1)}function Ex(a){let{basename:p="/",children:y=null,location:_,navigationType:E=oc.Pop,navigator:T,static:C=!1,future:c}=a;md()&&Nr(!1);let B=p.replace(/^\/*/,"/"),j=ne.useMemo(()=>({basename:B,navigator:T,static:C,future:sd({v7_relativeSplatPath:!1},c)}),[B,c,T,C]);typeof _=="string"&&(_=lu(_));let{pathname:$="/",search:D="",hash:F="",state:te=null,key:ie="default"}=_,W=ne.useMemo(()=>{let Y=Uf($,B);return Y==null?null:{location:{pathname:Y,search:D,hash:F,state:te,key:ie},navigationType:E}},[B,$,D,F,te,ie,E]);return W==null?null:ne.createElement(cu.Provider,{value:j},ne.createElement(Ep.Provider,{children:y,value:W}))}function Tx(a){let{children:p,location:y}=a;return ux(Cf(p),y)}new Promise(()=>{});function Cf(a,p){p===void 0&&(p=[]);let y=[];return ne.Children.forEach(a,(_,E)=>{if(!ne.isValidElement(_))return;let T=[...p,E];if(_.type===ne.Fragment){y.push.apply(y,Cf(_.props.children,T));return}_.type!==ol&&Nr(!1),!_.props.index||!_.props.children||Nr(!1);let C={id:_.props.id||T.join("-"),caseSensitive:_.props.caseSensitive,element:_.props.element,Component:_.props.Component,index:_.props.index,path:_.props.path,loader:_.props.loader,action:_.props.action,errorElement:_.props.errorElement,ErrorBoundary:_.props.ErrorBoundary,hasErrorBoundary:_.props.ErrorBoundary!=null||_.props.errorElement!=null,shouldRevalidate:_.props.shouldRevalidate,handle:_.props.handle,lazy:_.props.lazy};_.props.children&&(C.children=Cf(_.props.children,T)),y.push(C)}),y}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pf(){return Pf=Object.assign?Object.assign.bind():function(a){for(var p=1;p<arguments.length;p++){var y=arguments[p];for(var _ in y)Object.prototype.hasOwnProperty.call(y,_)&&(a[_]=y[_])}return a},Pf.apply(this,arguments)}function kx(a,p){if(a==null)return{};var y={},_=Object.keys(a),E,T;for(T=0;T<_.length;T++)E=_[T],!(p.indexOf(E)>=0)&&(y[E]=a[E]);return y}function Mx(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function Cx(a,p){return a.button===0&&(!p||p==="_self")&&!Mx(a)}const Px=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Ix="6";try{window.__reactRouterVersion=Ix}catch{}const Ax="startTransition",Lm=J0[Ax];function Lx(a){let{basename:p,children:y,future:_,window:E}=a,T=ne.useRef();T.current==null&&(T.current=jv({window:E,v5Compat:!0}));let C=T.current,[c,B]=ne.useState({action:C.action,location:C.location}),{v7_startTransition:j}=_||{},$=ne.useCallback(D=>{j&&Lm?Lm(()=>B(D)):B(D)},[B,j]);return ne.useLayoutEffect(()=>C.listen($),[C,$]),ne.useEffect(()=>Sx(_),[_]),ne.createElement(Ex,{basename:p,children:y,location:c.location,navigationType:c.action,navigator:C,future:_})}const zx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Rx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nd=ne.forwardRef(function(p,y){let{onClick:_,relative:E,reloadDocument:T,replace:C,state:c,target:B,to:j,preventScrollReset:$,viewTransition:D}=p,F=kx(p,Px),{basename:te}=ne.useContext(cu),ie,W=!1;if(typeof j=="string"&&Rx.test(j)&&(ie=j,zx))try{let ve=new URL(window.location.href),Be=j.startsWith("//")?new URL(ve.protocol+j):new URL(j),Se=Uf(Be.pathname,te);Be.origin===ve.origin&&Se!=null?j=Se+Be.search+Be.hash:W=!0}catch{}let Y=lx(j,{relative:E}),pe=jx(j,{replace:C,state:c,target:B,preventScrollReset:$,relative:E,viewTransition:D});function ye(ve){_&&_(ve),ve.defaultPrevented||pe(ve)}return ne.createElement("a",Pf({},F,{href:ie||Y,onClick:W||T?_:ye,ref:y,target:B}))});var zm;(function(a){a.UseScrollRestoration="useScrollRestoration",a.UseSubmit="useSubmit",a.UseSubmitFetcher="useSubmitFetcher",a.UseFetcher="useFetcher",a.useViewTransitionState="useViewTransitionState"})(zm||(zm={}));var Rm;(function(a){a.UseFetcher="useFetcher",a.UseFetchers="useFetchers",a.UseScrollRestoration="useScrollRestoration"})(Rm||(Rm={}));function jx(a,p){let{target:y,replace:_,state:E,preventScrollReset:T,relative:C,viewTransition:c}=p===void 0?{}:p,B=lc(),j=gd(),$=r0(a,{relative:C});return ne.useCallback(D=>{if(Cx(D,y)){D.preventDefault();let F=_!==void 0?_:vp(j)===vp($);B(a,{replace:F,state:E,preventScrollReset:T,relative:C,viewTransition:c})}},[j,B,$,_,E,y,a,T,C,c])}const xp="/golden_path/assets/logo-CjfPudve.png";function Dx(){const a=lc(),p=Hi();return v.jsxs("div",{className:"profile-container",children:[v.jsxs("div",{className:"profile-header",children:[v.jsx("button",{className:"back-arrow",onClick:()=>a(-1),children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:v.jsx("path",{d:"M15 6l-6 6l6 6",stroke:"currentColor",strokeWidth:"2",fill:"none"})})}),v.jsx("h1",{className:"profile-title",children:v.jsx(qe,{id:"profileTitle"})}),v.jsx("div",{className:"profile-avatar-container",children:v.jsx("div",{className:"profile-avatar",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",viewBox:"0 0 24 24",fill:"none",strokeWidth:"0.5",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsxs("defs",{children:[v.jsxs("linearGradient",{id:"borderGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[v.jsx("stop",{offset:"0%",stopColor:"#4FC3F7"}),v.jsx("stop",{offset:"100%",stopColor:"#2196F3"})]}),v.jsxs("linearGradient",{id:"avatarGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[v.jsx("stop",{offset:"0%",stopColor:"#64B5F6"}),v.jsx("stop",{offset:"100%",stopColor:"#1976D2"})]})]}),v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",fill:"url(#avatarGradient)"}),v.jsx("path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",fill:"url(#avatarGradient)"})]})})}),v.jsxs("div",{className:"user-info",children:[v.jsx("p",{className:"user-name",children:v.jsx(qe,{id:"defaultUserName"})}),v.jsx("p",{className:"user-phone",children:"98-964879789+"})]}),v.jsx("button",{className:"complete-profile-btn",children:v.jsx(qe,{id:"completeProfile"})})]}),v.jsxs("div",{className:"profile-sections",children:[v.jsxs("div",{className:"profile-section",children:[v.jsx("h2",{className:"section-title",children:v.jsx(qe,{id:"accountSection"})}),v.jsxs("div",{className:"section-item",children:[v.jsx("span",{className:"item-icon",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0"}),v.jsx("path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"})]})}),v.jsx("span",{className:"item-text",children:v.jsx(qe,{id:"accountInfo"})}),v.jsx("span",{className:"item-arrow",children:""})]}),v.jsxs("div",{className:"section-item",children:[v.jsx("span",{className:"item-icon",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("path",{d:"M3 19a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}),v.jsx("path",{d:"M19 7a2 2 0 1 0 0 -4a2 2 0 0 0 0 4z"}),v.jsx("path",{d:"M11 19h5.5a3.5 3.5 0 0 0 0 -7h-8a3.5 3.5 0 0 1 0 -7h4.5"})]})}),v.jsx("span",{className:"item-text",children:v.jsx(qe,{id:"myRoutes"})}),v.jsx("span",{className:"item-arrow",children:""})]}),v.jsxs("div",{className:"section-item",children:[v.jsx("span",{className:"item-icon",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z"}),v.jsx("path",{d:"M12 4v7l2 -2l2 2v-7"})]})}),v.jsx("span",{className:"item-text",children:v.jsx(qe,{id:"savedPlaces"})}),v.jsx("span",{className:"item-arrow",children:""})]})]}),v.jsxs("div",{className:"profile-section",children:[v.jsx("h2",{className:"section-title",children:v.jsx(qe,{id:"settingsSection"})}),v.jsxs("div",{className:"section-item",children:[v.jsx("span",{className:"item-icon",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("path",{d:"M4 5h7"}),v.jsx("path",{d:"M9 3v2c0 4.418 -2.239 8 -5 8"}),v.jsx("path",{d:"M5 9c0 2.144 2.952 3.908 6.7 4"}),v.jsx("path",{d:"M12 20l4 -9l4 9"}),v.jsx("path",{d:"M19.1 18h-6.2"})]})}),v.jsx("span",{className:"item-text",children:v.jsx(qe,{id:"language"})}),v.jsx("span",{className:"item-arrow",children:""})]}),v.jsxs("div",{className:"section-item",children:[v.jsx("span",{className:"item-icon",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("path",{d:"M10 5a2 2 0 1 1 4 0a7 7 0 0 1 4 6v3a4 4 0 0 0 2 3h-16a4 4 0 0 0 2 -3v-3a7 7 0 0 1 4 -6"}),v.jsx("path",{d:"M9 17v1a3 3 0 0 0 6 0v-1"})]})}),v.jsx("span",{className:"item-text",children:v.jsx(qe,{id:"notifications"})}),v.jsx("span",{className:"item-arrow",children:""})]})]}),v.jsxs("div",{className:"profile-section",children:[v.jsx("h2",{className:"section-title",children:v.jsx(qe,{id:"supportSection"})}),v.jsxs("div",{className:"section-item",children:[v.jsx("span",{className:"item-icon",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:v.jsx("path",{d:"M5 4h4l2 5l-2.5 1.5a11 11 0 0 0 5 5l1.5 -2.5l5 2v4a2 2 0 0 1 -2 2a16 16 0 0 1 -15 -15a2 2 0 0 1 2 -2"})})}),v.jsx("span",{className:"item-text",children:v.jsx(qe,{id:"support"})}),v.jsx("span",{className:"item-arrow",children:""})]}),v.jsxs("div",{className:"section-item",children:[v.jsx("span",{className:"item-icon",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("path",{d:"M12.802 2.165l5.575 2.389c.48 .206 .863 .589 1.07 1.07l2.388 5.574c.22 .512 .22 1.092 0 1.604l-2.389 5.575c-.206 .48 -.589 .863 -1.07 1.07l-5.574 2.388c-.512 .22 -1.092 .22 -1.604 0l-5.575 -2.389a2.036 2.036 0 0 1 -1.07 -1.07l-2.388 -5.574a2.036 2.036 0 0 1 0 -1.604l2.389 -5.575c.206 -.48 .589 -.863 1.07 -1.07l5.574 -2.388a2.036 2.036 0 0 1 1.604 0z"}),v.jsx("path",{d:"M12 16v.01"}),v.jsx("path",{d:"M12 13a2 2 0 0 0 .914 -3.782a1.98 1.98 0 0 0 -2.414 .483"})]})}),v.jsx("span",{className:"item-text",children:v.jsx(qe,{id:"faq"})}),v.jsx("span",{className:"item-arrow",children:""})]}),v.jsxs("div",{className:"section-item",children:[v.jsx("span",{className:"item-icon",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("path",{d:"M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2"}),v.jsx("path",{d:"M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z"}),v.jsx("path",{d:"M9 12h6"}),v.jsx("path",{d:"M9 16h6"})]})}),v.jsx("span",{className:"item-text",children:v.jsx(qe,{id:"termsRegulation"})}),v.jsx("span",{className:"item-arrow",children:""})]}),v.jsxs("div",{className:"section-item",children:[v.jsx("span",{className:"item-icon",children:v.jsx("img",{src:xp,alt:p.formatMessage({id:"logoAlt"}),className:"custom-logo-icon"})}),v.jsx("span",{className:"item-text",children:v.jsx(qe,{id:"aboutUs"})}),v.jsx("span",{className:"item-arrow",children:""})]}),v.jsxs("div",{className:"section-item",children:[v.jsx("span",{className:"item-icon",children:v.jsx("img",{src:xp,alt:p.formatMessage({id:"logoAlt"}),className:"custom-logo-icon"})}),v.jsx("span",{className:"item-text",children:v.jsx(qe,{id:"contactUs"})}),v.jsx("span",{className:"item-arrow",children:""})]})]}),v.jsxs("div",{className:"logout-section",children:[v.jsx("h3",{className:"logout-title",children:v.jsx(qe,{id:"logoutTitle"})}),v.jsxs("div",{className:"logout-item",children:[v.jsx("span",{className:"item-icon",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("path",{d:"M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2"}),v.jsx("path",{d:"M9 12h12l-3 -3"}),v.jsx("path",{d:"M18 15l3 -3"})]})}),v.jsx("span",{className:"item-text",children:v.jsx(qe,{id:"logoutAccount"})}),v.jsx("span",{className:"item-arrow",children:""})]})]})]})]})}const Nx="modulepreload",Bx=function(a){return"/golden_path/"+a},jm={},a0=function(p,y,_){let E=Promise.resolve();if(y&&y.length>0){let C=function(j){return Promise.all(j.map($=>Promise.resolve($).then(D=>({status:"fulfilled",value:D}),D=>({status:"rejected",reason:D}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),B=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));E=C(y.map(j=>{if(j=Bx(j),j in jm)return;jm[j]=!0;const $=j.endsWith(".css"),D=$?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${j}"]${D}`))return;const F=document.createElement("link");if(F.rel=$?"stylesheet":Nx,$||(F.as="script"),F.crossOrigin="",F.href=j,B&&F.setAttribute("nonce",B),document.head.appendChild(F),$)return new Promise((te,ie)=>{F.addEventListener("load",te),F.addEventListener("error",()=>ie(new Error(`Unable to preload CSS for ${j}`)))})}))}function T(C){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=C,window.dispatchEvent(c),!c.defaultPrevented)throw C}return E.then(C=>{for(const c of C||[])c.status==="rejected"&&T(c.reason);return p().catch(T)})},Fx=ne.createContext(null);function Ox(a,p){const y=Array.isArray(a)?a[0]:a?a.x:0,_=Array.isArray(a)?a[1]:a?a.y:0,E=Array.isArray(p)?p[0]:p?p.x:0,T=Array.isArray(p)?p[1]:p?p.y:0;return y===E&&_===T}function ho(a,p){if(a===p)return!0;if(!a||!p)return!1;if(Array.isArray(a)){if(!Array.isArray(p)||a.length!==p.length)return!1;for(let y=0;y<a.length;y++)if(!ho(a[y],p[y]))return!1;return!0}else if(Array.isArray(p))return!1;if(typeof a=="object"&&typeof p=="object"){const y=Object.keys(a),_=Object.keys(p);if(y.length!==_.length)return!1;for(const E of y)if(!p.hasOwnProperty(E)||!ho(a[E],p[E]))return!1;return!0}return!1}function $x(a){const p=a.clone();return p.pixelsToGLUnits=a.pixelsToGLUnits,p}function Dm(a,p){if(!a.getProjection)return;const y=a.getProjection(),_=p.getProjection();ho(y,_)||p.setProjection(y)}function Nm(a){return{longitude:a.center.lng,latitude:a.center.lat,zoom:a.zoom,pitch:a.pitch,bearing:a.bearing,padding:a.padding}}function Bm(a,p){const y=p.viewState||p;let _=!1;if("zoom"in y){const E=a.zoom;a.zoom=y.zoom,_=_||E!==a.zoom}if("bearing"in y){const E=a.bearing;a.bearing=y.bearing,_=_||E!==a.bearing}if("pitch"in y){const E=a.pitch;a.pitch=y.pitch,_=_||E!==a.pitch}if(y.padding&&!a.isPaddingEqual(y.padding)&&(_=!0,a.padding=y.padding),"longitude"in y&&"latitude"in y){const E=a.center;a.center=new E.constructor(y.longitude,y.latitude),_=_||E!==a.center}return _}const Ux=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Fm(a){if(!a)return null;if(typeof a=="string"||("toJS"in a&&(a=a.toJS()),!a.layers))return a;const p={};for(const _ of a.layers)p[_.id]=_;const y=a.layers.map(_=>{let E=null;"interactive"in _&&(E=Object.assign({},_),delete E.interactive);const T=p[_.ref];if(T){E=E||Object.assign({},_),delete E.ref;for(const C of Ux)C in T&&(E[C]=T[C])}return E||_});return{...a,layers:y}}var Om={};const $m={version:8,sources:{},layers:[]},Um={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},af={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},Vm={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},Vx=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],Hx=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class ih{constructor(p,y,_){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=E=>{const T=this.props[Vm[E.type]];T?T(E):E.type==="error"&&console.error(E.error)},this._onPointerEvent=E=>{(E.type==="mousemove"||E.type==="mouseout")&&this._updateHover(E);const T=this.props[Um[E.type]];T&&(this.props.interactiveLayerIds&&E.type!=="mouseover"&&E.type!=="mouseout"&&(E.features=this._hoveredFeatures||this._queryRenderedFeatures(E.point)),T(E),delete E.features)},this._onCameraEvent=E=>{if(!this._internalUpdate){const T=this.props[af[E.type]];T&&T(E)}E.type in this._deferredEvents&&(this._deferredEvents[E.type]=!1)},this._MapClass=p,this.props=y,this._initialize(_)}get map(){return this._map}get transform(){return this._renderTransform}setProps(p){const y=this.props;this.props=p;const _=this._updateSettings(p,y);_&&this._createShadowTransform(this._map);const E=this._updateSize(p),T=this._updateViewState(p,!0);this._updateStyle(p,y),this._updateStyleComponents(p,y),this._updateHandlers(p,y),(_||E||T&&!this._map.isMoving())&&this.redraw()}static reuse(p,y){const _=ih.savedMaps.pop();if(!_)return null;const E=_.map,T=E.getContainer();for(y.className=T.className;T.childNodes.length>0;)y.appendChild(T.childNodes[0]);E._container=y;const C=E._resizeObserver;C&&(C.disconnect(),C.observe(y)),_.setProps({...p,styleDiffing:!1}),E.resize();const{initialViewState:c}=p;return c&&(c.bounds?E.fitBounds(c.bounds,{...c.fitBoundsOptions,duration:0}):_._updateViewState(c,!1)),E.isStyleLoaded()?E.fire("load"):E.once("styledata",()=>E.fire("load")),E._update(),_}_initialize(p){const{props:y}=this,{mapStyle:_=$m}=y,E={...y,...y.initialViewState,accessToken:y.mapboxAccessToken||Gx()||null,container:p,style:Fm(_)},T=E.initialViewState||E.viewState||E;if(Object.assign(E,{center:[T.longitude||0,T.latitude||0],zoom:T.zoom||0,pitch:T.pitch||0,bearing:T.bearing||0}),y.gl){const $=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=$,y.gl)}const C=new this._MapClass(E);T.padding&&C.setPadding(T.padding),y.cursor&&(C.getCanvas().style.cursor=y.cursor),this._createShadowTransform(C);const c=C._render;C._render=$=>{this._inRender=!0,c.call(C,$),this._inRender=!1};const B=C._renderTaskQueue.run;C._renderTaskQueue.run=$=>{B.call(C._renderTaskQueue,$),this._onBeforeRepaint()},C.on("render",()=>this._onAfterRepaint());const j=C.fire;C.fire=this._fireEvent.bind(this,j),C.on("resize",()=>{this._renderTransform.resize(C.transform.width,C.transform.height)}),C.on("styledata",()=>{this._updateStyleComponents(this.props,{}),Dm(C.transform,this._renderTransform)}),C.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const $ in Um)C.on($,this._onPointerEvent);for(const $ in af)C.on($,this._onCameraEvent);for(const $ in Vm)C.on($,this._onEvent);this._map=C}recycle(){const y=this.map.getContainer().querySelector("[mapboxgl-children]");y==null||y.remove(),ih.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const p=this._map;!this._inRender&&p.style&&(p._frame&&(p._frame.cancel(),p._frame=null),p._render())}_createShadowTransform(p){const y=$x(p.transform);p.painter.transform=y,this._renderTransform=y}_updateSize(p){const{viewState:y}=p;if(y){const _=this._map;if(y.width!==_.transform.width||y.height!==_.transform.height)return _.resize(),!0}return!1}_updateViewState(p,y){if(this._internalUpdate)return!1;const _=this._map,E=this._renderTransform,{zoom:T,pitch:C,bearing:c}=E,B=_.isMoving();B&&(E.cameraElevationReference="sea");const j=Bm(E,{...Nm(_.transform),...p});if(B&&(E.cameraElevationReference="ground"),j&&y){const $=this._deferredEvents;$.move=!0,$.zoom||($.zoom=T!==E.zoom),$.rotate||($.rotate=c!==E.bearing),$.pitch||($.pitch=C!==E.pitch)}return B||Bm(_.transform,p),j}_updateSettings(p,y){const _=this._map;let E=!1;for(const T of Vx)if(T in p&&!ho(p[T],y[T])){E=!0;const C=_[`set${T[0].toUpperCase()}${T.slice(1)}`];C==null||C.call(_,p[T])}return E}_updateStyle(p,y){if(p.cursor!==y.cursor&&(this._map.getCanvas().style.cursor=p.cursor||""),p.mapStyle!==y.mapStyle){const{mapStyle:_=$m,styleDiffing:E=!0}=p,T={diff:E};return"localIdeographFontFamily"in p&&(T.localIdeographFontFamily=p.localIdeographFontFamily),this._map.setStyle(Fm(_),T),!0}return!1}_updateStyleComponents(p,y){const _=this._map;let E=!1;return _.isStyleLoaded()&&("light"in p&&_.setLight&&!ho(p.light,y.light)&&(E=!0,_.setLight(p.light)),"fog"in p&&_.setFog&&!ho(p.fog,y.fog)&&(E=!0,_.setFog(p.fog)),"terrain"in p&&_.setTerrain&&!ho(p.terrain,y.terrain)&&(!p.terrain||_.getSource(p.terrain.source))&&(E=!0,_.setTerrain(p.terrain))),E}_updateHandlers(p,y){var _,E;const T=this._map;let C=!1;for(const c of Hx){const B=(_=p[c])!==null&&_!==void 0?_:!0,j=(E=y[c])!==null&&E!==void 0?E:!0;ho(B,j)||(C=!0,B?T[c].enable(B):T[c].disable())}return C}_queryRenderedFeatures(p){const y=this._map,_=y.transform,{interactiveLayerIds:E=[]}=this.props;try{return y.transform=this._renderTransform,y.queryRenderedFeatures(p,{layers:E.filter(y.getLayer.bind(y))})}catch{return[]}finally{y.transform=_}}_updateHover(p){var y;const{props:_}=this;if(_.interactiveLayerIds&&(_.onMouseMove||_.onMouseEnter||_.onMouseLeave)){const T=p.type,C=((y=this._hoveredFeatures)===null||y===void 0?void 0:y.length)>0,c=this._queryRenderedFeatures(p.point),B=c.length>0;!B&&C&&(p.type="mouseleave",this._onPointerEvent(p)),this._hoveredFeatures=c,B&&!C&&(p.type="mouseenter",this._onPointerEvent(p)),p.type=T}else this._hoveredFeatures=null}_fireEvent(p,y,_){const E=this._map,T=E.transform,C=typeof y=="string"?y:y.type;return C==="move"&&this._updateViewState(this.props,!1),C in af&&(typeof y=="object"&&(y.viewState=Nm(T)),this._map.isMoving())?(E.transform=this._renderTransform,p.call(E,y,_),E.transform=T,E):(p.call(E,y,_),E)}_onBeforeRepaint(){const p=this._map;this._internalUpdate=!0;for(const _ in this._deferredEvents)this._deferredEvents[_]&&p.fire(_);this._internalUpdate=!1;const y=this._map.transform;p.transform=this._renderTransform,this._onAfterRepaint=()=>{Dm(this._renderTransform,y),p.transform=y}}}ih.savedMaps=[];function Gx(){let a=null;if(typeof location<"u"){const p=/access_token=([^&\/]*)/.exec(location.search);a=p&&p[1]}try{a=a||Om.MapboxAccessToken}catch{}try{a=a||Om.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return a}const qx=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function Wx(a){if(!a)return null;const p=a.map,y={getMap:()=>p,getCenter:()=>a.transform.center,getZoom:()=>a.transform.zoom,getBearing:()=>a.transform.bearing,getPitch:()=>a.transform.pitch,getPadding:()=>a.transform.padding,getBounds:()=>a.transform.getBounds(),project:_=>{const E=p.transform;p.transform=a.transform;const T=p.project(_);return p.transform=E,T},unproject:_=>{const E=p.transform;p.transform=a.transform;const T=p.unproject(_);return p.transform=E,T},queryTerrainElevation:(_,E)=>{const T=p.transform;p.transform=a.transform;const C=p.queryTerrainElevation(_,E);return p.transform=T,C},queryRenderedFeatures:(_,E)=>{const T=p.transform;p.transform=a.transform;const C=p.queryRenderedFeatures(_,E);return p.transform=T,C}};for(const _ of Zx(p))!(_ in y)&&!qx.includes(_)&&(y[_]=p[_].bind(p));return y}function Zx(a){const p=new Set;let y=a;for(;y;){for(const _ of Object.getOwnPropertyNames(y))_[0]!=="_"&&typeof a[_]=="function"&&_!=="fire"&&_!=="setEventedParent"&&p.add(_);y=Object.getPrototypeOf(y)}return Array.from(p)}const Xx=typeof document<"u"?ne.useLayoutEffect:ne.useEffect,Kx=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function Jx(a,p){for(const _ of Kx)_ in p&&(a[_]=p[_]);const{RTLTextPlugin:y="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=p;y&&a.getRTLTextPluginStatus&&a.getRTLTextPluginStatus()==="unavailable"&&a.setRTLTextPlugin(y,_=>{_&&console.error(_)},!0)}const ch=ne.createContext(null);function Yx(a,p,y){const _=ne.useContext(Fx),[E,T]=ne.useState(null),C=ne.useRef(),{current:c}=ne.useRef({mapLib:null,map:null});ne.useEffect(()=>{const $=a.mapLib;let D=!0,F;return Promise.resolve($||y).then(te=>{if(!D)return;if(!te)throw new Error("Invalid mapLib");const ie="Map"in te?te:te.default;if(!ie.Map)throw new Error("Invalid mapLib");if(Jx(ie,a),!ie.supported||ie.supported(a))a.reuseMaps&&(F=ih.reuse(a,C.current)),F||(F=new ih(ie.Map,a,C.current)),c.map=Wx(F),c.mapLib=ie,T(F),_==null||_.onMapMount(c.map,a.id);else throw new Error("Map is not supported by this browser")}).catch(te=>{const{onError:ie}=a;ie?ie({type:"error",target:null,originalEvent:null,error:te}):console.error(te)}),()=>{D=!1,F&&(_==null||_.onMapUnmount(a.id),a.reuseMaps?F.recycle():F.destroy())}},[]),Xx(()=>{E&&E.setProps(a)}),ne.useImperativeHandle(p,()=>c.map,[E]);const B=ne.useMemo(()=>({position:"relative",width:"100%",height:"100%",...a.style}),[a.style]),j={height:"100%"};return ne.createElement("div",{id:a.id,ref:C,style:B},E&&ne.createElement(ch.Provider,{value:c},ne.createElement("div",{"mapboxgl-children":"",style:j},a.children)))}const Qx=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function hu(a,p){if(!a||!p)return;const y=a.style;for(const _ in p){const E=p[_];Number.isFinite(E)&&!Qx.test(_)?y[_]=`${E}px`:y[_]=E}}function e_(a,p){const{map:y,mapLib:_}=ne.useContext(ch),E=ne.useRef({props:a});E.current.props=a;const T=ne.useMemo(()=>{let W=!1;ne.Children.forEach(a.children,ye=>{ye&&(W=!0)});const Y={...a,element:W?document.createElement("div"):null},pe=new _.Marker(Y);return pe.setLngLat([a.longitude,a.latitude]),pe.getElement().addEventListener("click",ye=>{var ve,Be;(Be=(ve=E.current.props).onClick)===null||Be===void 0||Be.call(ve,{type:"click",target:pe,originalEvent:ye})}),pe.on("dragstart",ye=>{var ve,Be;const Se=ye;Se.lngLat=T.getLngLat(),(Be=(ve=E.current.props).onDragStart)===null||Be===void 0||Be.call(ve,Se)}),pe.on("drag",ye=>{var ve,Be;const Se=ye;Se.lngLat=T.getLngLat(),(Be=(ve=E.current.props).onDrag)===null||Be===void 0||Be.call(ve,Se)}),pe.on("dragend",ye=>{var ve,Be;const Se=ye;Se.lngLat=T.getLngLat(),(Be=(ve=E.current.props).onDragEnd)===null||Be===void 0||Be.call(ve,Se)}),pe},[]);ne.useEffect(()=>(T.addTo(y.getMap()),()=>{T.remove()}),[]);const{longitude:C,latitude:c,offset:B,style:j,draggable:$=!1,popup:D=null,rotation:F=0,rotationAlignment:te="auto",pitchAlignment:ie="auto"}=a;return ne.useEffect(()=>{hu(T.getElement(),j)},[j]),ne.useImperativeHandle(p,()=>T,[]),(T.getLngLat().lng!==C||T.getLngLat().lat!==c)&&T.setLngLat([C,c]),B&&!Ox(T.getOffset(),B)&&T.setOffset(B),T.isDraggable()!==$&&T.setDraggable($),T.getRotation()!==F&&T.setRotation(F),T.getRotationAlignment()!==te&&T.setRotationAlignment(te),T.getPitchAlignment()!==ie&&T.setPitchAlignment(ie),T.getPopup()!==D&&T.setPopup(D),Xg.createPortal(a.children,T.getElement())}const t_=ne.memo(ne.forwardRef(e_));function Hm(a){return new Set(a?a.trim().split(/\s+/):[])}function n_(a,p){const{map:y,mapLib:_}=ne.useContext(ch),E=ne.useMemo(()=>document.createElement("div"),[]),T=ne.useRef({props:a});T.current.props=a;const C=ne.useMemo(()=>{const c={...a},B=new _.Popup(c);return B.setLngLat([a.longitude,a.latitude]),B.once("open",j=>{var $,D;(D=($=T.current.props).onOpen)===null||D===void 0||D.call($,j)}),B},[]);if(ne.useEffect(()=>{const c=B=>{var j,$;($=(j=T.current.props).onClose)===null||$===void 0||$.call(j,B)};return C.on("close",c),C.setDOMContent(E).addTo(y.getMap()),()=>{C.off("close",c),C.isOpen()&&C.remove()}},[]),ne.useEffect(()=>{hu(C.getElement(),a.style)},[a.style]),ne.useImperativeHandle(p,()=>C,[]),C.isOpen()&&((C.getLngLat().lng!==a.longitude||C.getLngLat().lat!==a.latitude)&&C.setLngLat([a.longitude,a.latitude]),a.offset&&!ho(C.options.offset,a.offset)&&C.setOffset(a.offset),(C.options.anchor!==a.anchor||C.options.maxWidth!==a.maxWidth)&&(C.options.anchor=a.anchor,C.setMaxWidth(a.maxWidth)),C.options.className!==a.className)){const c=Hm(C.options.className),B=Hm(a.className);for(const j of c)B.has(j)||C.removeClassName(j);for(const j of B)c.has(j)||C.addClassName(j);C.options.className=a.className}return Xg.createPortal(a.children,E)}ne.memo(ne.forwardRef(n_));function yd(a,p,y,_){const E=ne.useContext(ch),T=ne.useMemo(()=>a(E),[]);return ne.useEffect(()=>{const C=p,c=null,B=typeof p=="function"?p:null,{map:j}=E;return j.hasControl(T)||(j.addControl(T,C==null?void 0:C.position),c&&c(E)),()=>{B&&B(E),j.hasControl(T)&&j.removeControl(T)}},[]),T}function r_(a){const p=yd(({mapLib:y})=>new y.AttributionControl(a),{position:a.position});return ne.useEffect(()=>{hu(p._container,a.style)},[a.style]),null}ne.memo(r_);function i_(a){const p=yd(({mapLib:y})=>new y.FullscreenControl({container:a.containerId&&document.getElementById(a.containerId)}),{position:a.position});return ne.useEffect(()=>{hu(p._controlContainer,a.style)},[a.style]),null}ne.memo(i_);function o_(a,p){const y=ne.useRef({props:a}),_=yd(({mapLib:E})=>{const T=new E.GeolocateControl(a),C=T._setupUI;return T._setupUI=c=>{T._container.hasChildNodes()||C(c)},T.on("geolocate",c=>{var B,j;(j=(B=y.current.props).onGeolocate)===null||j===void 0||j.call(B,c)}),T.on("error",c=>{var B,j;(j=(B=y.current.props).onError)===null||j===void 0||j.call(B,c)}),T.on("outofmaxbounds",c=>{var B,j;(j=(B=y.current.props).onOutOfMaxBounds)===null||j===void 0||j.call(B,c)}),T.on("trackuserlocationstart",c=>{var B,j;(j=(B=y.current.props).onTrackUserLocationStart)===null||j===void 0||j.call(B,c)}),T.on("trackuserlocationend",c=>{var B,j;(j=(B=y.current.props).onTrackUserLocationEnd)===null||j===void 0||j.call(B,c)}),T},{position:a.position});return y.current.props=a,ne.useImperativeHandle(p,()=>_,[]),ne.useEffect(()=>{hu(_._container,a.style)},[a.style]),null}ne.memo(ne.forwardRef(o_));function s_(a){const p=yd(({mapLib:y})=>new y.NavigationControl(a),{position:a.position});return ne.useEffect(()=>{hu(p._container,a.style)},[a.style]),null}ne.memo(s_);function a_(a){const p=yd(({mapLib:T})=>new T.ScaleControl(a),{position:a.position}),y=ne.useRef(a),_=y.current;y.current=a;const{style:E}=a;return a.maxWidth!==void 0&&a.maxWidth!==_.maxWidth&&(p.options.maxWidth=a.maxWidth),a.unit!==void 0&&a.unit!==_.unit&&p.setUnit(a.unit),ne.useEffect(()=>{hu(p._container,E)},[E]),null}ne.memo(a_);function _p(a,p){if(!a)throw new Error(p)}function l_(a,p,y,_){if(_p(y.id===_.id,"layer id changed"),_p(y.type===_.type,"layer type changed"),y.type==="custom"||_.type==="custom")return;const{layout:E={},paint:T={},filter:C,minzoom:c,maxzoom:B,beforeId:j}=y;if(j!==_.beforeId&&a.moveLayer(p,j),E!==_.layout){const $=_.layout||{};for(const D in E)ho(E[D],$[D])||a.setLayoutProperty(p,D,E[D]);for(const D in $)E.hasOwnProperty(D)||a.setLayoutProperty(p,D,void 0)}if(T!==_.paint){const $=_.paint||{};for(const D in T)ho(T[D],$[D])||a.setPaintProperty(p,D,T[D]);for(const D in $)T.hasOwnProperty(D)||a.setPaintProperty(p,D,void 0)}ho(C,_.filter)||a.setFilter(p,C),(c!==_.minzoom||B!==_.maxzoom)&&a.setLayerZoomRange(p,c,B)}function c_(a,p,y){if(a.style&&a.style._loaded&&(!("source"in y)||a.getSource(y.source))){const _={...y,id:p};delete _.beforeId,a.addLayer(_,y.beforeId)}}let u_=0;function h_(a){const p=ne.useContext(ch).map.getMap(),y=ne.useRef(a),[,_]=ne.useState(0),E=ne.useMemo(()=>a.id||`jsx-layer-${u_++}`,[]);if(ne.useEffect(()=>{if(p){const C=()=>_(c=>c+1);return p.on("styledata",C),C(),()=>{p.off("styledata",C),p.style&&p.style._loaded&&p.getLayer(E)&&p.removeLayer(E)}}},[p]),p&&p.style&&p.getLayer(E))try{l_(p,E,a,y.current)}catch(C){console.warn(C)}else c_(p,E,a);return y.current=a,null}let d_=0;function p_(a,p,y){if(a.style&&a.style._loaded){const _={...y};return delete _.id,delete _.children,a.addSource(p,_),a.getSource(p)}return null}function f_(a,p,y){_p(p.id===y.id,"source id changed"),_p(p.type===y.type,"source type changed");let _="",E=0;for(const C in p)C!=="children"&&C!=="id"&&!ho(y[C],p[C])&&(_=C,E++);if(!E)return;const T=p.type;T==="geojson"?a.setData(p.data):T==="image"?a.updateImage({url:p.url,coordinates:p.coordinates}):"setCoordinates"in a&&E===1&&_==="coordinates"?a.setCoordinates(p.coordinates):"setUrl"in a&&_==="url"?a.setUrl(p.url):"setTiles"in a&&_==="tiles"?a.setTiles(p.tiles):console.warn(`Unable to update <Source> prop: ${_}`)}function m_(a){const p=ne.useContext(ch).map.getMap(),y=ne.useRef(a),[,_]=ne.useState(0),E=ne.useMemo(()=>a.id||`jsx-source-${d_++}`,[]);ne.useEffect(()=>{if(p){const C=()=>setTimeout(()=>_(c=>c+1),0);return p.on("styledata",C),C(),()=>{var c;if(p.off("styledata",C),p.style&&p.style._loaded&&p.getSource(E)){const B=(c=p.getStyle())===null||c===void 0?void 0:c.layers;if(B)for(const j of B)j.source===E&&p.removeLayer(j.id);p.removeSource(E)}}}},[p]);let T=p&&p.style&&p.getSource(E);return T?f_(T,a,y.current):T=p_(p,E,a),y.current=a,T&&ne.Children.map(a.children,C=>C&&ne.cloneElement(C,{source:E}))||null}const g_=a0(()=>Promise.resolve().then(()=>F_),void 0),Tp=ne.forwardRef(function(p,y){return Yx(p,y,g_)}),xs=t_,oh=h_,sh=m_,y_={},Gm=a=>{let p;const y=new Set,_=($,D)=>{const F=typeof $=="function"?$(p):$;if(!Object.is(F,p)){const te=p;p=D??(typeof F!="object"||F===null)?F:Object.assign({},p,F),y.forEach(ie=>ie(p,te))}},E=()=>p,B={setState:_,getState:E,getInitialState:()=>j,subscribe:$=>(y.add($),()=>y.delete($)),destroy:()=>{(y_?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),y.clear()}},j=p=a(_,E,B);return B},v_=a=>a?Gm(a):Gm;var lf={exports:{}},cf={},uf={exports:{}},hf={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qm;function x_(){if(qm)return hf;qm=1;var a=hd();function p(D,F){return D===F&&(D!==0||1/D===1/F)||D!==D&&F!==F}var y=typeof Object.is=="function"?Object.is:p,_=a.useState,E=a.useEffect,T=a.useLayoutEffect,C=a.useDebugValue;function c(D,F){var te=F(),ie=_({inst:{value:te,getSnapshot:F}}),W=ie[0].inst,Y=ie[1];return T(function(){W.value=te,W.getSnapshot=F,B(W)&&Y({inst:W})},[D,te,F]),E(function(){return B(W)&&Y({inst:W}),D(function(){B(W)&&Y({inst:W})})},[D]),C(te),te}function B(D){var F=D.getSnapshot;D=D.value;try{var te=F();return!y(D,te)}catch{return!0}}function j(D,F){return F()}var $=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?j:c;return hf.useSyncExternalStore=a.useSyncExternalStore!==void 0?a.useSyncExternalStore:$,hf}var Wm;function __(){return Wm||(Wm=1,uf.exports=x_()),uf.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zm;function w_(){if(Zm)return cf;Zm=1;var a=hd(),p=__();function y(j,$){return j===$&&(j!==0||1/j===1/$)||j!==j&&$!==$}var _=typeof Object.is=="function"?Object.is:y,E=p.useSyncExternalStore,T=a.useRef,C=a.useEffect,c=a.useMemo,B=a.useDebugValue;return cf.useSyncExternalStoreWithSelector=function(j,$,D,F,te){var ie=T(null);if(ie.current===null){var W={hasValue:!1,value:null};ie.current=W}else W=ie.current;ie=c(function(){function pe(Ke){if(!ye){if(ye=!0,ve=Ke,Ke=F(Ke),te!==void 0&&W.hasValue){var Je=W.value;if(te(Je,Ke))return Be=Je}return Be=Ke}if(Je=Be,_(ve,Ke))return Je;var He=F(Ke);return te!==void 0&&te(Je,He)?(ve=Ke,Je):(ve=Ke,Be=He)}var ye=!1,ve,Be,Se=D===void 0?null:D;return[function(){return pe($())},Se===null?void 0:function(){return pe(Se())}]},[$,D,F,te]);var Y=E(j,ie[0],ie[1]);return C(function(){W.hasValue=!0,W.value=Y},[Y]),B(Y),Y},cf}var Xm;function b_(){return Xm||(Xm=1,lf.exports=w_()),lf.exports}var S_=b_();const E_=Sp(S_),l0={},{useDebugValue:T_}=id,{useSyncExternalStoreWithSelector:k_}=E_;let Km=!1;const M_=a=>a;function C_(a,p=M_,y){(l0?"production":void 0)!=="production"&&y&&!Km&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Km=!0);const _=k_(a.subscribe,a.getState,a.getServerState||a.getInitialState,p,y);return T_(_),_}const Jm=a=>{(l0?"production":void 0)!=="production"&&typeof a!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const p=typeof a=="function"?v_(a):a,y=(_,E)=>C_(p,_,E);return Object.assign(y,p),y},Hf=a=>a?Jm(a):Jm,P_={};function I_(a,p){let y;try{y=a()}catch{return}return{getItem:E=>{var T;const C=B=>B===null?null:JSON.parse(B,void 0),c=(T=y.getItem(E))!=null?T:null;return c instanceof Promise?c.then(C):C(c)},setItem:(E,T)=>y.setItem(E,JSON.stringify(T,void 0)),removeItem:E=>y.removeItem(E)}}const ad=a=>p=>{try{const y=a(p);return y instanceof Promise?y:{then(_){return ad(_)(y)},catch(_){return this}}}catch(y){return{then(_){return this},catch(_){return ad(_)(y)}}}},A_=(a,p)=>(y,_,E)=>{let T={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:Y=>Y,version:0,merge:(Y,pe)=>({...pe,...Y}),...p},C=!1;const c=new Set,B=new Set;let j;try{j=T.getStorage()}catch{}if(!j)return a((...Y)=>{console.warn(`[zustand persist middleware] Unable to update item '${T.name}', the given storage is currently unavailable.`),y(...Y)},_,E);const $=ad(T.serialize),D=()=>{const Y=T.partialize({..._()});let pe;const ye=$({state:Y,version:T.version}).then(ve=>j.setItem(T.name,ve)).catch(ve=>{pe=ve});if(pe)throw pe;return ye},F=E.setState;E.setState=(Y,pe)=>{F(Y,pe),D()};const te=a((...Y)=>{y(...Y),D()},_,E);let ie;const W=()=>{var Y;if(!j)return;C=!1,c.forEach(ye=>ye(_()));const pe=((Y=T.onRehydrateStorage)==null?void 0:Y.call(T,_()))||void 0;return ad(j.getItem.bind(j))(T.name).then(ye=>{if(ye)return T.deserialize(ye)}).then(ye=>{if(ye)if(typeof ye.version=="number"&&ye.version!==T.version){if(T.migrate)return T.migrate(ye.state,ye.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return ye.state}).then(ye=>{var ve;return ie=T.merge(ye,(ve=_())!=null?ve:te),y(ie,!0),D()}).then(()=>{pe==null||pe(ie,void 0),C=!0,B.forEach(ye=>ye(ie))}).catch(ye=>{pe==null||pe(void 0,ye)})};return E.persist={setOptions:Y=>{T={...T,...Y},Y.getStorage&&(j=Y.getStorage())},clearStorage:()=>{j==null||j.removeItem(T.name)},getOptions:()=>T,rehydrate:()=>W(),hasHydrated:()=>C,onHydrate:Y=>(c.add(Y),()=>{c.delete(Y)}),onFinishHydration:Y=>(B.add(Y),()=>{B.delete(Y)})},W(),ie||te},L_=(a,p)=>(y,_,E)=>{let T={storage:I_(()=>localStorage),partialize:W=>W,version:0,merge:(W,Y)=>({...Y,...W}),...p},C=!1;const c=new Set,B=new Set;let j=T.storage;if(!j)return a((...W)=>{console.warn(`[zustand persist middleware] Unable to update item '${T.name}', the given storage is currently unavailable.`),y(...W)},_,E);const $=()=>{const W=T.partialize({..._()});return j.setItem(T.name,{state:W,version:T.version})},D=E.setState;E.setState=(W,Y)=>{D(W,Y),$()};const F=a((...W)=>{y(...W),$()},_,E);E.getInitialState=()=>F;let te;const ie=()=>{var W,Y;if(!j)return;C=!1,c.forEach(ye=>{var ve;return ye((ve=_())!=null?ve:F)});const pe=((Y=T.onRehydrateStorage)==null?void 0:Y.call(T,(W=_())!=null?W:F))||void 0;return ad(j.getItem.bind(j))(T.name).then(ye=>{if(ye)if(typeof ye.version=="number"&&ye.version!==T.version){if(T.migrate)return[!0,T.migrate(ye.state,ye.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,ye.state];return[!1,void 0]}).then(ye=>{var ve;const[Be,Se]=ye;if(te=T.merge(Se,(ve=_())!=null?ve:F),y(te,!0),Be)return $()}).then(()=>{pe==null||pe(te,void 0),te=_(),C=!0,B.forEach(ye=>ye(te))}).catch(ye=>{pe==null||pe(void 0,ye)})};return E.persist={setOptions:W=>{T={...T,...W},W.storage&&(j=W.storage)},clearStorage:()=>{j==null||j.removeItem(T.name)},getOptions:()=>T,rehydrate:()=>ie(),hasHydrated:()=>C,onHydrate:W=>(c.add(W),()=>{c.delete(W)}),onFinishHydration:W=>(B.add(W),()=>{B.delete(W)})},T.skipHydration||ie(),te||F},z_=(a,p)=>"getStorage"in p||"serialize"in p||"deserialize"in p?((P_?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),A_(a,p)):L_(a,p),Gf=z_,uh=Hf(Gf(a=>({language:"fa",setLanguage:p=>a({language:p})}),{name:"lang-storage",version:1}));function kp(a="fa"){const p="/golden_path/";return a==="fa"?`${p}data14040404.geojson`:`${p}data14040404_${a}.geojson`}const R_={sahn:"#4caf50",eyvan:"#2196f3",ravaq:"#9c27b0",masjed:"#ff9800",madrese:"#3f51b5",khadamat:"#607d8b",elmi:"#00bcd4",cemetery:"#795548",other:"#757575"},j_={door:"",connection:"",elevator:"",escalator:"",ramp:"",stairs:"",service:"",other:""},D_=(a,p,y=35,_=1)=>{const E=R_[a]||"#999",T=j_[p]||"";return v.jsx("div",{style:{width:y,height:y,backgroundColor:E,opacity:_,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:18,fontWeight:"bold",boxShadow:"0 2px 6px rgba(0,0,0,0.3)"},children:T})},qf=({selectedCategory:a})=>{const[p,y]=ne.useState(null),_=uh(C=>C.language);if(ne.useEffect(()=>{const C=kp(_);fetch(C).then(c=>c.json()).then(c=>y(c.features||[])).catch(c=>console.error("failed to load geojson",c))},[_]),!p)return null;const E=p.filter(C=>C.geometry.type==="Point"),T=p.filter(C=>C.geometry.type==="Polygon"||C.geometry.type==="MultiPolygon");return v.jsxs(v.Fragment,{children:[T.length>0&&v.jsx(sh,{id:"overlay-polygons",type:"geojson",data:{type:"FeatureCollection",features:T},children:v.jsx(oh,{id:"overlay-lines",type:"line",paint:{"line-color":"#333","line-width":2}})}),E.map((C,c)=>{var pe;const[B,j]=C.geometry.coordinates,{group:$,nodeFunction:D}=C.properties||{},F=a&&C.properties&&C.properties[a.property]===a.value,te=!!a,ie=te?F?40:25:35,W=te?F?1:.4:1,Y=((pe=C.properties)==null?void 0:pe.uniqueId)||c;return v.jsx(xs,{longitude:B,latitude:j,anchor:"center",children:D_($,D,ie,W)},Y)})]})};var pp={exports:{}},N_=pp.exports,Ym;function B_(){return Ym||(Ym=1,function(a,p){(function(y,_){a.exports=_()})(N_,function(){var y,_,E;function T(c,B){if(!y)y=B;else if(!_)_=B;else{var j="var sharedChunk = {}; ("+y+")(sharedChunk); ("+_+")(sharedChunk);",$={};y($),E=B($),typeof window<"u"&&(E.workerUrl=window.URL.createObjectURL(new Blob([j],{type:"text/javascript"})))}}T(["exports"],function(c){var B=j;function j(i,t,o,u){this.cx=3*i,this.bx=3*(o-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(u-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=t,this.p2x=o,this.p2y=u}function $(i,t,o,u){const g=new B(i,t,o,u);return function(w){return g.solve(w)}}j.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,t){if(t===void 0&&(t=1e-6),i<0)return 0;if(i>1)return 1;for(var o=i,u=0;u<8;u++){var g=this.sampleCurveX(o)-i;if(Math.abs(g)<t)return o;var w=this.sampleCurveDerivativeX(o);if(Math.abs(w)<1e-6)break;o-=g/w}var e=0,r=1;for(o=i,u=0;u<20&&(g=this.sampleCurveX(o),!(Math.abs(g-i)<t));u++)i>g?e=o:r=o,o=.5*(r-e)+e;return o},solve:function(i,t){return this.sampleCurveY(this.solveCurveX(i,t))}};const D=$(.25,.1,.25,1);function F(i,t,o){return Math.min(o,Math.max(t,i))}function te(i,t,o){const u=o-t,g=((i-t)%u+u)%u+t;return g===t?o:g}function ie(i,...t){for(const o of t)for(const u in o)i[u]=o[u];return i}let W=1;function Y(i,t){i.forEach(o=>{t[o]&&(t[o]=t[o].bind(t))})}function pe(i,t,o){const u={};for(const g in i)u[g]=t.call(o||this,i[g],g,i);return u}function ye(i,t,o){const u={};for(const g in i)t.call(o||this,i[g],g,i)&&(u[g]=i[g]);return u}function ve(i){return Array.isArray(i)?i.map(ve):typeof i=="object"&&i?pe(i,ve):i}const Be={};function Se(i){Be[i]||(typeof console<"u"&&console.warn(i),Be[i]=!0)}function Ke(i,t,o){return(o.y-i.y)*(t.x-i.x)>(t.y-i.y)*(o.x-i.x)}function Je(i){let t=0;for(let o,u,g=0,w=i.length,e=w-1;g<w;e=g++)o=i[g],u=i[e],t+=(u.x-o.x)*(o.y+u.y);return t}function He(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function gt(i){const t={};if(i.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(o,u,g,w)=>{const e=g||w;return t[u]=!e||e.toLowerCase(),""}),t["max-age"]){const o=parseInt(t["max-age"],10);isNaN(o)?delete t["max-age"]:t["max-age"]=o}return t}let pt,wt,Tt=null;function bt(i){if(Tt==null){const t=i.navigator?i.navigator.userAgent:null;Tt=!!i.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return Tt}function mt(i){return typeof ImageBitmap<"u"&&i instanceof ImageBitmap}const Ct={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(i){const t=requestAnimationFrame(i);return{cancel:()=>cancelAnimationFrame(t)}},getImageData(i,t=0){const o=window.document.createElement("canvas"),u=o.getContext("2d");if(!u)throw new Error("failed to create canvas 2d context");return o.width=i.width,o.height=i.height,u.drawImage(i,0,0,i.width,i.height),u.getImageData(-t,-t,i.width+2*t,i.height+2*t)},resolveURL:i=>(pt||(pt=document.createElement("a")),pt.href=i,pt.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(wt==null&&(wt=matchMedia("(prefers-reduced-motion: reduce)")),wt.matches)}};var Ze=Pt;function Pt(i,t){this.x=i,this.y=t}Pt.prototype={clone:function(){return new Pt(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,t){return this.clone()._rotateAround(i,t)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var t=i.x-this.x,o=i.y-this.y;return t*t+o*o},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,t){return Math.atan2(this.x*t-this.y*i,this.x*i+this.y*t)},_matMult:function(i){var t=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=t,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var t=Math.cos(i),o=Math.sin(i),u=o*this.x+t*this.y;return this.x=t*this.x-o*this.y,this.y=u,this},_rotateAround:function(i,t){var o=Math.cos(i),u=Math.sin(i),g=t.y+u*(this.x-t.x)+o*(this.y-t.y);return this.x=t.x+o*(this.x-t.x)-u*(this.y-t.y),this.y=g,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Pt.convert=function(i){return i instanceof Pt?i:Array.isArray(i)?new Pt(i[0],i[1]):i};const We={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},at="mapbox-tiles";let rt,we=500,Ve=50;function St(){typeof caches>"u"||rt||(rt=caches.open(at))}let At=1/0;const zt={supported:!1,testSupport:function(i){!Yt&&Kt&&(Ft?An(i):Nt=i)}};let Nt,Kt,Yt=!1,Ft=!1;function An(i){const t=i.createTexture();i.bindTexture(i.TEXTURE_2D,t);try{if(i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,Kt),i.isContextLost())return;zt.supported=!0}catch{}i.deleteTexture(t),Yt=!0}typeof document<"u"&&(Kt=document.createElement("img"),Kt.onload=function(){Nt&&An(Nt),Nt=null,Ft=!0},Kt.onerror=function(){Yt=!0,Nt=null},Kt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const br={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(br);class Qn extends Error{constructor(t,o,u,g){super(`AJAXError: ${o} (${t}): ${u}`),this.status=t,this.statusText=o,this.url=u,this.body=g}}const jn=He()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function si(i,t){const o=new AbortController,u=new Request(i.url,{method:i.method||"GET",body:i.body,credentials:i.credentials,headers:i.headers,referrer:jn(),signal:o.signal});let g=!1,w=!1;return i.type==="json"&&u.headers.set("Accept","application/json"),((e,r,l)=>{w||fetch(u).then(d=>d.ok?((x,S,M)=>{(i.type==="arrayBuffer"?x.arrayBuffer():i.type==="json"?x.json():x.text()).then(A=>{w||(g=!0,t(null,A,x.headers.get("Cache-Control"),x.headers.get("Expires")))}).catch(A=>{w||t(new Error(A.message))})})(d):d.blob().then(x=>t(new Qn(d.status,d.statusText,i.url,x)))).catch(d=>{d.code!==20&&t(new Error(d.message))})})(),{cancel:()=>{w=!0,g||o.abort()}}}const Qe=function(i,t){if(/:\/\//.test(i.url)&&!/^https?:|^file:/.test(i.url)){if(He()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",i,t);if(!He()){const u=i.url.substring(0,i.url.indexOf("://"));return(We.REGISTERED_PROTOCOLS[u]||si)(i,t)}}if(!(/^file:/.test(o=i.url)||/^file:/.test(jn())&&!/^\w+:/.test(o))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return si(i,t);if(He()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",i,t,void 0,!0)}var o;return function(u,g){const w=new XMLHttpRequest;w.open(u.method||"GET",u.url,!0),u.type==="arrayBuffer"&&(w.responseType="arraybuffer");for(const e in u.headers)w.setRequestHeader(e,u.headers[e]);return u.type==="json"&&(w.responseType="text",w.setRequestHeader("Accept","application/json")),w.withCredentials=u.credentials==="include",w.onerror=()=>{g(new Error(w.statusText))},w.onload=()=>{if((w.status>=200&&w.status<300||w.status===0)&&w.response!==null){let e=w.response;if(u.type==="json")try{e=JSON.parse(w.response)}catch(r){return g(r)}g(null,e,w.getResponseHeader("Cache-Control"),w.getResponseHeader("Expires"))}else{const e=new Blob([w.response],{type:w.getResponseHeader("Content-Type")});g(new Qn(w.status,w.statusText,u.url,e))}},w.send(u.body),{cancel:()=>w.abort()}}(i,t)},tt=function(i,t){return Qe(ie(i,{type:"arrayBuffer"}),t)};function Ot(i){const t=window.document.createElement("a");return t.href=i,t.protocol===window.document.location.protocol&&t.host===window.document.location.host}const ln="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let dt,tn;dt=[],tn=0;const Br=function(i,t){if(zt.supported&&(i.headers||(i.headers={}),i.headers.accept="image/webp,*/*"),tn>=We.MAX_PARALLEL_IMAGE_REQUESTS){const w={requestParameters:i,callback:t,cancelled:!1,cancel(){this.cancelled=!0}};return dt.push(w),w}tn++;let o=!1;const u=()=>{if(!o)for(o=!0,tn--;dt.length&&tn<We.MAX_PARALLEL_IMAGE_REQUESTS;){const w=dt.shift(),{requestParameters:e,callback:r,cancelled:l}=w;l||(w.cancel=Br(e,r).cancel)}},g=tt(i,(w,e,r,l)=>{u(),w?t(w):e&&function(d,x){typeof createImageBitmap=="function"?function(S,M){const A=new Blob([new Uint8Array(S)],{type:"image/png"});createImageBitmap(A).then(L=>{M(null,L)}).catch(L=>{M(new Error(`Could not load image because of ${L.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(d,x):function(S,M){const A=new Image;A.onload=()=>{M(null,A),URL.revokeObjectURL(A.src),A.onload=null,window.requestAnimationFrame(()=>{A.src=ln})},A.onerror=()=>M(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const L=new Blob([new Uint8Array(S)],{type:"image/png"});A.src=S.byteLength?URL.createObjectURL(L):ln}(d,x)}(e,(d,x)=>{d!=null?t(d):x!=null&&t(null,x,{cacheControl:r,expires:l})})});return{cancel:()=>{g.cancel(),u()}}};function kn(i,t,o){o[i]&&o[i].indexOf(t)!==-1||(o[i]=o[i]||[],o[i].push(t))}function rr(i,t,o){if(o&&o[i]){const u=o[i].indexOf(t);u!==-1&&o[i].splice(u,1)}}class On{constructor(t,o={}){ie(this,o),this.type=t}}class Fr extends On{constructor(t,o={}){super("error",ie({error:t},o))}}class Hr{on(t,o){return this._listeners=this._listeners||{},kn(t,o,this._listeners),this}off(t,o){return rr(t,o,this._listeners),rr(t,o,this._oneTimeListeners),this}once(t,o){return this._oneTimeListeners=this._oneTimeListeners||{},kn(t,o,this._oneTimeListeners),this}fire(t,o){typeof t=="string"&&(t=new On(t,o||{}));const u=t.type;if(this.listens(u)){t.target=this;const g=this._listeners&&this._listeners[u]?this._listeners[u].slice():[];for(const r of g)r.call(this,t);const w=this._oneTimeListeners&&this._oneTimeListeners[u]?this._oneTimeListeners[u].slice():[];for(const r of w)rr(u,r,this._oneTimeListeners),r.call(this,t);const e=this._eventedParent;e&&(ie(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),e.fire(t))}else t instanceof Fr&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,o){return this._eventedParent=t,this._eventedParentData=o,this}}var Le={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class Xe{constructor(t,o,u,g){this.message=(t?`${t}: `:"")+u,g&&(this.identifier=g),o!=null&&o.__line__&&(this.line=o.__line__)}}function Sr(i){const t=i.value;return t?[new Xe(i.key,t,"constants have been deprecated as of v8")]:[]}function ir(i,...t){for(const o of t)for(const u in o)i[u]=o[u];return i}function dn(i){return i instanceof Number||i instanceof String||i instanceof Boolean?i.valueOf():i}function Sn(i){if(Array.isArray(i))return i.map(Sn);if(i instanceof Object&&!(i instanceof Number||i instanceof String||i instanceof Boolean)){const t={};for(const o in i)t[o]=Sn(i[o]);return t}return dn(i)}class er extends Error{constructor(t,o){super(o),this.message=o,this.key=t}}class ji{constructor(t,o=[]){this.parent=t,this.bindings={};for(const[u,g]of o)this.bindings[u]=g}concat(t){return new ji(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const fr={kind:"null"},et={kind:"number"},Bt={kind:"string"},Rt={kind:"boolean"},tr={kind:"color"},lr={kind:"object"},Lt={kind:"value"},or={kind:"collator"},Gr={kind:"formatted"},je={kind:"padding"},It={kind:"resolvedImage"};function $t(i,t){return{kind:"array",itemType:i,N:t}}function mn(i){if(i.kind==="array"){const t=mn(i.itemType);return typeof i.N=="number"?`array<${t}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${t}>`}return i.kind}const yi=[fr,et,Bt,Rt,tr,Gr,lr,$t(Lt),je,It];function Er(i,t){if(t.kind==="error")return null;if(i.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!Er(i.itemType,t.itemType))&&(typeof i.N!="number"||i.N===t.N))return null}else{if(i.kind===t.kind)return null;if(i.kind==="value"){for(const o of yi)if(!Er(o,t))return null}}return`Expected ${mn(i)} but found ${mn(t)} instead.`}function ai(i,t){return t.some(o=>o.kind===i.kind)}function vi(i,t){return t.some(o=>o==="null"?i===null:o==="array"?Array.isArray(i):o==="object"?i&&!Array.isArray(i)&&typeof i=="object":o===typeof i)}var Gi,la={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Kr(i){return(i=Math.round(i))<0?0:i>255?255:i}function Z(i){return Kr(i[i.length-1]==="%"?parseFloat(i)/100*255:parseInt(i))}function R(i){return(t=i[i.length-1]==="%"?parseFloat(i)/100:parseFloat(i))<0?0:t>1?1:t;var t}function O(i,t,o){return o<0?o+=1:o>1&&(o-=1),6*o<1?i+(t-i)*o*6:2*o<1?t:3*o<2?i+(t-i)*(2/3-o)*6:i}try{Gi={}.parseCSSColor=function(i){var t,o=i.replace(/ /g,"").toLowerCase();if(o in la)return la[o].slice();if(o[0]==="#")return o.length===4?(t=parseInt(o.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:o.length===7&&(t=parseInt(o.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var u=o.indexOf("("),g=o.indexOf(")");if(u!==-1&&g+1===o.length){var w=o.substr(0,u),e=o.substr(u+1,g-(u+1)).split(","),r=1;switch(w){case"rgba":if(e.length!==4)return null;r=R(e.pop());case"rgb":return e.length!==3?null:[Z(e[0]),Z(e[1]),Z(e[2]),r];case"hsla":if(e.length!==4)return null;r=R(e.pop());case"hsl":if(e.length!==3)return null;var l=(parseFloat(e[0])%360+360)%360/360,d=R(e[1]),x=R(e[2]),S=x<=.5?x*(d+1):x+d-x*d,M=2*x-S;return[Kr(255*O(M,S,l+1/3)),Kr(255*O(M,S,l)),Kr(255*O(M,S,l-1/3)),r];default:return null}}return null}}catch{}class G{constructor(t,o,u,g=1){this.r=t,this.g=o,this.b=u,this.a=g}static parse(t){if(!t)return;if(t instanceof G)return t;if(typeof t!="string")return;const o=Gi(t);return o?new G(o[0]/255*o[3],o[1]/255*o[3],o[2]/255*o[3],o[3]):void 0}toString(){const[t,o,u,g]=this.toArray();return`rgba(${Math.round(t)},${Math.round(o)},${Math.round(u)},${g})`}toArray(){const{r:t,g:o,b:u,a:g}=this;return g===0?[0,0,0,0]:[255*t/g,255*o/g,255*u/g,g]}}G.black=new G(0,0,0,1),G.white=new G(1,1,1,1),G.transparent=new G(0,0,0,0),G.red=new G(1,0,0,1);class J{constructor(t,o,u){this.sensitivity=t?o?"variant":"case":o?"accent":"base",this.locale=u,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,o){return this.collator.compare(t,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ce{constructor(t,o,u,g,w){this.text=t,this.image=o,this.scale=u,this.fontStack=g,this.textColor=w}}class me{constructor(t){this.sections=t}static fromString(t){return new me([new ce(t,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof me?t:me.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}}class fe{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof fe)return t;if(typeof t=="number")return new fe([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const o of t)if(typeof o!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new fe(t)}}toString(){return JSON.stringify(this.values)}}class ue{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new ue({name:t,available:!1}):null}}function _e(i,t,o,u){return typeof i=="number"&&i>=0&&i<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof o=="number"&&o>=0&&o<=255?u===void 0||typeof u=="number"&&u>=0&&u<=1?null:`Invalid rgba value [${[i,t,o,u].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof u=="number"?[i,t,o,u]:[i,t,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ae(i){if(i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||i instanceof G||i instanceof J||i instanceof me||i instanceof fe||i instanceof ue)return!0;if(Array.isArray(i)){for(const t of i)if(!Ae(t))return!1;return!0}if(typeof i=="object"){for(const t in i)if(!Ae(i[t]))return!1;return!0}return!1}function Ue(i){if(i===null)return fr;if(typeof i=="string")return Bt;if(typeof i=="boolean")return Rt;if(typeof i=="number")return et;if(i instanceof G)return tr;if(i instanceof J)return or;if(i instanceof me)return Gr;if(i instanceof fe)return je;if(i instanceof ue)return It;if(Array.isArray(i)){const t=i.length;let o;for(const u of i){const g=Ue(u);if(o){if(o===g)continue;o=Lt;break}o=g}return $t(o||Lt,t)}return lr}function $e(i){const t=typeof i;return i===null?"":t==="string"||t==="number"||t==="boolean"?String(i):i instanceof G||i instanceof me||i instanceof fe||i instanceof ue?i.toString():JSON.stringify(i)}class ft{constructor(t,o){this.type=t,this.value=o}static parse(t,o){if(t.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Ae(t[1]))return o.error("invalid value");const u=t[1];let g=Ue(u);const w=o.expectedType;return g.kind!=="array"||g.N!==0||!w||w.kind!=="array"||typeof w.N=="number"&&w.N!==0||(g=w),new ft(g,u)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class ct{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const vt={string:Bt,number:et,boolean:Rt,object:lr};class ot{constructor(t,o){this.type=t,this.args=o}static parse(t,o){if(t.length<2)return o.error("Expected at least one argument.");let u,g=1;const w=t[0];if(w==="array"){let r,l;if(t.length>2){const d=t[1];if(typeof d!="string"||!(d in vt)||d==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);r=vt[d],g++}else r=Lt;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return o.error('The length argument to "array" must be a positive integer literal',2);l=t[2],g++}u=$t(r,l)}else{if(!vt[w])throw new Error(`Types doesn't contain name = ${w}`);u=vt[w]}const e=[];for(;g<t.length;g++){const r=o.parse(t[g],g,Lt);if(!r)return null;e.push(r)}return new ot(u,e)}evaluate(t){for(let o=0;o<this.args.length;o++){const u=this.args[o].evaluate(t);if(!Er(this.type,Ue(u)))return u;if(o===this.args.length-1)throw new ct(`Expected value to be of type ${mn(this.type)}, but found ${mn(Ue(u))} instead.`)}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const qt={"to-boolean":Rt,"to-color":tr,"to-number":et,"to-string":Bt};class Wt{constructor(t,o){this.type=t,this.args=o}static parse(t,o){if(t.length<2)return o.error("Expected at least one argument.");const u=t[0];if(!qt[u])throw new Error(`Can't parse ${u} as it is not part of the known types`);if((u==="to-boolean"||u==="to-string")&&t.length!==2)return o.error("Expected one argument.");const g=qt[u],w=[];for(let e=1;e<t.length;e++){const r=o.parse(t[e],e,Lt);if(!r)return null;w.push(r)}return new Wt(g,w)}evaluate(t){if(this.type.kind==="boolean")return!!this.args[0].evaluate(t);if(this.type.kind==="color"){let o,u;for(const g of this.args){if(o=g.evaluate(t),u=null,o instanceof G)return o;if(typeof o=="string"){const w=t.parseColor(o);if(w)return w}else if(Array.isArray(o)&&(u=o.length<3||o.length>4?`Invalid rbga value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:_e(o[0],o[1],o[2],o[3]),!u))return new G(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new ct(u||`Could not parse color from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}if(this.type.kind==="padding"){let o;for(const u of this.args){o=u.evaluate(t);const g=fe.parse(o);if(g)return g}throw new ct(`Could not parse padding from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}if(this.type.kind==="number"){let o=null;for(const u of this.args){if(o=u.evaluate(t),o===null)return 0;const g=Number(o);if(!isNaN(g))return g}throw new ct(`Could not convert ${JSON.stringify(o)} to number.`)}return this.type.kind==="formatted"?me.fromString($e(this.args[0].evaluate(t))):this.type.kind==="resolvedImage"?ue.fromString($e(this.args[0].evaluate(t))):$e(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const Zt=["Unknown","Point","LineString","Polygon"];class Ut{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Zt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let o=this._parseColorCache[t];return o||(o=this._parseColorCache[t]=G.parse(t)),o}}class Vt{constructor(t,o,u,g){this.name=t,this.type=o,this._evaluate=u,this.args=g}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,o){const u=t[0],g=Vt.definitions[u];if(!g)return o.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0);const w=Array.isArray(g)?g[0]:g.type,e=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,r=e.filter(([d])=>!Array.isArray(d)||d.length===t.length-1);let l=null;for(const[d,x]of r){l=new pa(o.registry,o.path,null,o.scope);const S=[];let M=!1;for(let A=1;A<t.length;A++){const L=t[A],V=Array.isArray(d)?d[A-1]:d.type,q=l.parse(L,1+S.length,V);if(!q){M=!0;break}S.push(q)}if(!M)if(Array.isArray(d)&&d.length!==S.length)l.error(`Expected ${d.length} arguments, but found ${S.length} instead.`);else{for(let A=0;A<S.length;A++){const L=Array.isArray(d)?d[A]:d.type,V=S[A];l.concat(A+1).checkSubtype(L,V.type)}if(l.errors.length===0)return new Vt(u,w,x,S)}}if(r.length===1)o.errors.push(...l.errors);else{const d=(r.length?r:e).map(([S])=>{return M=S,Array.isArray(M)?`(${M.map(mn).join(", ")})`:`(${mn(M.type)}...)`;var M}).join(" | "),x=[];for(let S=1;S<t.length;S++){const M=o.parse(t[S],1+x.length);if(!M)return null;x.push(mn(M.type))}o.error(`Expected arguments of type ${d}, but found (${x.join(", ")}) instead.`)}return null}static register(t,o){Vt.definitions=o;for(const u in o)t[u]=Vt}}class $n{constructor(t,o,u){this.type=or,this.locale=u,this.caseSensitive=t,this.diacriticSensitive=o}static parse(t,o){if(t.length!==2)return o.error("Expected one argument.");const u=t[1];if(typeof u!="object"||Array.isArray(u))return o.error("Collator options argument must be an object.");const g=o.parse(u["case-sensitive"]!==void 0&&u["case-sensitive"],1,Rt);if(!g)return null;const w=o.parse(u["diacritic-sensitive"]!==void 0&&u["diacritic-sensitive"],1,Rt);if(!w)return null;let e=null;return u.locale&&(e=o.parse(u.locale,1,Bt),!e)?null:new $n(g,w,e)}evaluate(t){return new J(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}const Ln=8192;function bn(i,t){i[0]=Math.min(i[0],t[0]),i[1]=Math.min(i[1],t[1]),i[2]=Math.max(i[2],t[0]),i[3]=Math.max(i[3],t[1])}function mr(i,t){return!(i[0]<=t[0]||i[2]>=t[2]||i[1]<=t[1]||i[3]>=t[3])}function Jr(i,t){const o=(180+i[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i[1]*Math.PI/360)))/360,g=Math.pow(2,t.z);return[Math.round(o*g*Ln),Math.round(u*g*Ln)]}function ca(i,t,o){const u=i[0]-t[0],g=i[1]-t[1],w=i[0]-o[0],e=i[1]-o[1];return u*e-w*g==0&&u*w<=0&&g*e<=0}function vn(i,t){let o=!1;for(let e=0,r=t.length;e<r;e++){const l=t[e];for(let d=0,x=l.length;d<x-1;d++){if(ca(i,l[d],l[d+1]))return!1;(g=l[d])[1]>(u=i)[1]!=(w=l[d+1])[1]>u[1]&&u[0]<(w[0]-g[0])*(u[1]-g[1])/(w[1]-g[1])+g[0]&&(o=!o)}}var u,g,w;return o}function ph(i,t){for(let o=0;o<t.length;o++)if(vn(i,t[o]))return!0;return!1}function Wo(i,t,o,u){const g=u[0]-o[0],w=u[1]-o[1],e=(i[0]-o[0])*w-g*(i[1]-o[1]),r=(t[0]-o[0])*w-g*(t[1]-o[1]);return e>0&&r<0||e<0&&r>0}function al(i,t,o){for(const d of o)for(let x=0;x<d.length-1;++x)if((r=[(e=d[x+1])[0]-(w=d[x])[0],e[1]-w[1]])[0]*(l=[(g=t)[0]-(u=i)[0],g[1]-u[1]])[1]-r[1]*l[0]!=0&&Wo(u,g,w,e)&&Wo(w,e,u,g))return!0;var u,g,w,e,r,l;return!1}function Zo(i,t){for(let o=0;o<i.length;++o)if(!vn(i[o],t))return!1;for(let o=0;o<i.length-1;++o)if(al(i[o],i[o+1],t))return!1;return!0}function ua(i,t){for(let o=0;o<t.length;o++)if(Zo(i,t[o]))return!0;return!1}function cc(i,t,o){const u=[];for(let g=0;g<i.length;g++){const w=[];for(let e=0;e<i[g].length;e++){const r=Jr(i[g][e],o);bn(t,r),w.push(r)}u.push(w)}return u}function uc(i,t,o){const u=[];for(let g=0;g<i.length;g++){const w=cc(i[g],t,o);u.push(w)}return u}function ha(i,t,o,u){if(i[0]<o[0]||i[0]>o[2]){const g=.5*u;let w=i[0]-o[0]>g?-u:o[0]-i[0]>g?u:0;w===0&&(w=i[0]-o[2]>g?-u:o[2]-i[0]>g?u:0),i[0]+=w}bn(t,i)}function hc(i,t,o,u){const g=Math.pow(2,u.z)*Ln,w=[u.x*Ln,u.y*Ln],e=[];for(const r of i)for(const l of r){const d=[l.x+w[0],l.y+w[1]];ha(d,t,o,g),e.push(d)}return e}function ll(i,t,o,u){const g=Math.pow(2,u.z)*Ln,w=[u.x*Ln,u.y*Ln],e=[];for(const l of i){const d=[];for(const x of l){const S=[x.x+w[0],x.y+w[1]];bn(t,S),d.push(S)}e.push(d)}if(t[2]-t[0]<=g/2){(r=t)[0]=r[1]=1/0,r[2]=r[3]=-1/0;for(const l of e)for(const d of l)ha(d,t,o,g)}var r;return e}class xi{constructor(t,o){this.type=Rt,this.geojson=t,this.geometries=o}static parse(t,o){if(t.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Ae(t[1])){const u=t[1];if(u.type==="FeatureCollection")for(let g=0;g<u.features.length;++g){const w=u.features[g].geometry.type;if(w==="Polygon"||w==="MultiPolygon")return new xi(u,u.features[g].geometry)}else if(u.type==="Feature"){const g=u.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new xi(u,u.geometry)}else if(u.type==="Polygon"||u.type==="MultiPolygon")return new xi(u,u)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(o,u){const g=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],e=o.canonicalID();if(u.type==="Polygon"){const r=cc(u.coordinates,w,e),l=hc(o.geometry(),g,w,e);if(!mr(g,w))return!1;for(const d of l)if(!vn(d,r))return!1}if(u.type==="MultiPolygon"){const r=uc(u.coordinates,w,e),l=hc(o.geometry(),g,w,e);if(!mr(g,w))return!1;for(const d of l)if(!ph(d,r))return!1}return!0}(t,this.geometries);if(t.geometryType()==="LineString")return function(o,u){const g=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],e=o.canonicalID();if(u.type==="Polygon"){const r=cc(u.coordinates,w,e),l=ll(o.geometry(),g,w,e);if(!mr(g,w))return!1;for(const d of l)if(!Zo(d,r))return!1}if(u.type==="MultiPolygon"){const r=uc(u.coordinates,w,e),l=ll(o.geometry(),g,w,e);if(!mr(g,w))return!1;for(const d of l)if(!ua(d,r))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function cl(i){if(i instanceof Vt&&(i.name==="get"&&i.args.length===1||i.name==="feature-state"||i.name==="has"&&i.args.length===1||i.name==="properties"||i.name==="geometry-type"||i.name==="id"||/^filter-/.test(i.name))||i instanceof xi)return!1;let t=!0;return i.eachChild(o=>{t&&!cl(o)&&(t=!1)}),t}function po(i){if(i instanceof Vt&&i.name==="feature-state")return!1;let t=!0;return i.eachChild(o=>{t&&!po(o)&&(t=!1)}),t}function fn(i,t){if(i instanceof Vt&&t.indexOf(i.name)>=0)return!1;let o=!0;return i.eachChild(u=>{o&&!fn(u,t)&&(o=!1)}),o}class da{constructor(t,o){this.type=o.type,this.name=t,this.boundExpression=o}static parse(t,o){if(t.length!==2||typeof t[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");const u=t[1];return o.scope.has(u)?new da(u,o.scope.get(u)):o.error(`Unknown variable "${u}". Make sure "${u}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class pa{constructor(t,o=[],u,g=new ji,w=[]){this.registry=t,this.path=o,this.key=o.map(e=>`[${e}]`).join(""),this.scope=g,this.errors=w,this.expectedType=u}parse(t,o,u,g,w={}){return o?this.concat(o,u,g)._parse(t,w):this._parse(t,w)}_parse(t,o){function u(g,w,e){return e==="assert"?new ot(w,[g]):e==="coerce"?new Wt(w,[g]):g}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=t[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const w=this.registry[g];if(w){let e=w.parse(t,this);if(!e)return null;if(this.expectedType){const r=this.expectedType,l=e.type;if(r.kind!=="string"&&r.kind!=="number"&&r.kind!=="boolean"&&r.kind!=="object"&&r.kind!=="array"||l.kind!=="value")if(r.kind!=="color"&&r.kind!=="formatted"&&r.kind!=="resolvedImage"||l.kind!=="value"&&l.kind!=="string")if(r.kind!=="padding"||l.kind!=="value"&&l.kind!=="number"&&l.kind!=="array"){if(this.checkSubtype(r,l))return null}else e=u(e,r,o.typeAnnotation||"coerce");else e=u(e,r,o.typeAnnotation||"coerce");else e=u(e,r,o.typeAnnotation||"assert")}if(!(e instanceof ft)&&e.type.kind!=="resolvedImage"&&Xo(e)){const r=new Ut;try{e=new ft(e.type,e.evaluate(r))}catch(l){return this.error(l.message),null}}return e}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,o,u){const g=typeof t=="number"?this.path.concat(t):this.path,w=u?this.scope.concat(u):this.scope;return new pa(this.registry,g,o||null,w,this.errors)}error(t,...o){const u=`${this.key}${o.map(g=>`[${g}]`).join("")}`;this.errors.push(new er(u,t))}checkSubtype(t,o){const u=Er(t,o);return u&&this.error(u),u}}function Xo(i){if(i instanceof da)return Xo(i.boundExpression);if(i instanceof Vt&&i.name==="error"||i instanceof $n||i instanceof xi)return!1;const t=i instanceof Wt||i instanceof ot;let o=!0;return i.eachChild(u=>{o=t?o&&Xo(u):o&&u instanceof ft}),!!o&&cl(i)&&fn(i,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function fa(i,t){const o=i.length-1;let u,g,w=0,e=o,r=0;for(;w<=e;)if(r=Math.floor((w+e)/2),u=i[r],g=i[r+1],u<=t){if(r===o||t<g)return r;w=r+1}else{if(!(u>t))throw new ct("Input is not a number.");e=r-1}return 0}class ws{constructor(t,o,u){this.type=t,this.input=o,this.labels=[],this.outputs=[];for(const[g,w]of u)this.labels.push(g),this.outputs.push(w)}static parse(t,o){if(t.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return o.error("Expected an even number of arguments.");const u=o.parse(t[1],1,et);if(!u)return null;const g=[];let w=null;o.expectedType&&o.expectedType.kind!=="value"&&(w=o.expectedType);for(let e=1;e<t.length;e+=2){const r=e===1?-1/0:t[e],l=t[e+1],d=e,x=e+1;if(typeof r!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',d);if(g.length&&g[g.length-1][0]>=r)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',d);const S=o.parse(l,x,w);if(!S)return null;w=w||S.type,g.push([r,S])}return new ws(w,u,g)}evaluate(t){const o=this.labels,u=this.outputs;if(o.length===1)return u[0].evaluate(t);const g=this.input.evaluate(t);if(g<=o[0])return u[0].evaluate(t);const w=o.length;return g>=o[w-1]?u[w-1].evaluate(t):u[fa(o,g)].evaluate(t)}eachChild(t){t(this.input);for(const o of this.outputs)t(o)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function zn(i,t,o){return i*(1-o)+t*o}var Ko=Object.freeze({__proto__:null,number:zn,color:function(i,t,o){return new G(zn(i.r,t.r,o),zn(i.g,t.g,o),zn(i.b,t.b,o),zn(i.a,t.a,o))},array:function(i,t,o){return i.map((u,g)=>zn(u,t[g],o))},padding:function(i,t,o){const u=i.values,g=t.values;return new fe([zn(u[0],g[0],o),zn(u[1],g[1],o),zn(u[2],g[2],o),zn(u[3],g[3],o)])}});const bs=.95047,qi=1.08883,Wi=4/29,_i=6/29,Jo=3*_i*_i,ma=Math.PI/180,fo=180/Math.PI;function dc(i){return i>.008856451679035631?Math.pow(i,1/3):i/Jo+Wi}function ul(i){return i>_i?i*i*i:Jo*(i-Wi)}function Yo(i){return 255*(i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055)}function pc(i){return(i/=255)<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function fc(i){const t=pc(i.r),o=pc(i.g),u=pc(i.b),g=dc((.4124564*t+.3575761*o+.1804375*u)/bs),w=dc((.2126729*t+.7151522*o+.072175*u)/1);return{l:116*w-16,a:500*(g-w),b:200*(w-dc((.0193339*t+.119192*o+.9503041*u)/qi)),alpha:i.a}}function un(i){let t=(i.l+16)/116,o=isNaN(i.a)?t:t+i.a/500,u=isNaN(i.b)?t:t-i.b/200;return t=1*ul(t),o=bs*ul(o),u=qi*ul(u),new G(Yo(3.2404542*o-1.5371385*t-.4985314*u),Yo(-.969266*o+1.8760108*t+.041556*u),Yo(.0556434*o-.2040259*t+1.0572252*u),i.alpha)}function du(i,t,o){const u=t-i;return i+o*(u>180||u<-180?u-360*Math.round(u/360):u)}const ga={forward:fc,reverse:un,interpolate:function(i,t,o){return{l:zn(i.l,t.l,o),a:zn(i.a,t.a,o),b:zn(i.b,t.b,o),alpha:zn(i.alpha,t.alpha,o)}}},Zi={forward:function(i){const{l:t,a:o,b:u}=fc(i),g=Math.atan2(u,o)*fo;return{h:g<0?g+360:g,c:Math.sqrt(o*o+u*u),l:t,alpha:i.a}},reverse:function(i){const t=i.h*ma,o=i.c;return un({l:i.l,a:Math.cos(t)*o,b:Math.sin(t)*o,alpha:i.alpha})},interpolate:function(i,t,o){return{h:du(i.h,t.h,o),c:zn(i.c,t.c,o),l:zn(i.l,t.l,o),alpha:zn(i.alpha,t.alpha,o)}}};var Ss=Object.freeze({__proto__:null,lab:ga,hcl:Zi});class cr{constructor(t,o,u,g,w){this.type=t,this.operator=o,this.interpolation=u,this.input=g,this.labels=[],this.outputs=[];for(const[e,r]of w)this.labels.push(e),this.outputs.push(r)}static interpolationFactor(t,o,u,g){let w=0;if(t.name==="exponential")w=Es(o,t.base,u,g);else if(t.name==="linear")w=Es(o,1,u,g);else if(t.name==="cubic-bezier"){const e=t.controlPoints;w=new B(e[0],e[1],e[2],e[3]).solve(Es(o,1,u,g))}return w}static parse(t,o){let[u,g,w,...e]=t;if(!Array.isArray(g)||g.length===0)return o.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const d=g[1];if(typeof d!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:d}}else{if(g[0]!=="cubic-bezier")return o.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const d=g.slice(1);if(d.length!==4||d.some(x=>typeof x!="number"||x<0||x>1))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:d}}}if(t.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(w=o.parse(w,2,et),!w)return null;const r=[];let l=null;u==="interpolate-hcl"||u==="interpolate-lab"?l=tr:o.expectedType&&o.expectedType.kind!=="value"&&(l=o.expectedType);for(let d=0;d<e.length;d+=2){const x=e[d],S=e[d+1],M=d+3,A=d+4;if(typeof x!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',M);if(r.length&&r[r.length-1][0]>=x)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',M);const L=o.parse(S,A,l);if(!L)return null;l=l||L.type,r.push([x,L])}return l.kind==="number"||l.kind==="color"||l.kind==="padding"||l.kind==="array"&&l.itemType.kind==="number"&&typeof l.N=="number"?new cr(l,u,g,w,r):o.error(`Type ${mn(l)} is not interpolatable.`)}evaluate(t){const o=this.labels,u=this.outputs;if(o.length===1)return u[0].evaluate(t);const g=this.input.evaluate(t);if(g<=o[0])return u[0].evaluate(t);const w=o.length;if(g>=o[w-1])return u[w-1].evaluate(t);const e=fa(o,g),r=cr.interpolationFactor(this.interpolation,g,o[e],o[e+1]),l=u[e].evaluate(t),d=u[e+1].evaluate(t);return this.operator==="interpolate"?Ko[this.type.kind.toLowerCase()](l,d,r):this.operator==="interpolate-hcl"?Zi.reverse(Zi.interpolate(Zi.forward(l),Zi.forward(d),r)):ga.reverse(ga.interpolate(ga.forward(l),ga.forward(d),r))}eachChild(t){t(this.input);for(const o of this.outputs)t(o)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function Es(i,t,o,u){const g=u-o,w=i-o;return g===0?0:t===1?w/g:(Math.pow(t,w)-1)/(Math.pow(t,g)-1)}class hl{constructor(t,o){this.type=t,this.args=o}static parse(t,o){if(t.length<2)return o.error("Expectected at least one argument.");let u=null;const g=o.expectedType;g&&g.kind!=="value"&&(u=g);const w=[];for(const r of t.slice(1)){const l=o.parse(r,1+w.length,u,void 0,{typeAnnotation:"omit"});if(!l)return null;u=u||l.type,w.push(l)}if(!u)throw new Error("No output type");const e=g&&w.some(r=>Er(g,r.type));return new hl(e?Lt:u,w)}evaluate(t){let o,u=null,g=0;for(const w of this.args)if(g++,u=w.evaluate(t),u&&u instanceof ue&&!u.available&&(o||(o=u.name),u=null,g===this.args.length&&(u=o)),u!==null)break;return u}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}class dl{constructor(t,o){this.type=o.type,this.bindings=[].concat(t),this.result=o}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const o of this.bindings)t(o[1]);t(this.result)}static parse(t,o){if(t.length<4)return o.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const u=[];for(let w=1;w<t.length-1;w+=2){const e=t[w];if(typeof e!="string")return o.error(`Expected string, but found ${typeof e} instead.`,w);if(/[^a-zA-Z0-9_]/.test(e))return o.error("Variable names must contain only alphanumeric characters or '_'.",w);const r=o.parse(t[w+1],w+1);if(!r)return null;u.push([e,r])}const g=o.parse(t[t.length-1],t.length-1,o.expectedType,u);return g?new dl(u,g):null}outputDefined(){return this.result.outputDefined()}}class ya{constructor(t,o,u){this.type=t,this.index=o,this.input=u}static parse(t,o){if(t.length!==3)return o.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const u=o.parse(t[1],1,et),g=o.parse(t[2],2,$t(o.expectedType||Lt));return u&&g?new ya(g.type.itemType,u,g):null}evaluate(t){const o=this.index.evaluate(t),u=this.input.evaluate(t);if(o<0)throw new ct(`Array index out of bounds: ${o} < 0.`);if(o>=u.length)throw new ct(`Array index out of bounds: ${o} > ${u.length-1}.`);if(o!==Math.floor(o))throw new ct(`Array index must be an integer, but found ${o} instead.`);return u[o]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class Ts{constructor(t,o){this.type=Rt,this.needle=t,this.haystack=o}static parse(t,o){if(t.length!==3)return o.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const u=o.parse(t[1],1,Lt),g=o.parse(t[2],2,Lt);return u&&g?ai(u.type,[Rt,Bt,et,fr,Lt])?new Ts(u,g):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${mn(u.type)} instead`):null}evaluate(t){const o=this.needle.evaluate(t),u=this.haystack.evaluate(t);if(!u)return!1;if(!vi(o,["boolean","string","number","null"]))throw new ct(`Expected first argument to be of type boolean, string, number or null, but found ${mn(Ue(o))} instead.`);if(!vi(u,["string","array"]))throw new ct(`Expected second argument to be of type array or string, but found ${mn(Ue(u))} instead.`);return u.indexOf(o)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class ks{constructor(t,o,u){this.type=et,this.needle=t,this.haystack=o,this.fromIndex=u}static parse(t,o){if(t.length<=2||t.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const u=o.parse(t[1],1,Lt),g=o.parse(t[2],2,Lt);if(!u||!g)return null;if(!ai(u.type,[Rt,Bt,et,fr,Lt]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${mn(u.type)} instead`);if(t.length===4){const w=o.parse(t[3],3,et);return w?new ks(u,g,w):null}return new ks(u,g)}evaluate(t){const o=this.needle.evaluate(t),u=this.haystack.evaluate(t);if(!vi(o,["boolean","string","number","null"]))throw new ct(`Expected first argument to be of type boolean, string, number or null, but found ${mn(Ue(o))} instead.`);if(!vi(u,["string","array"]))throw new ct(`Expected second argument to be of type array or string, but found ${mn(Ue(u))} instead.`);if(this.fromIndex){const g=this.fromIndex.evaluate(t);return u.indexOf(o,g)}return u.indexOf(o)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class pl{constructor(t,o,u,g,w,e){this.inputType=t,this.type=o,this.input=u,this.cases=g,this.outputs=w,this.otherwise=e}static parse(t,o){if(t.length<5)return o.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return o.error("Expected an even number of arguments.");let u,g;o.expectedType&&o.expectedType.kind!=="value"&&(g=o.expectedType);const w={},e=[];for(let d=2;d<t.length-1;d+=2){let x=t[d];const S=t[d+1];Array.isArray(x)||(x=[x]);const M=o.concat(d);if(x.length===0)return M.error("Expected at least one branch label.");for(const L of x){if(typeof L!="number"&&typeof L!="string")return M.error("Branch labels must be numbers or strings.");if(typeof L=="number"&&Math.abs(L)>Number.MAX_SAFE_INTEGER)return M.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof L=="number"&&Math.floor(L)!==L)return M.error("Numeric branch labels must be integer values.");if(u){if(M.checkSubtype(u,Ue(L)))return null}else u=Ue(L);if(w[String(L)]!==void 0)return M.error("Branch labels must be unique.");w[String(L)]=e.length}const A=o.parse(S,d,g);if(!A)return null;g=g||A.type,e.push(A)}const r=o.parse(t[1],1,Lt);if(!r)return null;const l=o.parse(t[t.length-1],t.length-1,g);return l?r.type.kind!=="value"&&o.concat(1).checkSubtype(u,r.type)?null:new pl(u,g,r,w,e,l):null}evaluate(t){const o=this.input.evaluate(t);return(Ue(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}}class Di{constructor(t,o,u){this.type=t,this.branches=o,this.otherwise=u}static parse(t,o){if(t.length<4)return o.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return o.error("Expected an odd number of arguments.");let u;o.expectedType&&o.expectedType.kind!=="value"&&(u=o.expectedType);const g=[];for(let e=1;e<t.length-1;e+=2){const r=o.parse(t[e],e,Rt);if(!r)return null;const l=o.parse(t[e+1],e+1,u);if(!l)return null;g.push([r,l]),u=u||l.type}const w=o.parse(t[t.length-1],t.length-1,u);if(!w)return null;if(!u)throw new Error("Can't infer output type");return new Di(u,g,w)}evaluate(t){for(const[o,u]of this.branches)if(o.evaluate(t))return u.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[o,u]of this.branches)t(o),t(u);t(this.otherwise)}outputDefined(){return this.branches.every(([t,o])=>o.outputDefined())&&this.otherwise.outputDefined()}}class Ms{constructor(t,o,u,g){this.type=t,this.input=o,this.beginIndex=u,this.endIndex=g}static parse(t,o){if(t.length<=2||t.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const u=o.parse(t[1],1,Lt),g=o.parse(t[2],2,et);if(!u||!g)return null;if(!ai(u.type,[$t(Lt),Bt,Lt]))return o.error(`Expected first argument to be of type array or string, but found ${mn(u.type)} instead`);if(t.length===4){const w=o.parse(t[3],3,et);return w?new Ms(u.type,u,g,w):null}return new Ms(u.type,u,g)}evaluate(t){const o=this.input.evaluate(t),u=this.beginIndex.evaluate(t);if(!vi(o,["string","array"]))throw new ct(`Expected first argument to be of type array or string, but found ${mn(Ue(o))} instead.`);if(this.endIndex){const g=this.endIndex.evaluate(t);return o.slice(u,g)}return o.slice(u)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function va(i,t){return i==="=="||i==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function mc(i,t,o,u){return u.compare(t,o)===0}function Xi(i,t,o){const u=i!=="=="&&i!=="!=";return class c0{constructor(w,e,r){this.type=Rt,this.lhs=w,this.rhs=e,this.collator=r,this.hasUntypedArgument=w.type.kind==="value"||e.type.kind==="value"}static parse(w,e){if(w.length!==3&&w.length!==4)return e.error("Expected two or three arguments.");const r=w[0];let l=e.parse(w[1],1,Lt);if(!l)return null;if(!va(r,l.type))return e.concat(1).error(`"${r}" comparisons are not supported for type '${mn(l.type)}'.`);let d=e.parse(w[2],2,Lt);if(!d)return null;if(!va(r,d.type))return e.concat(2).error(`"${r}" comparisons are not supported for type '${mn(d.type)}'.`);if(l.type.kind!==d.type.kind&&l.type.kind!=="value"&&d.type.kind!=="value")return e.error(`Cannot compare types '${mn(l.type)}' and '${mn(d.type)}'.`);u&&(l.type.kind==="value"&&d.type.kind!=="value"?l=new ot(d.type,[l]):l.type.kind!=="value"&&d.type.kind==="value"&&(d=new ot(l.type,[d])));let x=null;if(w.length===4){if(l.type.kind!=="string"&&d.type.kind!=="string"&&l.type.kind!=="value"&&d.type.kind!=="value")return e.error("Cannot use collator to compare non-string types.");if(x=e.parse(w[3],3,or),!x)return null}return new c0(l,d,x)}evaluate(w){const e=this.lhs.evaluate(w),r=this.rhs.evaluate(w);if(u&&this.hasUntypedArgument){const l=Ue(e),d=Ue(r);if(l.kind!==d.kind||l.kind!=="string"&&l.kind!=="number")throw new ct(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${l.kind}, ${d.kind}) instead.`)}if(this.collator&&!u&&this.hasUntypedArgument){const l=Ue(e),d=Ue(r);if(l.kind!=="string"||d.kind!=="string")return t(w,e,r)}return this.collator?o(w,e,r,this.collator.evaluate(w)):t(w,e,r)}eachChild(w){w(this.lhs),w(this.rhs),this.collator&&w(this.collator)}outputDefined(){return!0}}}const fl=Xi("==",function(i,t,o){return t===o},mc),pu=Xi("!=",function(i,t,o){return t!==o},function(i,t,o,u){return!mc(0,t,o,u)}),Yr=Xi("<",function(i,t,o){return t<o},function(i,t,o,u){return u.compare(t,o)<0}),Cs=Xi(">",function(i,t,o){return t>o},function(i,t,o,u){return u.compare(t,o)>0}),gc=Xi("<=",function(i,t,o){return t<=o},function(i,t,o,u){return u.compare(t,o)<=0}),xa=Xi(">=",function(i,t,o){return t>=o},function(i,t,o,u){return u.compare(t,o)>=0});class yc{constructor(t,o,u,g,w){this.type=Bt,this.number=t,this.locale=o,this.currency=u,this.minFractionDigits=g,this.maxFractionDigits=w}static parse(t,o){if(t.length!==3)return o.error("Expected two arguments.");const u=o.parse(t[1],1,et);if(!u)return null;const g=t[2];if(typeof g!="object"||Array.isArray(g))return o.error("NumberFormat options argument must be an object.");let w=null;if(g.locale&&(w=o.parse(g.locale,1,Bt),!w))return null;let e=null;if(g.currency&&(e=o.parse(g.currency,1,Bt),!e))return null;let r=null;if(g["min-fraction-digits"]&&(r=o.parse(g["min-fraction-digits"],1,et),!r))return null;let l=null;return g["max-fraction-digits"]&&(l=o.parse(g["max-fraction-digits"],1,et),!l)?null:new yc(u,w,e,r,l)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class Ps{constructor(t){this.type=Gr,this.sections=t}static parse(t,o){if(t.length<2)return o.error("Expected at least one argument.");const u=t[1];if(!Array.isArray(u)&&typeof u=="object")return o.error("First argument must be an image or text section.");const g=[];let w=!1;for(let e=1;e<=t.length-1;++e){const r=t[e];if(w&&typeof r=="object"&&!Array.isArray(r)){w=!1;let l=null;if(r["font-scale"]&&(l=o.parse(r["font-scale"],1,et),!l))return null;let d=null;if(r["text-font"]&&(d=o.parse(r["text-font"],1,$t(Bt)),!d))return null;let x=null;if(r["text-color"]&&(x=o.parse(r["text-color"],1,tr),!x))return null;const S=g[g.length-1];S.scale=l,S.font=d,S.textColor=x}else{const l=o.parse(t[e],1,Lt);if(!l)return null;const d=l.type.kind;if(d!=="string"&&d!=="value"&&d!=="null"&&d!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");w=!0,g.push({content:l,scale:null,font:null,textColor:null})}}return new Ps(g)}evaluate(t){return new me(this.sections.map(o=>{const u=o.content.evaluate(t);return Ue(u)===It?new ce("",u,null,null,null):new ce($e(u),null,o.scale?o.scale.evaluate(t):null,o.font?o.font.evaluate(t).join(","):null,o.textColor?o.textColor.evaluate(t):null)}))}eachChild(t){for(const o of this.sections)t(o.content),o.scale&&t(o.scale),o.font&&t(o.font),o.textColor&&t(o.textColor)}outputDefined(){return!1}}class _a{constructor(t){this.type=It,this.input=t}static parse(t,o){if(t.length!==2)return o.error("Expected two arguments.");const u=o.parse(t[1],1,Bt);return u?new _a(u):o.error("No image name provided.")}evaluate(t){const o=this.input.evaluate(t),u=ue.fromString(o);return u&&t.availableImages&&(u.available=t.availableImages.indexOf(o)>-1),u}eachChild(t){t(this.input)}outputDefined(){return!1}}class Qo{constructor(t){this.type=et,this.input=t}static parse(t,o){if(t.length!==2)return o.error(`Expected 1 argument, but found ${t.length-1} instead.`);const u=o.parse(t[1],1);return u?u.type.kind!=="array"&&u.type.kind!=="string"&&u.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${mn(u.type)} instead.`):new Qo(u):null}evaluate(t){const o=this.input.evaluate(t);if(typeof o=="string"||Array.isArray(o))return o.length;throw new ct(`Expected value to be of type string or array, but found ${mn(Ue(o))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const Ki={"==":fl,"!=":pu,">":Cs,"<":Yr,">=":xa,"<=":gc,array:ot,at:ya,boolean:ot,case:Di,coalesce:hl,collator:$n,format:Ps,image:_a,in:Ts,"index-of":ks,interpolate:cr,"interpolate-hcl":cr,"interpolate-lab":cr,length:Qo,let:dl,literal:ft,match:pl,number:ot,"number-format":yc,object:ot,slice:Ms,step:ws,string:ot,"to-boolean":Wt,"to-color":Wt,"to-number":Wt,"to-string":Wt,var:da,within:xi};function vc(i,[t,o,u,g]){t=t.evaluate(i),o=o.evaluate(i),u=u.evaluate(i);const w=g?g.evaluate(i):1,e=_e(t,o,u,w);if(e)throw new ct(e);return new G(t/255*w,o/255*w,u/255*w,w)}function fu(i,t){return i in t}function xc(i,t){const o=t[i];return o===void 0?null:o}function mo(i){return{type:i}}function ml(i){return{result:"success",value:i}}function Is(i){return{result:"error",value:i}}function As(i){return i["property-type"]==="data-driven"||i["property-type"]==="cross-faded-data-driven"}function Un(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function _c(i){return!!i.expression&&i.expression.interpolated}function yt(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":i===null?"null":typeof i}function es(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}function Dn(i){return i}function Mn(i,t){const o=t.type==="color",u=i.stops&&typeof i.stops[0][0]=="object",g=u||!(u||i.property!==void 0),w=i.type||(_c(t)?"exponential":"interval");if(o||t.type==="padding"){const d=o?G.parse:fe.parse;(i=ir({},i)).stops&&(i.stops=i.stops.map(x=>[x[0],d(x[1])])),i.default=d(i.default?i.default:t.default)}if(i.colorSpace&&i.colorSpace!=="rgb"&&!Ss[i.colorSpace])throw new Error(`Unknown color space: ${i.colorSpace}`);let e,r,l;if(w==="exponential")e=gu;else if(w==="interval")e=wc;else if(w==="categorical"){e=mu,r=Object.create(null);for(const d of i.stops)r[d[0]]=d[1];l=typeof i.stops[0][0]}else{if(w!=="identity")throw new Error(`Unknown function type "${w}"`);e=fh}if(u){const d={},x=[];for(let A=0;A<i.stops.length;A++){const L=i.stops[A],V=L[0].zoom;d[V]===void 0&&(d[V]={zoom:V,type:i.type,property:i.property,default:i.default,stops:[]},x.push(V)),d[V].stops.push([L[0].value,L[1]])}const S=[];for(const A of x)S.push([d[A].zoom,Mn(d[A],t)]);const M={name:"linear"};return{kind:"composite",interpolationType:M,interpolationFactor:cr.interpolationFactor.bind(void 0,M),zoomStops:S.map(A=>A[0]),evaluate:({zoom:A},L)=>gu({stops:S,base:i.base},t,A).evaluate(A,L)}}if(g){const d=w==="exponential"?{name:"exponential",base:i.base!==void 0?i.base:1}:null;return{kind:"camera",interpolationType:d,interpolationFactor:cr.interpolationFactor.bind(void 0,d),zoomStops:i.stops.map(x=>x[0]),evaluate:({zoom:x})=>e(i,t,x,r,l)}}return{kind:"source",evaluate(d,x){const S=x&&x.properties?x.properties[i.property]:void 0;return S===void 0?go(i.default,t.default):e(i,t,S,r,l)}}}function go(i,t,o){return i!==void 0?i:t!==void 0?t:o!==void 0?o:void 0}function mu(i,t,o,u,g){return go(typeof o===g?u[o]:void 0,i.default,t.default)}function wc(i,t,o){if(yt(o)!=="number")return go(i.default,t.default);const u=i.stops.length;if(u===1||o<=i.stops[0][0])return i.stops[0][1];if(o>=i.stops[u-1][0])return i.stops[u-1][1];const g=fa(i.stops.map(w=>w[0]),o);return i.stops[g][1]}function gu(i,t,o){const u=i.base!==void 0?i.base:1;if(yt(o)!=="number")return go(i.default,t.default);const g=i.stops.length;if(g===1||o<=i.stops[0][0])return i.stops[0][1];if(o>=i.stops[g-1][0])return i.stops[g-1][1];const w=fa(i.stops.map(x=>x[0]),o),e=function(x,S,M,A){const L=A-M,V=x-M;return L===0?0:S===1?V/L:(Math.pow(S,V)-1)/(Math.pow(S,L)-1)}(o,u,i.stops[w][0],i.stops[w+1][0]),r=i.stops[w][1],l=i.stops[w+1][1];let d=Ko[t.type]||Dn;if(i.colorSpace&&i.colorSpace!=="rgb"){const x=Ss[i.colorSpace];d=(S,M)=>x.reverse(x.interpolate(x.forward(S),x.forward(M),e))}return typeof r.evaluate=="function"?{evaluate(...x){const S=r.evaluate.apply(void 0,x),M=l.evaluate.apply(void 0,x);if(S!==void 0&&M!==void 0)return d(S,M,e)}}:d(r,l,e)}function fh(i,t,o){switch(t.type){case"color":o=G.parse(o);break;case"formatted":o=me.fromString(o.toString());break;case"resolvedImage":o=ue.fromString(o.toString());break;case"padding":o=fe.parse(o);break;default:yt(o)===t.type||t.type==="enum"&&t.values[o]||(o=void 0)}return go(o,i.default,t.default)}Vt.register(Ki,{error:[{kind:"error"},[Bt],(i,[t])=>{throw new ct(t.evaluate(i))}],typeof:[Bt,[Lt],(i,[t])=>mn(Ue(t.evaluate(i)))],"to-rgba":[$t(et,4),[tr],(i,[t])=>t.evaluate(i).toArray()],rgb:[tr,[et,et,et],vc],rgba:[tr,[et,et,et,et],vc],has:{type:Rt,overloads:[[[Bt],(i,[t])=>fu(t.evaluate(i),i.properties())],[[Bt,lr],(i,[t,o])=>fu(t.evaluate(i),o.evaluate(i))]]},get:{type:Lt,overloads:[[[Bt],(i,[t])=>xc(t.evaluate(i),i.properties())],[[Bt,lr],(i,[t,o])=>xc(t.evaluate(i),o.evaluate(i))]]},"feature-state":[Lt,[Bt],(i,[t])=>xc(t.evaluate(i),i.featureState||{})],properties:[lr,[],i=>i.properties()],"geometry-type":[Bt,[],i=>i.geometryType()],id:[Lt,[],i=>i.id()],zoom:[et,[],i=>i.globals.zoom],"heatmap-density":[et,[],i=>i.globals.heatmapDensity||0],"line-progress":[et,[],i=>i.globals.lineProgress||0],accumulated:[Lt,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[et,mo(et),(i,t)=>{let o=0;for(const u of t)o+=u.evaluate(i);return o}],"*":[et,mo(et),(i,t)=>{let o=1;for(const u of t)o*=u.evaluate(i);return o}],"-":{type:et,overloads:[[[et,et],(i,[t,o])=>t.evaluate(i)-o.evaluate(i)],[[et],(i,[t])=>-t.evaluate(i)]]},"/":[et,[et,et],(i,[t,o])=>t.evaluate(i)/o.evaluate(i)],"%":[et,[et,et],(i,[t,o])=>t.evaluate(i)%o.evaluate(i)],ln2:[et,[],()=>Math.LN2],pi:[et,[],()=>Math.PI],e:[et,[],()=>Math.E],"^":[et,[et,et],(i,[t,o])=>Math.pow(t.evaluate(i),o.evaluate(i))],sqrt:[et,[et],(i,[t])=>Math.sqrt(t.evaluate(i))],log10:[et,[et],(i,[t])=>Math.log(t.evaluate(i))/Math.LN10],ln:[et,[et],(i,[t])=>Math.log(t.evaluate(i))],log2:[et,[et],(i,[t])=>Math.log(t.evaluate(i))/Math.LN2],sin:[et,[et],(i,[t])=>Math.sin(t.evaluate(i))],cos:[et,[et],(i,[t])=>Math.cos(t.evaluate(i))],tan:[et,[et],(i,[t])=>Math.tan(t.evaluate(i))],asin:[et,[et],(i,[t])=>Math.asin(t.evaluate(i))],acos:[et,[et],(i,[t])=>Math.acos(t.evaluate(i))],atan:[et,[et],(i,[t])=>Math.atan(t.evaluate(i))],min:[et,mo(et),(i,t)=>Math.min(...t.map(o=>o.evaluate(i)))],max:[et,mo(et),(i,t)=>Math.max(...t.map(o=>o.evaluate(i)))],abs:[et,[et],(i,[t])=>Math.abs(t.evaluate(i))],round:[et,[et],(i,[t])=>{const o=t.evaluate(i);return o<0?-Math.round(-o):Math.round(o)}],floor:[et,[et],(i,[t])=>Math.floor(t.evaluate(i))],ceil:[et,[et],(i,[t])=>Math.ceil(t.evaluate(i))],"filter-==":[Rt,[Bt,Lt],(i,[t,o])=>i.properties()[t.value]===o.value],"filter-id-==":[Rt,[Lt],(i,[t])=>i.id()===t.value],"filter-type-==":[Rt,[Bt],(i,[t])=>i.geometryType()===t.value],"filter-<":[Rt,[Bt,Lt],(i,[t,o])=>{const u=i.properties()[t.value],g=o.value;return typeof u==typeof g&&u<g}],"filter-id-<":[Rt,[Lt],(i,[t])=>{const o=i.id(),u=t.value;return typeof o==typeof u&&o<u}],"filter->":[Rt,[Bt,Lt],(i,[t,o])=>{const u=i.properties()[t.value],g=o.value;return typeof u==typeof g&&u>g}],"filter-id->":[Rt,[Lt],(i,[t])=>{const o=i.id(),u=t.value;return typeof o==typeof u&&o>u}],"filter-<=":[Rt,[Bt,Lt],(i,[t,o])=>{const u=i.properties()[t.value],g=o.value;return typeof u==typeof g&&u<=g}],"filter-id-<=":[Rt,[Lt],(i,[t])=>{const o=i.id(),u=t.value;return typeof o==typeof u&&o<=u}],"filter->=":[Rt,[Bt,Lt],(i,[t,o])=>{const u=i.properties()[t.value],g=o.value;return typeof u==typeof g&&u>=g}],"filter-id->=":[Rt,[Lt],(i,[t])=>{const o=i.id(),u=t.value;return typeof o==typeof u&&o>=u}],"filter-has":[Rt,[Lt],(i,[t])=>t.value in i.properties()],"filter-has-id":[Rt,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[Rt,[$t(Bt)],(i,[t])=>t.value.indexOf(i.geometryType())>=0],"filter-id-in":[Rt,[$t(Lt)],(i,[t])=>t.value.indexOf(i.id())>=0],"filter-in-small":[Rt,[Bt,$t(Lt)],(i,[t,o])=>o.value.indexOf(i.properties()[t.value])>=0],"filter-in-large":[Rt,[Bt,$t(Lt)],(i,[t,o])=>function(u,g,w,e){for(;w<=e;){const r=w+e>>1;if(g[r]===u)return!0;g[r]>u?e=r-1:w=r+1}return!1}(i.properties()[t.value],o.value,0,o.value.length-1)],all:{type:Rt,overloads:[[[Rt,Rt],(i,[t,o])=>t.evaluate(i)&&o.evaluate(i)],[mo(Rt),(i,t)=>{for(const o of t)if(!o.evaluate(i))return!1;return!0}]]},any:{type:Rt,overloads:[[[Rt,Rt],(i,[t,o])=>t.evaluate(i)||o.evaluate(i)],[mo(Rt),(i,t)=>{for(const o of t)if(o.evaluate(i))return!0;return!1}]]},"!":[Rt,[Rt],(i,[t])=>!t.evaluate(i)],"is-supported-script":[Rt,[Bt],(i,[t])=>{const o=i.globals&&i.globals.isSupportedScript;return!o||o(t.evaluate(i))}],upcase:[Bt,[Bt],(i,[t])=>t.evaluate(i).toUpperCase()],downcase:[Bt,[Bt],(i,[t])=>t.evaluate(i).toLowerCase()],concat:[Bt,mo(Lt),(i,t)=>t.map(o=>$e(o.evaluate(i))).join("")],"resolved-locale":[Bt,[or],(i,[t])=>t.evaluate(i).resolvedLocale()]});class bc{constructor(t,o){this.expression=t,this._warningHistory={},this._evaluator=new Ut,this._defaultValue=o?function(u){return u.type==="color"&&es(u.default)?new G(0,0,0,0):u.type==="color"?G.parse(u.default)||null:u.type==="padding"?fe.parse(u.default)||null:u.default===void 0?null:u.default}(o):null,this._enumValues=o&&o.type==="enum"?o.values:null}evaluateWithoutErrorHandling(t,o,u,g,w,e){return this._evaluator.globals=t,this._evaluator.feature=o,this._evaluator.featureState=u,this._evaluator.canonical=g,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=e,this.expression.evaluate(this._evaluator)}evaluate(t,o,u,g,w,e){this._evaluator.globals=t,this._evaluator.feature=o||null,this._evaluator.featureState=u||null,this._evaluator.canonical=g,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=e||null;try{const r=this.expression.evaluate(this._evaluator);if(r==null||typeof r=="number"&&r!=r)return this._defaultValue;if(this._enumValues&&!(r in this._enumValues))throw new ct(`Expected value to be one of ${Object.keys(this._enumValues).map(l=>JSON.stringify(l)).join(", ")}, but found ${JSON.stringify(r)} instead.`);return r}catch(r){return this._warningHistory[r.message]||(this._warningHistory[r.message]=!0,typeof console<"u"&&console.warn(r.message)),this._defaultValue}}}function Ls(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in Ki}function wa(i,t){const o=new pa(Ki,[],t?function(g){const w={color:tr,string:Bt,number:et,enum:Bt,boolean:Rt,formatted:Gr,padding:je,resolvedImage:It};return g.type==="array"?$t(w[g.value]||Lt,g.length):w[g.type]}(t):void 0),u=o.parse(i,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return u?ml(new bc(u,t)):Is(o.errors)}class gl{constructor(t,o){this.kind=t,this._styleExpression=o,this.isStateDependent=t!=="constant"&&!po(o.expression)}evaluateWithoutErrorHandling(t,o,u,g,w,e){return this._styleExpression.evaluateWithoutErrorHandling(t,o,u,g,w,e)}evaluate(t,o,u,g,w,e){return this._styleExpression.evaluate(t,o,u,g,w,e)}}class ba{constructor(t,o,u,g){this.kind=t,this.zoomStops=u,this._styleExpression=o,this.isStateDependent=t!=="camera"&&!po(o.expression),this.interpolationType=g}evaluateWithoutErrorHandling(t,o,u,g,w,e){return this._styleExpression.evaluateWithoutErrorHandling(t,o,u,g,w,e)}evaluate(t,o,u,g,w,e){return this._styleExpression.evaluate(t,o,u,g,w,e)}interpolationFactor(t,o,u){return this.interpolationType?cr.interpolationFactor(this.interpolationType,t,o,u):0}}function yu(i,t){const o=wa(i,t);if(o.result==="error")return o;const u=o.value.expression,g=cl(u);if(!g&&!As(t))return Is([new er("","data expressions not supported")]);const w=fn(u,["zoom"]);if(!w&&!Un(t))return Is([new er("","zoom expressions not supported")]);const e=vl(u);return e||w?e instanceof er?Is([e]):e instanceof cr&&!_c(t)?Is([new er("",'"interpolate" expressions cannot be used with this property')]):ml(e?new ba(g?"camera":"composite",o.value,e.labels,e instanceof cr?e.interpolation:void 0):new gl(g?"constant":"source",o.value)):Is([new er("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class yl{constructor(t,o){this._parameters=t,this._specification=o,ir(this,Mn(this._parameters,this._specification))}static deserialize(t){return new yl(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function vl(i){let t=null;if(i instanceof dl)t=vl(i.result);else if(i instanceof hl){for(const o of i.args)if(t=vl(o),t)break}else(i instanceof ws||i instanceof cr)&&i.input instanceof Vt&&i.input.name==="zoom"&&(t=i);return t instanceof er||i.eachChild(o=>{const u=vl(o);u instanceof er?t=u:!t&&u?t=new er("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&u&&t!==u&&(t=new er("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function wi(i){const t=i.key,o=i.value,u=i.valueSpec||{},g=i.objectElementValidators||{},w=i.style,e=i.styleSpec;let r=[];const l=yt(o);if(l!=="object")return[new Xe(t,o,`object expected, ${l} found`)];for(const d in o){const x=d.split(".")[0],S=u[x]||u["*"];let M;if(g[x])M=g[x];else if(u[x])M=Tr;else if(g["*"])M=g["*"];else{if(!u["*"]){r.push(new Xe(t,o[d],`unknown property "${d}"`));continue}M=Tr}r=r.concat(M({key:(t&&`${t}.`)+d,value:o[d],valueSpec:S,style:w,styleSpec:e,object:o,objectKey:d},o))}for(const d in u)g[d]||u[d].required&&u[d].default===void 0&&o[d]===void 0&&r.push(new Xe(t,o,`missing required property "${d}"`));return r}function xl(i){const t=i.value,o=i.valueSpec,u=i.style,g=i.styleSpec,w=i.key,e=i.arrayElementValidator||Tr;if(yt(t)!=="array")return[new Xe(w,t,`array expected, ${yt(t)} found`)];if(o.length&&t.length!==o.length)return[new Xe(w,t,`array length ${o.length} expected, length ${t.length} found`)];if(o["min-length"]&&t.length<o["min-length"])return[new Xe(w,t,`array length at least ${o["min-length"]} expected, length ${t.length} found`)];let r={type:o.value,values:o.values};g.$version<7&&(r.function=o.function),yt(o.value)==="object"&&(r=o.value);let l=[];for(let d=0;d<t.length;d++)l=l.concat(e({array:t,arrayIndex:d,value:t[d],valueSpec:r,style:u,styleSpec:g,key:`${w}[${d}]`}));return l}function ts(i){const t=i.key,o=i.value,u=i.valueSpec;let g=yt(o);return g==="number"&&o!=o&&(g="NaN"),g!=="number"?[new Xe(t,o,`number expected, ${g} found`)]:"minimum"in u&&o<u.minimum?[new Xe(t,o,`${o} is less than the minimum value ${u.minimum}`)]:"maximum"in u&&o>u.maximum?[new Xe(t,o,`${o} is greater than the maximum value ${u.maximum}`)]:[]}function vu(i){const t=i.valueSpec,o=dn(i.value.type);let u,g,w,e={};const r=o!=="categorical"&&i.value.property===void 0,l=!r,d=yt(i.value.stops)==="array"&&yt(i.value.stops[0])==="array"&&yt(i.value.stops[0][0])==="object",x=wi({key:i.key,value:i.value,valueSpec:i.styleSpec.function,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{stops:function(A){if(o==="identity")return[new Xe(A.key,A.value,'identity function may not have a "stops" property')];let L=[];const V=A.value;return L=L.concat(xl({key:A.key,value:V,valueSpec:A.valueSpec,style:A.style,styleSpec:A.styleSpec,arrayElementValidator:S})),yt(V)==="array"&&V.length===0&&L.push(new Xe(A.key,V,"array must have at least one stop")),L},default:function(A){return Tr({key:A.key,value:A.value,valueSpec:t,style:A.style,styleSpec:A.styleSpec})}}});return o==="identity"&&r&&x.push(new Xe(i.key,i.value,'missing required property "property"')),o==="identity"||i.value.stops||x.push(new Xe(i.key,i.value,'missing required property "stops"')),o==="exponential"&&i.valueSpec.expression&&!_c(i.valueSpec)&&x.push(new Xe(i.key,i.value,"exponential functions not supported")),i.styleSpec.$version>=8&&(l&&!As(i.valueSpec)?x.push(new Xe(i.key,i.value,"property functions not supported")):r&&!Un(i.valueSpec)&&x.push(new Xe(i.key,i.value,"zoom functions not supported"))),o!=="categorical"&&!d||i.value.property!==void 0||x.push(new Xe(i.key,i.value,'"property" property is required')),x;function S(A){let L=[];const V=A.value,q=A.key;if(yt(V)!=="array")return[new Xe(q,V,`array expected, ${yt(V)} found`)];if(V.length!==2)return[new Xe(q,V,`array length 2 expected, length ${V.length} found`)];if(d){if(yt(V[0])!=="object")return[new Xe(q,V,`object expected, ${yt(V[0])} found`)];if(V[0].zoom===void 0)return[new Xe(q,V,"object stop key must have zoom")];if(V[0].value===void 0)return[new Xe(q,V,"object stop key must have value")];if(w&&w>dn(V[0].zoom))return[new Xe(q,V[0].zoom,"stop zoom values must appear in ascending order")];dn(V[0].zoom)!==w&&(w=dn(V[0].zoom),g=void 0,e={}),L=L.concat(wi({key:`${q}[0]`,value:V[0],valueSpec:{zoom:{}},style:A.style,styleSpec:A.styleSpec,objectElementValidators:{zoom:ts,value:M}}))}else L=L.concat(M({key:`${q}[0]`,value:V[0],style:A.style,styleSpec:A.styleSpec},V));return Ls(Sn(V[1]))?L.concat([new Xe(`${q}[1]`,V[1],"expressions are not allowed in function stops.")]):L.concat(Tr({key:`${q}[1]`,value:V[1],valueSpec:t,style:A.style,styleSpec:A.styleSpec}))}function M(A,L){const V=yt(A.value),q=dn(A.value),ee=A.value!==null?A.value:L;if(u){if(V!==u)return[new Xe(A.key,ee,`${V} stop domain type must match previous stop domain type ${u}`)]}else u=V;if(V!=="number"&&V!=="string"&&V!=="boolean")return[new Xe(A.key,ee,"stop domain value must be a number, string, or boolean")];if(V!=="number"&&o!=="categorical"){let ae=`number expected, ${V} found`;return As(t)&&o===void 0&&(ae+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Xe(A.key,ee,ae)]}return o!=="categorical"||V!=="number"||isFinite(q)&&Math.floor(q)===q?o!=="categorical"&&V==="number"&&g!==void 0&&q<g?[new Xe(A.key,ee,"stop domain values must appear in ascending order")]:(g=q,o==="categorical"&&q in e?[new Xe(A.key,ee,"stop domain values must be unique")]:(e[q]=!0,[])):[new Xe(A.key,ee,`integer expected, found ${q}`)]}}function ns(i){const t=(i.expressionContext==="property"?yu:wa)(Sn(i.value),i.valueSpec);if(t.result==="error")return t.value.map(u=>new Xe(`${i.key}${u.key}`,i.value,u.message));const o=t.value.expression||t.value._styleExpression.expression;if(i.expressionContext==="property"&&i.propertyKey==="text-font"&&!o.outputDefined())return[new Xe(i.key,i.value,`Invalid data expression for "${i.propertyKey}". Output values must be contained as literals within the expression.`)];if(i.expressionContext==="property"&&i.propertyType==="layout"&&!po(o))return[new Xe(i.key,i.value,'"feature-state" data expressions are not supported with layout properties.')];if(i.expressionContext==="filter"&&!po(o))return[new Xe(i.key,i.value,'"feature-state" data expressions are not supported with filters.')];if(i.expressionContext&&i.expressionContext.indexOf("cluster")===0){if(!fn(o,["zoom","feature-state"]))return[new Xe(i.key,i.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(i.expressionContext==="cluster-initial"&&!cl(o))return[new Xe(i.key,i.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function zs(i){const t=i.key,o=i.value,u=i.valueSpec,g=[];return Array.isArray(u.values)?u.values.indexOf(dn(o))===-1&&g.push(new Xe(t,o,`expected one of [${u.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(u.values).indexOf(dn(o))===-1&&g.push(new Xe(t,o,`expected one of [${Object.keys(u.values).join(", ")}], ${JSON.stringify(o)} found`)),g}function Sa(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const t of i.slice(1))if(!Sa(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}const Ea={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function _l(i){if(i==null)return{filter:()=>!0,needGeometry:!1};Sa(i)||(i=wl(i));const t=wa(i,Ea);if(t.result==="error")throw new Error(t.value.map(o=>`${o.key}: ${o.message}`).join(", "));return{filter:(o,u,g)=>t.value.evaluate(o,u,{},g),needGeometry:Sc(i)}}function rs(i,t){return i<t?-1:i>t?1:0}function Sc(i){if(!Array.isArray(i))return!1;if(i[0]==="within")return!0;for(let t=1;t<i.length;t++)if(Sc(i[t]))return!0;return!1}function wl(i){if(!i)return!0;const t=i[0];return i.length<=1?t!=="any":t==="=="?bl(i[1],i[2],"=="):t==="!="?bi(bl(i[1],i[2],"==")):t==="<"||t===">"||t==="<="||t===">="?bl(i[1],i[2],t):t==="any"?(o=i.slice(1),["any"].concat(o.map(wl))):t==="all"?["all"].concat(i.slice(1).map(wl)):t==="none"?["all"].concat(i.slice(1).map(wl).map(bi)):t==="in"?Ec(i[1],i.slice(2)):t==="!in"?bi(Ec(i[1],i.slice(2))):t==="has"?Ta(i[1]):t==="!has"?bi(Ta(i[1])):t!=="within"||i;var o}function bl(i,t,o){switch(i){case"$type":return[`filter-type-${o}`,t];case"$id":return[`filter-id-${o}`,t];default:return[`filter-${o}`,i,t]}}function Ec(i,t){if(t.length===0)return!1;switch(i){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(o=>typeof o!=typeof t[0])?["filter-in-large",i,["literal",t.sort(rs)]]:["filter-in-small",i,["literal",t]]}}function Ta(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function bi(i){return["!",i]}function Ji(i){return Sa(Sn(i.value))?ns(ir({},i,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Sl(i)}function Sl(i){const t=i.value,o=i.key;if(yt(t)!=="array")return[new Xe(o,t,`array expected, ${yt(t)} found`)];const u=i.styleSpec;let g,w=[];if(t.length<1)return[new Xe(o,t,"filter array must have at least 1 element")];switch(w=w.concat(zs({key:`${o}[0]`,value:t[0],valueSpec:u.filter_operator,style:i.style,styleSpec:i.styleSpec})),dn(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&dn(t[1])==="$type"&&w.push(new Xe(o,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&w.push(new Xe(o,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(g=yt(t[1]),g!=="string"&&w.push(new Xe(`${o}[1]`,t[1],`string expected, ${g} found`)));for(let e=2;e<t.length;e++)g=yt(t[e]),dn(t[1])==="$type"?w=w.concat(zs({key:`${o}[${e}]`,value:t[e],valueSpec:u.geometry_type,style:i.style,styleSpec:i.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&w.push(new Xe(`${o}[${e}]`,t[e],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let e=1;e<t.length;e++)w=w.concat(Sl({key:`${o}[${e}]`,value:t[e],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":g=yt(t[1]),t.length!==2?w.push(new Xe(o,t,`filter array for "${t[0]}" operator must have 2 elements`)):g!=="string"&&w.push(new Xe(`${o}[1]`,t[1],`string expected, ${g} found`));break;case"within":g=yt(t[1]),t.length!==2?w.push(new Xe(o,t,`filter array for "${t[0]}" operator must have 2 elements`)):g!=="object"&&w.push(new Xe(`${o}[1]`,t[1],`object expected, ${g} found`))}return w}function ka(i,t){const o=i.key,u=i.style,g=i.styleSpec,w=i.value,e=i.objectKey,r=g[`${t}_${i.layerType}`];if(!r)return[];const l=e.match(/^(.*)-transition$/);if(t==="paint"&&l&&r[l[1]]&&r[l[1]].transition)return Tr({key:o,value:w,valueSpec:g.transition,style:u,styleSpec:g});const d=i.valueSpec||r[e];if(!d)return[new Xe(o,w,`unknown property "${e}"`)];let x;if(yt(w)==="string"&&As(d)&&!d.tokens&&(x=/^{([^}]+)}$/.exec(w)))return[new Xe(o,w,`"${e}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(x[1])} }\`.`)];const S=[];return i.layerType==="symbol"&&(e==="text-field"&&u&&!u.glyphs&&S.push(new Xe(o,w,'use of "text-field" requires a style "glyphs" property')),e==="text-font"&&es(Sn(w))&&dn(w.type)==="identity"&&S.push(new Xe(o,w,'"text-font" does not support identity functions'))),S.concat(Tr({key:i.key,value:w,valueSpec:d,style:u,styleSpec:g,expressionContext:"property",propertyType:t,propertyKey:e}))}function Ma(i){return ka(i,"paint")}function Tc(i){return ka(i,"layout")}function El(i){let t=[];const o=i.value,u=i.key,g=i.style,w=i.styleSpec;o.type||o.ref||t.push(new Xe(u,o,'either "type" or "ref" is required'));let e=dn(o.type);const r=dn(o.ref);if(o.id){const l=dn(o.id);for(let d=0;d<i.arrayIndex;d++){const x=g.layers[d];dn(x.id)===l&&t.push(new Xe(u,o.id,`duplicate layer id "${o.id}", previously used at line ${x.id.__line__}`))}}if("ref"in o){let l;["type","source","source-layer","filter","layout"].forEach(d=>{d in o&&t.push(new Xe(u,o[d],`"${d}" is prohibited for ref layers`))}),g.layers.forEach(d=>{dn(d.id)===r&&(l=d)}),l?l.ref?t.push(new Xe(u,o.ref,"ref cannot reference another ref layer")):e=dn(l.type):t.push(new Xe(u,o.ref,`ref layer "${r}" not found`))}else if(e!=="background")if(o.source){const l=g.sources&&g.sources[o.source],d=l&&dn(l.type);l?d==="vector"&&e==="raster"?t.push(new Xe(u,o.source,`layer "${o.id}" requires a raster source`)):d==="raster"&&e!=="raster"?t.push(new Xe(u,o.source,`layer "${o.id}" requires a vector source`)):d!=="vector"||o["source-layer"]?d==="raster-dem"&&e!=="hillshade"?t.push(new Xe(u,o.source,"raster-dem source can only be used with layer type 'hillshade'.")):e!=="line"||!o.paint||!o.paint["line-gradient"]||d==="geojson"&&l.lineMetrics||t.push(new Xe(u,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new Xe(u,o,`layer "${o.id}" must specify a "source-layer"`)):t.push(new Xe(u,o.source,`source "${o.source}" not found`))}else t.push(new Xe(u,o,'missing required property "source"'));return t=t.concat(wi({key:u,value:o,valueSpec:w.layer,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Tr({key:`${u}.type`,value:o.type,valueSpec:w.layer.type,style:i.style,styleSpec:i.styleSpec,object:o,objectKey:"type"}),filter:Ji,layout:l=>wi({layer:o,key:l.key,value:l.value,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{"*":d=>Tc(ir({layerType:e},d))}}),paint:l=>wi({layer:o,key:l.key,value:l.value,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{"*":d=>Ma(ir({layerType:e},d))}})}})),t}function yo(i){const t=i.value,o=i.key,u=yt(t);return u!=="string"?[new Xe(o,t,`string expected, ${u} found`)]:[]}const kc={promoteId:function({key:i,value:t}){if(yt(t)==="string")return yo({key:i,value:t});{const o=[];for(const u in t)o.push(...yo({key:`${i}.${u}`,value:t[u]}));return o}}};function Mc(i){const t=i.value,o=i.key,u=i.styleSpec,g=i.style;if(!t.type)return[new Xe(o,t,'"type" is required')];const w=dn(t.type);let e;switch(w){case"vector":case"raster":case"raster-dem":return e=wi({key:o,value:t,valueSpec:u[`source_${w.replace("-","_")}`],style:i.style,styleSpec:u,objectElementValidators:kc}),e;case"geojson":if(e=wi({key:o,value:t,valueSpec:u.source_geojson,style:g,styleSpec:u,objectElementValidators:kc}),t.cluster)for(const r in t.clusterProperties){const[l,d]=t.clusterProperties[r],x=typeof l=="string"?[l,["accumulated"],["get",r]]:l;e.push(...ns({key:`${o}.${r}.map`,value:d,expressionContext:"cluster-map"})),e.push(...ns({key:`${o}.${r}.reduce`,value:x,expressionContext:"cluster-reduce"}))}return e;case"video":return wi({key:o,value:t,valueSpec:u.source_video,style:g,styleSpec:u});case"image":return wi({key:o,value:t,valueSpec:u.source_image,style:g,styleSpec:u});case"canvas":return[new Xe(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return zs({key:`${o}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Rs(i){const t=i.value,o=i.styleSpec,u=o.light,g=i.style;let w=[];const e=yt(t);if(t===void 0)return w;if(e!=="object")return w=w.concat([new Xe("light",t,`object expected, ${e} found`)]),w;for(const r in t){const l=r.match(/^(.*)-transition$/);w=w.concat(l&&u[l[1]]&&u[l[1]].transition?Tr({key:r,value:t[r],valueSpec:o.transition,style:g,styleSpec:o}):u[r]?Tr({key:r,value:t[r],valueSpec:u[r],style:g,styleSpec:o}):[new Xe(r,t[r],`unknown property "${r}"`)])}return w}function Ca(i){const t=i.value,o=i.styleSpec,u=o.terrain,g=i.style;let w=[];const e=yt(t);if(t===void 0)return w;if(e!=="object")return w=w.concat([new Xe("terrain",t,`object expected, ${e} found`)]),w;for(const r in t)w=w.concat(u[r]?Tr({key:r,value:t[r],valueSpec:u[r],style:g,styleSpec:o}):[new Xe(r,t[r],`unknown property "${r}"`)]);return w}const Qr={"*":()=>[],array:xl,boolean:function(i){const t=i.value,o=i.key,u=yt(t);return u!=="boolean"?[new Xe(o,t,`boolean expected, ${u} found`)]:[]},number:ts,color:function(i){const t=i.key,o=i.value,u=yt(o);return u!=="string"?[new Xe(t,o,`color expected, ${u} found`)]:Gi(o)===null?[new Xe(t,o,`color expected, "${o}" found`)]:[]},constants:Sr,enum:zs,filter:Ji,function:vu,layer:El,object:wi,source:Mc,light:Rs,terrain:Ca,string:yo,formatted:function(i){return yo(i).length===0?[]:ns(i)},resolvedImage:function(i){return yo(i).length===0?[]:ns(i)},padding:function(i){const t=i.key,o=i.value;if(yt(o)==="array"){if(o.length<1||o.length>4)return[new Xe(t,o,`padding requires 1 to 4 values; ${o.length} values found`)];const u={type:"number"};let g=[];for(let w=0;w<o.length;w++)g=g.concat(Tr({key:`${t}[${w}]`,value:o[w],valueSpec:u}));return g}return ts({key:t,value:o,valueSpec:{}})}};function Tr(i){const t=i.value,o=i.valueSpec,u=i.styleSpec;return o.expression&&es(dn(t))?vu(i):o.expression&&Ls(Sn(t))?ns(i):o.type&&Qr[o.type]?Qr[o.type](i):wi(ir({},i,{valueSpec:o.type?u[o.type]:o}))}function mh(i){const t=i.value,o=i.key,u=yo(i);return u.length||(t.indexOf("{fontstack}")===-1&&u.push(new Xe(o,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&u.push(new Xe(o,t,'"glyphs" url must include a "{range}" token'))),u}function vo(i,t=Le){let o=[];return o=o.concat(Tr({key:"",value:i,valueSpec:t.$root,styleSpec:t,style:i,objectElementValidators:{glyphs:mh,"*":()=>[]}})),i.constants&&(o=o.concat(Sr({key:"constants",value:i.constants}))),li(o)}function li(i){return[].concat(i).sort((t,o)=>t.line-o.line)}function Si(i){return function(...t){return li(i.apply(this,t))}}vo.source=Si(Mc),vo.light=Si(Rs),vo.terrain=Si(Ca),vo.layer=Si(El),vo.filter=Si(Ji),vo.paintProperty=Si(Ma),vo.layoutProperty=Si(Tc);const xo=vo,xu=xo.light,Tl=xo.paintProperty,_u=xo.layoutProperty;function kl(i,t){let o=!1;if(t&&t.length)for(const u of t)i.fire(new Fr(new Error(u.message))),o=!0;return o}class is{constructor(t,o,u){const g=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const e=new Int32Array(this.arrayBuffer);t=e[0],this.d=(o=e[1])+2*(u=e[2]);for(let l=0;l<this.d*this.d;l++){const d=e[3+l],x=e[3+l+1];g.push(d===x?null:e.subarray(d,x))}const r=e[3+g.length+1];this.keys=e.subarray(e[3+g.length],r),this.bboxes=e.subarray(r),this.insert=this._insertReadonly}else{this.d=o+2*u;for(let e=0;e<this.d*this.d;e++)g.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=t,this.padding=u,this.scale=o/t,this.uid=0;const w=u/o*t;this.min=-w,this.max=t+w}insert(t,o,u,g,w){this._forEachCell(o,u,g,w,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(o),this.bboxes.push(u),this.bboxes.push(g),this.bboxes.push(w)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,o,u,g,w,e){this.cells[w].push(e)}query(t,o,u,g,w){const e=this.min,r=this.max;if(t<=e&&o<=e&&r<=u&&r<=g&&!w)return Array.prototype.slice.call(this.keys);{const l=[];return this._forEachCell(t,o,u,g,this._queryCell,l,{},w),l}}_queryCell(t,o,u,g,w,e,r,l){const d=this.cells[w];if(d!==null){const x=this.keys,S=this.bboxes;for(let M=0;M<d.length;M++){const A=d[M];if(r[A]===void 0){const L=4*A;(l?l(S[L+0],S[L+1],S[L+2],S[L+3]):t<=S[L+2]&&o<=S[L+3]&&u>=S[L+0]&&g>=S[L+1])?(r[A]=!0,e.push(x[A])):r[A]=!1}}}}_forEachCell(t,o,u,g,w,e,r,l){const d=this._convertToCellCoord(t),x=this._convertToCellCoord(o),S=this._convertToCellCoord(u),M=this._convertToCellCoord(g);for(let A=d;A<=S;A++)for(let L=x;L<=M;L++){const V=this.d*L+A;if((!l||l(this._convertFromCellCoord(A),this._convertFromCellCoord(L),this._convertFromCellCoord(A+1),this._convertFromCellCoord(L+1)))&&w.call(this,t,o,u,g,V,e,r,l))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,o=3+this.cells.length+1+1;let u=0;for(let e=0;e<this.cells.length;e++)u+=this.cells[e].length;const g=new Int32Array(o+u+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;let w=o;for(let e=0;e<t.length;e++){const r=t[e];g[3+e]=w,g.set(r,w),w+=r.length}return g[3+t.length]=w,g.set(this.keys,w),w+=this.keys.length,g[3+t.length+1]=w,g.set(this.bboxes,w),w+=this.bboxes.length,g.buffer}static serialize(t,o){const u=t.toArrayBuffer();return o&&o.push(u),{buffer:u}}static deserialize(t){return new is(t.buffer)}}const _o={};function ut(i,t,o={}){if(_o[i])throw new Error(`${i} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:i,writeable:!1}),_o[i]={klass:t,omit:o.omit||[],shallow:o.shallow||[]}}ut("Object",Object),ut("TransferableGridIndex",is),ut("Color",G),ut("Error",Error),ut("AJAXError",Qn),ut("ResolvedImage",ue),ut("StylePropertyFunction",yl),ut("StyleExpression",bc,{omit:["_evaluator"]}),ut("ZoomDependentExpression",ba),ut("ZoomConstantExpression",gl),ut("CompoundExpression",Vt,{omit:["_evaluate"]});for(const i in Ki)Ki[i]._classRegistryKey||ut(`Expression_${i}`,Ki[i]);function Pa(i){return i&&typeof ArrayBuffer<"u"&&(i instanceof ArrayBuffer||i.constructor&&i.constructor.name==="ArrayBuffer")}function Yi(i,t){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||i instanceof Blob)return i;if(Pa(i)||mt(i))return t&&t.push(i),i;if(ArrayBuffer.isView(i)){const o=i;return t&&t.push(o.buffer),o}if(i instanceof ImageData)return t&&t.push(i.data.buffer),i;if(Array.isArray(i)){const o=[];for(const u of i)o.push(Yi(u,t));return o}if(typeof i=="object"){const o=i.constructor,u=o._classRegistryKey;if(!u)throw new Error("can't serialize object of unregistered class");if(!_o[u])throw new Error(`${u} is not registered.`);const g=o.serialize?o.serialize(i,t):{};if(o.serialize){if(t&&g===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const w in i){if(!i.hasOwnProperty(w)||_o[u].omit.indexOf(w)>=0)continue;const e=i[w];g[w]=_o[u].shallow.indexOf(w)>=0?e:Yi(e,t)}i instanceof Error&&(g.message=i.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return u!=="Object"&&(g.$name=u),g}throw new Error("can't serialize object of type "+typeof i)}function Qi(i){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||i instanceof Blob||Pa(i)||mt(i)||ArrayBuffer.isView(i)||i instanceof ImageData)return i;if(Array.isArray(i))return i.map(Qi);if(typeof i=="object"){const t=i.$name||"Object";if(!_o[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:o}=_o[t];if(!o)throw new Error(`can't deserialize unregistered class ${t}`);if(o.deserialize)return o.deserialize(i);const u=Object.create(o.prototype);for(const g of Object.keys(i)){if(g==="$name")continue;const w=i[g];u[g]=_o[t].shallow.indexOf(g)>=0?w:Qi(w)}return u}throw new Error("can't deserialize object of type "+typeof i)}class js{constructor(){this.first=!0}update(t,o){const u=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=u,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=u,!0):(this.lastFloorZoom>u?(this.lastIntegerZoom=u+1,this.lastIntegerZoomTime=o):this.lastFloorZoom<u&&(this.lastIntegerZoom=u,this.lastIntegerZoomTime=o),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=u,!0))}}const it={"Latin-1 Supplement":i=>i>=128&&i<=255,Arabic:i=>i>=1536&&i<=1791,"Arabic Supplement":i=>i>=1872&&i<=1919,"Arabic Extended-A":i=>i>=2208&&i<=2303,"Hangul Jamo":i=>i>=4352&&i<=4607,"Unified Canadian Aboriginal Syllabics":i=>i>=5120&&i<=5759,Khmer:i=>i>=6016&&i<=6143,"Unified Canadian Aboriginal Syllabics Extended":i=>i>=6320&&i<=6399,"General Punctuation":i=>i>=8192&&i<=8303,"Letterlike Symbols":i=>i>=8448&&i<=8527,"Number Forms":i=>i>=8528&&i<=8591,"Miscellaneous Technical":i=>i>=8960&&i<=9215,"Control Pictures":i=>i>=9216&&i<=9279,"Optical Character Recognition":i=>i>=9280&&i<=9311,"Enclosed Alphanumerics":i=>i>=9312&&i<=9471,"Geometric Shapes":i=>i>=9632&&i<=9727,"Miscellaneous Symbols":i=>i>=9728&&i<=9983,"Miscellaneous Symbols and Arrows":i=>i>=11008&&i<=11263,"CJK Radicals Supplement":i=>i>=11904&&i<=12031,"Kangxi Radicals":i=>i>=12032&&i<=12255,"Ideographic Description Characters":i=>i>=12272&&i<=12287,"CJK Symbols and Punctuation":i=>i>=12288&&i<=12351,Hiragana:i=>i>=12352&&i<=12447,Katakana:i=>i>=12448&&i<=12543,Bopomofo:i=>i>=12544&&i<=12591,"Hangul Compatibility Jamo":i=>i>=12592&&i<=12687,Kanbun:i=>i>=12688&&i<=12703,"Bopomofo Extended":i=>i>=12704&&i<=12735,"CJK Strokes":i=>i>=12736&&i<=12783,"Katakana Phonetic Extensions":i=>i>=12784&&i<=12799,"Enclosed CJK Letters and Months":i=>i>=12800&&i<=13055,"CJK Compatibility":i=>i>=13056&&i<=13311,"CJK Unified Ideographs Extension A":i=>i>=13312&&i<=19903,"Yijing Hexagram Symbols":i=>i>=19904&&i<=19967,"CJK Unified Ideographs":i=>i>=19968&&i<=40959,"Yi Syllables":i=>i>=40960&&i<=42127,"Yi Radicals":i=>i>=42128&&i<=42191,"Hangul Jamo Extended-A":i=>i>=43360&&i<=43391,"Hangul Syllables":i=>i>=44032&&i<=55215,"Hangul Jamo Extended-B":i=>i>=55216&&i<=55295,"Private Use Area":i=>i>=57344&&i<=63743,"CJK Compatibility Ideographs":i=>i>=63744&&i<=64255,"Arabic Presentation Forms-A":i=>i>=64336&&i<=65023,"Vertical Forms":i=>i>=65040&&i<=65055,"CJK Compatibility Forms":i=>i>=65072&&i<=65103,"Small Form Variants":i=>i>=65104&&i<=65135,"Arabic Presentation Forms-B":i=>i>=65136&&i<=65279,"Halfwidth and Fullwidth Forms":i=>i>=65280&&i<=65519};function wo(i){for(const t of i)if(bo(t.charCodeAt(0)))return!0;return!1}function Ml(i){for(const t of i)if(!wu(t.charCodeAt(0)))return!1;return!0}function wu(i){return!(it.Arabic(i)||it["Arabic Supplement"](i)||it["Arabic Extended-A"](i)||it["Arabic Presentation Forms-A"](i)||it["Arabic Presentation Forms-B"](i))}function bo(i){return!(i!==746&&i!==747&&(i<4352||!(it["Bopomofo Extended"](i)||it.Bopomofo(i)||it["CJK Compatibility Forms"](i)&&!(i>=65097&&i<=65103)||it["CJK Compatibility Ideographs"](i)||it["CJK Compatibility"](i)||it["CJK Radicals Supplement"](i)||it["CJK Strokes"](i)||!(!it["CJK Symbols and Punctuation"](i)||i>=12296&&i<=12305||i>=12308&&i<=12319||i===12336)||it["CJK Unified Ideographs Extension A"](i)||it["CJK Unified Ideographs"](i)||it["Enclosed CJK Letters and Months"](i)||it["Hangul Compatibility Jamo"](i)||it["Hangul Jamo Extended-A"](i)||it["Hangul Jamo Extended-B"](i)||it["Hangul Jamo"](i)||it["Hangul Syllables"](i)||it.Hiragana(i)||it["Ideographic Description Characters"](i)||it.Kanbun(i)||it["Kangxi Radicals"](i)||it["Katakana Phonetic Extensions"](i)||it.Katakana(i)&&i!==12540||!(!it["Halfwidth and Fullwidth Forms"](i)||i===65288||i===65289||i===65293||i>=65306&&i<=65310||i===65339||i===65341||i===65343||i>=65371&&i<=65503||i===65507||i>=65512&&i<=65519)||!(!it["Small Form Variants"](i)||i>=65112&&i<=65118||i>=65123&&i<=65126)||it["Unified Canadian Aboriginal Syllabics"](i)||it["Unified Canadian Aboriginal Syllabics Extended"](i)||it["Vertical Forms"](i)||it["Yijing Hexagram Symbols"](i)||it["Yi Syllables"](i)||it["Yi Radicals"](i))))}function Cc(i){return!(bo(i)||function(t){return!!(it["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||it["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||it["Letterlike Symbols"](t)||it["Number Forms"](t)||it["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||it["Control Pictures"](t)&&t!==9251||it["Optical Character Recognition"](t)||it["Enclosed Alphanumerics"](t)||it["Geometric Shapes"](t)||it["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||it["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||it["CJK Symbols and Punctuation"](t)||it.Katakana(t)||it["Private Use Area"](t)||it["CJK Compatibility Forms"](t)||it["Small Form Variants"](t)||it["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(i))}function Pc(i){return i>=1424&&i<=2303||it["Arabic Presentation Forms-A"](i)||it["Arabic Presentation Forms-B"](i)}function bu(i,t){return!(!t&&Pc(i)||i>=2304&&i<=3583||i>=3840&&i<=4255||it.Khmer(i))}function Su(i){for(const t of i)if(Pc(t.charCodeAt(0)))return!0;return!1}const Ia="deferred",Cl="loading",Ni="loaded";let Aa=null,kr="unavailable",So=null;const Eu=function(i){i&&typeof i=="string"&&i.indexOf("NetworkError")>-1&&(kr="error"),Aa&&Aa(i)};function os(){Ds.fire(new On("pluginStateChange",{pluginStatus:kr,pluginURL:So}))}const Ds=new Hr,Pl=function(){return kr},La=function(){if(kr!==Ia||!So)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");kr=Cl,os(),So&&tt({url:So},i=>{i?Eu(i):(kr=Ni,os())})},hn={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>kr===Ni||hn.applyArabicShaping!=null,isLoading:()=>kr===Cl,setState(i){if(!He())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");kr=i.pluginStatus,So=i.pluginURL},isParsed(){if(!He())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return hn.applyArabicShaping!=null&&hn.processBidirectionalText!=null&&hn.processStyledBidirectionalText!=null},getPluginURL(){if(!He())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return So}};class En{constructor(t,o){this.zoom=t,o?(this.now=o.now,this.fadeDuration=o.fadeDuration,this.zoomHistory=o.zoomHistory,this.transition=o.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new js,this.transition={})}isSupportedScript(t){return function(o,u){for(const g of o)if(!bu(g.charCodeAt(0),u))return!1;return!0}(t,hn.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,o=t-Math.floor(t),u=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:o+(1-o)*u}:{fromScale:.5,toScale:1,t:1-(1-u)*o}}}class ss{constructor(t,o){this.property=t,this.value=o,this.expression=function(u,g){if(es(u))return new yl(u,g);if(Ls(u)){const w=yu(u,g);if(w.result==="error")throw new Error(w.value.map(e=>`${e.key}: ${e.message}`).join(", "));return w.value}{let w=u;return g.type==="color"&&typeof u=="string"?w=G.parse(u):g.type!=="padding"||typeof u!="number"&&!Array.isArray(u)||(w=fe.parse(u)),{kind:"constant",evaluate:()=>w}}}(o===void 0?t.specification.default:o,t.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(t,o,u){return this.property.possiblyEvaluate(this,t,o,u)}}class Eo{constructor(t){this.property=t,this.value=new ss(t,void 0)}transitioned(t,o){return new Al(this.property,this.value,o,ie({},t.transition,this.transition),t.now)}untransitioned(){return new Al(this.property,this.value,null,{},0)}}class Il{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return ve(this._values[t].value.value)}setValue(t,o){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new Eo(this._values[t].property)),this._values[t].value=new ss(this._values[t].property,o===null?void 0:ve(o))}getTransition(t){return ve(this._values[t].transition)}setTransition(t,o){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new Eo(this._values[t].property)),this._values[t].transition=ve(o)||void 0}serialize(){const t={};for(const o of Object.keys(this._values)){const u=this.getValue(o);u!==void 0&&(t[o]=u);const g=this.getTransition(o);g!==void 0&&(t[`${o}-transition`]=g)}return t}transitioned(t,o){const u=new Ns(this._properties);for(const g of Object.keys(this._values))u._values[g]=this._values[g].transitioned(t,o._values[g]);return u}untransitioned(){const t=new Ns(this._properties);for(const o of Object.keys(this._values))t._values[o]=this._values[o].untransitioned();return t}}class Al{constructor(t,o,u,g,w){this.property=t,this.value=o,this.begin=w+g.delay||0,this.end=this.begin+g.duration||0,t.specification.transition&&(g.delay||g.duration)&&(this.prior=u)}possiblyEvaluate(t,o,u){const g=t.now||0,w=this.value.possiblyEvaluate(t,o,u),e=this.prior;if(e){if(g>this.end)return this.prior=null,w;if(this.value.isDataDriven())return this.prior=null,w;if(g<this.begin)return e.possiblyEvaluate(t,o,u);{const r=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(e.possiblyEvaluate(t,o,u),w,function(l){if(l<=0)return 0;if(l>=1)return 1;const d=l*l,x=d*l;return 4*(l<.5?x:3*(l-d)+x-.75)}(r))}}return w}}class Ns{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,o,u){const g=new za(this._properties);for(const w of Object.keys(this._values))g._values[w]=this._values[w].possiblyEvaluate(t,o,u);return g}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class Ll{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}getValue(t){return ve(this._values[t].value)}setValue(t,o){this._values[t]=new ss(this._values[t].property,o===null?void 0:ve(o))}serialize(){const t={};for(const o of Object.keys(this._values)){const u=this.getValue(o);u!==void 0&&(t[o]=u)}return t}possiblyEvaluate(t,o,u){const g=new za(this._properties);for(const w of Object.keys(this._values))g._values[w]=this._values[w].possiblyEvaluate(t,o,u);return g}}class Or{constructor(t,o,u){this.property=t,this.value=o,this.parameters=u}isConstant(){return this.value.kind==="constant"}constantOr(t){return this.value.kind==="constant"?this.value.value:t}evaluate(t,o,u,g){return this.property.evaluate(this.value,this.parameters,t,o,u,g)}}class za{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class xt{constructor(t){this.specification=t}possiblyEvaluate(t,o){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(o)}interpolate(t,o,u){const g=Ko[this.specification.type];return g?g(t,o,u):t}}class kt{constructor(t,o){this.specification=t,this.overrides=o}possiblyEvaluate(t,o,u,g){return new Or(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(o,null,{},u,g)}:t.expression,o)}interpolate(t,o,u){if(t.value.kind!=="constant"||o.value.kind!=="constant")return t;if(t.value.value===void 0||o.value.value===void 0)return new Or(this,{kind:"constant",value:void 0},t.parameters);const g=Ko[this.specification.type];return g?new Or(this,{kind:"constant",value:g(t.value.value,o.value.value,u)},t.parameters):t}evaluate(t,o,u,g,w,e){return t.kind==="constant"?t.value:t.evaluate(o,u,g,w,e)}}class Bs extends kt{possiblyEvaluate(t,o,u,g){if(t.value===void 0)return new Or(this,{kind:"constant",value:void 0},o);if(t.expression.kind==="constant"){const w=t.expression.evaluate(o,null,{},u,g),e=t.property.specification.type==="resolvedImage"&&typeof w!="string"?w.name:w,r=this._calculate(e,e,e,o);return new Or(this,{kind:"constant",value:r},o)}if(t.expression.kind==="camera"){const w=this._calculate(t.expression.evaluate({zoom:o.zoom-1}),t.expression.evaluate({zoom:o.zoom}),t.expression.evaluate({zoom:o.zoom+1}),o);return new Or(this,{kind:"constant",value:w},o)}return new Or(this,t.expression,o)}evaluate(t,o,u,g,w,e){if(t.kind==="source"){const r=t.evaluate(o,u,g,w,e);return this._calculate(r,r,r,o)}return t.kind==="composite"?this._calculate(t.evaluate({zoom:Math.floor(o.zoom)-1},u,g),t.evaluate({zoom:Math.floor(o.zoom)},u,g),t.evaluate({zoom:Math.floor(o.zoom)+1},u,g),o):t.value}_calculate(t,o,u,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:t,to:o}:{from:u,to:o}}interpolate(t){return t}}class To{constructor(t){this.specification=t}possiblyEvaluate(t,o,u,g){if(t.value!==void 0){if(t.expression.kind==="constant"){const w=t.expression.evaluate(o,null,{},u,g);return this._calculate(w,w,w,o)}return this._calculate(t.expression.evaluate(new En(Math.floor(o.zoom-1),o)),t.expression.evaluate(new En(Math.floor(o.zoom),o)),t.expression.evaluate(new En(Math.floor(o.zoom+1),o)),o)}}_calculate(t,o,u,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:t,to:o}:{from:u,to:o}}interpolate(t){return t}}class Fs{constructor(t){this.specification=t}possiblyEvaluate(t,o,u,g){return!!t.expression.evaluate(o,null,{},u,g)}interpolate(){return!1}}class Xn{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const o in t){const u=t[o];u.specification.overridable&&this.overridableProperties.push(o);const g=this.defaultPropertyValues[o]=new ss(u,void 0),w=this.defaultTransitionablePropertyValues[o]=new Eo(u);this.defaultTransitioningPropertyValues[o]=w.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=g.possiblyEvaluate({})}}}ut("DataDrivenProperty",kt),ut("DataConstantProperty",xt),ut("CrossFadedDataDrivenProperty",Bs),ut("CrossFadedProperty",To),ut("ColorRampProperty",Fs);const eo="-transition";class Mr extends Hr{constructor(t,o){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},t.type!=="custom"&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,t.type!=="background"&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),o.layout&&(this._unevaluatedLayout=new Ll(o.layout)),o.paint)){this._transitionablePaint=new Il(o.paint);for(const u in t.paint)this.setPaintProperty(u,t.paint[u],{validate:!1});for(const u in t.layout)this.setLayoutProperty(u,t.layout[u],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new za(o.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return t==="visibility"?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,o,u={}){o!=null&&this._validate(_u,`layers.${this.id}.layout.${t}`,t,o,u)||(t!=="visibility"?this._unevaluatedLayout.setValue(t,o):this.visibility=o)}getPaintProperty(t){return t.endsWith(eo)?this._transitionablePaint.getTransition(t.slice(0,-eo.length)):this._transitionablePaint.getValue(t)}setPaintProperty(t,o,u={}){if(o!=null&&this._validate(Tl,`layers.${this.id}.paint.${t}`,t,o,u))return!1;if(t.endsWith(eo))return this._transitionablePaint.setTransition(t.slice(0,-eo.length),o||void 0),!1;{const g=this._transitionablePaint._values[t],w=g.property.specification["property-type"]==="cross-faded-data-driven",e=g.value.isDataDriven(),r=g.value;this._transitionablePaint.setValue(t,o),this._handleSpecialPaintPropertyUpdate(t);const l=this._transitionablePaint._values[t].value;return l.isDataDriven()||e||w||this._handleOverridablePaintPropertyUpdate(t,r,l)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,o,u){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||this.visibility==="none"}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,o){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,o)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),ye(t,(o,u)=>!(o===void 0||u==="layout"&&!Object.keys(o).length||u==="paint"&&!Object.keys(o).length))}_validate(t,o,u,g,w={}){return(!w||w.validate!==!1)&&kl(this,t.call(xo,{key:o,layerType:this.type,objectKey:u,value:g,styleSpec:Le,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const o=this.paint.get(t);if(o instanceof Or&&As(o.property.specification)&&(o.value.kind==="source"||o.value.kind==="composite")&&o.value.isStateDependent)return!0}return!1}}const Ic={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ra{constructor(t,o){this._structArray=t,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Tn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,o){return t._trim(),o&&(t.isTransferred=!0,o.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const o=Object.create(this.prototype);return o.arrayBuffer=t.arrayBuffer,o.length=t.length,o.capacity=t.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function nr(i,t=1){let o=0,u=0;return{members:i.map(g=>{const w=Ic[g.type].BYTES_PER_ELEMENT,e=o=Tu(o,Math.max(t,w)),r=g.components||1;return u=Math.max(u,w),o+=w*r,{name:g.name,type:g.type,components:r,offset:e}}),size:Tu(o,Math.max(u,t)),alignment:t}}function Tu(i,t){return Math.ceil(i/t)*t}class ko extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o){const u=this.length;return this.resize(u+1),this.emplace(u,t,o)}emplace(t,o,u){const g=2*t;return this.int16[g+0]=o,this.int16[g+1]=u,t}}ko.prototype.bytesPerElement=4,ut("StructArrayLayout2i4",ko);class ci extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,u,g){const w=this.length;return this.resize(w+1),this.emplace(w,t,o,u,g)}emplace(t,o,u,g,w){const e=4*t;return this.int16[e+0]=o,this.int16[e+1]=u,this.int16[e+2]=g,this.int16[e+3]=w,t}}ci.prototype.bytesPerElement=8,ut("StructArrayLayout4i8",ci);class f extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,u,g,w,e){const r=this.length;return this.resize(r+1),this.emplace(r,t,o,u,g,w,e)}emplace(t,o,u,g,w,e,r){const l=6*t;return this.int16[l+0]=o,this.int16[l+1]=u,this.int16[l+2]=g,this.int16[l+3]=w,this.int16[l+4]=e,this.int16[l+5]=r,t}}f.prototype.bytesPerElement=12,ut("StructArrayLayout2i4i12",f);class n extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,u,g,w,e){const r=this.length;return this.resize(r+1),this.emplace(r,t,o,u,g,w,e)}emplace(t,o,u,g,w,e,r){const l=4*t,d=8*t;return this.int16[l+0]=o,this.int16[l+1]=u,this.uint8[d+4]=g,this.uint8[d+5]=w,this.uint8[d+6]=e,this.uint8[d+7]=r,t}}n.prototype.bytesPerElement=8,ut("StructArrayLayout2i4ub8",n);class s extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o){const u=this.length;return this.resize(u+1),this.emplace(u,t,o)}emplace(t,o,u){const g=2*t;return this.float32[g+0]=o,this.float32[g+1]=u,t}}s.prototype.bytesPerElement=8,ut("StructArrayLayout2f8",s);class h extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,u,g,w,e,r,l,d,x){const S=this.length;return this.resize(S+1),this.emplace(S,t,o,u,g,w,e,r,l,d,x)}emplace(t,o,u,g,w,e,r,l,d,x,S){const M=10*t;return this.uint16[M+0]=o,this.uint16[M+1]=u,this.uint16[M+2]=g,this.uint16[M+3]=w,this.uint16[M+4]=e,this.uint16[M+5]=r,this.uint16[M+6]=l,this.uint16[M+7]=d,this.uint16[M+8]=x,this.uint16[M+9]=S,t}}h.prototype.bytesPerElement=20,ut("StructArrayLayout10ui20",h);class m extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,u,g,w,e,r,l,d,x,S,M){const A=this.length;return this.resize(A+1),this.emplace(A,t,o,u,g,w,e,r,l,d,x,S,M)}emplace(t,o,u,g,w,e,r,l,d,x,S,M,A){const L=12*t;return this.int16[L+0]=o,this.int16[L+1]=u,this.int16[L+2]=g,this.int16[L+3]=w,this.uint16[L+4]=e,this.uint16[L+5]=r,this.uint16[L+6]=l,this.uint16[L+7]=d,this.int16[L+8]=x,this.int16[L+9]=S,this.int16[L+10]=M,this.int16[L+11]=A,t}}m.prototype.bytesPerElement=24,ut("StructArrayLayout4i4ui4i24",m);class b extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,u){const g=this.length;return this.resize(g+1),this.emplace(g,t,o,u)}emplace(t,o,u,g){const w=3*t;return this.float32[w+0]=o,this.float32[w+1]=u,this.float32[w+2]=g,t}}b.prototype.bytesPerElement=12,ut("StructArrayLayout3f12",b);class k extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const o=this.length;return this.resize(o+1),this.emplace(o,t)}emplace(t,o){return this.uint32[1*t+0]=o,t}}k.prototype.bytesPerElement=4,ut("StructArrayLayout1ul4",k);class P extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,u,g,w,e,r,l,d){const x=this.length;return this.resize(x+1),this.emplace(x,t,o,u,g,w,e,r,l,d)}emplace(t,o,u,g,w,e,r,l,d,x){const S=10*t,M=5*t;return this.int16[S+0]=o,this.int16[S+1]=u,this.int16[S+2]=g,this.int16[S+3]=w,this.int16[S+4]=e,this.int16[S+5]=r,this.uint32[M+3]=l,this.uint16[S+8]=d,this.uint16[S+9]=x,t}}P.prototype.bytesPerElement=20,ut("StructArrayLayout6i1ul2ui20",P);class I extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,u,g,w,e){const r=this.length;return this.resize(r+1),this.emplace(r,t,o,u,g,w,e)}emplace(t,o,u,g,w,e,r){const l=6*t;return this.int16[l+0]=o,this.int16[l+1]=u,this.int16[l+2]=g,this.int16[l+3]=w,this.int16[l+4]=e,this.int16[l+5]=r,t}}I.prototype.bytesPerElement=12,ut("StructArrayLayout2i2i2i12",I);class z extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,u,g,w){const e=this.length;return this.resize(e+1),this.emplace(e,t,o,u,g,w)}emplace(t,o,u,g,w,e){const r=4*t,l=8*t;return this.float32[r+0]=o,this.float32[r+1]=u,this.float32[r+2]=g,this.int16[l+6]=w,this.int16[l+7]=e,t}}z.prototype.bytesPerElement=16,ut("StructArrayLayout2f1f2i16",z);class N extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,u,g){const w=this.length;return this.resize(w+1),this.emplace(w,t,o,u,g)}emplace(t,o,u,g,w){const e=12*t,r=3*t;return this.uint8[e+0]=o,this.uint8[e+1]=u,this.float32[r+1]=g,this.float32[r+2]=w,t}}N.prototype.bytesPerElement=12,ut("StructArrayLayout2ub2f12",N);class U extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,u){const g=this.length;return this.resize(g+1),this.emplace(g,t,o,u)}emplace(t,o,u,g){const w=3*t;return this.uint16[w+0]=o,this.uint16[w+1]=u,this.uint16[w+2]=g,t}}U.prototype.bytesPerElement=6,ut("StructArrayLayout3ui6",U);class H extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,u,g,w,e,r,l,d,x,S,M,A,L,V,q,ee){const ae=this.length;return this.resize(ae+1),this.emplace(ae,t,o,u,g,w,e,r,l,d,x,S,M,A,L,V,q,ee)}emplace(t,o,u,g,w,e,r,l,d,x,S,M,A,L,V,q,ee,ae){const se=24*t,ge=12*t,Ee=48*t;return this.int16[se+0]=o,this.int16[se+1]=u,this.uint16[se+2]=g,this.uint16[se+3]=w,this.uint32[ge+2]=e,this.uint32[ge+3]=r,this.uint32[ge+4]=l,this.uint16[se+10]=d,this.uint16[se+11]=x,this.uint16[se+12]=S,this.float32[ge+7]=M,this.float32[ge+8]=A,this.uint8[Ee+36]=L,this.uint8[Ee+37]=V,this.uint8[Ee+38]=q,this.uint32[ge+10]=ee,this.int16[se+22]=ae,t}}H.prototype.bytesPerElement=48,ut("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",H);class Q extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,u,g,w,e,r,l,d,x,S,M,A,L,V,q,ee,ae,se,ge,Ee,Re,de,oe,he,Te,Ie,Fe){const Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,t,o,u,g,w,e,r,l,d,x,S,M,A,L,V,q,ee,ae,se,ge,Ee,Re,de,oe,he,Te,Ie,Fe)}emplace(t,o,u,g,w,e,r,l,d,x,S,M,A,L,V,q,ee,ae,se,ge,Ee,Re,de,oe,he,Te,Ie,Fe,Ne){const Ce=34*t,ht=17*t;return this.int16[Ce+0]=o,this.int16[Ce+1]=u,this.int16[Ce+2]=g,this.int16[Ce+3]=w,this.int16[Ce+4]=e,this.int16[Ce+5]=r,this.int16[Ce+6]=l,this.int16[Ce+7]=d,this.uint16[Ce+8]=x,this.uint16[Ce+9]=S,this.uint16[Ce+10]=M,this.uint16[Ce+11]=A,this.uint16[Ce+12]=L,this.uint16[Ce+13]=V,this.uint16[Ce+14]=q,this.uint16[Ce+15]=ee,this.uint16[Ce+16]=ae,this.uint16[Ce+17]=se,this.uint16[Ce+18]=ge,this.uint16[Ce+19]=Ee,this.uint16[Ce+20]=Re,this.uint16[Ce+21]=de,this.uint16[Ce+22]=oe,this.uint32[ht+12]=he,this.float32[ht+13]=Te,this.float32[ht+14]=Ie,this.float32[ht+15]=Fe,this.float32[ht+16]=Ne,t}}Q.prototype.bytesPerElement=68,ut("StructArrayLayout8i15ui1ul4f68",Q);class K extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const o=this.length;return this.resize(o+1),this.emplace(o,t)}emplace(t,o){return this.float32[1*t+0]=o,t}}K.prototype.bytesPerElement=4,ut("StructArrayLayout1f4",K);class X extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,u){const g=this.length;return this.resize(g+1),this.emplace(g,t,o,u)}emplace(t,o,u,g){const w=3*t;return this.int16[w+0]=o,this.int16[w+1]=u,this.int16[w+2]=g,t}}X.prototype.bytesPerElement=6,ut("StructArrayLayout3i6",X);class le extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,u){const g=this.length;return this.resize(g+1),this.emplace(g,t,o,u)}emplace(t,o,u,g){const w=4*t;return this.uint32[2*t+0]=o,this.uint16[w+2]=u,this.uint16[w+3]=g,t}}le.prototype.bytesPerElement=8,ut("StructArrayLayout1ul2ui8",le);class xe extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o){const u=this.length;return this.resize(u+1),this.emplace(u,t,o)}emplace(t,o,u){const g=2*t;return this.uint16[g+0]=o,this.uint16[g+1]=u,t}}xe.prototype.bytesPerElement=4,ut("StructArrayLayout2ui4",xe);class be extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const o=this.length;return this.resize(o+1),this.emplace(o,t)}emplace(t,o){return this.uint16[1*t+0]=o,t}}be.prototype.bytesPerElement=2,ut("StructArrayLayout1ui2",be);class re extends Tn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,u,g){const w=this.length;return this.resize(w+1),this.emplace(w,t,o,u,g)}emplace(t,o,u,g,w){const e=4*t;return this.float32[e+0]=o,this.float32[e+1]=u,this.float32[e+2]=g,this.float32[e+3]=w,t}}re.prototype.bytesPerElement=16,ut("StructArrayLayout4f16",re);class Me extends Ra{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new Ze(this.anchorPointX,this.anchorPointY)}}Me.prototype.size=20;class ke extends P{get(t){return new Me(this,t)}}ut("CollisionBoxArray",ke);class Pe extends Ra{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Pe.prototype.size=48;class De extends H{get(t){return new Pe(this,t)}}ut("PlacedSymbolArray",De);class Ge extends Ra{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}Ge.prototype.size=68;class ze extends Q{get(t){return new Ge(this,t)}}ut("SymbolInstanceArray",ze);class lt extends K{getoffsetX(t){return this.float32[1*t+0]}}ut("GlyphOffsetArray",lt);class nt extends X{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}ut("SymbolLineVertexArray",nt);class st extends Ra{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}st.prototype.size=8;class jt extends le{get(t){return new st(this,t)}}ut("FeatureIndexArray",jt);class Gt extends ko{}class Et extends ko{}class xn extends ko{}class nn extends f{}class Qt extends n{}class en extends s{}class rn extends h{}class Cr extends m{}class Kn extends b{}class Vn extends k{}class gr extends I{}class $r extends N{}class Rn extends U{}class yr extends xe{}const Mo=nr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Os}=Mo;class cn{constructor(t=[]){this.segments=t}prepareSegment(t,o,u,g){let w=this.segments[this.segments.length-1];return t>cn.MAX_VERTEX_ARRAY_LENGTH&&Se(`Max vertices per segment is ${cn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!w||w.vertexLength+t>cn.MAX_VERTEX_ARRAY_LENGTH||w.sortKey!==g)&&(w={vertexOffset:o.length,primitiveOffset:u.length,vertexLength:0,primitiveLength:0},g!==void 0&&(w.sortKey=g),this.segments.push(w)),w}get(){return this.segments}destroy(){for(const t of this.segments)for(const o in t.vaos)t.vaos[o].destroy()}static simpleSegment(t,o,u,g){return new cn([{vertexOffset:t,primitiveOffset:o,vertexLength:u,primitiveLength:g,vaos:{},sortKey:0}])}}function on(i,t){return 256*(i=F(Math.floor(i),0,255))+F(Math.floor(t),0,255)}cn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ut("SegmentVector",cn);const Ht=nr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Jt={exports:{}},Nn={exports:{}};Nn.exports=function(i,t){var o,u,g,w,e,r,l,d;for(u=i.length-(o=3&i.length),g=t,e=3432918353,r=461845907,d=0;d<u;)l=255&i.charCodeAt(d)|(255&i.charCodeAt(++d))<<8|(255&i.charCodeAt(++d))<<16|(255&i.charCodeAt(++d))<<24,++d,g=27492+(65535&(w=5*(65535&(g=(g^=l=(65535&(l=(l=(65535&l)*e+(((l>>>16)*e&65535)<<16)&4294967295)<<15|l>>>17))*r+(((l>>>16)*r&65535)<<16)&4294967295)<<13|g>>>19))+((5*(g>>>16)&65535)<<16)&4294967295))+((58964+(w>>>16)&65535)<<16);switch(l=0,o){case 3:l^=(255&i.charCodeAt(d+2))<<16;case 2:l^=(255&i.charCodeAt(d+1))<<8;case 1:g^=l=(65535&(l=(l=(65535&(l^=255&i.charCodeAt(d)))*e+(((l>>>16)*e&65535)<<16)&4294967295)<<15|l>>>17))*r+(((l>>>16)*r&65535)<<16)&4294967295}return g^=i.length,g=2246822507*(65535&(g^=g>>>16))+((2246822507*(g>>>16)&65535)<<16)&4294967295,g=3266489909*(65535&(g^=g>>>13))+((3266489909*(g>>>16)&65535)<<16)&4294967295,(g^=g>>>16)>>>0};var Cn={exports:{}};Cn.exports=function(i,t){for(var o,u=i.length,g=t^u,w=0;u>=4;)o=1540483477*(65535&(o=255&i.charCodeAt(w)|(255&i.charCodeAt(++w))<<8|(255&i.charCodeAt(++w))<<16|(255&i.charCodeAt(++w))<<24))+((1540483477*(o>>>16)&65535)<<16),g=1540483477*(65535&g)+((1540483477*(g>>>16)&65535)<<16)^(o=1540483477*(65535&(o^=o>>>24))+((1540483477*(o>>>16)&65535)<<16)),u-=4,++w;switch(u){case 3:g^=(255&i.charCodeAt(w+2))<<16;case 2:g^=(255&i.charCodeAt(w+1))<<8;case 1:g=1540483477*(65535&(g^=255&i.charCodeAt(w)))+((1540483477*(g>>>16)&65535)<<16)}return g=1540483477*(65535&(g^=g>>>13))+((1540483477*(g>>>16)&65535)<<16),(g^=g>>>15)>>>0};var ei=Nn.exports,Co=Cn.exports;Jt.exports=ei,Jt.exports.murmur3=ei,Jt.exports.murmur2=Co;class Po{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,o,u,g){this.ids.push(ja(t)),this.positions.push(o,u,g)}getPositions(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const o=ja(t);let u=0,g=this.ids.length-1;for(;u<g;){const e=u+g>>1;this.ids[e]>=o?g=e:u=e+1}const w=[];for(;this.ids[u]===o;)w.push({index:this.positions[3*u],start:this.positions[3*u+1],end:this.positions[3*u+2]}),u++;return w}static serialize(t,o){const u=new Float64Array(t.ids),g=new Uint32Array(t.positions);return $s(u,g,0,u.length-1),o&&o.push(u.buffer,g.buffer),{ids:u,positions:g}}static deserialize(t){const o=new Po;return o.ids=t.ids,o.positions=t.positions,o.indexed=!0,o}}function ja(i){const t=+i;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:Jt.exports(String(i))}function $s(i,t,o,u){for(;o<u;){const g=i[o+u>>1];let w=o-1,e=u+1;for(;;){do w++;while(i[w]<g);do e--;while(i[e]>g);if(w>=e)break;Da(i,w,e),Da(t,3*w,3*e),Da(t,3*w+1,3*e+1),Da(t,3*w+2,3*e+2)}e-o<u-e?($s(i,t,o,e),o=e+1):($s(i,t,e+1,u),u=e)}}function Da(i,t,o){const u=i[t];i[t]=i[o],i[o]=u}ut("FeaturePositionMap",Po);class Pr{constructor(t,o){this.gl=t.gl,this.location=o}}class Us extends Pr{constructor(t,o){super(t,o),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class Na extends Pr{constructor(t,o){super(t,o),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class Io extends Pr{constructor(t,o){super(t,o),this.current=G.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const ku=new Float32Array(16);function Mu(i){return[on(255*i.r,255*i.g),on(255*i.b,255*i.a)]}class zl{constructor(t,o,u){this.value=t,this.uniformNames=o.map(g=>`u_${g}`),this.type=u}setUniform(t,o,u){t.set(u.constantOr(this.value))}getBinding(t,o,u){return this.type==="color"?new Io(t,o):new Us(t,o)}}class to{constructor(t,o){this.uniformNames=o.map(u=>`u_${u}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,o){this.pixelRatioFrom=o.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=o.tlbr,this.patternTo=t.tlbr}setUniform(t,o,u,g){const w=g==="u_pattern_to"?this.patternTo:g==="u_pattern_from"?this.patternFrom:g==="u_pixel_ratio_to"?this.pixelRatioTo:g==="u_pixel_ratio_from"?this.pixelRatioFrom:null;w&&t.set(w)}getBinding(t,o,u){return u.substr(0,9)==="u_pattern"?new Na(t,o):new Us(t,o)}}class Ao{constructor(t,o,u,g){this.expression=t,this.type=u,this.maxValue=0,this.paintVertexAttributes=o.map(w=>({name:`a_${w}`,type:"Float32",components:u==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(t,o,u,g,w){const e=this.paintVertexArray.length,r=this.expression.evaluate(new En(0),o,{},g,[],w);this.paintVertexArray.resize(t),this._setPaintValue(e,t,r)}updatePaintArray(t,o,u,g){const w=this.expression.evaluate({zoom:0},u,g);this._setPaintValue(t,o,w)}_setPaintValue(t,o,u){if(this.type==="color"){const g=Mu(u);for(let w=t;w<o;w++)this.paintVertexArray.emplace(w,g[0],g[1])}else{for(let g=t;g<o;g++)this.paintVertexArray.emplace(g,u);this.maxValue=Math.max(this.maxValue,Math.abs(u))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ui{constructor(t,o,u,g,w,e){this.expression=t,this.uniformNames=o.map(r=>`u_${r}_t`),this.type=u,this.useIntegerZoom=g,this.zoom=w,this.maxValue=0,this.paintVertexAttributes=o.map(r=>({name:`a_${r}`,type:"Float32",components:u==="color"?4:2,offset:0})),this.paintVertexArray=new e}populatePaintArray(t,o,u,g,w){const e=this.expression.evaluate(new En(this.zoom),o,{},g,[],w),r=this.expression.evaluate(new En(this.zoom+1),o,{},g,[],w),l=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(l,t,e,r)}updatePaintArray(t,o,u,g){const w=this.expression.evaluate({zoom:this.zoom},u,g),e=this.expression.evaluate({zoom:this.zoom+1},u,g);this._setPaintValue(t,o,w,e)}_setPaintValue(t,o,u,g){if(this.type==="color"){const w=Mu(u),e=Mu(g);for(let r=t;r<o;r++)this.paintVertexArray.emplace(r,w[0],w[1],e[0],e[1])}else{for(let w=t;w<o;w++)this.paintVertexArray.emplace(w,u,g);this.maxValue=Math.max(this.maxValue,Math.abs(u),Math.abs(g))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,o){const u=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,g=F(this.expression.interpolationFactor(u,this.zoom,this.zoom+1),0,1);t.set(g)}getBinding(t,o,u){return new Us(t,o)}}class no{constructor(t,o,u,g,w,e){this.expression=t,this.type=o,this.useIntegerZoom=u,this.zoom=g,this.layerId=e,this.zoomInPaintVertexArray=new w,this.zoomOutPaintVertexArray=new w}populatePaintArray(t,o,u){const g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(g,t,o.patterns&&o.patterns[this.layerId],u)}updatePaintArray(t,o,u,g,w){this._setPaintValues(t,o,u.patterns&&u.patterns[this.layerId],w)}_setPaintValues(t,o,u,g){if(!g||!u)return;const{min:w,mid:e,max:r}=u,l=g[w],d=g[e],x=g[r];if(l&&d&&x)for(let S=t;S<o;S++)this.zoomInPaintVertexArray.emplace(S,d.tl[0],d.tl[1],d.br[0],d.br[1],l.tl[0],l.tl[1],l.br[0],l.br[1],d.pixelRatio,l.pixelRatio),this.zoomOutPaintVertexArray.emplace(S,d.tl[0],d.tl[1],d.br[0],d.br[1],x.tl[0],x.tl[1],x.br[0],x.br[1],d.pixelRatio,x.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,Ht.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,Ht.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Ba{constructor(t,o,u){this.binders={},this._buffers=[];const g=[];for(const w in t.paint._values){if(!u(w))continue;const e=t.paint.get(w);if(!(e instanceof Or&&As(e.property.specification)))continue;const r=gh(w,t.type),l=e.value,d=e.property.specification.type,x=e.property.useIntegerZoom,S=e.property.specification["property-type"],M=S==="cross-faded"||S==="cross-faded-data-driven";if(l.kind==="constant")this.binders[w]=M?new to(l.value,r):new zl(l.value,r,d),g.push(`/u_${w}`);else if(l.kind==="source"||M){const A=Cu(w,d,"source");this.binders[w]=M?new no(l,d,x,o,A,t.id):new Ao(l,r,d,A),g.push(`/a_${w}`)}else{const A=Cu(w,d,"composite");this.binders[w]=new ui(l,r,d,x,o,A),g.push(`/z_${w}`)}}this.cacheKey=g.sort().join("")}getMaxValue(t){const o=this.binders[t];return o instanceof Ao||o instanceof ui?o.maxValue:0}populatePaintArrays(t,o,u,g,w){for(const e in this.binders){const r=this.binders[e];(r instanceof Ao||r instanceof ui||r instanceof no)&&r.populatePaintArray(t,o,u,g,w)}}setConstantPatternPositions(t,o){for(const u in this.binders){const g=this.binders[u];g instanceof to&&g.setConstantPatternPositions(t,o)}}updatePaintArrays(t,o,u,g,w){let e=!1;for(const r in t){const l=o.getPositions(r);for(const d of l){const x=u.feature(d.index);for(const S in this.binders){const M=this.binders[S];if((M instanceof Ao||M instanceof ui||M instanceof no)&&M.expression.isStateDependent===!0){const A=g.paint.get(S);M.expression=A.value,M.updatePaintArray(d.start,d.end,x,t[r],w),e=!0}}}}return e}defines(){const t=[];for(const o in this.binders){const u=this.binders[o];(u instanceof zl||u instanceof to)&&t.push(...u.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return t}getBinderAttributes(){const t=[];for(const o in this.binders){const u=this.binders[o];if(u instanceof Ao||u instanceof ui)for(let g=0;g<u.paintVertexAttributes.length;g++)t.push(u.paintVertexAttributes[g].name);else if(u instanceof no)for(let g=0;g<Ht.members.length;g++)t.push(Ht.members[g].name)}return t}getBinderUniforms(){const t=[];for(const o in this.binders){const u=this.binders[o];if(u instanceof zl||u instanceof to||u instanceof ui)for(const g of u.uniformNames)t.push(g)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,o){const u=[];for(const g in this.binders){const w=this.binders[g];if(w instanceof zl||w instanceof to||w instanceof ui){for(const e of w.uniformNames)if(o[e]){const r=w.getBinding(t,o[e],e);u.push({name:e,property:g,binding:r})}}}return u}setUniforms(t,o,u,g){for(const{name:w,property:e,binding:r}of o)this.binders[e].setUniform(r,g,u.get(e),w)}updatePaintBuffers(t){this._buffers=[];for(const o in this.binders){const u=this.binders[o];if(t&&u instanceof no){const g=t.fromScale===2?u.zoomInPaintVertexBuffer:u.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(u instanceof Ao||u instanceof ui)&&u.paintVertexBuffer&&this._buffers.push(u.paintVertexBuffer)}}upload(t){for(const o in this.binders){const u=this.binders[o];(u instanceof Ao||u instanceof ui||u instanceof no)&&u.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const o=this.binders[t];(o instanceof Ao||o instanceof ui||o instanceof no)&&o.destroy()}}}class as{constructor(t,o,u=()=>!0){this.programConfigurations={};for(const g of t)this.programConfigurations[g.id]=new Ba(g,o,u);this.needsUpload=!1,this._featureMap=new Po,this._bufferOffset=0}populatePaintArrays(t,o,u,g,w,e){for(const r in this.programConfigurations)this.programConfigurations[r].populatePaintArrays(t,o,g,w,e);o.id!==void 0&&this._featureMap.add(o.id,u,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,o,u,g){for(const w of u)this.needsUpload=this.programConfigurations[w.id].updatePaintArrays(t,this._featureMap,o,w,g)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const o in this.programConfigurations)this.programConfigurations[o].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function gh(i,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[i]||[i.replace(`${t}-`,"").replace(/-/g,"_")]}function Cu(i,t,o){const u={color:{source:s,composite:re},number:{source:K,composite:s}},g=function(w){return{"line-pattern":{source:rn,composite:rn},"fill-pattern":{source:rn,composite:rn},"fill-extrusion-pattern":{source:rn,composite:rn}}[w]}(i);return g&&g[o]||u[t][o]}ut("ConstantBinder",zl),ut("CrossFadedConstantBinder",to),ut("SourceExpressionBinder",Ao),ut("CrossFadedCompositeBinder",no),ut("CompositeExpressionBinder",ui),ut("ProgramConfiguration",Ba,{omit:["_buffers"]}),ut("ProgramConfigurationSet",as);var Jn=8192;const Vs=Math.pow(2,14)-1,Ei=-Vs-1;function Ti(i){const t=Jn/i.extent,o=i.loadGeometry();for(let u=0;u<o.length;u++){const g=o[u];for(let w=0;w<g.length;w++){const e=g[w],r=Math.round(e.x*t),l=Math.round(e.y*t);e.x=F(r,Ei,Vs),e.y=F(l,Ei,Vs),(r<e.x||r>e.x+1||l<e.y||l>e.y+1)&&Se("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return o}function ls(i,t){return{type:i.type,id:i.id,properties:i.properties,geometry:t?Ti(i):[]}}function Ac(i,t,o,u,g){i.emplaceBack(2*t+(u+1)/2,2*o+(g+1)/2)}class ro{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Et,this.indexArray=new Rn,this.segments=new cn,this.programConfigurations=new as(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,u){const g=this.layers[0],w=[];let e=null,r=!1;g.type==="circle"&&(e=g.layout.get("circle-sort-key"),r=!e.isConstant());for(const{feature:l,id:d,index:x,sourceLayerIndex:S}of t){const M=this.layers[0]._featureFilter.needGeometry,A=ls(l,M);if(!this.layers[0]._featureFilter.filter(new En(this.zoom),A,u))continue;const L=r?e.evaluate(A,{},u):void 0,V={id:d,properties:l.properties,type:l.type,sourceLayerIndex:S,index:x,geometry:M?A.geometry:Ti(l),patterns:{},sortKey:L};w.push(V)}r&&w.sort((l,d)=>l.sortKey-d.sortKey);for(const l of w){const{geometry:d,index:x,sourceLayerIndex:S}=l,M=t[x].feature;this.addFeature(l,d,x,u),o.featureIndex.insert(M,d,x,S,this.index)}}update(t,o,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Os),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,o,u,g){for(const w of o)for(const e of w){const r=e.x,l=e.y;if(r<0||r>=Jn||l<0||l>=Jn)continue;const d=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),x=d.vertexLength;Ac(this.layoutVertexArray,r,l,-1,-1),Ac(this.layoutVertexArray,r,l,1,-1),Ac(this.layoutVertexArray,r,l,1,1),Ac(this.layoutVertexArray,r,l,-1,1),this.indexArray.emplaceBack(x,x+1,x+2),this.indexArray.emplaceBack(x,x+3,x+2),d.vertexLength+=4,d.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,u,{},g)}}function cs(i,t){for(let o=0;o<i.length;o++)if(zo(t,i[o]))return!0;for(let o=0;o<t.length;o++)if(zo(i,t[o]))return!0;return!!Lo(i,t)}function yh(i,t,o){return!!zo(i,t)||!!Iu(t,i,o)}function vh(i,t){if(i.length===1)return xh(t,i[0]);for(let o=0;o<t.length;o++){const u=t[o];for(let g=0;g<u.length;g++)if(zo(i,u[g]))return!0}for(let o=0;o<i.length;o++)if(xh(t,i[o]))return!0;for(let o=0;o<t.length;o++)if(Lo(i,t[o]))return!0;return!1}function us(i,t,o){if(i.length>1){if(Lo(i,t))return!0;for(let u=0;u<t.length;u++)if(Iu(t[u],i,o))return!0}for(let u=0;u<i.length;u++)if(Iu(i[u],t,o))return!0;return!1}function Lo(i,t){if(i.length===0||t.length===0)return!1;for(let o=0;o<i.length-1;o++){const u=i[o],g=i[o+1];for(let w=0;w<t.length-1;w++)if(Pu(u,g,t[w],t[w+1]))return!0}return!1}function Pu(i,t,o,u){return Ke(i,o,u)!==Ke(t,o,u)&&Ke(i,t,o)!==Ke(i,t,u)}function Iu(i,t,o){const u=o*o;if(t.length===1)return i.distSqr(t[0])<u;for(let g=1;g<t.length;g++)if(Lc(i,t[g-1],t[g])<u)return!0;return!1}function Lc(i,t,o){const u=t.distSqr(o);if(u===0)return i.distSqr(t);const g=((i.x-t.x)*(o.x-t.x)+(i.y-t.y)*(o.y-t.y))/u;return i.distSqr(g<0?t:g>1?o:o.sub(t)._mult(g)._add(t))}function xh(i,t){let o,u,g,w=!1;for(let e=0;e<i.length;e++){o=i[e];for(let r=0,l=o.length-1;r<o.length;l=r++)u=o[r],g=o[l],u.y>t.y!=g.y>t.y&&t.x<(g.x-u.x)*(t.y-u.y)/(g.y-u.y)+u.x&&(w=!w)}return w}function zo(i,t){let o=!1;for(let u=0,g=i.length-1;u<i.length;g=u++){const w=i[u],e=i[g];w.y>t.y!=e.y>t.y&&t.x<(e.x-w.x)*(t.y-w.y)/(e.y-w.y)+w.x&&(o=!o)}return o}function Ro(i,t,o){const u=o[0],g=o[2];if(i.x<u.x&&t.x<u.x||i.x>g.x&&t.x>g.x||i.y<u.y&&t.y<u.y||i.y>g.y&&t.y>g.y)return!1;const w=Ke(i,t,o[0]);return w!==Ke(i,t,o[1])||w!==Ke(i,t,o[2])||w!==Ke(i,t,o[3])}function hs(i,t,o){const u=t.paint.get(i).value;return u.kind==="constant"?u.value:o.programConfigurations.get(t.id).getMaxValue(i)}function Hs(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function jo(i,t,o,u,g){if(!t[0]&&!t[1])return i;const w=Ze.convert(t)._mult(g);o==="viewport"&&w._rotate(-u);const e=[];for(let r=0;r<i.length;r++)e.push(i[r].sub(w));return e}ut("CircleBucket",ro,{omit:["layers"]});const _h=new Xn({"circle-sort-key":new kt(Le.layout_circle["circle-sort-key"])});var Rl={paint:new Xn({"circle-radius":new kt(Le.paint_circle["circle-radius"]),"circle-color":new kt(Le.paint_circle["circle-color"]),"circle-blur":new kt(Le.paint_circle["circle-blur"]),"circle-opacity":new kt(Le.paint_circle["circle-opacity"]),"circle-translate":new xt(Le.paint_circle["circle-translate"]),"circle-translate-anchor":new xt(Le.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new xt(Le.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new xt(Le.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new kt(Le.paint_circle["circle-stroke-width"]),"circle-stroke-color":new kt(Le.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new kt(Le.paint_circle["circle-stroke-opacity"])}),layout:_h},Ur=1e-6,Ir=typeof Float32Array<"u"?Float32Array:Array;function Hn(){var i=new Ir(9);return Ir!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[5]=0,i[6]=0,i[7]=0),i[0]=1,i[4]=1,i[8]=1,i}function jl(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function Au(i,t,o){var u=t[0],g=t[1],w=t[2],e=t[3],r=t[4],l=t[5],d=t[6],x=t[7],S=t[8],M=t[9],A=t[10],L=t[11],V=t[12],q=t[13],ee=t[14],ae=t[15],se=o[0],ge=o[1],Ee=o[2],Re=o[3];return i[0]=se*u+ge*r+Ee*S+Re*V,i[1]=se*g+ge*l+Ee*M+Re*q,i[2]=se*w+ge*d+Ee*A+Re*ee,i[3]=se*e+ge*x+Ee*L+Re*ae,i[4]=(se=o[4])*u+(ge=o[5])*r+(Ee=o[6])*S+(Re=o[7])*V,i[5]=se*g+ge*l+Ee*M+Re*q,i[6]=se*w+ge*d+Ee*A+Re*ee,i[7]=se*e+ge*x+Ee*L+Re*ae,i[8]=(se=o[8])*u+(ge=o[9])*r+(Ee=o[10])*S+(Re=o[11])*V,i[9]=se*g+ge*l+Ee*M+Re*q,i[10]=se*w+ge*d+Ee*A+Re*ee,i[11]=se*e+ge*x+Ee*L+Re*ae,i[12]=(se=o[12])*u+(ge=o[13])*r+(Ee=o[14])*S+(Re=o[15])*V,i[13]=se*g+ge*l+Ee*M+Re*q,i[14]=se*w+ge*d+Ee*A+Re*ee,i[15]=se*e+ge*x+Ee*L+Re*ae,i}Math.hypot||(Math.hypot=function(){for(var i=0,t=arguments.length;t--;)i+=arguments[t]*arguments[t];return Math.sqrt(i)});var Fa,Lu=Au;function zu(){var i=new Ir(3);return Ir!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i}function Gs(i,t,o){var u=new Ir(3);return u[0]=i,u[1]=t,u[2]=o,u}function Bn(i,t,o){var u=t[0],g=t[1],w=t[2],e=t[3];return i[0]=o[0]*u+o[4]*g+o[8]*w+o[12]*e,i[1]=o[1]*u+o[5]*g+o[9]*w+o[13]*e,i[2]=o[2]*u+o[6]*g+o[10]*w+o[14]*e,i[3]=o[3]*u+o[7]*g+o[11]*w+o[15]*e,i}function ur(){var i=new Ir(4);return Ir!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i[3]=1,i}function vr(i,t){const o=Bn([],[i.x,i.y,0,1],t);return new Ze(o[0]/o[3],o[1]/o[3])}zu(),Fa=new Ir(4),Ir!=Float32Array&&(Fa[0]=0,Fa[1]=0,Fa[2]=0,Fa[3]=0),zu(),Gs(1,0,0),Gs(0,1,0),ur(),ur(),Hn(),function(){var i;i=new Ir(2),Ir!=Float32Array&&(i[0]=0,i[1]=0)}();class zc extends ro{}ut("HeatmapBucket",zc,{omit:["layers"]});var Rc={paint:new Xn({"heatmap-radius":new kt(Le.paint_heatmap["heatmap-radius"]),"heatmap-weight":new kt(Le.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new xt(Le.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Fs(Le.paint_heatmap["heatmap-color"]),"heatmap-opacity":new xt(Le.paint_heatmap["heatmap-opacity"])})};function Oa(i,{width:t,height:o},u,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==t*o*u)throw new RangeError(`mismatched image size. expected: ${g.length} but got: ${t*o*u}`)}else g=new Uint8Array(t*o*u);return i.width=t,i.height=o,i.data=g,i}function wd(i,{width:t,height:o},u){if(t===i.width&&o===i.height)return;const g=Oa({},{width:t,height:o},u);Ar(i,g,{x:0,y:0},{x:0,y:0},{width:Math.min(i.width,t),height:Math.min(i.height,o)},u),i.width=t,i.height=o,i.data=g.data}function Ar(i,t,o,u,g,w){if(g.width===0||g.height===0)return t;if(g.width>i.width||g.height>i.height||o.x>i.width-g.width||o.y>i.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>t.width||g.height>t.height||u.x>t.width-g.width||u.y>t.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const e=i.data,r=t.data;if(e===r)throw new Error("srcData equals dstData, so image is already copied");for(let l=0;l<g.height;l++){const d=((o.y+l)*i.width+o.x)*w,x=((u.y+l)*t.width+u.x)*w;for(let S=0;S<g.width*w;S++)r[x+S]=e[d+S]}return t}class $a{constructor(t,o){Oa(this,t,1,o)}resize(t){wd(this,t,1)}clone(){return new $a({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,o,u,g,w){Ar(t,o,u,g,w,1)}}class ti{constructor(t,o){Oa(this,t,4,o)}resize(t){wd(this,t,4)}replace(t,o){o?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new ti({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,o,u,g,w){Ar(t,o,u,g,w,4)}}function Ru(i){const t={},o=i.resolution||256,u=i.clips?i.clips.length:1,g=i.image||new ti({width:o,height:u});if(Math.log(o)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${o}`);const w=(e,r,l)=>{t[i.evaluationKey]=l;const d=i.expression.evaluate(t);g.data[e+r+0]=Math.floor(255*d.r/d.a),g.data[e+r+1]=Math.floor(255*d.g/d.a),g.data[e+r+2]=Math.floor(255*d.b/d.a),g.data[e+r+3]=Math.floor(255*d.a)};if(i.clips)for(let e=0,r=0;e<u;++e,r+=4*o)for(let l=0,d=0;l<o;l++,d+=4){const x=l/(o-1),{start:S,end:M}=i.clips[e];w(r,d,S*(1-x)+M*x)}else for(let e=0,r=0;e<o;e++,r+=4)w(0,r,e/(o-1));return g}ut("AlphaImage",$a),ut("RGBAImage",ti);var Do={paint:new Xn({"hillshade-illumination-direction":new xt(Le.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new xt(Le.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new xt(Le.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new xt(Le.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new xt(Le.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new xt(Le.paint_hillshade["hillshade-accent-color"])})};const Bi=nr([{name:"a_pos",components:2,type:"Int16"}],4),{members:jc}=Bi;var Dl={exports:{}};function Nl(i,t,o){o=o||2;var u,g,w,e,r,l,d,x=t&&t.length,S=x?t[0]*o:i.length,M=wh(i,0,S,o,!0),A=[];if(!M||M.next===M.prev)return A;if(x&&(M=function(V,q,ee,ae){var se,ge,Ee,Re=[];for(se=0,ge=q.length;se<ge;se++)(Ee=wh(V,q[se]*ae,se<ge-1?q[se+1]*ae:V.length,ae,!1))===Ee.next&&(Ee.steiner=!0),Re.push(ju(Ee));for(Re.sort(kd),se=0;se<Re.length;se++)ee=Dc(Re[se],ee);return ee}(i,t,M,o)),i.length>80*o){u=w=i[0],g=e=i[1];for(var L=o;L<S;L+=o)(r=i[L])<u&&(u=r),(l=i[L+1])<g&&(g=l),r>w&&(w=r),l>e&&(e=l);d=(d=Math.max(w-u,e-g))!==0?32767/d:0}return Bl(M,A,o,u,g,d,0),A}function wh(i,t,o,u,g){var w,e;if(g===kh(i,t,o,u)>0)for(w=t;w<o;w+=u)e=Th(w,i[w],i[w+1],e);else for(w=o-u;w>=t;w-=u)e=Th(w,i[w],i[w+1],e);return e&&Nc(e,e.next)&&(Fc(e),e=e.next),e}function qs(i,t){if(!i)return i;t||(t=i);var o,u=i;do if(o=!1,u.steiner||!Nc(u,u.next)&&Gn(u.prev,u,u.next)!==0)u=u.next;else{if(Fc(u),(u=t=u.prev)===u.next)break;o=!0}while(o||u!==t);return t}function Bl(i,t,o,u,g,w,e){if(i){!e&&w&&function(x,S,M,A){var L=x;do L.z===0&&(L.z=Fl(L.x,L.y,S,M,A)),L.prevZ=L.prev,L.nextZ=L.next,L=L.next;while(L!==x);L.prevZ.nextZ=null,L.prevZ=null,function(V){var q,ee,ae,se,ge,Ee,Re,de,oe=1;do{for(ee=V,V=null,ge=null,Ee=0;ee;){for(Ee++,ae=ee,Re=0,q=0;q<oe&&(Re++,ae=ae.nextZ);q++);for(de=oe;Re>0||de>0&&ae;)Re!==0&&(de===0||!ae||ee.z<=ae.z)?(se=ee,ee=ee.nextZ,Re--):(se=ae,ae=ae.nextZ,de--),ge?ge.nextZ=se:V=se,se.prevZ=ge,ge=se;ee=ae}ge.nextZ=null,oe*=2}while(Ee>1)}(L)}(i,u,g,w);for(var r,l,d=i;i.prev!==i.next;)if(r=i.prev,l=i.next,w?Sd(i,u,g,w):bd(i))t.push(r.i/o|0),t.push(i.i/o|0),t.push(l.i/o|0),Fc(i),i=l.next,d=l.next;else if((i=l)===d){e?e===1?Bl(i=Ed(qs(i),t,o),t,o,u,g,w,2):e===2&&Td(i,t,o,u,g,w):Bl(qs(i),t,o,u,g,w,1);break}}}function bd(i){var t=i.prev,o=i,u=i.next;if(Gn(t,o,u)>=0)return!1;for(var g=t.x,w=o.x,e=u.x,r=t.y,l=o.y,d=u.y,x=g<w?g<e?g:e:w<e?w:e,S=r<l?r<d?r:d:l<d?l:d,M=g>w?g>e?g:e:w>e?w:e,A=r>l?r>d?r:d:l>d?l:d,L=u.next;L!==t;){if(L.x>=x&&L.x<=M&&L.y>=S&&L.y<=A&&Ua(g,r,w,l,e,d,L.x,L.y)&&Gn(L.prev,L,L.next)>=0)return!1;L=L.next}return!0}function Sd(i,t,o,u){var g=i.prev,w=i,e=i.next;if(Gn(g,w,e)>=0)return!1;for(var r=g.x,l=w.x,d=e.x,x=g.y,S=w.y,M=e.y,A=r<l?r<d?r:d:l<d?l:d,L=x<S?x<M?x:M:S<M?S:M,V=r>l?r>d?r:d:l>d?l:d,q=x>S?x>M?x:M:S>M?S:M,ee=Fl(A,L,t,o,u),ae=Fl(V,q,t,o,u),se=i.prevZ,ge=i.nextZ;se&&se.z>=ee&&ge&&ge.z<=ae;){if(se.x>=A&&se.x<=V&&se.y>=L&&se.y<=q&&se!==g&&se!==e&&Ua(r,x,l,S,d,M,se.x,se.y)&&Gn(se.prev,se,se.next)>=0||(se=se.prevZ,ge.x>=A&&ge.x<=V&&ge.y>=L&&ge.y<=q&&ge!==g&&ge!==e&&Ua(r,x,l,S,d,M,ge.x,ge.y)&&Gn(ge.prev,ge,ge.next)>=0))return!1;ge=ge.nextZ}for(;se&&se.z>=ee;){if(se.x>=A&&se.x<=V&&se.y>=L&&se.y<=q&&se!==g&&se!==e&&Ua(r,x,l,S,d,M,se.x,se.y)&&Gn(se.prev,se,se.next)>=0)return!1;se=se.prevZ}for(;ge&&ge.z<=ae;){if(ge.x>=A&&ge.x<=V&&ge.y>=L&&ge.y<=q&&ge!==g&&ge!==e&&Ua(r,x,l,S,d,M,ge.x,ge.y)&&Gn(ge.prev,ge,ge.next)>=0)return!1;ge=ge.nextZ}return!0}function Ed(i,t,o){var u=i;do{var g=u.prev,w=u.next.next;!Nc(g,w)&&Sh(g,u,u.next,w)&&$l(g,w)&&$l(w,g)&&(t.push(g.i/o|0),t.push(u.i/o|0),t.push(w.i/o|0),Fc(u),Fc(u.next),u=i=w),u=u.next}while(u!==i);return qs(u)}function Td(i,t,o,u,g,w){var e=i;do{for(var r=e.next.next;r!==e.prev;){if(e.i!==r.i&&bh(e,r)){var l=Eh(e,r);return e=qs(e,e.next),l=qs(l,l.next),Bl(e,t,o,u,g,w,0),void Bl(l,t,o,u,g,w,0)}r=r.next}e=e.next}while(e!==i)}function kd(i,t){return i.x-t.x}function Dc(i,t){var o=function(g,w){var e,r=w,l=g.x,d=g.y,x=-1/0;do{if(d<=r.y&&d>=r.next.y&&r.next.y!==r.y){var S=r.x+(d-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(S<=l&&S>x&&(x=S,e=r.x<r.next.x?r:r.next,S===l))return e}r=r.next}while(r!==w);if(!e)return null;var M,A=e,L=e.x,V=e.y,q=1/0;r=e;do l>=r.x&&r.x>=L&&l!==r.x&&Ua(d<V?l:x,d,L,V,d<V?x:l,d,r.x,r.y)&&(M=Math.abs(d-r.y)/(l-r.x),$l(r,g)&&(M<q||M===q&&(r.x>e.x||r.x===e.x&&Md(e,r)))&&(e=r,q=M)),r=r.next;while(r!==A);return e}(i,t);if(!o)return t;var u=Eh(o,i);return qs(u,u.next),qs(o,o.next)}function Md(i,t){return Gn(i.prev,i,t.prev)<0&&Gn(t.next,i,i.next)<0}function Fl(i,t,o,u,g){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-o)*g|0)|i<<8))|i<<4))|i<<2))|i<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-u)*g|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function ju(i){var t=i,o=i;do(t.x<o.x||t.x===o.x&&t.y<o.y)&&(o=t),t=t.next;while(t!==i);return o}function Ua(i,t,o,u,g,w,e,r){return(g-e)*(t-r)>=(i-e)*(w-r)&&(i-e)*(u-r)>=(o-e)*(t-r)&&(o-e)*(w-r)>=(g-e)*(u-r)}function bh(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!function(o,u){var g=o;do{if(g.i!==o.i&&g.next.i!==o.i&&g.i!==u.i&&g.next.i!==u.i&&Sh(g,g.next,o,u))return!0;g=g.next}while(g!==o);return!1}(i,t)&&($l(i,t)&&$l(t,i)&&function(o,u){var g=o,w=!1,e=(o.x+u.x)/2,r=(o.y+u.y)/2;do g.y>r!=g.next.y>r&&g.next.y!==g.y&&e<(g.next.x-g.x)*(r-g.y)/(g.next.y-g.y)+g.x&&(w=!w),g=g.next;while(g!==o);return w}(i,t)&&(Gn(i.prev,i,t.prev)||Gn(i,t.prev,t))||Nc(i,t)&&Gn(i.prev,i,i.next)>0&&Gn(t.prev,t,t.next)>0)}function Gn(i,t,o){return(t.y-i.y)*(o.x-t.x)-(t.x-i.x)*(o.y-t.y)}function Nc(i,t){return i.x===t.x&&i.y===t.y}function Sh(i,t,o,u){var g=Ol(Gn(i,t,o)),w=Ol(Gn(i,t,u)),e=Ol(Gn(o,u,i)),r=Ol(Gn(o,u,t));return g!==w&&e!==r||!(g!==0||!Bc(i,o,t))||!(w!==0||!Bc(i,u,t))||!(e!==0||!Bc(o,i,u))||!(r!==0||!Bc(o,t,u))}function Bc(i,t,o){return t.x<=Math.max(i.x,o.x)&&t.x>=Math.min(i.x,o.x)&&t.y<=Math.max(i.y,o.y)&&t.y>=Math.min(i.y,o.y)}function Ol(i){return i>0?1:i<0?-1:0}function $l(i,t){return Gn(i.prev,i,i.next)<0?Gn(i,t,i.next)>=0&&Gn(i,i.prev,t)>=0:Gn(i,t,i.prev)<0||Gn(i,i.next,t)<0}function Eh(i,t){var o=new Du(i.i,i.x,i.y),u=new Du(t.i,t.x,t.y),g=i.next,w=t.prev;return i.next=t,t.prev=i,o.next=g,g.prev=o,u.next=o,o.prev=u,w.next=u,u.prev=w,u}function Th(i,t,o,u){var g=new Du(i,t,o);return u?(g.next=u.next,g.prev=u,u.next.prev=g,u.next=g):(g.prev=g,g.next=g),g}function Fc(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Du(i,t,o){this.i=i,this.x=t,this.y=o,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function kh(i,t,o,u){for(var g=0,w=t,e=o-u;w<o;w+=u)g+=(i[e]-i[w])*(i[w+1]+i[e+1]),e=w;return g}function jp(i,t,o,u,g){Mh(i,t,o,u||i.length-1,g||Cd)}function Mh(i,t,o,u,g){for(;u>o;){if(u-o>600){var w=u-o+1,e=t-o+1,r=Math.log(w),l=.5*Math.exp(2*r/3),d=.5*Math.sqrt(r*l*(w-l)/w)*(e-w/2<0?-1:1);Mh(i,t,Math.max(o,Math.floor(t-e*l/w+d)),Math.min(u,Math.floor(t+(w-e)*l/w+d)),g)}var x=i[t],S=o,M=u;for(Ul(i,o,t),g(i[u],x)>0&&Ul(i,o,u);S<M;){for(Ul(i,S,M),S++,M--;g(i[S],x)<0;)S++;for(;g(i[M],x)>0;)M--}g(i[o],x)===0?Ul(i,o,M):Ul(i,++M,u),M<=t&&(o=M+1),t<=M&&(u=M-1)}}function Ul(i,t,o){var u=i[t];i[t]=i[o],i[o]=u}function Cd(i,t){return i<t?-1:i>t?1:0}function Vl(i,t){const o=i.length;if(o<=1)return[i];const u=[];let g,w;for(let e=0;e<o;e++){const r=Je(i[e]);r!==0&&(i[e].area=Math.abs(r),w===void 0&&(w=r<0),w===r<0?(g&&u.push(g),g=[i[e]]):g.push(i[e]))}if(g&&u.push(g),t>1)for(let e=0;e<u.length;e++)u[e].length<=t||(jp(u[e],t,1,u[e].length-1,Dp),u[e]=u[e].slice(0,t));return u}function Dp(i,t){return t.area-i.area}function Ch(i,t,o){const u=o.patternDependencies;let g=!1;for(const w of t){const e=w.paint.get(`${i}-pattern`);e.isConstant()||(g=!0);const r=e.constantOr(null);r&&(g=!0,u[r.to]=!0,u[r.from]=!0)}return g}function Ph(i,t,o,u,g){const w=g.patternDependencies;for(const e of t){const r=e.paint.get(`${i}-pattern`).value;if(r.kind!=="constant"){let l=r.evaluate({zoom:u-1},o,{},g.availableImages),d=r.evaluate({zoom:u},o,{},g.availableImages),x=r.evaluate({zoom:u+1},o,{},g.availableImages);l=l&&l.name?l.name:l,d=d&&d.name?d.name:d,x=x&&x.name?x.name:x,w[l]=!0,w[d]=!0,w[x]=!0,o.patterns[e.id]={min:l,mid:d,max:x}}}return o}Dl.exports=Nl,Dl.exports.default=Nl,Nl.deviation=function(i,t,o,u){var g=t&&t.length,w=Math.abs(kh(i,0,g?t[0]*o:i.length,o));if(g)for(var e=0,r=t.length;e<r;e++)w-=Math.abs(kh(i,t[e]*o,e<r-1?t[e+1]*o:i.length,o));var l=0;for(e=0;e<u.length;e+=3){var d=u[e]*o,x=u[e+1]*o,S=u[e+2]*o;l+=Math.abs((i[d]-i[S])*(i[x+1]-i[d+1])-(i[d]-i[x])*(i[S+1]-i[d+1]))}return w===0&&l===0?0:Math.abs((l-w)/w)},Nl.flatten=function(i){for(var t=i[0][0].length,o={vertices:[],holes:[],dimensions:t},u=0,g=0;g<i.length;g++){for(var w=0;w<i[g].length;w++)for(var e=0;e<t;e++)o.vertices.push(i[g][w][e]);g>0&&o.holes.push(u+=i[g-1].length)}return o};class ki{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new xn,this.indexArray=new Rn,this.indexArray2=new yr,this.programConfigurations=new as(t.layers,t.zoom),this.segments=new cn,this.segments2=new cn,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,u){this.hasPattern=Ch("fill",this.layers,o);const g=this.layers[0].layout.get("fill-sort-key"),w=!g.isConstant(),e=[];for(const{feature:r,id:l,index:d,sourceLayerIndex:x}of t){const S=this.layers[0]._featureFilter.needGeometry,M=ls(r,S);if(!this.layers[0]._featureFilter.filter(new En(this.zoom),M,u))continue;const A=w?g.evaluate(M,{},u,o.availableImages):void 0,L={id:l,properties:r.properties,type:r.type,sourceLayerIndex:x,index:d,geometry:S?M.geometry:Ti(r),patterns:{},sortKey:A};e.push(L)}w&&e.sort((r,l)=>r.sortKey-l.sortKey);for(const r of e){const{geometry:l,index:d,sourceLayerIndex:x}=r;if(this.hasPattern){const S=Ph("fill",this.layers,r,this.zoom,o);this.patternFeatures.push(S)}else this.addFeature(r,l,d,u,{});o.featureIndex.insert(t[d].feature,l,d,x,this.index)}}update(t,o,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,u)}addFeatures(t,o,u){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,o,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,jc),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,o,u,g,w){for(const e of Vl(o,500)){let r=0;for(const A of e)r+=A.length;const l=this.segments.prepareSegment(r,this.layoutVertexArray,this.indexArray),d=l.vertexLength,x=[],S=[];for(const A of e){if(A.length===0)continue;A!==e[0]&&S.push(x.length/2);const L=this.segments2.prepareSegment(A.length,this.layoutVertexArray,this.indexArray2),V=L.vertexLength;this.layoutVertexArray.emplaceBack(A[0].x,A[0].y),this.indexArray2.emplaceBack(V+A.length-1,V),x.push(A[0].x),x.push(A[0].y);for(let q=1;q<A.length;q++)this.layoutVertexArray.emplaceBack(A[q].x,A[q].y),this.indexArray2.emplaceBack(V+q-1,V+q),x.push(A[q].x),x.push(A[q].y);L.vertexLength+=A.length,L.primitiveLength+=A.length}const M=Dl.exports(x,S);for(let A=0;A<M.length;A+=3)this.indexArray.emplaceBack(d+M[A],d+M[A+1],d+M[A+2]);l.vertexLength+=r,l.primitiveLength+=M.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,u,w,g)}}ut("FillBucket",ki,{omit:["layers","patternFeatures"]});const Ih=new Xn({"fill-sort-key":new kt(Le.layout_fill["fill-sort-key"])});var Nu={paint:new Xn({"fill-antialias":new xt(Le.paint_fill["fill-antialias"]),"fill-opacity":new kt(Le.paint_fill["fill-opacity"]),"fill-color":new kt(Le.paint_fill["fill-color"]),"fill-outline-color":new kt(Le.paint_fill["fill-outline-color"]),"fill-translate":new xt(Le.paint_fill["fill-translate"]),"fill-translate-anchor":new xt(Le.paint_fill["fill-translate-anchor"]),"fill-pattern":new Bs(Le.paint_fill["fill-pattern"])}),layout:Ih};const Pd=nr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Id=nr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Ad}=Pd;var No={},Hl=Ze,Bu=Ws;function Ws(i,t,o,u,g){this.properties={},this.extent=o,this.type=0,this._pbf=i,this._geometry=-1,this._keys=u,this._values=g,i.readFields(Np,this,t)}function Np(i,t,o){i==1?t.id=o.readVarint():i==2?function(u,g){for(var w=u.readVarint()+u.pos;u.pos<w;){var e=g._keys[u.readVarint()],r=g._values[u.readVarint()];g.properties[e]=r}}(o,t):i==3?t.type=o.readVarint():i==4&&(t._geometry=o.pos)}function Ld(i){for(var t,o,u=0,g=0,w=i.length,e=w-1;g<w;e=g++)u+=((o=i[e]).x-(t=i[g]).x)*(t.y+o.y);return u}Ws.types=["Unknown","Point","LineString","Polygon"],Ws.prototype.loadGeometry=function(){var i=this._pbf;i.pos=this._geometry;for(var t,o=i.readVarint()+i.pos,u=1,g=0,w=0,e=0,r=[];i.pos<o;){if(g<=0){var l=i.readVarint();u=7&l,g=l>>3}if(g--,u===1||u===2)w+=i.readSVarint(),e+=i.readSVarint(),u===1&&(t&&r.push(t),t=[]),t.push(new Hl(w,e));else{if(u!==7)throw new Error("unknown command "+u);t&&t.push(t[0].clone())}}return t&&r.push(t),r},Ws.prototype.bbox=function(){var i=this._pbf;i.pos=this._geometry;for(var t=i.readVarint()+i.pos,o=1,u=0,g=0,w=0,e=1/0,r=-1/0,l=1/0,d=-1/0;i.pos<t;){if(u<=0){var x=i.readVarint();o=7&x,u=x>>3}if(u--,o===1||o===2)(g+=i.readSVarint())<e&&(e=g),g>r&&(r=g),(w+=i.readSVarint())<l&&(l=w),w>d&&(d=w);else if(o!==7)throw new Error("unknown command "+o)}return[e,l,r,d]},Ws.prototype.toGeoJSON=function(i,t,o){var u,g,w=this.extent*Math.pow(2,o),e=this.extent*i,r=this.extent*t,l=this.loadGeometry(),d=Ws.types[this.type];function x(A){for(var L=0;L<A.length;L++){var V=A[L];A[L]=[360*(V.x+e)/w-180,360/Math.PI*Math.atan(Math.exp((180-360*(V.y+r)/w)*Math.PI/180))-90]}}switch(this.type){case 1:var S=[];for(u=0;u<l.length;u++)S[u]=l[u][0];x(l=S);break;case 2:for(u=0;u<l.length;u++)x(l[u]);break;case 3:for(l=function(A){var L=A.length;if(L<=1)return[A];for(var V,q,ee=[],ae=0;ae<L;ae++){var se=Ld(A[ae]);se!==0&&(q===void 0&&(q=se<0),q===se<0?(V&&ee.push(V),V=[A[ae]]):V.push(A[ae]))}return V&&ee.push(V),ee}(l),u=0;u<l.length;u++)for(g=0;g<l[u].length;g++)x(l[u][g])}l.length===1?l=l[0]:d="Multi"+d;var M={type:"Feature",geometry:{type:d,coordinates:l},properties:this.properties};return"id"in this&&(M.id=this.id),M};var zd=Bu,Ah=Lh;function Lh(i,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(Rd,this,t),this.length=this._features.length}function Rd(i,t,o){i===15?t.version=o.readVarint():i===1?t.name=o.readString():i===5?t.extent=o.readVarint():i===2?t._features.push(o.pos):i===3?t._keys.push(o.readString()):i===4&&t._values.push(function(u){for(var g=null,w=u.readVarint()+u.pos;u.pos<w;){var e=u.readVarint()>>3;g=e===1?u.readString():e===2?u.readFloat():e===3?u.readDouble():e===4?u.readVarint64():e===5?u.readVarint():e===6?u.readSVarint():e===7?u.readBoolean():null}return g}(o))}Lh.prototype.feature=function(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];var t=this._pbf.readVarint()+this._pbf.pos;return new zd(this._pbf,t,this.extent,this._keys,this._values)};var Bp=Ah;function hi(i,t,o){if(i===3){var u=new Bp(o,o.readVarint()+o.pos);u.length&&(t[u.name]=u)}}No.VectorTile=function(i,t){this.layers=i.readFields(hi,{},t)},No.VectorTileFeature=Bu,No.VectorTileLayer=Ah;const ni=No.VectorTileFeature.types,Fu=Math.pow(2,13);function Gl(i,t,o,u,g,w,e,r){i.emplaceBack(t,o,2*Math.floor(u*Fu)+e,g*Fu*2,w*Fu*2,Math.round(r))}class Ou{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new nn,this.centroidVertexArray=new Gt,this.indexArray=new Rn,this.programConfigurations=new as(t.layers,t.zoom),this.segments=new cn,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,u){this.features=[],this.hasPattern=Ch("fill-extrusion",this.layers,o);for(const{feature:g,id:w,index:e,sourceLayerIndex:r}of t){const l=this.layers[0]._featureFilter.needGeometry,d=ls(g,l);if(!this.layers[0]._featureFilter.filter(new En(this.zoom),d,u))continue;const x={id:w,sourceLayerIndex:r,index:e,geometry:l?d.geometry:Ti(g),properties:g.properties,type:g.type,patterns:{}};this.hasPattern?this.features.push(Ph("fill-extrusion",this.layers,x,this.zoom,o)):this.addFeature(x,x.geometry,e,u,{}),o.featureIndex.insert(g,x.geometry,e,r,this.index,!0)}}addFeatures(t,o,u){for(const g of this.features){const{geometry:w}=g;this.addFeature(g,w,g.index,o,u)}}update(t,o,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,u)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ad),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,Id.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(t,o,u,g,w){const e={x:0,y:0,vertexCount:0};for(const r of Vl(o,500)){let l=0;for(const L of r)l+=L.length;let d=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const L of r){if(L.length===0||Dd(L))continue;let V=0;for(let q=0;q<L.length;q++){const ee=L[q];if(q>=1){const ae=L[q-1];if(!jd(ee,ae)){d.vertexLength+4>cn.MAX_VERTEX_ARRAY_LENGTH&&(d=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const se=ee.sub(ae)._perp()._unit(),ge=ae.dist(ee);V+ge>32768&&(V=0),Gl(this.layoutVertexArray,ee.x,ee.y,se.x,se.y,0,0,V),Gl(this.layoutVertexArray,ee.x,ee.y,se.x,se.y,0,1,V),e.x+=2*ee.x,e.y+=2*ee.y,e.vertexCount+=2,V+=ge,Gl(this.layoutVertexArray,ae.x,ae.y,se.x,se.y,0,0,V),Gl(this.layoutVertexArray,ae.x,ae.y,se.x,se.y,0,1,V),e.x+=2*ae.x,e.y+=2*ae.y,e.vertexCount+=2;const Ee=d.vertexLength;this.indexArray.emplaceBack(Ee,Ee+2,Ee+1),this.indexArray.emplaceBack(Ee+1,Ee+2,Ee+3),d.vertexLength+=4,d.primitiveLength+=2}}}}if(d.vertexLength+l>cn.MAX_VERTEX_ARRAY_LENGTH&&(d=this.segments.prepareSegment(l,this.layoutVertexArray,this.indexArray)),ni[t.type]!=="Polygon")continue;const x=[],S=[],M=d.vertexLength;for(const L of r)if(L.length!==0){L!==r[0]&&S.push(x.length/2);for(let V=0;V<L.length;V++){const q=L[V];Gl(this.layoutVertexArray,q.x,q.y,0,0,1,1,0),e.x+=q.x,e.y+=q.y,e.vertexCount+=1,x.push(q.x),x.push(q.y)}}const A=Dl.exports(x,S);for(let L=0;L<A.length;L+=3)this.indexArray.emplaceBack(M+A[L],M+A[L+2],M+A[L+1]);d.primitiveLength+=A.length/3,d.vertexLength+=l}for(let r=0;r<e.vertexCount;r++)this.centroidVertexArray.emplaceBack(Math.floor(e.x/e.vertexCount),Math.floor(e.y/e.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,u,w,g)}}function jd(i,t){return i.x===t.x&&(i.x<0||i.x>Jn)||i.y===t.y&&(i.y<0||i.y>Jn)}function Dd(i){return i.every(t=>t.x<0)||i.every(t=>t.x>Jn)||i.every(t=>t.y<0)||i.every(t=>t.y>Jn)}ut("FillExtrusionBucket",Ou,{omit:["layers","features"]});var zh={paint:new Xn({"fill-extrusion-opacity":new xt(Le["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new kt(Le["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new xt(Le["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new xt(Le["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Bs(Le["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new kt(Le["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new kt(Le["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new xt(Le["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function ql(i,t){return i.x*t.x+i.y*t.y}function $u(i,t){if(i.length===1){let o=0;const u=t[o++];let g;for(;!g||u.equals(g);)if(g=t[o++],!g)return 1/0;for(;o<t.length;o++){const w=t[o],e=i[0],r=g.sub(u),l=w.sub(u),d=e.sub(u),x=ql(r,r),S=ql(r,l),M=ql(l,l),A=ql(d,r),L=ql(d,l),V=x*M-S*S,q=(M*A-S*L)/V,ee=(x*L-S*A)/V,ae=u.z*(1-q-ee)+g.z*q+w.z*ee;if(isFinite(ae))return ae}return 1/0}{let o=1/0;for(const u of t)o=Math.min(o,u.z);return o}}const Nd=nr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Bd}=Nd,Rh=nr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:jh}=Rh,Fd=No.VectorTileFeature.types,Dh=Math.cos(Math.PI/180*37.5),Oc=Math.pow(2,14)/.5;class Nh{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(o=>{this.gradients[o.id]={}}),this.layoutVertexArray=new Qt,this.layoutVertexArray2=new en,this.indexArray=new Rn,this.programConfigurations=new as(t.layers,t.zoom),this.segments=new cn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,u){this.hasPattern=Ch("line",this.layers,o);const g=this.layers[0].layout.get("line-sort-key"),w=!g.isConstant(),e=[];for(const{feature:r,id:l,index:d,sourceLayerIndex:x}of t){const S=this.layers[0]._featureFilter.needGeometry,M=ls(r,S);if(!this.layers[0]._featureFilter.filter(new En(this.zoom),M,u))continue;const A=w?g.evaluate(M,{},u):void 0,L={id:l,properties:r.properties,type:r.type,sourceLayerIndex:x,index:d,geometry:S?M.geometry:Ti(r),patterns:{},sortKey:A};e.push(L)}w&&e.sort((r,l)=>r.sortKey-l.sortKey);for(const r of e){const{geometry:l,index:d,sourceLayerIndex:x}=r;if(this.hasPattern){const S=Ph("line",this.layers,r,this.zoom,o);this.patternFeatures.push(S)}else this.addFeature(r,l,d,u,{});o.featureIndex.insert(t[d].feature,l,d,x,this.index)}}update(t,o,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,u)}addFeatures(t,o,u){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,o,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,jh)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Bd),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,o,u,g,w){const e=this.layers[0].layout,r=e.get("line-join").evaluate(t,{}),l=e.get("line-cap"),d=e.get("line-miter-limit"),x=e.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const S of o)this.addLine(S,t,r,l,d,x);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,u,w,g)}addLine(t,o,u,g,w,e){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ee=0;ee<t.length-1;ee++)this.totalDistance+=t[ee].dist(t[ee+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const r=Fd[o.type]==="Polygon";let l=t.length;for(;l>=2&&t[l-1].equals(t[l-2]);)l--;let d=0;for(;d<l-1&&t[d].equals(t[d+1]);)d++;if(l<(r?3:2))return;u==="bevel"&&(w=1.05);const x=this.overscaling<=16?122880/(512*this.overscaling):0,S=this.segments.prepareSegment(10*l,this.layoutVertexArray,this.indexArray);let M,A,L,V,q;this.e1=this.e2=-1,r&&(M=t[l-2],q=t[d].sub(M)._unit()._perp());for(let ee=d;ee<l;ee++){if(L=ee===l-1?r?t[d+1]:void 0:t[ee+1],L&&t[ee].equals(L))continue;q&&(V=q),M&&(A=M),M=t[ee],q=L?L.sub(M)._unit()._perp():V,V=V||q;let ae=V.add(q);ae.x===0&&ae.y===0||ae._unit();const se=V.x*q.x+V.y*q.y,ge=ae.x*q.x+ae.y*q.y,Ee=ge!==0?1/ge:1/0,Re=2*Math.sqrt(2-2*ge),de=ge<Dh&&A&&L,oe=V.x*q.y-V.y*q.x>0;if(de&&ee>d){const Ie=M.dist(A);if(Ie>2*x){const Fe=M.sub(M.sub(A)._mult(x/Ie)._round());this.updateDistance(A,Fe),this.addCurrentVertex(Fe,V,0,0,S),A=Fe}}const he=A&&L;let Te=he?u:r?"butt":g;if(he&&Te==="round"&&(Ee<e?Te="miter":Ee<=2&&(Te="fakeround")),Te==="miter"&&Ee>w&&(Te="bevel"),Te==="bevel"&&(Ee>2&&(Te="flipbevel"),Ee<w&&(Te="miter")),A&&this.updateDistance(A,M),Te==="miter")ae._mult(Ee),this.addCurrentVertex(M,ae,0,0,S);else if(Te==="flipbevel"){if(Ee>100)ae=q.mult(-1);else{const Ie=Ee*V.add(q).mag()/V.sub(q).mag();ae._perp()._mult(Ie*(oe?-1:1))}this.addCurrentVertex(M,ae,0,0,S),this.addCurrentVertex(M,ae.mult(-1),0,0,S)}else if(Te==="bevel"||Te==="fakeround"){const Ie=-Math.sqrt(Ee*Ee-1),Fe=oe?Ie:0,Ne=oe?0:Ie;if(A&&this.addCurrentVertex(M,V,Fe,Ne,S),Te==="fakeround"){const Ce=Math.round(180*Re/Math.PI/20);for(let ht=1;ht<Ce;ht++){let Ye=ht/Ce;if(Ye!==.5){const Pn=Ye-.5;Ye+=Ye*Pn*(Ye-1)*((1.0904+se*(se*(3.55645-1.43519*se)-3.2452))*Pn*Pn+(.848013+se*(.215638*se-1.06021)))}const Dt=q.sub(V)._mult(Ye)._add(V)._unit()._mult(oe?-1:1);this.addHalfVertex(M,Dt.x,Dt.y,!1,oe,0,S)}}L&&this.addCurrentVertex(M,q,-Fe,-Ne,S)}else if(Te==="butt")this.addCurrentVertex(M,ae,0,0,S);else if(Te==="square"){const Ie=A?1:-1;this.addCurrentVertex(M,ae,Ie,Ie,S)}else Te==="round"&&(A&&(this.addCurrentVertex(M,V,0,0,S),this.addCurrentVertex(M,V,1,1,S,!0)),L&&(this.addCurrentVertex(M,q,-1,-1,S,!0),this.addCurrentVertex(M,q,0,0,S)));if(de&&ee<l-1){const Ie=M.dist(L);if(Ie>2*x){const Fe=M.add(L.sub(M)._mult(x/Ie)._round());this.updateDistance(M,Fe),this.addCurrentVertex(Fe,q,0,0,S),M=Fe}}}}addCurrentVertex(t,o,u,g,w,e=!1){const r=o.y*g-o.x,l=-o.y-o.x*g;this.addHalfVertex(t,o.x+o.y*u,o.y-o.x*u,e,!1,u,w),this.addHalfVertex(t,r,l,e,!0,-g,w),this.distance>Oc/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(t,o,u,g,w,e))}addHalfVertex({x:t,y:o},u,g,w,e,r,l){const d=.5*(this.lineClips?this.scaledDistance*(Oc-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(w?1:0),(o<<1)+(e?1:0),Math.round(63*u)+128,Math.round(63*g)+128,1+(r===0?0:r<0?-1:1)|(63&d)<<2,d>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const x=l.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,x),l.primitiveLength++),e?this.e2=x:this.e1=x}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,o){this.distance+=t.dist(o),this.updateScaledDistance()}}ut("LineBucket",Nh,{omit:["layers","patternFeatures"]});const Od=new Xn({"line-cap":new xt(Le.layout_line["line-cap"]),"line-join":new kt(Le.layout_line["line-join"]),"line-miter-limit":new xt(Le.layout_line["line-miter-limit"]),"line-round-limit":new xt(Le.layout_line["line-round-limit"]),"line-sort-key":new kt(Le.layout_line["line-sort-key"])});var Uu={paint:new Xn({"line-opacity":new kt(Le.paint_line["line-opacity"]),"line-color":new kt(Le.paint_line["line-color"]),"line-translate":new xt(Le.paint_line["line-translate"]),"line-translate-anchor":new xt(Le.paint_line["line-translate-anchor"]),"line-width":new kt(Le.paint_line["line-width"]),"line-gap-width":new kt(Le.paint_line["line-gap-width"]),"line-offset":new kt(Le.paint_line["line-offset"]),"line-blur":new kt(Le.paint_line["line-blur"]),"line-dasharray":new To(Le.paint_line["line-dasharray"]),"line-pattern":new Bs(Le.paint_line["line-pattern"]),"line-gradient":new Fs(Le.paint_line["line-gradient"])}),layout:Od};const Bh=new class extends kt{possiblyEvaluate(i,t){return t=new En(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),super.possiblyEvaluate(i,t)}evaluate(i,t,o,u){return t=ie({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(i,t,o,u)}}(Uu.paint.properties["line-width"].specification);function $c(i,t){return t>0?t+2*i:i}Bh.useIntegerZoom=!0;const ds=nr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Fp=nr([{name:"a_projected_pos",components:3,type:"Float32"}],4);nr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const $d=nr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);nr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Vu=nr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Ud=nr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Vd(i,t,o){return i.sections.forEach(u=>{u.text=function(g,w,e){const r=w.layout.get("text-transform").evaluate(e,{});return r==="uppercase"?g=g.toLocaleUpperCase():r==="lowercase"&&(g=g.toLocaleLowerCase()),hn.applyArabicShaping&&(g=hn.applyArabicShaping(g)),g}(u.text,t,o)}),i}nr([{name:"triangle",components:3,type:"Uint16"}]),nr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),nr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),nr([{type:"Float32",name:"offsetX"}]),nr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const ps={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var gn=24,Fh=Xt,Hd=function(i,t,o,u,g){var w,e,r=8*g-u-1,l=(1<<r)-1,d=l>>1,x=-7,S=g-1,M=-1,A=i[t+S];for(S+=M,w=A&(1<<-x)-1,A>>=-x,x+=r;x>0;w=256*w+i[t+S],S+=M,x-=8);for(e=w&(1<<-x)-1,w>>=-x,x+=u;x>0;e=256*e+i[t+S],S+=M,x-=8);if(w===0)w=1-d;else{if(w===l)return e?NaN:1/0*(A?-1:1);e+=Math.pow(2,u),w-=d}return(A?-1:1)*e*Math.pow(2,w-u)},Uc=function(i,t,o,u,g,w){var e,r,l,d=8*w-g-1,x=(1<<d)-1,S=x>>1,M=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,A=0,L=1,V=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(r=isNaN(t)?1:0,e=x):(e=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-e))<1&&(e--,l*=2),(t+=e+S>=1?M/l:M*Math.pow(2,1-S))*l>=2&&(e++,l/=2),e+S>=x?(r=0,e=x):e+S>=1?(r=(t*l-1)*Math.pow(2,g),e+=S):(r=t*Math.pow(2,S-1)*Math.pow(2,g),e=0));g>=8;i[o+A]=255&r,A+=L,r/=256,g-=8);for(e=e<<g|r,d+=g;d>0;i[o+A]=255&e,A+=L,e/=256,d-=8);i[o+A-L]|=128*V};function Xt(i){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(i)?i:new Uint8Array(i||0),this.pos=0,this.type=0,this.length=this.buf.length}Xt.Varint=0,Xt.Fixed64=1,Xt.Bytes=2,Xt.Fixed32=5;var Zs,_t=4294967296,Va=1/_t,Hu=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Bo(i){return i.type===Xt.Bytes?i.readVarint()+i.pos:i.pos+1}function Wl(i,t,o){return o?4294967296*t+(i>>>0):4294967296*(t>>>0)+(i>>>0)}function Zl(i,t,o){var u=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));o.realloc(u);for(var g=o.pos-1;g>=i;g--)o.buf[g+u]=o.buf[g]}function Gu(i,t){for(var o=0;o<i.length;o++)t.writeVarint(i[o])}function Oh(i,t){for(var o=0;o<i.length;o++)t.writeSVarint(i[o])}function Gd(i,t){for(var o=0;o<i.length;o++)t.writeFloat(i[o])}function qd(i,t){for(var o=0;o<i.length;o++)t.writeDouble(i[o])}function Wd(i,t){for(var o=0;o<i.length;o++)t.writeBoolean(i[o])}function $h(i,t){for(var o=0;o<i.length;o++)t.writeFixed32(i[o])}function Uh(i,t){for(var o=0;o<i.length;o++)t.writeSFixed32(i[o])}function Vr(i,t){for(var o=0;o<i.length;o++)t.writeFixed64(i[o])}function io(i,t){for(var o=0;o<i.length;o++)t.writeSFixed64(i[o])}function oo(i,t){return(i[t]|i[t+1]<<8|i[t+2]<<16)+16777216*i[t+3]}function Ha(i,t,o){i[o]=t,i[o+1]=t>>>8,i[o+2]=t>>>16,i[o+3]=t>>>24}function Vh(i,t){return(i[t]|i[t+1]<<8|i[t+2]<<16)+(i[t+3]<<24)}function so(i,t,o){i===1&&o.readMessage(Zd,t)}function Zd(i,t,o){if(i===3){const{id:u,bitmap:g,width:w,height:e,left:r,top:l,advance:d}=o.readMessage(Fo,{});t.push({id:u,bitmap:new $a({width:w+6,height:e+6},g),metrics:{width:w,height:e,left:r,top:l,advance:d}})}}function Fo(i,t,o){i===1?t.id=o.readVarint():i===2?t.bitmap=o.readBytes():i===3?t.width=o.readVarint():i===4?t.height=o.readVarint():i===5?t.left=o.readSVarint():i===6?t.top=o.readSVarint():i===7&&(t.advance=o.readVarint())}function Xd(i){let t=0,o=0;for(const e of i)t+=e.w*e.h,o=Math.max(o,e.w);i.sort((e,r)=>r.h-e.h);const u=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),o),h:1/0}];let g=0,w=0;for(const e of i)for(let r=u.length-1;r>=0;r--){const l=u[r];if(!(e.w>l.w||e.h>l.h)){if(e.x=l.x,e.y=l.y,w=Math.max(w,e.y+e.h),g=Math.max(g,e.x+e.w),e.w===l.w&&e.h===l.h){const d=u.pop();r<u.length&&(u[r]=d)}else e.h===l.h?(l.x+=e.w,l.w-=e.w):e.w===l.w?(l.y+=e.h,l.h-=e.h):(u.push({x:l.x+e.w,y:l.y,w:l.w-e.w,h:e.h}),l.y+=e.h,l.h-=e.h);break}}return{w:g,h:w,fill:t/(g*w)||0}}Xt.prototype={destroy:function(){this.buf=null},readFields:function(i,t,o){for(o=o||this.length;this.pos<o;){var u=this.readVarint(),g=u>>3,w=this.pos;this.type=7&u,i(g,t,this),this.pos===w&&this.skip(u)}return t},readMessage:function(i,t){return this.readFields(i,t,this.readVarint()+this.pos)},readFixed32:function(){var i=oo(this.buf,this.pos);return this.pos+=4,i},readSFixed32:function(){var i=Vh(this.buf,this.pos);return this.pos+=4,i},readFixed64:function(){var i=oo(this.buf,this.pos)+oo(this.buf,this.pos+4)*_t;return this.pos+=8,i},readSFixed64:function(){var i=oo(this.buf,this.pos)+Vh(this.buf,this.pos+4)*_t;return this.pos+=8,i},readFloat:function(){var i=Hd(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=Hd(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(i){var t,o,u=this.buf;return t=127&(o=u[this.pos++]),o<128?t:(t|=(127&(o=u[this.pos++]))<<7,o<128?t:(t|=(127&(o=u[this.pos++]))<<14,o<128?t:(t|=(127&(o=u[this.pos++]))<<21,o<128?t:function(g,w,e){var r,l,d=e.buf;if(r=(112&(l=d[e.pos++]))>>4,l<128||(r|=(127&(l=d[e.pos++]))<<3,l<128)||(r|=(127&(l=d[e.pos++]))<<10,l<128)||(r|=(127&(l=d[e.pos++]))<<17,l<128)||(r|=(127&(l=d[e.pos++]))<<24,l<128)||(r|=(1&(l=d[e.pos++]))<<31,l<128))return Wl(g,r,w);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(o=u[this.pos]))<<28,i,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var i=this.readVarint();return i%2==1?(i+1)/-2:i/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var i=this.readVarint()+this.pos,t=this.pos;return this.pos=i,i-t>=12&&Hu?function(o,u,g){return Hu.decode(o.subarray(u,g))}(this.buf,t,i):function(o,u,g){for(var w="",e=u;e<g;){var r,l,d,x=o[e],S=null,M=x>239?4:x>223?3:x>191?2:1;if(e+M>g)break;M===1?x<128&&(S=x):M===2?(192&(r=o[e+1]))==128&&(S=(31&x)<<6|63&r)<=127&&(S=null):M===3?(l=o[e+2],(192&(r=o[e+1]))==128&&(192&l)==128&&((S=(15&x)<<12|(63&r)<<6|63&l)<=2047||S>=55296&&S<=57343)&&(S=null)):M===4&&(l=o[e+2],d=o[e+3],(192&(r=o[e+1]))==128&&(192&l)==128&&(192&d)==128&&((S=(15&x)<<18|(63&r)<<12|(63&l)<<6|63&d)<=65535||S>=1114112)&&(S=null)),S===null?(S=65533,M=1):S>65535&&(S-=65536,w+=String.fromCharCode(S>>>10&1023|55296),S=56320|1023&S),w+=String.fromCharCode(S),e+=M}return w}(this.buf,t,i)},readBytes:function(){var i=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,i);return this.pos=i,t},readPackedVarint:function(i,t){if(this.type!==Xt.Bytes)return i.push(this.readVarint(t));var o=Bo(this);for(i=i||[];this.pos<o;)i.push(this.readVarint(t));return i},readPackedSVarint:function(i){if(this.type!==Xt.Bytes)return i.push(this.readSVarint());var t=Bo(this);for(i=i||[];this.pos<t;)i.push(this.readSVarint());return i},readPackedBoolean:function(i){if(this.type!==Xt.Bytes)return i.push(this.readBoolean());var t=Bo(this);for(i=i||[];this.pos<t;)i.push(this.readBoolean());return i},readPackedFloat:function(i){if(this.type!==Xt.Bytes)return i.push(this.readFloat());var t=Bo(this);for(i=i||[];this.pos<t;)i.push(this.readFloat());return i},readPackedDouble:function(i){if(this.type!==Xt.Bytes)return i.push(this.readDouble());var t=Bo(this);for(i=i||[];this.pos<t;)i.push(this.readDouble());return i},readPackedFixed32:function(i){if(this.type!==Xt.Bytes)return i.push(this.readFixed32());var t=Bo(this);for(i=i||[];this.pos<t;)i.push(this.readFixed32());return i},readPackedSFixed32:function(i){if(this.type!==Xt.Bytes)return i.push(this.readSFixed32());var t=Bo(this);for(i=i||[];this.pos<t;)i.push(this.readSFixed32());return i},readPackedFixed64:function(i){if(this.type!==Xt.Bytes)return i.push(this.readFixed64());var t=Bo(this);for(i=i||[];this.pos<t;)i.push(this.readFixed64());return i},readPackedSFixed64:function(i){if(this.type!==Xt.Bytes)return i.push(this.readSFixed64());var t=Bo(this);for(i=i||[];this.pos<t;)i.push(this.readSFixed64());return i},skip:function(i){var t=7&i;if(t===Xt.Varint)for(;this.buf[this.pos++]>127;);else if(t===Xt.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Xt.Fixed32)this.pos+=4;else{if(t!==Xt.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(i,t){this.writeVarint(i<<3|t)},realloc:function(i){for(var t=this.length||16;t<this.pos+i;)t*=2;if(t!==this.length){var o=new Uint8Array(t);o.set(this.buf),this.buf=o,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(i){this.realloc(4),Ha(this.buf,i,this.pos),this.pos+=4},writeSFixed32:function(i){this.realloc(4),Ha(this.buf,i,this.pos),this.pos+=4},writeFixed64:function(i){this.realloc(8),Ha(this.buf,-1&i,this.pos),Ha(this.buf,Math.floor(i*Va),this.pos+4),this.pos+=8},writeSFixed64:function(i){this.realloc(8),Ha(this.buf,-1&i,this.pos),Ha(this.buf,Math.floor(i*Va),this.pos+4),this.pos+=8},writeVarint:function(i){(i=+i||0)>268435455||i<0?function(t,o){var u,g;if(t>=0?(u=t%4294967296|0,g=t/4294967296|0):(g=~(-t/4294967296),4294967295^(u=~(-t%4294967296))?u=u+1|0:(u=0,g=g+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");o.realloc(10),function(w,e,r){r.buf[r.pos++]=127&w|128,w>>>=7,r.buf[r.pos++]=127&w|128,w>>>=7,r.buf[r.pos++]=127&w|128,w>>>=7,r.buf[r.pos++]=127&w|128,r.buf[r.pos]=127&(w>>>=7)}(u,0,o),function(w,e){var r=(7&w)<<4;e.buf[e.pos++]|=r|((w>>>=3)?128:0),w&&(e.buf[e.pos++]=127&w|((w>>>=7)?128:0),w&&(e.buf[e.pos++]=127&w|((w>>>=7)?128:0),w&&(e.buf[e.pos++]=127&w|((w>>>=7)?128:0),w&&(e.buf[e.pos++]=127&w|((w>>>=7)?128:0),w&&(e.buf[e.pos++]=127&w)))))}(g,o)}(i,this):(this.realloc(4),this.buf[this.pos++]=127&i|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=i>>>7&127))))},writeSVarint:function(i){this.writeVarint(i<0?2*-i-1:2*i)},writeBoolean:function(i){this.writeVarint(!!i)},writeString:function(i){i=String(i),this.realloc(4*i.length),this.pos++;var t=this.pos;this.pos=function(u,g,w){for(var e,r,l=0;l<g.length;l++){if((e=g.charCodeAt(l))>55295&&e<57344){if(!r){e>56319||l+1===g.length?(u[w++]=239,u[w++]=191,u[w++]=189):r=e;continue}if(e<56320){u[w++]=239,u[w++]=191,u[w++]=189,r=e;continue}e=r-55296<<10|e-56320|65536,r=null}else r&&(u[w++]=239,u[w++]=191,u[w++]=189,r=null);e<128?u[w++]=e:(e<2048?u[w++]=e>>6|192:(e<65536?u[w++]=e>>12|224:(u[w++]=e>>18|240,u[w++]=e>>12&63|128),u[w++]=e>>6&63|128),u[w++]=63&e|128)}return w}(this.buf,i,this.pos);var o=this.pos-t;o>=128&&Zl(t,o,this),this.pos=t-1,this.writeVarint(o),this.pos+=o},writeFloat:function(i){this.realloc(4),Uc(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),Uc(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(i){var t=i.length;this.writeVarint(t),this.realloc(t);for(var o=0;o<t;o++)this.buf[this.pos++]=i[o]},writeRawMessage:function(i,t){this.pos++;var o=this.pos;i(t,this);var u=this.pos-o;u>=128&&Zl(o,u,this),this.pos=o-1,this.writeVarint(u),this.pos+=u},writeMessage:function(i,t,o){this.writeTag(i,Xt.Bytes),this.writeRawMessage(t,o)},writePackedVarint:function(i,t){t.length&&this.writeMessage(i,Gu,t)},writePackedSVarint:function(i,t){t.length&&this.writeMessage(i,Oh,t)},writePackedBoolean:function(i,t){t.length&&this.writeMessage(i,Wd,t)},writePackedFloat:function(i,t){t.length&&this.writeMessage(i,Gd,t)},writePackedDouble:function(i,t){t.length&&this.writeMessage(i,qd,t)},writePackedFixed32:function(i,t){t.length&&this.writeMessage(i,$h,t)},writePackedSFixed32:function(i,t){t.length&&this.writeMessage(i,Uh,t)},writePackedFixed64:function(i,t){t.length&&this.writeMessage(i,Vr,t)},writePackedSFixed64:function(i,t){t.length&&this.writeMessage(i,io,t)},writeBytesField:function(i,t){this.writeTag(i,Xt.Bytes),this.writeBytes(t)},writeFixed32Field:function(i,t){this.writeTag(i,Xt.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(i,t){this.writeTag(i,Xt.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(i,t){this.writeTag(i,Xt.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(i,t){this.writeTag(i,Xt.Fixed64),this.writeSFixed64(t)},writeVarintField:function(i,t){this.writeTag(i,Xt.Varint),this.writeVarint(t)},writeSVarintField:function(i,t){this.writeTag(i,Xt.Varint),this.writeSVarint(t)},writeStringField:function(i,t){this.writeTag(i,Xt.Bytes),this.writeString(t)},writeFloatField:function(i,t){this.writeTag(i,Xt.Fixed32),this.writeFloat(t)},writeDoubleField:function(i,t){this.writeTag(i,Xt.Fixed64),this.writeDouble(t)},writeBooleanField:function(i,t){this.writeVarintField(i,!!t)}};class qu{constructor(t,{pixelRatio:o,version:u,stretchX:g,stretchY:w,content:e}){this.paddedRect=t,this.pixelRatio=o,this.stretchX=g,this.stretchY=w,this.content=e,this.version=u}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Hh{constructor(t,o){const u={},g={};this.haveRenderCallbacks=[];const w=[];this.addImages(t,u,w),this.addImages(o,g,w);const{w:e,h:r}=Xd(w),l=new ti({width:e||1,height:r||1});for(const d in t){const x=t[d],S=u[d].paddedRect;ti.copy(x.data,l,{x:0,y:0},{x:S.x+1,y:S.y+1},x.data)}for(const d in o){const x=o[d],S=g[d].paddedRect,M=S.x+1,A=S.y+1,L=x.data.width,V=x.data.height;ti.copy(x.data,l,{x:0,y:0},{x:M,y:A},x.data),ti.copy(x.data,l,{x:0,y:V-1},{x:M,y:A-1},{width:L,height:1}),ti.copy(x.data,l,{x:0,y:0},{x:M,y:A+V},{width:L,height:1}),ti.copy(x.data,l,{x:L-1,y:0},{x:M-1,y:A},{width:1,height:V}),ti.copy(x.data,l,{x:0,y:0},{x:M+L,y:A},{width:1,height:V})}this.image=l,this.iconPositions=u,this.patternPositions=g}addImages(t,o,u){for(const g in t){const w=t[g],e={x:0,y:0,w:w.data.width+2,h:w.data.height+2};u.push(e),o[g]=new qu(e,w),w.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(t,o){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const u in t.updatedImages)this.patchUpdatedImage(this.iconPositions[u],t.getImage(u),o),this.patchUpdatedImage(this.patternPositions[u],t.getImage(u),o)}patchUpdatedImage(t,o,u){if(!t||!o||t.version===o.version)return;t.version=o.version;const[g,w]=t.tl;u.update(o.data,void 0,{x:g,y:w})}}ut("ImagePosition",qu),ut("ImageAtlas",Hh),c.WritingMode=void 0,(Zs=c.WritingMode||(c.WritingMode={}))[Zs.none=0]="none",Zs[Zs.horizontal=1]="horizontal",Zs[Zs.vertical=2]="vertical",Zs[Zs.horizontalOnly=3]="horizontalOnly";const Vc=-17;class Xl{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,o){const u=new Xl;return u.scale=t||1,u.fontStack=o,u}static forImage(t){const o=new Xl;return o.imageName=t,o}}class Kl{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,o){const u=new Kl;for(let g=0;g<t.sections.length;g++){const w=t.sections[g];w.image?u.addImageSection(w):u.addTextSection(w,o)}return u}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let o="";for(let u=0;u<t.length;u++){const g=t.charCodeAt(u+1)||null,w=t.charCodeAt(u-1)||null;o+=g&&Cc(g)&&!ps[t[u+1]]||w&&Cc(w)&&!ps[t[u-1]]||!ps[t[u]]?t[u]:ps[t[u]]}return o}(this.text)}trim(){let t=0;for(let u=0;u<this.text.length&&Jl[this.text.charCodeAt(u)];u++)t++;let o=this.text.length;for(let u=this.text.length-1;u>=0&&u>=t&&Jl[this.text.charCodeAt(u)];u--)o--;this.text=this.text.substring(t,o),this.sectionIndex=this.sectionIndex.slice(t,o)}substring(t,o){const u=new Kl;return u.text=this.text.substring(t,o),u.sectionIndex=this.sectionIndex.slice(t,o),u.sections=this.sections,u}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((t,o)=>Math.max(t,this.sections[o].scale),0)}addTextSection(t,o){this.text+=t.text,this.sections.push(Xl.forText(t.scale,t.fontStack||o));const u=this.sections.length-1;for(let g=0;g<t.text.length;++g)this.sectionIndex.push(u)}addImageSection(t){const o=t.image?t.image.name:"";if(o.length===0)return void Se("Can't add FormattedSection with an empty image.");const u=this.getNextImageSectionCharCode();u?(this.text+=String.fromCharCode(u),this.sections.push(Xl.forImage(o)),this.sectionIndex.push(this.sections.length-1)):Se("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Ga(i,t,o,u,g,w,e,r,l,d,x,S,M,A,L,V){const q=Kl.fromFeature(i,g);let ee;S===c.WritingMode.vertical&&q.verticalizePunctuation();const{processBidirectionalText:ae,processStyledBidirectionalText:se}=hn;if(ae&&q.sections.length===1){ee=[];const Re=ae(q.toString(),Xs(q,d,w,t,u,A,L));for(const de of Re){const oe=new Kl;oe.text=de,oe.sections=q.sections;for(let he=0;he<de.length;he++)oe.sectionIndex.push(0);ee.push(oe)}}else if(se){ee=[];const Re=se(q.text,q.sectionIndex,Xs(q,d,w,t,u,A,L));for(const de of Re){const oe=new Kl;oe.text=de[0],oe.sectionIndex=de[1],oe.sections=q.sections,ee.push(oe)}}else ee=function(Re,de){const oe=[],he=Re.text;let Te=0;for(const Ie of de)oe.push(Re.substring(Te,Ie)),Te=Ie;return Te<he.length&&oe.push(Re.substring(Te,he.length)),oe}(q,Xs(q,d,w,t,u,A,L));const ge=[],Ee={positionedLines:ge,text:q.toString(),top:x[1],bottom:x[1],left:x[0],right:x[0],writingMode:S,iconsInText:!1,verticalizable:!1};return function(Re,de,oe,he,Te,Ie,Fe,Ne,Ce,ht,Ye,Dt){let Pn=0,Fn=Vc,_r=0,co=0;const qr=Ne==="right"?1:Ne==="left"?0:.5;let dr=0;for(const pr of Te){pr.trim();const Zr=pr.getMaxScale(),ii=(Zr-1)*gn,fi={positionedGlyphs:[],lineOffset:0};Re.positionedLines[dr]=fi;const Pi=fi.positionedGlyphs;let Ii=0;if(!pr.length()){Fn+=Ie,++dr;continue}for(let Dr=0;Dr<pr.length();Dr++){const sn=pr.getSection(Dr),Oi=pr.getSectionIndex(Dr),Xr=pr.getCharCode(Dr);let oi=0,Vo=null,gs=null,ys=null,nl=gn;const Ho=!(Ce===c.WritingMode.horizontal||!Ye&&!bo(Xr)||Ye&&(Jl[Xr]||(jr=Xr,it.Arabic(jr)||it["Arabic Supplement"](jr)||it["Arabic Extended-A"](jr)||it["Arabic Presentation Forms-A"](jr)||it["Arabic Presentation Forms-B"](jr))));if(sn.imageName){const uo=he[sn.imageName];if(!uo)continue;ys=sn.imageName,Re.iconsInText=Re.iconsInText||!0,gs=uo.paddedRect;const Ai=uo.displaySize;sn.scale=sn.scale*gn/Dt,Vo={width:Ai[0],height:Ai[1],left:1,top:-3,advance:Ho?Ai[1]:Ai[0]},oi=ii+(gn-Ai[1]*sn.scale),nl=Vo.advance;const rl=Ho?Ai[0]*sn.scale-gn*Zr:Ai[1]*sn.scale-gn*Zr;rl>0&&rl>Ii&&(Ii=rl)}else{const uo=oe[sn.fontStack],Ai=uo&&uo[Xr];if(Ai&&Ai.rect)gs=Ai.rect,Vo=Ai.metrics;else{const rl=de[sn.fontStack],Yh=rl&&rl[Xr];if(!Yh)continue;Vo=Yh.metrics}oi=(Zr-sn.scale)*gn}Ho?(Re.verticalizable=!0,Pi.push({glyph:Xr,imageName:ys,x:Pn,y:Fn+oi,vertical:Ho,scale:sn.scale,fontStack:sn.fontStack,sectionIndex:Oi,metrics:Vo,rect:gs}),Pn+=nl*sn.scale+ht):(Pi.push({glyph:Xr,imageName:ys,x:Pn,y:Fn+oi,vertical:Ho,scale:sn.scale,fontStack:sn.fontStack,sectionIndex:Oi,metrics:Vo,rect:gs}),Pn+=Vo.advance*sn.scale+ht)}Pi.length!==0&&(_r=Math.max(Pn-ht,_r),Hc(Pi,0,Pi.length-1,qr,Ii)),Pn=0;const Zn=Ie*Zr+Ii;fi.lineOffset=Math.max(Ii,ii),Fn+=Zn,co=Math.max(Zn,co),++dr}var jr;const Wr=Fn-Vc,{horizontalAlign:ri,verticalAlign:Ci}=sr(Fe);(function(pr,Zr,ii,fi,Pi,Ii,Zn,Dr,sn){const Oi=(Zr-ii)*Pi;let Xr=0;Xr=Ii!==Zn?-Dr*fi-Vc:(-fi*sn+.5)*Zn;for(const oi of pr)for(const Vo of oi.positionedGlyphs)Vo.x+=Oi,Vo.y+=Xr})(Re.positionedLines,qr,ri,Ci,_r,co,Ie,Wr,Te.length),Re.top+=-Ci*Wr,Re.bottom=Re.top+Wr,Re.left+=-ri*_r,Re.right=Re.left+_r}(Ee,t,o,u,ee,e,r,l,S,d,M,V),!function(Re){for(const de of Re)if(de.positionedGlyphs.length!==0)return!1;return!0}(ge)&&Ee}const Jl={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Fi={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function yn(i,t,o,u,g,w){if(t.imageName){const e=u[t.imageName];return e?e.displaySize[0]*t.scale*gn/w+g:0}{const e=o[t.fontStack],r=e&&e[i];return r?r.metrics.advance*t.scale+g:0}}function xr(i,t,o,u){const g=Math.pow(i-t,2);return u?i<t?g/2:2*g:g+Math.abs(o)*o}function hr(i,t,o){let u=0;return i===10&&(u-=1e4),o&&(u+=150),i!==40&&i!==65288||(u+=50),t!==41&&t!==65289||(u+=50),u}function Lr(i,t,o,u,g,w){let e=null,r=xr(t,o,g,w);for(const l of u){const d=xr(t-l.x,o,g,w)+l.badness;d<=r&&(e=l,r=d)}return{index:i,x:t,priorBreak:e,badness:r}}function di(i){return i?di(i.priorBreak).concat(i.index):[]}function Xs(i,t,o,u,g,w,e){if(w!=="point")return[];if(!i)return[];const r=[],l=function(M,A,L,V,q,ee){let ae=0;for(let se=0;se<M.length();se++){const ge=M.getSection(se);ae+=yn(M.getCharCode(se),ge,V,q,A,ee)}return ae/Math.max(1,Math.ceil(ae/L))}(i,t,o,u,g,e),d=i.text.indexOf("")>=0;let x=0;for(let M=0;M<i.length();M++){const A=i.getSection(M),L=i.getCharCode(M);if(Jl[L]||(x+=yn(L,A,u,g,t,e)),M<i.length()-1){const V=!((S=L)<11904||!(it["Bopomofo Extended"](S)||it.Bopomofo(S)||it["CJK Compatibility Forms"](S)||it["CJK Compatibility Ideographs"](S)||it["CJK Compatibility"](S)||it["CJK Radicals Supplement"](S)||it["CJK Strokes"](S)||it["CJK Symbols and Punctuation"](S)||it["CJK Unified Ideographs Extension A"](S)||it["CJK Unified Ideographs"](S)||it["Enclosed CJK Letters and Months"](S)||it["Halfwidth and Fullwidth Forms"](S)||it.Hiragana(S)||it["Ideographic Description Characters"](S)||it["Kangxi Radicals"](S)||it["Katakana Phonetic Extensions"](S)||it.Katakana(S)||it["Vertical Forms"](S)||it["Yi Radicals"](S)||it["Yi Syllables"](S)));(Fi[L]||V||A.imageName)&&r.push(Lr(M+1,x,l,r,hr(L,i.getCharCode(M+1),V&&d),!1))}}var S;return di(Lr(i.length(),x,l,r,0,!0))}function sr(i){let t=.5,o=.5;switch(i){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(i){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:t,verticalAlign:o}}function Hc(i,t,o,u,g){if(!u&&!g)return;const w=i[o],e=(i[o].x+w.metrics.advance*w.scale)*u;for(let r=t;r<=o;r++)i[r].x-=e,i[r].y+=g}function qa(i,t,o){const{horizontalAlign:u,verticalAlign:g}=sr(o),w=t[0]-i.displaySize[0]*u,e=t[1]-i.displaySize[1]*g;return{image:i,top:e,bottom:e+i.displaySize[1],left:w,right:w+i.displaySize[0]}}function Gc(i,t,o,u,g,w){const e=i.image;let r;if(e.content){const q=e.content,ee=e.pixelRatio||1;r=[q[0]/ee,q[1]/ee,e.displaySize[0]-q[2]/ee,e.displaySize[1]-q[3]/ee]}const l=t.left*w,d=t.right*w;let x,S,M,A;o==="width"||o==="both"?(A=g[0]+l-u[3],S=g[0]+d+u[1]):(A=g[0]+(l+d-e.displaySize[0])/2,S=A+e.displaySize[0]);const L=t.top*w,V=t.bottom*w;return o==="height"||o==="both"?(x=g[1]+L-u[0],M=g[1]+V+u[2]):(x=g[1]+(L+V-e.displaySize[1])/2,M=x+e.displaySize[1]),{image:e,top:x,right:S,bottom:M,left:A,collisionPadding:r}}const ao=128;function Yl(i,t){const{expression:o}=t;if(o.kind==="constant")return{kind:"constant",layoutSize:o.evaluate(new En(i+1))};if(o.kind==="source")return{kind:"source"};{const{zoomStops:u,interpolationType:g}=o;let w=0;for(;w<u.length&&u[w]<=i;)w++;w=Math.max(0,w-1);let e=w;for(;e<u.length&&u[e]<i+1;)e++;e=Math.min(u.length-1,e);const r=u[w],l=u[e];return o.kind==="composite"?{kind:"composite",minZoom:r,maxZoom:l,interpolationType:g}:{kind:"camera",minZoom:r,maxZoom:l,minSize:o.evaluate(new En(r)),maxSize:o.evaluate(new En(l)),interpolationType:g}}}class ar extends Ze{constructor(t,o,u,g){super(t,o),this.angle=u,g!==void 0&&(this.segment=g)}clone(){return new ar(this.x,this.y,this.angle,this.segment)}}function Wu(i,t,o,u,g){if(t.segment===void 0)return!0;let w=t,e=t.segment+1,r=0;for(;r>-o/2;){if(e--,e<0)return!1;r-=i[e].dist(w),w=i[e]}r+=i[e].dist(i[e+1]),e++;const l=[];let d=0;for(;r<o/2;){const x=i[e],S=i[e+1];if(!S)return!1;let M=i[e-1].angleTo(x)-x.angleTo(S);for(M=Math.abs((M+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:r,angleDelta:M}),d+=M;r-l[0].distance>u;)d-=l.shift().angleDelta;if(d>g)return!1;e++,r+=x.dist(S)}return!0}function Wa(i){let t=0;for(let o=0;o<i.length-1;o++)t+=i[o].dist(i[o+1]);return t}function Oo(i,t,o){return i?.6*t*o:0}function qc(i,t){return Math.max(i?i.right-i.left:0,t?t.right-t.left:0)}function Gh(i,t,o,u,g,w){const e=Oo(o,g,w),r=qc(o,u)*w;let l=0;const d=Wa(i)/2;for(let x=0;x<i.length-1;x++){const S=i[x],M=i[x+1],A=S.dist(M);if(l+A>d){const L=(d-l)/A,V=zn(S.x,M.x,L),q=zn(S.y,M.y,L),ee=new ar(V,q,M.angleTo(S),x);return ee._round(),!e||Wu(i,ee,r,e,t)?ee:void 0}l+=A}}function Ks(i,t,o,u,g,w,e,r,l){const d=Oo(u,w,e),x=qc(u,g),S=x*e,M=i[0].x===0||i[0].x===l||i[0].y===0||i[0].y===l;return t-S<t/4&&(t=S+t/4),Wc(i,M?t/2*r%t:(x/2+2*w)*e*r%t,t,d,o,S,M,!1,l)}function Wc(i,t,o,u,g,w,e,r,l){const d=w/2,x=Wa(i);let S=0,M=t-o,A=[];for(let L=0;L<i.length-1;L++){const V=i[L],q=i[L+1],ee=V.dist(q),ae=q.angleTo(V);for(;M+o<S+ee;){M+=o;const se=(M-S)/ee,ge=zn(V.x,q.x,se),Ee=zn(V.y,q.y,se);if(ge>=0&&ge<l&&Ee>=0&&Ee<l&&M-d>=0&&M+d<=x){const Re=new ar(ge,Ee,ae,L);Re._round(),u&&!Wu(i,Re,w,u,g)||A.push(Re)}}S+=ee}return r||A.length||e||(A=Wc(i,S/2,o,u,g,w,e,!0,l)),A}function fs(i,t,o,u,g){const w=[];for(let e=0;e<i.length;e++){const r=i[e];let l;for(let d=0;d<r.length-1;d++){let x=r[d],S=r[d+1];x.x<t&&S.x<t||(x.x<t?x=new Ze(t,x.y+(t-x.x)/(S.x-x.x)*(S.y-x.y))._round():S.x<t&&(S=new Ze(t,x.y+(t-x.x)/(S.x-x.x)*(S.y-x.y))._round()),x.y<o&&S.y<o||(x.y<o?x=new Ze(x.x+(o-x.y)/(S.y-x.y)*(S.x-x.x),o)._round():S.y<o&&(S=new Ze(x.x+(o-x.y)/(S.y-x.y)*(S.x-x.x),o)._round()),x.x>=u&&S.x>=u||(x.x>=u?x=new Ze(u,x.y+(u-x.x)/(S.x-x.x)*(S.y-x.y))._round():S.x>=u&&(S=new Ze(u,x.y+(u-x.x)/(S.x-x.x)*(S.y-x.y))._round()),x.y>=g&&S.y>=g||(x.y>=g?x=new Ze(x.x+(g-x.y)/(S.y-x.y)*(S.x-x.x),g)._round():S.y>=g&&(S=new Ze(x.x+(g-x.y)/(S.y-x.y)*(S.x-x.x),g)._round()),l&&x.equals(l[l.length-1])||(l=[x],w.push(l)),l.push(S)))))}}return w}function Zc(i,t,o,u){const g=[],w=i.image,e=w.pixelRatio,r=w.paddedRect.w-2,l=w.paddedRect.h-2,d=i.right-i.left,x=i.bottom-i.top,S=w.stretchX||[[0,r]],M=w.stretchY||[[0,l]],A=(Ie,Fe)=>Ie+Fe[1]-Fe[0],L=S.reduce(A,0),V=M.reduce(A,0),q=r-L,ee=l-V;let ae=0,se=L,ge=0,Ee=V,Re=0,de=q,oe=0,he=ee;if(w.content&&u){const Ie=w.content;ae=Js(S,0,Ie[0]),ge=Js(M,0,Ie[1]),se=Js(S,Ie[0],Ie[2]),Ee=Js(M,Ie[1],Ie[3]),Re=Ie[0]-ae,oe=Ie[1]-ge,de=Ie[2]-Ie[0]-se,he=Ie[3]-Ie[1]-Ee}const Te=(Ie,Fe,Ne,Ce)=>{const ht=Za(Ie.stretch-ae,se,d,i.left),Ye=Xa(Ie.fixed-Re,de,Ie.stretch,L),Dt=Za(Fe.stretch-ge,Ee,x,i.top),Pn=Xa(Fe.fixed-oe,he,Fe.stretch,V),Fn=Za(Ne.stretch-ae,se,d,i.left),_r=Xa(Ne.fixed-Re,de,Ne.stretch,L),co=Za(Ce.stretch-ge,Ee,x,i.top),qr=Xa(Ce.fixed-oe,he,Ce.stretch,V),dr=new Ze(ht,Dt),jr=new Ze(Fn,Dt),Wr=new Ze(Fn,co),ri=new Ze(ht,co),Ci=new Ze(Ye/e,Pn/e),pr=new Ze(_r/e,qr/e),Zr=t*Math.PI/180;if(Zr){const Pi=Math.sin(Zr),Ii=Math.cos(Zr),Zn=[Ii,-Pi,Pi,Ii];dr._matMult(Zn),jr._matMult(Zn),ri._matMult(Zn),Wr._matMult(Zn)}const ii=Ie.stretch+Ie.fixed,fi=Fe.stretch+Fe.fixed;return{tl:dr,tr:jr,bl:ri,br:Wr,tex:{x:w.paddedRect.x+1+ii,y:w.paddedRect.y+1+fi,w:Ne.stretch+Ne.fixed-ii,h:Ce.stretch+Ce.fixed-fi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ci,pixelOffsetBR:pr,minFontScaleX:de/e/d,minFontScaleY:he/e/x,isSDF:o}};if(u&&(w.stretchX||w.stretchY)){const Ie=Zu(S,q,L),Fe=Zu(M,ee,V);for(let Ne=0;Ne<Ie.length-1;Ne++){const Ce=Ie[Ne],ht=Ie[Ne+1];for(let Ye=0;Ye<Fe.length-1;Ye++)g.push(Te(Ce,Fe[Ye],ht,Fe[Ye+1]))}}else g.push(Te({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:r+1},{fixed:0,stretch:l+1}));return g}function Js(i,t,o){let u=0;for(const g of i)u+=Math.max(t,Math.min(o,g[1]))-Math.max(t,Math.min(o,g[0]));return u}function Zu(i,t,o){const u=[{fixed:-1,stretch:0}];for(const[g,w]of i){const e=u[u.length-1];u.push({fixed:g-e.stretch,stretch:e.stretch}),u.push({fixed:g-e.stretch,stretch:e.stretch+(w-g)})}return u.push({fixed:t+1,stretch:o}),u}function Za(i,t,o,u){return i/t*o+u}function Xa(i,t,o,u){return i-t*o/u}ut("Anchor",ar);class zr{constructor(t,o,u,g,w,e,r,l,d,x){if(this.boxStartIndex=t.length,d){let S=e.top,M=e.bottom;const A=e.collisionPadding;A&&(S-=A[1],M+=A[3]);let L=M-S;L>0&&(L=Math.max(10,L),this.circleDiameter=L)}else{let S=e.top*r-l[0],M=e.bottom*r+l[2],A=e.left*r-l[3],L=e.right*r+l[1];const V=e.collisionPadding;if(V&&(A-=V[0]*r,S-=V[1]*r,L+=V[2]*r,M+=V[3]*r),x){const q=new Ze(A,S),ee=new Ze(L,S),ae=new Ze(A,M),se=new Ze(L,M),ge=x*Math.PI/180;q._rotate(ge),ee._rotate(ge),ae._rotate(ge),se._rotate(ge),A=Math.min(q.x,ee.x,ae.x,se.x),L=Math.max(q.x,ee.x,ae.x,se.x),S=Math.min(q.y,ee.y,ae.y,se.y),M=Math.max(q.y,ee.y,ae.y,se.y)}t.emplaceBack(o.x,o.y,A,S,L,M,u,g,w)}this.boxEndIndex=t.length}}class Ys{constructor(t=[],o=lo){if(this.data=t,this.length=this.data.length,this.compare=o,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const t=this.data[0],o=this.data.pop();return this.length--,this.length>0&&(this.data[0]=o,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:o,compare:u}=this,g=o[t];for(;t>0;){const w=t-1>>1,e=o[w];if(u(g,e)>=0)break;o[t]=e,t=w}o[t]=g}_down(t){const{data:o,compare:u}=this,g=this.length>>1,w=o[t];for(;t<g;){let e=1+(t<<1),r=o[e];const l=e+1;if(l<this.length&&u(o[l],r)<0&&(e=l,r=o[l]),u(r,w)>=0)break;o[t]=r,t=e}o[t]=w}}function lo(i,t){return i<t?-1:i>t?1:0}function pi(i,t=1,o=!1){let u=1/0,g=1/0,w=-1/0,e=-1/0;const r=i[0];for(let A=0;A<r.length;A++){const L=r[A];(!A||L.x<u)&&(u=L.x),(!A||L.y<g)&&(g=L.y),(!A||L.x>w)&&(w=L.x),(!A||L.y>e)&&(e=L.y)}const l=Math.min(w-u,e-g);let d=l/2;const x=new Ys([],Kd);if(l===0)return new Ze(u,g);for(let A=u;A<w;A+=l)for(let L=g;L<e;L+=l)x.push(new Qs(A+d,L+d,d,i));let S=function(A){let L=0,V=0,q=0;const ee=A[0];for(let ae=0,se=ee.length,ge=se-1;ae<se;ge=ae++){const Ee=ee[ae],Re=ee[ge],de=Ee.x*Re.y-Re.x*Ee.y;V+=(Ee.x+Re.x)*de,q+=(Ee.y+Re.y)*de,L+=3*de}return new Qs(V/L,q/L,0,A)}(i),M=x.length;for(;x.length;){const A=x.pop();(A.d>S.d||!S.d)&&(S=A,o&&console.log("found best %d after %d probes",Math.round(1e4*A.d)/1e4,M)),A.max-S.d<=t||(d=A.h/2,x.push(new Qs(A.p.x-d,A.p.y-d,d,i)),x.push(new Qs(A.p.x+d,A.p.y-d,d,i)),x.push(new Qs(A.p.x-d,A.p.y+d,d,i)),x.push(new Qs(A.p.x+d,A.p.y+d,d,i)),M+=4)}return o&&(console.log(`num probes: ${M}`),console.log(`best distance: ${S.d}`)),S.p}function Kd(i,t){return t.max-i.max}function Qs(i,t,o,u){this.p=new Ze(i,t),this.h=o,this.d=function(g,w){let e=!1,r=1/0;for(let l=0;l<w.length;l++){const d=w[l];for(let x=0,S=d.length,M=S-1;x<S;M=x++){const A=d[x],L=d[M];A.y>g.y!=L.y>g.y&&g.x<(L.x-A.x)*(g.y-A.y)/(L.y-A.y)+A.x&&(e=!e),r=Math.min(r,Lc(g,A,L))}}return(e?1:-1)*Math.sqrt(r)}(this.p,u),this.max=this.d+this.h*Math.SQRT2}const Xc=Number.POSITIVE_INFINITY;function Jd(i,t){return t[1]!==Xc?function(o,u,g){let w=0,e=0;switch(u=Math.abs(u),g=Math.abs(g),o){case"top-right":case"top-left":case"top":e=g-7;break;case"bottom-right":case"bottom-left":case"bottom":e=7-g}switch(o){case"top-right":case"bottom-right":case"right":w=-u;break;case"top-left":case"bottom-left":case"left":w=u}return[w,e]}(i,t[0],t[1]):function(o,u){let g=0,w=0;u<0&&(u=0);const e=u/Math.sqrt(2);switch(o){case"top-right":case"top-left":w=e-7;break;case"bottom-right":case"bottom-left":w=7-e;break;case"bottom":w=7-u;break;case"top":w=u-7}switch(o){case"top-right":case"bottom-right":g=-e;break;case"top-left":case"bottom-left":g=e;break;case"left":g=u;break;case"right":g=-u}return[g,w]}(i,t[0])}function $o(i){switch(i){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Yd(i,t,o,u,g,w,e,r,l,d,x){let S=w.textMaxSize.evaluate(t,{});S===void 0&&(S=e);const M=i.layers[0].layout,A=M.get("icon-offset").evaluate(t,{},x),L=Xu(o.horizontal),V=e/24,q=i.tilePixelRatio*V,ee=i.tilePixelRatio*S/24,ae=i.tilePixelRatio*r,se=i.tilePixelRatio*M.get("symbol-spacing"),ge=M.get("text-padding")*i.tilePixelRatio,Ee=function(Ce,ht,Ye,Dt=1){const Pn=Ce.get("icon-padding").evaluate(ht,{},Ye),Fn=Pn&&Pn.values;return[Fn[0]*Dt,Fn[1]*Dt,Fn[2]*Dt,Fn[3]*Dt]}(M,t,x,i.tilePixelRatio),Re=M.get("text-max-angle")/180*Math.PI,de=M.get("text-rotation-alignment")!=="viewport"&&M.get("symbol-placement")!=="point",oe=M.get("icon-rotation-alignment")==="map"&&M.get("symbol-placement")!=="point",he=M.get("symbol-placement"),Te=se/2,Ie=M.get("icon-text-fit");let Fe;u&&Ie!=="none"&&(i.allowVerticalPlacement&&o.vertical&&(Fe=Gc(u,o.vertical,Ie,M.get("icon-text-fit-padding"),A,V)),L&&(u=Gc(u,L,Ie,M.get("icon-text-fit-padding"),A,V)));const Ne=(Ce,ht)=>{ht.x<0||ht.x>=Jn||ht.y<0||ht.y>=Jn||function(Ye,Dt,Pn,Fn,_r,co,qr,dr,jr,Wr,ri,Ci,pr,Zr,ii,fi,Pi,Ii,Zn,Dr,sn,Oi,Xr,oi,Vo){const gs=Ye.addToLineVertexArray(Dt,Pn);let ys,nl,Ho,uo,Ai=0,rl=0,Yh=0,Kf=0,Hp=-1,Gp=-1;const il={};let Jf=Jt.exports(""),qp=0,Wp=0;if(dr._unevaluatedLayout.getValue("text-radial-offset")===void 0?[qp,Wp]=dr.layout.get("text-offset").evaluate(sn,{},oi).map(Li=>Li*gn):(qp=dr.layout.get("text-radial-offset").evaluate(sn,{},oi)*gn,Wp=Xc),Ye.allowVerticalPlacement&&Fn.vertical){const Li=dr.layout.get("text-rotate").evaluate(sn,{},oi)+90;Ho=new zr(jr,Dt,Wr,ri,Ci,Fn.vertical,pr,Zr,ii,Li),qr&&(uo=new zr(jr,Dt,Wr,ri,Ci,qr,Pi,Ii,ii,Li))}if(_r){const Li=dr.layout.get("icon-rotate").evaluate(sn,{}),na=dr.layout.get("icon-text-fit")!=="none",Qh=Zc(_r,Li,Xr,na),ed=qr?Zc(qr,Li,Xr,na):void 0;nl=new zr(jr,Dt,Wr,ri,Ci,_r,Pi,Ii,!1,Li),Ai=4*Qh.length;const em=Ye.iconSizeData;let tu=null;em.kind==="source"?(tu=[ao*dr.layout.get("icon-size").evaluate(sn,{})],tu[0]>Uo&&Se(`${Ye.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):em.kind==="composite"&&(tu=[ao*Oi.compositeIconSizes[0].evaluate(sn,{},oi),ao*Oi.compositeIconSizes[1].evaluate(sn,{},oi)],(tu[0]>Uo||tu[1]>Uo)&&Se(`${Ye.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Ye.addSymbols(Ye.icon,Qh,tu,Dr,Zn,sn,c.WritingMode.none,Dt,gs.lineStartIndex,gs.lineLength,-1,oi),Hp=Ye.icon.placedSymbolArray.length-1,ed&&(rl=4*ed.length,Ye.addSymbols(Ye.icon,ed,tu,Dr,Zn,sn,c.WritingMode.vertical,Dt,gs.lineStartIndex,gs.lineLength,-1,oi),Gp=Ye.icon.placedSymbolArray.length-1)}const Yf=Object.keys(Fn.horizontal);for(const Li of Yf){const na=Fn.horizontal[Li];if(!ys){Jf=Jt.exports(na.text);const ed=dr.layout.get("text-rotate").evaluate(sn,{},oi);ys=new zr(jr,Dt,Wr,ri,Ci,na,pr,Zr,ii,ed)}const Qh=na.positionedLines.length===1;if(Yh+=ea(Ye,Dt,na,co,dr,ii,sn,fi,gs,Fn.vertical?c.WritingMode.horizontal:c.WritingMode.horizontalOnly,Qh?Yf:[Li],il,Hp,Oi,oi),Qh)break}Fn.vertical&&(Kf+=ea(Ye,Dt,Fn.vertical,co,dr,ii,sn,fi,gs,c.WritingMode.vertical,["vertical"],il,Gp,Oi,oi));const O0=ys?ys.boxStartIndex:Ye.collisionBoxArray.length,$0=ys?ys.boxEndIndex:Ye.collisionBoxArray.length,U0=Ho?Ho.boxStartIndex:Ye.collisionBoxArray.length,V0=Ho?Ho.boxEndIndex:Ye.collisionBoxArray.length,H0=nl?nl.boxStartIndex:Ye.collisionBoxArray.length,G0=nl?nl.boxEndIndex:Ye.collisionBoxArray.length,q0=uo?uo.boxStartIndex:Ye.collisionBoxArray.length,W0=uo?uo.boxEndIndex:Ye.collisionBoxArray.length;let vs=-1;const ap=(Li,na)=>Li&&Li.circleDiameter?Math.max(Li.circleDiameter,na):na;vs=ap(ys,vs),vs=ap(Ho,vs),vs=ap(nl,vs),vs=ap(uo,vs);const Qf=vs>-1?1:0;Qf&&(vs*=Vo/gn),Ye.glyphOffsetArray.length>=Ja.MAX_GLYPHS&&Se("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),sn.sortKey!==void 0&&Ye.addToSortKeyRanges(Ye.symbolInstances.length,sn.sortKey),Ye.symbolInstances.emplaceBack(Dt.x,Dt.y,il.right>=0?il.right:-1,il.center>=0?il.center:-1,il.left>=0?il.left:-1,il.vertical||-1,Hp,Gp,Jf,O0,$0,U0,V0,H0,G0,q0,W0,Wr,Yh,Kf,Ai,rl,Qf,0,pr,qp,Wp,vs)}(i,ht,Ce,o,u,g,Fe,i.layers[0],i.collisionBoxArray,t.index,t.sourceLayerIndex,i.index,q,[ge,ge,ge,ge],de,l,ae,Ee,oe,A,t,w,d,x,e)};if(he==="line")for(const Ce of fs(t.geometry,0,0,Jn,Jn)){const ht=Ks(Ce,se,Re,o.vertical||L,u,24,ee,i.overscaling,Jn);for(const Ye of ht){const Dt=L;Dt&&Ka(i,Dt.text,Te,Ye)||Ne(Ce,Ye)}}else if(he==="line-center"){for(const Ce of t.geometry)if(Ce.length>1){const ht=Gh(Ce,Re,o.vertical||L,u,24,ee);ht&&Ne(Ce,ht)}}else if(t.type==="Polygon")for(const Ce of Vl(t.geometry,0)){const ht=pi(Ce,16);Ne(Ce[0],new ar(ht.x,ht.y,0))}else if(t.type==="LineString")for(const Ce of t.geometry)Ne(Ce,new ar(Ce[0].x,Ce[0].y,0));else if(t.type==="Point")for(const Ce of t.geometry)for(const ht of Ce)Ne([ht],new ar(ht.x,ht.y,0))}const Uo=32640;function ea(i,t,o,u,g,w,e,r,l,d,x,S,M,A,L){const V=function(ae,se,ge,Ee,Re,de,oe,he){const Te=Ee.layout.get("text-rotate").evaluate(de,{})*Math.PI/180,Ie=[];for(const Fe of se.positionedLines)for(const Ne of Fe.positionedGlyphs){if(!Ne.rect)continue;const Ce=Ne.rect||{};let ht=4,Ye=!0,Dt=1,Pn=0;const Fn=(Re||he)&&Ne.vertical,_r=Ne.metrics.advance*Ne.scale/2;if(he&&se.verticalizable){const Zn=(Ne.scale-1)*gn,Dr=(gn-Ne.metrics.width*Ne.scale)/2;Pn=Fe.lineOffset/2-(Ne.imageName?-Dr:Zn)}if(Ne.imageName){const Zn=oe[Ne.imageName];Ye=Zn.sdf,Dt=Zn.pixelRatio,ht=1/Dt}const co=Re?[Ne.x+_r,Ne.y]:[0,0];let qr=Re?[0,0]:[Ne.x+_r+ge[0],Ne.y+ge[1]-Pn],dr=[0,0];Fn&&(dr=qr,qr=[0,0]);const jr=(Ne.metrics.left-ht)*Ne.scale-_r+qr[0],Wr=(-Ne.metrics.top-ht)*Ne.scale+qr[1],ri=jr+Ce.w*Ne.scale/Dt,Ci=Wr+Ce.h*Ne.scale/Dt,pr=new Ze(jr,Wr),Zr=new Ze(ri,Wr),ii=new Ze(jr,Ci),fi=new Ze(ri,Ci);if(Fn){const Zn=new Ze(-_r,_r-Vc),Dr=-Math.PI/2,sn=12-_r,Oi=new Ze(22-sn,-(Ne.imageName?sn:0)),Xr=new Ze(...dr);pr._rotateAround(Dr,Zn)._add(Oi)._add(Xr),Zr._rotateAround(Dr,Zn)._add(Oi)._add(Xr),ii._rotateAround(Dr,Zn)._add(Oi)._add(Xr),fi._rotateAround(Dr,Zn)._add(Oi)._add(Xr)}if(Te){const Zn=Math.sin(Te),Dr=Math.cos(Te),sn=[Dr,-Zn,Zn,Dr];pr._matMult(sn),Zr._matMult(sn),ii._matMult(sn),fi._matMult(sn)}const Pi=new Ze(0,0),Ii=new Ze(0,0);Ie.push({tl:pr,tr:Zr,bl:ii,br:fi,tex:Ce,writingMode:se.writingMode,glyphOffset:co,sectionIndex:Ne.sectionIndex,isSDF:Ye,pixelOffsetTL:Pi,pixelOffsetBR:Ii,minFontScaleX:0,minFontScaleY:0})}return Ie}(0,o,r,g,w,e,u,i.allowVerticalPlacement),q=i.textSizeData;let ee=null;q.kind==="source"?(ee=[ao*g.layout.get("text-size").evaluate(e,{})],ee[0]>Uo&&Se(`${i.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):q.kind==="composite"&&(ee=[ao*A.compositeTextSizes[0].evaluate(e,{},L),ao*A.compositeTextSizes[1].evaluate(e,{},L)],(ee[0]>Uo||ee[1]>Uo)&&Se(`${i.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),i.addSymbols(i.text,V,ee,r,w,e,d,t,l.lineStartIndex,l.lineLength,M,L);for(const ae of x)S[ae]=i.text.placedSymbolArray.length-1;return 4*V.length}function Xu(i){for(const t in i)return i[t];return null}function Ka(i,t,o,u){const g=i.compareText;if(t in g){const w=g[t];for(let e=w.length-1;e>=0;e--)if(u.dist(w[e])<o)return!0}else g[t]=[];return g[t].push(u),!1}const Qd=No.VectorTileFeature.types,ep=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ql(i,t,o,u,g,w,e,r,l,d,x,S,M){const A=r?Math.min(Uo,Math.round(r[0])):0,L=r?Math.min(Uo,Math.round(r[1])):0;i.emplaceBack(t,o,Math.round(32*u),Math.round(32*g),w,e,(A<<1)+(l?1:0),L,16*d,16*x,256*S,256*M)}function ec(i,t,o){i.emplaceBack(t.x,t.y,o),i.emplaceBack(t.x,t.y,o),i.emplaceBack(t.x,t.y,o),i.emplaceBack(t.x,t.y,o)}function Op(i){for(const t of i.sections)if(Su(t.text))return!0;return!1}class qh{constructor(t){this.layoutVertexArray=new Cr,this.indexArray=new Rn,this.programConfigurations=t,this.segments=new cn,this.dynamicLayoutVertexArray=new Kn,this.opacityVertexArray=new Vn,this.placedSymbolArray=new De}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(t,o,u,g){this.isEmpty()||(u&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ds.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Fp.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,ep,!0),this.opacityVertexBuffer.itemSize=1),(u||g)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}ut("SymbolBuffers",qh);class Ku{constructor(t,o,u){this.layoutVertexArray=new t,this.layoutAttributes=o,this.indexArray=new u,this.segments=new cn,this.collisionVertexArray=new $r}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,$d.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}ut("CollisionBuffers",Ku);class Ja{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(e=>e.id),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=jl([]),this.placementViewportMatrix=jl([]);const o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Yl(this.zoom,o["text-size"]),this.iconSizeData=Yl(this.zoom,o["icon-size"]);const u=this.layers[0].layout,g=u.get("symbol-sort-key"),w=u.get("symbol-z-order");this.canOverlap=qn(u,"text-overlap","text-allow-overlap")!=="never"||qn(u,"icon-overlap","icon-allow-overlap")!=="never"||u.get("text-ignore-placement")||u.get("icon-ignore-placement"),this.sortFeaturesByKey=w!=="viewport-y"&&!g.isConstant(),this.sortFeaturesByY=(w==="viewport-y"||w==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,u.get("symbol-placement")==="point"&&(this.writingModes=u.get("text-writing-mode").map(e=>c.WritingMode[e])),this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id),this.sourceID=t.sourceID}createArrays(){this.text=new qh(new as(this.layers,this.zoom,t=>/^text/.test(t))),this.icon=new qh(new as(this.layers,this.zoom,t=>/^icon/.test(t))),this.glyphOffsetArray=new lt,this.lineVertexArray=new nt,this.symbolInstances=new ze}calculateGlyphDependencies(t,o,u,g,w){for(let e=0;e<t.length;e++)if(o[t.charCodeAt(e)]=!0,(u||g)&&w){const r=ps[t.charAt(e)];r&&(o[r.charCodeAt(0)]=!0)}}populate(t,o,u){const g=this.layers[0],w=g.layout,e=w.get("text-font"),r=w.get("text-field"),l=w.get("icon-image"),d=(r.value.kind!=="constant"||r.value.value instanceof me&&!r.value.value.isEmpty()||r.value.value.toString().length>0)&&(e.value.kind!=="constant"||e.value.value.length>0),x=l.value.kind!=="constant"||!!l.value.value||Object.keys(l.parameters).length>0,S=w.get("symbol-sort-key");if(this.features=[],!d&&!x)return;const M=o.iconDependencies,A=o.glyphDependencies,L=o.availableImages,V=new En(this.zoom);for(const{feature:q,id:ee,index:ae,sourceLayerIndex:se}of t){const ge=g._featureFilter.needGeometry,Ee=ls(q,ge);if(!g._featureFilter.filter(V,Ee,u))continue;let Re,de;if(ge||(Ee.geometry=Ti(q)),d){const he=g.getValueAndResolveTokens("text-field",Ee,u,L),Te=me.factory(he);Op(Te)&&(this.hasRTLText=!0),(!this.hasRTLText||Pl()==="unavailable"||this.hasRTLText&&hn.isParsed())&&(Re=Vd(Te,g,Ee))}if(x){const he=g.getValueAndResolveTokens("icon-image",Ee,u,L);de=he instanceof ue?he:ue.fromString(he)}if(!Re&&!de)continue;const oe=this.sortFeaturesByKey?S.evaluate(Ee,{},u):void 0;if(this.features.push({id:ee,text:Re,icon:de,index:ae,sourceLayerIndex:se,geometry:Ee.geometry,properties:q.properties,type:Qd[q.type],sortKey:oe}),de&&(M[de.name]=!0),Re){const he=e.evaluate(Ee,{},u).join(","),Te=w.get("text-rotation-alignment")!=="viewport"&&w.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(c.WritingMode.vertical)>=0;for(const Ie of Re.sections)if(Ie.image)M[Ie.image.name]=!0;else{const Fe=wo(Re.toString()),Ne=Ie.fontStack||he,Ce=A[Ne]=A[Ne]||{};this.calculateGlyphDependencies(Ie.text,Ce,Te,this.allowVerticalPlacement,Fe)}}}w.get("symbol-placement")==="line"&&(this.features=function(q){const ee={},ae={},se=[];let ge=0;function Ee(he){se.push(q[he]),ge++}function Re(he,Te,Ie){const Fe=ae[he];return delete ae[he],ae[Te]=Fe,se[Fe].geometry[0].pop(),se[Fe].geometry[0]=se[Fe].geometry[0].concat(Ie[0]),Fe}function de(he,Te,Ie){const Fe=ee[Te];return delete ee[Te],ee[he]=Fe,se[Fe].geometry[0].shift(),se[Fe].geometry[0]=Ie[0].concat(se[Fe].geometry[0]),Fe}function oe(he,Te,Ie){const Fe=Ie?Te[0][Te[0].length-1]:Te[0][0];return`${he}:${Fe.x}:${Fe.y}`}for(let he=0;he<q.length;he++){const Te=q[he],Ie=Te.geometry,Fe=Te.text?Te.text.toString():null;if(!Fe){Ee(he);continue}const Ne=oe(Fe,Ie),Ce=oe(Fe,Ie,!0);if(Ne in ae&&Ce in ee&&ae[Ne]!==ee[Ce]){const ht=de(Ne,Ce,Ie),Ye=Re(Ne,Ce,se[ht].geometry);delete ee[Ne],delete ae[Ce],ae[oe(Fe,se[Ye].geometry,!0)]=Ye,se[ht].geometry=null}else Ne in ae?Re(Ne,Ce,Ie):Ce in ee?de(Ne,Ce,Ie):(Ee(he),ee[Ne]=ge-1,ae[Ce]=ge-1)}return se.filter(he=>he.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((q,ee)=>q.sortKey-ee.sortKey)}update(t,o,u){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,o,this.layers,u),this.icon.programConfigurations.updatePaintArrays(t,o,this.layers,u))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,o){const u=this.lineVertexArray.length;if(t.segment!==void 0){let g=t.dist(o[t.segment+1]),w=t.dist(o[t.segment]);const e={};for(let r=t.segment+1;r<o.length;r++)e[r]={x:o[r].x,y:o[r].y,tileUnitDistanceFromAnchor:g},r<o.length-1&&(g+=o[r+1].dist(o[r]));for(let r=t.segment||0;r>=0;r--)e[r]={x:o[r].x,y:o[r].y,tileUnitDistanceFromAnchor:w},r>0&&(w+=o[r-1].dist(o[r]));for(let r=0;r<o.length;r++){const l=e[r];this.lineVertexArray.emplaceBack(l.x,l.y,l.tileUnitDistanceFromAnchor)}}return{lineStartIndex:u,lineLength:this.lineVertexArray.length-u}}addSymbols(t,o,u,g,w,e,r,l,d,x,S,M){const A=t.indexArray,L=t.layoutVertexArray,V=t.segments.prepareSegment(4*o.length,L,A,this.canOverlap?e.sortKey:void 0),q=this.glyphOffsetArray.length,ee=V.vertexLength,ae=this.allowVerticalPlacement&&r===c.WritingMode.vertical?Math.PI/2:0,se=e.text&&e.text.sections;for(let ge=0;ge<o.length;ge++){const{tl:Ee,tr:Re,bl:de,br:oe,tex:he,pixelOffsetTL:Te,pixelOffsetBR:Ie,minFontScaleX:Fe,minFontScaleY:Ne,glyphOffset:Ce,isSDF:ht,sectionIndex:Ye}=o[ge],Dt=V.vertexLength,Pn=Ce[1];Ql(L,l.x,l.y,Ee.x,Pn+Ee.y,he.x,he.y,u,ht,Te.x,Te.y,Fe,Ne),Ql(L,l.x,l.y,Re.x,Pn+Re.y,he.x+he.w,he.y,u,ht,Ie.x,Te.y,Fe,Ne),Ql(L,l.x,l.y,de.x,Pn+de.y,he.x,he.y+he.h,u,ht,Te.x,Ie.y,Fe,Ne),Ql(L,l.x,l.y,oe.x,Pn+oe.y,he.x+he.w,he.y+he.h,u,ht,Ie.x,Ie.y,Fe,Ne),ec(t.dynamicLayoutVertexArray,l,ae),A.emplaceBack(Dt,Dt+1,Dt+2),A.emplaceBack(Dt+1,Dt+2,Dt+3),V.vertexLength+=4,V.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ce[0]),ge!==o.length-1&&Ye===o[ge+1].sectionIndex||t.programConfigurations.populatePaintArrays(L.length,e,e.index,{},M,se&&se[Ye])}t.placedSymbolArray.emplaceBack(l.x,l.y,q,this.glyphOffsetArray.length-q,ee,d,x,l.segment,u?u[0]:0,u?u[1]:0,g[0],g[1],r,0,!1,0,S)}_addCollisionDebugVertex(t,o,u,g,w,e){return o.emplaceBack(0,0),t.emplaceBack(u.x,u.y,g,w,Math.round(e.x),Math.round(e.y))}addCollisionDebugVertices(t,o,u,g,w,e,r){const l=w.segments.prepareSegment(4,w.layoutVertexArray,w.indexArray),d=l.vertexLength,x=w.layoutVertexArray,S=w.collisionVertexArray,M=r.anchorX,A=r.anchorY;this._addCollisionDebugVertex(x,S,e,M,A,new Ze(t,o)),this._addCollisionDebugVertex(x,S,e,M,A,new Ze(u,o)),this._addCollisionDebugVertex(x,S,e,M,A,new Ze(u,g)),this._addCollisionDebugVertex(x,S,e,M,A,new Ze(t,g)),l.vertexLength+=4;const L=w.indexArray;L.emplaceBack(d,d+1),L.emplaceBack(d+1,d+2),L.emplaceBack(d+2,d+3),L.emplaceBack(d+3,d),l.primitiveLength+=4}addDebugCollisionBoxes(t,o,u,g){for(let w=t;w<o;w++){const e=this.collisionBoxArray.get(w);this.addCollisionDebugVertices(e.x1,e.y1,e.x2,e.y2,g?this.textCollisionBox:this.iconCollisionBox,e.anchorPoint,u)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Ku(gr,Vu.members,yr),this.iconCollisionBox=new Ku(gr,Vu.members,yr);for(let t=0;t<this.symbolInstances.length;t++){const o=this.symbolInstances.get(t);this.addDebugCollisionBoxes(o.textBoxStartIndex,o.textBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.iconBoxStartIndex,o.iconBoxEndIndex,o,!1),this.addDebugCollisionBoxes(o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o,!1)}}_deserializeCollisionBoxesForSymbol(t,o,u,g,w,e,r,l,d){const x={};for(let S=o;S<u;S++){const M=t.get(S);x.textBox={x1:M.x1,y1:M.y1,x2:M.x2,y2:M.y2,anchorPointX:M.anchorPointX,anchorPointY:M.anchorPointY},x.textFeatureIndex=M.featureIndex;break}for(let S=g;S<w;S++){const M=t.get(S);x.verticalTextBox={x1:M.x1,y1:M.y1,x2:M.x2,y2:M.y2,anchorPointX:M.anchorPointX,anchorPointY:M.anchorPointY},x.verticalTextFeatureIndex=M.featureIndex;break}for(let S=e;S<r;S++){const M=t.get(S);x.iconBox={x1:M.x1,y1:M.y1,x2:M.x2,y2:M.y2,anchorPointX:M.anchorPointX,anchorPointY:M.anchorPointY},x.iconFeatureIndex=M.featureIndex;break}for(let S=l;S<d;S++){const M=t.get(S);x.verticalIconBox={x1:M.x1,y1:M.y1,x2:M.x2,y2:M.y2,anchorPointX:M.anchorPointX,anchorPointY:M.anchorPointY},x.verticalIconFeatureIndex=M.featureIndex;break}return x}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){const u=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,u.textBoxStartIndex,u.textBoxEndIndex,u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u.iconBoxStartIndex,u.iconBoxEndIndex,u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,o){const u=t.placedSymbolArray.get(o),g=u.vertexStartIndex+4*u.numGlyphs;for(let w=u.vertexStartIndex;w<g;w+=4)t.indexArray.emplaceBack(w,w+1,w+2),t.indexArray.emplaceBack(w+1,w+2,w+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const o=Math.sin(t),u=Math.cos(t),g=[],w=[],e=[];for(let r=0;r<this.symbolInstances.length;++r){e.push(r);const l=this.symbolInstances.get(r);g.push(0|Math.round(o*l.anchorX+u*l.anchorY)),w.push(l.featureIndex)}return e.sort((r,l)=>g[r]-g[l]||w[l]-w[r]),e}addToSortKeyRanges(t,o){const u=this.sortKeyRanges[this.sortKeyRanges.length-1];u&&u.sortKey===o?u.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const o of this.symbolInstanceIndexes){const u=this.symbolInstances.get(o);this.featureSortOrder.push(u.featureIndex),[u.rightJustifiedTextSymbolIndex,u.centerJustifiedTextSymbolIndex,u.leftJustifiedTextSymbolIndex].forEach((g,w,e)=>{g>=0&&e.indexOf(g)===w&&this.addIndicesForPlacedSymbol(this.text,g)}),u.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,u.verticalPlacedTextSymbolIndex),u.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,u.placedIconSymbolIndex),u.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,u.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}ut("SymbolBucket",Ja,{omit:["layers","collisionBoxArray","features","compareText"]}),Ja.MAX_GLYPHS=65535,Ja.addDynamicAttributes=ec;const Ya=new Xn({"symbol-placement":new xt(Le.layout_symbol["symbol-placement"]),"symbol-spacing":new xt(Le.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new xt(Le.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new kt(Le.layout_symbol["symbol-sort-key"]),"symbol-z-order":new xt(Le.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new xt(Le.layout_symbol["icon-allow-overlap"]),"icon-overlap":new xt(Le.layout_symbol["icon-overlap"]),"icon-ignore-placement":new xt(Le.layout_symbol["icon-ignore-placement"]),"icon-optional":new xt(Le.layout_symbol["icon-optional"]),"icon-rotation-alignment":new xt(Le.layout_symbol["icon-rotation-alignment"]),"icon-size":new kt(Le.layout_symbol["icon-size"]),"icon-text-fit":new xt(Le.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new xt(Le.layout_symbol["icon-text-fit-padding"]),"icon-image":new kt(Le.layout_symbol["icon-image"]),"icon-rotate":new kt(Le.layout_symbol["icon-rotate"]),"icon-padding":new kt(Le.layout_symbol["icon-padding"]),"icon-keep-upright":new xt(Le.layout_symbol["icon-keep-upright"]),"icon-offset":new kt(Le.layout_symbol["icon-offset"]),"icon-anchor":new kt(Le.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new xt(Le.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new xt(Le.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new xt(Le.layout_symbol["text-rotation-alignment"]),"text-field":new kt(Le.layout_symbol["text-field"]),"text-font":new kt(Le.layout_symbol["text-font"]),"text-size":new kt(Le.layout_symbol["text-size"]),"text-max-width":new kt(Le.layout_symbol["text-max-width"]),"text-line-height":new xt(Le.layout_symbol["text-line-height"]),"text-letter-spacing":new kt(Le.layout_symbol["text-letter-spacing"]),"text-justify":new kt(Le.layout_symbol["text-justify"]),"text-radial-offset":new kt(Le.layout_symbol["text-radial-offset"]),"text-variable-anchor":new xt(Le.layout_symbol["text-variable-anchor"]),"text-anchor":new kt(Le.layout_symbol["text-anchor"]),"text-max-angle":new xt(Le.layout_symbol["text-max-angle"]),"text-writing-mode":new xt(Le.layout_symbol["text-writing-mode"]),"text-rotate":new kt(Le.layout_symbol["text-rotate"]),"text-padding":new xt(Le.layout_symbol["text-padding"]),"text-keep-upright":new xt(Le.layout_symbol["text-keep-upright"]),"text-transform":new kt(Le.layout_symbol["text-transform"]),"text-offset":new kt(Le.layout_symbol["text-offset"]),"text-allow-overlap":new xt(Le.layout_symbol["text-allow-overlap"]),"text-overlap":new xt(Le.layout_symbol["text-overlap"]),"text-ignore-placement":new xt(Le.layout_symbol["text-ignore-placement"]),"text-optional":new xt(Le.layout_symbol["text-optional"])});var Wh={paint:new Xn({"icon-opacity":new kt(Le.paint_symbol["icon-opacity"]),"icon-color":new kt(Le.paint_symbol["icon-color"]),"icon-halo-color":new kt(Le.paint_symbol["icon-halo-color"]),"icon-halo-width":new kt(Le.paint_symbol["icon-halo-width"]),"icon-halo-blur":new kt(Le.paint_symbol["icon-halo-blur"]),"icon-translate":new xt(Le.paint_symbol["icon-translate"]),"icon-translate-anchor":new xt(Le.paint_symbol["icon-translate-anchor"]),"text-opacity":new kt(Le.paint_symbol["text-opacity"]),"text-color":new kt(Le.paint_symbol["text-color"],{runtimeType:tr,getOverride:i=>i.textColor,hasOverride:i=>!!i.textColor}),"text-halo-color":new kt(Le.paint_symbol["text-halo-color"]),"text-halo-width":new kt(Le.paint_symbol["text-halo-width"]),"text-halo-blur":new kt(Le.paint_symbol["text-halo-blur"]),"text-translate":new xt(Le.paint_symbol["text-translate"]),"text-translate-anchor":new xt(Le.paint_symbol["text-translate-anchor"])}),layout:Ya};class Qa{constructor(t){if(t.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:fr,this.defaultValue=t}evaluate(t){if(t.formattedSection){const o=this.defaultValue.property.overrides;if(o&&o.hasOverride(t.formattedSection))return o.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}ut("FormatSectionOverride",Qa,{omit:["defaultValue"]});class Kc extends Mr{constructor(t){super(t,Wh)}recalculate(t,o){if(super.recalculate(t,o),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const u=this.layout.get("text-writing-mode");if(u){const g=[];for(const w of u)g.indexOf(w)<0&&g.push(w);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,o,u,g){const w=this.layout.get(t).evaluate(o,{},u,g),e=this._unevaluatedLayout._values[t];return e.isDataDriven()||Ls(e.value)||!w?w:function(r,l){return l.replace(/{([^{}]+)}/g,(d,x)=>x in r?String(r[x]):"")}(o.properties,w)}createBucket(t){return new Ja(t)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const t of Wh.paint.overridableProperties){if(!Kc.hasPaintOverride(this.layout,t))continue;const o=this.paint.get(t),u=new Qa(o),g=new bc(u,o.property.specification);let w=null;w=o.value.kind==="constant"||o.value.kind==="source"?new gl("source",g):new ba("composite",g,o.value.zoomStops),this.paint._values[t]=new Or(o.property,w,o.parameters)}}_handleOverridablePaintPropertyUpdate(t,o,u){return!(!this.layout||o.isDataDriven()||u.isDataDriven())&&Kc.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,o){const u=t.get("text-field"),g=Wh.paint.properties[o];let w=!1;const e=r=>{for(const l of r)if(g.overrides&&g.overrides.hasOverride(l))return void(w=!0)};if(u.value.kind==="constant"&&u.value.value instanceof me)e(u.value.value.sections);else if(u.value.kind==="source"){const r=d=>{w||(d instanceof ft&&Ue(d.value)===Gr?e(d.value.sections):d instanceof Ps?e(d.sections):d.eachChild(r))},l=u.value;l._styleExpression&&r(l._styleExpression.expression)}return w}}function qn(i,t,o){let u="never";const g=i.get(t);return g?u=g:i.get(o)&&(u="always"),u}var $p={paint:new Xn({"background-color":new xt(Le.paint_background["background-color"]),"background-pattern":new To(Le.paint_background["background-pattern"]),"background-opacity":new xt(Le.paint_background["background-opacity"])})},tp={paint:new Xn({"raster-opacity":new xt(Le.paint_raster["raster-opacity"]),"raster-hue-rotate":new xt(Le.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new xt(Le.paint_raster["raster-brightness-min"]),"raster-brightness-max":new xt(Le.paint_raster["raster-brightness-max"]),"raster-saturation":new xt(Le.paint_raster["raster-saturation"]),"raster-contrast":new xt(Le.paint_raster["raster-contrast"]),"raster-resampling":new xt(Le.paint_raster["raster-resampling"]),"raster-fade-duration":new xt(Le.paint_raster["raster-fade-duration"])})};class Up extends Mr{constructor(t){super(t,{}),this.onAdd=o=>{this.implementation.onAdd&&this.implementation.onAdd(o,o.painter.context.gl)},this.onRemove=o=>{this.implementation.onRemove&&this.implementation.onRemove(o,o.painter.context.gl)},this.implementation=t}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const Vp={circle:class extends Mr{constructor(i){super(i,Rl)}createBucket(i){return new ro(i)}queryRadius(i){const t=i;return hs("circle-radius",this,t)+hs("circle-stroke-width",this,t)+Hs(this.paint.get("circle-translate"))}queryIntersectsFeature(i,t,o,u,g,w,e,r){const l=jo(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),w.angle,e),d=this.paint.get("circle-radius").evaluate(t,o)+this.paint.get("circle-stroke-width").evaluate(t,o),x=this.paint.get("circle-pitch-alignment")==="map",S=x?l:function(A,L){return A.map(V=>vr(V,L))}(l,r),M=x?d*e:d;for(const A of u)for(const L of A){const V=x?L:vr(L,r);let q=M;const ee=Bn([],[L.x,L.y,0,1],r);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?q*=ee[3]/w.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(q*=w.cameraToCenterDistance/ee[3]),yh(S,V,q))return!0}return!1}},heatmap:class extends Mr{constructor(i){super(i,Rc),this._updateColorRamp()}createBucket(i){return new zc(i)}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Ru({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends Mr{constructor(i){super(i,Do)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends Mr{constructor(i){super(i,Nu)}recalculate(i,t){super.recalculate(i,t);const o=this.paint._values["fill-outline-color"];o.value.kind==="constant"&&o.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new ki(i)}queryRadius(){return Hs(this.paint.get("fill-translate"))}queryIntersectsFeature(i,t,o,u,g,w,e){return vh(jo(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),w.angle,e),u)}isTileClipped(){return!0}},"fill-extrusion":class extends Mr{constructor(i){super(i,zh)}createBucket(i){return new Ou(i)}queryRadius(){return Hs(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(i,t,o,u,g,w,e,r){const l=jo(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),w.angle,e),d=this.paint.get("fill-extrusion-height").evaluate(t,o),x=this.paint.get("fill-extrusion-base").evaluate(t,o),S=function(A,L,V,q){const ee=[];for(const ae of A){const se=[ae.x,ae.y,0,1];Bn(se,se,L),ee.push(new Ze(se[0]/se[3],se[1]/se[3]))}return ee}(l,r),M=function(A,L,V,q){const ee=[],ae=[],se=q[8]*L,ge=q[9]*L,Ee=q[10]*L,Re=q[11]*L,de=q[8]*V,oe=q[9]*V,he=q[10]*V,Te=q[11]*V;for(const Ie of A){const Fe=[],Ne=[];for(const Ce of Ie){const ht=Ce.x,Ye=Ce.y,Dt=q[0]*ht+q[4]*Ye+q[12],Pn=q[1]*ht+q[5]*Ye+q[13],Fn=q[2]*ht+q[6]*Ye+q[14],_r=q[3]*ht+q[7]*Ye+q[15],co=Fn+Ee,qr=_r+Re,dr=Dt+de,jr=Pn+oe,Wr=Fn+he,ri=_r+Te,Ci=new Ze((Dt+se)/qr,(Pn+ge)/qr);Ci.z=co/qr,Fe.push(Ci);const pr=new Ze(dr/ri,jr/ri);pr.z=Wr/ri,Ne.push(pr)}ee.push(Fe),ae.push(Ne)}return[ee,ae]}(u,x,d,r);return function(A,L,V){let q=1/0;vh(V,L)&&(q=$u(V,L[0]));for(let ee=0;ee<L.length;ee++){const ae=L[ee],se=A[ee];for(let ge=0;ge<ae.length-1;ge++){const Ee=ae[ge],Re=[Ee,ae[ge+1],se[ge+1],se[ge],Ee];cs(V,Re)&&(q=Math.min(q,$u(V,Re)))}}return q!==1/0&&q}(M[0],M[1],S)}},line:class extends Mr{constructor(i){super(i,Uu),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(i){i==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof ws,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(i,t){super.recalculate(i,t),this.paint._values["line-floorwidth"]=Bh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new Nh(i)}queryRadius(i){const t=i,o=$c(hs("line-width",this,t),hs("line-gap-width",this,t)),u=hs("line-offset",this,t);return o/2+Math.abs(u)+Hs(this.paint.get("line-translate"))}queryIntersectsFeature(i,t,o,u,g,w,e){const r=jo(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),w.angle,e),l=e/2*$c(this.paint.get("line-width").evaluate(t,o),this.paint.get("line-gap-width").evaluate(t,o)),d=this.paint.get("line-offset").evaluate(t,o);return d&&(u=function(x,S){const M=[];for(let A=0;A<x.length;A++){const L=x[A],V=[];for(let q=0;q<L.length;q++){const ee=L[q-1],ae=L[q],se=L[q+1],ge=q===0?new Ze(0,0):ae.sub(ee)._unit()._perp(),Ee=q===L.length-1?new Ze(0,0):se.sub(ae)._unit()._perp(),Re=ge._add(Ee)._unit(),de=Re.x*Ee.x+Re.y*Ee.y;de!==0&&Re._mult(1/de),V.push(Re._mult(S)._add(ae))}M.push(V)}return M}(u,d*e)),function(x,S,M){for(let A=0;A<S.length;A++){const L=S[A];if(x.length>=3){for(let V=0;V<L.length;V++)if(zo(x,L[V]))return!0}if(us(x,L,M))return!0}return!1}(r,u,l)}isTileClipped(){return!0}},symbol:Kc,background:class extends Mr{constructor(i){super(i,$p)}},raster:class extends Mr{constructor(i){super(i,tp)}}};class np{constructor(t){this._callback=t,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Zh=63710088e-1;class Wn{constructor(t,o){if(isNaN(t)||isNaN(o))throw new Error(`Invalid LngLat object: (${t}, ${o})`);if(this.lng=+t,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Wn(te(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const o=Math.PI/180,u=this.lat*o,g=t.lat*o,w=Math.sin(u)*Math.sin(g)+Math.cos(u)*Math.cos(g)*Math.cos((t.lng-this.lng)*o);return Zh*Math.acos(Math.min(w,1))}toBounds(t=0){const o=360*t/40075017,u=o/Math.cos(Math.PI/180*this.lat);return new Rr(new Wn(this.lng-u,this.lat-o),new Wn(this.lng+u,this.lat+o))}static convert(t){if(t instanceof Wn)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new Wn(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new Wn(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Rr{constructor(t,o){t&&(o?this.setSouthWest(t).setNorthEast(o):t.length===4?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}setNorthEast(t){return this._ne=t instanceof Wn?new Wn(t.lng,t.lat):Wn.convert(t),this}setSouthWest(t){return this._sw=t instanceof Wn?new Wn(t.lng,t.lat):Wn.convert(t),this}extend(t){const o=this._sw,u=this._ne;let g,w;if(t instanceof Wn)g=t,w=t;else{if(!(t instanceof Rr))return Array.isArray(t)?t.length===4||t.every(Array.isArray)?this.extend(Rr.convert(t)):this.extend(Wn.convert(t)):this;if(g=t._sw,w=t._ne,!g||!w)return this}return o||u?(o.lng=Math.min(g.lng,o.lng),o.lat=Math.min(g.lat,o.lat),u.lng=Math.max(w.lng,u.lng),u.lat=Math.max(w.lat,u.lat)):(this._sw=new Wn(g.lng,g.lat),this._ne=new Wn(w.lng,w.lat)),this}getCenter(){return new Wn((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Wn(this.getWest(),this.getNorth())}getSouthEast(){return new Wn(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:o,lat:u}=Wn.convert(t);let g=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&g}static convert(t){return t instanceof Rr?t:t&&new Rr(t)}}const Ju=2*Math.PI*Zh;function rp(i){return Ju*Math.cos(i*Math.PI/180)}function ms(i){return(180+i)/360}function Jc(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function ta(i,t){return i/rp(t)}function tc(i){return 360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90}class nc{constructor(t,o,u=0){this.x=+t,this.y=+o,this.z=+u}static fromLngLat(t,o=0){const u=Wn.convert(t);return new nc(ms(u.lng),Jc(u.lat),ta(o,u.lat))}toLngLat(){return new Wn(360*this.x-180,tc(this.y))}toAltitude(){return this.z*rp(tc(this.y))}meterInMercatorCoordinateUnits(){return 1/Ju*(t=tc(this.y),1/Math.cos(t*Math.PI/180));var t}}function Yu(i,t,o){var u=2*Math.PI*6378137/256/Math.pow(2,o);return[i*u-2*Math.PI*6378137/2,t*u-2*Math.PI*6378137/2]}class Xh{constructor(t,o,u){if(t<0||t>25||u<0||u>=Math.pow(2,t)||o<0||o>=Math.pow(2,t))throw new Error(`x=${o}, y=${u}, z=${t} outside of bounds. 0<=x<${Math.pow(2,t)}, 0<=y<${Math.pow(2,t)} 0<=z<=25 `);this.z=t,this.x=o,this.y=u,this.key=rc(0,t,t,o,u)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,o,u){const g=(e=this.y,r=this.z,l=Yu(256*(w=this.x),256*(e=Math.pow(2,r)-e-1),r),d=Yu(256*(w+1),256*(e+1),r),l[0]+","+l[1]+","+d[0]+","+d[1]);var w,e,r,l,d;const x=function(S,M,A){let L,V="";for(let q=S;q>0;q--)L=1<<q-1,V+=(M&L?1:0)+(A&L?2:0);return V}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(u==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,o>1?"@2x":"").replace(/{quadkey}/g,x).replace(/{bbox-epsg-3857}/g,g)}isChildOf(t){const o=this.z-t.z;return o>0&&t.x===this.x>>o&&t.y===this.y>>o}getTilePoint(t){const o=Math.pow(2,this.z);return new Ze((t.x*o-this.x)*Jn,(t.y*o-this.y)*Jn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Qu{constructor(t,o){this.wrap=t,this.canonical=o,this.key=rc(t,o.z,o.z,o.x,o.y)}}class Mi{constructor(t,o,u,g,w){if(t<u)throw new Error(`overscaledZ should be >= z; overscaledZ = ${t}; z = ${u}`);this.overscaledZ=t,this.wrap=o,this.canonical=new Xh(u,+g,+w),this.key=rc(o,t,u,g,w)}clone(){return new Mi(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const o=this.canonical.z-t;return t>this.canonical.z?new Mi(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Mi(t,this.wrap,t,this.canonical.x>>o,this.canonical.y>>o)}calculateScaledKey(t,o){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const u=this.canonical.z-t;return t>this.canonical.z?rc(this.wrap*+o,t,this.canonical.z,this.canonical.x,this.canonical.y):rc(this.wrap*+o,t,t,this.canonical.x>>u,this.canonical.y>>u)}isChildOf(t){if(t.wrap!==this.wrap)return!1;const o=this.canonical.z-t.canonical.z;return t.overscaledZ===0||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>o&&t.canonical.y===this.canonical.y>>o}children(t){if(this.overscaledZ>=t)return[new Mi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const o=this.canonical.z+1,u=2*this.canonical.x,g=2*this.canonical.y;return[new Mi(o,this.wrap,o,u,g),new Mi(o,this.wrap,o,u+1,g),new Mi(o,this.wrap,o,u,g+1),new Mi(o,this.wrap,o,u+1,g+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new Mi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new Mi(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Qu(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new nc(t.x-this.wrap,t.y))}}function rc(i,t,o,u,g){(i*=2)<0&&(i=-1*i-1);const w=1<<o;return(w*w*i+w*g+u).toString(36)+o.toString(36)+t.toString(36)}ut("CanonicalTileID",Xh),ut("OverscaledTileID",Mi,{omit:["posMatrix"]});class Kh{constructor(t,o,u){if(this.uid=t,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(u&&u!=="mapbox"&&u!=="terrarium")return void Se(`"${u}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=o.height;const g=this.dim=o.height-2;this.data=new Uint32Array(o.data.buffer),this.encoding=u||"mapbox";for(let w=0;w<g;w++)this.data[this._idx(-1,w)]=this.data[this._idx(0,w)],this.data[this._idx(g,w)]=this.data[this._idx(g-1,w)],this.data[this._idx(w,-1)]=this.data[this._idx(w,0)],this.data[this._idx(w,g)]=this.data[this._idx(w,g-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(g,-1)]=this.data[this._idx(g-1,0)],this.data[this._idx(-1,g)]=this.data[this._idx(0,g-1)],this.data[this._idx(g,g)]=this.data[this._idx(g-1,g-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let w=0;w<g;w++)for(let e=0;e<g;e++){const r=this.get(w,e);r>this.max&&(this.max=r),r<this.min&&(this.min=r)}}get(t,o){const u=new Uint8Array(this.data.buffer),g=4*this._idx(t,o);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(u[g],u[g+1],u[g+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(t,o){if(t<-1||t>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(t+1)}_unpackMapbox(t,o,u){return(256*t*256+256*o+u)/10-1e4}_unpackTerrarium(t,o,u){return 256*t+o+u/256-32768}getPixels(){return new ti({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,o,u){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let g=o*this.dim,w=o*this.dim+this.dim,e=u*this.dim,r=u*this.dim+this.dim;switch(o){case-1:g=w-1;break;case 1:w=g+1}switch(u){case-1:e=r-1;break;case 1:r=e+1}const l=-o*this.dim,d=-u*this.dim;for(let x=e;x<r;x++)for(let S=g;S<w;S++)this.data[this._idx(S,x)]=t.data[this._idx(S+l,x+d)]}}ut("DEMData",Kh);class Yc{constructor(t){this._stringToNumber={},this._numberToString=[];for(let o=0;o<t.length;o++){const u=t[o];this._stringToNumber[u]=o,this._numberToString[o]=u}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${t} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[t]}}class Qc{constructor(t,o,u,g,w){this.type="Feature",this._vectorTileFeature=t,t._z=o,t._x=u,t._y=g,this.properties=t.properties,this.id=w}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const o in this)o!=="_geometry"&&o!=="_vectorTileFeature"&&(t[o]=this[o]);return t}}class Jh{constructor(t,o){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new is(Jn,16,0),this.grid3D=new is(Jn,16,0),this.featureIndexArray=new jt,this.promoteId=o}insert(t,o,u,g,w,e){const r=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(u,g,w);const l=e?this.grid3D:this.grid;for(let d=0;d<o.length;d++){const x=o[d],S=[1/0,1/0,-1/0,-1/0];for(let M=0;M<x.length;M++){const A=x[M];S[0]=Math.min(S[0],A.x),S[1]=Math.min(S[1],A.y),S[2]=Math.max(S[2],A.x),S[3]=Math.max(S[3],A.y)}S[0]<Jn&&S[1]<Jn&&S[2]>=0&&S[3]>=0&&l.insert(r,S[0],S[1],S[2],S[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new No.VectorTile(new Fh(this.rawTileData)).layers,this.sourceLayerCoder=new Yc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,o,u,g){this.loadVTLayers();const w=t.params||{},e=Jn/t.tileSize/t.scale,r=_l(w.filter),l=t.queryGeometry,d=t.queryPadding*e,x=ip(l),S=this.grid.query(x.minX-d,x.minY-d,x.maxX+d,x.maxY+d),M=ip(t.cameraQueryGeometry),A=this.grid3D.query(M.minX-d,M.minY-d,M.maxX+d,M.maxY+d,(q,ee,ae,se)=>function(ge,Ee,Re,de,oe){for(const Te of ge)if(Ee<=Te.x&&Re<=Te.y&&de>=Te.x&&oe>=Te.y)return!0;const he=[new Ze(Ee,Re),new Ze(Ee,oe),new Ze(de,oe),new Ze(de,Re)];if(ge.length>2){for(const Te of he)if(zo(ge,Te))return!0}for(let Te=0;Te<ge.length-1;Te++)if(Ro(ge[Te],ge[Te+1],he))return!0;return!1}(t.cameraQueryGeometry,q-d,ee-d,ae+d,se+d));for(const q of A)S.push(q);S.sort(op);const L={};let V;for(let q=0;q<S.length;q++){const ee=S[q];if(ee===V)continue;V=ee;const ae=this.featureIndexArray.get(ee);let se=null;this.loadMatchingFeature(L,ae.bucketIndex,ae.sourceLayerIndex,ae.featureIndex,r,w.layers,w.availableImages,o,u,g,(ge,Ee,Re)=>(se||(se=Ti(ge)),Ee.queryIntersectsFeature(l,ge,Re,se,this.z,t.transform,e,t.pixelPosMatrix)))}return L}loadMatchingFeature(t,o,u,g,w,e,r,l,d,x,S){const M=this.bucketLayerIDs[o];if(e&&!function(q,ee){for(let ae=0;ae<q.length;ae++)if(ee.indexOf(q[ae])>=0)return!0;return!1}(e,M))return;const A=this.sourceLayerCoder.decode(u),L=this.vtLayers[A].feature(g);if(w.needGeometry){const q=ls(L,!0);if(!w.filter(new En(this.tileID.overscaledZ),q,this.tileID.canonical))return}else if(!w.filter(new En(this.tileID.overscaledZ),L))return;const V=this.getId(L,A);for(let q=0;q<M.length;q++){const ee=M[q];if(e&&e.indexOf(ee)<0)continue;const ae=l[ee];if(!ae)continue;let se={};V&&x&&(se=x.getState(ae.sourceLayer||"_geojsonTileLayer",V));const ge=ie({},d[ee]);ge.paint=eh(ge.paint,ae.paint,L,se,r),ge.layout=eh(ge.layout,ae.layout,L,se,r);const Ee=!S||S(L,ae,se);if(!Ee)continue;const Re=new Qc(L,this.z,this.x,this.y,V);Re.layer=ge;let de=t[ee];de===void 0&&(de=t[ee]=[]),de.push({featureIndex:g,feature:Re,intersectionZ:Ee})}}lookupSymbolFeatures(t,o,u,g,w,e,r,l){const d={};this.loadVTLayers();const x=_l(w);for(const S of t)this.loadMatchingFeature(d,u,g,S,x,e,r,l,o);return d}hasLayer(t){for(const o of this.bucketLayerIDs)for(const u of o)if(t===u)return!0;return!1}getId(t,o){let u=t.id;return this.promoteId&&(u=t.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[o]],typeof u=="boolean"&&(u=Number(u))),u}}function eh(i,t,o,u,g){return pe(i,(w,e)=>{const r=t instanceof za?t.get(e):null;return r&&r.evaluate?r.evaluate(o,u,g):r})}function ip(i){let t=1/0,o=1/0,u=-1/0,g=-1/0;for(const w of i)t=Math.min(t,w.x),o=Math.min(o,w.y),u=Math.max(u,w.x),g=Math.max(g,w.y);return{minX:t,minY:o,maxX:u,maxY:g}}function op(i,t){return t-i}var eu;ut("FeatureIndex",Jh,{omit:["rawTileData","sourceLayerCoder"]}),c.PerformanceMarkers=void 0,(eu=c.PerformanceMarkers||(c.PerformanceMarkers={})).create="create",eu.load="load",eu.fullLoad="fullLoad";let el=null,tl=[];const ic=1e3/30,sp={mark(i){performance.mark(i)},frame(i){const t=i;el!=null&&tl.push(t-el),el=t},clearMetrics(){el=null,tl=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const i in c.PerformanceMarkers)performance.clearMarks(c.PerformanceMarkers[i])},getPerformanceMetrics(){performance.measure("loadTime",c.PerformanceMarkers.create,c.PerformanceMarkers.load),performance.measure("fullLoadTime",c.PerformanceMarkers.create,c.PerformanceMarkers.fullLoad);const i=performance.getEntriesByName("loadTime")[0].duration,t=performance.getEntriesByName("fullLoadTime")[0].duration,o=tl.length,u=1/(tl.reduce((w,e)=>w+e,0)/o/1e3),g=tl.filter(w=>w>ic).reduce((w,e)=>w+(e-ic)/ic,0);return{loadTime:i,fullLoadTime:t,fps:u,percentDroppedFrames:g/(o+g)*100}}};c.AJAXError=Qn,c.ARRAY_TYPE=Ir,c.Actor=class{constructor(i,t,o){this.target=i,this.parent=t,this.mapId=o,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},Y(["receive","process"],this),this.invoker=new np(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=He()?i:window}send(i,t,o,u,g=!1){const w=Math.round(1e18*Math.random()).toString(36).substring(0,10);o&&(this.callbacks[w]=o);const e=bt(this.globalScope)?void 0:[];return this.target.postMessage({id:w,type:i,hasCallback:!!o,targetMapId:u,mustQueue:g,sourceMapId:this.mapId,data:Yi(t,e)},e),{cancel:()=>{o&&delete this.callbacks[w],this.target.postMessage({id:w,type:"<cancel>",targetMapId:u,sourceMapId:this.mapId})}}}receive(i){const t=i.data,o=t.id;if(o&&(!t.targetMapId||this.mapId===t.targetMapId))if(t.type==="<cancel>"){delete this.tasks[o];const u=this.cancelCallbacks[o];delete this.cancelCallbacks[o],u&&u()}else He()||t.mustQueue?(this.tasks[o]=t,this.taskQueue.push(o),this.invoker.trigger()):this.processTask(o,t)}process(){if(!this.taskQueue.length)return;const i=this.taskQueue.shift(),t=this.tasks[i];delete this.tasks[i],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(i,t)}processTask(i,t){if(t.type==="<response>"){const o=this.callbacks[i];delete this.callbacks[i],o&&(t.error?o(Qi(t.error)):o(null,Qi(t.data)))}else{let o=!1;const u=bt(this.globalScope)?void 0:[],g=t.hasCallback?(r,l)=>{o=!0,delete this.cancelCallbacks[i],this.target.postMessage({id:i,type:"<response>",sourceMapId:this.mapId,error:r?Yi(r):null,data:Yi(l,u)},u)}:r=>{o=!0};let w=null;const e=Qi(t.data);if(this.parent[t.type])w=this.parent[t.type](t.sourceMapId,e,g);else if(this.parent.getWorkerSource){const r=t.type.split(".");w=this.parent.getWorkerSource(t.sourceMapId,r[0],e.source)[r[1]](e,g)}else g(new Error(`Could not find function ${t.type}`));!o&&w&&w.cancel&&(this.cancelCallbacks[i]=w.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},c.AlphaImage=$a,c.CanonicalTileID=Xh,c.CollisionBoxArray=ke,c.CollisionCircleLayoutArray=class extends z{},c.Color=G,c.DEMData=Kh,c.DataConstantProperty=xt,c.DictionaryCoder=Yc,c.EXTENT=Jn,c.ErrorEvent=Fr,c.EvaluationParameters=En,c.Event=On,c.Evented=Hr,c.FeatureIndex=Jh,c.FillBucket=ki,c.FillExtrusionBucket=Ou,c.GeoJSONFeature=Qc,c.ImageAtlas=Hh,c.ImagePosition=qu,c.LineBucket=Nh,c.LineStripIndexArray=class extends be{},c.LngLat=Wn,c.LngLatBounds=Rr,c.MercatorCoordinate=nc,c.ONE_EM=gn,c.OverscaledTileID=Mi,c.PerformanceUtils=sp,c.PosArray=Gt,c.Properties=Xn,c.QuadTriangleArray=class extends U{},c.RGBAImage=ti,c.RasterBoundsArray=class extends ci{},c.RequestPerformance=class{constructor(i){this._marks={start:[i.url,"start"].join("#"),end:[i.url,"end"].join("#"),measure:i.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let i=performance.getEntriesByName(this._marks.measure);return i.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),i=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),i}},c.ResourceType=br,c.SegmentVector=cn,c.SymbolBucket=Ja,c.Transitionable=Il,c.TriangleIndexArray=Rn,c.Uniform1f=Us,c.Uniform1i=class extends Pr{constructor(i,t){super(i,t),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))}},c.Uniform2f=class extends Pr{constructor(i,t){super(i,t),this.current=[0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))}},c.Uniform3f=class extends Pr{constructor(i,t){super(i,t),this.current=[0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))}},c.Uniform4f=Na,c.UniformColor=Io,c.UniformMatrix4f=class extends Pr{constructor(i,t){super(i,t),this.current=ku}set(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(let t=1;t<16;t++)if(i[t]!==this.current[t]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}}},c.UnwrappedTileID=Qu,c.ValidationError=Xe,c.ZoomHistory=js,c.add=function(i,t,o){return i[0]=t[0]+o[0],i[1]=t[1]+o[1],i[2]=t[2]+o[2],i},c.addDynamicAttributes=ec,c.asyncAll=function(i,t,o){if(!i.length)return o(null,[]);let u=i.length;const g=new Array(i.length);let w=null;i.forEach((e,r)=>{t(e,(l,d)=>{l&&(w=l),g[r]=d,--u==0&&o(w,g)})})},c.bezier=$,c.bindAll=Y,c.cacheEntryPossiblyAdded=function(i){At++,At>Ve&&(i.getActor().send("enforceCacheSizeLimit",we),At=0)},c.clamp=F,c.clearTileCache=function(i){const t=caches.delete(at);i&&t.catch(i).then(()=>i())},c.clipLine=fs,c.clone=function(i){var t=new Ir(16);return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],t},c.clone$1=ve,c.clone$2=function(i){var t=new Ir(3);return t[0]=i[0],t[1]=i[1],t[2]=i[2],t},c.collisionCircleLayout=Ud,c.config=We,c.copy=function(i,t){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],i},c.create=function(){var i=new Ir(16);return Ir!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0),i[0]=1,i[5]=1,i[10]=1,i[15]=1,i},c.create$1=Hn,c.createExpression=wa,c.createFilter=_l,c.createLayout=nr,c.createStyleLayer=function(i){return i.type==="custom"?new Up(i):new Vp[i.type](i)},c.cross=function(i,t,o){var u=t[0],g=t[1],w=t[2],e=o[0],r=o[1],l=o[2];return i[0]=g*l-w*r,i[1]=w*e-u*l,i[2]=u*r-g*e,i},c.dot=function(i,t){return i[0]*t[0]+i[1]*t[1]+i[2]*t[2]},c.dot$1=function(i,t){return i[0]*t[0]+i[1]*t[1]+i[2]*t[2]+i[3]*t[3]},c.ease=D,c.emitValidationErrors=kl,c.enforceCacheSizeLimit=function(i){St(),rt&&rt.then(t=>{t.keys().then(o=>{for(let u=0;u<o.length-i;u++)t.delete(o[u])})})},c.equals=function(i,t){var o=i[0],u=i[1],g=i[2],w=i[3],e=i[4],r=i[5],l=i[6],d=i[7],x=i[8],S=i[9],M=i[10],A=i[11],L=i[12],V=i[13],q=i[14],ee=i[15],ae=t[0],se=t[1],ge=t[2],Ee=t[3],Re=t[4],de=t[5],oe=t[6],he=t[7],Te=t[8],Ie=t[9],Fe=t[10],Ne=t[11],Ce=t[12],ht=t[13],Ye=t[14],Dt=t[15];return Math.abs(o-ae)<=Ur*Math.max(1,Math.abs(o),Math.abs(ae))&&Math.abs(u-se)<=Ur*Math.max(1,Math.abs(u),Math.abs(se))&&Math.abs(g-ge)<=Ur*Math.max(1,Math.abs(g),Math.abs(ge))&&Math.abs(w-Ee)<=Ur*Math.max(1,Math.abs(w),Math.abs(Ee))&&Math.abs(e-Re)<=Ur*Math.max(1,Math.abs(e),Math.abs(Re))&&Math.abs(r-de)<=Ur*Math.max(1,Math.abs(r),Math.abs(de))&&Math.abs(l-oe)<=Ur*Math.max(1,Math.abs(l),Math.abs(oe))&&Math.abs(d-he)<=Ur*Math.max(1,Math.abs(d),Math.abs(he))&&Math.abs(x-Te)<=Ur*Math.max(1,Math.abs(x),Math.abs(Te))&&Math.abs(S-Ie)<=Ur*Math.max(1,Math.abs(S),Math.abs(Ie))&&Math.abs(M-Fe)<=Ur*Math.max(1,Math.abs(M),Math.abs(Fe))&&Math.abs(A-Ne)<=Ur*Math.max(1,Math.abs(A),Math.abs(Ne))&&Math.abs(L-Ce)<=Ur*Math.max(1,Math.abs(L),Math.abs(Ce))&&Math.abs(V-ht)<=Ur*Math.max(1,Math.abs(V),Math.abs(ht))&&Math.abs(q-Ye)<=Ur*Math.max(1,Math.abs(q),Math.abs(Ye))&&Math.abs(ee-Dt)<=Ur*Math.max(1,Math.abs(ee),Math.abs(Dt))},c.evaluateSizeForFeature=function(i,{uSize:t,uSizeT:o},{lowerSize:u,upperSize:g}){return i.kind==="source"?u/ao:i.kind==="composite"?zn(u/ao,g/ao,o):t},c.evaluateSizeForZoom=function(i,t){let o=0,u=0;if(i.kind==="constant")u=i.layoutSize;else if(i.kind!=="source"){const{interpolationType:g,minZoom:w,maxZoom:e}=i,r=g?F(cr.interpolationFactor(g,t,w,e),0,1):0;i.kind==="camera"?u=zn(i.minSize,i.maxSize,r):o=r}return{uSizeT:o,uSize:u}},c.evaluateVariableOffset=Jd,c.evented=Ds,c.exported=Ct,c.exported$1=zt,c.extend=ie,c.filterObject=ye,c.fromRotation=function(i,t){var o=Math.sin(t),u=Math.cos(t);return i[0]=u,i[1]=o,i[2]=0,i[3]=-o,i[4]=u,i[5]=0,i[6]=0,i[7]=0,i[8]=1,i},c.fromScaling=function(i,t){return i[0]=t[0],i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=t[1],i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=t[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},c.getAnchorAlignment=sr,c.getAnchorJustification=$o,c.getArrayBuffer=tt,c.getImage=Br,c.getJSON=function(i,t){return Qe(ie(i,{type:"json"}),t)},c.getOverlapMode=qn,c.getRTLTextPluginStatus=Pl,c.getReferrer=jn,c.getVideo=function(i,t){const o=window.document.createElement("video");o.muted=!0,o.onloadstart=function(){t(null,o)};for(let u=0;u<i.length;u++){const g=window.document.createElement("source");Ot(i[u])||(o.crossOrigin="Anonymous"),g.src=i[u],o.appendChild(g)}return{cancel:()=>{}}},c.identity=jl,c.invert=function(i,t){var o=t[0],u=t[1],g=t[2],w=t[3],e=t[4],r=t[5],l=t[6],d=t[7],x=t[8],S=t[9],M=t[10],A=t[11],L=t[12],V=t[13],q=t[14],ee=t[15],ae=o*r-u*e,se=o*l-g*e,ge=o*d-w*e,Ee=u*l-g*r,Re=u*d-w*r,de=g*d-w*l,oe=x*V-S*L,he=x*q-M*L,Te=x*ee-A*L,Ie=S*q-M*V,Fe=S*ee-A*V,Ne=M*ee-A*q,Ce=ae*Ne-se*Fe+ge*Ie+Ee*Te-Re*he+de*oe;return Ce?(i[0]=(r*Ne-l*Fe+d*Ie)*(Ce=1/Ce),i[1]=(g*Fe-u*Ne-w*Ie)*Ce,i[2]=(V*de-q*Re+ee*Ee)*Ce,i[3]=(M*Re-S*de-A*Ee)*Ce,i[4]=(l*Te-e*Ne-d*he)*Ce,i[5]=(o*Ne-g*Te+w*he)*Ce,i[6]=(q*ge-L*de-ee*se)*Ce,i[7]=(x*de-M*ge+A*se)*Ce,i[8]=(e*Fe-r*Te+d*oe)*Ce,i[9]=(u*Te-o*Fe-w*oe)*Ce,i[10]=(L*Re-V*ge+ee*ae)*Ce,i[11]=(S*ge-x*Re-A*ae)*Ce,i[12]=(r*he-e*Ie-l*oe)*Ce,i[13]=(o*Ie-u*he+g*oe)*Ce,i[14]=(V*se-L*Ee-q*ae)*Ce,i[15]=(x*Ee-S*se+M*ae)*Ce,i):null},c.isImageBitmap=mt,c.isSafari=bt,c.isWorker=He,c.keysDifference=function(i,t){const o=[];for(const u in i)u in t||o.push(u);return o},c.lazyLoadRTLTextPlugin=function(){hn.isLoading()||hn.isLoaded()||Pl()!=="deferred"||La()},c.makeRequest=Qe,c.mapObject=pe,c.mercatorXfromLng=ms,c.mercatorYfromLat=Jc,c.mercatorZfromAltitude=ta,c.mul=Lu,c.mul$1=function(i,t,o){return i[0]=t[0]*o[0],i[1]=t[1]*o[1],i[2]=t[2]*o[2],i[3]=t[3]*o[3],i},c.multiply=Au,c.nextPowerOfTwo=function(i){return i<=1?1:Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))},c.normalize=function(i,t){var o=t[0],u=t[1],g=t[2],w=o*o+u*u+g*g;return w>0&&(w=1/Math.sqrt(w)),i[0]=t[0]*w,i[1]=t[1]*w,i[2]=t[2]*w,i},c.number=zn,c.ortho=function(i,t,o,u,g,w,e){var r=1/(t-o),l=1/(u-g),d=1/(w-e);return i[0]=-2*r,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*l,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*d,i[11]=0,i[12]=(t+o)*r,i[13]=(g+u)*l,i[14]=(e+w)*d,i[15]=1,i},c.parseCacheControl=gt,c.parseGlyphPbf=function(i){return new Fh(i).readFields(so,[])},c.pbf=Fh,c.performSymbolLayout=function(i){i.bucket.createArrays(),i.bucket.tilePixelRatio=Jn/(512*i.bucket.overscaling),i.bucket.compareText={},i.bucket.iconsNeedLinear=!1;const t=i.bucket.layers[0].layout,o=i.bucket.layers[0]._unevaluatedLayout._values,u={layoutIconSize:o["icon-size"].possiblyEvaluate(new En(i.bucket.zoom+1),i.canonical),layoutTextSize:o["text-size"].possiblyEvaluate(new En(i.bucket.zoom+1),i.canonical),textMaxSize:o["text-size"].possiblyEvaluate(new En(18))};if(i.bucket.textSizeData.kind==="composite"){const{minZoom:l,maxZoom:d}=i.bucket.textSizeData;u.compositeTextSizes=[o["text-size"].possiblyEvaluate(new En(l),i.canonical),o["text-size"].possiblyEvaluate(new En(d),i.canonical)]}if(i.bucket.iconSizeData.kind==="composite"){const{minZoom:l,maxZoom:d}=i.bucket.iconSizeData;u.compositeIconSizes=[o["icon-size"].possiblyEvaluate(new En(l),i.canonical),o["icon-size"].possiblyEvaluate(new En(d),i.canonical)]}const g=t.get("text-line-height")*gn,w=t.get("text-rotation-alignment")!=="viewport"&&t.get("symbol-placement")!=="point",e=t.get("text-keep-upright"),r=t.get("text-size");for(const l of i.bucket.features){const d=t.get("text-font").evaluate(l,{},i.canonical).join(","),x=r.evaluate(l,{},i.canonical),S=u.layoutTextSize.evaluate(l,{},i.canonical),M=u.layoutIconSize.evaluate(l,{},i.canonical),A={horizontal:{},vertical:void 0},L=l.text;let V,q=[0,0];if(L){const se=L.toString(),ge=t.get("text-letter-spacing").evaluate(l,{},i.canonical)*gn,Ee=Ml(se)?ge:0,Re=t.get("text-anchor").evaluate(l,{},i.canonical),de=t.get("text-variable-anchor");if(!de){const Fe=t.get("text-radial-offset").evaluate(l,{},i.canonical);q=Fe?Jd(Re,[Fe*gn,Xc]):t.get("text-offset").evaluate(l,{},i.canonical).map(Ne=>Ne*gn)}let oe=w?"center":t.get("text-justify").evaluate(l,{},i.canonical);const he=t.get("symbol-placement"),Te=he==="point"?t.get("text-max-width").evaluate(l,{},i.canonical)*gn:0,Ie=()=>{i.bucket.allowVerticalPlacement&&wo(se)&&(A.vertical=Ga(L,i.glyphMap,i.glyphPositions,i.imagePositions,d,Te,g,Re,"left",Ee,q,c.WritingMode.vertical,!0,he,S,x))};if(!w&&de){const Fe=oe==="auto"?de.map(Ce=>$o(Ce)):[oe];let Ne=!1;for(let Ce=0;Ce<Fe.length;Ce++){const ht=Fe[Ce];if(!A.horizontal[ht])if(Ne)A.horizontal[ht]=A.horizontal[0];else{const Ye=Ga(L,i.glyphMap,i.glyphPositions,i.imagePositions,d,Te,g,"center",ht,Ee,q,c.WritingMode.horizontal,!1,he,S,x);Ye&&(A.horizontal[ht]=Ye,Ne=Ye.positionedLines.length===1)}}Ie()}else{oe==="auto"&&(oe=$o(Re));const Fe=Ga(L,i.glyphMap,i.glyphPositions,i.imagePositions,d,Te,g,Re,oe,Ee,q,c.WritingMode.horizontal,!1,he,S,x);Fe&&(A.horizontal[oe]=Fe),Ie(),wo(se)&&w&&e&&(A.vertical=Ga(L,i.glyphMap,i.glyphPositions,i.imagePositions,d,Te,g,Re,oe,Ee,q,c.WritingMode.vertical,!1,he,S,x))}}let ee=!1;if(l.icon&&l.icon.name){const se=i.imageMap[l.icon.name];se&&(V=qa(i.imagePositions[l.icon.name],t.get("icon-offset").evaluate(l,{},i.canonical),t.get("icon-anchor").evaluate(l,{},i.canonical)),ee=!!se.sdf,i.bucket.sdfIcons===void 0?i.bucket.sdfIcons=ee:i.bucket.sdfIcons!==ee&&Se("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(se.pixelRatio!==i.bucket.pixelRatio||t.get("icon-rotate").constantOr(1)!==0)&&(i.bucket.iconsNeedLinear=!0))}const ae=Xu(A.horizontal)||A.vertical;i.bucket.iconsInText=!!ae&&ae.iconsInText,(ae||V)&&Yd(i.bucket,l,A,V,i.imageMap,u,S,M,q,ee,i.canonical)}i.showCollisionBoxes&&i.bucket.generateCollisionDebugBuffers()},c.perspective=function(i,t,o,u,g){var w,e=1/Math.tan(t/2);return i[0]=e/o,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=e,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,g!=null&&g!==1/0?(i[10]=(g+u)*(w=1/(u-g)),i[14]=2*g*u*w):(i[10]=-1,i[14]=-2*u),i},c.pick=function(i,t){const o={};for(let u=0;u<t.length;u++){const g=t[u];g in i&&(o[g]=i[g])}return o},c.plugin=hn,c.pointGeometry=Ze,c.polygonIntersectsPolygon=cs,c.potpack=Xd,c.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],c.register=ut,c.registerForPluginStateChange=function(i){return i({pluginStatus:kr,pluginURL:So}),Ds.on("pluginStateChange",i),i},c.renderColorRamp=Ru,c.rotateX=function(i,t,o){var u=Math.sin(o),g=Math.cos(o),w=t[4],e=t[5],r=t[6],l=t[7],d=t[8],x=t[9],S=t[10],M=t[11];return t!==i&&(i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]),i[4]=w*g+d*u,i[5]=e*g+x*u,i[6]=r*g+S*u,i[7]=l*g+M*u,i[8]=d*g-w*u,i[9]=x*g-e*u,i[10]=S*g-r*u,i[11]=M*g-l*u,i},c.rotateZ=function(i,t,o){var u=Math.sin(o),g=Math.cos(o),w=t[0],e=t[1],r=t[2],l=t[3],d=t[4],x=t[5],S=t[6],M=t[7];return t!==i&&(i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]),i[0]=w*g+d*u,i[1]=e*g+x*u,i[2]=r*g+S*u,i[3]=l*g+M*u,i[4]=d*g-w*u,i[5]=x*g-e*u,i[6]=S*g-r*u,i[7]=M*g-l*u,i},c.scale=function(i,t,o){var u=o[0],g=o[1],w=o[2];return i[0]=t[0]*u,i[1]=t[1]*u,i[2]=t[2]*u,i[3]=t[3]*u,i[4]=t[4]*g,i[5]=t[5]*g,i[6]=t[6]*g,i[7]=t[7]*g,i[8]=t[8]*w,i[9]=t[9]*w,i[10]=t[10]*w,i[11]=t[11]*w,i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],i},c.scale$1=function(i,t,o){return i[0]=t[0]*o,i[1]=t[1]*o,i[2]=t[2]*o,i},c.setCacheLimits=function(i,t){we=i,Ve=t},c.setRTLTextPlugin=function(i,t,o=!1){if(kr===Ia||kr===Cl||kr===Ni)throw new Error("setRTLTextPlugin cannot be called multiple times.");So=Ct.resolveURL(i),kr=Ia,Aa=t,os(),o||La()},c.spec=Le,c.sphericalToCartesian=function([i,t,o]){return t+=90,t*=Math.PI/180,o*=Math.PI/180,{x:i*Math.cos(t)*Math.sin(o),y:i*Math.sin(t)*Math.sin(o),z:i*Math.cos(o)}},c.sqrLen=function(i){var t=i[0],o=i[1];return t*t+o*o},c.sub=function(i,t,o){return i[0]=t[0]-o[0],i[1]=t[1]-o[1],i[2]=t[2]-o[2],i},c.toEvaluationFeature=ls,c.transformMat3=function(i,t,o){var u=t[0],g=t[1],w=t[2];return i[0]=u*o[0]+g*o[3]+w*o[6],i[1]=u*o[1]+g*o[4]+w*o[7],i[2]=u*o[2]+g*o[5]+w*o[8],i},c.transformMat4=Bn,c.transformMat4$1=function(i,t,o){var u=t[0],g=t[1];return i[0]=o[0]*u+o[4]*g+o[12],i[1]=o[1]*u+o[5]*g+o[13],i},c.translate=function(i,t,o){var u,g,w,e,r,l,d,x,S,M,A,L,V=o[0],q=o[1],ee=o[2];return t===i?(i[12]=t[0]*V+t[4]*q+t[8]*ee+t[12],i[13]=t[1]*V+t[5]*q+t[9]*ee+t[13],i[14]=t[2]*V+t[6]*q+t[10]*ee+t[14],i[15]=t[3]*V+t[7]*q+t[11]*ee+t[15]):(g=t[1],w=t[2],e=t[3],r=t[4],l=t[5],d=t[6],x=t[7],S=t[8],M=t[9],A=t[10],L=t[11],i[0]=u=t[0],i[1]=g,i[2]=w,i[3]=e,i[4]=r,i[5]=l,i[6]=d,i[7]=x,i[8]=S,i[9]=M,i[10]=A,i[11]=L,i[12]=u*V+r*q+S*ee+t[12],i[13]=g*V+l*q+M*ee+t[13],i[14]=w*V+d*q+A*ee+t[14],i[15]=e*V+x*q+L*ee+t[15]),i},c.triggerPluginCompletionEvent=Eu,c.unicodeBlockLookup=it,c.uniqueId=function(){return W++},c.validateCustomStyleLayer=function(i){const t=[],o=i.id;return o===void 0&&t.push({message:`layers.${o}: missing required property "id"`}),i.render===void 0&&t.push({message:`layers.${o}: missing required method "render"`}),i.renderingMode&&i.renderingMode!=="2d"&&i.renderingMode!=="3d"&&t.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),t},c.validateLight=xu,c.validateStyle=xo,c.vectorTile=No,c.warnOnce=Se,c.wrap=te}),T(["./shared"],function(c){function B(Z){const R=typeof Z;if(R==="number"||R==="boolean"||R==="string"||Z==null)return JSON.stringify(Z);if(Array.isArray(Z)){let J="[";for(const ce of Z)J+=`${B(ce)},`;return`${J}]`}const O=Object.keys(Z).sort();let G="{";for(let J=0;J<O.length;J++)G+=`${JSON.stringify(O[J])}:${B(Z[O[J]])},`;return`${G}}`}function j(Z){let R="";for(const O of c.refProperties)R+=`/${B(Z[O])}`;return R}class ${constructor(R){this.keyCache={},R&&this.replace(R)}replace(R){this._layerConfigs={},this._layers={},this.update(R,[])}update(R,O){for(const J of R){this._layerConfigs[J.id]=J;const ce=this._layers[J.id]=c.createStyleLayer(J);ce._featureFilter=c.createFilter(ce.filter),this.keyCache[J.id]&&delete this.keyCache[J.id]}for(const J of O)delete this.keyCache[J],delete this._layerConfigs[J],delete this._layers[J];this.familiesBySource={};const G=function(J,ce){const me={};for(let ue=0;ue<J.length;ue++){const _e=ce&&ce[J[ue].id]||j(J[ue]);ce&&(ce[J[ue].id]=_e);let Ae=me[_e];Ae||(Ae=me[_e]=[]),Ae.push(J[ue])}const fe=[];for(const ue in me)fe.push(me[ue]);return fe}(Object.values(this._layerConfigs),this.keyCache);for(const J of G){const ce=J.map(Ue=>this._layers[Ue.id]),me=ce[0];if(me.visibility==="none")continue;const fe=me.source||"";let ue=this.familiesBySource[fe];ue||(ue=this.familiesBySource[fe]={});const _e=me.sourceLayer||"_geojsonTileLayer";let Ae=ue[_e];Ae||(Ae=ue[_e]=[]),Ae.push(ce)}}}class D{constructor(R){const O={},G=[];for(const fe in R){const ue=R[fe],_e=O[fe]={};for(const Ae in ue){const Ue=ue[+Ae];if(!Ue||Ue.bitmap.width===0||Ue.bitmap.height===0)continue;const $e={x:0,y:0,w:Ue.bitmap.width+2,h:Ue.bitmap.height+2};G.push($e),_e[Ae]={rect:$e,metrics:Ue.metrics}}}const{w:J,h:ce}=c.potpack(G),me=new c.AlphaImage({width:J||1,height:ce||1});for(const fe in R){const ue=R[fe];for(const _e in ue){const Ae=ue[+_e];if(!Ae||Ae.bitmap.width===0||Ae.bitmap.height===0)continue;const Ue=O[fe][_e].rect;c.AlphaImage.copy(Ae.bitmap,me,{x:0,y:0},{x:Ue.x+1,y:Ue.y+1},Ae.bitmap)}}this.image=me,this.positions=O}}c.register("GlyphAtlas",D);class F{constructor(R){this.tileID=new c.OverscaledTileID(R.tileID.overscaledZ,R.tileID.wrap,R.tileID.canonical.z,R.tileID.canonical.x,R.tileID.canonical.y),this.uid=R.uid,this.zoom=R.zoom,this.pixelRatio=R.pixelRatio,this.tileSize=R.tileSize,this.source=R.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=R.showCollisionBoxes,this.collectResourceTiming=!!R.collectResourceTiming,this.returnDependencies=!!R.returnDependencies,this.promoteId=R.promoteId}parse(R,O,G,J,ce){this.status="parsing",this.data=R,this.collisionBoxArray=new c.CollisionBoxArray;const me=new c.DictionaryCoder(Object.keys(R.layers).sort()),fe=new c.FeatureIndex(this.tileID,this.promoteId);fe.bucketLayerIDs=[];const ue={},_e={featureIndex:fe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:G},Ae=O.familiesBySource[this.source];for(const Zt in Ae){const Ut=R.layers[Zt];if(!Ut)continue;Ut.version===1&&c.warnOnce(`Vector tile source "${this.source}" layer "${Zt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Vt=me.encode(Zt),$n=[];for(let Ln=0;Ln<Ut.length;Ln++){const bn=Ut.feature(Ln),mr=fe.getId(bn,Zt);$n.push({feature:bn,id:mr,index:Ln,sourceLayerIndex:Vt})}for(const Ln of Ae[Zt]){const bn=Ln[0];bn.source!==this.source&&c.warnOnce(`layer.source = ${bn.source} does not equal this.source = ${this.source}`),bn.minzoom&&this.zoom<Math.floor(bn.minzoom)||bn.maxzoom&&this.zoom>=bn.maxzoom||bn.visibility!=="none"&&(te(Ln,this.zoom,G),(ue[bn.id]=bn.createBucket({index:fe.bucketLayerIDs.length,layers:Ln,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Vt,sourceID:this.source})).populate($n,_e,this.tileID.canonical),fe.bucketLayerIDs.push(Ln.map(mr=>mr.id)))}}let Ue,$e,ft,ct;const vt=c.mapObject(_e.glyphDependencies,Zt=>Object.keys(Zt).map(Number));Object.keys(vt).length?J.send("getGlyphs",{uid:this.uid,stacks:vt},(Zt,Ut)=>{Ue||(Ue=Zt,$e=Ut,Wt.call(this))}):$e={};const ot=Object.keys(_e.iconDependencies);ot.length?J.send("getImages",{icons:ot,source:this.source,tileID:this.tileID,type:"icons"},(Zt,Ut)=>{Ue||(Ue=Zt,ft=Ut,Wt.call(this))}):ft={};const qt=Object.keys(_e.patternDependencies);function Wt(){if(Ue)return ce(Ue);if($e&&ft&&ct){const Zt=new D($e),Ut=new c.ImageAtlas(ft,ct);for(const Vt in ue){const $n=ue[Vt];$n instanceof c.SymbolBucket?(te($n.layers,this.zoom,G),c.performSymbolLayout({bucket:$n,glyphMap:$e,glyphPositions:Zt.positions,imageMap:ft,imagePositions:Ut.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):$n.hasPattern&&($n instanceof c.LineBucket||$n instanceof c.FillBucket||$n instanceof c.FillExtrusionBucket)&&(te($n.layers,this.zoom,G),$n.addFeatures(_e,this.tileID.canonical,Ut.patternPositions))}this.status="done",ce(null,{buckets:Object.values(ue).filter(Vt=>!Vt.isEmpty()),featureIndex:fe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Zt.image,imageAtlas:Ut,glyphMap:this.returnDependencies?$e:null,iconMap:this.returnDependencies?ft:null,glyphPositions:this.returnDependencies?Zt.positions:null})}}qt.length?J.send("getImages",{icons:qt,source:this.source,tileID:this.tileID,type:"patterns"},(Zt,Ut)=>{Ue||(Ue=Zt,ct=Ut,Wt.call(this))}):ct={},Wt.call(this)}}function te(Z,R,O){const G=new c.EvaluationParameters(R);for(const J of Z)J.recalculate(G,O)}function ie(Z,R){const O=c.getArrayBuffer(Z.request,(G,J,ce,me)=>{G?R(G):J&&R(null,{vectorTile:new c.vectorTile.VectorTile(new c.pbf(J)),rawData:J,cacheControl:ce,expires:me})});return()=>{O.cancel(),R()}}class W{constructor(R,O,G,J){this.actor=R,this.layerIndex=O,this.availableImages=G,this.loadVectorData=J||ie,this.loading={},this.loaded={}}loadTile(R,O){const G=R.uid;this.loading||(this.loading={});const J=!!(R&&R.request&&R.request.collectResourceTiming)&&new c.RequestPerformance(R.request),ce=this.loading[G]=new F(R);ce.abort=this.loadVectorData(R,(me,fe)=>{if(delete this.loading[G],me||!fe)return ce.status="done",this.loaded[G]=ce,O(me);const ue=fe.rawData,_e={};fe.expires&&(_e.expires=fe.expires),fe.cacheControl&&(_e.cacheControl=fe.cacheControl);const Ae={};if(J){const Ue=J.finish();Ue&&(Ae.resourceTiming=JSON.parse(JSON.stringify(Ue)))}ce.vectorTile=fe.vectorTile,ce.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ue,$e)=>{if(Ue||!$e)return O(Ue);O(null,c.extend({rawTileData:ue.slice(0)},$e,_e,Ae))}),this.loaded=this.loaded||{},this.loaded[G]=ce})}reloadTile(R,O){const G=this.loaded,J=R.uid,ce=this;if(G&&G[J]){const me=G[J];me.showCollisionBoxes=R.showCollisionBoxes;const fe=(ue,_e)=>{const Ae=me.reloadCallback;Ae&&(delete me.reloadCallback,me.parse(me.vectorTile,ce.layerIndex,this.availableImages,ce.actor,Ae)),O(ue,_e)};me.status==="parsing"?me.reloadCallback=fe:me.status==="done"&&(me.vectorTile?me.parse(me.vectorTile,this.layerIndex,this.availableImages,this.actor,fe):fe())}}abortTile(R,O){const G=this.loading,J=R.uid;G&&G[J]&&G[J].abort&&(G[J].abort(),delete G[J]),O()}removeTile(R,O){const G=this.loaded,J=R.uid;G&&G[J]&&delete G[J],O()}}class Y{constructor(){this.loaded={}}loadTile(R,O){const{uid:G,encoding:J,rawImageData:ce}=R,me=c.isImageBitmap(ce)?this.getImageData(ce):ce,fe=new c.DEMData(G,me,J);this.loaded=this.loaded||{},this.loaded[G]=fe,O(null,fe)}getImageData(R){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(R.width,R.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=R.width,this.offscreenCanvas.height=R.height,this.offscreenCanvasContext.drawImage(R,0,0,R.width,R.height);const O=this.offscreenCanvasContext.getImageData(-1,-1,R.width+2,R.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new c.RGBAImage({width:O.width,height:O.height},O.data)}removeTile(R){const O=this.loaded,G=R.uid;O&&O[G]&&delete O[G]}}var pe=function Z(R,O){var G,J=R&&R.type;if(J==="FeatureCollection")for(G=0;G<R.features.length;G++)Z(R.features[G],O);else if(J==="GeometryCollection")for(G=0;G<R.geometries.length;G++)Z(R.geometries[G],O);else if(J==="Feature")Z(R.geometry,O);else if(J==="Polygon")ye(R.coordinates,O);else if(J==="MultiPolygon")for(G=0;G<R.coordinates.length;G++)ye(R.coordinates[G],O);return R};function ye(Z,R){if(Z.length!==0){ve(Z[0],R);for(var O=1;O<Z.length;O++)ve(Z[O],!1)}}function ve(Z,R){for(var O=0,G=0,J=0,ce=Z.length,me=ce-1;J<ce;me=J++){var fe=(Z[J][0]-Z[me][0])*(Z[me][1]+Z[J][1]),ue=O+fe;G+=Math.abs(O)>=Math.abs(fe)?O-ue+fe:fe-ue+O,O=ue}O+G>=0!=!!R&&Z.reverse()}const Be=c.vectorTile.VectorTileFeature.prototype.toGeoJSON;class Se{constructor(R){this._feature=R,this.extent=c.EXTENT,this.type=R.type,this.properties=R.tags,"id"in R&&!isNaN(R.id)&&(this.id=parseInt(R.id,10))}loadGeometry(){if(this._feature.type===1){const R=[];for(const O of this._feature.geometry)R.push([new c.pointGeometry(O[0],O[1])]);return R}{const R=[];for(const O of this._feature.geometry){const G=[];for(const J of O)G.push(new c.pointGeometry(J[0],J[1]));R.push(G)}return R}}toGeoJSON(R,O,G){return Be.call(this,R,O,G)}}class Ke{constructor(R){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=c.EXTENT,this.length=R.length,this._features=R}feature(R){return new Se(this._features[R])}}var Je={exports:{}},He=c.pointGeometry,gt=c.vectorTile.VectorTileFeature,pt=wt;function wt(Z,R){this.options=R||{},this.features=Z,this.length=Z.length}function Tt(Z,R){this.id=typeof Z.id=="number"?Z.id:void 0,this.type=Z.type,this.rawGeometry=Z.type===1?[Z.geometry]:Z.geometry,this.properties=Z.tags,this.extent=R||4096}wt.prototype.feature=function(Z){return new Tt(this.features[Z],this.options.extent)},Tt.prototype.loadGeometry=function(){var Z=this.rawGeometry;this.geometry=[];for(var R=0;R<Z.length;R++){for(var O=Z[R],G=[],J=0;J<O.length;J++)G.push(new He(O[J][0],O[J][1]));this.geometry.push(G)}return this.geometry},Tt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Z=this.geometry,R=1/0,O=-1/0,G=1/0,J=-1/0,ce=0;ce<Z.length;ce++)for(var me=Z[ce],fe=0;fe<me.length;fe++){var ue=me[fe];R=Math.min(R,ue.x),O=Math.max(O,ue.x),G=Math.min(G,ue.y),J=Math.max(J,ue.y)}return[R,G,O,J]},Tt.prototype.toGeoJSON=gt.prototype.toGeoJSON;var bt=c.pbf,mt=pt;function Ct(Z){var R=new bt;return function(O,G){for(var J in O.layers)G.writeMessage(3,Ze,O.layers[J])}(Z,R),R.finish()}function Ze(Z,R){var O;R.writeVarintField(15,Z.version||1),R.writeStringField(1,Z.name||""),R.writeVarintField(5,Z.extent||4096);var G={keys:[],values:[],keycache:{},valuecache:{}};for(O=0;O<Z.length;O++)G.feature=Z.feature(O),R.writeMessage(2,Pt,G);var J=G.keys;for(O=0;O<J.length;O++)R.writeStringField(3,J[O]);var ce=G.values;for(O=0;O<ce.length;O++)R.writeMessage(4,Ve,ce[O])}function Pt(Z,R){var O=Z.feature;O.id!==void 0&&R.writeVarintField(1,O.id),R.writeMessage(2,We,Z),R.writeVarintField(3,O.type),R.writeMessage(4,we,O)}function We(Z,R){var O=Z.feature,G=Z.keys,J=Z.values,ce=Z.keycache,me=Z.valuecache;for(var fe in O.properties){var ue=O.properties[fe],_e=ce[fe];if(ue!==null){_e===void 0&&(G.push(fe),ce[fe]=_e=G.length-1),R.writeVarint(_e);var Ae=typeof ue;Ae!=="string"&&Ae!=="boolean"&&Ae!=="number"&&(ue=JSON.stringify(ue));var Ue=Ae+":"+ue,$e=me[Ue];$e===void 0&&(J.push(ue),me[Ue]=$e=J.length-1),R.writeVarint($e)}}}function at(Z,R){return(R<<3)+(7&Z)}function rt(Z){return Z<<1^Z>>31}function we(Z,R){for(var O=Z.loadGeometry(),G=Z.type,J=0,ce=0,me=O.length,fe=0;fe<me;fe++){var ue=O[fe],_e=1;G===1&&(_e=ue.length),R.writeVarint(at(1,_e));for(var Ae=G===3?ue.length-1:ue.length,Ue=0;Ue<Ae;Ue++){Ue===1&&G!==1&&R.writeVarint(at(2,Ae-1));var $e=ue[Ue].x-J,ft=ue[Ue].y-ce;R.writeVarint(rt($e)),R.writeVarint(rt(ft)),J+=$e,ce+=ft}G===3&&R.writeVarint(at(7,1))}}function Ve(Z,R){var O=typeof Z;O==="string"?R.writeStringField(1,Z):O==="boolean"?R.writeBooleanField(7,Z):O==="number"&&(Z%1!=0?R.writeDoubleField(3,Z):Z<0?R.writeSVarintField(6,Z):R.writeVarintField(5,Z))}function St(Z,R,O,G,J,ce){if(J-G<=O)return;const me=G+J>>1;At(Z,R,me,G,J,ce%2),St(Z,R,O,G,me-1,ce+1),St(Z,R,O,me+1,J,ce+1)}function At(Z,R,O,G,J,ce){for(;J>G;){if(J-G>600){const _e=J-G+1,Ae=O-G+1,Ue=Math.log(_e),$e=.5*Math.exp(2*Ue/3),ft=.5*Math.sqrt(Ue*$e*(_e-$e)/_e)*(Ae-_e/2<0?-1:1);At(Z,R,O,Math.max(G,Math.floor(O-Ae*$e/_e+ft)),Math.min(J,Math.floor(O+(_e-Ae)*$e/_e+ft)),ce)}const me=R[2*O+ce];let fe=G,ue=J;for(zt(Z,R,G,O),R[2*J+ce]>me&&zt(Z,R,G,J);fe<ue;){for(zt(Z,R,fe,ue),fe++,ue--;R[2*fe+ce]<me;)fe++;for(;R[2*ue+ce]>me;)ue--}R[2*G+ce]===me?zt(Z,R,G,ue):(ue++,zt(Z,R,ue,J)),ue<=O&&(G=ue+1),O<=ue&&(J=ue-1)}}function zt(Z,R,O,G){Nt(Z,O,G),Nt(R,2*O,2*G),Nt(R,2*O+1,2*G+1)}function Nt(Z,R,O){const G=Z[R];Z[R]=Z[O],Z[O]=G}function Kt(Z,R,O,G){const J=Z-O,ce=R-G;return J*J+ce*ce}Je.exports=Ct,Je.exports.fromVectorTileJs=Ct,Je.exports.fromGeojsonVt=function(Z,R){R=R||{};var O={};for(var G in Z)O[G]=new mt(Z[G].features,R),O[G].name=G,O[G].version=R.version,O[G].extent=R.extent;return Ct({layers:O})},Je.exports.GeoJSONWrapper=mt;const Yt=Z=>Z[0],Ft=Z=>Z[1];class An{constructor(R,O=Yt,G=Ft,J=64,ce=Float64Array){this.nodeSize=J,this.points=R;const me=R.length<65536?Uint16Array:Uint32Array,fe=this.ids=new me(R.length),ue=this.coords=new ce(2*R.length);for(let _e=0;_e<R.length;_e++)fe[_e]=_e,ue[2*_e]=O(R[_e]),ue[2*_e+1]=G(R[_e]);St(fe,ue,J,0,fe.length-1,0)}range(R,O,G,J){return function(ce,me,fe,ue,_e,Ae,Ue){const $e=[0,ce.length-1,0],ft=[];let ct,vt;for(;$e.length;){const ot=$e.pop(),qt=$e.pop(),Wt=$e.pop();if(qt-Wt<=Ue){for(let Vt=Wt;Vt<=qt;Vt++)ct=me[2*Vt],vt=me[2*Vt+1],ct>=fe&&ct<=_e&&vt>=ue&&vt<=Ae&&ft.push(ce[Vt]);continue}const Zt=Math.floor((Wt+qt)/2);ct=me[2*Zt],vt=me[2*Zt+1],ct>=fe&&ct<=_e&&vt>=ue&&vt<=Ae&&ft.push(ce[Zt]);const Ut=(ot+1)%2;(ot===0?fe<=ct:ue<=vt)&&($e.push(Wt),$e.push(Zt-1),$e.push(Ut)),(ot===0?_e>=ct:Ae>=vt)&&($e.push(Zt+1),$e.push(qt),$e.push(Ut))}return ft}(this.ids,this.coords,R,O,G,J,this.nodeSize)}within(R,O,G){return function(J,ce,me,fe,ue,_e){const Ae=[0,J.length-1,0],Ue=[],$e=ue*ue;for(;Ae.length;){const ft=Ae.pop(),ct=Ae.pop(),vt=Ae.pop();if(ct-vt<=_e){for(let Ut=vt;Ut<=ct;Ut++)Kt(ce[2*Ut],ce[2*Ut+1],me,fe)<=$e&&Ue.push(J[Ut]);continue}const ot=Math.floor((vt+ct)/2),qt=ce[2*ot],Wt=ce[2*ot+1];Kt(qt,Wt,me,fe)<=$e&&Ue.push(J[ot]);const Zt=(ft+1)%2;(ft===0?me-ue<=qt:fe-ue<=Wt)&&(Ae.push(vt),Ae.push(ot-1),Ae.push(Zt)),(ft===0?me+ue>=qt:fe+ue>=Wt)&&(Ae.push(ot+1),Ae.push(ct),Ae.push(Zt))}return Ue}(this.ids,this.coords,R,O,G,this.nodeSize)}}const br={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Z=>Z},Qn=Math.fround||(jn=new Float32Array(1),Z=>(jn[0]=+Z,jn[0]));var jn;class si{constructor(R){this.options=kn(Object.create(br),R),this.trees=new Array(this.options.maxZoom+1)}load(R){const{log:O,minZoom:G,maxZoom:J,nodeSize:ce}=this.options;O&&console.time("total time");const me=`prepare ${R.length} points`;O&&console.time(me),this.points=R;let fe=[];for(let ue=0;ue<R.length;ue++)R[ue].geometry&&fe.push(tt(R[ue],ue));this.trees[J+1]=new An(fe,rr,On,ce,Float32Array),O&&console.timeEnd(me);for(let ue=J;ue>=G;ue--){const _e=+Date.now();fe=this._cluster(fe,ue),this.trees[ue]=new An(fe,rr,On,ce,Float32Array),O&&console.log("z%d: %d clusters in %dms",ue,fe.length,+Date.now()-_e)}return O&&console.timeEnd("total time"),this}getClusters(R,O){let G=((R[0]+180)%360+360)%360-180;const J=Math.max(-90,Math.min(90,R[1]));let ce=R[2]===180?180:((R[2]+180)%360+360)%360-180;const me=Math.max(-90,Math.min(90,R[3]));if(R[2]-R[0]>=360)G=-180,ce=180;else if(G>ce){const Ae=this.getClusters([G,J,180,me],O),Ue=this.getClusters([-180,J,ce,me],O);return Ae.concat(Ue)}const fe=this.trees[this._limitZoom(O)],ue=fe.range(dt(G),tn(me),dt(ce),tn(J)),_e=[];for(const Ae of ue){const Ue=fe.points[Ae];_e.push(Ue.numPoints?Ot(Ue):this.points[Ue.index])}return _e}getChildren(R){const O=this._getOriginId(R),G=this._getOriginZoom(R),J="No cluster with the specified id.",ce=this.trees[G];if(!ce)throw new Error(J);const me=ce.points[O];if(!me)throw new Error(J);const fe=this.options.radius/(this.options.extent*Math.pow(2,G-1)),ue=ce.within(me.x,me.y,fe),_e=[];for(const Ae of ue){const Ue=ce.points[Ae];Ue.parentId===R&&_e.push(Ue.numPoints?Ot(Ue):this.points[Ue.index])}if(_e.length===0)throw new Error(J);return _e}getLeaves(R,O,G){const J=[];return this._appendLeaves(J,R,O=O||10,G=G||0,0),J}getTile(R,O,G){const J=this.trees[this._limitZoom(R)],ce=Math.pow(2,R),{extent:me,radius:fe}=this.options,ue=fe/me,_e=(G-ue)/ce,Ae=(G+1+ue)/ce,Ue={features:[]};return this._addTileFeatures(J.range((O-ue)/ce,_e,(O+1+ue)/ce,Ae),J.points,O,G,ce,Ue),O===0&&this._addTileFeatures(J.range(1-ue/ce,_e,1,Ae),J.points,ce,G,ce,Ue),O===ce-1&&this._addTileFeatures(J.range(0,_e,ue/ce,Ae),J.points,-1,G,ce,Ue),Ue.features.length?Ue:null}getClusterExpansionZoom(R){let O=this._getOriginZoom(R)-1;for(;O<=this.options.maxZoom;){const G=this.getChildren(R);if(O++,G.length!==1)break;R=G[0].properties.cluster_id}return O}_appendLeaves(R,O,G,J,ce){const me=this.getChildren(O);for(const fe of me){const ue=fe.properties;if(ue&&ue.cluster?ce+ue.point_count<=J?ce+=ue.point_count:ce=this._appendLeaves(R,ue.cluster_id,G,J,ce):ce<J?ce++:R.push(fe),R.length===G)break}return ce}_addTileFeatures(R,O,G,J,ce,me){for(const fe of R){const ue=O[fe],_e=ue.numPoints;let Ae,Ue,$e;if(_e)Ae=ln(ue),Ue=ue.x,$e=ue.y;else{const vt=this.points[ue.index];Ae=vt.properties,Ue=dt(vt.geometry.coordinates[0]),$e=tn(vt.geometry.coordinates[1])}const ft={type:1,geometry:[[Math.round(this.options.extent*(Ue*ce-G)),Math.round(this.options.extent*($e*ce-J))]],tags:Ae};let ct;_e?ct=ue.id:this.options.generateId?ct=ue.index:this.points[ue.index].id&&(ct=this.points[ue.index].id),ct!==void 0&&(ft.id=ct),me.features.push(ft)}}_limitZoom(R){return Math.max(this.options.minZoom,Math.min(Math.floor(+R),this.options.maxZoom+1))}_cluster(R,O){const G=[],{radius:J,extent:ce,reduce:me,minPoints:fe}=this.options,ue=J/(ce*Math.pow(2,O));for(let _e=0;_e<R.length;_e++){const Ae=R[_e];if(Ae.zoom<=O)continue;Ae.zoom=O;const Ue=this.trees[O+1],$e=Ue.within(Ae.x,Ae.y,ue),ft=Ae.numPoints||1;let ct=ft;for(const vt of $e){const ot=Ue.points[vt];ot.zoom>O&&(ct+=ot.numPoints||1)}if(ct>ft&&ct>=fe){let vt=Ae.x*ft,ot=Ae.y*ft,qt=me&&ft>1?this._map(Ae,!0):null;const Wt=(_e<<5)+(O+1)+this.points.length;for(const Zt of $e){const Ut=Ue.points[Zt];if(Ut.zoom<=O)continue;Ut.zoom=O;const Vt=Ut.numPoints||1;vt+=Ut.x*Vt,ot+=Ut.y*Vt,Ut.parentId=Wt,me&&(qt||(qt=this._map(Ae,!0)),me(qt,this._map(Ut)))}Ae.parentId=Wt,G.push(Qe(vt/ct,ot/ct,Wt,ct,qt))}else if(G.push(Ae),ct>1)for(const vt of $e){const ot=Ue.points[vt];ot.zoom<=O||(ot.zoom=O,G.push(ot))}}return G}_getOriginId(R){return R-this.points.length>>5}_getOriginZoom(R){return(R-this.points.length)%32}_map(R,O){if(R.numPoints)return O?kn({},R.properties):R.properties;const G=this.points[R.index].properties,J=this.options.map(G);return O&&J===G?kn({},J):J}}function Qe(Z,R,O,G,J){return{x:Qn(Z),y:Qn(R),zoom:1/0,id:O,parentId:-1,numPoints:G,properties:J}}function tt(Z,R){const[O,G]=Z.geometry.coordinates;return{x:Qn(dt(O)),y:Qn(tn(G)),zoom:1/0,index:R,parentId:-1}}function Ot(Z){return{type:"Feature",id:Z.id,properties:ln(Z),geometry:{type:"Point",coordinates:[(R=Z.x,360*(R-.5)),Br(Z.y)]}};var R}function ln(Z){const R=Z.numPoints,O=R>=1e4?`${Math.round(R/1e3)}k`:R>=1e3?Math.round(R/100)/10+"k":R;return kn(kn({},Z.properties),{cluster:!0,cluster_id:Z.id,point_count:R,point_count_abbreviated:O})}function dt(Z){return Z/360+.5}function tn(Z){const R=Math.sin(Z*Math.PI/180),O=.5-.25*Math.log((1+R)/(1-R))/Math.PI;return O<0?0:O>1?1:O}function Br(Z){const R=(180-360*Z)*Math.PI/180;return 360*Math.atan(Math.exp(R))/Math.PI-90}function kn(Z,R){for(const O in R)Z[O]=R[O];return Z}function rr(Z){return Z.x}function On(Z){return Z.y}function Fr(Z,R,O,G){for(var J,ce=G,me=O-R>>1,fe=O-R,ue=Z[R],_e=Z[R+1],Ae=Z[O],Ue=Z[O+1],$e=R+3;$e<O;$e+=3){var ft=Hr(Z[$e],Z[$e+1],ue,_e,Ae,Ue);if(ft>ce)J=$e,ce=ft;else if(ft===ce){var ct=Math.abs($e-me);ct<fe&&(J=$e,fe=ct)}}ce>G&&(J-R>3&&Fr(Z,R,J,G),Z[J+2]=ce,O-J>3&&Fr(Z,J,O,G))}function Hr(Z,R,O,G,J,ce){var me=J-O,fe=ce-G;if(me!==0||fe!==0){var ue=((Z-O)*me+(R-G)*fe)/(me*me+fe*fe);ue>1?(O=J,G=ce):ue>0&&(O+=me*ue,G+=fe*ue)}return(me=Z-O)*me+(fe=R-G)*fe}function Le(Z,R,O,G){var J={id:Z===void 0?null:Z,type:R,geometry:O,tags:G,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ce){var me=ce.geometry,fe=ce.type;if(fe==="Point"||fe==="MultiPoint"||fe==="LineString")Xe(ce,me);else if(fe==="Polygon"||fe==="MultiLineString")for(var ue=0;ue<me.length;ue++)Xe(ce,me[ue]);else if(fe==="MultiPolygon")for(ue=0;ue<me.length;ue++)for(var _e=0;_e<me[ue].length;_e++)Xe(ce,me[ue][_e])}(J),J}function Xe(Z,R){for(var O=0;O<R.length;O+=3)Z.minX=Math.min(Z.minX,R[O]),Z.minY=Math.min(Z.minY,R[O+1]),Z.maxX=Math.max(Z.maxX,R[O]),Z.maxY=Math.max(Z.maxY,R[O+1])}function Sr(Z,R,O,G){if(R.geometry){var J=R.geometry.coordinates,ce=R.geometry.type,me=Math.pow(O.tolerance/((1<<O.maxZoom)*O.extent),2),fe=[],ue=R.id;if(O.promoteId?ue=R.properties[O.promoteId]:O.generateId&&(ue=G||0),ce==="Point")ir(J,fe);else if(ce==="MultiPoint")for(var _e=0;_e<J.length;_e++)ir(J[_e],fe);else if(ce==="LineString")dn(J,fe,me,!1);else if(ce==="MultiLineString"){if(O.lineMetrics){for(_e=0;_e<J.length;_e++)dn(J[_e],fe=[],me,!1),Z.push(Le(ue,"LineString",fe,R.properties));return}Sn(J,fe,me,!1)}else if(ce==="Polygon")Sn(J,fe,me,!0);else{if(ce!=="MultiPolygon"){if(ce==="GeometryCollection"){for(_e=0;_e<R.geometry.geometries.length;_e++)Sr(Z,{id:ue,geometry:R.geometry.geometries[_e],properties:R.properties},O,G);return}throw new Error("Input data is not a valid GeoJSON object.")}for(_e=0;_e<J.length;_e++){var Ae=[];Sn(J[_e],Ae,me,!0),fe.push(Ae)}}Z.push(Le(ue,ce,fe,R.properties))}}function ir(Z,R){R.push(er(Z[0])),R.push(ji(Z[1])),R.push(0)}function dn(Z,R,O,G){for(var J,ce,me=0,fe=0;fe<Z.length;fe++){var ue=er(Z[fe][0]),_e=ji(Z[fe][1]);R.push(ue),R.push(_e),R.push(0),fe>0&&(me+=G?(J*_e-ue*ce)/2:Math.sqrt(Math.pow(ue-J,2)+Math.pow(_e-ce,2))),J=ue,ce=_e}var Ae=R.length-3;R[2]=1,Fr(R,0,Ae,O),R[Ae+2]=1,R.size=Math.abs(me),R.start=0,R.end=R.size}function Sn(Z,R,O,G){for(var J=0;J<Z.length;J++){var ce=[];dn(Z[J],ce,O,G),R.push(ce)}}function er(Z){return Z/360+.5}function ji(Z){var R=Math.sin(Z*Math.PI/180),O=.5-.25*Math.log((1+R)/(1-R))/Math.PI;return O<0?0:O>1?1:O}function fr(Z,R,O,G,J,ce,me,fe){if(G/=R,ce>=(O/=R)&&me<G)return Z;if(me<O||ce>=G)return null;for(var ue=[],_e=0;_e<Z.length;_e++){var Ae=Z[_e],Ue=Ae.geometry,$e=Ae.type,ft=J===0?Ae.minX:Ae.minY,ct=J===0?Ae.maxX:Ae.maxY;if(ft>=O&&ct<G)ue.push(Ae);else if(!(ct<O||ft>=G)){var vt=[];if($e==="Point"||$e==="MultiPoint")et(Ue,vt,O,G,J);else if($e==="LineString")Bt(Ue,vt,O,G,J,!1,fe.lineMetrics);else if($e==="MultiLineString")tr(Ue,vt,O,G,J,!1);else if($e==="Polygon")tr(Ue,vt,O,G,J,!0);else if($e==="MultiPolygon")for(var ot=0;ot<Ue.length;ot++){var qt=[];tr(Ue[ot],qt,O,G,J,!0),qt.length&&vt.push(qt)}if(vt.length){if(fe.lineMetrics&&$e==="LineString"){for(ot=0;ot<vt.length;ot++)ue.push(Le(Ae.id,$e,vt[ot],Ae.tags));continue}$e!=="LineString"&&$e!=="MultiLineString"||(vt.length===1?($e="LineString",vt=vt[0]):$e="MultiLineString"),$e!=="Point"&&$e!=="MultiPoint"||($e=vt.length===3?"Point":"MultiPoint"),ue.push(Le(Ae.id,$e,vt,Ae.tags))}}}return ue.length?ue:null}function et(Z,R,O,G,J){for(var ce=0;ce<Z.length;ce+=3){var me=Z[ce+J];me>=O&&me<=G&&(R.push(Z[ce]),R.push(Z[ce+1]),R.push(Z[ce+2]))}}function Bt(Z,R,O,G,J,ce,me){for(var fe,ue,_e=Rt(Z),Ae=J===0?Lt:or,Ue=Z.start,$e=0;$e<Z.length-3;$e+=3){var ft=Z[$e],ct=Z[$e+1],vt=Z[$e+2],ot=Z[$e+3],qt=Z[$e+4],Wt=J===0?ft:ct,Zt=J===0?ot:qt,Ut=!1;me&&(fe=Math.sqrt(Math.pow(ft-ot,2)+Math.pow(ct-qt,2))),Wt<O?Zt>O&&(ue=Ae(_e,ft,ct,ot,qt,O),me&&(_e.start=Ue+fe*ue)):Wt>G?Zt<G&&(ue=Ae(_e,ft,ct,ot,qt,G),me&&(_e.start=Ue+fe*ue)):lr(_e,ft,ct,vt),Zt<O&&Wt>=O&&(ue=Ae(_e,ft,ct,ot,qt,O),Ut=!0),Zt>G&&Wt<=G&&(ue=Ae(_e,ft,ct,ot,qt,G),Ut=!0),!ce&&Ut&&(me&&(_e.end=Ue+fe*ue),R.push(_e),_e=Rt(Z)),me&&(Ue+=fe)}var Vt=Z.length-3;ft=Z[Vt],ct=Z[Vt+1],vt=Z[Vt+2],(Wt=J===0?ft:ct)>=O&&Wt<=G&&lr(_e,ft,ct,vt),Vt=_e.length-3,ce&&Vt>=3&&(_e[Vt]!==_e[0]||_e[Vt+1]!==_e[1])&&lr(_e,_e[0],_e[1],_e[2]),_e.length&&R.push(_e)}function Rt(Z){var R=[];return R.size=Z.size,R.start=Z.start,R.end=Z.end,R}function tr(Z,R,O,G,J,ce){for(var me=0;me<Z.length;me++)Bt(Z[me],R,O,G,J,ce,!1)}function lr(Z,R,O,G){Z.push(R),Z.push(O),Z.push(G)}function Lt(Z,R,O,G,J,ce){var me=(ce-R)/(G-R);return Z.push(ce),Z.push(O+(J-O)*me),Z.push(1),me}function or(Z,R,O,G,J,ce){var me=(ce-O)/(J-O);return Z.push(R+(G-R)*me),Z.push(ce),Z.push(1),me}function Gr(Z,R){for(var O=[],G=0;G<Z.length;G++){var J,ce=Z[G],me=ce.type;if(me==="Point"||me==="MultiPoint"||me==="LineString")J=je(ce.geometry,R);else if(me==="MultiLineString"||me==="Polygon"){J=[];for(var fe=0;fe<ce.geometry.length;fe++)J.push(je(ce.geometry[fe],R))}else if(me==="MultiPolygon")for(J=[],fe=0;fe<ce.geometry.length;fe++){for(var ue=[],_e=0;_e<ce.geometry[fe].length;_e++)ue.push(je(ce.geometry[fe][_e],R));J.push(ue)}O.push(Le(ce.id,me,J,ce.tags))}return O}function je(Z,R){var O=[];O.size=Z.size,Z.start!==void 0&&(O.start=Z.start,O.end=Z.end);for(var G=0;G<Z.length;G+=3)O.push(Z[G]+R,Z[G+1],Z[G+2]);return O}function It(Z,R){if(Z.transformed)return Z;var O,G,J,ce=1<<Z.z,me=Z.x,fe=Z.y;for(O=0;O<Z.features.length;O++){var ue=Z.features[O],_e=ue.geometry,Ae=ue.type;if(ue.geometry=[],Ae===1)for(G=0;G<_e.length;G+=2)ue.geometry.push($t(_e[G],_e[G+1],R,ce,me,fe));else for(G=0;G<_e.length;G++){var Ue=[];for(J=0;J<_e[G].length;J+=2)Ue.push($t(_e[G][J],_e[G][J+1],R,ce,me,fe));ue.geometry.push(Ue)}}return Z.transformed=!0,Z}function $t(Z,R,O,G,J,ce){return[Math.round(O*(Z*G-J)),Math.round(O*(R*G-ce))]}function mn(Z,R,O,G,J){for(var ce=R===J.maxZoom?0:J.tolerance/((1<<R)*J.extent),me={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:O,y:G,z:R,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},fe=0;fe<Z.length;fe++){me.numFeatures++,yi(me,Z[fe],ce,J);var ue=Z[fe].minX,_e=Z[fe].minY,Ae=Z[fe].maxX,Ue=Z[fe].maxY;ue<me.minX&&(me.minX=ue),_e<me.minY&&(me.minY=_e),Ae>me.maxX&&(me.maxX=Ae),Ue>me.maxY&&(me.maxY=Ue)}return me}function yi(Z,R,O,G){var J=R.geometry,ce=R.type,me=[];if(ce==="Point"||ce==="MultiPoint")for(var fe=0;fe<J.length;fe+=3)me.push(J[fe]),me.push(J[fe+1]),Z.numPoints++,Z.numSimplified++;else if(ce==="LineString")Er(me,J,Z,O,!1,!1);else if(ce==="MultiLineString"||ce==="Polygon")for(fe=0;fe<J.length;fe++)Er(me,J[fe],Z,O,ce==="Polygon",fe===0);else if(ce==="MultiPolygon")for(var ue=0;ue<J.length;ue++){var _e=J[ue];for(fe=0;fe<_e.length;fe++)Er(me,_e[fe],Z,O,!0,fe===0)}if(me.length){var Ae=R.tags||null;if(ce==="LineString"&&G.lineMetrics){for(var Ue in Ae={},R.tags)Ae[Ue]=R.tags[Ue];Ae.mapbox_clip_start=J.start/J.size,Ae.mapbox_clip_end=J.end/J.size}var $e={geometry:me,type:ce==="Polygon"||ce==="MultiPolygon"?3:ce==="LineString"||ce==="MultiLineString"?2:1,tags:Ae};R.id!==null&&($e.id=R.id),Z.features.push($e)}}function Er(Z,R,O,G,J,ce){var me=G*G;if(G>0&&R.size<(J?me:G))O.numPoints+=R.length/3;else{for(var fe=[],ue=0;ue<R.length;ue+=3)(G===0||R[ue+2]>me)&&(O.numSimplified++,fe.push(R[ue]),fe.push(R[ue+1])),O.numPoints++;J&&function(_e,Ae){for(var Ue=0,$e=0,ft=_e.length,ct=ft-2;$e<ft;ct=$e,$e+=2)Ue+=(_e[$e]-_e[ct])*(_e[$e+1]+_e[ct+1]);if(Ue>0===Ae)for($e=0,ft=_e.length;$e<ft/2;$e+=2){var vt=_e[$e],ot=_e[$e+1];_e[$e]=_e[ft-2-$e],_e[$e+1]=_e[ft-1-$e],_e[ft-2-$e]=vt,_e[ft-1-$e]=ot}}(fe,ce),Z.push(fe)}}function ai(Z,R){var O=(R=this.options=function(J,ce){for(var me in ce)J[me]=ce[me];return J}(Object.create(this.options),R)).debug;if(O&&console.time("preprocess data"),R.maxZoom<0||R.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(R.promoteId&&R.generateId)throw new Error("promoteId and generateId cannot be used together.");var G=function(J,ce){var me=[];if(J.type==="FeatureCollection")for(var fe=0;fe<J.features.length;fe++)Sr(me,J.features[fe],ce,fe);else Sr(me,J.type==="Feature"?J:{geometry:J},ce);return me}(Z,R);this.tiles={},this.tileCoords=[],O&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",R.indexMaxZoom,R.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),G=function(J,ce){var me=ce.buffer/ce.extent,fe=J,ue=fr(J,1,-1-me,me,0,-1,2,ce),_e=fr(J,1,1-me,2+me,0,-1,2,ce);return(ue||_e)&&(fe=fr(J,1,-me,1+me,0,-1,2,ce)||[],ue&&(fe=Gr(ue,1).concat(fe)),_e&&(fe=fe.concat(Gr(_e,-1)))),fe}(G,R),G.length&&this.splitTile(G,0,0,0),O&&(G.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function vi(Z,R,O){return 32*((1<<Z)*O+R)+Z}function Gi(Z,R){const O=Z.tileID.canonical;if(!this._geoJSONIndex)return R(null,null);const G=this._geoJSONIndex.getTile(O.z,O.x,O.y);if(!G)return R(null,null);const J=new Ke(G.features);let ce=Je.exports(J);ce.byteOffset===0&&ce.byteLength===ce.buffer.byteLength||(ce=new Uint8Array(ce)),R(null,{vectorTile:J,rawData:ce.buffer})}ai.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ai.prototype.splitTile=function(Z,R,O,G,J,ce,me){for(var fe=[Z,R,O,G],ue=this.options,_e=ue.debug;fe.length;){G=fe.pop(),O=fe.pop(),R=fe.pop(),Z=fe.pop();var Ae=1<<R,Ue=vi(R,O,G),$e=this.tiles[Ue];if(!$e&&(_e>1&&console.time("creation"),$e=this.tiles[Ue]=mn(Z,R,O,G,ue),this.tileCoords.push({z:R,x:O,y:G}),_e)){_e>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",R,O,G,$e.numFeatures,$e.numPoints,$e.numSimplified),console.timeEnd("creation"));var ft="z"+R;this.stats[ft]=(this.stats[ft]||0)+1,this.total++}if($e.source=Z,J){if(R===ue.maxZoom||R===J)continue;var ct=1<<J-R;if(O!==Math.floor(ce/ct)||G!==Math.floor(me/ct))continue}else if(R===ue.indexMaxZoom||$e.numPoints<=ue.indexMaxPoints)continue;if($e.source=null,Z.length!==0){_e>1&&console.time("clipping");var vt,ot,qt,Wt,Zt,Ut,Vt=.5*ue.buffer/ue.extent,$n=.5-Vt,Ln=.5+Vt,bn=1+Vt;vt=ot=qt=Wt=null,Zt=fr(Z,Ae,O-Vt,O+Ln,0,$e.minX,$e.maxX,ue),Ut=fr(Z,Ae,O+$n,O+bn,0,$e.minX,$e.maxX,ue),Z=null,Zt&&(vt=fr(Zt,Ae,G-Vt,G+Ln,1,$e.minY,$e.maxY,ue),ot=fr(Zt,Ae,G+$n,G+bn,1,$e.minY,$e.maxY,ue),Zt=null),Ut&&(qt=fr(Ut,Ae,G-Vt,G+Ln,1,$e.minY,$e.maxY,ue),Wt=fr(Ut,Ae,G+$n,G+bn,1,$e.minY,$e.maxY,ue),Ut=null),_e>1&&console.timeEnd("clipping"),fe.push(vt||[],R+1,2*O,2*G),fe.push(ot||[],R+1,2*O,2*G+1),fe.push(qt||[],R+1,2*O+1,2*G),fe.push(Wt||[],R+1,2*O+1,2*G+1)}}},ai.prototype.getTile=function(Z,R,O){var G=this.options,J=G.extent,ce=G.debug;if(Z<0||Z>24)return null;var me=1<<Z,fe=vi(Z,R=(R%me+me)%me,O);if(this.tiles[fe])return It(this.tiles[fe],J);ce>1&&console.log("drilling down to z%d-%d-%d",Z,R,O);for(var ue,_e=Z,Ae=R,Ue=O;!ue&&_e>0;)_e--,Ae=Math.floor(Ae/2),Ue=Math.floor(Ue/2),ue=this.tiles[vi(_e,Ae,Ue)];return ue&&ue.source?(ce>1&&console.log("found parent tile z%d-%d-%d",_e,Ae,Ue),ce>1&&console.time("drilling down"),this.splitTile(ue.source,_e,Ae,Ue,Z,R,O),ce>1&&console.timeEnd("drilling down"),this.tiles[fe]?It(this.tiles[fe],J):null):null};class la extends W{constructor(R,O,G,J){super(R,O,G,Gi),J&&(this.loadGeoJSON=J)}loadData(R,O){var G;(G=this._pendingRequest)===null||G===void 0||G.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const J=!!(R&&R.request&&R.request.collectResourceTiming)&&new c.RequestPerformance(R.request);this._pendingCallback=O,this._pendingRequest=this.loadGeoJSON(R,(ce,me)=>{if(delete this._pendingCallback,delete this._pendingRequest,ce||!me)return O(ce);if(typeof me!="object")return O(new Error(`Input data given to '${R.source}' is not a valid GeoJSON object.`));{pe(me,!0);try{if(R.filter){const ue=c.createExpression(R.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ue.result==="error")throw new Error(ue.value.map(Ae=>`${Ae.key}: ${Ae.message}`).join(", "));me={type:"FeatureCollection",features:me.features.filter(Ae=>ue.value.evaluate({zoom:0},Ae))}}this._geoJSONIndex=R.cluster?new si(function({superclusterOptions:ue,clusterProperties:_e}){if(!_e||!ue)return ue;const Ae={},Ue={},$e={accumulated:null,zoom:0},ft={properties:null},ct=Object.keys(_e);for(const vt of ct){const[ot,qt]=_e[vt],Wt=c.createExpression(qt),Zt=c.createExpression(typeof ot=="string"?[ot,["accumulated"],["get",vt]]:ot);Ae[vt]=Wt.value,Ue[vt]=Zt.value}return ue.map=vt=>{ft.properties=vt;const ot={};for(const qt of ct)ot[qt]=Ae[qt].evaluate($e,ft);return ot},ue.reduce=(vt,ot)=>{ft.properties=ot;for(const qt of ct)$e.accumulated=vt[qt],vt[qt]=Ue[qt].evaluate($e,ft)},ue}(R)).load(me.features):function(ue,_e){return new ai(ue,_e)}(me,R.geojsonVtOptions)}catch(ue){return O(ue)}this.loaded={};const fe={};if(J){const ue=J.finish();ue&&(fe.resourceTiming={},fe.resourceTiming[R.source]=JSON.parse(JSON.stringify(ue)))}O(null,fe)}})}reloadTile(R,O){const G=this.loaded;return G&&G[R.uid]?super.reloadTile(R,O):this.loadTile(R,O)}loadGeoJSON(R,O){if(R.request)return c.getJSON(R.request,O);if(typeof R.data=="string")try{O(null,JSON.parse(R.data))}catch{O(new Error(`Input data given to '${R.source}' is not a valid GeoJSON object.`))}else O(new Error(`Input data given to '${R.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(R,O){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),O()}getClusterExpansionZoom(R,O){try{O(null,this._geoJSONIndex.getClusterExpansionZoom(R.clusterId))}catch(G){O(G)}}getClusterChildren(R,O){try{O(null,this._geoJSONIndex.getChildren(R.clusterId))}catch(G){O(G)}}getClusterLeaves(R,O){try{O(null,this._geoJSONIndex.getLeaves(R.clusterId,R.limit,R.offset))}catch(G){O(G)}}}class Kr{constructor(R){this.self=R,this.actor=new c.Actor(R,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:W,geojson:la},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(O,G)=>{if(this.workerSourceTypes[O])throw new Error(`Worker source with name "${O}" already registered.`);this.workerSourceTypes[O]=G},this.self.registerRTLTextPlugin=O=>{if(c.plugin.isParsed())throw new Error("RTL text plugin already registered.");c.plugin.applyArabicShaping=O.applyArabicShaping,c.plugin.processBidirectionalText=O.processBidirectionalText,c.plugin.processStyledBidirectionalText=O.processStyledBidirectionalText}}setReferrer(R,O){this.referrer=O}setImages(R,O,G){this.availableImages[R]=O;for(const J in this.workerSources[R]){const ce=this.workerSources[R][J];for(const me in ce)ce[me].availableImages=O}G()}setLayers(R,O,G){this.getLayerIndex(R).replace(O),G()}updateLayers(R,O,G){this.getLayerIndex(R).update(O.layers,O.removedIds),G()}loadTile(R,O,G){this.getWorkerSource(R,O.type,O.source).loadTile(O,G)}loadDEMTile(R,O,G){this.getDEMWorkerSource(R,O.source).loadTile(O,G)}reloadTile(R,O,G){this.getWorkerSource(R,O.type,O.source).reloadTile(O,G)}abortTile(R,O,G){this.getWorkerSource(R,O.type,O.source).abortTile(O,G)}removeTile(R,O,G){this.getWorkerSource(R,O.type,O.source).removeTile(O,G)}removeDEMTile(R,O){this.getDEMWorkerSource(R,O.source).removeTile(O)}removeSource(R,O,G){if(!this.workerSources[R]||!this.workerSources[R][O.type]||!this.workerSources[R][O.type][O.source])return;const J=this.workerSources[R][O.type][O.source];delete this.workerSources[R][O.type][O.source],J.removeSource!==void 0?J.removeSource(O,G):G()}loadWorkerSource(R,O,G){try{this.self.importScripts(O.url),G()}catch(J){G(J.toString())}}syncRTLPluginState(R,O,G){try{c.plugin.setState(O);const J=c.plugin.getPluginURL();if(c.plugin.isLoaded()&&!c.plugin.isParsed()&&J!=null){this.self.importScripts(J);const ce=c.plugin.isParsed();G(ce?void 0:new Error(`RTL Text Plugin failed to import scripts from ${J}`),ce)}}catch(J){G(J.toString())}}getAvailableImages(R){let O=this.availableImages[R];return O||(O=[]),O}getLayerIndex(R){let O=this.layerIndexes[R];return O||(O=this.layerIndexes[R]=new $),O}getWorkerSource(R,O,G){if(this.workerSources[R]||(this.workerSources[R]={}),this.workerSources[R][O]||(this.workerSources[R][O]={}),!this.workerSources[R][O][G]){const J={send:(ce,me,fe)=>{this.actor.send(ce,me,fe,R)}};this.workerSources[R][O][G]=new this.workerSourceTypes[O](J,this.getLayerIndex(R),this.getAvailableImages(R))}return this.workerSources[R][O][G]}getDEMWorkerSource(R,O){return this.demWorkerSources[R]||(this.demWorkerSources[R]={}),this.demWorkerSources[R][O]||(this.demWorkerSources[R][O]=new Y),this.demWorkerSources[R][O]}enforceCacheSizeLimit(R,O){c.enforceCacheSizeLimit(O)}}return c.isWorker()&&(self.worker=new Kr(self)),Kr}),T(["./shared"],function(c){var B=j;function j(f){return!function(n){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var h,m,b=new Blob([""],{type:"text/javascript"}),k=URL.createObjectURL(b);try{m=new Worker(k),h=!0}catch{h=!1}return m&&m.terminate(),URL.revokeObjectURL(k),h}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var h=document.createElement("canvas");h.width=h.height=1;var m=h.getContext("2d");if(!m)return!1;var b=m.getImageData(0,0,1,1);return b&&b.width===h.width}()?($[s=n&&n.failIfMajorPerformanceCaveat]===void 0&&($[s]=function(h){var m,b=function(k){var P=document.createElement("canvas"),I=Object.create(j.webGLContextAttributes);return I.failIfMajorPerformanceCaveat=k,P.getContext("webgl",I)||P.getContext("experimental-webgl",I)}(h);if(!b)return!1;try{m=b.createShader(b.VERTEX_SHADER)}catch{return!1}return!(!m||b.isContextLost())&&(b.shaderSource(m,"void main() {}"),b.compileShader(m),b.getShaderParameter(m,b.COMPILE_STATUS)===!0)}(s)),$[s]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var s}(f)}var $={};function D(f,n){if(Array.isArray(f)){if(!Array.isArray(n)||f.length!==n.length)return!1;for(let s=0;s<f.length;s++)if(!D(f[s],n[s]))return!1;return!0}if(typeof f=="object"&&f!==null&&n!==null){if(typeof n!="object"||Object.keys(f).length!==Object.keys(n).length)return!1;for(const s in f)if(!D(f[s],n[s]))return!1;return!0}return f===n}j.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class F{static testProp(n){if(!F.docStyle)return n[0];for(let s=0;s<n.length;s++)if(n[s]in F.docStyle)return n[s];return n[0]}static create(n,s,h){const m=window.document.createElement(n);return s!==void 0&&(m.className=s),h&&h.appendChild(m),m}static createNS(n,s){return window.document.createElementNS(n,s)}static disableDrag(){F.docStyle&&F.selectProp&&(F.userSelect=F.docStyle[F.selectProp],F.docStyle[F.selectProp]="none")}static enableDrag(){F.docStyle&&F.selectProp&&(F.docStyle[F.selectProp]=F.userSelect)}static setTransform(n,s){n.style[F.transformProp]=s}static addEventListener(n,s,h,m={}){n.addEventListener(s,h,"passive"in m?m:m.capture)}static removeEventListener(n,s,h,m={}){n.removeEventListener(s,h,"passive"in m?m:m.capture)}static suppressClickInternal(n){n.preventDefault(),n.stopPropagation(),window.removeEventListener("click",F.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",F.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",F.suppressClickInternal,!0)},0)}static mousePos(n,s){const h=n.getBoundingClientRect();return new c.pointGeometry(s.clientX-h.left-n.clientLeft,s.clientY-h.top-n.clientTop)}static touchPos(n,s){const h=n.getBoundingClientRect(),m=[];for(let b=0;b<s.length;b++)m.push(new c.pointGeometry(s[b].clientX-h.left-n.clientLeft,s[b].clientY-h.top-n.clientTop));return m}static mouseButton(n){return n.button}static remove(n){n.parentNode&&n.parentNode.removeChild(n)}}F.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,F.selectProp=F.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),F.transformProp=F.testProp(["transform","WebkitTransform"]);class te{constructor(n){this._transformRequestFn=n}transformRequest(n,s){return this._transformRequestFn&&this._transformRequestFn(n,s)||{url:n}}normalizeSpriteURL(n,s,h){const m=function(b){const k=b.match(ie);if(!k)throw new Error(`Unable to parse URL "${b}"`);return{protocol:k[1],authority:k[2],path:k[3]||"/",params:k[4]?k[4].split("&"):[]}}(n);return m.path+=`${s}${h}`,function(b){const k=b.params.length?`?${b.params.join("&")}`:"";return`${b.protocol}://${b.authority}${b.path}${k}`}(m)}setTransformRequest(n){this._transformRequestFn=n}}const ie=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class W{constructor(n,s,h,m){this.context=n,this.format=h,this.texture=n.gl.createTexture(),this.update(s,m)}update(n,s,h){const{width:m,height:b}=n,k=!(this.size&&this.size[0]===m&&this.size[1]===b||h),{context:P}=this,{gl:I}=P;if(this.useMipmap=!!(s&&s.useMipmap),I.bindTexture(I.TEXTURE_2D,this.texture),P.pixelStoreUnpackFlipY.set(!1),P.pixelStoreUnpack.set(1),P.pixelStoreUnpackPremultiplyAlpha.set(this.format===I.RGBA&&(!s||s.premultiply!==!1)),k)this.size=[m,b],n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||c.isImageBitmap(n)?I.texImage2D(I.TEXTURE_2D,0,this.format,this.format,I.UNSIGNED_BYTE,n):I.texImage2D(I.TEXTURE_2D,0,this.format,m,b,0,this.format,I.UNSIGNED_BYTE,n.data);else{const{x:z,y:N}=h||{x:0,y:0};n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||c.isImageBitmap(n)?I.texSubImage2D(I.TEXTURE_2D,0,z,N,I.RGBA,I.UNSIGNED_BYTE,n):I.texSubImage2D(I.TEXTURE_2D,0,z,N,m,b,I.RGBA,I.UNSIGNED_BYTE,n.data)}this.useMipmap&&this.isSizePowerOfTwo()&&I.generateMipmap(I.TEXTURE_2D)}bind(n,s,h){const{context:m}=this,{gl:b}=m;b.bindTexture(b.TEXTURE_2D,this.texture),h!==b.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(h=b.LINEAR),n!==this.filter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,n),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,h||n),this.filter=n),s!==this.wrap&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,s),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,s),this.wrap=s)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}function Y(f){const{userImage:n}=f;return!!(n&&n.render&&n.render())&&(f.data.replace(new Uint8Array(n.data.buffer)),!0)}class pe extends c.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(n){if(this.loaded!==n&&(this.loaded=n,n)){for(const{ids:s,callback:h}of this.requestors)this._notify(s,h);this.requestors=[]}}getImage(n){return this.images[n]}addImage(n,s){if(this.images[n])throw new Error(`Image id ${n} already exist, use updateImage instead`);this._validate(n,s)&&(this.images[n]=s)}_validate(n,s){let h=!0;return this._validateStretch(s.stretchX,s.data&&s.data.width)||(this.fire(new c.ErrorEvent(new Error(`Image "${n}" has invalid "stretchX" value`))),h=!1),this._validateStretch(s.stretchY,s.data&&s.data.height)||(this.fire(new c.ErrorEvent(new Error(`Image "${n}" has invalid "stretchY" value`))),h=!1),this._validateContent(s.content,s)||(this.fire(new c.ErrorEvent(new Error(`Image "${n}" has invalid "content" value`))),h=!1),h}_validateStretch(n,s){if(!n)return!0;let h=0;for(const m of n){if(m[0]<h||m[1]<m[0]||s<m[1])return!1;h=m[1]}return!0}_validateContent(n,s){return!(n&&(n.length!==4||n[0]<0||s.data.width<n[0]||n[1]<0||s.data.height<n[1]||n[2]<0||s.data.width<n[2]||n[3]<0||s.data.height<n[3]||n[2]<n[0]||n[3]<n[1]))}updateImage(n,s){const h=this.images[n];if(h.data.width!==s.data.width||h.data.height!==s.data.height)throw new Error(`size mismatch between old image (${h.data.width}x${h.data.height}) and new image (${s.data.width}x${s.data.height}).`);s.version=h.version+1,this.images[n]=s,this.updatedImages[n]=!0}removeImage(n){const s=this.images[n];delete this.images[n],delete this.patterns[n],s.userImage&&s.userImage.onRemove&&s.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(n,s){let h=!0;if(!this.isLoaded())for(const m of n)this.images[m]||(h=!1);this.isLoaded()||h?this._notify(n,s):this.requestors.push({ids:n,callback:s})}_notify(n,s){const h={};for(const m of n){this.images[m]||this.fire(new c.Event("styleimagemissing",{id:m}));const b=this.images[m];b?h[m]={data:b.data.clone(),pixelRatio:b.pixelRatio,sdf:b.sdf,version:b.version,stretchX:b.stretchX,stretchY:b.stretchY,content:b.content,hasRenderCallback:!!(b.userImage&&b.userImage.render)}:c.warnOnce(`Image "${m}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}s(null,h)}getPixelSize(){const{width:n,height:s}=this.atlasImage;return{width:n,height:s}}getPattern(n){const s=this.patterns[n],h=this.getImage(n);if(!h)return null;if(s&&s.position.version===h.version)return s.position;if(s)s.position.version=h.version;else{const m={w:h.data.width+2,h:h.data.height+2,x:0,y:0},b=new c.ImagePosition(m,h);this.patterns[n]={bin:m,position:b}}return this._updatePatternAtlas(),this.patterns[n].position}bind(n){const s=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new W(n,this.atlasImage,s.RGBA),this.atlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE)}_updatePatternAtlas(){const n=[];for(const b in this.patterns)n.push(this.patterns[b].bin);const{w:s,h}=c.potpack(n),m=this.atlasImage;m.resize({width:s||1,height:h||1});for(const b in this.patterns){const{bin:k}=this.patterns[b],P=k.x+1,I=k.y+1,z=this.images[b].data,N=z.width,U=z.height;c.RGBAImage.copy(z,m,{x:0,y:0},{x:P,y:I},{width:N,height:U}),c.RGBAImage.copy(z,m,{x:0,y:U-1},{x:P,y:I-1},{width:N,height:1}),c.RGBAImage.copy(z,m,{x:0,y:0},{x:P,y:I+U},{width:N,height:1}),c.RGBAImage.copy(z,m,{x:N-1,y:0},{x:P-1,y:I},{width:1,height:U}),c.RGBAImage.copy(z,m,{x:0,y:0},{x:P+N,y:I},{width:1,height:U})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(n){for(const s of n){if(this.callbackDispatchedThisFrame[s])continue;this.callbackDispatchedThisFrame[s]=!0;const h=this.images[s];h||c.warnOnce(`Image with ID: "${s}" was not found`),Y(h)&&this.updateImage(s,h)}}}const ye=1e20;function ve(f,n,s,h,m,b,k,P,I){for(let z=n;z<n+h;z++)Be(f,s*b+z,b,m,k,P,I);for(let z=s;z<s+m;z++)Be(f,z*b+n,1,h,k,P,I)}function Be(f,n,s,h,m,b,k){b[0]=0,k[0]=-1e20,k[1]=ye,m[0]=f[n];for(let P=1,I=0,z=0;P<h;P++){m[P]=f[n+P*s];const N=P*P;do{const U=b[I];z=(m[P]-m[U]+N-U*U)/(P-U)/2}while(z<=k[I]&&--I>-1);I++,b[I]=P,k[I]=z,k[I+1]=ye}for(let P=0,I=0;P<h;P++){for(;k[I+1]<P;)I++;const z=b[I],N=P-z;f[n+P*s]=m[z]+N*N}}class Se{constructor(n,s){this.requestManager=n,this.localIdeographFontFamily=s,this.entries={}}setURL(n){this.url=n}getGlyphs(n,s){const h=[];for(const m in n)for(const b of n[m])h.push({stack:m,id:b});c.asyncAll(h,({stack:m,id:b},k)=>{let P=this.entries[m];P||(P=this.entries[m]={glyphs:{},requests:{},ranges:{}});let I=P.glyphs[b];if(I!==void 0)return void k(null,{stack:m,id:b,glyph:I});if(I=this._tinySDF(P,m,b),I)return P.glyphs[b]=I,void k(null,{stack:m,id:b,glyph:I});const z=Math.floor(b/256);if(256*z>65535)return void k(new Error("glyphs > 65535 not supported"));if(P.ranges[z])return void k(null,{stack:m,id:b,glyph:I});let N=P.requests[z];N||(N=P.requests[z]=[],Se.loadGlyphRange(m,z,this.url,this.requestManager,(U,H)=>{if(H){for(const Q in H)this._doesCharSupportLocalGlyph(+Q)||(P.glyphs[+Q]=H[+Q]);P.ranges[z]=!0}for(const Q of N)Q(U,H);delete P.requests[z]})),N.push((U,H)=>{U?k(U):H&&k(null,{stack:m,id:b,glyph:H[b]||null})})},(m,b)=>{if(m)s(m);else if(b){const k={};for(const{stack:P,id:I,glyph:z}of b)(k[P]||(k[P]={}))[I]=z&&{id:z.id,bitmap:z.bitmap.clone(),metrics:z.metrics};s(null,k)}})}_doesCharSupportLocalGlyph(n){return!!this.localIdeographFontFamily&&(c.unicodeBlockLookup["CJK Unified Ideographs"](n)||c.unicodeBlockLookup["Hangul Syllables"](n)||c.unicodeBlockLookup.Hiragana(n)||c.unicodeBlockLookup.Katakana(n))}_tinySDF(n,s,h){const m=this.localIdeographFontFamily;if(!m||!this._doesCharSupportLocalGlyph(h))return;let b=n.tinySDF;if(!b){let P="400";/bold/i.test(s)?P="900":/medium/i.test(s)?P="500":/light/i.test(s)&&(P="200"),b=n.tinySDF=new Se.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:m,fontWeight:P})}const k=b.draw(String.fromCharCode(h));return{id:h,bitmap:new c.AlphaImage({width:k.width||30,height:k.height||30},k.data),metrics:{width:k.glyphWidth||24,height:k.glyphHeight||24,left:k.glyphLeft||0,top:k.glyphTop-27||-8,advance:k.glyphAdvance||24}}}}Se.loadGlyphRange=function(f,n,s,h,m){const b=256*n,k=b+255,P=h.transformRequest(s.replace("{fontstack}",f).replace("{range}",`${b}-${k}`),c.ResourceType.Glyphs);c.getArrayBuffer(P,(I,z)=>{if(I)m(I);else if(z){const N={};for(const U of c.parseGlyphPbf(z))N[U.id]=U;m(null,N)}})},Se.TinySDF=class{constructor({fontSize:f=24,buffer:n=3,radius:s=8,cutoff:h=.25,fontFamily:m="sans-serif",fontWeight:b="normal",fontStyle:k="normal"}={}){this.buffer=n,this.cutoff=h,this.radius=s;const P=this.size=f+4*n,I=this._createCanvas(P),z=this.ctx=I.getContext("2d",{willReadFrequently:!0});z.font=`${k} ${b} ${f}px ${m}`,z.textBaseline="alphabetic",z.textAlign="left",z.fillStyle="black",this.gridOuter=new Float64Array(P*P),this.gridInner=new Float64Array(P*P),this.f=new Float64Array(P),this.z=new Float64Array(P+1),this.v=new Uint16Array(P)}_createCanvas(f){const n=document.createElement("canvas");return n.width=n.height=f,n}draw(f){const{width:n,actualBoundingBoxAscent:s,actualBoundingBoxDescent:h,actualBoundingBoxLeft:m,actualBoundingBoxRight:b}=this.ctx.measureText(f),k=Math.ceil(s),P=Math.min(this.size-this.buffer,Math.ceil(b-m)),I=Math.min(this.size-this.buffer,k+Math.ceil(h)),z=P+2*this.buffer,N=I+2*this.buffer,U=Math.max(z*N,0),H=new Uint8ClampedArray(U),Q={data:H,width:z,height:N,glyphWidth:P,glyphHeight:I,glyphTop:k,glyphLeft:0,glyphAdvance:n};if(P===0||I===0)return Q;const{ctx:K,buffer:X,gridInner:le,gridOuter:xe}=this;K.clearRect(X,X,P,I),K.fillText(f,X,X+k);const be=K.getImageData(X,X,P,I);xe.fill(ye,0,U),le.fill(0,0,U);for(let re=0;re<I;re++)for(let Me=0;Me<P;Me++){const ke=be.data[4*(re*P+Me)+3]/255;if(ke===0)continue;const Pe=(re+X)*z+Me+X;if(ke===1)xe[Pe]=0,le[Pe]=ye;else{const De=.5-ke;xe[Pe]=De>0?De*De:0,le[Pe]=De<0?De*De:0}}ve(xe,0,0,z,N,z,this.f,this.v,this.z),ve(le,X,X,P,I,z,this.f,this.v,this.z);for(let re=0;re<U;re++){const Me=Math.sqrt(xe[re])-Math.sqrt(le[re]);H[re]=Math.round(255-255*(Me/this.radius+this.cutoff))}return Q}};const Ke=new c.Properties({anchor:new c.DataConstantProperty(c.spec.light.anchor),position:new class{constructor(){this.specification=c.spec.light.position}possiblyEvaluate(f,n){return c.sphericalToCartesian(f.expression.evaluate(n))}interpolate(f,n,s){return{x:c.number(f.x,n.x,s),y:c.number(f.y,n.y,s),z:c.number(f.z,n.z,s)}}},color:new c.DataConstantProperty(c.spec.light.color),intensity:new c.DataConstantProperty(c.spec.light.intensity)}),Je="-transition";class He extends c.Evented{constructor(n){super(),this._transitionable=new c.Transitionable(Ke),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(n,s={}){if(!this._validate(c.validateLight,n,s))for(const h in n){const m=n[h];h.endsWith(Je)?this._transitionable.setTransition(h.slice(0,-Je.length),m):this._transitionable.setValue(h,m)}}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,s,h){return(!h||h.validate!==!1)&&c.emitValidationErrors(this,n.call(c.validateStyle,c.extend({value:s,style:{glyphs:!0,sprite:!0},styleSpec:c.spec})))}}class gt{constructor(n,s){this.width=n,this.height=s,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(n,s){const h=n.join(",")+String(s);return this.dashEntry[h]||(this.dashEntry[h]=this.addDash(n,s)),this.dashEntry[h]}getDashRanges(n,s,h){const m=[];let b=n.length%2==1?-n[n.length-1]*h:0,k=n[0]*h,P=!0;m.push({left:b,right:k,isDash:P,zeroLength:n[0]===0});let I=n[0];for(let z=1;z<n.length;z++){P=!P;const N=n[z];b=I*h,I+=N,k=I*h,m.push({left:b,right:k,isDash:P,zeroLength:N===0})}return m}addRoundDash(n,s,h){const m=s/2;for(let b=-h;b<=h;b++){const k=this.width*(this.nextRow+h+b);let P=0,I=n[P];for(let z=0;z<this.width;z++){z/I.right>1&&(I=n[++P]);const N=Math.abs(z-I.left),U=Math.abs(z-I.right),H=Math.min(N,U);let Q;const K=b/h*(m+1);if(I.isDash){const X=m-Math.abs(K);Q=Math.sqrt(H*H+X*X)}else Q=m-Math.sqrt(H*H+K*K);this.data[k+z]=Math.max(0,Math.min(255,Q+128))}}}addRegularDash(n){for(let P=n.length-1;P>=0;--P){const I=n[P],z=n[P+1];I.zeroLength?n.splice(P,1):z&&z.isDash===I.isDash&&(z.left=I.left,n.splice(P,1))}const s=n[0],h=n[n.length-1];s.isDash===h.isDash&&(s.left=h.left-this.width,h.right=s.right+this.width);const m=this.width*this.nextRow;let b=0,k=n[b];for(let P=0;P<this.width;P++){P/k.right>1&&(k=n[++b]);const I=Math.abs(P-k.left),z=Math.abs(P-k.right),N=Math.min(I,z);this.data[m+P]=Math.max(0,Math.min(255,(k.isDash?N:-N)+128))}}addDash(n,s){const h=s?7:0,m=2*h+1;if(this.nextRow+m>this.height)return c.warnOnce("LineAtlas out of space"),null;let b=0;for(let P=0;P<n.length;P++)b+=n[P];if(b!==0){const P=this.width/b,I=this.getDashRanges(n,this.width,P);s?this.addRoundDash(I,P,h):this.addRegularDash(I)}const k={y:(this.nextRow+h+.5)/this.height,height:2*h/this.height,width:b};return this.nextRow+=m,this.dirty=!0,k}bind(n){const s=n.gl;this.texture?(s.bindTexture(s.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.width,this.height,s.ALPHA,s.UNSIGNED_BYTE,this.data))):(this.texture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.ALPHA,this.width,this.height,0,s.ALPHA,s.UNSIGNED_BYTE,this.data))}}class pt{constructor(n,s){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=c.uniqueId();const h=this.workerPool.acquire(this.id);for(let m=0;m<h.length;m++){const b=new pt.Actor(h[m],s,this.id);b.name=`Worker ${m}`,this.actors.push(b)}if(!this.actors.length)throw new Error("No actors found")}broadcast(n,s,h){c.asyncAll(this.actors,(m,b)=>{m.send(n,s,b)},h=h||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(n=>{n.remove()}),this.actors=[],this.workerPool.release(this.id)}}function wt(f,n,s){const h=function(m,b){if(m)return s(m);if(b){const k=c.pick(c.extend(b,f),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);b.vector_layers&&(k.vectorLayers=b.vector_layers,k.vectorLayerIds=k.vectorLayers.map(P=>P.id)),s(null,k)}};return f.url?c.getJSON(n.transformRequest(f.url,c.ResourceType.Source),h):c.exported.frame(()=>h(null,f))}pt.Actor=c.Actor;class Tt{constructor(n,s,h){this.bounds=c.LngLatBounds.convert(this.validateBounds(n)),this.minzoom=s||0,this.maxzoom=h||24}validateBounds(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]}contains(n){const s=Math.pow(2,n.z),h=Math.floor(c.mercatorXfromLng(this.bounds.getWest())*s),m=Math.floor(c.mercatorYfromLat(this.bounds.getNorth())*s),b=Math.ceil(c.mercatorXfromLng(this.bounds.getEast())*s),k=Math.ceil(c.mercatorYfromLat(this.bounds.getSouth())*s);return n.x>=h&&n.x<b&&n.y>=m&&n.y<k}}class bt extends c.Evented{constructor(n,s,h,m){if(super(),this.id=n,this.dispatcher=h,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.extend(this,c.pick(s,["url","scheme","tileSize","promoteId"])),this._options=c.extend({type:"vector"},s),this._collectResourceTiming=s.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}load(){this._loaded=!1,this.fire(new c.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=wt(this._options,this.map._requestManager,(n,s)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),n?this.fire(new c.ErrorEvent(n)):s&&(c.extend(this,s),s.bounds&&(this.tileBounds=new Tt(s.bounds,this.minzoom,this.maxzoom)),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}onAdd(n){this.map=n,this.load()}setSourceProperty(n){this._tileJSONRequest&&this._tileJSONRequest.cancel(),n(),this.load()}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return c.extend({},this._options)}loadTile(n,s){const h=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m={request:this.map._requestManager.transformRequest(h,c.ResourceType.Tile),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function b(k,P){return delete n.request,n.aborted?s(null):k&&k.status!==404?s(k):(P&&P.resourceTiming&&(n.resourceTiming=P.resourceTiming),this.map._refreshExpiredTiles&&P&&n.setExpiryData(P),n.loadVectorData(P,this.map.painter),c.cacheEntryPossiblyAdded(this.dispatcher),s(null),void(n.reloadCallback&&(this.loadTile(n,n.reloadCallback),n.reloadCallback=null)))}m.request.collectResourceTiming=this._collectResourceTiming,n.actor&&n.state!=="expired"?n.state==="loading"?n.reloadCallback=s:n.request=n.actor.send("reloadTile",m,b.bind(this)):(n.actor=this.dispatcher.getActor(),n.request=n.actor.send("loadTile",m,b.bind(this)))}abortTile(n){n.request&&(n.request.cancel(),delete n.request),n.actor&&n.actor.send("abortTile",{uid:n.uid,type:this.type,source:this.id},void 0)}unloadTile(n){n.unloadVectorData(),n.actor&&n.actor.send("removeTile",{uid:n.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class mt extends c.Evented{constructor(n,s,h,m){super(),this.id=n,this.dispatcher=h,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.extend({type:"raster"},s),c.extend(this,c.pick(s,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new c.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=wt(this._options,this.map._requestManager,(n,s)=>{this._tileJSONRequest=null,this._loaded=!0,n?this.fire(new c.ErrorEvent(n)):s&&(c.extend(this,s),s.bounds&&(this.tileBounds=new Tt(s.bounds,this.minzoom,this.maxzoom)),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(n){this.map=n,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return c.extend({},this._options)}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}loadTile(n,s){const h=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);n.request=c.getImage(this.map._requestManager.transformRequest(h,c.ResourceType.Tile),(m,b,k)=>{if(delete n.request,n.aborted)n.state="unloaded",s(null);else if(m)n.state="errored",s(m);else if(b){this.map._refreshExpiredTiles&&n.setExpiryData(k);const P=this.map.painter.context,I=P.gl;n.texture=this.map.painter.getTileTexture(b.width),n.texture?n.texture.update(b,{useMipmap:!0}):(n.texture=new W(P,b,I.RGBA,{useMipmap:!0}),n.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE,I.LINEAR_MIPMAP_NEAREST),P.extTextureFilterAnisotropic&&I.texParameterf(I.TEXTURE_2D,P.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,P.extTextureFilterAnisotropicMax)),n.state="loaded",c.cacheEntryPossiblyAdded(this.dispatcher),s(null)}})}abortTile(n,s){n.request&&(n.request.cancel(),delete n.request),s()}unloadTile(n,s){n.texture&&this.map.painter.saveTileTexture(n.texture),s()}hasTransition(){return!1}}let Ct;class Ze extends mt{constructor(n,s,h,m){super(n,s,h,m),this.type="raster-dem",this.maxzoom=22,this._options=c.extend({type:"raster-dem"},s),this.encoding=s.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(n,s){const h=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function m(b,k){b&&(n.state="errored",s(b)),k&&(n.dem=k,n.needsHillshadePrepare=!0,n.needsTerrainPrepare=!0,n.state="loaded",s(null))}n.request=c.getImage(this.map._requestManager.transformRequest(h,c.ResourceType.Tile),(function(b,k){if(delete n.request,n.aborted)n.state="unloaded",s(null);else if(b)n.state="errored",s(b);else if(k){this.map._refreshExpiredTiles&&n.setExpiryData(k),delete k.cacheControl,delete k.expires;const P=c.isImageBitmap(k)&&(Ct==null&&(Ct=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Ct)?k:c.exported.getImageData(k,1),I={uid:n.uid,coord:n.tileID,source:this.id,rawImageData:P,encoding:this.encoding};n.actor&&n.state!=="expired"||(n.actor=this.dispatcher.getActor(),n.actor.send("loadDEMTile",I,m.bind(this)))}}).bind(this)),n.neighboringTiles=this._getNeighboringTiles(n.tileID)}_getNeighboringTiles(n){const s=n.canonical,h=Math.pow(2,s.z),m=(s.x-1+h)%h,b=s.x===0?n.wrap-1:n.wrap,k=(s.x+1+h)%h,P=s.x+1===h?n.wrap+1:n.wrap,I={};return I[new c.OverscaledTileID(n.overscaledZ,b,s.z,m,s.y).key]={backfilled:!1},I[new c.OverscaledTileID(n.overscaledZ,P,s.z,k,s.y).key]={backfilled:!1},s.y>0&&(I[new c.OverscaledTileID(n.overscaledZ,b,s.z,m,s.y-1).key]={backfilled:!1},I[new c.OverscaledTileID(n.overscaledZ,n.wrap,s.z,s.x,s.y-1).key]={backfilled:!1},I[new c.OverscaledTileID(n.overscaledZ,P,s.z,k,s.y-1).key]={backfilled:!1}),s.y+1<h&&(I[new c.OverscaledTileID(n.overscaledZ,b,s.z,m,s.y+1).key]={backfilled:!1},I[new c.OverscaledTileID(n.overscaledZ,n.wrap,s.z,s.x,s.y+1).key]={backfilled:!1},I[new c.OverscaledTileID(n.overscaledZ,P,s.z,k,s.y+1).key]={backfilled:!1}),I}unloadTile(n){n.demTexture&&this.map.painter.saveTileTexture(n.demTexture),n.fbo&&(n.fbo.destroy(),delete n.fbo),n.dem&&delete n.dem,delete n.neighboringTiles,n.state="unloaded",n.actor&&n.actor.send("removeDEMTile",{uid:n.uid,source:this.id})}}class Pt extends c.Evented{constructor(n,s,h,m){super(),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=h.getActor(),this.setEventedParent(m),this._data=s.data,this._options=c.extend({},s),this._collectResourceTiming=s.collectResourceTiming,s.maxzoom!==void 0&&(this.maxzoom=s.maxzoom),s.type&&(this.type=s.type),s.attribution&&(this.attribution=s.attribution),this.promoteId=s.promoteId;const b=c.EXTENT/this.tileSize;this.workerOptions=c.extend({source:this.id,cluster:s.cluster||!1,geojsonVtOptions:{buffer:(s.buffer!==void 0?s.buffer:128)*b,tolerance:(s.tolerance!==void 0?s.tolerance:.375)*b,extent:c.EXTENT,maxZoom:this.maxzoom,lineMetrics:s.lineMetrics||!1,generateId:s.generateId||!1},superclusterOptions:{maxZoom:s.clusterMaxZoom!==void 0?s.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,s.clusterMinPoints||2),extent:c.EXTENT,radius:(s.clusterRadius||50)*b,log:!1,generateId:s.generateId||!1},clusterProperties:s.clusterProperties,filter:s.filter},s.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(n){this.map=n,this.load()}setData(n){return this._data=n,this._updateWorkerData("content"),this}getClusterExpansionZoom(n,s){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:n,source:this.id},s),this}getClusterChildren(n,s){return this.actor.send("geojson.getClusterChildren",{clusterId:n,source:this.id},s),this}getClusterLeaves(n,s,h,m){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:n,limit:s,offset:h},m),this}_updateWorkerData(n){const s=c.extend({},this.workerOptions),h=this._data;typeof h=="string"?(s.request=this.map._requestManager.transformRequest(c.exported.resolveURL(h),c.ResourceType.Source),s.request.collectResourceTiming=this._collectResourceTiming):s.data=JSON.stringify(h),this._pendingLoads++,this.fire(new c.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,s,(m,b)=>{if(this._pendingLoads--,this._removed||b&&b.abandoned)return void this.fire(new c.Event("dataabort",{dataType:"source",sourceDataType:n}));let k=null;if(b&&b.resourceTiming&&b.resourceTiming[this.id]&&(k=b.resourceTiming[this.id].slice(0)),m)return void this.fire(new c.ErrorEvent(m));const P={dataType:"source",sourceDataType:n};this._collectResourceTiming&&k&&k.length>0&&c.extend(P,{resourceTiming:k}),this.fire(new c.Event("data",P))})}loaded(){return this._pendingLoads===0}loadTile(n,s){const h=n.actor?"reloadTile":"loadTile";n.actor=this.actor;const m={type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};n.request=this.actor.send(h,m,(b,k)=>(delete n.request,n.unloadVectorData(),n.aborted?s(null):b?s(b):(n.loadVectorData(k,this.map.painter,h==="reloadTile"),s(null))))}abortTile(n){n.request&&(n.request.cancel(),delete n.request),n.aborted=!0}unloadTile(n){n.unloadVectorData(),this.actor.send("removeTile",{uid:n.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return c.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var We=c.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class at extends c.Evented{constructor(n,s,h,m){super(),this.id=n,this.dispatcher=h,this.coordinates=s.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=s}load(n,s){this._loaded=!1,this.fire(new c.Event("dataloading",{dataType:"source"})),this.url=this.options.url,c.getImage(this.map._requestManager.transformRequest(this.url,c.ResourceType.Image),(h,m)=>{this._loaded=!0,h?this.fire(new c.ErrorEvent(h)):m&&(this.image=m,n&&(this.coordinates=n),s&&s(),this._finishLoading())})}loaded(){return this._loaded}updateImage(n){return this.image&&n.url?(this.options.url=n.url,this.load(n.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(n){this.map=n,this.load()}setCoordinates(n){this.coordinates=n;const s=n.map(c.MercatorCoordinate.fromLngLat);this.tileID=function(m){let b=1/0,k=1/0,P=-1/0,I=-1/0;for(const H of m)b=Math.min(b,H.x),k=Math.min(k,H.y),P=Math.max(P,H.x),I=Math.max(I,H.y);const z=Math.max(P-b,I-k),N=Math.max(0,Math.floor(-Math.log(z)/Math.LN2)),U=Math.pow(2,N);return new c.CanonicalTileID(N,Math.floor((b+P)/2*U),Math.floor((k+I)/2*U))}(s),this.minzoom=this.maxzoom=this.tileID.z;const h=s.map(m=>this.tileID.getTilePoint(m)._round());return this._boundsArray=new c.RasterBoundsArray,this._boundsArray.emplaceBack(h[0].x,h[0].y,0,0),this._boundsArray.emplaceBack(h[1].x,h[1].y,c.EXTENT,0),this._boundsArray.emplaceBack(h[3].x,h[3].y,0,c.EXTENT),this._boundsArray.emplaceBack(h[2].x,h[2].y,c.EXTENT,c.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new c.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const n=this.map.painter.context,s=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,We.members)),this.boundsSegments||(this.boundsSegments=c.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new W(n,this.image,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE));for(const h in this.tiles){const m=this.tiles[h];m.state!=="loaded"&&(m.state="loaded",m.texture=this.texture)}}loadTile(n,s){this.tileID&&this.tileID.equals(n.tileID.canonical)?(this.tiles[String(n.tileID.wrap)]=n,n.buckets={},s(null)):(n.state="errored",s(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class rt extends at{constructor(n,s,h,m){super(n,s,h,m),this.roundZoom=!0,this.type="video",this.options=s}load(){this._loaded=!1;const n=this.options;this.urls=[];for(const s of n.urls)this.urls.push(this.map._requestManager.transformRequest(s,c.ResourceType.Source).url);c.getVideo(this.urls,(s,h)=>{this._loaded=!0,s?this.fire(new c.ErrorEvent(s)):h&&(this.video=h,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(n){if(this.video){const s=this.video.seekable;n<s.start(0)||n>s.end(0)?this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${s.start(0)} and ${s.end(0)}-second mark.`))):this.video.currentTime=n}}getVideo(){return this.video}onAdd(n){this.map||(this.map=n,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const n=this.map.painter.context,s=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,We.members)),this.boundsSegments||(this.boundsSegments=c.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE),s.texSubImage2D(s.TEXTURE_2D,0,0,0,s.RGBA,s.UNSIGNED_BYTE,this.video)):(this.texture=new W(n,this.video,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE));for(const h in this.tiles){const m=this.tiles[h];m.state!=="loaded"&&(m.state="loaded",m.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class we extends at{constructor(n,s,h,m){super(n,s,h,m),s.coordinates?Array.isArray(s.coordinates)&&s.coordinates.length===4&&!s.coordinates.some(b=>!Array.isArray(b)||b.length!==2||b.some(k=>typeof k!="number"))||this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${n}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${n}`,null,'missing required property "coordinates"'))),s.animate&&typeof s.animate!="boolean"&&this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${n}`,null,'optional "animate" property must be a boolean value'))),s.canvas?typeof s.canvas=="string"||s.canvas instanceof HTMLCanvasElement||this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${n}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.ErrorEvent(new c.ValidationError(`sources.${n}`,null,'missing required property "canvas"'))),this.options=s,this.animate=s.animate===void 0||s.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(n){this.map=n,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let n=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,n=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,n=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const s=this.map.painter.context,h=s.gl;this.boundsBuffer||(this.boundsBuffer=s.createVertexBuffer(this._boundsArray,We.members)),this.boundsSegments||(this.boundsSegments=c.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(n||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new W(s,this.canvas,h.RGBA,{premultiply:!0});for(const m in this.tiles){const b=this.tiles[m];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const n of[this.canvas.width,this.canvas.height])if(isNaN(n)||n<=0)return!0;return!1}}const Ve={vector:bt,raster:mt,"raster-dem":Ze,geojson:Pt,video:rt,image:at,canvas:we};function St(f,n){const s=c.create();return c.translate(s,s,[1,1,0]),c.scale(s,s,[.5*f.width,.5*f.height,1]),c.multiply(s,s,f.calculatePosMatrix(n.toUnwrapped()))}function At(f,n,s,h,m,b){const k=function(U,H,Q){if(U)for(const K of U){const X=H[K];if(X&&X.source===Q&&X.type==="fill-extrusion")return!0}else for(const K in H){const X=H[K];if(X.source===Q&&X.type==="fill-extrusion")return!0}return!1}(m&&m.layers,n,f.id),P=b.maxPitchScaleFactor(),I=f.tilesIn(h,P,k);I.sort(zt);const z=[];for(const U of I)z.push({wrappedTileID:U.tileID.wrapped().key,queryResults:U.tile.queryRenderedFeatures(n,s,f._state,U.queryGeometry,U.cameraQueryGeometry,U.scale,m,b,P,St(f.transform,U.tileID))});const N=function(U){const H={},Q={};for(const K of U){const X=K.queryResults,le=K.wrappedTileID,xe=Q[le]=Q[le]||{};for(const be in X){const re=X[be],Me=xe[be]=xe[be]||{},ke=H[be]=H[be]||[];for(const Pe of re)Me[Pe.featureIndex]||(Me[Pe.featureIndex]=!0,ke.push(Pe))}}return H}(z);for(const U in N)N[U].forEach(H=>{const Q=H.feature,K=f.getFeatureState(Q.layer["source-layer"],Q.id);Q.source=Q.layer.source,Q.layer["source-layer"]&&(Q.sourceLayer=Q.layer["source-layer"]),Q.state=K});return N}function zt(f,n){const s=f.tileID,h=n.tileID;return s.overscaledZ-h.overscaledZ||s.canonical.y-h.canonical.y||s.wrap-h.wrap||s.canonical.x-h.canonical.x}class Nt{constructor(n,s){this.tileID=n,this.uid=c.uniqueId(),this.uses=0,this.tileSize=s,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(n){const s=n+this.timeAdded;s<c.exported.now()||this.fadeEndTime&&s<this.fadeEndTime||(this.fadeEndTime=s)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(n){this.demTexture&&n.saveTileTexture(this.demTexture),this.textures.forEach(s=>n.saveTileTexture(s)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(n,s,h){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(m,b){const k={};if(!b)return k;for(const P of m){const I=P.layerIds.map(z=>b.getLayer(z)).filter(Boolean);if(I.length!==0){P.layers=I,P.stateDependentLayerIds&&(P.stateDependentLayers=P.stateDependentLayerIds.map(z=>I.filter(N=>N.id===z)[0]));for(const z of I)k[z.id]=P}}return k}(n.buckets,s.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const b=this.buckets[m];if(b instanceof c.SymbolBucket){if(this.hasSymbolBuckets=!0,!h)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const b=this.buckets[m];if(b instanceof c.SymbolBucket&&b.hasRTLText){this.hasRTLText=!0,c.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const m in this.buckets){const b=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,s.style.getLayer(m).queryRadius(b))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage)}else this.collisionBoxArray=new c.CollisionBoxArray}unloadVectorData(){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(n){return this.buckets[n.id]}upload(n){for(const h in this.buckets){const m=this.buckets[h];m.uploadPending()&&m.upload(n)}const s=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new W(n,this.imageAtlas.image,s.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new W(n,this.glyphAtlasImage,s.ALPHA),this.glyphAtlasImage=null)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,s,h,m,b,k,P,I,z,N){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:b,scale:k,tileSize:this.tileSize,pixelPosMatrix:N,transform:I,params:P,queryPadding:this.queryPadding*z},n,s,h):{}}querySourceFeatures(n,s){const h=this.latestFeatureIndex;if(!h||!h.rawTileData)return;const m=h.loadVTLayers(),b=s?s.sourceLayer:"",k=m._geojsonTileLayer||m[b];if(!k)return;const P=c.createFilter(s&&s.filter),{z:I,x:z,y:N}=this.tileID.canonical,U={z:I,x:z,y:N};for(let H=0;H<k.length;H++){const Q=k.feature(H);if(P.needGeometry){const le=c.toEvaluationFeature(Q,!0);if(!P.filter(new c.EvaluationParameters(this.tileID.overscaledZ),le,this.tileID.canonical))continue}else if(!P.filter(new c.EvaluationParameters(this.tileID.overscaledZ),Q))continue;const K=h.getId(Q,b),X=new c.GeoJSONFeature(Q,I,z,N,K);X.tile=U,n.push(X)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const s=this.expirationTime;if(n.cacheControl){const h=c.parseCacheControl(n.cacheControl);h["max-age"]&&(this.expirationTime=Date.now()+1e3*h["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const h=Date.now();let m=!1;if(this.expirationTime>h)m=!1;else if(s)if(this.expirationTime<s)m=!0;else{const b=this.expirationTime-s;b?this.expirationTime=h+Math.max(b,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,s){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0)return;const h=this.latestFeatureIndex.loadVTLayers();for(const m in this.buckets){if(!s.style.hasLayer(m))continue;const b=this.buckets[m],k=b.layers[0].sourceLayer||"_geojsonTileLayer",P=h[k],I=n[k];if(!P||!I||Object.keys(I).length===0)continue;b.update(I,P,this.imageAtlas&&this.imageAtlas.patternPositions||{});const z=s&&s.style&&s.style.getLayer(m);z&&(this.queryPadding=Math.max(this.queryPadding,z.queryRadius(b)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<c.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=c.exported.now()+n}setDependencies(n,s){const h={};for(const m of s)h[m]=!0;this.dependencies[n]=h}hasDependency(n,s){for(const h of n){const m=this.dependencies[h];if(m){for(const b of s)if(m[b])return!0}}return!1}}class Kt{constructor(n,s){this.max=n,this.onRemove=s,this.reset()}reset(){for(const n in this.data)for(const s of this.data[n])s.timeout&&clearTimeout(s.timeout),this.onRemove(s.value);return this.data={},this.order=[],this}add(n,s,h){const m=n.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);const b={value:s,timeout:void 0};if(h!==void 0&&(b.timeout=setTimeout(()=>{this.remove(n,b)},h)),this.data[m].push(b),this.order.push(m),this.order.length>this.max){const k=this._getAndRemoveByKey(this.order[0]);k&&this.onRemove(k)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const s=this.data[n].shift();return s.timeout&&clearTimeout(s.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),s.value}getByKey(n){const s=this.data[n];return s?s[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,s){if(!this.has(n))return this;const h=n.wrapped().key,m=s===void 0?0:this.data[h].indexOf(s),b=this.data[h][m];return this.data[h].splice(m,1),b.timeout&&clearTimeout(b.timeout),this.data[h].length===0&&delete this.data[h],this.onRemove(b.value),this.order.splice(this.order.indexOf(h),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this}filter(n){const s=[];for(const h in this.data)for(const m of this.data[h])n(m.value)||s.push(m);for(const h of s)this.remove(h.value.tileID,h)}}class Yt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,s,h){const m=String(s);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][m]=this.stateChanges[n][m]||{},c.extend(this.stateChanges[n][m],h),this.deletedStates[n]===null){this.deletedStates[n]={};for(const b in this.state[n])b!==m&&(this.deletedStates[n][b]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][m]===null){this.deletedStates[n][m]={};for(const b in this.state[n][m])h[b]||(this.deletedStates[n][m][b]=null)}else for(const b in h)this.deletedStates[n]&&this.deletedStates[n][m]&&this.deletedStates[n][m][b]===null&&delete this.deletedStates[n][m][b]}removeFeatureState(n,s,h){if(this.deletedStates[n]===null)return;const m=String(s);if(this.deletedStates[n]=this.deletedStates[n]||{},h&&s!==void 0)this.deletedStates[n][m]!==null&&(this.deletedStates[n][m]=this.deletedStates[n][m]||{},this.deletedStates[n][m][h]=null);else if(s!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][m])for(h in this.deletedStates[n][m]={},this.stateChanges[n][m])this.deletedStates[n][m][h]=null;else this.deletedStates[n][m]=null;else this.deletedStates[n]=null}getState(n,s){const h=String(s),m=c.extend({},(this.state[n]||{})[h],(this.stateChanges[n]||{})[h]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const b=this.deletedStates[n][s];if(b===null)return{};for(const k in b)delete m[k]}return m}initializeTileState(n,s){n.setFeatureState(this.state,s)}coalesceChanges(n,s){const h={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const b={};for(const k in this.stateChanges[m])this.state[m][k]||(this.state[m][k]={}),c.extend(this.state[m][k],this.stateChanges[m][k]),b[k]=this.state[m][k];h[m]=b}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const b={};if(this.deletedStates[m]===null)for(const k in this.state[m])b[k]={},this.state[m][k]={};else for(const k in this.deletedStates[m]){if(this.deletedStates[m][k]===null)this.state[m][k]={};else for(const P of Object.keys(this.deletedStates[m][k]))delete this.state[m][k][P];b[k]=this.state[m][k]}h[m]=h[m]||{},c.extend(h[m],b)}if(this.stateChanges={},this.deletedStates={},Object.keys(h).length!==0)for(const m in n)n[m].setFeatureState(h,s)}}class Ft extends c.Evented{constructor(n,s,h){super(),this.id=n,this.dispatcher=h,this.on("data",m=>{m.dataType==="source"&&m.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&m.dataType==="source"&&m.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(m,b,k,P){const I=new Ve[b.type](m,b,k,P);if(I.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${I.id}`);return c.bindAll(["load","abort","unload","serialize","prepare"],I),I}(n,s,h,this),this._tiles={},this._cache=new Kt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Yt}onAdd(n){this.map=n,this._maxTileCacheSize=n?n._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(n)}onRemove(n){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(n)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const n in this._tiles){const s=this._tiles[n];if(s.state!=="loaded"&&s.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(n,s){return this._source.loadTile(n,s)}_unloadTile(n){if(this._source.unloadTile)return this._source.unloadTile(n,()=>{})}_abortTile(n){this._source.abortTile&&this._source.abortTile(n,()=>{}),this._source.fire(new c.Event("dataabort",{tile:n,coord:n.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const s in this._tiles){const h=this._tiles[s];h.upload(n),h.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(n=>n.tileID).sort(An).map(n=>n.key)}getRenderableIds(n){const s=[];for(const h in this._tiles)this._isIdRenderable(h,n)&&s.push(this._tiles[h]);return n?s.sort((h,m)=>{const b=h.tileID,k=m.tileID,P=new c.pointGeometry(b.canonical.x,b.canonical.y)._rotate(this.transform.angle),I=new c.pointGeometry(k.canonical.x,k.canonical.y)._rotate(this.transform.angle);return b.overscaledZ-k.overscaledZ||I.y-P.y||I.x-P.x}).map(h=>h.tileID.key):s.map(h=>h.tileID).sort(An).map(h=>h.key)}hasRenderableParent(n){const s=this.findLoadedParent(n,0);return!!s&&this._isIdRenderable(s.tileID.key)}_isIdRenderable(n,s){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(s||!this._tiles[n].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const n in this._tiles)this._tiles[n].state!=="errored"&&this._reloadTile(n,"reloading")}}_reloadTile(n,s){const h=this._tiles[n];h&&(h.state!=="loading"&&(h.state=s),this._loadTile(h,this._tileLoaded.bind(this,h,n,s)))}_tileLoaded(n,s,h,m){if(m)return n.state="errored",void(m.status!==404?this._source.fire(new c.ErrorEvent(m,{tile:n})):this.update(this.transform,this.terrain));n.timeAdded=c.exported.now(),h==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(s,n),this.getSource().type==="raster-dem"&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),n.aborted||this._source.fire(new c.Event("data",{dataType:"source",tile:n,coord:n.tileID}))}_backfillDEM(n){const s=this.getRenderableIds();for(let m=0;m<s.length;m++){const b=s[m];if(n.neighboringTiles&&n.neighboringTiles[b]){const k=this.getTileByID(b);h(n,k),h(k,n)}}function h(m,b){m.needsHillshadePrepare=!0,m.needsTerrainPrepare=!0;let k=b.tileID.canonical.x-m.tileID.canonical.x;const P=b.tileID.canonical.y-m.tileID.canonical.y,I=Math.pow(2,m.tileID.canonical.z),z=b.tileID.key;k===0&&P===0||Math.abs(P)>1||(Math.abs(k)>1&&(Math.abs(k+I)===1?k+=I:Math.abs(k-I)===1&&(k-=I)),b.dem&&m.dem&&(m.dem.backfillBorder(b.dem,k,P),m.neighboringTiles&&m.neighboringTiles[z]&&(m.neighboringTiles[z].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,s,h,m){for(const b in this._tiles){let k=this._tiles[b];if(m[b]||!k.hasData()||k.tileID.overscaledZ<=s||k.tileID.overscaledZ>h)continue;let P=k.tileID;for(;k&&k.tileID.overscaledZ>s+1;){const z=k.tileID.scaledTo(k.tileID.overscaledZ-1);k=this._tiles[z.key],k&&k.hasData()&&(P=z)}let I=P;for(;I.overscaledZ>s;)if(I=I.scaledTo(I.overscaledZ-1),n[I.key]){m[P.key]=P;break}}}findLoadedParent(n,s){if(n.key in this._loadedParentTiles){const h=this._loadedParentTiles[n.key];return h&&h.tileID.overscaledZ>=s?h:null}for(let h=n.overscaledZ-1;h>=s;h--){const m=n.scaledTo(h),b=this._getLoadedTile(m);if(b)return b}}_getLoadedTile(n){const s=this._tiles[n.key];return s&&s.hasData()?s:this._cache.getByKey(n.wrapped().key)}updateCacheSize(n){const s=Math.ceil(n.width/this._source.tileSize)+1,h=Math.ceil(n.height/this._source.tileSize)+1,m=Math.floor(s*h*5),b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(b)}handleWrapJump(n){const s=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);if(this._prevLng=n,s){const h={};for(const m in this._tiles){const b=this._tiles[m];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+s),h[b.tileID.key]=b}this._tiles=h;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(m,this._tiles[m])}}update(n,s){if(this.transform=n,this.terrain=s,!this._sourceLoaded||this._paused)return;let h;this.updateCacheSize(n),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?h=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(z=>new c.OverscaledTileID(z.canonical.z,z.wrap,z.canonical.z,z.canonical.x,z.canonical.y)):(h=n.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:s}),this._source.hasTile&&(h=h.filter(z=>this._source.hasTile(z)))):h=[];const m=n.coveringZoomLevel(this._source),b=Math.max(m-Ft.maxOverzooming,this._source.minzoom),k=Math.max(m+Ft.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const z={};for(const N of h)if(N.canonical.z>this._source.minzoom){const U=N.scaledTo(N.canonical.z-1);z[U.key]=U;const H=N.scaledTo(Math.max(this._source.minzoom,Math.min(N.canonical.z,5)));z[H.key]=H}h=h.concat(Object.values(z))}const P=this._updateRetainedTiles(h,m);if(br(this._source.type)){const z={},N={},U=Object.keys(P);for(const H of U){const Q=P[H],K=this._tiles[H];if(!K||K.fadeEndTime&&K.fadeEndTime<=c.exported.now())continue;const X=this.findLoadedParent(Q,b);X&&(this._addTile(X.tileID),z[X.tileID.key]=X.tileID),N[H]=Q}this._retainLoadedChildren(N,m,k,P);for(const H in z)P[H]||(this._coveredTiles[H]=!0,P[H]=z[H]);if(s){const H={},Q={};for(const K of h)this._tiles[K.key].hasData()?H[K.key]=K:Q[K.key]=K;for(const K in Q){const X=Q[K].children(this._source.maxzoom);this._tiles[X[0].key]&&this._tiles[X[1].key]&&this._tiles[X[2].key]&&this._tiles[X[3].key]&&(H[X[0].key]=P[X[0].key]=X[0],H[X[1].key]=P[X[1].key]=X[1],H[X[2].key]=P[X[2].key]=X[2],H[X[3].key]=P[X[3].key]=X[3],delete Q[K])}for(const K in Q){const X=this.findLoadedParent(Q[K],this._source.minzoom);if(X){H[X.tileID.key]=P[X.tileID.key]=X.tileID;for(const le in H)H[le].isChildOf(X.tileID)&&delete H[le]}}for(const K in this._tiles)H[K]||(this._coveredTiles[K]=!0)}}for(const z in P)this._tiles[z].clearFadeHold();const I=c.keysDifference(this._tiles,P);for(const z of I){const N=this._tiles[z];N.hasSymbolBuckets&&!N.holdingForFade()?N.setHoldDuration(this.map._fadeDuration):N.hasSymbolBuckets&&!N.symbolFadeFinished()||this._removeTile(z)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(n)}_updateRetainedTiles(n,s){const h={},m={},b=Math.max(s-Ft.maxOverzooming,this._source.minzoom),k=Math.max(s+Ft.maxUnderzooming,this._source.minzoom),P={};for(const I of n){const z=this._addTile(I);h[I.key]=I,z.hasData()||s<this._source.maxzoom&&(P[I.key]=I)}this._retainLoadedChildren(P,s,k,h);for(const I of n){let z=this._tiles[I.key];if(z.hasData())continue;if(s+1>this._source.maxzoom){const U=I.children(this._source.maxzoom)[0],H=this.getTile(U);if(H&&H.hasData()){h[U.key]=U;continue}}else{const U=I.children(this._source.maxzoom);if(h[U[0].key]&&h[U[1].key]&&h[U[2].key]&&h[U[3].key])continue}let N=z.wasRequested();for(let U=I.overscaledZ-1;U>=b;--U){const H=I.scaledTo(U);if(m[H.key]||(m[H.key]=!0,z=this.getTile(H),!z&&N&&(z=this._addTile(H)),z&&(h[H.key]=H,N=z.wasRequested(),z.hasData())))break}}return h}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const s=[];let h,m=this._tiles[n].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){h=this._loadedParentTiles[m.key];break}s.push(m.key);const b=m.scaledTo(m.overscaledZ-1);if(h=this._getLoadedTile(b),h)break;m=b}for(const b of s)this._loadedParentTiles[b]=h}}_addTile(n){let s=this._tiles[n.key];if(s)return s;s=this._cache.getAndRemove(n),s&&(this._setTileReloadTimer(n.key,s),s.tileID=n,this._state.initializeTileState(s,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,s)));const h=s;return s||(s=new Nt(n,this._source.tileSize*n.overscaleFactor()),this._loadTile(s,this._tileLoaded.bind(this,s,n.key,s.state))),s.uses++,this._tiles[n.key]=s,h||this._source.fire(new c.Event("dataloading",{tile:s,coord:s.tileID,dataType:"source"})),s}_setTileReloadTimer(n,s){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const h=s.getExpiryTimeout();h&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},h))}_removeTile(n){const s=this._tiles[n];s&&(s.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),s.uses>0||(s.hasData()&&s.state!=="reloading"?this._cache.add(s.tileID,s,s.getExpiryTimeout()):(s.aborted=!0,this._abortTile(s),this._unloadTile(s))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(n);this._cache.reset()}tilesIn(n,s,h){const m=[],b=this.transform;if(!b)return m;const k=h?b.getCameraQueryGeometry(n):n,P=n.map(K=>b.pointCoordinate(K,this.terrain)),I=k.map(K=>b.pointCoordinate(K,this.terrain)),z=this.getIds();let N=1/0,U=1/0,H=-1/0,Q=-1/0;for(const K of I)N=Math.min(N,K.x),U=Math.min(U,K.y),H=Math.max(H,K.x),Q=Math.max(Q,K.y);for(let K=0;K<z.length;K++){const X=this._tiles[z[K]];if(X.holdingForFade())continue;const le=X.tileID,xe=Math.pow(2,b.zoom-X.tileID.overscaledZ),be=s*X.queryPadding*c.EXTENT/X.tileSize/xe,re=[le.getTilePoint(new c.MercatorCoordinate(N,U)),le.getTilePoint(new c.MercatorCoordinate(H,Q))];if(re[0].x-be<c.EXTENT&&re[0].y-be<c.EXTENT&&re[1].x+be>=0&&re[1].y+be>=0){const Me=P.map(Pe=>le.getTilePoint(Pe)),ke=I.map(Pe=>le.getTilePoint(Pe));m.push({tile:X,tileID:le,queryGeometry:Me,cameraQueryGeometry:ke,scale:xe})}}return m}getVisibleCoordinates(n){const s=this.getRenderableIds(n).map(h=>this._tiles[h].tileID);for(const h of s)h.posMatrix=this.transform.calculatePosMatrix(h.toUnwrapped());return s}hasTransition(){if(this._source.hasTransition())return!0;if(br(this._source.type))for(const n in this._tiles){const s=this._tiles[n];if(s.fadeEndTime!==void 0&&s.fadeEndTime>=c.exported.now())return!0}return!1}setFeatureState(n,s,h){this._state.updateState(n=n||"_geojsonTileLayer",s,h)}removeFeatureState(n,s,h){this._state.removeFeatureState(n=n||"_geojsonTileLayer",s,h)}getFeatureState(n,s){return this._state.getState(n=n||"_geojsonTileLayer",s)}setDependencies(n,s,h){const m=this._tiles[n];m&&m.setDependencies(s,h)}reloadTilesForDependencies(n,s){for(const h in this._tiles)this._tiles[h].hasDependency(n,s)&&this._reloadTile(h,"reloading");this._cache.filter(h=>!h.hasDependency(n,s))}}function An(f,n){const s=Math.abs(2*f.wrap)-+(f.wrap<0),h=Math.abs(2*n.wrap)-+(n.wrap<0);return f.overscaledZ-n.overscaledZ||h-s||n.canonical.y-f.canonical.y||n.canonical.x-f.canonical.x}function br(f){return f==="raster"||f==="image"||f==="video"}Ft.maxOverzooming=10,Ft.maxUnderzooming=3;const Qn="mapboxgl_preloaded_worker_pool";class jn{constructor(){this.active={}}acquire(n){if(!this.workers)for(this.workers=[];this.workers.length<jn.workerCount;)this.workers.push(new Worker(ci.workerUrl));return this.active[n]=!0,this.workers.slice()}release(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach(s=>{s.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Qn]}numActive(){return Object.keys(this.active).length}}const si=Math.floor(c.exported.hardwareConcurrency/2);let Qe;function tt(){return Qe||(Qe=new jn),Qe}function Ot(f,n){const s={};for(const h in f)h!=="ref"&&(s[h]=f[h]);return c.refProperties.forEach(h=>{h in n&&(s[h]=n[h])}),s}function ln(f){f=f.slice();const n=Object.create(null);for(let s=0;s<f.length;s++)n[f[s].id]=f[s];for(let s=0;s<f.length;s++)"ref"in f[s]&&(f[s]=Ot(f[s],n[f[s].ref]));return f}jn.workerCount=Math.max(Math.min(si,6),1);const dt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function tn(f,n,s){s.push({command:dt.addSource,args:[f,n[f]]})}function Br(f,n,s){n.push({command:dt.removeSource,args:[f]}),s[f]=!0}function kn(f,n,s,h){Br(f,s,h),tn(f,n,s)}function rr(f,n,s){let h;for(h in f[s])if(Object.prototype.hasOwnProperty.call(f[s],h)&&h!=="data"&&!D(f[s][h],n[s][h]))return!1;for(h in n[s])if(Object.prototype.hasOwnProperty.call(n[s],h)&&h!=="data"&&!D(f[s][h],n[s][h]))return!1;return!0}function On(f,n,s,h,m,b){let k;for(k in n=n||{},f=f||{})Object.prototype.hasOwnProperty.call(f,k)&&(D(f[k],n[k])||s.push({command:b,args:[h,k,n[k],m]}));for(k in n)Object.prototype.hasOwnProperty.call(n,k)&&!Object.prototype.hasOwnProperty.call(f,k)&&(D(f[k],n[k])||s.push({command:b,args:[h,k,n[k],m]}))}function Fr(f){return f.id}function Hr(f,n){return f[n.id]=n,f}class Le{constructor(n,s){this.reset(n,s)}reset(n,s){this.points=n||[],this._distances=[0];for(let h=1;h<this.points.length;h++)this._distances[h]=this._distances[h-1]+this.points[h].dist(this.points[h-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(s||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(n){if(this.points.length===1)return this.points[0];n=c.clamp(n,0,1);let s=1,h=this._distances[s];const m=n*this.paddedLength+this.padding;for(;h<m&&s<this._distances.length;)h=this._distances[++s];const b=s-1,k=this._distances[b],P=h-k,I=P>0?(m-k)/P:0;return this.points[b].mult(1-I).add(this.points[s].mult(I))}}function Xe(f,n){let s=!0;return f==="always"||f!=="never"&&n!=="never"||(s=!1),s}class Sr{constructor(n,s,h){const m=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(n/h),this.yCellCount=Math.ceil(s/h);for(let k=0;k<this.xCellCount*this.yCellCount;k++)m.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=s,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/s,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(n,s,h,m,b){this._forEachCell(s,h,m,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(b)}insertCircle(n,s,h,m){this._forEachCell(s-m,h-m,s+m,h+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(s),this.circles.push(h),this.circles.push(m)}_insertBoxCell(n,s,h,m,b,k){this.boxCells[b].push(k)}_insertCircleCell(n,s,h,m,b,k){this.circleCells[b].push(k)}_query(n,s,h,m,b,k,P){if(h<0||n>this.width||m<0||s>this.height)return[];const I=[];if(n<=0&&s<=0&&this.width<=h&&this.height<=m){if(b)return[{key:null,x1:n,y1:s,x2:h,y2:m}];for(let z=0;z<this.boxKeys.length;z++)I.push({key:this.boxKeys[z],x1:this.bboxes[4*z],y1:this.bboxes[4*z+1],x2:this.bboxes[4*z+2],y2:this.bboxes[4*z+3]});for(let z=0;z<this.circleKeys.length;z++){const N=this.circles[3*z],U=this.circles[3*z+1],H=this.circles[3*z+2];I.push({key:this.circleKeys[z],x1:N-H,y1:U-H,x2:N+H,y2:U+H})}}else this._forEachCell(n,s,h,m,this._queryCell,I,{hitTest:b,overlapMode:k,seenUids:{box:{},circle:{}}},P);return I}query(n,s,h,m){return this._query(n,s,h,m,!1,null)}hitTest(n,s,h,m,b,k){return this._query(n,s,h,m,!0,b,k).length>0}hitTestCircle(n,s,h,m,b){const k=n-h,P=n+h,I=s-h,z=s+h;if(P<0||k>this.width||z<0||I>this.height)return!1;const N=[];return this._forEachCell(k,I,P,z,this._queryCellCircle,N,{hitTest:!0,overlapMode:m,circle:{x:n,y:s,radius:h},seenUids:{box:{},circle:{}}},b),N.length>0}_queryCell(n,s,h,m,b,k,P,I){const{seenUids:z,hitTest:N,overlapMode:U}=P,H=this.boxCells[b];if(H!==null){const K=this.bboxes;for(const X of H)if(!z.box[X]){z.box[X]=!0;const le=4*X,xe=this.boxKeys[X];if(n<=K[le+2]&&s<=K[le+3]&&h>=K[le+0]&&m>=K[le+1]&&(!I||I(xe))&&(!N||!Xe(U,xe.overlapMode))&&(k.push({key:xe,x1:K[le],y1:K[le+1],x2:K[le+2],y2:K[le+3]}),N))return!0}}const Q=this.circleCells[b];if(Q!==null){const K=this.circles;for(const X of Q)if(!z.circle[X]){z.circle[X]=!0;const le=3*X,xe=this.circleKeys[X];if(this._circleAndRectCollide(K[le],K[le+1],K[le+2],n,s,h,m)&&(!I||I(xe))&&(!N||!Xe(U,xe.overlapMode))){const be=K[le],re=K[le+1],Me=K[le+2];if(k.push({key:xe,x1:be-Me,y1:re-Me,x2:be+Me,y2:re+Me}),N)return!0}}}return!1}_queryCellCircle(n,s,h,m,b,k,P,I){const{circle:z,seenUids:N,overlapMode:U}=P,H=this.boxCells[b];if(H!==null){const K=this.bboxes;for(const X of H)if(!N.box[X]){N.box[X]=!0;const le=4*X,xe=this.boxKeys[X];if(this._circleAndRectCollide(z.x,z.y,z.radius,K[le+0],K[le+1],K[le+2],K[le+3])&&(!I||I(xe))&&!Xe(U,xe.overlapMode))return k.push(!0),!0}}const Q=this.circleCells[b];if(Q!==null){const K=this.circles;for(const X of Q)if(!N.circle[X]){N.circle[X]=!0;const le=3*X,xe=this.circleKeys[X];if(this._circlesCollide(K[le],K[le+1],K[le+2],z.x,z.y,z.radius)&&(!I||I(xe))&&!Xe(U,xe.overlapMode))return k.push(!0),!0}}}_forEachCell(n,s,h,m,b,k,P,I){const z=this._convertToXCellCoord(n),N=this._convertToYCellCoord(s),U=this._convertToXCellCoord(h),H=this._convertToYCellCoord(m);for(let Q=z;Q<=U;Q++)for(let K=N;K<=H;K++)if(b.call(this,n,s,h,m,this.xCellCount*K+Q,k,P,I))return}_convertToXCellCoord(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}_convertToYCellCoord(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}_circlesCollide(n,s,h,m,b,k){const P=m-n,I=b-s,z=h+k;return z*z>P*P+I*I}_circleAndRectCollide(n,s,h,m,b,k,P){const I=(k-m)/2,z=Math.abs(n-(m+I));if(z>I+h)return!1;const N=(P-b)/2,U=Math.abs(s-(b+N));if(U>N+h)return!1;if(z<=I||U<=N)return!0;const H=z-I,Q=U-N;return H*H+Q*Q<=h*h}}function ir(f,n,s,h,m){const b=c.create();return n?(c.scale(b,b,[1/m,1/m,1]),s||c.rotateZ(b,b,h.angle)):c.multiply(b,h.labelPlaneMatrix,f),b}function dn(f,n,s,h,m){if(n){const b=c.clone(f);return c.scale(b,b,[m,m,1]),s||c.rotateZ(b,b,-h.angle),b}return h.glCoordMatrix}function Sn(f,n,s){let h;s?(h=[f.x,f.y,s(f.x,f.y),1],c.transformMat4(h,h,n)):(h=[f.x,f.y,0,1],Gr(h,h,n));const m=h[3];return{point:new c.pointGeometry(h[0]/m,h[1]/m),signedDistanceFromCamera:m}}function er(f,n){return .5+f/n*.5}function ji(f,n){const s=f[0]/f[3],h=f[1]/f[3];return s>=-n[0]&&s<=n[0]&&h>=-n[1]&&h<=n[1]}function fr(f,n,s,h,m,b,k,P,I,z){const N=h?f.textSizeData:f.iconSizeData,U=c.evaluateSizeForZoom(N,s.transform.zoom),H=[256/s.width*2+1,256/s.height*2+1],Q=h?f.text.dynamicLayoutVertexArray:f.icon.dynamicLayoutVertexArray;Q.clear();const K=f.lineVertexArray,X=h?f.text.placedSymbolArray:f.icon.placedSymbolArray,le=s.transform.width/s.transform.height;let xe=!1;for(let be=0;be<X.length;be++){const re=X.get(be);if(re.hidden||re.writingMode===c.WritingMode.vertical&&!xe){or(re.numGlyphs,Q);continue}let Me;if(xe=!1,z?(Me=[re.anchorX,re.anchorY,z(re.anchorX,re.anchorY),1],c.transformMat4(Me,Me,n)):(Me=[re.anchorX,re.anchorY,0,1],Gr(Me,Me,n)),!ji(Me,H)){or(re.numGlyphs,Q);continue}const ke=er(s.transform.cameraToCenterDistance,Me[3]),Pe=c.evaluateSizeForFeature(N,U,re),De=k?Pe/ke:Pe*ke,Ge=new c.pointGeometry(re.anchorX,re.anchorY),ze=Sn(Ge,m,z).point,lt={},nt=Rt(re,De,!1,P,n,m,b,f.glyphOffsetArray,K,Q,ze,Ge,lt,le,I,z);xe=nt.useVertical,(nt.notEnoughRoom||xe||nt.needsFlipping&&Rt(re,De,!0,P,n,m,b,f.glyphOffsetArray,K,Q,ze,Ge,lt,le,I,z).notEnoughRoom)&&or(re.numGlyphs,Q)}h?f.text.dynamicLayoutVertexBuffer.updateData(Q):f.icon.dynamicLayoutVertexBuffer.updateData(Q)}function et(f,n,s,h,m,b,k,P,I,z,N,U,H){const Q=P.glyphStartIndex+P.numGlyphs,K=P.lineStartIndex,X=P.lineStartIndex+P.lineLength,le=n.getoffsetX(P.glyphStartIndex),xe=n.getoffsetX(Q-1),be=lr(f*le,s,h,m,b,k,P.segment,K,X,I,z,N,U,H);if(!be)return null;const re=lr(f*xe,s,h,m,b,k,P.segment,K,X,I,z,N,U,H);return re?{first:be,last:re}:null}function Bt(f,n,s,h){return f===c.WritingMode.horizontal&&Math.abs(s.y-n.y)>Math.abs(s.x-n.x)*h?{useVertical:!0}:(f===c.WritingMode.vertical?n.y<s.y:n.x>s.x)?{needsFlipping:!0}:null}function Rt(f,n,s,h,m,b,k,P,I,z,N,U,H,Q,K,X){const le=n/24,xe=f.lineOffsetX*le,be=f.lineOffsetY*le;let re;if(f.numGlyphs>1){const Me=f.glyphStartIndex+f.numGlyphs,ke=f.lineStartIndex,Pe=f.lineStartIndex+f.lineLength,De=et(le,P,xe,be,s,N,U,f,I,b,H,K,X);if(!De)return{notEnoughRoom:!0};const Ge=Sn(De.first.point,k,X).point,ze=Sn(De.last.point,k,X).point;if(h&&!s){const lt=Bt(f.writingMode,Ge,ze,Q);if(lt)return lt}re=[De.first];for(let lt=f.glyphStartIndex+1;lt<Me-1;lt++)re.push(lr(le*P.getoffsetX(lt),xe,be,s,N,U,f.segment,ke,Pe,I,b,H,K,X));re.push(De.last)}else{if(h&&!s){const ke=Sn(U,m,X).point,Pe=f.lineStartIndex+f.segment+1,De=new c.pointGeometry(I.getx(Pe),I.gety(Pe)),Ge=Sn(De,m,X),ze=Ge.signedDistanceFromCamera>0?Ge.point:tr(U,De,ke,1,m,X),lt=Bt(f.writingMode,ke,ze,Q);if(lt)return lt}const Me=lr(le*P.getoffsetX(f.glyphStartIndex),xe,be,s,N,U,f.segment,f.lineStartIndex,f.lineStartIndex+f.lineLength,I,b,H,K,X);if(!Me)return{notEnoughRoom:!0};re=[Me]}for(const Me of re)c.addDynamicAttributes(z,Me.point,Me.angle);return{}}function tr(f,n,s,h,m,b){const k=Sn(f.add(f.sub(n)._unit()),m,b).point,P=s.sub(k);return s.add(P._mult(h/P.mag()))}function lr(f,n,s,h,m,b,k,P,I,z,N,U,H,Q){const K=h?f-n:f+n;let X=K>0?1:-1,le=0;h&&(X*=-1,le=Math.PI),X<0&&(le+=Math.PI);let xe=X>0?P+k:P+k+1,be=m,re=m,Me=0,ke=0;const Pe=Math.abs(K),De=[];for(;Me+ke<=Pe;){if(xe+=X,xe<P||xe>=I)return null;if(re=be,De.push(be),be=U[xe],be===void 0){const st=new c.pointGeometry(z.getx(xe),z.gety(xe)),jt=Sn(st,N,Q);if(jt.signedDistanceFromCamera>0)be=U[xe]=jt.point;else{const Gt=xe-X;be=tr(Me===0?b:new c.pointGeometry(z.getx(Gt),z.gety(Gt)),st,re,Pe-Me+1,N,Q)}}Me+=ke,ke=re.dist(be)}const Ge=(Pe-Me)/ke,ze=be.sub(re),lt=ze.mult(Ge)._add(re);lt._add(ze._unit()._perp()._mult(s*X));const nt=le+Math.atan2(be.y-re.y,be.x-re.x);return De.push(lt),{point:lt,angle:H?nt:0,path:De}}const Lt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function or(f,n){for(let s=0;s<f;s++){const h=n.length;n.resize(h+4),n.float32.set(Lt,3*h)}}function Gr(f,n,s){const h=n[0],m=n[1];return f[0]=s[0]*h+s[4]*m+s[12],f[1]=s[1]*h+s[5]*m+s[13],f[3]=s[3]*h+s[7]*m+s[15],f}const je=100;class It{constructor(n,s=new Sr(n.width+200,n.height+200,25),h=new Sr(n.width+200,n.height+200,25)){this.transform=n,this.grid=s,this.ignoredGrid=h,this.pitchfactor=Math.cos(n._pitch)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+je,this.screenBottomBoundary=n.height+je,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(n,s,h,m,b,k){const P=this.projectAndGetPerspectiveRatio(m,n.anchorPointX,n.anchorPointY,k),I=h*P.perspectiveRatio,z=n.x1*I+P.point.x,N=n.y1*I+P.point.y,U=n.x2*I+P.point.x,H=n.y2*I+P.point.y;return!this.isInsideGrid(z,N,U,H)||s!=="always"&&this.grid.hitTest(z,N,U,H,s,b)||P.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[z,N,U,H],offscreen:this.isOffscreen(z,N,U,H)}}placeCollisionCircles(n,s,h,m,b,k,P,I,z,N,U,H,Q,K){const X=[],le=new c.pointGeometry(s.anchorX,s.anchorY),xe=Sn(le,k,K),be=er(this.transform.cameraToCenterDistance,xe.signedDistanceFromCamera),re=(N?b/be:b*be)/c.ONE_EM,Me=Sn(le,P,K).point,ke=et(re,m,s.lineOffsetX*re,s.lineOffsetY*re,!1,Me,le,s,h,P,{},!1,K);let Pe=!1,De=!1,Ge=!0;if(ke){const ze=.5*H*be+Q,lt=new c.pointGeometry(-100,-100),nt=new c.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),st=new Le,jt=ke.first,Gt=ke.last;let Et=[];for(let Qt=jt.path.length-1;Qt>=1;Qt--)Et.push(jt.path[Qt]);for(let Qt=1;Qt<Gt.path.length;Qt++)Et.push(Gt.path[Qt]);const xn=2.5*ze;if(I){const Qt=Et.map(en=>Sn(en,I,K));Et=Qt.some(en=>en.signedDistanceFromCamera<=0)?[]:Qt.map(en=>en.point)}let nn=[];if(Et.length>0){const Qt=Et[0].clone(),en=Et[0].clone();for(let rn=1;rn<Et.length;rn++)Qt.x=Math.min(Qt.x,Et[rn].x),Qt.y=Math.min(Qt.y,Et[rn].y),en.x=Math.max(en.x,Et[rn].x),en.y=Math.max(en.y,Et[rn].y);nn=Qt.x>=lt.x&&en.x<=nt.x&&Qt.y>=lt.y&&en.y<=nt.y?[Et]:en.x<lt.x||Qt.x>nt.x||en.y<lt.y||Qt.y>nt.y?[]:c.clipLine([Et],lt.x,lt.y,nt.x,nt.y)}for(const Qt of nn){st.reset(Qt,.25*ze);let en=0;en=st.length<=.5*ze?1:Math.ceil(st.paddedLength/xn)+1;for(let rn=0;rn<en;rn++){const Cr=rn/Math.max(en-1,1),Kn=st.lerp(Cr),Vn=Kn.x+je,gr=Kn.y+je;X.push(Vn,gr,ze,0);const $r=Vn-ze,Rn=gr-ze,yr=Vn+ze,Mo=gr+ze;if(Ge=Ge&&this.isOffscreen($r,Rn,yr,Mo),De=De||this.isInsideGrid($r,Rn,yr,Mo),n!=="always"&&this.grid.hitTestCircle(Vn,gr,ze,n,U)&&(Pe=!0,!z))return{circles:[],offscreen:!1,collisionDetected:Pe}}}}return{circles:!z&&Pe||!De||be<this.perspectiveRatioCutoff?[]:X,offscreen:Ge,collisionDetected:Pe}}queryRenderedSymbols(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const s=[];let h=1/0,m=1/0,b=-1/0,k=-1/0;for(const N of n){const U=new c.pointGeometry(N.x+je,N.y+je);h=Math.min(h,U.x),m=Math.min(m,U.y),b=Math.max(b,U.x),k=Math.max(k,U.y),s.push(U)}const P=this.grid.query(h,m,b,k).concat(this.ignoredGrid.query(h,m,b,k)),I={},z={};for(const N of P){const U=N.key;if(I[U.bucketInstanceId]===void 0&&(I[U.bucketInstanceId]={}),I[U.bucketInstanceId][U.featureIndex])continue;const H=[new c.pointGeometry(N.x1,N.y1),new c.pointGeometry(N.x2,N.y1),new c.pointGeometry(N.x2,N.y2),new c.pointGeometry(N.x1,N.y2)];c.polygonIntersectsPolygon(s,H)&&(I[U.bucketInstanceId][U.featureIndex]=!0,z[U.bucketInstanceId]===void 0&&(z[U.bucketInstanceId]=[]),z[U.bucketInstanceId].push(U.featureIndex))}return z}insertCollisionBox(n,s,h,m,b,k){(h?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:b,collisionGroupID:k,overlapMode:s},n[0],n[1],n[2],n[3])}insertCollisionCircles(n,s,h,m,b,k){const P=h?this.ignoredGrid:this.grid,I={bucketInstanceId:m,featureIndex:b,collisionGroupID:k,overlapMode:s};for(let z=0;z<n.length;z+=4)P.insertCircle(I,n[z],n[z+1],n[z+2])}projectAndGetPerspectiveRatio(n,s,h,m){let b;return m?(b=[s,h,m(s,h),1],c.transformMat4(b,b,n)):(b=[s,h,0,1],Gr(b,b,n)),{point:new c.pointGeometry((b[0]/b[3]+1)/2*this.transform.width+je,(-b[1]/b[3]+1)/2*this.transform.height+je),perspectiveRatio:.5+this.transform.cameraToCenterDistance/b[3]*.5}}isOffscreen(n,s,h,m){return h<je||n>=this.screenRightBoundary||m<je||s>this.screenBottomBoundary}isInsideGrid(n,s,h,m){return h>=0&&n<this.gridRightBoundary&&m>=0&&s<this.gridBottomBoundary}getViewportMatrix(){const n=c.identity([]);return c.translate(n,n,[-100,-100,0]),n}}function $t(f,n,s){return n*(c.EXTENT/(f.tileSize*Math.pow(2,s-f.tileID.overscaledZ)))}class mn{constructor(n,s,h,m){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?s:-s))):m&&h?1:0,this.placed=h}isHidden(){return this.opacity===0&&!this.placed}}class yi{constructor(n,s,h,m,b){this.text=new mn(n?n.text:null,s,h,b),this.icon=new mn(n?n.icon:null,s,m,b)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Er{constructor(n,s,h){this.text=n,this.icon=s,this.skipFade=h}}class ai{constructor(){this.invProjMatrix=c.create(),this.viewportMatrix=c.create(),this.circles=[]}}class vi{constructor(n,s,h,m,b){this.bucketInstanceId=n,this.featureIndex=s,this.sourceLayerIndex=h,this.bucketIndex=m,this.tileID=b}}class Gi{constructor(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}}get(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){const s=++this.maxGroupID;this.collisionGroups[n]={ID:s,predicate:h=>h.collisionGroupID===s}}return this.collisionGroups[n]}}function la(f,n,s,h,m){const{horizontalAlign:b,verticalAlign:k}=c.getAnchorAlignment(f),P=-(b-.5)*n,I=-(k-.5)*s,z=c.evaluateVariableOffset(f,h);return new c.pointGeometry(P+z[0]*m,I+z[1]*m)}function Kr(f,n,s,h,m,b){const{x1:k,x2:P,y1:I,y2:z,anchorPointX:N,anchorPointY:U}=f,H=new c.pointGeometry(n,s);return h&&H._rotate(m?b:-b),{x1:k+H.x,y1:I+H.y,x2:P+H.x,y2:z+H.y,anchorPointX:N,anchorPointY:U}}class Z{constructor(n,s,h,m,b){this.transform=n.clone(),this.terrain=s,this.collisionIndex=new It(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=h,this.retainedQueryData={},this.collisionGroups=new Gi(m),this.collisionCircleArrays={},this.prevPlacement=b,b&&(b.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(n,s,h,m){const b=h.getBucket(s),k=h.latestFeatureIndex;if(!b||!k||s.id!==b.layerIds[0])return;const P=h.collisionBoxArray,I=b.layers[0].layout,z=Math.pow(2,this.transform.zoom-h.tileID.overscaledZ),N=h.tileSize/c.EXTENT,U=this.transform.calculatePosMatrix(h.tileID.toUnwrapped()),H=I.get("text-pitch-alignment")==="map",Q=I.get("text-rotation-alignment")==="map",K=$t(h,1,this.transform.zoom),X=ir(U,H,Q,this.transform,K);let le=null;if(H){const be=dn(U,H,Q,this.transform,K);le=c.multiply([],this.transform.labelPlaneMatrix,be)}this.retainedQueryData[b.bucketInstanceId]=new vi(b.bucketInstanceId,k,b.sourceLayerIndex,b.index,h.tileID);const xe={bucket:b,layout:I,posMatrix:U,textLabelPlaneMatrix:X,labelToScreenMatrix:le,scale:z,textPixelRatio:N,holdingForFade:h.holdingForFade(),collisionBoxArray:P,partiallyEvaluatedTextSize:c.evaluateSizeForZoom(b.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(m)for(const be of b.sortKeyRanges){const{sortKey:re,symbolInstanceStart:Me,symbolInstanceEnd:ke}=be;n.push({sortKey:re,symbolInstanceStart:Me,symbolInstanceEnd:ke,parameters:xe})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:xe})}attemptAnchorPlacement(n,s,h,m,b,k,P,I,z,N,U,H,Q,K,X,le){const xe=[H.textOffset0,H.textOffset1],be=la(n,h,m,xe,b),re=this.collisionIndex.placeCollisionBox(Kr(s,be.x,be.y,k,P,this.transform.angle),U,I,z,N.predicate,le);if((!X||this.collisionIndex.placeCollisionBox(Kr(X,be.x,be.y,k,P,this.transform.angle),U,I,z,N.predicate,le).box.length!==0)&&re.box.length>0){let Me;if(this.prevPlacement&&this.prevPlacement.variableOffsets[H.crossTileID]&&this.prevPlacement.placements[H.crossTileID]&&this.prevPlacement.placements[H.crossTileID].text&&(Me=this.prevPlacement.variableOffsets[H.crossTileID].anchor),H.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[H.crossTileID]={textOffset:xe,width:h,height:m,anchor:n,textBoxScale:b,prevAnchor:Me},this.markUsedJustification(Q,n,H,K),Q.allowVerticalPlacement&&(this.markUsedOrientation(Q,K,H),this.placedOrientations[H.crossTileID]=K),{shift:be,placedGlyphBoxes:re}}}placeLayerBucketPart(n,s,h){const{bucket:m,layout:b,posMatrix:k,textLabelPlaneMatrix:P,labelToScreenMatrix:I,textPixelRatio:z,holdingForFade:N,collisionBoxArray:U,partiallyEvaluatedTextSize:H,collisionGroup:Q}=n.parameters,K=b.get("text-optional"),X=b.get("icon-optional"),le=c.getOverlapMode(b,"text-overlap","text-allow-overlap"),xe=le==="always",be=c.getOverlapMode(b,"icon-overlap","icon-allow-overlap"),re=be==="always",Me=b.get("text-rotation-alignment")==="map",ke=b.get("text-pitch-alignment")==="map",Pe=b.get("icon-text-fit")!=="none",De=b.get("symbol-z-order")==="viewport-y",Ge=xe&&(re||!m.hasIconData()||X),ze=re&&(xe||!m.hasTextData()||K);!m.collisionArrays&&U&&m.deserializeCollisionBoxes(U);const lt=(nt,st)=>{if(s[nt.crossTileID])return;if(N)return void(this.placements[nt.crossTileID]=new Er(!1,!1,!1));let jt=!1,Gt=!1,Et=!0,xn=null,nn={box:null,offscreen:null},Qt={box:null},en=null,rn=null,Cr=null,Kn=0,Vn=0,gr=0;st.textFeatureIndex?Kn=st.textFeatureIndex:nt.useRuntimeCollisionCircles&&(Kn=nt.featureIndex),st.verticalTextFeatureIndex&&(Vn=st.verticalTextFeatureIndex);const $r=this.retainedQueryData[m.bucketInstanceId].tileID,Rn=this.terrain?(cn,on)=>this.terrain.getElevation($r,cn,on):null;for(const cn of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const on=st[cn];on&&(on.elevation=Rn?Rn(on.anchorPointX,on.anchorPointY):0)}const yr=st.textBox;if(yr){const cn=Ht=>{let Jt=c.WritingMode.horizontal;if(m.allowVerticalPlacement&&!Ht&&this.prevPlacement){const Nn=this.prevPlacement.placedOrientations[nt.crossTileID];Nn&&(this.placedOrientations[nt.crossTileID]=Nn,Jt=Nn,this.markUsedOrientation(m,Jt,nt))}return Jt},on=(Ht,Jt)=>{if(m.allowVerticalPlacement&&nt.numVerticalGlyphVertices>0&&st.verticalTextBox){for(const Nn of m.writingModes)if(Nn===c.WritingMode.vertical?(nn=Jt(),Qt=nn):nn=Ht(),nn&&nn.box&&nn.box.length)break}else nn=Ht()};if(b.get("text-variable-anchor")){let Ht=b.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[nt.crossTileID]){const Cn=this.prevPlacement.variableOffsets[nt.crossTileID];Ht.indexOf(Cn.anchor)>0&&(Ht=Ht.filter(ei=>ei!==Cn.anchor),Ht.unshift(Cn.anchor))}const Jt=(Cn,ei,Co)=>{const Po=Cn.x2-Cn.x1,ja=Cn.y2-Cn.y1,$s=nt.textBoxScale,Da=Pe&&be==="never"?ei:null;let Pr={box:[],offscreen:!1};const Us=le!=="never"?2*Ht.length:Ht.length;for(let Na=0;Na<Us;++Na){const Io=this.attemptAnchorPlacement(Ht[Na%Ht.length],Cn,Po,ja,$s,Me,ke,z,k,Q,Na>=Ht.length?le:"never",nt,m,Co,Da,Rn);if(Io&&(Pr=Io.placedGlyphBoxes,Pr&&Pr.box&&Pr.box.length)){jt=!0,xn=Io.shift;break}}return Pr};on(()=>Jt(yr,st.iconBox,c.WritingMode.horizontal),()=>{const Cn=st.verticalTextBox;return m.allowVerticalPlacement&&!(nn&&nn.box&&nn.box.length)&&nt.numVerticalGlyphVertices>0&&Cn?Jt(Cn,st.verticalIconBox,c.WritingMode.vertical):{box:null,offscreen:null}}),nn&&(jt=nn.box,Et=nn.offscreen);const Nn=cn(nn&&nn.box);if(!jt&&this.prevPlacement){const Cn=this.prevPlacement.variableOffsets[nt.crossTileID];Cn&&(this.variableOffsets[nt.crossTileID]=Cn,this.markUsedJustification(m,Cn.anchor,nt,Nn))}}else{const Ht=(Jt,Nn)=>{const Cn=this.collisionIndex.placeCollisionBox(Jt,le,z,k,Q.predicate,Rn);return Cn&&Cn.box&&Cn.box.length&&(this.markUsedOrientation(m,Nn,nt),this.placedOrientations[nt.crossTileID]=Nn),Cn};on(()=>Ht(yr,c.WritingMode.horizontal),()=>{const Jt=st.verticalTextBox;return m.allowVerticalPlacement&&nt.numVerticalGlyphVertices>0&&Jt?Ht(Jt,c.WritingMode.vertical):{box:null,offscreen:null}}),cn(nn&&nn.box&&nn.box.length)}}if(en=nn,jt=en&&en.box&&en.box.length>0,Et=en&&en.offscreen,nt.useRuntimeCollisionCircles){const cn=m.text.placedSymbolArray.get(nt.centerJustifiedTextSymbolIndex),on=c.evaluateSizeForFeature(m.textSizeData,H,cn),Ht=b.get("text-padding");rn=this.collisionIndex.placeCollisionCircles(le,cn,m.lineVertexArray,m.glyphOffsetArray,on,k,P,I,h,ke,Q.predicate,nt.collisionCircleDiameter,Ht,Rn),rn.circles.length&&rn.collisionDetected&&!h&&c.warnOnce("Collisions detected, but collision boxes are not shown"),jt=xe||rn.circles.length>0&&!rn.collisionDetected,Et=Et&&rn.offscreen}if(st.iconFeatureIndex&&(gr=st.iconFeatureIndex),st.iconBox){const cn=on=>{const Ht=Pe&&xn?Kr(on,xn.x,xn.y,Me,ke,this.transform.angle):on;return this.collisionIndex.placeCollisionBox(Ht,be,z,k,Q.predicate,Rn)};Qt&&Qt.box&&Qt.box.length&&st.verticalIconBox?(Cr=cn(st.verticalIconBox),Gt=Cr.box.length>0):(Cr=cn(st.iconBox),Gt=Cr.box.length>0),Et=Et&&Cr.offscreen}const Mo=K||nt.numHorizontalGlyphVertices===0&&nt.numVerticalGlyphVertices===0,Os=X||nt.numIconVertices===0;if(Mo||Os?Os?Mo||(Gt=Gt&&jt):jt=Gt&&jt:Gt=jt=Gt&&jt,jt&&en&&en.box&&this.collisionIndex.insertCollisionBox(en.box,le,b.get("text-ignore-placement"),m.bucketInstanceId,Qt&&Qt.box&&Vn?Vn:Kn,Q.ID),Gt&&Cr&&this.collisionIndex.insertCollisionBox(Cr.box,be,b.get("icon-ignore-placement"),m.bucketInstanceId,gr,Q.ID),rn&&(jt&&this.collisionIndex.insertCollisionCircles(rn.circles,le,b.get("text-ignore-placement"),m.bucketInstanceId,Kn,Q.ID),h)){const cn=m.bucketInstanceId;let on=this.collisionCircleArrays[cn];on===void 0&&(on=this.collisionCircleArrays[cn]=new ai);for(let Ht=0;Ht<rn.circles.length;Ht+=4)on.circles.push(rn.circles[Ht+0]),on.circles.push(rn.circles[Ht+1]),on.circles.push(rn.circles[Ht+2]),on.circles.push(rn.collisionDetected?1:0)}if(nt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(m.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[nt.crossTileID]=new Er(jt||Ge,Gt||ze,Et||m.justReloaded),s[nt.crossTileID]=!0};if(De){if(n.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const nt=m.getSortedSymbolIndexes(this.transform.angle);for(let st=nt.length-1;st>=0;--st){const jt=nt[st];lt(m.symbolInstances.get(jt),m.collisionArrays[jt])}}else for(let nt=n.symbolInstanceStart;nt<n.symbolInstanceEnd;nt++)lt(m.symbolInstances.get(nt),m.collisionArrays[nt]);if(h&&m.bucketInstanceId in this.collisionCircleArrays){const nt=this.collisionCircleArrays[m.bucketInstanceId];c.invert(nt.invProjMatrix,k),nt.viewportMatrix=this.collisionIndex.getViewportMatrix()}m.justReloaded=!1}markUsedJustification(n,s,h,m){let b;b=m===c.WritingMode.vertical?h.verticalPlacedTextSymbolIndex:{left:h.leftJustifiedTextSymbolIndex,center:h.centerJustifiedTextSymbolIndex,right:h.rightJustifiedTextSymbolIndex}[c.getAnchorJustification(s)];const k=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex,h.verticalPlacedTextSymbolIndex];for(const P of k)P>=0&&(n.text.placedSymbolArray.get(P).crossTileID=b>=0&&P!==b?0:h.crossTileID)}markUsedOrientation(n,s,h){const m=s===c.WritingMode.horizontal||s===c.WritingMode.horizontalOnly?s:0,b=s===c.WritingMode.vertical?s:0,k=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex];for(const P of k)n.text.placedSymbolArray.get(P).placedOrientation=m;h.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(h.verticalPlacedTextSymbolIndex).placedOrientation=b)}commit(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;const s=this.prevPlacement;let h=!1;this.prevZoomAdjustment=s?s.zoomAdjustment(this.transform.zoom):0;const m=s?s.symbolFadeChange(n):1,b=s?s.opacities:{},k=s?s.variableOffsets:{},P=s?s.placedOrientations:{};for(const I in this.placements){const z=this.placements[I],N=b[I];N?(this.opacities[I]=new yi(N,m,z.text,z.icon),h=h||z.text!==N.text.placed||z.icon!==N.icon.placed):(this.opacities[I]=new yi(null,m,z.text,z.icon,z.skipFade),h=h||z.text||z.icon)}for(const I in b){const z=b[I];if(!this.opacities[I]){const N=new yi(z,m,!1,!1);N.isHidden()||(this.opacities[I]=N,h=h||z.text.placed||z.icon.placed)}}for(const I in k)this.variableOffsets[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.variableOffsets[I]=k[I]);for(const I in P)this.placedOrientations[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.placedOrientations[I]=P[I]);if(s&&s.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");h?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=s?s.lastPlacementChangeTime:n)}updateLayerOpacities(n,s){const h={};for(const m of s){const b=m.getBucket(n);b&&m.latestFeatureIndex&&n.id===b.layerIds[0]&&this.updateBucketOpacities(b,h,m.collisionBoxArray)}}updateBucketOpacities(n,s,h){n.hasTextData()&&n.text.opacityVertexArray.clear(),n.hasIconData()&&n.icon.opacityVertexArray.clear(),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();const m=n.layers[0].layout,b=new yi(null,0,!1,!1,!0),k=m.get("text-allow-overlap"),P=m.get("icon-allow-overlap"),I=m.get("text-variable-anchor"),z=m.get("text-rotation-alignment")==="map",N=m.get("text-pitch-alignment")==="map",U=m.get("icon-text-fit")!=="none",H=new yi(null,0,k&&(P||!n.hasIconData()||m.get("icon-optional")),P&&(k||!n.hasTextData()||m.get("text-optional")),!0);!n.collisionArrays&&h&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(h);const Q=(K,X,le)=>{for(let xe=0;xe<X/4;xe++)K.opacityVertexArray.emplaceBack(le)};for(let K=0;K<n.symbolInstances.length;K++){const X=n.symbolInstances.get(K),{numHorizontalGlyphVertices:le,numVerticalGlyphVertices:xe,crossTileID:be}=X;let re=this.opacities[be];s[be]?re=b:re||(re=H,this.opacities[be]=re),s[be]=!0;const Me=X.numIconVertices>0,ke=this.placedOrientations[X.crossTileID],Pe=ke===c.WritingMode.vertical,De=ke===c.WritingMode.horizontal||ke===c.WritingMode.horizontalOnly;if(le>0||xe>0){const Ge=_e(re.text);Q(n.text,le,Pe?Ae:Ge),Q(n.text,xe,De?Ae:Ge);const ze=re.text.isHidden();[X.rightJustifiedTextSymbolIndex,X.centerJustifiedTextSymbolIndex,X.leftJustifiedTextSymbolIndex].forEach(st=>{st>=0&&(n.text.placedSymbolArray.get(st).hidden=ze||Pe?1:0)}),X.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(X.verticalPlacedTextSymbolIndex).hidden=ze||De?1:0);const lt=this.variableOffsets[X.crossTileID];lt&&this.markUsedJustification(n,lt.anchor,X,ke);const nt=this.placedOrientations[X.crossTileID];nt&&(this.markUsedJustification(n,"left",X,nt),this.markUsedOrientation(n,nt,X))}if(Me){const Ge=_e(re.icon),ze=!(U&&X.verticalPlacedIconSymbolIndex&&Pe);X.placedIconSymbolIndex>=0&&(Q(n.icon,X.numIconVertices,ze?Ge:Ae),n.icon.placedSymbolArray.get(X.placedIconSymbolIndex).hidden=re.icon.isHidden()),X.verticalPlacedIconSymbolIndex>=0&&(Q(n.icon,X.numVerticalIconVertices,ze?Ae:Ge),n.icon.placedSymbolArray.get(X.verticalPlacedIconSymbolIndex).hidden=re.icon.isHidden())}if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){const Ge=n.collisionArrays[K];if(Ge){let ze=new c.pointGeometry(0,0);if(Ge.textBox||Ge.verticalTextBox){let nt=!0;if(I){const st=this.variableOffsets[be];st?(ze=la(st.anchor,st.width,st.height,st.textOffset,st.textBoxScale),z&&ze._rotate(N?this.transform.angle:-this.transform.angle)):nt=!1}Ge.textBox&&R(n.textCollisionBox.collisionVertexArray,re.text.placed,!nt||Pe,ze.x,ze.y),Ge.verticalTextBox&&R(n.textCollisionBox.collisionVertexArray,re.text.placed,!nt||De,ze.x,ze.y)}const lt=!!(!De&&Ge.verticalIconBox);Ge.iconBox&&R(n.iconCollisionBox.collisionVertexArray,re.icon.placed,lt,U?ze.x:0,U?ze.y:0),Ge.verticalIconBox&&R(n.iconCollisionBox.collisionVertexArray,re.icon.placed,!lt,U?ze.x:0,U?ze.y:0)}}}if(n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.text.opacityVertexArray.length!==n.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${n.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${n.text.layoutVertexArray.length}) / 4`);if(n.icon.opacityVertexArray.length!==n.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${n.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${n.icon.layoutVertexArray.length}) / 4`);if(n.bucketInstanceId in this.collisionCircleArrays){const K=this.collisionCircleArrays[n.bucketInstanceId];n.placementInvProjMatrix=K.invProjMatrix,n.placementViewportMatrix=K.viewportMatrix,n.collisionCircleArray=K.circles,delete this.collisionCircleArrays[n.bucketInstanceId]}}symbolFadeChange(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(n){return Math.max(0,(this.transform.zoom-n)/1.5)}hasTransitions(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(n,s){const h=this.zoomAtLastRecencyCheck===s?1-this.zoomAdjustment(s):1;return this.zoomAtLastRecencyCheck=s,this.commitTime+this.fadeDuration*h>n}setStale(){this.stale=!0}}function R(f,n,s,h,m){f.emplaceBack(n?1:0,s?1:0,h||0,m||0),f.emplaceBack(n?1:0,s?1:0,h||0,m||0),f.emplaceBack(n?1:0,s?1:0,h||0,m||0),f.emplaceBack(n?1:0,s?1:0,h||0,m||0)}const O=Math.pow(2,25),G=Math.pow(2,24),J=Math.pow(2,17),ce=Math.pow(2,16),me=Math.pow(2,9),fe=Math.pow(2,8),ue=Math.pow(2,1);function _e(f){if(f.opacity===0&&!f.placed)return 0;if(f.opacity===1&&f.placed)return 4294967295;const n=f.placed?1:0,s=Math.floor(127*f.opacity);return s*O+n*G+s*J+n*ce+s*me+n*fe+s*ue+n}const Ae=0;class Ue{constructor(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&!n.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(n,s,h,m,b){const k=this._bucketParts;for(;this._currentTileIndex<n.length;)if(s.getBucketParts(k,m,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,k.sort((P,I)=>P.sortKey-I.sortKey));this._currentPartIndex<k.length;)if(s.placeLayerBucketPart(k[this._currentPartIndex],this._seenCrossTileIDs,h),this._currentPartIndex++,b())return!0;return!1}}class $e{constructor(n,s,h,m,b,k,P,I){this.placement=new Z(n,s,k,P,I),this._currentPlacementIndex=h.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=b,this._done=!1}isDone(){return this._done}continuePlacement(n,s,h){const m=c.exported.now(),b=()=>{const k=c.exported.now()-m;return!this._forceFullPlacement&&k>2};for(;this._currentPlacementIndex>=0;){const k=s[n[this._currentPlacementIndex]],P=this.placement.collisionIndex.transform.zoom;if(k.type==="symbol"&&(!k.minzoom||k.minzoom<=P)&&(!k.maxzoom||k.maxzoom>P)){if(this._inProgressLayer||(this._inProgressLayer=new Ue(k)),this._inProgressLayer.continuePlacement(h[k.source],this.placement,this._showCollisionBoxes,k,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(n){return this.placement.commit(n),this.placement}}const ft=512/c.EXTENT/2;class ct{constructor(n,s,h){this.tileID=n,this.indexedSymbolInstances={},this.bucketInstanceId=h;for(let m=0;m<s.length;m++){const b=s.get(m),k=b.key;this.indexedSymbolInstances[k]||(this.indexedSymbolInstances[k]=[]),this.indexedSymbolInstances[k].push({crossTileID:b.crossTileID,coord:this.getScaledCoordinates(b,n)})}}getScaledCoordinates(n,s){const h=ft/Math.pow(2,s.canonical.z-this.tileID.canonical.z);return{x:Math.floor((s.canonical.x*c.EXTENT+n.anchorX)*h),y:Math.floor((s.canonical.y*c.EXTENT+n.anchorY)*h)}}findMatches(n,s,h){const m=this.tileID.canonical.z<s.canonical.z?1:Math.pow(2,this.tileID.canonical.z-s.canonical.z);for(let b=0;b<n.length;b++){const k=n.get(b);if(k.crossTileID)continue;const P=this.indexedSymbolInstances[k.key];if(!P)continue;const I=this.getScaledCoordinates(k,s);for(const z of P)if(Math.abs(z.coord.x-I.x)<=m&&Math.abs(z.coord.y-I.y)<=m&&!h[z.crossTileID]){h[z.crossTileID]=!0,k.crossTileID=z.crossTileID;break}}}}class vt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ot{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(n){const s=Math.round((n-this.lng)/360);if(s!==0)for(const h in this.indexes){const m=this.indexes[h],b={};for(const k in m){const P=m[k];P.tileID=P.tileID.unwrapTo(P.tileID.wrap+s),b[P.tileID.key]=P}this.indexes[h]=b}this.lng=n}addBucket(n,s,h){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===s.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(let b=0;b<s.symbolInstances.length;b++)s.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});const m=this.usedCrossTileIDs[n.overscaledZ];for(const b in this.indexes){const k=this.indexes[b];if(Number(b)>n.overscaledZ)for(const P in k){const I=k[P];I.tileID.isChildOf(n)&&I.findMatches(s.symbolInstances,n,m)}else{const P=k[n.scaledTo(Number(b)).key];P&&P.findMatches(s.symbolInstances,n,m)}}for(let b=0;b<s.symbolInstances.length;b++){const k=s.symbolInstances.get(b);k.crossTileID||(k.crossTileID=h.generate(),m[k.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new ct(n,s.symbolInstances,s.bucketInstanceId),!0}removeBucketCrossTileIDs(n,s){for(const h in s.indexedSymbolInstances)for(const m of s.indexedSymbolInstances[h])delete this.usedCrossTileIDs[n][m.crossTileID]}removeStaleBuckets(n){let s=!1;for(const h in this.indexes){const m=this.indexes[h];for(const b in m)n[m[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(h,m[b]),delete m[b],s=!0)}return s}}class qt{constructor(){this.layerIndexes={},this.crossTileIDs=new vt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(n,s,h){let m=this.layerIndexes[n.id];m===void 0&&(m=this.layerIndexes[n.id]=new ot);let b=!1;const k={};m.handleWrapJump(h);for(const P of s){const I=P.getBucket(n);I&&n.id===I.layerIds[0]&&(I.bucketInstanceId||(I.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(P.tileID,I,this.crossTileIDs)&&(b=!0),k[I.bucketInstanceId]=!0)}return m.removeStaleBuckets(k)&&(b=!0),b}pruneUnusedLayers(n){const s={};n.forEach(h=>{s[h]=!0});for(const h in this.layerIndexes)s[h]||delete this.layerIndexes[h]}}var Wt=c.createLayout([{name:"a_pos",type:"Int16",components:2}]);class Zt extends c.Evented{constructor(n){super(),this.sourceCache=n,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=n._cache.max,n.usedForTerrain=!0,n.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const n in this._tiles){const s=this._tiles[n];s.textures.forEach(h=>h.destroy()),s.textures=[]}}update(n,s){this.sourceCache.update(n,s),this._renderableTilesKeys=[];for(const h of n.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:s}))this._renderableTilesKeys.push(h.key),this._tiles[h.key]||(h.posMatrix=new Float64Array(16),c.ortho(h.posMatrix,0,c.EXTENT,0,c.EXTENT,0,1),this._tiles[h.key]=new Nt(h,this.tileSize))}removeOutdated(n){const s={};this.renderHistory=this.renderHistory.filter((h,m)=>this.renderHistory.indexOf(h)===m).slice(0,this.renderHistorySize);for(const h of this._renderableTilesKeys)s[h]=!0;for(const h of this.renderHistory)s[h]=!0;for(const h in this._tiles)s[h]||(this._tiles[h].clearTextures(n),delete this._tiles[h])}getRenderableTiles(){return this._renderableTilesKeys.map(n=>this.getTileByID(n))}getTileByID(n){return this._tiles[n]}getTerrainCoords(n){const s={};for(const h of this._renderableTilesKeys){const m=this._tiles[h].tileID;if(m.canonical.equals(n.canonical)){const b=n.clone();b.posMatrix=new Float64Array(16),c.ortho(b.posMatrix,0,c.EXTENT,0,c.EXTENT,0,1),s[h]=b}else if(m.canonical.isChildOf(n.canonical)){const b=n.clone();b.posMatrix=new Float64Array(16);const k=m.canonical.z-n.canonical.z,P=m.canonical.x-(m.canonical.x>>k<<k),I=m.canonical.y-(m.canonical.y>>k<<k),z=c.EXTENT>>k;c.ortho(b.posMatrix,0,z,0,z,0,1),c.translate(b.posMatrix,b.posMatrix,[-P*z,-I*z,0]),s[h]=b}else if(n.canonical.isChildOf(m.canonical)){const b=n.clone();b.posMatrix=new Float64Array(16);const k=n.canonical.z-m.canonical.z,P=n.canonical.x-(n.canonical.x>>k<<k),I=n.canonical.y-(n.canonical.y>>k<<k),z=c.EXTENT>>k;c.ortho(b.posMatrix,0,c.EXTENT,0,c.EXTENT,0,1),c.translate(b.posMatrix,b.posMatrix,[P*z,I*z,0]),c.scale(b.posMatrix,b.posMatrix,[1/2**k,1/2**k,0]),s[h]=b}}return s}getSourceTile(n,s){const h=this.sourceCache._source;let m=n.overscaledZ-this.deltaZoom;if(m>h.maxzoom&&(m=h.maxzoom),m<h.minzoom)return null;this._sourceTileCache[n.key]||(this._sourceTileCache[n.key]=n.scaledTo(m).key);let b=this.sourceCache.getTileByID(this._sourceTileCache[n.key]);if((!b||!b.dem)&&s)for(;m>=h.minzoom&&(!b||!b.dem);)b=this.sourceCache.getTileByID(n.scaledTo(m--).key);return b}tilesAfterTime(n=Date.now()){return Object.values(this._tiles).filter(s=>s.timeLoaded>=n)}}class Ut{constructor(n,s,h){this.style=n,this.sourceCache=new Zt(s),this.options=h,this.exaggeration=typeof h.exaggeration=="number"?h.exaggeration:1,this.elevationOffset=typeof h.elevationOffset=="number"?h.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(n,s,h,m=c.EXTENT){if(!(s>=0&&s<m&&h>=0&&h<m))return this.elevationOffset;let b=0;const k=this.getTerrainData(n);if(k.tile&&k.tile.dem){const P=c.transformMat4$1([],[s/m*c.EXTENT,h/m*c.EXTENT],k.u_terrain_matrix),I=[P[0]*k.tile.dem.dim,P[1]*k.tile.dem.dim],z=[Math.floor(I[0]),Math.floor(I[1])],N=k.tile.dem.get(z[0],z[1]),U=k.tile.dem.get(z[0],z[1]+1),H=k.tile.dem.get(z[0]+1,z[1]),Q=k.tile.dem.get(z[0]+1,z[1]+1);b=c.number(c.number(N,U,I[0]-z[0]),c.number(H,Q,I[0]-z[0]),I[1]-z[1])}return b}rememberForRerender(n,s){for(const h in this.sourceCache._tiles){const m=this.sourceCache._tiles[h];(m.tileID.equals(s)||m.tileID.isChildOf(s))&&(n===this.sourceCache.sourceCache.id&&(m.timeLoaded=Date.now()),this._rerender[n]=this._rerender[n]||{},this._rerender[n][m.tileID.key]=!0)}}needsRerender(n,s){return this._rerender[n]&&this._rerender[n][s.key]}clearRerenderCache(){this._rerender={}}getElevation(n,s,h,m=c.EXTENT){return(this.getDEMElevation(n,s,h,m)+this.elevationOffset)*this.exaggeration}getTerrainData(n){if(!this._emptyDemTexture){const m=this.style.map.painter.context,b=new c.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new W(m,b,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new W(m,new c.RGBAImage({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=c.identity([])}const s=this.sourceCache.getSourceTile(n,!0);if(s&&s.dem&&(!s.demTexture||s.needsTerrainPrepare)){const m=this.style.map.painter.context;s.demTexture=this.style.map.painter.getTileTexture(s.dem.stride),s.demTexture?s.demTexture.update(s.dem.getPixels(),{premultiply:!1}):s.demTexture=new W(m,s.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),s.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),s.needsTerrainPrepare=!1}const h=s&&s+s.tileID.key+n.key;if(h&&!this._demMatrixCache[h]){const m=this.sourceCache.sourceCache._source.maxzoom;let b=n.canonical.z-s.tileID.canonical.z;n.overscaledZ>n.canonical.z&&(n.canonical.z>=m?b=n.canonical.z-m:c.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const k=n.canonical.x-(n.canonical.x>>b<<b),P=n.canonical.y-(n.canonical.y>>b<<b),I=c.fromScaling(new Float64Array(16),[1/(c.EXTENT<<b),1/(c.EXTENT<<b),0]);c.translate(I,I,[k*c.EXTENT,P*c.EXTENT,0]),this._demMatrixCache[n.key]={matrix:I,coord:n}}return{u_depth:2,u_terrain:3,u_terrain_dim:s&&s.dem&&s.dem.dim||1,u_terrain_matrix:h?this._demMatrixCache[n.key].matrix:this._emptyDemMatrix,u_terrain_unpack:s&&s.dem&&s.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(s&&s.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:s}}getRTTFramebuffer(){const n=this.style.map.painter;if(!this._rttFramebuffer){const s=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=n.context.createFramebuffer(s,s,!0),this._rttFramebuffer.depthAttachment.set(n.context.createRenderbuffer(n.context.gl.DEPTH_COMPONENT16,s,s))}return this._rttFramebuffer}getFramebuffer(n){const s=this.style.map.painter,h=s.width/devicePixelRatio,m=s.height/devicePixelRatio;return!this._fbo||this._fbo.width===h&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new W(s.context,{width:h,height:m,data:null},s.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(s.context.gl.NEAREST,s.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new W(s.context,{width:h,height:m,data:null},s.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(s.context.gl.NEAREST,s.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=s.context.createFramebuffer(h,m,!0),this._fbo.depthAttachment.set(s.context.createRenderbuffer(s.context.gl.DEPTH_COMPONENT16,h,m))),this._fbo.colorAttachment.set(n==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const n=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const s=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let b=0,k=0;b<this._coordsTextureSize;b++)for(let P=0;P<this._coordsTextureSize;P++,k+=4)s[k+0]=255&P,s[k+1]=255&b,s[k+2]=P>>8<<4|b>>8,s[k+3]=0;const h=new c.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(s.buffer)),m=new W(n,h,n.gl.RGBA,{premultiply:!1});return m.bind(n.gl.NEAREST,n.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(n){const s=new Uint8Array(4),h=this.style.map.painter,m=h.context,b=m.gl;m.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),b.readPixels(n.x,h.height/devicePixelRatio-n.y-1,1,1,b.RGBA,b.UNSIGNED_BYTE,s),m.bindFramebuffer.set(null);const k=s[0]+(s[2]>>4<<8),P=s[1]+((15&s[2])<<8),I=this.coordsIndex[255-s[3]],z=I&&this.sourceCache.getTileByID(I);if(!z)return null;const N=this._coordsTextureSize,U=(1<<z.tileID.canonical.z)*N;return new c.MercatorCoordinate((z.tileID.canonical.x*N+k)/U,(z.tileID.canonical.y*N+P)/U,this.getElevation(z.tileID,k,P,N))}getTerrainMesh(){if(this._mesh)return this._mesh;const n=this.style.map.painter.context,s=new c.PosArray,h=new c.TriangleIndexArray,m=this.meshSize,b=c.EXTENT/m,k=m*m;for(let P=0;P<=m;P++)for(let I=0;I<=m;I++)s.emplaceBack(I*b,P*b);for(let P=0;P<k;P+=m+1)for(let I=0;I<m;I++)h.emplaceBack(I+P,m+I+P+1,m+I+P+2),h.emplaceBack(I+P,m+I+P+2,I+P+1);return this._mesh={indexBuffer:n.createIndexBuffer(h),vertexBuffer:n.createVertexBuffer(s,Wt.members),segments:c.SegmentVector.simpleSegment(0,0,s.length,h.length)},this._mesh}getMinMaxElevation(n){const s=this.getTerrainData(n).tile,h={minElevation:null,maxElevation:null};return s&&s.dem&&(h.minElevation=(s.dem.min+this.elevationOffset)*this.exaggeration,h.maxElevation=(s.dem.max+this.elevationOffset)*this.exaggeration),h}}const Vt=(f,n)=>c.emitValidationErrors(f,n&&n.filter(s=>s.identifier!=="source.canvas")),$n=c.pick(dt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ln=c.pick(dt,["setCenter","setZoom","setBearing","setPitch"]),bn=function(){const f={},n=c.spec.$version;for(const s in c.spec.$root){const h=c.spec.$root[s];if(h.required){let m=null;m=s==="version"?n:h.type==="array"?[]:{},m!=null&&(f[s]=m)}}return f}();class mr extends c.Evented{constructor(n,s={}){super(),this.map=n,this.dispatcher=new pt(tt(),this),this.imageManager=new pe,this.imageManager.setEventedParent(this),this.glyphManager=new Se(n._requestManager,s.localIdeographFontFamily),this.lineAtlas=new gt(256,512),this.crossTileSymbolIndex=new qt,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new c.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",c.getReferrer());const h=this;this._rtlTextPluginCallback=mr.registerForPluginStateChange(m=>{h.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:m.pluginStatus,pluginURL:m.pluginURL},(b,k)=>{if(c.triggerPluginCompletionEvent(b),k&&k.every(P=>P))for(const P in h.sourceCaches)h.sourceCaches[P].reload()})}),this.on("data",m=>{if(m.dataType!=="source"||m.sourceDataType!=="metadata")return;const b=this.sourceCaches[m.sourceId];if(!b)return;const k=b.getSource();if(k&&k.vectorLayerIds)for(const P in this._layers){const I=this._layers[P];I.source===k.id&&this._validateLayer(I)}})}loadURL(n,s={}){this.fire(new c.Event("dataloading",{dataType:"style"}));const h=typeof s.validate!="boolean"||s.validate,m=this.map._requestManager.transformRequest(n,c.ResourceType.Style);this._request=c.getJSON(m,(b,k)=>{this._request=null,b?this.fire(new c.ErrorEvent(b)):k&&this._load(k,h)})}loadJSON(n,s={}){this.fire(new c.Event("dataloading",{dataType:"style"})),this._request=c.exported.frame(()=>{this._request=null,this._load(n,s.validate!==!1)})}loadEmpty(){this.fire(new c.Event("dataloading",{dataType:"style"})),this._load(bn,!1)}_load(n,s){if(s&&Vt(this,c.validateStyle(n)))return;this._loaded=!0,this.stylesheet=n;for(const m in n.sources)this.addSource(m,n.sources[m],{validate:!1});n.sprite?this._loadSprite(n.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(n.glyphs);const h=ln(this.stylesheet.layers);this._order=h.map(m=>m.id),this._layers={},this._serializedLayers={};for(let m of h)m=c.createStyleLayer(m),m.setEventedParent(this,{layer:{id:m.id}}),this._layers[m.id]=m,this._serializedLayers[m.id]=m.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new He(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new c.Event("data",{dataType:"style"})),this.fire(new c.Event("style.load"))}_loadSprite(n){this._spriteRequest=function(s,h,m,b){let k,P,I;const z=m>1?"@2x":"";let N=c.getJSON(h.transformRequest(h.normalizeSpriteURL(s,z,".json"),c.ResourceType.SpriteJSON),(Q,K)=>{N=null,I||(I=Q,k=K,H())}),U=c.getImage(h.transformRequest(h.normalizeSpriteURL(s,z,".png"),c.ResourceType.SpriteImage),(Q,K)=>{U=null,I||(I=Q,P=K,H())});function H(){if(I)b(I);else if(k&&P){const Q=c.exported.getImageData(P),K={};for(const X in k){const{width:le,height:xe,x:be,y:re,sdf:Me,pixelRatio:ke,stretchX:Pe,stretchY:De,content:Ge}=k[X],ze=new c.RGBAImage({width:le,height:xe});c.RGBAImage.copy(Q,ze,{x:be,y:re},{x:0,y:0},{width:le,height:xe}),K[X]={data:ze,pixelRatio:ke,sdf:Me,stretchX:Pe,stretchY:De,content:Ge}}b(null,K)}}return{cancel(){N&&(N.cancel(),N=null),U&&(U.cancel(),U=null)}}}(n,this.map._requestManager,this.map.getPixelRatio(),(s,h)=>{if(this._spriteRequest=null,s)this.fire(new c.ErrorEvent(s));else if(h)for(const m in h)this.imageManager.addImage(m,h[m]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.Event("data",{dataType:"style"}))})}_validateLayer(n){const s=this.sourceCaches[n.source];if(!s)return;const h=n.sourceLayer;if(!h)return;const m=s.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(h)===-1)&&this.fire(new c.ErrorEvent(new Error(`Source layer "${h}" does not exist on source "${m.id}" as specified by style layer "${n.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const n in this.sourceCaches)if(!this.sourceCaches[n].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(n){const s=[];for(const h of n){const m=this._layers[h];m.type!=="custom"&&s.push(m.serialize())}return s}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const n in this.sourceCaches)if(this.sourceCaches[n].hasTransition())return!0;for(const n in this._layers)if(this._layers[n].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(n){if(!this._loaded)return;const s=this._changed;if(this._changed){const m=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(m.length||b.length)&&this._updateWorkerLayers(m,b);for(const k in this._updatedSources){const P=this._updatedSources[k];if(P==="reload")this._reloadSource(k);else{if(P!=="clear")throw new Error(`Invalid action ${P}`);this._clearSource(k)}}this._updateTilesForChangedImages();for(const k in this._updatedPaintProps)this._layers[k].updateTransitions(n);this.light.updateTransitions(n),this._resetUpdates()}const h={};for(const m in this.sourceCaches){const b=this.sourceCaches[m];h[m]=b.used,b.used=!1}for(const m of this._order){const b=this._layers[m];b.recalculate(n,this._availableImages),!b.isHidden(n.zoom)&&b.source&&(this.sourceCaches[b.source].used=!0)}for(const m in h){const b=this.sourceCaches[m];h[m]!==b.used&&b.fire(new c.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(n),this.z=n.zoom,s&&this.fire(new c.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const n=Object.keys(this._changedImages);if(n.length){for(const s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["icons","patterns"],n);this._changedImages={}}}_updateWorkerLayers(n,s){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(n),removedIds:s})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(n){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),n){const s=this.sourceCaches[n.source];if(!s)throw new Error(`cannot load terrain, because there exists no source with ID: ${n.source}`);this.terrain=new Ut(this,s,n),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=h=>{h.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=h=>{h.tile&&(h.sourceId===n.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(h.sourceId,h.tile.tileID)):h.source.type==="geojson"&&this.terrain.rememberForRerender(h.sourceId,h.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new c.Event("terrain",{terrain:n}))}setState(n){if(this._checkLoaded(),Vt(this,c.validateStyle(n)))return!1;(n=c.clone$1(n)).layers=ln(n.layers);const s=function(m,b){if(!m)return[{command:dt.setStyle,args:[b]}];let k=[];try{if(!D(m.version,b.version))return[{command:dt.setStyle,args:[b]}];D(m.center,b.center)||k.push({command:dt.setCenter,args:[b.center]}),D(m.zoom,b.zoom)||k.push({command:dt.setZoom,args:[b.zoom]}),D(m.bearing,b.bearing)||k.push({command:dt.setBearing,args:[b.bearing]}),D(m.pitch,b.pitch)||k.push({command:dt.setPitch,args:[b.pitch]}),D(m.sprite,b.sprite)||k.push({command:dt.setSprite,args:[b.sprite]}),D(m.glyphs,b.glyphs)||k.push({command:dt.setGlyphs,args:[b.glyphs]}),D(m.transition,b.transition)||k.push({command:dt.setTransition,args:[b.transition]}),D(m.light,b.light)||k.push({command:dt.setLight,args:[b.light]});const P={},I=[];(function(N,U,H,Q){let K;for(K in U=U||{},N=N||{})Object.prototype.hasOwnProperty.call(N,K)&&(Object.prototype.hasOwnProperty.call(U,K)||Br(K,H,Q));for(K in U)Object.prototype.hasOwnProperty.call(U,K)&&(Object.prototype.hasOwnProperty.call(N,K)?D(N[K],U[K])||(N[K].type==="geojson"&&U[K].type==="geojson"&&rr(N,U,K)?H.push({command:dt.setGeoJSONSourceData,args:[K,U[K].data]}):kn(K,U,H,Q)):tn(K,U,H))})(m.sources,b.sources,I,P);const z=[];m.layers&&m.layers.forEach(N=>{P[N.source]?k.push({command:dt.removeLayer,args:[N.id]}):z.push(N)}),k=k.concat(I),function(N,U,H){U=U||[];const Q=(N=N||[]).map(Fr),K=U.map(Fr),X=N.reduce(Hr,{}),le=U.reduce(Hr,{}),xe=Q.slice(),be=Object.create(null);let re,Me,ke,Pe,De,Ge,ze;for(re=0,Me=0;re<Q.length;re++)ke=Q[re],Object.prototype.hasOwnProperty.call(le,ke)?Me++:(H.push({command:dt.removeLayer,args:[ke]}),xe.splice(xe.indexOf(ke,Me),1));for(re=0,Me=0;re<K.length;re++)ke=K[K.length-1-re],xe[xe.length-1-re]!==ke&&(Object.prototype.hasOwnProperty.call(X,ke)?(H.push({command:dt.removeLayer,args:[ke]}),xe.splice(xe.lastIndexOf(ke,xe.length-Me),1)):Me++,Ge=xe[xe.length-re],H.push({command:dt.addLayer,args:[le[ke],Ge]}),xe.splice(xe.length-re,0,ke),be[ke]=!0);for(re=0;re<K.length;re++)if(ke=K[re],Pe=X[ke],De=le[ke],!be[ke]&&!D(Pe,De))if(D(Pe.source,De.source)&&D(Pe["source-layer"],De["source-layer"])&&D(Pe.type,De.type)){for(ze in On(Pe.layout,De.layout,H,ke,null,dt.setLayoutProperty),On(Pe.paint,De.paint,H,ke,null,dt.setPaintProperty),D(Pe.filter,De.filter)||H.push({command:dt.setFilter,args:[ke,De.filter]}),D(Pe.minzoom,De.minzoom)&&D(Pe.maxzoom,De.maxzoom)||H.push({command:dt.setLayerZoomRange,args:[ke,De.minzoom,De.maxzoom]}),Pe)Object.prototype.hasOwnProperty.call(Pe,ze)&&ze!=="layout"&&ze!=="paint"&&ze!=="filter"&&ze!=="metadata"&&ze!=="minzoom"&&ze!=="maxzoom"&&(ze.indexOf("paint.")===0?On(Pe[ze],De[ze],H,ke,ze.slice(6),dt.setPaintProperty):D(Pe[ze],De[ze])||H.push({command:dt.setLayerProperty,args:[ke,ze,De[ze]]}));for(ze in De)Object.prototype.hasOwnProperty.call(De,ze)&&!Object.prototype.hasOwnProperty.call(Pe,ze)&&ze!=="layout"&&ze!=="paint"&&ze!=="filter"&&ze!=="metadata"&&ze!=="minzoom"&&ze!=="maxzoom"&&(ze.indexOf("paint.")===0?On(Pe[ze],De[ze],H,ke,ze.slice(6),dt.setPaintProperty):D(Pe[ze],De[ze])||H.push({command:dt.setLayerProperty,args:[ke,ze,De[ze]]}))}else H.push({command:dt.removeLayer,args:[ke]}),Ge=xe[xe.lastIndexOf(ke)+1],H.push({command:dt.addLayer,args:[De,Ge]})}(z,b.layers,k)}catch(P){console.warn("Unable to compute style diff:",P),k=[{command:dt.setStyle,args:[b]}]}return k}(this.serialize(),n).filter(m=>!(m.command in Ln));if(s.length===0)return!1;const h=s.filter(m=>!(m.command in $n));if(h.length>0)throw new Error(`Unimplemented: ${h.map(m=>m.command).join(", ")}.`);return s.forEach(m=>{m.command!=="setTransition"&&this[m.command].apply(this,m.args)}),this.stylesheet=n,!0}addImage(n,s){if(this.getImage(n))return this.fire(new c.ErrorEvent(new Error(`An image named "${n}" already exists.`)));this.imageManager.addImage(n,s),this._afterImageUpdated(n)}updateImage(n,s){this.imageManager.updateImage(n,s)}getImage(n){return this.imageManager.getImage(n)}removeImage(n){if(!this.getImage(n))return this.fire(new c.ErrorEvent(new Error(`An image named "${n}" does not exist.`)));this.imageManager.removeImage(n),this._afterImageUpdated(n)}_afterImageUpdated(n){this._availableImages=this.imageManager.listImages(),this._changedImages[n]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(n,s,h={}){if(this._checkLoaded(),this.sourceCaches[n]!==void 0)throw new Error(`Source "${n}" already exists.`);if(!s.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(s).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(s.type)>=0&&this._validate(c.validateStyle.source,`sources.${n}`,s,null,h))return;this.map&&this.map._collectResourceTiming&&(s.collectResourceTiming=!0);const m=this.sourceCaches[n]=new Ft(n,s,this.dispatcher);m.style=this,m.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:m.serialize(),sourceId:n})),m.onAdd(this.map),this._changed=!0}removeSource(n){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error("There is no source with this ID");for(const h in this._layers)if(this._layers[h].source===n)return this.fire(new c.ErrorEvent(new Error(`Source "${n}" cannot be removed while layer "${h}" is using it.`)));const s=this.sourceCaches[n];delete this.sourceCaches[n],delete this._updatedSources[n],s.fire(new c.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:n})),s.setEventedParent(null),s.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(n,s){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error(`There is no source with this ID=${n}`);const h=this.sourceCaches[n].getSource();if(h.type!=="geojson")throw new Error(`geojsonSource.type is ${h.type}, which is !== 'geojson`);h.setData(s),this._changed=!0}getSource(n){return this.sourceCaches[n]&&this.sourceCaches[n].getSource()}addLayer(n,s,h={}){this._checkLoaded();const m=n.id;if(this.getLayer(m))return void this.fire(new c.ErrorEvent(new Error(`Layer "${m}" already exists on this map.`)));let b;if(n.type==="custom"){if(Vt(this,c.validateCustomStyleLayer(n)))return;b=c.createStyleLayer(n)}else{if(typeof n.source=="object"&&(this.addSource(m,n.source),n=c.clone$1(n),n=c.extend(n,{source:m})),this._validate(c.validateStyle.layer,`layers.${m}`,n,{arrayIndex:-1},h))return;b=c.createStyleLayer(n),this._validateLayer(b),b.setEventedParent(this,{layer:{id:m}}),this._serializedLayers[b.id]=b.serialize()}const k=s?this._order.indexOf(s):this._order.length;if(s&&k===-1)this.fire(new c.ErrorEvent(new Error(`Cannot add layer "${m}" before non-existing layer "${s}".`)));else{if(this._order.splice(k,0,m),this._layerOrderChanged=!0,this._layers[m]=b,this._removedLayers[m]&&b.source&&b.type!=="custom"){const P=this._removedLayers[m];delete this._removedLayers[m],P.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",this.sourceCaches[b.source].pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map)}}moveLayer(n,s){if(this._checkLoaded(),this._changed=!0,!this._layers[n])return void this.fire(new c.ErrorEvent(new Error(`The layer '${n}' does not exist in the map's style and cannot be moved.`)));if(n===s)return;const h=this._order.indexOf(n);this._order.splice(h,1);const m=s?this._order.indexOf(s):this._order.length;s&&m===-1?this.fire(new c.ErrorEvent(new Error(`Cannot move layer "${n}" before non-existing layer "${s}".`))):(this._order.splice(m,0,n),this._layerOrderChanged=!0)}removeLayer(n){this._checkLoaded();const s=this._layers[n];if(!s)return void this.fire(new c.ErrorEvent(new Error(`Cannot remove non-existing layer "${n}".`)));s.setEventedParent(null);const h=this._order.indexOf(n);this._order.splice(h,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[n]=s,delete this._layers[n],delete this._serializedLayers[n],delete this._updatedLayers[n],delete this._updatedPaintProps[n],s.onRemove&&s.onRemove(this.map)}getLayer(n){return this._layers[n]}hasLayer(n){return n in this._layers}setLayerZoomRange(n,s,h){this._checkLoaded();const m=this.getLayer(n);m?m.minzoom===s&&m.maxzoom===h||(s!=null&&(m.minzoom=s),h!=null&&(m.maxzoom=h),this._updateLayer(m)):this.fire(new c.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${n}".`)))}setFilter(n,s,h={}){this._checkLoaded();const m=this.getLayer(n);if(m){if(!D(m.filter,s))return s==null?(m.filter=void 0,void this._updateLayer(m)):void(this._validate(c.validateStyle.filter,`layers.${m.id}.filter`,s,null,h)||(m.filter=c.clone$1(s),this._updateLayer(m)))}else this.fire(new c.ErrorEvent(new Error(`Cannot filter non-existing layer "${n}".`)))}getFilter(n){return c.clone$1(this.getLayer(n).filter)}setLayoutProperty(n,s,h,m={}){this._checkLoaded();const b=this.getLayer(n);b?D(b.getLayoutProperty(s),h)||(b.setLayoutProperty(s,h,m),this._updateLayer(b)):this.fire(new c.ErrorEvent(new Error(`Cannot style non-existing layer "${n}".`)))}getLayoutProperty(n,s){const h=this.getLayer(n);if(h)return h.getLayoutProperty(s);this.fire(new c.ErrorEvent(new Error(`Cannot get style of non-existing layer "${n}".`)))}setPaintProperty(n,s,h,m={}){this._checkLoaded();const b=this.getLayer(n);b?D(b.getPaintProperty(s),h)||(b.setPaintProperty(s,h,m)&&this._updateLayer(b),this._changed=!0,this._updatedPaintProps[n]=!0):this.fire(new c.ErrorEvent(new Error(`Cannot style non-existing layer "${n}".`)))}getPaintProperty(n,s){return this.getLayer(n).getPaintProperty(s)}setFeatureState(n,s){this._checkLoaded();const h=n.source,m=n.sourceLayer,b=this.sourceCaches[h];if(b===void 0)return void this.fire(new c.ErrorEvent(new Error(`The source '${h}' does not exist in the map's style.`)));const k=b.getSource().type;k==="geojson"&&m?this.fire(new c.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):k!=="vector"||m?(n.id===void 0&&this.fire(new c.ErrorEvent(new Error("The feature id parameter must be provided."))),b.setFeatureState(m,n.id,s)):this.fire(new c.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(n,s){this._checkLoaded();const h=n.source,m=this.sourceCaches[h];if(m===void 0)return void this.fire(new c.ErrorEvent(new Error(`The source '${h}' does not exist in the map's style.`)));const b=m.getSource().type,k=b==="vector"?n.sourceLayer:void 0;b!=="vector"||k?s&&typeof n.id!="string"&&typeof n.id!="number"?this.fire(new c.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(k,n.id,s):this.fire(new c.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(n){this._checkLoaded();const s=n.source,h=n.sourceLayer,m=this.sourceCaches[s];if(m!==void 0)return m.getSource().type!=="vector"||h?(n.id===void 0&&this.fire(new c.ErrorEvent(new Error("The feature id parameter must be provided."))),m.getFeatureState(h,n.id)):void this.fire(new c.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new c.ErrorEvent(new Error(`The source '${s}' does not exist in the map's style.`)))}getTransition(){return c.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return c.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:c.mapObject(this.sourceCaches,n=>n.serialize()),layers:this._serializeLayers(this._order)},n=>n!==void 0)}_updateLayer(n){this._updatedLayers[n.id]=!0,n.source&&!this._updatedSources[n.source]&&this.sourceCaches[n.source].getSource().type!=="raster"&&(this._updatedSources[n.source]="reload",this.sourceCaches[n.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(n){const s=k=>this._layers[k].type==="fill-extrusion",h={},m=[];for(let k=this._order.length-1;k>=0;k--){const P=this._order[k];if(s(P)){h[P]=k;for(const I of n){const z=I[P];if(z)for(const N of z)m.push(N)}}}m.sort((k,P)=>P.intersectionZ-k.intersectionZ);const b=[];for(let k=this._order.length-1;k>=0;k--){const P=this._order[k];if(s(P))for(let I=m.length-1;I>=0;I--){const z=m[I].feature;if(h[z.layer.id]<k)break;b.push(z),m.pop()}else for(const I of n){const z=I[P];if(z)for(const N of z)b.push(N.feature)}}return b}queryRenderedFeatures(n,s,h){s&&s.filter&&this._validate(c.validateStyle.filter,"queryRenderedFeatures.filter",s.filter,null,s);const m={};if(s&&s.layers){if(!Array.isArray(s.layers))return this.fire(new c.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const k of s.layers){const P=this._layers[k];if(!P)return this.fire(new c.ErrorEvent(new Error(`The layer '${k}' does not exist in the map's style and cannot be queried for features.`))),[];m[P.source]=!0}}const b=[];s.availableImages=this._availableImages;for(const k in this.sourceCaches)s.layers&&!m[k]||b.push(At(this.sourceCaches[k],this._layers,this._serializedLayers,n,s,h));return this.placement&&b.push(function(k,P,I,z,N,U,H){const Q={},K=U.queryRenderedSymbols(z),X=[];for(const le of Object.keys(K).map(Number))X.push(H[le]);X.sort(zt);for(const le of X){const xe=le.featureIndex.lookupSymbolFeatures(K[le.bucketInstanceId],P,le.bucketIndex,le.sourceLayerIndex,N.filter,N.layers,N.availableImages,k);for(const be in xe){const re=Q[be]=Q[be]||[],Me=xe[be];Me.sort((ke,Pe)=>{const De=le.featureSortOrder;if(De){const Ge=De.indexOf(ke.featureIndex);return De.indexOf(Pe.featureIndex)-Ge}return Pe.featureIndex-ke.featureIndex});for(const ke of Me)re.push(ke)}}for(const le in Q)Q[le].forEach(xe=>{const be=xe.feature,re=I[k[le].source].getFeatureState(be.layer["source-layer"],be.id);be.source=be.layer.source,be.layer["source-layer"]&&(be.sourceLayer=be.layer["source-layer"]),be.state=re});return Q}(this._layers,this._serializedLayers,this.sourceCaches,n,s,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(n,s){s&&s.filter&&this._validate(c.validateStyle.filter,"querySourceFeatures.filter",s.filter,null,s);const h=this.sourceCaches[n];return h?function(m,b){const k=m.getRenderableIds().map(z=>m.getTileByID(z)),P=[],I={};for(let z=0;z<k.length;z++){const N=k[z],U=N.tileID.canonical.key;I[U]||(I[U]=!0,N.querySourceFeatures(P,b))}return P}(h,s):[]}addSourceType(n,s,h){return mr.getSourceType(n)?h(new Error(`A source type called "${n}" already exists.`)):(mr.setSourceType(n,s),s.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:n,url:s.workerSourceURL},h):h(null,null))}getLight(){return this.light.getLight()}setLight(n,s={}){this._checkLoaded();const h=this.light.getLight();let m=!1;for(const k in n)if(!D(n[k],h[k])){m=!0;break}if(!m)return;const b={now:c.exported.now(),transition:c.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(n,s),this.light.updateTransitions(b)}_validate(n,s,h,m,b={}){return(!b||b.validate!==!1)&&Vt(this,n.call(c.validateStyle,c.extend({key:s,style:this.serialize(),value:h,styleSpec:c.spec},m)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),c.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const n in this._layers)this._layers[n].setEventedParent(null);for(const n in this.sourceCaches){const s=this.sourceCaches[n];s.setEventedParent(null),s.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(n){this.sourceCaches[n].clearTiles()}_reloadSource(n){this.sourceCaches[n].resume(),this.sourceCaches[n].reload()}_updateSources(n){for(const s in this.sourceCaches)this.sourceCaches[s].update(n,this.terrain)}_generateCollisionBoxes(){for(const n in this.sourceCaches)this._reloadSource(n)}_updatePlacement(n,s,h,m,b=!1){let k=!1,P=!1;const I={};for(const z of this._order){const N=this._layers[z];if(N.type!=="symbol")continue;if(!I[N.source]){const H=this.sourceCaches[N.source];I[N.source]=H.getRenderableIds(!0).map(Q=>H.getTileByID(Q)).sort((Q,K)=>K.tileID.overscaledZ-Q.tileID.overscaledZ||(Q.tileID.isLessThan(K.tileID)?-1:1))}const U=this.crossTileSymbolIndex.addLayer(N,I[N.source],n.center.lng);k=k||U}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((b=b||this._layerOrderChanged||h===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(c.exported.now(),n.zoom))&&(this.pauseablePlacement=new $e(n,this.terrain,this._order,b,s,h,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,I),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(c.exported.now()),P=!0),k&&this.pauseablePlacement.placement.setStale()),P||k)for(const z of this._order){const N=this._layers[z];N.type==="symbol"&&this.placement.updateLayerOpacities(N,I[N.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(c.exported.now())}_releaseSymbolFadeTiles(){for(const n in this.sourceCaches)this.sourceCaches[n].releaseSymbolFadeTiles()}getImages(n,s,h){this.imageManager.getImages(s.icons,h),this._updateTilesForChangedImages();const m=this.sourceCaches[s.source];m&&m.setDependencies(s.tileID.key,s.type,s.icons)}getGlyphs(n,s,h){this.glyphManager.getGlyphs(s.stacks,h)}getResource(n,s,h){return c.makeRequest(s,h)}}mr.getSourceType=function(f){return Ve[f]},mr.setSourceType=function(f,n){Ve[f]=n},mr.registerForPluginStateChange=c.registerForPluginStateChange;var Jr="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const ca={prelude:vn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:vn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:vn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:vn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:vn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:vn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:vn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:vn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:vn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:vn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:vn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:vn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:vn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:vn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:vn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:vn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:vn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:vn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:vn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:vn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:vn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:vn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:vn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:vn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:vn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:vn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:vn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Jr),terrainDepth:vn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Jr),terrainCoords:vn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Jr)};function vn(f,n){const s=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,h=n.match(/attribute ([\w]+) ([\w]+)/g),m=f.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),k=b?b.concat(m):m,P={};return{fragmentSource:f=f.replace(s,(I,z,N,U,H)=>(P[H]=!0,z==="define"?`
#ifndef HAS_UNIFORM_u_${H}
varying ${N} ${U} ${H};
#else
uniform ${N} ${U} u_${H};
#endif
`:`
#ifdef HAS_UNIFORM_u_${H}
    ${N} ${U} ${H} = u_${H};
#endif
`)),vertexSource:n=n.replace(s,(I,z,N,U,H)=>{const Q=U==="float"?"vec2":"vec4",K=H.match(/color/)?"color":Q;return P[H]?z==="define"?`
#ifndef HAS_UNIFORM_u_${H}
uniform lowp float u_${H}_t;
attribute ${N} ${Q} a_${H};
varying ${N} ${U} ${H};
#else
uniform ${N} ${U} u_${H};
#endif
`:K==="vec4"?`
#ifndef HAS_UNIFORM_u_${H}
    ${H} = a_${H};
#else
    ${N} ${U} ${H} = u_${H};
#endif
`:`
#ifndef HAS_UNIFORM_u_${H}
    ${H} = unpack_mix_${K}(a_${H}, u_${H}_t);
#else
    ${N} ${U} ${H} = u_${H};
#endif
`:z==="define"?`
#ifndef HAS_UNIFORM_u_${H}
uniform lowp float u_${H}_t;
attribute ${N} ${Q} a_${H};
#else
uniform ${N} ${U} u_${H};
#endif
`:K==="vec4"?`
#ifndef HAS_UNIFORM_u_${H}
    ${N} ${U} ${H} = a_${H};
#else
    ${N} ${U} ${H} = u_${H};
#endif
`:`
#ifndef HAS_UNIFORM_u_${H}
    ${N} ${U} ${H} = unpack_mix_${K}(a_${H}, u_${H}_t);
#else
    ${N} ${U} ${H} = u_${H};
#endif
`}),staticAttributes:h,staticUniforms:k}}class ph{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(n,s,h,m,b,k,P,I,z){this.context=n;let N=this.boundPaintVertexBuffers.length!==m.length;for(let U=0;!N&&U<m.length;U++)this.boundPaintVertexBuffers[U]!==m[U]&&(N=!0);n.extVertexArrayObject&&this.vao&&this.boundProgram===s&&this.boundLayoutVertexBuffer===h&&!N&&this.boundIndexBuffer===b&&this.boundVertexOffset===k&&this.boundDynamicVertexBuffer===P&&this.boundDynamicVertexBuffer2===I&&this.boundDynamicVertexBuffer3===z?(n.bindVertexArrayOES.set(this.vao),P&&P.bind(),b&&b.dynamicDraw&&b.bind(),I&&I.bind(),z&&z.bind()):this.freshBind(s,h,m,b,k,P,I,z)}freshBind(n,s,h,m,b,k,P,I){let z;const N=n.numAttributes,U=this.context,H=U.gl;if(U.extVertexArrayObject)this.vao&&this.destroy(),this.vao=U.extVertexArrayObject.createVertexArrayOES(),U.bindVertexArrayOES.set(this.vao),z=0,this.boundProgram=n,this.boundLayoutVertexBuffer=s,this.boundPaintVertexBuffers=h,this.boundIndexBuffer=m,this.boundVertexOffset=b,this.boundDynamicVertexBuffer=k,this.boundDynamicVertexBuffer2=P,this.boundDynamicVertexBuffer3=I;else{z=U.currentNumAttributes||0;for(let Q=N;Q<z;Q++)H.disableVertexAttribArray(Q)}s.enableAttributes(H,n);for(const Q of h)Q.enableAttributes(H,n);k&&k.enableAttributes(H,n),P&&P.enableAttributes(H,n),I&&I.enableAttributes(H,n),s.bind(),s.setVertexAttribPointers(H,n,b);for(const Q of h)Q.bind(),Q.setVertexAttribPointers(H,n,b);k&&(k.bind(),k.setVertexAttribPointers(H,n,b)),m&&m.bind(),P&&(P.bind(),P.setVertexAttribPointers(H,n,b)),I&&(I.bind(),I.setVertexAttribPointers(H,n,b)),U.currentNumAttributes=N}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Wo(f){const n=[];for(let s=0;s<f.length;s++){if(f[s]===null)continue;const h=f[s].split(" ");n.push(h.pop())}return n}class al{constructor(n,s,h,m,b,k,P){const I=n.gl;this.program=I.createProgram();const z=Wo(h.staticAttributes),N=m?m.getBinderAttributes():[],U=z.concat(N),H=ca.prelude.staticUniforms?Wo(ca.prelude.staticUniforms):[],Q=h.staticUniforms?Wo(h.staticUniforms):[],K=m?m.getBinderUniforms():[],X=H.concat(Q).concat(K),le=[];for(const De of X)le.indexOf(De)<0&&le.push(De);const xe=m?m.defines():[];k&&xe.push("#define OVERDRAW_INSPECTOR;"),P&&xe.push("#define TERRAIN3D;");const be=xe.concat(ca.prelude.fragmentSource,h.fragmentSource).join(`
`),re=xe.concat(ca.prelude.vertexSource,h.vertexSource).join(`
`),Me=I.createShader(I.FRAGMENT_SHADER);if(I.isContextLost())return void(this.failedToCreate=!0);I.shaderSource(Me,be),I.compileShader(Me),I.attachShader(this.program,Me);const ke=I.createShader(I.VERTEX_SHADER);if(I.isContextLost())return void(this.failedToCreate=!0);I.shaderSource(ke,re),I.compileShader(ke),I.attachShader(this.program,ke),this.attributes={};const Pe={};this.numAttributes=U.length;for(let De=0;De<this.numAttributes;De++)U[De]&&(I.bindAttribLocation(this.program,De,U[De]),this.attributes[U[De]]=De);I.linkProgram(this.program),I.deleteShader(ke),I.deleteShader(Me);for(let De=0;De<le.length;De++){const Ge=le[De];if(Ge&&!Pe[Ge]){const ze=I.getUniformLocation(this.program,Ge);ze&&(Pe[Ge]=ze)}}this.fixedUniforms=b(n,Pe),this.terrainUniforms=((De,Ge)=>({u_depth:new c.Uniform1i(De,Ge.u_depth),u_terrain:new c.Uniform1i(De,Ge.u_terrain),u_terrain_dim:new c.Uniform1f(De,Ge.u_terrain_dim),u_terrain_matrix:new c.UniformMatrix4f(De,Ge.u_terrain_matrix),u_terrain_unpack:new c.Uniform4f(De,Ge.u_terrain_unpack),u_terrain_offset:new c.Uniform1f(De,Ge.u_terrain_offset),u_terrain_exaggeration:new c.Uniform1f(De,Ge.u_terrain_exaggeration)}))(n,Pe),this.binderUniforms=m?m.getUniforms(n,Pe):[]}draw(n,s,h,m,b,k,P,I,z,N,U,H,Q,K,X,le,xe,be){const re=n.gl;if(this.failedToCreate)return;if(n.program.set(this.program),n.setDepthMode(h),n.setStencilMode(m),n.setColorMode(b),n.setCullFace(k),I){n.activeTexture.set(re.TEXTURE2),re.bindTexture(re.TEXTURE_2D,I.depthTexture),n.activeTexture.set(re.TEXTURE3),re.bindTexture(re.TEXTURE_2D,I.texture);for(const ke in this.terrainUniforms)this.terrainUniforms[ke].set(I[ke])}for(const ke in this.fixedUniforms)this.fixedUniforms[ke].set(P[ke]);X&&X.setUniforms(n,this.binderUniforms,Q,{zoom:K});let Me=0;switch(s){case re.LINES:Me=2;break;case re.TRIANGLES:Me=3;break;case re.LINE_STRIP:Me=1}for(const ke of H.get()){const Pe=ke.vaos||(ke.vaos={});(Pe[z]||(Pe[z]=new ph)).bind(n,this,N,X?X.getPaintVertexBuffers():[],U,ke.vertexOffset,le,xe,be),re.drawElements(s,ke.primitiveLength*Me,re.UNSIGNED_SHORT,ke.primitiveOffset*Me*2)}}}function Zo(f,n,s){const h=1/$t(s,1,n.transform.tileZoom),m=Math.pow(2,s.tileID.overscaledZ),b=s.tileSize*Math.pow(2,n.transform.tileZoom)/m,k=b*(s.tileID.canonical.x+s.tileID.wrap*m),P=b*s.tileID.canonical.y;return{u_image:0,u_texsize:s.imageAtlasTexture.size,u_scale:[h,f.fromScale,f.toScale],u_fade:f.t,u_pixel_coord_upper:[k>>16,P>>16],u_pixel_coord_lower:[65535&k,65535&P]}}const ua=(f,n,s,h)=>{const m=n.style.light,b=m.properties.get("position"),k=[b.x,b.y,b.z],P=c.create$1();m.properties.get("anchor")==="viewport"&&c.fromRotation(P,-n.transform.angle),c.transformMat3(k,k,P);const I=m.properties.get("color");return{u_matrix:f,u_lightpos:k,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[I.r,I.g,I.b],u_vertical_gradient:+s,u_opacity:h}},cc=(f,n,s,h,m,b,k)=>c.extend(ua(f,n,s,h),Zo(b,n,k),{u_height_factor:-Math.pow(2,m.overscaledZ)/k.tileSize/8}),uc=f=>({u_matrix:f}),ha=(f,n,s,h)=>c.extend(uc(f),Zo(s,n,h)),hc=(f,n)=>({u_matrix:f,u_world:n}),ll=(f,n,s,h,m)=>c.extend(ha(f,n,s,h),{u_world:m}),xi=(f,n,s,h)=>{const m=f.transform;let b,k;if(h.paint.get("circle-pitch-alignment")==="map"){const P=$t(s,1,m.zoom);b=!0,k=[P,P]}else b=!1,k=m.pixelsToGLUnits;return{u_camera_to_center_distance:m.cameraToCenterDistance,u_scale_with_map:+(h.paint.get("circle-pitch-scale")==="map"),u_matrix:f.translatePosMatrix(n.posMatrix,s,h.paint.get("circle-translate"),h.paint.get("circle-translate-anchor")),u_pitch_with_map:+b,u_device_pixel_ratio:f.pixelRatio,u_extrude_scale:k}},cl=(f,n,s)=>{const h=$t(s,1,n.zoom),m=Math.pow(2,n.zoom-s.tileID.overscaledZ),b=s.tileID.overscaleFactor();return{u_matrix:f,u_camera_to_center_distance:n.cameraToCenterDistance,u_pixels_to_tile_units:h,u_extrude_scale:[n.pixelsToGLUnits[0]/(h*m),n.pixelsToGLUnits[1]/(h*m)],u_overscale_factor:b}},po=(f,n,s=1)=>({u_matrix:f,u_color:n,u_overlay:0,u_overlay_scale:s}),fn=f=>({u_matrix:f}),da=(f,n,s,h)=>({u_matrix:f,u_extrude_scale:$t(n,1,s),u_intensity:h});function pa(f,n){const s=Math.pow(2,n.canonical.z),h=n.canonical.y;return[new c.MercatorCoordinate(0,h/s).toLngLat().lat,new c.MercatorCoordinate(0,(h+1)/s).toLngLat().lat]}const Xo=(f,n,s,h)=>{const m=f.transform;return{u_matrix:bs(f,n,s,h),u_ratio:1/$t(n,1,m.zoom),u_device_pixel_ratio:f.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},fa=(f,n,s,h,m)=>c.extend(Xo(f,n,s,m),{u_image:0,u_image_height:h}),ws=(f,n,s,h,m)=>{const b=f.transform,k=Ko(n,b);return{u_matrix:bs(f,n,s,m),u_texsize:n.imageAtlasTexture.size,u_ratio:1/$t(n,1,b.zoom),u_device_pixel_ratio:f.pixelRatio,u_image:0,u_scale:[k,h.fromScale,h.toScale],u_fade:h.t,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},zn=(f,n,s,h,m,b)=>{const k=f.lineAtlas,P=Ko(n,f.transform),I=s.layout.get("line-cap")==="round",z=k.getDash(h.from,I),N=k.getDash(h.to,I),U=z.width*m.fromScale,H=N.width*m.toScale;return c.extend(Xo(f,n,s,b),{u_patternscale_a:[P/U,-z.height/2],u_patternscale_b:[P/H,-N.height/2],u_sdfgamma:k.width/(256*Math.min(U,H)*f.pixelRatio)/2,u_image:0,u_tex_y_a:z.y,u_tex_y_b:N.y,u_mix:m.t})};function Ko(f,n){return 1/$t(f,1,n.tileZoom)}function bs(f,n,s,h){return f.translatePosMatrix(h?h.posMatrix:n.tileID.posMatrix,n,s.paint.get("line-translate"),s.paint.get("line-translate-anchor"))}const qi=(f,n,s,h,m)=>{return{u_matrix:f,u_tl_parent:n,u_scale_parent:s,u_buffer_scale:1,u_fade_t:h.mix,u_opacity:h.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(k=m.paint.get("raster-saturation"),k>0?1-1/(1.001-k):-k),u_contrast_factor:(b=m.paint.get("raster-contrast"),b>0?1/(1-b):1+b),u_spin_weights:Wi(m.paint.get("raster-hue-rotate"))};var b,k};function Wi(f){f*=Math.PI/180;const n=Math.sin(f),s=Math.cos(f);return[(2*s+1)/3,(-Math.sqrt(3)*n-s+1)/3,(Math.sqrt(3)*n-s+1)/3]}const _i=(f,n,s,h,m,b,k,P,I,z)=>{const N=m.transform;return{u_is_size_zoom_constant:+(f==="constant"||f==="source"),u_is_size_feature_constant:+(f==="constant"||f==="camera"),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:N.cameraToCenterDistance,u_pitch:N.pitch/360*2*Math.PI,u_rotate_symbol:+s,u_aspect_ratio:N.width/N.height,u_fade_change:m.options.fadeDuration?m.symbolFadeChange:1,u_matrix:b,u_label_plane_matrix:k,u_coord_matrix:P,u_is_text:+I,u_pitch_with_map:+h,u_texsize:z,u_texture:0}},Jo=(f,n,s,h,m,b,k,P,I,z,N)=>{const U=m.transform;return c.extend(_i(f,n,s,h,m,b,k,P,I,z),{u_gamma_scale:h?Math.cos(U._pitch)*U.cameraToCenterDistance:1,u_device_pixel_ratio:m.pixelRatio,u_is_halo:1})},ma=(f,n,s,h,m,b,k,P,I,z)=>c.extend(Jo(f,n,s,h,m,b,k,P,!0,I),{u_texsize_icon:z,u_texture_icon:1}),fo=(f,n,s)=>({u_matrix:f,u_opacity:n,u_color:s}),dc=(f,n,s,h,m,b)=>c.extend(function(k,P,I,z){const N=I.imageManager.getPattern(k.from.toString()),U=I.imageManager.getPattern(k.to.toString()),{width:H,height:Q}=I.imageManager.getPixelSize(),K=Math.pow(2,z.tileID.overscaledZ),X=z.tileSize*Math.pow(2,I.transform.tileZoom)/K,le=X*(z.tileID.canonical.x+z.tileID.wrap*K),xe=X*z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:N.tl,u_pattern_br_a:N.br,u_pattern_tl_b:U.tl,u_pattern_br_b:U.br,u_texsize:[H,Q],u_mix:P.t,u_pattern_size_a:N.displaySize,u_pattern_size_b:U.displaySize,u_scale_a:P.fromScale,u_scale_b:P.toScale,u_tile_units_to_pixels:1/$t(z,1,I.transform.tileZoom),u_pixel_coord_upper:[le>>16,xe>>16],u_pixel_coord_lower:[65535&le,65535&xe]}}(h,b,s,m),{u_matrix:f,u_opacity:n}),ul={fillExtrusion:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_lightpos:new c.Uniform3f(f,n.u_lightpos),u_lightintensity:new c.Uniform1f(f,n.u_lightintensity),u_lightcolor:new c.Uniform3f(f,n.u_lightcolor),u_vertical_gradient:new c.Uniform1f(f,n.u_vertical_gradient),u_opacity:new c.Uniform1f(f,n.u_opacity)}),fillExtrusionPattern:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_lightpos:new c.Uniform3f(f,n.u_lightpos),u_lightintensity:new c.Uniform1f(f,n.u_lightintensity),u_lightcolor:new c.Uniform3f(f,n.u_lightcolor),u_vertical_gradient:new c.Uniform1f(f,n.u_vertical_gradient),u_height_factor:new c.Uniform1f(f,n.u_height_factor),u_image:new c.Uniform1i(f,n.u_image),u_texsize:new c.Uniform2f(f,n.u_texsize),u_pixel_coord_upper:new c.Uniform2f(f,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(f,n.u_pixel_coord_lower),u_scale:new c.Uniform3f(f,n.u_scale),u_fade:new c.Uniform1f(f,n.u_fade),u_opacity:new c.Uniform1f(f,n.u_opacity)}),fill:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix)}),fillPattern:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_image:new c.Uniform1i(f,n.u_image),u_texsize:new c.Uniform2f(f,n.u_texsize),u_pixel_coord_upper:new c.Uniform2f(f,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(f,n.u_pixel_coord_lower),u_scale:new c.Uniform3f(f,n.u_scale),u_fade:new c.Uniform1f(f,n.u_fade)}),fillOutline:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_world:new c.Uniform2f(f,n.u_world)}),fillOutlinePattern:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_world:new c.Uniform2f(f,n.u_world),u_image:new c.Uniform1i(f,n.u_image),u_texsize:new c.Uniform2f(f,n.u_texsize),u_pixel_coord_upper:new c.Uniform2f(f,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(f,n.u_pixel_coord_lower),u_scale:new c.Uniform3f(f,n.u_scale),u_fade:new c.Uniform1f(f,n.u_fade)}),circle:(f,n)=>({u_camera_to_center_distance:new c.Uniform1f(f,n.u_camera_to_center_distance),u_scale_with_map:new c.Uniform1i(f,n.u_scale_with_map),u_pitch_with_map:new c.Uniform1i(f,n.u_pitch_with_map),u_extrude_scale:new c.Uniform2f(f,n.u_extrude_scale),u_device_pixel_ratio:new c.Uniform1f(f,n.u_device_pixel_ratio),u_matrix:new c.UniformMatrix4f(f,n.u_matrix)}),collisionBox:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_camera_to_center_distance:new c.Uniform1f(f,n.u_camera_to_center_distance),u_pixels_to_tile_units:new c.Uniform1f(f,n.u_pixels_to_tile_units),u_extrude_scale:new c.Uniform2f(f,n.u_extrude_scale),u_overscale_factor:new c.Uniform1f(f,n.u_overscale_factor)}),collisionCircle:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_inv_matrix:new c.UniformMatrix4f(f,n.u_inv_matrix),u_camera_to_center_distance:new c.Uniform1f(f,n.u_camera_to_center_distance),u_viewport_size:new c.Uniform2f(f,n.u_viewport_size)}),debug:(f,n)=>({u_color:new c.UniformColor(f,n.u_color),u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_overlay:new c.Uniform1i(f,n.u_overlay),u_overlay_scale:new c.Uniform1f(f,n.u_overlay_scale)}),clippingMask:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix)}),heatmap:(f,n)=>({u_extrude_scale:new c.Uniform1f(f,n.u_extrude_scale),u_intensity:new c.Uniform1f(f,n.u_intensity),u_matrix:new c.UniformMatrix4f(f,n.u_matrix)}),heatmapTexture:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_world:new c.Uniform2f(f,n.u_world),u_image:new c.Uniform1i(f,n.u_image),u_color_ramp:new c.Uniform1i(f,n.u_color_ramp),u_opacity:new c.Uniform1f(f,n.u_opacity)}),hillshade:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_image:new c.Uniform1i(f,n.u_image),u_latrange:new c.Uniform2f(f,n.u_latrange),u_light:new c.Uniform2f(f,n.u_light),u_shadow:new c.UniformColor(f,n.u_shadow),u_highlight:new c.UniformColor(f,n.u_highlight),u_accent:new c.UniformColor(f,n.u_accent)}),hillshadePrepare:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_image:new c.Uniform1i(f,n.u_image),u_dimension:new c.Uniform2f(f,n.u_dimension),u_zoom:new c.Uniform1f(f,n.u_zoom),u_unpack:new c.Uniform4f(f,n.u_unpack)}),line:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_ratio:new c.Uniform1f(f,n.u_ratio),u_device_pixel_ratio:new c.Uniform1f(f,n.u_device_pixel_ratio),u_units_to_pixels:new c.Uniform2f(f,n.u_units_to_pixels)}),lineGradient:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_ratio:new c.Uniform1f(f,n.u_ratio),u_device_pixel_ratio:new c.Uniform1f(f,n.u_device_pixel_ratio),u_units_to_pixels:new c.Uniform2f(f,n.u_units_to_pixels),u_image:new c.Uniform1i(f,n.u_image),u_image_height:new c.Uniform1f(f,n.u_image_height)}),linePattern:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_texsize:new c.Uniform2f(f,n.u_texsize),u_ratio:new c.Uniform1f(f,n.u_ratio),u_device_pixel_ratio:new c.Uniform1f(f,n.u_device_pixel_ratio),u_image:new c.Uniform1i(f,n.u_image),u_units_to_pixels:new c.Uniform2f(f,n.u_units_to_pixels),u_scale:new c.Uniform3f(f,n.u_scale),u_fade:new c.Uniform1f(f,n.u_fade)}),lineSDF:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_ratio:new c.Uniform1f(f,n.u_ratio),u_device_pixel_ratio:new c.Uniform1f(f,n.u_device_pixel_ratio),u_units_to_pixels:new c.Uniform2f(f,n.u_units_to_pixels),u_patternscale_a:new c.Uniform2f(f,n.u_patternscale_a),u_patternscale_b:new c.Uniform2f(f,n.u_patternscale_b),u_sdfgamma:new c.Uniform1f(f,n.u_sdfgamma),u_image:new c.Uniform1i(f,n.u_image),u_tex_y_a:new c.Uniform1f(f,n.u_tex_y_a),u_tex_y_b:new c.Uniform1f(f,n.u_tex_y_b),u_mix:new c.Uniform1f(f,n.u_mix)}),raster:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_tl_parent:new c.Uniform2f(f,n.u_tl_parent),u_scale_parent:new c.Uniform1f(f,n.u_scale_parent),u_buffer_scale:new c.Uniform1f(f,n.u_buffer_scale),u_fade_t:new c.Uniform1f(f,n.u_fade_t),u_opacity:new c.Uniform1f(f,n.u_opacity),u_image0:new c.Uniform1i(f,n.u_image0),u_image1:new c.Uniform1i(f,n.u_image1),u_brightness_low:new c.Uniform1f(f,n.u_brightness_low),u_brightness_high:new c.Uniform1f(f,n.u_brightness_high),u_saturation_factor:new c.Uniform1f(f,n.u_saturation_factor),u_contrast_factor:new c.Uniform1f(f,n.u_contrast_factor),u_spin_weights:new c.Uniform3f(f,n.u_spin_weights)}),symbolIcon:(f,n)=>({u_is_size_zoom_constant:new c.Uniform1i(f,n.u_is_size_zoom_constant),u_is_size_feature_constant:new c.Uniform1i(f,n.u_is_size_feature_constant),u_size_t:new c.Uniform1f(f,n.u_size_t),u_size:new c.Uniform1f(f,n.u_size),u_camera_to_center_distance:new c.Uniform1f(f,n.u_camera_to_center_distance),u_pitch:new c.Uniform1f(f,n.u_pitch),u_rotate_symbol:new c.Uniform1i(f,n.u_rotate_symbol),u_aspect_ratio:new c.Uniform1f(f,n.u_aspect_ratio),u_fade_change:new c.Uniform1f(f,n.u_fade_change),u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_label_plane_matrix:new c.UniformMatrix4f(f,n.u_label_plane_matrix),u_coord_matrix:new c.UniformMatrix4f(f,n.u_coord_matrix),u_is_text:new c.Uniform1i(f,n.u_is_text),u_pitch_with_map:new c.Uniform1i(f,n.u_pitch_with_map),u_texsize:new c.Uniform2f(f,n.u_texsize),u_texture:new c.Uniform1i(f,n.u_texture)}),symbolSDF:(f,n)=>({u_is_size_zoom_constant:new c.Uniform1i(f,n.u_is_size_zoom_constant),u_is_size_feature_constant:new c.Uniform1i(f,n.u_is_size_feature_constant),u_size_t:new c.Uniform1f(f,n.u_size_t),u_size:new c.Uniform1f(f,n.u_size),u_camera_to_center_distance:new c.Uniform1f(f,n.u_camera_to_center_distance),u_pitch:new c.Uniform1f(f,n.u_pitch),u_rotate_symbol:new c.Uniform1i(f,n.u_rotate_symbol),u_aspect_ratio:new c.Uniform1f(f,n.u_aspect_ratio),u_fade_change:new c.Uniform1f(f,n.u_fade_change),u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_label_plane_matrix:new c.UniformMatrix4f(f,n.u_label_plane_matrix),u_coord_matrix:new c.UniformMatrix4f(f,n.u_coord_matrix),u_is_text:new c.Uniform1i(f,n.u_is_text),u_pitch_with_map:new c.Uniform1i(f,n.u_pitch_with_map),u_texsize:new c.Uniform2f(f,n.u_texsize),u_texture:new c.Uniform1i(f,n.u_texture),u_gamma_scale:new c.Uniform1f(f,n.u_gamma_scale),u_device_pixel_ratio:new c.Uniform1f(f,n.u_device_pixel_ratio),u_is_halo:new c.Uniform1i(f,n.u_is_halo)}),symbolTextAndIcon:(f,n)=>({u_is_size_zoom_constant:new c.Uniform1i(f,n.u_is_size_zoom_constant),u_is_size_feature_constant:new c.Uniform1i(f,n.u_is_size_feature_constant),u_size_t:new c.Uniform1f(f,n.u_size_t),u_size:new c.Uniform1f(f,n.u_size),u_camera_to_center_distance:new c.Uniform1f(f,n.u_camera_to_center_distance),u_pitch:new c.Uniform1f(f,n.u_pitch),u_rotate_symbol:new c.Uniform1i(f,n.u_rotate_symbol),u_aspect_ratio:new c.Uniform1f(f,n.u_aspect_ratio),u_fade_change:new c.Uniform1f(f,n.u_fade_change),u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_label_plane_matrix:new c.UniformMatrix4f(f,n.u_label_plane_matrix),u_coord_matrix:new c.UniformMatrix4f(f,n.u_coord_matrix),u_is_text:new c.Uniform1i(f,n.u_is_text),u_pitch_with_map:new c.Uniform1i(f,n.u_pitch_with_map),u_texsize:new c.Uniform2f(f,n.u_texsize),u_texsize_icon:new c.Uniform2f(f,n.u_texsize_icon),u_texture:new c.Uniform1i(f,n.u_texture),u_texture_icon:new c.Uniform1i(f,n.u_texture_icon),u_gamma_scale:new c.Uniform1f(f,n.u_gamma_scale),u_device_pixel_ratio:new c.Uniform1f(f,n.u_device_pixel_ratio),u_is_halo:new c.Uniform1i(f,n.u_is_halo)}),background:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_opacity:new c.Uniform1f(f,n.u_opacity),u_color:new c.UniformColor(f,n.u_color)}),backgroundPattern:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_opacity:new c.Uniform1f(f,n.u_opacity),u_image:new c.Uniform1i(f,n.u_image),u_pattern_tl_a:new c.Uniform2f(f,n.u_pattern_tl_a),u_pattern_br_a:new c.Uniform2f(f,n.u_pattern_br_a),u_pattern_tl_b:new c.Uniform2f(f,n.u_pattern_tl_b),u_pattern_br_b:new c.Uniform2f(f,n.u_pattern_br_b),u_texsize:new c.Uniform2f(f,n.u_texsize),u_mix:new c.Uniform1f(f,n.u_mix),u_pattern_size_a:new c.Uniform2f(f,n.u_pattern_size_a),u_pattern_size_b:new c.Uniform2f(f,n.u_pattern_size_b),u_scale_a:new c.Uniform1f(f,n.u_scale_a),u_scale_b:new c.Uniform1f(f,n.u_scale_b),u_pixel_coord_upper:new c.Uniform2f(f,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.Uniform2f(f,n.u_pixel_coord_lower),u_tile_units_to_pixels:new c.Uniform1f(f,n.u_tile_units_to_pixels)}),terrain:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_texture:new c.Uniform1i(f,n.u_texture)}),terrainDepth:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix)}),terrainCoords:(f,n)=>({u_matrix:new c.UniformMatrix4f(f,n.u_matrix),u_texture:new c.Uniform1i(f,n.u_texture),u_terrain_coords_id:new c.Uniform1f(f,n.u_terrain_coords_id)})};class Yo{constructor(n,s,h){this.context=n;const m=n.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!h,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(n){const s=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const pc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class fc{constructor(n,s,h,m){this.length=s.length,this.attributes=h,this.itemSize=s.bytesPerElement,this.dynamicDraw=m,this.context=n;const b=n.gl;this.buffer=b.createBuffer(),n.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(n){if(n.length!==this.length)throw new Error(`Length of new data is ${n.length}, which doesn't match current length of ${this.length}`);const s=this.context.gl;this.bind(),s.bufferSubData(s.ARRAY_BUFFER,0,n.arrayBuffer)}enableAttributes(n,s){for(let h=0;h<this.attributes.length;h++){const m=s.attributes[this.attributes[h].name];m!==void 0&&n.enableVertexAttribArray(m)}}setVertexAttribPointers(n,s,h){for(let m=0;m<this.attributes.length;m++){const b=this.attributes[m],k=s.attributes[b.name];k!==void 0&&n.vertexAttribPointer(k,b.components,n[pc[b.type]],!1,this.itemSize,b.offset+this.itemSize*(h||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class un{constructor(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(n){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class du extends un{getDefault(){return c.Color.transparent}set(n){const s=this.current;(n.r!==s.r||n.g!==s.g||n.b!==s.b||n.a!==s.a||this.dirty)&&(this.gl.clearColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class ga extends un{getDefault(){return 1}set(n){(n!==this.current||this.dirty)&&(this.gl.clearDepth(n),this.current=n,this.dirty=!1)}}class Zi extends un{getDefault(){return 0}set(n){(n!==this.current||this.dirty)&&(this.gl.clearStencil(n),this.current=n,this.dirty=!1)}}class Ss extends un{getDefault(){return[!0,!0,!0,!0]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||n[2]!==s[2]||n[3]!==s[3]||this.dirty)&&(this.gl.colorMask(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class cr extends un{getDefault(){return!0}set(n){(n!==this.current||this.dirty)&&(this.gl.depthMask(n),this.current=n,this.dirty=!1)}}class Es extends un{getDefault(){return 255}set(n){(n!==this.current||this.dirty)&&(this.gl.stencilMask(n),this.current=n,this.dirty=!1)}}class hl extends un{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(n){const s=this.current;(n.func!==s.func||n.ref!==s.ref||n.mask!==s.mask||this.dirty)&&(this.gl.stencilFunc(n.func,n.ref,n.mask),this.current=n,this.dirty=!1)}}class dl extends un{getDefault(){const n=this.gl;return[n.KEEP,n.KEEP,n.KEEP]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||n[2]!==s[2]||this.dirty)&&(this.gl.stencilOp(n[0],n[1],n[2]),this.current=n,this.dirty=!1)}}class ya extends un{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;n?s.enable(s.STENCIL_TEST):s.disable(s.STENCIL_TEST),this.current=n,this.dirty=!1}}class Ts extends un{getDefault(){return[0,1]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||this.dirty)&&(this.gl.depthRange(n[0],n[1]),this.current=n,this.dirty=!1)}}class ks extends un{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;n?s.enable(s.DEPTH_TEST):s.disable(s.DEPTH_TEST),this.current=n,this.dirty=!1}}class pl extends un{getDefault(){return this.gl.LESS}set(n){(n!==this.current||this.dirty)&&(this.gl.depthFunc(n),this.current=n,this.dirty=!1)}}class Di extends un{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;n?s.enable(s.BLEND):s.disable(s.BLEND),this.current=n,this.dirty=!1}}class Ms extends un{getDefault(){const n=this.gl;return[n.ONE,n.ZERO]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||this.dirty)&&(this.gl.blendFunc(n[0],n[1]),this.current=n,this.dirty=!1)}}class va extends un{getDefault(){return c.Color.transparent}set(n){const s=this.current;(n.r!==s.r||n.g!==s.g||n.b!==s.b||n.a!==s.a||this.dirty)&&(this.gl.blendColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class mc extends un{getDefault(){return this.gl.FUNC_ADD}set(n){(n!==this.current||this.dirty)&&(this.gl.blendEquation(n),this.current=n,this.dirty=!1)}}class Xi extends un{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;n?s.enable(s.CULL_FACE):s.disable(s.CULL_FACE),this.current=n,this.dirty=!1}}class fl extends un{getDefault(){return this.gl.BACK}set(n){(n!==this.current||this.dirty)&&(this.gl.cullFace(n),this.current=n,this.dirty=!1)}}class pu extends un{getDefault(){return this.gl.CCW}set(n){(n!==this.current||this.dirty)&&(this.gl.frontFace(n),this.current=n,this.dirty=!1)}}class Yr extends un{getDefault(){return null}set(n){(n!==this.current||this.dirty)&&(this.gl.useProgram(n),this.current=n,this.dirty=!1)}}class Cs extends un{getDefault(){return this.gl.TEXTURE0}set(n){(n!==this.current||this.dirty)&&(this.gl.activeTexture(n),this.current=n,this.dirty=!1)}}class gc extends un{getDefault(){const n=this.gl;return[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||n[2]!==s[2]||n[3]!==s[3]||this.dirty)&&(this.gl.viewport(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class xa extends un{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.bindFramebuffer(s.FRAMEBUFFER,n),this.current=n,this.dirty=!1}}class yc extends un{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.bindRenderbuffer(s.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class Ps extends un{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.bindTexture(s.TEXTURE_2D,n),this.current=n,this.dirty=!1}}class _a extends un{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.bindBuffer(s.ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class Qo extends un{getDefault(){return null}set(n){const s=this.gl;s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class Ki extends un{constructor(n){super(n),this.vao=n.extVertexArrayObject}getDefault(){return null}set(n){this.vao&&(n!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(n),this.current=n,this.dirty=!1)}}class vc extends un{getDefault(){return 4}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.pixelStorei(s.UNPACK_ALIGNMENT,n),this.current=n,this.dirty=!1}}class fu extends un{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),this.current=n,this.dirty=!1}}class xc extends un{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,n),this.current=n,this.dirty=!1}}class mo extends un{constructor(n,s){super(n),this.context=n,this.parent=s}getDefault(){return null}}class ml extends mo{setDirty(){this.dirty=!0}set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const s=this.gl;s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,n,0),this.current=n,this.dirty=!1}}class Is extends mo{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const s=this.gl;s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class As{constructor(n,s,h,m){this.context=n,this.width=s,this.height=h;const b=n.gl,k=this.framebuffer=b.createFramebuffer();if(this.colorAttachment=new ml(n,k),m&&(this.depthAttachment=new Is(n,k)),b.checkFramebufferStatus(b.FRAMEBUFFER)!==b.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const n=this.context.gl,s=this.colorAttachment.get();if(s&&n.deleteTexture(s),this.depthAttachment){const h=this.depthAttachment.get();h&&n.deleteRenderbuffer(h)}n.deleteFramebuffer(this.framebuffer)}}class Un{constructor(n,s,h){this.blendFunction=n,this.blendColor=s,this.mask=h}}Un.Replace=[1,0],Un.disabled=new Un(Un.Replace,c.Color.transparent,[!1,!1,!1,!1]),Un.unblended=new Un(Un.Replace,c.Color.transparent,[!0,!0,!0,!0]),Un.alphaBlended=new Un([1,771],c.Color.transparent,[!0,!0,!0,!0]);class _c{constructor(n){this.gl=n,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new du(this),this.clearDepth=new ga(this),this.clearStencil=new Zi(this),this.colorMask=new Ss(this),this.depthMask=new cr(this),this.stencilMask=new Es(this),this.stencilFunc=new hl(this),this.stencilOp=new dl(this),this.stencilTest=new ya(this),this.depthRange=new Ts(this),this.depthTest=new ks(this),this.depthFunc=new pl(this),this.blend=new Di(this),this.blendFunc=new Ms(this),this.blendColor=new va(this),this.blendEquation=new mc(this),this.cullFace=new Xi(this),this.cullFaceSide=new fl(this),this.frontFace=new pu(this),this.program=new Yr(this),this.activeTexture=new Cs(this),this.viewport=new gc(this),this.bindFramebuffer=new xa(this),this.bindRenderbuffer=new yc(this),this.bindTexture=new Ps(this),this.bindVertexBuffer=new _a(this),this.bindElementBuffer=new Qo(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ki(this),this.pixelStoreUnpack=new vc(this),this.pixelStoreUnpackPremultiplyAlpha=new fu(this),this.pixelStoreUnpackFlipY=new xc(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=n.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(n.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=n.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=n.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(n,s){return new Yo(this,n,s)}createVertexBuffer(n,s,h){return new fc(this,n,s,h)}createRenderbuffer(n,s,h){const m=this.gl,b=m.createRenderbuffer();return this.bindRenderbuffer.set(b),m.renderbufferStorage(m.RENDERBUFFER,n,s,h),this.bindRenderbuffer.set(null),b}createFramebuffer(n,s,h){return new As(this,n,s,h)}clear({color:n,depth:s}){const h=this.gl;let m=0;n&&(m|=h.COLOR_BUFFER_BIT,this.clearColor.set(n),this.colorMask.set([!0,!0,!0,!0])),s!==void 0&&(m|=h.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(s),this.depthMask.set(!0)),h.clear(m)}setCullFace(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))}setDepthMode(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)}setStencilMode(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)}setColorMode(n){D(n.blendFunction,Un.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class yt{constructor(n,s,h){this.func=n,this.mask=s,this.range=h}}yt.ReadOnly=!1,yt.ReadWrite=!0,yt.disabled=new yt(519,yt.ReadOnly,[0,1]);const es=7680;class Dn{constructor(n,s,h,m,b,k){this.test=n,this.ref=s,this.mask=h,this.fail=m,this.depthFail=b,this.pass=k}}Dn.disabled=new Dn({func:519,mask:0},0,0,es,es,es);class Mn{constructor(n,s,h){this.enable=n,this.mode=s,this.frontFace=h}}let go;function mu(f,n,s,h,m,b,k){const P=f.context,I=P.gl,z=f.useProgram("collisionBox"),N=[];let U=0,H=0;for(let re=0;re<h.length;re++){const Me=h[re],ke=n.getTile(Me),Pe=ke.getBucket(s);if(!Pe)continue;let De=Me.posMatrix;m[0]===0&&m[1]===0||(De=f.translatePosMatrix(Me.posMatrix,ke,m,b));const Ge=k?Pe.textCollisionBox:Pe.iconCollisionBox,ze=Pe.collisionCircleArray;if(ze.length>0){const lt=c.create(),nt=De;c.mul(lt,Pe.placementInvProjMatrix,f.transform.glCoordMatrix),c.mul(lt,lt,Pe.placementViewportMatrix),N.push({circleArray:ze,circleOffset:H,transform:nt,invTransform:lt,coord:Me}),U+=ze.length/4,H=U}Ge&&z.draw(P,I.LINES,yt.disabled,Dn.disabled,f.colorModeForRenderPass(),Mn.disabled,cl(De,f.transform,ke),f.style.terrain&&f.style.terrain.getTerrainData(Me),s.id,Ge.layoutVertexBuffer,Ge.indexBuffer,Ge.segments,null,f.transform.zoom,null,null,Ge.collisionVertexBuffer)}if(!k||!N.length)return;const Q=f.useProgram("collisionCircle"),K=new c.CollisionCircleLayoutArray;K.resize(4*U),K._trim();let X=0;for(const re of N)for(let Me=0;Me<re.circleArray.length/4;Me++){const ke=4*Me,Pe=re.circleArray[ke+0],De=re.circleArray[ke+1],Ge=re.circleArray[ke+2],ze=re.circleArray[ke+3];K.emplace(X++,Pe,De,Ge,ze,0),K.emplace(X++,Pe,De,Ge,ze,1),K.emplace(X++,Pe,De,Ge,ze,2),K.emplace(X++,Pe,De,Ge,ze,3)}(!go||go.length<2*U)&&(go=function(re){const Me=2*re,ke=new c.QuadTriangleArray;ke.resize(Me),ke._trim();for(let Pe=0;Pe<Me;Pe++){const De=6*Pe;ke.uint16[De+0]=4*Pe+0,ke.uint16[De+1]=4*Pe+1,ke.uint16[De+2]=4*Pe+2,ke.uint16[De+3]=4*Pe+2,ke.uint16[De+4]=4*Pe+3,ke.uint16[De+5]=4*Pe+0}return ke}(U));const le=P.createIndexBuffer(go,!0),xe=P.createVertexBuffer(K,c.collisionCircleLayout.members,!0);for(const re of N){const Me={u_matrix:re.transform,u_inv_matrix:re.invTransform,u_camera_to_center_distance:(be=f.transform).cameraToCenterDistance,u_viewport_size:[be.width,be.height]};Q.draw(P,I.TRIANGLES,yt.disabled,Dn.disabled,f.colorModeForRenderPass(),Mn.disabled,Me,f.style.terrain&&f.style.terrain.getTerrainData(re.coord),s.id,xe,le,c.SegmentVector.simpleSegment(0,2*re.circleOffset,re.circleArray.length,re.circleArray.length/2),null,f.transform.zoom,null,null,null)}var be;xe.destroy(),le.destroy()}Mn.disabled=new Mn(!1,1029,2305),Mn.backCCW=new Mn(!0,1029,2305);const wc=c.identity(new Float32Array(16));function gu(f,n,s,h,m,b){const{horizontalAlign:k,verticalAlign:P}=c.getAnchorAlignment(f),I=-(k-.5)*n,z=-(P-.5)*s,N=c.evaluateVariableOffset(f,h);return new c.pointGeometry((I/m+N[0])*b,(z/m+N[1])*b)}function fh(f,n,s,h,m,b,k,P,I,z,N){const U=f.text.placedSymbolArray,H=f.text.dynamicLayoutVertexArray,Q=f.icon.dynamicLayoutVertexArray,K={};H.clear();for(let X=0;X<U.length;X++){const le=U.get(X),xe=f.allowVerticalPlacement&&!le.placedOrientation,be=le.hidden||!le.crossTileID||xe?null:h[le.crossTileID];if(be){const re=new c.pointGeometry(le.anchorX,le.anchorY),Me=Sn(re,s?k:b,N),ke=er(m.cameraToCenterDistance,Me.signedDistanceFromCamera);let Pe=c.evaluateSizeForFeature(f.textSizeData,I,le)*ke/c.ONE_EM;s&&(Pe*=f.tilePixelRatio/P);const{width:De,height:Ge,anchor:ze,textOffset:lt,textBoxScale:nt}=be,st=gu(ze,De,Ge,lt,nt,Pe),jt=s?Sn(re.add(st),b,N).point:Me.point.add(n?st.rotate(-m.angle):st),Gt=f.allowVerticalPlacement&&le.placedOrientation===c.WritingMode.vertical?Math.PI/2:0;for(let Et=0;Et<le.numGlyphs;Et++)c.addDynamicAttributes(H,jt,Gt);z&&le.associatedIconIndex>=0&&(K[le.associatedIconIndex]={shiftedAnchor:jt,angle:Gt})}else or(le.numGlyphs,H)}if(z){Q.clear();const X=f.icon.placedSymbolArray;for(let le=0;le<X.length;le++){const xe=X.get(le);if(xe.hidden)or(xe.numGlyphs,Q);else{const be=K[le];if(be)for(let re=0;re<xe.numGlyphs;re++)c.addDynamicAttributes(Q,be.shiftedAnchor,be.angle);else or(xe.numGlyphs,Q)}}f.icon.dynamicLayoutVertexBuffer.updateData(Q)}f.text.dynamicLayoutVertexBuffer.updateData(H)}function bc(f,n,s){return s.iconsInText&&n?"symbolTextAndIcon":f?"symbolSDF":"symbolIcon"}function Ls(f,n,s,h,m,b,k,P,I,z,N,U){const H=f.context,Q=H.gl,K=f.transform,X=P==="map",le=I==="map",xe=P!=="viewport"&&s.layout.get("symbol-placement")!=="point",be=X&&!le&&!xe,re=!s.layout.get("symbol-sort-key").isConstant();let Me=!1;const ke=f.depthModeForSublayer(0,yt.ReadOnly),Pe=s.layout.get("text-variable-anchor"),De=[];for(const Ge of h){const ze=n.getTile(Ge),lt=ze.getBucket(s);if(!lt)continue;const nt=m?lt.text:lt.icon;if(!nt||!nt.segments.get().length)continue;const st=nt.programConfigurations.get(s.id),jt=m||lt.sdfIcons,Gt=m?lt.textSizeData:lt.iconSizeData,Et=le||K.pitch!==0,xn=f.useProgram(bc(jt,m,lt),st),nn=c.evaluateSizeForZoom(Gt,K.zoom),Qt=f.style.terrain&&f.style.terrain.getTerrainData(Ge);let en,rn,Cr,Kn,Vn=[0,0],gr=null;if(m){if(rn=ze.glyphAtlasTexture,Cr=Q.LINEAR,en=ze.glyphAtlasTexture.size,lt.iconsInText){Vn=ze.imageAtlasTexture.size,gr=ze.imageAtlasTexture;const ei=Gt.kind==="composite"||Gt.kind==="camera";Kn=Et||f.options.rotating||f.options.zooming||ei?Q.LINEAR:Q.NEAREST}}else{const ei=s.layout.get("icon-size").constantOr(0)!==1||lt.iconsNeedLinear;rn=ze.imageAtlasTexture,Cr=jt||f.options.rotating||f.options.zooming||ei||Et?Q.LINEAR:Q.NEAREST,en=ze.imageAtlasTexture.size}const $r=$t(ze,1,f.transform.zoom),Rn=ir(Ge.posMatrix,le,X,f.transform,$r),yr=dn(Ge.posMatrix,le,X,f.transform,$r),Mo=Pe&&lt.hasTextData(),Os=s.layout.get("icon-text-fit")!=="none"&&Mo&&lt.hasIconData();if(xe){const ei=f.style.terrain?(Po,ja)=>f.style.terrain.getElevation(Ge,Po,ja):null,Co=s.layout.get("text-rotation-alignment")==="map";fr(lt,Ge.posMatrix,f,m,Rn,yr,le,z,Co,ei)}const cn=f.translatePosMatrix(Ge.posMatrix,ze,b,k),on=xe||m&&Pe||Os?wc:Rn,Ht=f.translatePosMatrix(yr,ze,b,k,!0),Jt=jt&&s.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Nn;Nn=jt?lt.iconsInText?ma(Gt.kind,nn,be,le,f,cn,on,Ht,en,Vn):Jo(Gt.kind,nn,be,le,f,cn,on,Ht,m,en):_i(Gt.kind,nn,be,le,f,cn,on,Ht,m,en);const Cn={program:xn,buffers:nt,uniformValues:Nn,atlasTexture:rn,atlasTextureIcon:gr,atlasInterpolation:Cr,atlasInterpolationIcon:Kn,isSDF:jt,hasHalo:Jt};if(re&&lt.canOverlap){Me=!0;const ei=nt.segments.get();for(const Co of ei)De.push({segments:new c.SegmentVector([Co]),sortKey:Co.sortKey,state:Cn,terrainData:Qt})}else De.push({segments:nt.segments,sortKey:0,state:Cn,terrainData:Qt})}Me&&De.sort((Ge,ze)=>Ge.sortKey-ze.sortKey);for(const Ge of De){const ze=Ge.state;if(H.activeTexture.set(Q.TEXTURE0),ze.atlasTexture.bind(ze.atlasInterpolation,Q.CLAMP_TO_EDGE),ze.atlasTextureIcon&&(H.activeTexture.set(Q.TEXTURE1),ze.atlasTextureIcon&&ze.atlasTextureIcon.bind(ze.atlasInterpolationIcon,Q.CLAMP_TO_EDGE)),ze.isSDF){const lt=ze.uniformValues;ze.hasHalo&&(lt.u_is_halo=1,wa(ze.buffers,Ge.segments,s,f,ze.program,ke,N,U,lt,Ge.terrainData)),lt.u_is_halo=0}wa(ze.buffers,Ge.segments,s,f,ze.program,ke,N,U,ze.uniformValues,Ge.terrainData)}}function wa(f,n,s,h,m,b,k,P,I,z){const N=h.context;m.draw(N,N.gl.TRIANGLES,b,k,P,Mn.disabled,I,z,s.id,f.layoutVertexBuffer,f.indexBuffer,n,s.paint,h.transform.zoom,f.programConfigurations.get(s.id),f.dynamicLayoutVertexBuffer,f.opacityVertexBuffer)}function gl(f,n,s,h,m,b,k){const P=f.context.gl,I=s.paint.get("fill-pattern"),z=I&&I.constantOr(1),N=s.getCrossfadeParameters();let U,H,Q,K,X;k?(H=z&&!s.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",U=P.LINES):(H=z?"fillPattern":"fill",U=P.TRIANGLES);for(const le of h){const xe=n.getTile(le);if(z&&!xe.patternsLoaded())continue;const be=xe.getBucket(s);if(!be)continue;const re=be.programConfigurations.get(s.id),Me=f.useProgram(H,re),ke=f.style.terrain&&f.style.terrain.getTerrainData(le);z&&(f.context.activeTexture.set(P.TEXTURE0),xe.imageAtlasTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE),re.updatePaintBuffers(N));const Pe=I.constantOr(null);if(Pe&&xe.imageAtlas){const ze=xe.imageAtlas,lt=ze.patternPositions[Pe.to.toString()],nt=ze.patternPositions[Pe.from.toString()];lt&&nt&&re.setConstantPatternPositions(lt,nt)}const De=ke?le:null,Ge=f.translatePosMatrix(De?De.posMatrix:le.posMatrix,xe,s.paint.get("fill-translate"),s.paint.get("fill-translate-anchor"));if(k){K=be.indexBuffer2,X=be.segments2;const ze=[P.drawingBufferWidth,P.drawingBufferHeight];Q=H==="fillOutlinePattern"&&z?ll(Ge,f,N,xe,ze):hc(Ge,ze)}else K=be.indexBuffer,X=be.segments,Q=z?ha(Ge,f,N,xe):uc(Ge);Me.draw(f.context,U,m,f.stencilModeForClipping(le),b,Mn.disabled,Q,ke,s.id,be.layoutVertexBuffer,K,X,s.paint,f.transform.zoom,re)}}function ba(f,n,s,h,m,b,k){const P=f.context,I=P.gl,z=s.paint.get("fill-extrusion-pattern"),N=z.constantOr(1),U=s.getCrossfadeParameters(),H=s.paint.get("fill-extrusion-opacity");for(const Q of h){const K=n.getTile(Q),X=K.getBucket(s);if(!X)continue;const le=f.style.terrain&&f.style.terrain.getTerrainData(Q),xe=X.programConfigurations.get(s.id),be=f.useProgram(N?"fillExtrusionPattern":"fillExtrusion",xe);N&&(f.context.activeTexture.set(I.TEXTURE0),K.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),xe.updatePaintBuffers(U));const re=z.constantOr(null);if(re&&K.imageAtlas){const De=K.imageAtlas,Ge=De.patternPositions[re.to.toString()],ze=De.patternPositions[re.from.toString()];Ge&&ze&&xe.setConstantPatternPositions(Ge,ze)}const Me=f.translatePosMatrix(Q.posMatrix,K,s.paint.get("fill-extrusion-translate"),s.paint.get("fill-extrusion-translate-anchor")),ke=s.paint.get("fill-extrusion-vertical-gradient"),Pe=N?cc(Me,f,ke,H,Q,U,K):ua(Me,f,ke,H);be.draw(P,P.gl.TRIANGLES,m,b,k,Mn.backCCW,Pe,le,s.id,X.layoutVertexBuffer,X.indexBuffer,X.segments,s.paint,f.transform.zoom,xe,f.style.terrain&&X.centroidVertexBuffer)}}function yu(f,n,s,h,m,b,k){const P=f.context,I=P.gl,z=s.fbo;if(!z)return;const N=f.useProgram("hillshade"),U=f.style.terrain&&f.style.terrain.getTerrainData(n);P.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,z.colorAttachment.get()),N.draw(P,I.TRIANGLES,m,b,k,Mn.disabled,((H,Q,K,X)=>{const le=K.paint.get("hillshade-shadow-color"),xe=K.paint.get("hillshade-highlight-color"),be=K.paint.get("hillshade-accent-color");let re=K.paint.get("hillshade-illumination-direction")*(Math.PI/180);K.paint.get("hillshade-illumination-anchor")==="viewport"&&(re-=H.transform.angle);const Me=!H.options.moving;return{u_matrix:X?X.posMatrix:H.transform.calculatePosMatrix(Q.tileID.toUnwrapped(),Me),u_image:0,u_latrange:pa(0,Q.tileID),u_light:[K.paint.get("hillshade-exaggeration"),re],u_shadow:le,u_highlight:xe,u_accent:be}})(f,s,h,U?n:null),U,h.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)}function yl(f,n,s,h,m,b){const k=f.context,P=k.gl,I=n.dem;if(I&&I.data){const z=I.dim,N=I.stride,U=I.getPixels();if(k.activeTexture.set(P.TEXTURE1),k.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||f.getTileTexture(N),n.demTexture){const Q=n.demTexture;Q.update(U,{premultiply:!1}),Q.bind(P.NEAREST,P.CLAMP_TO_EDGE)}else n.demTexture=new W(k,U,P.RGBA,{premultiply:!1}),n.demTexture.bind(P.NEAREST,P.CLAMP_TO_EDGE);k.activeTexture.set(P.TEXTURE0);let H=n.fbo;if(!H){const Q=new W(k,{width:z,height:z,data:null},P.RGBA);Q.bind(P.LINEAR,P.CLAMP_TO_EDGE),H=n.fbo=k.createFramebuffer(z,z,!0),H.colorAttachment.set(Q.texture)}k.bindFramebuffer.set(H.framebuffer),k.viewport.set([0,0,z,z]),f.useProgram("hillshadePrepare").draw(k,P.TRIANGLES,h,m,b,Mn.disabled,((Q,K)=>{const X=K.stride,le=c.create();return c.ortho(le,0,c.EXTENT,-c.EXTENT,0,0,1),c.translate(le,le,[0,-c.EXTENT,0]),{u_matrix:le,u_image:1,u_dimension:[X,X],u_zoom:Q.overscaledZ,u_unpack:K.getUnpackVector()}})(n.tileID,I),null,s.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function vl(f,n,s,h,m,b){const k=h.paint.get("raster-fade-duration");if(!b&&k>0){const P=c.exported.now(),I=(P-f.timeAdded)/k,z=n?(P-n.timeAdded)/k:-1,N=s.getSource(),U=m.coveringZoomLevel({tileSize:N.tileSize,roundZoom:N.roundZoom}),H=!n||Math.abs(n.tileID.overscaledZ-U)>Math.abs(f.tileID.overscaledZ-U),Q=H&&f.refreshedUponExpiration?1:c.clamp(H?I:1-z,0,1);return f.refreshedUponExpiration&&I>=1&&(f.refreshedUponExpiration=!1),n?{opacity:1,mix:1-Q}:{opacity:Q,mix:0}}return{opacity:1,mix:0}}const wi=new c.Color(1,0,0,1),xl=new c.Color(0,1,0,1),ts=new c.Color(0,0,1,1),vu=new c.Color(1,0,1,1),ns=new c.Color(0,1,1,1);function zs(f,n,s,h){Ea(f,0,n+s/2,f.transform.width,s,h)}function Sa(f,n,s,h){Ea(f,n-s/2,0,s,f.transform.height,h)}function Ea(f,n,s,h,m,b){const k=f.context,P=k.gl;P.enable(P.SCISSOR_TEST),P.scissor(n*f.pixelRatio,s*f.pixelRatio,h*f.pixelRatio,m*f.pixelRatio),k.clear({color:b}),P.disable(P.SCISSOR_TEST)}function _l(f,n,s){const h=f.context,m=h.gl,b=s.posMatrix,k=f.useProgram("debug"),P=yt.disabled,I=Dn.disabled,z=f.colorModeForRenderPass(),N="$debug",U=f.style.terrain&&f.style.terrain.getTerrainData(s);h.activeTexture.set(m.TEXTURE0),f.emptyTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE);const H=n.getTileByID(s.key).latestRawTileData,Q=Math.floor((H&&H.byteLength||0)/1024),K=n.getTile(s).tileSize,X=512/Math.min(K,512)*(s.overscaledZ/f.transform.zoom)*.5;let le=s.canonical.toString();s.overscaledZ!==s.canonical.z&&(le+=` => ${s.overscaledZ}`),function(xe,be){xe.initDebugOverlayCanvas();const re=xe.debugOverlayCanvas,Me=xe.context.gl,ke=xe.debugOverlayCanvas.getContext("2d");ke.clearRect(0,0,re.width,re.height),ke.shadowColor="white",ke.shadowBlur=2,ke.lineWidth=1.5,ke.strokeStyle="white",ke.textBaseline="top",ke.font="bold 36px Open Sans, sans-serif",ke.fillText(be,5,5),ke.strokeText(be,5,5),xe.debugOverlayTexture.update(re),xe.debugOverlayTexture.bind(Me.LINEAR,Me.CLAMP_TO_EDGE)}(f,`${le} ${Q}kB`),k.draw(h,m.TRIANGLES,P,I,Un.alphaBlended,Mn.disabled,po(b,c.Color.transparent,X),null,N,f.debugBuffer,f.quadTriangleIndexBuffer,f.debugSegments),k.draw(h,m.LINE_STRIP,P,I,z,Mn.disabled,po(b,c.Color.red),U,N,f.debugBuffer,f.tileBorderIndexBuffer,f.debugSegments)}function rs(f,n,s){const h=f.context,m=h.gl,b=f.colorModeForRenderPass(),k=new yt(m.LEQUAL,yt.ReadWrite,f.depthRangeFor3D),P=f.useProgram("terrain"),I=n.getTerrainMesh(),z=n.getTerrainData(s.tileID);h.bindFramebuffer.set(null),h.viewport.set([0,0,f.width,f.height]),h.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,n.getRTTFramebuffer().colorAttachment.get());const N=f.transform.calculatePosMatrix(s.tileID.toUnwrapped());P.draw(h,m.TRIANGLES,k,Dn.disabled,b,Mn.backCCW,{u_matrix:N,u_texture:0},z,"terrain",I.vertexBuffer,I.indexBuffer,I.segments)}function Sc(f,n,s,h){const m=f.context,b=s.tileSize*n.qualityFactor;s.textures[h]||(s.textures[h]=f.getTileTexture(b)||new W(m,{width:b,height:b,data:null},m.gl.RGBA),s.textures[h].bind(m.gl.LINEAR,m.gl.CLAMP_TO_EDGE),h===0&&n.sourceCache.renderHistory.unshift(s.tileID.key));const k=n.getRTTFramebuffer();k.colorAttachment.set(s.textures[h].texture),m.bindFramebuffer.set(k.framebuffer),m.viewport.set([0,0,b,b])}class wl{constructor(n){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=n,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=n.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const n=this.painter.style,s=n.terrain;for(const h in n.sourceCaches){this._coordsDescendingInv[h]={};const m=n.sourceCaches[h].getVisibleCoordinates();for(const b of m){const k=s.sourceCache.getTerrainCoords(b);for(const P in k)this._coordsDescendingInv[h][P]||(this._coordsDescendingInv[h][P]=[]),this._coordsDescendingInv[h][P].push(k[P])}}for(const h of n._order){const m=n._layers[h],b=m.source;if(this._renderToTexture[m.type]&&!this._coordsDescendingInvStr[b]){this._coordsDescendingInvStr[b]={};for(const k in this._coordsDescendingInv[b])this._coordsDescendingInvStr[b][k]=this._coordsDescendingInv[b][k].map(P=>P.key).sort().join()}}return this._renderableTiles.forEach(h=>{for(const m in this._coordsDescendingInvStr){const b=this._coordsDescendingInvStr[m][h.tileID.key];b&&b!==h.textureCoords[m]&&h.clearTextures(this.painter),s.needsRerender(m,h.tileID)&&h.clearTextures(this.painter)}this._rerender[h.tileID.key]=!h.textures.length}),s.clearRerenderCache(),s.sourceCache.removeOutdated(this.painter),this}renderLayer(n){const s=n.type,h=this.painter,m=h.style._order,b=h.currentLayer,k=b+1===m.length;if(this._renderToTexture[s]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=s,this._stacks[this._stacks.length-1].push(m[b]),!k))return!0;if(this._renderToTexture[this._prevType]||s==="hillshade"||this._renderToTexture[s]&&k){this._prevType=s;const P=this._stacks.length-1,I=this._stacks[P]||[];for(const z of this._renderableTiles){if(Sc(h,h.style.terrain,z,P),this._rerender[z.tileID.key]){h.context.clear({color:c.Color.transparent});for(let N=0;N<I.length;N++){const U=h.style._layers[I[N]],H=U.source?this._coordsDescendingInv[U.source][z.tileID.key]:[z.tileID];h._renderTileClippingMasks(U,H),h.renderLayer(h,h.style.sourceCaches[U.source],U,H),U.source&&(z.textureCoords[U.source]=this._coordsDescendingInvStr[U.source][z.tileID.key])}}rs(h,h.style.terrain,z)}if(s==="hillshade"){this._stacks.push([m[b]]);for(const z of this._renderableTiles){const N=this._coordsDescendingInv[n.source][z.tileID.key];Sc(h,h.style.terrain,z,this._stacks.length-1),h.context.clear({color:c.Color.transparent}),h._renderTileClippingMasks(n,N),h.renderLayer(h,h.style.sourceCaches[n.source],n,N),rs(h,h.style.terrain,z)}return!0}return this._renderToTexture[s]}return!1}}const bl={symbol:function(f,n,s,h,m){if(f.renderPass!=="translucent")return;const b=Dn.disabled,k=f.colorModeForRenderPass();s.layout.get("text-variable-anchor")&&function(P,I,z,N,U,H,Q){const K=I.transform,X=U==="map",le=H==="map";for(const xe of P){const be=N.getTile(xe),re=be.getBucket(z);if(!re||!re.text||!re.text.segments.get().length)continue;const Me=c.evaluateSizeForZoom(re.textSizeData,K.zoom),ke=$t(be,1,I.transform.zoom),Pe=ir(xe.posMatrix,le,X,I.transform,ke),De=z.layout.get("icon-text-fit")!=="none"&&re.hasIconData();if(Me){const Ge=Math.pow(2,K.zoom-be.tileID.overscaledZ);fh(re,X,le,Q,K,Pe,xe.posMatrix,Ge,Me,De,I.style.terrain?(ze,lt)=>I.style.terrain.getElevation(xe,ze,lt):null)}}}(h,f,s,n,s.layout.get("text-rotation-alignment"),s.layout.get("text-pitch-alignment"),m),s.paint.get("icon-opacity").constantOr(1)!==0&&Ls(f,n,s,h,!1,s.paint.get("icon-translate"),s.paint.get("icon-translate-anchor"),s.layout.get("icon-rotation-alignment"),s.layout.get("icon-pitch-alignment"),s.layout.get("icon-keep-upright"),b,k),s.paint.get("text-opacity").constantOr(1)!==0&&Ls(f,n,s,h,!0,s.paint.get("text-translate"),s.paint.get("text-translate-anchor"),s.layout.get("text-rotation-alignment"),s.layout.get("text-pitch-alignment"),s.layout.get("text-keep-upright"),b,k),n.map.showCollisionBoxes&&(mu(f,n,s,h,s.paint.get("text-translate"),s.paint.get("text-translate-anchor"),!0),mu(f,n,s,h,s.paint.get("icon-translate"),s.paint.get("icon-translate-anchor"),!1))},circle:function(f,n,s,h){if(f.renderPass!=="translucent")return;const m=s.paint.get("circle-opacity"),b=s.paint.get("circle-stroke-width"),k=s.paint.get("circle-stroke-opacity"),P=!s.layout.get("circle-sort-key").isConstant();if(m.constantOr(1)===0&&(b.constantOr(1)===0||k.constantOr(1)===0))return;const I=f.context,z=I.gl,N=f.depthModeForSublayer(0,yt.ReadOnly),U=Dn.disabled,H=f.colorModeForRenderPass(),Q=[];for(let K=0;K<h.length;K++){const X=h[K],le=n.getTile(X),xe=le.getBucket(s);if(!xe)continue;const be=xe.programConfigurations.get(s.id),re=f.useProgram("circle",be),Me=xe.layoutVertexBuffer,ke=xe.indexBuffer,Pe=f.style.terrain&&f.style.terrain.getTerrainData(X),De={programConfiguration:be,program:re,layoutVertexBuffer:Me,indexBuffer:ke,uniformValues:xi(f,X,le,s),terrainData:Pe};if(P){const Ge=xe.segments.get();for(const ze of Ge)Q.push({segments:new c.SegmentVector([ze]),sortKey:ze.sortKey,state:De})}else Q.push({segments:xe.segments,sortKey:0,state:De})}P&&Q.sort((K,X)=>K.sortKey-X.sortKey);for(const K of Q){const{programConfiguration:X,program:le,layoutVertexBuffer:xe,indexBuffer:be,uniformValues:re,terrainData:Me}=K.state;le.draw(I,z.TRIANGLES,N,U,H,Mn.disabled,re,Me,s.id,xe,be,K.segments,s.paint,f.transform.zoom,X)}},heatmap:function(f,n,s,h){if(s.paint.get("heatmap-opacity")!==0)if(f.renderPass==="offscreen"){const m=f.context,b=m.gl,k=Dn.disabled,P=new Un([b.ONE,b.ONE],c.Color.transparent,[!0,!0,!0,!0]);(function(I,z,N){const U=I.gl;I.activeTexture.set(U.TEXTURE1),I.viewport.set([0,0,z.width/4,z.height/4]);let H=N.heatmapFbo;if(H)U.bindTexture(U.TEXTURE_2D,H.colorAttachment.get()),I.bindFramebuffer.set(H.framebuffer);else{const Q=U.createTexture();U.bindTexture(U.TEXTURE_2D,Q),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_WRAP_S,U.CLAMP_TO_EDGE),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_WRAP_T,U.CLAMP_TO_EDGE),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MIN_FILTER,U.LINEAR),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MAG_FILTER,U.LINEAR),H=N.heatmapFbo=I.createFramebuffer(z.width/4,z.height/4,!1),function(K,X,le,xe){const be=K.gl;be.texImage2D(be.TEXTURE_2D,0,be.RGBA,X.width/4,X.height/4,0,be.RGBA,K.extRenderToTextureHalfFloat?K.extTextureHalfFloat.HALF_FLOAT_OES:be.UNSIGNED_BYTE,null),xe.colorAttachment.set(le)}(I,z,Q,H)}})(m,f,s),m.clear({color:c.Color.transparent});for(let I=0;I<h.length;I++){const z=h[I];if(n.hasRenderableParent(z))continue;const N=n.getTile(z),U=N.getBucket(s);if(!U)continue;const H=U.programConfigurations.get(s.id),Q=f.useProgram("heatmap",H),{zoom:K}=f.transform;Q.draw(m,b.TRIANGLES,yt.disabled,k,P,Mn.disabled,da(z.posMatrix,N,K,s.paint.get("heatmap-intensity")),null,s.id,U.layoutVertexBuffer,U.indexBuffer,U.segments,s.paint,f.transform.zoom,H)}m.viewport.set([0,0,f.width,f.height])}else f.renderPass==="translucent"&&(f.context.setColorMode(f.colorModeForRenderPass()),function(m,b){const k=m.context,P=k.gl,I=b.heatmapFbo;if(!I)return;k.activeTexture.set(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,I.colorAttachment.get()),k.activeTexture.set(P.TEXTURE1);let z=b.colorRampTexture;z||(z=b.colorRampTexture=new W(k,b.colorRamp,P.RGBA)),z.bind(P.LINEAR,P.CLAMP_TO_EDGE),m.useProgram("heatmapTexture").draw(k,P.TRIANGLES,yt.disabled,Dn.disabled,m.colorModeForRenderPass(),Mn.disabled,((N,U,H,Q)=>{const K=c.create();c.ortho(K,0,N.width,N.height,0,0,1);const X=N.context.gl;return{u_matrix:K,u_world:[X.drawingBufferWidth,X.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:U.paint.get("heatmap-opacity")}})(m,b),null,b.id,m.viewportBuffer,m.quadTriangleIndexBuffer,m.viewportSegments,b.paint,m.transform.zoom)}(f,s))},line:function(f,n,s,h){if(f.renderPass!=="translucent")return;const m=s.paint.get("line-opacity"),b=s.paint.get("line-width");if(m.constantOr(1)===0||b.constantOr(1)===0)return;const k=f.depthModeForSublayer(0,yt.ReadOnly),P=f.colorModeForRenderPass(),I=s.paint.get("line-dasharray"),z=s.paint.get("line-pattern"),N=z.constantOr(1),U=s.paint.get("line-gradient"),H=s.getCrossfadeParameters(),Q=N?"linePattern":I?"lineSDF":U?"lineGradient":"line",K=f.context,X=K.gl;let le=!0;for(const xe of h){const be=n.getTile(xe);if(N&&!be.patternsLoaded())continue;const re=be.getBucket(s);if(!re)continue;const Me=re.programConfigurations.get(s.id),ke=f.context.program.get(),Pe=f.useProgram(Q,Me),De=le||Pe.program!==ke,Ge=f.style.terrain&&f.style.terrain.getTerrainData(xe),ze=z.constantOr(null);if(ze&&be.imageAtlas){const st=be.imageAtlas,jt=st.patternPositions[ze.to.toString()],Gt=st.patternPositions[ze.from.toString()];jt&&Gt&&Me.setConstantPatternPositions(jt,Gt)}const lt=Ge?xe:null,nt=N?ws(f,be,s,H,lt):I?zn(f,be,s,I,H,lt):U?fa(f,be,s,re.lineClipsArray.length,lt):Xo(f,be,s,lt);if(N)K.activeTexture.set(X.TEXTURE0),be.imageAtlasTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE),Me.updatePaintBuffers(H);else if(I&&(De||f.lineAtlas.dirty))K.activeTexture.set(X.TEXTURE0),f.lineAtlas.bind(K);else if(U){const st=re.gradients[s.id];let jt=st.texture;if(s.gradientVersion!==st.version){let Gt=256;if(s.stepInterpolant){const Et=n.getSource().maxzoom,xn=xe.canonical.z===Et?Math.ceil(1<<f.transform.maxZoom-xe.canonical.z):1;Gt=c.clamp(c.nextPowerOfTwo(re.maxLineLength/c.EXTENT*1024*xn),256,K.maxTextureSize)}st.gradient=c.renderColorRamp({expression:s.gradientExpression(),evaluationKey:"lineProgress",resolution:Gt,image:st.gradient||void 0,clips:re.lineClipsArray}),st.texture?st.texture.update(st.gradient):st.texture=new W(K,st.gradient,X.RGBA),st.version=s.gradientVersion,jt=st.texture}K.activeTexture.set(X.TEXTURE0),jt.bind(s.stepInterpolant?X.NEAREST:X.LINEAR,X.CLAMP_TO_EDGE)}Pe.draw(K,X.TRIANGLES,k,f.stencilModeForClipping(xe),P,Mn.disabled,nt,Ge,s.id,re.layoutVertexBuffer,re.indexBuffer,re.segments,s.paint,f.transform.zoom,Me,re.layoutVertexBuffer2),le=!1}},fill:function(f,n,s,h){const m=s.paint.get("fill-color"),b=s.paint.get("fill-opacity");if(b.constantOr(1)===0)return;const k=f.colorModeForRenderPass(),P=s.paint.get("fill-pattern"),I=f.opaquePassEnabledForLayer()&&!P.constantOr(1)&&m.constantOr(c.Color.transparent).a===1&&b.constantOr(0)===1?"opaque":"translucent";if(f.renderPass===I){const z=f.depthModeForSublayer(1,f.renderPass==="opaque"?yt.ReadWrite:yt.ReadOnly);gl(f,n,s,h,z,k,!1)}if(f.renderPass==="translucent"&&s.paint.get("fill-antialias")){const z=f.depthModeForSublayer(s.getPaintProperty("fill-outline-color")?2:0,yt.ReadOnly);gl(f,n,s,h,z,k,!0)}},"fill-extrusion":function(f,n,s,h){const m=s.paint.get("fill-extrusion-opacity");if(m!==0&&f.renderPass==="translucent"){const b=new yt(f.context.gl.LEQUAL,yt.ReadWrite,f.depthRangeFor3D);if(m!==1||s.paint.get("fill-extrusion-pattern").constantOr(1))ba(f,n,s,h,b,Dn.disabled,Un.disabled),ba(f,n,s,h,b,f.stencilModeFor3D(),f.colorModeForRenderPass());else{const k=f.colorModeForRenderPass();ba(f,n,s,h,b,Dn.disabled,k)}}},hillshade:function(f,n,s,h){if(f.renderPass!=="offscreen"&&f.renderPass!=="translucent")return;const m=f.context,b=f.depthModeForSublayer(0,yt.ReadOnly),k=f.colorModeForRenderPass(),[P,I]=f.renderPass==="translucent"?f.stencilConfigForOverlap(h):[{},h];for(const z of I){const N=n.getTile(z);N.needsHillshadePrepare!==void 0&&N.needsHillshadePrepare&&f.renderPass==="offscreen"?yl(f,N,s,b,Dn.disabled,k):f.renderPass==="translucent"&&yu(f,z,N,s,b,P[z.overscaledZ],k)}m.viewport.set([0,0,f.width,f.height])},raster:function(f,n,s,h){if(f.renderPass!=="translucent"||s.paint.get("raster-opacity")===0||!h.length)return;const m=f.context,b=m.gl,k=n.getSource(),P=f.useProgram("raster"),I=f.colorModeForRenderPass(),[z,N]=k instanceof at?[{},h]:f.stencilConfigForOverlap(h),U=N[N.length-1].overscaledZ,H=!f.options.moving;for(const Q of N){const K=f.depthModeForSublayer(Q.overscaledZ-U,s.paint.get("raster-opacity")===1?yt.ReadWrite:yt.ReadOnly,b.LESS),X=n.getTile(Q);X.registerFadeDuration(s.paint.get("raster-fade-duration"));const le=n.findLoadedParent(Q,0),xe=vl(X,le,n,s,f.transform,f.style.terrain);let be,re;const Me=s.paint.get("raster-resampling")==="nearest"?b.NEAREST:b.LINEAR;m.activeTexture.set(b.TEXTURE0),X.texture.bind(Me,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST),m.activeTexture.set(b.TEXTURE1),le?(le.texture.bind(Me,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST),be=Math.pow(2,le.tileID.overscaledZ-X.tileID.overscaledZ),re=[X.tileID.canonical.x*be%1,X.tileID.canonical.y*be%1]):X.texture.bind(Me,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST);const ke=f.style.terrain&&f.style.terrain.getTerrainData(Q),Pe=ke?Q:null,De=Pe?Pe.posMatrix:f.transform.calculatePosMatrix(Q.toUnwrapped(),H),Ge=qi(De,re||[0,0],be||1,xe,s);k instanceof at?P.draw(m,b.TRIANGLES,K,Dn.disabled,I,Mn.disabled,Ge,ke,s.id,k.boundsBuffer,f.quadTriangleIndexBuffer,k.boundsSegments):P.draw(m,b.TRIANGLES,K,z[Q.overscaledZ],I,Mn.disabled,Ge,ke,s.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)}},background:function(f,n,s,h){const m=s.paint.get("background-color"),b=s.paint.get("background-opacity");if(b===0)return;const k=f.context,P=k.gl,I=f.transform,z=I.tileSize,N=s.paint.get("background-pattern");if(f.isPatternMissing(N))return;const U=!N&&m.a===1&&b===1&&f.opaquePassEnabledForLayer()?"opaque":"translucent";if(f.renderPass!==U)return;const H=Dn.disabled,Q=f.depthModeForSublayer(0,U==="opaque"?yt.ReadWrite:yt.ReadOnly),K=f.colorModeForRenderPass(),X=f.useProgram(N?"backgroundPattern":"background"),le=h||I.coveringTiles({tileSize:z,terrain:f.style.terrain});N&&(k.activeTexture.set(P.TEXTURE0),f.imageManager.bind(f.context));const xe=s.getCrossfadeParameters();for(const be of le){const re=h?be.posMatrix:f.transform.calculatePosMatrix(be.toUnwrapped()),Me=N?dc(re,b,f,N,{tileID:be,tileSize:z},xe):fo(re,b,m),ke=f.style.terrain&&f.style.terrain.getTerrainData(be);X.draw(k,P.TRIANGLES,Q,H,K,Mn.disabled,Me,ke,s.id,f.tileExtentBuffer,f.quadTriangleIndexBuffer,f.tileExtentSegments)}},debug:function(f,n,s){for(let h=0;h<s.length;h++)_l(f,n,s[h])},custom:function(f,n,s){const h=f.context,m=s.implementation;if(f.renderPass==="offscreen"){const b=m.prerender;b&&(f.setCustomLayerDefaults(),h.setColorMode(f.colorModeForRenderPass()),b.call(m,h.gl,f.transform.customLayerMatrix()),h.setDirty(),f.setBaseState())}else if(f.renderPass==="translucent"){f.setCustomLayerDefaults(),h.setColorMode(f.colorModeForRenderPass()),h.setStencilMode(Dn.disabled);const b=m.renderingMode==="3d"?new yt(f.context.gl.LEQUAL,yt.ReadWrite,f.depthRangeFor3D):f.depthModeForSublayer(0,yt.ReadOnly);h.setDepthMode(b),m.render(h.gl,f.transform.customLayerMatrix()),h.setDirty(),f.setBaseState(),h.bindFramebuffer.set(null)}}};class Ec{constructor(n,s){this.context=new _c(n),this.transform=s,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:c.create(),renderTime:0},this.setup(),this.numSublayers=Ft.maxUnderzooming+Ft.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new qt,this.gpuTimers={}}resize(n,s,h){if(this.width=n*h,this.height=s*h,this.pixelRatio=h,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style._order)this.style._layers[m].resize()}setup(){const n=this.context,s=new c.PosArray;s.emplaceBack(0,0),s.emplaceBack(c.EXTENT,0),s.emplaceBack(0,c.EXTENT),s.emplaceBack(c.EXTENT,c.EXTENT),this.tileExtentBuffer=n.createVertexBuffer(s,Wt.members),this.tileExtentSegments=c.SegmentVector.simpleSegment(0,0,4,2);const h=new c.PosArray;h.emplaceBack(0,0),h.emplaceBack(c.EXTENT,0),h.emplaceBack(0,c.EXTENT),h.emplaceBack(c.EXTENT,c.EXTENT),this.debugBuffer=n.createVertexBuffer(h,Wt.members),this.debugSegments=c.SegmentVector.simpleSegment(0,0,4,5);const m=new c.RasterBoundsArray;m.emplaceBack(0,0,0,0),m.emplaceBack(c.EXTENT,0,c.EXTENT,0),m.emplaceBack(0,c.EXTENT,0,c.EXTENT),m.emplaceBack(c.EXTENT,c.EXTENT,c.EXTENT,c.EXTENT),this.rasterBoundsBuffer=n.createVertexBuffer(m,We.members),this.rasterBoundsSegments=c.SegmentVector.simpleSegment(0,0,4,2);const b=new c.PosArray;b.emplaceBack(0,0),b.emplaceBack(1,0),b.emplaceBack(0,1),b.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(b,Wt.members),this.viewportSegments=c.SegmentVector.simpleSegment(0,0,4,2);const k=new c.LineStripIndexArray;k.emplaceBack(0),k.emplaceBack(1),k.emplaceBack(3),k.emplaceBack(2),k.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(k);const P=new c.TriangleIndexArray;P.emplaceBack(0,1,2),P.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(P),this.emptyTexture=new W(n,{width:1,height:1,data:new Uint8Array([0,0,0,0])},n.gl.RGBA);const I=this.context.gl;this.stencilClearMode=new Dn({func:I.ALWAYS,mask:0},0,255,I.ZERO,I.ZERO,I.ZERO)}clearStencil(){const n=this.context,s=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const h=c.create();c.ortho(h,0,this.width,this.height,0,0,1),c.scale(h,h,[s.drawingBufferWidth,s.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(n,s.TRIANGLES,yt.disabled,this.stencilClearMode,Un.disabled,Mn.disabled,fn(h),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(n,s){if(this.currentStencilSource===n.source||!n.isTileClipped()||!s||!s.length)return;this.currentStencilSource=n.source;const h=this.context,m=h.gl;this.nextStencilID+s.length>256&&this.clearStencil(),h.setColorMode(Un.disabled),h.setDepthMode(yt.disabled);const b=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const k of s){const P=this._tileClippingMaskIDs[k.key]=this.nextStencilID++,I=this.style.terrain&&this.style.terrain.getTerrainData(k);b.draw(h,m.TRIANGLES,yt.disabled,new Dn({func:m.ALWAYS,mask:0},P,255,m.KEEP,m.KEEP,m.REPLACE),Un.disabled,Mn.disabled,fn(k.posMatrix),I,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const n=this.nextStencilID++,s=this.context.gl;return new Dn({func:s.NOTEQUAL,mask:255},n,255,s.KEEP,s.KEEP,s.REPLACE)}stencilModeForClipping(n){const s=this.context.gl;return new Dn({func:s.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,s.KEEP,s.KEEP,s.REPLACE)}stencilConfigForOverlap(n){const s=this.context.gl,h=n.sort((k,P)=>P.overscaledZ-k.overscaledZ),m=h[h.length-1].overscaledZ,b=h[0].overscaledZ-m+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const k={};for(let P=0;P<b;P++)k[P+m]=new Dn({func:s.GEQUAL,mask:255},P+this.nextStencilID,255,s.KEEP,s.KEEP,s.REPLACE);return this.nextStencilID+=b,[k,h]}return[{[m]:Dn.disabled},h]}colorModeForRenderPass(){const n=this.context.gl;return this._showOverdrawInspector?new Un([n.CONSTANT_COLOR,n.ONE],new c.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Un.unblended:Un.alphaBlended}depthModeForSublayer(n,s,h){if(!this.opaquePassEnabledForLayer())return yt.disabled;const m=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new yt(h||this.context.gl.LEQUAL,s,[m,m])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(n,s){this.style=n,this.options=s,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(c.exported.now()),this.imageManager.beginFrame();const h=this.style._order,m=this.style.sourceCaches,b=this.style.terrain&&new wl(this);for(const z in m){const N=m[z];N.used&&N.prepare(this.context)}const k={},P={},I={};for(const z in m){const N=m[z];k[z]=N.getVisibleCoordinates(),P[z]=k[z].slice().reverse(),I[z]=N.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let z=0;z<h.length;z++)if(this.style._layers[h[z]].is3D()){this.opaquePassCutoff=z;break}if(b){this.opaquePassCutoff=0;const z=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!c.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||z.length)&&(c.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(N,U){const H=N.context,Q=H.gl,K=Un.unblended,X=new yt(Q.LEQUAL,yt.ReadWrite,[0,1]),le=U.getTerrainMesh(),xe=U.sourceCache.getRenderableTiles(),be=N.useProgram("terrainDepth");H.bindFramebuffer.set(U.getFramebuffer("depth").framebuffer),H.viewport.set([0,0,N.width/devicePixelRatio,N.height/devicePixelRatio]),H.clear({color:c.Color.transparent,depth:1});for(const re of xe){const Me=U.getTerrainData(re.tileID),ke=N.transform.calculatePosMatrix(re.tileID.toUnwrapped());be.draw(H,Q.TRIANGLES,X,Dn.disabled,K,Mn.backCCW,{u_matrix:ke},Me,"terrain",le.vertexBuffer,le.indexBuffer,le.segments)}H.bindFramebuffer.set(null),H.viewport.set([0,0,N.width,N.height])}(this,this.style.terrain),function(N,U){const H=N.context,Q=H.gl,K=Un.unblended,X=new yt(Q.LEQUAL,yt.ReadWrite,[0,1]),le=U.getTerrainMesh(),xe=U.getCoordsTexture(),be=U.sourceCache.getRenderableTiles(),re=N.useProgram("terrainCoords");H.bindFramebuffer.set(U.getFramebuffer("coords").framebuffer),H.viewport.set([0,0,N.width/devicePixelRatio,N.height/devicePixelRatio]),H.clear({color:c.Color.transparent,depth:1}),U.coordsIndex=[];for(const Me of be){const ke=U.getTerrainData(Me.tileID);H.activeTexture.set(Q.TEXTURE0),Q.bindTexture(Q.TEXTURE_2D,xe.texture);const Pe=N.transform.calculatePosMatrix(Me.tileID.toUnwrapped());re.draw(H,Q.TRIANGLES,X,Dn.disabled,K,Mn.backCCW,{u_matrix:Pe,u_terrain_coords_id:(255-U.coordsIndex.length)/255,u_texture:0},ke,"terrain",le.vertexBuffer,le.indexBuffer,le.segments),U.coordsIndex.push(Me.tileID.key)}H.bindFramebuffer.set(null),H.viewport.set([0,0,N.width,N.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const z of h){const N=this.style._layers[z];if(!N.hasOffscreenPass()||N.isHidden(this.transform.zoom))continue;const U=P[N.source];(N.type==="custom"||U.length)&&this.renderLayer(this,m[N.source],N,U)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:s.showOverdrawInspector?c.Color.black:c.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=s.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],!b)for(this.renderPass="opaque",this.currentLayer=h.length-1;this.currentLayer>=0;this.currentLayer--){const z=this.style._layers[h[this.currentLayer]],N=m[z.source],U=k[z.source];this._renderTileClippingMasks(z,U),this.renderLayer(this,N,z,U)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<h.length;this.currentLayer++){const z=this.style._layers[h[this.currentLayer]],N=m[z.source];if(b&&b.renderLayer(z))continue;const U=(z.type==="symbol"?I:P)[z.source];this._renderTileClippingMasks(z,k[z.source]),this.renderLayer(this,N,z,U)}if(this.options.showTileBoundaries){let z,N;Object.values(this.style._layers).forEach(U=>{U.source&&!U.isHidden(this.transform.zoom)&&(U.source!==(N&&N.id)&&(N=this.style.sourceCaches[U.source]),(!z||z.getSource().maxzoom<N.getSource().maxzoom)&&(z=N))}),z&&bl.debug(this,z,z.getVisibleCoordinates())}this.options.showPadding&&function(z){const N=z.transform.padding;zs(z,z.transform.height-(N.top||0),3,wi),zs(z,N.bottom||0,3,xl),Sa(z,N.left||0,3,ts),Sa(z,z.transform.width-(N.right||0),3,vu);const U=z.transform.centerPoint;(function(H,Q,K,X){Ea(H,Q-1,K-10,2,20,X),Ea(H,Q-10,K-1,20,2,X)})(z,U.x,z.transform.height-U.y,ns)}(this),this.context.setDefault()}renderLayer(n,s,h,m){h.isHidden(this.transform.zoom)||(h.type==="background"||h.type==="custom"||(m||[]).length)&&(this.id=h.id,this.gpuTimingStart(h),bl[h.type](n,s,h,m,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(n){if(!this.options.gpuTiming)return;const s=this.context.extTimerQuery;let h=this.gpuTimers[n.id];h||(h=this.gpuTimers[n.id]={calls:0,cpuTime:0,query:s.createQueryEXT()}),h.calls++,s.beginQueryEXT(s.TIME_ELAPSED_EXT,h.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const n=this.context.extTimerQuery;n.endQueryEXT(n.TIME_ELAPSED_EXT)}collectGpuTimers(){const n=this.gpuTimers;return this.gpuTimers={},n}queryGpuTimers(n){const s={};for(const h in n){const m=n[h],b=this.context.extTimerQuery,k=b.getQueryObjectEXT(m.query,b.QUERY_RESULT_EXT)/1e6;b.deleteQueryEXT(m.query),s[h]=k}return s}translatePosMatrix(n,s,h,m,b){if(!h[0]&&!h[1])return n;const k=b?m==="map"?this.transform.angle:0:m==="viewport"?-this.transform.angle:0;if(k){const z=Math.sin(k),N=Math.cos(k);h=[h[0]*N-h[1]*z,h[0]*z+h[1]*N]}const P=[b?h[0]:$t(s,h[0],this.transform.zoom),b?h[1]:$t(s,h[1],this.transform.zoom),0],I=new Float32Array(16);return c.translate(I,n,P),I}saveTileTexture(n){const s=this._tileTextures[n.size[0]];s?s.push(n):this._tileTextures[n.size[0]]=[n]}getTileTexture(n){const s=this._tileTextures[n];return s&&s.length>0?s.pop():null}isPatternMissing(n){if(!n)return!1;if(!n.from||!n.to)return!0;const s=this.imageManager.getPattern(n.from.toString()),h=this.imageManager.getPattern(n.to.toString());return!s||!h}useProgram(n,s){this.cache=this.cache||{};const h=n+(s?s.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[h]||(this.cache[h]=new al(this.context,n,ca[n],s,ul[n],this._showOverdrawInspector,this.style.terrain)),this.cache[h]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new W(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class Ta{constructor(n,s){this.points=n,this.planes=s}static fromInvProjectionMatrix(n,s,h){const m=Math.pow(2,h),b=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(P=>{const I=1/(P=c.transformMat4([],P,n))[3]/s*m;return c.mul$1(P,P,[I,I,1/P[3],I])}),k=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(P=>{const I=c.sub([],b[P[0]],b[P[1]]),z=c.sub([],b[P[2]],b[P[1]]),N=c.normalize([],c.cross([],I,z)),U=-c.dot(N,b[P[1]]);return N.concat(U)});return new Ta(b,k)}}class bi{constructor(n,s){this.min=n,this.max=s,this.center=c.scale$1([],c.add([],this.min,this.max),.5)}quadrant(n){const s=[n%2==0,n<2],h=c.clone$2(this.min),m=c.clone$2(this.max);for(let b=0;b<s.length;b++)h[b]=s[b]?this.min[b]:this.center[b],m[b]=s[b]?this.center[b]:this.max[b];return m[2]=this.max[2],new bi(h,m)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}intersects(n){const s=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let h=!0;for(let m=0;m<n.planes.length;m++){const b=n.planes[m];let k=0;for(let P=0;P<s.length;P++)c.dot$1(b,s[P])>=0&&k++;if(k===0)return 0;k!==s.length&&(h=!1)}if(h)return 2;for(let m=0;m<3;m++){let b=Number.MAX_VALUE,k=-Number.MAX_VALUE;for(let P=0;P<n.points.length;P++){const I=n.points[P][m]-this.min[m];b=Math.min(b,I),k=Math.max(k,I)}if(k<0||b>this.max[m]-this.min[m])return 0}return 1}}class Ji{constructor(n=0,s=0,h=0,m=0){if(isNaN(n)||n<0||isNaN(s)||s<0||isNaN(h)||h<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=s,this.left=h,this.right=m}interpolate(n,s,h){return s.top!=null&&n.top!=null&&(this.top=c.number(n.top,s.top,h)),s.bottom!=null&&n.bottom!=null&&(this.bottom=c.number(n.bottom,s.bottom,h)),s.left!=null&&n.left!=null&&(this.left=c.number(n.left,s.left,h)),s.right!=null&&n.right!=null&&(this.right=c.number(n.right,s.right,h)),this}getCenter(n,s){const h=c.clamp((this.left+n-this.right)/2,0,n),m=c.clamp((this.top+s-this.bottom)/2,0,s);return new c.pointGeometry(h,m)}equals(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right}clone(){return new Ji(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Sl{constructor(n,s,h,m,b){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=b===void 0||!!b,this._minZoom=n||0,this._maxZoom=s||22,this._minPitch=h??0,this._maxPitch=m??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new c.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ji,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const n=new Sl(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return n.tileSize=this.tileSize,n.latRange=this.latRange,n.width=this.width,n.height=this.height,n._center=this._center,n._elevation=this._elevation,n.zoom=this.zoom,n.angle=this.angle,n._fov=this._fov,n._pitch=this._pitch,n._unmodified=this._unmodified,n._edgeInsets=this._edgeInsets.clone(),n._calcMatrices(),n}get minZoom(){return this._minZoom}set minZoom(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))}get maxZoom(){return this._maxZoom}set maxZoom(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))}get minPitch(){return this._minPitch}set minPitch(n){this._minPitch!==n&&(this._minPitch=n,this.pitch=Math.max(this.pitch,n))}get maxPitch(){return this._maxPitch}set maxPitch(n){this._maxPitch!==n&&(this._maxPitch=n,this.pitch=Math.min(this.pitch,n))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new c.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(n){const s=-c.wrap(n,-180,180)*Math.PI/180;var h;this.angle!==s&&(this._unmodified=!1,this.angle=s,this._calcMatrices(),this.rotationMatrix=(h=new c.ARRAY_TYPE(4),c.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0),h[0]=1,h[3]=1,h),function(m,b,k){var P=b[0],I=b[1],z=b[2],N=b[3],U=Math.sin(k),H=Math.cos(k);m[0]=P*H+z*U,m[1]=I*H+N*U,m[2]=P*-U+z*H,m[3]=I*-U+N*H}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(n){const s=c.clamp(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==s&&(this._unmodified=!1,this._pitch=s,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=n/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(n){const s=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==s&&(this._unmodified=!1,this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(n){n!==this._elevation&&(this._elevation=n,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(n){return this._edgeInsets.equals(n)}interpolatePadding(n,s,h){this._unmodified=!1,this._edgeInsets.interpolate(n,s,h),this._constrain(),this._calcMatrices()}coveringZoomLevel(n){const s=(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize));return Math.max(0,s)}getVisibleUnwrappedCoordinates(n){const s=[new c.UnwrappedTileID(0,n)];if(this._renderWorldCopies){const h=this.pointCoordinate(new c.pointGeometry(0,0)),m=this.pointCoordinate(new c.pointGeometry(this.width,0)),b=this.pointCoordinate(new c.pointGeometry(this.width,this.height)),k=this.pointCoordinate(new c.pointGeometry(0,this.height)),P=Math.floor(Math.min(h.x,m.x,b.x,k.x)),I=Math.floor(Math.max(h.x,m.x,b.x,k.x)),z=1;for(let N=P-z;N<=I+z;N++)N!==0&&s.push(new c.UnwrappedTileID(N,n))}return s}coveringTiles(n){var s,h;let m=this.coveringZoomLevel(n);const b=m;if(n.minzoom!==void 0&&m<n.minzoom)return[];n.maxzoom!==void 0&&m>n.maxzoom&&(m=n.maxzoom);const k=this.pointCoordinate(this.getCameraPoint()),P=c.MercatorCoordinate.fromLngLat(this.center),I=Math.pow(2,m),z=[I*k.x,I*k.y,0],N=[I*P.x,I*P.y,0],U=Ta.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,m);let H=n.minzoom||0;!n.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(H=m);const Q=n.terrain?2/Math.min(this.tileSize,n.tileSize)*this.tileSize:3,K=re=>({aabb:new bi([re*I,0,0],[(re+1)*I,I,0]),zoom:0,x:0,y:0,wrap:re,fullyVisible:!1}),X=[],le=[],xe=m,be=n.reparseOverscaled?b:m;if(this._renderWorldCopies)for(let re=1;re<=3;re++)X.push(K(-re)),X.push(K(re));for(X.push(K(0));X.length>0;){const re=X.pop(),Me=re.x,ke=re.y;let Pe=re.fullyVisible;if(!Pe){const st=re.aabb.intersects(U);if(st===0)continue;Pe=st===2}const De=n.terrain?z:N,Ge=re.aabb.distanceX(De),ze=re.aabb.distanceY(De),lt=Math.max(Math.abs(Ge),Math.abs(ze)),nt=Q+(1<<xe-re.zoom)-2;if(re.zoom===xe||lt>nt&&re.zoom>=H){const st=xe-re.zoom,jt=z[0]-.5-(Me<<st),Gt=z[1]-.5-(ke<<st);le.push({tileID:new c.OverscaledTileID(re.zoom===xe?be:re.zoom,re.wrap,re.zoom,Me,ke),distanceSq:c.sqrLen([N[0]-.5-Me,N[1]-.5-ke]),tileDistanceToCamera:Math.sqrt(jt*jt+Gt*Gt)})}else for(let st=0;st<4;st++){const jt=(Me<<1)+st%2,Gt=(ke<<1)+(st>>1),Et=re.zoom+1;let xn=re.aabb.quadrant(st);if(n.terrain){const nn=new c.OverscaledTileID(Et,re.wrap,Et,jt,Gt),Qt=n.terrain.getMinMaxElevation(nn),en=(s=Qt.minElevation)!==null&&s!==void 0?s:this.elevation,rn=(h=Qt.maxElevation)!==null&&h!==void 0?h:this.elevation;xn=new bi([xn.min[0],xn.min[1],en],[xn.max[0],xn.max[1],rn])}X.push({aabb:xn,zoom:Et,x:jt,y:Gt,wrap:re.wrap,fullyVisible:Pe})}}return le.sort((re,Me)=>re.distanceSq-Me.distanceSq).map(re=>re.tileID)}resize(n,s){this.width=n,this.height=s,this.pixelsToGLUnits=[2/n,-2/s],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(n){return Math.pow(2,n)}scaleZoom(n){return Math.log(n)/Math.LN2}project(n){const s=c.clamp(n.lat,-this.maxValidLatitude,this.maxValidLatitude);return new c.pointGeometry(c.mercatorXfromLng(n.lng)*this.worldSize,c.mercatorYfromLat(s)*this.worldSize)}unproject(n){return new c.MercatorCoordinate(n.x/this.worldSize,n.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(n){this.freezeElevation||(this.elevation=n?this.getElevation(this._center,n):0)}getElevation(n,s){const h=c.MercatorCoordinate.fromLngLat(n),m=(1<<this.tileZoom)*c.EXTENT,b=h.x*m,k=h.y*m,P=Math.floor(b/c.EXTENT),I=Math.floor(k/c.EXTENT),z=new c.OverscaledTileID(this.tileZoom,0,this.tileZoom,P,I);return s.getElevation(z,b%c.EXTENT,k%c.EXTENT,c.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(n){const s=this.pointLocation(this.centerPoint,n),h=this.getElevation(s,n);if(!(this.elevation-h))return;const m=this.getCameraPosition(),b=c.MercatorCoordinate.fromLngLat(m.lngLat,m.altitude),k=c.MercatorCoordinate.fromLngLat(s,h),P=b.x-k.x,I=b.y-k.y,z=b.z-k.z,N=Math.sqrt(P*P+I*I+z*z),U=this.scaleZoom(this.cameraToCenterDistance/N/this.tileSize);this._elevation=h,this._center=s,this.zoom=U}setLocationAtPoint(n,s){const h=this.pointCoordinate(s),m=this.pointCoordinate(this.centerPoint),b=this.locationCoordinate(n),k=new c.MercatorCoordinate(b.x-(h.x-m.x),b.y-(h.y-m.y));this.center=this.coordinateLocation(k),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(n,s){return s?this.coordinatePoint(this.locationCoordinate(n),this.getElevation(n,s),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(n))}pointLocation(n,s){return this.coordinateLocation(this.pointCoordinate(n,s))}locationCoordinate(n){return c.MercatorCoordinate.fromLngLat(n)}coordinateLocation(n){return n&&n.toLngLat()}pointCoordinate(n,s){if(s){const H=s.pointCoordinate(n);if(H!=null)return H}const h=[n.x,n.y,0,1],m=[n.x,n.y,1,1];c.transformMat4(h,h,this.pixelMatrixInverse),c.transformMat4(m,m,this.pixelMatrixInverse);const b=h[3],k=m[3],P=h[1]/b,I=m[1]/k,z=h[2]/b,N=m[2]/k,U=z===N?0:(0-z)/(N-z);return new c.MercatorCoordinate(c.number(h[0]/b,m[0]/k,U)/this.worldSize,c.number(P,I,U)/this.worldSize)}coordinatePoint(n,s=0,h=this.pixelMatrix){const m=[n.x*this.worldSize,n.y*this.worldSize,s,1];return c.transformMat4(m,m,h),new c.pointGeometry(m[0]/m[3],m[1]/m[3])}getBounds(){const n=Math.max(0,this.height/2-this.getHorizon());return new c.LngLatBounds().extend(this.pointLocation(new c.pointGeometry(0,n))).extend(this.pointLocation(new c.pointGeometry(this.width,n))).extend(this.pointLocation(new c.pointGeometry(this.width,this.height))).extend(this.pointLocation(new c.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new c.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(n){n?(this.lngRange=[n.getWest(),n.getEast()],this.latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(n,s=!1){const h=n.key,m=s?this._alignedPosMatrixCache:this._posMatrixCache;if(m[h])return m[h];const b=n.canonical,k=this.worldSize/this.zoomScale(b.z),P=b.x+Math.pow(2,b.z)*n.wrap,I=c.identity(new Float64Array(16));return c.translate(I,I,[P*k,b.y*k,0]),c.scale(I,I,[k/c.EXTENT,k/c.EXTENT,1]),c.multiply(I,s?this.alignedProjMatrix:this.projMatrix,I),m[h]=new Float32Array(I),m[h]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let n,s,h,m,b=-90,k=90,P=-180,I=180;const z=this.size,N=this._unmodified;if(this.latRange){const Q=this.latRange;b=c.mercatorYfromLat(Q[1])*this.worldSize,k=c.mercatorYfromLat(Q[0])*this.worldSize,n=k-b<z.y?z.y/(k-b):0}if(this.lngRange){const Q=this.lngRange;P=c.wrap(c.mercatorXfromLng(Q[0])*this.worldSize,0,this.worldSize),I=c.wrap(c.mercatorXfromLng(Q[1])*this.worldSize,0,this.worldSize),I<P&&(I+=this.worldSize),s=I-P<z.x?z.x/(I-P):0}const U=this.point,H=Math.max(s||0,n||0);if(H)return this.center=this.unproject(new c.pointGeometry(s?(I+P)/2:U.x,n?(k+b)/2:U.y)),this.zoom+=this.scaleZoom(H),this._unmodified=N,void(this._constraining=!1);if(this.latRange){const Q=U.y,K=z.y/2;Q-K<b&&(m=b+K),Q+K>k&&(m=k-K)}if(this.lngRange){const Q=(P+I)/2,K=c.wrap(U.x,Q-this.worldSize/2,Q+this.worldSize/2),X=z.x/2;K-X<P&&(h=P+X),K+X>I&&(h=I-X)}h===void 0&&m===void 0||(this.center=this.unproject(new c.pointGeometry(h!==void 0?h:U.x,m!==void 0?m:U.y)).wrap()),this._unmodified=N,this._constraining=!1}_calcMatrices(){if(!this.height)return;const n=this.centerOffset,s=this.point.x,h=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=c.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let m=c.identity(new Float64Array(16));c.scale(m,m,[this.width/2,-this.height/2,1]),c.translate(m,m,[1,-1,0]),this.labelPlaneMatrix=m,m=c.identity(new Float64Array(16)),c.scale(m,m,[1,-1,1]),c.translate(m,m,[-1,-1,0]),c.scale(m,m,[2/this.width,2/this.height,1]),this.glCoordMatrix=m,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const b=Math.PI/2+this._pitch,k=this._fov*(.5+n.y/this.height),P=Math.sin(k)*this.cameraToSeaLevelDistance/Math.sin(c.clamp(Math.PI-b-k,.01,Math.PI-.01)),I=this.getHorizon(),z=2*Math.atan(I/this.cameraToCenterDistance)*(.5+n.y/(2*I)),N=Math.sin(z)*this.cameraToSeaLevelDistance/Math.sin(c.clamp(Math.PI-b-z,.01,Math.PI-.01)),U=Math.cos(Math.PI/2-this._pitch)*P+this.cameraToSeaLevelDistance,H=Math.cos(Math.PI/2-this._pitch)*N+this.cameraToSeaLevelDistance,Q=1.01*Math.min(U,H),K=this.height/50;m=new Float64Array(16),c.perspective(m,this._fov,this.width/this.height,K,Q),m[8]=2*-n.x/this.width,m[9]=2*n.y/this.height,c.scale(m,m,[1,-1,1]),c.translate(m,m,[0,0,-this.cameraToCenterDistance]),c.rotateX(m,m,this._pitch),c.rotateZ(m,m,this.angle),c.translate(m,m,[-s,-h,0]),this.mercatorMatrix=c.scale([],m,[this.worldSize,this.worldSize,this.worldSize]),c.scale(m,m,[1,1,this._pixelPerMeter]),this.pixelMatrix=c.multiply(new Float64Array(16),this.labelPlaneMatrix,m),c.translate(m,m,[0,0,-this.elevation]),this.projMatrix=m,this.invProjMatrix=c.invert([],m),this.pixelMatrix3D=c.multiply(new Float64Array(16),this.labelPlaneMatrix,m);const X=this.width%2/2,le=this.height%2/2,xe=Math.cos(this.angle),be=Math.sin(this.angle),re=s-Math.round(s)+xe*X+be*le,Me=h-Math.round(h)+xe*le+be*X,ke=new Float64Array(m);if(c.translate(ke,ke,[re>.5?re-1:re,Me>.5?Me-1:Me,0]),this.alignedProjMatrix=ke,m=c.invert(new Float64Array(16),this.pixelMatrix),!m)throw new Error("failed to invert matrix");this.pixelMatrixInverse=m,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const n=this.pointCoordinate(new c.pointGeometry(0,0)),s=[n.x*this.worldSize,n.y*this.worldSize,0,1];return c.transformMat4(s,s,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.pointGeometry(0,n))}getCameraQueryGeometry(n){const s=this.getCameraPoint();if(n.length===1)return[n[0],s];{let h=s.x,m=s.y,b=s.x,k=s.y;for(const P of n)h=Math.min(h,P.x),m=Math.min(m,P.y),b=Math.max(b,P.x),k=Math.max(k,P.y);return[new c.pointGeometry(h,m),new c.pointGeometry(b,m),new c.pointGeometry(b,k),new c.pointGeometry(h,k),new c.pointGeometry(h,m)]}}}class ka{constructor(n){this._hashName=n&&encodeURIComponent(n),c.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(s,h){let m=!1,b=null;const k=()=>{b=null,m&&(s(),b=setTimeout(k,300),m=!1)};return()=>(m=!0,b||k(),b)}(this._updateHashUnthrottled.bind(this))}addTo(n){return this._map=n,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(n){const s=this._map.getCenter(),h=Math.round(100*this._map.getZoom())/100,m=Math.ceil((h*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,m),k=Math.round(s.lng*b)/b,P=Math.round(s.lat*b)/b,I=this._map.getBearing(),z=this._map.getPitch();let N="";if(N+=n?`/${k}/${P}/${h}`:`${h}/${P}/${k}`,(I||z)&&(N+="/"+Math.round(10*I)/10),z&&(N+=`/${Math.round(z)}`),this._hashName){const U=this._hashName;let H=!1;const Q=window.location.hash.slice(1).split("&").map(K=>{const X=K.split("=")[0];return X===U?(H=!0,`${X}=${N}`):K}).filter(K=>K);return H||Q.push(`${U}=${N}`),`#${Q.join("&")}`}return`#${N}`}_getCurrentHash(){const n=window.location.hash.replace("#","");if(this._hashName){let s;return n.split("&").map(h=>h.split("=")).forEach(h=>{h[0]===this._hashName&&(s=h)}),(s&&s[1]||"").split("/")}return n.split("/")}_onHashChange(){const n=this._getCurrentHash();if(n.length>=3&&!n.some(s=>isNaN(s))){const s=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(n[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+n[2],+n[1]],zoom:+n[0],bearing:s,pitch:+(n[4]||0)}),!0}return!1}_updateHashUnthrottled(){const n=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,n)}catch{}}}const Ma={linearity:.3,easing:c.bezier(0,0,.3,1)},Tc=c.extend({deceleration:2500,maxSpeed:1400},Ma),El=c.extend({deceleration:20,maxSpeed:1400},Ma),yo=c.extend({deceleration:1e3,maxSpeed:360},Ma),kc=c.extend({deceleration:1e3,maxSpeed:90},Ma);class Mc{constructor(n){this._map=n,this.clear()}clear(){this._inertiaBuffer=[]}record(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:c.exported.now(),settings:n})}_drainInertiaBuffer(){const n=this._inertiaBuffer,s=c.exported.now();for(;n.length>0&&s-n[0].time>160;)n.shift()}_onMoveEnd(n){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const s={zoom:0,bearing:0,pitch:0,pan:new c.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)s.zoom+=b.zoomDelta||0,s.bearing+=b.bearingDelta||0,s.pitch+=b.pitchDelta||0,b.panDelta&&s.pan._add(b.panDelta),b.around&&(s.around=b.around),b.pinchAround&&(s.pinchAround=b.pinchAround);const h=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(s.pan.mag()){const b=Ca(s.pan.mag(),h,c.extend({},Tc,n||{}));m.offset=s.pan.mult(b.amount/s.pan.mag()),m.center=this._map.transform.center,Rs(m,b)}if(s.zoom){const b=Ca(s.zoom,h,El);m.zoom=this._map.transform.zoom+b.amount,Rs(m,b)}if(s.bearing){const b=Ca(s.bearing,h,yo);m.bearing=this._map.transform.bearing+c.clamp(b.amount,-179,179),Rs(m,b)}if(s.pitch){const b=Ca(s.pitch,h,kc);m.pitch=this._map.transform.pitch+b.amount,Rs(m,b)}if(m.zoom||m.bearing){const b=s.pinchAround===void 0?s.around:s.pinchAround;m.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),c.extend(m,{noMoveStart:!0})}}function Rs(f,n){(!f.duration||f.duration<n.duration)&&(f.duration=n.duration,f.easing=n.easing)}function Ca(f,n,s){const{maxSpeed:h,linearity:m,deceleration:b}=s,k=c.clamp(f*m/(n/1e3),-h,h),P=Math.abs(k)/(b*m);return{easing:s.easing,duration:1e3*P,amount:k*(P/2)}}class Qr extends c.Event{constructor(n,s,h,m={}){const b=F.mousePos(s.getCanvasContainer(),h),k=s.unproject(b);super(n,c.extend({point:b,lngLat:k,originalEvent:h},m)),this._defaultPrevented=!1,this.target=s}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Tr extends c.Event{constructor(n,s,h){const m=n==="touchend"?h.changedTouches:h.touches,b=F.touchPos(s.getCanvasContainer(),m),k=b.map(I=>s.unproject(I)),P=b.reduce((I,z,N,U)=>I.add(z.div(U.length)),new c.pointGeometry(0,0));super(n,{points:b,point:P,lngLats:k,lngLat:s.unproject(P),originalEvent:h}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class mh extends c.Event{constructor(n,s,h){super(n,{originalEvent:h}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class vo{constructor(n,s){this._map=n,this._clickTolerance=s.clickTolerance}reset(){delete this._mousedownPos}wheel(n){return this._firePreventable(new mh(n.type,this._map,n))}mousedown(n,s){return this._mousedownPos=s,this._firePreventable(new Qr(n.type,this._map,n))}mouseup(n){this._map.fire(new Qr(n.type,this._map,n))}click(n,s){this._mousedownPos&&this._mousedownPos.dist(s)>=this._clickTolerance||this._map.fire(new Qr(n.type,this._map,n))}dblclick(n){return this._firePreventable(new Qr(n.type,this._map,n))}mouseover(n){this._map.fire(new Qr(n.type,this._map,n))}mouseout(n){this._map.fire(new Qr(n.type,this._map,n))}touchstart(n){return this._firePreventable(new Tr(n.type,this._map,n))}touchmove(n){this._map.fire(new Tr(n.type,this._map,n))}touchend(n){this._map.fire(new Tr(n.type,this._map,n))}touchcancel(n){this._map.fire(new Tr(n.type,this._map,n))}_firePreventable(n){if(this._map.fire(n),n.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class li{constructor(n){this._map=n}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(n){this._map.fire(new Qr(n.type,this._map,n))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Qr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(n){this._delayContextMenu?this._contextMenuEvent=n:this._ignoreContextMenu||this._map.fire(new Qr(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Si{constructor(n,s){this._map=n,this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=s.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(n,s){this.isEnabled()&&n.shiftKey&&n.button===0&&(F.disableDrag(),this._startPos=this._lastPos=s,this._active=!0)}mousemoveWindow(n,s){if(!this._active)return;const h=s;if(this._lastPos.equals(h)||!this._box&&h.dist(this._startPos)<this._clickTolerance)return;const m=this._startPos;this._lastPos=h,this._box||(this._box=F.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",n));const b=Math.min(m.x,h.x),k=Math.max(m.x,h.x),P=Math.min(m.y,h.y),I=Math.max(m.y,h.y);F.setTransform(this._box,`translate(${b}px,${P}px)`),this._box.style.width=k-b+"px",this._box.style.height=I-P+"px"}mouseupWindow(n,s){if(!this._active||n.button!==0)return;const h=this._startPos,m=s;if(this.reset(),F.suppressClick(),h.x!==m.x||h.y!==m.y)return this._map.fire(new c.Event("boxzoomend",{originalEvent:n})),{cameraAnimation:b=>b.fitScreenCoordinates(h,m,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",n)}keydown(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(F.remove(this._box),this._box=null),F.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(n,s){return this._map.fire(new c.Event(n,{originalEvent:s}))}}function xo(f,n){if(f.length!==n.length)throw new Error(`The number of touches and points are not equal - touches ${f.length}, points ${n.length}`);const s={};for(let h=0;h<f.length;h++)s[f[h].identifier]=n[h];return s}class xu{constructor(n){this.reset(),this.numTouches=n.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(n,s,h){(this.centroid||h.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),h.length===this.numTouches&&(this.centroid=function(m){const b=new c.pointGeometry(0,0);for(const k of m)b._add(k);return b.div(m.length)}(s),this.touches=xo(h,s)))}touchmove(n,s,h){if(this.aborted||!this.centroid)return;const m=xo(h,s);for(const b in this.touches){const k=this.touches[b],P=m[b];(!P||P.dist(k)>30)&&(this.aborted=!0)}}touchend(n,s,h){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),h.length===0){const m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class Tl{constructor(n){this.singleTap=new xu(n),this.numTaps=n.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(n,s,h){this.singleTap.touchstart(n,s,h)}touchmove(n,s,h){this.singleTap.touchmove(n,s,h)}touchend(n,s,h){const m=this.singleTap.touchend(n,s,h);if(m){const b=n.timeStamp-this.lastTime<500,k=!this.lastTap||this.lastTap.dist(m)<30;if(b&&k||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class _u{constructor(){this._zoomIn=new Tl({numTouches:1,numTaps:2}),this._zoomOut=new Tl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(n,s,h){this._zoomIn.touchstart(n,s,h),this._zoomOut.touchstart(n,s,h)}touchmove(n,s,h){this._zoomIn.touchmove(n,s,h),this._zoomOut.touchmove(n,s,h)}touchend(n,s,h){const m=this._zoomIn.touchend(n,s,h),b=this._zoomOut.touchend(n,s,h);return m?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:k.getZoom()+1,around:k.unproject(m)},{originalEvent:n})}):b?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:k.getZoom()-1,around:k.unproject(b)},{originalEvent:n})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const kl={0:1,2:2};class is{constructor(n){this.reset(),this._clickTolerance=n.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(n,s){return!1}_move(n,s){return{}}mousedown(n,s){if(this._lastPoint)return;const h=F.mouseButton(n);this._correctButton(n,h)&&(this._lastPoint=s,this._eventButton=h)}mousemoveWindow(n,s){const h=this._lastPoint;if(h){if(n.preventDefault(),function(m,b){const k=kl[b];return m.buttons===void 0||(m.buttons&k)!==k}(n,this._eventButton))this.reset();else if(this._moved||!(s.dist(h)<this._clickTolerance))return this._moved=!0,this._lastPoint=s,this._move(h,s)}}mouseupWindow(n){this._lastPoint&&F.mouseButton(n)===this._eventButton&&(this._moved&&F.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class _o extends is{mousedown(n,s){super.mousedown(n,s),this._lastPoint&&(this._active=!0)}_correctButton(n,s){return s===0&&!n.ctrlKey}_move(n,s){return{around:s,panDelta:s.sub(n)}}}class ut extends is{_correctButton(n,s){return s===0&&n.ctrlKey||s===2}_move(n,s){const h=.8*(s.x-n.x);if(h)return this._active=!0,{bearingDelta:h}}contextmenu(n){n.preventDefault()}}class Pa extends is{_correctButton(n,s){return s===0&&n.ctrlKey||s===2}_move(n,s){const h=-.5*(s.y-n.y);if(h)return this._active=!0,{pitchDelta:h}}contextmenu(n){n.preventDefault()}}class Yi{constructor(n,s){this._minTouches=n.cooperativeGestures?2:1,this._clickTolerance=n.clickTolerance||1,this._map=s,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new c.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(n,s,h){return this._calculateTransform(n,s,h)}touchmove(n,s,h){if(this._map._cooperativeGestures&&(this._minTouches===2&&h.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(n,!1,h.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(h.length<this._minTouches))return n.preventDefault(),this._calculateTransform(n,s,h)}touchend(n,s,h){this._calculateTransform(n,s,h),this._active&&h.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(n,s,h){h.length>0&&(this._active=!0);const m=xo(h,s),b=new c.pointGeometry(0,0),k=new c.pointGeometry(0,0);let P=0;for(const z in m){const N=m[z],U=this._touches[z];U&&(b._add(N),k._add(N.sub(U)),P++,m[z]=N)}if(this._touches=m,P<this._minTouches||!k.mag())return;const I=k.div(P);return this._sum._add(I),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(P),panDelta:I}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qi{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(n){}_move(n,s,h){return{}}touchstart(n,s,h){this._firstTwoTouches||h.length<2||(this._firstTwoTouches=[h[0].identifier,h[1].identifier],this._start([s[0],s[1]]))}touchmove(n,s,h){if(!this._firstTwoTouches)return;n.preventDefault();const[m,b]=this._firstTwoTouches,k=js(h,s,m),P=js(h,s,b);if(!k||!P)return;const I=this._aroundCenter?null:k.add(P).div(2);return this._move([k,P],I,n)}touchend(n,s,h){if(!this._firstTwoTouches)return;const[m,b]=this._firstTwoTouches,k=js(h,s,m),P=js(h,s,b);k&&P||(this._active&&F.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function js(f,n,s){for(let h=0;h<f.length;h++)if(f[h].identifier===s)return n[h]}function it(f,n){return Math.log(f/n)/Math.LN2}class wo extends Qi{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(n){this._startDistance=this._distance=n[0].dist(n[1])}_move(n,s){const h=this._distance;if(this._distance=n[0].dist(n[1]),this._active||!(Math.abs(it(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:it(this._distance,h),pinchAround:s}}}function Ml(f,n){return 180*f.angleWith(n)/Math.PI}class wu extends Qi{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(n){this._startVector=this._vector=n[0].sub(n[1]),this._minDiameter=n[0].dist(n[1])}_move(n,s){const h=this._vector;if(this._vector=n[0].sub(n[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ml(this._vector,h),pinchAround:s}}_isBelowThreshold(n){this._minDiameter=Math.min(this._minDiameter,n.mag());const s=25/(Math.PI*this._minDiameter)*360,h=Ml(n,this._startVector);return Math.abs(h)<s}}function bo(f){return Math.abs(f.y)>Math.abs(f.x)}class Cc extends Qi{constructor(n){super(),this._map=n}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(n,s,h){super.touchstart(n,s,h),this._currentTouchCount=h.length}_start(n){this._lastPoints=n,bo(n[0].sub(n[1]))&&(this._valid=!1)}_move(n,s,h){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const m=n[0].sub(this._lastPoints[0]),b=n[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,b,h.timeStamp),this._valid?(this._lastPoints=n,this._active=!0,{pitchDelta:(m.y+b.y)/2*-.5}):void 0}gestureBeginsVertically(n,s,h){if(this._valid!==void 0)return this._valid;const m=n.mag()>=2,b=s.mag()>=2;if(!m&&!b)return;if(!m||!b)return this._firstMove===void 0&&(this._firstMove=h),h-this._firstMove<100&&void 0;const k=n.y>0==s.y>0;return bo(n)&&bo(s)&&k}}const Pc={panStep:100,bearingStep:15,pitchStep:10};class bu{constructor(){const n=Pc;this._panStep=n.panStep,this._bearingStep=n.bearingStep,this._pitchStep=n.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(n){if(n.altKey||n.ctrlKey||n.metaKey)return;let s=0,h=0,m=0,b=0,k=0;switch(n.keyCode){case 61:case 107:case 171:case 187:s=1;break;case 189:case 109:case 173:s=-1;break;case 37:n.shiftKey?h=-1:(n.preventDefault(),b=-1);break;case 39:n.shiftKey?h=1:(n.preventDefault(),b=1);break;case 38:n.shiftKey?m=1:(n.preventDefault(),k=-1);break;case 40:n.shiftKey?m=-1:(n.preventDefault(),k=1);break;default:return}return this._rotationDisabled&&(h=0,m=0),{cameraAnimation:P=>{const I=P.getZoom();P.easeTo({duration:300,easeId:"keyboardHandler",easing:Su,zoom:s?Math.round(I)+s*(n.shiftKey?2:1):I,bearing:P.getBearing()+h*this._bearingStep,pitch:P.getPitch()+m*this._pitchStep,offset:[-b*this._panStep,-k*this._panStep],center:P.getCenter()},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Su(f){return f*(2-f)}const Ia=4.000244140625;class Cl{constructor(n,s){this._map=n,this._el=n.getCanvasContainer(),this._handler=s,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,c.bindAll(["_onTimeout"],this)}setZoomRate(n){this._defaultZoomRate=n}setWheelZoomRate(n){this._wheelZoomRate=n}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=n&&n.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(n){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;n.preventDefault()}let s=n.deltaMode===WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY;const h=c.exported.now(),m=h-(this._lastWheelEventTime||0);this._lastWheelEventTime=h,s!==0&&s%Ia==0?this._type="wheel":s!==0&&Math.abs(s)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=s,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(m*s)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,s+=this._lastValue)),n.shiftKey&&s&&(s/=4),this._type&&(this._lastWheelEvent=n,this._delta-=s,this._active||this._start(n)),n.preventDefault()}_onTimeout(n){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(n)}_start(n){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const s=F.mousePos(this._el,n);this._around=c.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(s)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const n=this._map.transform;if(this._delta!==0){const P=this._type==="wheel"&&Math.abs(this._delta)>Ia?this._wheelZoomRate:this._defaultZoomRate;let I=2/(1+Math.exp(-Math.abs(this._delta*P)));this._delta<0&&I!==0&&(I=1/I);const z=typeof this._targetZoom=="number"?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(z*I))),this._type==="wheel"&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const s=typeof this._targetZoom=="number"?this._targetZoom:n.zoom,h=this._startZoom,m=this._easing;let b,k=!1;if(this._type==="wheel"&&h&&m){const P=Math.min((c.exported.now()-this._lastWheelEventTime)/200,1),I=m(P);b=c.number(h,s,I),P<1?this._frameId||(this._frameId=!0):k=!0}else b=s,k=!0;return this._active=!0,k&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!k,zoomDelta:b-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(n){let s=c.ease;if(this._prevEase){const h=this._prevEase,m=(c.exported.now()-h.start)/h.duration,b=h.easing(m+.01)-h.easing(m),k=.27/Math.sqrt(b*b+1e-4)*.01,P=Math.sqrt(.0729-k*k);s=c.bezier(k,P,.25,1)}return this._prevEase={start:c.exported.now(),duration:n,easing:s},s}reset(){this._active=!1}}class Ni{constructor(n,s){this._clickZoom=n,this._tapZoom=s}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Aa{constructor(){this.reset()}reset(){this._active=!1}dblclick(n,s){return n.preventDefault(),{cameraAnimation:h=>{h.easeTo({duration:300,zoom:h.getZoom()+(n.shiftKey?-1:1),around:h.unproject(s)},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class kr{constructor(){this._tap=new Tl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(n,s,h){this._swipePoint||(this._tapTime&&n.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?h.length>0&&(this._swipePoint=s[0],this._swipeTouch=h[0].identifier):this._tap.touchstart(n,s,h))}touchmove(n,s,h){if(this._tapTime){if(this._swipePoint){if(h[0].identifier!==this._swipeTouch)return;const m=s[0],b=m.y-this._swipePoint.y;return this._swipePoint=m,n.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(n,s,h)}touchend(n,s,h){this._tapTime?this._swipePoint&&h.length===0&&this.reset():this._tap.touchend(n,s,h)&&(this._tapTime=n.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class So{constructor(n,s,h){this._el=n,this._mousePan=s,this._touchPan=h}enable(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Eu{constructor(n,s,h){this._pitchWithRotate=n.pitchWithRotate,this._mouseRotate=s,this._mousePitch=h}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class os{constructor(n,s,h,m){this._el=n,this._touchZoom=s,this._touchRotate=h,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ds=f=>f.zoom||f.drag||f.pitch||f.rotate;class Pl extends c.Event{}function La(f){return f.panDelta&&f.panDelta.mag()||f.zoomDelta||f.bearingDelta||f.pitchDelta}class hn{constructor(n,s){this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Mc(n),this._bearingSnap=s.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(s),c.bindAll(["handleEvent","handleWindowEvent"],this);const h=this._el;this._listeners=[[h,"touchstart",{passive:!0}],[h,"touchmove",{passive:!1}],[h,"touchend",void 0],[h,"touchcancel",void 0],[h,"mousedown",void 0],[h,"mousemove",void 0],[h,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[h,"mouseover",void 0],[h,"mouseout",void 0],[h,"dblclick",void 0],[h,"click",void 0],[h,"keydown",{capture:!1}],[h,"keyup",void 0],[h,"wheel",{passive:!1}],[h,"contextmenu",void 0],[window,"blur",void 0]];for(const[m,b,k]of this._listeners)F.addEventListener(m,b,m===document?this.handleWindowEvent:this.handleEvent,k)}destroy(){for(const[n,s,h]of this._listeners)F.removeEventListener(n,s,n===document?this.handleWindowEvent:this.handleEvent,h)}_addDefaultHandlers(n){const s=this._map,h=s.getCanvasContainer();this._add("mapEvent",new vo(s,n));const m=s.boxZoom=new Si(s,n);this._add("boxZoom",m);const b=new _u,k=new Aa;s.doubleClickZoom=new Ni(k,b),this._add("tapZoom",b),this._add("clickZoom",k);const P=new kr;this._add("tapDragZoom",P);const I=s.touchPitch=new Cc(s);this._add("touchPitch",I);const z=new ut(n),N=new Pa(n);s.dragRotate=new Eu(n,z,N),this._add("mouseRotate",z,["mousePitch"]),this._add("mousePitch",N,["mouseRotate"]);const U=new _o(n),H=new Yi(n,s);s.dragPan=new So(h,U,H),this._add("mousePan",U),this._add("touchPan",H,["touchZoom","touchRotate"]);const Q=new wu,K=new wo;s.touchZoomRotate=new os(h,K,Q,P),this._add("touchRotate",Q,["touchPan","touchZoom"]),this._add("touchZoom",K,["touchPan","touchRotate"]);const X=s.scrollZoom=new Cl(s,this);this._add("scrollZoom",X,["mousePan"]);const le=s.keyboard=new bu;this._add("keyboard",le),this._add("blockableMapEvent",new li(s));for(const xe of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])n.interactive&&n[xe]&&s[xe].enable(n[xe])}_add(n,s,h){this._handlers.push({handlerName:n,handler:s,allowed:h}),this._handlersById[n]=s}stop(n){if(!this._updatingCamera){for(const{handler:s}of this._handlers)s.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}}isActive(){for(const{handler:n}of this._handlers)if(n.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ds(this._eventsInProgress)||this.isZooming()}_blockedByActive(n,s,h){for(const m in n)if(m!==h&&(!s||s.indexOf(m)<0))return!0;return!1}handleWindowEvent(n){this.handleEvent(n,`${n.type}Window`)}_getMapTouches(n){const s=[];for(const h of n)this._el.contains(h.target)&&s.push(h);return s}handleEvent(n,s){if(n.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const h=n.type==="renderFrame"?void 0:n,m={needsRenderFrame:!1},b={},k={},P=n.touches,I=P?this._getMapTouches(P):void 0,z=I?F.touchPos(this._el,I):F.mousePos(this._el,n);for(const{handlerName:H,handler:Q,allowed:K}of this._handlers){if(!Q.isEnabled())continue;let X;this._blockedByActive(k,K,H)?Q.reset():Q[s||n.type]&&(X=Q[s||n.type](n,z,I),this.mergeHandlerResult(m,b,X,H,h),X&&X.needsRenderFrame&&this._triggerRenderFrame()),(X||Q.isActive())&&(k[H]=Q)}const N={};for(const H in this._previousActiveHandlers)k[H]||(N[H]=h);this._previousActiveHandlers=k,(Object.keys(N).length||La(m))&&(this._changes.push([m,b,N]),this._triggerRenderFrame()),(Object.keys(k).length||La(m))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:U}=m;U&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],U(this._map))}mergeHandlerResult(n,s,h,m,b){if(!h)return;c.extend(n,h);const k={handlerName:m,originalEvent:h.originalEvent||b};h.zoomDelta!==void 0&&(s.zoom=k),h.panDelta!==void 0&&(s.drag=k),h.pitchDelta!==void 0&&(s.pitch=k),h.bearingDelta!==void 0&&(s.rotate=k)}_applyChanges(){const n={},s={},h={};for(const[m,b,k]of this._changes)m.panDelta&&(n.panDelta=(n.panDelta||new c.pointGeometry(0,0))._add(m.panDelta)),m.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+m.pitchDelta),m.around!==void 0&&(n.around=m.around),m.pinchAround!==void 0&&(n.pinchAround=m.pinchAround),m.noInertia&&(n.noInertia=m.noInertia),c.extend(s,b),c.extend(h,k);this._updateMapTransform(n,s,h),this._changes=[]}_updateMapTransform(n,s,h){const m=this._map,b=m.transform,k=m.style&&m.style.terrain;if(!(La(n)||k&&this._drag))return this._fireEvents(s,h,!0);let{panDelta:P,zoomDelta:I,bearingDelta:z,pitchDelta:N,around:U,pinchAround:H}=n;H!==void 0&&(U=H),m._stop(!0),U=U||m.transform.centerPoint;const Q=b.pointLocation(P?U.sub(P):U);z&&(b.bearing+=z),N&&(b.pitch+=N),I&&(b.zoom+=I),k?s.drag&&!this._drag?(this._drag={center:b.centerPoint,lngLat:b.pointLocation(U),point:U,handlerName:s.drag.handlerName},m.fire(new c.Event("freezeElevation",{freeze:!0}))):this._drag&&h[this._drag.handlerName]?(m.fire(new c.Event("freezeElevation",{freeze:!1})),this._drag=null):s.drag&&this._drag&&(b.center=b.pointLocation(b.centerPoint.sub(P))):b.setLocationAtPoint(Q,U),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(s,h,!0)}_fireEvents(n,s,h){const m=Ds(this._eventsInProgress),b=Ds(n),k={};for(const N in n){const{originalEvent:U}=n[N];this._eventsInProgress[N]||(k[`${N}start`]=U),this._eventsInProgress[N]=n[N]}!m&&b&&this._fireEvent("movestart",b.originalEvent);for(const N in k)this._fireEvent(N,k[N]);b&&this._fireEvent("move",b.originalEvent);for(const N in n){const{originalEvent:U}=n[N];this._fireEvent(N,U)}const P={};let I;for(const N in this._eventsInProgress){const{handlerName:U,originalEvent:H}=this._eventsInProgress[N];this._handlersById[U].isActive()||(delete this._eventsInProgress[N],I=s[U]||H,P[`${N}end`]=I)}for(const N in P)this._fireEvent(N,P[N]);const z=Ds(this._eventsInProgress);if(h&&(m||b)&&!z){this._updatingCamera=!0;const N=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),U=H=>H!==0&&-this._bearingSnap<H&&H<this._bearingSnap;N?(U(N.bearing||this._map.getBearing())&&(N.bearing=0),this._map.easeTo(N,{originalEvent:I})):(this._map.fire(new c.Event("moveend",{originalEvent:I})),U(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(n,s){this._map.fire(new c.Event(n,s?{originalEvent:s}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(n=>{delete this._frameId,this.handleEvent(new Pl("renderFrame",{timeStamp:n})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const En={extend:(f,...n)=>c.extend(f,...n),run(f){f()},logToElement(f,n=!1,s="log"){const h=window.document.getElementById(s);h&&(n&&(h.innerHTML=""),h.innerHTML+=`<br>${f}`)}};class ss extends c.Evented{constructor(n,s){super(),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=s.bearingSnap,c.bindAll(["_renderFrameCallback"],this)}getCenter(){return new c.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(n,s){return this.jumpTo({center:n},s)}panBy(n,s,h){return n=c.pointGeometry.convert(n).mult(-1),this.panTo(this.transform.center,c.extend({offset:n},s),h)}panTo(n,s,h){return this.easeTo(c.extend({center:n},s),h)}getZoom(){return this.transform.zoom}setZoom(n,s){return this.jumpTo({zoom:n},s),this}zoomTo(n,s,h){return this.easeTo(c.extend({zoom:n},s),h)}zoomIn(n,s){return this.zoomTo(this.getZoom()+1,n,s),this}zoomOut(n,s){return this.zoomTo(this.getZoom()-1,n,s),this}getBearing(){return this.transform.bearing}setBearing(n,s){return this.jumpTo({bearing:n},s),this}getPadding(){return this.transform.padding}setPadding(n,s){return this.jumpTo({padding:n},s),this}rotateTo(n,s,h){return this.easeTo(c.extend({bearing:n},s),h)}resetNorth(n,s){return this.rotateTo(0,c.extend({duration:1e3},n),s),this}resetNorthPitch(n,s){return this.easeTo(c.extend({bearing:0,pitch:0,duration:1e3},n),s),this}snapToNorth(n,s){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,s):this}getPitch(){return this.transform.pitch}setPitch(n,s){return this.jumpTo({pitch:n},s),this}cameraForBounds(n,s){n=c.LngLatBounds.convert(n);const h=s&&s.bearing||0;return this._cameraForBoxAndBearing(n.getNorthWest(),n.getSouthEast(),h,s)}_cameraForBoxAndBearing(n,s,h,m){const b={top:0,bottom:0,right:0,left:0};if(typeof(m=c.extend({padding:b,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){const ke=m.padding;m.padding={top:ke,bottom:ke,right:ke,left:ke}}m.padding=c.extend(b,m.padding);const k=this.transform,P=k.padding,I=k.project(c.LngLat.convert(n)),z=k.project(c.LngLat.convert(s)),N=I.rotate(-h*Math.PI/180),U=z.rotate(-h*Math.PI/180),H=new c.pointGeometry(Math.max(N.x,U.x),Math.max(N.y,U.y)),Q=new c.pointGeometry(Math.min(N.x,U.x),Math.min(N.y,U.y)),K=H.sub(Q),X=(k.width-(P.left+P.right+m.padding.left+m.padding.right))/K.x,le=(k.height-(P.top+P.bottom+m.padding.top+m.padding.bottom))/K.y;if(le<0||X<0)return void c.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const xe=Math.min(k.scaleZoom(k.scale*Math.min(X,le)),m.maxZoom),be=c.pointGeometry.convert(m.offset),re=new c.pointGeometry((m.padding.left-m.padding.right)/2,(m.padding.top-m.padding.bottom)/2).rotate(h*Math.PI/180),Me=be.add(re).mult(k.scale/k.zoomScale(xe));return{center:k.unproject(I.add(z).div(2).sub(Me)),zoom:xe,bearing:h}}fitBounds(n,s,h){return this._fitInternal(this.cameraForBounds(n,s),s,h)}fitScreenCoordinates(n,s,h,m,b){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(c.pointGeometry.convert(n)),this.transform.pointLocation(c.pointGeometry.convert(s)),h,m),m,b)}_fitInternal(n,s,h){return n?(delete(s=c.extend(n,s)).padding,s.linear?this.easeTo(s,h):this.flyTo(s,h)):this}jumpTo(n,s){this.stop();const h=this.transform;let m=!1,b=!1,k=!1;return"zoom"in n&&h.zoom!==+n.zoom&&(m=!0,h.zoom=+n.zoom),n.center!==void 0&&(h.center=c.LngLat.convert(n.center)),"bearing"in n&&h.bearing!==+n.bearing&&(b=!0,h.bearing=+n.bearing),"pitch"in n&&h.pitch!==+n.pitch&&(k=!0,h.pitch=+n.pitch),n.padding==null||h.isPaddingEqual(n.padding)||(h.padding=n.padding),this.fire(new c.Event("movestart",s)).fire(new c.Event("move",s)),m&&this.fire(new c.Event("zoomstart",s)).fire(new c.Event("zoom",s)).fire(new c.Event("zoomend",s)),b&&this.fire(new c.Event("rotatestart",s)).fire(new c.Event("rotate",s)).fire(new c.Event("rotateend",s)),k&&this.fire(new c.Event("pitchstart",s)).fire(new c.Event("pitch",s)).fire(new c.Event("pitchend",s)),this.fire(new c.Event("moveend",s))}calculateCameraOptionsFromTo(n,s,h,m=0){const b=c.MercatorCoordinate.fromLngLat(n,s),k=c.MercatorCoordinate.fromLngLat(h,m),P=k.x-b.x,I=k.y-b.y,z=k.z-b.z,N=Math.hypot(P,I,z);if(N===0)throw new Error("Can't calculate camera options with same From and To");const U=Math.hypot(P,I),H=this.transform.scaleZoom(this.transform.cameraToCenterDistance/N/this.transform.tileSize),Q=180*Math.atan2(P,-I)/Math.PI;let K=180*Math.acos(U/N)/Math.PI;return K=z<0?90-K:90+K,{center:k.toLngLat(),zoom:H,pitch:K,bearing:Q}}easeTo(n,s){this._stop(!1,n.easeId),((n=c.extend({offset:[0,0],duration:500,easing:c.ease},n)).animate===!1||!n.essential&&c.exported.prefersReducedMotion)&&(n.duration=0);const h=this.transform,m=this.getZoom(),b=this.getBearing(),k=this.getPitch(),P=this.getPadding(),I="zoom"in n?+n.zoom:m,z="bearing"in n?this._normalizeBearing(n.bearing,b):b,N="pitch"in n?+n.pitch:k,U="padding"in n?n.padding:h.padding,H=c.pointGeometry.convert(n.offset);let Q=h.centerPoint.add(H);const K=h.pointLocation(Q),X=c.LngLat.convert(n.center||K);this._normalizeCenter(X);const le=h.project(K),xe=h.project(X).sub(le),be=h.zoomScale(I-m);let re,Me;n.around&&(re=c.LngLat.convert(n.around),Me=h.locationPoint(re));const ke={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||I!==m,this._rotating=this._rotating||b!==z,this._pitching=this._pitching||N!==k,this._padding=!h.isPaddingEqual(U),this._easeId=n.easeId,this._prepareEase(s,n.noMoveStart,ke),this._ease(Pe=>{if(this._zooming&&(h.zoom=c.number(m,I,Pe)),this._rotating&&(h.bearing=c.number(b,z,Pe)),this._pitching&&(h.pitch=c.number(k,N,Pe)),this._padding&&(h.interpolatePadding(P,U,Pe),Q=h.centerPoint.add(H)),re)h.setLocationAtPoint(re,Me);else{const De=h.zoomScale(h.zoom-m),Ge=I>m?Math.min(2,be):Math.max(.5,be),ze=Math.pow(Ge,1-Pe),lt=h.unproject(le.add(xe.mult(Pe*ze)).mult(De));h.setLocationAtPoint(h.renderWorldCopies?lt.wrap():lt,Q)}this._fireMoveEvents(s)},Pe=>{this._afterEase(s,Pe)},n),this}_prepareEase(n,s,h={}){this._moving=!0,this.fire(new c.Event("freezeElevation",{freeze:!0})),s||h.moving||this.fire(new c.Event("movestart",n)),this._zooming&&!h.zooming&&this.fire(new c.Event("zoomstart",n)),this._rotating&&!h.rotating&&this.fire(new c.Event("rotatestart",n)),this._pitching&&!h.pitching&&this.fire(new c.Event("pitchstart",n))}_fireMoveEvents(n){this.fire(new c.Event("move",n)),this._zooming&&this.fire(new c.Event("zoom",n)),this._rotating&&this.fire(new c.Event("rotate",n)),this._pitching&&this.fire(new c.Event("pitch",n))}_afterEase(n,s){if(this._easeId&&s&&this._easeId===s)return;delete this._easeId,this.fire(new c.Event("freezeElevation",{freeze:!1}));const h=this._zooming,m=this._rotating,b=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,h&&this.fire(new c.Event("zoomend",n)),m&&this.fire(new c.Event("rotateend",n)),b&&this.fire(new c.Event("pitchend",n)),this.fire(new c.Event("moveend",n))}flyTo(n,s){if(!n.essential&&c.exported.prefersReducedMotion){const Et=c.pick(n,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Et,s)}this.stop(),n=c.extend({offset:[0,0],speed:1.2,curve:1.42,easing:c.ease},n);const h=this.transform,m=this.getZoom(),b=this.getBearing(),k=this.getPitch(),P=this.getPadding(),I="zoom"in n?c.clamp(+n.zoom,h.minZoom,h.maxZoom):m,z="bearing"in n?this._normalizeBearing(n.bearing,b):b,N="pitch"in n?+n.pitch:k,U="padding"in n?n.padding:h.padding,H=h.zoomScale(I-m),Q=c.pointGeometry.convert(n.offset);let K=h.centerPoint.add(Q);const X=h.pointLocation(K),le=c.LngLat.convert(n.center||X);this._normalizeCenter(le);const xe=h.project(X),be=h.project(le).sub(xe);let re=n.curve;const Me=Math.max(h.width,h.height),ke=Me/H,Pe=be.mag();if("minZoom"in n){const Et=c.clamp(Math.min(n.minZoom,m,I),h.minZoom,h.maxZoom),xn=Me/h.zoomScale(Et-m);re=Math.sqrt(xn/Pe*2)}const De=re*re;function Ge(Et){const xn=(ke*ke-Me*Me+(Et?-1:1)*De*De*Pe*Pe)/(2*(Et?ke:Me)*De*Pe);return Math.log(Math.sqrt(xn*xn+1)-xn)}function ze(Et){return(Math.exp(Et)-Math.exp(-Et))/2}function lt(Et){return(Math.exp(Et)+Math.exp(-Et))/2}const nt=Ge(0);let st=function(Et){return lt(nt)/lt(nt+re*Et)},jt=function(Et){return Me*((lt(nt)*(ze(xn=nt+re*Et)/lt(xn))-ze(nt))/De)/Pe;var xn},Gt=(Ge(1)-nt)/re;if(Math.abs(Pe)<1e-6||!isFinite(Gt)){if(Math.abs(Me-ke)<1e-6)return this.easeTo(n,s);const Et=ke<Me?-1:1;Gt=Math.abs(Math.log(ke/Me))/re,jt=function(){return 0},st=function(xn){return Math.exp(Et*re*xn)}}return n.duration="duration"in n?+n.duration:1e3*Gt/("screenSpeed"in n?+n.screenSpeed/re:+n.speed),n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0),this._zooming=!0,this._rotating=b!==z,this._pitching=N!==k,this._padding=!h.isPaddingEqual(U),this._prepareEase(s,!1),this._ease(Et=>{const xn=Et*Gt,nn=1/st(xn);h.zoom=Et===1?I:m+h.scaleZoom(nn),this._rotating&&(h.bearing=c.number(b,z,Et)),this._pitching&&(h.pitch=c.number(k,N,Et)),this._padding&&(h.interpolatePadding(P,U,Et),K=h.centerPoint.add(Q));const Qt=Et===1?le:h.unproject(xe.add(be.mult(jt(xn))).mult(nn));h.setLocationAtPoint(h.renderWorldCopies?Qt.wrap():Qt,K),this._fireMoveEvents(s)},()=>this._afterEase(s),n),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(n,s){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const h=this._onEaseEnd;delete this._onEaseEnd,h.call(this,s)}if(!n){const h=this.handlers;h&&h.stop(!1)}return this}_ease(n,s,h){h.animate===!1||h.duration===0?(n(1),s()):(this._easeStart=c.exported.now(),this._easeOptions=h,this._onEaseFrame=n,this._onEaseEnd=s,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const n=Math.min((c.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(n)),n<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(n,s){n=c.wrap(n,-180,180);const h=Math.abs(n-s);return Math.abs(n-360-s)<h&&(n-=360),Math.abs(n+360-s)<h&&(n+=360),n}_normalizeCenter(n){const s=this.transform;if(!s.renderWorldCopies||s.lngRange)return;const h=n.lng-s.center.lng;n.lng+=h>180?-360:h<-180?360:0}}class Eo{constructor(n={}){this.options=n,c.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(n){return this._map=n,this._compact=this.options&&this.options.compact,this._container=F.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=F.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=F.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){F.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(n,s){const h=this._map._getUIString(`AttributionControl.${s}`);n.title=h,n.setAttribute("aria-label",h)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(n){!n||n.sourceDataType!=="metadata"&&n.sourceDataType!=="visibility"&&n.dataType!=="style"&&n.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(m=>typeof m!="string"?"":m)):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){const m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}const s=this._map.style.sourceCaches;for(const m in s){const b=s[m];if(b.used||b.usedForTerrain){const k=b.getSource();k.attribution&&n.indexOf(k.attribution)<0&&n.push(k.attribution)}}n=n.filter(m=>String(m).trim()),n.sort((m,b)=>m.length-b.length),n=n.filter((m,b)=>{for(let k=b+1;k<n.length;k++)if(n[k].indexOf(m)>=0)return!1;return!0});const h=n.join(" | ");h!==this._attribHTML&&(this._attribHTML=h,n.length?(this._innerContainer.innerHTML=h,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class Il{constructor(n={}){this.options=n,c.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(n){this._map=n,this._compact=this.options&&this.options.compact,this._container=F.create("div","maplibregl-ctrl mapboxgl-ctrl");const s=F.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return s.target="_blank",s.rel="noopener nofollow",s.href="https://maplibre.org/",s.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),s.setAttribute("rel","noopener nofollow"),this._container.appendChild(s),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){F.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const n=this._container.children;if(n.length){const s=n[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&s.classList.add("maplibregl-compact","mapboxgl-compact"):s.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class Al{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(n){const s=++this._id;return this._queue.push({callback:n,id:s,cancelled:!1}),s}remove(n){const s=this._currentlyRunning,h=s?this._queue.concat(s):this._queue;for(const m of h)if(m.id===n)return void(m.cancelled=!0)}run(n=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const s=this._currentlyRunning=this._queue;this._queue=[];for(const h of s)if(!h.cancelled&&(h.callback(n),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Ns={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},Ll={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},Or={showCompass:!0,showZoom:!0,visualizePitch:!1};class za{constructor(n,s,h=!1){this._clickTolerance=10,this.element=s,this.mouseRotate=new ut({clickTolerance:n.dragRotate._mouseRotate._clickTolerance}),this.map=n,h&&(this.mousePitch=new Pa({clickTolerance:n.dragRotate._mousePitch._clickTolerance})),c.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),F.addEventListener(s,"mousedown",this.mousedown),F.addEventListener(s,"touchstart",this.touchstart,{passive:!1}),F.addEventListener(s,"touchmove",this.touchmove),F.addEventListener(s,"touchend",this.touchend),F.addEventListener(s,"touchcancel",this.reset)}down(n,s){this.mouseRotate.mousedown(n,s),this.mousePitch&&this.mousePitch.mousedown(n,s),F.disableDrag()}move(n,s){const h=this.map,m=this.mouseRotate.mousemoveWindow(n,s);if(m&&m.bearingDelta&&h.setBearing(h.getBearing()+m.bearingDelta),this.mousePitch){const b=this.mousePitch.mousemoveWindow(n,s);b&&b.pitchDelta&&h.setPitch(h.getPitch()+b.pitchDelta)}}off(){const n=this.element;F.removeEventListener(n,"mousedown",this.mousedown),F.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),F.removeEventListener(n,"touchmove",this.touchmove),F.removeEventListener(n,"touchend",this.touchend),F.removeEventListener(n,"touchcancel",this.reset),this.offTemp()}offTemp(){F.enableDrag(),F.removeEventListener(window,"mousemove",this.mousemove),F.removeEventListener(window,"mouseup",this.mouseup)}mousedown(n){this.down(c.extend({},n,{ctrlKey:!0,preventDefault:()=>n.preventDefault()}),F.mousePos(this.element,n)),F.addEventListener(window,"mousemove",this.mousemove),F.addEventListener(window,"mouseup",this.mouseup)}mousemove(n){this.move(n,F.mousePos(this.element,n))}mouseup(n){this.mouseRotate.mouseupWindow(n),this.mousePitch&&this.mousePitch.mouseupWindow(n),this.offTemp()}touchstart(n){n.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=F.touchPos(this.element,n.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>n.preventDefault()},this._startPos))}touchmove(n){n.targetTouches.length!==1?this.reset():(this._lastPos=F.touchPos(this.element,n.targetTouches)[0],this.move({preventDefault:()=>n.preventDefault()},this._lastPos))}touchend(n){n.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function xt(f,n,s){if(f=new c.LngLat(f.lng,f.lat),n){const h=new c.LngLat(f.lng-360,f.lat),m=new c.LngLat(f.lng+360,f.lat),b=s.locationPoint(f).distSqr(n);s.locationPoint(h).distSqr(n)<b?f=h:s.locationPoint(m).distSqr(n)<b&&(f=m)}for(;Math.abs(f.lng-s.center.lng)>180;){const h=s.locationPoint(f);if(h.x>=0&&h.y>=0&&h.x<=s.width&&h.y<=s.height)break;f.lng>s.center.lng?f.lng-=360:f.lng+=360}return f}const kt={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Bs(f,n,s){const h=f.classList;for(const m in kt)h.remove(`maplibregl-${s}-anchor-${m}`,`mapboxgl-${s}-anchor-${m}`);h.add(`maplibregl-${s}-anchor-${n}`,`mapboxgl-${s}-anchor-${n}`)}class To extends c.Evented{constructor(n,s){if(super(),(n instanceof HTMLElement||s)&&(n=c.extend({element:n},s)),c.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._scale=n&&n.scale||1,this._draggable=n&&n.draggable||!1,this._clickTolerance=n&&n.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&n.pitchAlignment!=="auto"?n.pitchAlignment:this._rotationAlignment,n&&n.element)this._element=n.element,this._offset=c.pointGeometry.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=F.create("div"),this._element.setAttribute("aria-label","Map marker");const h=F.createNS("http://www.w3.org/2000/svg","svg"),m=41,b=27;h.setAttributeNS(null,"display","block"),h.setAttributeNS(null,"height",`${m}px`),h.setAttributeNS(null,"width",`${b}px`),h.setAttributeNS(null,"viewBox",`0 0 ${b} ${m}`);const k=F.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"stroke","none"),k.setAttributeNS(null,"stroke-width","1"),k.setAttributeNS(null,"fill","none"),k.setAttributeNS(null,"fill-rule","evenodd");const P=F.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"fill-rule","nonzero");const I=F.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(3.0, 29.0)"),I.setAttributeNS(null,"fill","#000000");const z=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const be of z){const re=F.createNS("http://www.w3.org/2000/svg","ellipse");re.setAttributeNS(null,"opacity","0.04"),re.setAttributeNS(null,"cx","10.5"),re.setAttributeNS(null,"cy","5.80029008"),re.setAttributeNS(null,"rx",be.rx),re.setAttributeNS(null,"ry",be.ry),I.appendChild(re)}const N=F.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"fill",this._color);const U=F.createNS("http://www.w3.org/2000/svg","path");U.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),N.appendChild(U);const H=F.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"opacity","0.25"),H.setAttributeNS(null,"fill","#000000");const Q=F.createNS("http://www.w3.org/2000/svg","path");Q.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),H.appendChild(Q);const K=F.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"transform","translate(6.0, 7.0)"),K.setAttributeNS(null,"fill","#FFFFFF");const X=F.createNS("http://www.w3.org/2000/svg","g");X.setAttributeNS(null,"transform","translate(8.0, 8.0)");const le=F.createNS("http://www.w3.org/2000/svg","circle");le.setAttributeNS(null,"fill","#000000"),le.setAttributeNS(null,"opacity","0.25"),le.setAttributeNS(null,"cx","5.5"),le.setAttributeNS(null,"cy","5.5"),le.setAttributeNS(null,"r","5.4999962");const xe=F.createNS("http://www.w3.org/2000/svg","circle");xe.setAttributeNS(null,"fill","#FFFFFF"),xe.setAttributeNS(null,"cx","5.5"),xe.setAttributeNS(null,"cy","5.5"),xe.setAttributeNS(null,"r","5.4999962"),X.appendChild(le),X.appendChild(xe),P.appendChild(I),P.appendChild(N),P.appendChild(H),P.appendChild(K),P.appendChild(X),h.appendChild(P),h.setAttributeNS(null,"height",m*this._scale+"px"),h.setAttributeNS(null,"width",b*this._scale+"px"),this._element.appendChild(h),this._offset=c.pointGeometry.convert(n&&n.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",h=>{h.preventDefault()}),this._element.addEventListener("mousedown",h=>{h.preventDefault()}),Bs(this._element,this._anchor,"marker"),this._popup=null}addTo(n){return this.remove(),this._map=n,n.getCanvasContainer().appendChild(this._element),n.on("move",this._update),n.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),F.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(n){return this._lngLat=c.LngLat.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(n){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),n){if(!("offset"in n.options)){const m=Math.sqrt(Math.pow(13.5,2)/2);n.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(38.1-13.5+m)],"bottom-right":[-m,-1*(38.1-13.5+m)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=n,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(n){const s=n.code,h=n.charCode||n.keyCode;s!=="Space"&&s!=="Enter"&&h!==32&&h!==13||this.togglePopup()}_onMapClick(n){const s=n.originalEvent.target,h=this._element;this._popup&&(s===h||h.contains(s))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const n=this._popup;return n?(n.isOpen()?n.remove():n.addTo(this._map),this):this}_update(n){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=xt(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let s="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?s=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(s=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let h="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?h="rotateX(0deg)":this._pitchAlignment==="map"&&(h=`rotateX(${this._map.getPitch()}deg)`),n&&n.type!=="moveend"||(this._pos=this._pos.round()),F.setTransform(this._element,`${kt[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${h} ${s}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const m=this._map.unproject(this._pos),b=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=m.distanceTo(this._lngLat)>20*b?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(n){return this._offset=c.pointGeometry.convert(n),this._update(),this}_onMove(n){if(!this._isDragging){const s=this._clickTolerance||this._map._clickTolerance;this._isDragging=n.point.dist(this._pointerdownPos)>=s}this._isDragging&&(this._pos=n.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new c.Event("dragstart"))),this.fire(new c.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new c.Event("dragend")),this._state="inactive"}_addDragHandler(n){this._element.contains(n.originalEvent.target)&&(n.preventDefault(),this._positionDelta=n.point.sub(this._pos).add(this._offset),this._pointerdownPos=n.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(n){return this._draggable=!!n,this._map&&(n?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(n){return this._rotation=n||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(n){return this._rotationAlignment=n||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(n){return this._pitchAlignment=n&&n!=="auto"?n:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Fs={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Xn,eo=0,Mr=!1;const Ic={maxWidth:100,unit:"metric"};function Ra(f,n,s){const h=s&&s.maxWidth||100,m=f._container.clientHeight/2,b=f.unproject([0,m]),k=f.unproject([h,m]),P=b.distanceTo(k);if(s&&s.unit==="imperial"){const I=3.2808*P;I>5280?Tn(n,h,I/5280,f._getUIString("ScaleControl.Miles")):Tn(n,h,I,f._getUIString("ScaleControl.Feet"))}else s&&s.unit==="nautical"?Tn(n,h,P/1852,f._getUIString("ScaleControl.NauticalMiles")):P>=1e3?Tn(n,h,P/1e3,f._getUIString("ScaleControl.Kilometers")):Tn(n,h,P,f._getUIString("ScaleControl.Meters"))}function Tn(f,n,s,h){const m=function(b){const k=Math.pow(10,`${Math.floor(b)}`.length-1);let P=b/k;return P=P>=10?10:P>=5?5:P>=3?3:P>=2?2:P>=1?1:function(I){const z=Math.pow(10,Math.ceil(-Math.log(I)/Math.LN10));return Math.round(I*z)/z}(P),k*P}(s);f.style.width=n*(m/s)+"px",f.innerHTML=`${m}&nbsp;${h}`}const nr={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Tu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ko(f){if(f){if(typeof f=="number"){const n=Math.round(Math.sqrt(.5*Math.pow(f,2)));return{center:new c.pointGeometry(0,0),top:new c.pointGeometry(0,f),"top-left":new c.pointGeometry(n,n),"top-right":new c.pointGeometry(-n,n),bottom:new c.pointGeometry(0,-f),"bottom-left":new c.pointGeometry(n,-n),"bottom-right":new c.pointGeometry(-n,-n),left:new c.pointGeometry(f,0),right:new c.pointGeometry(-f,0)}}if(f instanceof c.pointGeometry||Array.isArray(f)){const n=c.pointGeometry.convert(f);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:c.pointGeometry.convert(f.center||[0,0]),top:c.pointGeometry.convert(f.top||[0,0]),"top-left":c.pointGeometry.convert(f["top-left"]||[0,0]),"top-right":c.pointGeometry.convert(f["top-right"]||[0,0]),bottom:c.pointGeometry.convert(f.bottom||[0,0]),"bottom-left":c.pointGeometry.convert(f["bottom-left"]||[0,0]),"bottom-right":c.pointGeometry.convert(f["bottom-right"]||[0,0]),left:c.pointGeometry.convert(f.left||[0,0]),right:c.pointGeometry.convert(f.right||[0,0])}}return ko(new c.pointGeometry(0,0))}const ci={supported:B,setRTLTextPlugin:c.setRTLTextPlugin,getRTLTextPluginStatus:c.getRTLTextPluginStatus,Map:class extends ss{constructor(f){var n;if(c.PerformanceUtils.mark(c.PerformanceMarkers.create),(f=c.extend({},Ll,f)).minZoom!=null&&f.maxZoom!=null&&f.minZoom>f.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(f.minPitch!=null&&f.maxPitch!=null&&f.minPitch>f.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(f.minPitch!=null&&f.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(f.maxPitch!=null&&f.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Sl(f.minZoom,f.maxZoom,f.minPitch,f.maxPitch,f.renderWorldCopies),{bearingSnap:f.bearingSnap}),this._interactive=f.interactive,this._cooperativeGestures=f.cooperativeGestures,this._maxTileCacheSize=f.maxTileCacheSize,this._failIfMajorPerformanceCaveat=f.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=f.preserveDrawingBuffer,this._antialias=f.antialias,this._trackResize=f.trackResize,this._bearingSnap=f.bearingSnap,this._refreshExpiredTiles=f.refreshExpiredTiles,this._fadeDuration=f.fadeDuration,this._crossSourceCollisions=f.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=f.collectResourceTiming,this._renderTaskQueue=new Al,this._controls=[],this._mapId=c.uniqueId(),this._locale=c.extend({},Ns,f.locale),this._clickTolerance=f.clickTolerance,this._pixelRatio=(n=f.pixelRatio)!==null&&n!==void 0?n:devicePixelRatio,this._requestManager=new te(f.transformRequest),typeof f.container=="string"){if(this._container=document.getElementById(f.container),!this._container)throw new Error(`Container '${f.container}' not found.`)}else{if(!(f.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=f.container}if(f.maxBounds&&this.setMaxBounds(f.maxBounds),c.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new hn(this,f),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=f.hash&&new ka(typeof f.hash=="string"&&f.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch}),f.bounds&&(this.resize(),this.fitBounds(f.bounds,c.extend({},f.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=f.localIdeographFontFamily,f.style&&this.setStyle(f.style,{localIdeographFontFamily:f.localIdeographFontFamily}),f.attributionControl&&this.addControl(new Eo({customAttribution:f.customAttribution})),f.maplibreLogo&&this.addControl(new Il,f.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",s=>{this._update(s.dataType==="style"),this.fire(new c.Event(`${s.dataType}data`,s))}),this.on("dataloading",s=>{this.fire(new c.Event(`${s.dataType}dataloading`,s))}),this.on("dataabort",s=>{this.fire(new c.Event("sourcedataabort",s))})}_getMapId(){return this._mapId}addControl(f,n){if(n===void 0&&(n=f.getDefaultPosition?f.getDefaultPosition():"top-right"),!f||!f.onAdd)return this.fire(new c.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const s=f.onAdd(this);this._controls.push(f);const h=this._controlPositions[n];return n.indexOf("bottom")!==-1?h.insertBefore(s,h.firstChild):h.appendChild(s),this}removeControl(f){if(!f||!f.onRemove)return this.fire(new c.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(f);return n>-1&&this._controls.splice(n,1),f.onRemove(this),this}hasControl(f){return this._controls.indexOf(f)>-1}calculateCameraOptionsFromTo(f,n,s,h){return h==null&&this.style.terrain&&(h=this.transform.getElevation(s,this.style.terrain)),super.calculateCameraOptionsFromTo(f,n,s,h)}resize(f){const n=this._containerDimensions(),s=n[0],h=n[1];this._resizeCanvas(s,h,this.getPixelRatio()),this.transform.resize(s,h),this.painter.resize(s,h,this.getPixelRatio());const m=!this._moving;return m&&(this.stop(),this.fire(new c.Event("movestart",f)).fire(new c.Event("move",f))),this.fire(new c.Event("resize",f)),m&&this.fire(new c.Event("moveend",f)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(f){const[n,s]=this._containerDimensions();this._pixelRatio=f,this._resizeCanvas(n,s,f),this.painter.resize(n,s,f)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(f){return this.transform.setMaxBounds(c.LngLatBounds.convert(f)),this._update()}setMinZoom(f){if((f=f??-2)>=-2&&f<=this.transform.maxZoom)return this.transform.minZoom=f,this._update(),this.getZoom()<f&&this.setZoom(f),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(f){if((f=f??22)>=this.transform.minZoom)return this.transform.maxZoom=f,this._update(),this.getZoom()>f&&this.setZoom(f),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(f){if((f=f??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(f>=0&&f<=this.transform.maxPitch)return this.transform.minPitch=f,this._update(),this.getPitch()<f&&this.setPitch(f),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(f){if((f=f??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(f>=this.transform.minPitch)return this.transform.maxPitch=f,this._update(),this.getPitch()>f&&this.setPitch(f),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(f){return this.transform.renderWorldCopies=f,this._update()}project(f){return this.transform.locationPoint(c.LngLat.convert(f),this.style&&this.style.terrain)}unproject(f){return this.transform.pointLocation(c.pointGeometry.convert(f),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(f,n,s){if(f==="mouseenter"||f==="mouseover"){let h=!1;return{layer:n,listener:s,delegates:{mousemove:b=>{const k=this.getLayer(n)?this.queryRenderedFeatures(b.point,{layers:[n]}):[];k.length?h||(h=!0,s.call(this,new Qr(f,this,b.originalEvent,{features:k}))):h=!1},mouseout:()=>{h=!1}}}}if(f==="mouseleave"||f==="mouseout"){let h=!1;return{layer:n,listener:s,delegates:{mousemove:k=>{(this.getLayer(n)?this.queryRenderedFeatures(k.point,{layers:[n]}):[]).length?h=!0:h&&(h=!1,s.call(this,new Qr(f,this,k.originalEvent)))},mouseout:k=>{h&&(h=!1,s.call(this,new Qr(f,this,k.originalEvent)))}}}}{const h=m=>{const b=this.getLayer(n)?this.queryRenderedFeatures(m.point,{layers:[n]}):[];b.length&&(m.features=b,s.call(this,m),delete m.features)};return{layer:n,listener:s,delegates:{[f]:h}}}}on(f,n,s){if(s===void 0)return super.on(f,n);const h=this._createDelegatedListener(f,n,s);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[f]=this._delegatedListeners[f]||[],this._delegatedListeners[f].push(h);for(const m in h.delegates)this.on(m,h.delegates[m]);return this}once(f,n,s){if(s===void 0)return super.once(f,n);const h=this._createDelegatedListener(f,n,s);for(const m in h.delegates)this.once(m,h.delegates[m]);return this}off(f,n,s){return s===void 0?super.off(f,n):(this._delegatedListeners&&this._delegatedListeners[f]&&(h=>{const m=this._delegatedListeners[f];for(let b=0;b<m.length;b++){const k=m[b];if(k.layer===n&&k.listener===s){for(const P in k.delegates)this.off(P,k.delegates[P]);return m.splice(b,1),this}}})(),this)}queryRenderedFeatures(f,n){if(!this.style)return[];let s;if(n!==void 0||f===void 0||f instanceof c.pointGeometry||Array.isArray(f)||(n=f,f=void 0),n=n||{},(f=f||[[0,0],[this.transform.width,this.transform.height]])instanceof c.pointGeometry||typeof f[0]=="number")s=[c.pointGeometry.convert(f)];else{const h=c.pointGeometry.convert(f[0]),m=c.pointGeometry.convert(f[1]);s=[h,new c.pointGeometry(m.x,h.y),m,new c.pointGeometry(h.x,m.y),h]}return this.style.queryRenderedFeatures(s,n,this.transform)}querySourceFeatures(f,n){return this.style.querySourceFeatures(f,n)}setStyle(f,n){return(n=c.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},n)).diff!==!1&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&f?(this._diffStyle(f,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(f,n))}setTransformRequest(f){return this._requestManager.setTransformRequest(f),this}_getUIString(f){const n=this._locale[f];if(n==null)throw new Error(`Missing UI string '${f}'`);return n}_updateStyle(f,n){return this.style&&(this.style.setEventedParent(null),this.style._remove()),f?(this.style=new mr(this,n||{}),this.style.setEventedParent(this,{style:this.style}),typeof f=="string"?this.style.loadURL(f):this.style.loadJSON(f),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new mr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(f,n){if(typeof f=="string"){const s=this._requestManager.transformRequest(f,c.ResourceType.Style);c.getJSON(s,(h,m)=>{h?this.fire(new c.ErrorEvent(h)):m&&this._updateDiff(m,n)})}else typeof f=="object"&&this._updateDiff(f,n)}_updateDiff(f,n){try{this.style.setState(f)&&this._update(!0)}catch(s){c.warnOnce(`Unable to perform style diff: ${s.message||s.error||s}.  Rebuilding the style from scratch.`),this._updateStyle(f,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():c.warnOnce("There is no style added to the map.")}addSource(f,n){return this._lazyInitEmptyStyle(),this.style.addSource(f,n),this._update(!0)}isSourceLoaded(f){const n=this.style&&this.style.sourceCaches[f];if(n!==void 0)return n.loaded();this.fire(new c.ErrorEvent(new Error(`There is no source with ID '${f}'`)))}setTerrain(f){return this.style.setTerrain(f),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const f=this.style&&this.style.sourceCaches;for(const n in f){const s=f[n]._tiles;for(const h in s){const m=s[h];if(m.state!=="loaded"&&m.state!=="errored")return!1}}return!0}addSourceType(f,n,s){return this._lazyInitEmptyStyle(),this.style.addSourceType(f,n,s)}removeSource(f){return this.style.removeSource(f),this._update(!0)}getSource(f){return this.style.getSource(f)}addImage(f,n,{pixelRatio:s=1,sdf:h=!1,stretchX:m,stretchY:b,content:k}={}){if(this._lazyInitEmptyStyle(),n instanceof HTMLImageElement||c.isImageBitmap(n)){const{width:P,height:I,data:z}=c.exported.getImageData(n);this.style.addImage(f,{data:new c.RGBAImage({width:P,height:I},z),pixelRatio:s,stretchX:m,stretchY:b,content:k,sdf:h,version:0})}else{if(n.width===void 0||n.height===void 0)return this.fire(new c.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:P,height:I,data:z}=n,N=n;this.style.addImage(f,{data:new c.RGBAImage({width:P,height:I},new Uint8Array(z)),pixelRatio:s,stretchX:m,stretchY:b,content:k,sdf:h,version:0,userImage:N}),N.onAdd&&N.onAdd(this,f)}}}updateImage(f,n){const s=this.style.getImage(f);if(!s)return this.fire(new c.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const h=n instanceof HTMLImageElement||c.isImageBitmap(n)?c.exported.getImageData(n):n,{width:m,height:b,data:k}=h;if(m===void 0||b===void 0)return this.fire(new c.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==s.data.width||b!==s.data.height)return this.fire(new c.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const P=!(n instanceof HTMLImageElement||c.isImageBitmap(n));s.data.replace(k,P),this.style.updateImage(f,s)}hasImage(f){return f?!!this.style.getImage(f):(this.fire(new c.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(f){this.style.removeImage(f)}loadImage(f,n){c.getImage(this._requestManager.transformRequest(f,c.ResourceType.Image),n)}listImages(){return this.style.listImages()}addLayer(f,n){return this._lazyInitEmptyStyle(),this.style.addLayer(f,n),this._update(!0)}moveLayer(f,n){return this.style.moveLayer(f,n),this._update(!0)}removeLayer(f){return this.style.removeLayer(f),this._update(!0)}getLayer(f){return this.style.getLayer(f)}setLayerZoomRange(f,n,s){return this.style.setLayerZoomRange(f,n,s),this._update(!0)}setFilter(f,n,s={}){return this.style.setFilter(f,n,s),this._update(!0)}getFilter(f){return this.style.getFilter(f)}setPaintProperty(f,n,s,h={}){return this.style.setPaintProperty(f,n,s,h),this._update(!0)}getPaintProperty(f,n){return this.style.getPaintProperty(f,n)}setLayoutProperty(f,n,s,h={}){return this.style.setLayoutProperty(f,n,s,h),this._update(!0)}getLayoutProperty(f,n){return this.style.getLayoutProperty(f,n)}setLight(f,n={}){return this._lazyInitEmptyStyle(),this.style.setLight(f,n),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(f,n){return this.style.setFeatureState(f,n),this._update()}removeFeatureState(f,n){return this.style.removeFeatureState(f,n),this._update()}getFeatureState(f){return this.style.getFeatureState(f)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let f=0,n=0;return this._container&&(f=this._container.clientWidth||400,n=this._container.clientHeight||300),[f,n]}_setupContainer(){const f=this._container;f.classList.add("maplibregl-map","mapboxgl-map");const n=this._canvasContainer=F.create("div","maplibregl-canvas-container mapboxgl-canvas-container",f);this._interactive&&n.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=F.create("canvas","maplibregl-canvas mapboxgl-canvas",n),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const s=this._containerDimensions();this._resizeCanvas(s[0],s[1],this.getPixelRatio());const h=this._controlContainer=F.create("div","maplibregl-control-container mapboxgl-control-container",f),m=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(b=>{m[b]=F.create("div",`maplibregl-ctrl-${b} mapboxgl-ctrl-${b}`,h)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const f=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=F.create("div","maplibregl-cooperative-gesture-screen",f);let n="Control",s=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(s=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map",n="Meta"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${s}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,document.addEventListener("keydown",h=>{h.key===n&&(this._metaPress=!0)}),document.addEventListener("keyup",h=>{h.key===n&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",h=>{this._onCooperativeGesture(h,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(f,n,s){this._canvas.width=s*f,this._canvas.height=s*n,this._canvas.style.width=`${f}px`,this._canvas.style.height=`${n}px`}_setupPainter(){const f=c.extend({},B.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),n=this._canvas.getContext("webgl",f)||this._canvas.getContext("experimental-webgl",f);n?(this.painter=new Ec(n,this.transform),c.exported$1.testSupport(n)):this.fire(new c.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(f){f.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new c.Event("webglcontextlost",{originalEvent:f}))}_contextRestored(f){this._setupPainter(),this.resize(),this._update(),this.fire(new c.Event("webglcontextrestored",{originalEvent:f}))}_onMapScroll(f){if(f.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(f,n,s){return!n&&s<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(f){return this.style?(this._styleDirty=this._styleDirty||f,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(f){return this._update(),this._renderTaskQueue.add(f)}_cancelRenderFrame(f){this._renderTaskQueue.remove(f)}_render(f){let n,s=0;const h=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(n=h.createQueryEXT(),h.beginQueryEXT(h.TIME_ELAPSED_EXT,n),s=c.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(f),this._removed)return;let m=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const k=this.transform.zoom,P=c.exported.now();this.style.zoomHistory.update(k,P);const I=new c.EvaluationParameters(k,{now:P,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),z=I.crossFadingFactor();z===1&&z===this._crossFadingFactor||(m=!0,this._crossFadingFactor=z),this.style.update(I)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new c.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,c.PerformanceUtils.mark(c.PerformanceMarkers.load),this.fire(new c.Event("load"))),this.style&&(this.style.hasTransitions()||m)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const k=c.exported.now()-s;h.endQueryEXT(h.TIME_ELAPSED_EXT,n),setTimeout(()=>{const P=h.getQueryObjectEXT(n,h.QUERY_RESULT_EXT)/1e6;h.deleteQueryEXT(n),this.fire(new c.Event("gpu-timing-frame",{cpuTime:k,gpuTime:P}))},50)}if(this.listens("gpu-timing-layer")){const k=this.painter.collectGpuTimers();setTimeout(()=>{const P=this.painter.queryGpuTimers(k);this.fire(new c.Event("gpu-timing-layer",{layerTimes:P}))},50)}const b=this._sourcesDirty||this._styleDirty||this._placementDirty;return b||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new c.Event("idle")),!this._loaded||this._fullyLoaded||b||(this._fullyLoaded=!0,c.PerformanceUtils.mark(c.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const n of this._controls)n.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const f=this.painter.context.gl.getExtension("WEBGL_lose_context");f&&f.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),F.remove(this._canvasContainer),F.remove(this._controlContainer),this._cooperativeGestures&&F.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),c.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new c.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=c.exported.frame(f=>{c.PerformanceUtils.frame(f),this._frame=null,this._render(f)}))}_onWindowOnline(){this._update()}_onWindowResize(f){this._trackResize&&this.resize({originalEvent:f})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(f){this._showTileBoundaries!==f&&(this._showTileBoundaries=f,this._update())}get showPadding(){return!!this._showPadding}set showPadding(f){this._showPadding!==f&&(this._showPadding=f,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(f){this._showCollisionBoxes!==f&&(this._showCollisionBoxes=f,f?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(f){this._showOverdrawInspector!==f&&(this._showOverdrawInspector=f,this._update())}get repaint(){return!!this._repaint}set repaint(f){this._repaint!==f&&(this._repaint=f,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(f){this._vertices=f,this._update()}_setCacheLimits(f,n){c.setCacheLimits(f,n)}get version(){return"2.4.0"}},NavigationControl:class{constructor(f){this.options=c.extend({},Or,f),this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",n=>n.preventDefault()),this.options.showZoom&&(c.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",n=>this._map.zoomIn({},{originalEvent:n})),F.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",n=>this._map.zoomOut({},{originalEvent:n})),F.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(c.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",n=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})}),this._compassIcon=F.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const f=this._map.getZoom(),n=f===this._map.getMaxZoom(),s=f===this._map.getMinZoom();this._zoomInButton.disabled=n,this._zoomOutButton.disabled=s,this._zoomInButton.setAttribute("aria-disabled",n.toString()),this._zoomOutButton.setAttribute("aria-disabled",s.toString())}_rotateCompassArrow(){const f=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=f}onAdd(f){return this._map=f,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new za(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){F.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(f,n){const s=F.create("button",f,this._container);return s.type="button",s.addEventListener("click",n),s}_setButtonTitle(f,n){const s=this._map._getUIString(`NavigationControl.${n}`);f.title=s,f.setAttribute("aria-label",s)}},GeolocateControl:class extends c.Evented{constructor(f){super(),this.options=c.extend({},Fs,f),c.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(f){var n;return this._map=f,this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),n=this._setupUI,Xn!==void 0?n(Xn):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(s=>{Xn=s.state!=="denied",n(Xn)}):(Xn=!!window.navigator.geolocation,n(Xn)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),F.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,eo=0,Mr=!1}_isOutOfMapMaxBounds(f){const n=this._map.getMaxBounds(),s=f.coords;return n&&(s.longitude<n.getWest()||s.longitude>n.getEast()||s.latitude<n.getSouth()||s.latitude>n.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(f){if(this._map){if(this._isOutOfMapMaxBounds(f))return this._setErrorState(),this.fire(new c.Event("outofmaxbounds",f)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=f,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(f),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(f),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new c.Event("geolocate",f)),this._finish()}}_updateCamera(f){const n=new c.LngLat(f.coords.longitude,f.coords.latitude),s=f.coords.accuracy,h=this._map.getBearing(),m=c.extend({bearing:h},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(s),m,{geolocateSource:!0})}_updateMarker(f){if(f){const n=new c.LngLat(f.coords.longitude,f.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=f.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const f=this._map._container.clientHeight/2,n=this._map.unproject([0,f]),s=this._map.unproject([1,f]),h=n.distanceTo(s),m=Math.ceil(2*this._accuracy/h);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(f){if(this._map){if(this.options.trackUserLocation)if(f.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(f.code===3&&Mr)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new c.Event("error",f)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(f){if(this._container.addEventListener("contextmenu",n=>n.preventDefault()),this._geolocateButton=F.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),F.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",f===!1){c.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}else{const n=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=F.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new To(this._dotElement),this._circleElement=F.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new To({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",n=>{n.geolocateSource||this._watchState!=="ACTIVE_LOCK"||n.originalEvent&&n.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new c.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return c.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":eo--,Mr=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new c.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let f;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),eo++,eo>1?(f={maximumAge:6e5,timeout:0},Mr=!0):(f=this.options.positionOptions,Mr=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,f)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Eo,LogoControl:Il,ScaleControl:class{constructor(f){this.options=c.extend({},Ic,f),c.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){Ra(this._map,this._container,this.options)}onAdd(f){return this._map=f,this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",f.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){F.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(f){this.options.unit=f,Ra(this._map,this._container,this.options)}},FullscreenControl:class{constructor(f){this._fullscreen=!1,f&&f.container&&(f.container instanceof HTMLElement?this._container=f.container:c.warnOnce("Full screen control 'container' must be a DOM element.")),c.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(f){return this._map=f,this._container||(this._container=this._map.getContainer()),this._controlContainer=F.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",c.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){F.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const f=this._fullscreenButton=F.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);F.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",f).setAttribute("aria-hidden","true"),f.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const f=this._getTitle();this._fullscreenButton.setAttribute("aria-label",f),this._fullscreenButton.title=f}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(f){this.options=f,c.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(f){return this._map=f,this._container=F.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=F.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),F.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){F.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends c.Evented{constructor(f){super(),this.options=c.extend(Object.create(nr),f),c.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(f){return this._map&&this.remove(),this._map=f,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new c.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&F.remove(this._content),this._container&&(F.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new c.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(f){return this._lngLat=c.LngLat.convert(f),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(f){return this.setDOMContent(document.createTextNode(f))}setHTML(f){const n=document.createDocumentFragment(),s=document.createElement("body");let h;for(s.innerHTML=f;h=s.firstChild,h;)n.appendChild(h);return this.setDOMContent(n)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(f){return this.options.maxWidth=f,this._update(),this}setDOMContent(f){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=F.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(f),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(f){this._container&&this._container.classList.add(f)}removeClassName(f){this._container&&this._container.classList.remove(f)}setOffset(f){return this.options.offset=f,this._update(),this}toggleClassName(f){if(this._container)return this._container.classList.toggle(f)}_createCloseButton(){this.options.closeButton&&(this._closeButton=F.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(f){this._update(f.point)}_onMouseMove(f){this._update(f.point)}_onDrag(f){this._update(f.point)}_update(f){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=F.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=F.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(b=>this._container.classList.add(b)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=xt(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!f))return;const n=this._pos=this._trackPointer&&f?f:this._map.project(this._lngLat);let s=this.options.anchor;const h=ko(this.options.offset);if(!s){const b=this._container.offsetWidth,k=this._container.offsetHeight;let P;P=n.y+h.bottom.y<k?["top"]:n.y>this._map.transform.height-k?["bottom"]:[],n.x<b/2?P.push("left"):n.x>this._map.transform.width-b/2&&P.push("right"),s=P.length===0?"bottom":P.join("-")}const m=n.add(h[s]).round();F.setTransform(this._container,`${kt[s]} translate(${m.x}px,${m.y}px)`),Bs(this._container,s,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const f=this._container.querySelector(Tu);f&&f.focus()}_onClose(){this.remove()}},Marker:To,Style:mr,LngLat:c.LngLat,LngLatBounds:c.LngLatBounds,Point:c.pointGeometry,MercatorCoordinate:c.MercatorCoordinate,Evented:c.Evented,AJAXError:c.AJAXError,config:c.config,CanvasSource:we,GeoJSONSource:Pt,ImageSource:at,RasterDEMTileSource:Ze,RasterTileSource:mt,VectorTileSource:bt,VideoSource:rt,prewarm:function(){tt().acquire(Qn)},clearPrewarmedResources:function(){const f=Qe;f&&(f.isPreloaded()&&f.numActive()===1?(f.release(Qn),Qe=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return jn.workerCount},set workerCount(f){jn.workerCount=f},get maxParallelImageRequests(){return c.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(f){c.config.MAX_PARALLEL_IMAGE_REQUESTS=f},clearStorage(f){c.clearTileCache(f)},workerUrl:"",addProtocol(f,n){c.config.REGISTERED_PROTOCOLS[f]=n},removeProtocol(f){delete c.config.REGISTERED_PROTOCOLS[f]}};return En.extend(ci,{isSafari:c.isSafari,getPerformanceMetrics:c.PerformanceUtils.getPerformanceMetrics}),ci});var C=E;return C})}(pp)),pp.exports}var u0=B_();const su=Sp(u0),F_=_g({__proto__:null,default:su},[u0]),Mp={version:8,sources:{"osm-tiles":{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}},layers:[{id:"osm-tiles",type:"raster",source:"osm-tiles",minzoom:0,maxzoom:19}]},ld=Hf(Gf(a=>({origin:null,destination:null,routeGeo:null,routeSteps:[],alternativeRoutes:[],setOrigin:p=>a({origin:p}),setDestination:p=>a({destination:p}),setRouteGeo:p=>a({routeGeo:p}),setRouteSteps:p=>a({routeSteps:p}),setAlternativeRoutes:p=>a({alternativeRoutes:p}),clearRoute:()=>a({origin:null,destination:null,routeGeo:null,routeSteps:[],alternativeRoutes:[]})}),{name:"route-storage",version:1})),sl=11102230246251565e-32,mi=134217729,O_=(3+8*sl)*sl;function df(a,p,y,_,E){let T,C,c,B,j=p[0],$=_[0],D=0,F=0;$>j==$>-j?(T=j,j=p[++D]):(T=$,$=_[++F]);let te=0;if(D<a&&F<y)for($>j==$>-j?(C=j+T,c=T-(C-j),j=p[++D]):(C=$+T,c=T-(C-$),$=_[++F]),T=C,c!==0&&(E[te++]=c);D<a&&F<y;)$>j==$>-j?(C=T+j,B=C-T,c=T-(C-B)+(j-B),j=p[++D]):(C=T+$,B=C-T,c=T-(C-B)+($-B),$=_[++F]),T=C,c!==0&&(E[te++]=c);for(;D<a;)C=T+j,B=C-T,c=T-(C-B)+(j-B),j=p[++D],T=C,c!==0&&(E[te++]=c);for(;F<y;)C=T+$,B=C-T,c=T-(C-B)+($-B),$=_[++F],T=C,c!==0&&(E[te++]=c);return(T!==0||te===0)&&(E[te++]=T),te}function $_(a,p){let y=p[0];for(let _=1;_<a;_++)y+=p[_];return y}function vd(a){return new Float64Array(a)}const U_=(3+16*sl)*sl,V_=(2+12*sl)*sl,H_=(9+64*sl)*sl*sl,th=vd(4),Qm=vd(8),eg=vd(12),tg=vd(16),zi=vd(4);function G_(a,p,y,_,E,T,C){let c,B,j,$,D,F,te,ie,W,Y,pe,ye,ve,Be,Se,Ke,Je,He;const gt=a-E,pt=y-E,wt=p-T,Tt=_-T;Be=gt*Tt,F=mi*gt,te=F-(F-gt),ie=gt-te,F=mi*Tt,W=F-(F-Tt),Y=Tt-W,Se=ie*Y-(Be-te*W-ie*W-te*Y),Ke=wt*pt,F=mi*wt,te=F-(F-wt),ie=wt-te,F=mi*pt,W=F-(F-pt),Y=pt-W,Je=ie*Y-(Ke-te*W-ie*W-te*Y),pe=Se-Je,D=Se-pe,th[0]=Se-(pe+D)+(D-Je),ye=Be+pe,D=ye-Be,ve=Be-(ye-D)+(pe-D),pe=ve-Ke,D=ve-pe,th[1]=ve-(pe+D)+(D-Ke),He=ye+pe,D=He-ye,th[2]=ye-(He-D)+(pe-D),th[3]=He;let bt=$_(4,th),mt=V_*C;if(bt>=mt||-bt>=mt||(D=a-gt,c=a-(gt+D)+(D-E),D=y-pt,j=y-(pt+D)+(D-E),D=p-wt,B=p-(wt+D)+(D-T),D=_-Tt,$=_-(Tt+D)+(D-T),c===0&&B===0&&j===0&&$===0)||(mt=H_*C+O_*Math.abs(bt),bt+=gt*$+Tt*c-(wt*j+pt*B),bt>=mt||-bt>=mt))return bt;Be=c*Tt,F=mi*c,te=F-(F-c),ie=c-te,F=mi*Tt,W=F-(F-Tt),Y=Tt-W,Se=ie*Y-(Be-te*W-ie*W-te*Y),Ke=B*pt,F=mi*B,te=F-(F-B),ie=B-te,F=mi*pt,W=F-(F-pt),Y=pt-W,Je=ie*Y-(Ke-te*W-ie*W-te*Y),pe=Se-Je,D=Se-pe,zi[0]=Se-(pe+D)+(D-Je),ye=Be+pe,D=ye-Be,ve=Be-(ye-D)+(pe-D),pe=ve-Ke,D=ve-pe,zi[1]=ve-(pe+D)+(D-Ke),He=ye+pe,D=He-ye,zi[2]=ye-(He-D)+(pe-D),zi[3]=He;const Ct=df(4,th,4,zi,Qm);Be=gt*$,F=mi*gt,te=F-(F-gt),ie=gt-te,F=mi*$,W=F-(F-$),Y=$-W,Se=ie*Y-(Be-te*W-ie*W-te*Y),Ke=wt*j,F=mi*wt,te=F-(F-wt),ie=wt-te,F=mi*j,W=F-(F-j),Y=j-W,Je=ie*Y-(Ke-te*W-ie*W-te*Y),pe=Se-Je,D=Se-pe,zi[0]=Se-(pe+D)+(D-Je),ye=Be+pe,D=ye-Be,ve=Be-(ye-D)+(pe-D),pe=ve-Ke,D=ve-pe,zi[1]=ve-(pe+D)+(D-Ke),He=ye+pe,D=He-ye,zi[2]=ye-(He-D)+(pe-D),zi[3]=He;const Ze=df(Ct,Qm,4,zi,eg);Be=c*$,F=mi*c,te=F-(F-c),ie=c-te,F=mi*$,W=F-(F-$),Y=$-W,Se=ie*Y-(Be-te*W-ie*W-te*Y),Ke=B*j,F=mi*B,te=F-(F-B),ie=B-te,F=mi*j,W=F-(F-j),Y=j-W,Je=ie*Y-(Ke-te*W-ie*W-te*Y),pe=Se-Je,D=Se-pe,zi[0]=Se-(pe+D)+(D-Je),ye=Be+pe,D=ye-Be,ve=Be-(ye-D)+(pe-D),pe=ve-Ke,D=ve-pe,zi[1]=ve-(pe+D)+(D-Ke),He=ye+pe,D=He-ye,zi[2]=ye-(He-D)+(pe-D),zi[3]=He;const Pt=df(Ze,eg,4,zi,tg);return tg[Pt-1]}function q_(a,p,y,_,E,T){const C=(p-T)*(y-E),c=(a-E)*(_-T),B=C-c,j=Math.abs(C+c);return Math.abs(B)>=U_*j?B:-G_(a,p,y,_,E,T,j)}function W_(a,p){var y,_,E=0,T,C,c,B,j,$,D,F=a[0],te=a[1],ie=p.length;for(y=0;y<ie;y++){_=0;var W=p[y],Y=W.length-1;if($=W[0],$[0]!==W[Y][0]&&$[1]!==W[Y][1])throw new Error("First and last coordinates in a ring must be the same");for(C=$[0]-F,c=$[1]-te,_;_<Y;_++){if(D=W[_+1],B=D[0]-F,j=D[1]-te,c===0&&j===0){if(B<=0&&C>=0||C<=0&&B>=0)return 0}else if(j>=0&&c<=0||j<=0&&c>=0){if(T=q_(C,B,c,j,0,0),T===0)return 0;(T>0&&j>0&&c<=0||T<0&&j<=0&&c>0)&&E++}$=D,c=j,C=B}}return E%2!==0}function Z_(a,p,y={}){const _={type:"Feature"};return(y.id===0||y.id)&&(_.id=y.id),y.bbox&&(_.bbox=y.bbox),_.properties=p||{},_.geometry=a,_}function X_(a,p={}){const y={type:"FeatureCollection"};return p.id&&(y.id=p.id),p.bbox&&(y.bbox=p.bbox),y.features=a,y}function K_(a,p,y={}){return Z_({type:"MultiPoint",coordinates:a},p,y)}function J_(a){if(!a)throw new Error("coord is required");if(!Array.isArray(a)){if(a.type==="Feature"&&a.geometry!==null&&a.geometry.type==="Point")return[...a.geometry.coordinates];if(a.type==="Point")return[...a.coordinates]}if(Array.isArray(a)&&a.length>=2&&!Array.isArray(a[0])&&!Array.isArray(a[1]))return[...a];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Y_(a){return a.type==="Feature"?a.geometry:a}function If(a,p,y={}){if(!a)throw new Error("point is required");if(!p)throw new Error("polygon is required");const _=J_(a),E=Y_(p),T=E.type,C=p.bbox;let c=E.coordinates;if(C&&Q_(_,C)===!1)return!1;T==="Polygon"&&(c=[c]);let B=!1;for(var j=0;j<c.length;++j){const $=W_(_,c[j]);if($===0)return!y.ignoreBoundary;$&&(B=!0)}return B}function Q_(a,p){return p[0]<=a[0]&&p[1]<=a[1]&&p[2]>=a[0]&&p[3]>=a[1]}var e1=If;function h0(a,p,y){if(a!==null)for(var _,E,T,C,c,B,j,$=0,D=0,F,te=a.type,ie=te==="FeatureCollection",W=te==="Feature",Y=ie?a.features.length:1,pe=0;pe<Y;pe++){j=ie?a.features[pe].geometry:W?a.geometry:a,F=j?j.type==="GeometryCollection":!1,c=F?j.geometries.length:1;for(var ye=0;ye<c;ye++){var ve=0,Be=0;if(C=F?j.geometries[ye]:j,C!==null){B=C.coordinates;var Se=C.type;switch($=0,Se){case null:break;case"Point":if(p(B,D,pe,ve,Be)===!1)return!1;D++,ve++;break;case"LineString":case"MultiPoint":for(_=0;_<B.length;_++){if(p(B[_],D,pe,ve,Be)===!1)return!1;D++,Se==="MultiPoint"&&ve++}Se==="LineString"&&ve++;break;case"Polygon":case"MultiLineString":for(_=0;_<B.length;_++){for(E=0;E<B[_].length-$;E++){if(p(B[_][E],D,pe,ve,Be)===!1)return!1;D++}Se==="MultiLineString"&&ve++,Se==="Polygon"&&Be++}Se==="Polygon"&&ve++;break;case"MultiPolygon":for(_=0;_<B.length;_++){for(Be=0,E=0;E<B[_].length;E++){for(T=0;T<B[_][E].length-$;T++){if(p(B[_][E][T],D,pe,ve,Be)===!1)return!1;D++}Be++}ve++}break;case"GeometryCollection":for(_=0;_<C.geometries.length;_++)if(h0(C.geometries[_],p)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function t1(a,p){if(a.type==="Feature")p(a,0);else if(a.type==="FeatureCollection")for(var y=0;y<a.features.length&&p(a.features[y],y)!==!1;y++);}function ng(a,p){var y,_,E,T,C,c,B,j,$,D,F=0,te=a.type==="FeatureCollection",ie=a.type==="Feature",W=te?a.features.length:1;for(y=0;y<W;y++){for(c=te?a.features[y].geometry:ie?a.geometry:a,j=te?a.features[y].properties:ie?a.properties:{},$=te?a.features[y].bbox:ie?a.bbox:void 0,D=te?a.features[y].id:ie?a.id:void 0,B=c?c.type==="GeometryCollection":!1,C=B?c.geometries.length:1,E=0;E<C;E++){if(T=B?c.geometries[E]:c,T===null){if(p(null,F,j,$,D)===!1)return!1;continue}switch(T.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(p(T,F,j,$,D)===!1)return!1;break}case"GeometryCollection":{for(_=0;_<T.geometries.length;_++)if(p(T.geometries[_],F,j,$,D)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}F++}}function n1(a,p){const y=[];return t1(a,function(_){let E=!1;if(_.geometry.type==="Point")ng(p,function(C){If(_,C)&&(E=!0)}),E&&y.push(_);else if(_.geometry.type==="MultiPoint"){var T=[];ng(p,function(C){h0(_,function(c){If(c,C)&&(E=!0,T.push(c))})}),E&&y.push(K_(T,_.properties))}else throw new Error("Input geometry must be a Point or MultiPoint")}),X_(y)}var r1=n1;function Af(a,p){try{return e1(a,p)}catch(y){return console.warn("Error in pointInPolygon:",y),!1}}function cd(a,p){const y=[a[1],a[0]];return p.find(_=>Af(y,_))}function i1(a,p){if(!a||!p||a===p)return!1;const y=a.geometry.coordinates[0],_=p.geometry.coordinates[0];for(let E=0;E<y.length-1;E++)for(let T=0;T<_.length-1;T++)if(Math.min(Math.hypot(y[E][0]-_[T][0],y[E][1]-_[T][1]),Math.hypot(y[E+1][0]-_[T][0],y[E+1][1]-_[T][1]),Math.hypot(y[E][0]-_[T+1][0],y[E][1]-_[T+1][1]),Math.hypot(y[E+1][0]-_[T+1][0],y[E+1][1]-_[T+1][1]))<1e-5)return!0;return!1}function ah(a,p){if(!p)return[];try{const y={type:"FeatureCollection",features:a.map((E,T)=>({type:"Feature",geometry:{type:"Point",coordinates:[E[1],E[0]]},properties:{index:T}}))};return r1(y,p).features.map(E=>E.properties.index)}catch(y){return console.warn("Error in getNodesInPolygon:",y),[]}}function o1(a,p,y){var E;const _=[];for(let T=0;T<a.length;T++){const C=a[T];if(((E=C[2])==null?void 0:E.nodeFunction)==="connection"){const B=[C[0],C[1]],j=cd(B,[p,y]);if(j===p||j===y){const $=ah(a,p),D=ah(a,y);$.length>0&&D.length>0&&_.push({index:T,node:C,polygon:j})}}}return _}function s1(a,p,y){const _=ah(a,p),E=ah(a,y);if(_.length===0||E.length===0)return[];const T=[];for(const C of _)for(const c of E){const B=Math.hypot(a[C][0]-a[c][0],a[C][1]-a[c][1]);T.push({from:C,to:c,distance:B})}return T.sort((C,c)=>C.distance-c.distance).slice(0,2)}function d0(a,p,y,_){function E($,D,F){const te=(D[0]-$[0])*(F[1]-D[1])-(D[1]-$[1])*(F[0]-D[0]);return Math.abs(te)<1e-10?0:te>0?1:2}function T($,D,F){return D[1]<=Math.max($[1],F[1])&&D[1]>=Math.min($[1],F[1])&&D[0]<=Math.max($[0],F[0])&&D[0]>=Math.min($[0],F[0])}const C=E(a,p,y),c=E(a,p,_),B=E(y,_,a),j=E(y,_,p);return!!(C!==c&&B!==j||C===0&&T(a,y,p)||c===0&&T(a,_,p)||B===0&&T(y,a,_)||j===0&&T(y,p,_))}function Lf(a,p,y,_){var C;const E=[a[1],a[0]],T=[p[1],p[0]];for(const c of y){if(ah(_,c).length>0)continue;const j=c.geometry.coordinates[0];for(let $=0;$<j.length-1;$++){const D=j[$],F=j[$+1];if(d0(E,T,D,F))return console.log(`Line blocked by empty polygon: ${(C=c.properties)==null?void 0:C.subGroupValue}`),!0}}return!1}function p0(a,p,y){const _=[a[1],a[0]],E=[p[1],p[0]];for(const T of y){const C=T.geometry.coordinates[0],c=[a[1],a[0]],B=[p[1],p[0]],j=Af(c,T),$=Af(B,T);if(!(j&&$))for(let D=0;D<C.length-1;D++){const F=C[D],te=C[D+1];if(d0(_,E,F,te))return!0}}return!1}function rg(a,p,y){var j,$;const _=p[a],E=[_[0],_[1]],T=cd(E,y),C=(j=_[2])==null?void 0:j.nodeFunction,c=[],B=4e-4;for(let D=0;D<p.length;D++){if(D===a)continue;const F=p[D],te=[F[0],F[1]],ie=cd(te,y),W=($=F[2])==null?void 0:$.nodeFunction,Y=Math.hypot(E[0]-te[0],E[1]-te[1]);let pe=!1,ye="",ve=Y;C==="connection"||W==="connection"?Y<=B&&(pe=!0,ye="connection-priority",ve=Y*1):T&&ie&&T===ie?(pe=!0,ye="same-polygon",ve=Y):Y<=B?Lf(E,te,y,p)?(pe=!1,ye="blocked-by-empty-polygon"):T&&ie&&T!==ie?o1(p,T,ie).length>0?(pe=!0,ye="cross-polygon-penalized",ve=Y*2):(pe=!0,ye="cross-polygon-80m",ve=Y*1.2):T&&ie&&i1(T,ie)?s1(p,T,ie).some(Ke=>Ke.from===a&&Ke.to===D||Ke.from===D&&Ke.to===a)?(pe=!0,ye="closest-door-between-polygons",ve=Y*.8):(pe=!0,ye="cross-polygon-80m",ve=Y*1.2):(pe=!0,ye="cross-polygon-80m",ve=Y):!p0(E,te,y)&&!Lf(E,te,y,p)&&T&&ie&&T===ie&&(pe=!0,ye="unobstructed-same-polygon",ve=Y),pe&&c.push({index:D,weight:ve,reason:ye})}return c}function a1(a,p,y,_){var pe,ye,ve,Be,Se,Ke;console.log(`Starting Enhanced Dijkstra with Connection Priority from node ${p} to ${y}`),console.log(`Start node: [${a[p][0]}, ${a[p][1]}] - ${((pe=a[p][2])==null?void 0:pe.name)||((ye=a[p][2])==null?void 0:ye.nodeFunction)}`),console.log(`End node: [${a[y][0]}, ${a[y][1]}] - ${((ve=a[y][2])==null?void 0:ve.name)||((Be=a[y][2])==null?void 0:Be.nodeFunction)}`);const E=[a[p][0],a[p][1]],T=cd(E,_),C=T?(Se=T.properties)==null?void 0:Se.subGroupValue:"outside",c=(Ke=a[p][2])==null?void 0:Ke.nodeFunction;console.log(`Start node: area=${C}, type=${c}`);const B=rg(p,a,_);console.log(`Start node has ${B.length} neighbors with connection priority:`),B.sort((Je,He)=>{var wt,Tt;const gt=((wt=a[Je.index][2])==null?void 0:wt.nodeFunction)==="connection",pt=((Tt=a[He.index][2])==null?void 0:Tt.nodeFunction)==="connection";return gt&&!pt?-1:!gt&&pt?1:Je.weight-He.weight}).slice(0,10).forEach(Je=>{var Tt,bt,mt;const He=[a[Je.index][0],a[Je.index][1]],gt=cd(He,_),pt=gt?(Tt=gt.properties)==null?void 0:Tt.subGroupValue:"outside",wt=(bt=a[Je.index][2])==null?void 0:bt.nodeFunction;console.log(`  -> Node ${Je.index} (${((mt=a[Je.index][2])==null?void 0:mt.name)||"unnamed"}) area=${pt}, type=${wt}, weight=${Je.weight.toFixed(6)}, reason=${Je.reason}`)});const $={},D={},F=new Set;a.forEach((Je,He)=>{$[He]=1/0,D[He]=null,F.add(He)}),$[p]=0;let te=0;const ie=a.length*2;for(;F.size>0&&te<ie;){te++;let Je=null,He=1/0;for(const pt of F)$[pt]<He&&(He=$[pt],Je=pt);if(Je===null||He===1/0){console.log(`Dijkstra stopped: no more reachable nodes (iteration ${te})`);break}if(Je===y){console.log(`Dijkstra reached destination in ${te} iterations`);break}F.delete(Je);const gt=rg(Je,a,_);for(const pt of gt){if(!F.has(pt.index))continue;const wt=$[Je]+pt.weight;wt<$[pt.index]&&($[pt.index]=wt,D[pt.index]=Je,pt.index===y&&console.log(`Found path to destination! Distance: ${wt}, via ${pt.reason}`))}}console.log(`Final distance to destination: ${$[y]}`);const W=[];let Y=y;if($[y]===1/0)return console.log("Destination is not reachable from start node"),[];for(;Y!==null;)W.unshift(a[Y]),Y=D[Y];return console.log(`Enhanced Dijkstra found path with ${W.length} nodes`),console.log("Path details:"),W.forEach((Je,He)=>{var wt,Tt;const gt=(wt=Je[2])==null?void 0:wt.nodeFunction,pt=((Tt=Je[2])==null?void 0:Tt.name)||"unnamed";console.log(`  ${He}: ${pt} (${gt})`)}),W.length>0&&W[0]===a[p]?W:[]}function l1(a,p,y){if(console.log("analyzeRoute called with Connection Priority Logic"),!y)return{path:[a.coordinates,p.coordinates],steps:[]};const _=y.features.filter(W=>{var Y;return W.geometry.type==="Point"&&((Y=W.properties)==null?void 0:Y.nodeFunction)==="door"}),E=y.features.filter(W=>{var Y;return W.geometry.type==="Point"&&((Y=W.properties)==null?void 0:Y.nodeFunction)==="connection"}),T=y.features.filter(W=>{var Y,pe;return W.geometry.type==="Polygon"&&((pe=(Y=W.properties)==null?void 0:Y.subGroupValue)==null?void 0:pe.startsWith("sahn-"))});console.log(`Found ${_.length} doors, ${E.length} connections, ${T.length} sahns`);const C=[];_.forEach(W=>{const[Y,pe]=W.geometry.coordinates;C.push([pe,Y,W.properties,0,W])}),E.forEach(W=>{const[Y,pe]=W.geometry.coordinates;C.push([pe,Y,W.properties,0,W])}),console.log(`Total nodes available: ${C.length}`),console.log("Polygon analysis with turf.js:");const c=[];T.forEach(W=>{var pe;const Y=ah(C,W);console.log(`  ${(pe=W.properties)==null?void 0:pe.subGroupValue}: ${Y.length} nodes`),Y.length===0&&c.push(W)}),console.log(`Found ${c.length} empty polygons:`),c.forEach(W=>{var Y;console.log(`  - ${(Y=W.properties)==null?void 0:Y.subGroupValue}`)});function B(W,Y=0){const pe=[];for(let ye=0;ye<C.length;ye++){const ve=C[ye],Be=[ve[0],ve[1]];if(!p0(W,Be,T)&&!Lf(W,Be,T,C)){const Se=Math.hypot(W[0]-Be[0],W[1]-Be[1]);pe.push({index:ye,node:ve,distance:Se})}}return pe.sort((ye,ve)=>ye.distance-ve.distance),console.log(`Found ${pe.length} unobstructed nodes from [${W[0]}, ${W[1]}]`),pe[Y]||null}const j=B(a.coordinates,0),$=B(p.coordinates,0);if(console.log("Start entry:",j?`Node ${j.index}`:"None"),console.log("End entry:",$?`Node ${$.index}`:"None"),!j||!$){console.log("Could not find valid entry/exit points, returning direct path");const W={type:"Feature",geometry:{type:"LineString",coordinates:[a.coordinates,p.coordinates].map(Y=>[Y[1],Y[0]])}};return{path:[a.coordinates,p.coordinates],steps:[{coordinates:p.coordinates,type:"stepArriveDestination",name:p.name||""}],geo:W,alternatives:[]}}const D=a1(C,j.index,$.index,T);if(D.length===0||D.length===1){console.log("No valid path found between entry points, returning direct path");const W={type:"Feature",geometry:{type:"LineString",coordinates:[a.coordinates,p.coordinates].map(Y=>[Y[1],Y[0]])}};return{path:[a.coordinates,p.coordinates],steps:[{coordinates:p.coordinates,type:"stepArriveDestination",name:p.name||""}],geo:W,alternatives:[]}}const F=[a.coordinates],te=[];D.forEach(W=>{const Y=[W[0],W[1]];F.push(Y),W[2].nodeFunction==="door"?te.push({coordinates:Y,type:"stepPassDoor",name:W[2].name||""}):W[2].nodeFunction==="connection"&&te.push({coordinates:Y,type:"stepPassConnection",title:W[2].subGroup||W[2].name||""})}),F.push(p.coordinates),te.push({coordinates:p.coordinates,type:"stepArriveDestination",name:p.name||""});const ie={type:"Feature",geometry:{type:"LineString",coordinates:F.map(W=>[W[1],W[0]])}};return console.log(`Final path has ${F.length} points`),{path:F,geo:ie,steps:te,alternatives:[]}}const c1=()=>{var We,at,rt,we;const[a,p]=ne.useState(!0),y=lc(),_=Hi(),{origin:E,destination:T,routeGeo:C,setOrigin:c,setDestination:B,setRouteGeo:j,setRouteSteps:$,setAlternativeRoutes:D}=ld(),F=uh(Ve=>Ve.language),[te,ie]=ne.useState(E||{name:_.formatMessage({id:"defaultBabRezaName"}),coordinates:[36.297,59.6069]}),[W,Y]=ne.useState(T||{name:_.formatMessage({id:"destSahnEnqelabName"}),coordinates:[36.2975,59.6072]}),pe=C;ne.useEffect(()=>{c(te)},[te,c]),ne.useEffect(()=>{B(W)},[W,B]);const[ye,ve]=ne.useState("walking"),[Be,Se]=ne.useState("male"),[Ke,Je]=ne.useState({time:"9",distance:"75"}),[He,gt]=ne.useState(!1),[pt,wt]=ne.useState(null);id.useEffect(()=>{window.scrollTo(0,0)},[]),id.useEffect(()=>{ye==="walking"?Je({time:"9",distance:"75"}):ye==="electric-car"?Je({time:"5",distance:"120"}):ye==="wheelchair"&&Je({time:"12",distance:"65"})},[ye]),ne.useEffect(()=>{te.coordinates||navigator.geolocation.getCurrentPosition(Ve=>ie(St=>({...St,coordinates:[Ve.coords.latitude,Ve.coords.longitude]})),Ve=>console.error("gps error",Ve))},[te.coordinates]),ne.useEffect(()=>{const Ve=kp(F);fetch(Ve).then(St=>St.json()).then(wt).catch(St=>console.error("failed to load geojson",St))},[F]),ne.useEffect(()=>{W.coordinates||Y(Ve=>({...Ve,coordinates:[36.2975,59.6072]}))},[W.coordinates]),ne.useEffect(()=>{if(!pt)return;const{geo:Ve,steps:St,alternatives:At}=l1(te,W,pt);j(Ve),$(St),D(At)},[pt,te,W,j,$,D]);const Tt=()=>{p(!a);const Ve=te;ie(W),Y(Ve)},bt=()=>{switch(ye){case"walking":return v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#181717",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M13 4m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),v.jsx("path",{d:"M7 21l3 -4"}),v.jsx("path",{d:"M16 21l-2 -4l-3 -3l1 -6"}),v.jsx("path",{d:"M6 12l2 -3l4 -1l3 3l3 1"})]});case"electric-car":return v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"#181717",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M14 5a1 1 0 0 1 .694 .28l.087 .095l3.699 4.625h.52a3 3 0 0 1 2.995 2.824l.005 .176v4a1 1 0 0 1 -1 1h-1.171a3.001 3.001 0 0 1 -5.658 0h-4.342a3.001 3.001 0 0 1 -5.658 0h-1.171a1 1 0 0 1 -1 -1v-6l.007 -.117l.008 -.056l.017 -.078l.012 -.036l.014 -.05l2.014 -5.034a1 1 0 0 1 .928 -.629zm-7 11a1 1 0 1 0 0 2a1 1 0 0 0 0 -2m10 0a1 1 0 1 0 0 2a1 1 0 0 0 0 -2m-6 -9h-5.324l-1.2 3h6.524zm2.52 0h-.52v3h2.92z"})]});case"wheelchair":return v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#181717",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M11 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),v.jsx("path",{d:"M11 7l0 8l4 0l4 5"}),v.jsx("path",{d:"M11 11l5 0"}),v.jsx("path",{d:"M7 11.5a5 5 0 1 0 6 7.5"})]});default:return null}},mt=()=>{y("/rng")},Ct=()=>{y("/rop")},Ze=()=>{gt(!1)},Pt=()=>{gt(!1)};return v.jsxs("div",{className:"final-search-page",lang:F,children:[v.jsxs("div",{className:"header",children:[v.jsx("button",{className:"back-btn",onClick:()=>y(-1),children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M5 12l14 0"}),v.jsx("path",{d:"M15 16l4 -4"}),v.jsx("path",{d:"M15 8l4 4"})]})}),v.jsx("h1",{children:v.jsx(qe,{id:"finalSearchTitle"})}),v.jsxs("div",{className:"menu-container",children:[v.jsx("button",{className:`menu-btn ${He?"active":""}`,onClick:()=>gt(!He),children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),v.jsx("path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),v.jsx("path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]})}),v.jsxs("div",{className:`menu-dropdown ${He?"open":""}`,children:[v.jsxs("button",{className:"menu-item",onClick:Ze,children:[v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M17.286 21.09q -1.69 .001 -5.288 -2.615q -3.596 2.617 -5.288 2.616q -2.726 0 -.495 -6.8q -9.389 -6.775 2.135 -6.775h.076q 1.785 -5.516 3.574 -5.516q 1.785 0 3.574 5.516h.076q 11.525 0 2.133 6.774q 2.23 6.802 -.497 6.8"})]}),v.jsx(qe,{id:"saveDestination"})]}),v.jsxs("button",{className:"menu-item",onClick:Pt,children:[v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M6 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),v.jsx("path",{d:"M18 6m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),v.jsx("path",{d:"M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),v.jsx("path",{d:"M8.7 10.7l6.6 -3.4"}),v.jsx("path",{d:"M8.7 13.3l6.6 3.4"})]}),v.jsx(qe,{id:"shareRoute"})]})]})]})]}),v.jsx("div",{className:"mpr",children:v.jsxs(Tp,{mapLib:su,mapStyle:Mp,style:{width:"100%",height:"100%"},initialViewState:{longitude:((((We=te.coordinates)==null?void 0:We[1])??0)+(((at=W.coordinates)==null?void 0:at[1])??0))/2,latitude:((((rt=te.coordinates)==null?void 0:rt[0])??0)+(((we=W.coordinates)==null?void 0:we[0])??0))/2,zoom:18},attributionControl:!1,children:[te.coordinates&&v.jsx(xs,{longitude:te.coordinates[1],latitude:te.coordinates[0],anchor:"bottom",children:v.jsx("div",{className:"marker-circle"})}),W.coordinates&&v.jsx(xs,{longitude:W.coordinates[1],latitude:W.coordinates[0],anchor:"bottom",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",viewBox:"0 0 24 24",fill:"#F44336",children:v.jsx("path",{d:"M18.364 4.636a9 9 0 0 1 .203 12.519l-.203 .21l-4.243 4.242a3 3 0 0 1 -4.097 .135l-.144 -.135l-4.244 -4.243a9 9 0 0 1 12.728 -12.728zm-6.364 3.364a3 3 0 1 0 0 6a3 3 0 1 0 0 -6z"})})}),pe&&v.jsx(sh,{id:"main-route",type:"geojson",data:pe,children:v.jsx(oh,{id:"main-line",type:"line",paint:{"line-color":"#2196F3","line-width":6}})}),v.jsx(qf,{})]})}),v.jsxs("div",{className:"location-section-container",children:[v.jsxs("div",{className:"location-icons-container",children:[v.jsx("div",{className:"location-icon origin-icon",children:v.jsx("div",{className:"n-circle"})}),v.jsxs("div",{className:"tdots",children:[v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#e0e0e0","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"icon icon-tabler icons-tabler-outline icon-tabler-dots-vertical",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),v.jsx("path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),v.jsx("path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]}),v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#e0e0e0","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"icon icon-tabler icons-tabler-outline icon-tabler-dots-vertical",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),v.jsx("path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),v.jsx("path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]})]}),v.jsx("div",{className:"location-icon destination-icon",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"#F44336",children:v.jsx("path",{d:"M18.364 4.636a9 9 0 0 1 .203 12.519l-.203 .21l-4.243 4.242a3 3 0 0 1 -4.097 .135l-.144 -.135l-4.244 -4.243a9 9 0 0 1 12.728 -12.728zm-6.364 3.364a3 3 0 1 0 0 6a3 3 0 1 0 0 -6z"})})})]}),v.jsxs("div",{className:"location-section",children:[v.jsxs("div",{className:"location-input origin-input",children:[v.jsx("div",{className:"location-details",children:v.jsx("div",{className:"location-name",children:te.name})}),v.jsx("div",{className:`current-location-label ${a?"visible":"hidden"}`,children:v.jsx(qe,{id:"mapCurrentLocationName"})})]}),v.jsx("div",{className:"swap-container",children:v.jsx("button",{className:"swap-btn",onClick:Tt,children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M3 9l4 -4l4 4m-4 -4v14"}),v.jsx("path",{d:"M21 15l-4 4l-4 -4m4 4v-14"})]})})}),v.jsx("div",{className:"location-input destination-input",children:v.jsx("div",{className:"location-details",children:v.jsx("div",{className:"location-name",children:W.name})})})]})]}),v.jsxs("div",{className:"options-section",children:[v.jsxs("div",{className:"options-row",children:[v.jsxs("button",{className:`transport-btn ${ye==="walking"?"active":""}`,onClick:()=>ve("walking"),children:[v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:ye==="walking"?"#2196F3":"#666",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M13 4m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),v.jsx("path",{d:"M7 21l3 -4"}),v.jsx("path",{d:"M16 21l-2 -4l-3 -3l1 -6"}),v.jsx("path",{d:"M6 12l2 -3l4 -1l3 3l3 1"})]}),v.jsx(qe,{id:"transportWalk"})]}),v.jsxs("button",{className:`transport-btn ${ye==="electric-car"?"active":""}`,onClick:()=>ve("electric-car"),children:[v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:ye==="electric-car"?"#2196F3":"#666",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M14 5a1 1 0 0 1 .694 .28l.087 .095l3.699 4.625h.52a3 3 0 0 1 2.995 2.824l.005 .176v4a1 1 0 0 1 -1 1h-1.171a3.001 3.001 0 0 1 -5.658 0h-4.342a3.001 3.001 0 0 1 -5.658 0h-1.171a1 1 0 0 1 -1 -1v-6l.007 -.117l.008 -.056l.017 -.078l.012 -.036l.014 -.05l2.014 -5.034a1 1 0 0 1 .928 -.629zm-7 11a1 1 0 1 0 0 2a1 1 0 0 0 0 -2m10 0a1 1 0 1 0 0 2a1 1 0 0 0 0 -2m-6 -9h-5.324l-1.2 3h6.524zm2.52 0h-.52v3h2.92z"})]}),v.jsx(qe,{id:"transportCar"})]}),v.jsxs("button",{className:`transport-btn ${ye==="wheelchair"?"active":""}`,onClick:()=>ve("wheelchair"),children:[v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:ye==="wheelchair"?"#2196F3":"#666",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M11 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),v.jsx("path",{d:"M11 7l0 8l4 0l4 5"}),v.jsx("path",{d:"M11 11l5 0"}),v.jsx("path",{d:"M7 11.5a5 5 0 1 0 6 7.5"})]}),v.jsx(qe,{id:"transportWheelchair"})]})]}),v.jsx("div",{className:"options-divider"}),v.jsxs("div",{className:"options-row",children:[v.jsxs("button",{className:`gender-btn ${Be==="male"?"active":""}`,onClick:()=>Se("male"),children:[v.jsx("div",{className:"gender-circle",children:Be==="male"&&v.jsx("div",{className:"gender-circle-fill"})}),v.jsx(qe,{id:"routeForMen"})]}),v.jsxs("button",{className:`gender-btn ${Be==="female"?"active":""}`,onClick:()=>Se("female"),children:[v.jsx("div",{className:"gender-circle",children:Be==="female"&&v.jsx("div",{className:"gender-circle-fill"})}),v.jsx(qe,{id:"routeForWomen"})]})]})]}),v.jsxs("div",{className:"route-info",children:[v.jsx("div",{className:"route-summary",children:v.jsx(qe,{id:"routeSummary",values:{origin:te.name,destination:W.name}})}),v.jsxs("div",{className:"info-details",children:[v.jsxs("div",{className:"info-time",children:[bt(),v.jsxs("span",{children:[Ke.time," ",v.jsx(qe,{id:"minutesUnit"})]})]}),v.jsxs("div",{className:"info-distance",children:[v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#181717",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M3 19a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}),v.jsx("path",{d:"M19 7a2 2 0 1 0 0 -4a2 2 0 0 0 0 4z"}),v.jsx("path",{d:"M11 19h5.5a3.5 3.5 0 0 0 0 -7h-8a3.5 3.5 0 0 1 0 -7h4.5"})]}),v.jsxs("span",{children:[Ke.distance," ",v.jsx(qe,{id:"meters"})]})]})]})]}),v.jsx("div",{className:"action-gap"}),v.jsxs("div",{className:"action-buttons2",children:[v.jsxs("button",{className:"navigate-btn",onClick:mt,children:[v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"#fff",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M11.092 2.581a1 1 0 0 1 1.754 -.116l.062 .116l8.005 17.365c.198 .566 .05 1.196 -.378 1.615a1.53 1.53 0 0 1 -1.459 .393l-7.077 -2.398l-6.899 2.338a1.535 1.535 0 0 1 -1.52 -.231l-.112 -.1c-.398 -.386 -.556 -.954 -.393 -1.556l.047 -.15l7.97 -17.276z"})]}),v.jsx(qe,{id:"startRouting"})]}),v.jsxs("button",{className:"overview-btn",onClick:Ct,children:[v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#2196F3",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M3 19a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}),v.jsx("path",{d:"M19 7a2 2 0 1 0 0 -4a2 2 0 0 0 0 4z"}),v.jsx("path",{d:"M11 19h5.5a3.5 3.5 0 0 0 0 -7h-8a3.5 3.5 0 0 1 0 -7h4.5"})]}),v.jsx(qe,{id:"routeOverview"})]})]})]})},u1=()=>{const[a,p]=ne.useState(null),y=lc(),_=uh(c=>c.setLanguage),E=Hi(),T=[{id:1,name:"",code:"(FA)",locale:"fa"},{id:2,name:"",code:"(Ur)",locale:"ur"},{id:3,name:"",code:"(AR)",locale:"ar"},{id:4,name:"English",code:"(EN)",locale:"en"}],C=()=>{if(a){const c=T.find(B=>B.id===a);c&&_(c.locale),y("/location")}};return v.jsxs("div",{className:"lang-page-container",children:[v.jsx("img",{src:xp,alt:E.formatMessage({id:"logoAlt"}),className:"lang-logo"}),v.jsxs("div",{className:"lang-welcome-text",children:[v.jsx("h1",{className:"welcome-heading",children:v.jsx(qe,{id:"welcome"})}),v.jsx("p",{className:"welcome-paragraph",dangerouslySetInnerHTML:{__html:E.formatMessage({id:"selectLanguage"})}})]}),v.jsx("div",{className:"lang-options-list",children:T.map(c=>v.jsxs("div",{className:`lang-option ${a===c.id?"selected":""}`,onClick:()=>p(c.id),children:[v.jsx("div",{className:"selection-circle",children:a===c.id&&v.jsx("div",{className:"inner-circle"})}),v.jsxs("div",{className:"lang-text-container",children:[v.jsx("span",{className:`lang-code lang-code-${c.code.replace(/[()]/g,"").toLowerCase()}`,children:c.code}),v.jsx("span",{className:`lang-name ${c.locale==="en"?"force-rtl":""}`,children:c.name})]})]},c.id))}),v.jsx("button",{className:`lang-login-btn ${a?"":"disabled"}`,disabled:!a,onClick:C,children:v.jsx(qe,{id:"loginButton"})})]})},h1=()=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"phone-icon",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M5 4h4l2 5l-2.5 1.5a11 11 0 0 0 5 5l1.5 -2.5l5 2v4a2 2 0 0 1 -2 2a16 16 0 0 1 -15 -15a2 2 0 0 1 2 -2"})]}),d1=()=>{const a=Hi(),[p,y]=ne.useState(""),[_,E]=ne.useState(!1),[T,C]=ne.useState(""),[c,B]=ne.useState(["","","","",""]),j=te=>/^09[0-9]{9}$/.test(te),$=te=>{const ie=te.target.value.replace(/\D/g,"");ie.length<=11&&y(ie)},D=(te,ie)=>{const W=[...c];W[ie]=te.target.value,B(W),te.target.value&&ie<4&&document.getElementById(`code-input-${ie+1}`).focus()},F=te=>{if(te.preventDefault(),j(p)){const ie=`+98-${p.slice(1,4)} ${p.slice(4,7)} ${p.slice(7)}`;C(ie),E(!0)}};return _?v.jsxs("div",{className:"verification-container",children:[v.jsx("h2",{className:"verification-title",children:v.jsx(qe,{id:"enterVerification"})}),v.jsx("p",{className:"verification-description",children:v.jsx(qe,{id:"sentCode",values:{phone:v.jsx("span",{dir:"ltr",style:{display:"inline-block"},children:T})}})}),v.jsxs("div",{className:"verification-edit",children:[v.jsx("span",{children:v.jsx(qe,{id:"wrongPhone"})}),v.jsx("button",{type:"button",className:"edit-button",onClick:()=>E(!1),children:v.jsx(qe,{id:"edit"})})]}),v.jsx("div",{className:"verification-code-inputs",children:c.map((te,ie)=>v.jsx("input",{id:`code-input-${ie}`,type:"text",maxLength:"1",value:te,onChange:W=>D(W,ie),className:"code-input",dir:"ltr"},ie))}),v.jsx("div",{className:"verification-resend",children:v.jsx("span",{children:v.jsx(qe,{id:"resendCode"})})})]}):v.jsxs("form",{className:"login-form",onSubmit:F,children:[v.jsx("div",{className:"form-group",children:v.jsxs("div",{className:"phone-input-container",children:[v.jsx(h1,{}),v.jsx("input",{type:"tel",value:p,onChange:$,placeholder:a.formatMessage({id:"phonePlaceholder"}),dir:"ltr",className:"phone-input",maxLength:"11"})]})}),v.jsx("button",{type:"submit",className:`login-button ${j(p)?"active":""}`,disabled:!j(p),children:v.jsx(qe,{id:"loginButton"})})]})},p1=()=>{const a=Hi();return v.jsx("div",{className:"login-page",children:v.jsxs("div",{className:"login-container",children:[v.jsx("div",{className:"logo-container",children:v.jsx("img",{src:xp,alt:a.formatMessage({id:"logoAlt"}),className:"login-logo"})}),v.jsxs("div",{className:"login-text-content",children:[v.jsx("h1",{className:"login-title",children:v.jsx(qe,{id:"loginTitle"})}),v.jsx("p",{className:"login-description",dangerouslySetInnerHTML:{__html:a.formatMessage({id:"enterPhone"})}})]}),v.jsx(d1,{}),v.jsx("div",{className:"login-terms",children:v.jsx("p",{dangerouslySetInnerHTML:{__html:a.formatMessage({id:"terms"})}})})]})})},f1={sahn:"#4caf50",eyvan:"#2196f3",ravaq:"#9c27b0",masjed:"#ff9800",madrese:"#3f51b5",khadamat:"#607d8b",elmi:"#00bcd4",cemetery:"#795548",other:"#757575"},m1={door:"",connection:"",elevator:"",escalator:"",ramp:"",stairs:"",service:"",other:""},g1=(a,p,y=35,_=1)=>{const E=f1[a]||"#999",T=m1[p]||"";return v.jsx("div",{style:{width:y,height:y,backgroundColor:E,opacity:_,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:18,fontWeight:"bold",boxShadow:"0 2px 6px rgba(0,0,0,0.3)"},children:T})},y1=({setUserLocation:a,selectedDestination:p,isSwapped:y,onMapClick:_,isSelectingLocation:E,selectedCategory:T})=>{const C=Hi(),[c,B]=ne.useState({latitude:36.288,longitude:59.6157,zoom:16}),[j,$]=ne.useState(null),[D,F]=ne.useState(null),[te,ie]=ne.useState(null),[W,Y]=ne.useState(null),[pe,ye]=ne.useState(null),ve=uh(He=>He.language),Be=ne.useCallback(He=>{B(He.viewState)},[]);ne.useEffect(()=>{if(p&&p.coordinates){const[He,gt]=p.coordinates;F({lat:He,lng:gt})}else F(null)},[p]),ne.useEffect(()=>{const He=sessionStorage.getItem("qrLat"),gt=sessionStorage.getItem("qrLng");if(He&&gt){const bt={lat:parseFloat(He),lng:parseFloat(gt)};$(bt),a({name:C.formatMessage({id:"mapCurrentLocationName"}),coordinates:[bt.lat,bt.lng]}),B(mt=>({...mt,latitude:bt.lat,longitude:bt.lng}));return}const pt=bt=>{const mt={lat:bt.coords.latitude,lng:bt.coords.longitude};$(mt),a({name:C.formatMessage({id:"mapCurrentLocationName"}),coordinates:[mt.lat,mt.lng]}),B(Ct=>({...Ct,latitude:mt.lat,longitude:mt.lng}))},wt=bt=>{console.error("Error getting location",bt);const mt={lat:36.288,lng:59.6157};$(mt),a({name:C.formatMessage({id:"defaultBabRezaName"}),coordinates:[mt.lat,mt.lng]})};navigator.geolocation.getCurrentPosition(pt,wt,{enableHighAccuracy:!1,timeout:1e4,maximumAge:6e4});const Tt=navigator.geolocation.watchPosition(pt,wt,{enableHighAccuracy:!1,maximumAge:0,timeout:1e4});return()=>navigator.geolocation.clearWatch(Tt)},[a,C]),ne.useEffect(()=>{if(y&&j&&D){const He=j;$(D),F(He)}},[y]),ne.useEffect(()=>{const He=kp(ve);fetch(He).then(gt=>gt.json()).then(Y).catch(gt=>console.error("failed to load geojson",gt))},[ve]);const Se=He=>{if(E){const{lng:gt,lat:pt}=He.lngLat,wt={lat:pt,lng:gt};ie(wt),_&&_(wt)}};ne.useEffect(()=>{if(j&&D&&W){const He=W.features.filter(bt=>{var mt;return bt.geometry.type==="Point"&&["door","connection"].includes((mt=bt.properties)==null?void 0:mt.nodeFunction)}),gt=bt=>{let mt=null,Ct=1/0;return He.forEach(Ze=>{const[Pt,We]=Ze.geometry.coordinates,at=Math.hypot(Pt-bt.lng,We-bt.lat);at<Ct&&(Ct=at,mt={lng:Pt,lat:We})}),mt},pt=gt(j),wt=gt(D),Tt=[[j.lng,j.lat],...pt?[[pt.lng,pt.lat]]:[],...wt?[[wt.lng,wt.lat]]:[],[D.lng,D.lat]];ye(Tt)}else ye(null)},[j,D,W]);const Ke=W?W.features.filter(He=>He.geometry.type==="Point"):[],Je=W?W.features.filter(He=>He.geometry.type==="Polygon"||He.geometry.type==="MultiPolygon"):[];return v.jsxs(Tp,{mapLib:su,mapStyle:Mp,style:{width:"100%",height:"100%"},...c,onMove:Be,onClick:Se,interactive:!0,children:[j&&v.jsx(xs,{longitude:j.lng,latitude:j.lat,anchor:"center",children:v.jsx("div",{style:{width:20,height:20,backgroundColor:"white",borderRadius:"50%",border:"6px solid #4285F4"}})}),D&&v.jsx(xs,{longitude:D.lng,latitude:D.lat,anchor:"bottom",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"#F44336",children:v.jsx("path",{d:"M18.364 4.636a9 9 0 0 1 .203 12.519l-.203 .21l-4.243 4.242a3 3 0 0 1 -4.097 .135l-.144 -.135l-4.244 -4.243a9 9 0 0 1 12.728 -12.728zm-6.364 3.364a3 3 0 1 0 0 6a3 3 0 1 0 0 -6z"})})}),te&&E&&v.jsx(xs,{longitude:te.lng,latitude:te.lat,anchor:"center",children:v.jsx("div",{style:{width:24,height:24,backgroundColor:"#1E90FF",borderRadius:"50%",border:"3px solid white"}})}),pe&&v.jsx(sh,{id:"route",type:"geojson",data:{type:"Feature",geometry:{type:"LineString",coordinates:pe}},children:v.jsx(oh,{id:"route-line",type:"line",paint:{"line-color":"#4285F4","line-width":4,"line-opacity":.7}})}),Je.length>0&&v.jsx(sh,{id:"polygons",type:"geojson",data:{type:"FeatureCollection",features:Je},children:v.jsx(oh,{id:"polygon-lines",type:"line",paint:{"line-color":"#333","line-width":2}})}),Ke.map((He,gt)=>{var at;const[pt,wt]=He.geometry.coordinates,{group:Tt,nodeFunction:bt}=He.properties||{},mt=T&&He.properties&&He.properties[T.property]===T.value,Ct=!!T,Ze=Ct?mt?40:25:35,Pt=Ct?mt?1:.4:1,We=((at=He.properties)==null?void 0:at.uniqueId)||gt;return v.jsx(xs,{longitude:pt,latitude:wt,anchor:"center",children:v.jsxs("div",{style:{position:"relative"},children:[g1(Tt,bt,Ze,Pt),mt&&v.jsx("div",{style:{position:"absolute",top:-4,left:-4,right:-4,bottom:-4,border:"2px solid #e53935",borderRadius:"50%"}})]})},We)})]})},fp=[{value:"sahn",label:"groupCourtyardPlural",icon:"courtyard",property:"group",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 12v.01"/><path d="M3 21h18"/><path d="M6 21v-16a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v16"/></svg>'},{value:"eyvan",label:"groupEyvanPlural",icon:"eyvan",property:"group",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21l18 0"/><path d="M4 21v-15a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v15"/><path d="M9 21v-8a3 3 0 0 1 6 0v8"/></svg>'},{value:"ravaq",label:"groupRavaqPlural",icon:"shrine",property:"group",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 18l2 -13l2 -2l2 2l2 13"/><path d="M5 21v-3h14v3"/><path d="M3 21l18 0"/></svg>'},{value:"masjed",label:"groupMosques",icon:"mosque",property:"group",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21h7v-2a2 2 0 1 1 4 0v2h7"/><path d="M4 21v-10"/><path d="M20 21v-10"/><path d="M4 16h3v-3h10v3h3"/><path d="M17 13a5 5 0 0 0 -10 0"/><path d="M21 10.5c0 -.329 -.077 -.653 -.224 -.947l-.776 -1.553l-.776 1.553a2.118 2.118 0 0 0 -.224 .947a.5 .5 0 0 0 .5 .5h1a.5 .5 0 0 0 .5 -.5z"/><path d="M5 10.5c0 -.329 -.077 -.653 -.224 -.947l-.776 -1.553l-.776 1.553a2.118 2.118 0 0 0 -.224 .947a.5 .5 0 0 0 .5 .5h1a.5 .5 0 0 0 .5 -.5z"/><path d="M12 2a2 2 0 1 0 2 2"/><path d="M12 6v2"/></svg>'},{value:"madrese",label:"groupSchools",icon:"school",property:"group",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 9l-10 -4l-10 4l10 4l10 -4v6"/><path d="M6 10.6v5.4a6 3 0 0 0 12 0v-5.4"/></svg>'},{value:"khadamat",label:"groupServices",icon:"services",property:"group",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21h4l13 -13a1.5 1.5 0 0 0 -4 -4l-13 13v4"/><path d="M14.5 5.5l4 4"/><path d="M12 8l-5 -5l-4 4l5 5"/><path d="M7 8l-1.5 1.5"/><path d="M16 12l5 5l-4 4l-5 -5"/><path d="M16 17l-1.5 1.5"/></svg>'},{value:"elmi",label:"groupCulture",icon:"culture",property:"group",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"/><path d="M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"/><path d="M3 6l0 13"/><path d="M12 6l0 13"/><path d="M21 6l0 13"/></svg>'},{value:"cemetery",label:"groupCemetery",icon:"cemetery",property:"group",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 4v16"/><path d="M19 4v16"/><path d="M9 4v16"/><path d="M15 4v16"/><path d="M3 4h18"/></svg>'},{value:"qrcode",label:"groupQRScan",icon:"qr-code",property:"group",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"/><path d="M7 17l0 .01"/><path d="M14 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"/><path d="M7 7l0 .01"/><path d="M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"/><path d="M17 7l0 .01"/><path d="M14 14l3 0"/><path d="M20 14l0 .01"/><path d="M14 14l0 3"/><path d="M14 20l3 0"/><path d="M17 17l3 0"/><path d="M20 17l0 3"/></svg>'},{value:"other",label:"groupOther",icon:"other",property:"group",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 9l3 3l-3 3"/><path d="M13 15l3 0"/><path d="M3 4m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"/></svg>'}],hp={sahn:[{value:"sahn-enqelab",label:" ",icon:"courtyard",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 12v.01"/><path d="M3 21h18"/><path d="M6 21v-16a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v16"/></svg>',description:"",img:"/img/s1.jpg"},{value:"sahn-azadi",label:" ",icon:"courtyard",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 12v.01"/><path d="M3 21h18"/><path d="M6 21v-16a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v16"/></svg>',description:"",img:"/img/s2.jpg"},{value:"sahn-jomhouri",label:"  ",icon:"courtyard",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 12v.01"/><path d="M3 21h18"/><path d="M6 21v-16a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v16"/></svg>',description:"",img:"/img/s3.jpg"},{value:"sahn-qods",label:" ",icon:"courtyard",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 12v.01"/><path d="M3 21h18"/><path d="M6 21v-16a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v16"/></svg>',description:"",img:"/img/s4.jpg"},{value:"sahn-jame-razavi",label:"  ",icon:"courtyard",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 12v.01"/><path d="M3 21h18"/><path d="M6 21v-16a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v16"/></svg>',description:"",img:"/img/s5.jpg"},{value:"sahn-ghadir",label:" ",icon:"courtyard",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 12v.01"/><path d="M3 21h18"/><path d="M6 21v-16a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v16"/></svg>',description:"",img:"/img/s6.jpg"},{value:"sahn-kosar",label:" ",icon:"courtyard",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 12v.01"/><path d="M3 21h18"/><path d="M6 21v-16a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v16"/></svg>',description:"",img:"/img/s7.jpg"},{value:"sahn-emam-hasan",label:"   ",icon:"courtyard",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 12v.01"/><path d="M3 21h18"/><path d="M6 21v-16a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v16"/></svg>',description:"",img:"/img/s8.jpg"},{value:"sahn-payambar-azam",label:"  ",icon:"courtyard",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 12v.01"/><path d="M3 21h18"/><path d="M6 21v-16a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v16"/></svg>',description:"",img:"/img/s9.jpg"}],eyvan:[{value:"eyvan-abbasi",label:" ",icon:"eyvan",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21l18 0"/><path d="M4 21v-15a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v15"/><path d="M9 21v-8a3 3 0 0 1 6 0v8"/></svg>',description:"",img:"/img/s10.png"},{value:"eyvan-talayi",label:" ",icon:"eyvan",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21l18 0"/><path d="M4 21v-15a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v15"/><path d="M9 21v-8a3 3 0 0 1 6 0v8"/></svg>',description:"",img:"/img/s11.jpg"},{value:"eyvan-saat",label:" ",icon:"eyvan",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21l18 0"/><path d="M4 21v-15a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v15"/><path d="M9 21v-8a3 3 0 0 1 6 0v8"/></svg>',description:"",img:"/img/s12.jpg"},{value:"eyvan-naqare",label:" ",icon:"eyvan",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21l18 0"/><path d="M4 21v-15a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v15"/><path d="M9 21v-8a3 3 0 0 1 6 0v8"/></svg>',description:"",img:"/img/s13.png"},{value:"eyvan-valiasr",label:" ",icon:"eyvan",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21l18 0"/><path d="M4 21v-15a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v15"/><path d="M9 21v-8a3 3 0 0 1 6 0v8"/></svg>',description:"",img:"/img/s14.jpg"},{value:"eyvan-talaye-azadi",label:"  ",icon:"eyvan",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21l18 0"/><path d="M4 21v-15a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v15"/><path d="M9 21v-8a3 3 0 0 1 6 0v8"/></svg>',description:"",img:"/img/s15.jpg"}],ravaq:[{value:"daralhefaz",label:"",icon:"shrine",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 18l2 -13l2 -2l2 2l2 13"/><path d="M5 21v-3h14v3"/><path d="M3 21l18 0"/></svg>',description:"",img:"/img/s16.jpg"},{value:"daralsiade",label:"",icon:"shrine",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 18l2 -13l2 -2l2 2l2 13"/><path d="M5 21v-3h14v3"/><path d="M3 21l18 0"/></svg>',description:"",img:"/img/s17.jpg"},{value:"daralsalam",label:"",icon:"shrine",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 18l2 -13l2 -2l2 2l2 13"/><path d="M5 21v-3h14v3"/><path d="M3 21l18 0"/></svg>',description:"",img:"/img/s18.jpg"},{value:"hatamkhani",label:" ",icon:"shrine",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 18l2 -13l2 -2l2 2l2 13"/><path d="M5 21v-3h14v3"/><path d="M3 21l18 0"/></svg>',description:"",img:"/img/s19.jpg"},{value:"gonbadallahverdi",label:"  ",icon:"shrine",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 18l2 -13l2 -2l2 2l2 13"/><path d="M5 21v-3h14v3"/><path d="M3 21l18 0"/></svg>',description:"",img:"/img/s20.jpg"},{value:"daralziafe",label:"",icon:"shrine",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 18l2 -13l2 -2l2 2l2 13"/><path d="M5 21v-3h14v3"/><path d="M3 21l18 0"/></svg>',description:"",img:"/img/s21.jpg"},{value:"tohidkhane",label:"",icon:"shrine",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 18l2 -13l2 -2l2 2l2 13"/><path d="M5 21v-3h14v3"/><path d="M3 21l18 0"/></svg>',description:"",img:"/img/s22.jpg"},{value:"daralfeyz",label:"",icon:"shrine",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 18l2 -13l2 -2l2 2l2 13"/><path d="M5 21v-3h14v3"/><path d="M3 21l18 0"/></svg>',description:"",img:"/img/s22.jpg"},{value:"daralsaade",label:"",icon:"shrine",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 18l2 -13l2 -2l2 2l2 13"/><path d="M5 21v-3h14v3"/><path d="M3 21l18 0"/></svg>',description:"",img:"/img/s24.jpg"},{value:"goharsad",label:"",icon:"shrine",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 18l2 -13l2 -2l2 2l2 13"/><path d="M5 21v-3h14v3"/><path d="M3 21l18 0"/></svg>',description:"",img:"/img/s25.jpg"}],masjed:[{value:"balasar",label:"",icon:"mosque",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21h7v-2a2 2 0 1 1 4 0v2h7"/><path d="M4 21v-10"/><path d="M20 21v-10"/><path d="M4 16h3v-3h10v3h3"/><path d="M17 13a5 5 0 0 0 -10 0"/><path d="M21 10.5c0 -.329 -.077 -.653 -.224 -.947l-.776 -1.553l-.776 1.553a2.118 2.118 0 0 0 -.224 .947a.5 .5 0 0 0 .5 .5h1a.5 .5 0 0 0 .5 -.5z"/><path d="M5 10.5c0 -.329 -.077 -.653 -.224 -.947l-.776 -1.553l-.776 1.553a2.118 2.118 0 0 0 -.224 .947a.5 .5 0 0 0 .5 .5h1a.5 .5 0 0 0 .5 -.5z"/><path d="M12 2a2 2 0 1 0 2 2"/><path d="M12 6v2"/></svg>',description:"",img:"/img/s26.jpg"},{value:"goharsad",label:"",icon:"mosque",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21h7v-2a2 2 0 1 1 4 0v2h7"/><path d="M4 21v-10"/><path d="M20 21v-10"/><path d="M4 16h3v-3h10v3h3"/><path d="M17 13a5 5 0 0 0 -10 0"/><path d="M21 10.5c0 -.329 -.077 -.653 -.224 -.947l-.776 -1.553l-.776 1.553a2.118 2.118 0 0 0 -.224 .947a.5 .5 0 0 0 .5 .5h1a.5 .5 0 0 0 .5 -.5z"/><path d="M5 10.5c0 -.329 -.077 -.653 -.224 -.947l-.776 -1.553l-.776 1.553a2.118 2.118 0 0 0 -.224 .947a.5 .5 0 0 0 .5 .5h1a.5 .5 0 0 0 .5 -.5z"/><path d="M12 2a2 2 0 1 0 2 2"/><path d="M12 6v2"/></svg>',description:"",img:"/img/s27.jpg"}],madrese:[{value:"payeen-khyaban",label:" ",icon:"school",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 9l-10 -4l-10 4l10 4l10 -4v6"/><path d="M6 10.6v5.4a6 3 0 0 0 12 0v-5.4"/></svg>',description:""},{value:"bala-khyaban",label:" ",icon:"school",svg:'<svg xmlns="http://www.w3.org/24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 9l-10 -4l-10 4l10 4l10 -4v6"/><path d="M6 10.6v5.4a6 3 0 0 0 12 0v-5.4"/></svg>',description:""},{value:"navvab",label:"",icon:"school",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 9l-10 -4l-10 4l10 4l10 -4v6"/><path d="M6 10.6v5.4a6 3 0 0 0 12 0v-5.4"/></svg>',description:""},{value:"dodar",label:"",icon:"school",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 9l-10 -4l-10 4l10 4l10 -4v6"/><path d="M6 10.6v5.4a6 3 0 0 0 12 0v-5.4"/></svg>',description:""}],khadamat:[{value:"wc",label:"",icon:"services",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21h4l13 -13a1.5 1.5 0 0 0 -4 -4l-13 13v4"/><path d="M14.5 5.5l4 4"/><path d="M12 8l-5 -5l-4 4l5 5"/><path d="M7 8l-1.5 1.5"/><path d="M16 12l5 5l-4 4l-5 -5"/><path d="M16 17l-1.5 1.5"/></svg>',description:""},{value:"telephon",label:"",icon:"services",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21h4l13 -13a1.5 1.5 0 0 0 -4 -4l-13 13v4"/><path d="M14.5 5.5l4 4"/><path d="M12 8l-5 -5l-4 4l5 5"/><path d="M7 8l-1.5 1.5"/><path d="M16 12l5 5l-4 4l-5 -5"/><path d="M16 17l-1.5 1.5"/></svg>',description:""},{value:"otag-madadjo",label:" ",icon:"services",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21h4l13 -13a1.5 1.5 0 0 0 -4 -4l-13 13v4"/><path d="M14.5 5.5l4 4"/><path d="M12 8l-5 -5l-4 4l5 5"/><path d="M7 8l-1.5 1.5"/><path d="M16 12l5 5l-4 4l-5 -5"/><path d="M16 17l-1.5 1.5"/></svg>',description:""},{value:"namaazkhane",label:"",icon:"services",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21h4l13 -13a1.5 1.5 0 0 0 -4 -4l-13 13v4"/><path d="M14.5 5.5l4 4"/><path d="M12 8l-5 -5l-4 4l5 5"/><path d="M7 8l-1.5 1.5"/><path d="M16 12l5 5l-4 4l-5 -5"/><path d="M16 17l-1.5 1.5"/></svg>',description:""},{value:"ketabkhane",label:"",icon:"services",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21h4l13 -13a1.5 1.5 0 0 0 -4 -4l-13 13v4"/><path d="M14.5 5.5l4 4"/><path d="M12 8l-5 -5l-4 4l5 5"/><path d="M7 8l-1.5 1.5"/><path d="M16 12l5 5l-4 4l-5 -5"/><path d="M16 17l-1.5 1.5"/></svg>',description:""},{value:"room",label:"",icon:"services",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 21h4l13 -13a1.5 1.5 0 0 0 -4 -4l-13 13v4"/><path d="M14.5 5.5l4 4"/><path d="M12 8l-5 -5l-4 4l5 5"/><path d="M7 8l-1.5 1.5"/><path d="M16 12l5 5l-4 4l-5 -5"/><path d="M16 17l-1.5 1.5"/></svg>',description:""}],elmi:[{value:"hoze-elmiye",label:" ",icon:"culture",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"/><path d="M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"/><path d="M3 6l0 13"/><path d="M12 6l0 13"/><path d="M21 6l0 13"/></svg>',description:""},{value:"markaz-motaleat",label:" ",icon:"culture",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"/><path d="M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"/><path d="M3 6l0 13"/><path d="M12 6l0 13"/><path d="M21 6l0 13"/></svg>',description:""},{value:"uni",label:"",icon:"culture",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"/><path d="M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"/><path d="M3 6l0 13"/><path d="M12 6l0 13"/><path d="M21 6l0 13"/></svg>',description:""}],cemetery:[{value:"cemetery",label:"",icon:"cemetery",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 4v16"/><path d="M19 4v16"/><path d="M9 4v16"/><path d="M15 4v16"/><path d="M3 4h18"/></svg>',description:""},{value:"yadbod",label:"",icon:"cemetery",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 4v16"/><path d="M19 4v16"/><path d="M9 4v16"/><path d="M15 4v16"/><path d="M3 4h18"/></svg>',description:""}],qrcode:[{value:"bakhsh-control",label:" ",icon:"qr-code",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"/><path d="M7 17l0 .01"/><path d="M14 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"/><path d="M7 7l0 .01"/><path d="M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"/><path d="M17 7l0 .01"/><path d="M14 14l3 0"/><path d="M20 14l0 .01"/><path d="M14 14l0 3"/><path d="M14 20l3 0"/><path d="M17 17l3 0"/><path d="M20 17l0 3"/></svg>',description:""},{value:"cctv",label:"  ",icon:"qr-code",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"/><path d="M7 17l0 .01"/><path d="M14 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"/><path d="M7 7l0 .01"/><path d="M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"/><path d="M17 7l0 .01"/><path d="M14 14l3 0"/><path d="M20 14l0 .01"/><path d="M14 14l0 3"/><path d="M14 20l3 0"/><path d="M17 17l3 0"/><path d="M20 17l0 3"/></svg>',description:""}],other:[{value:"other",label:"",icon:"other",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 9l3 3l-3 3"/><path d="M13 15l3 0"/><path d="M3 4m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"/></svg>',description:""}]},ig=Hf(Gf((a,p)=>({recentSearches:[],addSearch:y=>a(_=>{const E=_.recentSearches.findIndex(C=>C.name===y.name&&C.location===y.location);let T=[..._.recentSearches];return E!==-1&&T.splice(E,1),T.unshift({...y,id:y.id||Date.now()}),{recentSearches:T.slice(0,5)}}),clearSearches:()=>a({recentSearches:[]})}),{name:"recent-search-storage",version:1})),v1=()=>{const a=lc(),p=Hi(),[y,_]=ne.useState(!1),[E,T]=ne.useState(!1),[C,c]=ne.useState(null),B=sessionStorage.getItem("qrLat"),j=sessionStorage.getItem("qrLng"),$=B&&j?{name:p.formatMessage({id:"mapCurrentLocationName"}),coordinates:[parseFloat(B),parseFloat(j)]}:{name:p.formatMessage({id:"defaultBabRezaName"}),coordinates:[36.297,59.6069]},[D,F]=ne.useState($),[te,ie]=ne.useState(""),[W,Y]=ne.useState(null),[pe,ye]=ne.useState(!1),[ve,Be]=ne.useState(!1),[Se,Ke]=ne.useState(null),[Je,He]=ne.useState(null),gt=ld(Qe=>Qe.setOrigin),pt=ld(Qe=>Qe.setDestination),wt=uh(Qe=>Qe.language),Tt=ig(Qe=>Qe.recentSearches),bt=ig(Qe=>Qe.addSearch);ne.useRef(null),ne.useRef(null);const mt=ne.useRef(null),Ct=ne.useRef(null),Ze=ne.useRef(null),[Pt,We]=ne.useState(null),[at,rt]=ne.useState([]),we=Qe=>{const tt=[],Ot=tn=>{typeof tn[0]=="number"?tt.push(tn):tn.forEach(Ot)};Ot(Qe);const ln=tt.map(tn=>tn[1]),dt=tt.map(tn=>tn[0]);return[(Math.min(...dt)+Math.max(...dt))/2,(Math.min(...ln)+Math.max(...ln))/2]},Ve=Qe=>{if(!Qe)return null;const{geometry:tt}=Qe;return tt.type==="Point"?tt.coordinates:tt.type==="Polygon"||tt.type==="MultiPolygon"?we(tt.coordinates):null},St=te?at.map(Qe=>{var Ot,ln,dt;const tt=Ve(Qe);return{id:((Ot=Qe.properties)==null?void 0:Ot.uniqueId)||Qe.id,name:((ln=Qe.properties)==null?void 0:ln.name)||"",location:((dt=Qe.properties)==null?void 0:dt.subGroup)||"",coordinates:tt?[tt[1],tt[0]]:null}}):Tt;ne.useEffect(()=>{D!=null&&D.coordinates&&(C!=null&&C.coordinates)&&(gt({name:D.name,coordinates:D.coordinates}),pt({name:C.name,coordinates:C.coordinates}),a("/fs"))},[D,C,a,gt,pt]);const At=Qe=>{W==="destination"?(c(Qe),bt(Qe),_(!1)):(F({name:Qe.name,coordinates:Qe.coordinates}),T(!1)),ie("")},zt=Qe=>{ie(Qe.target.value)};ne.useEffect(()=>{if(te&&!Pt){const Qe=kp(wt);fetch(Qe).then(tt=>tt.json()).then(We).catch(tt=>console.error("failed to load geojson",tt))}},[te,Pt,wt]),ne.useEffect(()=>{if(Pt&&te){const Qe=Pt.features.filter(tt=>{var dt,tn;const Ot=((dt=tt.properties)==null?void 0:dt.name)||"",ln=((tn=tt.properties)==null?void 0:tn.subGroup)||"";return Ot.includes(te)||ln.includes(te)});rt(Qe)}else rt([])},[te,Pt]);const Nt=()=>{const Qe=D;F(C?{name:C.name,coordinates:C.coordinates}:null),c(Qe?{name:Qe.name,location:Qe.name,coordinates:Qe.coordinates}:null),Ze.current&&(Ze.current.classList.add("rotate"),setTimeout(()=>{Ze.current&&Ze.current.classList.remove("rotate")},500))},Kt=Qe=>{He(tt=>tt&&tt.value===Qe.value?null:Qe)},Yt=Qe=>{Y(Qe),Qe==="destination"?_(!0):(T(!0),navigator.geolocation&&navigator.geolocation.getCurrentPosition(()=>ye(!0),()=>ye(!1)))},Ft=()=>{F(Qe=>({...Qe,name:p.formatMessage({id:"mapCurrentLocationName"})})),T(!1)},An=()=>{Be(!0),_(!1),T(!1)},br=Qe=>{ve&&(W==="destination"?c({name:p.formatMessage({id:"mapSelectedLocation"}),location:p.formatMessage({id:"mapSelectedLocationFromMap"}),coordinates:[Qe.lat,Qe.lng]}):F({name:p.formatMessage({id:"mapSelectedLocation"}),coordinates:[Qe.lat,Qe.lng]}),Be(!1))},Qn=()=>{ie("")},jn=()=>{Be(!1),W==="destination"?_(!0):T(!0)};ne.useEffect(()=>{const Qe=tt=>{mt.current&&!mt.current.contains(tt.target)&&(_(!1),T(!1),ie(""))};return document.addEventListener("mousedown",Qe),()=>{document.removeEventListener("mousedown",Qe)}},[]),ne.useEffect(()=>{(y||E)&&Ct.current&&Ct.current.focus()},[y,E]);const si=Qe=>v.jsx("div",{dangerouslySetInnerHTML:{__html:Qe}});return v.jsxs("div",{className:"map-routing-page",children:[v.jsxs("header",{className:"map-routing-header",children:[ve?v.jsx("button",{className:"map-back-button",onClick:jn,children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-right",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M5 12l14 0"}),v.jsx("path",{d:"M15 16l4 -4"}),v.jsx("path",{d:"M15 8l4 4"})]})}):v.jsx("button",{className:"map-back-button",onClick:()=>a(-1),children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-right",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M5 12l14 0"}),v.jsx("path",{d:"M15 16l4 -4"}),v.jsx("path",{d:"M15 8l4 4"})]})}),v.jsx("h1",{className:"map-header-title",children:ve?p.formatMessage({id:"mapSelectFromMap"}):p.formatMessage({id:"mapRoutingTitle"})}),v.jsx("button",{className:"map-profile-button",onClick:()=>a("/Profile"),children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",className:"icon icon-tabler icons-tabler-filled icon-tabler-user",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M12 2a5 5 0 1 1 -5 5l.005 -.217a5 5 0 0 1 4.995 -4.783z"}),v.jsx("path",{d:"M14 14a5 5 0 0 1 5 5v1a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-1a5 5 0 0 1 5 -5h4z"})]})})]}),!ve&&v.jsx("div",{className:"map-categories-scroll",children:v.jsx("div",{className:"map-categories-list",children:fp.map(Qe=>v.jsxs("div",{className:`map-category-item ${Je&&Je.value===Qe.value?"active":""}`,onClick:()=>Kt(Qe),children:[v.jsx("div",{className:`map-category-icon ${Qe.icon}`,children:si(Qe.svg)}),v.jsx("span",{className:"map-category-name",children:p.formatMessage({id:Qe.label})})]},Qe.value))})}),v.jsxs("div",{className:"map-routing-container",children:[v.jsx(y1,{setUserLocation:F,selectedDestination:C,onMapClick:br,isSelectingLocation:ve,selectedCategory:Je}),v.jsx("button",{className:"map-gps-button",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M12 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),v.jsx("path",{d:"M12 12m-8 0a8 8 0 1 0 16 0a8 8 0 1 0 -16 0"}),v.jsx("path",{d:"M12 2l0 2"}),v.jsx("path",{d:"M12 20l0 2"}),v.jsx("path",{d:"M20 12l2 0"}),v.jsx("path",{d:"M2 12l2 0"})]})})]}),!y&&!E&&!ve&&v.jsxs("div",{className:"map-destination-input-container",ref:mt,children:[v.jsxs("div",{className:"location-icons-container",children:[v.jsx("div",{className:"location-icon origin-icon",children:v.jsx("div",{className:"n-circle"})}),v.jsxs("div",{className:"tdots",children:[v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#e0e0e0","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"icon icon-tabler icons-tabler-outline icon-tabler-dots-vertical",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),v.jsx("path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),v.jsx("path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]}),v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#e0e0e0","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"icon icon-tabler icons-tabler-outline icon-tabler-dots-vertical",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),v.jsx("path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),v.jsx("path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]})]}),v.jsx("div",{className:"location-icon destination-icon",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"#F44336",children:v.jsx("path",{d:"M18.364 4.636a9 9 0 0 1 .203 12.519l-.203 .21l-4.243 4.242a3 3 0 0 1 -4.097 .135l-.144 -.135l-4.244 -4.243a9 9 0 0 1 12.728 -12.728zm-6.364 3.364a3 3 0 1 0 0 6a3 3 0 1 0 0 -6z"})})})]}),v.jsxs("div",{className:"map-location-inputs-container",children:[v.jsx("div",{className:"map-inputs-divider"}),v.jsx("div",{className:"map-current-location",onClick:()=>Yt("origin"),children:v.jsx("div",{className:"map-location-text",children:D?v.jsxs(v.Fragment,{children:[v.jsx("span",{className:"map-location-name",children:D.name}),v.jsx("span",{className:"map-location-label",children:p.formatMessage({id:"mapCurrentOriginLabel"})})]}):v.jsx("input",{type:"text",className:"map-origin-input",placeholder:p.formatMessage({id:"originPlaceholder"}),readOnly:!0})})}),v.jsx("button",{className:"map-swap-button",onClick:Nt,ref:Ze,children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrows-sort",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M3 9l4 -4l4 4m-4 -4v14"}),v.jsx("path",{d:"M21 15l-4 4l-4 -4m4 4v-14"})]})}),v.jsx("div",{className:"map-destination-input-wrapper",onClick:()=>Yt("destination"),children:v.jsx("input",{type:"text",placeholder:p.formatMessage({id:"destinationPlaceholder"}),value:C?C.name:"",readOnly:!0})})]})]}),(y||E)&&v.jsxs("div",{className:`map-search-modal ${y||E?"fade-in":""}`,ref:mt,children:[v.jsx("div",{className:"map-search-header",children:v.jsxs("form",{className:"map-search-form",children:[v.jsx("button",{className:"map-modal-back-button",onClick:()=>W==="destination"?_(!1):T(!1),children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-right",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M5 12l14 0"}),v.jsx("path",{d:"M15 16l4 -4"}),v.jsx("path",{d:"M15 8l4 4"})]})}),v.jsx("input",{type:"text",placeholder:W==="destination"?p.formatMessage({id:"destinationSearchPlaceholder"}):p.formatMessage({id:"originSearchPlaceholder"}),value:te,onChange:zt,autoFocus:!0,ref:Ct}),te&&v.jsx("button",{type:"button",className:"map-clear-search",onClick:Qn,children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M18 6l-12 12"}),v.jsx("path",{d:"M6 6l12 12"})]})})]})}),!te&&v.jsxs("div",{className:"map-options-section",children:[v.jsxs("div",{className:"map-option-item",onClick:An,children:[v.jsx("div",{className:"map-option-icon",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"#1E90FF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-photo-pin",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M15 8h.01"}),v.jsx("path",{d:"M12.5 21h-6.5a3 3 0 0 1 -3 -3v-12a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v5.5"}),v.jsx("path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l2.5 2.5"}),v.jsx("path",{d:"M21.121 20.121a3 3 0 1 0 -4.242 0c.418 .419 1.125 1.045 2.121 1.879c1.051 -.89 1.759 -1.516 2.121 -1.879z"}),v.jsx("path",{d:"M19 18v.01"})]})}),v.jsx("span",{className:"map-option-text",children:v.jsx(qe,{id:"chooseFromMap"})})]}),pe&&W==="origin"&&v.jsxs("div",{className:"map-option-item",onClick:Ft,children:[v.jsx("div",{className:"map-option-icon",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"#1E90FF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-current-location",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M12 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),v.jsx("path",{d:"M12 12m-8 0a8 8 0 1 0 16 0a8 8 0 1 0 -16 0"}),v.jsx("path",{d:"M12 2l0 2"}),v.jsx("path",{d:"M12 20l0 2"}),v.jsx("path",{d:"M20 12l2 0"}),v.jsx("path",{d:"M2 12l2 0"})]})}),v.jsx("span",{className:"map-option-text",children:p.formatMessage({id:"mapCurrentLocation"},{loc:D.name})})]})]}),!te&&v.jsxs(v.Fragment,{children:[v.jsx("h2",{className:"map-recent-title",children:p.formatMessage({id:"mapRecentSearches"})}),Tt.length===0?v.jsx("p",{className:"map-no-recent",children:p.formatMessage({id:"mapNoRecentSearches"})}):v.jsx("ul",{className:"map-destination-list",children:Tt.map(Qe=>v.jsxs("li",{onClick:()=>At(Qe),children:[v.jsx("div",{className:"map-recent-icon",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"icon icon-tabler icons-tabler-outline icon-tabler-clock-down",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M20.984 12.535a9 9 0 1 0 -8.431 8.448"}),v.jsx("path",{d:"M12 7v5l3 3"}),v.jsx("path",{d:"M19 16v6"}),v.jsx("path",{d:"M22 19l-3 3l-3 -3"})]})}),v.jsxs("div",{className:"map-destination-info",children:[v.jsx("span",{className:"map-destination-name",children:Qe.name}),v.jsx("span",{className:"map-destination-location",children:Qe.location})]}),v.jsx("button",{className:"map-recent-option",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-dots-vertical",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),v.jsx("path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),v.jsx("path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]})})]},Qe.id))})]}),te&&St.length>0&&v.jsx("ul",{className:"map-destination-list",children:St.map(Qe=>v.jsxs("li",{onClick:()=>At(Qe),children:[v.jsx("div",{className:"map-recent-icon",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"icon icon-tabler icons-tabler-outline icon-tabler-clock-down",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M20.984 12.535a9 9 0 1 0 -8.431 8.448"}),v.jsx("path",{d:"M12 7v5l3 3"}),v.jsx("path",{d:"M19 16v6"}),v.jsx("path",{d:"M22 19l-3 3l-3 -3"})]})}),v.jsxs("div",{className:"map-destination-info",children:[v.jsx("span",{className:"map-destination-name",children:Qe.name}),v.jsx("span",{className:"map-destination-location",children:Qe.location})]}),v.jsx("button",{className:"map-recent-option",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-dots-vertical",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),v.jsx("path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),v.jsx("path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]})})]},Qe.id))})]})]})},x1=({userLocation:a,routeSteps:p,currentStep:y,isInfoModalOpen:_,isMapModalOpen:E,is3DView:T,routeGeo:C})=>{const c=ne.useRef(null),B=a&&a.length===2?a:[36.297,59.606];return ne.useEffect(()=>{if(c.current){const j=setTimeout(()=>{c.current.resize(),a&&a.length===2&&c.current.flyTo({center:[a[1],a[0]],zoom:18,pitch:T?60:0})},400);return()=>clearTimeout(j)}},[E,a,T]),ne.useEffect(()=>{c.current&&c.current.easeTo({pitch:T?60:0,duration:500})},[T]),ne.useEffect(()=>{if(c.current&&C&&y<C.geometry.coordinates.length-1){const j=C.geometry.coordinates[y],$=C.geometry.coordinates[y+1],D=new su.LngLatBounds([j[0],j[1]],[j[0],j[1]]);D.extend([$[0],$[1]]),c.current.fitBounds(D,{padding:80,duration:700})}},[y,C]),v.jsxs(Tp,{ref:c,mapLib:su,mapStyle:Mp,initialViewState:{longitude:B[1],latitude:B[0],zoom:18,pitch:0},attributionControl:!1,terrain:T?{source:"terrain",exaggeration:1.5}:void 0,children:[v.jsx(xs,{longitude:a[1],latitude:a[0],anchor:"bottom",children:v.jsx("div",{className:"user-marker",children:""})}),p&&y<p.length&&p[y].coordinates&&v.jsx(xs,{longitude:p[y].coordinates[1],latitude:p[y].coordinates[0],anchor:"bottom",children:v.jsx("div",{className:"current-step-marker",children:""})}),v.jsx(qf,{})]})},_1=()=>{const a=Hi(),[p,y]=ne.useState(!0),[_,E]=ne.useState(!0),[T,C]=ne.useState(null),[c,B]=ne.useState(0),[j,$]=ne.useState([36.288,59.6157]),[D,F]=ne.useState(!1),[te,ie]=ne.useState(!1),[W,Y]=ne.useState(null),[pe,ye]=ne.useState("on"),[ve,Be]=ne.useState(!1),[Se,Ke]=ne.useState(!1),[Je,He]=ne.useState(!1),[gt,pt]=ne.useState(!1),[wt,Tt]=ne.useState(!1),[bt,mt]=ne.useState(!1),[Ct,Ze]=ne.useState(!1),Pt=lc(),{routeSteps:We,routeGeo:at,alternativeRoutes:rt}=ld(),we=tt=>{if(!tt)return 0;let Ot=0;return tt.forEach(ln=>{const dt=ln.time;dt.includes(a.formatMessage({id:"minutesUnit"}))?Ot+=parseInt(dt.split(" ")[0]):dt.includes(a.formatMessage({id:"secondsUnit"}))&&(Ot+=Math.ceil(parseInt(dt.split(" ")[0])/60))}),Ot},Ve=tt=>{if(tt<1){const dt=tt*60;return`${Math.round(dt)} ${a.formatMessage({id:"secondsUnit"})}`}const Ot=Math.floor(tt),ln=Math.round((tt-Ot)*60);return ln>0?`${Ot} ${a.formatMessage({id:"minutesUnit"})} ${ln} ${a.formatMessage({id:"secondsUnit"})}`:`${Ot} ${a.formatMessage({id:"minutesUnit"})}`},St=tt=>{const Ot=new Date,ln=new Date(Ot.getTime()+tt*6e4);let dt=ln.getHours();const tn=ln.getMinutes().toString().padStart(2,"0");return dt=dt%12,dt=dt||12,`${dt}:${tn}`};ne.useEffect(()=>{fetch("./data/routeData.json").then(tt=>tt.json()).then(tt=>{const Ot=tt.route.steps,ln=we(Ot),dt=Ve(ln),tn=St(ln);C({...tt.route,totalTime:dt,arrivalTime:tn})}).catch(tt=>console.error("Error loading route data:",tt))},[]),ne.useEffect(()=>{if(!We||We.length===0||!at)return;const tt=We.map((kn,rr)=>{let On=0;if(rr>0){const[Hr,Le]=at.geometry.coordinates[rr-1],[Xe,Sr]=at.geometry.coordinates[rr];On=Math.hypot(Xe-Hr,Sr-Le)*1e5}const Fr=a.formatMessage({id:kn.type},{name:kn.name,title:kn.title,num:rr+1});return{id:rr+1,instruction:Fr,distance:`${Math.round(On)} ${a.formatMessage({id:"meters"})}`,time:`${Math.max(1,Math.round(On/60))} ${a.formatMessage({id:"minutesUnit"})}`,coordinates:kn.coordinates}}),Ot=we(tt),ln=Ve(Ot),dt=St(Ot),tn=tt.reduce((kn,rr)=>kn+parseInt(rr.distance),0),Br=(rt||[]).map((kn,rr)=>{const On=kn.steps.map((Le,Xe)=>{let Sr=0;if(Xe>0){const[ir,dn]=kn.geo.geometry.coordinates[Xe-1],[Sn,er]=kn.geo.geometry.coordinates[Xe];Sr=Math.hypot(Sn-ir,er-dn)*1e5}return{id:Xe+1,instruction:a.formatMessage({id:Le.type},{name:Le.name,title:Le.title,num:Xe+1}),distance:`${Math.round(Sr)} ${a.formatMessage({id:"meters"})}`,time:`${Math.max(1,Math.round(Sr/60))} ${a.formatMessage({id:"minutesUnit"})}`,coordinates:Le.coordinates}}),Fr=we(On),Hr=On.reduce((Le,Xe)=>Le+parseInt(Xe.distance),0);return{id:rr+1,steps:On,totalTime:Ve(Fr),totalDistance:`${Hr} ${a.formatMessage({id:"meters"})}`,from:kn.from,to:kn.to,via:kn.via}});C({steps:tt,totalTime:ln,arrivalTime:dt,totalDistance:`${tn} ${a.formatMessage({id:"meters"})}`,alternativeRoutes:Br})},[We,at,rt]),ne.useEffect(()=>{if(!T)return;const tt=setInterval(()=>{const Ot=we(T.steps),ln=St(Ot);C(dt=>({...dt,arrivalTime:ln}))},6e4);return()=>clearInterval(tt)},[T]),ne.useEffect(()=>{if(navigator.geolocation){const tt={enableHighAccuracy:!0,timeout:1e4,maximumAge:0},Ot=tn=>{$([tn.coords.latitude,tn.coords.longitude])},ln=tn=>{console.warn(`ERROR(${tn.code}): ${tn.message}`),$([36.288,59.6157])},dt=navigator.geolocation.watchPosition(Ot,ln,tt);return()=>navigator.geolocation.clearWatch(dt)}},[]),ne.useEffect(()=>{if(!T||!ve)return;const tt=setInterval(()=>{c<T.steps.length-1?B(Ot=>Ot+1):(Be(!1),Ze(!1))},3e4);return()=>clearInterval(tt)},[c,T,ve]);const At=()=>{y(!p)},zt=()=>{E(!_)},Nt=()=>{D?(Ke(!0),setTimeout(()=>{F(!1),Ke(!1)},300)):(F(!0),te&&(He(!0),setTimeout(()=>{ie(!1),He(!1)},300)))},Kt=()=>{te?(He(!0),setTimeout(()=>{ie(!1),He(!1)},300)):(ie(!0),D&&(Ke(!0),setTimeout(()=>{F(!1),Ke(!1)},300)))},Yt=()=>{var Ot;const tt=!ve;Be(tt),tt&&c>=((Ot=T==null?void 0:T.steps)==null?void 0:Ot.length)-1&&B(0),!gt&&!wt&&Ze(tt)},Ft=tt=>{Y(tt)},An=tt=>{ye(tt)},br=()=>{mt(Ct),Ze(!1),pt(!0),E(!0)},Qn=()=>{Ze(bt),pt(!1)},jn=()=>{mt(Ct),Ze(!1),Tt(!0),E(!0)},si=()=>{Ze(bt),Tt(!1)},Qe=tt=>{switch(tt){case"right":return v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-right",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M5 12l14 0"}),v.jsx("path",{d:"M15 16l4 -4"}),v.jsx("path",{d:"M15 8l4 4"})]});case"left":return v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-left",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M5 12l14 0"}),v.jsx("path",{d:"M5 12l4 4"}),v.jsx("path",{d:"M5 12l4 -4"})]});case"up":return v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-up",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M12 5l0 14"}),v.jsx("path",{d:"M16 9l-4 -4"}),v.jsx("path",{d:"M8 9l4 -4"})]});case"down":return v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-down",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M12 5l0 14"}),v.jsx("path",{d:"M16 15l-4 4"}),v.jsx("path",{d:"M8 15l4 4"})]});case"bend-right":return v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-merge-alt-left",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M8 7l4 -4l4 4"}),v.jsx("path",{d:"M18 21v.01"}),v.jsx("path",{d:"M18 18.01v.01"}),v.jsx("path",{d:"M17 15.02v.01"}),v.jsx("path",{d:"M14 13.03v.01"}),v.jsx("path",{d:"M12 3v5.394a6.737 6.737 0 0 1 -3 5.606a6.737 6.737 0 0 0 -3 5.606v1.394"})]});case"bend-left":return v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-merge-alt-right",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M16 7l-4 -4l-4 4"}),v.jsx("path",{d:"M6 21v.01"}),v.jsx("path",{d:"M6 18.01v.01"}),v.jsx("path",{d:"M7 15.02v.01"}),v.jsx("path",{d:"M10 13.03v.01"}),v.jsx("path",{d:"M12 3v5.394a6.737 6.737 0 0 0 3 5.606a6.737 6.737 0 0 1 3 5.606v1.394"})]});case"arrived":return v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"#e74c3c",className:"icon icon-tabler icons-tabler-filled icon-tabler-map-pin",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M18.364 4.636a9 9 0 0 1 .203 12.519l-.203 .21l-4.243 4.242a3 3 0 0 1 -4.097 .135l-.144 -.135l-4.244 -4.243a9 9 0 0 1 12.728 -12.728zm-6.364 3.364a3 3 0 1 0 0 6a3 3 0 0 0 0 -6z"})]});default:return v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-right",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M5 12l14 0"}),v.jsx("path",{d:"M15 16l4 -4"}),v.jsx("path",{d:"M15 8l4 4"})]})}};return T?v.jsxs("div",{className:"routing-page",children:[_&&p&&!gt&&!wt&&v.jsx("div",{className:"info-modal-overlay",onClick:zt}),(D||te)&&v.jsx("div",{className:"modal-overlay",onClick:()=>{D&&Nt(),te&&Kt()}}),(D||Se)&&v.jsxs("div",{className:`emergency-modal ${Se?"closing":""}`,children:[v.jsx("div",{className:"modal-toggle2 emergency-toggle",onClick:Nt,children:v.jsx("div",{className:"toggle-handle2"})}),v.jsxs("div",{className:"emergency-modal-content",children:[v.jsx("h3",{className:"emergency-modal-title",children:v.jsx(qe,{id:"emergencyTitle"})}),v.jsx("p",{className:"emergency-modal-subtitle",children:v.jsx(qe,{id:"emergencySubtitle"})}),v.jsxs("div",{className:"emergency-options",children:[v.jsx("button",{className:`emergency-option ${W==="fire"?"selected":""}`,onClick:()=>Ft("fire"),children:v.jsx(qe,{id:"emergencyFire"})}),v.jsx("button",{className:`emergency-option ${W==="theft"?"selected":""}`,onClick:()=>Ft("theft"),children:v.jsx(qe,{id:"emergencyTheft"})}),v.jsx("button",{className:`emergency-option ${W==="medical"?"selected":""}`,onClick:()=>Ft("medical"),children:v.jsx(qe,{id:"emergencyMedical"})}),v.jsx("button",{className:`emergency-option ${W==="missing"?"selected":""}`,onClick:()=>Ft("missing"),children:v.jsx(qe,{id:"emergencyMissing"})})]}),v.jsx("div",{className:"emergency-description",children:v.jsx("textarea",{placeholder:a.formatMessage({id:"emergencyPlaceholder"}),className:"emergency-textarea"})}),v.jsx("button",{className:"emergency-submit-button",children:v.jsx(qe,{id:"emergencySubmit"})})]})]}),(te||Je)&&v.jsxs("div",{className:`sound-modal ${Je?"closing":""}`,children:[v.jsx("div",{className:"modal-toggle2 sound-toggle",onClick:Kt,children:v.jsx("div",{className:"toggle-handle2"})}),v.jsxs("div",{className:"sound-modal-content",children:[v.jsx("h3",{className:"sound-modal-title",children:v.jsx(qe,{id:"soundSettingsTitle"})}),v.jsxs("div",{className:"sound-options",children:[v.jsxs("div",{className:"option-box",children:[v.jsx("button",{className:`sound-option ${pe==="on"?"selected":""}`,onClick:()=>An("on"),children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"34",height:"34",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-volume",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M15 8a5 5 0 0 1 0 8"}),v.jsx("path",{d:"M17.7 5a9 9 0 0 1 0 14"}),v.jsx("path",{d:"M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5"})]})}),v.jsx("span",{className:`option-text ${pe==="on"?"selected":""}`,children:v.jsx(qe,{id:"soundOptionOn"})})]}),v.jsxs("div",{className:"option-box",children:[v.jsx("button",{className:`sound-option ${pe==="alertOnly"?"selected":""}`,onClick:()=>An("alertOnly"),children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"34",height:"34",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-alert-triangle",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M12 9v4"}),v.jsx("path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z"}),v.jsx("path",{d:"M12 16h.01"})]})}),v.jsx("span",{className:`option-text ${pe==="alertOnly"?"selected":""}`,children:v.jsx(qe,{id:"soundOptionAlertOnly"})})]}),v.jsxs("div",{className:"option-box",children:[v.jsx("button",{className:`sound-option ${pe==="off"?"selected":""}`,onClick:()=>An("off"),children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"34",height:"34",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-volume-off",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M15 8a5 5 0 0 1 1.912 4.934m-1.377 2.602a5 5 0 0 1 -.535 .464"}),v.jsx("path",{d:"M17.7 5a9 9 0 0 1 2.362 11.086m-1.676 2.299a9 9 0 0 1 -.686 .615"}),v.jsx("path",{d:"M9.069 5.054l.431 -.554a.8 .8 0 0 1 1.5 .5v2m0 4v8a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l1.294 -1.664"}),v.jsx("path",{d:"M3 3l18 18"})]})}),v.jsx("span",{className:`option-text ${pe==="off"?"selected":""}`,children:v.jsx(qe,{id:"soundOptionOff"})})]})]})]})]}),v.jsx("div",{className:"guide-text-layer",children:T.steps.map((tt,Ot)=>v.jsxs("div",{className:`guide-step ${Ot===c?"active":""}`,style:{display:Ot<c?"none":"block",order:Ot===c?-1:Ot},children:[v.jsxs("div",{className:"step-header",children:[v.jsxs("div",{className:"step-distance-container",children:[v.jsx("span",{className:"direction-icon",children:Qe(tt.direction)}),v.jsx("span",{className:"step-distance",children:tt.distance})]}),v.jsx("span",{className:"step-time",children:tt.time})]}),v.jsx("p",{className:"step-instruction",children:tt.instruction}),Ot<T.steps.length-1&&v.jsx("hr",{className:"step-divider"})]},tt.id))}),v.jsxs("div",{className:`map-modal ${p?"open":"closed"}`,children:[v.jsx("div",{className:"modal-toggle map-toggle",onClick:At,children:v.jsx("div",{className:"toggle-handle"})}),p&&v.jsx("div",{className:`map-container ${p?"open":"closed"} ${_?"dark-overlay":""} ${gt?"No-dark-overlay":""} ${_?"dark-overlay":""} ${wt?"No-dark-overlay":""}`,children:v.jsx(x1,{userLocation:j,routeSteps:T.steps,currentStep:c,isInfoModalOpen:_,isMapModalOpen:p,is3DView:Ct,routeGeo:at})}),v.jsxs("button",{className:"emergency-button",onClick:Nt,children:[v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",className:"icon icon-tabler icons-tabler-filled icon-tabler-alert-triangle",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M12 1.67c.955 0 1.845 .467 2.39 1.247l.105 .16l8.114 13.548a2.914 2.914 0 0 1 -2.307 4.363l-.195 .008h-16.225a2.914 2.914 0 0 1 -2.582 -4.2l.099 -.185l8.11 -13.538a2.914 2.914 0 0 1 2.491 -1.403zm.01 13.33l-.127 .007a1 1 0 0 0 0 1.986l.117 .007l.127 -.007a1 1 0 0 0 0 -1.986l-.117 -.007zm-.01 -7a1 1 0 0 0 -.993 .883l-.007 .117v4l.007 .117a1 1 0 0 0 1.986 0l.007 -.117v-4l-.007 -.117a1 1 0 0 0 -.993 -.883z"})]}),v.jsx("span",{children:v.jsx(qe,{id:"emergencyButtonLabel"})})]}),v.jsx("div",{className:`info-modal-wrapper ${p?"visible":"hidden"}`,children:gt?v.jsx("div",{className:"all-routes-view",children:v.jsxs("div",{className:"all-routes-content",children:[v.jsxs("div",{className:"all-routes-header",children:[v.jsxs("div",{className:"all-routes-info",children:[v.jsx("span",{children:v.jsx(qe,{id:"arrivalTime"})}),v.jsx("span",{className:"all-routes-arrival-time",children:T.arrivalTime})]}),v.jsxs("div",{className:"all-routes-details",children:[v.jsxs("div",{className:"all-routes-item",children:[v.jsx("div",{className:"all-routes-icon",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-walk",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M13 4m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),v.jsx("path",{d:"M7 21l3 -4"}),v.jsx("path",{d:"M16 21l-2 -4l-3 -3l1 -6"}),v.jsx("path",{d:"M6 12l2 -3l4 -1l3 3l3 1"})]})}),v.jsx("div",{className:"all-routes-text",children:v.jsx("span",{className:"all-routes-value",children:T.totalTime})})]}),v.jsxs("div",{className:"all-routes-item",children:[v.jsx("div",{className:"all-routes-icon",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-route",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M3 19a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}),v.jsx("path",{d:"M19 7a2 2 0 1 0 0 -4a2 2 0 0 0 0 4z"}),v.jsx("path",{d:"M11 19h5.5a3.5 3.5 0 0 0 0 -7h-8a3.5 3.5 0 0 1 0 -7h4.5"})]})}),v.jsx("div",{className:"all-routes-text",children:v.jsx("span",{className:"all-routes-value",children:T.totalDistance})})]})]})]}),v.jsxs("button",{className:"return-to-route-button2",onClick:Qn,children:[v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M11.092 2.581a1 1 0 0 1 1.754 -.116l.062 .116l8.005 17.365c.198 .566 .05 1.196 -.378 1.615a1.53 1.53 0 0 1 -1.459 .393l-7.077 -2.398l-6.899 2.338a1.535 1.535 0 0 1 -1.52 -.231l-.112 -.1c-.398 -.386 -.556 -.954 -.393 -1.556l.047 -.15l7.97 -17.276z"})]}),v.jsx("span",{className:"return-to-route-text",children:v.jsx(qe,{id:"returnToRoute"})})]})]})}):wt?v.jsxs("div",{className:"alternative-routes-view",children:[v.jsxs("button",{className:"return-to-route-button5",onClick:si,children:[v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M11.092 2.581a1 1 0 0 1 1.754 -.116l.062 .116l8.005 17.365c.198 .566 .05 1.196 -.378 1.615a1.53 1.53 0 0 1 -1.459 .393l-7.077 -2.398l-6.899 2.338a1.535 1.535 0 0 1 -1.52 -.231l-.112 -.1c-.398 -.386 -.556 -.954 -.393 -1.556l.047 -.15l7.97 -17.276z"})]}),v.jsx("span",{className:"return-to-route-text",children:v.jsx(qe,{id:"returnToRoute"})})]}),v.jsx("div",{className:"alternative-routes-container",children:T.alternativeRoutes.map(tt=>v.jsxs("div",{className:"alternative-route-card",children:[v.jsxs("div",{className:"route-title",children:[v.jsxs("span",{children:[v.jsx(qe,{id:"from"})," ",tt.from]}),v.jsxs("span",{children:[v.jsx(qe,{id:"to"})," ",tt.to]})]}),v.jsx("div",{className:"route-via",children:tt.via.join("  ")}),v.jsxs("div",{className:"route-stats",children:[v.jsxs("div",{className:"route-stat",children:[v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-walk",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M13 4m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),v.jsx("path",{d:"M7 21l3 -4"}),v.jsx("path",{d:"M16 21l-2 -4l-3 -3l1 -6"}),v.jsx("path",{d:"M6 12l2 -3l4 -1l3 3l3 1"})]}),v.jsx("span",{children:tt.totalTime})]}),v.jsxs("div",{className:"route-stat",children:[v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-route",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M3 19a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}),v.jsx("path",{d:"M19 7a2 2 0 1 0 0 -4a2 2 0 0 0 0 4z"}),v.jsx("path",{d:"M11 19h5.5a3.5 3.5 0 0 0 0 -7h-8a3.5 3.5 0 0 1 0 -7h4.5"})]}),v.jsx("span",{children:tt.totalDistance})]})]}),v.jsxs("button",{className:"start-route-button7",children:[v.jsxs("svg",{className:"rbt",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M11.092 2.581a1 1 0 0 1 1.754 -.116l.062 .116l8.005 17.365c.198 .566 .05 1.196 -.378 1.615a1.53 1.53 0 0 1 -1.459 .393l-7.077 -2.398l-6.899 2.338a1.535 1.535 0 0 1 -1.52 -.231l-.112 -.1c-.398 -.386 -.556 -.954 -.393 -1.556l.047 -.15l7.97 -17.276z"})]}),v.jsx(qe,{id:"startRouting"})]})]},tt.id))})]}):v.jsxs("div",{className:`info-modal ${_?"open":"closed"}`,children:[v.jsxs("div",{className:"info-content",children:[v.jsx("div",{className:"modal-toggle3 info-toggle",onClick:zt,children:v.jsx("div",{className:"toggle-handle3"})}),v.jsxs("div",{className:"info-header",children:[v.jsx("button",{className:"close-button",onClick:zt,children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-x",children:[v.jsx("path",{stroke:"none"}),v.jsx("path",{d:"M18 6l-12 12"}),v.jsx("path",{d:"M6 6l12 12"})]})}),v.jsxs("div",{className:"info-title",children:[v.jsxs("div",{className:"info-stat",children:[v.jsx("span",{children:v.jsx(qe,{id:"arrivalTime"})}),v.jsx("span",{className:"arrival-time",children:T.arrivalTime})]}),v.jsxs("div",{className:"info-details",children:[v.jsxs("div",{className:"info-item",children:[v.jsx("div",{className:"info-icon",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-walk",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M13 4m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),v.jsx("path",{d:"M7 21l3 -4"}),v.jsx("path",{d:"M16 21l-2 -4l-3 -3l1 -6"}),v.jsx("path",{d:"M6 12l2 -3l4 -1l3 3l3 1"})]})}),v.jsx("div",{className:"info-text",children:v.jsx("span",{className:"info-value",children:T.totalTime})})]}),v.jsxs("div",{className:"info-item",children:[v.jsx("div",{className:"info-icon",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-route",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M3 19a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}),v.jsx("path",{d:"M19 7a2 2 0 1 0 0 -4a2 2 0 0 0 0 4z"}),v.jsx("path",{d:"M11 19h5.5a3.5 3.5 0 0 0 0 -7h-8a3.5 3.5 0 0 1 0 -7h4.5"})]})}),v.jsx("div",{className:"info-text",children:v.jsx("span",{className:"info-value",children:T.totalDistance})})]})]})]}),v.jsx("button",{className:"sound-button",onClick:Kt,children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-volume",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M15 8a5 5 0 0 1 0 8"}),v.jsx("path",{d:"M17.7 5a9 9 0 0 1 0 14"}),v.jsx("path",{d:"M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5"})]})})]})]}),_&&v.jsx(v.Fragment,{children:v.jsxs("div",{className:"route-buttons",children:[v.jsxs("button",{className:"route-button",onClick:()=>Pt("/rop"),children:[v.jsx("div",{className:"button-icon",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-route",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M3 19a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}),v.jsx("path",{d:"M19 7a2 2 0 1 0 0 -4a2 2 0 0 0 0 4z"}),v.jsx("path",{d:"M11 19h5.5a3.5 3.5 0 0 0 0 -7h-8a3.5 3.5 0 0 1 0 -7h4.5"})]})}),v.jsx("span",{children:v.jsx(qe,{id:"routeOverview"})})]}),v.jsx("span",{className:"sdivider"}),v.jsxs("button",{className:"route-button",onClick:br,children:[v.jsx("div",{className:"button-icon",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"grey",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-map",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M3 7l6 -3l6 3l6 -3v13l-6 3l-6 -3l-6 3v-13"}),v.jsx("path",{d:"M9 4v13"}),v.jsx("path",{d:"M15 7v13"})]})}),v.jsx("span",{children:v.jsx(qe,{id:"allRoutes"})})]}),v.jsx("span",{className:"sdivider"}),v.jsxs("button",{className:"route-button",onClick:jn,children:[v.jsx("div",{className:"button-icon",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-route-alt-left",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M8 3h-5v5"}),v.jsx("path",{d:"M16 3h5v5"}),v.jsx("path",{d:"M3 3l7.536 7.536a5 5 0 0 1 1.464 3.534v6.93"}),v.jsx("path",{d:"M18 6.01v-.01"}),v.jsx("path",{d:"M16 8.02v-.01"}),v.jsx("path",{d:"M14 10v.01"})]})}),v.jsx("span",{children:v.jsx(qe,{id:"otherRoutes"})})]})]})}),v.jsxs("div",{className:"bottom-controls",children:[v.jsx("button",{className:`start-routing-button ${ve?"stop-routing":""}`,onClick:Yt,children:ve?v.jsx(qe,{id:"stopRouting"}):v.jsx(qe,{id:"startRouting"})}),v.jsxs("div",{className:"pc-container",children:[v.jsx("button",{className:"expand-button",onClick:zt,children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-chevron-compact-down",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M4 11l8 3l8 -3"})]})}),v.jsx("button",{className:"profile-button",onClick:()=>Pt("/Profile"),children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",className:"icon icon-tabler icons-tabler-filled icon-tabler-user",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M12 2a5 5 0 1 1 -5 5l.005 -.217a5 5 0 0 1 4.995 -4.783z"}),v.jsx("path",{d:"M14 14a5 5 0 0 1 5 5v1a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-1a5 5 0 0 1 5 -5h4z"})]})})]})]})]})}),!p&&v.jsxs("button",{className:"return-to-route-button",onClick:At,children:[v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M11.092 2.581a1 1 0 0 1 1.754 -.116l.062 .116l8.005 17.365c.198 .566 .05 1.196 -.378 1.615a1.53 1.53 0 0 1 -1.459 .393l-7.077 -2.398l-6.899 2.338a1.535 1.535 0 0 1 -1.52 -.231l-.112 -.1c-.398 -.386 -.556 -.954 -.393 -1.556l.047 -.15l7.97 -17.276z"})]}),v.jsx("span",{className:"return-to-route-text",children:v.jsx(qe,{id:"returnToRoute"})})]})]})]}):v.jsx("div",{className:"loading",children:v.jsx(qe,{id:"loading"})})},w1=()=>{var Ke,Je,He,gt,pt,wt,Tt,bt;const a=lc(),p=Hi(),y=ne.useRef(null),[_,E]=ne.useState(0),[T,C]=ne.useState("right"),[c,B]=ne.useState(""),[j,$]=ne.useState(""),{routeGeo:D,routeSteps:F}=ld(),te=((Ke=D==null?void 0:D.geometry)==null?void 0:Ke.coordinates)||[],ie=ne.useMemo(()=>te.slice(1).map((mt,Ct)=>{const Ze=F==null?void 0:F[Ct],Pt=Ze?p.formatMessage({id:Ze.type},{name:Ze.name,title:Ze.title,num:Ct+1}):p.formatMessage({id:"stepNumber"},{num:Ct+1});return{id:Ct+1,coordinates:[te[Ct],mt],instruction:Pt}}),[te,F,p]),[W,Y]=ne.useState({latitude:((Je=te[0])==null?void 0:Je[1])||0,longitude:((He=te[0])==null?void 0:He[0])||0,zoom:16});ne.useEffect(()=>{window.scrollTo(0,0)},[]);const pe=ne.useMemo(()=>{var Ct;const mt=(Ct=ie[_])==null?void 0:Ct.coordinates;return mt?{type:"Feature",geometry:{type:"LineString",coordinates:mt}}:null},[_,ie]);ne.useEffect(()=>{if(ie[_]){const mt=ie[_].coordinates,[Ct,Ze]=mt[0],[Pt,We]=mt[1],at=Math.hypot(Pt-Ct,We-Ze)*1e5;if(B(`${Math.round(at)} ${p.formatMessage({id:"meters"})}`),$(`${Math.max(1,Math.round(at/60))} ${p.formatMessage({id:"minutesUnit"})}`),C(_===ie.length-1?"arrived":"right"),Y({latitude:(Ze+We)/2,longitude:(Ct+Pt)/2,zoom:18}),y.current){const rt=new su.LngLatBounds([Ct,Ze],[Pt,We]);y.current.fitBounds(rt,{padding:50,duration:700})}}},[_,ie]);const ye={type:"Feature",geometry:{type:"LineString",coordinates:te}},ve=()=>{_<ie.length-1&&E(_+1)},Be=()=>{_>0&&E(_-1)},Se=()=>{switch(T){case"right":return v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-right",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M5 12l14 0"}),v.jsx("path",{d:"M15 16l4 -4"}),v.jsx("path",{d:"M15 8l4 4"})]});case"left":return v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-left",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M5 12l14 0"}),v.jsx("path",{d:"M5 12l4 4"}),v.jsx("path",{d:"M5 12l4 -4"})]});case"up":return v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-up",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M12 5l0 14"}),v.jsx("path",{d:"M16 9l-4 -4"}),v.jsx("path",{d:"M8 9l4 -4"})]});case"down":return v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-down",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M12 5l0 14"}),v.jsx("path",{d:"M16 15l-4 4"}),v.jsx("path",{d:"M8 15l4 4"})]});case"bend-right":return v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-merge-alt-left",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M8 7l4 -4l4 4"}),v.jsx("path",{d:"M18 21v.01"}),v.jsx("path",{d:"M18 18.01v.01"}),v.jsx("path",{d:"M17 15.02v.01"}),v.jsx("path",{d:"M14 13.03v.01"}),v.jsx("path",{d:"M12 3v5.394a6.737 6.737 0 0 1 -3 5.606a6.737 6.737 0 0 0 -3 5.606v1.394"})]});case"bend-left":return v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-merge-alt-right",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M16 7l-4 -4l-4 4"}),v.jsx("path",{d:"M6 21v.01"}),v.jsx("path",{d:"M6 18.01v.01"}),v.jsx("path",{d:"M7 15.02v.01"}),v.jsx("path",{d:"M10 13.03v.01"}),v.jsx("path",{d:"M12 3v5.394a6.737 6.737 0 0 0 3 5.606a6.737 6.737 0 0 1 3 5.606v1.394"})]});case"arrived":return v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"35",height:"35",viewBox:"0 0 24 24",fill:"#e74c3c",className:"icon icon-tabler icons-tabler-filled icon-tabler-map-pin",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M18.364 4.636a9 9 0 0 1 .203 12.519l-.203 .21l-4.243 4.242a3 3 0 0 1 -4.097 .135l-.144 -.135l-4.244 -4.243a9 9 0 0 1 12.728 -12.728zm-6.364 3.364a3 3 0 1 0 0 6a3 3 0 0 0 0 -6z"})]});default:return v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-arrow-narrow-right",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M5 12l14 0"}),v.jsx("path",{d:"M15 16l4 -4"}),v.jsx("path",{d:"M15 8l4 4"})]})}};return v.jsxs("div",{className:"route-overview-container fade-in",children:[v.jsxs("div",{className:"header-container",children:[v.jsxs("header",{className:"route-overview-header",children:[v.jsx("button",{className:"route-back-button",onClick:()=>a(-1),children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-x",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M18 6l-12 12"}),v.jsx("path",{d:"M6 6l12 12"})]})}),v.jsx("h1",{className:"route-header-title",children:p.formatMessage({id:"routeOverview"})}),v.jsx("button",{className:"map-profile-button",onClick:()=>a("/Profile"),children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",className:"icon icon-tabler icons-tabler-filled icon-tabler-user",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M12 2a5 5 0 1 1 -5 5l.005 -.217a5 5 0 0 1 4.995 -4.783z"}),v.jsx("path",{d:"M14 14a5 5 0 0 1 5 5v1a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-1a5 5 0 0 1 5 -5h4z"})]})})]}),v.jsx("div",{className:"header-gradient"})]}),v.jsx("div",{className:"route-map-container",children:v.jsxs(Tp,{ref:y,mapLib:su,mapStyle:Mp,initialViewState:W,attributionControl:!1,style:{width:"100%",height:"100%"},children:[v.jsx(xs,{longitude:(gt=te[0])==null?void 0:gt[0],latitude:(pt=te[0])==null?void 0:pt[1],anchor:"bottom",children:v.jsx("div",{className:"c-circle"})}),v.jsx(xs,{longitude:(wt=te[te.length-1])==null?void 0:wt[0],latitude:(Tt=te[te.length-1])==null?void 0:Tt[1],anchor:"bottom",children:v.jsx("div",{className:"des-marker",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"35",height:"35",viewBox:"0 0 24 24",fill:"#e74c3c",className:"icon icon-tabler icons-tabler-filled icon-tabler-map-pin",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M18.364 4.636a9 9 0 0 1 .203 12.519l-.203 .21l-4.243 4.242a3 3 0 0 1 -4.097 .135l-.144 -.135l-4.244 -4.243a9 9 0 0 1 12.728 -12.728zm-6.364 3.364a3 3 0 1 0 0 6a3 3 0 0 0 0 -6z"})]})})}),v.jsx(sh,{id:"route",type:"geojson",data:ye,children:v.jsx(oh,{id:"route-line",type:"line",paint:{"line-color":"#3498db","line-width":5}})}),pe&&v.jsx(sh,{id:"highlight",type:"geojson",data:pe,children:v.jsx(oh,{id:"highlight-line",type:"line",paint:{"line-color":"#e74c3c","line-width":8}})}),v.jsx(qf,{})]})}),v.jsxs("button",{className:"start-routing-btn",onClick:()=>a("/rng"),children:[v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",viewBox:"0 0 24 24",fill:"currentColor",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M11.092 2.581a1 1 0 0 1 1.754 -.116l.062 .116l8.005 17.365c.198 .566 .05 1.196 -.378 1.615a1.53 1.53 0 0 1 -1.459 .393l-7.077 -2.398l-6.899 2.338a1.535 1.535 0 0 1 -1.52 -.231l-.112 -.1c-.398 -.386 -.556 -.954 -.393 -1.556l.047 -.15l7.97 -17.276z"})]}),p.formatMessage({id:"startRouting"})]}),v.jsxs("div",{className:"route-info-container",children:[v.jsxs("div",{className:"route-stats",children:[v.jsxs("div",{className:"route-distance",children:[v.jsx("span",{className:"direction-icon",children:Se()}),v.jsx("span",{className:"distance-value",children:c})]}),v.jsx("div",{className:"route-time",children:v.jsx("span",{className:"time-value",children:j})})]}),v.jsxs("div",{className:"route-instruction-container",children:[v.jsx("div",{className:"route-instruction",children:v.jsx("p",{className:"instruction-text",children:(bt=ie[_])==null?void 0:bt.instruction})}),v.jsxs("div",{className:"carousel-controls",children:[v.jsxs("button",{className:"carousel-prev",onClick:Be,disabled:_===0,children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:v.jsx("path",{d:"M9 6l6 6l-6 6",stroke:"currentColor",strokeWidth:"2",fill:"none"})}),p.formatMessage({id:"previous"})]}),v.jsx("div",{className:"carousel-dots",children:ie.map((mt,Ct)=>v.jsx("span",{className:`dot ${Ct===_?"active":""}`,onClick:()=>E(Ct)},Ct))}),v.jsxs("button",{className:"carousel-next",onClick:ve,disabled:_===ie.length-1,children:[p.formatMessage({id:"next"}),v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:v.jsx("path",{d:"M15 6l-6 6l6 6",stroke:"currentColor",strokeWidth:"2",fill:"none"})})]})]})]})]})]})};function f0(a,p){return function(){return a.apply(p,arguments)}}const{toString:b1}=Object.prototype,{getPrototypeOf:Wf}=Object,{iterator:Cp,toStringTag:m0}=Symbol,Pp=(a=>p=>{const y=b1.call(p);return a[y]||(a[y]=y.slice(8,-1).toLowerCase())})(Object.create(null)),_s=a=>(a=a.toLowerCase(),p=>Pp(p)===a),Ip=a=>p=>typeof p===a,{isArray:hh}=Array,ud=Ip("undefined");function S1(a){return a!==null&&!ud(a)&&a.constructor!==null&&!ud(a.constructor)&&Ui(a.constructor.isBuffer)&&a.constructor.isBuffer(a)}const g0=_s("ArrayBuffer");function E1(a){let p;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?p=ArrayBuffer.isView(a):p=a&&a.buffer&&g0(a.buffer),p}const T1=Ip("string"),Ui=Ip("function"),y0=Ip("number"),Ap=a=>a!==null&&typeof a=="object",k1=a=>a===!0||a===!1,mp=a=>{if(Pp(a)!=="object")return!1;const p=Wf(a);return(p===null||p===Object.prototype||Object.getPrototypeOf(p)===null)&&!(m0 in a)&&!(Cp in a)},M1=_s("Date"),C1=_s("File"),P1=_s("Blob"),I1=_s("FileList"),A1=a=>Ap(a)&&Ui(a.pipe),L1=a=>{let p;return a&&(typeof FormData=="function"&&a instanceof FormData||Ui(a.append)&&((p=Pp(a))==="formdata"||p==="object"&&Ui(a.toString)&&a.toString()==="[object FormData]"))},z1=_s("URLSearchParams"),[R1,j1,D1,N1]=["ReadableStream","Request","Response","Headers"].map(_s),B1=a=>a.trim?a.trim():a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function xd(a,p,{allOwnKeys:y=!1}={}){if(a===null||typeof a>"u")return;let _,E;if(typeof a!="object"&&(a=[a]),hh(a))for(_=0,E=a.length;_<E;_++)p.call(null,a[_],_,a);else{const T=y?Object.getOwnPropertyNames(a):Object.keys(a),C=T.length;let c;for(_=0;_<C;_++)c=T[_],p.call(null,a[c],c,a)}}function v0(a,p){p=p.toLowerCase();const y=Object.keys(a);let _=y.length,E;for(;_-- >0;)if(E=y[_],p===E.toLowerCase())return E;return null}const ru=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,x0=a=>!ud(a)&&a!==ru;function zf(){const{caseless:a}=x0(this)&&this||{},p={},y=(_,E)=>{const T=a&&v0(p,E)||E;mp(p[T])&&mp(_)?p[T]=zf(p[T],_):mp(_)?p[T]=zf({},_):hh(_)?p[T]=_.slice():p[T]=_};for(let _=0,E=arguments.length;_<E;_++)arguments[_]&&xd(arguments[_],y);return p}const F1=(a,p,y,{allOwnKeys:_}={})=>(xd(p,(E,T)=>{y&&Ui(E)?a[T]=f0(E,y):a[T]=E},{allOwnKeys:_}),a),O1=a=>(a.charCodeAt(0)===65279&&(a=a.slice(1)),a),$1=(a,p,y,_)=>{a.prototype=Object.create(p.prototype,_),a.prototype.constructor=a,Object.defineProperty(a,"super",{value:p.prototype}),y&&Object.assign(a.prototype,y)},U1=(a,p,y,_)=>{let E,T,C;const c={};if(p=p||{},a==null)return p;do{for(E=Object.getOwnPropertyNames(a),T=E.length;T-- >0;)C=E[T],(!_||_(C,a,p))&&!c[C]&&(p[C]=a[C],c[C]=!0);a=y!==!1&&Wf(a)}while(a&&(!y||y(a,p))&&a!==Object.prototype);return p},V1=(a,p,y)=>{a=String(a),(y===void 0||y>a.length)&&(y=a.length),y-=p.length;const _=a.indexOf(p,y);return _!==-1&&_===y},H1=a=>{if(!a)return null;if(hh(a))return a;let p=a.length;if(!y0(p))return null;const y=new Array(p);for(;p-- >0;)y[p]=a[p];return y},G1=(a=>p=>a&&p instanceof a)(typeof Uint8Array<"u"&&Wf(Uint8Array)),q1=(a,p)=>{const _=(a&&a[Cp]).call(a);let E;for(;(E=_.next())&&!E.done;){const T=E.value;p.call(a,T[0],T[1])}},W1=(a,p)=>{let y;const _=[];for(;(y=a.exec(p))!==null;)_.push(y);return _},Z1=_s("HTMLFormElement"),X1=a=>a.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(y,_,E){return _.toUpperCase()+E}),og=(({hasOwnProperty:a})=>(p,y)=>a.call(p,y))(Object.prototype),K1=_s("RegExp"),_0=(a,p)=>{const y=Object.getOwnPropertyDescriptors(a),_={};xd(y,(E,T)=>{let C;(C=p(E,T,a))!==!1&&(_[T]=C||E)}),Object.defineProperties(a,_)},J1=a=>{_0(a,(p,y)=>{if(Ui(a)&&["arguments","caller","callee"].indexOf(y)!==-1)return!1;const _=a[y];if(Ui(_)){if(p.enumerable=!1,"writable"in p){p.writable=!1;return}p.set||(p.set=()=>{throw Error("Can not rewrite read-only method '"+y+"'")})}})},Y1=(a,p)=>{const y={},_=E=>{E.forEach(T=>{y[T]=!0})};return hh(a)?_(a):_(String(a).split(p)),y},Q1=()=>{},e2=(a,p)=>a!=null&&Number.isFinite(a=+a)?a:p;function t2(a){return!!(a&&Ui(a.append)&&a[m0]==="FormData"&&a[Cp])}const n2=a=>{const p=new Array(10),y=(_,E)=>{if(Ap(_)){if(p.indexOf(_)>=0)return;if(!("toJSON"in _)){p[E]=_;const T=hh(_)?[]:{};return xd(_,(C,c)=>{const B=y(C,E+1);!ud(B)&&(T[c]=B)}),p[E]=void 0,T}}return _};return y(a,0)},r2=_s("AsyncFunction"),i2=a=>a&&(Ap(a)||Ui(a))&&Ui(a.then)&&Ui(a.catch),w0=((a,p)=>a?setImmediate:p?((y,_)=>(ru.addEventListener("message",({source:E,data:T})=>{E===ru&&T===y&&_.length&&_.shift()()},!1),E=>{_.push(E),ru.postMessage(y,"*")}))(`axios@${Math.random()}`,[]):y=>setTimeout(y))(typeof setImmediate=="function",Ui(ru.postMessage)),o2=typeof queueMicrotask<"u"?queueMicrotask.bind(ru):typeof process<"u"&&process.nextTick||w0,s2=a=>a!=null&&Ui(a[Cp]),Oe={isArray:hh,isArrayBuffer:g0,isBuffer:S1,isFormData:L1,isArrayBufferView:E1,isString:T1,isNumber:y0,isBoolean:k1,isObject:Ap,isPlainObject:mp,isReadableStream:R1,isRequest:j1,isResponse:D1,isHeaders:N1,isUndefined:ud,isDate:M1,isFile:C1,isBlob:P1,isRegExp:K1,isFunction:Ui,isStream:A1,isURLSearchParams:z1,isTypedArray:G1,isFileList:I1,forEach:xd,merge:zf,extend:F1,trim:B1,stripBOM:O1,inherits:$1,toFlatObject:U1,kindOf:Pp,kindOfTest:_s,endsWith:V1,toArray:H1,forEachEntry:q1,matchAll:W1,isHTMLForm:Z1,hasOwnProperty:og,hasOwnProp:og,reduceDescriptors:_0,freezeMethods:J1,toObjectSet:Y1,toCamelCase:X1,noop:Q1,toFiniteNumber:e2,findKey:v0,global:ru,isContextDefined:x0,isSpecCompliantForm:t2,toJSONObject:n2,isAsyncFn:r2,isThenable:i2,setImmediate:w0,asap:o2,isIterable:s2};function an(a,p,y,_,E){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=a,this.name="AxiosError",p&&(this.code=p),y&&(this.config=y),_&&(this.request=_),E&&(this.response=E,this.status=E.status?E.status:null)}Oe.inherits(an,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Oe.toJSONObject(this.config),code:this.code,status:this.status}}});const b0=an.prototype,S0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(a=>{S0[a]={value:a}});Object.defineProperties(an,S0);Object.defineProperty(b0,"isAxiosError",{value:!0});an.from=(a,p,y,_,E,T)=>{const C=Object.create(b0);return Oe.toFlatObject(a,C,function(B){return B!==Error.prototype},c=>c!=="isAxiosError"),an.call(C,a.message,p,y,_,E),C.cause=a,C.name=a.name,T&&Object.assign(C,T),C};const a2=null;function Rf(a){return Oe.isPlainObject(a)||Oe.isArray(a)}function E0(a){return Oe.endsWith(a,"[]")?a.slice(0,-2):a}function sg(a,p,y){return a?a.concat(p).map(function(E,T){return E=E0(E),!y&&T?"["+E+"]":E}).join(y?".":""):p}function l2(a){return Oe.isArray(a)&&!a.some(Rf)}const c2=Oe.toFlatObject(Oe,{},null,function(p){return/^is[A-Z]/.test(p)});function Lp(a,p,y){if(!Oe.isObject(a))throw new TypeError("target must be an object");p=p||new FormData,y=Oe.toFlatObject(y,{metaTokens:!0,dots:!1,indexes:!1},!1,function(W,Y){return!Oe.isUndefined(Y[W])});const _=y.metaTokens,E=y.visitor||$,T=y.dots,C=y.indexes,B=(y.Blob||typeof Blob<"u"&&Blob)&&Oe.isSpecCompliantForm(p);if(!Oe.isFunction(E))throw new TypeError("visitor must be a function");function j(ie){if(ie===null)return"";if(Oe.isDate(ie))return ie.toISOString();if(!B&&Oe.isBlob(ie))throw new an("Blob is not supported. Use a Buffer instead.");return Oe.isArrayBuffer(ie)||Oe.isTypedArray(ie)?B&&typeof Blob=="function"?new Blob([ie]):Buffer.from(ie):ie}function $(ie,W,Y){let pe=ie;if(ie&&!Y&&typeof ie=="object"){if(Oe.endsWith(W,"{}"))W=_?W:W.slice(0,-2),ie=JSON.stringify(ie);else if(Oe.isArray(ie)&&l2(ie)||(Oe.isFileList(ie)||Oe.endsWith(W,"[]"))&&(pe=Oe.toArray(ie)))return W=E0(W),pe.forEach(function(ve,Be){!(Oe.isUndefined(ve)||ve===null)&&p.append(C===!0?sg([W],Be,T):C===null?W:W+"[]",j(ve))}),!1}return Rf(ie)?!0:(p.append(sg(Y,W,T),j(ie)),!1)}const D=[],F=Object.assign(c2,{defaultVisitor:$,convertValue:j,isVisitable:Rf});function te(ie,W){if(!Oe.isUndefined(ie)){if(D.indexOf(ie)!==-1)throw Error("Circular reference detected in "+W.join("."));D.push(ie),Oe.forEach(ie,function(pe,ye){(!(Oe.isUndefined(pe)||pe===null)&&E.call(p,pe,Oe.isString(ye)?ye.trim():ye,W,F))===!0&&te(pe,W?W.concat(ye):[ye])}),D.pop()}}if(!Oe.isObject(a))throw new TypeError("data must be an object");return te(a),p}function ag(a){const p={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(a).replace(/[!'()~]|%20|%00/g,function(_){return p[_]})}function Zf(a,p){this._pairs=[],a&&Lp(a,this,p)}const T0=Zf.prototype;T0.append=function(p,y){this._pairs.push([p,y])};T0.toString=function(p){const y=p?function(_){return p.call(this,_,ag)}:ag;return this._pairs.map(function(E){return y(E[0])+"="+y(E[1])},"").join("&")};function u2(a){return encodeURIComponent(a).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function k0(a,p,y){if(!p)return a;const _=y&&y.encode||u2;Oe.isFunction(y)&&(y={serialize:y});const E=y&&y.serialize;let T;if(E?T=E(p,y):T=Oe.isURLSearchParams(p)?p.toString():new Zf(p,y).toString(_),T){const C=a.indexOf("#");C!==-1&&(a=a.slice(0,C)),a+=(a.indexOf("?")===-1?"?":"&")+T}return a}class lg{constructor(){this.handlers=[]}use(p,y,_){return this.handlers.push({fulfilled:p,rejected:y,synchronous:_?_.synchronous:!1,runWhen:_?_.runWhen:null}),this.handlers.length-1}eject(p){this.handlers[p]&&(this.handlers[p]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(p){Oe.forEach(this.handlers,function(_){_!==null&&p(_)})}}const M0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},h2=typeof URLSearchParams<"u"?URLSearchParams:Zf,d2=typeof FormData<"u"?FormData:null,p2=typeof Blob<"u"?Blob:null,f2={isBrowser:!0,classes:{URLSearchParams:h2,FormData:d2,Blob:p2},protocols:["http","https","file","blob","url","data"]},Xf=typeof window<"u"&&typeof document<"u",jf=typeof navigator=="object"&&navigator||void 0,m2=Xf&&(!jf||["ReactNative","NativeScript","NS"].indexOf(jf.product)<0),g2=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",y2=Xf&&window.location.href||"http://localhost",v2=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Xf,hasStandardBrowserEnv:m2,hasStandardBrowserWebWorkerEnv:g2,navigator:jf,origin:y2},Symbol.toStringTag,{value:"Module"})),gi={...v2,...f2};function x2(a,p){return Lp(a,new gi.classes.URLSearchParams,Object.assign({visitor:function(y,_,E,T){return gi.isNode&&Oe.isBuffer(y)?(this.append(_,y.toString("base64")),!1):T.defaultVisitor.apply(this,arguments)}},p))}function _2(a){return Oe.matchAll(/\w+|\[(\w*)]/g,a).map(p=>p[0]==="[]"?"":p[1]||p[0])}function w2(a){const p={},y=Object.keys(a);let _;const E=y.length;let T;for(_=0;_<E;_++)T=y[_],p[T]=a[T];return p}function C0(a){function p(y,_,E,T){let C=y[T++];if(C==="__proto__")return!0;const c=Number.isFinite(+C),B=T>=y.length;return C=!C&&Oe.isArray(E)?E.length:C,B?(Oe.hasOwnProp(E,C)?E[C]=[E[C],_]:E[C]=_,!c):((!E[C]||!Oe.isObject(E[C]))&&(E[C]=[]),p(y,_,E[C],T)&&Oe.isArray(E[C])&&(E[C]=w2(E[C])),!c)}if(Oe.isFormData(a)&&Oe.isFunction(a.entries)){const y={};return Oe.forEachEntry(a,(_,E)=>{p(_2(_),E,y,0)}),y}return null}function b2(a,p,y){if(Oe.isString(a))try{return(p||JSON.parse)(a),Oe.trim(a)}catch(_){if(_.name!=="SyntaxError")throw _}return(y||JSON.stringify)(a)}const _d={transitional:M0,adapter:["xhr","http","fetch"],transformRequest:[function(p,y){const _=y.getContentType()||"",E=_.indexOf("application/json")>-1,T=Oe.isObject(p);if(T&&Oe.isHTMLForm(p)&&(p=new FormData(p)),Oe.isFormData(p))return E?JSON.stringify(C0(p)):p;if(Oe.isArrayBuffer(p)||Oe.isBuffer(p)||Oe.isStream(p)||Oe.isFile(p)||Oe.isBlob(p)||Oe.isReadableStream(p))return p;if(Oe.isArrayBufferView(p))return p.buffer;if(Oe.isURLSearchParams(p))return y.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),p.toString();let c;if(T){if(_.indexOf("application/x-www-form-urlencoded")>-1)return x2(p,this.formSerializer).toString();if((c=Oe.isFileList(p))||_.indexOf("multipart/form-data")>-1){const B=this.env&&this.env.FormData;return Lp(c?{"files[]":p}:p,B&&new B,this.formSerializer)}}return T||E?(y.setContentType("application/json",!1),b2(p)):p}],transformResponse:[function(p){const y=this.transitional||_d.transitional,_=y&&y.forcedJSONParsing,E=this.responseType==="json";if(Oe.isResponse(p)||Oe.isReadableStream(p))return p;if(p&&Oe.isString(p)&&(_&&!this.responseType||E)){const C=!(y&&y.silentJSONParsing)&&E;try{return JSON.parse(p)}catch(c){if(C)throw c.name==="SyntaxError"?an.from(c,an.ERR_BAD_RESPONSE,this,null,this.response):c}}return p}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:gi.classes.FormData,Blob:gi.classes.Blob},validateStatus:function(p){return p>=200&&p<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Oe.forEach(["delete","get","head","post","put","patch"],a=>{_d.headers[a]={}});const S2=Oe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),E2=a=>{const p={};let y,_,E;return a&&a.split(`
`).forEach(function(C){E=C.indexOf(":"),y=C.substring(0,E).trim().toLowerCase(),_=C.substring(E+1).trim(),!(!y||p[y]&&S2[y])&&(y==="set-cookie"?p[y]?p[y].push(_):p[y]=[_]:p[y]=p[y]?p[y]+", "+_:_)}),p},cg=Symbol("internals");function rd(a){return a&&String(a).trim().toLowerCase()}function gp(a){return a===!1||a==null?a:Oe.isArray(a)?a.map(gp):String(a)}function T2(a){const p=Object.create(null),y=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let _;for(;_=y.exec(a);)p[_[1]]=_[2];return p}const k2=a=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(a.trim());function pf(a,p,y,_,E){if(Oe.isFunction(_))return _.call(this,p,y);if(E&&(p=y),!!Oe.isString(p)){if(Oe.isString(_))return p.indexOf(_)!==-1;if(Oe.isRegExp(_))return _.test(p)}}function M2(a){return a.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(p,y,_)=>y.toUpperCase()+_)}function C2(a,p){const y=Oe.toCamelCase(" "+p);["get","set","has"].forEach(_=>{Object.defineProperty(a,_+y,{value:function(E,T,C){return this[_].call(this,p,E,T,C)},configurable:!0})})}let Vi=class{constructor(p){p&&this.set(p)}set(p,y,_){const E=this;function T(c,B,j){const $=rd(B);if(!$)throw new Error("header name must be a non-empty string");const D=Oe.findKey(E,$);(!D||E[D]===void 0||j===!0||j===void 0&&E[D]!==!1)&&(E[D||B]=gp(c))}const C=(c,B)=>Oe.forEach(c,(j,$)=>T(j,$,B));if(Oe.isPlainObject(p)||p instanceof this.constructor)C(p,y);else if(Oe.isString(p)&&(p=p.trim())&&!k2(p))C(E2(p),y);else if(Oe.isObject(p)&&Oe.isIterable(p)){let c={},B,j;for(const $ of p){if(!Oe.isArray($))throw TypeError("Object iterator must return a key-value pair");c[j=$[0]]=(B=c[j])?Oe.isArray(B)?[...B,$[1]]:[B,$[1]]:$[1]}C(c,y)}else p!=null&&T(y,p,_);return this}get(p,y){if(p=rd(p),p){const _=Oe.findKey(this,p);if(_){const E=this[_];if(!y)return E;if(y===!0)return T2(E);if(Oe.isFunction(y))return y.call(this,E,_);if(Oe.isRegExp(y))return y.exec(E);throw new TypeError("parser must be boolean|regexp|function")}}}has(p,y){if(p=rd(p),p){const _=Oe.findKey(this,p);return!!(_&&this[_]!==void 0&&(!y||pf(this,this[_],_,y)))}return!1}delete(p,y){const _=this;let E=!1;function T(C){if(C=rd(C),C){const c=Oe.findKey(_,C);c&&(!y||pf(_,_[c],c,y))&&(delete _[c],E=!0)}}return Oe.isArray(p)?p.forEach(T):T(p),E}clear(p){const y=Object.keys(this);let _=y.length,E=!1;for(;_--;){const T=y[_];(!p||pf(this,this[T],T,p,!0))&&(delete this[T],E=!0)}return E}normalize(p){const y=this,_={};return Oe.forEach(this,(E,T)=>{const C=Oe.findKey(_,T);if(C){y[C]=gp(E),delete y[T];return}const c=p?M2(T):String(T).trim();c!==T&&delete y[T],y[c]=gp(E),_[c]=!0}),this}concat(...p){return this.constructor.concat(this,...p)}toJSON(p){const y=Object.create(null);return Oe.forEach(this,(_,E)=>{_!=null&&_!==!1&&(y[E]=p&&Oe.isArray(_)?_.join(", "):_)}),y}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([p,y])=>p+": "+y).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(p){return p instanceof this?p:new this(p)}static concat(p,...y){const _=new this(p);return y.forEach(E=>_.set(E)),_}static accessor(p){const _=(this[cg]=this[cg]={accessors:{}}).accessors,E=this.prototype;function T(C){const c=rd(C);_[c]||(C2(E,C),_[c]=!0)}return Oe.isArray(p)?p.forEach(T):T(p),this}};Vi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Oe.reduceDescriptors(Vi.prototype,({value:a},p)=>{let y=p[0].toUpperCase()+p.slice(1);return{get:()=>a,set(_){this[y]=_}}});Oe.freezeMethods(Vi);function ff(a,p){const y=this||_d,_=p||y,E=Vi.from(_.headers);let T=_.data;return Oe.forEach(a,function(c){T=c.call(y,T,E.normalize(),p?p.status:void 0)}),E.normalize(),T}function P0(a){return!!(a&&a.__CANCEL__)}function dh(a,p,y){an.call(this,a??"canceled",an.ERR_CANCELED,p,y),this.name="CanceledError"}Oe.inherits(dh,an,{__CANCEL__:!0});function I0(a,p,y){const _=y.config.validateStatus;!y.status||!_||_(y.status)?a(y):p(new an("Request failed with status code "+y.status,[an.ERR_BAD_REQUEST,an.ERR_BAD_RESPONSE][Math.floor(y.status/100)-4],y.config,y.request,y))}function P2(a){const p=/^([-+\w]{1,25})(:?\/\/|:)/.exec(a);return p&&p[1]||""}function I2(a,p){a=a||10;const y=new Array(a),_=new Array(a);let E=0,T=0,C;return p=p!==void 0?p:1e3,function(B){const j=Date.now(),$=_[T];C||(C=j),y[E]=B,_[E]=j;let D=T,F=0;for(;D!==E;)F+=y[D++],D=D%a;if(E=(E+1)%a,E===T&&(T=(T+1)%a),j-C<p)return;const te=$&&j-$;return te?Math.round(F*1e3/te):void 0}}function A2(a,p){let y=0,_=1e3/p,E,T;const C=(j,$=Date.now())=>{y=$,E=null,T&&(clearTimeout(T),T=null),a.apply(null,j)};return[(...j)=>{const $=Date.now(),D=$-y;D>=_?C(j,$):(E=j,T||(T=setTimeout(()=>{T=null,C(E)},_-D)))},()=>E&&C(E)]}const wp=(a,p,y=3)=>{let _=0;const E=I2(50,250);return A2(T=>{const C=T.loaded,c=T.lengthComputable?T.total:void 0,B=C-_,j=E(B),$=C<=c;_=C;const D={loaded:C,total:c,progress:c?C/c:void 0,bytes:B,rate:j||void 0,estimated:j&&c&&$?(c-C)/j:void 0,event:T,lengthComputable:c!=null,[p?"download":"upload"]:!0};a(D)},y)},ug=(a,p)=>{const y=a!=null;return[_=>p[0]({lengthComputable:y,total:a,loaded:_}),p[1]]},hg=a=>(...p)=>Oe.asap(()=>a(...p)),L2=gi.hasStandardBrowserEnv?((a,p)=>y=>(y=new URL(y,gi.origin),a.protocol===y.protocol&&a.host===y.host&&(p||a.port===y.port)))(new URL(gi.origin),gi.navigator&&/(msie|trident)/i.test(gi.navigator.userAgent)):()=>!0,z2=gi.hasStandardBrowserEnv?{write(a,p,y,_,E,T){const C=[a+"="+encodeURIComponent(p)];Oe.isNumber(y)&&C.push("expires="+new Date(y).toGMTString()),Oe.isString(_)&&C.push("path="+_),Oe.isString(E)&&C.push("domain="+E),T===!0&&C.push("secure"),document.cookie=C.join("; ")},read(a){const p=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return p?decodeURIComponent(p[3]):null},remove(a){this.write(a,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function R2(a){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(a)}function j2(a,p){return p?a.replace(/\/?\/$/,"")+"/"+p.replace(/^\/+/,""):a}function A0(a,p,y){let _=!R2(p);return a&&(_||y==!1)?j2(a,p):p}const dg=a=>a instanceof Vi?{...a}:a;function au(a,p){p=p||{};const y={};function _(j,$,D,F){return Oe.isPlainObject(j)&&Oe.isPlainObject($)?Oe.merge.call({caseless:F},j,$):Oe.isPlainObject($)?Oe.merge({},$):Oe.isArray($)?$.slice():$}function E(j,$,D,F){if(Oe.isUndefined($)){if(!Oe.isUndefined(j))return _(void 0,j,D,F)}else return _(j,$,D,F)}function T(j,$){if(!Oe.isUndefined($))return _(void 0,$)}function C(j,$){if(Oe.isUndefined($)){if(!Oe.isUndefined(j))return _(void 0,j)}else return _(void 0,$)}function c(j,$,D){if(D in p)return _(j,$);if(D in a)return _(void 0,j)}const B={url:T,method:T,data:T,baseURL:C,transformRequest:C,transformResponse:C,paramsSerializer:C,timeout:C,timeoutMessage:C,withCredentials:C,withXSRFToken:C,adapter:C,responseType:C,xsrfCookieName:C,xsrfHeaderName:C,onUploadProgress:C,onDownloadProgress:C,decompress:C,maxContentLength:C,maxBodyLength:C,beforeRedirect:C,transport:C,httpAgent:C,httpsAgent:C,cancelToken:C,socketPath:C,responseEncoding:C,validateStatus:c,headers:(j,$,D)=>E(dg(j),dg($),D,!0)};return Oe.forEach(Object.keys(Object.assign({},a,p)),function($){const D=B[$]||E,F=D(a[$],p[$],$);Oe.isUndefined(F)&&D!==c||(y[$]=F)}),y}const L0=a=>{const p=au({},a);let{data:y,withXSRFToken:_,xsrfHeaderName:E,xsrfCookieName:T,headers:C,auth:c}=p;p.headers=C=Vi.from(C),p.url=k0(A0(p.baseURL,p.url,p.allowAbsoluteUrls),a.params,a.paramsSerializer),c&&C.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):"")));let B;if(Oe.isFormData(y)){if(gi.hasStandardBrowserEnv||gi.hasStandardBrowserWebWorkerEnv)C.setContentType(void 0);else if((B=C.getContentType())!==!1){const[j,...$]=B?B.split(";").map(D=>D.trim()).filter(Boolean):[];C.setContentType([j||"multipart/form-data",...$].join("; "))}}if(gi.hasStandardBrowserEnv&&(_&&Oe.isFunction(_)&&(_=_(p)),_||_!==!1&&L2(p.url))){const j=E&&T&&z2.read(T);j&&C.set(E,j)}return p},D2=typeof XMLHttpRequest<"u",N2=D2&&function(a){return new Promise(function(y,_){const E=L0(a);let T=E.data;const C=Vi.from(E.headers).normalize();let{responseType:c,onUploadProgress:B,onDownloadProgress:j}=E,$,D,F,te,ie;function W(){te&&te(),ie&&ie(),E.cancelToken&&E.cancelToken.unsubscribe($),E.signal&&E.signal.removeEventListener("abort",$)}let Y=new XMLHttpRequest;Y.open(E.method.toUpperCase(),E.url,!0),Y.timeout=E.timeout;function pe(){if(!Y)return;const ve=Vi.from("getAllResponseHeaders"in Y&&Y.getAllResponseHeaders()),Se={data:!c||c==="text"||c==="json"?Y.responseText:Y.response,status:Y.status,statusText:Y.statusText,headers:ve,config:a,request:Y};I0(function(Je){y(Je),W()},function(Je){_(Je),W()},Se),Y=null}"onloadend"in Y?Y.onloadend=pe:Y.onreadystatechange=function(){!Y||Y.readyState!==4||Y.status===0&&!(Y.responseURL&&Y.responseURL.indexOf("file:")===0)||setTimeout(pe)},Y.onabort=function(){Y&&(_(new an("Request aborted",an.ECONNABORTED,a,Y)),Y=null)},Y.onerror=function(){_(new an("Network Error",an.ERR_NETWORK,a,Y)),Y=null},Y.ontimeout=function(){let Be=E.timeout?"timeout of "+E.timeout+"ms exceeded":"timeout exceeded";const Se=E.transitional||M0;E.timeoutErrorMessage&&(Be=E.timeoutErrorMessage),_(new an(Be,Se.clarifyTimeoutError?an.ETIMEDOUT:an.ECONNABORTED,a,Y)),Y=null},T===void 0&&C.setContentType(null),"setRequestHeader"in Y&&Oe.forEach(C.toJSON(),function(Be,Se){Y.setRequestHeader(Se,Be)}),Oe.isUndefined(E.withCredentials)||(Y.withCredentials=!!E.withCredentials),c&&c!=="json"&&(Y.responseType=E.responseType),j&&([F,ie]=wp(j,!0),Y.addEventListener("progress",F)),B&&Y.upload&&([D,te]=wp(B),Y.upload.addEventListener("progress",D),Y.upload.addEventListener("loadend",te)),(E.cancelToken||E.signal)&&($=ve=>{Y&&(_(!ve||ve.type?new dh(null,a,Y):ve),Y.abort(),Y=null)},E.cancelToken&&E.cancelToken.subscribe($),E.signal&&(E.signal.aborted?$():E.signal.addEventListener("abort",$)));const ye=P2(E.url);if(ye&&gi.protocols.indexOf(ye)===-1){_(new an("Unsupported protocol "+ye+":",an.ERR_BAD_REQUEST,a));return}Y.send(T||null)})},B2=(a,p)=>{const{length:y}=a=a?a.filter(Boolean):[];if(p||y){let _=new AbortController,E;const T=function(j){if(!E){E=!0,c();const $=j instanceof Error?j:this.reason;_.abort($ instanceof an?$:new dh($ instanceof Error?$.message:$))}};let C=p&&setTimeout(()=>{C=null,T(new an(`timeout ${p} of ms exceeded`,an.ETIMEDOUT))},p);const c=()=>{a&&(C&&clearTimeout(C),C=null,a.forEach(j=>{j.unsubscribe?j.unsubscribe(T):j.removeEventListener("abort",T)}),a=null)};a.forEach(j=>j.addEventListener("abort",T));const{signal:B}=_;return B.unsubscribe=()=>Oe.asap(c),B}},F2=function*(a,p){let y=a.byteLength;if(y<p){yield a;return}let _=0,E;for(;_<y;)E=_+p,yield a.slice(_,E),_=E},O2=async function*(a,p){for await(const y of $2(a))yield*F2(y,p)},$2=async function*(a){if(a[Symbol.asyncIterator]){yield*a;return}const p=a.getReader();try{for(;;){const{done:y,value:_}=await p.read();if(y)break;yield _}}finally{await p.cancel()}},pg=(a,p,y,_)=>{const E=O2(a,p);let T=0,C,c=B=>{C||(C=!0,_&&_(B))};return new ReadableStream({async pull(B){try{const{done:j,value:$}=await E.next();if(j){c(),B.close();return}let D=$.byteLength;if(y){let F=T+=D;y(F)}B.enqueue(new Uint8Array($))}catch(j){throw c(j),j}},cancel(B){return c(B),E.return()}},{highWaterMark:2})},zp=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",z0=zp&&typeof ReadableStream=="function",U2=zp&&(typeof TextEncoder=="function"?(a=>p=>a.encode(p))(new TextEncoder):async a=>new Uint8Array(await new Response(a).arrayBuffer())),R0=(a,...p)=>{try{return!!a(...p)}catch{return!1}},V2=z0&&R0(()=>{let a=!1;const p=new Request(gi.origin,{body:new ReadableStream,method:"POST",get duplex(){return a=!0,"half"}}).headers.has("Content-Type");return a&&!p}),fg=64*1024,Df=z0&&R0(()=>Oe.isReadableStream(new Response("").body)),bp={stream:Df&&(a=>a.body)};zp&&(a=>{["text","arrayBuffer","blob","formData","stream"].forEach(p=>{!bp[p]&&(bp[p]=Oe.isFunction(a[p])?y=>y[p]():(y,_)=>{throw new an(`Response type '${p}' is not supported`,an.ERR_NOT_SUPPORT,_)})})})(new Response);const H2=async a=>{if(a==null)return 0;if(Oe.isBlob(a))return a.size;if(Oe.isSpecCompliantForm(a))return(await new Request(gi.origin,{method:"POST",body:a}).arrayBuffer()).byteLength;if(Oe.isArrayBufferView(a)||Oe.isArrayBuffer(a))return a.byteLength;if(Oe.isURLSearchParams(a)&&(a=a+""),Oe.isString(a))return(await U2(a)).byteLength},G2=async(a,p)=>{const y=Oe.toFiniteNumber(a.getContentLength());return y??H2(p)},q2=zp&&(async a=>{let{url:p,method:y,data:_,signal:E,cancelToken:T,timeout:C,onDownloadProgress:c,onUploadProgress:B,responseType:j,headers:$,withCredentials:D="same-origin",fetchOptions:F}=L0(a);j=j?(j+"").toLowerCase():"text";let te=B2([E,T&&T.toAbortSignal()],C),ie;const W=te&&te.unsubscribe&&(()=>{te.unsubscribe()});let Y;try{if(B&&V2&&y!=="get"&&y!=="head"&&(Y=await G2($,_))!==0){let Se=new Request(p,{method:"POST",body:_,duplex:"half"}),Ke;if(Oe.isFormData(_)&&(Ke=Se.headers.get("content-type"))&&$.setContentType(Ke),Se.body){const[Je,He]=ug(Y,wp(hg(B)));_=pg(Se.body,fg,Je,He)}}Oe.isString(D)||(D=D?"include":"omit");const pe="credentials"in Request.prototype;ie=new Request(p,{...F,signal:te,method:y.toUpperCase(),headers:$.normalize().toJSON(),body:_,duplex:"half",credentials:pe?D:void 0});let ye=await fetch(ie);const ve=Df&&(j==="stream"||j==="response");if(Df&&(c||ve&&W)){const Se={};["status","statusText","headers"].forEach(gt=>{Se[gt]=ye[gt]});const Ke=Oe.toFiniteNumber(ye.headers.get("content-length")),[Je,He]=c&&ug(Ke,wp(hg(c),!0))||[];ye=new Response(pg(ye.body,fg,Je,()=>{He&&He(),W&&W()}),Se)}j=j||"text";let Be=await bp[Oe.findKey(bp,j)||"text"](ye,a);return!ve&&W&&W(),await new Promise((Se,Ke)=>{I0(Se,Ke,{data:Be,headers:Vi.from(ye.headers),status:ye.status,statusText:ye.statusText,config:a,request:ie})})}catch(pe){throw W&&W(),pe&&pe.name==="TypeError"&&/Load failed|fetch/i.test(pe.message)?Object.assign(new an("Network Error",an.ERR_NETWORK,a,ie),{cause:pe.cause||pe}):an.from(pe,pe&&pe.code,a,ie)}}),Nf={http:a2,xhr:N2,fetch:q2};Oe.forEach(Nf,(a,p)=>{if(a){try{Object.defineProperty(a,"name",{value:p})}catch{}Object.defineProperty(a,"adapterName",{value:p})}});const mg=a=>`- ${a}`,W2=a=>Oe.isFunction(a)||a===null||a===!1,j0={getAdapter:a=>{a=Oe.isArray(a)?a:[a];const{length:p}=a;let y,_;const E={};for(let T=0;T<p;T++){y=a[T];let C;if(_=y,!W2(y)&&(_=Nf[(C=String(y)).toLowerCase()],_===void 0))throw new an(`Unknown adapter '${C}'`);if(_)break;E[C||"#"+T]=_}if(!_){const T=Object.entries(E).map(([c,B])=>`adapter ${c} `+(B===!1?"is not supported by the environment":"is not available in the build"));let C=p?T.length>1?`since :
`+T.map(mg).join(`
`):" "+mg(T[0]):"as no adapter specified";throw new an("There is no suitable adapter to dispatch the request "+C,"ERR_NOT_SUPPORT")}return _},adapters:Nf};function mf(a){if(a.cancelToken&&a.cancelToken.throwIfRequested(),a.signal&&a.signal.aborted)throw new dh(null,a)}function gg(a){return mf(a),a.headers=Vi.from(a.headers),a.data=ff.call(a,a.transformRequest),["post","put","patch"].indexOf(a.method)!==-1&&a.headers.setContentType("application/x-www-form-urlencoded",!1),j0.getAdapter(a.adapter||_d.adapter)(a).then(function(_){return mf(a),_.data=ff.call(a,a.transformResponse,_),_.headers=Vi.from(_.headers),_},function(_){return P0(_)||(mf(a),_&&_.response&&(_.response.data=ff.call(a,a.transformResponse,_.response),_.response.headers=Vi.from(_.response.headers))),Promise.reject(_)})}const D0="1.9.0",Rp={};["object","boolean","number","function","string","symbol"].forEach((a,p)=>{Rp[a]=function(_){return typeof _===a||"a"+(p<1?"n ":" ")+a}});const yg={};Rp.transitional=function(p,y,_){function E(T,C){return"[Axios v"+D0+"] Transitional option '"+T+"'"+C+(_?". "+_:"")}return(T,C,c)=>{if(p===!1)throw new an(E(C," has been removed"+(y?" in "+y:"")),an.ERR_DEPRECATED);return y&&!yg[C]&&(yg[C]=!0,console.warn(E(C," has been deprecated since v"+y+" and will be removed in the near future"))),p?p(T,C,c):!0}};Rp.spelling=function(p){return(y,_)=>(console.warn(`${_} is likely a misspelling of ${p}`),!0)};function Z2(a,p,y){if(typeof a!="object")throw new an("options must be an object",an.ERR_BAD_OPTION_VALUE);const _=Object.keys(a);let E=_.length;for(;E-- >0;){const T=_[E],C=p[T];if(C){const c=a[T],B=c===void 0||C(c,T,a);if(B!==!0)throw new an("option "+T+" must be "+B,an.ERR_BAD_OPTION_VALUE);continue}if(y!==!0)throw new an("Unknown option "+T,an.ERR_BAD_OPTION)}}const yp={assertOptions:Z2,validators:Rp},ra=yp.validators;let iu=class{constructor(p){this.defaults=p||{},this.interceptors={request:new lg,response:new lg}}async request(p,y){try{return await this._request(p,y)}catch(_){if(_ instanceof Error){let E={};Error.captureStackTrace?Error.captureStackTrace(E):E=new Error;const T=E.stack?E.stack.replace(/^.+\n/,""):"";try{_.stack?T&&!String(_.stack).endsWith(T.replace(/^.+\n.+\n/,""))&&(_.stack+=`
`+T):_.stack=T}catch{}}throw _}}_request(p,y){typeof p=="string"?(y=y||{},y.url=p):y=p||{},y=au(this.defaults,y);const{transitional:_,paramsSerializer:E,headers:T}=y;_!==void 0&&yp.assertOptions(_,{silentJSONParsing:ra.transitional(ra.boolean),forcedJSONParsing:ra.transitional(ra.boolean),clarifyTimeoutError:ra.transitional(ra.boolean)},!1),E!=null&&(Oe.isFunction(E)?y.paramsSerializer={serialize:E}:yp.assertOptions(E,{encode:ra.function,serialize:ra.function},!0)),y.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?y.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:y.allowAbsoluteUrls=!0),yp.assertOptions(y,{baseUrl:ra.spelling("baseURL"),withXsrfToken:ra.spelling("withXSRFToken")},!0),y.method=(y.method||this.defaults.method||"get").toLowerCase();let C=T&&Oe.merge(T.common,T[y.method]);T&&Oe.forEach(["delete","get","head","post","put","patch","common"],ie=>{delete T[ie]}),y.headers=Vi.concat(C,T);const c=[];let B=!0;this.interceptors.request.forEach(function(W){typeof W.runWhen=="function"&&W.runWhen(y)===!1||(B=B&&W.synchronous,c.unshift(W.fulfilled,W.rejected))});const j=[];this.interceptors.response.forEach(function(W){j.push(W.fulfilled,W.rejected)});let $,D=0,F;if(!B){const ie=[gg.bind(this),void 0];for(ie.unshift.apply(ie,c),ie.push.apply(ie,j),F=ie.length,$=Promise.resolve(y);D<F;)$=$.then(ie[D++],ie[D++]);return $}F=c.length;let te=y;for(D=0;D<F;){const ie=c[D++],W=c[D++];try{te=ie(te)}catch(Y){W.call(this,Y);break}}try{$=gg.call(this,te)}catch(ie){return Promise.reject(ie)}for(D=0,F=j.length;D<F;)$=$.then(j[D++],j[D++]);return $}getUri(p){p=au(this.defaults,p);const y=A0(p.baseURL,p.url,p.allowAbsoluteUrls);return k0(y,p.params,p.paramsSerializer)}};Oe.forEach(["delete","get","head","options"],function(p){iu.prototype[p]=function(y,_){return this.request(au(_||{},{method:p,url:y,data:(_||{}).data}))}});Oe.forEach(["post","put","patch"],function(p){function y(_){return function(T,C,c){return this.request(au(c||{},{method:p,headers:_?{"Content-Type":"multipart/form-data"}:{},url:T,data:C}))}}iu.prototype[p]=y(),iu.prototype[p+"Form"]=y(!0)});let X2=class N0{constructor(p){if(typeof p!="function")throw new TypeError("executor must be a function.");let y;this.promise=new Promise(function(T){y=T});const _=this;this.promise.then(E=>{if(!_._listeners)return;let T=_._listeners.length;for(;T-- >0;)_._listeners[T](E);_._listeners=null}),this.promise.then=E=>{let T;const C=new Promise(c=>{_.subscribe(c),T=c}).then(E);return C.cancel=function(){_.unsubscribe(T)},C},p(function(T,C,c){_.reason||(_.reason=new dh(T,C,c),y(_.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(p){if(this.reason){p(this.reason);return}this._listeners?this._listeners.push(p):this._listeners=[p]}unsubscribe(p){if(!this._listeners)return;const y=this._listeners.indexOf(p);y!==-1&&this._listeners.splice(y,1)}toAbortSignal(){const p=new AbortController,y=_=>{p.abort(_)};return this.subscribe(y),p.signal.unsubscribe=()=>this.unsubscribe(y),p.signal}static source(){let p;return{token:new N0(function(E){p=E}),cancel:p}}};function K2(a){return function(y){return a.apply(null,y)}}function J2(a){return Oe.isObject(a)&&a.isAxiosError===!0}const Bf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Bf).forEach(([a,p])=>{Bf[p]=a});function B0(a){const p=new iu(a),y=f0(iu.prototype.request,p);return Oe.extend(y,iu.prototype,p,{allOwnKeys:!0}),Oe.extend(y,p,null,{allOwnKeys:!0}),y.create=function(E){return B0(au(a,E))},y}const wr=B0(_d);wr.Axios=iu;wr.CanceledError=dh;wr.CancelToken=X2;wr.isCancel=P0;wr.VERSION=D0;wr.toFormData=Lp;wr.AxiosError=an;wr.Cancel=wr.CanceledError;wr.all=function(p){return Promise.all(p)};wr.spread=K2;wr.isAxiosError=J2;wr.mergeConfig=au;wr.AxiosHeaders=Vi;wr.formToJSON=a=>C0(Oe.isHTMLForm(a)?new FormData(a):a);wr.getAdapter=j0.getAdapter;wr.HttpStatusCode=Bf;wr.default=wr;const{Axios:b5,AxiosError:S5,CanceledError:E5,isCancel:T5,CancelToken:k5,VERSION:M5,all:C5,Cancel:P5,isAxiosError:I5,spread:A5,toFormData:L5,AxiosHeaders:z5,HttpStatusCode:R5,formToJSON:j5,getAdapter:D5,mergeConfig:N5}=wr,Y2=()=>{var lr,Lt,or,Gr;const a=lc(),p=Hi(),[y,_]=ne.useState(0),[E,T]=ne.useState(""),[C,c]=ne.useState([]),[B,j]=ne.useState(""),[$,D]=ne.useState(!1),[F,te]=ne.useState(!1),[ie,W]=ne.useState(!1),[Y,pe]=ne.useState(0),[ye,ve]=ne.useState(0),[Be,Se]=ne.useState(0),[Ke,Je]=ne.useState(0),[He,gt]=ne.useState(null),[pt,wt]=ne.useState(!0),[Tt,bt]=ne.useState(null),[mt,Ct]=ne.useState(!1),[Ze,Pt]=ne.useState(!1),[We,at]=ne.useState("mostVisited"),[rt,we]=ne.useState(!1),[Ve,St]=ne.useState(!1),[At,zt]=ne.useState(!1),[Nt,Kt]=ne.useState(!1),[Yt,Ft]=ne.useState(null),[An,br]=ne.useState([]),[Qn,jn]=ne.useState([]),[si,Qe]=ne.useState(!1),tt=ne.useRef(null),Ot=ne.useRef(null);ne.useRef(null);const ln=ne.useRef(null),[dt,tn]=ne.useState(null),Br=fp.slice(0,9),kn=fp.slice(9);ne.useEffect(()=>{fetch("./data/routing-data.json").then(je=>je.json()).then(je=>tn(je)).catch(je=>console.error("Failed to load routing-data.json",je))},[]),ne.useEffect(()=>{tt.current&&He&&(tt.current.style.transform=`translateX(${y*100}%)`)},[He,y]);const rr=je=>{Nt||je===y||(Kt(!0),_(je),setTimeout(()=>{Kt(!1)},500))};ne.useEffect(()=>{if(!(He!=null&&He.images))return;const je=setInterval(()=>{_(It=>(It+1)%He.images.length)},5e3);return()=>clearInterval(je)},[He]);const On=()=>{!F&&Ot.current&&Ot.current.scrollIntoView({behavior:"smooth",block:"nearest"}),te(!F)},Fr=()=>{W(!0),document.body.style.overflow="hidden"},Hr=()=>{W(!1),document.body.style.overflow="auto"},Le=je=>{pe(je)},Xe=je=>{ve(je)},Sr=()=>{ve(0)},ir=je=>{if(je.preventDefault(),E.trim()){const It={author:p.formatMessage({id:"defaultCommentAuthor"}),text:E,date:new Date().toLocaleDateString("fa-IR"),rating:Y||0};c($t=>[It,...$t]),T(""),Se($t=>$t+1),pe(0),ve(0),W(!1),document.body.style.overflow="auto",dn()}},dn=()=>{if(C.length===0){Je(0);return}const je=C.reduce((It,$t)=>It+($t.rating||0),0)/C.length;Je(je)},Sn=je=>{je.preventDefault(),console.log("Searching for:",B)},er=()=>{Ct(!mt),D(!$)},ji=je=>{console.log("Place clicked:",je)},fr=()=>{St(!0),we(!0),document.body.style.overflow="hidden"},et=()=>{St(!1)},Bt=je=>{je&&je.stopPropagation(),B.trim()!==""?(j(""),jn([]),Qe(!1),Ft(null),br([]),setTimeout(()=>{ln.current&&ln.current.focus()},0)):(zt(!0),setTimeout(()=>{we(!1),zt(!1),document.body.style.overflow="auto",j(""),jn([]),Qe(!1),Ft(null),br([])},300))},Rt=je=>{const It=je.target.value.toLowerCase();if(j(It),It.length>0){Qe(!0);const $t=[];Object.entries(hp).forEach(([mn,yi])=>{yi.forEach(Er=>{(Er.label.toLowerCase().includes(It)||Er.description&&Er.description.toLowerCase().includes(It))&&$t.push({type:"subgroup",...Er,groupValue:mn})})}),jn($t),Ft(null)}else Qe(!1),jn([])},tr=je=>{Ft(je),br(hp[je.value]||[]),we(!0),j(""),document.body.style.overflow="hidden"};return ne.useEffect(()=>{(async()=>{try{const It=await wr.get("./data/locationData.json");gt(It.data),c(It.data.comments||[]),Se(It.data.views||0),Je(It.data.averageRating||0),wt(!1)}catch(It){bt(It.message),wt(!1)}})()},[]),ne.useEffect(()=>{dn()},[C]),pt?v.jsx("div",{className:"loading",children:p.formatMessage({id:"loading"})}):Tt?v.jsx("div",{className:"error",children:p.formatMessage({id:"fetchError"},{error:Tt})}):He?v.jsxs("div",{className:"location-page",children:[v.jsxs("div",{className:"carousel-wrapper",children:[v.jsxs("div",{className:"fixed-header-icons",children:[v.jsx("button",{className:"menu-icon",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),v.jsx("path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),v.jsx("path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]})}),v.jsx("button",{className:"profile-icon",onClick:()=>a("/Profile"),children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M12 2a5 5 0 1 1 -5 5l.005 -.217a5 5 0 0 1 4.995 -4.783z"}),v.jsx("path",{d:"M14 14a5 5 0 0 1 5 5v1a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-1a5 5 0 0 1 5 -5h4z"})]})})]}),v.jsxs("div",{className:"carousel-container",children:[v.jsx("div",{className:"carousel",ref:tt,style:{transform:`translateX(-${y*100}%)`},children:(lr=He.images)==null?void 0:lr.map((je,It)=>v.jsx("div",{className:"carousel-slide",children:v.jsx("img",{src:je,alt:p.formatMessage({id:"imageAlt"},{title:He.title,n:It+1}),loading:It>0?"lazy":"eager",style:{width:"100%",height:"100%",objectFit:"cover"}})},It))}),v.jsx("div",{className:"carousel-fade"})]}),v.jsx("div",{className:"carousel-dots",children:(Lt=He.images)==null?void 0:Lt.map((je,It)=>v.jsx("button",{className:`dot ${It===y?"active":""}`,onClick:()=>rr(It),"aria-label":p.formatMessage({id:"goToSlide"},{n:It+1})},It))})]}),v.jsxs("section",{className:"location-info2",children:[v.jsxs("div",{className:"you-are-here",children:[v.jsx("div",{className:"line left-line"}),v.jsx("div",{className:"circle"}),v.jsx("span",{children:v.jsx(qe,{id:"youAreHere"})}),v.jsx("div",{className:"line right-line"})]}),v.jsx("h1",{children:He.title}),v.jsx("h2",{children:He.location}),v.jsxs("div",{className:"location-meta",children:[v.jsxs("div",{className:"opening-hours-badge",children:[v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-clock",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"}),v.jsx("path",{d:"M12 7v5l3 3"})]}),v.jsx("span",{children:He.openingHours})]}),v.jsxs("div",{className:"views-rating",children:[v.jsxs("span",{className:"rating",children:[v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z"})]}),Ke.toFixed(1)]}),v.jsxs("span",{className:"views",children:["(",Be," ",p.formatMessage({id:"commentsLabel"}),")"]})]})]}),v.jsxs("div",{className:"about-location",ref:Ot,children:[v.jsx("h3",{children:v.jsx(qe,{id:"aboutLocation",values:{title:He.title}})}),v.jsxs("div",{className:`about-content ${F?"expanded":""}`,children:[v.jsxs("p",{children:[F?He.about.full:He.about.short,!F&&v.jsx("button",{className:"read-more",onClick:On,children:v.jsx(qe,{id:"readMore"})})]}),F&&v.jsx("div",{className:"close-button-container",children:v.jsx("button",{className:"read-more close-button",onClick:On,children:v.jsx(qe,{id:"close"})})})]})]})]}),v.jsxs("section",{className:"events-section",children:[v.jsx("h3",{children:v.jsx(qe,{id:"audioTextContent",values:{title:He.title}})}),v.jsx("div",{className:"events-list",children:(or=He.events)==null?void 0:or.map(je=>v.jsxs("div",{className:"event-item",children:[v.jsx("h4",{children:je.title}),v.jsx("span",{className:"event-date",children:je.date}),v.jsx("p",{children:je.description})]},je.id))})]}),v.jsxs("section",{className:"comments-section",children:[v.jsxs("div",{className:"comments-header",children:[v.jsx("h3",{children:v.jsx(qe,{id:"commentsTitle",values:{count:C.length}})}),v.jsxs("button",{className:"view-all-btn",children:[v.jsx(qe,{id:"viewAll"}),v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M15 6l-6 6l6 6"})]})]})]}),v.jsxs("div",{className:"comment-input-wrapper",onClick:Fr,children:[v.jsxs("div",{className:"comment-input-header",children:[v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-bubble-text",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M7 10h10"}),v.jsx("path",{d:"M9 14h5"}),v.jsx("path",{d:"M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16"})]}),v.jsx("h4",{children:v.jsx(qe,{id:"commentPromptTitle"})})]}),v.jsx("p",{className:"comment-instruction",children:v.jsx(qe,{id:"commentPromptInstruction"})}),v.jsxs("div",{className:"comment-input-container",children:[v.jsx("input",{type:"text",placeholder:p.formatMessage({id:"commentPlaceholder"}),readOnly:!0}),v.jsx("button",{type:"button",className:"send-comment",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-send-2",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M19.302 4.034l-16.302 7.966l16.302 7.966a.503 .503 0 0 0 .546 -.124a.555 .555 0 0 0 .12 -.568l-2.468 -7.274l2.468 -7.274a.555 .555 0 0 0 -.12 -.568a.503 .503 0 0 0 -.546 -.124z"}),v.jsx("path",{d:"M17.5 12h-14.5"})]})})]})]}),v.jsx("div",{className:"comment-list-horizontal",children:C.map((je,It)=>v.jsxs("div",{className:"comment-item",children:[v.jsxs("div",{className:"comment-header",children:[v.jsxs("div",{className:"comment-author-section",children:[v.jsx("div",{className:"profile-avatar2"}),v.jsx("span",{className:"comment-author",children:je.author})]}),v.jsx("span",{className:"comment-date",children:je.date})]}),v.jsx("div",{className:"comment-text",children:je.text}),v.jsx("div",{className:"comment-rating-section",children:v.jsx("div",{className:"rating-stars",children:[1,2,3,4,5].map($t=>v.jsxs("svg",{className:$t<=je.rating?"filled":"",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z"})]},$t))})})]},It))})]}),ie&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"modal-overlay",onClick:Hr}),v.jsxs("div",{className:"comment-modal",children:[v.jsxs("div",{className:"modal-header",children:[v.jsx("h3",{children:v.jsx(qe,{id:"commentModalTitle"})}),v.jsx("button",{className:"close-modal",onClick:Hr,children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M18 6l-12 12"}),v.jsx("path",{d:"M6 6l12 12"})]})})]}),v.jsxs("div",{className:"modal-content",children:[v.jsx("p",{className:"modal-instruction",children:v.jsx(qe,{id:"commentModalInstruction"})}),v.jsxs("div",{className:"rating-section",children:[v.jsx("p",{children:v.jsx(qe,{id:"ratingPrompt"})}),v.jsx("div",{className:"stars",children:[5,4,3,2,1].map(je=>v.jsx("span",{onMouseEnter:()=>Xe(je),onMouseLeave:Sr,onClick:()=>Le(je),children:v.jsxs("svg",{className:`star-icon ${je<=(ye||Y)?"filled":""}`,xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z"})]})},je))})]}),v.jsx("div",{className:"modal-comment-input",children:v.jsx("textarea",{placeholder:p.formatMessage({id:"commentPlaceholder"}),value:E,onChange:je=>T(je.target.value)})}),v.jsx("button",{className:"submit-comment",onClick:ir,children:v.jsx(qe,{id:"submitComment"})})]})]})]}),v.jsxs("div",{className:`search-bar-container ${mt?"expanded":""}`,children:[v.jsx("div",{className:"search-bar-toggle",onClick:er,children:v.jsx("div",{className:"toggle-handle"})}),v.jsxs("form",{className:"search-bar",onSubmit:Sn,children:[v.jsx("button",{type:"submit",className:"search-icon",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 0 0 -14 0"}),v.jsx("path",{d:"M21 21l-6 -6"})]})}),v.jsx("input",{type:"text",placeholder:p.formatMessage({id:"searchPlaceholder"}),value:B,onChange:Rt,onFocus:fr,onBlur:et,ref:ln}),Ve?v.jsx("button",{type:"button",className:"close-search-button",onClick:je=>{je.stopPropagation(),Bt(je)},"aria-label":B.trim()===""?p.formatMessage({id:"closeSearch"}):p.formatMessage({id:"clearSearch"}),children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-x",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M18 6l-12 12"}),v.jsx("path",{d:"M6 6l12 12"})]})}):v.jsxs("button",{type:"button",className:"map-button",onClick:()=>a("/mpr"),children:[v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",className:"icon icon-tabler icons-tabler-map-pin",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M18.364 4.636a9 9 0 0 1 .203 12.519l-.203 .21l-4.243 4.242a3 3 0 0 1 -4.097 .135l-.144 -.135l-4.244 -4.243a9 9 0 0 1 12.728 -12.728zm-6.364 3.364a3 3 0 1 0 0 6a3 3 0 0 0 0 -6z"})]}),v.jsx("span",{children:v.jsx(qe,{id:"map"})})]})]}),mt&&dt&&v.jsxs("div",{className:"integrated-routing-content",children:[v.jsxs("div",{className:"routing-categories-section",children:[v.jsx("h2",{className:"routing-section-title",children:v.jsx(qe,{id:"searchSuggestions"})}),v.jsxs("div",{className:`routing-categories-grid ${Ze?"expanded":""}`,children:[Br.map((je,It)=>v.jsxs("div",{className:"routing-category-item",onClick:()=>tr(je),children:[v.jsx("div",{className:"category-icon",dangerouslySetInnerHTML:{__html:je.svg}}),v.jsx("span",{children:p.formatMessage({id:je.label})})]},It)),Ze&&kn.map((je,It)=>v.jsxs("div",{className:"routing-category-item",onClick:()=>tr(je),children:[v.jsx("div",{className:"category-icon",dangerouslySetInnerHTML:{__html:je.svg}}),v.jsx("span",{children:p.formatMessage({id:je.label})})]},It+Br.length))]}),v.jsxs("button",{className:"routing-show-more-btn",onClick:()=>Pt(!Ze),children:[Ze?p.formatMessage({id:"showLess"}):p.formatMessage({id:"showMore"}),v.jsxs("svg",{className:`show-more-icon ${Ze?"expanded":""}`,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M15 6l-6 6l6 6"})]})]})]}),v.jsxs("div",{className:"shrine-events-section",children:[v.jsxs("div",{className:"shrine-events-header",children:[v.jsx("h2",{className:"shrine-events-title",children:v.jsx(qe,{id:"shrineEventsTitle"})}),v.jsxs("button",{className:"view-all-events",children:[v.jsx(qe,{id:"viewAll"}),v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M15 6l-6 6l6 6"})]})]})]}),v.jsx("div",{className:"shrine-events-list",children:(Gr=dt.places.shrineEvents)==null?void 0:Gr.map((je,It)=>v.jsxs("div",{className:"shrine-event-item",children:[v.jsx("div",{className:"place-image-placeholder",style:{backgroundImage:`url(${je.image})`}}),v.jsxs("div",{className:"place-info",children:[v.jsx("h3",{className:"place-title",children:je.title}),v.jsx("p",{className:"place-description",children:je.description}),v.jsxs("div",{className:"place-info2",children:[v.jsxs("span",{className:"place-address",children:[v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-door",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M14 12v.01"}),v.jsx("path",{d:"M3 21h18"}),v.jsx("path",{d:"M6 21v-16a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v16"})]}),je.location]}),v.jsx("div",{className:"place-meta",children:v.jsxs("span",{className:"shrine-event-time",children:[v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M17 3.34a10 10 0 1 1 -14.995 8.984l-.005 -.324l.005 -.324a10 10 0 0 1 14.995 -8.336zm-5 2.66a1 1 0 0 0 -.993 .883l-.007 .117v5l.009 .131a1 1 0 0 0 .197 .477l.087 .1l3 3l.094 .082a1 1 0 0 0 1.226 0l.094 -.083l.083 -.094a1 1 0 0 0 0 -1.226l-.083 -.094l-2.707 -2.708v-4.585l-.007 -.117a1 1 0 0 0 -.993 -.883z"})]}),je.time]})})]}),v.jsx("div",{className:"place-actions",children:v.jsxs("button",{className:"place-action-btn",onClick:()=>a("/fs"),children:[v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M11.092 2.581a1 1 0 0 1 1.754 -.116l.062 .116l8.005 17.365c.198 .566 .05 1.196 -.378 1.615a1.53 1.53 0 0 1 -1.459 .393l-7.077 -2.398l-6.899 2.338a1.535 1.535 0 0 1 -1.52 -.231l-.112 -.1c-.398 -.386 -.556 -.954 -.393 -1.556l.047 -.15l7.97 -17.276z"})]}),v.jsx(qe,{id:"navigate"})]})})]})]},It))})]}),v.jsxs("div",{className:"routing-places-section",children:[v.jsxs("div",{className:"routing-tabs",children:[v.jsx("button",{className:`routing-tab ${We==="mostVisited"?"active":""}`,onClick:()=>at("mostVisited"),children:v.jsx(qe,{id:"mostVisited"})}),v.jsx("button",{className:`routing-tab ${We==="closest"?"active":""}`,onClick:()=>at("closest"),children:v.jsx(qe,{id:"nearMe"})})]}),v.jsxs("div",{className:"routing-places-content",children:[We==="mostVisited"&&v.jsx(v.Fragment,{children:dt.places.mostVisited.map((je,It)=>v.jsxs("div",{className:"routing-place-card",children:[v.jsx("div",{className:"place-image-placeholder",style:{backgroundImage:`url(${je.image})`},onClick:()=>ji(je.title)}),v.jsxs("div",{className:"place-info",children:[v.jsx("h4",{className:"place-title",children:je.title}),v.jsxs("div",{className:"place-meta",children:[v.jsx("div",{className:"place-address",children:je.address}),v.jsx("span",{className:"place-meta-separator",children:"|"}),v.jsx("span",{children:je.distance}),v.jsx("span",{className:"place-meta-separator",children:"|"}),v.jsx("span",{children:je.time})]}),v.jsxs("div",{className:"place-rating-section",children:[v.jsx("div",{className:"place-rating-stars",children:[1,2,3,4,5].map($t=>v.jsxs("svg",{className:$t<=Math.round(je.rating)?"filled":"",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z"})]},$t))}),v.jsxs("span",{className:"place-views",children:["(",je.views," ",p.formatMessage({id:"commentsLabel"}),")"]})]}),v.jsx("p",{className:"place-description",children:je.description}),v.jsxs("button",{className:"read-more-btn",children:[v.jsx(qe,{id:"readMore"}),v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M15 6l-6 6l6 6"})]})]}),v.jsxs("div",{className:"place-actions",children:[v.jsxs("button",{className:"place-action-btn2",onClick:()=>a("/fs"),children:[v.jsxs("svg",{className:"action-icon",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M12 18.5l7.265 2.463c.196 .077 .42 .032 .57 -.116a.548 .548 0 0 0 .134 -.572l-7.969 -17.275l-7.97 17.275c-.07 .2 -.017 .424 .135 .572c.15 .148 .374 .193 .57 .116l7.265 -2.463"})]}),v.jsx(qe,{id:"navigate"})]}),v.jsxs("button",{className:"place-action-btn2",children:[v.jsxs("svg",{className:"action-icon",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M3 4m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"}),v.jsx("path",{d:"M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10"}),v.jsx("path",{d:"M10 12l4 0"})]}),v.jsx(qe,{id:"save"})]})]})]})]},It))}),We==="closest"&&v.jsx(v.Fragment,{children:dt.places.nearest.map((je,It)=>v.jsxs("div",{className:"routing-place-card",children:[v.jsx("div",{className:"place-image-placeholder",style:{backgroundImage:`url(${je.image})`},onClick:()=>ji(je.title)}),v.jsxs("div",{className:"place-info",children:[v.jsx("h4",{className:"place-title",children:je.title}),v.jsx("div",{className:"place-address",children:je.address}),v.jsxs("div",{className:"place-meta",children:[v.jsx("span",{children:je.distance}),v.jsx("span",{className:"place-meta-separator",children:"|"}),v.jsx("span",{children:je.time})]}),v.jsx("p",{className:"place-description",children:je.description}),v.jsxs("button",{className:"read-more-btn",children:[v.jsx(qe,{id:"readMore"}),v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M15 6l-6 6l6 6"})]})]}),v.jsxs("div",{className:"place-actions",children:[v.jsxs("button",{className:"place-action-btn",onClick:()=>a("/fs"),children:[v.jsxs("svg",{className:"action-icon",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M12 18.5l7.265 2.463c.196 .077 .42 .032 .57 -.116a.548 .548 0 0 0 .134 -.572l-7.969 -17.275l-7.97 17.275c-.07 .2 -.017 .424 .135 .572c.15 .148 .374 .193 .57 .116l7.265 -2.463"})]}),v.jsx(qe,{id:"navigate"})]}),v.jsxs("button",{className:"place-action-btn",children:[v.jsxs("svg",{className:"action-icon",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M3 4m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"}),v.jsx("path",{d:"M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10"}),v.jsx("path",{d:"M10 12l4 0"})]}),v.jsx(qe,{id:"save"})]})]})]})]},It))})]})]})]})]}),rt&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:`search-modal-overlay ${At?"fade-out":"fade-in"}`,onClick:Bt}),v.jsxs("div",{className:`search-modal ${At?"fade-out":"fade-in"}`,children:[v.jsx("div",{className:"search-modal-header",children:v.jsxs("form",{className:"search-bar expanded-search",onSubmit:Sn,children:[v.jsx("button",{type:"submit",className:"search-icon",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 0 0 -14 0"}),v.jsx("path",{d:"M21 21l-6 -6"})]})}),v.jsx("input",{type:"text",placeholder:p.formatMessage({id:"searchPlaceholder"}),value:B,onChange:Rt,autoFocus:!0,ref:ln,className:"expanded-search-input"}),v.jsx("button",{type:"button",className:"close-search-button",onClick:je=>{je.stopPropagation(),Bt(je)},"aria-label":B.trim()===""?p.formatMessage({id:"closeSearch"}):p.formatMessage({id:"clearSearch"}),children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-x",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M18 6l-12 12"}),v.jsx("path",{d:"M6 6l12 12"})]})})]})}),v.jsx("div",{className:"search-modal-content",children:si?v.jsx("div",{className:"search-results-container",children:Qn.length>0?v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"subgroups-with-images",children:v.jsx("div",{className:"subgroups-grid",children:Qn.filter(je=>je.img).map((je,It)=>v.jsx("div",{className:"subgroup-item with-image",style:{backgroundImage:je.img?`url(${je.img})`:"none",backgroundSize:"cover",backgroundPosition:"center",backgroundColor:"rgba(255,255,255,0.7)",backgroundBlendMode:"lighten"},children:v.jsxs("div",{className:"subgroup-info",children:[v.jsx("h4",{children:je.label}),je.description&&v.jsx("p",{children:je.description})]})},It))})}),v.jsx("div",{className:"subgroups-without-images",children:Qn.filter(je=>!je.img).map((je,It)=>{const $t=fp.find(mn=>mn.value===je.groupValue);return v.jsxs("div",{className:"subgroup-item-no-image",children:[v.jsx("div",{className:"subgroup-icon",dangerouslySetInnerHTML:{__html:($t==null?void 0:$t.svg)||""}}),v.jsxs("div",{className:"subgroup-text",children:[v.jsx("h4",{children:je.label}),je.description&&v.jsx("p",{children:je.description})]})]},It)})})]}):v.jsx("div",{className:"no-results",children:v.jsx("p",{children:v.jsx(qe,{id:"noResultsFound",values:{query:B}})})})}):Yt?v.jsxs("div",{className:"subgroups-container",children:[v.jsx("div",{className:"subgroups-with-images",children:v.jsx("div",{className:"subgroups-grid",children:hp[Yt.value].filter(je=>je.img).map((je,It)=>v.jsx("div",{className:"subgroup-item with-image",style:{backgroundImage:je.img?`url(${je.img})`:"none",backgroundSize:"cover",backgroundPosition:"center",backgroundColor:"rgba(255,255,255,0.7)",backgroundBlendMode:"lighten"},children:v.jsxs("div",{className:"subgroup-info",children:[v.jsx("h4",{children:je.label}),je.description&&v.jsx("p",{children:je.description})]})},It))})}),v.jsx("div",{className:"subgroups-without-images",children:hp[Yt.value].filter(je=>!je.img).map((je,It)=>v.jsxs("div",{className:"subgroup-item-no-image",children:[v.jsx("div",{className:"subgroup-icon",dangerouslySetInnerHTML:{__html:je.svg}}),v.jsxs("div",{className:"subgroup-text",children:[v.jsx("h4",{children:je.label}),je.description&&v.jsx("p",{children:je.description})]})]},It))})]}):v.jsx("div",{className:"search-results-placeholder",children:v.jsx("p",{children:v.jsx(qe,{id:"enterSearchTerm"})})})})]})]})]}):v.jsx("div",{className:"no-data",children:p.formatMessage({id:"noDataFound"})})},Q2=()=>v.jsx("header",{className:"app-header",children:v.jsx("nav",{className:"main-nav",children:v.jsxs("ul",{children:[v.jsx("li",{children:v.jsx(nd,{to:"/",children:v.jsx(qe,{id:"home"})})}),v.jsx("li",{children:v.jsx(nd,{to:"/map",children:v.jsx(qe,{id:"map"})})}),v.jsx("li",{children:v.jsx(nd,{to:"/qr-scan",children:v.jsx(qe,{id:"qrScan"})})}),v.jsx("li",{children:v.jsx(nd,{to:"/settings",children:v.jsx(qe,{id:"settings"})})}),v.jsx("li",{children:v.jsx(nd,{to:"/Profile",children:v.jsx(qe,{id:"profile"})})})]})})}),ew=()=>v.jsx("footer",{className:"app-footer",children:v.jsxs("div",{className:"footer-content",children:[v.jsx("p",{children:v.jsx(qe,{id:"copyright",values:{year:new Date().getFullYear()}})}),v.jsxs("div",{className:"footer-links",children:[v.jsx("a",{href:"#",target:"_blank",rel:"noopener noreferrer",children:v.jsx(qe,{id:"aboutUs"})}),v.jsx("a",{href:"#",target:"_blank",rel:"noopener noreferrer",children:v.jsx(qe,{id:"contactUs"})}),v.jsx("a",{href:"#",target:"_blank",rel:"noopener noreferrer",children:v.jsx(qe,{id:"privacy"})})]})]})}),tw=()=>{const a=gd(),p=Hi(),y=a.pathname==="/login"||a.pathname==="/Profile"||a.pathname==="/lang"||a.pathname==="/location"||a.pathname==="/"||a.pathname==="/mpr"||a.pathname==="/fs"||a.pathname==="/rop"||a.pathname==="/rng",[_,E]=ne.useState(null),[T,C]=ne.useState(!1);ne.useEffect(()=>{document.title=p.formatMessage({id:"appTitle"})},[p.locale]),ne.useEffect(()=>{const j=$=>{$.preventDefault(),E($),C(!0)};return window.addEventListener("beforeinstallprompt",j),()=>window.removeEventListener("beforeinstallprompt",j)},[]);const c=()=>{_&&(_.prompt(),_.userChoice.finally(()=>{E(null),C(!1)}))},B=()=>{C(!1)};return v.jsxs("div",{className:"app",children:[!y&&v.jsx(Q2,{}),v.jsxs("main",{className:`main-content ${y?"no-header-footer-layout":""}`,children:[T&&v.jsx("div",{className:"pwa-install-overlay",children:v.jsxs("div",{className:"pwa-install-dialog",children:[v.jsx("h3",{children:v.jsx(qe,{id:"pwaInstallTitle"})}),v.jsx("p",{children:v.jsx(qe,{id:"pwaInstallPrompt"})}),v.jsx("button",{className:"pwa-install-btn",onClick:c,children:v.jsx(qe,{id:"pwaInstallButton"})}),v.jsx("br",{}),v.jsx("button",{className:"pwa-install-close",onClick:B,children:v.jsx(qe,{id:"pwaCloseButton"})})]})}),v.jsxs(Tx,{children:[v.jsx(ol,{path:"/login",element:v.jsx(p1,{})}),v.jsx(ol,{path:"/profile",element:v.jsx(Dx,{})}),v.jsx(ol,{path:"/fs",element:v.jsx(c1,{})}),v.jsx(ol,{path:"/rop",element:v.jsx(w1,{})}),v.jsx(ol,{path:"/",element:v.jsx(u1,{})}),v.jsx(ol,{path:"/mpr",element:v.jsx(v1,{})}),v.jsx(ol,{path:"/rng",element:v.jsx(_1,{})}),v.jsx(ol,{path:"/location",element:v.jsx(Y2,{})})]})]}),!y&&v.jsx(ew,{})]})};function nw(){return v.jsx(Lx,{children:v.jsx(tw,{})})}const rw=" !",iw=" ",ow="                  .",sw="  ",aw="   !",lw="              .",cw="  ",uw=" {n}  {title}",hw='     <a href="/terms"></a>  <a href="/privacy"> </a> ',dw="",pw="",fw=" QR",mw="",gw="",yw=" {year}   -    ",vw=" ",xw="  ",_w=" ",ww="  ",bw="    ",Sw="     {phone}  ",Ew="   ",Tw="",kw="      ",Mw=" ",Cw=" ",Pw=" ",Iw=" ",Aw="  ",Lw="   ",zw="   ",Rw="",jw=" ",Dw=" ",Nw="",Bw=" ",Fw="  ",Ow="",$w="   ",Uw="   ...",Vw="     ",Hw="          .         .",Gw=" :",qw="   ",Ww="  !",Zw=" {title}",Xw=" ",Kw="",Jw="    {title}",Yw=" ({count})",Qw=" ",eb="      ",tb="           .       .",nb=" ",rb=" ",ib="  ",ob="",sb=" ",ab="  ",lb="",cb="",ub=" ",hb=" ",db="  ...",pb="   : {error}",fb="  ",mb="   {n}",gb="  ",yb="   ",vb="   ",xb=" ",_b=" ",wb=" ",bb="  ",Sb='  "{query}"  ',Eb="       ",Tb="   ",kb=" ...",Mb="   ",Cb="    ",Pb="  ",Ib="  ",Ab="   ({loc})",Lb="  ",zb="  ",Rb="     ",jb="  ",Db=" ",Nb=" ",Bb=" ",Fb="",Ob="",$b="",Ub="",Vb="",Hb="  ",Gb="",qb="  ",Wb=" ",Zb="   ",Xb=":",Kb=":",Jb=":",Yb=":    .         .",Qb="   .",eS="       .",tS="  ...",nS="  ",rS="  ",iS=" ",oS=" ",sS=" :",aS="  ():",lS=" :",cS=" ():",uS=" :",hS=" :",dS="  :",pS="    ",fS="           .          .",mS=" ",gS=" ",yS="  ",vS=" ",xS=" ",_S="",wS=" ",bS="",SS=" ",ES=" ",TS="   ",kS=" ",MS=" ",CS=" ",PS="   ",IS="  ",AS="",LS="",zS="",RS="  ",jS="  ",DS="   ",NS="  ",BS="  ()",FS=" ",OS="      ",$S=" ",US="        ...",VS="   ()",HS="        ...",GS="  ",qS="      ",WS="  ",ZS="      ...",XS="  ",KS=" ",JS=" ",YS="",QS=" ",eE="",tE="  ",nE="  ",rE=" {origin}  {destination}",iE="",oE="",sE="",aE="",lE=" ",cE="         .",uE="",hE="   ",dE="",pE="    {name}",fE="    {title}",mE="        {title}",gE="   {name}",yE="   {name}",vE=" {num}",xE={welcome:rw,appTitle:iw,selectLanguage:ow,loginButton:sw,loginTitle:aw,enterPhone:lw,logoAlt:cw,imageAlt:uw,terms:hw,home:dw,map:pw,qrScan:fw,settings:mw,profile:gw,copyright:yw,aboutUs:vw,contactUs:xw,privacy:_w,language:ww,enterVerification:bw,sentCode:Sw,wrongPhone:Ew,edit:Tw,resendCode:kw,phonePlaceholder:Mw,profileTitle:Cw,completeProfile:Pw,accountSection:Iw,accountInfo:Aw,myRoutes:Lw,savedPlaces:zw,settingsSection:Rw,notifications:jw,supportSection:Dw,support:Nw,faq:Bw,termsRegulation:Fw,logoutTitle:Ow,logoutAccount:$w,commentPlaceholder:Uw,commentModalTitle:Vw,commentModalInstruction:Hw,ratingPrompt:Gw,submitComment:qw,youAreHere:Ww,aboutLocation:Zw,readMore:Xw,close:Kw,audioTextContent:Jw,commentsTitle:Yw,viewAll:Qw,commentPromptTitle:eb,commentPromptInstruction:tb,showLess:nb,showMore:rb,shrineEventsTitle:ib,navigate:ob,mostVisited:sb,nearMe:ab,save:lb,commentsLabel:cb,defaultCommentAuthor:ub,searchSuggestions:hb,loading:db,fetchError:pb,noDataFound:fb,goToSlide:mb,searchPlaceholder:gb,originPlaceholder:yb,destinationPlaceholder:vb,destinationSearchPlaceholder:xb,originSearchPlaceholder:_b,closeSearch:wb,clearSearch:bb,noResultsFound:Sb,enterSearchTerm:Eb,chooseFromMap:Tb,emergencyPlaceholder:kb,emergencySubmit:Mb,mapSelectFromMap:Cb,mapRoutingTitle:Pb,mapCurrentOriginLabel:Ib,mapCurrentLocation:Ab,mapCurrentLocationName:Lb,mapSelectedLocation:zb,mapSelectedLocationFromMap:Rb,mapRecentSearches:jb,groupCourtyardPlural:Db,groupEyvanPlural:Nb,groupRavaqPlural:Bb,groupMosques:Fb,groupSchools:Ob,groupServices:$b,groupCulture:Ub,groupCemetery:Vb,groupQRScan:Hb,groupOther:Gb,mapStopFollow:qb,mapStartFollow:Wb,mapCenter:Zb,mapLatitude:Xb,mapLongitude:Kb,mapAccuracy:Jb,drStepWarning:Yb,drSensorsUnsupported:Qb,drPermissionNeeded:eS,drCalibrating:tS,drStopTracking:nS,drStartTracking:rS,drReset:iS,drExportLog:oS,drStepCount:sS,drStrideLength:aS,drRelPosition:lS,drHeading:cS,drLinearSpeed:uS,drAngularSpeed:hS,drEstimatedStride:dS,emergencyTitle:pS,emergencySubtitle:fS,emergencyFire:mS,emergencyTheft:gS,emergencyMedical:yS,emergencyMissing:vS,soundSettingsTitle:xS,soundOptionOn:_S,soundOptionAlertOnly:wS,soundOptionOff:bS,emergencyButtonLabel:SS,arrivalTime:ES,routeOverview:TS,allRoutes:kS,otherRoutes:MS,startRouting:CS,stopRouting:PS,returnToRoute:IS,from:AS,to:LS,meters:zS,metersPerSecond:RS,degreesPerSecond:jS,defaultUserName:DS,defaultLocation:NS,defaultBabRezaName:BS,destSahnEnqelabName:FS,destSahnEnqelabLocation:OS,destEyvanTalaName:$S,destEyvanTalaLocation:US,destRavaqMasoumehName:VS,destRavaqMasoumehLocation:HS,destMasjedGoharshadName:GS,destMasjedGoharshadLocation:qS,destSahnPayambarAzamName:WS,destSahnPayambarAzamLocation:ZS,finalSearchTitle:XS,saveDestination:KS,shareRoute:JS,transportWalk:YS,transportCar:QS,transportWheelchair:eE,routeForMen:tE,routeForWomen:nE,routeSummary:rE,minutesUnit:iE,secondsUnit:oE,previous:sE,next:aE,pwaInstallTitle:lE,pwaInstallPrompt:cE,pwaInstallButton:uE,mapNoRecentSearches:hE,pwaCloseButton:dE,stepMoveToDoor:pE,stepPassConnection:fE,stepEnterNextSahn:mE,stepPassDoor:gE,stepArriveDestination:yE,stepNumber:vE},_E="Welcome!",wE="Golden Path",bE="To access the Golden Path app, first choose your language.",SE="Enter App",EE="Login!",TE="Enter your mobile number to access more features.",kE="App logo",ME="Image {n} of {title}",CE='By logging in you accept the <a href="/terms">terms</a> and <a href="/privacy">privacy policy</a>',PE="Home",IE="Map",AE="QR Scan",LE="Settings",zE="Profile",RE=" {year} Golden Path - All rights reserved",jE="About Us",DE="Contact Us",NE="Privacy",BE="App Language",FE="Enter the verification code",OE="We sent a verification code to {phone}",$E="Is the phone number incorrect?",UE="Edit",VE="Resend code in 50 seconds",HE="Mobile number",GE="Account",qE="Complete Profile",WE="Account",ZE="Account Information",XE="My Routes",KE="Saved Locations",JE="Settings",YE="Notifications",QE="Astan Quds",e4="Support",t4="FAQ",n4="Terms and Conditions",r4="Logout",i4="Sign out",o4="Write your comment...",s4="Write your opinion",a4="Write your comment about this place. After approval, your comment will be published.",l4="Rate:",c4="Submit Comment",u4="You are here!",h4="About {title}",d4="Read more",p4="Close",f4="Audio and text content of {title}",m4="Comments ({count})",g4="View all",y4="Write your comment about this place",v4="Write your comment about this place and give it a rating. After approval, your comment will be published.",x4="Show less",_4="View more",w4="Shrine programs",b4="Navigate",S4="Most visited places",E4="Places near me",T4="Save",k4="comments",M4="New user",C4="Search suggestions",P4="Loading...",I4="Error fetching data: {error}",A4="No data found",L4="Go to slide {n}",z4="Where do you want to go?",R4="Select origin",j4="Select destination",D4="Search destination",N4="Search origin",B4="Close search",F4="Clear search",O4='No results found for "{query}"',$4="Enter a search term",U4="Choose from map",V4="More details...",H4="Confirm and send request",G4="Select location from map",q4="Shrine Routing",W4="Current origin",Z4="Current location ({loc})",X4="Your current location",K4="Selected location",J4="Location selected from map",Y4="Your recent searches",Q4="Courtyards",eT="Eyvans",tT="Ravaqs",nT="Mosques",rT="Schools",iT="Services",oT="Cultural",sT="Cemetery",aT="QR Scan",lT="Other",cT="Stop following",uT="Follow location",hT="Center to current location",dT="Lat:",pT="Lng:",fT="Accuracy:",mT="Warning: steps not detected. Ensure the device is moving and sensors are active.",gT="Device sensors are not supported.",yT="Enable sensor permissions to proceed.",vT="Calibrating sensors...",xT="Stop advanced tracking",_T="Start advanced tracking",wT="Reset system",bT="Export log",ST="Steps:",ET="Stride length (m):",TT="Relative position:",kT="Heading (deg):",MT="Linear speed:",CT="Angular speed:",PT="Estimated stride:",IT="Shrine emergency request",AT="Please select the request type and describe it. Shrine staff will reach you shortly.",LT="Report fire",zT="Report theft",RT="Request medical services",jT="Report missing person",DT="Sound settings",NT="On",BT="Alerts only",FT="Off",OT="Shrine emergencies",$T="Arrival time",UT="Route overview",VT="All routes",HT="Other routes",GT="Start navigation",qT="End trip",WT="Return to route",ZT="From",XT="To",KT="m",JT="m/s",YT="deg/s",QT="Astan Quds User",ek="Astan Quds Razavi",tk="Bab al-Reza Gate",nk="Sahn Enqelab",rk="Imam Reza Shrine, Sahn Enqelab",ik="Golden Eyvan",ok="Imam Reza Shrine, between Tabarsi ...",sk="Ravaq Hazrat Masoumeh (s)",ak="Imam Reza Shrine, Sahn Ayatollah ...",lk="Goharshad Mosque",ck="Imam Reza Shrine, Sahn Goharshad",uk="Sahn Payambar Azam",hk="Imam Reza Shrine, Sahn Payambar ...",dk="Final route details",pk="Save destination",fk="Share",mk="Walking",gk="Electric van",yk="Wheelchair",vk="Route for men",xk="Route for women",_k="From {origin} to {destination}",wk="min",bk="sec",Sk="Previous",Ek="Next",Tk="Install App",kk="For quick access, install the app on your device.",Mk="Install",Ck="No recent searches",Pk="Close",Ik="Head toward {name}",Ak="Pass connection {title}",Lk="Enter next courtyard via {title}",zk="Go through {name}",Rk="Arrive at {name}",jk="Step {num}",Dk={welcome:_E,appTitle:wE,selectLanguage:bE,loginButton:SE,loginTitle:EE,enterPhone:TE,logoAlt:kE,imageAlt:ME,terms:CE,home:PE,map:IE,qrScan:AE,settings:LE,profile:zE,copyright:RE,aboutUs:jE,contactUs:DE,privacy:NE,language:BE,enterVerification:FE,sentCode:OE,wrongPhone:$E,edit:UE,resendCode:VE,phonePlaceholder:HE,profileTitle:GE,completeProfile:qE,accountSection:WE,accountInfo:ZE,myRoutes:XE,savedPlaces:KE,settingsSection:JE,notifications:YE,supportSection:QE,support:e4,faq:t4,termsRegulation:n4,logoutTitle:r4,logoutAccount:i4,commentPlaceholder:o4,commentModalTitle:s4,commentModalInstruction:a4,ratingPrompt:l4,submitComment:c4,youAreHere:u4,aboutLocation:h4,readMore:d4,close:p4,audioTextContent:f4,commentsTitle:m4,viewAll:g4,commentPromptTitle:y4,commentPromptInstruction:v4,showLess:x4,showMore:_4,shrineEventsTitle:w4,navigate:b4,mostVisited:S4,nearMe:E4,save:T4,commentsLabel:k4,defaultCommentAuthor:M4,searchSuggestions:C4,loading:P4,fetchError:I4,noDataFound:A4,goToSlide:L4,searchPlaceholder:z4,originPlaceholder:R4,destinationPlaceholder:j4,destinationSearchPlaceholder:D4,originSearchPlaceholder:N4,closeSearch:B4,clearSearch:F4,noResultsFound:O4,enterSearchTerm:$4,chooseFromMap:U4,emergencyPlaceholder:V4,emergencySubmit:H4,mapSelectFromMap:G4,mapRoutingTitle:q4,mapCurrentOriginLabel:W4,mapCurrentLocation:Z4,mapCurrentLocationName:X4,mapSelectedLocation:K4,mapSelectedLocationFromMap:J4,mapRecentSearches:Y4,groupCourtyardPlural:Q4,groupEyvanPlural:eT,groupRavaqPlural:tT,groupMosques:nT,groupSchools:rT,groupServices:iT,groupCulture:oT,groupCemetery:sT,groupQRScan:aT,groupOther:lT,mapStopFollow:cT,mapStartFollow:uT,mapCenter:hT,mapLatitude:dT,mapLongitude:pT,mapAccuracy:fT,drStepWarning:mT,drSensorsUnsupported:gT,drPermissionNeeded:yT,drCalibrating:vT,drStopTracking:xT,drStartTracking:_T,drReset:wT,drExportLog:bT,drStepCount:ST,drStrideLength:ET,drRelPosition:TT,drHeading:kT,drLinearSpeed:MT,drAngularSpeed:CT,drEstimatedStride:PT,emergencyTitle:IT,emergencySubtitle:AT,emergencyFire:LT,emergencyTheft:zT,emergencyMedical:RT,emergencyMissing:jT,soundSettingsTitle:DT,soundOptionOn:NT,soundOptionAlertOnly:BT,soundOptionOff:FT,emergencyButtonLabel:OT,arrivalTime:$T,routeOverview:UT,allRoutes:VT,otherRoutes:HT,startRouting:GT,stopRouting:qT,returnToRoute:WT,from:ZT,to:XT,meters:KT,metersPerSecond:JT,degreesPerSecond:YT,defaultUserName:QT,defaultLocation:ek,defaultBabRezaName:tk,destSahnEnqelabName:nk,destSahnEnqelabLocation:rk,destEyvanTalaName:ik,destEyvanTalaLocation:ok,destRavaqMasoumehName:sk,destRavaqMasoumehLocation:ak,destMasjedGoharshadName:lk,destMasjedGoharshadLocation:ck,destSahnPayambarAzamName:uk,destSahnPayambarAzamLocation:hk,finalSearchTitle:dk,saveDestination:pk,shareRoute:fk,transportWalk:mk,transportCar:gk,transportWheelchair:yk,routeForMen:vk,routeForWomen:xk,routeSummary:_k,minutesUnit:wk,secondsUnit:bk,previous:Sk,next:Ek,pwaInstallTitle:Tk,pwaInstallPrompt:kk,pwaInstallButton:Mk,mapNoRecentSearches:Ck,pwaCloseButton:Pk,stepMoveToDoor:Ik,stepPassConnection:Ak,stepEnterNextSahn:Lk,stepPassDoor:zk,stepArriveDestination:Rk,stepNumber:jk},Nk=" !",Bk=" ",Fk="                 .",Ok="   ",$k="   !",Uk="        .",Vk=" ",Hk=" {n}  {title}",Gk='    <a href="/terms"></a>  <a href="/privacy"> </a>',qk="",Wk="",Zk="   ",Xk="",Kk=" ",Jk=" {year}   -   ",Yk=" ",Qk=" ",eM="",tM=" ",nM="  ",rM="     {phone}",iM="   ",oM="",sM="      ",aM="  ",lM=" ",cM="  ",uM=" ",hM=" ",dM=" ",pM=" ",fM=" ",mM="",gM=" ",yM="",vM=" ",xM=" ",_M=" ",wM="   ",bM=" ...",SM="  ",EM="    .     .",TM=":",kM="  ",MM="  !",CM=" {title}",PM=" ",IM="",AM="    {title}",LM=" ({count})",zM=" ",RM="    ",jM="      .     .",DM=" ",NM=" ",BM="  ",FM="",OM="   ",$M="  ",UM="",VM="",HM=" ",GM=" ",qM=" ...",WM="   : {error}",ZM="    ",XM="   {n}",KM="  ",JM="  ",YM=" ",QM="  ",eC="   ",tC=" ",nC=" ",rC='      "{query}"',iC="  ",oC="  ",sC="  ...",aC="  ",lC="   ",cC="  ",uC="  ",hC="  ({loc})",dC=" ",pC=" ",fC="   ",mC="    ",gC="",yC="",vC="",xC="",_C="",wC="",bC="",SC="",EC="  ",TC="",kC="  ",MC=" ",CC="   ",PC=" :",IC=" :",AC=":",LC=":    .        .",zC="   .",RC="   .",jC="  ...",DC="  ",NC="  ",BC="  ",FC=" ",OC=" :",$C="  ():",UC=" :",VC=" ():",HC=" :",GC=" :",qC="  :",WC="  ",ZC="      .      .",XC=" ",KC=" ",JC="  ",YC=" ",QC=" ",e3="",t3=" ",n3="",r3=" ",i3=" ",o3="  ",s3=" ",a3=" ",l3=" ",c3=" ",u3=" ",h3="",d3="",p3="",f3="/",m3="/",g3=" ",y3=" ",v3=" ",x3=" ",_3="   ",w3=" ",b3="    ...",S3="  ",E3="     ...",T3=" ",k3="   ",M3="  ",C3="    ...",P3="  ",I3=" ",A3="",L3="",z3=" ",R3=" ",j3=" ",D3=" ",N3=" {origin}  {destination}",B3="",F3="",O3="",$3="",U3=" ",V3="     .",H3="",G3="    ",q3="",W3="  {name}",Z3="   {title}",X3="    {title}",K3="  {name}",J3="  {name}",Y3=" {num}",Q3={welcome:Nk,appTitle:Bk,selectLanguage:Fk,loginButton:Ok,loginTitle:$k,enterPhone:Uk,logoAlt:Vk,imageAlt:Hk,terms:Gk,home:qk,map:Wk,qrScan:Zk,settings:Xk,profile:Kk,copyright:Jk,aboutUs:Yk,contactUs:Qk,privacy:eM,language:tM,enterVerification:nM,sentCode:rM,wrongPhone:iM,edit:oM,resendCode:sM,phonePlaceholder:aM,profileTitle:lM,completeProfile:cM,accountSection:uM,accountInfo:hM,myRoutes:dM,savedPlaces:pM,settingsSection:fM,notifications:mM,supportSection:gM,support:yM,faq:vM,termsRegulation:xM,logoutTitle:_M,logoutAccount:wM,commentPlaceholder:bM,commentModalTitle:SM,commentModalInstruction:EM,ratingPrompt:TM,submitComment:kM,youAreHere:MM,aboutLocation:CM,readMore:PM,close:IM,audioTextContent:AM,commentsTitle:LM,viewAll:zM,commentPromptTitle:RM,commentPromptInstruction:jM,showLess:DM,showMore:NM,shrineEventsTitle:BM,navigate:FM,mostVisited:OM,nearMe:$M,save:UM,commentsLabel:VM,defaultCommentAuthor:HM,searchSuggestions:GM,loading:qM,fetchError:WM,noDataFound:ZM,goToSlide:XM,searchPlaceholder:KM,originPlaceholder:JM,destinationPlaceholder:YM,destinationSearchPlaceholder:QM,originSearchPlaceholder:eC,closeSearch:tC,clearSearch:nC,noResultsFound:rC,enterSearchTerm:iC,chooseFromMap:oC,emergencyPlaceholder:sC,emergencySubmit:aC,mapSelectFromMap:lC,mapRoutingTitle:cC,mapCurrentOriginLabel:uC,mapCurrentLocation:hC,mapCurrentLocationName:dC,mapSelectedLocation:pC,mapSelectedLocationFromMap:fC,mapRecentSearches:mC,groupCourtyardPlural:gC,groupEyvanPlural:yC,groupRavaqPlural:vC,groupMosques:xC,groupSchools:_C,groupServices:wC,groupCulture:bC,groupCemetery:SC,groupQRScan:EC,groupOther:TC,mapStopFollow:kC,mapStartFollow:MC,mapCenter:CC,mapLatitude:PC,mapLongitude:IC,mapAccuracy:AC,drStepWarning:LC,drSensorsUnsupported:zC,drPermissionNeeded:RC,drCalibrating:jC,drStopTracking:DC,drStartTracking:NC,drReset:BC,drExportLog:FC,drStepCount:OC,drStrideLength:$C,drRelPosition:UC,drHeading:VC,drLinearSpeed:HC,drAngularSpeed:GC,drEstimatedStride:qC,emergencyTitle:WC,emergencySubtitle:ZC,emergencyFire:XC,emergencyTheft:KC,emergencyMedical:JC,emergencyMissing:YC,soundSettingsTitle:QC,soundOptionOn:e3,soundOptionAlertOnly:t3,soundOptionOff:n3,emergencyButtonLabel:r3,arrivalTime:i3,routeOverview:o3,allRoutes:s3,otherRoutes:a3,startRouting:l3,stopRouting:c3,returnToRoute:u3,from:h3,to:d3,meters:p3,metersPerSecond:f3,degreesPerSecond:m3,defaultUserName:g3,defaultLocation:y3,defaultBabRezaName:v3,destSahnEnqelabName:x3,destSahnEnqelabLocation:_3,destEyvanTalaName:w3,destEyvanTalaLocation:b3,destRavaqMasoumehName:S3,destRavaqMasoumehLocation:E3,destMasjedGoharshadName:T3,destMasjedGoharshadLocation:k3,destSahnPayambarAzamName:M3,destSahnPayambarAzamLocation:C3,finalSearchTitle:P3,saveDestination:I3,shareRoute:A3,transportWalk:L3,transportCar:z3,transportWheelchair:R3,routeForMen:j3,routeForWomen:D3,routeSummary:N3,minutesUnit:B3,secondsUnit:F3,previous:O3,next:$3,pwaInstallTitle:U3,pwaInstallPrompt:V3,pwaInstallButton:H3,mapNoRecentSearches:G3,pwaCloseButton:q3,stepMoveToDoor:W3,stepPassConnection:Z3,stepEnterNextSahn:X3,stepPassDoor:K3,stepArriveDestination:J3,stepNumber:Y3},eP=" !",tP=" ",nP="                     ",rP="    ",iP="   !",oP="            ",sP="  ",aP="{title}   {n}",lP='      <a href="/terms"></a>  <a href="/privacy">  </a>  ',cP="",uP="",hP="  ",dP="",pP="",fP=" {year}   -    ",mP="  ",gP="   ",yP="",vP="  ",xP="   ",_P="     {phone}    ",wP="   ",bP=" ",SP="    (  )",EP=" ",TP="  ",kP="  ",MP="",CP="  ",PP="    ",IP="  ",AP="",LP="",zP=" ",RP="",jP="   ",DP="  ",NP=" ",BP="   ",FP="  ...",OP="     ",$P="              ",UP="  :",VP="    ",HP="  !",GP="{title}   ",qP=" ",WP=" ",ZP="{title}     ",XP=" ({count})",KP=" ",JP="       ",YP="                   .",QP=" ",eI=" ",tI="   ",nI="",rI="      ",iI="  ",oI=" ",sI="",aI=" ",lI="  ",cI="   ...",uI="    : {error}",hI="   ",dI=" {n}  ",pI="    ",fI="  ",mI="  ",gI="  ",yI="  ",vI="  ",xI="  ",_I='"{query}"      ',wI="     ",bI="   ",SI=" ...",EI="    ",TI="    ",kI="  ",MI="   ",CI="    ({loc})",PI="   ",II=" ",AI="   ",LI="   ",zI="",RI="",jI="",DI="",NI="",BI="",FI="",OI="",$I="   ",UI="",VI="   ",HI="  ",GI="    ",qI=" :",WI=" :",ZI=":",XI=":                .",KI="     .",JI="       .",YI="    ...",QI="  ",eA="   ",tA="   ",nA="  ",rA="  :",iA="   ():",oA=" :",sA=" ():",aA=" :",lA=" :",cA="   :",uA="  ",hA="                   .",dA="  ",pA="  ",fA="   ",mA="  ",gA="  ",yA="",vA=" ",xA="",_A="  ",wA="  ",bA="  ",SA=" ",EA=" ",TA="    ",kA="  ",MA="      ",CA="",PA="",IA="",AA="  ",LA="  ",zA=" ",RA=" ",jA=" ",DA=" ",NA="    ",BA=" ",FA="     ...",OA="  ",$A="      ...",UA=" ",VA="    ",HA="  ",GA="    ...",qA="   ",WA="  ",ZA=" ",XA="",KA=" ",JA=" ",YA="   ",QA="   ",e5="{origin}  {destination} ",t5="",n5="",r5="",i5="",o5="  ",s5="         ",a5="",l5="   ",c5=" ",u5="{name}   ",h5="  {title}  ",d5="{title}        ",p5="{name}  ",f5="{name}  ",m5=" {num}",g5={welcome:eP,appTitle:tP,selectLanguage:nP,loginButton:rP,loginTitle:iP,enterPhone:oP,logoAlt:sP,imageAlt:aP,terms:lP,home:cP,map:uP,qrScan:hP,settings:dP,profile:pP,copyright:fP,aboutUs:mP,contactUs:gP,privacy:yP,language:vP,enterVerification:xP,sentCode:_P,wrongPhone:wP,edit:bP,resendCode:SP,phonePlaceholder:EP,profileTitle:TP,completeProfile:kP,accountSection:MP,accountInfo:CP,myRoutes:PP,savedPlaces:IP,settingsSection:AP,notifications:LP,supportSection:zP,support:RP,faq:jP,termsRegulation:DP,logoutTitle:NP,logoutAccount:BP,commentPlaceholder:FP,commentModalTitle:OP,commentModalInstruction:$P,ratingPrompt:UP,submitComment:VP,youAreHere:HP,aboutLocation:GP,readMore:qP,close:WP,audioTextContent:ZP,commentsTitle:XP,viewAll:KP,commentPromptTitle:JP,commentPromptInstruction:YP,showLess:QP,showMore:eI,shrineEventsTitle:tI,navigate:nI,mostVisited:rI,nearMe:iI,save:oI,commentsLabel:sI,defaultCommentAuthor:aI,searchSuggestions:lI,loading:cI,fetchError:uI,noDataFound:hI,goToSlide:dI,searchPlaceholder:pI,originPlaceholder:fI,destinationPlaceholder:mI,destinationSearchPlaceholder:gI,originSearchPlaceholder:yI,closeSearch:vI,clearSearch:xI,noResultsFound:_I,enterSearchTerm:wI,chooseFromMap:bI,emergencyPlaceholder:SI,emergencySubmit:EI,mapSelectFromMap:TI,mapRoutingTitle:kI,mapCurrentOriginLabel:MI,mapCurrentLocation:CI,mapCurrentLocationName:PI,mapSelectedLocation:II,mapSelectedLocationFromMap:AI,mapRecentSearches:LI,groupCourtyardPlural:zI,groupEyvanPlural:RI,groupRavaqPlural:jI,groupMosques:DI,groupSchools:NI,groupServices:BI,groupCulture:FI,groupCemetery:OI,groupQRScan:$I,groupOther:UI,mapStopFollow:VI,mapStartFollow:HI,mapCenter:GI,mapLatitude:qI,mapLongitude:WI,mapAccuracy:ZI,drStepWarning:XI,drSensorsUnsupported:KI,drPermissionNeeded:JI,drCalibrating:YI,drStopTracking:QI,drStartTracking:eA,drReset:tA,drExportLog:nA,drStepCount:rA,drStrideLength:iA,drRelPosition:oA,drHeading:sA,drLinearSpeed:aA,drAngularSpeed:lA,drEstimatedStride:cA,emergencyTitle:uA,emergencySubtitle:hA,emergencyFire:dA,emergencyTheft:pA,emergencyMedical:fA,emergencyMissing:mA,soundSettingsTitle:gA,soundOptionOn:yA,soundOptionAlertOnly:vA,soundOptionOff:xA,emergencyButtonLabel:_A,arrivalTime:wA,routeOverview:bA,allRoutes:SA,otherRoutes:EA,startRouting:TA,stopRouting:kA,returnToRoute:MA,from:CA,to:PA,meters:IA,metersPerSecond:AA,degreesPerSecond:LA,defaultUserName:zA,defaultLocation:RA,defaultBabRezaName:jA,destSahnEnqelabName:DA,destSahnEnqelabLocation:NA,destEyvanTalaName:BA,destEyvanTalaLocation:FA,destRavaqMasoumehName:OA,destRavaqMasoumehLocation:$A,destMasjedGoharshadName:UA,destMasjedGoharshadLocation:VA,destSahnPayambarAzamName:HA,destSahnPayambarAzamLocation:GA,finalSearchTitle:qA,saveDestination:WA,shareRoute:ZA,transportWalk:XA,transportCar:KA,transportWheelchair:JA,routeForMen:YA,routeForWomen:QA,routeSummary:e5,minutesUnit:t5,secondsUnit:n5,previous:r5,next:i5,pwaInstallTitle:o5,pwaInstallPrompt:s5,pwaInstallButton:a5,mapNoRecentSearches:l5,pwaCloseButton:c5,stepMoveToDoor:u5,stepPassConnection:h5,stepEnterNextSahn:d5,stepPassDoor:p5,stepArriveDestination:f5,stepNumber:m5},y5={fa:xE,en:Dk,ar:Q3,ur:g5},v5=({children:a})=>{const p=uh(y=>y.language);return ne.useEffect(()=>{document.documentElement.lang=p,document.documentElement.dir=p==="en"?"ltr":"rtl"},[p]),v.jsx(Rv,{locale:p,messages:y5[p],defaultLocale:"fa",children:a})};function x5(a={}){const{immediate:p=!1,onNeedRefresh:y,onOfflineReady:_,onRegistered:E,onRegisteredSW:T,onRegisterError:C}=a;let c,B;const j=async(D=!0)=>{await B};async function $(){if("serviceWorker"in navigator){if(c=await a0(async()=>{const{Workbox:D}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:D}},[]).then(({Workbox:D})=>new D("/golden_path/sw.js",{scope:"/golden_path/",type:"classic"})).catch(D=>{C==null||C(D)}),!c)return;c.addEventListener("activated",D=>{(D.isUpdate||D.isExternal)&&window.location.reload()}),c.addEventListener("installed",D=>{D.isUpdate||_==null||_()}),c.register({immediate:p}).then(D=>{T?T("/golden_path/sw.js",D):E==null||E(D)}).catch(D=>{C==null||C(D)})}}return B=$(),j}const F0=new URLSearchParams(window.location.search),vg=F0.get("lat"),xg=F0.get("lng");vg&&xg&&(sessionStorage.setItem("qrLat",vg),sessionStorage.setItem("qrLng",xg));x5({onNeedRefresh(){console.log("New content is available; please refresh.")},onOfflineReady(){console.log("Content is cached for offline use.")}});ry.createRoot(document.getElementById("root")).render(v.jsx(id.StrictMode,{children:v.jsx(v5,{children:v.jsx(nw,{})})}));
