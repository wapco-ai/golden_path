# استخراج ساختار و محتوای فایل‌های پروژه   
# تاریخ: Tue 04/29/2025 13:32:55.25   
   
# ساختار پروژه:   
   
D:\develope\haram_routing\gps_validity\src\App.css
D:\develope\haram_routing\gps_validity\src\App.jsx
D:\develope\haram_routing\gps_validity\src\assets\images\logo.png
D:\develope\haram_routing\gps_validity\src\assets\react.svg
D:\develope\haram_routing\gps_validity\src\components\common\Button.jsx
D:\develope\haram_routing\gps_validity\src\components\common\Input.jsx
D:\develope\haram_routing\gps_validity\src\components\common\Loader.jsx
D:\develope\haram_routing\gps_validity\src\components\layout\Footer.jsx
D:\develope\haram_routing\gps_validity\src\components\layout\Header.jsx
D:\develope\haram_routing\gps_validity\src\components\layout\Menu.jsx
D:\develope\haram_routing\gps_validity\src\components\map\DeadReckoningControls.css
D:\develope\haram_routing\gps_validity\src\components\map\DeadReckoningControls.jsx
D:\develope\haram_routing\gps_validity\src\components\map\DirectionGuide.jsx
D:\develope\haram_routing\gps_validity\src\components\map\LocationTracker.jsx
D:\develope\haram_routing\gps_validity\src\components\map\Map.css
D:\develope\haram_routing\gps_validity\src\components\map\MapView.jsx
D:\develope\haram_routing\gps_validity\src\components\map\QRScanner.jsx
D:\develope\haram_routing\gps_validity\src\components\settings\SettingsForm.jsx
D:\develope\haram_routing\gps_validity\src\components\settings\SettingsPage.jsx
D:\develope\haram_routing\gps_validity\src\contexts\AuthContext.jsx
D:\develope\haram_routing\gps_validity\src\hooks\useGPS.js
D:\develope\haram_routing\gps_validity\src\hooks\useIMUSensors.js
D:\develope\haram_routing\gps_validity\src\hooks\useOfflineStorage.js
D:\develope\haram_routing\gps_validity\src\hooks\useQRCode.js
D:\develope\haram_routing\gps_validity\src\index.css
D:\develope\haram_routing\gps_validity\src\main.jsx
D:\develope\haram_routing\gps_validity\src\pages\HomePage.jsx
D:\develope\haram_routing\gps_validity\src\pages\LoginPage.jsx
D:\develope\haram_routing\gps_validity\src\pages\MapPage.jsx
D:\develope\haram_routing\gps_validity\src\pages\NotFoundPage.jsx
D:\develope\haram_routing\gps_validity\src\pages\QRScanPage.jsx
D:\develope\haram_routing\gps_validity\src\pages\SettingsPage.css
D:\develope\haram_routing\gps_validity\src\pages\SettingsPage.jsx
D:\develope\haram_routing\gps_validity\src\services\AdvancedDeadReckoningService.js
D:\develope\haram_routing\gps_validity\src\services\api.js
D:\develope\haram_routing\gps_validity\src\services\auth.js
D:\develope\haram_routing\gps_validity\src\services\DeadReckoningService.js
D:\develope\haram_routing\gps_validity\src\services\geolocation.js
D:\develope\haram_routing\gps_validity\src\services\KalmanFilter.js
D:\develope\haram_routing\gps_validity\src\services\LogStorageService.js
D:\develope\haram_routing\gps_validity\src\services\qrcode.js
D:\develope\haram_routing\gps_validity\src\services\SignalProcessor.js
D:\develope\haram_routing\gps_validity\src\services\storage.js
D:\develope\haram_routing\gps_validity\src\store\gpsStore.js
D:\develope\haram_routing\gps_validity\src\store\settingsStore.js
D:\develope\haram_routing\gps_validity\src\store\userStore.js
D:\develope\haram_routing\gps_validity\src\styles\DeadReckoning.css
D:\develope\haram_routing\gps_validity\src\utils\constants.js
D:\develope\haram_routing\gps_validity\src\utils\gpsFilter.js
D:\develope\haram_routing\gps_validity\src\utils\helpers.js
D:\develope\haram_routing\gps_validity\src\utils\HighPassFilter.js
D:\develope\haram_routing\gps_validity\src\utils\KalmanFilter.js
D:\develope\haram_routing\gps_validity\src\utils\LowPassFilter.js
D:\develope\haram_routing\gps_validity\src\utils\PeakDetector.js
D:\develope\haram_routing\gps_validity\src\utils\useGPSNoiseDetection.js
D:\develope\haram_routing\gps_validity\src\utils\validation.js
   
# محتوای فایل‌های اصلی:   
   
## \eslint.config.js   
```javascript   
import js from '@eslint/js'
import globals from 'globals'
import reactHooks from 'eslint-plugin-react-hooks'
import reactRefresh from 'eslint-plugin-react-refresh'

export default [
  { ignores: ['dist'] },
  {
    files: ['**/*.{js,jsx}'],
    languageOptions: {
      ecmaVersion: 2020,
      globals: globals.browser,
      parserOptions: {
        ecmaVersion: 'latest',
        ecmaFeatures: { jsx: true },
        sourceType: 'module',
      },
    },
    plugins: {
      'react-hooks': reactHooks,
      'react-refresh': reactRefresh,
    },
    rules: {
      ...js.configs.recommended.rules,
      ...reactHooks.configs.recommended.rules,
      'no-unused-vars': ['error', { varsIgnorePattern: '^[A-Z_]' }],
      'react-refresh/only-export-components': [
        'warn',
        { allowConstantExport: true },
      ],
    },
  },
]
```   
   
## \vite.config.js   
```javascript   
import { defineConfig } from 'vite';  
import react from '@vitejs/plugin-react';  
import { VitePWA } from 'vite-plugin-pwa';  

export default defineConfig({  
  //base: process.env.BASE_URL || '/',  
  base: '/golden_path/',
  plugins: [  
    react(),  
    VitePWA({  
      registerType: 'autoUpdate',  
      includeAssets: ['favicon.ico', 'robots.txt', 'apple-touch-icon.png'],  
      manifest: {  
        name: 'GPS Validity',  
        short_name: 'GPSValid',  
        description: 'اپلیکیشن GPS Validity برای ردیابی موقعیت با دقت بالا',  
        theme_color: '#ffffff',  
        background_color: '#f0f2f5',  
        display: 'standalone',  
        scope: '/',  
        start_url: '/',  
        icons: [  
          {  
            src: '/icons/pwa-192x192.png',  
            sizes: '192x192',  
            type: 'image/png'  
          },  
          {  
            src: '/icons/pwa-512x512.png',  
            sizes: '512x512',  
            type: 'image/png'  
          },  
          {  
            src: '/icons/pwa-512x512.png',  
            sizes: '512x512',  
            type: 'image/png',  
            purpose: 'maskable'  
          }  
        ]  
      },  
      workbox: {  
        globPatterns: ['**/*.{js,css,html,ico,png,svg,json}'],  
        runtimeCaching: [  
          {  
            urlPattern: /^https:\/\/api\.mapbox\.com\/.*/,   
            handler: 'CacheFirst',  
            options: {  
              cacheName: 'mapbox-cache',  
              expiration: {  
                maxEntries: 50,  
                maxAgeSeconds: 60 * 60 * 24 * 30 // 30 روز  
              }  
            }  
          },  
          {  
            urlPattern: /^https:\/\/unpkg\.com\/.*/,   
            handler: 'CacheFirst',  
            options: {  
              cacheName: 'unpkg-cache',  
              expiration: {  
                maxEntries: 10,  
                maxAgeSeconds: 60 * 60 * 24 * 30 // 30 روز  
              }  
            }  
          },  
          {  
            urlPattern: ({ url }) => url.pathname.startsWith('/api/'),  
            handler: 'NetworkFirst',  
            options: {  
              cacheName: 'api-cache',  
              expiration: {  
                maxEntries: 100,  
                maxAgeSeconds: 60 * 60 * 24 // 1 روز  
              },  
              networkTimeoutSeconds: 10  
            }  
          }  
        ]  
      }  
    })  
  ]  
});  ```   
   
## \dist\registerSW.js   
```javascript   
if('serviceWorker' in navigator) {window.addEventListener('load', () => {navigator.serviceWorker.register('/golden_path/sw.js', { scope: '/golden_path/' })})}```   
   
## \dist\sw.js   
```javascript   
if(!self.define){let e,n={};const i=(i,s)=>(i=new URL(i+".js",s).href,n[i]||new Promise((n=>{if("document"in self){const e=document.createElement("script");e.src=i,e.onload=n,document.head.appendChild(e)}else e=i,importScripts(i),n()})).then((()=>{let e=n[i];if(!e)throw new Error(`Module ${i} didn’t register its module`);return e})));self.define=(s,c)=>{const a=e||("document"in self?document.currentScript.src:"")||location.href;if(n[a])return;let o={};const r=e=>i(e,a),d={module:{uri:a},exports:o,require:r};n[a]=Promise.all(s.map((e=>d[e]||r(e)))).then((e=>(c(...e),o)))}}define(["./workbox-239d0d27"],(function(e){"use strict";self.skipWaiting(),e.clientsClaim(),e.precacheAndRoute([{url:"404.html",revision:"0f039433c5f9084a8fbabbdd6fceb18e"},{url:"assets/index-BYIk0cK5.css",revision:null},{url:"assets/index-CzOrwO-_.js",revision:null},{url:"icons/apple-touch-icon.png",revision:"095589230f56e710549b22431adda8c1"},{url:"icons/pwa-192x192.png",revision:"da08047fc12f5ac5c99ae3ec2e2fd327"},{url:"icons/pwa-512x512.png",revision:"e4d4d93cda73432ab7f8fa09394cf409"},{url:"index.html",revision:"5f70ddfcef293738fda602247f9013cf"},{url:"locales/fa.json",revision:"d41d8cd98f00b204e9800998ecf8427e"},{url:"registerSW.js",revision:"e823bd781e15aa6e3632522489a00709"},{url:"vite.svg",revision:"8e3a10e157f75ada21ab742c022d5430"},{url:"robots.txt",revision:"d41d8cd98f00b204e9800998ecf8427e"},{url:"icons/pwa-192x192.png",revision:"da08047fc12f5ac5c99ae3ec2e2fd327"},{url:"icons/pwa-512x512.png",revision:"e4d4d93cda73432ab7f8fa09394cf409"},{url:"manifest.webmanifest",revision:"40a6119a57fcabd413ef984172574d93"}],{}),e.cleanupOutdatedCaches(),e.registerRoute(new e.NavigationRoute(e.createHandlerBoundToURL("index.html"))),e.registerRoute(/^https:\/\/api\.mapbox\.com\/.*/,new e.CacheFirst({cacheName:"mapbox-cache",plugins:[new e.ExpirationPlugin({maxEntries:50,maxAgeSeconds:2592e3})]}),"GET"),e.registerRoute(/^https:\/\/unpkg\.com\/.*/,new e.CacheFirst({cacheName:"unpkg-cache",plugins:[new e.ExpirationPlugin({maxEntries:10,maxAgeSeconds:2592e3})]}),"GET"),e.registerRoute((({url:e})=>e.pathname.startsWith("/api/")),new e.NetworkFirst({cacheName:"api-cache",networkTimeoutSeconds:10,plugins:[new e.ExpirationPlugin({maxEntries:100,maxAgeSeconds:86400})]}),"GET")}));
```   
   
## \dist\workbox-239d0d27.js   
```javascript   
define(["exports"],(function(t){"use strict";try{self["workbox:core:7.2.0"]&&_()}catch(t){}const e=(t,...e)=>{let s=t;return e.length>0&&(s+=` :: ${JSON.stringify(e)}`),s};class s extends Error{constructor(t,s){super(e(t,s)),this.name=t,this.details=s}}try{self["workbox:routing:7.2.0"]&&_()}catch(t){}const n=t=>t&&"object"==typeof t?t:{handle:t};class i{constructor(t,e,s="GET"){this.handler=n(e),this.match=t,this.method=s}setCatchHandler(t){this.catchHandler=n(t)}}class r extends i{constructor(t,e,s){super((({url:e})=>{const s=t.exec(e.href);if(s&&(e.origin===location.origin||0===s.index))return s.slice(1)}),e,s)}}class a{constructor(){this.t=new Map,this.i=new Map}get routes(){return this.t}addFetchListener(){self.addEventListener("fetch",(t=>{const{request:e}=t,s=this.handleRequest({request:e,event:t});s&&t.respondWith(s)}))}addCacheListener(){self.addEventListener("message",(t=>{if(t.data&&"CACHE_URLS"===t.data.type){const{payload:e}=t.data,s=Promise.all(e.urlsToCache.map((e=>{"string"==typeof e&&(e=[e]);const s=new Request(...e);return this.handleRequest({request:s,event:t})})));t.waitUntil(s),t.ports&&t.ports[0]&&s.then((()=>t.ports[0].postMessage(!0)))}}))}handleRequest({request:t,event:e}){const s=new URL(t.url,location.href);if(!s.protocol.startsWith("http"))return;const n=s.origin===location.origin,{params:i,route:r}=this.findMatchingRoute({event:e,request:t,sameOrigin:n,url:s});let a=r&&r.handler;const o=t.method;if(!a&&this.i.has(o)&&(a=this.i.get(o)),!a)return;let c;try{c=a.handle({url:s,request:t,event:e,params:i})}catch(t){c=Promise.reject(t)}const h=r&&r.catchHandler;return c instanceof Promise&&(this.o||h)&&(c=c.catch((async n=>{if(h)try{return await h.handle({url:s,request:t,event:e,params:i})}catch(t){t instanceof Error&&(n=t)}if(this.o)return this.o.handle({url:s,request:t,event:e});throw n}))),c}findMatchingRoute({url:t,sameOrigin:e,request:s,event:n}){const i=this.t.get(s.method)||[];for(const r of i){let i;const a=r.match({url:t,sameOrigin:e,request:s,event:n});if(a)return i=a,(Array.isArray(i)&&0===i.length||a.constructor===Object&&0===Object.keys(a).length||"boolean"==typeof a)&&(i=void 0),{route:r,params:i}}return{}}setDefaultHandler(t,e="GET"){this.i.set(e,n(t))}setCatchHandler(t){this.o=n(t)}registerRoute(t){this.t.has(t.method)||this.t.set(t.method,[]),this.t.get(t.method).push(t)}unregisterRoute(t){if(!this.t.has(t.method))throw new s("unregister-route-but-not-found-with-method",{method:t.method});const e=this.t.get(t.method).indexOf(t);if(!(e>-1))throw new s("unregister-route-route-not-registered");this.t.get(t.method).splice(e,1)}}let o;const c=()=>(o||(o=new a,o.addFetchListener(),o.addCacheListener()),o);function h(t,e,n){let a;if("string"==typeof t){const s=new URL(t,location.href);a=new i((({url:t})=>t.href===s.href),e,n)}else if(t instanceof RegExp)a=new r(t,e,n);else if("function"==typeof t)a=new i(t,e,n);else{if(!(t instanceof i))throw new s("unsupported-route-type",{moduleName:"workbox-routing",funcName:"registerRoute",paramName:"capture"});a=t}return c().registerRoute(a),a}const u={googleAnalytics:"googleAnalytics",precache:"precache-v2",prefix:"workbox",runtime:"runtime",suffix:"undefined"!=typeof registration?registration.scope:""},l=t=>[u.prefix,t,u.suffix].filter((t=>t&&t.length>0)).join("-"),f=t=>t||l(u.precache),w=t=>t||l(u.runtime);function d(t){t.then((()=>{}))}const p=new Set;function y(){return y=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)({}).hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},y.apply(null,arguments)}let m,g;const R=new WeakMap,v=new WeakMap,b=new WeakMap,q=new WeakMap,D=new WeakMap;let U={get(t,e,s){if(t instanceof IDBTransaction){if("done"===e)return v.get(t);if("objectStoreNames"===e)return t.objectStoreNames||b.get(t);if("store"===e)return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return L(t[e])},set:(t,e,s)=>(t[e]=s,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function x(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(g||(g=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(E(this),e),L(R.get(this))}:function(...e){return L(t.apply(E(this),e))}:function(e,...s){const n=t.call(E(this),e,...s);return b.set(n,e.sort?e.sort():[e]),L(n)}}function I(t){return"function"==typeof t?x(t):(t instanceof IDBTransaction&&function(t){if(v.has(t))return;const e=new Promise(((e,s)=>{const n=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",r),t.removeEventListener("abort",r)},i=()=>{e(),n()},r=()=>{s(t.error||new DOMException("AbortError","AbortError")),n()};t.addEventListener("complete",i),t.addEventListener("error",r),t.addEventListener("abort",r)}));v.set(t,e)}(t),e=t,(m||(m=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((t=>e instanceof t))?new Proxy(t,U):t);var e}function L(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,s)=>{const n=()=>{t.removeEventListener("success",i),t.removeEventListener("error",r)},i=()=>{e(L(t.result)),n()},r=()=>{s(t.error),n()};t.addEventListener("success",i),t.addEventListener("error",r)}));return e.then((e=>{e instanceof IDBCursor&&R.set(e,t)})).catch((()=>{})),D.set(e,t),e}(t);if(q.has(t))return q.get(t);const e=I(t);return e!==t&&(q.set(t,e),D.set(e,t)),e}const E=t=>D.get(t);const C=["get","getKey","getAll","getAllKeys","count"],N=["put","add","delete","clear"],O=new Map;function k(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(O.get(e))return O.get(e);const s=e.replace(/FromIndex$/,""),n=e!==s,i=N.includes(s);if(!(s in(n?IDBIndex:IDBObjectStore).prototype)||!i&&!C.includes(s))return;const r=async function(t,...e){const r=this.transaction(t,i?"readwrite":"readonly");let a=r.store;return n&&(a=a.index(e.shift())),(await Promise.all([a[s](...e),i&&r.done]))[0]};return O.set(e,r),r}U=(t=>y({},t,{get:(e,s,n)=>k(e,s)||t.get(e,s,n),has:(e,s)=>!!k(e,s)||t.has(e,s)}))(U);try{self["workbox:expiration:7.2.0"]&&_()}catch(t){}const B="cache-entries",T=t=>{const e=new URL(t,location.href);return e.hash="",e.href};class M{constructor(t){this.h=null,this.u=t}l(t){const e=t.createObjectStore(B,{keyPath:"id"});e.createIndex("cacheName","cacheName",{unique:!1}),e.createIndex("timestamp","timestamp",{unique:!1})}p(t){this.l(t),this.u&&function(t,{blocked:e}={}){const s=indexedDB.deleteDatabase(t);e&&s.addEventListener("blocked",(t=>e(t.oldVersion,t))),L(s).then((()=>{}))}(this.u)}async setTimestamp(t,e){const s={url:t=T(t),timestamp:e,cacheName:this.u,id:this.m(t)},n=(await this.getDb()).transaction(B,"readwrite",{durability:"relaxed"});await n.store.put(s),await n.done}async getTimestamp(t){const e=await this.getDb(),s=await e.get(B,this.m(t));return null==s?void 0:s.timestamp}async expireEntries(t,e){const s=await this.getDb();let n=await s.transaction(B).store.index("timestamp").openCursor(null,"prev");const i=[];let r=0;for(;n;){const s=n.value;s.cacheName===this.u&&(t&&s.timestamp<t||e&&r>=e?i.push(n.value):r++),n=await n.continue()}const a=[];for(const t of i)await s.delete(B,t.id),a.push(t.url);return a}m(t){return this.u+"|"+T(t)}async getDb(){return this.h||(this.h=await function(t,e,{blocked:s,upgrade:n,blocking:i,terminated:r}={}){const a=indexedDB.open(t,e),o=L(a);return n&&a.addEventListener("upgradeneeded",(t=>{n(L(a.result),t.oldVersion,t.newVersion,L(a.transaction),t)})),s&&a.addEventListener("blocked",(t=>s(t.oldVersion,t.newVersion,t))),o.then((t=>{r&&t.addEventListener("close",(()=>r())),i&&t.addEventListener("versionchange",(t=>i(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),o}("workbox-expiration",1,{upgrade:this.p.bind(this)})),this.h}}class P{constructor(t,e={}){this.R=!1,this.v=!1,this.q=e.maxEntries,this.D=e.maxAgeSeconds,this.U=e.matchOptions,this.u=t,this._=new M(t)}async expireEntries(){if(this.R)return void(this.v=!0);this.R=!0;const t=this.D?Date.now()-1e3*this.D:0,e=await this._.expireEntries(t,this.q),s=await self.caches.open(this.u);for(const t of e)await s.delete(t,this.U);this.R=!1,this.v&&(this.v=!1,d(this.expireEntries()))}async updateTimestamp(t){await this._.setTimestamp(t,Date.now())}async isURLExpired(t){if(this.D){const e=await this._.getTimestamp(t),s=Date.now()-1e3*this.D;return void 0===e||e<s}return!1}async delete(){this.v=!1,await this._.expireEntries(1/0)}}function W(t,e){const s=new URL(t);for(const t of e)s.searchParams.delete(t);return s.href}class j{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}try{self["workbox:strategies:7.2.0"]&&_()}catch(t){}function S(t){return"string"==typeof t?new Request(t):t}class K{constructor(t,e){this.I={},Object.assign(this,e),this.event=e.event,this.L=t,this.C=new j,this.N=[],this.O=[...t.plugins],this.k=new Map;for(const t of this.O)this.k.set(t,{});this.event.waitUntil(this.C.promise)}async fetch(t){const{event:e}=this;let n=S(t);if("navigate"===n.mode&&e instanceof FetchEvent&&e.preloadResponse){const t=await e.preloadResponse;if(t)return t}const i=this.hasCallback("fetchDidFail")?n.clone():null;try{for(const t of this.iterateCallbacks("requestWillFetch"))n=await t({request:n.clone(),event:e})}catch(t){if(t instanceof Error)throw new s("plugin-error-request-will-fetch",{thrownErrorMessage:t.message})}const r=n.clone();try{let t;t=await fetch(n,"navigate"===n.mode?void 0:this.L.fetchOptions);for(const s of this.iterateCallbacks("fetchDidSucceed"))t=await s({event:e,request:r,response:t});return t}catch(t){throw i&&await this.runCallbacks("fetchDidFail",{error:t,event:e,originalRequest:i.clone(),request:r.clone()}),t}}async fetchAndCachePut(t){const e=await this.fetch(t),s=e.clone();return this.waitUntil(this.cachePut(t,s)),e}async cacheMatch(t){const e=S(t);let s;const{cacheName:n,matchOptions:i}=this.L,r=await this.getCacheKey(e,"read"),a=Object.assign(Object.assign({},i),{cacheName:n});s=await caches.match(r,a);for(const t of this.iterateCallbacks("cachedResponseWillBeUsed"))s=await t({cacheName:n,matchOptions:i,cachedResponse:s,request:r,event:this.event})||void 0;return s}async cachePut(t,e){const n=S(t);var i;await(i=0,new Promise((t=>setTimeout(t,i))));const r=await this.getCacheKey(n,"write");if(!e)throw new s("cache-put-with-no-response",{url:(a=r.url,new URL(String(a),location.href).href.replace(new RegExp(`^${location.origin}`),""))});var a;const o=await this.B(e);if(!o)return!1;const{cacheName:c,matchOptions:h}=this.L,u=await self.caches.open(c),l=this.hasCallback("cacheDidUpdate"),f=l?await async function(t,e,s,n){const i=W(e.url,s);if(e.url===i)return t.match(e,n);const r=Object.assign(Object.assign({},n),{ignoreSearch:!0}),a=await t.keys(e,r);for(const e of a)if(i===W(e.url,s))return t.match(e,n)}(u,r.clone(),["__WB_REVISION__"],h):null;try{await u.put(r,l?o.clone():o)}catch(t){if(t instanceof Error)throw"QuotaExceededError"===t.name&&await async function(){for(const t of p)await t()}(),t}for(const t of this.iterateCallbacks("cacheDidUpdate"))await t({cacheName:c,oldResponse:f,newResponse:o.clone(),request:r,event:this.event});return!0}async getCacheKey(t,e){const s=`${t.url} | ${e}`;if(!this.I[s]){let n=t;for(const t of this.iterateCallbacks("cacheKeyWillBeUsed"))n=S(await t({mode:e,request:n,event:this.event,params:this.params}));this.I[s]=n}return this.I[s]}hasCallback(t){for(const e of this.L.plugins)if(t in e)return!0;return!1}async runCallbacks(t,e){for(const s of this.iterateCallbacks(t))await s(e)}*iterateCallbacks(t){for(const e of this.L.plugins)if("function"==typeof e[t]){const s=this.k.get(e),n=n=>{const i=Object.assign(Object.assign({},n),{state:s});return e[t](i)};yield n}}waitUntil(t){return this.N.push(t),t}async doneWaiting(){let t;for(;t=this.N.shift();)await t}destroy(){this.C.resolve(null)}async B(t){let e=t,s=!1;for(const t of this.iterateCallbacks("cacheWillUpdate"))if(e=await t({request:this.request,response:e,event:this.event})||void 0,s=!0,!e)break;return s||e&&200!==e.status&&(e=void 0),e}}class A{constructor(t={}){this.cacheName=w(t.cacheName),this.plugins=t.plugins||[],this.fetchOptions=t.fetchOptions,this.matchOptions=t.matchOptions}handle(t){const[e]=this.handleAll(t);return e}handleAll(t){t instanceof FetchEvent&&(t={event:t,request:t.request});const e=t.event,s="string"==typeof t.request?new Request(t.request):t.request,n="params"in t?t.params:void 0,i=new K(this,{event:e,request:s,params:n}),r=this.T(i,s,e);return[r,this.M(r,i,s,e)]}async T(t,e,n){let i;await t.runCallbacks("handlerWillStart",{event:n,request:e});try{if(i=await this.P(e,t),!i||"error"===i.type)throw new s("no-response",{url:e.url})}catch(s){if(s instanceof Error)for(const r of t.iterateCallbacks("handlerDidError"))if(i=await r({error:s,event:n,request:e}),i)break;if(!i)throw s}for(const s of t.iterateCallbacks("handlerWillRespond"))i=await s({event:n,request:e,response:i});return i}async M(t,e,s,n){let i,r;try{i=await t}catch(r){}try{await e.runCallbacks("handlerDidRespond",{event:n,request:s,response:i}),await e.doneWaiting()}catch(t){t instanceof Error&&(r=t)}if(await e.runCallbacks("handlerDidComplete",{event:n,request:s,response:i,error:r}),e.destroy(),r)throw r}}const F={cacheWillUpdate:async({response:t})=>200===t.status||0===t.status?t:null};function H(t,e){const s=e();return t.waitUntil(s),s}try{self["workbox:precaching:7.2.0"]&&_()}catch(t){}function $(t){if(!t)throw new s("add-to-cache-list-unexpected-type",{entry:t});if("string"==typeof t){const e=new URL(t,location.href);return{cacheKey:e.href,url:e.href}}const{revision:e,url:n}=t;if(!n)throw new s("add-to-cache-list-unexpected-type",{entry:t});if(!e){const t=new URL(n,location.href);return{cacheKey:t.href,url:t.href}}const i=new URL(n,location.href),r=new URL(n,location.href);return i.searchParams.set("__WB_REVISION__",e),{cacheKey:i.href,url:r.href}}class G{constructor(){this.updatedURLs=[],this.notUpdatedURLs=[],this.handlerWillStart=async({request:t,state:e})=>{e&&(e.originalRequest=t)},this.cachedResponseWillBeUsed=async({event:t,state:e,cachedResponse:s})=>{if("install"===t.type&&e&&e.originalRequest&&e.originalRequest instanceof Request){const t=e.originalRequest.url;s?this.notUpdatedURLs.push(t):this.updatedURLs.push(t)}return s}}}class V{constructor({precacheController:t}){this.cacheKeyWillBeUsed=async({request:t,params:e})=>{const s=(null==e?void 0:e.cacheKey)||this.W.getCacheKeyForURL(t.url);return s?new Request(s,{headers:t.headers}):t},this.W=t}}let J,Q;async function z(t,e){let n=null;if(t.url){n=new URL(t.url).origin}if(n!==self.location.origin)throw new s("cross-origin-copy-response",{origin:n});const i=t.clone(),r={headers:new Headers(i.headers),status:i.status,statusText:i.statusText},a=e?e(r):r,o=function(){if(void 0===J){const t=new Response("");if("body"in t)try{new Response(t.body),J=!0}catch(t){J=!1}J=!1}return J}()?i.body:await i.blob();return new Response(o,a)}class X extends A{constructor(t={}){t.cacheName=f(t.cacheName),super(t),this.j=!1!==t.fallbackToNetwork,this.plugins.push(X.copyRedirectedCacheableResponsesPlugin)}async P(t,e){const s=await e.cacheMatch(t);return s||(e.event&&"install"===e.event.type?await this.S(t,e):await this.K(t,e))}async K(t,e){let n;const i=e.params||{};if(!this.j)throw new s("missing-precache-entry",{cacheName:this.cacheName,url:t.url});{const s=i.integrity,r=t.integrity,a=!r||r===s;n=await e.fetch(new Request(t,{integrity:"no-cors"!==t.mode?r||s:void 0})),s&&a&&"no-cors"!==t.mode&&(this.A(),await e.cachePut(t,n.clone()))}return n}async S(t,e){this.A();const n=await e.fetch(t);if(!await e.cachePut(t,n.clone()))throw new s("bad-precaching-response",{url:t.url,status:n.status});return n}A(){let t=null,e=0;for(const[s,n]of this.plugins.entries())n!==X.copyRedirectedCacheableResponsesPlugin&&(n===X.defaultPrecacheCacheabilityPlugin&&(t=s),n.cacheWillUpdate&&e++);0===e?this.plugins.push(X.defaultPrecacheCacheabilityPlugin):e>1&&null!==t&&this.plugins.splice(t,1)}}X.defaultPrecacheCacheabilityPlugin={cacheWillUpdate:async({response:t})=>!t||t.status>=400?null:t},X.copyRedirectedCacheableResponsesPlugin={cacheWillUpdate:async({response:t})=>t.redirected?await z(t):t};class Y{constructor({cacheName:t,plugins:e=[],fallbackToNetwork:s=!0}={}){this.F=new Map,this.H=new Map,this.$=new Map,this.L=new X({cacheName:f(t),plugins:[...e,new V({precacheController:this})],fallbackToNetwork:s}),this.install=this.install.bind(this),this.activate=this.activate.bind(this)}get strategy(){return this.L}precache(t){this.addToCacheList(t),this.G||(self.addEventListener("install",this.install),self.addEventListener("activate",this.activate),this.G=!0)}addToCacheList(t){const e=[];for(const n of t){"string"==typeof n?e.push(n):n&&void 0===n.revision&&e.push(n.url);const{cacheKey:t,url:i}=$(n),r="string"!=typeof n&&n.revision?"reload":"default";if(this.F.has(i)&&this.F.get(i)!==t)throw new s("add-to-cache-list-conflicting-entries",{firstEntry:this.F.get(i),secondEntry:t});if("string"!=typeof n&&n.integrity){if(this.$.has(t)&&this.$.get(t)!==n.integrity)throw new s("add-to-cache-list-conflicting-integrities",{url:i});this.$.set(t,n.integrity)}if(this.F.set(i,t),this.H.set(i,r),e.length>0){const t=`Workbox is precaching URLs without revision info: ${e.join(", ")}\nThis is generally NOT safe. Learn more at https://bit.ly/wb-precache`;console.warn(t)}}}install(t){return H(t,(async()=>{const e=new G;this.strategy.plugins.push(e);for(const[e,s]of this.F){const n=this.$.get(s),i=this.H.get(e),r=new Request(e,{integrity:n,cache:i,credentials:"same-origin"});await Promise.all(this.strategy.handleAll({params:{cacheKey:s},request:r,event:t}))}const{updatedURLs:s,notUpdatedURLs:n}=e;return{updatedURLs:s,notUpdatedURLs:n}}))}activate(t){return H(t,(async()=>{const t=await self.caches.open(this.strategy.cacheName),e=await t.keys(),s=new Set(this.F.values()),n=[];for(const i of e)s.has(i.url)||(await t.delete(i),n.push(i.url));return{deletedURLs:n}}))}getURLsToCacheKeys(){return this.F}getCachedURLs(){return[...this.F.keys()]}getCacheKeyForURL(t){const e=new URL(t,location.href);return this.F.get(e.href)}getIntegrityForCacheKey(t){return this.$.get(t)}async matchPrecache(t){const e=t instanceof Request?t.url:t,s=this.getCacheKeyForURL(e);if(s){return(await self.caches.open(this.strategy.cacheName)).match(s)}}createHandlerBoundToURL(t){const e=this.getCacheKeyForURL(t);if(!e)throw new s("non-precached-url",{url:t});return s=>(s.request=new Request(t),s.params=Object.assign({cacheKey:e},s.params),this.strategy.handle(s))}}const Z=()=>(Q||(Q=new Y),Q);class tt extends i{constructor(t,e){super((({request:s})=>{const n=t.getURLsToCacheKeys();for(const i of function*(t,{ignoreURLParametersMatching:e=[/^utm_/,/^fbclid$/],directoryIndex:s="index.html",cleanURLs:n=!0,urlManipulation:i}={}){const r=new URL(t,location.href);r.hash="",yield r.href;const a=function(t,e=[]){for(const s of[...t.searchParams.keys()])e.some((t=>t.test(s)))&&t.searchParams.delete(s);return t}(r,e);if(yield a.href,s&&a.pathname.endsWith("/")){const t=new URL(a.href);t.pathname+=s,yield t.href}if(n){const t=new URL(a.href);t.pathname+=".html",yield t.href}if(i){const t=i({url:r});for(const e of t)yield e.href}}(s.url,e)){const e=n.get(i);if(e){return{cacheKey:e,integrity:t.getIntegrityForCacheKey(e)}}}}),t.strategy)}}t.CacheFirst=class extends A{async P(t,e){let n,i=await e.cacheMatch(t);if(!i)try{i=await e.fetchAndCachePut(t)}catch(t){t instanceof Error&&(n=t)}if(!i)throw new s("no-response",{url:t.url,error:n});return i}},t.ExpirationPlugin=class{constructor(t={}){this.cachedResponseWillBeUsed=async({event:t,request:e,cacheName:s,cachedResponse:n})=>{if(!n)return null;const i=this.V(n),r=this.J(s);d(r.expireEntries());const a=r.updateTimestamp(e.url);if(t)try{t.waitUntil(a)}catch(t){}return i?n:null},this.cacheDidUpdate=async({cacheName:t,request:e})=>{const s=this.J(t);await s.updateTimestamp(e.url),await s.expireEntries()},this.X=t,this.D=t.maxAgeSeconds,this.Y=new Map,t.purgeOnQuotaError&&function(t){p.add(t)}((()=>this.deleteCacheAndMetadata()))}J(t){if(t===w())throw new s("expire-custom-caches-only");let e=this.Y.get(t);return e||(e=new P(t,this.X),this.Y.set(t,e)),e}V(t){if(!this.D)return!0;const e=this.Z(t);if(null===e)return!0;return e>=Date.now()-1e3*this.D}Z(t){if(!t.headers.has("date"))return null;const e=t.headers.get("date"),s=new Date(e).getTime();return isNaN(s)?null:s}async deleteCacheAndMetadata(){for(const[t,e]of this.Y)await self.caches.delete(t),await e.delete();this.Y=new Map}},t.NavigationRoute=class extends i{constructor(t,{allowlist:e=[/./],denylist:s=[]}={}){super((t=>this.tt(t)),t),this.et=e,this.st=s}tt({url:t,request:e}){if(e&&"navigate"!==e.mode)return!1;const s=t.pathname+t.search;for(const t of this.st)if(t.test(s))return!1;return!!this.et.some((t=>t.test(s)))}},t.NetworkFirst=class extends A{constructor(t={}){super(t),this.plugins.some((t=>"cacheWillUpdate"in t))||this.plugins.unshift(F),this.nt=t.networkTimeoutSeconds||0}async P(t,e){const n=[],i=[];let r;if(this.nt){const{id:s,promise:a}=this.it({request:t,logs:n,handler:e});r=s,i.push(a)}const a=this.rt({timeoutId:r,request:t,logs:n,handler:e});i.push(a);const o=await e.waitUntil((async()=>await e.waitUntil(Promise.race(i))||await a)());if(!o)throw new s("no-response",{url:t.url});return o}it({request:t,logs:e,handler:s}){let n;return{promise:new Promise((e=>{n=setTimeout((async()=>{e(await s.cacheMatch(t))}),1e3*this.nt)})),id:n}}async rt({timeoutId:t,request:e,logs:s,handler:n}){let i,r;try{r=await n.fetchAndCachePut(e)}catch(t){t instanceof Error&&(i=t)}return t&&clearTimeout(t),!i&&r||(r=await n.cacheMatch(e)),r}},t.cleanupOutdatedCaches=function(){self.addEventListener("activate",(t=>{const e=f();t.waitUntil((async(t,e="-precache-")=>{const s=(await self.caches.keys()).filter((s=>s.includes(e)&&s.includes(self.registration.scope)&&s!==t));return await Promise.all(s.map((t=>self.caches.delete(t)))),s})(e).then((t=>{})))}))},t.clientsClaim=function(){self.addEventListener("activate",(()=>self.clients.claim()))},t.createHandlerBoundToURL=function(t){return Z().createHandlerBoundToURL(t)},t.precacheAndRoute=function(t,e){!function(t){Z().precache(t)}(t),function(t){const e=Z();h(new tt(e,t))}(e)},t.registerRoute=h}));
```   
   
## \dist\assets\index-CzOrwO-_.js   
```javascript   
var qf=Object.defineProperty;var Qf=(d,c,u)=>c in d?qf(d,c,{enumerable:!0,configurable:!0,writable:!0,value:u}):d[c]=u;var Ya=(d,c,u)=>Qf(d,typeof c!="symbol"?c+"":c,u);function Jf(d,c){for(var u=0;u<c.length;u++){const p=c[u];if(typeof p!="string"&&!Array.isArray(p)){for(const g in p)if(g!=="default"&&!(g in d)){const y=Object.getOwnPropertyDescriptor(p,g);y&&Object.defineProperty(d,g,y.get?y:{enumerable:!0,get:()=>p[g]})}}}return Object.freeze(Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}))}(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))p(g);new MutationObserver(g=>{for(const y of g)if(y.type==="childList")for(const w of y.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&p(w)}).observe(document,{childList:!0,subtree:!0});function u(g){const y={};return g.integrity&&(y.integrity=g.integrity),g.referrerPolicy&&(y.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?y.credentials="include":g.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function p(g){if(g.ep)return;g.ep=!0;const y=u(g);fetch(g.href,y)}})();function Zu(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var Tu={exports:{}},xs={},zu={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ch;function Yf(){if(Ch)return Ee;Ch=1;var d=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),w=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),z=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),N=Symbol.iterator;function W(E){return E===null||typeof E!="object"?null:(E=N&&E[N]||E["@@iterator"],typeof E=="function"?E:null)}var $={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},se=Object.assign,H={};function A(E,Z,de){this.props=E,this.context=Z,this.refs=H,this.updater=de||$}A.prototype.isReactComponent={},A.prototype.setState=function(E,Z){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,Z,"setState")},A.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function q(){}q.prototype=A.prototype;function ne(E,Z,de){this.props=E,this.context=Z,this.refs=H,this.updater=de||$}var J=ne.prototype=new q;J.constructor=ne,se(J,A.prototype),J.isPureReactComponent=!0;var ee=Array.isArray,me=Object.prototype.hasOwnProperty,X={current:null},ge={key:!0,ref:!0,__self:!0,__source:!0};function Be(E,Z,de){var he,le={},ie=null,ze=null;if(Z!=null)for(he in Z.ref!==void 0&&(ze=Z.ref),Z.key!==void 0&&(ie=""+Z.key),Z)me.call(Z,he)&&!ge.hasOwnProperty(he)&&(le[he]=Z[he]);var Ce=arguments.length-2;if(Ce===1)le.children=de;else if(1<Ce){for(var Ue=Array(Ce),dt=0;dt<Ce;dt++)Ue[dt]=arguments[dt+2];le.children=Ue}if(E&&E.defaultProps)for(he in Ce=E.defaultProps,Ce)le[he]===void 0&&(le[he]=Ce[he]);return{$$typeof:d,type:E,key:ie,ref:ze,props:le,_owner:X.current}}function ot(E,Z){return{$$typeof:d,type:E.type,key:Z,ref:E.ref,props:E.props,_owner:E._owner}}function Mt(E){return typeof E=="object"&&E!==null&&E.$$typeof===d}function Pe(E){var Z={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(de){return Z[de]})}var ye=/\/+/g;function De(E,Z){return typeof E=="object"&&E!==null&&E.key!=null?Pe(""+E.key):Z.toString(36)}function Oe(E,Z,de,he,le){var ie=typeof E;(ie==="undefined"||ie==="boolean")&&(E=null);var ze=!1;if(E===null)ze=!0;else switch(ie){case"string":case"number":ze=!0;break;case"object":switch(E.$$typeof){case d:case c:ze=!0}}if(ze)return ze=E,le=le(ze),E=he===""?"."+De(ze,0):he,ee(le)?(de="",E!=null&&(de=E.replace(ye,"$&/")+"/"),Oe(le,Z,de,"",function(dt){return dt})):le!=null&&(Mt(le)&&(le=ot(le,de+(!le.key||ze&&ze.key===le.key?"":(""+le.key).replace(ye,"$&/")+"/")+E)),Z.push(le)),1;if(ze=0,he=he===""?".":he+":",ee(E))for(var Ce=0;Ce<E.length;Ce++){ie=E[Ce];var Ue=he+De(ie,Ce);ze+=Oe(ie,Z,de,Ue,le)}else if(Ue=W(E),typeof Ue=="function")for(E=Ue.call(E),Ce=0;!(ie=E.next()).done;)ie=ie.value,Ue=he+De(ie,Ce++),ze+=Oe(ie,Z,de,Ue,le);else if(ie==="object")throw Z=String(E),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return ze}function gt(E,Z,de){if(E==null)return E;var he=[],le=0;return Oe(E,he,"","",function(ie){return Z.call(de,ie,le++)}),he}function Ie(E){if(E._status===-1){var Z=E._result;Z=Z(),Z.then(function(de){(E._status===0||E._status===-1)&&(E._status=1,E._result=de)},function(de){(E._status===0||E._status===-1)&&(E._status=2,E._result=de)}),E._status===-1&&(E._status=0,E._result=Z)}if(E._status===1)return E._result.default;throw E._result}var Re={current:null},F={transition:null},fe={ReactCurrentDispatcher:Re,ReactCurrentBatchConfig:F,ReactCurrentOwner:X};function U(){throw Error("act(...) is not supported in production builds of React.")}return Ee.Children={map:gt,forEach:function(E,Z,de){gt(E,function(){Z.apply(this,arguments)},de)},count:function(E){var Z=0;return gt(E,function(){Z++}),Z},toArray:function(E){return gt(E,function(Z){return Z})||[]},only:function(E){if(!Mt(E))throw Error("React.Children.only expected to receive a single React element child.");return E}},Ee.Component=A,Ee.Fragment=u,Ee.Profiler=g,Ee.PureComponent=ne,Ee.StrictMode=p,Ee.Suspense=k,Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fe,Ee.act=U,Ee.cloneElement=function(E,Z,de){if(E==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+E+".");var he=se({},E.props),le=E.key,ie=E.ref,ze=E._owner;if(Z!=null){if(Z.ref!==void 0&&(ie=Z.ref,ze=X.current),Z.key!==void 0&&(le=""+Z.key),E.type&&E.type.defaultProps)var Ce=E.type.defaultProps;for(Ue in Z)me.call(Z,Ue)&&!ge.hasOwnProperty(Ue)&&(he[Ue]=Z[Ue]===void 0&&Ce!==void 0?Ce[Ue]:Z[Ue])}var Ue=arguments.length-2;if(Ue===1)he.children=de;else if(1<Ue){Ce=Array(Ue);for(var dt=0;dt<Ue;dt++)Ce[dt]=arguments[dt+2];he.children=Ce}return{$$typeof:d,type:E.type,key:le,ref:ie,props:he,_owner:ze}},Ee.createContext=function(E){return E={$$typeof:w,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},E.Provider={$$typeof:y,_context:E},E.Consumer=E},Ee.createElement=Be,Ee.createFactory=function(E){var Z=Be.bind(null,E);return Z.type=E,Z},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(E){return{$$typeof:C,render:E}},Ee.isValidElement=Mt,Ee.lazy=function(E){return{$$typeof:B,_payload:{_status:-1,_result:E},_init:Ie}},Ee.memo=function(E,Z){return{$$typeof:z,type:E,compare:Z===void 0?null:Z}},Ee.startTransition=function(E){var Z=F.transition;F.transition={};try{E()}finally{F.transition=Z}},Ee.unstable_act=U,Ee.useCallback=function(E,Z){return Re.current.useCallback(E,Z)},Ee.useContext=function(E){return Re.current.useContext(E)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(E){return Re.current.useDeferredValue(E)},Ee.useEffect=function(E,Z){return Re.current.useEffect(E,Z)},Ee.useId=function(){return Re.current.useId()},Ee.useImperativeHandle=function(E,Z,de){return Re.current.useImperativeHandle(E,Z,de)},Ee.useInsertionEffect=function(E,Z){return Re.current.useInsertionEffect(E,Z)},Ee.useLayoutEffect=function(E,Z){return Re.current.useLayoutEffect(E,Z)},Ee.useMemo=function(E,Z){return Re.current.useMemo(E,Z)},Ee.useReducer=function(E,Z,de){return Re.current.useReducer(E,Z,de)},Ee.useRef=function(E){return Re.current.useRef(E)},Ee.useState=function(E){return Re.current.useState(E)},Ee.useSyncExternalStore=function(E,Z,de){return Re.current.useSyncExternalStore(E,Z,de)},Ee.useTransition=function(){return Re.current.useTransition()},Ee.version="18.3.1",Ee}var Eh;function Uu(){return Eh||(Eh=1,zu.exports=Yf()),zu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Th;function Xf(){if(Th)return xs;Th=1;var d=Uu(),c=Symbol.for("react.element"),u=Symbol.for("react.fragment"),p=Object.prototype.hasOwnProperty,g=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,y={key:!0,ref:!0,__self:!0,__source:!0};function w(C,k,z){var B,N={},W=null,$=null;z!==void 0&&(W=""+z),k.key!==void 0&&(W=""+k.key),k.ref!==void 0&&($=k.ref);for(B in k)p.call(k,B)&&!y.hasOwnProperty(B)&&(N[B]=k[B]);if(C&&C.defaultProps)for(B in k=C.defaultProps,k)N[B]===void 0&&(N[B]=k[B]);return{$$typeof:c,type:C,key:W,ref:$,props:N,_owner:g.current}}return xs.Fragment=u,xs.jsx=w,xs.jsxs=w,xs}var zh;function ed(){return zh||(zh=1,Tu.exports=Xf()),Tu.exports}var v=ed(),R=Uu();const Ps=Zu(R),td=Jf({__proto__:null,default:Ps},[R]);var Xa={},Mu={exports:{}},Bt={},Nu={exports:{}},Ou={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mh;function nd(){return Mh||(Mh=1,function(d){function c(F,fe){var U=F.length;F.push(fe);e:for(;0<U;){var E=U-1>>>1,Z=F[E];if(0<g(Z,fe))F[E]=fe,F[U]=Z,U=E;else break e}}function u(F){return F.length===0?null:F[0]}function p(F){if(F.length===0)return null;var fe=F[0],U=F.pop();if(U!==fe){F[0]=U;e:for(var E=0,Z=F.length,de=Z>>>1;E<de;){var he=2*(E+1)-1,le=F[he],ie=he+1,ze=F[ie];if(0>g(le,U))ie<Z&&0>g(ze,le)?(F[E]=ze,F[ie]=U,E=ie):(F[E]=le,F[he]=U,E=he);else if(ie<Z&&0>g(ze,U))F[E]=ze,F[ie]=U,E=ie;else break e}}return fe}function g(F,fe){var U=F.sortIndex-fe.sortIndex;return U!==0?U:F.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var y=performance;d.unstable_now=function(){return y.now()}}else{var w=Date,C=w.now();d.unstable_now=function(){return w.now()-C}}var k=[],z=[],B=1,N=null,W=3,$=!1,se=!1,H=!1,A=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function J(F){for(var fe=u(z);fe!==null;){if(fe.callback===null)p(z);else if(fe.startTime<=F)p(z),fe.sortIndex=fe.expirationTime,c(k,fe);else break;fe=u(z)}}function ee(F){if(H=!1,J(F),!se)if(u(k)!==null)se=!0,Ie(me);else{var fe=u(z);fe!==null&&Re(ee,fe.startTime-F)}}function me(F,fe){se=!1,H&&(H=!1,q(Be),Be=-1),$=!0;var U=W;try{for(J(fe),N=u(k);N!==null&&(!(N.expirationTime>fe)||F&&!Pe());){var E=N.callback;if(typeof E=="function"){N.callback=null,W=N.priorityLevel;var Z=E(N.expirationTime<=fe);fe=d.unstable_now(),typeof Z=="function"?N.callback=Z:N===u(k)&&p(k),J(fe)}else p(k);N=u(k)}if(N!==null)var de=!0;else{var he=u(z);he!==null&&Re(ee,he.startTime-fe),de=!1}return de}finally{N=null,W=U,$=!1}}var X=!1,ge=null,Be=-1,ot=5,Mt=-1;function Pe(){return!(d.unstable_now()-Mt<ot)}function ye(){if(ge!==null){var F=d.unstable_now();Mt=F;var fe=!0;try{fe=ge(!0,F)}finally{fe?De():(X=!1,ge=null)}}else X=!1}var De;if(typeof ne=="function")De=function(){ne(ye)};else if(typeof MessageChannel<"u"){var Oe=new MessageChannel,gt=Oe.port2;Oe.port1.onmessage=ye,De=function(){gt.postMessage(null)}}else De=function(){A(ye,0)};function Ie(F){ge=F,X||(X=!0,De())}function Re(F,fe){Be=A(function(){F(d.unstable_now())},fe)}d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function(F){F.callback=null},d.unstable_continueExecution=function(){se||$||(se=!0,Ie(me))},d.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ot=0<F?Math.floor(1e3/F):5},d.unstable_getCurrentPriorityLevel=function(){return W},d.unstable_getFirstCallbackNode=function(){return u(k)},d.unstable_next=function(F){switch(W){case 1:case 2:case 3:var fe=3;break;default:fe=W}var U=W;W=fe;try{return F()}finally{W=U}},d.unstable_pauseExecution=function(){},d.unstable_requestPaint=function(){},d.unstable_runWithPriority=function(F,fe){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var U=W;W=F;try{return fe()}finally{W=U}},d.unstable_scheduleCallback=function(F,fe,U){var E=d.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?E+U:E):U=E,F){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=U+Z,F={id:B++,callback:fe,priorityLevel:F,startTime:U,expirationTime:Z,sortIndex:-1},U>E?(F.sortIndex=U,c(z,F),u(k)===null&&F===u(z)&&(H?(q(Be),Be=-1):H=!0,Re(ee,U-E))):(F.sortIndex=Z,c(k,F),se||$||(se=!0,Ie(me))),F},d.unstable_shouldYield=Pe,d.unstable_wrapCallback=function(F){var fe=W;return function(){var U=W;W=fe;try{return F.apply(this,arguments)}finally{W=U}}}}(Ou)),Ou}var Nh;function id(){return Nh||(Nh=1,Nu.exports=nd()),Nu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oh;function rd(){if(Oh)return Bt;Oh=1;var d=Uu(),c=id();function u(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p=new Set,g={};function y(e,n){w(e,n),w(e+"Capture",n)}function w(e,n){for(g[e]=n,e=0;e<n.length;e++)p.add(n[e])}var C=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),k=Object.prototype.hasOwnProperty,z=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,B={},N={};function W(e){return k.call(N,e)?!0:k.call(B,e)?!1:z.test(e)?N[e]=!0:(B[e]=!0,!1)}function $(e,n,r,s){if(r!==null&&r.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function se(e,n,r,s){if(n===null||typeof n>"u"||$(e,n,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function H(e,n,r,s,l,h,m){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=s,this.attributeNamespace=l,this.mustUseProperty=r,this.propertyName=e,this.type=n,this.sanitizeURL=h,this.removeEmptyString=m}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){A[e]=new H(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];A[n]=new H(n,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){A[e]=new H(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){A[e]=new H(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){A[e]=new H(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){A[e]=new H(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){A[e]=new H(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){A[e]=new H(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){A[e]=new H(e,5,!1,e.toLowerCase(),null,!1,!1)});var q=/[\-:]([a-z])/g;function ne(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(q,ne);A[n]=new H(n,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(q,ne);A[n]=new H(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(q,ne);A[n]=new H(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){A[e]=new H(e,1,!1,e.toLowerCase(),null,!1,!1)}),A.xlinkHref=new H("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){A[e]=new H(e,1,!1,e.toLowerCase(),null,!0,!0)});function J(e,n,r,s){var l=A.hasOwnProperty(n)?A[n]:null;(l!==null?l.type!==0:s||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(se(n,r,l,s)&&(r=null),s||l===null?W(n)&&(r===null?e.removeAttribute(n):e.setAttribute(n,""+r)):l.mustUseProperty?e[l.propertyName]=r===null?l.type===3?!1:"":r:(n=l.attributeName,s=l.attributeNamespace,r===null?e.removeAttribute(n):(l=l.type,r=l===3||l===4&&r===!0?"":""+r,s?e.setAttributeNS(s,n,r):e.setAttribute(n,r))))}var ee=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,me=Symbol.for("react.element"),X=Symbol.for("react.portal"),ge=Symbol.for("react.fragment"),Be=Symbol.for("react.strict_mode"),ot=Symbol.for("react.profiler"),Mt=Symbol.for("react.provider"),Pe=Symbol.for("react.context"),ye=Symbol.for("react.forward_ref"),De=Symbol.for("react.suspense"),Oe=Symbol.for("react.suspense_list"),gt=Symbol.for("react.memo"),Ie=Symbol.for("react.lazy"),Re=Symbol.for("react.offscreen"),F=Symbol.iterator;function fe(e){return e===null||typeof e!="object"?null:(e=F&&e[F]||e["@@iterator"],typeof e=="function"?e:null)}var U=Object.assign,E;function Z(e){if(E===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);E=n&&n[1]||""}return`
`+E+e}var de=!1;function he(e,n){if(!e||de)return"";de=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(D){var s=D}Reflect.construct(e,[],n)}else{try{n.call()}catch(D){s=D}e.call(n.prototype)}else{try{throw Error()}catch(D){s=D}e()}}catch(D){if(D&&s&&typeof D.stack=="string"){for(var l=D.stack.split(`
`),h=s.stack.split(`
`),m=l.length-1,x=h.length-1;1<=m&&0<=x&&l[m]!==h[x];)x--;for(;1<=m&&0<=x;m--,x--)if(l[m]!==h[x]){if(m!==1||x!==1)do if(m--,x--,0>x||l[m]!==h[x]){var P=`
`+l[m].replace(" at new "," at ");return e.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",e.displayName)),P}while(1<=m&&0<=x);break}}}finally{de=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Z(e):""}function le(e){switch(e.tag){case 5:return Z(e.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return e=he(e.type,!1),e;case 11:return e=he(e.type.render,!1),e;case 1:return e=he(e.type,!0),e;default:return""}}function ie(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ge:return"Fragment";case X:return"Portal";case ot:return"Profiler";case Be:return"StrictMode";case De:return"Suspense";case Oe:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Pe:return(e.displayName||"Context")+".Consumer";case Mt:return(e._context.displayName||"Context")+".Provider";case ye:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case gt:return n=e.displayName||null,n!==null?n:ie(e.type)||"Memo";case Ie:n=e._payload,e=e._init;try{return ie(e(n))}catch{}}return null}function ze(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ie(n);case 8:return n===Be?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function Ce(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ue(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function dt(e){var n=Ue(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),s=""+e[n];if(!e.hasOwnProperty(n)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var l=r.get,h=r.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return l.call(this)},set:function(m){s=""+m,h.call(this,m)}}),Object.defineProperty(e,n,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(m){s=""+m},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function ii(e){e._valueTracker||(e._valueTracker=dt(e))}function ri(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var r=n.getValue(),s="";return e&&(s=Ue(e)?e.checked?"true":"false":e.value),e=s,e!==r?(n.setValue(e),!0):!1}function oi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function xo(e,n){var r=n.checked;return U({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function So(e,n){var r=n.defaultValue==null?"":n.defaultValue,s=n.checked!=null?n.checked:n.defaultChecked;r=Ce(n.value!=null?n.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function Po(e,n){n=n.checked,n!=null&&J(e,"checked",n,!1)}function $i(e,n){Po(e,n);var r=Ce(n.value),s=n.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?ko(e,n.type,r):n.hasOwnProperty("defaultValue")&&ko(e,n.type,Ce(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function Ki(e,n,r){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var s=n.type;if(!(s!=="submit"&&s!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,r||n===e.value||(e.value=n),e.defaultValue=n}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function ko(e,n,r){(n!=="number"||oi(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var si=Array.isArray;function wn(e,n,r,s){if(e=e.options,n){n={};for(var l=0;l<r.length;l++)n["$"+r[l]]=!0;for(r=0;r<e.length;r++)l=n.hasOwnProperty("$"+e[r].value),e[r].selected!==l&&(e[r].selected=l),l&&s&&(e[r].defaultSelected=!0)}else{for(r=""+Ce(r),n=null,l=0;l<e.length;l++){if(e[l].value===r){e[l].selected=!0,s&&(e[l].defaultSelected=!0);return}n!==null||e[l].disabled||(n=e[l])}n!==null&&(n.selected=!0)}}function Lr(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(u(91));return U({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Lo(e,n){var r=n.value;if(r==null){if(r=n.children,n=n.defaultValue,r!=null){if(n!=null)throw Error(u(92));if(si(r)){if(1<r.length)throw Error(u(93));r=r[0]}n=r}n==null&&(n=""),r=n}e._wrapperState={initialValue:Ce(r)}}function Ms(e,n){var r=Ce(n.value),s=Ce(n.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),n.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function Ns(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function Cr(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Er(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?Cr(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var qi,Os=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,r,s,l){MSApp.execUnsafeLocalFunction(function(){return e(n,r,s,l)})}:e}(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(qi=qi||document.createElement("div"),qi.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=qi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function ai(e,n){if(n){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=n;return}}e.textContent=n}var li={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rl=["Webkit","ms","Moz","O"];Object.keys(li).forEach(function(e){rl.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),li[n]=li[e]})});function Co(e,n,r){return n==null||typeof n=="boolean"||n===""?"":r||typeof n!="number"||n===0||li.hasOwnProperty(e)&&li[e]?(""+n).trim():n+"px"}function Tr(e,n){e=e.style;for(var r in n)if(n.hasOwnProperty(r)){var s=r.indexOf("--")===0,l=Co(r,n[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,l):e[r]=l}}var Is=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Eo(e,n){if(n){if(Is[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(u(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(u(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(u(61))}if(n.style!=null&&typeof n.style!="object")throw Error(u(62))}}function Rn(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var To=null;function zo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var zr=null,jn=null,Dn=null;function Rs(e){if(e=Kn(e)){if(typeof zr!="function")throw Error(u(280));var n=e.stateNode;n&&(n=no(n),zr(e.stateNode,e.type,n))}}function js(e){jn?Dn?Dn.push(e):Dn=[e]:jn=e}function Ds(){if(jn){var e=jn,n=Dn;if(Dn=jn=null,Rs(e),n)for(e=0;e<n.length;e++)Rs(n[e])}}function As(e,n){return e(n)}function Bs(){}var Mo=!1;function Mr(e,n,r){if(Mo)return e(n,r);Mo=!0;try{return As(e,n,r)}finally{Mo=!1,(jn!==null||Dn!==null)&&(Bs(),Ds())}}function Qi(e,n){var r=e.stateNode;if(r===null)return null;var s=no(r);if(s===null)return null;r=s[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(u(231,n,typeof r));return r}var No=!1;if(C)try{var Ji={};Object.defineProperty(Ji,"passive",{get:function(){No=!0}}),window.addEventListener("test",Ji,Ji),window.removeEventListener("test",Ji,Ji)}catch{No=!1}function ol(e,n,r,s,l,h,m,x,P){var D=Array.prototype.slice.call(arguments,3);try{n.apply(r,D)}catch(V){this.onError(V)}}var _t=!1,ue=null,Yi=!1,Nr=null,Fs={onError:function(e){_t=!0,ue=e}};function Zs(e,n,r,s,l,h,m,x,P){_t=!1,ue=null,ol.apply(Fs,arguments)}function Oo(e,n,r,s,l,h,m,x,P){if(Zs.apply(this,arguments),_t){if(_t){var D=ue;_t=!1,ue=null}else throw Error(u(198));Yi||(Yi=!0,Nr=D)}}function xn(e){var n=e,r=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(r=n.return),e=n.return;while(e)}return n.tag===3?r:null}function An(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function Io(e){if(xn(e)!==e)throw Error(u(188))}function sl(e){var n=e.alternate;if(!n){if(n=xn(e),n===null)throw Error(u(188));return n!==e?null:e}for(var r=e,s=n;;){var l=r.return;if(l===null)break;var h=l.alternate;if(h===null){if(s=l.return,s!==null){r=s;continue}break}if(l.child===h.child){for(h=l.child;h;){if(h===r)return Io(l),e;if(h===s)return Io(l),n;h=h.sibling}throw Error(u(188))}if(r.return!==s.return)r=l,s=h;else{for(var m=!1,x=l.child;x;){if(x===r){m=!0,r=l,s=h;break}if(x===s){m=!0,s=l,r=h;break}x=x.sibling}if(!m){for(x=h.child;x;){if(x===r){m=!0,r=h,s=l;break}if(x===s){m=!0,s=h,r=l;break}x=x.sibling}if(!m)throw Error(u(189))}}if(r.alternate!==s)throw Error(u(190))}if(r.tag!==3)throw Error(u(188));return r.stateNode.current===r?e:n}function Us(e){return e=sl(e),e!==null?bs(e):null}function bs(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=bs(e);if(n!==null)return n;e=e.sibling}return null}var Hs=c.unstable_scheduleCallback,Ro=c.unstable_cancelCallback,al=c.unstable_shouldYield,Or=c.unstable_requestPaint,$e=c.unstable_now,ll=c.unstable_getCurrentPriorityLevel,jo=c.unstable_ImmediatePriority,Ws=c.unstable_UserBlockingPriority,Ir=c.unstable_NormalPriority,Do=c.unstable_LowPriority,ui=c.unstable_IdlePriority,Xi=null,Ft=null;function er(e){if(Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(Xi,e,void 0,(e.current.flags&128)===128)}catch{}}var ke=Math.clz32?Math.clz32:ci,We=Math.log,Rr=Math.LN2;function ci(e){return e>>>=0,e===0?32:31-(We(e)/Rr|0)|0}var un=64,hi=4194304;function Se(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function be(e,n){var r=e.pendingLanes;if(r===0)return 0;var s=0,l=e.suspendedLanes,h=e.pingedLanes,m=r&268435455;if(m!==0){var x=m&~l;x!==0?s=Se(x):(h&=m,h!==0&&(s=Se(h)))}else m=r&~l,m!==0?s=Se(m):h!==0&&(s=Se(h));if(s===0)return 0;if(n!==0&&n!==s&&(n&l)===0&&(l=s&-s,h=n&-n,l>=h||l===16&&(h&4194240)!==0))return n;if((s&4)!==0&&(s|=r&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=s;0<n;)r=31-ke(n),l=1<<r,s|=e[r],n&=~l;return s}function Ao(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jr(e,n){for(var r=e.suspendedLanes,s=e.pingedLanes,l=e.expirationTimes,h=e.pendingLanes;0<h;){var m=31-ke(h),x=1<<m,P=l[m];P===-1?((x&r)===0||(x&s)!==0)&&(l[m]=Ao(x,n)):P<=n&&(e.expiredLanes|=x),h&=~x}}function vt(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Gs(){var e=un;return un<<=1,(un&4194240)===0&&(un=64),e}function fi(e){for(var n=[],r=0;31>r;r++)n.push(e);return n}function Zt(e,n,r){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-ke(n),e[n]=r}function Je(e,n){var r=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var l=31-ke(r),h=1<<l;n[l]=0,s[l]=-1,e[l]=-1,r&=~h}}function cn(e,n){var r=e.entangledLanes|=n;for(e=e.entanglements;r;){var s=31-ke(r),l=1<<s;l&n|e[s]&n&&(e[s]|=n),r&=~l}}var Me=0;function di(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Dr,Bn,Ar,Br,tr,nr=!1,pi=[],Ut=null,hn=null,Qt=null,ir=new Map,we=new Map,st=[],Fe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bo(e,n){switch(e){case"focusin":case"focusout":Ut=null;break;case"dragenter":case"dragleave":hn=null;break;case"mouseover":case"mouseout":Qt=null;break;case"pointerover":case"pointerout":ir.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":we.delete(n.pointerId)}}function Fn(e,n,r,s,l,h){return e===null||e.nativeEvent!==h?(e={blockedOn:n,domEventName:r,eventSystemFlags:s,nativeEvent:h,targetContainers:[l]},n!==null&&(n=Kn(n),n!==null&&Bn(n)),e):(e.eventSystemFlags|=s,n=e.targetContainers,l!==null&&n.indexOf(l)===-1&&n.push(l),e)}function Fo(e,n,r,s,l){switch(n){case"focusin":return Ut=Fn(Ut,e,n,r,s,l),!0;case"dragenter":return hn=Fn(hn,e,n,r,s,l),!0;case"mouseover":return Qt=Fn(Qt,e,n,r,s,l),!0;case"pointerover":var h=l.pointerId;return ir.set(h,Fn(ir.get(h)||null,e,n,r,s,l)),!0;case"gotpointercapture":return h=l.pointerId,we.set(h,Fn(we.get(h)||null,e,n,r,s,l)),!0}return!1}function Fr(e){var n=$n(e.target);if(n!==null){var r=xn(n);if(r!==null){if(n=r.tag,n===13){if(n=An(r),n!==null){e.blockedOn=n,tr(e.priority,function(){Ar(r)});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Jt(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var r=br(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);To=s,r.target.dispatchEvent(s),To=null}else return n=Kn(r),n!==null&&Bn(n),e.blockedOn=r,!1;n.shift()}return!0}function Zr(e,n,r){Jt(e)&&r.delete(n)}function rr(){nr=!1,Ut!==null&&Jt(Ut)&&(Ut=null),hn!==null&&Jt(hn)&&(hn=null),Qt!==null&&Jt(Qt)&&(Qt=null),ir.forEach(Zr),we.forEach(Zr)}function Ke(e,n){e.blockedOn===n&&(e.blockedOn=null,nr||(nr=!0,c.unstable_scheduleCallback(c.unstable_NormalPriority,rr)))}function bt(e){function n(l){return Ke(l,e)}if(0<pi.length){Ke(pi[0],e);for(var r=1;r<pi.length;r++){var s=pi[r];s.blockedOn===e&&(s.blockedOn=null)}}for(Ut!==null&&Ke(Ut,e),hn!==null&&Ke(hn,e),Qt!==null&&Ke(Qt,e),ir.forEach(n),we.forEach(n),r=0;r<st.length;r++)s=st[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<st.length&&(r=st[0],r.blockedOn===null);)Fr(r),r.blockedOn===null&&st.shift()}var Zn=ee.ReactCurrentBatchConfig,or=!0;function ul(e,n,r,s){var l=Me,h=Zn.transition;Zn.transition=null;try{Me=1,sr(e,n,r,s)}finally{Me=l,Zn.transition=h}}function Vs(e,n,r,s){var l=Me,h=Zn.transition;Zn.transition=null;try{Me=4,sr(e,n,r,s)}finally{Me=l,Zn.transition=h}}function sr(e,n,r,s){if(or){var l=br(e,n,r,s);if(l===null)t(e,n,s,Ur,r),Bo(e,s);else if(Fo(l,e,n,r,s))s.stopPropagation();else if(Bo(e,s),n&4&&-1<Fe.indexOf(e)){for(;l!==null;){var h=Kn(l);if(h!==null&&Dr(h),h=br(e,n,r,s),h===null&&t(e,n,s,Ur,r),h===l)break;l=h}l!==null&&s.stopPropagation()}else t(e,n,s,null,r)}}var Ur=null;function br(e,n,r,s){if(Ur=null,e=zo(s),e=$n(e),e!==null)if(n=xn(e),n===null)e=null;else if(r=n.tag,r===13){if(e=An(n),e!==null)return e;e=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return Ur=e,null}function Te(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ll()){case jo:return 1;case Ws:return 4;case Ir:case Do:return 16;case ui:return 536870912;default:return 16}default:return 16}}var Sn=null,Lt=null,Pn=null;function Zo(){if(Pn)return Pn;var e,n=Lt,r=n.length,s,l="value"in Sn?Sn.value:Sn.textContent,h=l.length;for(e=0;e<r&&n[e]===l[e];e++);var m=r-e;for(s=1;s<=m&&n[r-s]===l[h-s];s++);return Pn=l.slice(e,1<s?1-s:void 0)}function Hr(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function mi(){return!0}function $s(){return!1}function yt(e){function n(r,s,l,h,m){this._reactName=r,this._targetInst=l,this.type=s,this.nativeEvent=h,this.target=m,this.currentTarget=null;for(var x in e)e.hasOwnProperty(x)&&(r=e[x],this[x]=r?r(h):h[x]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?mi:$s,this.isPropagationStopped=$s,this}return U(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=mi)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=mi)},persist:function(){},isPersistent:mi}),n}var gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uo=yt(gi),Un=U({},gi,{view:0,detail:0}),cl=yt(Un),Nt,bo,_i,Ht=U({},Un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hn,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==_i&&(_i&&e.type==="mousemove"?(Nt=e.screenX-_i.screenX,bo=e.screenY-_i.screenY):bo=Nt=0,_i=e),Nt)},movementY:function(e){return"movementY"in e?e.movementY:bo}}),Ho=yt(Ht),Ks=U({},Ht,{dataTransfer:0}),Wo=yt(Ks),hl=U({},Un,{relatedTarget:0}),Wr=yt(hl),qs=U({},gi,{animationName:0,elapsedTime:0,pseudoElement:0}),fl=yt(qs),dl=U({},gi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Go=yt(dl),pl=U({},gi,{data:0}),Vo=yt(pl),Qs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ml(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=bn[e])?!!n[e]:!1}function Hn(){return ml}var Ot=U({},Un,{key:function(e){if(e.key){var n=Qs[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Hr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Gr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hn,charCode:function(e){return e.type==="keypress"?Hr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Hr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Js=yt(Ot),Ys=U({},Ht,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xs=yt(Ys),$o=U({},Un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hn}),Ko=yt($o),gl=U({},gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),_l=yt(gl),ea=U({},Ht,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),vl=yt(ea),Wt=[9,13,27,32],kn=C&&"CompositionEvent"in window,ar=null;C&&"documentMode"in document&&(ar=document.documentMode);var fn=C&&"TextEvent"in window&&!ar,ta=C&&(!kn||ar&&8<ar&&11>=ar),Wn=" ",na=!1;function vi(e,n){switch(e){case"keyup":return Wt.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qo(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var dn=!1;function yl(e,n){switch(e){case"compositionend":return qo(n);case"keypress":return n.which!==32?null:(na=!0,Wn);case"textInput":return e=n.data,e===Wn&&na?null:e;default:return null}}function Ln(e,n){if(dn)return e==="compositionend"||!kn&&vi(e,n)?(e=Zo(),Pn=Lt=Sn=null,dn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return ta&&n.locale!=="ko"?null:n.data;default:return null}}var Vr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ia(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Vr[e.type]:n==="textarea"}function $r(e,n,r,s){js(s),n=o(n,"onChange"),0<n.length&&(r=new Uo("onChange","change",null,r,s),e.push({event:r,listeners:n}))}var lr=null,Ct=null;function wl(e){rs(e,0)}function pn(e){var n=qn(e);if(ri(n))return e}function xl(e,n){if(e==="change")return n}var Yt=!1;if(C){var yi;if(C){var Kr="oninput"in document;if(!Kr){var qr=document.createElement("div");qr.setAttribute("oninput","return;"),Kr=typeof qr.oninput=="function"}yi=Kr}else yi=!1;Yt=yi&&(!document.documentMode||9<document.documentMode)}function ur(){lr&&(lr.detachEvent("onpropertychange",Qr),Ct=lr=null)}function Qr(e){if(e.propertyName==="value"&&pn(Ct)){var n=[];$r(n,Ct,e,zo(e)),Mr(wl,n)}}function Jr(e,n,r){e==="focusin"?(ur(),lr=n,Ct=r,lr.attachEvent("onpropertychange",Qr)):e==="focusout"&&ur()}function wi(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return pn(Ct)}function Yr(e,n){if(e==="click")return pn(n)}function Qo(e,n){if(e==="input"||e==="change")return pn(n)}function ra(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Gt=typeof Object.is=="function"?Object.is:ra;function Cn(e,n){if(Gt(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var r=Object.keys(e),s=Object.keys(n);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var l=r[s];if(!k.call(n,l)||!Gt(e[l],n[l]))return!1}return!0}function oa(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jo(e,n){var r=oa(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=n&&s>=n)return{node:r,offset:n-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=oa(r)}}function sa(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?sa(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Yo(){for(var e=window,n=oi();n instanceof e.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)e=n.contentWindow;else break;n=oi(e.document)}return n}function Xo(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function Xt(e){var n=Yo(),r=e.focusedElem,s=e.selectionRange;if(n!==r&&r&&r.ownerDocument&&sa(r.ownerDocument.documentElement,r)){if(s!==null&&Xo(r)){if(n=s.start,e=s.end,e===void 0&&(e=n),"selectionStart"in r)r.selectionStart=n,r.selectionEnd=Math.min(e,r.value.length);else if(e=(n=r.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var l=r.textContent.length,h=Math.min(s.start,l);s=s.end===void 0?h:Math.min(s.end,l),!e.extend&&h>s&&(l=s,s=h,h=l),l=Jo(r,h);var m=Jo(r,s);l&&m&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==m.node||e.focusOffset!==m.offset)&&(n=n.createRange(),n.setStart(l.node,l.offset),e.removeAllRanges(),h>s?(e.addRange(n),e.extend(m.node,m.offset)):(n.setEnd(m.node,m.offset),e.addRange(n)))}}for(n=[],e=r;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<n.length;r++)e=n[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Xr=C&&"documentMode"in document&&11>=document.documentMode,xi=null,Si=null,cr=null,eo=!1;function aa(e,n,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;eo||xi==null||xi!==oi(s)||(s=xi,"selectionStart"in s&&Xo(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),cr&&Cn(cr,s)||(cr=s,s=o(Si,"onSelect"),0<s.length&&(n=new Uo("onSelect","select",null,n,r),e.push({event:n,listeners:s}),n.target=xi)))}function En(e,n){var r={};return r[e.toLowerCase()]=n.toLowerCase(),r["Webkit"+e]="webkit"+n,r["Moz"+e]="moz"+n,r}var Pi={animationend:En("Animation","AnimationEnd"),animationiteration:En("Animation","AnimationIteration"),animationstart:En("Animation","AnimationStart"),transitionend:En("Transition","TransitionEnd")},Tn={},es={};C&&(es=document.createElement("div").style,"AnimationEvent"in window||(delete Pi.animationend.animation,delete Pi.animationiteration.animation,delete Pi.animationstart.animation),"TransitionEvent"in window||delete Pi.transitionend.transition);function hr(e){if(Tn[e])return Tn[e];if(!Pi[e])return e;var n=Pi[e],r;for(r in n)if(n.hasOwnProperty(r)&&r in es)return Tn[e]=n[r];return e}var la=hr("animationend"),en=hr("animationiteration"),ts=hr("animationstart"),ns=hr("transitionend"),ki=new Map,ua="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vt(e,n){ki.set(e,n),y(n,[e])}for(var Gn=0;Gn<ua.length;Gn++){var to=ua[Gn],ca=to.toLowerCase(),Sl=to[0].toUpperCase()+to.slice(1);Vt(ca,"on"+Sl)}Vt(la,"onAnimationEnd"),Vt(en,"onAnimationIteration"),Vt(ts,"onAnimationStart"),Vt("dblclick","onDoubleClick"),Vt("focusin","onFocus"),Vt("focusout","onBlur"),Vt(ns,"onTransitionEnd"),w("onMouseEnter",["mouseout","mouseover"]),w("onMouseLeave",["mouseout","mouseover"]),w("onPointerEnter",["pointerout","pointerover"]),w("onPointerLeave",["pointerout","pointerover"]),y("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),y("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),y("onBeforeInput",["compositionend","keypress","textInput","paste"]),y("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),y("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),y("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Li="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ha=new Set("cancel close invalid load scroll toggle".split(" ").concat(Li));function is(e,n,r){var s=e.type||"unknown-event";e.currentTarget=r,Oo(s,n,void 0,e),e.currentTarget=null}function rs(e,n){n=(n&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],l=s.event;s=s.listeners;e:{var h=void 0;if(n)for(var m=s.length-1;0<=m;m--){var x=s[m],P=x.instance,D=x.currentTarget;if(x=x.listener,P!==h&&l.isPropagationStopped())break e;is(l,x,D),h=P}else for(m=0;m<s.length;m++){if(x=s[m],P=x.instance,D=x.currentTarget,x=x.listener,P!==h&&l.isPropagationStopped())break e;is(l,x,D),h=P}}}if(Yi)throw e=Nr,Yi=!1,Nr=null,e}function Ze(e,n){var r=n[zi];r===void 0&&(r=n[zi]=new Set);var s=e+"__bubble";r.has(s)||(fa(n,e,2,!1),r.add(s))}function os(e,n,r){var s=0;n&&(s|=4),fa(r,e,s,n)}var fr="_reactListening"+Math.random().toString(36).slice(2);function Ci(e){if(!e[fr]){e[fr]=!0,p.forEach(function(r){r!=="selectionchange"&&(ha.has(r)||os(r,!1,e),os(r,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[fr]||(n[fr]=!0,os("selectionchange",!1,n))}}function fa(e,n,r,s){switch(Te(n)){case 1:var l=ul;break;case 4:l=Vs;break;default:l=sr}r=l.bind(null,n,r,e),l=void 0,!No||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(l=!0),s?l!==void 0?e.addEventListener(n,r,{capture:!0,passive:l}):e.addEventListener(n,r,!0):l!==void 0?e.addEventListener(n,r,{passive:l}):e.addEventListener(n,r,!1)}function t(e,n,r,s,l){var h=s;if((n&1)===0&&(n&2)===0&&s!==null)e:for(;;){if(s===null)return;var m=s.tag;if(m===3||m===4){var x=s.stateNode.containerInfo;if(x===l||x.nodeType===8&&x.parentNode===l)break;if(m===4)for(m=s.return;m!==null;){var P=m.tag;if((P===3||P===4)&&(P=m.stateNode.containerInfo,P===l||P.nodeType===8&&P.parentNode===l))return;m=m.return}for(;x!==null;){if(m=$n(x),m===null)return;if(P=m.tag,P===5||P===6){s=h=m;continue e}x=x.parentNode}}s=s.return}Mr(function(){var D=h,V=zo(r),K=[];e:{var G=ki.get(e);if(G!==void 0){var te=Uo,oe=e;switch(e){case"keypress":if(Hr(r)===0)break e;case"keydown":case"keyup":te=Js;break;case"focusin":oe="focus",te=Wr;break;case"focusout":oe="blur",te=Wr;break;case"beforeblur":case"afterblur":te=Wr;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=Ho;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=Wo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=Ko;break;case la:case en:case ts:te=fl;break;case ns:te=_l;break;case"scroll":te=cl;break;case"wheel":te=vl;break;case"copy":case"cut":case"paste":te=Go;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=Xs}var ae=(n&4)!==0,Xe=!ae&&e==="scroll",O=ae?G!==null?G+"Capture":null:G;ae=[];for(var T=D,I;T!==null;){I=T;var Q=I.stateNode;if(I.tag===5&&Q!==null&&(I=Q,O!==null&&(Q=Qi(T,O),Q!=null&&ae.push(i(T,Q,I)))),Xe)break;T=T.return}0<ae.length&&(G=new te(G,oe,null,r,V),K.push({event:G,listeners:ae}))}}if((n&7)===0){e:{if(G=e==="mouseover"||e==="pointerover",te=e==="mouseout"||e==="pointerout",G&&r!==To&&(oe=r.relatedTarget||r.fromElement)&&($n(oe)||oe[Ae]))break e;if((te||G)&&(G=V.window===V?V:(G=V.ownerDocument)?G.defaultView||G.parentWindow:window,te?(oe=r.relatedTarget||r.toElement,te=D,oe=oe?$n(oe):null,oe!==null&&(Xe=xn(oe),oe!==Xe||oe.tag!==5&&oe.tag!==6)&&(oe=null)):(te=null,oe=D),te!==oe)){if(ae=Ho,Q="onMouseLeave",O="onMouseEnter",T="mouse",(e==="pointerout"||e==="pointerover")&&(ae=Xs,Q="onPointerLeave",O="onPointerEnter",T="pointer"),Xe=te==null?G:qn(te),I=oe==null?G:qn(oe),G=new ae(Q,T+"leave",te,r,V),G.target=Xe,G.relatedTarget=I,Q=null,$n(V)===D&&(ae=new ae(O,T+"enter",oe,r,V),ae.target=I,ae.relatedTarget=Xe,Q=ae),Xe=Q,te&&oe)t:{for(ae=te,O=oe,T=0,I=ae;I;I=a(I))T++;for(I=0,Q=O;Q;Q=a(Q))I++;for(;0<T-I;)ae=a(ae),T--;for(;0<I-T;)O=a(O),I--;for(;T--;){if(ae===O||O!==null&&ae===O.alternate)break t;ae=a(ae),O=a(O)}ae=null}else ae=null;te!==null&&f(K,G,te,ae,!1),oe!==null&&Xe!==null&&f(K,Xe,oe,ae,!0)}}e:{if(G=D?qn(D):window,te=G.nodeName&&G.nodeName.toLowerCase(),te==="select"||te==="input"&&G.type==="file")var ce=xl;else if(ia(G))if(Yt)ce=Qo;else{ce=wi;var _e=Jr}else(te=G.nodeName)&&te.toLowerCase()==="input"&&(G.type==="checkbox"||G.type==="radio")&&(ce=Yr);if(ce&&(ce=ce(e,D))){$r(K,ce,r,V);break e}_e&&_e(e,G,D),e==="focusout"&&(_e=G._wrapperState)&&_e.controlled&&G.type==="number"&&ko(G,"number",G.value)}switch(_e=D?qn(D):window,e){case"focusin":(ia(_e)||_e.contentEditable==="true")&&(xi=_e,Si=D,cr=null);break;case"focusout":cr=Si=xi=null;break;case"mousedown":eo=!0;break;case"contextmenu":case"mouseup":case"dragend":eo=!1,aa(K,r,V);break;case"selectionchange":if(Xr)break;case"keydown":case"keyup":aa(K,r,V)}var ve;if(kn)e:{switch(e){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else dn?vi(e,r)&&(xe="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(xe="onCompositionStart");xe&&(ta&&r.locale!=="ko"&&(dn||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&dn&&(ve=Zo()):(Sn=V,Lt="value"in Sn?Sn.value:Sn.textContent,dn=!0)),_e=o(D,xe),0<_e.length&&(xe=new Vo(xe,e,null,r,V),K.push({event:xe,listeners:_e}),ve?xe.data=ve:(ve=qo(r),ve!==null&&(xe.data=ve)))),(ve=fn?yl(e,r):Ln(e,r))&&(D=o(D,"onBeforeInput"),0<D.length&&(V=new Vo("onBeforeInput","beforeinput",null,r,V),K.push({event:V,listeners:D}),V.data=ve))}rs(K,n)})}function i(e,n,r){return{instance:e,listener:n,currentTarget:r}}function o(e,n){for(var r=n+"Capture",s=[];e!==null;){var l=e,h=l.stateNode;l.tag===5&&h!==null&&(l=h,h=Qi(e,r),h!=null&&s.unshift(i(e,h,l)),h=Qi(e,n),h!=null&&s.push(i(e,h,l))),e=e.return}return s}function a(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function f(e,n,r,s,l){for(var h=n._reactName,m=[];r!==null&&r!==s;){var x=r,P=x.alternate,D=x.stateNode;if(P!==null&&P===s)break;x.tag===5&&D!==null&&(x=D,l?(P=Qi(r,h),P!=null&&m.unshift(i(r,P,x))):l||(P=Qi(r,h),P!=null&&m.push(i(r,P,x)))),r=r.return}m.length!==0&&e.push({event:n,listeners:m})}var _=/\r\n?/g,S=/\u0000|\uFFFD/g;function M(e){return(typeof e=="string"?e:""+e).replace(_,`
`).replace(S,"")}function j(e,n,r){if(n=M(n),M(e)!==n&&r)throw Error(u(425))}function b(){}var Y=null,pe=null;function Le(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var at=typeof setTimeout=="function"?setTimeout:void 0,tt=typeof clearTimeout=="function"?clearTimeout:void 0,Et=typeof Promise=="function"?Promise:void 0,wt=typeof queueMicrotask=="function"?queueMicrotask:typeof Et<"u"?function(e){return Et.resolve(null).then(e).catch(Ei)}:at;function Ei(e){setTimeout(function(){throw e})}function ss(e,n){var r=n,s=0;do{var l=r.nextSibling;if(e.removeChild(r),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(s===0){e.removeChild(l),bt(n);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=l}while(r);bt(n)}function zn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function da(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(n===0)return e;n--}else r==="/$"&&n++}e=e.previousSibling}return null}var Vn=Math.random().toString(36).slice(2),tn="__reactFiber$"+Vn,Ti="__reactProps$"+Vn,Ae="__reactContainer$"+Vn,zi="__reactEvents$"+Vn,Pl="__reactListeners$"+Vn,kl="__reactHandles$"+Vn;function $n(e){var n=e[tn];if(n)return n;for(var r=e.parentNode;r;){if(n=r[Ae]||r[tn]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(e=da(e);e!==null;){if(r=e[tn])return r;e=da(e)}return n}e=r,r=e.parentNode}return null}function Kn(e){return e=e[tn]||e[Ae],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function qn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(u(33))}function no(e){return e[Ti]||null}var Ll=[],io=-1;function Mi(e){return{current:e}}function Ge(e){0>io||(e.current=Ll[io],Ll[io]=null,io--)}function He(e,n){io++,Ll[io]=e.current,e.current=n}var Ni={},xt=Mi(Ni),It=Mi(!1),dr=Ni;function ro(e,n){var r=e.type.contextTypes;if(!r)return Ni;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===n)return s.__reactInternalMemoizedMaskedChildContext;var l={},h;for(h in r)l[h]=n[h];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=l),l}function Rt(e){return e=e.childContextTypes,e!=null}function pa(){Ge(It),Ge(xt)}function Ku(e,n,r){if(xt.current!==Ni)throw Error(u(168));He(xt,n),He(It,r)}function qu(e,n,r){var s=e.stateNode;if(n=n.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var l in s)if(!(l in n))throw Error(u(108,ze(e)||"Unknown",l));return U({},r,s)}function ma(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ni,dr=xt.current,He(xt,e),He(It,It.current),!0}function Qu(e,n,r){var s=e.stateNode;if(!s)throw Error(u(169));r?(e=qu(e,n,dr),s.__reactInternalMemoizedMergedChildContext=e,Ge(It),Ge(xt),He(xt,e)):Ge(It),He(It,r)}var Qn=null,ga=!1,Cl=!1;function Ju(e){Qn===null?Qn=[e]:Qn.push(e)}function pf(e){ga=!0,Ju(e)}function Oi(){if(!Cl&&Qn!==null){Cl=!0;var e=0,n=Me;try{var r=Qn;for(Me=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}Qn=null,ga=!1}catch(l){throw Qn!==null&&(Qn=Qn.slice(e+1)),Hs(jo,Oi),l}finally{Me=n,Cl=!1}}return null}var oo=[],so=0,_a=null,va=0,nn=[],rn=0,pr=null,Jn=1,Yn="";function mr(e,n){oo[so++]=va,oo[so++]=_a,_a=e,va=n}function Yu(e,n,r){nn[rn++]=Jn,nn[rn++]=Yn,nn[rn++]=pr,pr=e;var s=Jn;e=Yn;var l=32-ke(s)-1;s&=~(1<<l),r+=1;var h=32-ke(n)+l;if(30<h){var m=l-l%5;h=(s&(1<<m)-1).toString(32),s>>=m,l-=m,Jn=1<<32-ke(n)+l|r<<l|s,Yn=h+e}else Jn=1<<h|r<<l|s,Yn=e}function El(e){e.return!==null&&(mr(e,1),Yu(e,1,0))}function Tl(e){for(;e===_a;)_a=oo[--so],oo[so]=null,va=oo[--so],oo[so]=null;for(;e===pr;)pr=nn[--rn],nn[rn]=null,Yn=nn[--rn],nn[rn]=null,Jn=nn[--rn],nn[rn]=null}var $t=null,Kt=null,Ve=!1,mn=null;function Xu(e,n){var r=ln(5,null,null,0);r.elementType="DELETED",r.stateNode=n,r.return=e,n=e.deletions,n===null?(e.deletions=[r],e.flags|=16):n.push(r)}function ec(e,n){switch(e.tag){case 5:var r=e.type;return n=n.nodeType!==1||r.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,$t=e,Kt=zn(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,$t=e,Kt=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(r=pr!==null?{id:Jn,overflow:Yn}:null,e.memoizedState={dehydrated:n,treeContext:r,retryLane:1073741824},r=ln(18,null,null,0),r.stateNode=n,r.return=e,e.child=r,$t=e,Kt=null,!0):!1;default:return!1}}function zl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ml(e){if(Ve){var n=Kt;if(n){var r=n;if(!ec(e,n)){if(zl(e))throw Error(u(418));n=zn(r.nextSibling);var s=$t;n&&ec(e,n)?Xu(s,r):(e.flags=e.flags&-4097|2,Ve=!1,$t=e)}}else{if(zl(e))throw Error(u(418));e.flags=e.flags&-4097|2,Ve=!1,$t=e}}}function tc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;$t=e}function ya(e){if(e!==$t)return!1;if(!Ve)return tc(e),Ve=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!Le(e.type,e.memoizedProps)),n&&(n=Kt)){if(zl(e))throw nc(),Error(u(418));for(;n;)Xu(e,n),n=zn(n.nextSibling)}if(tc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(n===0){Kt=zn(e.nextSibling);break e}n--}else r!=="$"&&r!=="$!"&&r!=="$?"||n++}e=e.nextSibling}Kt=null}}else Kt=$t?zn(e.stateNode.nextSibling):null;return!0}function nc(){for(var e=Kt;e;)e=zn(e.nextSibling)}function ao(){Kt=$t=null,Ve=!1}function Nl(e){mn===null?mn=[e]:mn.push(e)}var mf=ee.ReactCurrentBatchConfig;function as(e,n,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(u(309));var s=r.stateNode}if(!s)throw Error(u(147,e));var l=s,h=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===h?n.ref:(n=function(m){var x=l.refs;m===null?delete x[h]:x[h]=m},n._stringRef=h,n)}if(typeof e!="string")throw Error(u(284));if(!r._owner)throw Error(u(290,e))}return e}function wa(e,n){throw e=Object.prototype.toString.call(n),Error(u(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function ic(e){var n=e._init;return n(e._payload)}function rc(e){function n(O,T){if(e){var I=O.deletions;I===null?(O.deletions=[T],O.flags|=16):I.push(T)}}function r(O,T){if(!e)return null;for(;T!==null;)n(O,T),T=T.sibling;return null}function s(O,T){for(O=new Map;T!==null;)T.key!==null?O.set(T.key,T):O.set(T.index,T),T=T.sibling;return O}function l(O,T){return O=Zi(O,T),O.index=0,O.sibling=null,O}function h(O,T,I){return O.index=I,e?(I=O.alternate,I!==null?(I=I.index,I<T?(O.flags|=2,T):I):(O.flags|=2,T)):(O.flags|=1048576,T)}function m(O){return e&&O.alternate===null&&(O.flags|=2),O}function x(O,T,I,Q){return T===null||T.tag!==6?(T=Su(I,O.mode,Q),T.return=O,T):(T=l(T,I),T.return=O,T)}function P(O,T,I,Q){var ce=I.type;return ce===ge?V(O,T,I.props.children,Q,I.key):T!==null&&(T.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===Ie&&ic(ce)===T.type)?(Q=l(T,I.props),Q.ref=as(O,T,I),Q.return=O,Q):(Q=Wa(I.type,I.key,I.props,null,O.mode,Q),Q.ref=as(O,T,I),Q.return=O,Q)}function D(O,T,I,Q){return T===null||T.tag!==4||T.stateNode.containerInfo!==I.containerInfo||T.stateNode.implementation!==I.implementation?(T=Pu(I,O.mode,Q),T.return=O,T):(T=l(T,I.children||[]),T.return=O,T)}function V(O,T,I,Q,ce){return T===null||T.tag!==7?(T=Pr(I,O.mode,Q,ce),T.return=O,T):(T=l(T,I),T.return=O,T)}function K(O,T,I){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Su(""+T,O.mode,I),T.return=O,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case me:return I=Wa(T.type,T.key,T.props,null,O.mode,I),I.ref=as(O,null,T),I.return=O,I;case X:return T=Pu(T,O.mode,I),T.return=O,T;case Ie:var Q=T._init;return K(O,Q(T._payload),I)}if(si(T)||fe(T))return T=Pr(T,O.mode,I,null),T.return=O,T;wa(O,T)}return null}function G(O,T,I,Q){var ce=T!==null?T.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return ce!==null?null:x(O,T,""+I,Q);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case me:return I.key===ce?P(O,T,I,Q):null;case X:return I.key===ce?D(O,T,I,Q):null;case Ie:return ce=I._init,G(O,T,ce(I._payload),Q)}if(si(I)||fe(I))return ce!==null?null:V(O,T,I,Q,null);wa(O,I)}return null}function te(O,T,I,Q,ce){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return O=O.get(I)||null,x(T,O,""+Q,ce);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case me:return O=O.get(Q.key===null?I:Q.key)||null,P(T,O,Q,ce);case X:return O=O.get(Q.key===null?I:Q.key)||null,D(T,O,Q,ce);case Ie:var _e=Q._init;return te(O,T,I,_e(Q._payload),ce)}if(si(Q)||fe(Q))return O=O.get(I)||null,V(T,O,Q,ce,null);wa(T,Q)}return null}function oe(O,T,I,Q){for(var ce=null,_e=null,ve=T,xe=T=0,ft=null;ve!==null&&xe<I.length;xe++){ve.index>xe?(ft=ve,ve=null):ft=ve.sibling;var je=G(O,ve,I[xe],Q);if(je===null){ve===null&&(ve=ft);break}e&&ve&&je.alternate===null&&n(O,ve),T=h(je,T,xe),_e===null?ce=je:_e.sibling=je,_e=je,ve=ft}if(xe===I.length)return r(O,ve),Ve&&mr(O,xe),ce;if(ve===null){for(;xe<I.length;xe++)ve=K(O,I[xe],Q),ve!==null&&(T=h(ve,T,xe),_e===null?ce=ve:_e.sibling=ve,_e=ve);return Ve&&mr(O,xe),ce}for(ve=s(O,ve);xe<I.length;xe++)ft=te(ve,O,xe,I[xe],Q),ft!==null&&(e&&ft.alternate!==null&&ve.delete(ft.key===null?xe:ft.key),T=h(ft,T,xe),_e===null?ce=ft:_e.sibling=ft,_e=ft);return e&&ve.forEach(function(Ui){return n(O,Ui)}),Ve&&mr(O,xe),ce}function ae(O,T,I,Q){var ce=fe(I);if(typeof ce!="function")throw Error(u(150));if(I=ce.call(I),I==null)throw Error(u(151));for(var _e=ce=null,ve=T,xe=T=0,ft=null,je=I.next();ve!==null&&!je.done;xe++,je=I.next()){ve.index>xe?(ft=ve,ve=null):ft=ve.sibling;var Ui=G(O,ve,je.value,Q);if(Ui===null){ve===null&&(ve=ft);break}e&&ve&&Ui.alternate===null&&n(O,ve),T=h(Ui,T,xe),_e===null?ce=Ui:_e.sibling=Ui,_e=Ui,ve=ft}if(je.done)return r(O,ve),Ve&&mr(O,xe),ce;if(ve===null){for(;!je.done;xe++,je=I.next())je=K(O,je.value,Q),je!==null&&(T=h(je,T,xe),_e===null?ce=je:_e.sibling=je,_e=je);return Ve&&mr(O,xe),ce}for(ve=s(O,ve);!je.done;xe++,je=I.next())je=te(ve,O,xe,je.value,Q),je!==null&&(e&&je.alternate!==null&&ve.delete(je.key===null?xe:je.key),T=h(je,T,xe),_e===null?ce=je:_e.sibling=je,_e=je);return e&&ve.forEach(function(Kf){return n(O,Kf)}),Ve&&mr(O,xe),ce}function Xe(O,T,I,Q){if(typeof I=="object"&&I!==null&&I.type===ge&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case me:e:{for(var ce=I.key,_e=T;_e!==null;){if(_e.key===ce){if(ce=I.type,ce===ge){if(_e.tag===7){r(O,_e.sibling),T=l(_e,I.props.children),T.return=O,O=T;break e}}else if(_e.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===Ie&&ic(ce)===_e.type){r(O,_e.sibling),T=l(_e,I.props),T.ref=as(O,_e,I),T.return=O,O=T;break e}r(O,_e);break}else n(O,_e);_e=_e.sibling}I.type===ge?(T=Pr(I.props.children,O.mode,Q,I.key),T.return=O,O=T):(Q=Wa(I.type,I.key,I.props,null,O.mode,Q),Q.ref=as(O,T,I),Q.return=O,O=Q)}return m(O);case X:e:{for(_e=I.key;T!==null;){if(T.key===_e)if(T.tag===4&&T.stateNode.containerInfo===I.containerInfo&&T.stateNode.implementation===I.implementation){r(O,T.sibling),T=l(T,I.children||[]),T.return=O,O=T;break e}else{r(O,T);break}else n(O,T);T=T.sibling}T=Pu(I,O.mode,Q),T.return=O,O=T}return m(O);case Ie:return _e=I._init,Xe(O,T,_e(I._payload),Q)}if(si(I))return oe(O,T,I,Q);if(fe(I))return ae(O,T,I,Q);wa(O,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,T!==null&&T.tag===6?(r(O,T.sibling),T=l(T,I),T.return=O,O=T):(r(O,T),T=Su(I,O.mode,Q),T.return=O,O=T),m(O)):r(O,T)}return Xe}var lo=rc(!0),oc=rc(!1),xa=Mi(null),Sa=null,uo=null,Ol=null;function Il(){Ol=uo=Sa=null}function Rl(e){var n=xa.current;Ge(xa),e._currentValue=n}function jl(e,n,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,s!==null&&(s.childLanes|=n)):s!==null&&(s.childLanes&n)!==n&&(s.childLanes|=n),e===r)break;e=e.return}}function co(e,n){Sa=e,Ol=uo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&n)!==0&&(jt=!0),e.firstContext=null)}function on(e){var n=e._currentValue;if(Ol!==e)if(e={context:e,memoizedValue:n,next:null},uo===null){if(Sa===null)throw Error(u(308));uo=e,Sa.dependencies={lanes:0,firstContext:e}}else uo=uo.next=e;return n}var gr=null;function Dl(e){gr===null?gr=[e]:gr.push(e)}function sc(e,n,r,s){var l=n.interleaved;return l===null?(r.next=r,Dl(n)):(r.next=l.next,l.next=r),n.interleaved=r,Xn(e,s)}function Xn(e,n){e.lanes|=n;var r=e.alternate;for(r!==null&&(r.lanes|=n),r=e,e=e.return;e!==null;)e.childLanes|=n,r=e.alternate,r!==null&&(r.childLanes|=n),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Ii=!1;function Al(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ac(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ei(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function Ri(e,n,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Ne&2)!==0){var l=s.pending;return l===null?n.next=n:(n.next=l.next,l.next=n),s.pending=n,Xn(e,r)}return l=s.interleaved,l===null?(n.next=n,Dl(s)):(n.next=l.next,l.next=n),s.interleaved=n,Xn(e,r)}function Pa(e,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194240)!==0)){var s=n.lanes;s&=e.pendingLanes,r|=s,n.lanes=r,cn(e,r)}}function lc(e,n){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var l=null,h=null;if(r=r.firstBaseUpdate,r!==null){do{var m={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};h===null?l=h=m:h=h.next=m,r=r.next}while(r!==null);h===null?l=h=n:h=h.next=n}else l=h=n;r={baseState:s.baseState,firstBaseUpdate:l,lastBaseUpdate:h,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=n:e.next=n,r.lastBaseUpdate=n}function ka(e,n,r,s){var l=e.updateQueue;Ii=!1;var h=l.firstBaseUpdate,m=l.lastBaseUpdate,x=l.shared.pending;if(x!==null){l.shared.pending=null;var P=x,D=P.next;P.next=null,m===null?h=D:m.next=D,m=P;var V=e.alternate;V!==null&&(V=V.updateQueue,x=V.lastBaseUpdate,x!==m&&(x===null?V.firstBaseUpdate=D:x.next=D,V.lastBaseUpdate=P))}if(h!==null){var K=l.baseState;m=0,V=D=P=null,x=h;do{var G=x.lane,te=x.eventTime;if((s&G)===G){V!==null&&(V=V.next={eventTime:te,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var oe=e,ae=x;switch(G=n,te=r,ae.tag){case 1:if(oe=ae.payload,typeof oe=="function"){K=oe.call(te,K,G);break e}K=oe;break e;case 3:oe.flags=oe.flags&-65537|128;case 0:if(oe=ae.payload,G=typeof oe=="function"?oe.call(te,K,G):oe,G==null)break e;K=U({},K,G);break e;case 2:Ii=!0}}x.callback!==null&&x.lane!==0&&(e.flags|=64,G=l.effects,G===null?l.effects=[x]:G.push(x))}else te={eventTime:te,lane:G,tag:x.tag,payload:x.payload,callback:x.callback,next:null},V===null?(D=V=te,P=K):V=V.next=te,m|=G;if(x=x.next,x===null){if(x=l.shared.pending,x===null)break;G=x,x=G.next,G.next=null,l.lastBaseUpdate=G,l.shared.pending=null}}while(!0);if(V===null&&(P=K),l.baseState=P,l.firstBaseUpdate=D,l.lastBaseUpdate=V,n=l.shared.interleaved,n!==null){l=n;do m|=l.lane,l=l.next;while(l!==n)}else h===null&&(l.shared.lanes=0);yr|=m,e.lanes=m,e.memoizedState=K}}function uc(e,n,r){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var s=e[n],l=s.callback;if(l!==null){if(s.callback=null,s=r,typeof l!="function")throw Error(u(191,l));l.call(s)}}}var ls={},Mn=Mi(ls),us=Mi(ls),cs=Mi(ls);function _r(e){if(e===ls)throw Error(u(174));return e}function Bl(e,n){switch(He(cs,n),He(us,e),He(Mn,ls),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:Er(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=Er(n,e)}Ge(Mn),He(Mn,n)}function ho(){Ge(Mn),Ge(us),Ge(cs)}function cc(e){_r(cs.current);var n=_r(Mn.current),r=Er(n,e.type);n!==r&&(He(us,e),He(Mn,r))}function Fl(e){us.current===e&&(Ge(Mn),Ge(us))}var qe=Mi(0);function La(e){for(var n=e;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Zl=[];function Ul(){for(var e=0;e<Zl.length;e++)Zl[e]._workInProgressVersionPrimary=null;Zl.length=0}var Ca=ee.ReactCurrentDispatcher,bl=ee.ReactCurrentBatchConfig,vr=0,Qe=null,lt=null,ct=null,Ea=!1,hs=!1,fs=0,gf=0;function St(){throw Error(u(321))}function Hl(e,n){if(n===null)return!1;for(var r=0;r<n.length&&r<e.length;r++)if(!Gt(e[r],n[r]))return!1;return!0}function Wl(e,n,r,s,l,h){if(vr=h,Qe=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Ca.current=e===null||e.memoizedState===null?wf:xf,e=r(s,l),hs){h=0;do{if(hs=!1,fs=0,25<=h)throw Error(u(301));h+=1,ct=lt=null,n.updateQueue=null,Ca.current=Sf,e=r(s,l)}while(hs)}if(Ca.current=Ma,n=lt!==null&&lt.next!==null,vr=0,ct=lt=Qe=null,Ea=!1,n)throw Error(u(300));return e}function Gl(){var e=fs!==0;return fs=0,e}function Nn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?Qe.memoizedState=ct=e:ct=ct.next=e,ct}function sn(){if(lt===null){var e=Qe.alternate;e=e!==null?e.memoizedState:null}else e=lt.next;var n=ct===null?Qe.memoizedState:ct.next;if(n!==null)ct=n,lt=e;else{if(e===null)throw Error(u(310));lt=e,e={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},ct===null?Qe.memoizedState=ct=e:ct=ct.next=e}return ct}function ds(e,n){return typeof n=="function"?n(e):n}function Vl(e){var n=sn(),r=n.queue;if(r===null)throw Error(u(311));r.lastRenderedReducer=e;var s=lt,l=s.baseQueue,h=r.pending;if(h!==null){if(l!==null){var m=l.next;l.next=h.next,h.next=m}s.baseQueue=l=h,r.pending=null}if(l!==null){h=l.next,s=s.baseState;var x=m=null,P=null,D=h;do{var V=D.lane;if((vr&V)===V)P!==null&&(P=P.next={lane:0,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null}),s=D.hasEagerState?D.eagerState:e(s,D.action);else{var K={lane:V,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null};P===null?(x=P=K,m=s):P=P.next=K,Qe.lanes|=V,yr|=V}D=D.next}while(D!==null&&D!==h);P===null?m=s:P.next=x,Gt(s,n.memoizedState)||(jt=!0),n.memoizedState=s,n.baseState=m,n.baseQueue=P,r.lastRenderedState=s}if(e=r.interleaved,e!==null){l=e;do h=l.lane,Qe.lanes|=h,yr|=h,l=l.next;while(l!==e)}else l===null&&(r.lanes=0);return[n.memoizedState,r.dispatch]}function $l(e){var n=sn(),r=n.queue;if(r===null)throw Error(u(311));r.lastRenderedReducer=e;var s=r.dispatch,l=r.pending,h=n.memoizedState;if(l!==null){r.pending=null;var m=l=l.next;do h=e(h,m.action),m=m.next;while(m!==l);Gt(h,n.memoizedState)||(jt=!0),n.memoizedState=h,n.baseQueue===null&&(n.baseState=h),r.lastRenderedState=h}return[h,s]}function hc(){}function fc(e,n){var r=Qe,s=sn(),l=n(),h=!Gt(s.memoizedState,l);if(h&&(s.memoizedState=l,jt=!0),s=s.queue,Kl(mc.bind(null,r,s,e),[e]),s.getSnapshot!==n||h||ct!==null&&ct.memoizedState.tag&1){if(r.flags|=2048,ps(9,pc.bind(null,r,s,l,n),void 0,null),ht===null)throw Error(u(349));(vr&30)!==0||dc(r,n,l)}return l}function dc(e,n,r){e.flags|=16384,e={getSnapshot:n,value:r},n=Qe.updateQueue,n===null?(n={lastEffect:null,stores:null},Qe.updateQueue=n,n.stores=[e]):(r=n.stores,r===null?n.stores=[e]:r.push(e))}function pc(e,n,r,s){n.value=r,n.getSnapshot=s,gc(n)&&_c(e)}function mc(e,n,r){return r(function(){gc(n)&&_c(e)})}function gc(e){var n=e.getSnapshot;e=e.value;try{var r=n();return!Gt(e,r)}catch{return!0}}function _c(e){var n=Xn(e,1);n!==null&&yn(n,e,1,-1)}function vc(e){var n=Nn();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ds,lastRenderedState:e},n.queue=e,e=e.dispatch=yf.bind(null,Qe,e),[n.memoizedState,e]}function ps(e,n,r,s){return e={tag:e,create:n,destroy:r,deps:s,next:null},n=Qe.updateQueue,n===null?(n={lastEffect:null,stores:null},Qe.updateQueue=n,n.lastEffect=e.next=e):(r=n.lastEffect,r===null?n.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,n.lastEffect=e)),e}function yc(){return sn().memoizedState}function Ta(e,n,r,s){var l=Nn();Qe.flags|=e,l.memoizedState=ps(1|n,r,void 0,s===void 0?null:s)}function za(e,n,r,s){var l=sn();s=s===void 0?null:s;var h=void 0;if(lt!==null){var m=lt.memoizedState;if(h=m.destroy,s!==null&&Hl(s,m.deps)){l.memoizedState=ps(n,r,h,s);return}}Qe.flags|=e,l.memoizedState=ps(1|n,r,h,s)}function wc(e,n){return Ta(8390656,8,e,n)}function Kl(e,n){return za(2048,8,e,n)}function xc(e,n){return za(4,2,e,n)}function Sc(e,n){return za(4,4,e,n)}function Pc(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function kc(e,n,r){return r=r!=null?r.concat([e]):null,za(4,4,Pc.bind(null,n,e),r)}function ql(){}function Lc(e,n){var r=sn();n=n===void 0?null:n;var s=r.memoizedState;return s!==null&&n!==null&&Hl(n,s[1])?s[0]:(r.memoizedState=[e,n],e)}function Cc(e,n){var r=sn();n=n===void 0?null:n;var s=r.memoizedState;return s!==null&&n!==null&&Hl(n,s[1])?s[0]:(e=e(),r.memoizedState=[e,n],e)}function Ec(e,n,r){return(vr&21)===0?(e.baseState&&(e.baseState=!1,jt=!0),e.memoizedState=r):(Gt(r,n)||(r=Gs(),Qe.lanes|=r,yr|=r,e.baseState=!0),n)}function _f(e,n){var r=Me;Me=r!==0&&4>r?r:4,e(!0);var s=bl.transition;bl.transition={};try{e(!1),n()}finally{Me=r,bl.transition=s}}function Tc(){return sn().memoizedState}function vf(e,n,r){var s=Bi(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},zc(e))Mc(n,r);else if(r=sc(e,n,r,s),r!==null){var l=zt();yn(r,e,s,l),Nc(r,n,s)}}function yf(e,n,r){var s=Bi(e),l={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(zc(e))Mc(n,l);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=n.lastRenderedReducer,h!==null))try{var m=n.lastRenderedState,x=h(m,r);if(l.hasEagerState=!0,l.eagerState=x,Gt(x,m)){var P=n.interleaved;P===null?(l.next=l,Dl(n)):(l.next=P.next,P.next=l),n.interleaved=l;return}}catch{}finally{}r=sc(e,n,l,s),r!==null&&(l=zt(),yn(r,e,s,l),Nc(r,n,s))}}function zc(e){var n=e.alternate;return e===Qe||n!==null&&n===Qe}function Mc(e,n){hs=Ea=!0;var r=e.pending;r===null?n.next=n:(n.next=r.next,r.next=n),e.pending=n}function Nc(e,n,r){if((r&4194240)!==0){var s=n.lanes;s&=e.pendingLanes,r|=s,n.lanes=r,cn(e,r)}}var Ma={readContext:on,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useInsertionEffect:St,useLayoutEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useMutableSource:St,useSyncExternalStore:St,useId:St,unstable_isNewReconciler:!1},wf={readContext:on,useCallback:function(e,n){return Nn().memoizedState=[e,n===void 0?null:n],e},useContext:on,useEffect:wc,useImperativeHandle:function(e,n,r){return r=r!=null?r.concat([e]):null,Ta(4194308,4,Pc.bind(null,n,e),r)},useLayoutEffect:function(e,n){return Ta(4194308,4,e,n)},useInsertionEffect:function(e,n){return Ta(4,2,e,n)},useMemo:function(e,n){var r=Nn();return n=n===void 0?null:n,e=e(),r.memoizedState=[e,n],e},useReducer:function(e,n,r){var s=Nn();return n=r!==void 0?r(n):n,s.memoizedState=s.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},s.queue=e,e=e.dispatch=vf.bind(null,Qe,e),[s.memoizedState,e]},useRef:function(e){var n=Nn();return e={current:e},n.memoizedState=e},useState:vc,useDebugValue:ql,useDeferredValue:function(e){return Nn().memoizedState=e},useTransition:function(){var e=vc(!1),n=e[0];return e=_f.bind(null,e[1]),Nn().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,r){var s=Qe,l=Nn();if(Ve){if(r===void 0)throw Error(u(407));r=r()}else{if(r=n(),ht===null)throw Error(u(349));(vr&30)!==0||dc(s,n,r)}l.memoizedState=r;var h={value:r,getSnapshot:n};return l.queue=h,wc(mc.bind(null,s,h,e),[e]),s.flags|=2048,ps(9,pc.bind(null,s,h,r,n),void 0,null),r},useId:function(){var e=Nn(),n=ht.identifierPrefix;if(Ve){var r=Yn,s=Jn;r=(s&~(1<<32-ke(s)-1)).toString(32)+r,n=":"+n+"R"+r,r=fs++,0<r&&(n+="H"+r.toString(32)),n+=":"}else r=gf++,n=":"+n+"r"+r.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},xf={readContext:on,useCallback:Lc,useContext:on,useEffect:Kl,useImperativeHandle:kc,useInsertionEffect:xc,useLayoutEffect:Sc,useMemo:Cc,useReducer:Vl,useRef:yc,useState:function(){return Vl(ds)},useDebugValue:ql,useDeferredValue:function(e){var n=sn();return Ec(n,lt.memoizedState,e)},useTransition:function(){var e=Vl(ds)[0],n=sn().memoizedState;return[e,n]},useMutableSource:hc,useSyncExternalStore:fc,useId:Tc,unstable_isNewReconciler:!1},Sf={readContext:on,useCallback:Lc,useContext:on,useEffect:Kl,useImperativeHandle:kc,useInsertionEffect:xc,useLayoutEffect:Sc,useMemo:Cc,useReducer:$l,useRef:yc,useState:function(){return $l(ds)},useDebugValue:ql,useDeferredValue:function(e){var n=sn();return lt===null?n.memoizedState=e:Ec(n,lt.memoizedState,e)},useTransition:function(){var e=$l(ds)[0],n=sn().memoizedState;return[e,n]},useMutableSource:hc,useSyncExternalStore:fc,useId:Tc,unstable_isNewReconciler:!1};function gn(e,n){if(e&&e.defaultProps){n=U({},n),e=e.defaultProps;for(var r in e)n[r]===void 0&&(n[r]=e[r]);return n}return n}function Ql(e,n,r,s){n=e.memoizedState,r=r(s,n),r=r==null?n:U({},n,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Na={isMounted:function(e){return(e=e._reactInternals)?xn(e)===e:!1},enqueueSetState:function(e,n,r){e=e._reactInternals;var s=zt(),l=Bi(e),h=ei(s,l);h.payload=n,r!=null&&(h.callback=r),n=Ri(e,h,l),n!==null&&(yn(n,e,l,s),Pa(n,e,l))},enqueueReplaceState:function(e,n,r){e=e._reactInternals;var s=zt(),l=Bi(e),h=ei(s,l);h.tag=1,h.payload=n,r!=null&&(h.callback=r),n=Ri(e,h,l),n!==null&&(yn(n,e,l,s),Pa(n,e,l))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var r=zt(),s=Bi(e),l=ei(r,s);l.tag=2,n!=null&&(l.callback=n),n=Ri(e,l,s),n!==null&&(yn(n,e,s,r),Pa(n,e,s))}};function Oc(e,n,r,s,l,h,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,h,m):n.prototype&&n.prototype.isPureReactComponent?!Cn(r,s)||!Cn(l,h):!0}function Ic(e,n,r){var s=!1,l=Ni,h=n.contextType;return typeof h=="object"&&h!==null?h=on(h):(l=Rt(n)?dr:xt.current,s=n.contextTypes,h=(s=s!=null)?ro(e,l):Ni),n=new n(r,h),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Na,e.stateNode=n,n._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=h),n}function Rc(e,n,r,s){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,s),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,s),n.state!==e&&Na.enqueueReplaceState(n,n.state,null)}function Jl(e,n,r,s){var l=e.stateNode;l.props=r,l.state=e.memoizedState,l.refs={},Al(e);var h=n.contextType;typeof h=="object"&&h!==null?l.context=on(h):(h=Rt(n)?dr:xt.current,l.context=ro(e,h)),l.state=e.memoizedState,h=n.getDerivedStateFromProps,typeof h=="function"&&(Ql(e,n,h,r),l.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(n=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),n!==l.state&&Na.enqueueReplaceState(l,l.state,null),ka(e,r,l,s),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function fo(e,n){try{var r="",s=n;do r+=le(s),s=s.return;while(s);var l=r}catch(h){l=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:n,stack:l,digest:null}}function Yl(e,n,r){return{value:e,source:null,stack:r??null,digest:n??null}}function Xl(e,n){try{console.error(n.value)}catch(r){setTimeout(function(){throw r})}}var Pf=typeof WeakMap=="function"?WeakMap:Map;function jc(e,n,r){r=ei(-1,r),r.tag=3,r.payload={element:null};var s=n.value;return r.callback=function(){Ba||(Ba=!0,pu=s),Xl(e,n)},r}function Dc(e,n,r){r=ei(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var l=n.value;r.payload=function(){return s(l)},r.callback=function(){Xl(e,n)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(r.callback=function(){Xl(e,n),typeof s!="function"&&(Di===null?Di=new Set([this]):Di.add(this));var m=n.stack;this.componentDidCatch(n.value,{componentStack:m!==null?m:""})}),r}function Ac(e,n,r){var s=e.pingCache;if(s===null){s=e.pingCache=new Pf;var l=new Set;s.set(n,l)}else l=s.get(n),l===void 0&&(l=new Set,s.set(n,l));l.has(r)||(l.add(r),e=Af.bind(null,e,n,r),n.then(e,e))}function Bc(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function Fc(e,n,r,s,l){return(e.mode&1)===0?(e===n?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(n=ei(-1,1),n.tag=2,Ri(r,n,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=l,e)}var kf=ee.ReactCurrentOwner,jt=!1;function Tt(e,n,r,s){n.child=e===null?oc(n,null,r,s):lo(n,e.child,r,s)}function Zc(e,n,r,s,l){r=r.render;var h=n.ref;return co(n,l),s=Wl(e,n,r,s,h,l),r=Gl(),e!==null&&!jt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~l,ti(e,n,l)):(Ve&&r&&El(n),n.flags|=1,Tt(e,n,s,l),n.child)}function Uc(e,n,r,s,l){if(e===null){var h=r.type;return typeof h=="function"&&!xu(h)&&h.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(n.tag=15,n.type=h,bc(e,n,h,s,l)):(e=Wa(r.type,null,s,n,n.mode,l),e.ref=n.ref,e.return=n,n.child=e)}if(h=e.child,(e.lanes&l)===0){var m=h.memoizedProps;if(r=r.compare,r=r!==null?r:Cn,r(m,s)&&e.ref===n.ref)return ti(e,n,l)}return n.flags|=1,e=Zi(h,s),e.ref=n.ref,e.return=n,n.child=e}function bc(e,n,r,s,l){if(e!==null){var h=e.memoizedProps;if(Cn(h,s)&&e.ref===n.ref)if(jt=!1,n.pendingProps=s=h,(e.lanes&l)!==0)(e.flags&131072)!==0&&(jt=!0);else return n.lanes=e.lanes,ti(e,n,l)}return eu(e,n,r,s,l)}function Hc(e,n,r){var s=n.pendingProps,l=s.children,h=e!==null?e.memoizedState:null;if(s.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(mo,qt),qt|=r;else{if((r&1073741824)===0)return e=h!==null?h.baseLanes|r:r,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,He(mo,qt),qt|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=h!==null?h.baseLanes:r,He(mo,qt),qt|=s}else h!==null?(s=h.baseLanes|r,n.memoizedState=null):s=r,He(mo,qt),qt|=s;return Tt(e,n,l,r),n.child}function Wc(e,n){var r=n.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(n.flags|=512,n.flags|=2097152)}function eu(e,n,r,s,l){var h=Rt(r)?dr:xt.current;return h=ro(n,h),co(n,l),r=Wl(e,n,r,s,h,l),s=Gl(),e!==null&&!jt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~l,ti(e,n,l)):(Ve&&s&&El(n),n.flags|=1,Tt(e,n,r,l),n.child)}function Gc(e,n,r,s,l){if(Rt(r)){var h=!0;ma(n)}else h=!1;if(co(n,l),n.stateNode===null)Ia(e,n),Ic(n,r,s),Jl(n,r,s,l),s=!0;else if(e===null){var m=n.stateNode,x=n.memoizedProps;m.props=x;var P=m.context,D=r.contextType;typeof D=="object"&&D!==null?D=on(D):(D=Rt(r)?dr:xt.current,D=ro(n,D));var V=r.getDerivedStateFromProps,K=typeof V=="function"||typeof m.getSnapshotBeforeUpdate=="function";K||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==s||P!==D)&&Rc(n,m,s,D),Ii=!1;var G=n.memoizedState;m.state=G,ka(n,s,m,l),P=n.memoizedState,x!==s||G!==P||It.current||Ii?(typeof V=="function"&&(Ql(n,r,V,s),P=n.memoizedState),(x=Ii||Oc(n,r,x,s,G,P,D))?(K||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(n.flags|=4194308)):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=s,n.memoizedState=P),m.props=s,m.state=P,m.context=D,s=x):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),s=!1)}else{m=n.stateNode,ac(e,n),x=n.memoizedProps,D=n.type===n.elementType?x:gn(n.type,x),m.props=D,K=n.pendingProps,G=m.context,P=r.contextType,typeof P=="object"&&P!==null?P=on(P):(P=Rt(r)?dr:xt.current,P=ro(n,P));var te=r.getDerivedStateFromProps;(V=typeof te=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==K||G!==P)&&Rc(n,m,s,P),Ii=!1,G=n.memoizedState,m.state=G,ka(n,s,m,l);var oe=n.memoizedState;x!==K||G!==oe||It.current||Ii?(typeof te=="function"&&(Ql(n,r,te,s),oe=n.memoizedState),(D=Ii||Oc(n,r,D,s,G,oe,P)||!1)?(V||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(s,oe,P),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(s,oe,P)),typeof m.componentDidUpdate=="function"&&(n.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof m.componentDidUpdate!="function"||x===e.memoizedProps&&G===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&G===e.memoizedState||(n.flags|=1024),n.memoizedProps=s,n.memoizedState=oe),m.props=s,m.state=oe,m.context=P,s=D):(typeof m.componentDidUpdate!="function"||x===e.memoizedProps&&G===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&G===e.memoizedState||(n.flags|=1024),s=!1)}return tu(e,n,r,s,h,l)}function tu(e,n,r,s,l,h){Wc(e,n);var m=(n.flags&128)!==0;if(!s&&!m)return l&&Qu(n,r,!1),ti(e,n,h);s=n.stateNode,kf.current=n;var x=m&&typeof r.getDerivedStateFromError!="function"?null:s.render();return n.flags|=1,e!==null&&m?(n.child=lo(n,e.child,null,h),n.child=lo(n,null,x,h)):Tt(e,n,x,h),n.memoizedState=s.state,l&&Qu(n,r,!0),n.child}function Vc(e){var n=e.stateNode;n.pendingContext?Ku(e,n.pendingContext,n.pendingContext!==n.context):n.context&&Ku(e,n.context,!1),Bl(e,n.containerInfo)}function $c(e,n,r,s,l){return ao(),Nl(l),n.flags|=256,Tt(e,n,r,s),n.child}var nu={dehydrated:null,treeContext:null,retryLane:0};function iu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Kc(e,n,r){var s=n.pendingProps,l=qe.current,h=!1,m=(n.flags&128)!==0,x;if((x=m)||(x=e!==null&&e.memoizedState===null?!1:(l&2)!==0),x?(h=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),He(qe,l&1),e===null)return Ml(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((n.mode&1)===0?n.lanes=1:e.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(m=s.children,e=s.fallback,h?(s=n.mode,h=n.child,m={mode:"hidden",children:m},(s&1)===0&&h!==null?(h.childLanes=0,h.pendingProps=m):h=Ga(m,s,0,null),e=Pr(e,s,r,null),h.return=n,e.return=n,h.sibling=e,n.child=h,n.child.memoizedState=iu(r),n.memoizedState=nu,e):ru(n,m));if(l=e.memoizedState,l!==null&&(x=l.dehydrated,x!==null))return Lf(e,n,m,s,x,l,r);if(h){h=s.fallback,m=n.mode,l=e.child,x=l.sibling;var P={mode:"hidden",children:s.children};return(m&1)===0&&n.child!==l?(s=n.child,s.childLanes=0,s.pendingProps=P,n.deletions=null):(s=Zi(l,P),s.subtreeFlags=l.subtreeFlags&14680064),x!==null?h=Zi(x,h):(h=Pr(h,m,r,null),h.flags|=2),h.return=n,s.return=n,s.sibling=h,n.child=s,s=h,h=n.child,m=e.child.memoizedState,m=m===null?iu(r):{baseLanes:m.baseLanes|r,cachePool:null,transitions:m.transitions},h.memoizedState=m,h.childLanes=e.childLanes&~r,n.memoizedState=nu,s}return h=e.child,e=h.sibling,s=Zi(h,{mode:"visible",children:s.children}),(n.mode&1)===0&&(s.lanes=r),s.return=n,s.sibling=null,e!==null&&(r=n.deletions,r===null?(n.deletions=[e],n.flags|=16):r.push(e)),n.child=s,n.memoizedState=null,s}function ru(e,n){return n=Ga({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function Oa(e,n,r,s){return s!==null&&Nl(s),lo(n,e.child,null,r),e=ru(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Lf(e,n,r,s,l,h,m){if(r)return n.flags&256?(n.flags&=-257,s=Yl(Error(u(422))),Oa(e,n,m,s)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(h=s.fallback,l=n.mode,s=Ga({mode:"visible",children:s.children},l,0,null),h=Pr(h,l,m,null),h.flags|=2,s.return=n,h.return=n,s.sibling=h,n.child=s,(n.mode&1)!==0&&lo(n,e.child,null,m),n.child.memoizedState=iu(m),n.memoizedState=nu,h);if((n.mode&1)===0)return Oa(e,n,m,null);if(l.data==="$!"){if(s=l.nextSibling&&l.nextSibling.dataset,s)var x=s.dgst;return s=x,h=Error(u(419)),s=Yl(h,s,void 0),Oa(e,n,m,s)}if(x=(m&e.childLanes)!==0,jt||x){if(s=ht,s!==null){switch(m&-m){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=(l&(s.suspendedLanes|m))!==0?0:l,l!==0&&l!==h.retryLane&&(h.retryLane=l,Xn(e,l),yn(s,e,l,-1))}return wu(),s=Yl(Error(u(421))),Oa(e,n,m,s)}return l.data==="$?"?(n.flags|=128,n.child=e.child,n=Bf.bind(null,e),l._reactRetry=n,null):(e=h.treeContext,Kt=zn(l.nextSibling),$t=n,Ve=!0,mn=null,e!==null&&(nn[rn++]=Jn,nn[rn++]=Yn,nn[rn++]=pr,Jn=e.id,Yn=e.overflow,pr=n),n=ru(n,s.children),n.flags|=4096,n)}function qc(e,n,r){e.lanes|=n;var s=e.alternate;s!==null&&(s.lanes|=n),jl(e.return,n,r)}function ou(e,n,r,s,l){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:l}:(h.isBackwards=n,h.rendering=null,h.renderingStartTime=0,h.last=s,h.tail=r,h.tailMode=l)}function Qc(e,n,r){var s=n.pendingProps,l=s.revealOrder,h=s.tail;if(Tt(e,n,s.children,r),s=qe.current,(s&2)!==0)s=s&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&qc(e,r,n);else if(e.tag===19)qc(e,r,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(He(qe,s),(n.mode&1)===0)n.memoizedState=null;else switch(l){case"forwards":for(r=n.child,l=null;r!==null;)e=r.alternate,e!==null&&La(e)===null&&(l=r),r=r.sibling;r=l,r===null?(l=n.child,n.child=null):(l=r.sibling,r.sibling=null),ou(n,!1,l,r,h);break;case"backwards":for(r=null,l=n.child,n.child=null;l!==null;){if(e=l.alternate,e!==null&&La(e)===null){n.child=l;break}e=l.sibling,l.sibling=r,r=l,l=e}ou(n,!0,r,null,h);break;case"together":ou(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Ia(e,n){(n.mode&1)===0&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function ti(e,n,r){if(e!==null&&(n.dependencies=e.dependencies),yr|=n.lanes,(r&n.childLanes)===0)return null;if(e!==null&&n.child!==e.child)throw Error(u(153));if(n.child!==null){for(e=n.child,r=Zi(e,e.pendingProps),n.child=r,r.return=n;e.sibling!==null;)e=e.sibling,r=r.sibling=Zi(e,e.pendingProps),r.return=n;r.sibling=null}return n.child}function Cf(e,n,r){switch(n.tag){case 3:Vc(n),ao();break;case 5:cc(n);break;case 1:Rt(n.type)&&ma(n);break;case 4:Bl(n,n.stateNode.containerInfo);break;case 10:var s=n.type._context,l=n.memoizedProps.value;He(xa,s._currentValue),s._currentValue=l;break;case 13:if(s=n.memoizedState,s!==null)return s.dehydrated!==null?(He(qe,qe.current&1),n.flags|=128,null):(r&n.child.childLanes)!==0?Kc(e,n,r):(He(qe,qe.current&1),e=ti(e,n,r),e!==null?e.sibling:null);He(qe,qe.current&1);break;case 19:if(s=(r&n.childLanes)!==0,(e.flags&128)!==0){if(s)return Qc(e,n,r);n.flags|=128}if(l=n.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),He(qe,qe.current),s)break;return null;case 22:case 23:return n.lanes=0,Hc(e,n,r)}return ti(e,n,r)}var Jc,su,Yc,Xc;Jc=function(e,n){for(var r=n.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},su=function(){},Yc=function(e,n,r,s){var l=e.memoizedProps;if(l!==s){e=n.stateNode,_r(Mn.current);var h=null;switch(r){case"input":l=xo(e,l),s=xo(e,s),h=[];break;case"select":l=U({},l,{value:void 0}),s=U({},s,{value:void 0}),h=[];break;case"textarea":l=Lr(e,l),s=Lr(e,s),h=[];break;default:typeof l.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=b)}Eo(r,s);var m;r=null;for(D in l)if(!s.hasOwnProperty(D)&&l.hasOwnProperty(D)&&l[D]!=null)if(D==="style"){var x=l[D];for(m in x)x.hasOwnProperty(m)&&(r||(r={}),r[m]="")}else D!=="dangerouslySetInnerHTML"&&D!=="children"&&D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&D!=="autoFocus"&&(g.hasOwnProperty(D)?h||(h=[]):(h=h||[]).push(D,null));for(D in s){var P=s[D];if(x=l!=null?l[D]:void 0,s.hasOwnProperty(D)&&P!==x&&(P!=null||x!=null))if(D==="style")if(x){for(m in x)!x.hasOwnProperty(m)||P&&P.hasOwnProperty(m)||(r||(r={}),r[m]="");for(m in P)P.hasOwnProperty(m)&&x[m]!==P[m]&&(r||(r={}),r[m]=P[m])}else r||(h||(h=[]),h.push(D,r)),r=P;else D==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,x=x?x.__html:void 0,P!=null&&x!==P&&(h=h||[]).push(D,P)):D==="children"?typeof P!="string"&&typeof P!="number"||(h=h||[]).push(D,""+P):D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&(g.hasOwnProperty(D)?(P!=null&&D==="onScroll"&&Ze("scroll",e),h||x===P||(h=[])):(h=h||[]).push(D,P))}r&&(h=h||[]).push("style",r);var D=h;(n.updateQueue=D)&&(n.flags|=4)}},Xc=function(e,n,r,s){r!==s&&(n.flags|=4)};function ms(e,n){if(!Ve)switch(e.tailMode){case"hidden":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Pt(e){var n=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(n)for(var l=e.child;l!==null;)r|=l.lanes|l.childLanes,s|=l.subtreeFlags&14680064,s|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)r|=l.lanes|l.childLanes,s|=l.subtreeFlags,s|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=s,e.childLanes=r,n}function Ef(e,n,r){var s=n.pendingProps;switch(Tl(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(n),null;case 1:return Rt(n.type)&&pa(),Pt(n),null;case 3:return s=n.stateNode,ho(),Ge(It),Ge(xt),Ul(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(ya(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,mn!==null&&(_u(mn),mn=null))),su(e,n),Pt(n),null;case 5:Fl(n);var l=_r(cs.current);if(r=n.type,e!==null&&n.stateNode!=null)Yc(e,n,r,s,l),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!s){if(n.stateNode===null)throw Error(u(166));return Pt(n),null}if(e=_r(Mn.current),ya(n)){s=n.stateNode,r=n.type;var h=n.memoizedProps;switch(s[tn]=n,s[Ti]=h,e=(n.mode&1)!==0,r){case"dialog":Ze("cancel",s),Ze("close",s);break;case"iframe":case"object":case"embed":Ze("load",s);break;case"video":case"audio":for(l=0;l<Li.length;l++)Ze(Li[l],s);break;case"source":Ze("error",s);break;case"img":case"image":case"link":Ze("error",s),Ze("load",s);break;case"details":Ze("toggle",s);break;case"input":So(s,h),Ze("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!h.multiple},Ze("invalid",s);break;case"textarea":Lo(s,h),Ze("invalid",s)}Eo(r,h),l=null;for(var m in h)if(h.hasOwnProperty(m)){var x=h[m];m==="children"?typeof x=="string"?s.textContent!==x&&(h.suppressHydrationWarning!==!0&&j(s.textContent,x,e),l=["children",x]):typeof x=="number"&&s.textContent!==""+x&&(h.suppressHydrationWarning!==!0&&j(s.textContent,x,e),l=["children",""+x]):g.hasOwnProperty(m)&&x!=null&&m==="onScroll"&&Ze("scroll",s)}switch(r){case"input":ii(s),Ki(s,h,!0);break;case"textarea":ii(s),Ns(s);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(s.onclick=b)}s=l,n.updateQueue=s,s!==null&&(n.flags|=4)}else{m=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Cr(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=m.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=m.createElement(r,{is:s.is}):(e=m.createElement(r),r==="select"&&(m=e,s.multiple?m.multiple=!0:s.size&&(m.size=s.size))):e=m.createElementNS(e,r),e[tn]=n,e[Ti]=s,Jc(e,n,!1,!1),n.stateNode=e;e:{switch(m=Rn(r,s),r){case"dialog":Ze("cancel",e),Ze("close",e),l=s;break;case"iframe":case"object":case"embed":Ze("load",e),l=s;break;case"video":case"audio":for(l=0;l<Li.length;l++)Ze(Li[l],e);l=s;break;case"source":Ze("error",e),l=s;break;case"img":case"image":case"link":Ze("error",e),Ze("load",e),l=s;break;case"details":Ze("toggle",e),l=s;break;case"input":So(e,s),l=xo(e,s),Ze("invalid",e);break;case"option":l=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},l=U({},s,{value:void 0}),Ze("invalid",e);break;case"textarea":Lo(e,s),l=Lr(e,s),Ze("invalid",e);break;default:l=s}Eo(r,l),x=l;for(h in x)if(x.hasOwnProperty(h)){var P=x[h];h==="style"?Tr(e,P):h==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&Os(e,P)):h==="children"?typeof P=="string"?(r!=="textarea"||P!=="")&&ai(e,P):typeof P=="number"&&ai(e,""+P):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(g.hasOwnProperty(h)?P!=null&&h==="onScroll"&&Ze("scroll",e):P!=null&&J(e,h,P,m))}switch(r){case"input":ii(e),Ki(e,s,!1);break;case"textarea":ii(e),Ns(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Ce(s.value));break;case"select":e.multiple=!!s.multiple,h=s.value,h!=null?wn(e,!!s.multiple,h,!1):s.defaultValue!=null&&wn(e,!!s.multiple,s.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=b)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Pt(n),null;case 6:if(e&&n.stateNode!=null)Xc(e,n,e.memoizedProps,s);else{if(typeof s!="string"&&n.stateNode===null)throw Error(u(166));if(r=_r(cs.current),_r(Mn.current),ya(n)){if(s=n.stateNode,r=n.memoizedProps,s[tn]=n,(h=s.nodeValue!==r)&&(e=$t,e!==null))switch(e.tag){case 3:j(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&j(s.nodeValue,r,(e.mode&1)!==0)}h&&(n.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[tn]=n,n.stateNode=s}return Pt(n),null;case 13:if(Ge(qe),s=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ve&&Kt!==null&&(n.mode&1)!==0&&(n.flags&128)===0)nc(),ao(),n.flags|=98560,h=!1;else if(h=ya(n),s!==null&&s.dehydrated!==null){if(e===null){if(!h)throw Error(u(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(u(317));h[tn]=n}else ao(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Pt(n),h=!1}else mn!==null&&(_u(mn),mn=null),h=!0;if(!h)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=r,n):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(n.child.flags|=8192,(n.mode&1)!==0&&(e===null||(qe.current&1)!==0?ut===0&&(ut=3):wu())),n.updateQueue!==null&&(n.flags|=4),Pt(n),null);case 4:return ho(),su(e,n),e===null&&Ci(n.stateNode.containerInfo),Pt(n),null;case 10:return Rl(n.type._context),Pt(n),null;case 17:return Rt(n.type)&&pa(),Pt(n),null;case 19:if(Ge(qe),h=n.memoizedState,h===null)return Pt(n),null;if(s=(n.flags&128)!==0,m=h.rendering,m===null)if(s)ms(h,!1);else{if(ut!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(m=La(e),m!==null){for(n.flags|=128,ms(h,!1),s=m.updateQueue,s!==null&&(n.updateQueue=s,n.flags|=4),n.subtreeFlags=0,s=r,r=n.child;r!==null;)h=r,e=s,h.flags&=14680066,m=h.alternate,m===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=m.childLanes,h.lanes=m.lanes,h.child=m.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=m.memoizedProps,h.memoizedState=m.memoizedState,h.updateQueue=m.updateQueue,h.type=m.type,e=m.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return He(qe,qe.current&1|2),n.child}e=e.sibling}h.tail!==null&&$e()>go&&(n.flags|=128,s=!0,ms(h,!1),n.lanes=4194304)}else{if(!s)if(e=La(m),e!==null){if(n.flags|=128,s=!0,r=e.updateQueue,r!==null&&(n.updateQueue=r,n.flags|=4),ms(h,!0),h.tail===null&&h.tailMode==="hidden"&&!m.alternate&&!Ve)return Pt(n),null}else 2*$e()-h.renderingStartTime>go&&r!==1073741824&&(n.flags|=128,s=!0,ms(h,!1),n.lanes=4194304);h.isBackwards?(m.sibling=n.child,n.child=m):(r=h.last,r!==null?r.sibling=m:n.child=m,h.last=m)}return h.tail!==null?(n=h.tail,h.rendering=n,h.tail=n.sibling,h.renderingStartTime=$e(),n.sibling=null,r=qe.current,He(qe,s?r&1|2:r&1),n):(Pt(n),null);case 22:case 23:return yu(),s=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(n.flags|=8192),s&&(n.mode&1)!==0?(qt&1073741824)!==0&&(Pt(n),n.subtreeFlags&6&&(n.flags|=8192)):Pt(n),null;case 24:return null;case 25:return null}throw Error(u(156,n.tag))}function Tf(e,n){switch(Tl(n),n.tag){case 1:return Rt(n.type)&&pa(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return ho(),Ge(It),Ge(xt),Ul(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 5:return Fl(n),null;case 13:if(Ge(qe),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(u(340));ao()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Ge(qe),null;case 4:return ho(),null;case 10:return Rl(n.type._context),null;case 22:case 23:return yu(),null;case 24:return null;default:return null}}var Ra=!1,kt=!1,zf=typeof WeakSet=="function"?WeakSet:Set,re=null;function po(e,n){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Ye(e,n,s)}else r.current=null}function au(e,n,r){try{r()}catch(s){Ye(e,n,s)}}var eh=!1;function Mf(e,n){if(Y=or,e=Yo(),Xo(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var l=s.anchorOffset,h=s.focusNode;s=s.focusOffset;try{r.nodeType,h.nodeType}catch{r=null;break e}var m=0,x=-1,P=-1,D=0,V=0,K=e,G=null;t:for(;;){for(var te;K!==r||l!==0&&K.nodeType!==3||(x=m+l),K!==h||s!==0&&K.nodeType!==3||(P=m+s),K.nodeType===3&&(m+=K.nodeValue.length),(te=K.firstChild)!==null;)G=K,K=te;for(;;){if(K===e)break t;if(G===r&&++D===l&&(x=m),G===h&&++V===s&&(P=m),(te=K.nextSibling)!==null)break;K=G,G=K.parentNode}K=te}r=x===-1||P===-1?null:{start:x,end:P}}else r=null}r=r||{start:0,end:0}}else r=null;for(pe={focusedElem:e,selectionRange:r},or=!1,re=n;re!==null;)if(n=re,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,re=e;else for(;re!==null;){n=re;try{var oe=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(oe!==null){var ae=oe.memoizedProps,Xe=oe.memoizedState,O=n.stateNode,T=O.getSnapshotBeforeUpdate(n.elementType===n.type?ae:gn(n.type,ae),Xe);O.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var I=n.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(u(163))}}catch(Q){Ye(n,n.return,Q)}if(e=n.sibling,e!==null){e.return=n.return,re=e;break}re=n.return}return oe=eh,eh=!1,oe}function gs(e,n,r){var s=n.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&e)===e){var h=l.destroy;l.destroy=void 0,h!==void 0&&au(n,r,h)}l=l.next}while(l!==s)}}function ja(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==n)}}function lu(e){var n=e.ref;if(n!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof n=="function"?n(e):n.current=e}}function th(e){var n=e.alternate;n!==null&&(e.alternate=null,th(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[tn],delete n[Ti],delete n[zi],delete n[Pl],delete n[kl])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function nh(e){return e.tag===5||e.tag===3||e.tag===4}function ih(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||nh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function uu(e,n,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,n?r.nodeType===8?r.parentNode.insertBefore(e,n):r.insertBefore(e,n):(r.nodeType===8?(n=r.parentNode,n.insertBefore(e,r)):(n=r,n.appendChild(e)),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=b));else if(s!==4&&(e=e.child,e!==null))for(uu(e,n,r),e=e.sibling;e!==null;)uu(e,n,r),e=e.sibling}function cu(e,n,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,n?r.insertBefore(e,n):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(cu(e,n,r),e=e.sibling;e!==null;)cu(e,n,r),e=e.sibling}var pt=null,_n=!1;function ji(e,n,r){for(r=r.child;r!==null;)rh(e,n,r),r=r.sibling}function rh(e,n,r){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(Xi,r)}catch{}switch(r.tag){case 5:kt||po(r,n);case 6:var s=pt,l=_n;pt=null,ji(e,n,r),pt=s,_n=l,pt!==null&&(_n?(e=pt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):pt.removeChild(r.stateNode));break;case 18:pt!==null&&(_n?(e=pt,r=r.stateNode,e.nodeType===8?ss(e.parentNode,r):e.nodeType===1&&ss(e,r),bt(e)):ss(pt,r.stateNode));break;case 4:s=pt,l=_n,pt=r.stateNode.containerInfo,_n=!0,ji(e,n,r),pt=s,_n=l;break;case 0:case 11:case 14:case 15:if(!kt&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){l=s=s.next;do{var h=l,m=h.destroy;h=h.tag,m!==void 0&&((h&2)!==0||(h&4)!==0)&&au(r,n,m),l=l.next}while(l!==s)}ji(e,n,r);break;case 1:if(!kt&&(po(r,n),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(x){Ye(r,n,x)}ji(e,n,r);break;case 21:ji(e,n,r);break;case 22:r.mode&1?(kt=(s=kt)||r.memoizedState!==null,ji(e,n,r),kt=s):ji(e,n,r);break;default:ji(e,n,r)}}function oh(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new zf),n.forEach(function(s){var l=Ff.bind(null,e,s);r.has(s)||(r.add(s),s.then(l,l))})}}function vn(e,n){var r=n.deletions;if(r!==null)for(var s=0;s<r.length;s++){var l=r[s];try{var h=e,m=n,x=m;e:for(;x!==null;){switch(x.tag){case 5:pt=x.stateNode,_n=!1;break e;case 3:pt=x.stateNode.containerInfo,_n=!0;break e;case 4:pt=x.stateNode.containerInfo,_n=!0;break e}x=x.return}if(pt===null)throw Error(u(160));rh(h,m,l),pt=null,_n=!1;var P=l.alternate;P!==null&&(P.return=null),l.return=null}catch(D){Ye(l,n,D)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)sh(n,e),n=n.sibling}function sh(e,n){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vn(n,e),On(e),s&4){try{gs(3,e,e.return),ja(3,e)}catch(ae){Ye(e,e.return,ae)}try{gs(5,e,e.return)}catch(ae){Ye(e,e.return,ae)}}break;case 1:vn(n,e),On(e),s&512&&r!==null&&po(r,r.return);break;case 5:if(vn(n,e),On(e),s&512&&r!==null&&po(r,r.return),e.flags&32){var l=e.stateNode;try{ai(l,"")}catch(ae){Ye(e,e.return,ae)}}if(s&4&&(l=e.stateNode,l!=null)){var h=e.memoizedProps,m=r!==null?r.memoizedProps:h,x=e.type,P=e.updateQueue;if(e.updateQueue=null,P!==null)try{x==="input"&&h.type==="radio"&&h.name!=null&&Po(l,h),Rn(x,m);var D=Rn(x,h);for(m=0;m<P.length;m+=2){var V=P[m],K=P[m+1];V==="style"?Tr(l,K):V==="dangerouslySetInnerHTML"?Os(l,K):V==="children"?ai(l,K):J(l,V,K,D)}switch(x){case"input":$i(l,h);break;case"textarea":Ms(l,h);break;case"select":var G=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!h.multiple;var te=h.value;te!=null?wn(l,!!h.multiple,te,!1):G!==!!h.multiple&&(h.defaultValue!=null?wn(l,!!h.multiple,h.defaultValue,!0):wn(l,!!h.multiple,h.multiple?[]:"",!1))}l[Ti]=h}catch(ae){Ye(e,e.return,ae)}}break;case 6:if(vn(n,e),On(e),s&4){if(e.stateNode===null)throw Error(u(162));l=e.stateNode,h=e.memoizedProps;try{l.nodeValue=h}catch(ae){Ye(e,e.return,ae)}}break;case 3:if(vn(n,e),On(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{bt(n.containerInfo)}catch(ae){Ye(e,e.return,ae)}break;case 4:vn(n,e),On(e);break;case 13:vn(n,e),On(e),l=e.child,l.flags&8192&&(h=l.memoizedState!==null,l.stateNode.isHidden=h,!h||l.alternate!==null&&l.alternate.memoizedState!==null||(du=$e())),s&4&&oh(e);break;case 22:if(V=r!==null&&r.memoizedState!==null,e.mode&1?(kt=(D=kt)||V,vn(n,e),kt=D):vn(n,e),On(e),s&8192){if(D=e.memoizedState!==null,(e.stateNode.isHidden=D)&&!V&&(e.mode&1)!==0)for(re=e,V=e.child;V!==null;){for(K=re=V;re!==null;){switch(G=re,te=G.child,G.tag){case 0:case 11:case 14:case 15:gs(4,G,G.return);break;case 1:po(G,G.return);var oe=G.stateNode;if(typeof oe.componentWillUnmount=="function"){s=G,r=G.return;try{n=s,oe.props=n.memoizedProps,oe.state=n.memoizedState,oe.componentWillUnmount()}catch(ae){Ye(s,r,ae)}}break;case 5:po(G,G.return);break;case 22:if(G.memoizedState!==null){uh(K);continue}}te!==null?(te.return=G,re=te):uh(K)}V=V.sibling}e:for(V=null,K=e;;){if(K.tag===5){if(V===null){V=K;try{l=K.stateNode,D?(h=l.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(x=K.stateNode,P=K.memoizedProps.style,m=P!=null&&P.hasOwnProperty("display")?P.display:null,x.style.display=Co("display",m))}catch(ae){Ye(e,e.return,ae)}}}else if(K.tag===6){if(V===null)try{K.stateNode.nodeValue=D?"":K.memoizedProps}catch(ae){Ye(e,e.return,ae)}}else if((K.tag!==22&&K.tag!==23||K.memoizedState===null||K===e)&&K.child!==null){K.child.return=K,K=K.child;continue}if(K===e)break e;for(;K.sibling===null;){if(K.return===null||K.return===e)break e;V===K&&(V=null),K=K.return}V===K&&(V=null),K.sibling.return=K.return,K=K.sibling}}break;case 19:vn(n,e),On(e),s&4&&oh(e);break;case 21:break;default:vn(n,e),On(e)}}function On(e){var n=e.flags;if(n&2){try{e:{for(var r=e.return;r!==null;){if(nh(r)){var s=r;break e}r=r.return}throw Error(u(160))}switch(s.tag){case 5:var l=s.stateNode;s.flags&32&&(ai(l,""),s.flags&=-33);var h=ih(e);cu(e,h,l);break;case 3:case 4:var m=s.stateNode.containerInfo,x=ih(e);uu(e,x,m);break;default:throw Error(u(161))}}catch(P){Ye(e,e.return,P)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Nf(e,n,r){re=e,ah(e)}function ah(e,n,r){for(var s=(e.mode&1)!==0;re!==null;){var l=re,h=l.child;if(l.tag===22&&s){var m=l.memoizedState!==null||Ra;if(!m){var x=l.alternate,P=x!==null&&x.memoizedState!==null||kt;x=Ra;var D=kt;if(Ra=m,(kt=P)&&!D)for(re=l;re!==null;)m=re,P=m.child,m.tag===22&&m.memoizedState!==null?ch(l):P!==null?(P.return=m,re=P):ch(l);for(;h!==null;)re=h,ah(h),h=h.sibling;re=l,Ra=x,kt=D}lh(e)}else(l.subtreeFlags&8772)!==0&&h!==null?(h.return=l,re=h):lh(e)}}function lh(e){for(;re!==null;){var n=re;if((n.flags&8772)!==0){var r=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:kt||ja(5,n);break;case 1:var s=n.stateNode;if(n.flags&4&&!kt)if(r===null)s.componentDidMount();else{var l=n.elementType===n.type?r.memoizedProps:gn(n.type,r.memoizedProps);s.componentDidUpdate(l,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var h=n.updateQueue;h!==null&&uc(n,h,s);break;case 3:var m=n.updateQueue;if(m!==null){if(r=null,n.child!==null)switch(n.child.tag){case 5:r=n.child.stateNode;break;case 1:r=n.child.stateNode}uc(n,m,r)}break;case 5:var x=n.stateNode;if(r===null&&n.flags&4){r=x;var P=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&r.focus();break;case"img":P.src&&(r.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var D=n.alternate;if(D!==null){var V=D.memoizedState;if(V!==null){var K=V.dehydrated;K!==null&&bt(K)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(u(163))}kt||n.flags&512&&lu(n)}catch(G){Ye(n,n.return,G)}}if(n===e){re=null;break}if(r=n.sibling,r!==null){r.return=n.return,re=r;break}re=n.return}}function uh(e){for(;re!==null;){var n=re;if(n===e){re=null;break}var r=n.sibling;if(r!==null){r.return=n.return,re=r;break}re=n.return}}function ch(e){for(;re!==null;){var n=re;try{switch(n.tag){case 0:case 11:case 15:var r=n.return;try{ja(4,n)}catch(P){Ye(n,r,P)}break;case 1:var s=n.stateNode;if(typeof s.componentDidMount=="function"){var l=n.return;try{s.componentDidMount()}catch(P){Ye(n,l,P)}}var h=n.return;try{lu(n)}catch(P){Ye(n,h,P)}break;case 5:var m=n.return;try{lu(n)}catch(P){Ye(n,m,P)}}}catch(P){Ye(n,n.return,P)}if(n===e){re=null;break}var x=n.sibling;if(x!==null){x.return=n.return,re=x;break}re=n.return}}var Of=Math.ceil,Da=ee.ReactCurrentDispatcher,hu=ee.ReactCurrentOwner,an=ee.ReactCurrentBatchConfig,Ne=0,ht=null,nt=null,mt=0,qt=0,mo=Mi(0),ut=0,_s=null,yr=0,Aa=0,fu=0,vs=null,Dt=null,du=0,go=1/0,ni=null,Ba=!1,pu=null,Di=null,Fa=!1,Ai=null,Za=0,ys=0,mu=null,Ua=-1,ba=0;function zt(){return(Ne&6)!==0?$e():Ua!==-1?Ua:Ua=$e()}function Bi(e){return(e.mode&1)===0?1:(Ne&2)!==0&&mt!==0?mt&-mt:mf.transition!==null?(ba===0&&(ba=Gs()),ba):(e=Me,e!==0||(e=window.event,e=e===void 0?16:Te(e.type)),e)}function yn(e,n,r,s){if(50<ys)throw ys=0,mu=null,Error(u(185));Zt(e,r,s),((Ne&2)===0||e!==ht)&&(e===ht&&((Ne&2)===0&&(Aa|=r),ut===4&&Fi(e,mt)),At(e,s),r===1&&Ne===0&&(n.mode&1)===0&&(go=$e()+500,ga&&Oi()))}function At(e,n){var r=e.callbackNode;jr(e,n);var s=be(e,e===ht?mt:0);if(s===0)r!==null&&Ro(r),e.callbackNode=null,e.callbackPriority=0;else if(n=s&-s,e.callbackPriority!==n){if(r!=null&&Ro(r),n===1)e.tag===0?pf(fh.bind(null,e)):Ju(fh.bind(null,e)),wt(function(){(Ne&6)===0&&Oi()}),r=null;else{switch(di(s)){case 1:r=jo;break;case 4:r=Ws;break;case 16:r=Ir;break;case 536870912:r=ui;break;default:r=Ir}r=wh(r,hh.bind(null,e))}e.callbackPriority=n,e.callbackNode=r}}function hh(e,n){if(Ua=-1,ba=0,(Ne&6)!==0)throw Error(u(327));var r=e.callbackNode;if(_o()&&e.callbackNode!==r)return null;var s=be(e,e===ht?mt:0);if(s===0)return null;if((s&30)!==0||(s&e.expiredLanes)!==0||n)n=Ha(e,s);else{n=s;var l=Ne;Ne|=2;var h=ph();(ht!==e||mt!==n)&&(ni=null,go=$e()+500,xr(e,n));do try{jf();break}catch(x){dh(e,x)}while(!0);Il(),Da.current=h,Ne=l,nt!==null?n=0:(ht=null,mt=0,n=ut)}if(n!==0){if(n===2&&(l=vt(e),l!==0&&(s=l,n=gu(e,l))),n===1)throw r=_s,xr(e,0),Fi(e,s),At(e,$e()),r;if(n===6)Fi(e,s);else{if(l=e.current.alternate,(s&30)===0&&!If(l)&&(n=Ha(e,s),n===2&&(h=vt(e),h!==0&&(s=h,n=gu(e,h))),n===1))throw r=_s,xr(e,0),Fi(e,s),At(e,$e()),r;switch(e.finishedWork=l,e.finishedLanes=s,n){case 0:case 1:throw Error(u(345));case 2:Sr(e,Dt,ni);break;case 3:if(Fi(e,s),(s&130023424)===s&&(n=du+500-$e(),10<n)){if(be(e,0)!==0)break;if(l=e.suspendedLanes,(l&s)!==s){zt(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=at(Sr.bind(null,e,Dt,ni),n);break}Sr(e,Dt,ni);break;case 4:if(Fi(e,s),(s&4194240)===s)break;for(n=e.eventTimes,l=-1;0<s;){var m=31-ke(s);h=1<<m,m=n[m],m>l&&(l=m),s&=~h}if(s=l,s=$e()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Of(s/1960))-s,10<s){e.timeoutHandle=at(Sr.bind(null,e,Dt,ni),s);break}Sr(e,Dt,ni);break;case 5:Sr(e,Dt,ni);break;default:throw Error(u(329))}}}return At(e,$e()),e.callbackNode===r?hh.bind(null,e):null}function gu(e,n){var r=vs;return e.current.memoizedState.isDehydrated&&(xr(e,n).flags|=256),e=Ha(e,n),e!==2&&(n=Dt,Dt=r,n!==null&&_u(n)),e}function _u(e){Dt===null?Dt=e:Dt.push.apply(Dt,e)}function If(e){for(var n=e;;){if(n.flags&16384){var r=n.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var l=r[s],h=l.getSnapshot;l=l.value;try{if(!Gt(h(),l))return!1}catch{return!1}}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Fi(e,n){for(n&=~fu,n&=~Aa,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var r=31-ke(n),s=1<<r;e[r]=-1,n&=~s}}function fh(e){if((Ne&6)!==0)throw Error(u(327));_o();var n=be(e,0);if((n&1)===0)return At(e,$e()),null;var r=Ha(e,n);if(e.tag!==0&&r===2){var s=vt(e);s!==0&&(n=s,r=gu(e,s))}if(r===1)throw r=_s,xr(e,0),Fi(e,n),At(e,$e()),r;if(r===6)throw Error(u(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,Sr(e,Dt,ni),At(e,$e()),null}function vu(e,n){var r=Ne;Ne|=1;try{return e(n)}finally{Ne=r,Ne===0&&(go=$e()+500,ga&&Oi())}}function wr(e){Ai!==null&&Ai.tag===0&&(Ne&6)===0&&_o();var n=Ne;Ne|=1;var r=an.transition,s=Me;try{if(an.transition=null,Me=1,e)return e()}finally{Me=s,an.transition=r,Ne=n,(Ne&6)===0&&Oi()}}function yu(){qt=mo.current,Ge(mo)}function xr(e,n){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,tt(r)),nt!==null)for(r=nt.return;r!==null;){var s=r;switch(Tl(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&pa();break;case 3:ho(),Ge(It),Ge(xt),Ul();break;case 5:Fl(s);break;case 4:ho();break;case 13:Ge(qe);break;case 19:Ge(qe);break;case 10:Rl(s.type._context);break;case 22:case 23:yu()}r=r.return}if(ht=e,nt=e=Zi(e.current,null),mt=qt=n,ut=0,_s=null,fu=Aa=yr=0,Dt=vs=null,gr!==null){for(n=0;n<gr.length;n++)if(r=gr[n],s=r.interleaved,s!==null){r.interleaved=null;var l=s.next,h=r.pending;if(h!==null){var m=h.next;h.next=l,s.next=m}r.pending=s}gr=null}return e}function dh(e,n){do{var r=nt;try{if(Il(),Ca.current=Ma,Ea){for(var s=Qe.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}Ea=!1}if(vr=0,ct=lt=Qe=null,hs=!1,fs=0,hu.current=null,r===null||r.return===null){ut=1,_s=n,nt=null;break}e:{var h=e,m=r.return,x=r,P=n;if(n=mt,x.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var D=P,V=x,K=V.tag;if((V.mode&1)===0&&(K===0||K===11||K===15)){var G=V.alternate;G?(V.updateQueue=G.updateQueue,V.memoizedState=G.memoizedState,V.lanes=G.lanes):(V.updateQueue=null,V.memoizedState=null)}var te=Bc(m);if(te!==null){te.flags&=-257,Fc(te,m,x,h,n),te.mode&1&&Ac(h,D,n),n=te,P=D;var oe=n.updateQueue;if(oe===null){var ae=new Set;ae.add(P),n.updateQueue=ae}else oe.add(P);break e}else{if((n&1)===0){Ac(h,D,n),wu();break e}P=Error(u(426))}}else if(Ve&&x.mode&1){var Xe=Bc(m);if(Xe!==null){(Xe.flags&65536)===0&&(Xe.flags|=256),Fc(Xe,m,x,h,n),Nl(fo(P,x));break e}}h=P=fo(P,x),ut!==4&&(ut=2),vs===null?vs=[h]:vs.push(h),h=m;do{switch(h.tag){case 3:h.flags|=65536,n&=-n,h.lanes|=n;var O=jc(h,P,n);lc(h,O);break e;case 1:x=P;var T=h.type,I=h.stateNode;if((h.flags&128)===0&&(typeof T.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Di===null||!Di.has(I)))){h.flags|=65536,n&=-n,h.lanes|=n;var Q=Dc(h,x,n);lc(h,Q);break e}}h=h.return}while(h!==null)}gh(r)}catch(ce){n=ce,nt===r&&r!==null&&(nt=r=r.return);continue}break}while(!0)}function ph(){var e=Da.current;return Da.current=Ma,e===null?Ma:e}function wu(){(ut===0||ut===3||ut===2)&&(ut=4),ht===null||(yr&268435455)===0&&(Aa&268435455)===0||Fi(ht,mt)}function Ha(e,n){var r=Ne;Ne|=2;var s=ph();(ht!==e||mt!==n)&&(ni=null,xr(e,n));do try{Rf();break}catch(l){dh(e,l)}while(!0);if(Il(),Ne=r,Da.current=s,nt!==null)throw Error(u(261));return ht=null,mt=0,ut}function Rf(){for(;nt!==null;)mh(nt)}function jf(){for(;nt!==null&&!al();)mh(nt)}function mh(e){var n=yh(e.alternate,e,qt);e.memoizedProps=e.pendingProps,n===null?gh(e):nt=n,hu.current=null}function gh(e){var n=e;do{var r=n.alternate;if(e=n.return,(n.flags&32768)===0){if(r=Ef(r,n,qt),r!==null){nt=r;return}}else{if(r=Tf(r,n),r!==null){r.flags&=32767,nt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ut=6,nt=null;return}}if(n=n.sibling,n!==null){nt=n;return}nt=n=e}while(n!==null);ut===0&&(ut=5)}function Sr(e,n,r){var s=Me,l=an.transition;try{an.transition=null,Me=1,Df(e,n,r,s)}finally{an.transition=l,Me=s}return null}function Df(e,n,r,s){do _o();while(Ai!==null);if((Ne&6)!==0)throw Error(u(327));r=e.finishedWork;var l=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(u(177));e.callbackNode=null,e.callbackPriority=0;var h=r.lanes|r.childLanes;if(Je(e,h),e===ht&&(nt=ht=null,mt=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||Fa||(Fa=!0,wh(Ir,function(){return _o(),null})),h=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||h){h=an.transition,an.transition=null;var m=Me;Me=1;var x=Ne;Ne|=4,hu.current=null,Mf(e,r),sh(r,e),Xt(pe),or=!!Y,pe=Y=null,e.current=r,Nf(r),Or(),Ne=x,Me=m,an.transition=h}else e.current=r;if(Fa&&(Fa=!1,Ai=e,Za=l),h=e.pendingLanes,h===0&&(Di=null),er(r.stateNode),At(e,$e()),n!==null)for(s=e.onRecoverableError,r=0;r<n.length;r++)l=n[r],s(l.value,{componentStack:l.stack,digest:l.digest});if(Ba)throw Ba=!1,e=pu,pu=null,e;return(Za&1)!==0&&e.tag!==0&&_o(),h=e.pendingLanes,(h&1)!==0?e===mu?ys++:(ys=0,mu=e):ys=0,Oi(),null}function _o(){if(Ai!==null){var e=di(Za),n=an.transition,r=Me;try{if(an.transition=null,Me=16>e?16:e,Ai===null)var s=!1;else{if(e=Ai,Ai=null,Za=0,(Ne&6)!==0)throw Error(u(331));var l=Ne;for(Ne|=4,re=e.current;re!==null;){var h=re,m=h.child;if((re.flags&16)!==0){var x=h.deletions;if(x!==null){for(var P=0;P<x.length;P++){var D=x[P];for(re=D;re!==null;){var V=re;switch(V.tag){case 0:case 11:case 15:gs(8,V,h)}var K=V.child;if(K!==null)K.return=V,re=K;else for(;re!==null;){V=re;var G=V.sibling,te=V.return;if(th(V),V===D){re=null;break}if(G!==null){G.return=te,re=G;break}re=te}}}var oe=h.alternate;if(oe!==null){var ae=oe.child;if(ae!==null){oe.child=null;do{var Xe=ae.sibling;ae.sibling=null,ae=Xe}while(ae!==null)}}re=h}}if((h.subtreeFlags&2064)!==0&&m!==null)m.return=h,re=m;else e:for(;re!==null;){if(h=re,(h.flags&2048)!==0)switch(h.tag){case 0:case 11:case 15:gs(9,h,h.return)}var O=h.sibling;if(O!==null){O.return=h.return,re=O;break e}re=h.return}}var T=e.current;for(re=T;re!==null;){m=re;var I=m.child;if((m.subtreeFlags&2064)!==0&&I!==null)I.return=m,re=I;else e:for(m=T;re!==null;){if(x=re,(x.flags&2048)!==0)try{switch(x.tag){case 0:case 11:case 15:ja(9,x)}}catch(ce){Ye(x,x.return,ce)}if(x===m){re=null;break e}var Q=x.sibling;if(Q!==null){Q.return=x.return,re=Q;break e}re=x.return}}if(Ne=l,Oi(),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(Xi,e)}catch{}s=!0}return s}finally{Me=r,an.transition=n}}return!1}function _h(e,n,r){n=fo(r,n),n=jc(e,n,1),e=Ri(e,n,1),n=zt(),e!==null&&(Zt(e,1,n),At(e,n))}function Ye(e,n,r){if(e.tag===3)_h(e,e,r);else for(;n!==null;){if(n.tag===3){_h(n,e,r);break}else if(n.tag===1){var s=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Di===null||!Di.has(s))){e=fo(r,e),e=Dc(n,e,1),n=Ri(n,e,1),e=zt(),n!==null&&(Zt(n,1,e),At(n,e));break}}n=n.return}}function Af(e,n,r){var s=e.pingCache;s!==null&&s.delete(n),n=zt(),e.pingedLanes|=e.suspendedLanes&r,ht===e&&(mt&r)===r&&(ut===4||ut===3&&(mt&130023424)===mt&&500>$e()-du?xr(e,0):fu|=r),At(e,n)}function vh(e,n){n===0&&((e.mode&1)===0?n=1:(n=hi,hi<<=1,(hi&130023424)===0&&(hi=4194304)));var r=zt();e=Xn(e,n),e!==null&&(Zt(e,n,r),At(e,r))}function Bf(e){var n=e.memoizedState,r=0;n!==null&&(r=n.retryLane),vh(e,r)}function Ff(e,n){var r=0;switch(e.tag){case 13:var s=e.stateNode,l=e.memoizedState;l!==null&&(r=l.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(u(314))}s!==null&&s.delete(n),vh(e,r)}var yh;yh=function(e,n,r){if(e!==null)if(e.memoizedProps!==n.pendingProps||It.current)jt=!0;else{if((e.lanes&r)===0&&(n.flags&128)===0)return jt=!1,Cf(e,n,r);jt=(e.flags&131072)!==0}else jt=!1,Ve&&(n.flags&1048576)!==0&&Yu(n,va,n.index);switch(n.lanes=0,n.tag){case 2:var s=n.type;Ia(e,n),e=n.pendingProps;var l=ro(n,xt.current);co(n,r),l=Wl(null,n,s,e,l,r);var h=Gl();return n.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Rt(s)?(h=!0,ma(n)):h=!1,n.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,Al(n),l.updater=Na,n.stateNode=l,l._reactInternals=n,Jl(n,s,e,r),n=tu(null,n,s,!0,h,r)):(n.tag=0,Ve&&h&&El(n),Tt(null,n,l,r),n=n.child),n;case 16:s=n.elementType;e:{switch(Ia(e,n),e=n.pendingProps,l=s._init,s=l(s._payload),n.type=s,l=n.tag=Uf(s),e=gn(s,e),l){case 0:n=eu(null,n,s,e,r);break e;case 1:n=Gc(null,n,s,e,r);break e;case 11:n=Zc(null,n,s,e,r);break e;case 14:n=Uc(null,n,s,gn(s.type,e),r);break e}throw Error(u(306,s,""))}return n;case 0:return s=n.type,l=n.pendingProps,l=n.elementType===s?l:gn(s,l),eu(e,n,s,l,r);case 1:return s=n.type,l=n.pendingProps,l=n.elementType===s?l:gn(s,l),Gc(e,n,s,l,r);case 3:e:{if(Vc(n),e===null)throw Error(u(387));s=n.pendingProps,h=n.memoizedState,l=h.element,ac(e,n),ka(n,s,null,r);var m=n.memoizedState;if(s=m.element,h.isDehydrated)if(h={element:s,isDehydrated:!1,cache:m.cache,pendingSuspenseBoundaries:m.pendingSuspenseBoundaries,transitions:m.transitions},n.updateQueue.baseState=h,n.memoizedState=h,n.flags&256){l=fo(Error(u(423)),n),n=$c(e,n,s,r,l);break e}else if(s!==l){l=fo(Error(u(424)),n),n=$c(e,n,s,r,l);break e}else for(Kt=zn(n.stateNode.containerInfo.firstChild),$t=n,Ve=!0,mn=null,r=oc(n,null,s,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ao(),s===l){n=ti(e,n,r);break e}Tt(e,n,s,r)}n=n.child}return n;case 5:return cc(n),e===null&&Ml(n),s=n.type,l=n.pendingProps,h=e!==null?e.memoizedProps:null,m=l.children,Le(s,l)?m=null:h!==null&&Le(s,h)&&(n.flags|=32),Wc(e,n),Tt(e,n,m,r),n.child;case 6:return e===null&&Ml(n),null;case 13:return Kc(e,n,r);case 4:return Bl(n,n.stateNode.containerInfo),s=n.pendingProps,e===null?n.child=lo(n,null,s,r):Tt(e,n,s,r),n.child;case 11:return s=n.type,l=n.pendingProps,l=n.elementType===s?l:gn(s,l),Zc(e,n,s,l,r);case 7:return Tt(e,n,n.pendingProps,r),n.child;case 8:return Tt(e,n,n.pendingProps.children,r),n.child;case 12:return Tt(e,n,n.pendingProps.children,r),n.child;case 10:e:{if(s=n.type._context,l=n.pendingProps,h=n.memoizedProps,m=l.value,He(xa,s._currentValue),s._currentValue=m,h!==null)if(Gt(h.value,m)){if(h.children===l.children&&!It.current){n=ti(e,n,r);break e}}else for(h=n.child,h!==null&&(h.return=n);h!==null;){var x=h.dependencies;if(x!==null){m=h.child;for(var P=x.firstContext;P!==null;){if(P.context===s){if(h.tag===1){P=ei(-1,r&-r),P.tag=2;var D=h.updateQueue;if(D!==null){D=D.shared;var V=D.pending;V===null?P.next=P:(P.next=V.next,V.next=P),D.pending=P}}h.lanes|=r,P=h.alternate,P!==null&&(P.lanes|=r),jl(h.return,r,n),x.lanes|=r;break}P=P.next}}else if(h.tag===10)m=h.type===n.type?null:h.child;else if(h.tag===18){if(m=h.return,m===null)throw Error(u(341));m.lanes|=r,x=m.alternate,x!==null&&(x.lanes|=r),jl(m,r,n),m=h.sibling}else m=h.child;if(m!==null)m.return=h;else for(m=h;m!==null;){if(m===n){m=null;break}if(h=m.sibling,h!==null){h.return=m.return,m=h;break}m=m.return}h=m}Tt(e,n,l.children,r),n=n.child}return n;case 9:return l=n.type,s=n.pendingProps.children,co(n,r),l=on(l),s=s(l),n.flags|=1,Tt(e,n,s,r),n.child;case 14:return s=n.type,l=gn(s,n.pendingProps),l=gn(s.type,l),Uc(e,n,s,l,r);case 15:return bc(e,n,n.type,n.pendingProps,r);case 17:return s=n.type,l=n.pendingProps,l=n.elementType===s?l:gn(s,l),Ia(e,n),n.tag=1,Rt(s)?(e=!0,ma(n)):e=!1,co(n,r),Ic(n,s,l),Jl(n,s,l,r),tu(null,n,s,!0,e,r);case 19:return Qc(e,n,r);case 22:return Hc(e,n,r)}throw Error(u(156,n.tag))};function wh(e,n){return Hs(e,n)}function Zf(e,n,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ln(e,n,r,s){return new Zf(e,n,r,s)}function xu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Uf(e){if(typeof e=="function")return xu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ye)return 11;if(e===gt)return 14}return 2}function Zi(e,n){var r=e.alternate;return r===null?(r=ln(e.tag,n,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=n,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,n=e.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Wa(e,n,r,s,l,h){var m=2;if(s=e,typeof e=="function")xu(e)&&(m=1);else if(typeof e=="string")m=5;else e:switch(e){case ge:return Pr(r.children,l,h,n);case Be:m=8,l|=8;break;case ot:return e=ln(12,r,n,l|2),e.elementType=ot,e.lanes=h,e;case De:return e=ln(13,r,n,l),e.elementType=De,e.lanes=h,e;case Oe:return e=ln(19,r,n,l),e.elementType=Oe,e.lanes=h,e;case Re:return Ga(r,l,h,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Mt:m=10;break e;case Pe:m=9;break e;case ye:m=11;break e;case gt:m=14;break e;case Ie:m=16,s=null;break e}throw Error(u(130,e==null?e:typeof e,""))}return n=ln(m,r,n,l),n.elementType=e,n.type=s,n.lanes=h,n}function Pr(e,n,r,s){return e=ln(7,e,s,n),e.lanes=r,e}function Ga(e,n,r,s){return e=ln(22,e,s,n),e.elementType=Re,e.lanes=r,e.stateNode={isHidden:!1},e}function Su(e,n,r){return e=ln(6,e,null,n),e.lanes=r,e}function Pu(e,n,r){return n=ln(4,e.children!==null?e.children:[],e.key,n),n.lanes=r,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function bf(e,n,r,s,l){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fi(0),this.expirationTimes=fi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fi(0),this.identifierPrefix=s,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function ku(e,n,r,s,l,h,m,x,P){return e=new bf(e,n,r,x,P),n===1?(n=1,h===!0&&(n|=8)):n=0,h=ln(3,null,null,n),e.current=h,h.stateNode=e,h.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Al(h),e}function Hf(e,n,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:X,key:s==null?null:""+s,children:e,containerInfo:n,implementation:r}}function xh(e){if(!e)return Ni;e=e._reactInternals;e:{if(xn(e)!==e||e.tag!==1)throw Error(u(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Rt(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(u(171))}if(e.tag===1){var r=e.type;if(Rt(r))return qu(e,r,n)}return n}function Sh(e,n,r,s,l,h,m,x,P){return e=ku(r,s,!0,e,l,h,m,x,P),e.context=xh(null),r=e.current,s=zt(),l=Bi(r),h=ei(s,l),h.callback=n??null,Ri(r,h,l),e.current.lanes=l,Zt(e,l,s),At(e,s),e}function Va(e,n,r,s){var l=n.current,h=zt(),m=Bi(l);return r=xh(r),n.context===null?n.context=r:n.pendingContext=r,n=ei(h,m),n.payload={element:e},s=s===void 0?null:s,s!==null&&(n.callback=s),e=Ri(l,n,m),e!==null&&(yn(e,l,m,h),Pa(e,l,m)),m}function $a(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ph(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<n?r:n}}function Lu(e,n){Ph(e,n),(e=e.alternate)&&Ph(e,n)}function Wf(){return null}var kh=typeof reportError=="function"?reportError:function(e){console.error(e)};function Cu(e){this._internalRoot=e}Ka.prototype.render=Cu.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(u(409));Va(e,n,null,null)},Ka.prototype.unmount=Cu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;wr(function(){Va(null,e,null,null)}),n[Ae]=null}};function Ka(e){this._internalRoot=e}Ka.prototype.unstable_scheduleHydration=function(e){if(e){var n=Br();e={blockedOn:null,target:e,priority:n};for(var r=0;r<st.length&&n!==0&&n<st[r].priority;r++);st.splice(r,0,e),r===0&&Fr(e)}};function Eu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function qa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Lh(){}function Gf(e,n,r,s,l){if(l){if(typeof s=="function"){var h=s;s=function(){var D=$a(m);h.call(D)}}var m=Sh(n,s,e,0,null,!1,!1,"",Lh);return e._reactRootContainer=m,e[Ae]=m.current,Ci(e.nodeType===8?e.parentNode:e),wr(),m}for(;l=e.lastChild;)e.removeChild(l);if(typeof s=="function"){var x=s;s=function(){var D=$a(P);x.call(D)}}var P=ku(e,0,!1,null,null,!1,!1,"",Lh);return e._reactRootContainer=P,e[Ae]=P.current,Ci(e.nodeType===8?e.parentNode:e),wr(function(){Va(n,P,r,s)}),P}function Qa(e,n,r,s,l){var h=r._reactRootContainer;if(h){var m=h;if(typeof l=="function"){var x=l;l=function(){var P=$a(m);x.call(P)}}Va(n,m,e,l)}else m=Gf(r,n,e,l,s);return $a(m)}Dr=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var r=Se(n.pendingLanes);r!==0&&(cn(n,r|1),At(n,$e()),(Ne&6)===0&&(go=$e()+500,Oi()))}break;case 13:wr(function(){var s=Xn(e,1);if(s!==null){var l=zt();yn(s,e,1,l)}}),Lu(e,1)}},Bn=function(e){if(e.tag===13){var n=Xn(e,134217728);if(n!==null){var r=zt();yn(n,e,134217728,r)}Lu(e,134217728)}},Ar=function(e){if(e.tag===13){var n=Bi(e),r=Xn(e,n);if(r!==null){var s=zt();yn(r,e,n,s)}Lu(e,n)}},Br=function(){return Me},tr=function(e,n){var r=Me;try{return Me=e,n()}finally{Me=r}},zr=function(e,n,r){switch(n){case"input":if($i(e,r),n=r.name,r.type==="radio"&&n!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<r.length;n++){var s=r[n];if(s!==e&&s.form===e.form){var l=no(s);if(!l)throw Error(u(90));ri(s),$i(s,l)}}}break;case"textarea":Ms(e,r);break;case"select":n=r.value,n!=null&&wn(e,!!r.multiple,n,!1)}},As=vu,Bs=wr;var Vf={usingClientEntryPoint:!1,Events:[Kn,qn,no,js,Ds,vu]},ws={findFiberByHostInstance:$n,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$f={bundleType:ws.bundleType,version:ws.version,rendererPackageName:ws.rendererPackageName,rendererConfig:ws.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ee.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Us(e),e===null?null:e.stateNode},findFiberByHostInstance:ws.findFiberByHostInstance||Wf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ja=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ja.isDisabled&&Ja.supportsFiber)try{Xi=Ja.inject($f),Ft=Ja}catch{}}return Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vf,Bt.createPortal=function(e,n){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Eu(n))throw Error(u(200));return Hf(e,n,null,r)},Bt.createRoot=function(e,n){if(!Eu(e))throw Error(u(299));var r=!1,s="",l=kh;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),n=ku(e,1,!1,null,null,r,!1,s,l),e[Ae]=n.current,Ci(e.nodeType===8?e.parentNode:e),new Cu(n)},Bt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(u(188)):(e=Object.keys(e).join(","),Error(u(268,e)));return e=Us(n),e=e===null?null:e.stateNode,e},Bt.flushSync=function(e){return wr(e)},Bt.hydrate=function(e,n,r){if(!qa(n))throw Error(u(200));return Qa(null,e,n,!0,r)},Bt.hydrateRoot=function(e,n,r){if(!Eu(e))throw Error(u(405));var s=r!=null&&r.hydratedSources||null,l=!1,h="",m=kh;if(r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onRecoverableError!==void 0&&(m=r.onRecoverableError)),n=Sh(n,null,e,1,r??null,l,!1,h,m),e[Ae]=n.current,Ci(e),s)for(e=0;e<s.length;e++)r=s[e],l=r._getVersion,l=l(r._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[r,l]:n.mutableSourceEagerHydrationData.push(r,l);return new Ka(n)},Bt.render=function(e,n,r){if(!qa(n))throw Error(u(200));return Qa(null,e,n,!1,r)},Bt.unmountComponentAtNode=function(e){if(!qa(e))throw Error(u(40));return e._reactRootContainer?(wr(function(){Qa(null,null,e,!1,function(){e._reactRootContainer=null,e[Ae]=null})}),!0):!1},Bt.unstable_batchedUpdates=vu,Bt.unstable_renderSubtreeIntoContainer=function(e,n,r,s){if(!qa(r))throw Error(u(200));if(e==null||e._reactInternals===void 0)throw Error(u(38));return Qa(e,n,r,!1,s)},Bt.version="18.3.1-next-f1338f8080-20240426",Bt}var Ih;function Vh(){if(Ih)return Mu.exports;Ih=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(c){console.error(c)}}return d(),Mu.exports=rd(),Mu.exports}var Rh;function od(){if(Rh)return Xa;Rh=1;var d=Vh();return Xa.createRoot=d.createRoot,Xa.hydrateRoot=d.hydrateRoot,Xa}var sd=od();const ad=Zu(sd);var ld=Vh();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ks(){return ks=Object.assign?Object.assign.bind():function(d){for(var c=1;c<arguments.length;c++){var u=arguments[c];for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&(d[p]=u[p])}return d},ks.apply(this,arguments)}var bi;(function(d){d.Pop="POP",d.Push="PUSH",d.Replace="REPLACE"})(bi||(bi={}));const jh="popstate";function ud(d){d===void 0&&(d={});function c(p,g){let{pathname:y,search:w,hash:C}=p.location;return Du("",{pathname:y,search:w,hash:C},g.state&&g.state.usr||null,g.state&&g.state.key||"default")}function u(p,g){return typeof g=="string"?g:tl(g)}return hd(c,u,null,d)}function et(d,c){if(d===!1||d===null||typeof d>"u")throw new Error(c)}function $h(d,c){if(!d){typeof console<"u"&&console.warn(c);try{throw new Error(c)}catch{}}}function cd(){return Math.random().toString(36).substr(2,8)}function Dh(d,c){return{usr:d.state,key:d.key,idx:c}}function Du(d,c,u,p){return u===void 0&&(u=null),ks({pathname:typeof d=="string"?d:d.pathname,search:"",hash:""},typeof c=="string"?vo(c):c,{state:u,key:c&&c.key||p||cd()})}function tl(d){let{pathname:c="/",search:u="",hash:p=""}=d;return u&&u!=="?"&&(c+=u.charAt(0)==="?"?u:"?"+u),p&&p!=="#"&&(c+=p.charAt(0)==="#"?p:"#"+p),c}function vo(d){let c={};if(d){let u=d.indexOf("#");u>=0&&(c.hash=d.substr(u),d=d.substr(0,u));let p=d.indexOf("?");p>=0&&(c.search=d.substr(p),d=d.substr(0,p)),d&&(c.pathname=d)}return c}function hd(d,c,u,p){p===void 0&&(p={});let{window:g=document.defaultView,v5Compat:y=!1}=p,w=g.history,C=bi.Pop,k=null,z=B();z==null&&(z=0,w.replaceState(ks({},w.state,{idx:z}),""));function B(){return(w.state||{idx:null}).idx}function N(){C=bi.Pop;let A=B(),q=A==null?null:A-z;z=A,k&&k({action:C,location:H.location,delta:q})}function W(A,q){C=bi.Push;let ne=Du(H.location,A,q);z=B()+1;let J=Dh(ne,z),ee=H.createHref(ne);try{w.pushState(J,"",ee)}catch(me){if(me instanceof DOMException&&me.name==="DataCloneError")throw me;g.location.assign(ee)}y&&k&&k({action:C,location:H.location,delta:1})}function $(A,q){C=bi.Replace;let ne=Du(H.location,A,q);z=B();let J=Dh(ne,z),ee=H.createHref(ne);w.replaceState(J,"",ee),y&&k&&k({action:C,location:H.location,delta:0})}function se(A){let q=g.location.origin!=="null"?g.location.origin:g.location.href,ne=typeof A=="string"?A:tl(A);return ne=ne.replace(/ $/,"%20"),et(q,"No window.location.(origin|href) available to create URL for href: "+ne),new URL(ne,q)}let H={get action(){return C},get location(){return d(g,w)},listen(A){if(k)throw new Error("A history only accepts one active listener");return g.addEventListener(jh,N),k=A,()=>{g.removeEventListener(jh,N),k=null}},createHref(A){return c(g,A)},createURL:se,encodeLocation(A){let q=se(A);return{pathname:q.pathname,search:q.search,hash:q.hash}},push:W,replace:$,go(A){return w.go(A)}};return H}var Ah;(function(d){d.data="data",d.deferred="deferred",d.redirect="redirect",d.error="error"})(Ah||(Ah={}));function fd(d,c,u){return u===void 0&&(u="/"),dd(d,c,u)}function dd(d,c,u,p){let g=typeof c=="string"?vo(c):c,y=bu(g.pathname||"/",u);if(y==null)return null;let w=Kh(d);pd(w);let C=null;for(let k=0;C==null&&k<w.length;++k){let z=Cd(y);C=Pd(w[k],z)}return C}function Kh(d,c,u,p){c===void 0&&(c=[]),u===void 0&&(u=[]),p===void 0&&(p="");let g=(y,w,C)=>{let k={relativePath:C===void 0?y.path||"":C,caseSensitive:y.caseSensitive===!0,childrenIndex:w,route:y};k.relativePath.startsWith("/")&&(et(k.relativePath.startsWith(p),'Absolute route path "'+k.relativePath+'" nested under path '+('"'+p+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),k.relativePath=k.relativePath.slice(p.length));let z=Hi([p,k.relativePath]),B=u.concat(k);y.children&&y.children.length>0&&(et(y.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+z+'".')),Kh(y.children,c,B,z)),!(y.path==null&&!y.index)&&c.push({path:z,score:xd(z,y.index),routesMeta:B})};return d.forEach((y,w)=>{var C;if(y.path===""||!((C=y.path)!=null&&C.includes("?")))g(y,w);else for(let k of qh(y.path))g(y,w,k)}),c}function qh(d){let c=d.split("/");if(c.length===0)return[];let[u,...p]=c,g=u.endsWith("?"),y=u.replace(/\?$/,"");if(p.length===0)return g?[y,""]:[y];let w=qh(p.join("/")),C=[];return C.push(...w.map(k=>k===""?y:[y,k].join("/"))),g&&C.push(...w),C.map(k=>d.startsWith("/")&&k===""?"/":k)}function pd(d){d.sort((c,u)=>c.score!==u.score?u.score-c.score:Sd(c.routesMeta.map(p=>p.childrenIndex),u.routesMeta.map(p=>p.childrenIndex)))}const md=/^:[\w-]+$/,gd=3,_d=2,vd=1,yd=10,wd=-2,Bh=d=>d==="*";function xd(d,c){let u=d.split("/"),p=u.length;return u.some(Bh)&&(p+=wd),c&&(p+=_d),u.filter(g=>!Bh(g)).reduce((g,y)=>g+(md.test(y)?gd:y===""?vd:yd),p)}function Sd(d,c){return d.length===c.length&&d.slice(0,-1).every((p,g)=>p===c[g])?d[d.length-1]-c[c.length-1]:0}function Pd(d,c,u){let{routesMeta:p}=d,g={},y="/",w=[];for(let C=0;C<p.length;++C){let k=p[C],z=C===p.length-1,B=y==="/"?c:c.slice(y.length)||"/",N=kd({path:k.relativePath,caseSensitive:k.caseSensitive,end:z},B),W=k.route;if(!N)return null;Object.assign(g,N.params),w.push({params:g,pathname:Hi([y,N.pathname]),pathnameBase:Md(Hi([y,N.pathnameBase])),route:W}),N.pathnameBase!=="/"&&(y=Hi([y,N.pathnameBase]))}return w}function kd(d,c){typeof d=="string"&&(d={path:d,caseSensitive:!1,end:!0});let[u,p]=Ld(d.path,d.caseSensitive,d.end),g=c.match(u);if(!g)return null;let y=g[0],w=y.replace(/(.)\/+$/,"$1"),C=g.slice(1);return{params:p.reduce((z,B,N)=>{let{paramName:W,isOptional:$}=B;if(W==="*"){let H=C[N]||"";w=y.slice(0,y.length-H.length).replace(/(.)\/+$/,"$1")}const se=C[N];return $&&!se?z[W]=void 0:z[W]=(se||"").replace(/%2F/g,"/"),z},{}),pathname:y,pathnameBase:w,pattern:d}}function Ld(d,c,u){c===void 0&&(c=!1),u===void 0&&(u=!0),$h(d==="*"||!d.endsWith("*")||d.endsWith("/*"),'Route path "'+d+'" will be treated as if it were '+('"'+d.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+d.replace(/\*$/,"/*")+'".'));let p=[],g="^"+d.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(w,C,k)=>(p.push({paramName:C,isOptional:k!=null}),k?"/?([^\\/]+)?":"/([^\\/]+)"));return d.endsWith("*")?(p.push({paramName:"*"}),g+=d==="*"||d==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):u?g+="\\/*$":d!==""&&d!=="/"&&(g+="(?:(?=\\/|$))"),[new RegExp(g,c?void 0:"i"),p]}function Cd(d){try{return d.split("/").map(c=>decodeURIComponent(c).replace(/\//g,"%2F")).join("/")}catch(c){return $h(!1,'The URL path "'+d+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+c+").")),d}}function bu(d,c){if(c==="/")return d;if(!d.toLowerCase().startsWith(c.toLowerCase()))return null;let u=c.endsWith("/")?c.length-1:c.length,p=d.charAt(u);return p&&p!=="/"?null:d.slice(u)||"/"}function Ed(d,c){c===void 0&&(c="/");let{pathname:u,search:p="",hash:g=""}=typeof d=="string"?vo(d):d;return{pathname:u?u.startsWith("/")?u:Td(u,c):c,search:Nd(p),hash:Od(g)}}function Td(d,c){let u=c.replace(/\/+$/,"").split("/");return d.split("/").forEach(g=>{g===".."?u.length>1&&u.pop():g!=="."&&u.push(g)}),u.length>1?u.join("/"):"/"}function Iu(d,c,u,p){return"Cannot include a '"+d+"' character in a manually specified "+("`to."+c+"` field ["+JSON.stringify(p)+"].  Please separate it out to the ")+("`to."+u+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function zd(d){return d.filter((c,u)=>u===0||c.route.path&&c.route.path.length>0)}function Hu(d,c){let u=zd(d);return c?u.map((p,g)=>g===u.length-1?p.pathname:p.pathnameBase):u.map(p=>p.pathnameBase)}function Wu(d,c,u,p){p===void 0&&(p=!1);let g;typeof d=="string"?g=vo(d):(g=ks({},d),et(!g.pathname||!g.pathname.includes("?"),Iu("?","pathname","search",g)),et(!g.pathname||!g.pathname.includes("#"),Iu("#","pathname","hash",g)),et(!g.search||!g.search.includes("#"),Iu("#","search","hash",g)));let y=d===""||g.pathname==="",w=y?"/":g.pathname,C;if(w==null)C=u;else{let N=c.length-1;if(!p&&w.startsWith("..")){let W=w.split("/");for(;W[0]==="..";)W.shift(),N-=1;g.pathname=W.join("/")}C=N>=0?c[N]:"/"}let k=Ed(g,C),z=w&&w!=="/"&&w.endsWith("/"),B=(y||w===".")&&u.endsWith("/");return!k.pathname.endsWith("/")&&(z||B)&&(k.pathname+="/"),k}const Hi=d=>d.join("/").replace(/\/\/+/g,"/"),Md=d=>d.replace(/\/+$/,"").replace(/^\/*/,"/"),Nd=d=>!d||d==="?"?"":d.startsWith("?")?d:"?"+d,Od=d=>!d||d==="#"?"":d.startsWith("#")?d:"#"+d;function Id(d){return d!=null&&typeof d.status=="number"&&typeof d.statusText=="string"&&typeof d.internal=="boolean"&&"data"in d}const Qh=["post","put","patch","delete"];new Set(Qh);const Rd=["get",...Qh];new Set(Rd);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ls(){return Ls=Object.assign?Object.assign.bind():function(d){for(var c=1;c<arguments.length;c++){var u=arguments[c];for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&(d[p]=u[p])}return d},Ls.apply(this,arguments)}const Gu=R.createContext(null),jd=R.createContext(null),Wi=R.createContext(null),nl=R.createContext(null),Gi=R.createContext({outlet:null,matches:[],isDataRoute:!1}),Jh=R.createContext(null);function Dd(d,c){let{relative:u}=c===void 0?{}:c;yo()||et(!1);let{basename:p,navigator:g}=R.useContext(Wi),{hash:y,pathname:w,search:C}=ef(d,{relative:u}),k=w;return p!=="/"&&(k=w==="/"?p:Hi([p,w])),g.createHref({pathname:k,search:C,hash:y})}function yo(){return R.useContext(nl)!=null}function Cs(){return yo()||et(!1),R.useContext(nl).location}function Yh(d){R.useContext(Wi).static||R.useLayoutEffect(d)}function Xh(){let{isDataRoute:d}=R.useContext(Gi);return d?qd():Ad()}function Ad(){yo()||et(!1);let d=R.useContext(Gu),{basename:c,future:u,navigator:p}=R.useContext(Wi),{matches:g}=R.useContext(Gi),{pathname:y}=Cs(),w=JSON.stringify(Hu(g,u.v7_relativeSplatPath)),C=R.useRef(!1);return Yh(()=>{C.current=!0}),R.useCallback(function(z,B){if(B===void 0&&(B={}),!C.current)return;if(typeof z=="number"){p.go(z);return}let N=Wu(z,JSON.parse(w),y,B.relative==="path");d==null&&c!=="/"&&(N.pathname=N.pathname==="/"?c:Hi([c,N.pathname])),(B.replace?p.replace:p.push)(N,B.state,B)},[c,p,w,y,d])}function ef(d,c){let{relative:u}=c===void 0?{}:c,{future:p}=R.useContext(Wi),{matches:g}=R.useContext(Gi),{pathname:y}=Cs(),w=JSON.stringify(Hu(g,p.v7_relativeSplatPath));return R.useMemo(()=>Wu(d,JSON.parse(w),y,u==="path"),[d,w,y,u])}function Bd(d,c){return Fd(d,c)}function Fd(d,c,u,p){yo()||et(!1);let{navigator:g,static:y}=R.useContext(Wi),{matches:w}=R.useContext(Gi),C=w[w.length-1],k=C?C.params:{};C&&C.pathname;let z=C?C.pathnameBase:"/";C&&C.route;let B=Cs(),N;if(c){var W;let q=typeof c=="string"?vo(c):c;z==="/"||(W=q.pathname)!=null&&W.startsWith(z)||et(!1),N=q}else N=B;let $=N.pathname||"/",se=$;if(z!=="/"){let q=z.replace(/^\//,"").split("/");se="/"+$.replace(/^\//,"").split("/").slice(q.length).join("/")}let H=fd(d,{pathname:se}),A=Wd(H&&H.map(q=>Object.assign({},q,{params:Object.assign({},k,q.params),pathname:Hi([z,g.encodeLocation?g.encodeLocation(q.pathname).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?z:Hi([z,g.encodeLocation?g.encodeLocation(q.pathnameBase).pathname:q.pathnameBase])})),w,u,p);return c&&A?R.createElement(nl.Provider,{value:{location:Ls({pathname:"/",search:"",hash:"",state:null,key:"default"},N),navigationType:bi.Pop}},A):A}function Zd(){let d=Kd(),c=Id(d)?d.status+" "+d.statusText:d instanceof Error?d.message:JSON.stringify(d),u=d instanceof Error?d.stack:null,g={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},c),u?R.createElement("pre",{style:g},u):null,null)}const Ud=R.createElement(Zd,null);class bd extends R.Component{constructor(c){super(c),this.state={location:c.location,revalidation:c.revalidation,error:c.error}}static getDerivedStateFromError(c){return{error:c}}static getDerivedStateFromProps(c,u){return u.location!==c.location||u.revalidation!=="idle"&&c.revalidation==="idle"?{error:c.error,location:c.location,revalidation:c.revalidation}:{error:c.error!==void 0?c.error:u.error,location:u.location,revalidation:c.revalidation||u.revalidation}}componentDidCatch(c,u){console.error("React Router caught the following error during render",c,u)}render(){return this.state.error!==void 0?R.createElement(Gi.Provider,{value:this.props.routeContext},R.createElement(Jh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Hd(d){let{routeContext:c,match:u,children:p}=d,g=R.useContext(Gu);return g&&g.static&&g.staticContext&&(u.route.errorElement||u.route.ErrorBoundary)&&(g.staticContext._deepestRenderedBoundaryId=u.route.id),R.createElement(Gi.Provider,{value:c},p)}function Wd(d,c,u,p){var g;if(c===void 0&&(c=[]),u===void 0&&(u=null),p===void 0&&(p=null),d==null){var y;if(!u)return null;if(u.errors)d=u.matches;else if((y=p)!=null&&y.v7_partialHydration&&c.length===0&&!u.initialized&&u.matches.length>0)d=u.matches;else return null}let w=d,C=(g=u)==null?void 0:g.errors;if(C!=null){let B=w.findIndex(N=>N.route.id&&(C==null?void 0:C[N.route.id])!==void 0);B>=0||et(!1),w=w.slice(0,Math.min(w.length,B+1))}let k=!1,z=-1;if(u&&p&&p.v7_partialHydration)for(let B=0;B<w.length;B++){let N=w[B];if((N.route.HydrateFallback||N.route.hydrateFallbackElement)&&(z=B),N.route.id){let{loaderData:W,errors:$}=u,se=N.route.loader&&W[N.route.id]===void 0&&(!$||$[N.route.id]===void 0);if(N.route.lazy||se){k=!0,z>=0?w=w.slice(0,z+1):w=[w[0]];break}}}return w.reduceRight((B,N,W)=>{let $,se=!1,H=null,A=null;u&&($=C&&N.route.id?C[N.route.id]:void 0,H=N.route.errorElement||Ud,k&&(z<0&&W===0?(Qd("route-fallback"),se=!0,A=null):z===W&&(se=!0,A=N.route.hydrateFallbackElement||null)));let q=c.concat(w.slice(0,W+1)),ne=()=>{let J;return $?J=H:se?J=A:N.route.Component?J=R.createElement(N.route.Component,null):N.route.element?J=N.route.element:J=B,R.createElement(Hd,{match:N,routeContext:{outlet:B,matches:q,isDataRoute:u!=null},children:J})};return u&&(N.route.ErrorBoundary||N.route.errorElement||W===0)?R.createElement(bd,{location:u.location,revalidation:u.revalidation,component:H,error:$,children:ne(),routeContext:{outlet:null,matches:q,isDataRoute:!0}}):ne()},null)}var tf=function(d){return d.UseBlocker="useBlocker",d.UseRevalidator="useRevalidator",d.UseNavigateStable="useNavigate",d}(tf||{}),nf=function(d){return d.UseBlocker="useBlocker",d.UseLoaderData="useLoaderData",d.UseActionData="useActionData",d.UseRouteError="useRouteError",d.UseNavigation="useNavigation",d.UseRouteLoaderData="useRouteLoaderData",d.UseMatches="useMatches",d.UseRevalidator="useRevalidator",d.UseNavigateStable="useNavigate",d.UseRouteId="useRouteId",d}(nf||{});function Gd(d){let c=R.useContext(Gu);return c||et(!1),c}function Vd(d){let c=R.useContext(jd);return c||et(!1),c}function $d(d){let c=R.useContext(Gi);return c||et(!1),c}function rf(d){let c=$d(),u=c.matches[c.matches.length-1];return u.route.id||et(!1),u.route.id}function Kd(){var d;let c=R.useContext(Jh),u=Vd(),p=rf();return c!==void 0?c:(d=u.errors)==null?void 0:d[p]}function qd(){let{router:d}=Gd(tf.UseNavigateStable),c=rf(nf.UseNavigateStable),u=R.useRef(!1);return Yh(()=>{u.current=!0}),R.useCallback(function(g,y){y===void 0&&(y={}),u.current&&(typeof g=="number"?d.navigate(g):d.navigate(g,Ls({fromRouteId:c},y)))},[d,c])}const Fh={};function Qd(d,c,u){Fh[d]||(Fh[d]=!0)}function Jd(d,c){d==null||d.v7_startTransition,d==null||d.v7_relativeSplatPath}function Yd(d){let{to:c,replace:u,state:p,relative:g}=d;yo()||et(!1);let{future:y,static:w}=R.useContext(Wi),{matches:C}=R.useContext(Gi),{pathname:k}=Cs(),z=Xh(),B=Wu(c,Hu(C,y.v7_relativeSplatPath),k,g==="path"),N=JSON.stringify(B);return R.useEffect(()=>z(JSON.parse(N),{replace:u,state:p,relative:g}),[z,N,g,u,p]),null}function kr(d){et(!1)}function Xd(d){let{basename:c="/",children:u=null,location:p,navigationType:g=bi.Pop,navigator:y,static:w=!1,future:C}=d;yo()&&et(!1);let k=c.replace(/^\/*/,"/"),z=R.useMemo(()=>({basename:k,navigator:y,static:w,future:Ls({v7_relativeSplatPath:!1},C)}),[k,C,y,w]);typeof p=="string"&&(p=vo(p));let{pathname:B="/",search:N="",hash:W="",state:$=null,key:se="default"}=p,H=R.useMemo(()=>{let A=bu(B,k);return A==null?null:{location:{pathname:A,search:N,hash:W,state:$,key:se},navigationType:g}},[k,B,N,W,$,se,g]);return H==null?null:R.createElement(Wi.Provider,{value:z},R.createElement(nl.Provider,{children:u,value:H}))}function ep(d){let{children:c,location:u}=d;return Bd(Au(c),u)}new Promise(()=>{});function Au(d,c){c===void 0&&(c=[]);let u=[];return R.Children.forEach(d,(p,g)=>{if(!R.isValidElement(p))return;let y=[...c,g];if(p.type===R.Fragment){u.push.apply(u,Au(p.props.children,y));return}p.type!==kr&&et(!1),!p.props.index||!p.props.children||et(!1);let w={id:p.props.id||y.join("-"),caseSensitive:p.props.caseSensitive,element:p.props.element,Component:p.props.Component,index:p.props.index,path:p.props.path,loader:p.props.loader,action:p.props.action,errorElement:p.props.errorElement,ErrorBoundary:p.props.ErrorBoundary,hasErrorBoundary:p.props.ErrorBoundary!=null||p.props.errorElement!=null,shouldRevalidate:p.props.shouldRevalidate,handle:p.props.handle,lazy:p.props.lazy};p.props.children&&(w.children=Au(p.props.children,y)),u.push(w)}),u}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bu(){return Bu=Object.assign?Object.assign.bind():function(d){for(var c=1;c<arguments.length;c++){var u=arguments[c];for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&(d[p]=u[p])}return d},Bu.apply(this,arguments)}function tp(d,c){if(d==null)return{};var u={},p=Object.keys(d),g,y;for(y=0;y<p.length;y++)g=p[y],!(c.indexOf(g)>=0)&&(u[g]=d[g]);return u}function np(d){return!!(d.metaKey||d.altKey||d.ctrlKey||d.shiftKey)}function ip(d,c){return d.button===0&&(!c||c==="_self")&&!np(d)}const rp=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],op="6";try{window.__reactRouterVersion=op}catch{}const sp="startTransition",Zh=td[sp];function ap(d){let{basename:c,children:u,future:p,window:g}=d,y=R.useRef();y.current==null&&(y.current=ud({window:g,v5Compat:!0}));let w=y.current,[C,k]=R.useState({action:w.action,location:w.location}),{v7_startTransition:z}=p||{},B=R.useCallback(N=>{z&&Zh?Zh(()=>k(N)):k(N)},[k,z]);return R.useLayoutEffect(()=>w.listen(B),[w,B]),R.useEffect(()=>Jd(p),[p]),R.createElement(Xd,{basename:c,children:u,location:C.location,navigationType:C.action,navigator:w,future:p})}const lp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",up=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,In=R.forwardRef(function(c,u){let{onClick:p,relative:g,reloadDocument:y,replace:w,state:C,target:k,to:z,preventScrollReset:B,viewTransition:N}=c,W=tp(c,rp),{basename:$}=R.useContext(Wi),se,H=!1;if(typeof z=="string"&&up.test(z)&&(se=z,lp))try{let J=new URL(window.location.href),ee=z.startsWith("//")?new URL(J.protocol+z):new URL(z),me=bu(ee.pathname,$);ee.origin===J.origin&&me!=null?z=me+ee.search+ee.hash:H=!0}catch{}let A=Dd(z,{relative:g}),q=cp(z,{replace:w,state:C,target:k,preventScrollReset:B,relative:g,viewTransition:N});function ne(J){p&&p(J),J.defaultPrevented||q(J)}return R.createElement("a",Bu({},W,{href:se||A,onClick:H||y?p:ne,ref:u,target:k}))});var Uh;(function(d){d.UseScrollRestoration="useScrollRestoration",d.UseSubmit="useSubmit",d.UseSubmitFetcher="useSubmitFetcher",d.UseFetcher="useFetcher",d.useViewTransitionState="useViewTransitionState"})(Uh||(Uh={}));var bh;(function(d){d.UseFetcher="useFetcher",d.UseFetchers="useFetchers",d.UseScrollRestoration="useScrollRestoration"})(bh||(bh={}));function cp(d,c){let{target:u,replace:p,state:g,preventScrollReset:y,relative:w,viewTransition:C}=c===void 0?{}:c,k=Xh(),z=Cs(),B=ef(d,{relative:w});return R.useCallback(N=>{if(ip(N,u)){N.preventDefault();let W=p!==void 0?p:tl(z)===tl(B);k(d,{replace:W,state:g,preventScrollReset:y,relative:w,viewTransition:C})}},[z,k,B,p,g,u,d,y,w,C])}const hp=()=>v.jsxs("div",{className:"home-page",children:[v.jsxs("section",{className:"hero",children:[v.jsx("h1",{children:"به اپلیکیشن مسیر طلایی خوش آمدید"}),v.jsx("p",{children:"ردیابی دقیق موقعیت و ناوبری حتی در شرایط سخت"}),v.jsxs("div",{className:"hero-buttons",children:[v.jsx(In,{to:"/map",className:"btn btn-primary",children:"شروع ناوبری"}),v.jsx(In,{to:"/qr-scan",className:"btn btn-secondary",children:"اسکن QR کد"})]})]}),v.jsxs("section",{className:"features",children:[v.jsx("h2",{children:"امکانات اصلی"}),v.jsxs("div",{className:"feature-cards",children:[v.jsxs("div",{className:"feature-card",children:[v.jsx("div",{className:"feature-icon",children:"🛰️"}),v.jsx("h3",{children:"ردیابی دقیق GPS"}),v.jsx("p",{children:"دریافت موقعیت با دقت بالا و نمایش روی نقشه"})]}),v.jsxs("div",{className:"feature-card",children:[v.jsx("div",{className:"feature-icon",children:"📱"}),v.jsx("h3",{children:"Dead Reckoning"}),v.jsx("p",{children:"ردیابی حرکت حتی در شرایط بدون GPS با استفاده از سنسورهای دستگاه"})]}),v.jsxs("div",{className:"feature-card",children:[v.jsx("div",{className:"feature-icon",children:"📷"}),v.jsx("h3",{children:"اسکن QR کد"}),v.jsx("p",{children:"دریافت موقعیت و اطلاعات از طریق اسکن QR کد"})]}),v.jsxs("div",{className:"feature-card",children:[v.jsx("div",{className:"feature-icon",children:"🔄"}),v.jsx("h3",{children:"کارکرد آفلاین"}),v.jsx("p",{children:"قابلیت استفاده از اپلیکیشن بدون نیاز به اینترنت"})]})]})]}),v.jsxs("section",{className:"how-to-use",children:[v.jsx("h2",{children:"نحوه استفاده"}),v.jsxs("div",{className:"steps",children:[v.jsxs("div",{className:"step",children:[v.jsx("div",{className:"step-number",children:"1"}),v.jsx("h3",{children:"دسترسی به موقعیت"}),v.jsx("p",{children:"به اپلیکیشن اجازه دسترسی به موقعیت دستگاه خود را بدهید"})]}),v.jsxs("div",{className:"step",children:[v.jsx("div",{className:"step-number",children:"2"}),v.jsx("h3",{children:"انتخاب حالت ناوبری"}),v.jsx("p",{children:"از بین گزینه‌های GPS، QR کد یا Dead Reckoning انتخاب کنید"})]}),v.jsxs("div",{className:"step",children:[v.jsx("div",{className:"step-number",children:"3"}),v.jsx("h3",{children:"شروع ردیابی"}),v.jsx("p",{children:"دکمه شروع ردیابی را فشار دهید و مسیر خود را ثبت کنید"})]})]})]})]});function of(d,c){const u=R.useRef(c);R.useEffect(function(){c!==u.current&&d.attributionControl!=null&&(u.current!=null&&d.attributionControl.removeAttribution(u.current),c!=null&&d.attributionControl.addAttribution(c)),u.current=c},[d,c])}function fp(d,c,u){c.center!==u.center&&d.setLatLng(c.center),c.radius!=null&&c.radius!==u.radius&&d.setRadius(c.radius)}const dp=1;function pp(d){return Object.freeze({__version:dp,map:d})}function Vu(d,c){return Object.freeze({...d,...c})}const sf=R.createContext(null),af=sf.Provider;function Es(){const d=R.useContext(sf);if(d==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return d}function lf(d){function c(u,p){const{instance:g,context:y}=d(u).current;return R.useImperativeHandle(p,()=>g),u.children==null?null:Ps.createElement(af,{value:y},u.children)}return R.forwardRef(c)}function mp(d){function c(u,p){const[g,y]=R.useState(!1),{instance:w}=d(u,y).current;R.useImperativeHandle(p,()=>w),R.useEffect(function(){g&&w.update()},[w,g,u.children]);const C=w._contentNode;return C?ld.createPortal(u.children,C):null}return R.forwardRef(c)}function uf(d){function c(u,p){const{instance:g}=d(u).current;return R.useImperativeHandle(p,()=>g),null}return R.forwardRef(c)}function gp(d){return function(u){const p=Es(),g=d(u,p),{instance:y}=g.current,w=R.useRef(u.position),{position:C}=u;return R.useEffect(function(){return y.addTo(p.map),function(){y.remove()}},[p.map,y]),R.useEffect(function(){C!=null&&C!==w.current&&(y.setPosition(C),w.current=C)},[y,C]),g}}function $u(d,c){const u=R.useRef();R.useEffect(function(){return c!=null&&d.instance.on(c),u.current=c,function(){u.current!=null&&d.instance.off(u.current),u.current=null}},[d,c])}function il(d,c){const u=d.pane??c.pane;return u?{...d,pane:u}:d}function _p(d,c){return function(p,g){const y=Es(),w=d(il(p,y),y);return of(y.map,p.attribution),$u(w.current,p.eventHandlers),c(w.current,y,p,g),w}}var Ss={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var vp=Ss.exports,Hh;function yp(){return Hh||(Hh=1,function(d,c){(function(u,p){p(c)})(vp,function(u){var p="1.9.4";function g(t){var i,o,a,f;for(o=1,a=arguments.length;o<a;o++){f=arguments[o];for(i in f)t[i]=f[i]}return t}var y=Object.create||function(){function t(){}return function(i){return t.prototype=i,new t}}();function w(t,i){var o=Array.prototype.slice;if(t.bind)return t.bind.apply(t,o.call(arguments,1));var a=o.call(arguments,2);return function(){return t.apply(i,a.length?a.concat(o.call(arguments)):arguments)}}var C=0;function k(t){return"_leaflet_id"in t||(t._leaflet_id=++C),t._leaflet_id}function z(t,i,o){var a,f,_,S;return S=function(){a=!1,f&&(_.apply(o,f),f=!1)},_=function(){a?f=arguments:(t.apply(o,arguments),setTimeout(S,i),a=!0)},_}function B(t,i,o){var a=i[1],f=i[0],_=a-f;return t===a&&o?t:((t-f)%_+_)%_+f}function N(){return!1}function W(t,i){if(i===!1)return t;var o=Math.pow(10,i===void 0?6:i);return Math.round(t*o)/o}function $(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function se(t){return $(t).split(/\s+/)}function H(t,i){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?y(t.options):{});for(var o in i)t.options[o]=i[o];return t.options}function A(t,i,o){var a=[];for(var f in t)a.push(encodeURIComponent(o?f.toUpperCase():f)+"="+encodeURIComponent(t[f]));return(!i||i.indexOf("?")===-1?"?":"&")+a.join("&")}var q=/\{ *([\w_ -]+) *\}/g;function ne(t,i){return t.replace(q,function(o,a){var f=i[a];if(f===void 0)throw new Error("No value provided for variable "+o);return typeof f=="function"&&(f=f(i)),f})}var J=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function ee(t,i){for(var o=0;o<t.length;o++)if(t[o]===i)return o;return-1}var me="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function X(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var ge=0;function Be(t){var i=+new Date,o=Math.max(0,16-(i-ge));return ge=i+o,window.setTimeout(t,o)}var ot=window.requestAnimationFrame||X("RequestAnimationFrame")||Be,Mt=window.cancelAnimationFrame||X("CancelAnimationFrame")||X("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function Pe(t,i,o){if(o&&ot===Be)t.call(i);else return ot.call(window,w(t,i))}function ye(t){t&&Mt.call(window,t)}var De={__proto__:null,extend:g,create:y,bind:w,get lastId(){return C},stamp:k,throttle:z,wrapNum:B,falseFn:N,formatNum:W,trim:$,splitWords:se,setOptions:H,getParamString:A,template:ne,isArray:J,indexOf:ee,emptyImageUrl:me,requestFn:ot,cancelFn:Mt,requestAnimFrame:Pe,cancelAnimFrame:ye};function Oe(){}Oe.extend=function(t){var i=function(){H(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},o=i.__super__=this.prototype,a=y(o);a.constructor=i,i.prototype=a;for(var f in this)Object.prototype.hasOwnProperty.call(this,f)&&f!=="prototype"&&f!=="__super__"&&(i[f]=this[f]);return t.statics&&g(i,t.statics),t.includes&&(gt(t.includes),g.apply(null,[a].concat(t.includes))),g(a,t),delete a.statics,delete a.includes,a.options&&(a.options=o.options?y(o.options):{},g(a.options,t.options)),a._initHooks=[],a.callInitHooks=function(){if(!this._initHooksCalled){o.callInitHooks&&o.callInitHooks.call(this),this._initHooksCalled=!0;for(var _=0,S=a._initHooks.length;_<S;_++)a._initHooks[_].call(this)}},i},Oe.include=function(t){var i=this.prototype.options;return g(this.prototype,t),t.options&&(this.prototype.options=i,this.mergeOptions(t.options)),this},Oe.mergeOptions=function(t){return g(this.prototype.options,t),this},Oe.addInitHook=function(t){var i=Array.prototype.slice.call(arguments,1),o=typeof t=="function"?t:function(){this[t].apply(this,i)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(o),this};function gt(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=J(t)?t:[t];for(var i=0;i<t.length;i++)t[i]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ie={on:function(t,i,o){if(typeof t=="object")for(var a in t)this._on(a,t[a],i);else{t=se(t);for(var f=0,_=t.length;f<_;f++)this._on(t[f],i,o)}return this},off:function(t,i,o){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var a in t)this._off(a,t[a],i);else{t=se(t);for(var f=arguments.length===1,_=0,S=t.length;_<S;_++)f?this._off(t[_]):this._off(t[_],i,o)}return this},_on:function(t,i,o,a){if(typeof i!="function"){console.warn("wrong listener type: "+typeof i);return}if(this._listens(t,i,o)===!1){o===this&&(o=void 0);var f={fn:i,ctx:o};a&&(f.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(f)}},_off:function(t,i,o){var a,f,_;if(this._events&&(a=this._events[t],!!a)){if(arguments.length===1){if(this._firingCount)for(f=0,_=a.length;f<_;f++)a[f].fn=N;delete this._events[t];return}if(typeof i!="function"){console.warn("wrong listener type: "+typeof i);return}var S=this._listens(t,i,o);if(S!==!1){var M=a[S];this._firingCount&&(M.fn=N,this._events[t]=a=a.slice()),a.splice(S,1)}}},fire:function(t,i,o){if(!this.listens(t,o))return this;var a=g({},i,{type:t,target:this,sourceTarget:i&&i.sourceTarget||this});if(this._events){var f=this._events[t];if(f){this._firingCount=this._firingCount+1||1;for(var _=0,S=f.length;_<S;_++){var M=f[_],j=M.fn;M.once&&this.off(t,j,M.ctx),j.call(M.ctx||this,a)}this._firingCount--}}return o&&this._propagateEvent(a),this},listens:function(t,i,o,a){typeof t!="string"&&console.warn('"string" type argument expected');var f=i;typeof i!="function"&&(a=!!i,f=void 0,o=void 0);var _=this._events&&this._events[t];if(_&&_.length&&this._listens(t,f,o)!==!1)return!0;if(a){for(var S in this._eventParents)if(this._eventParents[S].listens(t,i,o,a))return!0}return!1},_listens:function(t,i,o){if(!this._events)return!1;var a=this._events[t]||[];if(!i)return!!a.length;o===this&&(o=void 0);for(var f=0,_=a.length;f<_;f++)if(a[f].fn===i&&a[f].ctx===o)return f;return!1},once:function(t,i,o){if(typeof t=="object")for(var a in t)this._on(a,t[a],i,!0);else{t=se(t);for(var f=0,_=t.length;f<_;f++)this._on(t[f],i,o,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[k(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[k(t)],this},_propagateEvent:function(t){for(var i in this._eventParents)this._eventParents[i].fire(t.type,g({layer:t.target,propagatedFrom:t.target},t),!0)}};Ie.addEventListener=Ie.on,Ie.removeEventListener=Ie.clearAllEventListeners=Ie.off,Ie.addOneTimeEventListener=Ie.once,Ie.fireEvent=Ie.fire,Ie.hasEventListeners=Ie.listens;var Re=Oe.extend(Ie);function F(t,i,o){this.x=o?Math.round(t):t,this.y=o?Math.round(i):i}var fe=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};F.prototype={clone:function(){return new F(this.x,this.y)},add:function(t){return this.clone()._add(U(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(U(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new F(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new F(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=fe(this.x),this.y=fe(this.y),this},distanceTo:function(t){t=U(t);var i=t.x-this.x,o=t.y-this.y;return Math.sqrt(i*i+o*o)},equals:function(t){return t=U(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=U(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+W(this.x)+", "+W(this.y)+")"}};function U(t,i,o){return t instanceof F?t:J(t)?new F(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new F(t.x,t.y):new F(t,i,o)}function E(t,i){if(t)for(var o=i?[t,i]:t,a=0,f=o.length;a<f;a++)this.extend(o[a])}E.prototype={extend:function(t){var i,o;if(!t)return this;if(t instanceof F||typeof t[0]=="number"||"x"in t)i=o=U(t);else if(t=Z(t),i=t.min,o=t.max,!i||!o)return this;return!this.min&&!this.max?(this.min=i.clone(),this.max=o.clone()):(this.min.x=Math.min(i.x,this.min.x),this.max.x=Math.max(o.x,this.max.x),this.min.y=Math.min(i.y,this.min.y),this.max.y=Math.max(o.y,this.max.y)),this},getCenter:function(t){return U((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return U(this.min.x,this.max.y)},getTopRight:function(){return U(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var i,o;return typeof t[0]=="number"||t instanceof F?t=U(t):t=Z(t),t instanceof E?(i=t.min,o=t.max):i=o=t,i.x>=this.min.x&&o.x<=this.max.x&&i.y>=this.min.y&&o.y<=this.max.y},intersects:function(t){t=Z(t);var i=this.min,o=this.max,a=t.min,f=t.max,_=f.x>=i.x&&a.x<=o.x,S=f.y>=i.y&&a.y<=o.y;return _&&S},overlaps:function(t){t=Z(t);var i=this.min,o=this.max,a=t.min,f=t.max,_=f.x>i.x&&a.x<o.x,S=f.y>i.y&&a.y<o.y;return _&&S},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var i=this.min,o=this.max,a=Math.abs(i.x-o.x)*t,f=Math.abs(i.y-o.y)*t;return Z(U(i.x-a,i.y-f),U(o.x+a,o.y+f))},equals:function(t){return t?(t=Z(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function Z(t,i){return!t||t instanceof E?t:new E(t,i)}function de(t,i){if(t)for(var o=i?[t,i]:t,a=0,f=o.length;a<f;a++)this.extend(o[a])}de.prototype={extend:function(t){var i=this._southWest,o=this._northEast,a,f;if(t instanceof le)a=t,f=t;else if(t instanceof de){if(a=t._southWest,f=t._northEast,!a||!f)return this}else return t?this.extend(ie(t)||he(t)):this;return!i&&!o?(this._southWest=new le(a.lat,a.lng),this._northEast=new le(f.lat,f.lng)):(i.lat=Math.min(a.lat,i.lat),i.lng=Math.min(a.lng,i.lng),o.lat=Math.max(f.lat,o.lat),o.lng=Math.max(f.lng,o.lng)),this},pad:function(t){var i=this._southWest,o=this._northEast,a=Math.abs(i.lat-o.lat)*t,f=Math.abs(i.lng-o.lng)*t;return new de(new le(i.lat-a,i.lng-f),new le(o.lat+a,o.lng+f))},getCenter:function(){return new le((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new le(this.getNorth(),this.getWest())},getSouthEast:function(){return new le(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof le||"lat"in t?t=ie(t):t=he(t);var i=this._southWest,o=this._northEast,a,f;return t instanceof de?(a=t.getSouthWest(),f=t.getNorthEast()):a=f=t,a.lat>=i.lat&&f.lat<=o.lat&&a.lng>=i.lng&&f.lng<=o.lng},intersects:function(t){t=he(t);var i=this._southWest,o=this._northEast,a=t.getSouthWest(),f=t.getNorthEast(),_=f.lat>=i.lat&&a.lat<=o.lat,S=f.lng>=i.lng&&a.lng<=o.lng;return _&&S},overlaps:function(t){t=he(t);var i=this._southWest,o=this._northEast,a=t.getSouthWest(),f=t.getNorthEast(),_=f.lat>i.lat&&a.lat<o.lat,S=f.lng>i.lng&&a.lng<o.lng;return _&&S},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,i){return t?(t=he(t),this._southWest.equals(t.getSouthWest(),i)&&this._northEast.equals(t.getNorthEast(),i)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function he(t,i){return t instanceof de?t:new de(t,i)}function le(t,i,o){if(isNaN(t)||isNaN(i))throw new Error("Invalid LatLng object: ("+t+", "+i+")");this.lat=+t,this.lng=+i,o!==void 0&&(this.alt=+o)}le.prototype={equals:function(t,i){if(!t)return!1;t=ie(t);var o=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return o<=(i===void 0?1e-9:i)},toString:function(t){return"LatLng("+W(this.lat,t)+", "+W(this.lng,t)+")"},distanceTo:function(t){return Ce.distance(this,ie(t))},wrap:function(){return Ce.wrapLatLng(this)},toBounds:function(t){var i=180*t/40075017,o=i/Math.cos(Math.PI/180*this.lat);return he([this.lat-i,this.lng-o],[this.lat+i,this.lng+o])},clone:function(){return new le(this.lat,this.lng,this.alt)}};function ie(t,i,o){return t instanceof le?t:J(t)&&typeof t[0]!="object"?t.length===3?new le(t[0],t[1],t[2]):t.length===2?new le(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new le(t.lat,"lng"in t?t.lng:t.lon,t.alt):i===void 0?null:new le(t,i,o)}var ze={latLngToPoint:function(t,i){var o=this.projection.project(t),a=this.scale(i);return this.transformation._transform(o,a)},pointToLatLng:function(t,i){var o=this.scale(i),a=this.transformation.untransform(t,o);return this.projection.unproject(a)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var i=this.projection.bounds,o=this.scale(t),a=this.transformation.transform(i.min,o),f=this.transformation.transform(i.max,o);return new E(a,f)},infinite:!1,wrapLatLng:function(t){var i=this.wrapLng?B(t.lng,this.wrapLng,!0):t.lng,o=this.wrapLat?B(t.lat,this.wrapLat,!0):t.lat,a=t.alt;return new le(o,i,a)},wrapLatLngBounds:function(t){var i=t.getCenter(),o=this.wrapLatLng(i),a=i.lat-o.lat,f=i.lng-o.lng;if(a===0&&f===0)return t;var _=t.getSouthWest(),S=t.getNorthEast(),M=new le(_.lat-a,_.lng-f),j=new le(S.lat-a,S.lng-f);return new de(M,j)}},Ce=g({},ze,{wrapLng:[-180,180],R:6371e3,distance:function(t,i){var o=Math.PI/180,a=t.lat*o,f=i.lat*o,_=Math.sin((i.lat-t.lat)*o/2),S=Math.sin((i.lng-t.lng)*o/2),M=_*_+Math.cos(a)*Math.cos(f)*S*S,j=2*Math.atan2(Math.sqrt(M),Math.sqrt(1-M));return this.R*j}}),Ue=6378137,dt={R:Ue,MAX_LATITUDE:85.0511287798,project:function(t){var i=Math.PI/180,o=this.MAX_LATITUDE,a=Math.max(Math.min(o,t.lat),-o),f=Math.sin(a*i);return new F(this.R*t.lng*i,this.R*Math.log((1+f)/(1-f))/2)},unproject:function(t){var i=180/Math.PI;return new le((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*i,t.x*i/this.R)},bounds:function(){var t=Ue*Math.PI;return new E([-t,-t],[t,t])}()};function ii(t,i,o,a){if(J(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=i,this._c=o,this._d=a}ii.prototype={transform:function(t,i){return this._transform(t.clone(),i)},_transform:function(t,i){return i=i||1,t.x=i*(this._a*t.x+this._b),t.y=i*(this._c*t.y+this._d),t},untransform:function(t,i){return i=i||1,new F((t.x/i-this._b)/this._a,(t.y/i-this._d)/this._c)}};function ri(t,i,o,a){return new ii(t,i,o,a)}var oi=g({},Ce,{code:"EPSG:3857",projection:dt,transformation:function(){var t=.5/(Math.PI*dt.R);return ri(t,.5,-t,.5)}()}),xo=g({},oi,{code:"EPSG:900913"});function So(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Po(t,i){var o="",a,f,_,S,M,j;for(a=0,_=t.length;a<_;a++){for(M=t[a],f=0,S=M.length;f<S;f++)j=M[f],o+=(f?"L":"M")+j.x+" "+j.y;o+=i?ue.svg?"z":"x":""}return o||"M0 0"}var $i=document.documentElement.style,Ki="ActiveXObject"in window,ko=Ki&&!document.addEventListener,si="msLaunchUri"in navigator&&!("documentMode"in document),wn=_t("webkit"),Lr=_t("android"),Lo=_t("android 2")||_t("android 3"),Ms=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ns=Lr&&_t("Google")&&Ms<537&&!("AudioNode"in window),Cr=!!window.opera,Er=!si&&_t("chrome"),qi=_t("gecko")&&!wn&&!Cr&&!Ki,Os=!Er&&_t("safari"),ai=_t("phantom"),li="OTransition"in $i,rl=navigator.platform.indexOf("Win")===0,Co=Ki&&"transition"in $i,Tr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Lo,Is="MozPerspective"in $i,Eo=!window.L_DISABLE_3D&&(Co||Tr||Is)&&!li&&!ai,Rn=typeof orientation<"u"||_t("mobile"),To=Rn&&wn,zo=Rn&&Tr,zr=!window.PointerEvent&&window.MSPointerEvent,jn=!!(window.PointerEvent||zr),Dn="ontouchstart"in window||!!window.TouchEvent,Rs=!window.L_NO_TOUCH&&(Dn||jn),js=Rn&&Cr,Ds=Rn&&qi,As=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Bs=function(){var t=!1;try{var i=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",N,i),window.removeEventListener("testPassiveEventSupport",N,i)}catch{}return t}(),Mo=function(){return!!document.createElement("canvas").getContext}(),Mr=!!(document.createElementNS&&So("svg").createSVGRect),Qi=!!Mr&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),No=!Mr&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var i=t.firstChild;return i.style.behavior="url(#default#VML)",i&&typeof i.adj=="object"}catch{return!1}}(),Ji=navigator.platform.indexOf("Mac")===0,ol=navigator.platform.indexOf("Linux")===0;function _t(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var ue={ie:Ki,ielt9:ko,edge:si,webkit:wn,android:Lr,android23:Lo,androidStock:Ns,opera:Cr,chrome:Er,gecko:qi,safari:Os,phantom:ai,opera12:li,win:rl,ie3d:Co,webkit3d:Tr,gecko3d:Is,any3d:Eo,mobile:Rn,mobileWebkit:To,mobileWebkit3d:zo,msPointer:zr,pointer:jn,touch:Rs,touchNative:Dn,mobileOpera:js,mobileGecko:Ds,retina:As,passiveEvents:Bs,canvas:Mo,svg:Mr,vml:No,inlineSvg:Qi,mac:Ji,linux:ol},Yi=ue.msPointer?"MSPointerDown":"pointerdown",Nr=ue.msPointer?"MSPointerMove":"pointermove",Fs=ue.msPointer?"MSPointerUp":"pointerup",Zs=ue.msPointer?"MSPointerCancel":"pointercancel",Oo={touchstart:Yi,touchmove:Nr,touchend:Fs,touchcancel:Zs},xn={touchstart:$e,touchmove:Or,touchend:Or,touchcancel:Or},An={},Io=!1;function sl(t,i,o){return i==="touchstart"&&al(),xn[i]?(o=xn[i].bind(this,o),t.addEventListener(Oo[i],o,!1),o):(console.warn("wrong event specified:",i),N)}function Us(t,i,o){if(!Oo[i]){console.warn("wrong event specified:",i);return}t.removeEventListener(Oo[i],o,!1)}function bs(t){An[t.pointerId]=t}function Hs(t){An[t.pointerId]&&(An[t.pointerId]=t)}function Ro(t){delete An[t.pointerId]}function al(){Io||(document.addEventListener(Yi,bs,!0),document.addEventListener(Nr,Hs,!0),document.addEventListener(Fs,Ro,!0),document.addEventListener(Zs,Ro,!0),Io=!0)}function Or(t,i){if(i.pointerType!==(i.MSPOINTER_TYPE_MOUSE||"mouse")){i.touches=[];for(var o in An)i.touches.push(An[o]);i.changedTouches=[i],t(i)}}function $e(t,i){i.MSPOINTER_TYPE_TOUCH&&i.pointerType===i.MSPOINTER_TYPE_TOUCH&&Ke(i),Or(t,i)}function ll(t){var i={},o,a;for(a in t)o=t[a],i[a]=o&&o.bind?o.bind(t):o;return t=i,i.type="dblclick",i.detail=2,i.isTrusted=!1,i._simulated=!0,i}var jo=200;function Ws(t,i){t.addEventListener("dblclick",i);var o=0,a;function f(_){if(_.detail!==1){a=_.detail;return}if(!(_.pointerType==="mouse"||_.sourceCapabilities&&!_.sourceCapabilities.firesTouchEvents)){var S=Zn(_);if(!(S.some(function(j){return j instanceof HTMLLabelElement&&j.attributes.for})&&!S.some(function(j){return j instanceof HTMLInputElement||j instanceof HTMLSelectElement}))){var M=Date.now();M-o<=jo?(a++,a===2&&i(ll(_))):a=1,o=M}}}return t.addEventListener("click",f),{dblclick:i,simDblclick:f}}function Ir(t,i){t.removeEventListener("dblclick",i.dblclick),t.removeEventListener("click",i.simDblclick)}var Do=fi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ui=fi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Xi=ui==="webkitTransition"||ui==="OTransition"?ui+"End":"transitionend";function Ft(t){return typeof t=="string"?document.getElementById(t):t}function er(t,i){var o=t.style[i]||t.currentStyle&&t.currentStyle[i];if((!o||o==="auto")&&document.defaultView){var a=document.defaultView.getComputedStyle(t,null);o=a?a[i]:null}return o==="auto"?null:o}function ke(t,i,o){var a=document.createElement(t);return a.className=i||"",o&&o.appendChild(a),a}function We(t){var i=t.parentNode;i&&i.removeChild(t)}function Rr(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function ci(t){var i=t.parentNode;i&&i.lastChild!==t&&i.appendChild(t)}function un(t){var i=t.parentNode;i&&i.firstChild!==t&&i.insertBefore(t,i.firstChild)}function hi(t,i){if(t.classList!==void 0)return t.classList.contains(i);var o=jr(t);return o.length>0&&new RegExp("(^|\\s)"+i+"(\\s|$)").test(o)}function Se(t,i){if(t.classList!==void 0)for(var o=se(i),a=0,f=o.length;a<f;a++)t.classList.add(o[a]);else if(!hi(t,i)){var _=jr(t);Ao(t,(_?_+" ":"")+i)}}function be(t,i){t.classList!==void 0?t.classList.remove(i):Ao(t,$((" "+jr(t)+" ").replace(" "+i+" "," ")))}function Ao(t,i){t.className.baseVal===void 0?t.className=i:t.className.baseVal=i}function jr(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function vt(t,i){"opacity"in t.style?t.style.opacity=i:"filter"in t.style&&Gs(t,i)}function Gs(t,i){var o=!1,a="DXImageTransform.Microsoft.Alpha";try{o=t.filters.item(a)}catch{if(i===1)return}i=Math.round(i*100),o?(o.Enabled=i!==100,o.Opacity=i):t.style.filter+=" progid:"+a+"(opacity="+i+")"}function fi(t){for(var i=document.documentElement.style,o=0;o<t.length;o++)if(t[o]in i)return t[o];return!1}function Zt(t,i,o){var a=i||new F(0,0);t.style[Do]=(ue.ie3d?"translate("+a.x+"px,"+a.y+"px)":"translate3d("+a.x+"px,"+a.y+"px,0)")+(o?" scale("+o+")":"")}function Je(t,i){t._leaflet_pos=i,ue.any3d?Zt(t,i):(t.style.left=i.x+"px",t.style.top=i.y+"px")}function cn(t){return t._leaflet_pos||new F(0,0)}var Me,di,Dr;if("onselectstart"in document)Me=function(){we(window,"selectstart",Ke)},di=function(){Fe(window,"selectstart",Ke)};else{var Bn=fi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Me=function(){if(Bn){var t=document.documentElement.style;Dr=t[Bn],t[Bn]="none"}},di=function(){Bn&&(document.documentElement.style[Bn]=Dr,Dr=void 0)}}function Ar(){we(window,"dragstart",Ke)}function Br(){Fe(window,"dragstart",Ke)}var tr,nr;function pi(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(Ut(),tr=t,nr=t.style.outlineStyle,t.style.outlineStyle="none",we(window,"keydown",Ut))}function Ut(){tr&&(tr.style.outlineStyle=nr,tr=void 0,nr=void 0,Fe(window,"keydown",Ut))}function hn(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function Qt(t){var i=t.getBoundingClientRect();return{x:i.width/t.offsetWidth||1,y:i.height/t.offsetHeight||1,boundingClientRect:i}}var ir={__proto__:null,TRANSFORM:Do,TRANSITION:ui,TRANSITION_END:Xi,get:Ft,getStyle:er,create:ke,remove:We,empty:Rr,toFront:ci,toBack:un,hasClass:hi,addClass:Se,removeClass:be,setClass:Ao,getClass:jr,setOpacity:vt,testProp:fi,setTransform:Zt,setPosition:Je,getPosition:cn,get disableTextSelection(){return Me},get enableTextSelection(){return di},disableImageDrag:Ar,enableImageDrag:Br,preventOutline:pi,restoreOutline:Ut,getSizedParentNode:hn,getScale:Qt};function we(t,i,o,a){if(i&&typeof i=="object")for(var f in i)Fo(t,f,i[f],o);else{i=se(i);for(var _=0,S=i.length;_<S;_++)Fo(t,i[_],o,a)}return this}var st="_leaflet_events";function Fe(t,i,o,a){if(arguments.length===1)Bo(t),delete t[st];else if(i&&typeof i=="object")for(var f in i)Fr(t,f,i[f],o);else if(i=se(i),arguments.length===2)Bo(t,function(M){return ee(i,M)!==-1});else for(var _=0,S=i.length;_<S;_++)Fr(t,i[_],o,a);return this}function Bo(t,i){for(var o in t[st]){var a=o.split(/\d/)[0];(!i||i(a))&&Fr(t,a,null,null,o)}}var Fn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Fo(t,i,o,a){var f=i+k(o)+(a?"_"+k(a):"");if(t[st]&&t[st][f])return this;var _=function(M){return o.call(a||t,M||window.event)},S=_;!ue.touchNative&&ue.pointer&&i.indexOf("touch")===0?_=sl(t,i,_):ue.touch&&i==="dblclick"?_=Ws(t,_):"addEventListener"in t?i==="touchstart"||i==="touchmove"||i==="wheel"||i==="mousewheel"?t.addEventListener(Fn[i]||i,_,ue.passiveEvents?{passive:!1}:!1):i==="mouseenter"||i==="mouseleave"?(_=function(M){M=M||window.event,sr(t,M)&&S(M)},t.addEventListener(Fn[i],_,!1)):t.addEventListener(i,S,!1):t.attachEvent("on"+i,_),t[st]=t[st]||{},t[st][f]=_}function Fr(t,i,o,a,f){f=f||i+k(o)+(a?"_"+k(a):"");var _=t[st]&&t[st][f];if(!_)return this;!ue.touchNative&&ue.pointer&&i.indexOf("touch")===0?Us(t,i,_):ue.touch&&i==="dblclick"?Ir(t,_):"removeEventListener"in t?t.removeEventListener(Fn[i]||i,_,!1):t.detachEvent("on"+i,_),t[st][f]=null}function Jt(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function Zr(t){return Fo(t,"wheel",Jt),this}function rr(t){return we(t,"mousedown touchstart dblclick contextmenu",Jt),t._leaflet_disable_click=!0,this}function Ke(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function bt(t){return Ke(t),Jt(t),this}function Zn(t){if(t.composedPath)return t.composedPath();for(var i=[],o=t.target;o;)i.push(o),o=o.parentNode;return i}function or(t,i){if(!i)return new F(t.clientX,t.clientY);var o=Qt(i),a=o.boundingClientRect;return new F((t.clientX-a.left)/o.x-i.clientLeft,(t.clientY-a.top)/o.y-i.clientTop)}var ul=ue.linux&&ue.chrome?window.devicePixelRatio:ue.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Vs(t){return ue.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/ul:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function sr(t,i){var o=i.relatedTarget;if(!o)return!0;try{for(;o&&o!==t;)o=o.parentNode}catch{return!1}return o!==t}var Ur={__proto__:null,on:we,off:Fe,stopPropagation:Jt,disableScrollPropagation:Zr,disableClickPropagation:rr,preventDefault:Ke,stop:bt,getPropagationPath:Zn,getMousePosition:or,getWheelDelta:Vs,isExternalTarget:sr,addListener:we,removeListener:Fe},br=Re.extend({run:function(t,i,o,a){this.stop(),this._el=t,this._inProgress=!0,this._duration=o||.25,this._easeOutPower=1/Math.max(a||.5,.2),this._startPos=cn(t),this._offset=i.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Pe(this._animate,this),this._step()},_step:function(t){var i=+new Date-this._startTime,o=this._duration*1e3;i<o?this._runFrame(this._easeOut(i/o),t):(this._runFrame(1),this._complete())},_runFrame:function(t,i){var o=this._startPos.add(this._offset.multiplyBy(t));i&&o._round(),Je(this._el,o),this.fire("step")},_complete:function(){ye(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Te=Re.extend({options:{crs:oi,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,i){i=H(this,i),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=w(this._onResize,this),this._initEvents(),i.maxBounds&&this.setMaxBounds(i.maxBounds),i.zoom!==void 0&&(this._zoom=this._limitZoom(i.zoom)),i.center&&i.zoom!==void 0&&this.setView(ie(i.center),i.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ui&&ue.any3d&&!ue.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),we(this._proxy,Xi,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,i,o){if(i=i===void 0?this._zoom:this._limitZoom(i),t=this._limitCenter(ie(t),i,this.options.maxBounds),o=o||{},this._stop(),this._loaded&&!o.reset&&o!==!0){o.animate!==void 0&&(o.zoom=g({animate:o.animate},o.zoom),o.pan=g({animate:o.animate,duration:o.duration},o.pan));var a=this._zoom!==i?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,i,o.zoom):this._tryAnimatedPan(t,o.pan);if(a)return clearTimeout(this._sizeTimer),this}return this._resetView(t,i,o.pan&&o.pan.noMoveStart),this},setZoom:function(t,i){return this._loaded?this.setView(this.getCenter(),t,{zoom:i}):(this._zoom=t,this)},zoomIn:function(t,i){return t=t||(ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,i)},zoomOut:function(t,i){return t=t||(ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,i)},setZoomAround:function(t,i,o){var a=this.getZoomScale(i),f=this.getSize().divideBy(2),_=t instanceof F?t:this.latLngToContainerPoint(t),S=_.subtract(f).multiplyBy(1-1/a),M=this.containerPointToLatLng(f.add(S));return this.setView(M,i,{zoom:o})},_getBoundsCenterZoom:function(t,i){i=i||{},t=t.getBounds?t.getBounds():he(t);var o=U(i.paddingTopLeft||i.padding||[0,0]),a=U(i.paddingBottomRight||i.padding||[0,0]),f=this.getBoundsZoom(t,!1,o.add(a));if(f=typeof i.maxZoom=="number"?Math.min(i.maxZoom,f):f,f===1/0)return{center:t.getCenter(),zoom:f};var _=a.subtract(o).divideBy(2),S=this.project(t.getSouthWest(),f),M=this.project(t.getNorthEast(),f),j=this.unproject(S.add(M).divideBy(2).add(_),f);return{center:j,zoom:f}},fitBounds:function(t,i){if(t=he(t),!t.isValid())throw new Error("Bounds are not valid.");var o=this._getBoundsCenterZoom(t,i);return this.setView(o.center,o.zoom,i)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,i){return this.setView(t,this._zoom,{pan:i})},panBy:function(t,i){if(t=U(t).round(),i=i||{},!t.x&&!t.y)return this.fire("moveend");if(i.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new br,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),i.noMoveStart||this.fire("movestart"),i.animate!==!1){Se(this._mapPane,"leaflet-pan-anim");var o=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,o,i.duration||.25,i.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,i,o){if(o=o||{},o.animate===!1||!ue.any3d)return this.setView(t,i,o);this._stop();var a=this.project(this.getCenter()),f=this.project(t),_=this.getSize(),S=this._zoom;t=ie(t),i=i===void 0?S:i;var M=Math.max(_.x,_.y),j=M*this.getZoomScale(S,i),b=f.distanceTo(a)||1,Y=1.42,pe=Y*Y;function Le(Ae){var zi=Ae?-1:1,Pl=Ae?j:M,kl=j*j-M*M+zi*pe*pe*b*b,$n=2*Pl*pe*b,Kn=kl/$n,qn=Math.sqrt(Kn*Kn+1)-Kn,no=qn<1e-9?-18:Math.log(qn);return no}function at(Ae){return(Math.exp(Ae)-Math.exp(-Ae))/2}function tt(Ae){return(Math.exp(Ae)+Math.exp(-Ae))/2}function Et(Ae){return at(Ae)/tt(Ae)}var wt=Le(0);function Ei(Ae){return M*(tt(wt)/tt(wt+Y*Ae))}function ss(Ae){return M*(tt(wt)*Et(wt+Y*Ae)-at(wt))/pe}function zn(Ae){return 1-Math.pow(1-Ae,1.5)}var da=Date.now(),Vn=(Le(1)-wt)/Y,tn=o.duration?1e3*o.duration:1e3*Vn*.8;function Ti(){var Ae=(Date.now()-da)/tn,zi=zn(Ae)*Vn;Ae<=1?(this._flyToFrame=Pe(Ti,this),this._move(this.unproject(a.add(f.subtract(a).multiplyBy(ss(zi)/b)),S),this.getScaleZoom(M/Ei(zi),S),{flyTo:!0})):this._move(t,i)._moveEnd(!0)}return this._moveStart(!0,o.noMoveStart),Ti.call(this),this},flyToBounds:function(t,i){var o=this._getBoundsCenterZoom(t,i);return this.flyTo(o.center,o.zoom,i)},setMaxBounds:function(t){return t=he(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var i=this.options.minZoom;return this.options.minZoom=t,this._loaded&&i!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var i=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&i!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,i){this._enforcingBounds=!0;var o=this.getCenter(),a=this._limitCenter(o,this._zoom,he(t));return o.equals(a)||this.panTo(a,i),this._enforcingBounds=!1,this},panInside:function(t,i){i=i||{};var o=U(i.paddingTopLeft||i.padding||[0,0]),a=U(i.paddingBottomRight||i.padding||[0,0]),f=this.project(this.getCenter()),_=this.project(t),S=this.getPixelBounds(),M=Z([S.min.add(o),S.max.subtract(a)]),j=M.getSize();if(!M.contains(_)){this._enforcingBounds=!0;var b=_.subtract(M.getCenter()),Y=M.extend(_).getSize().subtract(j);f.x+=b.x<0?-Y.x:Y.x,f.y+=b.y<0?-Y.y:Y.y,this.panTo(this.unproject(f),i),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=g({animate:!1,pan:!0},t===!0?{animate:!0}:t);var i=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var o=this.getSize(),a=i.divideBy(2).round(),f=o.divideBy(2).round(),_=a.subtract(f);return!_.x&&!_.y?this:(t.animate&&t.pan?this.panBy(_):(t.pan&&this._rawPanBy(_),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(w(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:i,newSize:o}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=g({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var i=w(this._handleGeolocationResponse,this),o=w(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(i,o,t):navigator.geolocation.getCurrentPosition(i,o,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var i=t.code,o=t.message||(i===1?"permission denied":i===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:i,message:"Geolocation error: "+o+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var i=t.coords.latitude,o=t.coords.longitude,a=new le(i,o),f=a.toBounds(t.coords.accuracy*2),_=this._locateOptions;if(_.setView){var S=this.getBoundsZoom(f);this.setView(a,_.maxZoom?Math.min(S,_.maxZoom):S)}var M={latlng:a,bounds:f,timestamp:t.timestamp};for(var j in t.coords)typeof t.coords[j]=="number"&&(M[j]=t.coords[j]);this.fire("locationfound",M)}},addHandler:function(t,i){if(!i)return this;var o=this[t]=new i(this);return this._handlers.push(o),this.options[t]&&o.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),We(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(ye(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)We(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,i){var o="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),a=ke("div",o,i||this._mapPane);return t&&(this._panes[t]=a),a},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),i=this.unproject(t.getBottomLeft()),o=this.unproject(t.getTopRight());return new de(i,o)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,i,o){t=he(t),o=U(o||[0,0]);var a=this.getZoom()||0,f=this.getMinZoom(),_=this.getMaxZoom(),S=t.getNorthWest(),M=t.getSouthEast(),j=this.getSize().subtract(o),b=Z(this.project(M,a),this.project(S,a)).getSize(),Y=ue.any3d?this.options.zoomSnap:1,pe=j.x/b.x,Le=j.y/b.y,at=i?Math.max(pe,Le):Math.min(pe,Le);return a=this.getScaleZoom(at,a),Y&&(a=Math.round(a/(Y/100))*(Y/100),a=i?Math.ceil(a/Y)*Y:Math.floor(a/Y)*Y),Math.max(f,Math.min(_,a))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new F(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,i){var o=this._getTopLeftPoint(t,i);return new E(o,o.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,i){var o=this.options.crs;return i=i===void 0?this._zoom:i,o.scale(t)/o.scale(i)},getScaleZoom:function(t,i){var o=this.options.crs;i=i===void 0?this._zoom:i;var a=o.zoom(t*o.scale(i));return isNaN(a)?1/0:a},project:function(t,i){return i=i===void 0?this._zoom:i,this.options.crs.latLngToPoint(ie(t),i)},unproject:function(t,i){return i=i===void 0?this._zoom:i,this.options.crs.pointToLatLng(U(t),i)},layerPointToLatLng:function(t){var i=U(t).add(this.getPixelOrigin());return this.unproject(i)},latLngToLayerPoint:function(t){var i=this.project(ie(t))._round();return i._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(ie(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(he(t))},distance:function(t,i){return this.options.crs.distance(ie(t),ie(i))},containerPointToLayerPoint:function(t){return U(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return U(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var i=this.containerPointToLayerPoint(U(t));return this.layerPointToLatLng(i)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ie(t)))},mouseEventToContainerPoint:function(t){return or(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var i=this._container=Ft(t);if(i){if(i._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");we(i,"scroll",this._onScroll,this),this._containerId=k(i)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&ue.any3d,Se(t,"leaflet-container"+(ue.touch?" leaflet-touch":"")+(ue.retina?" leaflet-retina":"")+(ue.ielt9?" leaflet-oldie":"")+(ue.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var i=er(t,"position");i!=="absolute"&&i!=="relative"&&i!=="fixed"&&i!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Je(this._mapPane,new F(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Se(t.markerPane,"leaflet-zoom-hide"),Se(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,i,o){Je(this._mapPane,new F(0,0));var a=!this._loaded;this._loaded=!0,i=this._limitZoom(i),this.fire("viewprereset");var f=this._zoom!==i;this._moveStart(f,o)._move(t,i)._moveEnd(f),this.fire("viewreset"),a&&this.fire("load")},_moveStart:function(t,i){return t&&this.fire("zoomstart"),i||this.fire("movestart"),this},_move:function(t,i,o,a){i===void 0&&(i=this._zoom);var f=this._zoom!==i;return this._zoom=i,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),a?o&&o.pinch&&this.fire("zoom",o):((f||o&&o.pinch)&&this.fire("zoom",o),this.fire("move",o)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return ye(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){Je(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[k(this._container)]=this;var i=t?Fe:we;i(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&i(window,"resize",this._onResize,this),ue.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){ye(this._resizeRequest),this._resizeRequest=Pe(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,i){for(var o=[],a,f=i==="mouseout"||i==="mouseover",_=t.target||t.srcElement,S=!1;_;){if(a=this._targets[k(_)],a&&(i==="click"||i==="preclick")&&this._draggableMoved(a)){S=!0;break}if(a&&a.listens(i,!0)&&(f&&!sr(_,t)||(o.push(a),f))||_===this._container)break;_=_.parentNode}return!o.length&&!S&&!f&&this.listens(i,!0)&&(o=[this]),o},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var i=t.target||t.srcElement;if(!(!this._loaded||i._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(i))){var o=t.type;o==="mousedown"&&pi(i),this._fireDOMEvent(t,o)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,i,o){if(t.type==="click"){var a=g({},t);a.type="preclick",this._fireDOMEvent(a,a.type,o)}var f=this._findEventTargets(t,i);if(o){for(var _=[],S=0;S<o.length;S++)o[S].listens(i,!0)&&_.push(o[S]);f=_.concat(f)}if(f.length){i==="contextmenu"&&Ke(t);var M=f[0],j={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var b=M.getLatLng&&(!M._radius||M._radius<=10);j.containerPoint=b?this.latLngToContainerPoint(M.getLatLng()):this.mouseEventToContainerPoint(t),j.layerPoint=this.containerPointToLayerPoint(j.containerPoint),j.latlng=b?M.getLatLng():this.layerPointToLatLng(j.layerPoint)}for(S=0;S<f.length;S++)if(f[S].fire(i,j,!0),j.originalEvent._stopped||f[S].options.bubblingMouseEvents===!1&&ee(this._mouseEvents,i)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,i=this._handlers.length;t<i;t++)this._handlers[t].disable()},whenReady:function(t,i){return this._loaded?t.call(i||this,{target:this}):this.on("load",t,i),this},_getMapPanePos:function(){return cn(this._mapPane)||new F(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,i){var o=t&&i!==void 0?this._getNewPixelOrigin(t,i):this.getPixelOrigin();return o.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,i){var o=this.getSize()._divideBy(2);return this.project(t,i)._subtract(o)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,i,o){var a=this._getNewPixelOrigin(o,i);return this.project(t,i)._subtract(a)},_latLngBoundsToNewLayerBounds:function(t,i,o){var a=this._getNewPixelOrigin(o,i);return Z([this.project(t.getSouthWest(),i)._subtract(a),this.project(t.getNorthWest(),i)._subtract(a),this.project(t.getSouthEast(),i)._subtract(a),this.project(t.getNorthEast(),i)._subtract(a)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,i,o){if(!o)return t;var a=this.project(t,i),f=this.getSize().divideBy(2),_=new E(a.subtract(f),a.add(f)),S=this._getBoundsOffset(_,o,i);return Math.abs(S.x)<=1&&Math.abs(S.y)<=1?t:this.unproject(a.add(S),i)},_limitOffset:function(t,i){if(!i)return t;var o=this.getPixelBounds(),a=new E(o.min.add(t),o.max.add(t));return t.add(this._getBoundsOffset(a,i))},_getBoundsOffset:function(t,i,o){var a=Z(this.project(i.getNorthEast(),o),this.project(i.getSouthWest(),o)),f=a.min.subtract(t.min),_=a.max.subtract(t.max),S=this._rebound(f.x,-_.x),M=this._rebound(f.y,-_.y);return new F(S,M)},_rebound:function(t,i){return t+i>0?Math.round(t-i)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(i))},_limitZoom:function(t){var i=this.getMinZoom(),o=this.getMaxZoom(),a=ue.any3d?this.options.zoomSnap:1;return a&&(t=Math.round(t/a)*a),Math.max(i,Math.min(o,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){be(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,i){var o=this._getCenterOffset(t)._trunc();return(i&&i.animate)!==!0&&!this.getSize().contains(o)?!1:(this.panBy(o,i),!0)},_createAnimProxy:function(){var t=this._proxy=ke("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(i){var o=Do,a=this._proxy.style[o];Zt(this._proxy,this.project(i.center,i.zoom),this.getZoomScale(i.zoom,1)),a===this._proxy.style[o]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){We(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),i=this.getZoom();Zt(this._proxy,this.project(t,i),this.getZoomScale(i,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,i,o){if(this._animatingZoom)return!0;if(o=o||{},!this._zoomAnimated||o.animate===!1||this._nothingToAnimate()||Math.abs(i-this._zoom)>this.options.zoomAnimationThreshold)return!1;var a=this.getZoomScale(i),f=this._getCenterOffset(t)._divideBy(1-1/a);return o.animate!==!0&&!this.getSize().contains(f)?!1:(Pe(function(){this._moveStart(!0,o.noMoveStart||!1)._animateZoom(t,i,!0)},this),!0)},_animateZoom:function(t,i,o,a){this._mapPane&&(o&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=i,Se(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:i,noUpdate:a}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(w(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&be(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Sn(t,i){return new Te(t,i)}var Lt=Oe.extend({options:{position:"topright"},initialize:function(t){H(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var i=this._map;return i&&i.removeControl(this),this.options.position=t,i&&i.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var i=this._container=this.onAdd(t),o=this.getPosition(),a=t._controlCorners[o];return Se(i,"leaflet-control"),o.indexOf("bottom")!==-1?a.insertBefore(i,a.firstChild):a.appendChild(i),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(We(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Pn=function(t){return new Lt(t)};Te.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},i="leaflet-",o=this._controlContainer=ke("div",i+"control-container",this._container);function a(f,_){var S=i+f+" "+i+_;t[f+_]=ke("div",S,o)}a("top","left"),a("top","right"),a("bottom","left"),a("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)We(this._controlCorners[t]);We(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Zo=Lt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,i,o,a){return o<a?-1:a<o?1:0}},initialize:function(t,i,o){H(this,o),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var a in t)this._addLayer(t[a],a);for(a in i)this._addLayer(i[a],a,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Lt.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,i){return this._addLayer(t,i),this._map?this._update():this},addOverlay:function(t,i){return this._addLayer(t,i,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var i=this._getLayer(k(t));return i&&this._layers.splice(this._layers.indexOf(i),1),this._map?this._update():this},expand:function(){Se(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(Se(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):be(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return be(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",i=this._container=ke("div",t),o=this.options.collapsed;i.setAttribute("aria-haspopup",!0),rr(i),Zr(i);var a=this._section=ke("section",t+"-list");o&&(this._map.on("click",this.collapse,this),we(i,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var f=this._layersLink=ke("a",t+"-toggle",i);f.href="#",f.title="Layers",f.setAttribute("role","button"),we(f,{keydown:function(_){_.keyCode===13&&this._expandSafely()},click:function(_){Ke(_),this._expandSafely()}},this),o||this.expand(),this._baseLayersList=ke("div",t+"-base",a),this._separator=ke("div",t+"-separator",a),this._overlaysList=ke("div",t+"-overlays",a),i.appendChild(a)},_getLayer:function(t){for(var i=0;i<this._layers.length;i++)if(this._layers[i]&&k(this._layers[i].layer)===t)return this._layers[i]},_addLayer:function(t,i,o){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:i,overlay:o}),this.options.sortLayers&&this._layers.sort(w(function(a,f){return this.options.sortFunction(a.layer,f.layer,a.name,f.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Rr(this._baseLayersList),Rr(this._overlaysList),this._layerControlInputs=[];var t,i,o,a,f=0;for(o=0;o<this._layers.length;o++)a=this._layers[o],this._addItem(a),i=i||a.overlay,t=t||!a.overlay,f+=a.overlay?0:1;return this.options.hideSingleBase&&(t=t&&f>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=i&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var i=this._getLayer(k(t.target)),o=i.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;o&&this._map.fire(o,i)},_createRadioElement:function(t,i){var o='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(i?' checked="checked"':"")+"/>",a=document.createElement("div");return a.innerHTML=o,a.firstChild},_addItem:function(t){var i=document.createElement("label"),o=this._map.hasLayer(t.layer),a;t.overlay?(a=document.createElement("input"),a.type="checkbox",a.className="leaflet-control-layers-selector",a.defaultChecked=o):a=this._createRadioElement("leaflet-base-layers_"+k(this),o),this._layerControlInputs.push(a),a.layerId=k(t.layer),we(a,"click",this._onInputClick,this);var f=document.createElement("span");f.innerHTML=" "+t.name;var _=document.createElement("span");i.appendChild(_),_.appendChild(a),_.appendChild(f);var S=t.overlay?this._overlaysList:this._baseLayersList;return S.appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,i,o,a=[],f=[];this._handlingClick=!0;for(var _=t.length-1;_>=0;_--)i=t[_],o=this._getLayer(i.layerId).layer,i.checked?a.push(o):i.checked||f.push(o);for(_=0;_<f.length;_++)this._map.hasLayer(f[_])&&this._map.removeLayer(f[_]);for(_=0;_<a.length;_++)this._map.hasLayer(a[_])||this._map.addLayer(a[_]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,i,o,a=this._map.getZoom(),f=t.length-1;f>=0;f--)i=t[f],o=this._getLayer(i.layerId).layer,i.disabled=o.options.minZoom!==void 0&&a<o.options.minZoom||o.options.maxZoom!==void 0&&a>o.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,we(t,"click",Ke),this.expand();var i=this;setTimeout(function(){Fe(t,"click",Ke),i._preventClick=!1})}}),Hr=function(t,i,o){return new Zo(t,i,o)},mi=Lt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var i="leaflet-control-zoom",o=ke("div",i+" leaflet-bar"),a=this.options;return this._zoomInButton=this._createButton(a.zoomInText,a.zoomInTitle,i+"-in",o,this._zoomIn),this._zoomOutButton=this._createButton(a.zoomOutText,a.zoomOutTitle,i+"-out",o,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),o},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,i,o,a,f){var _=ke("a",o,a);return _.innerHTML=t,_.href="#",_.title=i,_.setAttribute("role","button"),_.setAttribute("aria-label",i),rr(_),we(_,"click",bt),we(_,"click",f,this),we(_,"click",this._refocusOnMap,this),_},_updateDisabled:function(){var t=this._map,i="leaflet-disabled";be(this._zoomInButton,i),be(this._zoomOutButton,i),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(Se(this._zoomOutButton,i),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(Se(this._zoomInButton,i),this._zoomInButton.setAttribute("aria-disabled","true"))}});Te.mergeOptions({zoomControl:!0}),Te.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new mi,this.addControl(this.zoomControl))});var $s=function(t){return new mi(t)},yt=Lt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var i="leaflet-control-scale",o=ke("div",i),a=this.options;return this._addScales(a,i+"-line",o),t.on(a.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),o},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,i,o){t.metric&&(this._mScale=ke("div",i,o)),t.imperial&&(this._iScale=ke("div",i,o))},_update:function(){var t=this._map,i=t.getSize().y/2,o=t.distance(t.containerPointToLatLng([0,i]),t.containerPointToLatLng([this.options.maxWidth,i]));this._updateScales(o)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var i=this._getRoundNum(t),o=i<1e3?i+" m":i/1e3+" km";this._updateScale(this._mScale,o,i/t)},_updateImperial:function(t){var i=t*3.2808399,o,a,f;i>5280?(o=i/5280,a=this._getRoundNum(o),this._updateScale(this._iScale,a+" mi",a/o)):(f=this._getRoundNum(i),this._updateScale(this._iScale,f+" ft",f/i))},_updateScale:function(t,i,o){t.style.width=Math.round(this.options.maxWidth*o)+"px",t.innerHTML=i},_getRoundNum:function(t){var i=Math.pow(10,(Math.floor(t)+"").length-1),o=t/i;return o=o>=10?10:o>=5?5:o>=3?3:o>=2?2:1,i*o}}),gi=function(t){return new yt(t)},Uo='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Un=Lt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ue.inlineSvg?Uo+" ":"")+"Leaflet</a>"},initialize:function(t){H(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=ke("div","leaflet-control-attribution"),rr(this._container);for(var i in t._layers)t._layers[i].getAttribution&&this.addAttribution(t._layers[i].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var i in this._attributions)this._attributions[i]&&t.push(i);var o=[];this.options.prefix&&o.push(this.options.prefix),t.length&&o.push(t.join(", ")),this._container.innerHTML=o.join(' <span aria-hidden="true">|</span> ')}}});Te.mergeOptions({attributionControl:!0}),Te.addInitHook(function(){this.options.attributionControl&&new Un().addTo(this)});var cl=function(t){return new Un(t)};Lt.Layers=Zo,Lt.Zoom=mi,Lt.Scale=yt,Lt.Attribution=Un,Pn.layers=Hr,Pn.zoom=$s,Pn.scale=gi,Pn.attribution=cl;var Nt=Oe.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Nt.addTo=function(t,i){return t.addHandler(i,this),this};var bo={Events:Ie},_i=ue.touch?"touchstart mousedown":"mousedown",Ht=Re.extend({options:{clickTolerance:3},initialize:function(t,i,o,a){H(this,a),this._element=t,this._dragStartTarget=i||t,this._preventOutline=o},enable:function(){this._enabled||(we(this._dragStartTarget,_i,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ht._dragging===this&&this.finishDrag(!0),Fe(this._dragStartTarget,_i,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!hi(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){Ht._dragging===this&&this.finishDrag();return}if(!(Ht._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(Ht._dragging=this,this._preventOutline&&pi(this._element),Ar(),Me(),!this._moving)){this.fire("down");var i=t.touches?t.touches[0]:t,o=hn(this._element);this._startPoint=new F(i.clientX,i.clientY),this._startPos=cn(this._element),this._parentScale=Qt(o);var a=t.type==="mousedown";we(document,a?"mousemove":"touchmove",this._onMove,this),we(document,a?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var i=t.touches&&t.touches.length===1?t.touches[0]:t,o=new F(i.clientX,i.clientY)._subtract(this._startPoint);!o.x&&!o.y||Math.abs(o.x)+Math.abs(o.y)<this.options.clickTolerance||(o.x/=this._parentScale.x,o.y/=this._parentScale.y,Ke(t),this._moved||(this.fire("dragstart"),this._moved=!0,Se(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Se(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(o),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),Je(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){be(document.body,"leaflet-dragging"),this._lastTarget&&(be(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Fe(document,"mousemove touchmove",this._onMove,this),Fe(document,"mouseup touchend touchcancel",this._onUp,this),Br(),di();var i=this._moved&&this._moving;this._moving=!1,Ht._dragging=!1,i&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function Ho(t,i,o){var a,f=[1,4,2,8],_,S,M,j,b,Y,pe,Le;for(_=0,Y=t.length;_<Y;_++)t[_]._code=bn(t[_],i);for(M=0;M<4;M++){for(pe=f[M],a=[],_=0,Y=t.length,S=Y-1;_<Y;S=_++)j=t[_],b=t[S],j._code&pe?b._code&pe||(Le=Gr(b,j,pe,i,o),Le._code=bn(Le,i),a.push(Le)):(b._code&pe&&(Le=Gr(b,j,pe,i,o),Le._code=bn(Le,i),a.push(Le)),a.push(j));t=a}return t}function Ks(t,i){var o,a,f,_,S,M,j,b,Y;if(!t||t.length===0)throw new Error("latlngs not passed");Ot(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var pe=ie([0,0]),Le=he(t),at=Le.getNorthWest().distanceTo(Le.getSouthWest())*Le.getNorthEast().distanceTo(Le.getNorthWest());at<1700&&(pe=Wo(t));var tt=t.length,Et=[];for(o=0;o<tt;o++){var wt=ie(t[o]);Et.push(i.project(ie([wt.lat-pe.lat,wt.lng-pe.lng])))}for(M=j=b=0,o=0,a=tt-1;o<tt;a=o++)f=Et[o],_=Et[a],S=f.y*_.x-_.y*f.x,j+=(f.x+_.x)*S,b+=(f.y+_.y)*S,M+=S*3;M===0?Y=Et[0]:Y=[j/M,b/M];var Ei=i.unproject(U(Y));return ie([Ei.lat+pe.lat,Ei.lng+pe.lng])}function Wo(t){for(var i=0,o=0,a=0,f=0;f<t.length;f++){var _=ie(t[f]);i+=_.lat,o+=_.lng,a++}return ie([i/a,o/a])}var hl={__proto__:null,clipPolygon:Ho,polygonCenter:Ks,centroid:Wo};function Wr(t,i){if(!i||!t.length)return t.slice();var o=i*i;return t=pl(t,o),t=dl(t,o),t}function qs(t,i,o){return Math.sqrt(Hn(t,i,o,!0))}function fl(t,i,o){return Hn(t,i,o)}function dl(t,i){var o=t.length,a=typeof Uint8Array<"u"?Uint8Array:Array,f=new a(o);f[0]=f[o-1]=1,Go(t,f,i,0,o-1);var _,S=[];for(_=0;_<o;_++)f[_]&&S.push(t[_]);return S}function Go(t,i,o,a,f){var _=0,S,M,j;for(M=a+1;M<=f-1;M++)j=Hn(t[M],t[a],t[f],!0),j>_&&(S=M,_=j);_>o&&(i[S]=1,Go(t,i,o,a,S),Go(t,i,o,S,f))}function pl(t,i){for(var o=[t[0]],a=1,f=0,_=t.length;a<_;a++)ml(t[a],t[f])>i&&(o.push(t[a]),f=a);return f<_-1&&o.push(t[_-1]),o}var Vo;function Qs(t,i,o,a,f){var _=a?Vo:bn(t,o),S=bn(i,o),M,j,b;for(Vo=S;;){if(!(_|S))return[t,i];if(_&S)return!1;M=_||S,j=Gr(t,i,M,o,f),b=bn(j,o),M===_?(t=j,_=b):(i=j,S=b)}}function Gr(t,i,o,a,f){var _=i.x-t.x,S=i.y-t.y,M=a.min,j=a.max,b,Y;return o&8?(b=t.x+_*(j.y-t.y)/S,Y=j.y):o&4?(b=t.x+_*(M.y-t.y)/S,Y=M.y):o&2?(b=j.x,Y=t.y+S*(j.x-t.x)/_):o&1&&(b=M.x,Y=t.y+S*(M.x-t.x)/_),new F(b,Y,f)}function bn(t,i){var o=0;return t.x<i.min.x?o|=1:t.x>i.max.x&&(o|=2),t.y<i.min.y?o|=4:t.y>i.max.y&&(o|=8),o}function ml(t,i){var o=i.x-t.x,a=i.y-t.y;return o*o+a*a}function Hn(t,i,o,a){var f=i.x,_=i.y,S=o.x-f,M=o.y-_,j=S*S+M*M,b;return j>0&&(b=((t.x-f)*S+(t.y-_)*M)/j,b>1?(f=o.x,_=o.y):b>0&&(f+=S*b,_+=M*b)),S=t.x-f,M=t.y-_,a?S*S+M*M:new F(f,_)}function Ot(t){return!J(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function Js(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ot(t)}function Ys(t,i){var o,a,f,_,S,M,j,b;if(!t||t.length===0)throw new Error("latlngs not passed");Ot(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var Y=ie([0,0]),pe=he(t),Le=pe.getNorthWest().distanceTo(pe.getSouthWest())*pe.getNorthEast().distanceTo(pe.getNorthWest());Le<1700&&(Y=Wo(t));var at=t.length,tt=[];for(o=0;o<at;o++){var Et=ie(t[o]);tt.push(i.project(ie([Et.lat-Y.lat,Et.lng-Y.lng])))}for(o=0,a=0;o<at-1;o++)a+=tt[o].distanceTo(tt[o+1])/2;if(a===0)b=tt[0];else for(o=0,_=0;o<at-1;o++)if(S=tt[o],M=tt[o+1],f=S.distanceTo(M),_+=f,_>a){j=(_-a)/f,b=[M.x-j*(M.x-S.x),M.y-j*(M.y-S.y)];break}var wt=i.unproject(U(b));return ie([wt.lat+Y.lat,wt.lng+Y.lng])}var Xs={__proto__:null,simplify:Wr,pointToSegmentDistance:qs,closestPointOnSegment:fl,clipSegment:Qs,_getEdgeIntersection:Gr,_getBitCode:bn,_sqClosestPointOnSegment:Hn,isFlat:Ot,_flat:Js,polylineCenter:Ys},$o={project:function(t){return new F(t.lng,t.lat)},unproject:function(t){return new le(t.y,t.x)},bounds:new E([-180,-90],[180,90])},Ko={R:6378137,R_MINOR:6356752314245179e-9,bounds:new E([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var i=Math.PI/180,o=this.R,a=t.lat*i,f=this.R_MINOR/o,_=Math.sqrt(1-f*f),S=_*Math.sin(a),M=Math.tan(Math.PI/4-a/2)/Math.pow((1-S)/(1+S),_/2);return a=-o*Math.log(Math.max(M,1e-10)),new F(t.lng*i*o,a)},unproject:function(t){for(var i=180/Math.PI,o=this.R,a=this.R_MINOR/o,f=Math.sqrt(1-a*a),_=Math.exp(-t.y/o),S=Math.PI/2-2*Math.atan(_),M=0,j=.1,b;M<15&&Math.abs(j)>1e-7;M++)b=f*Math.sin(S),b=Math.pow((1-b)/(1+b),f/2),j=Math.PI/2-2*Math.atan(_*b)-S,S+=j;return new le(S*i,t.x*i/o)}},gl={__proto__:null,LonLat:$o,Mercator:Ko,SphericalMercator:dt},_l=g({},Ce,{code:"EPSG:3395",projection:Ko,transformation:function(){var t=.5/(Math.PI*Ko.R);return ri(t,.5,-t,.5)}()}),ea=g({},Ce,{code:"EPSG:4326",projection:$o,transformation:ri(1/180,1,-1/180,.5)}),vl=g({},ze,{projection:$o,transformation:ri(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,i){var o=i.lng-t.lng,a=i.lat-t.lat;return Math.sqrt(o*o+a*a)},infinite:!0});ze.Earth=Ce,ze.EPSG3395=_l,ze.EPSG3857=oi,ze.EPSG900913=xo,ze.EPSG4326=ea,ze.Simple=vl;var Wt=Re.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[k(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[k(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var i=t.target;if(i.hasLayer(this)){if(this._map=i,this._zoomAnimated=i._zoomAnimated,this.getEvents){var o=this.getEvents();i.on(o,this),this.once("remove",function(){i.off(o,this)},this)}this.onAdd(i),this.fire("add"),i.fire("layeradd",{layer:this})}}});Te.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var i=k(t);return this._layers[i]?this:(this._layers[i]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var i=k(t);return this._layers[i]?(this._loaded&&t.onRemove(this),delete this._layers[i],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return k(t)in this._layers},eachLayer:function(t,i){for(var o in this._layers)t.call(i,this._layers[o]);return this},_addLayers:function(t){t=t?J(t)?t:[t]:[];for(var i=0,o=t.length;i<o;i++)this.addLayer(t[i])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[k(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var i=k(t);this._zoomBoundLayers[i]&&(delete this._zoomBoundLayers[i],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,i=-1/0,o=this._getZoomSpan();for(var a in this._zoomBoundLayers){var f=this._zoomBoundLayers[a].options;t=f.minZoom===void 0?t:Math.min(t,f.minZoom),i=f.maxZoom===void 0?i:Math.max(i,f.maxZoom)}this._layersMaxZoom=i===-1/0?void 0:i,this._layersMinZoom=t===1/0?void 0:t,o!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var kn=Wt.extend({initialize:function(t,i){H(this,i),this._layers={};var o,a;if(t)for(o=0,a=t.length;o<a;o++)this.addLayer(t[o])},addLayer:function(t){var i=this.getLayerId(t);return this._layers[i]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var i=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[i]&&this._map.removeLayer(this._layers[i]),delete this._layers[i],this},hasLayer:function(t){var i=typeof t=="number"?t:this.getLayerId(t);return i in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var i=Array.prototype.slice.call(arguments,1),o,a;for(o in this._layers)a=this._layers[o],a[t]&&a[t].apply(a,i);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,i){for(var o in this._layers)t.call(i,this._layers[o]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return k(t)}}),ar=function(t,i){return new kn(t,i)},fn=kn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),kn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),kn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new de;for(var i in this._layers){var o=this._layers[i];t.extend(o.getBounds?o.getBounds():o.getLatLng())}return t}}),ta=function(t,i){return new fn(t,i)},Wn=Oe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){H(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,i){var o=this._getIconUrl(t);if(!o){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var a=this._createImg(o,i&&i.tagName==="IMG"?i:null);return this._setIconStyles(a,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),a},_setIconStyles:function(t,i){var o=this.options,a=o[i+"Size"];typeof a=="number"&&(a=[a,a]);var f=U(a),_=U(i==="shadow"&&o.shadowAnchor||o.iconAnchor||f&&f.divideBy(2,!0));t.className="leaflet-marker-"+i+" "+(o.className||""),_&&(t.style.marginLeft=-_.x+"px",t.style.marginTop=-_.y+"px"),f&&(t.style.width=f.x+"px",t.style.height=f.y+"px")},_createImg:function(t,i){return i=i||document.createElement("img"),i.src=t,i},_getIconUrl:function(t){return ue.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function na(t){return new Wn(t)}var vi=Wn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof vi.imagePath!="string"&&(vi.imagePath=this._detectIconPath()),(this.options.imagePath||vi.imagePath)+Wn.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var i=function(o,a,f){var _=a.exec(o);return _&&_[f]};return t=i(t,/^url\((['"])?(.+)\1\)$/,2),t&&i(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=ke("div","leaflet-default-icon-path",document.body),i=er(t,"background-image")||er(t,"backgroundImage");if(document.body.removeChild(t),i=this._stripUrl(i),i)return i;var o=document.querySelector('link[href$="leaflet.css"]');return o?o.href.substring(0,o.href.length-11-1):""}}),qo=Nt.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Ht(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Se(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&be(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var i=this._marker,o=i._map,a=this._marker.options.autoPanSpeed,f=this._marker.options.autoPanPadding,_=cn(i._icon),S=o.getPixelBounds(),M=o.getPixelOrigin(),j=Z(S.min._subtract(M).add(f),S.max._subtract(M).subtract(f));if(!j.contains(_)){var b=U((Math.max(j.max.x,_.x)-j.max.x)/(S.max.x-j.max.x)-(Math.min(j.min.x,_.x)-j.min.x)/(S.min.x-j.min.x),(Math.max(j.max.y,_.y)-j.max.y)/(S.max.y-j.max.y)-(Math.min(j.min.y,_.y)-j.min.y)/(S.min.y-j.min.y)).multiplyBy(a);o.panBy(b,{animate:!1}),this._draggable._newPos._add(b),this._draggable._startPos._add(b),Je(i._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=Pe(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(ye(this._panRequest),this._panRequest=Pe(this._adjustPan.bind(this,t)))},_onDrag:function(t){var i=this._marker,o=i._shadow,a=cn(i._icon),f=i._map.layerPointToLatLng(a);o&&Je(o,a),i._latlng=f,t.latlng=f,t.oldLatLng=this._oldLatLng,i.fire("move",t).fire("drag",t)},_onDragEnd:function(t){ye(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),dn=Wt.extend({options:{icon:new vi,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,i){H(this,i),this._latlng=ie(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var i=this._latlng;return this._latlng=ie(t),this.update(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,i="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),o=t.icon.createIcon(this._icon),a=!1;o!==this._icon&&(this._icon&&this._removeIcon(),a=!0,t.title&&(o.title=t.title),o.tagName==="IMG"&&(o.alt=t.alt||"")),Se(o,i),t.keyboard&&(o.tabIndex="0",o.setAttribute("role","button")),this._icon=o,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&we(o,"focus",this._panOnFocus,this);var f=t.icon.createShadow(this._shadow),_=!1;f!==this._shadow&&(this._removeShadow(),_=!0),f&&(Se(f,i),f.alt=""),this._shadow=f,t.opacity<1&&this._updateOpacity(),a&&this.getPane().appendChild(this._icon),this._initInteraction(),f&&_&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Fe(this._icon,"focus",this._panOnFocus,this),We(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&We(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&Je(this._icon,t),this._shadow&&Je(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(i)},_initInteraction:function(){if(this.options.interactive&&(Se(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),qo)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new qo(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&vt(this._icon,t),this._shadow&&vt(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var i=this.options.icon.options,o=i.iconSize?U(i.iconSize):U(0,0),a=i.iconAnchor?U(i.iconAnchor):U(0,0);t.panInside(this._latlng,{paddingTopLeft:a,paddingBottomRight:o.subtract(a)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function yl(t,i){return new dn(t,i)}var Ln=Wt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return H(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Vr=Ln.extend({options:{fill:!0,radius:10},initialize:function(t,i){H(this,i),this._latlng=ie(t),this._radius=this.options.radius},setLatLng:function(t){var i=this._latlng;return this._latlng=ie(t),this.redraw(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var i=t&&t.radius||this._radius;return Ln.prototype.setStyle.call(this,t),this.setRadius(i),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,i=this._radiusY||t,o=this._clickTolerance(),a=[t+o,i+o];this._pxBounds=new E(this._point.subtract(a),this._point.add(a))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ia(t,i){return new Vr(t,i)}var $r=Vr.extend({initialize:function(t,i,o){if(typeof i=="number"&&(i=g({},o,{radius:i})),H(this,i),this._latlng=ie(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new de(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Ln.prototype.setStyle,_project:function(){var t=this._latlng.lng,i=this._latlng.lat,o=this._map,a=o.options.crs;if(a.distance===Ce.distance){var f=Math.PI/180,_=this._mRadius/Ce.R/f,S=o.project([i+_,t]),M=o.project([i-_,t]),j=S.add(M).divideBy(2),b=o.unproject(j).lat,Y=Math.acos((Math.cos(_*f)-Math.sin(i*f)*Math.sin(b*f))/(Math.cos(i*f)*Math.cos(b*f)))/f;(isNaN(Y)||Y===0)&&(Y=_/Math.cos(Math.PI/180*i)),this._point=j.subtract(o.getPixelOrigin()),this._radius=isNaN(Y)?0:j.x-o.project([b,t-Y]).x,this._radiusY=j.y-S.y}else{var pe=a.unproject(a.project(this._latlng).subtract([this._mRadius,0]));this._point=o.latLngToLayerPoint(this._latlng),this._radius=this._point.x-o.latLngToLayerPoint(pe).x}this._updateBounds()}});function lr(t,i,o){return new $r(t,i,o)}var Ct=Ln.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,i){H(this,i),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var i=1/0,o=null,a=Hn,f,_,S=0,M=this._parts.length;S<M;S++)for(var j=this._parts[S],b=1,Y=j.length;b<Y;b++){f=j[b-1],_=j[b];var pe=a(t,f,_,!0);pe<i&&(i=pe,o=a(t,f,_))}return o&&(o.distance=Math.sqrt(i)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ys(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,i){return i=i||this._defaultShape(),t=ie(t),i.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new de,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Ot(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var i=[],o=Ot(t),a=0,f=t.length;a<f;a++)o?(i[a]=ie(t[a]),this._bounds.extend(i[a])):i[a]=this._convertLatLngs(t[a]);return i},_project:function(){var t=new E;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),i=new F(t,t);this._rawPxBounds&&(this._pxBounds=new E([this._rawPxBounds.min.subtract(i),this._rawPxBounds.max.add(i)]))},_projectLatlngs:function(t,i,o){var a=t[0]instanceof le,f=t.length,_,S;if(a){for(S=[],_=0;_<f;_++)S[_]=this._map.latLngToLayerPoint(t[_]),o.extend(S[_]);i.push(S)}else for(_=0;_<f;_++)this._projectLatlngs(t[_],i,o)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var i=this._parts,o,a,f,_,S,M,j;for(o=0,f=0,_=this._rings.length;o<_;o++)for(j=this._rings[o],a=0,S=j.length;a<S-1;a++)M=Qs(j[a],j[a+1],t,a,!0),M&&(i[f]=i[f]||[],i[f].push(M[0]),(M[1]!==j[a+1]||a===S-2)&&(i[f].push(M[1]),f++))}},_simplifyPoints:function(){for(var t=this._parts,i=this.options.smoothFactor,o=0,a=t.length;o<a;o++)t[o]=Wr(t[o],i)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,i){var o,a,f,_,S,M,j=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(o=0,_=this._parts.length;o<_;o++)for(M=this._parts[o],a=0,S=M.length,f=S-1;a<S;f=a++)if(!(!i&&a===0)&&qs(t,M[f],M[a])<=j)return!0;return!1}});function wl(t,i){return new Ct(t,i)}Ct._flat=Js;var pn=Ct.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ks(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var i=Ct.prototype._convertLatLngs.call(this,t),o=i.length;return o>=2&&i[0]instanceof le&&i[0].equals(i[o-1])&&i.pop(),i},_setLatLngs:function(t){Ct.prototype._setLatLngs.call(this,t),Ot(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ot(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,i=this.options.weight,o=new F(i,i);if(t=new E(t.min.subtract(o),t.max.add(o)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var a=0,f=this._rings.length,_;a<f;a++)_=Ho(this._rings[a],t,!0),_.length&&this._parts.push(_)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var i=!1,o,a,f,_,S,M,j,b;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(_=0,j=this._parts.length;_<j;_++)for(o=this._parts[_],S=0,b=o.length,M=b-1;S<b;M=S++)a=o[S],f=o[M],a.y>t.y!=f.y>t.y&&t.x<(f.x-a.x)*(t.y-a.y)/(f.y-a.y)+a.x&&(i=!i);return i||Ct.prototype._containsPoint.call(this,t,!0)}});function xl(t,i){return new pn(t,i)}var Yt=fn.extend({initialize:function(t,i){H(this,i),this._layers={},t&&this.addData(t)},addData:function(t){var i=J(t)?t:t.features,o,a,f;if(i){for(o=0,a=i.length;o<a;o++)f=i[o],(f.geometries||f.geometry||f.features||f.coordinates)&&this.addData(f);return this}var _=this.options;if(_.filter&&!_.filter(t))return this;var S=yi(t,_);return S?(S.feature=Yr(t),S.defaultOptions=S.options,this.resetStyle(S),_.onEachFeature&&_.onEachFeature(t,S),this.addLayer(S)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=g({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(i){this._setLayerStyle(i,t)},this)},_setLayerStyle:function(t,i){t.setStyle&&(typeof i=="function"&&(i=i(t.feature)),t.setStyle(i))}});function yi(t,i){var o=t.type==="Feature"?t.geometry:t,a=o?o.coordinates:null,f=[],_=i&&i.pointToLayer,S=i&&i.coordsToLatLng||qr,M,j,b,Y;if(!a&&!o)return null;switch(o.type){case"Point":return M=S(a),Kr(_,t,M,i);case"MultiPoint":for(b=0,Y=a.length;b<Y;b++)M=S(a[b]),f.push(Kr(_,t,M,i));return new fn(f);case"LineString":case"MultiLineString":return j=ur(a,o.type==="LineString"?0:1,S),new Ct(j,i);case"Polygon":case"MultiPolygon":return j=ur(a,o.type==="Polygon"?1:2,S),new pn(j,i);case"GeometryCollection":for(b=0,Y=o.geometries.length;b<Y;b++){var pe=yi({geometry:o.geometries[b],type:"Feature",properties:t.properties},i);pe&&f.push(pe)}return new fn(f);case"FeatureCollection":for(b=0,Y=o.features.length;b<Y;b++){var Le=yi(o.features[b],i);Le&&f.push(Le)}return new fn(f);default:throw new Error("Invalid GeoJSON object.")}}function Kr(t,i,o,a){return t?t(i,o):new dn(o,a&&a.markersInheritOptions&&a)}function qr(t){return new le(t[1],t[0],t[2])}function ur(t,i,o){for(var a=[],f=0,_=t.length,S;f<_;f++)S=i?ur(t[f],i-1,o):(o||qr)(t[f]),a.push(S);return a}function Qr(t,i){return t=ie(t),t.alt!==void 0?[W(t.lng,i),W(t.lat,i),W(t.alt,i)]:[W(t.lng,i),W(t.lat,i)]}function Jr(t,i,o,a){for(var f=[],_=0,S=t.length;_<S;_++)f.push(i?Jr(t[_],Ot(t[_])?0:i-1,o,a):Qr(t[_],a));return!i&&o&&f.length>0&&f.push(f[0].slice()),f}function wi(t,i){return t.feature?g({},t.feature,{geometry:i}):Yr(i)}function Yr(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var Qo={toGeoJSON:function(t){return wi(this,{type:"Point",coordinates:Qr(this.getLatLng(),t)})}};dn.include(Qo),$r.include(Qo),Vr.include(Qo),Ct.include({toGeoJSON:function(t){var i=!Ot(this._latlngs),o=Jr(this._latlngs,i?1:0,!1,t);return wi(this,{type:(i?"Multi":"")+"LineString",coordinates:o})}}),pn.include({toGeoJSON:function(t){var i=!Ot(this._latlngs),o=i&&!Ot(this._latlngs[0]),a=Jr(this._latlngs,o?2:i?1:0,!0,t);return i||(a=[a]),wi(this,{type:(o?"Multi":"")+"Polygon",coordinates:a})}}),kn.include({toMultiPoint:function(t){var i=[];return this.eachLayer(function(o){i.push(o.toGeoJSON(t).geometry.coordinates)}),wi(this,{type:"MultiPoint",coordinates:i})},toGeoJSON:function(t){var i=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(i==="MultiPoint")return this.toMultiPoint(t);var o=i==="GeometryCollection",a=[];return this.eachLayer(function(f){if(f.toGeoJSON){var _=f.toGeoJSON(t);if(o)a.push(_.geometry);else{var S=Yr(_);S.type==="FeatureCollection"?a.push.apply(a,S.features):a.push(S)}}}),o?wi(this,{geometries:a,type:"GeometryCollection"}):{type:"FeatureCollection",features:a}}});function ra(t,i){return new Yt(t,i)}var Gt=ra,Cn=Wt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,i,o){this._url=t,this._bounds=he(i),H(this,o)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Se(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){We(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&ci(this._image),this},bringToBack:function(){return this._map&&un(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=he(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",i=this._image=t?this._url:ke("img");if(Se(i,"leaflet-image-layer"),this._zoomAnimated&&Se(i,"leaflet-zoom-animated"),this.options.className&&Se(i,this.options.className),i.onselectstart=N,i.onmousemove=N,i.onload=w(this.fire,this,"load"),i.onerror=w(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(i.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=i.src;return}i.src=this._url,i.alt=this.options.alt},_animateZoom:function(t){var i=this._map.getZoomScale(t.zoom),o=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Zt(this._image,o,i)},_reset:function(){var t=this._image,i=new E(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),o=i.getSize();Je(t,i.min),t.style.width=o.x+"px",t.style.height=o.y+"px"},_updateOpacity:function(){vt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),oa=function(t,i,o){return new Cn(t,i,o)},Jo=Cn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",i=this._image=t?this._url:ke("video");if(Se(i,"leaflet-image-layer"),this._zoomAnimated&&Se(i,"leaflet-zoom-animated"),this.options.className&&Se(i,this.options.className),i.onselectstart=N,i.onmousemove=N,i.onloadeddata=w(this.fire,this,"load"),t){for(var o=i.getElementsByTagName("source"),a=[],f=0;f<o.length;f++)a.push(o[f].src);this._url=o.length>0?a:[i.src];return}J(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(i.style,"objectFit")&&(i.style.objectFit="fill"),i.autoplay=!!this.options.autoplay,i.loop=!!this.options.loop,i.muted=!!this.options.muted,i.playsInline=!!this.options.playsInline;for(var _=0;_<this._url.length;_++){var S=ke("source");S.src=this._url[_],i.appendChild(S)}}});function sa(t,i,o){return new Jo(t,i,o)}var Yo=Cn.extend({_initImage:function(){var t=this._image=this._url;Se(t,"leaflet-image-layer"),this._zoomAnimated&&Se(t,"leaflet-zoom-animated"),this.options.className&&Se(t,this.options.className),t.onselectstart=N,t.onmousemove=N}});function Xo(t,i,o){return new Yo(t,i,o)}var Xt=Wt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,i){t&&(t instanceof le||J(t))?(this._latlng=ie(t),H(this,i)):(H(this,t),this._source=i),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&vt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&vt(this._container,1),this.bringToFront(),this.options.interactive&&(Se(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(vt(this._container,0),this._removeTimeout=setTimeout(w(We,void 0,this._container),200)):We(this._container),this.options.interactive&&(be(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=ie(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ci(this._container),this},bringToBack:function(){return this._map&&un(this._container),this},_prepareOpen:function(t){var i=this._source;if(!i._map)return!1;if(i instanceof fn){i=null;var o=this._source._layers;for(var a in o)if(o[a]._map){i=o[a];break}if(!i)return!1;this._source=i}if(!t)if(i.getCenter)t=i.getCenter();else if(i.getLatLng)t=i.getLatLng();else if(i.getBounds)t=i.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,i=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof i=="string")t.innerHTML=i;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(i)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),i=U(this.options.offset),o=this._getAnchor();this._zoomAnimated?Je(this._container,t.add(o)):i=i.add(t).add(o);var a=this._containerBottom=-i.y,f=this._containerLeft=-Math.round(this._containerWidth/2)+i.x;this._container.style.bottom=a+"px",this._container.style.left=f+"px"}},_getAnchor:function(){return[0,0]}});Te.include({_initOverlay:function(t,i,o,a){var f=i;return f instanceof t||(f=new t(a).setContent(i)),o&&f.setLatLng(o),f}}),Wt.include({_initOverlay:function(t,i,o,a){var f=o;return f instanceof t?(H(f,a),f._source=this):(f=i&&!a?i:new t(a,this),f.setContent(o)),f}});var Xr=Xt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Xt.prototype.openOn.call(this,t)},onAdd:function(t){Xt.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ln||this._source.on("preclick",Jt))},onRemove:function(t){Xt.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ln||this._source.off("preclick",Jt))},getEvents:function(){var t=Xt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",i=this._container=ke("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),o=this._wrapper=ke("div",t+"-content-wrapper",i);if(this._contentNode=ke("div",t+"-content",o),rr(i),Zr(this._contentNode),we(i,"contextmenu",Jt),this._tipContainer=ke("div",t+"-tip-container",i),this._tip=ke("div",t+"-tip",this._tipContainer),this.options.closeButton){var a=this._closeButton=ke("a",t+"-close-button",i);a.setAttribute("role","button"),a.setAttribute("aria-label","Close popup"),a.href="#close",a.innerHTML='<span aria-hidden="true">&#215;</span>',we(a,"click",function(f){Ke(f),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,i=t.style;i.width="",i.whiteSpace="nowrap";var o=t.offsetWidth;o=Math.min(o,this.options.maxWidth),o=Math.max(o,this.options.minWidth),i.width=o+1+"px",i.whiteSpace="",i.height="";var a=t.offsetHeight,f=this.options.maxHeight,_="leaflet-popup-scrolled";f&&a>f?(i.height=f+"px",Se(t,_)):be(t,_),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),o=this._getAnchor();Je(this._container,i.add(o))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,i=parseInt(er(this._container,"marginBottom"),10)||0,o=this._container.offsetHeight+i,a=this._containerWidth,f=new F(this._containerLeft,-o-this._containerBottom);f._add(cn(this._container));var _=t.layerPointToContainerPoint(f),S=U(this.options.autoPanPadding),M=U(this.options.autoPanPaddingTopLeft||S),j=U(this.options.autoPanPaddingBottomRight||S),b=t.getSize(),Y=0,pe=0;_.x+a+j.x>b.x&&(Y=_.x+a-b.x+j.x),_.x-Y-M.x<0&&(Y=_.x-M.x),_.y+o+j.y>b.y&&(pe=_.y+o-b.y+j.y),_.y-pe-M.y<0&&(pe=_.y-M.y),(Y||pe)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([Y,pe]))}},_getAnchor:function(){return U(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),xi=function(t,i){return new Xr(t,i)};Te.mergeOptions({closePopupOnClick:!0}),Te.include({openPopup:function(t,i,o){return this._initOverlay(Xr,t,i,o).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),Wt.include({bindPopup:function(t,i){return this._popup=this._initOverlay(Xr,this._popup,t,i),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof fn||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){bt(t);var i=t.layer||t.target;if(this._popup._source===i&&!(i instanceof Ln)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=i,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Si=Xt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Xt.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Xt.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Xt.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",i=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ke("div",i),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+k(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var i,o,a=this._map,f=this._container,_=a.latLngToContainerPoint(a.getCenter()),S=a.layerPointToContainerPoint(t),M=this.options.direction,j=f.offsetWidth,b=f.offsetHeight,Y=U(this.options.offset),pe=this._getAnchor();M==="top"?(i=j/2,o=b):M==="bottom"?(i=j/2,o=0):M==="center"?(i=j/2,o=b/2):M==="right"?(i=0,o=b/2):M==="left"?(i=j,o=b/2):S.x<_.x?(M="right",i=0,o=b/2):(M="left",i=j+(Y.x+pe.x)*2,o=b/2),t=t.subtract(U(i,o,!0)).add(Y).add(pe),be(f,"leaflet-tooltip-right"),be(f,"leaflet-tooltip-left"),be(f,"leaflet-tooltip-top"),be(f,"leaflet-tooltip-bottom"),Se(f,"leaflet-tooltip-"+M),Je(f,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&vt(this._container,t)},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(i)},_getAnchor:function(){return U(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),cr=function(t,i){return new Si(t,i)};Te.include({openTooltip:function(t,i,o){return this._initOverlay(Si,t,i,o).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Wt.include({bindTooltip:function(t,i){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Si,this._tooltip,t,i),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var i=t?"off":"on",o={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?o.add=this._openTooltip:(o.mouseover=this._openTooltip,o.mouseout=this.closeTooltip,o.click=this._openTooltip,this._map?this._addFocusListeners():o.add=this._addFocusListeners),this._tooltip.options.sticky&&(o.mousemove=this._moveTooltip),this[i](o),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof fn||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var i=typeof t.getElement=="function"&&t.getElement();i&&(we(i,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),we(i,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var i=typeof t.getElement=="function"&&t.getElement();i&&i.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var i=this;this._map.once("moveend",function(){i._openOnceFlag=!1,i._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var i=t.latlng,o,a;this._tooltip.options.sticky&&t.originalEvent&&(o=this._map.mouseEventToContainerPoint(t.originalEvent),a=this._map.containerPointToLayerPoint(o),i=this._map.layerPointToLatLng(a)),this._tooltip.setLatLng(i)}});var eo=Wn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var i=t&&t.tagName==="DIV"?t:document.createElement("div"),o=this.options;if(o.html instanceof Element?(Rr(i),i.appendChild(o.html)):i.innerHTML=o.html!==!1?o.html:"",o.bgPos){var a=U(o.bgPos);i.style.backgroundPosition=-a.x+"px "+-a.y+"px"}return this._setIconStyles(i,"icon"),i},createShadow:function(){return null}});function aa(t){return new eo(t)}Wn.Default=vi;var En=Wt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ue.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){H(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),We(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ci(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(un(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=z(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof F?t:new F(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var i=this.getPane().children,o=-t(-1/0,1/0),a=0,f=i.length,_;a<f;a++)_=i[a].style.zIndex,i[a]!==this._container&&_&&(o=t(o,+_));isFinite(o)&&(this.options.zIndex=o+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ue.ielt9){vt(this._container,this.options.opacity);var t=+new Date,i=!1,o=!1;for(var a in this._tiles){var f=this._tiles[a];if(!(!f.current||!f.loaded)){var _=Math.min(1,(t-f.loaded)/200);vt(f.el,_),_<1?i=!0:(f.active?o=!0:this._onOpaqueTile(f),f.active=!0)}}o&&!this._noPrune&&this._pruneTiles(),i&&(ye(this._fadeFrame),this._fadeFrame=Pe(this._updateOpacity,this))}},_onOpaqueTile:N,_initContainer:function(){this._container||(this._container=ke("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,i=this.options.maxZoom;if(t!==void 0){for(var o in this._levels)o=Number(o),this._levels[o].el.children.length||o===t?(this._levels[o].el.style.zIndex=i-Math.abs(t-o),this._onUpdateLevel(o)):(We(this._levels[o].el),this._removeTilesAtZoom(o),this._onRemoveLevel(o),delete this._levels[o]);var a=this._levels[t],f=this._map;return a||(a=this._levels[t]={},a.el=ke("div","leaflet-tile-container leaflet-zoom-animated",this._container),a.el.style.zIndex=i,a.origin=f.project(f.unproject(f.getPixelOrigin()),t).round(),a.zoom=t,this._setZoomTransform(a,f.getCenter(),f.getZoom()),N(a.el.offsetWidth),this._onCreateLevel(a)),this._level=a,a}},_onUpdateLevel:N,_onRemoveLevel:N,_onCreateLevel:N,_pruneTiles:function(){if(this._map){var t,i,o=this._map.getZoom();if(o>this.options.maxZoom||o<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)i=this._tiles[t],i.retain=i.current;for(t in this._tiles)if(i=this._tiles[t],i.current&&!i.active){var a=i.coords;this._retainParent(a.x,a.y,a.z,a.z-5)||this._retainChildren(a.x,a.y,a.z,a.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var i in this._tiles)this._tiles[i].coords.z===t&&this._removeTile(i)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)We(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,i,o,a){var f=Math.floor(t/2),_=Math.floor(i/2),S=o-1,M=new F(+f,+_);M.z=+S;var j=this._tileCoordsToKey(M),b=this._tiles[j];return b&&b.active?(b.retain=!0,!0):(b&&b.loaded&&(b.retain=!0),S>a?this._retainParent(f,_,S,a):!1)},_retainChildren:function(t,i,o,a){for(var f=2*t;f<2*t+2;f++)for(var _=2*i;_<2*i+2;_++){var S=new F(f,_);S.z=o+1;var M=this._tileCoordsToKey(S),j=this._tiles[M];if(j&&j.active){j.retain=!0;continue}else j&&j.loaded&&(j.retain=!0);o+1<a&&this._retainChildren(f,_,o+1,a)}},_resetView:function(t){var i=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),i,i)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var i=this.options;return i.minNativeZoom!==void 0&&t<i.minNativeZoom?i.minNativeZoom:i.maxNativeZoom!==void 0&&i.maxNativeZoom<t?i.maxNativeZoom:t},_setView:function(t,i,o,a){var f=Math.round(i);this.options.maxZoom!==void 0&&f>this.options.maxZoom||this.options.minZoom!==void 0&&f<this.options.minZoom?f=void 0:f=this._clampZoom(f);var _=this.options.updateWhenZooming&&f!==this._tileZoom;(!a||_)&&(this._tileZoom=f,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),f!==void 0&&this._update(t),o||this._pruneTiles(),this._noPrune=!!o),this._setZoomTransforms(t,i)},_setZoomTransforms:function(t,i){for(var o in this._levels)this._setZoomTransform(this._levels[o],t,i)},_setZoomTransform:function(t,i,o){var a=this._map.getZoomScale(o,t.zoom),f=t.origin.multiplyBy(a).subtract(this._map._getNewPixelOrigin(i,o)).round();ue.any3d?Zt(t.el,f,a):Je(t.el,f)},_resetGrid:function(){var t=this._map,i=t.options.crs,o=this._tileSize=this.getTileSize(),a=this._tileZoom,f=this._map.getPixelWorldBounds(this._tileZoom);f&&(this._globalTileRange=this._pxBoundsToTileRange(f)),this._wrapX=i.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,i.wrapLng[0]],a).x/o.x),Math.ceil(t.project([0,i.wrapLng[1]],a).x/o.y)],this._wrapY=i.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([i.wrapLat[0],0],a).y/o.x),Math.ceil(t.project([i.wrapLat[1],0],a).y/o.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var i=this._map,o=i._animatingZoom?Math.max(i._animateToZoom,i.getZoom()):i.getZoom(),a=i.getZoomScale(o,this._tileZoom),f=i.project(t,this._tileZoom).floor(),_=i.getSize().divideBy(a*2);return new E(f.subtract(_),f.add(_))},_update:function(t){var i=this._map;if(i){var o=this._clampZoom(i.getZoom());if(t===void 0&&(t=i.getCenter()),this._tileZoom!==void 0){var a=this._getTiledPixelBounds(t),f=this._pxBoundsToTileRange(a),_=f.getCenter(),S=[],M=this.options.keepBuffer,j=new E(f.getBottomLeft().subtract([M,-M]),f.getTopRight().add([M,-M]));if(!(isFinite(f.min.x)&&isFinite(f.min.y)&&isFinite(f.max.x)&&isFinite(f.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var b in this._tiles){var Y=this._tiles[b].coords;(Y.z!==this._tileZoom||!j.contains(new F(Y.x,Y.y)))&&(this._tiles[b].current=!1)}if(Math.abs(o-this._tileZoom)>1){this._setView(t,o);return}for(var pe=f.min.y;pe<=f.max.y;pe++)for(var Le=f.min.x;Le<=f.max.x;Le++){var at=new F(Le,pe);if(at.z=this._tileZoom,!!this._isValidTile(at)){var tt=this._tiles[this._tileCoordsToKey(at)];tt?tt.current=!0:S.push(at)}}if(S.sort(function(wt,Ei){return wt.distanceTo(_)-Ei.distanceTo(_)}),S.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Et=document.createDocumentFragment();for(Le=0;Le<S.length;Le++)this._addTile(S[Le],Et);this._level.el.appendChild(Et)}}}},_isValidTile:function(t){var i=this._map.options.crs;if(!i.infinite){var o=this._globalTileRange;if(!i.wrapLng&&(t.x<o.min.x||t.x>o.max.x)||!i.wrapLat&&(t.y<o.min.y||t.y>o.max.y))return!1}if(!this.options.bounds)return!0;var a=this._tileCoordsToBounds(t);return he(this.options.bounds).overlaps(a)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var i=this._map,o=this.getTileSize(),a=t.scaleBy(o),f=a.add(o),_=i.unproject(a,t.z),S=i.unproject(f,t.z);return[_,S]},_tileCoordsToBounds:function(t){var i=this._tileCoordsToNwSe(t),o=new de(i[0],i[1]);return this.options.noWrap||(o=this._map.wrapLatLngBounds(o)),o},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var i=t.split(":"),o=new F(+i[0],+i[1]);return o.z=+i[2],o},_removeTile:function(t){var i=this._tiles[t];i&&(We(i.el),delete this._tiles[t],this.fire("tileunload",{tile:i.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){Se(t,"leaflet-tile");var i=this.getTileSize();t.style.width=i.x+"px",t.style.height=i.y+"px",t.onselectstart=N,t.onmousemove=N,ue.ielt9&&this.options.opacity<1&&vt(t,this.options.opacity)},_addTile:function(t,i){var o=this._getTilePos(t),a=this._tileCoordsToKey(t),f=this.createTile(this._wrapCoords(t),w(this._tileReady,this,t));this._initTile(f),this.createTile.length<2&&Pe(w(this._tileReady,this,t,null,f)),Je(f,o),this._tiles[a]={el:f,coords:t,current:!0},i.appendChild(f),this.fire("tileloadstart",{tile:f,coords:t})},_tileReady:function(t,i,o){i&&this.fire("tileerror",{error:i,tile:o,coords:t});var a=this._tileCoordsToKey(t);o=this._tiles[a],o&&(o.loaded=+new Date,this._map._fadeAnimated?(vt(o.el,0),ye(this._fadeFrame),this._fadeFrame=Pe(this._updateOpacity,this)):(o.active=!0,this._pruneTiles()),i||(Se(o.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:o.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ue.ielt9||!this._map._fadeAnimated?Pe(this._pruneTiles,this):setTimeout(w(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var i=new F(this._wrapX?B(t.x,this._wrapX):t.x,this._wrapY?B(t.y,this._wrapY):t.y);return i.z=t.z,i},_pxBoundsToTileRange:function(t){var i=this.getTileSize();return new E(t.min.unscaleBy(i).floor(),t.max.unscaleBy(i).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Pi(t){return new En(t)}var Tn=En.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,i){this._url=t,i=H(this,i),i.detectRetina&&ue.retina&&i.maxZoom>0?(i.tileSize=Math.floor(i.tileSize/2),i.zoomReverse?(i.zoomOffset--,i.minZoom=Math.min(i.maxZoom,i.minZoom+1)):(i.zoomOffset++,i.maxZoom=Math.max(i.minZoom,i.maxZoom-1)),i.minZoom=Math.max(0,i.minZoom)):i.zoomReverse?i.minZoom=Math.min(i.maxZoom,i.minZoom):i.maxZoom=Math.max(i.minZoom,i.maxZoom),typeof i.subdomains=="string"&&(i.subdomains=i.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,i){return this._url===t&&i===void 0&&(i=!0),this._url=t,i||this.redraw(),this},createTile:function(t,i){var o=document.createElement("img");return we(o,"load",w(this._tileOnLoad,this,i,o)),we(o,"error",w(this._tileOnError,this,i,o)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(o.referrerPolicy=this.options.referrerPolicy),o.alt="",o.src=this.getTileUrl(t),o},getTileUrl:function(t){var i={r:ue.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var o=this._globalTileRange.max.y-t.y;this.options.tms&&(i.y=o),i["-y"]=o}return ne(this._url,g(i,this.options))},_tileOnLoad:function(t,i){ue.ielt9?setTimeout(w(t,this,null,i),0):t(null,i)},_tileOnError:function(t,i,o){var a=this.options.errorTileUrl;a&&i.getAttribute("src")!==a&&(i.src=a),t(o,i)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,i=this.options.maxZoom,o=this.options.zoomReverse,a=this.options.zoomOffset;return o&&(t=i-t),t+a},_getSubdomain:function(t){var i=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[i]},_abortLoading:function(){var t,i;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(i=this._tiles[t].el,i.onload=N,i.onerror=N,!i.complete)){i.src=me;var o=this._tiles[t].coords;We(i),delete this._tiles[t],this.fire("tileabort",{tile:i,coords:o})}},_removeTile:function(t){var i=this._tiles[t];if(i)return i.el.setAttribute("src",me),En.prototype._removeTile.call(this,t)},_tileReady:function(t,i,o){if(!(!this._map||o&&o.getAttribute("src")===me))return En.prototype._tileReady.call(this,t,i,o)}});function es(t,i){return new Tn(t,i)}var hr=Tn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,i){this._url=t;var o=g({},this.defaultWmsParams);for(var a in i)a in this.options||(o[a]=i[a]);i=H(this,i);var f=i.detectRetina&&ue.retina?2:1,_=this.getTileSize();o.width=_.x*f,o.height=_.y*f,this.wmsParams=o},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var i=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[i]=this._crs.code,Tn.prototype.onAdd.call(this,t)},getTileUrl:function(t){var i=this._tileCoordsToNwSe(t),o=this._crs,a=Z(o.project(i[0]),o.project(i[1])),f=a.min,_=a.max,S=(this._wmsVersion>=1.3&&this._crs===ea?[f.y,f.x,_.y,_.x]:[f.x,f.y,_.x,_.y]).join(","),M=Tn.prototype.getTileUrl.call(this,t);return M+A(this.wmsParams,M,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+S},setParams:function(t,i){return g(this.wmsParams,t),i||this.redraw(),this}});function la(t,i){return new hr(t,i)}Tn.WMS=hr,es.wms=la;var en=Wt.extend({options:{padding:.1},initialize:function(t){H(this,t),k(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Se(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,i){var o=this._map.getZoomScale(i,this._zoom),a=this._map.getSize().multiplyBy(.5+this.options.padding),f=this._map.project(this._center,i),_=a.multiplyBy(-o).add(f).subtract(this._map._getNewPixelOrigin(t,i));ue.any3d?Zt(this._container,_,o):Je(this._container,_)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,i=this._map.getSize(),o=this._map.containerPointToLayerPoint(i.multiplyBy(-t)).round();this._bounds=new E(o,o.add(i.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ts=en.extend({options:{tolerance:0},getEvents:function(){var t=en.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){en.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");we(t,"mousemove",this._onMouseMove,this),we(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),we(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){ye(this._redrawRequest),delete this._ctx,We(this._container),Fe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var i in this._layers)t=this._layers[i],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){en.prototype._update.call(this);var t=this._bounds,i=this._container,o=t.getSize(),a=ue.retina?2:1;Je(i,t.min),i.width=a*o.x,i.height=a*o.y,i.style.width=o.x+"px",i.style.height=o.y+"px",ue.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){en.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[k(t)]=t;var i=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=i),this._drawLast=i,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var i=t._order,o=i.next,a=i.prev;o?o.prev=a:this._drawLast=a,a?a.next=o:this._drawFirst=o,delete t._order,delete this._layers[k(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var i=t.options.dashArray.split(/[, ]+/),o=[],a,f;for(f=0;f<i.length;f++){if(a=Number(i[f]),isNaN(a))return;o.push(a)}t.options._dashArray=o}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||Pe(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var i=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new E,this._redrawBounds.extend(t._pxBounds.min.subtract([i,i])),this._redrawBounds.extend(t._pxBounds.max.add([i,i]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var i=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,i.x,i.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,i=this._redrawBounds;if(this._ctx.save(),i){var o=i.getSize();this._ctx.beginPath(),this._ctx.rect(i.min.x,i.min.y,o.x,o.y),this._ctx.clip()}this._drawing=!0;for(var a=this._drawFirst;a;a=a.next)t=a.layer,(!i||t._pxBounds&&t._pxBounds.intersects(i))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,i){if(this._drawing){var o,a,f,_,S=t._parts,M=S.length,j=this._ctx;if(M){for(j.beginPath(),o=0;o<M;o++){for(a=0,f=S[o].length;a<f;a++)_=S[o][a],j[a?"lineTo":"moveTo"](_.x,_.y);i&&j.closePath()}this._fillStroke(j,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var i=t._point,o=this._ctx,a=Math.max(Math.round(t._radius),1),f=(Math.max(Math.round(t._radiusY),1)||a)/a;f!==1&&(o.save(),o.scale(1,f)),o.beginPath(),o.arc(i.x,i.y/f,a,0,Math.PI*2,!1),f!==1&&o.restore(),this._fillStroke(o,t)}},_fillStroke:function(t,i){var o=i.options;o.fill&&(t.globalAlpha=o.fillOpacity,t.fillStyle=o.fillColor||o.color,t.fill(o.fillRule||"evenodd")),o.stroke&&o.weight!==0&&(t.setLineDash&&t.setLineDash(i.options&&i.options._dashArray||[]),t.globalAlpha=o.opacity,t.lineWidth=o.weight,t.strokeStyle=o.color,t.lineCap=o.lineCap,t.lineJoin=o.lineJoin,t.stroke())},_onClick:function(t){for(var i=this._map.mouseEventToLayerPoint(t),o,a,f=this._drawFirst;f;f=f.next)o=f.layer,o.options.interactive&&o._containsPoint(i)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(o))&&(a=o);this._fireEvent(a?[a]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var i=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,i)}},_handleMouseOut:function(t){var i=this._hoveredLayer;i&&(be(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,i){if(!this._mouseHoverThrottled){for(var o,a,f=this._drawFirst;f;f=f.next)o=f.layer,o.options.interactive&&o._containsPoint(i)&&(a=o);a!==this._hoveredLayer&&(this._handleMouseOut(t),a&&(Se(this._container,"leaflet-interactive"),this._fireEvent([a],t,"mouseover"),this._hoveredLayer=a)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(w(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,i,o){this._map._fireDOMEvent(i,o||i.type,t)},_bringToFront:function(t){var i=t._order;if(i){var o=i.next,a=i.prev;if(o)o.prev=a;else return;a?a.next=o:o&&(this._drawFirst=o),i.prev=this._drawLast,this._drawLast.next=i,i.next=null,this._drawLast=i,this._requestRedraw(t)}},_bringToBack:function(t){var i=t._order;if(i){var o=i.next,a=i.prev;if(a)a.next=o;else return;o?o.prev=a:a&&(this._drawLast=a),i.prev=null,i.next=this._drawFirst,this._drawFirst.prev=i,this._drawFirst=i,this._requestRedraw(t)}}});function ns(t){return ue.canvas?new ts(t):null}var ki=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),ua={_initContainer:function(){this._container=ke("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(en.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var i=t._container=ki("shape");Se(i,"leaflet-vml-shape "+(this.options.className||"")),i.coordsize="1 1",t._path=ki("path"),i.appendChild(t._path),this._updateStyle(t),this._layers[k(t)]=t},_addPath:function(t){var i=t._container;this._container.appendChild(i),t.options.interactive&&t.addInteractiveTarget(i)},_removePath:function(t){var i=t._container;We(i),t.removeInteractiveTarget(i),delete this._layers[k(t)]},_updateStyle:function(t){var i=t._stroke,o=t._fill,a=t.options,f=t._container;f.stroked=!!a.stroke,f.filled=!!a.fill,a.stroke?(i||(i=t._stroke=ki("stroke")),f.appendChild(i),i.weight=a.weight+"px",i.color=a.color,i.opacity=a.opacity,a.dashArray?i.dashStyle=J(a.dashArray)?a.dashArray.join(" "):a.dashArray.replace(/( *, *)/g," "):i.dashStyle="",i.endcap=a.lineCap.replace("butt","flat"),i.joinstyle=a.lineJoin):i&&(f.removeChild(i),t._stroke=null),a.fill?(o||(o=t._fill=ki("fill")),f.appendChild(o),o.color=a.fillColor||a.color,o.opacity=a.fillOpacity):o&&(f.removeChild(o),t._fill=null)},_updateCircle:function(t){var i=t._point.round(),o=Math.round(t._radius),a=Math.round(t._radiusY||o);this._setPath(t,t._empty()?"M0 0":"AL "+i.x+","+i.y+" "+o+","+a+" 0,"+65535*360)},_setPath:function(t,i){t._path.v=i},_bringToFront:function(t){ci(t._container)},_bringToBack:function(t){un(t._container)}},Vt=ue.vml?ki:So,Gn=en.extend({_initContainer:function(){this._container=Vt("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Vt("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){We(this._container),Fe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){en.prototype._update.call(this);var t=this._bounds,i=t.getSize(),o=this._container;(!this._svgSize||!this._svgSize.equals(i))&&(this._svgSize=i,o.setAttribute("width",i.x),o.setAttribute("height",i.y)),Je(o,t.min),o.setAttribute("viewBox",[t.min.x,t.min.y,i.x,i.y].join(" ")),this.fire("update")}},_initPath:function(t){var i=t._path=Vt("path");t.options.className&&Se(i,t.options.className),t.options.interactive&&Se(i,"leaflet-interactive"),this._updateStyle(t),this._layers[k(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){We(t._path),t.removeInteractiveTarget(t._path),delete this._layers[k(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var i=t._path,o=t.options;i&&(o.stroke?(i.setAttribute("stroke",o.color),i.setAttribute("stroke-opacity",o.opacity),i.setAttribute("stroke-width",o.weight),i.setAttribute("stroke-linecap",o.lineCap),i.setAttribute("stroke-linejoin",o.lineJoin),o.dashArray?i.setAttribute("stroke-dasharray",o.dashArray):i.removeAttribute("stroke-dasharray"),o.dashOffset?i.setAttribute("stroke-dashoffset",o.dashOffset):i.removeAttribute("stroke-dashoffset")):i.setAttribute("stroke","none"),o.fill?(i.setAttribute("fill",o.fillColor||o.color),i.setAttribute("fill-opacity",o.fillOpacity),i.setAttribute("fill-rule",o.fillRule||"evenodd")):i.setAttribute("fill","none"))},_updatePoly:function(t,i){this._setPath(t,Po(t._parts,i))},_updateCircle:function(t){var i=t._point,o=Math.max(Math.round(t._radius),1),a=Math.max(Math.round(t._radiusY),1)||o,f="a"+o+","+a+" 0 1,0 ",_=t._empty()?"M0 0":"M"+(i.x-o)+","+i.y+f+o*2+",0 "+f+-o*2+",0 ";this._setPath(t,_)},_setPath:function(t,i){t._path.setAttribute("d",i)},_bringToFront:function(t){ci(t._path)},_bringToBack:function(t){un(t._path)}});ue.vml&&Gn.include(ua);function to(t){return ue.svg||ue.vml?new Gn(t):null}Te.include({getRenderer:function(t){var i=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return i||(i=this._renderer=this._createRenderer()),this.hasLayer(i)||this.addLayer(i),i},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var i=this._paneRenderers[t];return i===void 0&&(i=this._createRenderer({pane:t}),this._paneRenderers[t]=i),i},_createRenderer:function(t){return this.options.preferCanvas&&ns(t)||to(t)}});var ca=pn.extend({initialize:function(t,i){pn.prototype.initialize.call(this,this._boundsToLatLngs(t),i)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=he(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Sl(t,i){return new ca(t,i)}Gn.create=Vt,Gn.pointsToPath=Po,Yt.geometryToLayer=yi,Yt.coordsToLatLng=qr,Yt.coordsToLatLngs=ur,Yt.latLngToCoords=Qr,Yt.latLngsToCoords=Jr,Yt.getFeature=wi,Yt.asFeature=Yr,Te.mergeOptions({boxZoom:!0});var Li=Nt.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){we(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Fe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){We(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Me(),Ar(),this._startPoint=this._map.mouseEventToContainerPoint(t),we(document,{contextmenu:bt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ke("div","leaflet-zoom-box",this._container),Se(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var i=new E(this._point,this._startPoint),o=i.getSize();Je(this._box,i.min),this._box.style.width=o.x+"px",this._box.style.height=o.y+"px"},_finish:function(){this._moved&&(We(this._box),be(this._container,"leaflet-crosshair")),di(),Br(),Fe(document,{contextmenu:bt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(w(this._resetState,this),0);var i=new de(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(i).fire("boxzoomend",{boxZoomBounds:i})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Te.addInitHook("addHandler","boxZoom",Li),Te.mergeOptions({doubleClickZoom:!0});var ha=Nt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var i=this._map,o=i.getZoom(),a=i.options.zoomDelta,f=t.originalEvent.shiftKey?o-a:o+a;i.options.doubleClickZoom==="center"?i.setZoom(f):i.setZoomAround(t.containerPoint,f)}});Te.addInitHook("addHandler","doubleClickZoom",ha),Te.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var is=Nt.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Ht(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}Se(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){be(this._map._container,"leaflet-grab"),be(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var i=he(this._map.options.maxBounds);this._offsetLimit=Z(this._map.latLngToContainerPoint(i.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(i.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var i=this._lastTime=+new Date,o=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(o),this._times.push(i),this._prunePositions(i)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),i=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=i.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,i){return t-(t-i)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),i=this._offsetLimit;t.x<i.min.x&&(t.x=this._viscousLimit(t.x,i.min.x)),t.y<i.min.y&&(t.y=this._viscousLimit(t.y,i.min.y)),t.x>i.max.x&&(t.x=this._viscousLimit(t.x,i.max.x)),t.y>i.max.y&&(t.y=this._viscousLimit(t.y,i.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,i=Math.round(t/2),o=this._initialWorldOffset,a=this._draggable._newPos.x,f=(a-i+o)%t+i-o,_=(a+i+o)%t-i-o,S=Math.abs(f+o)<Math.abs(_+o)?f:_;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=S},_onDragEnd:function(t){var i=this._map,o=i.options,a=!o.inertia||t.noInertia||this._times.length<2;if(i.fire("dragend",t),a)i.fire("moveend");else{this._prunePositions(+new Date);var f=this._lastPos.subtract(this._positions[0]),_=(this._lastTime-this._times[0])/1e3,S=o.easeLinearity,M=f.multiplyBy(S/_),j=M.distanceTo([0,0]),b=Math.min(o.inertiaMaxSpeed,j),Y=M.multiplyBy(b/j),pe=b/(o.inertiaDeceleration*S),Le=Y.multiplyBy(-pe/2).round();!Le.x&&!Le.y?i.fire("moveend"):(Le=i._limitOffset(Le,i.options.maxBounds),Pe(function(){i.panBy(Le,{duration:pe,easeLinearity:S,noMoveStart:!0,animate:!0})}))}}});Te.addInitHook("addHandler","dragging",is),Te.mergeOptions({keyboard:!0,keyboardPanDelta:80});var rs=Nt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),we(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Fe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,i=document.documentElement,o=t.scrollTop||i.scrollTop,a=t.scrollLeft||i.scrollLeft;this._map._container.focus(),window.scrollTo(a,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var i=this._panKeys={},o=this.keyCodes,a,f;for(a=0,f=o.left.length;a<f;a++)i[o.left[a]]=[-1*t,0];for(a=0,f=o.right.length;a<f;a++)i[o.right[a]]=[t,0];for(a=0,f=o.down.length;a<f;a++)i[o.down[a]]=[0,t];for(a=0,f=o.up.length;a<f;a++)i[o.up[a]]=[0,-1*t]},_setZoomDelta:function(t){var i=this._zoomKeys={},o=this.keyCodes,a,f;for(a=0,f=o.zoomIn.length;a<f;a++)i[o.zoomIn[a]]=t;for(a=0,f=o.zoomOut.length;a<f;a++)i[o.zoomOut[a]]=-t},_addHooks:function(){we(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Fe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var i=t.keyCode,o=this._map,a;if(i in this._panKeys){if(!o._panAnim||!o._panAnim._inProgress)if(a=this._panKeys[i],t.shiftKey&&(a=U(a).multiplyBy(3)),o.options.maxBounds&&(a=o._limitOffset(U(a),o.options.maxBounds)),o.options.worldCopyJump){var f=o.wrapLatLng(o.unproject(o.project(o.getCenter()).add(a)));o.panTo(f)}else o.panBy(a)}else if(i in this._zoomKeys)o.setZoom(o.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else if(i===27&&o._popup&&o._popup.options.closeOnEscapeKey)o.closePopup();else return;bt(t)}}});Te.addInitHook("addHandler","keyboard",rs),Te.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ze=Nt.extend({addHooks:function(){we(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Fe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var i=Vs(t),o=this._map.options.wheelDebounceTime;this._delta+=i,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var a=Math.max(o-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(w(this._performZoom,this),a),bt(t)},_performZoom:function(){var t=this._map,i=t.getZoom(),o=this._map.options.zoomSnap||0;t._stop();var a=this._delta/(this._map.options.wheelPxPerZoomLevel*4),f=4*Math.log(2/(1+Math.exp(-Math.abs(a))))/Math.LN2,_=o?Math.ceil(f/o)*o:f,S=t._limitZoom(i+(this._delta>0?_:-_))-i;this._delta=0,this._startTime=null,S&&(t.options.scrollWheelZoom==="center"?t.setZoom(i+S):t.setZoomAround(this._lastMousePos,i+S))}});Te.addInitHook("addHandler","scrollWheelZoom",Ze);var os=600;Te.mergeOptions({tapHold:ue.touchNative&&ue.safari&&ue.mobile,tapTolerance:15});var fr=Nt.extend({addHooks:function(){we(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Fe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var i=t.touches[0];this._startPos=this._newPos=new F(i.clientX,i.clientY),this._holdTimeout=setTimeout(w(function(){this._cancel(),this._isTapValid()&&(we(document,"touchend",Ke),we(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",i))},this),os),we(document,"touchend touchcancel contextmenu",this._cancel,this),we(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){Fe(document,"touchend",Ke),Fe(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),Fe(document,"touchend touchcancel contextmenu",this._cancel,this),Fe(document,"touchmove",this._onMove,this)},_onMove:function(t){var i=t.touches[0];this._newPos=new F(i.clientX,i.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,i){var o=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY});o._simulated=!0,i.target.dispatchEvent(o)}});Te.addInitHook("addHandler","tapHold",fr),Te.mergeOptions({touchZoom:ue.touch,bounceAtZoomLimits:!0});var Ci=Nt.extend({addHooks:function(){Se(this._map._container,"leaflet-touch-zoom"),we(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){be(this._map._container,"leaflet-touch-zoom"),Fe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var i=this._map;if(!(!t.touches||t.touches.length!==2||i._animatingZoom||this._zooming)){var o=i.mouseEventToContainerPoint(t.touches[0]),a=i.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=i.getSize()._divideBy(2),this._startLatLng=i.containerPointToLatLng(this._centerPoint),i.options.touchZoom!=="center"&&(this._pinchStartLatLng=i.containerPointToLatLng(o.add(a)._divideBy(2))),this._startDist=o.distanceTo(a),this._startZoom=i.getZoom(),this._moved=!1,this._zooming=!0,i._stop(),we(document,"touchmove",this._onTouchMove,this),we(document,"touchend touchcancel",this._onTouchEnd,this),Ke(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var i=this._map,o=i.mouseEventToContainerPoint(t.touches[0]),a=i.mouseEventToContainerPoint(t.touches[1]),f=o.distanceTo(a)/this._startDist;if(this._zoom=i.getScaleZoom(f,this._startZoom),!i.options.bounceAtZoomLimits&&(this._zoom<i.getMinZoom()&&f<1||this._zoom>i.getMaxZoom()&&f>1)&&(this._zoom=i._limitZoom(this._zoom)),i.options.touchZoom==="center"){if(this._center=this._startLatLng,f===1)return}else{var _=o._add(a)._divideBy(2)._subtract(this._centerPoint);if(f===1&&_.x===0&&_.y===0)return;this._center=i.unproject(i.project(this._pinchStartLatLng,this._zoom).subtract(_),this._zoom)}this._moved||(i._moveStart(!0,!1),this._moved=!0),ye(this._animRequest);var S=w(i._move,i,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Pe(S,this,!0),Ke(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,ye(this._animRequest),Fe(document,"touchmove",this._onTouchMove,this),Fe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Te.addInitHook("addHandler","touchZoom",Ci),Te.BoxZoom=Li,Te.DoubleClickZoom=ha,Te.Drag=is,Te.Keyboard=rs,Te.ScrollWheelZoom=Ze,Te.TapHold=fr,Te.TouchZoom=Ci,u.Bounds=E,u.Browser=ue,u.CRS=ze,u.Canvas=ts,u.Circle=$r,u.CircleMarker=Vr,u.Class=Oe,u.Control=Lt,u.DivIcon=eo,u.DivOverlay=Xt,u.DomEvent=Ur,u.DomUtil=ir,u.Draggable=Ht,u.Evented=Re,u.FeatureGroup=fn,u.GeoJSON=Yt,u.GridLayer=En,u.Handler=Nt,u.Icon=Wn,u.ImageOverlay=Cn,u.LatLng=le,u.LatLngBounds=de,u.Layer=Wt,u.LayerGroup=kn,u.LineUtil=Xs,u.Map=Te,u.Marker=dn,u.Mixin=bo,u.Path=Ln,u.Point=F,u.PolyUtil=hl,u.Polygon=pn,u.Polyline=Ct,u.Popup=Xr,u.PosAnimation=br,u.Projection=gl,u.Rectangle=ca,u.Renderer=en,u.SVG=Gn,u.SVGOverlay=Yo,u.TileLayer=Tn,u.Tooltip=Si,u.Transformation=ii,u.Util=De,u.VideoOverlay=Jo,u.bind=w,u.bounds=Z,u.canvas=ns,u.circle=lr,u.circleMarker=ia,u.control=Pn,u.divIcon=aa,u.extend=g,u.featureGroup=ta,u.geoJSON=ra,u.geoJson=Gt,u.gridLayer=Pi,u.icon=na,u.imageOverlay=oa,u.latLng=ie,u.latLngBounds=he,u.layerGroup=ar,u.map=Sn,u.marker=yl,u.point=U,u.polygon=xl,u.polyline=wl,u.popup=xi,u.rectangle=Sl,u.setOptions=H,u.stamp=k,u.svg=to,u.svgOverlay=Xo,u.tileLayer=es,u.tooltip=cr,u.transformation=ri,u.version=p,u.videoOverlay=sa;var fa=window.L;u.noConflict=function(){return window.L=fa,this},window.L=u})}(Ss,Ss.exports)),Ss.exports}var Vi=yp();const Ts=Zu(Vi);function wo(d,c,u){return Object.freeze({instance:d,context:c,container:u})}function zs(d,c){return c==null?function(p,g){const y=R.useRef();return y.current||(y.current=d(p,g)),y}:function(p,g){const y=R.useRef();y.current||(y.current=d(p,g));const w=R.useRef(p),{instance:C}=y.current;return R.useEffect(function(){w.current!==p&&(c(C,p,w.current),w.current=p)},[C,p,g]),y}}function cf(d,c){R.useEffect(function(){return(c.layerContainer??c.map).addLayer(d.instance),function(){var y;(y=c.layerContainer)==null||y.removeLayer(d.instance),c.map.removeLayer(d.instance)}},[c,d])}function hf(d){return function(u){const p=Es(),g=d(il(u,p),p);return of(p.map,u.attribution),$u(g.current,u.eventHandlers),cf(g.current,p),g}}function wp(d,c){const u=R.useRef();R.useEffect(function(){if(c.pathOptions!==u.current){const g=c.pathOptions??{};d.instance.setStyle(g),u.current=g}},[d,c])}function xp(d){return function(u){const p=Es(),g=d(il(u,p),p);return $u(g.current,u.eventHandlers),cf(g.current,p),wp(g.current,u),g}}function Sp(d){function c(g,y){return wo(d(g),y)}const u=zs(c),p=gp(u);return uf(p)}function Pp(d,c){const u=zs(d,c),p=hf(u);return lf(p)}function kp(d,c){const u=zs(d),p=_p(u,c);return mp(p)}function ff(d,c){const u=zs(d,c),p=xp(u);return lf(p)}function Lp(d,c){const u=zs(d,c),p=hf(u);return uf(p)}function Cp(d,c,u){const{opacity:p,zIndex:g}=c;p!=null&&p!==u.opacity&&d.setOpacity(p),g!=null&&g!==u.zIndex&&d.setZIndex(g)}function Ep(){return Es().map}const Tp=ff(function({center:c,children:u,...p},g){const y=new Vi.Circle(c,p);return wo(y,Vu(g,{overlayContainer:y}))},fp);function Fu(){return Fu=Object.assign||function(d){for(var c=1;c<arguments.length;c++){var u=arguments[c];for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&(d[p]=u[p])}return d},Fu.apply(this,arguments)}function zp({bounds:d,boundsOptions:c,center:u,children:p,className:g,id:y,placeholder:w,style:C,whenReady:k,zoom:z,...B},N){const[W]=R.useState({className:g,id:y,style:C}),[$,se]=R.useState(null);R.useImperativeHandle(N,()=>($==null?void 0:$.map)??null,[$]);const H=R.useCallback(q=>{if(q!==null&&$===null){const ne=new Vi.Map(q,B);u!=null&&z!=null?ne.setView(u,z):d!=null&&ne.fitBounds(d,c),k!=null&&ne.whenReady(k),se(pp(ne))}},[]);R.useEffect(()=>()=>{$==null||$.map.remove()},[$]);const A=$?Ps.createElement(af,{value:$},p):w??null;return Ps.createElement("div",Fu({},W,{ref:H}),A)}const Mp=R.forwardRef(zp),el=Pp(function({position:c,...u},p){const g=new Vi.Marker(c,u);return wo(g,Vu(p,{overlayContainer:g}))},function(c,u,p){u.position!==p.position&&c.setLatLng(u.position),u.icon!=null&&u.icon!==p.icon&&c.setIcon(u.icon),u.zIndexOffset!=null&&u.zIndexOffset!==p.zIndexOffset&&c.setZIndexOffset(u.zIndexOffset),u.opacity!=null&&u.opacity!==p.opacity&&c.setOpacity(u.opacity),c.dragging!=null&&u.draggable!==p.draggable&&(u.draggable===!0?c.dragging.enable():c.dragging.disable())}),Wh=ff(function({positions:c,...u},p){const g=new Vi.Polyline(c,u);return wo(g,Vu(p,{overlayContainer:g}))},function(c,u,p){u.positions!==p.positions&&c.setLatLngs(u.positions)}),Ru=kp(function(c,u){const p=new Vi.Popup(c,u.overlayContainer);return wo(p,u)},function(c,u,{position:p},g){R.useEffect(function(){const{instance:w}=c;function C(z){z.popup===w&&(w.update(),g(!0))}function k(z){z.popup===w&&g(!1)}return u.map.on({popupopen:C,popupclose:k}),u.overlayContainer==null?(p!=null&&w.setLatLng(p),w.openOn(u.map)):u.overlayContainer.bindPopup(w),function(){var B;u.map.off({popupopen:C,popupclose:k}),(B=u.overlayContainer)==null||B.unbindPopup(),u.map.removeLayer(w)}},[c,u,g,p])}),Np=Lp(function({url:c,...u},p){const g=new Vi.TileLayer(c,il(u,p));return wo(g,p)},function(c,u,p){Cp(c,u,p);const{url:g}=u;g!=null&&g!==p.url&&c.setUrl(g)}),Op=Sp(function(c){return new Vi.Control.Zoom(c)});class Ip{constructor(c={}){this.stateSize=c.stateSize||6,this.measurementSize=c.measurementSize||3,this.controlSize=c.controlSize||2,this.x=new Array(this.stateSize).fill(0),this.P=new Array(this.stateSize*this.stateSize).fill(0);for(let u=0;u<this.stateSize;u++)this.P[u*this.stateSize+u]=u<3?10:1;this.Q=new Array(this.stateSize*this.stateSize).fill(0);for(let u=0;u<this.stateSize;u++){const p=u===0||u===1?.1:u===2?.02:u===3?.5:u===4?.1:.01;this.Q[u*this.stateSize+u]=p}this.R=new Array(this.measurementSize*this.measurementSize).fill(0),this.R[0]=25,this.R[this.measurementSize+1]=25,this.R[2*this.measurementSize+2]=.1,this.lastUpdateTime=0,this.timeDecay=.95}initialize(c){this.x[0]=c.x!==void 0?c.x:0,this.x[1]=c.y!==void 0?c.y:0,this.x[2]=c.theta!==void 0?c.theta:0,this.x[3]=c.v!==void 0?c.v:0,this.x[4]=c.w!==void 0?c.w:0,this.x[5]=c.stride!==void 0?c.stride:.75,this.lastUpdateTime=c.timestamp||Date.now(),c.covariance&&(this.P=[...c.covariance])}setStrideLength(c){c>0&&(this.x[5]=c)}predict(c={a_norm:0,omega:0},u=Date.now()){const p=(u-this.lastUpdateTime)/1e3;if(p<=0||p>1){this.lastUpdateTime=u;return}const[g,y,w,C,k,z]=this.x,B=c.omega!==void 0?c.omega:k*this.timeDecay,N=(w+B*p)%(2*Math.PI),W=c.a_norm>0,$=W?z/.5:C*this.timeDecay,se=$*p*Math.sin(N),H=$*p*Math.cos(N),A=g+se,q=y+H,ne=z;this.x[0]=A,this.x[1]=q,this.x[2]=N,this.x[3]=$,this.x[4]=B,this.x[5]=ne;const J=new Array(this.stateSize*this.stateSize).fill(0);for(let X=0;X<this.stateSize;X++)J[X*this.stateSize+X]=1;J[0*this.stateSize+2]=$*p*Math.cos(N),J[0*this.stateSize+3]=p*Math.sin(N),J[1*this.stateSize+2]=-$*p*Math.sin(N),J[1*this.stateSize+3]=p*Math.cos(N),J[3*this.stateSize+5]=W?1/.5:0;const ee=this._multiplyMatrices(J,this.P,this.stateSize),me=this._multiplyMatrices(ee,this._transposeMatrix(J,this.stateSize),this.stateSize);for(let X=0;X<this.stateSize;X++)for(let ge=0;ge<this.stateSize;ge++){const Be=X*this.stateSize+ge;me[Be]+=this.Q[Be]}this.P=me,this.lastUpdateTime=u}update(c,u={}){const p=c.x_gps!==void 0&&c.y_gps!==void 0,g=c.heading!==void 0;if(!p&&!g)return;if(p&&u.gps_accuracy!==void 0){const A=Math.pow(u.gps_accuracy,2);this.R[0]=A,this.R[this.measurementSize+1]=A}g&&u.heading_accuracy!==void 0&&(this.R[2*this.measurementSize+2]=Math.pow(u.heading_accuracy,2));const y=new Array(this.measurementSize*this.stateSize).fill(0);p&&(y[0*this.stateSize+0]=1,y[1*this.stateSize+1]=1),g&&(y[2*this.stateSize+2]=1);const w=new Array(this.measurementSize).fill(0);p&&(w[0]=c.x_gps,w[1]=c.y_gps),g&&(w[2]=c.heading);const C=this._multiplyMatrixVector(y,this.x,this.measurementSize,this.stateSize),k=new Array(this.measurementSize).fill(0);for(let A=0;A<this.measurementSize;A++)if((A<2&&p||A===2&&g)&&(k[A]=w[A]-C[A]),A===2&&g){for(;k[A]>Math.PI;)k[A]-=2*Math.PI;for(;k[A]<-Math.PI;)k[A]+=2*Math.PI}const z=this._multiplyMatrices(y,this.P,this.measurementSize,this.stateSize,this.stateSize),B=this._multiplyMatrices(z,this._transposeMatrix(y,this.stateSize,this.measurementSize),this.measurementSize);for(let A=0;A<this.measurementSize;A++)for(let q=0;q<this.measurementSize;q++){const ne=A*this.measurementSize+q;B[ne]+=this.R[ne]}const N=this._multiplyMatrices(this.P,this._transposeMatrix(y,this.stateSize,this.measurementSize),this.stateSize,this.stateSize,this.measurementSize),W=this._invertMatrix(B,this.measurementSize),$=this._multiplyMatrices(N,W,this.stateSize,this.measurementSize,this.measurementSize),se=this._multiplyMatrixVector($,k,this.stateSize,this.measurementSize);for(let A=0;A<this.stateSize;A++)this.x[A]+=se[A];this.x[2]=(this.x[2]%(2*Math.PI)+2*Math.PI)%(2*Math.PI);const H=this._subtractMatrices(this._identityMatrix(this.stateSize),this._multiplyMatrices($,y,this.stateSize,this.measurementSize,this.stateSize),this.stateSize);this.P=this._multiplyMatrices(H,this.P,this.stateSize)}getState(){return{x:isNaN(this.x[0])?0:this.x[0],y:isNaN(this.x[1])?0:this.x[1],theta:isNaN(this.x[2])?0:this.x[2],v:isNaN(this.x[3])?0:this.x[3],w:isNaN(this.x[4])?0:this.x[4],stride:isNaN(this.x[5])?.75:this.x[5],covariance:[...this.P],timestamp:this.lastUpdateTime}}_multiplyMatrices(c,u,p,g,y){p=p||this.stateSize,g=g||this.stateSize,y=y||this.stateSize;const w=new Array(p*y).fill(0);for(let C=0;C<p;C++)for(let k=0;k<y;k++)for(let z=0;z<g;z++)w[C*y+k]+=c[C*g+z]*u[z*y+k];return w}_multiplyMatrixVector(c,u,p,g){p=p||this.stateSize,g=g||this.stateSize;const y=new Array(p).fill(0);for(let w=0;w<p;w++)for(let C=0;C<g;C++)y[w]+=c[w*g+C]*u[C];return y}_transposeMatrix(c,u,p){u=u||this.stateSize,p=p||this.stateSize;const g=new Array(p*u).fill(0);for(let y=0;y<u;y++)for(let w=0;w<p;w++)g[w*u+y]=c[y*p+w];return g}_identityMatrix(c){const u=new Array(c*c).fill(0);for(let p=0;p<c;p++)u[p*c+p]=1;return u}_subtractMatrices(c,u,p){const g=new Array(p*p).fill(0);for(let y=0;y<p*p;y++)g[y]=c[y]-u[y];return g}_invertMatrix(c,u){if(u===1)return[1/c[0]];if(u===2){const p=c[0]*c[3]-c[1]*c[2];if(Math.abs(p)<1e-10)return[1e-6,0,0,1e-6];const g=1/p;return[c[3]*g,-c[1]*g,-c[2]*g,c[0]*g]}else if(u===3){const p=c[0],g=c[1],y=c[2],w=c[3],C=c[4],k=c[5],z=c[6],B=c[7],N=c[8],W=p*(C*N-k*B)-g*(w*N-k*z)+y*(w*B-C*z);if(Math.abs(W)<1e-10)return[1e-6,0,0,0,1e-6,0,0,0,1e-6];const $=1/W;return[(C*N-k*B)*$,(y*B-g*N)*$,(g*k-y*C)*$,(k*z-w*N)*$,(p*N-y*z)*$,(y*w-p*k)*$,(w*B-C*z)*$,(g*z-p*B)*$,(p*C-g*w)*$]}else return console.error("Matrix inversion not implemented for size > 3"),this._identityMatrix(u)}}class ju{constructor(c=.1){this.alpha=c,this.lastValues={}}filter(c,u="default"){if(this.lastValues[u]===void 0)return this.lastValues[u]=c,c;const p=this.alpha*c+(1-this.alpha)*this.lastValues[u];return this.lastValues[u]=p,p}reset(){this.lastValues={}}}class Rp{constructor(c=.8){this.alpha=c,this.lastValues={},this.lastFilteredValues={}}filter(c,u="default"){if(this.lastValues[u]===void 0)return this.lastValues[u]=c,this.lastFilteredValues[u]=0,0;const p=this.alpha*(this.lastFilteredValues[u]+c-this.lastValues[u]);return this.lastValues[u]=c,this.lastFilteredValues[u]=p,p}reset(){this.lastValues={},this.lastFilteredValues={}}}class jp{constructor(c={}){this.threshold=c.threshold||1,this.minPeakDistance=c.minPeakDistance||500,this.windowSize=c.windowSize||10,this.samples=[],this.lastPeakTime=0}addSample(c,u){if(this.samples.push({value:c,timestamp:u}),this.samples.length>this.windowSize*2&&this.samples.shift(),this.samples.length<this.windowSize||u-this.lastPeakTime<this.minPeakDistance)return!1;const p=Math.floor(this.samples.length/2),g=this.samples[p];if(g.value<this.threshold)return!1;for(let y=0;y<p;y++)if(this.samples[y].value>=g.value)return!1;for(let y=p+1;y<this.samples.length;y++)if(this.samples[y].value>=g.value)return!1;return this.lastPeakTime=u,!0}reset(){this.samples=[],this.lastPeakTime=0}}class Dp{constructor(){this.isActive=!1,this.isCalibrating=!1,this.calibrationStart=0,this.calibrationDuration=2e3,this.accelerometerLowPassFilter=new ju(.1),this.gyroscopeLowPassFilter=new ju(.2),this.orientationLowPassFilter=new ju(.1),this.accelerometerHighPassFilter=new Rp(.8),this.peakDetector=new jp({threshold:.8,minPeakDistance:300,windowSize:10}),this.accelerometerBias={x:0,y:0,z:0},this.gyroscopeBias={alpha:0,beta:0,gamma:0},this.magneticDeclination=0,this.referencePosition=null,this.currentPosition={x:0,y:0,theta:0},this.path=[],this.geoPath=[],this.stepCount=0,this.strideLength=.75,this.kalmanFilter=new Ip({stateSize:6,measurementSize:3,controlSize:2}),this.lastUpdateTime=0,this.lastStepTime=0,this.lastAccelerometer=null,this.lastGyroscope=null,this.lastOrientation=null,this.lastGps=null,this._initialHeading=null,this._accelNormHistory=[],this._listeners=[],this._log={timestamp:[],sensor:[],data:[],result:[]}}toggle(c=null){const u=this.isActive;return this.isActive=!u,this.isActive?(console.log("Starting Advanced Dead Reckoning Service"),this.isCalibrating=!0,this.calibrationStart=Date.now(),this.path=[],this.geoPath=[],this.stepCount=0,this._accelNormHistory=[],this.lastUpdateTime=Date.now(),this.lastStepTime=0,this.kalmanFilter.initialize({x:0,y:0,theta:this._initialHeading||0,v:0,w:0,stride:this.strideLength,timestamp:Date.now()}),c&&c.lat!==void 0&&c.lng!==void 0&&!isNaN(c.lat)&&!isNaN(c.lng)?(this.referencePosition={lat:c.lat,lng:c.lng,accuracy:c.accuracy||5,timestamp:Date.now()},console.log("Setting reference position:",this.referencePosition),this.path.push({x:0,y:0,timestamp:Date.now()}),this.geoPath.push({lat:c.lat,lng:c.lng,timestamp:Date.now()})):(console.warn("No valid initial position provided for Dead Reckoning"),this.referencePosition=null),this._notify({type:"serviceStateChanged",isActive:this.isActive,isCalibrating:this.isCalibrating,stepCount:this.stepCount,kalmanState:this.kalmanFilter.getState(),path:this.path,geoPath:this.geoPath})):(console.log("Stopping Advanced Dead Reckoning Service"),this._notify({type:"serviceStateChanged",isActive:this.isActive,isCalibrating:!1,kalmanState:this.kalmanFilter.getState(),path:this.path,geoPath:this.geoPath})),this.isActive}reset(){this.isActive&&(console.log("Resetting Advanced Dead Reckoning Service"),this.path=[],this.geoPath=[],this.stepCount=0,this._accelNormHistory=[],this.currentPosition={x:0,y:0,theta:0},this.referencePosition&&(this.path.push({x:0,y:0,timestamp:Date.now()}),this.geoPath.push({lat:this.referencePosition.lat,lng:this.referencePosition.lng,timestamp:Date.now()})),this.kalmanFilter.initialize({x:0,y:0,theta:this._initialHeading||0,v:0,w:0,stride:this.strideLength,timestamp:Date.now()}),this._notify({type:"serviceReset",stepCount:this.stepCount,kalmanState:this.kalmanFilter.getState(),path:this.path,geoPath:this.geoPath}))}setStrideLength(c){c>0&&(this.strideLength=c,this.isActive&&this.kalmanFilter.setStrideLength(c),this._notify({type:"strideLengthChanged",strideLength:this.strideLength}))}processAccelerometerData(c,u=Date.now()){if(!this.isActive)return;this._logSensorData("accelerometer",c,u);const p=this._filterAccelerometerData(c),g=Math.sqrt(Math.pow(p.x,2)+Math.pow(p.y,2)+Math.pow(p.z,2));this._accelNormHistory.push({value:g,timestamp:u}),this._accelNormHistory.length>100&&this._accelNormHistory.shift();const y=this._detectStep(g,u);this._processSensorData({type:"accelerometer",data:p,timestamp:u,stepDetected:y}),this.lastAccelerometer={...p,timestamp:u}}processGyroscopeData(c,u=Date.now()){if(!this.isActive)return;this._logSensorData("gyroscope",c,u);const p=this._filterGyroscopeData(c);this._processSensorData({type:"gyroscope",data:p,timestamp:u}),this.lastGyroscope={...p,timestamp:u}}processOrientationData(c,u=Date.now()){if(!this.isActive)return;this._logSensorData("orientation",c,u);const p=this._filterOrientationData(c),g=p.alpha*Math.PI/180;if(this._initialHeading===null&&c.absolute&&(this._initialHeading=g,this.kalmanFilter)){const y=this.kalmanFilter.getState();y.theta=g,this.kalmanFilter.initialize(y)}this._processSensorData({type:"orientation",data:{...p,heading:g},timestamp:u}),this.lastOrientation={...p,heading:g,timestamp:u}}processGpsData(c,u=5,p=Date.now()){if(!this.isActive)return;if(this._logSensorData("gps",{...c,accuracy:u},p),!this.referencePosition){console.log("Setting reference position from GPS:",c),this.referencePosition={lat:c.lat,lng:c.lng,accuracy:u,timestamp:p},this.path.push({x:0,y:0,timestamp:p}),this.geoPath.push({lat:c.lat,lng:c.lng,timestamp:p}),this.currentPosition={x:0,y:0,theta:this.currentPosition.theta},this.isCalibrating&&this.kalmanFilter.initialize({x:0,y:0,theta:this._initialHeading||0,v:0,w:0,stride:this.strideLength,timestamp:p}),this._notify({type:"referencePositionSet",referencePosition:this.referencePosition,kalmanState:this.kalmanFilter.getState(),path:this.path,geoPath:this.geoPath});return}const g=this._calculateRelativePositionFromLatLng(this.referencePosition.lat,this.referencePosition.lng,c.lat,c.lng);this.kalmanFilter.update({x_gps:g.x,y_gps:g.y,heading:this.lastOrientation?this.lastOrientation.heading:void 0},{gps_accuracy:u,heading_accuracy:this.lastOrientation?.1:void 0});const y=this.kalmanFilter.getState();this.currentPosition={x:y.x,y:y.y,theta:y.theta};const w=this._calculateNewLatLng(this.referencePosition.lat,this.referencePosition.lng,this.currentPosition.x,this.currentPosition.y);(this.path.length===0||this._calculateDistance(this.path[this.path.length-1].x,this.path[this.path.length-1].y,this.currentPosition.x,this.currentPosition.y)>.5)&&(this.path.push({x:this.currentPosition.x,y:this.currentPosition.y,timestamp:p}),this.geoPath.push({lat:w.lat,lng:w.lng,timestamp:p})),this.lastGps={...c,accuracy:u,timestamp:p},this._notify({type:"positionUpdated",currentPosition:this.currentPosition,geoPosition:w,kalmanState:y,path:this.path,geoPath:this.geoPath,source:"gps"})}addListener(c){return typeof c=="function"?(this._listeners.push(c),c({type:"initialState",isActive:this.isActive,isCalibrating:this.isCalibrating,stepCount:this.stepCount,strideLength:this.strideLength,kalmanState:this.kalmanFilter.getState(),path:this.path,geoPath:this.geoPath,referencePosition:this.referencePosition}),()=>{this._listeners=this._listeners.filter(u=>u!==c)}):()=>{}}exportLog(){const c={timestamp:new Date().toISOString(),data:{sensorLog:this._log,path:this.path,geoPath:this.geoPath,stepCount:this.stepCount,strideLength:this.strideLength}},u=new Blob([JSON.stringify(c,null,2)],{type:"application/json"}),p=URL.createObjectURL(u),g=document.createElement("a");return g.href=p,g.download=`dead-reckoning-log-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.json`,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(p),console.log("Log exported:",c),c}_calculateNewLatLng(c,u,p,g){if(isNaN(c)||isNaN(u)||isNaN(p)||isNaN(g))return console.error("Invalid inputs in _calculateNewLatLng:",{refLat:c,refLng:u,x:p,y:g}),{lat:c||0,lng:u||0};const y=6378137,w=c*Math.PI/180,C=g/y,k=p/(y*Math.cos(w)),z=c+C*180/Math.PI,B=u+k*180/Math.PI;return isNaN(z)||isNaN(B)?(console.error("Invalid result in _calculateNewLatLng:",{newLat:z,newLng:B,inputs:{refLat:c,refLng:u,x:p,y:g}}),{lat:c,lng:u}):{lat:z,lng:B}}_calculateRelativePositionFromLatLng(c,u,p,g){const w=c*Math.PI/180,C=u*Math.PI/180,k=p*Math.PI/180,z=g*Math.PI/180,B=k-w,N=z-C,W=B*6378137;return{x:N*6378137*Math.cos(w),y:W}}_calculateDistance(c,u,p,g){return Math.sqrt(Math.pow(p-c,2)+Math.pow(g-u,2))}_filterAccelerometerData(c){const u=this.accelerometerLowPassFilter.filter(c.x,"x"),p=this.accelerometerLowPassFilter.filter(c.y,"y"),g=this.accelerometerLowPassFilter.filter(c.z,"z");this.isCalibrating&&(this.accelerometerBias.x=(1-.1)*this.accelerometerBias.x+.1*u,this.accelerometerBias.y=(1-.1)*this.accelerometerBias.y+.1*p,this.accelerometerBias.z=(1-.1)*this.accelerometerBias.z+.1*g);const y=u-this.accelerometerBias.x,w=p-this.accelerometerBias.y,C=g-this.accelerometerBias.z;if(c.includesGravity){const k=this.accelerometerHighPassFilter.filter(y,"x"),z=this.accelerometerHighPassFilter.filter(w,"y"),B=this.accelerometerHighPassFilter.filter(C,"z");return{x:k,y:z,z:B}}return{x:y,y:w,z:C}}_filterGyroscopeData(c){const u=this.gyroscopeLowPassFilter.filter(c.alpha,"alpha"),p=this.gyroscopeLowPassFilter.filter(c.beta,"beta"),g=this.gyroscopeLowPassFilter.filter(c.gamma,"gamma");this.isCalibrating&&(this.gyroscopeBias.alpha=(1-.1)*this.gyroscopeBias.alpha+.1*u,this.gyroscopeBias.beta=(1-.1)*this.gyroscopeBias.beta+.1*p,this.gyroscopeBias.gamma=(1-.1)*this.gyroscopeBias.gamma+.1*g);const y=u-this.gyroscopeBias.alpha,w=p-this.gyroscopeBias.beta,C=g-this.gyroscopeBias.gamma,k=y,z=w,B=C,N=k*Math.PI/180,W=z*Math.PI/180,$=B*Math.PI/180;return{alpha:k,beta:z,gamma:B,alphaRad:N,betaRad:W,gammaRad:$}}_filterOrientationData(c){const u=this.orientationLowPassFilter.filter(c.alpha,"alpha"),p=this.orientationLowPassFilter.filter(c.beta,"beta"),g=this.orientationLowPassFilter.filter(c.gamma,"gamma");return{alpha:u,beta:p,gamma:g,absolute:c.absolute}}_detectStep(c,u){return this.isCalibrating?!1:this.peakDetector.addSample(c,u)&&u-this.lastStepTime>250&&c>.8?(this.stepCount++,this.lastStepTime=u,this._notify({type:"stepDetected",stepCount:this.stepCount,timestamp:u}),!0):!1}_processSensorData(c){if(this.isCalibrating){Date.now()-this.calibrationStart>this.calibrationDuration&&(console.log("Calibration complete. Biases:",{accelerometer:this.accelerometerBias,gyroscope:this.gyroscopeBias}),this.isCalibrating=!1,this._notify({type:"calibrationComplete",isCalibrating:!1,accelerometerBias:this.accelerometerBias,gyroscopeBias:this.gyroscopeBias}));return}const u=c.timestamp,p=(u-this.lastUpdateTime)/1e3;if(this.lastUpdateTime===0||p<=0){this.lastUpdateTime=u;return}let g={a_norm:0,omega:0};c.type==="gyroscope"&&(g.omega=c.data.alphaRad||0),c.type==="accelerometer"&&c.stepDetected&&(g.a_norm=1),this.kalmanFilter.predict(g,u);const y=this.kalmanFilter.getState();this.currentPosition={x:y.x,y:y.y,theta:y.theta};let w=null;this.referencePosition&&(w=this._calculateNewLatLng(this.referencePosition.lat,this.referencePosition.lng,this.currentPosition.x,this.currentPosition.y),(this.path.length===0||this._calculateDistance(this.path[this.path.length-1].x,this.path[this.path.length-1].y,this.currentPosition.x,this.currentPosition.y)>.5&&u-this.path[this.path.length-1].timestamp>500)&&(this.path.push({x:this.currentPosition.x,y:this.currentPosition.y,timestamp:u}),this.geoPath.push({lat:w.lat,lng:w.lng,timestamp:u}))),this.lastUpdateTime=u,c.type==="accelerometer"&&c.stepDetected?this._notify({type:"positionUpdated",currentPosition:this.currentPosition,geoPosition:w,kalmanState:y,path:this.path,geoPath:this.geoPath,source:"imu"}):c.type==="orientation"&&this._notify({type:"orientationUpdated",currentPosition:this.currentPosition,geoPosition:w,kalmanState:y,source:"imu"})}_notify(c){const u={...c,isActive:this.isActive,isCalibrating:this.isCalibrating};this._listeners.forEach(p=>{try{p(u)}catch(g){console.error("Error in Dead Reckoning listener:",g)}})}_logSensorData(c,u,p){this._log.timestamp.length>=1e3&&(this._log.timestamp.shift(),this._log.sensor.shift(),this._log.data.shift(),this._log.result.shift()),this._log.timestamp.push(p),this._log.sensor.push(c),this._log.data.push(JSON.parse(JSON.stringify(u)));const y={position:this.currentPosition?{...this.currentPosition}:null,kalmanState:this.kalmanFilter?this.kalmanFilter.getState():null,stepCount:this.stepCount};this._log.result.push(y)}}const rt=new Dp,Ap=()=>{const[d,c]=R.useState({x:0,y:0,z:0}),[u,p]=R.useState({x:0,y:0,z:0}),[g,y]=R.useState({x:0,y:0,z:0}),[w,C]=R.useState({alpha:0,beta:0,gamma:0}),[k,z]=R.useState({x:0,y:0,z:0}),[B,N]=R.useState(!1),[W,$]=R.useState(!1);return R.useEffect(()=>{let A=!1,q=!1;window.DeviceMotionEvent&&(q=!0),(window.DeviceOrientationEvent||window.DeviceOrientationAbsoluteEvent)&&(A=!0),N(q&&A);const ne=ee=>{ee.accelerationIncludingGravity&&p({x:ee.accelerationIncludingGravity.x||0,y:ee.accelerationIncludingGravity.y||0,z:ee.accelerationIncludingGravity.z||0}),ee.acceleration&&c({x:ee.acceleration.x||0,y:ee.acceleration.y||0,z:ee.acceleration.z||0}),ee.rotationRate&&y({x:(ee.rotationRate.beta||0)*Math.PI/180,y:(ee.rotationRate.gamma||0)*Math.PI/180,z:(ee.rotationRate.alpha||0)*Math.PI/180})},J=ee=>{ee.absolute||ee.webkitCompassHeading!==void 0?(C({alpha:ee.alpha||0,beta:ee.beta||0,gamma:ee.gamma||0}),ee.webkitCompassHeading!==void 0&&C(me=>({...me,alpha:ee.webkitCompassHeading}))):C({alpha:ee.alpha||0,beta:ee.beta||0,gamma:ee.gamma||0})};return A&&(window.DeviceOrientationAbsoluteEvent?window.addEventListener("deviceorientationabsolute",J):window.addEventListener("deviceorientation",J)),q&&window.addEventListener("devicemotion",ne),()=>{q&&window.removeEventListener("devicemotion",ne),A&&(window.DeviceOrientationAbsoluteEvent?window.removeEventListener("deviceorientationabsolute",J):window.removeEventListener("deviceorientation",J))}},[W]),{acceleration:d,accelerationIncludingGravity:u,rotationRate:g,orientation:w,magneticField:k,isSupported:B,hasPermission:W,requestPermission:async()=>{let A=!0;if(typeof DeviceMotionEvent.requestPermission=="function")try{await DeviceMotionEvent.requestPermission()==="granted"?$(!0):A=!1}catch(q){console.error("Error requesting motion permission:",q),A=!1}if(typeof DeviceOrientationEvent.requestPermission=="function")try{await DeviceOrientationEvent.requestPermission()==="granted"?$(!0):A=!1}catch(q){console.error("Error requesting orientation permission:",q),A=!1}else $(!0);return A},checkPermissions:()=>typeof DeviceMotionEvent.requestPermission!="function"&&typeof DeviceOrientationEvent.requestPermission!="function"?($(!0),!0):W}},Bp=({currentLocation:d})=>{const[c,u]=R.useState(rt.isActive),[p,g]=R.useState(rt.isCalibrating),[y,w]=R.useState(rt.stepCount),[C,k]=R.useState(rt.strideLength),[z,B]=R.useState(null),{acceleration:N,rotationRate:W,orientation:$,isSupported:se,hasPermission:H,requestPermission:A}=Ap();R.useEffect(()=>{const me=rt.addListener(X=>{u(X.isActive),g(X.isCalibrating),w(X.stepCount),X.kalmanState&&B(X.kalmanState)});return()=>me()},[]),R.useEffect(()=>{if(c&&H){const me=Date.now();N&&rt.processAccelerometerData(N,me),W&&rt.processGyroscopeData(W,me),$&&rt.processOrientationData($,me)}},[c,H,N,W,$]);const q=async()=>{if(c)rt.toggle();else{if(!se){alert("سنسورهای دستگاه پشتیبانی نمی‌شوند.");return}if(!H&&!await A()){alert("برای استفاده از سنسورها، لطفاً دسترسی لازم را فعال کنید.");return}let me=null;d!=null&&d.coords?!isNaN(d.coords.lat)&&!isNaN(d.coords.lng)?(me={lat:d.coords.lat,lng:d.coords.lng,accuracy:d.coords.accuracy},console.log("Using initial GPS position:",me)):console.warn("Invalid GPS coordinates:",d.coords):console.warn("No current location available for initial position"),rt.toggle(me)}},ne=()=>{rt.reset()},J=()=>{rt.exportLog()},ee=me=>{const X=parseFloat(me.target.value);k(X),rt.setStrideLength(X)};return v.jsxs("div",{className:"dead-reckoning-panel",children:[v.jsx("div",{className:"dr-header",children:v.jsx("h3",{children:"Advanced Dead Reckoning"})}),c&&p&&v.jsx("div",{className:"calibrating-status",children:"درحال کالیبراسیون سنسورها..."}),v.jsxs("div",{className:"dr-button-group",children:[v.jsx("button",{className:`dr-button dr-button-start ${c?"active":""}`,onClick:q,disabled:!se||!c&&!H&&typeof DeviceMotionEvent.requestPermission=="function",children:c?"توقف ردیابی پیشرفته":"شروع ردیابی پیشرفته"}),v.jsx("button",{className:"dr-button dr-button-reset",onClick:ne,disabled:!c,children:"بازنشانی سیستم"}),v.jsx("button",{className:"dr-button dr-button-export",onClick:J,disabled:y===0,children:"خروجی لاگ"})]}),v.jsxs("div",{className:"dr-step-count",children:["تعداد گام‌ها: ",y]}),v.jsxs("div",{className:"dr-stride-control",children:[v.jsx("label",{className:"dr-stride-label",children:"طول گام (متر):"}),v.jsx("input",{type:"range",min:"0.3",max:"1.2",step:"0.05",value:C,onChange:ee,className:"dr-stride-slider",disabled:!c}),v.jsx("div",{className:"dr-stride-value",children:C.toFixed(2)})]}),z&&v.jsxs("div",{style:{fontSize:"12px",marginTop:"10px",borderTop:"1px solid #ddd",paddingTop:"10px"},children:[v.jsxs("p",{children:["موقعیت نسبی: (",z.x.toFixed(2),", ",z.y.toFixed(2),") متر"]}),v.jsxs("p",{children:["جهت: ",(z.theta*180/Math.PI).toFixed(2),"°"]}),v.jsxs("p",{children:["سرعت: ",z.v.toFixed(2)," m/s"]}),v.jsxs("p",{children:["سرعت زاویه‌ای: ",(z.w*180/Math.PI).toFixed(2),"°/s"]})]})]})};delete Ts.Icon.Default.prototype._getIconUrl;Ts.Icon.Default.mergeOptions({iconUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png"});const Fp=new Ts.Icon({iconUrl:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iIzAwODVmZiIgd2lkdGg9IjI0cHgiIGhlaWdodD0iMjRweCI+PHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjgiLz48L3N2Zz4=",iconSize:[24,24],iconAnchor:[12,12],popupAnchor:[0,-12]}),Zp=new Ts.Icon({iconUrl:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI2U1MzkzNSIgd2lkdGg9IjI0cHgiIGhlaWdodD0iMjRweCI+PHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjgiLz48L3N2Zz4=",iconSize:[24,24],iconAnchor:[12,12],popupAnchor:[0,-12]}),Up=d=>new Ts.Icon({iconUrl:`data:image/svg+xml;base64,${btoa(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">  
    <path fill="red" transform="rotate(${d}, 12, 12)" d="M12,2L4.5,20.29L5.21,21L12,18L18.79,21L19.5,20.29L12,2Z"/>  
  </svg>`)}`,iconSize:[32,32],iconAnchor:[16,16],popupAnchor:[0,-16]}),bp=({position:d,follow:c})=>{const u=Ep();return R.useEffect(()=>{d&&c&&u.setView(d,u.getZoom())},[d,c,u]),null},Hp=({currentLocation:d,locationHistory:c=[],savedLocations:u=[],followUser:p=!0,initialZoom:g=15})=>{const[y,w]=R.useState(null),[C,k]=R.useState(p),[z,B]=R.useState(rt.isActive),[N,W]=R.useState([]),[$,se]=R.useState(null),[H,A]=R.useState(null),q=H&&C&&z?[H.lat,H.lng]:d!=null&&d.coords?[d.coords.lat,d.coords.lng]:null,ne=c.filter(X=>{var ge,Be;return((ge=X==null?void 0:X.coords)==null?void 0:ge.lat)&&((Be=X==null?void 0:X.coords)==null?void 0:Be.lng)}).map(X=>[X.coords.lat,X.coords.lng]);R.useEffect(()=>{const X=rt.addListener(ge=>{if(B(ge.isActive),ge.geoPath&&ge.geoPath.length>0){const Be=ge.geoPath.map(ot=>[ot.lat,ot.lng]);W(Be)}if(ge.kalmanState&&(se(ge.kalmanState),rt.referencePosition&&ge.kalmanState.x!==void 0&&ge.kalmanState.y!==void 0)){const Be=rt._calculateNewLatLng(rt.referencePosition.lat,rt.referencePosition.lng,ge.kalmanState.x,ge.kalmanState.y);A(Be)}ge.type==="serviceReset"&&(W([]),ge.geoPath&&ge.geoPath.length>0&&W([[ge.geoPath[0].lat,ge.geoPath[0].lng]]))});return()=>X()},[]),R.useEffect(()=>{z&&(d!=null&&d.coords)&&rt.processGpsData({lat:d.coords.lat,lng:d.coords.lng},d.coords.accuracy,Date.now())},[z,d]);const J=()=>{k(X=>!X),!C&&q&&y&&y.setView(q,y.getZoom()||g)},ee=()=>{var X;return d!=null&&d.coords?[d.coords.lat,d.coords.lng]:c.length>0&&((X=c[0])!=null&&X.coords)?[c[0].coords.lat,c[0].coords.lng]:[35.6892,51.389]},me=($==null?void 0:$.theta)!==void 0?($.theta*180/Math.PI+360)%360:0;return v.jsxs("div",{className:"map-fullscreen",children:[v.jsxs(Mp,{center:ee(),zoom:g,className:"map-container",whenCreated:w,zoomControl:!1,children:[v.jsx(Op,{position:"topright"}),v.jsx(Np,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(d==null?void 0:d.coords)&&v.jsxs(v.Fragment,{children:[v.jsx(el,{position:[d.coords.lat,d.coords.lng],icon:Fp,zIndexOffset:500,children:v.jsx(Ru,{children:v.jsxs("div",{children:[v.jsx("h3",{children:"موقعیت GPS"}),v.jsxs("p",{children:["طول جغرافیایی: ",d.coords.lng.toFixed(6)]}),v.jsxs("p",{children:["عرض جغرافیایی: ",d.coords.lat.toFixed(6)]}),v.jsxs("p",{children:["دقت: ",d.coords.accuracy.toFixed(1)," متر"]})]})})}),v.jsx(Tp,{center:[d.coords.lat,d.coords.lng],radius:d.coords.accuracy,color:"#0085ff",fillColor:"#0085ff",fillOpacity:.1,weight:1})]}),z&&H&&!isNaN(H.lat)&&!isNaN(H.lng)&&v.jsxs(v.Fragment,{children:[v.jsx(el,{position:[H.lat,H.lng],icon:Zp,zIndexOffset:600,children:v.jsx(Ru,{children:v.jsxs("div",{children:[v.jsx("h3",{children:"موقعیت تخمینی (DR)"}),v.jsxs("p",{children:["طول جغرافیایی: ",H.lng.toFixed(6)]}),v.jsxs("p",{children:["عرض جغرافیایی: ",H.lat.toFixed(6)]}),$&&v.jsxs(v.Fragment,{children:[v.jsxs("p",{children:["جهت (درجه): ",me.toFixed(2)]}),v.jsxs("p",{children:["سرعت: ",$.v.toFixed(2)," متر بر ثانیه"]}),v.jsxs("p",{children:["طول گام: ",$.stride.toFixed(2)," متر"]})]})]})})}),($==null?void 0:$.theta)!==void 0&&v.jsx(el,{position:[H.lat,H.lng],icon:Up(me),zIndexOffset:1e3})]}),ne.length>1&&v.jsx(Wh,{positions:ne,color:"#0085ff",weight:3,opacity:.7}),z&&N.length>1&&v.jsx(Wh,{positions:N.filter(X=>!isNaN(X[0])&&!isNaN(X[1])),color:"#e53935",weight:3,opacity:.7}),u.map((X,ge)=>v.jsx(el,{position:[X.coords.lat,X.coords.lng],children:v.jsx(Ru,{children:v.jsxs("div",{children:[v.jsx("h3",{children:X.name||`نقطه ${ge+1}`}),v.jsxs("p",{children:["طول جغرافیایی: ",X.coords.lng.toFixed(6)]}),v.jsxs("p",{children:["عرض جغرافیایی: ",X.coords.lat.toFixed(6)]}),X.timestamp&&v.jsxs("p",{children:["زمان: ",new Date(X.timestamp).toLocaleString()]})]})})},X.id||ge)),q&&v.jsx(bp,{position:q,follow:C})]}),v.jsxs("div",{className:"map-controls-overlay",children:[v.jsx("button",{className:`map-control-button ${C?"active":""}`,onClick:J,title:C?"توقف تعقیب موقعیت":"تعقیب موقعیت",children:v.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("circle",{cx:"12",cy:"12",r:"10"}),v.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}),v.jsx("button",{className:"map-control-button",onClick:()=>{q&&y&&(y.setView(q,y.getZoom()),k(!0))},title:"مرکز به موقعیت فعلی",children:v.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"6"}),v.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"22"}),v.jsx("line",{x1:"2",y1:"12",x2:"6",y2:"12"}),v.jsx("line",{x1:"18",y1:"12",x2:"22",y2:"12"}),v.jsx("circle",{cx:"12",cy:"12",r:"4"})]})})]}),(d==null?void 0:d.coords)&&v.jsx("div",{className:"location-panel",children:v.jsxs("div",{className:"coordinates-display",children:[v.jsxs("div",{children:[v.jsx("span",{children:"عرض:"})," ",d.coords.lat.toFixed(6)]}),v.jsxs("div",{children:[v.jsx("span",{children:"طول:"})," ",d.coords.lng.toFixed(6)]}),v.jsxs("div",{children:[v.jsx("span",{children:"دقت:"})," ",d.coords.accuracy.toFixed(1)," متر"]})]})}),v.jsx(Bp,{currentLocation:d})]})},df=(d,c,u,p)=>{const y=d*Math.PI/180,w=u*Math.PI/180,C=(u-d)*Math.PI/180,k=(p-c)*Math.PI/180,z=Math.sin(C/2)*Math.sin(C/2)+Math.cos(y)*Math.cos(w)*Math.sin(k/2)*Math.sin(k/2);return 6371e3*(2*Math.atan2(Math.sqrt(z),Math.sqrt(1-z)))},Wp=(d,c)=>{if(!c||!d)return!0;if(!c.coords||!d.coords||!c.coords.lat||!c.coords.lng||!d.coords.lat||!d.coords.lng)return console.log("مختصات ناقص یا نامعتبر"),!0;const u=df(c.coords.lat,c.coords.lng,d.coords.lat,d.coords.lng);if(!c.timestamp||!d.timestamp)return!0;const p=(d.timestamp-c.timestamp)/1e3;if(p<=0)return!0;const g=u/p;return console.log(`فاصله: ${u.toFixed(2)}m, زمان: ${p.toFixed(2)}s, سرعت: ${g.toFixed(2)}m/s`),g>5?(console.log("سرعت غیرمعقول - داده فیلتر شد"),!1):u>50&&p<5?(console.log("پرش موقعیت - داده فیلتر شد"),!1):!0},Gh=(d,c,u,p)=>{const g=d*Math.PI/180,y=u*Math.PI/180,w=(p-c)*Math.PI/180,C=Math.sin(w)*Math.cos(y),k=Math.cos(g)*Math.sin(y)-Math.sin(g)*Math.cos(y)*Math.cos(w);return Math.atan2(C,k)*180/Math.PI},Gp=(d,c)=>{let u=Math.abs(c-d);return u>180&&(u=360-u),u>120},Vp=(d,c)=>{const[u,p]=R.useState(!1),[g,y]=R.useState(!1),[w,C]=R.useState(!1),[k,z]=R.useState(!1),[B,N]=R.useState(0),W=5,$=50,se=50;return R.useEffect(()=>{if(!d||!Array.isArray(d)||d.length<1||!c){console.log("داده‌های کافی برای تحلیل وجود ندارد",{hasHistory:!!d,historyLength:(d==null?void 0:d.length)||0,hasCurrent:!!c});return}console.log("تحلیل کیفیت GPS با",d.length,"نقطه در تاریخچه");let H=!1,A=!1,q=!1,ne=0;if(c.coords&&c.coords.accuracy&&c.coords.accuracy>se&&(q=!0,ne+=20,console.log(`دقت پایین: ${c.coords.accuracy.toFixed(2)} متر`)),d.length>0){const J=d[d.length-1];if(J&&J.coords&&c&&c.coords)if(J.coords.lat&&J.coords.lng&&c.coords.lat&&c.coords.lng){const ee=df(J.coords.lat,J.coords.lng,c.coords.lat,c.coords.lng),me=(c.timestamp-J.timestamp)/1e3;if(me>0){const X=ee/me;if(console.log(`فاصله: ${ee.toFixed(2)}m, زمان: ${me.toFixed(2)}s, سرعت: ${X.toFixed(2)}m/s`),ee>$&&me<5&&(H=!0,ne+=30,console.log("پرش موقعیت شناسایی شد")),X>W&&(A=!0,ne+=30,console.log("سرعت غیرمعقول شناسایی شد")),d.length>1){const ge=d[d.length-2];if(ge&&ge.coords&&ge.coords.lat&&ge.coords.lng){const Be=Gh(ge.coords.lat,ge.coords.lng,J.coords.lat,J.coords.lng),ot=Gh(J.coords.lat,J.coords.lng,c.coords.lat,c.coords.lng);Gp(Be,ot)&&ee>5&&(ne+=20,console.log("تغییر جهت ناگهانی شناسایی شد"))}}}else console.log("فاصله زمانی نامعتبر:",me)}else console.log("مختصات ناقص در نقاط:",{prevLat:J.coords.lat,prevLng:J.coords.lng,currLat:c.coords.lat,currLng:c.coords.lng});else console.log("ساختار داده نقاط ناقص است")}ne=Math.min(ne,100),console.log("امتیاز نویز GPS:",ne),z(H),C(A),y(q),p(ne>50),N(ne)},[d,c]),{isJamming:u,isAccuracyLow:g,isSpeedUnrealistic:w,isPositionJumping:k,anomalyScore:B,noiseLevel:B<20?"کم":B<50?"متوسط":"زیاد"}};class it{static async initDB(){return new Promise((c,u)=>{const p=indexedDB.open(this.DB_NAME,1);p.onupgradeneeded=g=>{const y=g.target.result;y.objectStoreNames.contains(this.GPS_LOGS_STORE)||y.createObjectStore(this.GPS_LOGS_STORE,{keyPath:"id",autoIncrement:!0}).createIndex("timestamp","timestamp",{unique:!1}),y.objectStoreNames.contains(this.TRACK_LOGS_STORE)||y.createObjectStore(this.TRACK_LOGS_STORE,{keyPath:"id",autoIncrement:!0}).createIndex("startTime","startTime",{unique:!1})},p.onsuccess=g=>{c(g.target.result)},p.onerror=g=>{console.error("خطا در باز کردن دیتابیس:",g.target.error),u(g.target.error)}})}static async saveGPSLog(c,u=!1){try{const p=await this.initDB();return new Promise((g,y)=>{const C=p.transaction([this.GPS_LOGS_STORE],"readwrite").objectStore(this.GPS_LOGS_STORE),k={coords:c.coords,timestamp:c.timestamp||Date.now(),isNoisy:u,deviceInfo:{userAgent:navigator.userAgent,platform:navigator.platform,language:navigator.language,connection:navigator.connection?{type:navigator.connection.type,effectiveType:navigator.connection.effectiveType,downlink:navigator.connection.downlink,rtt:navigator.connection.rtt}:null},logTime:new Date().toISOString()},z=C.add(k);z.onsuccess=()=>{g(z.result)},z.onerror=B=>{console.error("خطا در ذخیره لاگ GPS:",B.target.error),y(B.target.error)}})}catch(p){console.error("خطا در ذخیره لاگ GPS:",p),this.saveGPSLogToLocalStorage(c,u)}}static saveGPSLogToLocalStorage(c,u=!1){try{const p=JSON.parse(localStorage.getItem("gps_logs")||"[]");p.push({coords:c.coords,timestamp:c.timestamp||Date.now(),isNoisy:u,deviceInfo:{userAgent:navigator.userAgent},logTime:new Date().toISOString()}),p.length>1e4&&p.splice(0,p.length-1e4),localStorage.setItem("gps_logs",JSON.stringify(p))}catch(p){console.error("خطا در ذخیره لاگ در localStorage:",p)}}static async saveTrackLog(c,u,p,g={}){try{const y=await this.initDB();return new Promise((w,C)=>{const z=y.transaction([this.TRACK_LOGS_STORE],"readwrite").objectStore(this.TRACK_LOGS_STORE),B={points:c,startTime:u,endTime:p,duration:p-u,pointCount:c.length,metadata:{...g,deviceInfo:{userAgent:navigator.userAgent,platform:navigator.platform}},createdAt:new Date().toISOString()},N=z.add(B);N.onsuccess=()=>{w(N.result)},N.onerror=W=>{console.error("خطا در ذخیره لاگ مسیر:",W.target.error),C(W.target.error)}})}catch(y){console.error("خطا در ذخیره لاگ مسیر:",y),this.saveTrackLogToLocalStorage(c,u,p,g)}}static saveTrackLogToLocalStorage(c,u,p,g={}){try{const y=JSON.parse(localStorage.getItem("track_logs")||"[]");y.push({points:c,startTime:u,endTime:p,duration:p-u,pointCount:c.length,metadata:g,createdAt:new Date().toISOString()}),y.length>100&&y.splice(0,y.length-100),localStorage.setItem("track_logs",JSON.stringify(y))}catch(y){console.error("خطا در ذخیره مسیر در localStorage:",y)}}static async getGPSLogs(c=1e3,u=0){try{const p=await this.initDB();return new Promise((g,y)=>{const k=p.transaction([this.GPS_LOGS_STORE],"readonly").objectStore(this.GPS_LOGS_STORE).index("timestamp"),z=[];let B=k.openCursor(null,"prev"),N=0;B.onsuccess=W=>{const $=W.target.result;$&&N<u+c?(N>=u&&z.push($.value),N++,$.continue()):g(z)},B.onerror=W=>{console.error("خطا در بازیابی لاگ‌های GPS:",W.target.error),y(W.target.error)}})}catch(p){console.error("خطا در بازیابی لاگ‌های GPS:",p);const g=JSON.parse(localStorage.getItem("gps_logs")||"[]");return g.slice(-Math.min(c,g.length))}}static async getTrackLogs(){try{const c=await this.initDB();return new Promise((u,p)=>{const C=c.transaction([this.TRACK_LOGS_STORE],"readonly").objectStore(this.TRACK_LOGS_STORE).index("startTime").getAll();C.onsuccess=()=>{u(C.result)},C.onerror=k=>{console.error("خطا در بازیابی لاگ‌های مسیر:",k.target.error),p(k.target.error)}})}catch(c){return console.error("خطا در بازیابی لاگ‌های مسیر:",c),JSON.parse(localStorage.getItem("track_logs")||"[]")}}static async clearGPSLogs(){try{const c=await this.initDB();return new Promise((u,p)=>{const w=c.transaction([this.GPS_LOGS_STORE],"readwrite").objectStore(this.GPS_LOGS_STORE).clear();w.onsuccess=()=>{u(!0)},w.onerror=C=>{console.error("خطا در پاک کردن لاگ‌های GPS:",C.target.error),p(C.target.error)}})}catch(c){return console.error("خطا در پاک کردن لاگ‌های GPS:",c),localStorage.removeItem("gps_logs"),!0}}static async clearTrackLogs(){try{const c=await this.initDB();return new Promise((u,p)=>{const w=c.transaction([this.TRACK_LOGS_STORE],"readwrite").objectStore(this.TRACK_LOGS_STORE).clear();w.onsuccess=()=>{u(!0)},w.onerror=C=>{console.error("خطا در پاک کردن لاگ‌های مسیر:",C.target.error),p(C.target.error)}})}catch(c){return console.error("خطا در پاک کردن لاگ‌های مسیر:",c),localStorage.removeItem("track_logs"),!0}}static async exportGPSLogsAsJSON(){const c=await this.getGPSLogs(1e5);return JSON.stringify(c,null,2)}static async exportGPSLogsAsCSV(){const c=await this.getGPSLogs(1e5);if(c.length===0)return"هیچ لاگی یافت نشد";let u=`timestamp,latitude,longitude,accuracy,altitude,heading,speed,isNoisy
`;return c.forEach(p=>{const g=new Date(p.timestamp).toISOString(),y=p.coords.lat||"",w=p.coords.lng||"",C=p.coords.accuracy||"",k=p.coords.altitude||"",z=p.coords.heading||"",B=p.coords.speed||"",N=p.isNoisy?"true":"false";u+=`${g},${y},${w},${C},${k},${z},${B},${N}
`}),u}static async exportTrackLogsAsGeoJSON(){const c=await this.getTrackLogs(),u={type:"FeatureCollection",features:[]};return c.forEach(p=>{const g=p.points.map(y=>[y.coords.lng,y.coords.lat]);u.features.push({type:"Feature",geometry:{type:"LineString",coordinates:g},properties:{startTime:p.startTime,endTime:p.endTime,duration:p.duration,pointCount:p.pointCount,createdAt:p.createdAt}})}),JSON.stringify(u,null,2)}static async getLogCounts(){try{const c=await this.initDB(),u=new Promise((w,C)=>{const B=c.transaction([this.GPS_LOGS_STORE],"readonly").objectStore(this.GPS_LOGS_STORE).count();B.onsuccess=()=>{w(B.result)},B.onerror=N=>{C(N.target.error)}}),p=new Promise((w,C)=>{const B=c.transaction([this.TRACK_LOGS_STORE],"readonly").objectStore(this.TRACK_LOGS_STORE).count();B.onsuccess=()=>{w(B.result)},B.onerror=N=>{C(N.target.error)}}),[g,y]=await Promise.all([u,p]);return{gpsLogs:g,trackLogs:y}}catch(c){console.error("خطا در دریافت تعداد لاگ‌ها:",c);const u=JSON.parse(localStorage.getItem("gps_logs")||"[]"),p=JSON.parse(localStorage.getItem("track_logs")||"[]");return{gpsLogs:u.length,trackLogs:p.length}}}static async estimateStorageSize(){try{const c=await this.getGPSLogs(10),u=await this.getTrackLogs();u.splice(10);const p=JSON.stringify(c),g=JSON.stringify(u),y=c.length>0?p.length/c.length:0,w=u.length>0?g.length/u.length:0,C=await this.getLogCounts();return{gpsLogsSize:Math.round(y*C.gpsLogs),trackLogsSize:Math.round(w*C.trackLogs),totalSize:Math.round(y*C.gpsLogs+w*C.trackLogs)}}catch(c){return console.error("خطا در تخمین حجم دیتابیس:",c),{gpsLogsSize:0,trackLogsSize:0,totalSize:0}}}static downloadFile(c,u,p){const g=new Blob([c],{type:p}),y=URL.createObjectURL(g),w=document.createElement("a");w.href=y,w.download=u,document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(y)}}Ya(it,"DB_NAME","gps_tracker_db"),Ya(it,"GPS_LOGS_STORE","gps_logs"),Ya(it,"TRACK_LOGS_STORE","track_logs");const $p=()=>{const[d,c]=R.useState(null),[u,p]=R.useState([]),[g,y]=R.useState([]),[w,C]=R.useState(!1),[k,z]=R.useState(null),[B,N]=R.useState(!0),[W,$]=R.useState(null),{isJamming:se,isAccuracyLow:H,isSpeedUnrealistic:A,isPositionJumping:q,anomalyScore:ne,noiseLevel:J}=Vp(u,d),ee=R.useCallback(()=>{if(N(!0),z(null),!navigator.geolocation){z("مرورگر شما از Geolocation پشتیبانی نمی‌کند"),N(!1);return}navigator.geolocation.getCurrentPosition(Pe=>{console.log("موقعیت فعلی دریافت شد:",Pe);const{latitude:ye,longitude:De,accuracy:Oe,altitude:gt,heading:Ie,speed:Re}=Pe.coords,F={coords:{lat:ye,lng:De,accuracy:Oe,altitude:gt,heading:Ie,speed:Re},timestamp:Pe.timestamp,id:Date.now()};it.saveGPSLog(F,!1),c(F),N(!1)},Pe=>{console.error("خطا در دریافت موقعیت:",Pe);let ye="خطا در دریافت موقعیت";switch(Pe.code){case Pe.PERMISSION_DENIED:ye="دسترسی به موقعیت توسط کاربر رد شده است";break;case Pe.POSITION_UNAVAILABLE:ye="اطلاعات موقعیت در دسترس نیست";break;case Pe.TIMEOUT:ye="زمان درخواست موقعیت به پایان رسید";break;case Pe.UNKNOWN_ERROR:ye="خطای ناشناخته در دریافت موقعیت";break}z(ye),N(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})},[]),me=R.useCallback(()=>{if(C(!0),$(Date.now()),!navigator.geolocation){z("مرورگر شما از Geolocation پشتیبانی نمی‌کند");return}ee();const Pe=navigator.geolocation.watchPosition(ye=>{console.log("دریافت موقعیت جدید از watchPosition:",ye);const{latitude:De,longitude:Oe,accuracy:gt,altitude:Ie,heading:Re,speed:F}=ye.coords,fe={coords:{lat:De,lng:Oe,accuracy:gt,altitude:Ie,heading:Re,speed:F},timestamp:ye.timestamp,id:Date.now()};c(U=>{const E=U&&!Wp(fe,U);return it.saveGPSLog(fe,E),E?console.log("داده GPS نویزی فیلتر شد و به تاریخچه اضافه نشد"):p(Z=>{const de=[...Z,fe];return console.log("نقطه جدید به تاریخچه اضافه شد. تعداد نقاط:",de.length),de}),fe}),z(null)},ye=>{console.error("خطا در ردیابی موقعیت:",ye);let De="خطا در ردیابی موقعیت";switch(ye.code){case ye.PERMISSION_DENIED:De="دسترسی به موقعیت توسط کاربر رد شده است";break;case ye.POSITION_UNAVAILABLE:De="اطلاعات موقعیت در دسترس نیست";break;case ye.TIMEOUT:De="زمان درخواست موقعیت به پایان رسید";break;case ye.UNKNOWN_ERROR:De="خطای ناشناخته در دریافت موقعیت";break}z(De)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0});window.geolocationWatchId=Pe},[ee]),X=R.useCallback(()=>{if(C(!1),window.geolocationWatchId!==void 0&&navigator.geolocation&&(navigator.geolocation.clearWatch(window.geolocationWatchId),window.geolocationWatchId=void 0,console.log("ردیابی GPS متوقف شد"),W&&u.length>0)){const Pe=Date.now(),ye=prompt("نام این مسیر را وارد کنید:",`مسیر ${new Date().toLocaleDateString("fa-IR")}`);it.saveTrackLog(u,W,Pe,{name:ye||`مسیر ${new Date().toLocaleDateString("fa-IR")}`,noiseScore:ne,quality:J,length:u.length}),console.log("مسیر ذخیره شد")}},[u,W,ne,J]),ge=R.useCallback(()=>{w?X():me()},[w,X,me]),Be=R.useCallback(()=>{if(d){const Pe=prompt("نام این مکان را وارد کنید:","مکان جدید");if(Pe){const ye={...d,name:Pe,id:Date.now()};y(De=>[...De,ye]),alert(`موقعیت "${Pe}" با موفقیت ذخیره شد.`)}}else alert("موقعیتی برای ذخیره وجود ندارد.")},[d]),ot=R.useCallback(()=>{if(!d){alert("موقعیتی برای اشتراک‌گذاری وجود ندارد.");return}const{lat:Pe,lng:ye}=d.coords,De=`https://maps.google.com/maps?q=${Pe},${ye}`;if(navigator.share)navigator.share({title:"موقعیت من",text:`موقعیت من: ${Pe}, ${ye}`,url:De}).then(()=>console.log("موقعیت با موفقیت به اشتراک گذاشته شد")).catch(Oe=>console.error("خطا در اشتراک‌گذاری:",Oe));else{const Oe=document.createElement("textarea");Oe.value=De,document.body.appendChild(Oe),Oe.select(),document.execCommand("copy"),document.body.removeChild(Oe),alert(`لینک موقعیت در کلیپ‌بورد کپی شد: ${De}`)}},[d]),Mt=R.useCallback(()=>{u.length>0?window.confirm("آیا مطمئن هستید که می‌خواهید تاریخچه مسیر را پاک کنید؟")&&(p([]),console.log("تاریخچه مسیر پاک شد")):alert("تاریخچه مسیری برای پاک کردن وجود ندارد.")},[u.length]);return R.useEffect(()=>(console.log("MapPage mounted - دریافت موقعیت اولیه"),ee(),()=>{window.geolocationWatchId!==void 0&&navigator.geolocation&&(navigator.geolocation.clearWatch(window.geolocationWatchId),console.log("ردیابی GPS پاکسازی شد (unmount)"))}),[ee]),R.useEffect(()=>{se&&console.log("هشدار: احتمال اختلال در سیگنال GPS",{score:ne,isAccuracyLow:H,isSpeedUnrealistic:A,isPositionJumping:q})},[se,ne,H,A,q]),v.jsxs("div",{className:"map-fullpage",children:[v.jsxs("div",{className:"map-toolbar",children:[v.jsxs(In,{to:"/",className:"back-button",children:[v.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",stroke:"currentColor",strokeWidth:"2",fill:"none",children:v.jsx("path",{d:"M15 18l-6-6 6-6"})}),v.jsx("span",{children:"بازگشت"})]}),v.jsxs("div",{className:`signal-quality-pill ${ne<20?"good":ne<50?"medium":"poor"}`,children:[v.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("path",{d:"M2 12 L12 2 L22 12"}),v.jsx("path",{d:"M5 15 L12 8 L19 15"}),v.jsx("path",{d:"M8 18 L12 14 L16 18"})]}),v.jsxs("span",{children:["GPS: ",J==="کم"?"خوب":J==="متوسط"?"متوسط":"ضعیف"]})]}),v.jsxs("button",{className:`tracking-button ${w?"active":""}`,onClick:ge,children:[v.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",stroke:"currentColor",strokeWidth:"2",fill:"none",children:w?v.jsx("path",{d:"M10 9v6l5-3-5-3z M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}):v.jsx("path",{d:"M12 8v4l3 3-1.5 1.5L9 12V8h3z M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),v.jsx("span",{children:w?"توقف ردیابی":"شروع ردیابی"})]})]}),v.jsx(Hp,{currentLocation:d,locationHistory:u,savedLocations:g,followUser:!0,initialZoom:15}),v.jsxs("div",{className:"map-bottom-toolbar",children:[v.jsxs("button",{className:"action-button save-button",onClick:Be,disabled:!d||se,children:[v.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("path",{d:"M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"}),v.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),v.jsx("polyline",{points:"7 3 7 8 15 8"})]}),v.jsx("span",{children:"ذخیره موقعیت"})]}),v.jsxs("button",{className:"action-button share-button",onClick:ot,disabled:!d,children:[v.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("circle",{cx:"18",cy:"5",r:"3"}),v.jsx("circle",{cx:"6",cy:"12",r:"3"}),v.jsx("circle",{cx:"18",cy:"19",r:"3"}),v.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),v.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),v.jsx("span",{children:"اشتراک‌گذاری"})]}),v.jsxs("button",{className:"action-button map-clear-button",onClick:Mt,disabled:u.length===0,children:[v.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("polyline",{points:"3 6 5 6 21 6"}),v.jsx("path",{d:"M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"})]}),v.jsx("span",{children:"پاک کردن مسیر"})]})]}),v.jsxs("div",{className:"alerts-container",children:[se&&v.jsxs("div",{className:"alert-toast warning-alert",children:[v.jsx("div",{className:"alert-icon",children:v.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"}),v.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),v.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})}),v.jsxs("div",{className:"alert-content",children:[v.jsx("div",{className:"alert-title",children:"احتمال اختلال GPS"}),v.jsxs("div",{className:"alert-details",children:[q&&v.jsx("span",{children:"پرش موقعیت"}),A&&v.jsx("span",{children:"سرعت غیرعادی"}),H&&v.jsx("span",{children:"دقت پایین"})]})]}),v.jsx("button",{className:"alert-close",onClick:()=>{},children:v.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),v.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),k&&v.jsxs("div",{className:"alert-toast error-alert",children:[v.jsx("div",{className:"alert-icon",children:v.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("circle",{cx:"12",cy:"12",r:"10"}),v.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),v.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]})}),v.jsxs("div",{className:"alert-content",children:[v.jsx("div",{className:"alert-title",children:"خطا"}),v.jsx("div",{className:"alert-message",children:k})]}),v.jsx("button",{className:"alert-close",onClick:()=>z(null),children:v.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),v.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),B&&!d&&v.jsxs("div",{className:"alert-toast info-alert",children:[v.jsx("div",{className:"alert-icon spinning",children:v.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("circle",{cx:"12",cy:"12",r:"10"}),v.jsx("path",{d:"M12 6v6l4 2"})]})}),v.jsx("div",{className:"alert-content",children:v.jsx("div",{className:"alert-message",children:"در حال یافتن موقعیت شما..."})})]})]})]})},Kp=()=>{const[d,c]=R.useState(!1),[u,p]=R.useState(null),[g,y]=R.useState(null),w=()=>{c(!0),y(null),p(null),console.log("شروع اسکن QR...")},C=z=>{console.log("QR اسکن شد:",z),c(!1),p({qrData:z,location:{coords:{lat:35.6892,lng:51.389}},timestamp:new Date().toISOString()})},k=z=>{console.error("خطای اسکن:",z),y(`خطا در اسکن: ${(z==null?void 0:z.message)||"خطای ناشناخته"}`),c(!1)};return v.jsxs("div",{className:"qr-scan-page",children:[v.jsx("h2",{children:"اسکن QR Code"}),g&&v.jsxs("div",{className:"error-container",children:[v.jsx("p",{className:"error-message",children:g}),v.jsx("button",{onClick:w,className:"btn btn-primary",children:"تلاش مجدد"})]}),!d&&!u&&!g&&v.jsxs("div",{className:"start-scan-container",children:[v.jsx("p",{children:"برای اسکن QR Code مربوط به موقعیت، دکمه زیر را فشار دهید."}),v.jsx("button",{onClick:w,className:"btn btn-primary",children:"شروع اسکن QR"})]}),d&&v.jsxs("div",{className:"scanner-container",children:[v.jsx("p",{className:"scan-instruction",children:"QR Code را مقابل دوربین قرار دهید"}),v.jsxs("div",{className:"scanner-placeholder",children:[v.jsx("p",{children:"اسکنر QR کد..."}),v.jsx("button",{onClick:()=>C("https://example.com/location/12345"),children:"شبیه‌سازی اسکن موفق"}),v.jsx("button",{onClick:()=>k(new Error("دسترسی به دوربین مقدور نیست")),children:"شبیه‌سازی خطا"})]})]}),u&&v.jsxs("div",{className:"scan-result-container",children:[v.jsx("h3",{children:"QR Code با موفقیت اسکن شد"}),v.jsxs("div",{className:"result-data",children:[v.jsx("p",{className:"qr-data",children:u.qrData}),u.location&&v.jsxs("div",{className:"location-data",children:[v.jsx("p",{children:"موقعیت اسکن:"}),v.jsxs("p",{children:["عرض جغرافیایی: ",u.location.coords.lat.toFixed(6)]}),v.jsxs("p",{children:["طول جغرافیایی: ",u.location.coords.lng.toFixed(6)]})]}),v.jsxs("p",{className:"scan-time",children:["زمان اسکن: ",new Date(u.timestamp).toLocaleString("fa-IR")]})]}),v.jsxs("div",{className:"action-buttons",children:[v.jsx("button",{className:"btn btn-primary",children:"نمایش روی نقشه"}),v.jsx("button",{onClick:w,className:"btn btn-secondary",children:"اسکن دوباره"})]})]})]})},qp=()=>{const[d,c]=R.useState({gpsLogs:0,trackLogs:0}),[u,p]=R.useState({gpsLogsSize:0,trackLogsSize:0,totalSize:0}),[g,y]=R.useState(!0),[w,C]=R.useState(!1),[k,z]=R.useState("");R.useEffect(()=>{async function A(){try{y(!0);const q=await it.getLogCounts(),ne=await it.estimateStorageSize();c(q),p(ne),y(!1)}catch(q){console.error("خطا در دریافت آمار لاگ‌ها:",q),z("خطا در دریافت آمار لاگ‌ها"),y(!1)}}A()},[]);const B=A=>{if(A===0)return"0 بایت";const q=1024,ne=["بایت","کیلوبایت","مگابایت","گیگابایت"],J=Math.floor(Math.log(A)/Math.log(q));return parseFloat((A/Math.pow(q,J)).toFixed(2))+" "+ne[J]},N=async()=>{try{C(!0),z("در حال خروجی‌گیری از لاگ‌های GPS...");const A=await it.exportGPSLogsAsJSON();it.downloadFile(A,`gps_logs_${new Date().toISOString()}.json`,"application/json"),z("خروجی‌گیری با موفقیت انجام شد"),C(!1)}catch(A){console.error("خطا در خروجی‌گیری لاگ‌های GPS:",A),z("خطا در خروجی‌گیری لاگ‌های GPS"),C(!1)}},W=async()=>{try{C(!0),z("در حال خروجی‌گیری از لاگ‌های GPS...");const A=await it.exportGPSLogsAsCSV();it.downloadFile(A,`gps_logs_${new Date().toISOString()}.csv`,"text/csv"),z("خروجی‌گیری با موفقیت انجام شد"),C(!1)}catch(A){console.error("خطا در خروجی‌گیری لاگ‌های GPS:",A),z("خطا در خروجی‌گیری لاگ‌های GPS"),C(!1)}},$=async()=>{try{C(!0),z("در حال خروجی‌گیری از مسیرها...");const A=await it.exportTrackLogsAsGeoJSON();it.downloadFile(A,`tracks_${new Date().toISOString()}.geojson`,"application/geo+json"),z("خروجی‌گیری با موفقیت انجام شد"),C(!1)}catch(A){console.error("خطا در خروجی‌گیری مسیرها:",A),z("خطا در خروجی‌گیری مسیرها"),C(!1)}},se=async()=>{try{if(window.confirm("آیا مطمئن هستید که می‌خواهید همه لاگ‌های GPS را پاک کنید؟ این عمل غیرقابل بازگشت است.")){y(!0),z("در حال پاک کردن لاگ‌های GPS..."),await it.clearGPSLogs();const A=await it.getLogCounts(),q=await it.estimateStorageSize();c(A),p(q),z("لاگ‌های GPS با موفقیت پاک شدند"),y(!1)}}catch(A){console.error("خطا در پاک کردن لاگ‌های GPS:",A),z("خطا در پاک کردن لاگ‌های GPS"),y(!1)}},H=async()=>{try{if(window.confirm("آیا مطمئن هستید که می‌خواهید همه لاگ‌های مسیر را پاک کنید؟ این عمل غیرقابل بازگشت است.")){y(!0),z("در حال پاک کردن لاگ‌های مسیر..."),await it.clearTrackLogs();const A=await it.getLogCounts(),q=await it.estimateStorageSize();c(A),p(q),z("لاگ‌های مسیر با موفقیت پاک شدند"),y(!1)}}catch(A){console.error("خطا در پاک کردن لاگ‌های مسیر:",A),z("خطا در پاک کردن لاگ‌های مسیر"),y(!1)}};return v.jsxs("div",{className:"settings-page",children:[v.jsxs("div",{className:"settings-header",children:[v.jsxs(In,{to:"/",className:"back-button",children:[v.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",stroke:"currentColor",strokeWidth:"2",fill:"none",children:v.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),v.jsx("span",{children:"بازگشت"})]}),v.jsx("h1",{children:"تنظیمات"})]}),v.jsxs("div",{className:"settings-content",children:[v.jsxs("section",{className:"setting-section logs-section",children:[v.jsx("h2",{children:"مدیریت لاگ‌ها"}),g?v.jsx("div",{className:"loading",children:"در حال بارگذاری آمار لاگ‌ها..."}):v.jsxs("div",{className:"logs-stats",children:[v.jsxs("div",{className:"stat-item",children:[v.jsx("span",{children:"تعداد لاگ‌های GPS:"}),v.jsx("span",{className:"stat-value",children:d.gpsLogs.toLocaleString("fa-IR")})]}),v.jsxs("div",{className:"stat-item",children:[v.jsx("span",{children:"تعداد مسیرهای ذخیره شده:"}),v.jsx("span",{className:"stat-value",children:d.trackLogs.toLocaleString("fa-IR")})]}),v.jsxs("div",{className:"stat-item",children:[v.jsx("span",{children:"حجم تقریبی لاگ‌های GPS:"}),v.jsx("span",{className:"stat-value",children:B(u.gpsLogsSize)})]}),v.jsxs("div",{className:"stat-item",children:[v.jsx("span",{children:"حجم تقریبی مسیرها:"}),v.jsx("span",{className:"stat-value",children:B(u.trackLogsSize)})]}),v.jsxs("div",{className:"stat-item total-size",children:[v.jsx("span",{children:"حجم کل:"}),v.jsx("span",{className:"stat-value",children:B(u.totalSize)})]})]}),v.jsxs("div",{className:"export-section",children:[v.jsx("h3",{children:"خروجی‌گیری از لاگ‌ها"}),v.jsxs("div",{className:"button-group",children:[v.jsxs("button",{className:"export-button",onClick:N,disabled:w||d.gpsLogs===0,children:[v.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:v.jsx("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"})}),"خروجی JSON لاگ‌های GPS"]}),v.jsxs("button",{className:"export-button",onClick:W,disabled:w||d.gpsLogs===0,children:[v.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:v.jsx("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"})}),"خروجی CSV لاگ‌های GPS"]}),v.jsxs("button",{className:"export-button",onClick:$,disabled:w||d.trackLogs===0,children:[v.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:v.jsx("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"})}),"خروجی GeoJSON مسیرها"]})]})]}),v.jsxs("div",{className:"clear-section",children:[v.jsx("h3",{children:"پاک کردن لاگ‌ها"}),v.jsxs("div",{className:"button-group",children:[v.jsxs("button",{className:"settings-clear-button danger",onClick:se,disabled:g||d.gpsLogs===0,children:[v.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("polyline",{points:"3 6 5 6 21 6"}),v.jsx("path",{d:"M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"})]}),"پاک کردن لاگ‌های GPS"]}),v.jsxs("button",{className:"settings-clear-button danger",onClick:H,disabled:g||d.trackLogs===0,children:[v.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("polyline",{points:"3 6 5 6 21 6"}),v.jsx("path",{d:"M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"})]}),"پاک کردن مسیرها"]})]})]}),k&&v.jsx("div",{className:`message ${k.includes("خطا")?"error":"success"}`,children:k})]}),v.jsxs("section",{className:"setting-section about-section",children:[v.jsx("h2",{children:"درباره برنامه"}),v.jsx("p",{children:"این برنامه برای ردیابی موقعیت GPS و تشخیص اختلال در سیگنال طراحی شده است. کلیه داده‌ها به صورت محلی در دستگاه شما ذخیره می‌شوند و هیچ اطلاعاتی به سرور ارسال نمی‌شود."}),v.jsx("p",{children:"نسخه: 1.0.0"})]})]})]})},Qp=()=>v.jsxs("div",{className:"not-found-page",children:[v.jsx("h1",{children:"404"}),v.jsx("h2",{children:"صفحه مورد نظر یافت نشد"}),v.jsx("p",{children:"متاسفانه صفحه‌ای که به دنبال آن هستید وجود ندارد."}),v.jsx(In,{to:"/",className:"btn btn-primary",children:"بازگشت به صفحه اصلی"})]}),Jp=()=>v.jsxs("header",{className:"app-header",children:[v.jsx("div",{className:"logo",children:v.jsx(In,{to:"/",children:"مسیر طلایی"})}),v.jsx("nav",{className:"main-nav",children:v.jsxs("ul",{children:[v.jsx("li",{children:v.jsx(In,{to:"/",children:"خانه"})}),v.jsx("li",{children:v.jsx(In,{to:"/map",children:"نقشه"})}),v.jsx("li",{children:v.jsx(In,{to:"/qr-scan",children:"اسکن QR"})}),v.jsx("li",{children:v.jsx(In,{to:"/settings",children:"تنظیمات"})})]})})]}),Yp=()=>v.jsx("footer",{className:"app-footer",children:v.jsxs("div",{className:"footer-content",children:[v.jsxs("p",{children:["© ",new Date().getFullYear()," مسیر طلایی - تمامی حقوق محفوظ است"]}),v.jsxs("div",{className:"footer-links",children:[v.jsx("a",{href:"#",target:"_blank",rel:"noopener noreferrer",children:"درباره ما"}),v.jsx("a",{href:"#",target:"_blank",rel:"noopener noreferrer",children:"تماس با ما"}),v.jsx("a",{href:"#",target:"_blank",rel:"noopener noreferrer",children:"حریم خصوصی"})]})]})});function Xp(){return v.jsx(ap,{children:v.jsxs("div",{className:"app",children:[v.jsx(Jp,{}),v.jsx("main",{className:"main-content",children:v.jsxs(ep,{children:[v.jsx(kr,{path:"/",element:v.jsx(hp,{})}),v.jsx(kr,{path:"/map",element:v.jsx($p,{})}),v.jsx(kr,{path:"/qr-scan",element:v.jsx(Kp,{})}),v.jsx(kr,{path:"/settings",element:v.jsx(qp,{})}),v.jsx(kr,{path:"/404",element:v.jsx(Qp,{})}),v.jsx(kr,{path:"*",element:v.jsx(Yd,{to:"/404",replace:!0})})]})}),v.jsx(Yp,{})]})})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(d=>{console.log("Service Worker registered with scope:",d.scope)}).catch(d=>{console.error("Service Worker registration failed:",d)})});ad.createRoot(document.getElementById("root")).render(v.jsx(Ps.StrictMode,{children:v.jsx(Xp,{})}));
```   
   
## \dist\assets\index-BYIk0cK5.css   
```javascript   
@import"https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;500;700&display=swap";.leaflet-pane,.leaflet-tile,.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-tile-container,.leaflet-pane>svg,.leaflet-pane>canvas,.leaflet-zoom-box,.leaflet-image-layer,.leaflet-layer{position:absolute;left:0;top:0}.leaflet-container{overflow:hidden}.leaflet-tile,.leaflet-marker-icon,.leaflet-marker-shadow{-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-user-drag:none}.leaflet-tile::selection{background:transparent}.leaflet-safari .leaflet-tile{image-rendering:-webkit-optimize-contrast}.leaflet-safari .leaflet-tile-container{width:1600px;height:1600px;-webkit-transform-origin:0 0}.leaflet-marker-icon,.leaflet-marker-shadow{display:block}.leaflet-container .leaflet-overlay-pane svg{max-width:none!important;max-height:none!important}.leaflet-container .leaflet-marker-pane img,.leaflet-container .leaflet-shadow-pane img,.leaflet-container .leaflet-tile-pane img,.leaflet-container img.leaflet-image-layer,.leaflet-container .leaflet-tile{max-width:none!important;max-height:none!important;width:auto;padding:0}.leaflet-container img.leaflet-tile{mix-blend-mode:plus-lighter}.leaflet-container.leaflet-touch-zoom{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y}.leaflet-container.leaflet-touch-drag{-ms-touch-action:pinch-zoom;touch-action:none;touch-action:pinch-zoom}.leaflet-container.leaflet-touch-drag.leaflet-touch-zoom{-ms-touch-action:none;touch-action:none}.leaflet-container{-webkit-tap-highlight-color:transparent}.leaflet-container a{-webkit-tap-highlight-color:rgba(51,181,229,.4)}.leaflet-tile{filter:inherit;visibility:hidden}.leaflet-tile-loaded{visibility:inherit}.leaflet-zoom-box{width:0;height:0;-moz-box-sizing:border-box;box-sizing:border-box;z-index:800}.leaflet-overlay-pane svg{-moz-user-select:none}.leaflet-pane{z-index:400}.leaflet-tile-pane{z-index:200}.leaflet-overlay-pane{z-index:400}.leaflet-shadow-pane{z-index:500}.leaflet-marker-pane{z-index:600}.leaflet-tooltip-pane{z-index:650}.leaflet-popup-pane{z-index:700}.leaflet-map-pane canvas{z-index:100}.leaflet-map-pane svg{z-index:200}.leaflet-vml-shape{width:1px;height:1px}.lvml{behavior:url(#default#VML);display:inline-block;position:absolute}.leaflet-control{position:relative;z-index:800;pointer-events:visiblePainted;pointer-events:auto}.leaflet-top,.leaflet-bottom{position:absolute;z-index:1000;pointer-events:none}.leaflet-top{top:0}.leaflet-right{right:0}.leaflet-bottom{bottom:0}.leaflet-left{left:0}.leaflet-control{float:left;clear:both}.leaflet-right .leaflet-control{float:right}.leaflet-top .leaflet-control{margin-top:10px}.leaflet-bottom .leaflet-control{margin-bottom:10px}.leaflet-left .leaflet-control{margin-left:10px}.leaflet-right .leaflet-control{margin-right:10px}.leaflet-fade-anim .leaflet-popup{opacity:0;-webkit-transition:opacity .2s linear;-moz-transition:opacity .2s linear;transition:opacity .2s linear}.leaflet-fade-anim .leaflet-map-pane .leaflet-popup{opacity:1}.leaflet-zoom-animated{-webkit-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0}svg.leaflet-zoom-animated{will-change:transform}.leaflet-zoom-anim .leaflet-zoom-animated{-webkit-transition:-webkit-transform .25s cubic-bezier(0,0,.25,1);-moz-transition:-moz-transform .25s cubic-bezier(0,0,.25,1);transition:transform .25s cubic-bezier(0,0,.25,1)}.leaflet-zoom-anim .leaflet-tile,.leaflet-pan-anim .leaflet-tile{-webkit-transition:none;-moz-transition:none;transition:none}.leaflet-zoom-anim .leaflet-zoom-hide{visibility:hidden}.leaflet-interactive{cursor:pointer}.leaflet-grab{cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.leaflet-crosshair,.leaflet-crosshair .leaflet-interactive{cursor:crosshair}.leaflet-popup-pane,.leaflet-control{cursor:auto}.leaflet-dragging .leaflet-grab,.leaflet-dragging .leaflet-grab .leaflet-interactive,.leaflet-dragging .leaflet-marker-draggable{cursor:move;cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-image-layer,.leaflet-pane>svg path,.leaflet-tile-container{pointer-events:none}.leaflet-marker-icon.leaflet-interactive,.leaflet-image-layer.leaflet-interactive,.leaflet-pane>svg path.leaflet-interactive,svg.leaflet-image-layer.leaflet-interactive path{pointer-events:visiblePainted;pointer-events:auto}.leaflet-container{background:#ddd;outline-offset:1px}.leaflet-container a{color:#0078a8}.leaflet-zoom-box{border:2px dotted #38f;background:#ffffff80}.leaflet-container{font-family:Helvetica Neue,Arial,Helvetica,sans-serif;font-size:12px;font-size:.75rem;line-height:1.5}.leaflet-bar{box-shadow:0 1px 5px #000000a6;border-radius:4px}.leaflet-bar a{background-color:#fff;border-bottom:1px solid #ccc;width:26px;height:26px;line-height:26px;display:block;text-align:center;text-decoration:none;color:#000}.leaflet-bar a,.leaflet-control-layers-toggle{background-position:50% 50%;background-repeat:no-repeat;display:block}.leaflet-bar a:hover,.leaflet-bar a:focus{background-color:#f4f4f4}.leaflet-bar a:first-child{border-top-left-radius:4px;border-top-right-radius:4px}.leaflet-bar a:last-child{border-bottom-left-radius:4px;border-bottom-right-radius:4px;border-bottom:none}.leaflet-bar a.leaflet-disabled{cursor:default;background-color:#f4f4f4;color:#bbb}.leaflet-touch .leaflet-bar a{width:30px;height:30px;line-height:30px}.leaflet-touch .leaflet-bar a:first-child{border-top-left-radius:2px;border-top-right-radius:2px}.leaflet-touch .leaflet-bar a:last-child{border-bottom-left-radius:2px;border-bottom-right-radius:2px}.leaflet-control-zoom-in,.leaflet-control-zoom-out{font:700 18px Lucida Console,Monaco,monospace;text-indent:1px}.leaflet-touch .leaflet-control-zoom-in,.leaflet-touch .leaflet-control-zoom-out{font-size:22px}.leaflet-control-layers{box-shadow:0 1px 5px #0006;background:#fff;border-radius:5px}.leaflet-control-layers-toggle{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAQAAAADQ4RFAAACf0lEQVR4AY1UM3gkARTePdvdoTxXKc+qTl3aU5U6b2Kbkz3Gtq3Zw6ziLGNPzrYx7946Tr6/ee/XeCQ4D3ykPtL5tHno4n0d/h3+xfuWHGLX81cn7r0iTNzjr7LrlxCqPtkbTQEHeqOrTy4Yyt3VCi/IOB0v7rVC7q45Q3Gr5K6jt+3Gl5nCoDD4MtO+j96Wu8atmhGqcNGHObuf8OM/x3AMx38+4Z2sPqzCxRFK2aF2e5Jol56XTLyggAMTL56XOMoS1W4pOyjUcGGQdZxU6qRh7B9Zp+PfpOFlqt0zyDZckPi1ttmIp03jX8gyJ8a/PG2yutpS/Vol7peZIbZcKBAEEheEIAgFbDkz5H6Zrkm2hVWGiXKiF4Ycw0RWKdtC16Q7qe3X4iOMxruonzegJzWaXFrU9utOSsLUmrc0YjeWYjCW4PDMADElpJSSQ0vQvA1Tm6/JlKnqFs1EGyZiFCqnRZTEJJJiKRYzVYzJck2Rm6P4iH+cmSY0YzimYa8l0EtTODFWhcMIMVqdsI2uiTvKmTisIDHJ3od5GILVhBCarCfVRmo4uTjkhrhzkiBV7SsaqS+TzrzM1qpGGUFt28pIySQHR6h7F6KSwGWm97ay+Z+ZqMcEjEWebE7wxCSQwpkhJqoZA5ivCdZDjJepuJ9IQjGGUmuXJdBFUygxVqVsxFsLMbDe8ZbDYVCGKxs+W080max1hFCarCfV+C1KATwcnvE9gRRuMP2prdbWGowm1KB1y+zwMMENkM755cJ2yPDtqhTI6ED1M/82yIDtC/4j4BijjeObflpO9I9MwXTCsSX8jWAFeHr05WoLTJ5G8IQVS/7vwR6ohirYM7f6HzYpogfS3R2OAAAAAElFTkSuQmCC);width:36px;height:36px}.leaflet-retina .leaflet-control-layers-toggle{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAQAAABvcdNgAAAEsklEQVR4AWL4TydIhpZK1kpWOlg0w3ZXP6D2soBtG42jeI6ZmQTHzAxiTbSJsYLjO9HhP+WOmcuhciVnmHVQcJnp7DFvScowZorad/+V/fVzMdMT2g9Cv9guXGv/7pYOrXh2U+RRR3dSd9JRx6bIFc/ekqHI29JC6pJ5ZEh1yWkhkbcFeSjxgx3L2m1cb1C7bceyxA+CNjT/Ifff+/kDk2u/w/33/IeCMOSaWZ4glosqT3DNnNZQ7Cs58/3Ce5HL78iZH/vKVIaYlqzfdLu8Vi7dnvUbEza5Idt36tquZFldl6N5Z/POLof0XLK61mZCmJSWjVF9tEjUluu74IUXvgttuVIHE7YxSkaYhJZam7yiM9Pv82JYfl9nptxZaxMJE4YSPty+vF0+Y2up9d3wwijfjZbabqm/3bZ9ecKHsiGmRflnn1MW4pjHf9oLufyn2z3y1D6n8g8TZhxyzipLNPnAUpsOiuWimg52psrTZYnOWYNDTMuWBWa0tJb4rgq1UvmutpaYEbZlwU3CLJm/ayYjHW5/h7xWLn9Hh1vepDkyf7dE7MtT5LR4e7yYpHrkhOUpEfssBLq2pPhAqoSWKUkk7EDqkmK6RrCEzqDjhNDWNE+XSMvkJRDWlZTmCW0l0PHQGRZY5t1L83kT0Y3l2SItk5JAWHl2dCOBm+fPu3fo5/3v61RMCO9Jx2EEYYhb0rmNQMX/vm7gqOEJLcXTGw3CAuRNeyaPWwjR8PRqKQ1PDA/dpv+on9Shox52WFnx0KY8onHayrJzm87i5h9xGw/tfkev0jGsQizqezUKjk12hBMKJ4kbCqGPVNXudyyrShovGw5CgxsRICxF6aRmSjlBnHRzg7Gx8fKqEubI2rahQYdR1YgDIRQO7JvQyD52hoIQx0mxa0ODtW2Iozn1le2iIRdzwWewedyZzewidueOGqlsn1MvcnQpuVwLGG3/IR1hIKxCjelIDZ8ldqWz25jWAsnldEnK0Zxro19TGVb2ffIZEsIO89EIEDvKMPrzmBOQcKQ+rroye6NgRRxqR4U8EAkz0CL6uSGOm6KQCdWjvjRiSP1BPalCRS5iQYiEIvxuBMJEWgzSoHADcVMuN7IuqqTeyUPq22qFimFtxDyBBJEwNyt6TM88blFHao/6tWWhuuOM4SAK4EI4QmFHA+SEyWlp4EQoJ13cYGzMu7yszEIBOm2rVmHUNqwAIQabISNMRstmdhNWcFLsSm+0tjJH1MdRxO5Nx0WDMhCtgD6OKgZeljJqJKc9po8juskR9XN0Y1lZ3mWjLR9JCO1jRDMd0fpYC2VnvjBSEFg7wBENc0R9HFlb0xvF1+TBEpF68d+DHR6IOWVv2BECtxo46hOFUBd/APU57WIoEwJhIi2CdpyZX0m93BZicktMj1AS9dClteUFAUNUIEygRZCtik5zSxI9MubTBH1GOiHsiLJ3OCoSZkILa9PxiN0EbvhsAo8tdAf9Seepd36lGWHmtNANTv5Jd0z4QYyeo/UEJqxKRpg5LZx6btLPsOaEmdMyxYdlc8LMaJnikDlhclqmPiQnTEpLUIZEwkRagjYkEibQErwhkTAKCLQEbUgkzJQWc/0PstHHcfEdQ+UAAAAASUVORK5CYII=);background-size:26px 26px}.leaflet-touch .leaflet-control-layers-toggle{width:44px;height:44px}.leaflet-control-layers .leaflet-control-layers-list,.leaflet-control-layers-expanded .leaflet-control-layers-toggle{display:none}.leaflet-control-layers-expanded .leaflet-control-layers-list{display:block;position:relative}.leaflet-control-layers-expanded{padding:6px 10px 6px 6px;color:#333;background:#fff}.leaflet-control-layers-scrollbar{overflow-y:scroll;overflow-x:hidden;padding-right:5px}.leaflet-control-layers-selector{margin-top:2px;position:relative;top:1px}.leaflet-control-layers label{display:block;font-size:13px;font-size:1.08333em}.leaflet-control-layers-separator{height:0;border-top:1px solid #ddd;margin:5px -10px 5px -6px}.leaflet-default-icon-path{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=)}.leaflet-container .leaflet-control-attribution{background:#fff;background:#fffc;margin:0}.leaflet-control-attribution,.leaflet-control-scale-line{padding:0 5px;color:#333;line-height:1.4}.leaflet-control-attribution a{text-decoration:none}.leaflet-control-attribution a:hover,.leaflet-control-attribution a:focus{text-decoration:underline}.leaflet-attribution-flag{display:inline!important;vertical-align:baseline!important;width:1em;height:.6669em}.leaflet-left .leaflet-control-scale{margin-left:5px}.leaflet-bottom .leaflet-control-scale{margin-bottom:5px}.leaflet-control-scale-line{border:2px solid #777;border-top:none;line-height:1.1;padding:2px 5px 1px;white-space:nowrap;-moz-box-sizing:border-box;box-sizing:border-box;background:#fffc;text-shadow:1px 1px #fff}.leaflet-control-scale-line:not(:first-child){border-top:2px solid #777;border-bottom:none;margin-top:-2px}.leaflet-control-scale-line:not(:first-child):not(:last-child){border-bottom:2px solid #777}.leaflet-touch .leaflet-control-attribution,.leaflet-touch .leaflet-control-layers,.leaflet-touch .leaflet-bar{box-shadow:none}.leaflet-touch .leaflet-control-layers,.leaflet-touch .leaflet-bar{border:2px solid rgba(0,0,0,.2);background-clip:padding-box}.leaflet-popup{position:absolute;text-align:center;margin-bottom:20px}.leaflet-popup-content-wrapper{padding:1px;text-align:left;border-radius:12px}.leaflet-popup-content{margin:13px 24px 13px 20px;line-height:1.3;font-size:13px;font-size:1.08333em;min-height:1px}.leaflet-popup-content p{margin:1.3em 0}.leaflet-popup-tip-container{width:40px;height:20px;position:absolute;left:50%;margin-top:-1px;margin-left:-20px;overflow:hidden;pointer-events:none}.leaflet-popup-tip{width:17px;height:17px;padding:1px;margin:-10px auto 0;pointer-events:auto;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}.leaflet-popup-content-wrapper,.leaflet-popup-tip{background:#fff;color:#333;box-shadow:0 3px 14px #0006}.leaflet-container a.leaflet-popup-close-button{position:absolute;top:0;right:0;border:none;text-align:center;width:24px;height:24px;font:16px/24px Tahoma,Verdana,sans-serif;color:#757575;text-decoration:none;background:transparent}.leaflet-container a.leaflet-popup-close-button:hover,.leaflet-container a.leaflet-popup-close-button:focus{color:#585858}.leaflet-popup-scrolled{overflow:auto}.leaflet-oldie .leaflet-popup-content-wrapper{-ms-zoom:1}.leaflet-oldie .leaflet-popup-tip{width:24px;margin:0 auto;-ms-filter:"progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)";filter:progid:DXImageTransform.Microsoft.Matrix(M11=.70710678,M12=.70710678,M21=-.70710678,M22=.70710678)}.leaflet-oldie .leaflet-control-zoom,.leaflet-oldie .leaflet-control-layers,.leaflet-oldie .leaflet-popup-content-wrapper,.leaflet-oldie .leaflet-popup-tip{border:1px solid #999}.leaflet-div-icon{background:#fff;border:1px solid #666}.leaflet-tooltip{position:absolute;padding:6px;background-color:#fff;border:1px solid #fff;border-radius:3px;color:#222;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;box-shadow:0 1px 3px #0006}.leaflet-tooltip.leaflet-interactive{cursor:pointer;pointer-events:auto}.leaflet-tooltip-top:before,.leaflet-tooltip-bottom:before,.leaflet-tooltip-left:before,.leaflet-tooltip-right:before{position:absolute;pointer-events:none;border:6px solid transparent;background:transparent;content:""}.leaflet-tooltip-bottom{margin-top:6px}.leaflet-tooltip-top{margin-top:-6px}.leaflet-tooltip-bottom:before,.leaflet-tooltip-top:before{left:50%;margin-left:-6px}.leaflet-tooltip-top:before{bottom:0;margin-bottom:-12px;border-top-color:#fff}.leaflet-tooltip-bottom:before{top:0;margin-top:-12px;margin-left:-6px;border-bottom-color:#fff}.leaflet-tooltip-left{margin-left:-6px}.leaflet-tooltip-right{margin-left:6px}.leaflet-tooltip-left:before,.leaflet-tooltip-right:before{top:50%;margin-top:-6px}.leaflet-tooltip-left:before{right:0;margin-right:-12px;border-left-color:#fff}.leaflet-tooltip-right:before{left:0;margin-left:-12px;border-right-color:#fff}@media print{.leaflet-control{-webkit-print-color-adjust:exact;print-color-adjust:exact}}.map-fullscreen{position:fixed;top:0;left:0;right:0;bottom:0;width:100%;height:100vh;z-index:1}.map-container{width:100%;height:100%}.button-with-icon{display:inline-flex;align-items:center;justify-content:center;gap:4px}.button-with-icon svg{vertical-align:middle;flex-shrink:0}.map-toolbar{display:flex;align-items:center;padding:8px 10px;background:#fff;box-shadow:0 1px 4px #0000001a;position:absolute;top:0;left:0;right:0;z-index:1000}.signal-quality-pill{display:flex;align-items:center;gap:5px;font-size:.8rem;padding:4px 8px;border-radius:12px;margin:0 auto}.signal-quality-pill.good{background-color:#4caf5026;color:#1b5e20}.signal-quality-pill.medium{background-color:#ff980026;color:#e65100}.signal-quality-pill.poor{background-color:#f4433626;color:#b71c1c}.back-button{display:flex;align-items:center;gap:5px;text-decoration:none;color:#333;font-size:.9rem}.start-tracking-button{display:flex;align-items:center;gap:5px;background:#2196f3;color:#fff;border:none;padding:6px 10px;border-radius:4px;font-size:.9rem;cursor:pointer}.back-button{background-color:#fff;color:#333;border:none;border-radius:4px;padding:4px 8px;font-weight:700;box-shadow:0 2px 5px #0003;cursor:pointer;display:inline-flex;align-items:center;justify-content:center;gap:4px;text-decoration:none;min-width:90px;height:28px}.back-button svg{vertical-align:middle;margin-top:-1px}.back-button:hover{background-color:#f0f0f0}.tracking-button{background-color:#fff;color:#333;border:none;border-radius:4px;padding:4px 8px;font-weight:700;box-shadow:0 2px 5px #0003;cursor:pointer;display:inline-flex;align-items:center;justify-content:center;gap:4px;min-width:90px;height:28px}.tracking-button svg{vertical-align:middle;margin-top:-1px}.tracking-button.active{background-color:#0085ff;color:#fff}.action-button{background-color:#fff;color:#333;border:none;border-radius:4px;padding:4px 6px;font-weight:700;box-shadow:0 2px 5px #0003;cursor:pointer;display:inline-flex;align-items:center;justify-content:center;gap:2px}.action-button svg{vertical-align:middle;margin-top:-1px}.map-bottom-toolbar{position:absolute;bottom:25px;left:50%;transform:translate(-50%);z-index:1001;display:flex;justify-content:center;gap:10px;padding:8px;background-color:#fffc;border-radius:8px;box-shadow:0 2px 5px #0003}.error-indicator{background-color:#ff0000b3;color:#fff;padding:5px 10px;border-radius:4px;font-size:14px}.loading-indicator{background-color:#fffc;color:#333;padding:5px 10px;border-radius:4px;font-size:14px}.action-button{background-color:#fff;color:#333;border:none;border-radius:4px;padding:4px 6px;font-weight:700;box-shadow:0 2px 5px #0003;cursor:pointer;display:flex;align-items:center;gap:2px}.action-button:disabled{opacity:.5;cursor:not-allowed}.save-button:not(:disabled):hover{background-color:#4caf50;color:#fff}.share-button:not(:disabled):hover{background-color:#2196f3;color:#fff}.map-clear-button:not(:disabled):hover{background-color:#f44336;color:#fff}.map-clear-button{background-color:#f0f0f0;color:#555}.map-clear-button:hover{background-color:#e0e0e0}.map-clear-button:disabled{opacity:.5;cursor:not-allowed}.map-controls-overlay{position:absolute;right:10px;bottom:100px;display:flex;flex-direction:column;gap:10px;z-index:1000}.map-control-button{background-color:#fff;color:#333;border:none;border-radius:4px;width:40px;height:40px;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 5px #0003;cursor:pointer}.map-control-button.active{background-color:#0085ff;color:#fff}.location-panel{position:absolute;bottom:80px;left:10px;background-color:#ffffffe6;padding:8px;border-radius:4px;box-shadow:0 2px 5px #0003;z-index:999;font-size:12px;max-width:180px}.coordinates-display{display:flex;flex-direction:column;gap:3px}.coordinates-display span{font-weight:700}.leaflet-control-zoom{margin-top:60px!important}@media (max-width: 768px){.map-toolbar{top:10px;padding:6px}.map-bottom-toolbar{bottom:20px;width:95%;max-width:400px;padding:6px;flex-wrap:wrap;justify-content:center}.action-button{font-size:10px;padding:6px 8px}.map-controls-overlay{bottom:90px}.location-panel{bottom:90px;max-width:150px;font-size:10px}.leaflet-control-zoom{margin-top:70px!important}}.gps-quality-panel{position:absolute;bottom:80px;right:10px;background-color:#ffffffe6;padding:8px;border-radius:4px;box-shadow:0 2px 5px #0003;z-index:999;font-size:12px;width:150px}.quality-text{font-size:10px;text-align:center}.quality-warning{color:#f44336;display:flex;align-items:center;justify-content:center;gap:4px;margin-top:4px}.gps-quality-panel{position:absolute;bottom:80px;right:10px;background-color:#ffffffe6;padding:8px;border-radius:4px;box-shadow:0 2px 5px #0003;z-index:999;font-size:12px;width:150px;direction:rtl}.quality-header{font-weight:700;margin-bottom:4px;text-align:center}.quality-meter{height:6px;background-color:#f0f0f0;border-radius:3px;overflow:hidden;margin-bottom:4px}.quality-bar{height:100%;transition:width .5s ease}.quality-bar.good{background-color:#4caf50}.quality-bar.medium{background-color:#ffc107}.quality-bar.poor{background-color:#f44336}.quality-text{font-size:11px;text-align:center}.quality-good{color:#4caf50}.quality-medium{color:#ffc107}.quality-poor{color:#f44336}.quality-warning{color:#f44336;display:flex;align-items:center;justify-content:center;gap:4px;margin-top:4px;font-size:10px}.error-indicator{display:flex;align-items:center;background-color:#f443361a;color:#f44336;padding:4px 8px;border-radius:4px;margin-right:8px;font-size:12px}.error-indicator svg{margin-left:4px}@media (max-width: 768px){.gps-quality-panel{bottom:90px;width:120px;font-size:10px}}.alerts-container{position:fixed;bottom:80px;left:50%;transform:translate(-50%);width:90%;max-width:400px;z-index:1000;display:flex;flex-direction:column;gap:8px;pointer-events:none}.alert-toast{display:flex;align-items:center;padding:12px 16px;border-radius:10px;background-color:#fffffff2;box-shadow:0 4px 12px #00000026;animation:slideIn .3s ease forwards,fadeOut .3s ease 5s forwards;pointer-events:auto;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(0,0,0,.05);font-size:.9rem;max-width:100%}.error-alert{border-right:4px solid #e53935}.warning-alert{border-right:4px solid #ffb300}.info-alert{border-right:4px solid #039be5}.success-alert{border-right:4px solid #43a047}.alert-icon{margin-left:12px;line-height:0;flex-shrink:0}.error-alert .alert-icon{color:#e53935}.warning-alert .alert-icon{color:#ffb300}.info-alert .alert-icon{color:#039be5}.success-alert .alert-icon{color:#43a047}.alert-icon.spinning svg{animation:spin 1.5s linear infinite}.alert-content{flex:1;min-width:0}.alert-title{font-weight:600;margin-bottom:2px;color:#333}.alert-message{color:#555;overflow:hidden;text-overflow:ellipsis}.alert-details{display:flex;flex-wrap:wrap;gap:8px;margin-top:4px;font-size:.8rem}.alert-details span{background-color:#0000000d;padding:2px 6px;border-radius:4px;color:#666}.alert-close{background:none;border:none;padding:4px;color:#aaa;border-radius:50%;cursor:pointer;margin-right:8px;line-height:0;transition:all .2s;flex-shrink:0}.alert-close:hover{background-color:#0000000d;color:#555}@keyframes slideIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes fadeOut{0%{opacity:1}to{opacity:0;transform:translateY(-20px)}}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media screen and (max-height: 500px){.alerts-container{bottom:auto;top:70px}}.dead-reckoning-panel{position:absolute;top:80px;right:10px;background-color:#fff;border-radius:8px;box-shadow:0 2px 8px #00000026;width:220px;padding:12px;z-index:1000;direction:rtl}.dr-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;padding-bottom:10px;border-bottom:1px solid #eee}.dr-header h3{margin:0;font-size:12px;font-weight:700}.calibrating-status{background-color:#ffb300;color:#fff;padding:8px;border-radius:4px;font-size:14px;text-align:center;margin-bottom:10px}.dr-button-group{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:12px}.dr-button{padding:8px 0;border:none;border-radius:4px;font-size:14px;cursor:pointer;text-align:center}.dr-button-start{background-color:#2196f3;color:#fff;grid-column:span 2}.dr-button-start.active{background-color:#f44336}.dr-button-reset{background-color:#9e9e9e;color:#fff}.dr-button-export{background-color:#4caf50;color:#fff}.dr-button:disabled{opacity:.6;cursor:not-allowed}.dr-step-count{margin:8px 0;font-size:14px}.dr-stride-control{margin-top:12px}.dr-stride-label{display:block;margin-bottom:6px;font-size:14px}.dr-stride-slider{width:100%;margin-bottom:4px}.dr-stride-value{text-align:center;font-size:14px}.settings-page{display:flex;flex-direction:column;max-width:100%;height:100vh;padding:0;margin:0;font-family:Vazirmatn,sans-serif;background-color:#f5f5f5;direction:rtl}.settings-header{display:flex;align-items:center;padding:1rem;background-color:#fff;box-shadow:0 2px 4px #0000001a;position:sticky;top:0;z-index:100}.settings-header h1{margin:0 1rem;font-size:1.25rem;font-weight:600}.back-button{display:flex;align-items:center;text-decoration:none;color:#333;font-size:.9rem}.back-button svg{margin-left:.25rem}.settings-content{padding:1rem;flex:1;overflow-y:auto}.setting-section{background-color:#fff;border-radius:8px;box-shadow:0 1px 3px #0000001a;padding:1rem;margin-bottom:1rem}.setting-section h2{margin-top:0;margin-bottom:1rem;font-size:1.1rem;color:#333;border-bottom:1px solid #eee;padding-bottom:.5rem}.setting-section h3{font-size:1rem;margin:1rem 0 .5rem;color:#444}.logs-stats{display:flex;flex-direction:column;gap:.75rem;margin-bottom:1.5rem}.stat-item{display:flex;justify-content:space-between;padding:.25rem 0}.stat-value{font-weight:600;color:#333}.total-size{margin-top:.5rem;padding-top:.5rem;border-top:1px dashed #eee}.button-group{display:flex;flex-direction:column;gap:.75rem;margin:.75rem 0}.export-button,.settings-clear-button{display:flex;align-items:center;justify-content:center;gap:.5rem;padding:.75rem;border-radius:4px;font-family:Vazirmatn,sans-serif;font-size:.9rem;cursor:pointer;transition:all .2s ease;border:none;background-color:#f5f5f5}.export-button svg,.settings-clear-button svg{width:16px;height:16px}.export-button:hover{background-color:#e0e0e0}.export-button:disabled,.settings-clear-button:disabled{opacity:.5;cursor:not-allowed}.danger{background-color:#fff0f0;color:#e53935}.danger:hover{background-color:#ffcdd2}.message{margin-top:1rem;padding:.75rem;border-radius:4px;font-size:.9rem;text-align:center}.message.success{background-color:#e8f5e9;color:#2e7d32}.message.error{background-color:#ffebee;color:#c62828}.loading{text-align:center;padding:1rem;color:#757575;font-size:.9rem}.about-section p{font-size:.9rem;line-height:1.5;color:#555}@media (min-width: 768px){.button-group{flex-direction:row;flex-wrap:wrap}.export-button,.settings-clear-button{flex:1;min-width:200px}}:root{--primary-color: #3498db;--secondary-color: #2ecc71;--danger-color: #e74c3c;--info-color: #9b59b6;--bg-color: #f5f5f5;--text-color: #333;--header-bg: #fff;--card-bg: #fff;--border-radius: 8px;--shadow: 0 2px 8px rgba(0, 0, 0, .15)}*{box-sizing:border-box;margin:0;padding:0}body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background-color:var(--bg-color);color:var(--text-color);direction:rtl;line-height:1.6}.app{display:flex;flex-direction:column;min-height:100vh}.main-content{flex:1;padding:20px;max-width:1200px;margin:0 auto;width:100%}.app-header{background-color:var(--header-bg);padding:15px 20px;box-shadow:0 2px 4px #0000001a;display:flex;justify-content:space-between;align-items:center}.logo a{font-size:1.5rem;font-weight:700;color:var(--primary-color);text-decoration:none}.main-nav ul{display:flex;list-style:none}.main-nav li{margin-left:20px}.main-nav a{text-decoration:none;color:var(--text-color);font-weight:500;transition:color .2s}.main-nav a:hover{color:var(--primary-color)}.app-footer{background-color:var(--header-bg);padding:15px 20px;text-align:center;box-shadow:0 -2px 4px #0000000d;margin-top:30px}.footer-content{max-width:1200px;margin:0 auto;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap}.footer-links{display:flex;gap:20px}.footer-links a{color:var(--text-color);text-decoration:none}.footer-links a:hover{color:var(--primary-color)}.btn{display:inline-block;padding:10px 15px;border:none;border-radius:var(--border-radius);background-color:var(--primary-color);color:#fff;font-size:16px;cursor:pointer;transition:background-color .2s,transform .1s;text-align:center;margin:5px}.btn:hover{opacity:.9}.btn:active{transform:scale(.98)}.btn-primary{background-color:var(--primary-color)}.btn-secondary{background-color:var(--secondary-color)}.btn-danger{background-color:var(--danger-color)}.btn-info{background-color:var(--info-color)}.home-page{max-width:1000px;margin:0 auto}.hero{text-align:center;padding:40px 20px;margin-bottom:30px}.hero h1{font-size:2.5rem;margin-bottom:15px;color:var(--primary-color)}.hero p{font-size:1.2rem;margin-bottom:30px;color:#666}.hero-buttons{display:flex;justify-content:center;gap:15px}.features{padding:30px 0}.features h2{text-align:center;margin-bottom:30px;font-size:2rem}.feature-cards{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:20px}.feature-card{background-color:var(--card-bg);border-radius:var(--border-radius);padding:25px;box-shadow:var(--shadow);text-align:center}.feature-icon{font-size:2.5rem;margin-bottom:15px}.feature-card h3{margin-bottom:10px;font-size:1.2rem}.how-to-use{padding:40px 0}.how-to-use h2{text-align:center;margin-bottom:30px;font-size:2rem}.steps{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:20px}.step{background-color:var(--card-bg);border-radius:var(--border-radius);padding:25px;box-shadow:var(--shadow);position:relative}.step-number{background-color:var(--primary-color);color:#fff;width:30px;height:30px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin-bottom:15px}.settings-page{max-width:800px;margin:0 auto;padding:20px}.settings-page h2{text-align:center;margin-bottom:30px}.settings-form{background-color:var(--card-bg);border-radius:var(--border-radius);padding:25px;box-shadow:var(--shadow)}.form-section{margin-bottom:30px;padding-bottom:20px;border-bottom:1px solid #eee}.form-section:last-child{border-bottom:none}.form-section h3{margin-bottom:15px;font-size:1.3rem;color:var(--primary-color)}.form-group{margin-bottom:15px}.form-group label{display:block;margin-bottom:5px;font-weight:500}.form-group input[type=text],.form-group input[type=number],.form-group select{width:100%;padding:10px;border:1px solid #ddd;border-radius:var(--border-radius);font-size:16px}.form-group input[type=checkbox]{margin-right:8px}.form-group small{display:block;color:#888;margin-top:5px}.form-actions{display:flex;justify-content:space-between;padding-top:20px}.map-page{height:calc(100vh - 130px);display:flex;flex-direction:column}.map-controls{display:flex;justify-content:space-between;margin-bottom:15px}.action-buttons{display:flex;justify-content:center;gap:15px;margin-top:20px}.error-message{background-color:#ffebee;color:var(--danger-color);padding:10px 15px;border-radius:var(--border-radius);margin-bottom:15px;border-left:4px solid var(--danger-color)}.loading{text-align:center;padding:10px;color:#777}.qr-scan-page{max-width:800px;margin:0 auto;padding:20px}.qr-scan-page h2{text-align:center;margin-bottom:30px}.scanner-container,.scan-result-container,.start-scan-container,.error-container{background-color:var(--card-bg);border-radius:var(--border-radius);padding:25px;box-shadow:var(--shadow);margin-bottom:20px;text-align:center}.scan-instruction{margin-bottom:20px;font-weight:500}.scanner-placeholder{height:300px;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#f8f8f8;border-radius:var(--border-radius);gap:15px}.result-data{margin:20px 0;text-align:left}.qr-data{background-color:#f5f5f5;padding:15px;border-radius:var(--border-radius);margin:15px 0;word-break:break-all;font-family:monospace}.location-data{margin:15px 0}.scan-time{color:#777;font-size:.9rem}.not-found-page{text-align:center;padding:50px 20px;max-width:600px;margin:0 auto}.not-found-page h1{font-size:6rem;color:var(--primary-color);margin-bottom:0}.not-found-page h2{margin-bottom:20px}.not-found-page p{margin-bottom:30px;color:#777}.map-page{max-width:1200px;margin:0 auto;padding:15px}.map-header{display:flex;flex-direction:column;gap:10px;margin-bottom:15px}.map-header h2{margin:0;color:var(--primary-color)}.map-controls{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:10px}.mode-selector{display:flex;gap:10px}.location-info{background-color:var(--card-bg);padding:15px;border-radius:var(--border-radius);margin-bottom:15px;box-shadow:var(--shadow)}.coordinates{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:10px}.coordinates>div{padding:8px;background-color:#f8f8f8;border-radius:4px}.map-wrapper{margin-bottom:15px;border-radius:var(--border-radius);overflow:hidden;box-shadow:var(--shadow)}.action-buttons{display:flex;flex-wrap:wrap;justify-content:center;gap:10px;margin:15px 0}.info-panel{background-color:var(--card-bg);padding:15px;border-radius:var(--border-radius);margin-top:15px;box-shadow:var(--shadow)}.info-panel h3{margin-top:0;margin-bottom:15px;color:var(--primary-color);font-size:1.2rem}.stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px}.stat-item{display:flex;flex-direction:column;padding:10px;background-color:#f8f8f8;border-radius:4px}.stat-label{font-size:.9rem;color:#666;margin-bottom:5px}.stat-value{font-weight:700;font-size:1.1rem}.login-container{max-width:450px;margin:0 auto;padding:30px 20px;text-align:center;direction:rtl}.login-logo{margin-bottom:30px}.logo-image{height:80px;width:auto}.login-title{font-size:1.8rem;color:var(--primary-color);margin-bottom:15px}.login-subtitle{color:#666;margin-bottom:30px;line-height:1.6}.login-form{margin:30px 0}.form-group{margin-bottom:25px;text-align:right}.form-group label{display:block;margin-bottom:8px;font-weight:500}.phone-input{width:100%;padding:12px 15px;border:1px solid #ddd;border-radius:var(--border-radius);font-size:16px;text-align:right;transition:var(--transition)}.phone-input:focus{border-color:var(--primary-color);outline:none;box-shadow:0 0 0 3px #3498db33}.submit-btn{background-color:var(--primary-color);color:#fff;border:none;padding:12px 30px;border-radius:var(--border-radius);font-size:16px;cursor:pointer;width:100%;transition:var(--transition)}.submit-btn:hover{background-color:#2980b9}.submit-btn:disabled{background-color:#95a5a6;cursor:not-allowed}.login-terms{margin-top:30px;color:#777;font-size:.9rem}.login-terms a{color:var(--primary-color);text-decoration:none}.login-terms a:hover{text-decoration:underline}@media (max-width: 480px){.login-container{padding:20px 15px}.login-title{font-size:1.5rem}}:root{font-family:Vazirmatn,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif}body{margin:0;padding:0;box-sizing:border-box;direction:rtl}::-webkit-scrollbar{width:8px}::-webkit-scrollbar-track{background:#f1f1f1}::-webkit-scrollbar-thumb{background:#888;border-radius:4px}::-webkit-scrollbar-thumb:hover{background:#555}
```   
   
## \src\App.jsx   
```javascript   
import React from 'react';  
import { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';  
import { HomePage } from './pages/HomePage';  
import MapPage from './pages/MapPage';
import { QRScanPage } from './pages/QRScanPage';  
import { SettingsPage } from './pages/SettingsPage';  
import { NotFoundPage } from './pages/NotFoundPage';  
import { Header } from './components/layout/Header';  
import { Footer } from './components/layout/Footer'; 
//import { HashRouter as Router } from 'react-router-dom';  
import './App.css';  

function App() {  
  return (  
    <Router>  
      <div className="app">  
        <Header />  
        <main className="main-content">  
          <Routes>  
            <Route path="/" element={<HomePage />} />  
            <Route path="/map" element={<MapPage />} />  
            <Route path="/qr-scan" element={<QRScanPage />} />  
            <Route path="/settings" element={<SettingsPage />} />  
            <Route path="/404" element={<NotFoundPage />} />  
            <Route path="*" element={<Navigate to="/404" replace />} />  
          </Routes>  
        </main>  
        <Footer />  
      </div>  
    </Router>  
  );  
}  

export default App;  ```   
   
## \src\main.jsx   
```javascript   
import React from 'react';  
import ReactDOM from 'react-dom/client';  
import App from './App.jsx';  
import './index.css';  

// Register service worker for PWA  
if ('serviceWorker' in navigator) {  
  window.addEventListener('load', () => {  
    navigator.serviceWorker.register('/sw.js').then(registration => {  
      console.log('Service Worker registered with scope:', registration.scope);  
    }).catch(error => {  
      console.error('Service Worker registration failed:', error);  
    });  
  });  
}  

ReactDOM.createRoot(document.getElementById('root')).render(  
  <React.StrictMode>  
    <App />  
  </React.StrictMode>,  
);  ```   
   
## \src\App.css   
```javascript   
/* استایل‌های اصلی */  
:root {  
  --primary-color: #3498db;  
  --secondary-color: #2ecc71;  
  --danger-color: #e74c3c;  
  --info-color: #9b59b6;  
  --bg-color: #f5f5f5;  
  --text-color: #333;  
  --header-bg: #fff;  
  --card-bg: #fff;  
  --border-radius: 8px;  
  --shadow: 0 2px 8px rgba(0, 0, 0, 0.15);  
}  

* {  
  box-sizing: border-box;  
  margin: 0;  
  padding: 0;  
}  

body {  
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;  
  background-color: var(--bg-color);  
  color: var(--text-color);  
  direction: rtl;  
  line-height: 1.6;  
}  

.app {  
  display: flex;  
  flex-direction: column;  
  min-height: 100vh;  
}  

.main-content {  
  flex: 1;  
  padding: 20px;  
  max-width: 1200px;  
  margin: 0 auto;  
  width: 100%;  
}  

/* هدر */  
.app-header {  
  background-color: var(--header-bg);  
  padding: 15px 20px;  
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);  
  display: flex;  
  justify-content: space-between;  
  align-items: center;  
}  

.logo a {  
  font-size: 1.5rem;  
  font-weight: bold;  
  color: var(--primary-color);  
  text-decoration: none;  
}  

.main-nav ul {  
  display: flex;  
  list-style: none;  
}  

.main-nav li {  
  margin-left: 20px;  
}  

.main-nav a {  
  text-decoration: none;  
  color: var(--text-color);  
  font-weight: 500;  
  transition: color 0.2s;  
}  

.main-nav a:hover {  
  color: var(--primary-color);  
}  

/* فوتر */  
.app-footer {  
  background-color: var(--header-bg);  
  padding: 15px 20px;  
  text-align: center;  
  box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.05);  
  margin-top: 30px;  
}  

.footer-content {  
  max-width: 1200px;  
  margin: 0 auto;  
  display: flex;  
  justify-content: space-between;  
  align-items: center;  
  flex-wrap: wrap;  
}  

.footer-links {  
  display: flex;  
  gap: 20px;  
}  

.footer-links a {  
  color: var(--text-color);  
  text-decoration: none;  
}  

.footer-links a:hover {  
  color: var(--primary-color);  
}  

/* دکمه‌ها */  
.btn {  
  display: inline-block;  
  padding: 10px 15px;  
  border: none;  
  border-radius: var(--border-radius);  
  background-color: var(--primary-color);  
  color: white;  
  font-size: 16px;  
  cursor: pointer;  
  transition: background-color 0.2s, transform 0.1s;  
  text-align: center;  
  margin: 5px;  
}  

.btn:hover {  
  opacity: 0.9;  
}  

.btn:active {  
  transform: scale(0.98);  
}  

.btn-primary {  
  background-color: var(--primary-color);  
}  

.btn-secondary {  
  background-color: var(--secondary-color);  
}  

.btn-danger {  
  background-color: var(--danger-color);  
}  

.btn-info {  
  background-color: var(--info-color);  
}  

/* صفحه خانه */  
.home-page {  
  max-width: 1000px;  
  margin: 0 auto;  
}  

.hero {  
  text-align: center;  
  padding: 40px 20px;  
  margin-bottom: 30px;  
}  

.hero h1 {  
  font-size: 2.5rem;  
  margin-bottom: 15px;  
  color: var(--primary-color);  
}  

.hero p {  
  font-size: 1.2rem;  
  margin-bottom: 30px;  
  color: #666;  
}  

.hero-buttons {  
  display: flex;  
  justify-content: center;  
  gap: 15px;  
}  

.features {  
  padding: 30px 0;  
}  

.features h2 {  
  text-align: center;  
  margin-bottom: 30px;  
  font-size: 2rem;  
}  

.feature-cards {  
  display: grid;  
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));  
  gap: 20px;  
}  

.feature-card {  
  background-color: var(--card-bg);  
  border-radius: var(--border-radius);  
  padding: 25px;  
  box-shadow: var(--shadow);  
  text-align: center;  
}  

.feature-icon {  
  font-size: 2.5rem;  
  margin-bottom: 15px;  
}  

.feature-card h3 {  
  margin-bottom: 10px;  
  font-size: 1.2rem;  
}  

.how-to-use {  
  padding: 40px 0;  
}  

.how-to-use h2 {  
  text-align: center;  
  margin-bottom: 30px;  
  font-size: 2rem;  
}  

.steps {  
  display: grid;  
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));  
  gap: 20px;  
}  

.step {  
  background-color: var(--card-bg);  
  border-radius: var(--border-radius);  
  padding: 25px;  
  box-shadow: var(--shadow);  
  position: relative;  
}  

.step-number {  
  background-color: var(--primary-color);  
  color: white;  
  width: 30px;  
  height: 30px;  
  border-radius: 50%;  
  display: flex;  
  align-items: center;  
  justify-content: center;  
  margin-bottom: 15px;  
}  

/* صفحه تنظیمات */  
.settings-page {  
  max-width: 800px;  
  margin: 0 auto;  
  padding: 20px;  
}  

.settings-page h2 {  
  text-align: center;  
  margin-bottom: 30px;  
}  

.settings-form {  
  background-color: var(--card-bg);  
  border-radius: var(--border-radius);  
  padding: 25px;  
  box-shadow: var(--shadow);  
}  

.form-section {  
  margin-bottom: 30px;  
  padding-bottom: 20px;  
  border-bottom: 1px solid #eee;  
}  

.form-section:last-child {  
  border-bottom: none;  
}  

.form-section h3 {  
  margin-bottom: 15px;  
  font-size: 1.3rem;  
  color: var(--primary-color);  
}  

.form-group {  
  margin-bottom: 15px;  
}  

.form-group label {  
  display: block;  
  margin-bottom: 5px;  
  font-weight: 500;  
}  

.form-group input[type="text"],  
.form-group input[type="number"],  
.form-group select {  
  width: 100%;  
  padding: 10px;  
  border: 1px solid #ddd;  
  border-radius: var(--border-radius);  
  font-size: 16px;  
}  

.form-group input[type="checkbox"] {  
  margin-right: 8px;  
}  

.form-group small {  
  display: block;  
  color: #888;  
  margin-top: 5px;  
}  

.form-actions {  
  display: flex;  
  justify-content: space-between;  
  padding-top: 20px;  
}  

/* صفحه نقشه */  
.map-page {  
  height: calc(100vh - 130px);  
  display: flex;  
  flex-direction: column;  
}  

.map-controls {  
  display: flex;  
  justify-content: space-between;  
  margin-bottom: 15px;  
}  

.mode-selector {  
  display: flex;  
  gap: 10px;  
}  

.location-info {  
  background-color: var(--card-bg);  
  padding: 15px;  
  border-radius: var(--border-radius);  
  margin-bottom: 15px;  
  box-shadow: var(--shadow);  
}  

.coordinates {  
  display: grid;  
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));  
  gap: 10px;  
}  

.action-buttons {  
  display: flex;  
  justify-content: center;  
  gap: 15px;  
  margin-top: 20px;  
}  

.error-message {  
  background-color: #ffebee;  
  color: var(--danger-color);  
  padding: 10px 15px;  
  border-radius: var(--border-radius);  
  margin-bottom: 15px;  
  border-left: 4px solid var(--danger-color);  
}  

.loading {  
  text-align: center;  
  padding: 10px;  
  color: #777;  
}  

/* صفحه اسکن QR */  
.qr-scan-page {  
  max-width: 800px;  
  margin: 0 auto;  
  padding: 20px;  
}  

.qr-scan-page h2 {  
  text-align: center;  
  margin-bottom: 30px;  
}  

.scanner-container,   
.scan-result-container,  
.start-scan-container,  
.error-container {  
  background-color: var(--card-bg);  
  border-radius: var(--border-radius);  
  padding: 25px;  
  box-shadow: var(--shadow);  
  margin-bottom: 20px;  
  text-align: center;  
}  

.scan-instruction {  
  margin-bottom: 20px;  
  font-weight: 500;  
}  

.scanner-placeholder {  
  height: 300px;  
  display: flex;  
  flex-direction: column;  
  justify-content: center;  
  align-items: center;  
  background-color: #f8f8f8;  
  border-radius: var(--border-radius);  
  gap: 15px;  
}  

.result-data {  
  margin: 20px 0;  
  text-align: left;  
}  

.qr-data {  
  background-color: #f5f5f5;  
  padding: 15px;  
  border-radius: var(--border-radius);  
  margin: 15px 0;  
  word-break: break-all;  
  font-family: monospace;  
}  

.location-data {  
  margin: 15px 0;  
}  

.scan-time {  
  color: #777;  
  font-size: 0.9rem;  
}  

/* صفحه 404 */  
.not-found-page {  
  text-align: center;  
  padding: 50px 20px;  
  max-width: 600px;  
  margin: 0 auto;  
}  

.not-found-page h1 {  
  font-size: 6rem;  
  color: var(--primary-color);  
  margin-bottom: 0;  
}  

.not-found-page h2 {  
  margin-bottom: 20px;  
}  

.not-found-page p {  
  margin-bottom: 30px;  
  color: #777;  
}  


/* استایل‌های نقشه و موقعیت‌یابی */  
.map-page {  
  max-width: 1200px;  
  margin: 0 auto;  
  padding: 15px;  
}  

.map-header {  
  display: flex;  
  flex-direction: column;  
  gap: 10px;  
  margin-bottom: 15px;  
}  

.map-header h2 {  
  margin: 0;  
  color: var(--primary-color);  
}  

.map-controls {  
  display: flex;  
  justify-content: space-between;  
  align-items: center;  
  flex-wrap: wrap;  
  gap: 10px;  
}  

.mode-selector {  
  display: flex;  
  gap: 10px;  
}  

.location-info {  
  background-color: var(--card-bg);  
  padding: 15px;  
  border-radius: var(--border-radius);  
  margin-bottom: 15px;  
  box-shadow: var(--shadow);  
}  

.coordinates {  
  display: grid;  
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));  
  gap: 10px;  
}  

.coordinates > div {  
  padding: 8px;  
  background-color: #f8f8f8;  
  border-radius: 4px;  
}  

.map-wrapper {  
  margin-bottom: 15px;  
  border-radius: var(--border-radius);  
  overflow: hidden;  
  box-shadow: var(--shadow);  
}  

.action-buttons {  
  display: flex;  
  flex-wrap: wrap;  
  justify-content: center;  
  gap: 10px;  
  margin: 15px 0;  
}  

.info-panel {  
  background-color: var(--card-bg);  
  padding: 15px;  
  border-radius: var(--border-radius);  
  margin-top: 15px;  
  box-shadow: var(--shadow);  
}  

.info-panel h3 {  
  margin-top: 0;  
  margin-bottom: 15px;  
  color: var(--primary-color);  
  font-size: 1.2rem;  
}  

.stats {  
  display: grid;  
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));  
  gap: 15px;  
}  

.stat-item {  
  display: flex;  
  flex-direction: column;  
  padding: 10px;  
  background-color: #f8f8f8;  
  border-radius: 4px;  
}  

.stat-label {  
  font-size: 0.9rem;  
  color: #666;  
  margin-bottom: 5px;  
}  

.stat-value {  
  font-weight: bold;  
  font-size: 1.1rem; /* یا می‌توانید از واحدهای دیگر مانند em, px استفاده کنید */ 
}

/* ===== Login Page Styles ===== */
.login-container {
  max-width: 450px;
  margin: 0 auto;
  padding: 30px 20px;
  text-align: center;
  direction: rtl;
}

.login-logo {
  margin-bottom: 30px;
}

.logo-image {
  height: 80px;
  width: auto;
}

.login-title {
  font-size: 1.8rem;
  color: var(--primary-color);
  margin-bottom: 15px;
}

.login-subtitle {
  color: #666;
  margin-bottom: 30px;
  line-height: 1.6;
}

.login-form {
  margin: 30px 0;
}

.form-group {
  margin-bottom: 25px;
  text-align: right;
}

.form-group label {
  display: block;
  margin-bottom: 8px;
  font-weight: 500;
}

.phone-input {
  width: 100%;
  padding: 12px 15px;
  border: 1px solid #ddd;
  border-radius: var(--border-radius);
  font-size: 16px;
  text-align: right;
  transition: var(--transition);
}

.phone-input:focus {
  border-color: var(--primary-color);
  outline: none;
  box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
}

.submit-btn {
  background-color: var(--primary-color);
  color: white;
  border: none;
  padding: 12px 30px;
  border-radius: var(--border-radius);
  font-size: 16px;
  cursor: pointer;
  width: 100%;
  transition: var(--transition);
}

.submit-btn:hover {
  background-color: #2980b9;
}

.submit-btn:disabled {
  background-color: #95a5a6;
  cursor: not-allowed;
}

.login-terms {
  margin-top: 30px;
  color: #777;
  font-size: 0.9rem;
}

.login-terms a {
  color: var(--primary-color);
  text-decoration: none;
}

.login-terms a:hover {
  text-decoration: underline;
}

/* Responsive */
@media (max-width: 480px) {
  .login-container {
    padding: 20px 15px;
  }
  
  .login-title {
    font-size: 1.5rem;
  }
}```   
   
## \src\index.css   
```javascript   
/* فایل index.css برای استایل‌های پایه */  
@import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;500;700&display=swap');  

:root {  
  font-family: 'Vazirmatn', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;  
}  

body {  
  margin: 0;  
  padding: 0;  
  box-sizing: border-box;  
  direction: rtl;  
}  

/* استایل اسکرول‌بار */  
::-webkit-scrollbar {  
  width: 8px;  
}  

::-webkit-scrollbar-track {  
  background: #f1f1f1;  
}  

::-webkit-scrollbar-thumb {  
  background: #888;  
  border-radius: 4px;  
}  

::-webkit-scrollbar-thumb:hover {  
  background: #555;  
}  ```   
   
## \src\components\common\Button.jsx   
```javascript   
```   
   
## \src\components\common\Input.jsx   
```javascript   
```   
   
## \src\components\common\Loader.jsx   
```javascript   
```   
   
## \src\components\layout\Footer.jsx   
```javascript   
import React from 'react';  

export const Footer = () => {  
  return (  
    <footer className="app-footer">  
      <div className="footer-content">  
        <p>© {new Date().getFullYear()} مسیر طلایی - تمامی حقوق محفوظ است</p>  
        <div className="footer-links">  
          <a href="#" target="_blank" rel="noopener noreferrer">درباره ما</a>  
          <a href="#" target="_blank" rel="noopener noreferrer">تماس با ما</a>  
          <a href="#" target="_blank" rel="noopener noreferrer">حریم خصوصی</a>  
        </div>  
      </div>  
    </footer>  
  );  
};  

// سطر زیر اضافه نشود - به جای آن از { Footer } در import استفاده شود  
// export default Footer;  ```   
   
## \src\components\layout\Header.jsx   
```javascript   
import React from 'react';  
import { Link } from 'react-router-dom';  

export const Header = () => {  
  return (  
    <header className="app-header">  
      <div className="logo">  
        <Link to="/">مسیر طلایی</Link>  
      </div>  
      <nav className="main-nav">  
        <ul>  
          <li><Link to="/">خانه</Link></li>  
          <li><Link to="/map">نقشه</Link></li>  
          <li><Link to="/qr-scan">اسکن QR</Link></li>  
          <li><Link to="/settings">تنظیمات</Link></li>  
        </ul>  
      </nav>  
    </header>  
  );  
};  

// سطر زیر اضافه نشود - به جای آن از { Header } در import استفاده شود  
// export default Header;  ```   
   
## \src\components\layout\Menu.jsx   
```javascript   
```   
   
## \src\components\map\DeadReckoningControls.jsx   
```javascript   
import React, { useState, useEffect } from 'react';  
import advancedDeadReckoningService from '../../services/AdvancedDeadReckoningService'; // استفاده از سرویس جدید  
import useIMUSensors from '../../hooks/useIMUSensors';  
import './DeadReckoningControls.css';  

const DeadReckoningControls = ({ currentLocation }) => {  
  const [isActive, setIsActive] = useState(false);  
  const [isCalibrating, setIsCalibrating] = useState(false);  
  const [stepCount, setStepCount] = useState(0);  
  const [strideLength, setStrideLength] = useState(0.75);  
  const [kalmanState, setKalmanState] = useState(null); // وضعیت فیلتر کالمن  
  
  const {   
    acceleration,   
    rotationRate,   
    orientation,   
    isSupported,   
    hasPermission,  
    requestPermission,  
    checkPermissions  
  } = useIMUSensors();  

  // اضافه کردن listener به سرویس جدید  
  useEffect(() => {  
    const removeListener = advancedDeadReckoningService.addListener((data) => {  
      setIsActive(data.isActive);  
      setIsCalibrating(data.isCalibrating);  
      setStepCount(data.stepCount);  
      setKalmanState(data.kalmanState); // به‌روزرسانی وضعیت کالمن  
    });  
    
    return () => removeListener();  
  }, []);  

  // ارسال داده‌های سنسور به سرویس جدید  
  useEffect(() => {  
    if (isActive && hasPermission) {  
      const timestamp = Date.now();  
      if (acceleration) advancedDeadReckoningService.processAccelerometerData(acceleration, timestamp);  
      if (rotationRate) advancedDeadReckoningService.processGyroscopeData(rotationRate, timestamp);  
      if (orientation) advancedDeadReckoningService.processOrientationData(orientation, timestamp);  
      // داده‌های GPS به صورت جداگانه در MapView ارسال می‌شوند  
    }  
  }, [isActive, hasPermission, acceleration, rotationRate, orientation]);  

   // ارسال داده‌های GPS به سرویس جدید  
   useEffect(() => {  
       if (isActive && currentLocation?.coords) {  
           advancedDeadReckoningService.processGpsData(  
               { lat: currentLocation.coords.lat, lng: currentLocation.coords.lng },  
               currentLocation.coords.accuracy,  
               Date.now()  
           );  
       }  
   }, [isActive, currentLocation]);  


  const handleToggle = async () => {  
    if (!isActive) {  
      if (!isSupported) {  
        alert('سنسورهای دستگاه پشتیبانی نمی‌شوند.');  
        return;  
      }  
      
      if (!checkPermissions()) {  
        const permissionGranted = await requestPermission();  
        if (!permissionGranted) {  
          alert('برای استفاده، دسترسی به سنسورها را فعال کنید.');  
          return;  
        }  
      }  
      
      const initialLatLng = currentLocation?.coords ? {  
        lat: currentLocation.coords.lat,  
        lng: currentLocation.coords.lng  
      } : null;  
      
      advancedDeadReckoningService.toggle(initialLatLng); // استفاده از سرویس جدید  
    } else {  
      advancedDeadReckoningService.toggle(); // استفاده از سرویس جدید  
    }  
  };  

  const handleReset = () => {  
    advancedDeadReckoningService.reset(); // استفاده از سرویس جدید  
  };  

  const handleExport = () => {  
    advancedDeadReckoningService.exportLog(); // استفاده از سرویس جدید  
  };  

  const handleStrideLengthChange = (e) => {  
    const newValue = parseFloat(e.target.value);  
    setStrideLength(newValue);  
    advancedDeadReckoningService.setStrideLength(newValue); // استفاده از سرویس جدید  
  };  

  return (  
    <div className="dead-reckoning-panel">  
      <div className="dr-header">  
        <h3>Advanced Dead Reckoning</h3>  
      </div>  
      
      {isCalibrating && (  
        <div className="calibrating-status">درحال کالیبراسیون سنسورها...</div>  
      )}  
      
      <div className="dr-button-group">  
        <button   
          className={`dr-button dr-button-start ${isActive ? 'active' : ''}`}   
          onClick={handleToggle}  
          disabled={!isSupported || (!isActive && !hasPermission && typeof DeviceMotionEvent.requestPermission === 'function')}  
        >  
          {isActive ? 'توقف ردیابی پیشرفته' : 'شروع ردیابی پیشرفته'}  
        </button>  
        
        <button   
          className="dr-button dr-button-reset"   
          onClick={handleReset}  
          disabled={!isActive}  
        >  
          بازنشانی سیستم  
        </button>  
        
        <button   
          className="dr-button dr-button-export"   
          onClick={handleExport}  
          disabled={stepCount === 0 && !kalmanState}  
        >  
          خروجی لاگ  
        </button>  
      </div>  
      
      <div className="dr-step-count">  
        تعداد گام‌ها: {stepCount}  
      </div>  
      
      <div className="dr-stride-control">  
        <label className="dr-stride-label">  
          طول گام (متر):  
        </label>  
        <input   
          type="range"   
          min="0.3"   
          max="1.2"   
          step="0.05"   
          value={strideLength}   
          onChange={handleStrideLengthChange}   
          className="dr-stride-slider"  
          disabled={!isActive}  
        />  
        <div className="dr-stride-value">{strideLength.toFixed(2)}</div>  
      </div>  
       {/* نمایش وضعیت فیلتر کالمن برای دیباگ */}  
       {kalmanState && (  
           <div style={{ fontSize: '12px', marginTop: '10px' }}>  
               <p>موقعیت نسبی: ({kalmanState.x.toFixed(2)}, {kalmanState.y.toFixed(2)}) متر</p>  
               <p>جهت (درجه): {(kalmanState.theta * 180 / Math.PI).toFixed(2)}</p>  
               <p>سرعت خطی: {kalmanState.v.toFixed(2)} متر بر ثانیه</p>  
               <p>سرعت زاویه‌ای: {(kalmanState.w * 180 / Math.PI).toFixed(2)} درجه بر ثانیه</p>  
               <p>طول گام تخمینی: {kalmanState.stride.toFixed(2)} متر</p>  
           </div>  
       )}  
    </div>  
  );  
};  

export default DeadReckoningControls;  ```   
   
## \src\components\map\DirectionGuide.jsx   
```javascript   
```   
   
## \src\components\map\LocationTracker.jsx   
```javascript   
```   
   
## \src\components\map\MapView.jsx   
```javascript   
// src/components/map/MapView.jsx  
import React, { useEffect, useState } from 'react';
import { MapContainer, TileLayer, Marker, Popup, Circle, Polyline, useMap, ZoomControl } from 'react-leaflet';
import L from 'leaflet';
import 'leaflet/dist/leaflet.css';
import './Map.css';
import AdvancedDeadReckoningControls from './DeadReckoningControls';
import advancedDeadReckoningService from '../../services/AdvancedDeadReckoningService';

// حل مشکل آیکون‌های Leaflet  
delete L.Icon.Default.prototype._getIconUrl;
L.Icon.Default.mergeOptions({
  iconUrl: 'https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png',
  iconRetinaUrl: 'https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon-2x.png',
  shadowUrl: 'https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png',
});

// آیکون موقعیت فعلی GPS (آبی)  
const currentLocationIcon = new L.Icon({
  iconUrl: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iIzAwODVmZiIgd2lkdGg9IjI0cHgiIGhlaWdodD0iMjRweCI+PHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjgiLz48L3N2Zz4=',
  iconSize: [24, 24],
  iconAnchor: [12, 12],
  popupAnchor: [0, -12],
});

// آیکون Dead Reckoning (قرمز)  
const drLocationIcon = new L.Icon({
  iconUrl: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI2U1MzkzNSIgd2lkdGg9IjI0cHgiIGhlaWdodD0iMjRweCI+PHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjgiLz48L3N2Zz4=',
  iconSize: [24, 24],
  iconAnchor: [12, 12],
  popupAnchor: [0, -12],
});

/// آیکون جهت‌دار برای نمایش heading Dead Reckoning  
const headingArrowIcon = (headingInDegrees) => new L.Icon({
  iconUrl: `data:image/svg+xml;base64,${btoa(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">  
    <path fill="red" transform="rotate(${headingInDegrees}, 12, 12)" d="M12,2L4.5,20.29L5.21,21L12,18L18.79,21L19.5,20.29L12,2Z"/>  
  </svg>`)}`,
  iconSize: [32, 32],
  iconAnchor: [16, 16],
  popupAnchor: [0, -16],
});

// کامپوننت کنترل خودکار مرکز نقشه  
const AutoCenterMap = ({ position, follow }) => {
  const map = useMap();

  useEffect(() => {
    if (position && follow) {
      map.setView(position, map.getZoom());
    }
  }, [position, follow, map]);

  return null;
};

const MapView = ({
  currentLocation,
  locationHistory = [],
  savedLocations = [],
  followUser = true,
  initialZoom = 15
}) => {
  const [map, setMap] = useState(null);
  const [isFollowing, setIsFollowing] = useState(followUser);
  const [isDrActive, setIsDrActive] = useState(advancedDeadReckoningService.isActive);
  const [drGeoPath, setDrGeoPath] = useState([]);
  const [kalmanState, setKalmanState] = useState(null);
  const [drPosition, setDrPosition] = useState(null);


  // موقعیت مرکز نقشه (یا موقعیت فعلی GPS یا موقعیت DR)  
  const centerPosition = drPosition && isFollowing && isDrActive
    ? [drPosition.lat, drPosition.lng]
    : currentLocation?.coords
      ? [currentLocation.coords.lat, currentLocation.coords.lng]
      : null;

  // مسیر GPS طی شده  
  const pathPoints = locationHistory
    .filter(loc => loc?.coords?.lat && loc?.coords?.lng)
    .map(loc => [loc.coords.lat, loc.coords.lng]);

  // اضافه کردن listener برای Advanced Dead Reckoning Service  
  useEffect(() => {
    const removeListener = advancedDeadReckoningService.addListener((data) => {
      // به‌روزرسانی وضعیت فعال بودن سرویس  
      setIsDrActive(data.isActive);

      if (data.type === 'step' || data.type === 'serviceStateChanged') {
        // به‌روزرسانی شمارنده گام  
        if (data.stepCount) {
          setStepCount(data.stepCount);
        }

        // به‌روزرسانی وضعیت کالمن  
        if (data.kalmanState) {
          setKalmanState(data.kalmanState);
          // محاسبه جهت به درجه  
          const headingRad = data.kalmanState.theta;
          setHeadingInDegrees(((headingRad * 180 / Math.PI) + 360) % 360);
        }

        // به‌روزرسانی موقعیت تخمینی  
        if (data.geoPosition) {
          // بررسی اعتبار موقعیت  
          if (!isNaN(data.geoPosition.lat) && !isNaN(data.geoPosition.lng)) {
            console.log('Updating DR position:', data.geoPosition);
            setDrPosition(data.geoPosition);
          }
        }

        // به‌روزرسانی مسیر جغرافیایی Dead Reckoning  
        if (data.geoPath && data.geoPath.length > 0) {
          const formattedPath = data.geoPath.map(point => {
            if (isNaN(point.lat) || isNaN(point.lng)) {
              return null;
            }
            return [point.lat, point.lng];
          }).filter(point => point !== null);

          setDrGeoPath(formattedPath);
        }
      }
    });

    return () => removeListener();
  }, []);

  // ارسال داده‌های GPS به سرویس  
  useEffect(() => {
    if (isDrActive && currentLocation?.coords) {
      advancedDeadReckoningService.processGpsData(
        { lat: currentLocation.coords.lat, lng: currentLocation.coords.lng },
        currentLocation.coords.accuracy,
        Date.now()
      );
    }
  }, [isDrActive, currentLocation]);

  // تغییر وضعیت تعقیب کاربر  
  const toggleFollow = () => {
    setIsFollowing(prev => !prev);
    if (!isFollowing && centerPosition && map) {
      map.setView(centerPosition, map.getZoom() || initialZoom);
    }
  };

  // محاسبه مرکز اولیه نقشه  
  const getInitialCenter = () => {
    if (currentLocation?.coords) {
      return [currentLocation.coords.lat, currentLocation.coords.lng];
    }
    if (locationHistory.length > 0 && locationHistory[0]?.coords) {
      return [locationHistory[0].coords.lat, locationHistory[0].coords.lng];
    }
    // مرکز پیش‌فرض - تهران  
    return [35.6892, 51.3890];
  };

  // تبدیل جهت رادیان به درجه (برای نمایش فلش)  
  const headingInDegrees = kalmanState?.theta !== undefined
    ? ((kalmanState.theta * 180 / Math.PI) + 360) % 360
    : 0;

  return (
    <div className="map-fullscreen">
      <MapContainer
        center={getInitialCenter()}
        zoom={initialZoom}
        className="map-container"
        whenCreated={setMap}
        zoomControl={false}
      >
        <ZoomControl position="topright" />

        <TileLayer
          attribution='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
          url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
        />

        {/* نمایش موقعیت فعلی کاربر (از GPS) */}
        {currentLocation?.coords && (
          <>
            <Marker
              position={[currentLocation.coords.lat, currentLocation.coords.lng]}
              icon={currentLocationIcon}
              zIndexOffset={500}
            >
              <Popup>
                <div>
                  <h3>موقعیت GPS</h3>
                  <p>طول جغرافیایی: {currentLocation.coords.lng.toFixed(6)}</p>
                  <p>عرض جغرافیایی: {currentLocation.coords.lat.toFixed(6)}</p>
                  <p>دقت: {currentLocation.coords.accuracy.toFixed(1)} متر</p>
                </div>
              </Popup>
            </Marker>

            {/* دایره دقت GPS */}
            <Circle
              center={[currentLocation.coords.lat, currentLocation.coords.lng]}
              radius={currentLocation.coords.accuracy}
              color="#0085ff"
              fillColor="#0085ff"
              fillOpacity={0.1}
              weight={1}
            />
          </>
        )}

        {/* نمایش موقعیت تخمینی Dead Reckoning */}
        {isDrActive && drPosition && !isNaN(drPosition.lat) && !isNaN(drPosition.lng) && (
          <>
            <Marker
              position={[drPosition.lat, drPosition.lng]}
              icon={drLocationIcon}
              zIndexOffset={600}
            >
              <Popup>
                <div>
                  <h3>موقعیت تخمینی (DR)</h3>
                  <p>طول جغرافیایی: {drPosition.lng.toFixed(6)}</p>
                  <p>عرض جغرافیایی: {drPosition.lat.toFixed(6)}</p>
                  {kalmanState && (
                    <>
                      <p>جهت (درجه): {headingInDegrees.toFixed(2)}</p>
                      <p>سرعت: {kalmanState.v.toFixed(2)} متر بر ثانیه</p>
                      <p>طول گام: {kalmanState.stride.toFixed(2)} متر</p>
                    </>
                  )}
                </div>
              </Popup>
            </Marker>

            {/* فلش جهت‌دار */}
            {kalmanState?.theta !== undefined && (
              <Marker
                position={[drPosition.lat, drPosition.lng]}
                icon={headingArrowIcon(headingInDegrees)}
                zIndexOffset={1000}
              />
            )}
          </>
        )}

        {/* مسیر GPS طی شده */}
        {pathPoints.length > 1 && (
          <Polyline
            positions={pathPoints}
            color="#0085ff"
            weight={3}
            opacity={0.7}
          />
        )}

        {/* مسیر Dead Reckoning */}
        {isDrActive && drGeoPath.length > 1 && (
          <Polyline
            positions={drGeoPath.filter(point =>
              !isNaN(point[0]) && !isNaN(point[1])
            )}
            color="#e53935"
            weight={3}
            opacity={0.7}
          />
        )}

        {/* نقاط ذخیره شده */}
        {savedLocations.map((location, index) => (
          <Marker
            key={location.id || index}
            position={[location.coords.lat, location.coords.lng]}
          >
            <Popup>
              <div>
                <h3>{location.name || `نقطه ${index + 1}`}</h3>
                <p>طول جغرافیایی: {location.coords.lng.toFixed(6)}</p>
                <p>عرض جغرافیایی: {location.coords.lat.toFixed(6)}</p>
                {location.timestamp && <p>زمان: {new Date(location.timestamp).toLocaleString()}</p>}
              </div>
            </Popup>
          </Marker>
        ))}

        {/* تنظیم خودکار مرکز نقشه */}
        {centerPosition && <AutoCenterMap position={centerPosition} follow={isFollowing} />}
      </MapContainer>

      {/* دکمه‌های کنترل نقشه */}
      <div className="map-controls-overlay">
        {/* دکمه تعقیب موقعیت */}
        <button
          className={`map-control-button ${isFollowing ? 'active' : ''}`}
          onClick={toggleFollow}
          title={isFollowing ? 'توقف تعقیب موقعیت' : 'تعقیب موقعیت'}
        >
          <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" strokeWidth="2" fill="none" strokeLinecap="round" strokeLinejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <circle cx="12" cy="12" r="3"></circle>
          </svg>
        </button>

        {/* دکمه مرکز به موقعیت فعلی */}
        <button
          className="map-control-button"
          onClick={() => {
            if (centerPosition && map) {
              map.setView(centerPosition, map.getZoom());
              setIsFollowing(true);
            }
          }}
          title="مرکز به موقعیت فعلی"
        >
          <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" strokeWidth="2" fill="none" strokeLinecap="round" strokeLinejoin="round">
            <line x1="12" y1="2" x2="12" y2="6"></line>
            <line x1="12" y1="18" x2="12" y2="22"></line>
            <line x1="2" y1="12" x2="6" y2="12"></line>
            <line x1="18" y1="12" x2="22" y2="12"></line>
            <circle cx="12" cy="12" r="4"></circle>
          </svg>
        </button>
      </div>

      {/* پنل اطلاعات موقعیت */}
      {currentLocation?.coords && (
        <div className="location-panel">
          <div className="coordinates-display">
            <div>
              <span>عرض:</span> {currentLocation.coords.lat.toFixed(6)}
            </div>
            <div>
              <span>طول:</span> {currentLocation.coords.lng.toFixed(6)}
            </div>
            <div>
              <span>دقت:</span> {currentLocation.coords.accuracy.toFixed(1)} متر
            </div>
          </div>
        </div>
      )}

      {/* پنل کنترل‌های Dead Reckoning */}
      <AdvancedDeadReckoningControls currentLocation={currentLocation} />
    </div>
  );
};

export default MapView;  ```   
   
## \src\components\map\QRScanner.jsx   
```javascript   
import React, { useState, useEffect } from 'react';  
// import { QrReader } from '@yudiel/react-qr-scanner'; // خط قبلی را کامنت کنید  
import * as QrScannerStuff from '@yudiel/react-qr-scanner'; // همه چیز را وارد کنید  
import { useGPSStore } from '../../store/gpsStore';  
import useGPS from '../../hooks/useGPS';  

const QRScanner = ({ onSuccess, onError }) => {  
  useEffect(() => {  
    console.log("QrScannerStuff:", QrScannerStuff); // ببینیم چه چیزهایی داخلش هست  
  }, []);  

  return <div>Testing QR Scanner Import... Check console (F12).</div>;  
};  

export default QRScanner;  ```   
   
## \src\components\map\DeadReckoningControls.css   
```javascript   
.dead-reckoning-panel {  
    position: absolute;  
    top: 80px;  
    right: 10px;  
    background-color: white;  
    border-radius: 8px;  
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);  
    width: 220px;  
    padding: 12px;  
    z-index: 1000;  
    direction: rtl;  
  } 
   
  
  .dr-header {  
    display: flex;  
    justify-content: space-between;  
    align-items: center;  
    margin-bottom: 10px;  
    padding-bottom: 10px;  
    border-bottom: 1px solid #eee;  
  }  
  
  .dr-header h3 {  
    margin: 0;  
    font-size: 12px;  
    font-weight: bold;  
  }  
  
  .calibrating-status {  
    background-color: #ffb300;  
    color: white;  
    padding: 8px;  
    border-radius: 4px;  
    font-size: 14px;  
    text-align: center;  
    margin-bottom: 10px;  
  }  
  
  .dr-button-group {  
    display: grid;  
    grid-template-columns: 1fr 1fr;  
    gap: 8px;  
    margin-bottom: 12px;  
  }  
  
  .dr-button {  
    padding: 8px 0;  
    border: none;  
    border-radius: 4px;  
    font-size: 14px;  
    cursor: pointer;  
    text-align: center;  
  }  
  
  .dr-button-start {  
    background-color: #2196f3;  
    color: white;  
    grid-column: span 2;  
  }  
  
  .dr-button-start.active {  
    background-color: #f44336;  
  }  
  
  .dr-button-reset {  
    background-color: #9e9e9e;  
    color: white;  
  }  
  
  .dr-button-export {  
    background-color: #4caf50;  
    color: white;  
  }  
  
  .dr-button:disabled {  
    opacity: 0.6;  
    cursor: not-allowed;  
  }  
  
  .dr-step-count {  
    margin: 8px 0;  
    font-size: 14px;  
  }  
  
  .dr-stride-control {  
    margin-top: 12px;  
  }  
  
  .dr-stride-label {  
    display: block;  
    margin-bottom: 6px;  
    font-size: 14px;  
  }  
  
  .dr-stride-slider {  
    width: 100%;  
    margin-bottom: 4px;  
  }  
  
  .dr-stride-value {  
    text-align: center;  
    font-size: 14px;  
  }  ```   
   
## \src\components\map\Map.css   
```javascript   
/* Map.css */  
.map-fullscreen {  
  position: fixed;  
  top: 0;  
  left: 0;  
  right: 0;  
  bottom: 0;  
  width: 100%;  
  height: 100vh;  
  z-index: 1;  
}  

.map-container {  
  width: 100%;  
  height: 100%;  
}  

/* استایل مشترک برای همه دکمه‌های دارای آیکون */  
.button-with-icon {  
  display: inline-flex;  
  align-items: center;  
  justify-content: center;  
  gap: 4px;  
}  

.button-with-icon svg {  
  vertical-align: middle;  
  flex-shrink: 0;  
}  

/* نوار ابزار بالای نقشه */  
.map-toolbar {  
  display: flex;  
  align-items: center;  
  padding: 8px 10px;  
  background: #fff;  
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);  
  position: absolute;  
  top: 0;  
  left: 0;  
  right: 0;  
  z-index: 1000;  
}  

.signal-quality-pill {  
  display: flex;  
  align-items: center;  
  gap: 5px;  
  font-size: 0.8rem;  
  padding: 4px 8px;  
  border-radius: 12px;  
  margin: 0 auto;  
}  

.signal-quality-pill.good {  
  background-color: rgba(76, 175, 80, 0.15);  
  color: #1b5e20;  
}  

.signal-quality-pill.medium {  
  background-color: rgba(255, 152, 0, 0.15);  
  color: #e65100;  
}  

.signal-quality-pill.poor {  
  background-color: rgba(244, 67, 54, 0.15);  
  color: #b71c1c;  
}  

.back-button {  
  display: flex;  
  align-items: center;  
  gap: 5px;  
  text-decoration: none;  
  color: #333;  
  font-size: 0.9rem;  
}  

.start-tracking-button {  
  display: flex;  
  align-items: center;  
  gap: 5px;  
  background: #2196f3;  
  color: white;  
  border: none;  
  padding: 6px 10px;  
  border-radius: 4px;  
  font-size: 0.9rem;  
  cursor: pointer;  
}   

.back-button {  
  background-color: white;  
  color: #333;  
  border: none;  
  border-radius: 4px;  
  padding: 4px 8px;  
  font-weight: bold;  
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);  
  cursor: pointer;  
  display: inline-flex;  
  align-items: center;  
  justify-content: center;  
  gap: 4px;  
  text-decoration: none;  
  min-width: 90px;  
  height: 28px;  
}  

.back-button svg {  
  vertical-align: middle;  
  margin-top: -1px; /* تنظیم دقیق برای تراز بهتر */  
}  

.back-button:hover {  
  background-color: #f0f0f0;  
}  

.tracking-button {  
  background-color: white;  
  color: #333;  
  border: none;  
  border-radius: 4px;  
  padding: 4px 8px;  
  font-weight: bold;  
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);  
  cursor: pointer;  
  display: inline-flex;  
  align-items: center;  
  justify-content: center;  
  gap: 4px;  
  min-width: 90px;  
  height: 28px;  
}  

.tracking-button svg {  
  vertical-align: middle;  
  margin-top: -1px; /* تنظیم دقیق برای تراز بهتر */  
}  

.tracking-button.active {  
  background-color: #0085ff;  
  color: white;  
}  

/* استایل برای دکمه‌های اکشن نیز باید اصلاح شود */  
.action-button {  
  background-color: white;  
  color: #333;  
  border: none;  
  border-radius: 4px;  
  padding: 4px 6px;  
  font-weight: bold;  
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);  
  cursor: pointer;  
  display: inline-flex;  
  align-items: center;  
  justify-content: center;  
  gap: 2px;  
}  

.action-button svg {  
  vertical-align: middle;  
  margin-top: -1px; /* تنظیم دقیق برای تراز بهتر */  
}   

/* نوار ابزار پایین نقشه */  
.map-bottom-toolbar {  
  position: absolute;  
  bottom: 25px;  
  left: 50%;  
  transform: translateX(-50%);  
  z-index: 1001;  
  display: flex;  
  justify-content: center;  
  gap: 10px;  
  padding: 8px;  
  background-color: rgba(255, 255, 255, 0.8);  
  border-radius: 8px;  
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);  
}   

.error-indicator {  
  background-color: rgba(255, 0, 0, 0.7);  
  color: white;  
  padding: 5px 10px;  
  border-radius: 4px;  
  font-size: 14px;  
}  

.loading-indicator {  
  background-color: rgba(255, 255, 255, 0.8);  
  color: #333;  
  padding: 5px 10px;  
  border-radius: 4px;  
  font-size: 14px;  
}  

.action-button {  
  background-color: white;  
  color: #333;  
  border: none;  
  border-radius: 4px;  
  padding: 4px 6px;  
  font-weight: bold;  
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);  
  cursor: pointer;  
  display: flex;  
  align-items: center;  
  gap: 2px;  
}  

.action-button:disabled {  
  opacity: 0.5;  
  cursor: not-allowed;  
}  

.save-button:not(:disabled):hover {  
  background-color: #4CAF50;  
  color: white;  
}  

.share-button:not(:disabled):hover {  
  background-color: #2196F3;  
  color: white;  
}  

.map-clear-button:not(:disabled):hover {  
  background-color: #F44336;  
  color: white;  
}  

/* تغییر از .clear-button به .map-clear-button */  
.map-clear-button {  
  /* استایل‌های موجود برای دکمه پاک کردن در صفحه نقشه */  
  background-color: #f0f0f0;  
  color: #555;  
}  

.map-clear-button:hover {  
  background-color: #e0e0e0;  
}  

.map-clear-button:disabled {  
  opacity: 0.5;  
  cursor: not-allowed;  
}  

/* کنترل‌های نقشه */  
.map-controls-overlay {  
  position: absolute;  
  right: 10px;  
  bottom: 100px; /* افزایش فاصله از پایین */  
  display: flex;  
  flex-direction: column;  
  gap: 10px;  
  z-index: 1000;  
}  

.map-control-button {  
  background-color: white;  
  color: #333;  
  border: none;  
  border-radius: 4px;  
  width: 40px;  
  height: 40px;  
  display: flex;  
  align-items: center;  
  justify-content: center;  
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);  
  cursor: pointer;  
}  

.map-control-button.active {  
  background-color: #0085ff;  
  color: white;  
}  

/* پنل اطلاعات موقعیت */  
.location-panel {  
  position: absolute;  
  bottom: 80px; /* فاصله بیشتر از پایین */  
  left: 10px;  
  background-color: rgba(255, 255, 255, 0.9);  
  padding: 8px;  
  border-radius: 4px;  
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);  
  z-index: 999; /* کمتر از دکمه‌ها */  
  font-size: 12px;  
  max-width: 180px;  
}  

.coordinates-display {  
  display: flex;  
  flex-direction: column;  
  gap: 3px;  
}  

.coordinates-display span {  
  font-weight: bold;  
}  

/* اطمینان از عدم تداخل با کنترل‌های leaflet */  
.leaflet-control-zoom {  
  margin-top: 60px !important; /* افزایش فاصله از بالا برای جلوگیری از تداخل با نوار ابزار */  
}  

/* برای اپ‌بار در موبایل */  
@media (max-width: 768px) {  
  .map-toolbar {  
    top: 10px;  
    padding: 6px;  
  }  
  
  .map-bottom-toolbar {  
    bottom: 20px;  
    width: 95%;  
    max-width: 400px;  
    padding: 6px;  
    flex-wrap: wrap;  
    justify-content: center;  
  }  
  
  .action-button {  
    font-size: 10px;  
    padding: 6px 8px;  
  }  
  
  .map-controls-overlay {  
    bottom: 90px;  
  }  
  
  .location-panel {  
    bottom: 90px;  
    max-width: 150px;  
    font-size: 10px;  
  }  
  
  .leaflet-control-zoom {  
    margin-top: 70px !important;  
  }  
}  

/* پنل کیفیت سیگنال GPS */  
.gps-quality-panel {  
  position: absolute;  
  bottom: 80px;  
  right: 10px;  
  background-color: rgba(255, 255, 255, 0.9);  
  padding: 8px;  
  border-radius: 4px;  
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);  
  z-index: 999;  
  font-size: 12px;  
  width: 150px;  
}  

.quality-header {  
  font-weight: bold;  
  margin-bottom: 4px;  
  text-align: center;  
}  

.quality-meter {  
  height: 6px;  
  background-color: #f0f0f0;  
  border-radius: 3px;  
  overflow: hidden;  
  margin-bottom: 4px;  
}  

.quality-bar {  
  height: 100%;  
  transition: width 0.5s ease;  
}  

.quality-bar.good {  
  background-color: #4CAF50;  
}  

.quality-bar.medium {  
  background-color: #FFC107;  
}  

.quality-bar.poor {  
  background-color: #F44336;  
}  

.quality-text {  
  font-size: 10px;  
  text-align: center;  
}  

.quality-warning {  
  color: #F44336;  
  display: flex;  
  align-items: center;  
  justify-content: center;  
  gap: 4px;  
  margin-top: 4px;  
}  

/* تغییر موقعیت در موبایل */  
@media (max-width: 768px) {  
  .gps-quality-panel {  
    bottom: 90px;  
    width: 120px;  
    font-size: 10px;  
  }  
}  

/* پنل کیفیت سیگنال GPS */  
.gps-quality-panel {  
  position: absolute;  
  bottom: 80px;  
  right: 10px;  
  background-color: rgba(255, 255, 255, 0.9);  
  padding: 8px;  
  border-radius: 4px;  
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);  
  z-index: 999;  
  font-size: 12px;  
  width: 150px;  
  direction: rtl;  
}  

.quality-header {  
  font-weight: bold;  
  margin-bottom: 4px;  
  text-align: center;  
}  

.quality-meter {  
  height: 6px;  
  background-color: #f0f0f0;  
  border-radius: 3px;  
  overflow: hidden;  
  margin-bottom: 4px;  
}  

.quality-bar {  
  height: 100%;  
  transition: width 0.5s ease;  
}  

.quality-bar.good {  
  background-color: #4CAF50;  
}  

.quality-bar.medium {  
  background-color: #FFC107;  
}  

.quality-bar.poor {  
  background-color: #F44336;  
}  

.quality-text {  
  font-size: 11px;  
  text-align: center;  
}  

.quality-good {  
  color: #4CAF50;  
}  

.quality-medium {  
  color: #FFC107;  
}  

.quality-poor {  
  color: #F44336;  
}  

.quality-warning {  
  color: #F44336;  
  display: flex;  
  align-items: center;  
  justify-content: center;  
  gap: 4px;  
  margin-top: 4px;  
  font-size: 10px;  
}  

.error-indicator {  
  display: flex;  
  align-items: center;  
  background-color: rgba(244, 67, 54, 0.1);  
  color: #F44336;  
  padding: 4px 8px;  
  border-radius: 4px;  
  margin-right: 8px;  
  font-size: 12px;  
}  

.error-indicator svg {  
  margin-left: 4px;  
}  

/* تغییر موقعیت در موبایل */  
@media (max-width: 768px) {  
  .gps-quality-panel {  
    bottom: 90px;  
    width: 120px;  
    font-size: 10px;  
  }  
}  

/* اضافه کردن به فایل CSS موجود برای صفحه نقشه */  

.alerts-container {  
  position: fixed;  
  bottom: 80px; /* بالاتر از نوار ابزار پایین */  
  left: 50%;  
  transform: translateX(-50%);  
  width: 90%;  
  max-width: 400px;  
  z-index: 1000;  
  display: flex;  
  flex-direction: column;  
  gap: 8px;  
  pointer-events: none; /* اجازه کلیک روی نقشه زیرین */  
}  

.alert-toast {  
  display: flex;  
  align-items: center;  
  padding: 12px 16px;  
  border-radius: 10px;  
  background-color: rgba(255, 255, 255, 0.95);  
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);  
  animation: slideIn 0.3s ease forwards, fadeOut 0.3s ease 5s forwards;  
  pointer-events: auto; /* این المان قابل کلیک است */  
  backdrop-filter: blur(10px);  
  border: 1px solid rgba(0, 0, 0, 0.05);  
  font-size: 0.9rem;  
  max-width: 100%;  
}  

.error-alert {  
  border-right: 4px solid #e53935;  
}  

.warning-alert {  
  border-right: 4px solid #ffb300;  
}  

.info-alert {  
  border-right: 4px solid #039be5;  
}  

.success-alert {  
  border-right: 4px solid #43a047;  
}  

.alert-icon {  
  margin-left: 12px;  
  line-height: 0;  
  flex-shrink: 0;  
}  

.error-alert .alert-icon {  
  color: #e53935;  
}  

.warning-alert .alert-icon {  
  color: #ffb300;  
}  

.info-alert .alert-icon {  
  color: #039be5;  
}  

.success-alert .alert-icon {  
  color: #43a047;  
}  

.alert-icon.spinning svg {  
  animation: spin 1.5s linear infinite;  
}  

.alert-content {  
  flex: 1;  
  min-width: 0;  
}  

.alert-title {  
  font-weight: 600;  
  margin-bottom: 2px;  
  color: #333;  
}  

.alert-message {  
  color: #555;  
  overflow: hidden;  
  text-overflow: ellipsis;  
}  

.alert-details {  
  display: flex;  
  flex-wrap: wrap;  
  gap: 8px;  
  margin-top: 4px;  
  font-size: 0.8rem;  
}  

.alert-details span {  
  background-color: rgba(0, 0, 0, 0.05);  
  padding: 2px 6px;  
  border-radius: 4px;  
  color: #666;  
}  

.alert-close {  
  background: none;  
  border: none;  
  padding: 4px;  
  color: #aaa;  
  border-radius: 50%;  
  cursor: pointer;  
  margin-right: 8px;  
  line-height: 0;  
  transition: all 0.2s;  
  flex-shrink: 0;  
}  

.alert-close:hover {  
  background-color: rgba(0, 0, 0, 0.05);  
  color: #555;  
}  

@keyframes slideIn {  
  from {  
    opacity: 0;  
    transform: translateY(20px);  
  }  
  to {  
    opacity: 1;  
    transform: translateY(0);  
  }  
}  

@keyframes fadeOut {  
  from {  
    opacity: 1;  
  }  
  to {  
    opacity: 0;  
    transform: translateY(-20px);  
  }  
}  

@keyframes spin {  
  0% {  
    transform: rotate(0deg);  
  }  
  100% {  
    transform: rotate(360deg);  
  }  
}  

/* برای دستگاه‌های موبایل در حالت افقی */  
@media screen and (max-height: 500px) {  
  .alerts-container {  
    bottom: auto;  
    top: 70px;  
  }  
}  ```   
   
## \src\components\settings\SettingsForm.jsx   
```javascript   
```   
   
## \src\components\settings\SettingsPage.jsx   
```javascript   
// src/components/settings/SettingsPage.jsx  
import React, { useState, useEffect } from 'react';  
import { Link } from 'react-router-dom';  
import { LogStorageService } from '../../services/LogStorageService';  
import './Settings.css';  

const SettingsPage = () => {  
  const [logCounts, setLogCounts] = useState({ gpsLogs: 0, trackLogs: 0 });  
  const [storageSize, setStorageSize] = useState({ gpsLogsSize: 0, trackLogsSize: 0, totalSize: 0 });  
  const [isLoading, setIsLoading] = useState(true);  
  const [isExporting, setIsExporting] = useState(false);  
  const [message, setMessage] = useState('');  
  
  // دریافت آمار لاگ‌ها  
  useEffect(() => {  
    async function fetchLogStats() {  
      try {  
        setIsLoading(true);  
        const counts = await LogStorageService.getLogCounts();  
        const size = await LogStorageService.estimateStorageSize();  
        
        setLogCounts(counts);  
        setStorageSize(size);  
        setIsLoading(false);  
      } catch (error) {  
        console.error('خطا در دریافت آمار لاگ‌ها:', error);  
        setMessage('خطا در دریافت آمار لاگ‌ها');  
        setIsLoading(false);  
      }  
    }  
    
    fetchLogStats();  
  }, []);  
  
  // تبدیل ب```   
   
## \src\contexts\AuthContext.jsx   
```javascript   
```   
   
## \src\hooks\useGPS.js   
```javascript   
import { useState, useEffect, useRef } from 'react';  
import { useGPSStore } from '../store/gpsStore';  

// Hook برای کار با GPS و دریافت موقعیت  
const useGPS = (options = {}) => {  
  const {   
    enableHighAccuracy = true,   
    timeout = 5000,   
    maximumAge = 0,  
    watchPosition = true  
  } = options;  
  
  const [position, setPosition] = useState(null);  
  const [error, setError] = useState(null);  
  const [loading, setLoading] = useState(true);  
  const watchIdRef = useRef(null);  
  
  const { updateCurrentLocation, addLocationToHistory } = useGPSStore();  
  
  // تبدیل داده خام GPS به فرمت مناسب  
  const processPosition = (pos) => {  
    const { latitude, longitude, accuracy, altitude, heading, speed } = pos.coords;  
    const timestamp = pos.timestamp;  
    
    const formattedPosition = {  
      coords: {  
        lat: latitude,  
        lng: longitude,  
        accuracy,  
        altitude,  
        heading,  
        speed  
      },  
      timestamp  
    };  
    
    setPosition(formattedPosition);  
    setLoading(false);  
    
    // به‌روزرسانی store  
    updateCurrentLocation(formattedPosition);  
    addLocationToHistory(formattedPosition);  
    
    return formattedPosition;  
  };  
  
  // مدیریت خطاها  
  const handleError = (err) => {  
    setError(err);  
    setLoading(false);  
    console.error('GPS Error:', err.message);  
  };  

  // دریافت موقعیت فعلی  
  const getCurrentPosition = () => {  
    setLoading(true);  
    
    if (!navigator.geolocation) {  
      setError(new Error('Geolocation is not supported by this browser'));  
      setLoading(false);  
      return Promise.reject('Geolocation not supported');  
    }  
    
    return new Promise((resolve, reject) => {  
      navigator.geolocation.getCurrentPosition(  
        (pos) => {  
          const formattedPos = processPosition(pos);  
          resolve(formattedPos);  
        },  
        (err) => {  
          handleError(err);  
          reject(err);  
        },  
        { enableHighAccuracy, timeout, maximumAge }  
      );  
    });  
  };  
  
  // شروع tracking موقعیت  
  const startWatching = () => {  
    if (!navigator.geolocation) {  
      setError(new Error('Geolocation is not supported by this browser'));  
      setLoading(false);  
      return;  
    }  
    
    watchIdRef.current = navigator.geolocation.watchPosition(  
      processPosition,  
      handleError,  
      { enableHighAccuracy, timeout, maximumAge }  
    );  
    
    return watchIdRef.current;  
  };  
  
  // توقف tracking موقعیت  
  const stopWatching = () => {  
    if (watchIdRef.current && navigator.geolocation) {  
      navigator.geolocation.clearWatch(watchIdRef.current);  
      watchIdRef.current = null;  
    }  
  };  
  
  useEffect(() => {  
    if (watchPosition) {  
      startWatching();  
    } else {  
      getCurrentPosition();  
    }  
    
    return () => {  
      stopWatching();  
    };  
  }, []);  
  
  return {  
    position,  
    error,  
    loading,  
    getCurrentPosition,  
    startWatching,  
    stopWatching  
  };  
};  

export default useGPS;  ```   
   
## \src\hooks\useIMUSensors.js   
```javascript   
import { useState, useEffect } from 'react';  
import advancedDeadReckoningService from '../services/AdvancedDeadReckoningService';  

const useIMUSensors = () => {  
  const [isSupported, setIsSupported] = useState(false);  
  const [hasPermission, setHasPermission] = useState(false);  
  const [acceleration, setAcceleration] = useState(null);  
  const [rotationRate, setRotationRate] = useState(null);  
  const [orientation, setOrientation] = useState(null);  
  
  // بررسی پشتیبانی سنسورها  
  useEffect(() => {  
    const checkSupport = () => {  
      const hasMotion = window.DeviceMotionEvent !== undefined;  
      const hasOrientation = window.DeviceOrientationEvent !== undefined;  
      const supported = hasMotion && hasOrientation;  
      setIsSupported(supported);  
      
      console.log('Device motion support:', hasMotion);  
      console.log('Device orientation support:', hasOrientation);  
      
      // در برخی مرورگرها مانند کروم دسکتاپ، نیازی به مجوز نیست  
      if (supported &&   
          !(typeof DeviceMotionEvent.requestPermission === 'function') &&   
          !(typeof DeviceOrientationEvent.requestPermission === 'function')) {  
        setHasPermission(true);  
      }  
      
      return supported;  
    };  
    
    if (checkSupport()) {  
      console.log("IMU sensors are supported by this device");  
    } else {  
      console.warn("IMU sensors are NOT supported by this device");  
    }  
  }, []);  
  
  // افزودن لیستنرهای سنسور  
  useEffect(() => {  
    if (!isSupported || !hasPermission) {  
      return;  
    }  
    
    console.log("Setting up sensor listeners");  
    
    // لیستنر شتاب‌سنج  
    const handleMotion = (event) => {  
      if (!event) return;  
      
      // تشخیص نوع داده شتاب‌سنج  
      if (event.acceleration && event.acceleration.x !== null) {  
        // شتاب خالص (بدون جاذبه)  
        const accel = {  
          x: event.acceleration.x || 0,  
          y: event.acceleration.y || 0,  
          z: event.acceleration.z || 0,  
          timestamp: event.timeStamp || Date.now(),  
          includesGravity: false  
        };  
        setAcceleration(accel);  
        
        // ارسال داده به سرویس در صورت فعال بودن  
        if (advancedDeadReckoningService.isActive) {  
          advancedDeadReckoningService.processAccelerometerData(accel, accel.timestamp);  
        }  
      } else if (event.accelerationIncludingGravity && event.accelerationIncludingGravity.x !== null) {  
        // شتاب با جاذبه  
        const accel = {  
          x: event.accelerationIncludingGravity.x || 0,  
          y: event.accelerationIncludingGravity.y || 0,  
          z: event.accelerationIncludingGravity.z || 0,  
          timestamp: event.timeStamp || Date.now(),  
          includesGravity: true  
        };  
        setAcceleration(accel);  
        
        // ارسال داده به سرویس در صورت فعال بودن  
        if (advancedDeadReckoningService.isActive) {  
          advancedDeadReckoningService.processAccelerometerData(accel, accel.timestamp);  
        }  
      }  
      
      // داده‌های ژیروسکوپ  
      if (event.rotationRate && event.rotationRate.alpha !== null) {  
        const gyro = {  
          alpha: event.rotationRate.alpha || 0,  
          beta: event.rotationRate.beta || 0,  
          gamma: event.rotationRate.gamma || 0,  
          timestamp: event.timeStamp || Date.now()  
        };  
        setRotationRate(gyro);  
        
        // ارسال داده به سرویس در صورت فعال بودن  
        if (advancedDeadReckoningService.isActive) {  
          advancedDeadReckoningService.processGyroscopeData(gyro, gyro.timestamp);  
        }  
      }  
    };  
    
    // لیستنر جهت‌یابی  
    const handleOrientation = (event) => {  
      if (!event || event.alpha === null) return;  
      
      const orient = {  
        alpha: event.alpha || 0, // جهت (0-360 درجه)  
        beta: event.beta || 0,   // شیب جلو/عقب (-180 تا 180 درجه)  
        gamma: event.gamma || 0, // شیب چپ/راست (-90 تا 90 درجه)  
        absolute: event.absolute || false,  
        timestamp: event.timeStamp || Date.now()  
      };  
      setOrientation(orient);  
      
      // ارسال داده به سرویس در صورت فعال بودن  
      if (advancedDeadReckoningService.isActive) {  
        advancedDeadReckoningService.processOrientationData(orient, orient.timestamp);  
      }  
    };  
    
    // تنظیم نرخ نمونه‌برداری (در صورت امکان)  
    if (typeof DeviceMotionEvent.requestPermission === 'function') {  
      // در iOS جدید  
      window.addEventListener('devicemotion', handleMotion, { frequency: 60 });  
      window.addEventListener('deviceorientation', handleOrientation, { frequency: 60 });  
    } else {  
      // سایر دستگاه‌ها  
      window.addEventListener('devicemotion', handleMotion);  
      window.addEventListener('deviceorientation', handleOrientation);  
    }  
    
    console.log("Sensor listeners added");  
    
    // حذف لیستنرها در هنگام unmount  
    return () => {  
      console.log("Removing sensor listeners");  
      window.removeEventListener('devicemotion', handleMotion);  
      window.removeEventListener('deviceorientation', handleOrientation);  
    };  
  }, [isSupported, hasPermission, advancedDeadReckoningService.isActive]);  
  
  // درخواست مجوز دسترسی به سنسورها (برای iOS 13+)  
  const requestPermission = async () => {  
    if (!isSupported) {  
      console.warn("Sensors not supported, cannot request permission");  
      return false;  
    }  
    
    try {  
      // برای iOS 13+  
      if (typeof DeviceMotionEvent.requestPermission === 'function' &&  
          typeof DeviceOrientationEvent.requestPermission === 'function') {  
        
        console.log('Requesting permissions for iOS...');  
        
        const motionPermission = await DeviceMotionEvent.requestPermission();  
        const orientationPermission = await DeviceOrientationEvent.requestPermission();  
        
        const granted = motionPermission === 'granted' && orientationPermission === 'granted';  
        setHasPermission(granted);  
        console.log(`Permission ${granted ? 'granted' : 'denied'}`);  
        return granted;  
      } else {  
        // برای سایر دستگاه‌ها، فرض می‌کنیم مجوز داریم  
        console.log('No permission request needed for this device');  
        setHasPermission(true);  
        return true;  
      }  
    } catch (error) {  
      console.error('Error requesting sensor permissions:', error);  
      return false;  
    }  
  };  
  
  // بررسی وضعیت مجوزها  
  const checkPermissions = async () => {  
    if (!isSupported) return false;  
    
    // در iOS نیاز به درخواست صریح است  
    if (typeof DeviceMotionEvent.requestPermission === 'function') {  
      return hasPermission;  
    }  
    
    // در سایر دستگاه‌ها، فرض می‌کنیم مجوز داریم  
    setHasPermission(true);  
    return true;  
  };  
  
  return {  
    acceleration,  
    rotationRate,  
    orientation,  
    isSupported,  
    hasPermission,  
    requestPermission,  
    checkPermissions  
  };  
};  

export default useIMUSensors;  ```   
   
## \src\hooks\useOfflineStorage.js   
```javascript   
```   
   
## \src\hooks\useQRCode.js   
```javascript   
```   
   
## \src\pages\HomePage.jsx   
```javascript   
import React from 'react';  
import { Link } from 'react-router-dom';  

export const HomePage = () => {  
  return (  
    <div className="home-page">  
      <section className="hero">  
        <h1>به اپلیکیشن مسیر طلایی خوش آمدید</h1>  
        <p>ردیابی دقیق موقعیت و ناوبری حتی در شرایط سخت</p>  
        
        <div className="hero-buttons">  
          <Link to="/map" className="btn btn-primary">  
            شروع ناوبری  
          </Link>  
          <Link to="/qr-scan" className="btn btn-secondary">  
            اسکن QR کد  
          </Link>  
        </div>  
      </section>  
      
      <section className="features">  
        <h2>امکانات اصلی</h2>  
        
        <div className="feature-cards">  
          <div className="feature-card">  
            <div className="feature-icon">🛰️</div>  
            <h3>ردیابی دقیق GPS</h3>  
            <p>دریافت موقعیت با دقت بالا و نمایش روی نقشه</p>  
          </div>  
          
          <div className="feature-card">  
            <div className="feature-icon">📱</div>  
            <h3>Dead Reckoning</h3>  
            <p>ردیابی حرکت حتی در شرایط بدون GPS با استفاده از سنسورهای دستگاه</p>  
          </div>  
          
          <div className="feature-card">  
            <div className="feature-icon">📷</div>  
            <h3>اسکن QR کد</h3>  
            <p>دریافت موقعیت و اطلاعات از طریق اسکن QR کد</p>  
          </div>  
          
          <div className="feature-card">  
            <div className="feature-icon">🔄</div>  
            <h3>کارکرد آفلاین</h3>  
            <p>قابلیت استفاده از اپلیکیشن بدون نیاز به اینترنت</p>  
          </div>  
        </div>  
      </section>  
      
      <section className="how-to-use">  
        <h2>نحوه استفاده</h2>  
        
        <div className="steps">  
          <div className="step">  
            <div className="step-number">1</div>  
            <h3>دسترسی به موقعیت</h3>  
            <p>به اپلیکیشن اجازه دسترسی به موقعیت دستگاه خود را بدهید</p>  
          </div>  
          
          <div className="step">  
            <div className="step-number">2</div>  
            <h3>انتخاب حالت ناوبری</h3>  
            <p>از بین گزینه‌های GPS، QR کد یا Dead Reckoning انتخاب کنید</p>  
          </div>  
          
          <div className="step">  
            <div className="step-number">3</div>  
            <h3>شروع ردیابی</h3>  
            <p>دکمه شروع ردیابی را فشار دهید و مسیر خود را ثبت کنید</p>  
          </div>  
        </div>  
      </section>  
    </div>  
  );  
};  

// سطر زیر اضافه نشود - به جای آن از { HomePage } در import استفاده شود  
// export default HomePage;  ```   
   
## \src\pages\LoginPage.jsx   
```javascript   
```   
   
## \src\pages\MapPage.jsx   
```javascript   
// src/pages/MapPage.jsx  
import React, { useState, useEffect, useCallback } from 'react';  
import { Link } from 'react-router-dom';
import MapView from '../components/map/MapView';
import { useGPSNoiseDetection } from '../utils/useGPSNoiseDetection';
import { isValidGPSReading } from '../utils/gpsFilter';
import { LogStorageService } from '../services/LogStorageService';

export const MapPage = () => {
  const [currentLocation, setCurrentLocation] = useState(null);
  const [locationHistory, setLocationHistory] = useState([]);
  const [savedLocations, setSavedLocations] = useState([]);
  const [isTracking, setIsTracking] = useState(false);
  const [error, setError] = useState(null);
  const [loading, setLoading] = useState(true);
  const [trackStartTime, setTrackStartTime] = useState(null);

  // استفاده از هوک تشخیص نویز  
  const {
    isJamming,
    isAccuracyLow,
    isSpeedUnrealistic,
    isPositionJumping,
    anomalyScore,
    noiseLevel
  } = useGPSNoiseDetection(locationHistory, currentLocation);

  // دریافت موقعیت فعلی  
  const getCurrentPosition = useCallback(() => {
    setLoading(true);
    setError(null);

    if (!navigator.geolocation) {
      setError('مرورگر شما از Geolocation پشتیبانی نمی‌کند');
      setLoading(false);
      return;
    }

    navigator.geolocation.getCurrentPosition(
      (position) => {
        console.log('موقعیت فعلی دریافت شد:', position);
        const { latitude, longitude, accuracy, altitude, heading, speed } = position.coords;
        const newLocation = {
          coords: {
            lat: latitude,
            lng: longitude,
            accuracy,
            altitude,
            heading,
            speed
          },
          timestamp: position.timestamp,
          id: Date.now()
        };

        // ذخیره لاگ در دیتابیس لوکال  
        LogStorageService.saveGPSLog(newLocation, false);

        setCurrentLocation(newLocation);
        setLoading(false);
      },
      (error) => {
        console.error('خطا در دریافت موقعیت:', error);
        let errorMessage = 'خطا در دریافت موقعیت';

        switch (error.code) {
          case error.PERMISSION_DENIED:
            errorMessage = 'دسترسی به موقعیت توسط کاربر رد شده است';
            break;
          case error.POSITION_UNAVAILABLE:
            errorMessage = 'اطلاعات موقعیت در دسترس نیست';
            break;
          case error.TIMEOUT:
            errorMessage = 'زمان درخواست موقعیت به پایان رسید';
            break;
          case error.UNKNOWN_ERROR:
            errorMessage = 'خطای ناشناخته در دریافت موقعیت';
            break;
        }

        setError(errorMessage);
        setLoading(false);
      },
      {
        enableHighAccuracy: true,
        timeout: 10000,
        maximumAge: 0
      }
    );
  }, []);

  // شروع ردیابی مداوم  
  const startTracking = useCallback(() => {
    setIsTracking(true);
    setTrackStartTime(Date.now());

    if (!navigator.geolocation) {
      setError('مرورگر شما از Geolocation پشتیبانی نمی‌کند');
      return;
    }

    // دریافت موقعیت اولیه  
    getCurrentPosition();

    // شروع ردیابی مداوم  
    const watchId = navigator.geolocation.watchPosition(
      (position) => {
        console.log('دریافت موقعیت جدید از watchPosition:', position);
        const { latitude, longitude, accuracy, altitude, heading, speed } = position.coords;
        const newLocation = {
          coords: {
            lat: latitude,
            lng: longitude,
            accuracy,
            altitude,
            heading,
            speed
          },
          timestamp: position.timestamp,
          id: Date.now()
        };

        setCurrentLocation(prevLocation => {
          // تشخیص نویز  
          const isNoisy = prevLocation && !isValidGPSReading(newLocation, prevLocation);

          // ذخیره لاگ در دیتابیس لوکال  
          LogStorageService.saveGPSLog(newLocation, isNoisy);

          // فیلتر کردن داده‌های نویزی (اختیاری)  
          if (!isNoisy) {
            // اضافه کردن به تاریخچه فقط اگر معتبر باشد  
            setLocationHistory(prevHistory => {
              const newHistory = [...prevHistory, newLocation];
              console.log('نقطه جدید به تاریخچه اضافه شد. تعداد نقاط:', newHistory.length);
              return newHistory;
            });
          } else {
            console.log('داده GPS نویزی فیلتر شد و به تاریخچه اضافه نشد');
          }

          // همیشه موقعیت فعلی را به‌روز می‌کنیم، حتی اگر به تاریخچه اضافه نشود  
          return newLocation;
        });

        setError(null);
      },
      (error) => {
        console.error('خطا در ردیابی موقعیت:', error);
        let errorMessage = 'خطا در ردیابی موقعیت';

        switch (error.code) {
          case error.PERMISSION_DENIED:
            errorMessage = 'دسترسی به موقعیت توسط کاربر رد شده است';
            break;
          case error.POSITION_UNAVAILABLE:
            errorMessage = 'اطلاعات موقعیت در دسترس نیست';
            break;
          case error.TIMEOUT:
            errorMessage = 'زمان درخواست موقعیت به پایان رسید';
            break;
          case error.UNKNOWN_ERROR:
            errorMessage = 'خطای ناشناخته در دریافت موقعیت';
            break;
        }

        setError(errorMessage);
      },
      {
        enableHighAccuracy: true,
        timeout: 10000,
        maximumAge: 0
      }
    );

    // ذخیره ID مربوط به watchPosition برای پاکسازی بعدی  
    window.geolocationWatchId = watchId;
  }, [getCurrentPosition]);

  // توقف ردیابی  
  const stopTracking = useCallback(() => {
    setIsTracking(false);

    if (window.geolocationWatchId !== undefined && navigator.geolocation) {
      navigator.geolocation.clearWatch(window.geolocationWatchId);
      window.geolocationWatchId = undefined;
      console.log('ردیابی GPS متوقف شد');

      // ذخیره تاریخچه مسیر در پایان ردیابی  
      if (trackStartTime && locationHistory.length > 0) {
        const endTime = Date.now();
        const trackName = prompt('نام این مسیر را وارد کنید:', `مسیر ${new Date().toLocaleDateString('fa-IR')}`);

        LogStorageService.saveTrackLog(
          locationHistory,
          trackStartTime,
          endTime,
          {
            name: trackName || `مسیر ${new Date().toLocaleDateString('fa-IR')}`,
            noiseScore: anomalyScore,
            quality: noiseLevel,
            length: locationHistory.length
          }
        );

        console.log('مسیر ذخیره شد');
      }
    }
  }, [locationHistory, trackStartTime, anomalyScore, noiseLevel]);

  // تغییر وضعیت ردیابی  
  const toggleTracking = useCallback(() => {
    if (isTracking) {
      stopTracking();
    } else {
      startTracking();
    }
  }, [isTracking, stopTracking, startTracking]);

  // ذخیره موقعیت فعلی  
  const saveCurrentLocation = useCallback(() => {
    if (currentLocation) {
      const locationName = prompt('نام این مکان را وارد کنید:', 'مکان جدید');

      if (locationName) {
        const savedLocation = {
          ...currentLocation,
          name: locationName,
          id: Date.now()
        };

        setSavedLocations(prevLocations => [...prevLocations, savedLocation]);
        alert(`موقعیت "${locationName}" با موفقیت ذخیره شد.`);
      }
    } else {
      alert('موقعیتی برای ذخیره وجود ندارد.');
    }
  }, [currentLocation]);

  // اشتراک‌گذاری موقعیت فعلی  
  const shareCurrentLocation = useCallback(() => {
    if (!currentLocation) {
      alert('موقعیتی برای اشتراک‌گذاری وجود ندارد.');
      return;
    }

    const { lat, lng } = currentLocation.coords;
    const googleMapsUrl = `https://maps.google.com/maps?q=${lat},${lng}`;

    if (navigator.share) {
      navigator.share({
        title: 'موقعیت من',
        text: `موقعیت من: ${lat}, ${lng}`,
        url: googleMapsUrl
      })
        .then(() => console.log('موقعیت با موفقیت به اشتراک گذاشته شد'))
        .catch((error) => console.error('خطا در اشتراک‌گذاری:', error));
    } else {
      // کپی لینک در کلیپ‌بورد  
      const textarea = document.createElement('textarea');
      textarea.value = googleMapsUrl;
      document.body.appendChild(textarea);
      textarea.select();
      document.execCommand('copy');
      document.body.removeChild(textarea);

      alert(`لینک موقعیت در کلیپ‌بورد کپی شد: ${googleMapsUrl}`);
    }
  }, [currentLocation]);

  // پاک کردن تاریخچه مسیر  
  const clearTrackHistory = useCallback(() => {
    if (locationHistory.length > 0) {
      if (window.confirm('آیا مطمئن هستید که می‌خواهید تاریخچه مسیر را پاک کنید؟')) {
        setLocationHistory([]);
        console.log('تاریخچه مسیر پاک شد');
      }
    } else {
      alert('تاریخچه مسیری برای پاک کردن وجود ندارد.');
    }
  }, [locationHistory.length]);

  // دریافت موقعیت اولیه هنگام بارگذاری صفحه  
  useEffect(() => {
    console.log('MapPage mounted - دریافت موقعیت اولیه');
    getCurrentPosition();

    return () => {
      // پاکسازی  
      if (window.geolocationWatchId !== undefined && navigator.geolocation) {
        navigator.geolocation.clearWatch(window.geolocationWatchId);
        console.log('ردیابی GPS پاکسازی شد (unmount)');
      }
    };
  }, [getCurrentPosition]);

  // نمایش اطلاعات نویز GPS در کنسول برای دیباگ  
  useEffect(() => {
    if (isJamming) {
      console.log('هشدار: احتمال اختلال در سیگنال GPS', {
        score: anomalyScore,
        isAccuracyLow,
        isSpeedUnrealistic,
        isPositionJumping
      });
    }
  }, [isJamming, anomalyScore, isAccuracyLow, isSpeedUnrealistic, isPositionJumping]);

  return (
    <div className="map-fullpage">
      {/* نوار ابزار بالای نقشه - روی نقشه قرار می‌گیرد */}
      <div className="map-toolbar">
        <Link to="/" className="back-button">
          <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" strokeWidth="2" fill="none">
            <path d="M15 18l-6-6 6-6" />
          </svg>
          <span>بازگشت</span>
        </Link>

        {/* نشانگر کیفیت سیگنال در نوار بالا */}
        <div className={`signal-quality-pill ${anomalyScore < 20 ? 'good' :
            anomalyScore < 50 ? 'medium' : 'poor'
          }`}>
          <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" strokeWidth="2">
            <path d="M2 12 L12 2 L22 12"></path>
            <path d="M5 15 L12 8 L19 15"></path>
            <path d="M8 18 L12 14 L16 18"></path>
          </svg>
          <span>GPS: {
            noiseLevel === 'کم' ? 'خوب' :
              noiseLevel === 'متوسط' ? 'متوسط' : 'ضعیف'
          }</span>
        </div>

        <button
          className={`tracking-button ${isTracking ? 'active' : ''}`}
          onClick={toggleTracking}
        >
          <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" strokeWidth="2" fill="none">
            {isTracking ? (
              <path d="M10 9v6l5-3-5-3z M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            ) : (
              <path d="M12 8v4l3 3-1.5 1.5L9 12V8h3z M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            )}
          </svg>
          <span>{isTracking ? 'توقف ردیابی' : 'شروع ردیابی'}</span>
        </button>
      </div>

      {/* نقشه اصلی */}
      <MapView
        currentLocation={currentLocation}
        locationHistory={locationHistory}
        savedLocations={savedLocations}
        followUser={true}
        initialZoom={15}
      />

      {/* نوار ابزار پایین نقشه */}
      <div className="map-bottom-toolbar">
        <button
          className="action-button save-button"
          onClick={saveCurrentLocation}
          disabled={!currentLocation || isJamming}
        >
          <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" strokeWidth="2">
            <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"></path>
            <polyline points="17 21 17 13 7 13 7 21"></polyline>
            <polyline points="7 3 7 8 15 8"></polyline>
          </svg>
          <span>ذخیره موقعیت</span>
        </button>

        <button
          className="action-button share-button"
          onClick={shareCurrentLocation}
          disabled={!currentLocation}
        >
          <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" strokeWidth="2">
            <circle cx="18" cy="5" r="3"></circle>
            <circle cx="6" cy="12" r="3"></circle>
            <circle cx="18" cy="19" r="3"></circle>
            <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
            <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
          </svg>
          <span>اشتراک‌گذاری</span>
        </button>

        <button
          className="action-button map-clear-button" // تغییر از clear-button به map-clear-button  
          onClick={clearTrackHistory}
          disabled={locationHistory.length === 0}
        >
          <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" strokeWidth="2">
            <polyline points="3 6 5 6 21 6"></polyline>
            <path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"></path>
          </svg>
          <span>پاک کردن مسیر</span>
        </button>

        {/*        <Link to="/settings" className="action-button settings-button">
          <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" strokeWidth="2">  
            <circle cx="12" cy="12" r="3"></circle>  
            <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"></path>  
          </svg>  
          <span>تنظیمات</span>  
        </Link>  */}
      </div>
      {/* سیستم نمایش هشدارها و خطاها */}
      <div className="alerts-container">
        {isJamming && (
          <div className="alert-toast warning-alert">
            <div className="alert-icon">
              <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"></path>
                <line x1="12" y1="9" x2="12" y2="13"></line>
                <line x1="12" y1="17" x2="12.01" y2="17"></line>
              </svg>
            </div>
            <div className="alert-content">
              <div className="alert-title">احتمال اختلال GPS</div>
              <div className="alert-details">
                {isPositionJumping && <span>پرش موقعیت</span>}
                {isSpeedUnrealistic && <span>سرعت غیرعادی</span>}
                {isAccuracyLow && <span>دقت پایین</span>}
              </div>
            </div>
            <button className="alert-close" onClick={() => {/* اینجا می‌توانید اختیاری هشدار را بی‌صدا کنید */ }}>
              <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
              </svg>
            </button>
          </div>
        )}

        {error && (
          <div className="alert-toast error-alert">
            <div className="alert-icon">
              <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="15" y1="9" x2="9" y2="15"></line>
                <line x1="9" y1="9" x2="15" y2="15"></line>
              </svg>
            </div>
            <div className="alert-content">
              <div className="alert-title">خطا</div>
              <div className="alert-message">{error}</div>
            </div>
            <button className="alert-close" onClick={() => setError(null)}>
              <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
              </svg>
            </button>
          </div>
        )}

        {loading && !currentLocation && (
          <div className="alert-toast info-alert">
            <div className="alert-icon spinning">
              <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M12 6v6l4 2"></path>
              </svg>
            </div>
            <div className="alert-content">
              <div className="alert-message">در حال یافتن موقعیت شما...</div>
            </div>
          </div>
        )}
      </div>
    </div>
  );
};

export default MapPage;  ```   
   
## \src\pages\NotFoundPage.jsx   
```javascript   
import React from 'react';  
import { Link } from 'react-router-dom';  

export const NotFoundPage = () => {  
  return (  
    <div className="not-found-page">  
      <h1>404</h1>  
      <h2>صفحه مورد نظر یافت نشد</h2>  
      <p>متاسفانه صفحه‌ای که به دنبال آن هستید وجود ندارد.</p>  
      <Link to="/" className="btn btn-primary">  
        بازگشت به صفحه اصلی  
      </Link>  
    </div>  
  );  
};  

// سطر زیر اضافه نشود - به جای آن از { NotFoundPage } در import استفاده شود  
// export default NotFoundPage;  ```   
   
## \src\pages\QRScanPage.jsx   
```javascript   
import React, { useState } from 'react';  
// فعلاً QRScanner را import نمی‌کنیم تا مشکل آن جداگانه حل شود  
// import QRScanner from '../components/map/QRScanner';  

export const QRScanPage = () => {  
  const [isScanning, setIsScanning] = useState(false);  
  const [scanResult, setScanResult] = useState(null);  
  const [scanError, setScanError] = useState(null);  

  const handleStartScan = () => {  
    setIsScanning(true);  
    setScanError(null);  
    setScanResult(null);  
    
    // این بخش بعداً به کامپوننت QRScanner متصل می‌شود  
    console.log("شروع اسکن QR...");  
  };  
  
  const handleScanSuccess = (result) => {  
    console.log("QR اسکن شد:", result);  
    setIsScanning(false);  
    setScanResult({  
      qrData: result,  
      location: { coords: { lat: 35.6892, lng: 51.3890 } }, // مقدار نمونه  
      timestamp: new Date().toISOString()  
    });  
  };  
  
  const handleScanError = (error) => {  
    console.error("خطای اسکن:", error);  
    setScanError(`خطا در اسکن: ${error?.message || 'خطای ناشناخته'}`);  
    setIsScanning(false);  
  };  

  return (  
    <div className="qr-scan-page">  
      <h2>اسکن QR Code</h2>  
      
      {scanError && (  
        <div className="error-container">  
          <p className="error-message">{scanError}</p>  
          <button onClick={handleStartScan} className="btn btn-primary">تلاش مجدد</button>  
        </div>  
      )}  
      
      {!isScanning && !scanResult && !scanError && (  
        <div className="start-scan-container">  
          <p>برای اسکن QR Code مربوط به موقعیت، دکمه زیر را فشار دهید.</p>  
          <button onClick={handleStartScan} className="btn btn-primary">شروع اسکن QR</button>  
        </div>  
      )}  
      
      {isScanning && (  
        <div className="scanner-container">  
          <p className="scan-instruction">QR Code را مقابل دوربین قرار دهید</p>  
          
          {/* فعلاً کامپوننت QRScanner را کامنت می‌کنیم */}  
          {/* <QRScanner   
            onSuccess={handleScanSuccess}  
            onError={handleScanError}  
          /> */}  
          
          <div className="scanner-placeholder">  
            <p>اسکنر QR کد...</p>  
            <button onClick={() => handleScanSuccess("https://example.com/location/12345")}>  
              شبیه‌سازی اسکن موفق  
            </button>  
            <button onClick={() => handleScanError(new Error("دسترسی به دوربین مقدور نیست"))}>  
              شبیه‌سازی خطا  
            </button>  
          </div>  
        </div>  
      )}  
      
      {scanResult && (  
        <div className="scan-result-container">  
          <h3>QR Code با موفقیت اسکن شد</h3>  
          <div className="result-data">  
            <p className="qr-data">{scanResult.qrData}</p>  
            {scanResult.location && (  
              <div className="location-data">  
                <p>موقعیت اسکن:</p>  
                <p>عرض جغرافیایی: {scanResult.location.coords.lat.toFixed(6)}</p>  
                <p>طول جغرافیایی: {scanResult.location.coords.lng.toFixed(6)}</p>  
              </div>  
            )}  
            <p className="scan-time">  
              زمان اسکن: {new Date(scanResult.timestamp).toLocaleString('fa-IR')}  
            </p>  
          </div>  
          
          <div className="action-buttons">  
            <button className="btn btn-primary">  
              نمایش روی نقشه  
            </button>  
            <button onClick={handleStartScan} className="btn btn-secondary">  
              اسکن دوباره  
            </button>  
          </div>  
        </div>  
      )}  
    </div>  
  );  
};  

// سطر زیر اضافه نشود - به جای آن از { QRScanPage } در import استفاده شود  
// export default QRScanPage;  ```   
   
## \src\pages\SettingsPage.jsx   
```javascript   
// src/pages/SettingsPage.jsx  
import React, { useState, useEffect } from 'react';
import { Link } from 'react-router-dom';
import { LogStorageService } from '../services/LogStorageService';
import './SettingsPage.css';

const SettingsPage = () => {
  const [logCounts, setLogCounts] = useState({ gpsLogs: 0, trackLogs: 0 });
  const [storageSize, setStorageSize] = useState({ gpsLogsSize: 0, trackLogsSize: 0, totalSize: 0 });
  const [isLoading, setIsLoading] = useState(true);
  const [isExporting, setIsExporting] = useState(false);
  const [message, setMessage] = useState('');

  // دریافت آمار لاگ‌ها  
  useEffect(() => {
    async function fetchLogStats() {
      try {
        setIsLoading(true);
        const counts = await LogStorageService.getLogCounts();
        const size = await LogStorageService.estimateStorageSize();

        setLogCounts(counts);
        setStorageSize(size);
        setIsLoading(false);
      } catch (error) {
        console.error('خطا در دریافت آمار لاگ‌ها:', error);
        setMessage('خطا در دریافت آمار لاگ‌ها');
        setIsLoading(false);
      }
    }

    fetchLogStats();
  }, []);

  // تبدیل بایت به نمایش انسانی  
  const formatSize = (bytes) => {
    if (bytes === 0) return '0 بایت';

    const k = 1024;
    const sizes = ['بایت', 'کیلوبایت', 'مگابایت', 'گیگابایت'];
    const i = Math.floor(Math.log(bytes) / Math.log(k));

    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
  };

  // خروجی‌گیری لاگ‌های GPS به صورت JSON  
  const exportGPSLogsAsJSON = async () => {
    try {
      setIsExporting(true);
      setMessage('در حال خروجی‌گیری از لاگ‌های GPS...');

      const json = await LogStorageService.exportGPSLogsAsJSON();
      LogStorageService.downloadFile(json, `gps_logs_${new Date().toISOString()}.json`, 'application/json');

      setMessage('خروجی‌گیری با موفقیت انجام شد');
      setIsExporting(false);
    } catch (error) {
      console.error('خطا در خروجی‌گیری لاگ‌های GPS:', error);
      setMessage('خطا در خروجی‌گیری لاگ‌های GPS');
      setIsExporting(false);
    }
  };

  // خروجی‌گیری لاگ‌های GPS به صورت CSV  
  const exportGPSLogsAsCSV = async () => {
    try {
      setIsExporting(true);
      setMessage('در حال خروجی‌گیری از لاگ‌های GPS...');

      const csv = await LogStorageService.exportGPSLogsAsCSV();
      LogStorageService.downloadFile(csv, `gps_logs_${new Date().toISOString()}.csv`, 'text/csv');

      setMessage('خروجی‌گیری با موفقیت انجام شد');
      setIsExporting(false);
    } catch (error) {
      console.error('خطا در خروجی‌گیری لاگ‌های GPS:', error);
      setMessage('خطا در خروجی‌گیری لاگ‌های GPS');
      setIsExporting(false);
    }
  };

  // خروجی‌گیری مسیرها به صورت GeoJSON  
  const exportTracksAsGeoJSON = async () => {
    try {
      setIsExporting(true);
      setMessage('در حال خروجی‌گیری از مسیرها...');

      const geoJSON = await LogStorageService.exportTrackLogsAsGeoJSON();
      LogStorageService.downloadFile(geoJSON, `tracks_${new Date().toISOString()}.geojson`, 'application/geo+json');

      setMessage('خروجی‌گیری با موفقیت انجام شد');
      setIsExporting(false);
    } catch (error) {
      console.error('خطا در خروجی‌گیری مسیرها:', error);
      setMessage('خطا در خروجی‌گیری مسیرها');
      setIsExporting(false);
    }
  };

  // پاک کردن لاگ‌های GPS  
  const clearGPSLogs = async () => {
    try {
      if (window.confirm('آیا مطمئن هستید که می‌خواهید همه لاگ‌های GPS را پاک کنید؟ این عمل غیرقابل بازگشت است.')) {
        setIsLoading(true);
        setMessage('در حال پاک کردن لاگ‌های GPS...');

        await LogStorageService.clearGPSLogs();

        // به‌روزرسانی آمار  
        const counts = await LogStorageService.getLogCounts();
        const size = await LogStorageService.estimateStorageSize();

        setLogCounts(counts);
        setStorageSize(size);
        setMessage('لاگ‌های GPS با موفقیت پاک شدند');
        setIsLoading(false);
      }
    } catch (error) {
      console.error('خطا در پاک کردن لاگ‌های GPS:', error);
      setMessage('خطا در پاک کردن لاگ‌های GPS');
      setIsLoading(false);
    }
  };

  // پاک کردن لاگ‌های مسیر  
  const clearTrackLogs = async () => {
    try {
      if (window.confirm('آیا مطمئن هستید که می‌خواهید همه لاگ‌های مسیر را پاک کنید؟ این عمل غیرقابل بازگشت است.')) {
        setIsLoading(true);
        setMessage('در حال پاک کردن لاگ‌های مسیر...');

        await LogStorageService.clearTrackLogs();

        // به‌روزرسانی آمار  
        const counts = await LogStorageService.getLogCounts();
        const size = await LogStorageService.estimateStorageSize();

        setLogCounts(counts);
        setStorageSize(size);
        setMessage('لاگ‌های مسیر با موفقیت پاک شدند');
        setIsLoading(false);
      }
    } catch (error) {
      console.error('خطا در پاک کردن لاگ‌های مسیر:', error);
      setMessage('خطا در پاک کردن لاگ‌های مسیر');
      setIsLoading(false);
    }
  };

  return (
    <div className="settings-page">
      <div className="settings-header">
        <Link to="/" className="back-button">
          <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" strokeWidth="2" fill="none">
            <path d="M19 12H5M12 19l-7-7 7-7" />
          </svg>
          <span>بازگشت</span>
        </Link>
        <h1>تنظیمات</h1>
      </div>

      <div className="settings-content">
        <section className="setting-section logs-section">
          <h2>مدیریت لاگ‌ها</h2>

          {isLoading ? (
            <div className="loading">در حال بارگذاری آمار لاگ‌ها...</div>
          ) : (
            <div className="logs-stats">
              <div className="stat-item">
                <span>تعداد لاگ‌های GPS:</span>
                <span className="stat-value">{logCounts.gpsLogs.toLocaleString('fa-IR')}</span>
              </div>
              <div className="stat-item">
                <span>تعداد مسیرهای ذخیره شده:</span>
                <span className="stat-value">{logCounts.trackLogs.toLocaleString('fa-IR')}</span>
              </div>
              <div className="stat-item">
                <span>حجم تقریبی لاگ‌های GPS:</span>
                <span className="stat-value">{formatSize(storageSize.gpsLogsSize)}</span>
              </div>
              <div className="stat-item">
                <span>حجم تقریبی مسیرها:</span>
                <span className="stat-value">{formatSize(storageSize.trackLogsSize)}</span>
              </div>
              <div className="stat-item total-size">
                <span>حجم کل:</span>
                <span className="stat-value">{formatSize(storageSize.totalSize)}</span>
              </div>
            </div>
          )}

          <div className="export-section">
            <h3>خروجی‌گیری از لاگ‌ها</h3>
            <div className="button-group">
              <button
                className="export-button"
                onClick={exportGPSLogsAsJSON}
                disabled={isExporting || logCounts.gpsLogs === 0}
              >
                <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" strokeWidth="2">
                  <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"></path>
                </svg>
                خروجی JSON لاگ‌های GPS
              </button>

              <button
                className="export-button"
                onClick={exportGPSLogsAsCSV}
                disabled={isExporting || logCounts.gpsLogs === 0}
              >
                <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" strokeWidth="2">
                  <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"></path>
                </svg>
                خروجی CSV لاگ‌های GPS
              </button>

              <button
                className="export-button"
                onClick={exportTracksAsGeoJSON}
                disabled={isExporting || logCounts.trackLogs === 0}
              >
                <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" strokeWidth="2">
                  <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"></path>
                </svg>
                خروجی GeoJSON مسیرها
              </button>
            </div>
          </div>

          <div className="clear-section">
            <h3>پاک کردن لاگ‌ها</h3>
            <div className="button-group">
              <button
                className="settings-clear-button danger" // تغییر از clear-button به settings-clear-button  
                onClick={clearGPSLogs}
                disabled={isLoading || logCounts.gpsLogs === 0}
              >
                <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" strokeWidth="2">
                  <polyline points="3 6 5 6 21 6"></polyline>
                  <path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"></path>
                </svg>
                پاک کردن لاگ‌های GPS
              </button>

              <button
                className="settings-clear-button danger" // تغییر از clear-button به settings-clear-button  
                onClick={clearTrackLogs}
                disabled={isLoading || logCounts.trackLogs === 0}
              >
                <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" strokeWidth="2">
                  <polyline points="3 6 5 6 21 6"></polyline>
                  <path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"></path>
                </svg>
                پاک کردن مسیرها
              </button>
            </div>
          </div>

          {message && (
            <div className={`message ${message.includes('خطا') ? 'error' : 'success'}`}>
              {message}
            </div>
          )}
        </section>

        <section className="setting-section about-section">
          <h2>درباره برنامه</h2>
          <p>
            این برنامه برای ردیابی موقعیت GPS و تشخیص اختلال در سیگنال طراحی شده است.
            کلیه داده‌ها به صورت محلی در دستگاه شما ذخیره می‌شوند و هیچ اطلاعاتی به سرور ارسال نمی‌شود.
          </p>
          <p>
            نسخه: 1.0.0
          </p>
        </section>
      </div>
    </div>
  );
};

//export default SettingsPage; 
export { SettingsPage };  ```   
   
## \src\pages\SettingsPage.css   
```javascript   
/* src/pages/SettingsPage.css */  
.settings-page {  
  display: flex;  
  flex-direction: column;  
  max-width: 100%;  
  height: 100vh;  
  padding: 0;  
  margin: 0;  
  font-family: 'Vazirmatn', sans-serif;  
  background-color: #f5f5f5;  
  direction: rtl;  
}  

.settings-header {  
  display: flex;  
  align-items: center;  
  padding: 1rem;  
  background-color: #ffffff;  
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);  
  position: sticky;  
  top: 0;  
  z-index: 100;  
}  

.settings-header h1 {  
  margin: 0 1rem;  
  font-size: 1.25rem;  
  font-weight: 600;  
}  

.back-button {  
  display: flex;  
  align-items: center;  
  text-decoration: none;  
  color: #333;  
  font-size: 0.9rem;  
}  

.back-button svg {  
  margin-left: 0.25rem;  
}  

.settings-content {  
  padding: 1rem;  
  flex: 1;  
  overflow-y: auto;  
}  

.setting-section {  
  background-color: #ffffff;  
  border-radius: 8px;  
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);  
  padding: 1rem;  
  margin-bottom: 1rem;  
}  

.setting-section h2 {  
  margin-top: 0;  
  margin-bottom: 1rem;  
  font-size: 1.1rem;  
  color: #333;  
  border-bottom: 1px solid #eee;  
  padding-bottom: 0.5rem;  
}  

.setting-section h3 {  
  font-size: 1rem;  
  margin: 1rem 0 0.5rem;  
  color: #444;  
}  

.logs-stats {  
  display: flex;  
  flex-direction: column;  
  gap: 0.75rem;  
  margin-bottom: 1.5rem;  
}  

.stat-item {  
  display: flex;  
  justify-content: space-between;  
  padding: 0.25rem 0;  
}  

.stat-value {  
  font-weight: 600;  
  color: #333;  
}  

.total-size {  
  margin-top: 0.5rem;  
  padding-top: 0.5rem;  
  border-top: 1px dashed #eee;  
}  

.button-group {  
  display: flex;  
  flex-direction: column;  
  gap: 0.75rem;  
  margin: 0.75rem 0;  
}  

.export-button, .settings-clear-button {  
  display: flex;  
  align-items: center;  
  justify-content: center;  
  gap: 0.5rem;  
  padding: 0.75rem;  
  border-radius: 4px;  
  font-family: 'Vazirmatn', sans-serif;  
  font-size: 0.9rem;  
  cursor: pointer;  
  transition: all 0.2s ease;  
  border: none;  
  background-color: #f5f5f5;  
}  

.export-button svg, .settings-clear-button svg {  
  width: 16px;  
  height: 16px;  
}  

.export-button:hover {  
  background-color: #e0e0e0;  
}  

.export-button:disabled, .settings-clear-button:disabled {  
  opacity: 0.5;  
  cursor: not-allowed;  
}  

.danger {  
  background-color: #fff0f0;  
  color: #e53935;  
}  

.danger:hover {  
  background-color: #ffcdd2;  
}  

.message {  
  margin-top: 1rem;  
  padding: 0.75rem;  
  border-radius: 4px;  
  font-size: 0.9rem;  
  text-align: center;  
}  

.message.success {  
  background-color: #e8f5e9;  
  color: #2e7d32;  
}  

.message.error {  
  background-color: #ffebee;  
  color: #c62828;  
}  

.loading {  
  text-align: center;  
  padding: 1rem;  
  color: #757575;  
  font-size: 0.9rem;  
}  

.about-section p {  
  font-size: 0.9rem;  
  line-height: 1.5;  
  color: #555;  
}  

@media (min-width: 768px) {  
  .button-group {  
    flex-direction: row;  
    flex-wrap: wrap;  
  }  
  
  .export-button, .settings-clear-button {  
    flex: 1;  
    min-width: 200px;  
  }  
}  
```   
   
## \src\services\AdvancedDeadReckoningService.js   
```javascript   
// src/services/AdvancedDeadReckoningService.js  
import { KalmanFilter } from './KalmanFilter';
import { LowPassFilter } from '../utils/LowPassFilter';
import { HighPassFilter } from '../utils/HighPassFilter';
import { PeakDetector } from '../utils/PeakDetector';

/**  
 * سرویس Dead Reckoning پیشرفته با Sensor Fusion  
 * ترکیب داده‌های سنسورهای IMU (شتاب‌سنج، ژیروسکوپ، مگنتومتر) و GPS  
 * با استفاده از Extended Kalman Filter  
 */
class AdvancedDeadReckoningService {
    constructor() {
        // وضعیت سرویس  
        this.isActive = false;
        this.isCalibrating = false;
        this.calibrationStart = 0;
        this.calibrationDuration = 2000; // زمان کالیبراسیون به میلی‌ثانیه (2 ثانیه)  

        // فیلترها برای پردازش داده‌های سنسور  
        this.accelerometerLowPassFilter = new LowPassFilter(0.1); // آلفا کوچک‌تر = فیلترینگ قوی‌تر  
        this.gyroscopeLowPassFilter = new LowPassFilter(0.2);
        this.orientationLowPassFilter = new LowPassFilter(0.1);
        this.accelerometerHighPassFilter = new HighPassFilter(0.8); // آلفا بزرگ‌تر = فیلترینگ قوی‌تر  

        // تشخیص گام (Peak Detector)  
        this.peakDetector = new PeakDetector({
            threshold: 0.8,       // آستانه تشخیص پیک  
            minPeakDistance: 300, // حداقل فاصله زمانی بین پیک‌ها (میلی‌ثانیه)  
            windowSize: 10        // تعداد نمونه‌هایی که برای تشخیص پیک بررسی می‌شوند  
        });

        // مقادیر کالیبراسیون  
        this.accelerometerBias = { x: 0, y: 0, z: 0 };
        this.gyroscopeBias = { alpha: 0, beta: 0, gamma: 0 };
        this.magneticDeclination = 0; // انحراف مغناطیسی (بر حسب رادیان)  

        // موقعیت و مسیر  
        this.referencePosition = null; // نقطه مرجع GPS برای تبدیل مختصات نسبی به مطلق  
        this.currentPosition = { x: 0, y: 0, theta: 0 }; // موقعیت نسبی (متر) و جهت (رادیان)  
        this.path = []; // مسیر نسبی (x, y در متر)  
        this.geoPath = []; // مسیر جغرافیایی (lat, lng)  

        // شمارش گام و طول گام  
        this.stepCount = 0;
        this.strideLength = 0.75; // طول گام پیش‌فرض (متر)  

        // فیلتر کالمن برای Sensor Fusion  
        this.kalmanFilter = new KalmanFilter({
            stateSize: 6,         // [x, y, theta, v, w, stride]  
            measurementSize: 3,   // [x_gps, y_gps, heading]  
            controlSize: 2,       // [a_norm, omega]  
        });

        // متغیرهای زمانی  
        this.lastUpdateTime = 0;
        this.lastStepTime = 0;

        // ذخیره آخرین مقادیر سنسورها  
        this.lastAccelerometer = null;
        this.lastGyroscope = null;
        this.lastOrientation = null;
        this.lastGps = null;

        // متغیرهای کمکی  
        this._initialHeading = null; // جهت اولیه  
        this._accelNormHistory = []; // تاریخچه نُرم شتاب برای تشخیص گام  
        this._listeners = [];        // لیستنرها برای اطلاع‌رسانی تغییرات  

        // لاگ برای تحلیل و دیباگ  
        this._log = {
            timestamp: [],
            sensor: [],
            data: [],
            result: []
        };
    }

    /**  
     * فعال/غیرفعال کردن سرویس  
     * @param {Object} initialLatLng موقعیت GPS اولیه برای استفاده به عنوان نقطه مرجع  
     * @returns {boolean} وضعیت جدید (فعال یا غیرفعال)  
     */
    toggle(initialLatLng = null) {
        // وضعیت قبلی  
        const wasActive = this.isActive;
        // تغییر وضعیت  
        this.isActive = !wasActive;

        if (this.isActive) {
            // استارت سرویس  
            console.log('Starting Advanced Dead Reckoning Service');

            // ابتدا کالیبراسیون را فعال کنید  
            this.isCalibrating = true;
            this.calibrationStart = Date.now();

            // پاکسازی مقادیر قبلی  
            this.path = [];
            this.geoPath = [];
            this.stepCount = 0;
            this._accelNormHistory = [];
            this.lastUpdateTime = Date.now();
            this.lastStepTime = 0;

            // مقداردهی اولیه فیلتر کالمن  
            this.kalmanFilter.initialize({
                x: 0,
                y: 0,
                theta: this._initialHeading || 0,
                v: 0,
                w: 0,
                stride: this.strideLength,
                timestamp: Date.now()
            });

            // اگر موقعیت اولیه ارسال شده است، از آن استفاده کنید  
            if (initialLatLng &&
                initialLatLng.lat !== undefined &&
                initialLatLng.lng !== undefined &&
                !isNaN(initialLatLng.lat) &&
                !isNaN(initialLatLng.lng)) {

                console.log('Setting initial reference position:', initialLatLng);

                this.referencePosition = {
                    lat: initialLatLng.lat,
                    lng: initialLatLng.lng,
                    accuracy: initialLatLng.accuracy || 5.0,
                    timestamp: Date.now()
                };

                // ثبت نقطه اول در مسیر نسبی و جغرافیایی  
                this.path.push({ x: 0, y: 0, timestamp: Date.now() });
                this.geoPath.push({
                    lat: initialLatLng.lat,
                    lng: initialLatLng.lng,
                    timestamp: Date.now()
                });

                this.currentPosition = { x: 0, y: 0, theta: this._initialHeading || 0 };

                // اطلاع‌رسانی به لیستنرها  
                this._notify({
                    type: 'serviceStateChanged',
                    isActive: this.isActive,
                    isCalibrating: this.isCalibrating,
                    stepCount: this.stepCount,
                    kalmanState: this.kalmanFilter.getState(),
                    path: this.path,
                    geoPath: this.geoPath,
                    position: this.currentPosition,
                    geoPosition: {
                        lat: initialLatLng.lat,
                        lng: initialLatLng.lng,
                        heading: this._toDegrees(this.kalmanFilter.getState().theta)
                    }
                });
            } else {
                console.warn('No valid initial position provided. GPS will be used when available.');

                // اطلاع‌رسانی به لیستنرها بدون داده موقعیت  
                this._notify({
                    type: 'serviceStateChanged',
                    isActive: this.isActive,
                    isCalibrating: this.isCalibrating,
                    stepCount: this.stepCount,
                    kalmanState: this.kalmanFilter.getState(),
                    path: this.path,
                    geoPath: this.geoPath
                });
            }
        } else {
            // توقف سرویس  
            console.log('Stopping Advanced Dead Reckoning Service');

            // اطلاع‌رسانی به لیستنرها  
            this._notify({
                type: 'serviceStateChanged',
                isActive: this.isActive,
                isCalibrating: false,
                kalmanState: this.kalmanFilter.getState(),
                path: this.path,
                geoPath: this.geoPath
            });
        }

        return this.isActive;
    }
    /**  
     * بازنشانی سرویس و پاکسازی داده‌ها  
     */
    reset() {
        if (!this.isActive) return;

        console.log('Resetting Advanced Dead Reckoning Service');

        // پاکسازی مسیر و داده‌ها  
        this.path = [];
        this.geoPath = [];
        this.stepCount = 0;
        this._accelNormHistory = [];

        // مقداردهی مجدد موقعیت نسبی  
        this.currentPosition = { x: 0, y: 0, theta: 0 };

        // اگر موقعیت مرجع وجود دارد، اولین نقطه مسیر را دوباره ثبت کنید  
        if (this.referencePosition) {
            this.path.push({ x: 0, y: 0, timestamp: Date.now() });
            this.geoPath.push({
                lat: this.referencePosition.lat,
                lng: this.referencePosition.lng,
                timestamp: Date.now()
            });
        }

        // مقداردهی مجدد فیلتر کالمن  
        this.kalmanFilter.initialize({
            x: 0,
            y: 0,
            theta: this._initialHeading || 0,
            v: 0,
            w: 0,
            stride: this.strideLength,
            timestamp: Date.now()
        });

        // اطلاع‌رسانی به لیستنرها  
        this._notify({
            type: 'serviceReset',
            stepCount: this.stepCount,
            kalmanState: this.kalmanFilter.getState(),
            path: this.path,
            geoPath: this.geoPath
        });
    }

    /**  
     * تنظیم طول گام  
     * @param {number} strideLength طول گام جدید (متر)  
     */
    setStrideLength(strideLength) {
        if (strideLength > 0) {
            this.strideLength = strideLength;

            // در صورت فعال بودن، طول گام را در فیلتر کالمن نیز به‌روز کنید  
            if (this.isActive) {
                this.kalmanFilter.setStrideLength(strideLength);
            }

            // اطلاع‌رسانی به لیستنرها  
            this._notify({
                type: 'strideLengthChanged',
                strideLength: this.strideLength
            });
        }
    }

    /**  
     * پردازش داده‌های شتاب‌سنج  
     */
    processAccelerometerData(data, timestamp = Date.now()) {
        if (!this.isActive || !data) return;

        // بررسی معتبر بودن داده‌ها  
        if (data.x === undefined || data.y === undefined || data.z === undefined ||
            isNaN(data.x) || isNaN(data.y) || isNaN(data.z)) {
            console.warn('داده‌های نامعتبر شتاب‌سنج:', data);
            return;
        }

        // لاگ کردن داده‌ها  
        this._logSensorData('accelerometer', data, timestamp);

        // تنظیم محور‌ها براساس جهت نگهداری گوشی  
        // در اینجا فرض می‌کنیم که کاربر گوشی را عمودی (portrait) نگه می‌دارد  
        let ax = 0, ay = 0, az = 0;

        // بررسی نوع داده‌های شتاب‌سنج (با جاذبه یا بدون جاذبه)  
        if (data.includesGravity) {
            // داده شامل جاذبه است (accelerationIncludingGravity)  
            // در حالت portrait: x = راست/چپ, y = بالا/پایین, z = جلو/عقب  
            ax = data.x;
            ay = data.y;
            az = data.z;

            // اگر فیلتر پایین‌گذر فعال نیست، آن را فعال کنید  
            if (!this._lowPassFilter) {
                this._lowPassFilter = new LowPassFilter(0.1);
            }

            // حذف تقریبی جاذبه با فیلتر پایین‌گذر  
            const gravity = this._lowPassFilter.filter([ax, ay, az]);
            ax -= gravity[0];
            ay -= gravity[1];
            az -= gravity[2];
        } else {
            // داده بدون جاذبه (acceleration)  
            ax = data.x;
            ay = data.y;
            az = data.z;
        }

        // اگر فیلتر بالاگذر فعال نیست، آن را فعال کنید  
        if (!this._highPassFilter) {
            this._highPassFilter = new HighPassFilter(0.8);
        }

        // اعمال فیلتر بالاگذر برای حذف نویز و drift کم‌فرکانس  
        const filteredAcc = this._highPassFilter.filter([ax, ay, az]);
        ax = filteredAcc[0];
        ay = filteredAcc[1];
        az = filteredAcc[2];

        // محاسبه سیگنال نُرم شتاب  
        const accelNorm = Math.sqrt(ax * ax + ay * ay + az * az);

        // محافظت در برابر مقادیر نامعتبر  
        if (isNaN(accelNorm)) {
            console.warn('مقدار نامعتبر در نُرم شتاب:', { ax, ay, az, accelNorm });
            return;
        }

        // افزودن به تاریخچه نُرم شتاب  
        this._accelNormHistory.push({ value: accelNorm, timestamp });

        // حفظ فقط آخرین N نمونه شتاب  
        const historyWindow = 50; // حفظ 50 نمونه آخر  
        if (this._accelNormHistory.length > historyWindow) {
            this._accelNormHistory = this._accelNormHistory.slice(-historyWindow);
        }

        // آستانه‌های تشخیص گام  
        const minPeakHeight = 0.8;  // حداقل ارتفاع قله  
        const minTimeBetweenSteps = 250; // حداقل زمان بین گام‌ها (میلی‌ثانیه)  

        // فقط در صورتی که کالیبراسیون تمام شده است  
        if (!this.isCalibrating && this._accelNormHistory.length >= 10) {
            // بررسی برای تشخیص قله  
            if (this._isPeak(this._accelNormHistory, minPeakHeight)) {
                const currentTime = timestamp;
                // بررسی فاصله زمانی از آخرین گام  
                if (currentTime - this.lastStepTime > minTimeBetweenSteps) {
                    // یک گام جدید شناسایی شد  
                    this.stepCount++;
                    this.lastStepTime = currentTime;

                    // به‌روزرسانی فیلتر کالمن با ورودی تشخیص گام  
                    const dt = (currentTime - this.lastUpdateTime) / 1000.0;
                    this.lastUpdateTime = currentTime;

                    // ورودی کنترل: a_norm = 1 نشان‌دهنده تشخیص یک گام است  
                    const controlInput = {
                        a_norm: 1,
                        omega: this.lastGyro ? this.lastGyro.alpha * Math.PI / 180 : 0
                    };

                    // پیش‌بینی فیلتر کالمن  
                    this.kalmanFilter.predict(controlInput, currentTime);

                    // به‌روزرسانی موقعیت فعلی از فیلتر کالمن  
                    const kalmanState = this.kalmanFilter.getState();

                    // محافظت در برابر مقادیر نامعتبر  
                    if (isNaN(kalmanState.x) || isNaN(kalmanState.y) || isNaN(kalmanState.theta)) {
                        console.warn('مقادیر نامعتبر در وضعیت کالمن:', kalmanState);
                        return;
                    }

                    // ثبت موقعیت نسبی جدید  
                    this.currentPosition = {
                        x: kalmanState.x,
                        y: kalmanState.y,
                        theta: kalmanState.theta
                    };

                    // تبدیل موقعیت نسبی به مختصات جغرافیایی  
                    if (this.referencePosition) {
                        const currentGeoPosition = this._calculateNewLatLng(
                            this.referencePosition.lat,
                            this.referencePosition.lng,
                            this.currentPosition.x,
                            this.currentPosition.y
                        );

                        // محافظت در برابر مقادیر نامعتبر  
                        if (isNaN(currentGeoPosition.lat) || isNaN(currentGeoPosition.lng)) {
                            console.warn('مقادیر نامعتبر در موقعیت جغرافیایی:', currentGeoPosition);
                            return;
                        }

                        // افزودن نقطه به مسیر  
                        this.path.push({
                            x: this.currentPosition.x,
                            y: this.currentPosition.y,
                            timestamp: currentTime
                        });

                        this.geoPath.push({
                            lat: currentGeoPosition.lat,
                            lng: currentGeoPosition.lng,
                            timestamp: currentTime
                        });

                        // لاگ کردن اطلاعات گام  
                        console.log(`[Step ${this.stepCount}] Pos: (${this.currentPosition.x.toFixed(2)}, ${this.currentPosition.y.toFixed(2)}) GeoPos: (${currentGeoPosition.lat.toFixed(6)}, ${currentGeoPosition.lng.toFixed(6)})`);

                        // اطلاع‌رسانی به لیستنرها  
                        this._notify({
                            type: 'step',
                            stepCount: this.stepCount,
                            position: {
                                x: this.currentPosition.x,
                                y: this.currentPosition.y,
                                theta: this.currentPosition.theta
                            },
                            geoPosition: {
                                lat: currentGeoPosition.lat,
                                lng: currentGeoPosition.lng,
                                heading: this._toDegrees(this.currentPosition.theta)
                            },
                            kalmanState: this.kalmanFilter.getState(),
                            path: this.path,
                            geoPath: this.geoPath
                        });
                    }
                }
            }
        } else if (this.isCalibrating) {
            // در حالت کالیبراسیون داده‌ها را جمع‌آوری می‌کنیم  
            const calibrationTime = 2000; // زمان کالیبراسیون (میلی‌ثانیه)  

            if (Date.now() - this.calibrationStart > calibrationTime) {
                // کالیبراسیون کامل شد  
                this.isCalibrating = false;
                console.log('Calibration complete');

                // اطلاع‌رسانی به لیستنرها  
                this._notify({
                    type: 'calibrationComplete',
                    isCalibrating: false,
                    path: this.path,
                    geoPath: this.geoPath
                });
            }
        }
    }

    /**  
     * بررسی وجود قله در داده‌های شتاب  
     * @param {Array} history تاریخچه داده‌های نُرم شتاب  
     * @param {number} threshold آستانه ارتفاع قله  
     * @returns {boolean} آیا نقطه انتهایی یک قله است  
     */
    _isPeak(history, threshold) {
        if (history.length < 3) return false;

        // بررسی 3 نمونه آخر  
        const last = history[history.length - 1].value;
        const previous = history[history.length - 2].value;
        const beforePrevious = history[history.length - 3].value;

        // شرایط قله:  
        // 1. نقطه میانی باید از دو طرف بزرگتر باشد  
        // 2. نقطه میانی باید از آستانه بزرگتر باشد  
        return (previous > last && previous > beforePrevious && previous > threshold);
    }

    /**  
     * پردازش داده‌های ژیروسکوپ  
     * @param {Object} gyroscope داده‌های ژیروسکوپ {alpha, beta, gamma, timestamp}  
     * @param {number} timestamp زمان دریافت داده  
     */
    processGyroscopeData(gyroscope, timestamp = Date.now()) {
        if (!this.isActive) return;

        // لاگ داده‌های ورودی  
        this._logSensorData('gyroscope', gyroscope, timestamp);

        // فیلتر داده‌های ژیروسکوپ  
        const filteredGyro = this._filterGyroscopeData(gyroscope);

        // پردازش داده‌های سنسور برای به‌روزرسانی موقعیت  
        this._processSensorData({
            type: 'gyroscope',
            data: filteredGyro,
            timestamp: timestamp
        });

        // ذخیره آخرین داده‌های ژیروسکوپ  
        this.lastGyroscope = {
            ...filteredGyro,
            timestamp: timestamp
        };
    }

    /**  
     * پردازش داده‌های جهت (مگنتومتر)  
     * @param {Object} orientation داده‌های جهت {alpha, beta, gamma, timestamp}  
     * @param {number} timestamp زمان دریافت داده  
     */
    processOrientationData(orientation, timestamp = Date.now()) {
        if (!this.isActive) return;

        // لاگ داده‌های ورودی  
        this._logSensorData('orientation', orientation, timestamp);

        // فیلتر داده‌های جهت  
        const filteredOrientation = this._filterOrientationData(orientation);

        // تبدیل alpha از درجه به رادیان (0-360 به 0-2π)  
        const heading = (filteredOrientation.alpha * Math.PI) / 180;

        // ذخیره جهت اولیه اگر تنظیم نشده است  
        if (this._initialHeading === null && orientation.absolute) {
            this._initialHeading = heading;

            // تنظیم جهت اولیه در فیلتر کالمن اگر تازه مقداردهی شده است  
            if (this.kalmanFilter) {
                const state = this.kalmanFilter.getState();
                state.theta = heading;
                this.kalmanFilter.initialize(state);
            }
        }

        // پردازش داده‌های سنسور برای به‌روزرسانی موقعیت  
        this._processSensorData({
            type: 'orientation',
            data: {
                ...filteredOrientation,
                heading: heading
            },
            timestamp: timestamp
        });

        // ذخیره آخرین داده‌های جهت  
        this.lastOrientation = {
            ...filteredOrientation,
            heading: heading,
            timestamp: timestamp
        };
    }

    /**  
     * پردازش داده‌های GPS  
     * @param {Object} position موقعیت GPS {lat, lng}  
     * @param {number} accuracy دقت موقعیت (متر)  
     * @param {number} timestamp زمان دریافت داده  
     */
    processGpsData(position, accuracy = 5.0, timestamp = Date.now()) {
        if (!this.isActive) return;

        // لاگ داده‌های ورودی  
        this._logSensorData('gps', { ...position, accuracy }, timestamp);

        // اگر موقعیت مرجع تنظیم نشده است، آن را تنظیم کنید  
        if (!this.referencePosition) {
            console.log('Setting reference position from GPS:', position);

            this.referencePosition = {
                lat: position.lat,
                lng: position.lng,
                accuracy: accuracy,
                timestamp: timestamp
            };

            // ثبت نقطه اول در مسیر نسبی و جغرافیایی  
            this.path.push({ x: 0, y: 0, timestamp: timestamp });
            this.geoPath.push({ lat: position.lat, lng: position.lng, timestamp: timestamp });

            // مقداردهی مجدد موقعیت نسبی  
            this.currentPosition = { x: 0, y: 0, theta: this.currentPosition.theta };

            // اگر کالیبراسیون فعال است، آن را حفظ کنید  
            if (this.isCalibrating) {
                // تنظیم مجدد فیلتر کالمن با موقعیت اولیه  
                this.kalmanFilter.initialize({
                    x: 0,
                    y: 0,
                    theta: this._initialHeading || 0,
                    v: 0,
                    w: 0,
                    stride: this.strideLength,
                    timestamp: timestamp
                });
            }

            // اطلاع‌رسانی به لیستنرها  
            this._notify({
                type: 'referencePositionSet',
                referencePosition: this.referencePosition,
                kalmanState: this.kalmanFilter.getState(),
                path: this.path,
                geoPath: this.geoPath
            });

            return;
        }

        // تبدیل موقعیت GPS جدید به مختصات نسبی از نقطه مرجع  
        const relativePosition = this._calculateRelativePositionFromLatLng(
            this.referencePosition.lat,
            this.referencePosition.lng,
            position.lat,
            position.lng
        );

        // به‌روزرسانی فیلتر کالمن با اندازه‌گیری GPS جدید  
        this.kalmanFilter.update(
            {
                x_gps: relativePosition.x,
                y_gps: relativePosition.y,
                heading: this.lastOrientation ? this.lastOrientation.heading : undefined
            },
            {
                gps_accuracy: accuracy,
                heading_accuracy: this.lastOrientation ? 0.1 : undefined
            }
        );

        // گرفتن وضعیت به‌روز شده از فیلتر کالمن  
        const kalmanState = this.kalmanFilter.getState();

        // به‌روزرسانی موقعیت نسبی فعلی  
        this.currentPosition = {
            x: kalmanState.x,
            y: kalmanState.y,
            theta: kalmanState.theta
        };

        // تبدیل موقعیت نسبی فعلی به مختصات جغرافیایی  
        const currentGeoPosition = this._calculateNewLatLng(
            this.referencePosition.lat,
            this.referencePosition.lng,
            this.currentPosition.x,
            this.currentPosition.y
        );

        // افزودن به مسیر اگر فاصله کافی از آخرین نقطه دارد  
        if (this.path.length === 0 || this._calculateDistance(
            this.path[this.path.length - 1].x,
            this.path[this.path.length - 1].y,
            this.currentPosition.x,
            this.currentPosition.y
        ) > 0.5) { // حداقل 0.5 متر فاصله برای ثبت نقطه جدید در مسیر  
            this.path.push({
                x: this.currentPosition.x,
                y: this.currentPosition.y,
                timestamp: timestamp
            });

            this.geoPath.push({
                lat: currentGeoPosition.lat,
                lng: currentGeoPosition.lng,
                timestamp: timestamp
            });
        }

        // ذخیره آخرین داده‌های GPS  
        this.lastGps = {
            ...position,
            accuracy: accuracy,
            timestamp: timestamp
        };

        // اطلاع‌رسانی به لیستنرها  
        this._notify({
            type: 'positionUpdated',
            currentPosition: this.currentPosition,
            geoPosition: currentGeoPosition,
            kalmanState: kalmanState,
            path: this.path,
            geoPath: this.geoPath,
            source: 'gps'
        });
    }

    /**  
     * افزودن لیستنر برای دریافت تغییرات  
     * @param {Function} callback تابع اطلاع‌رسانی  
     * @returns {Function} تابع حذف لیستنر  
     */
    addListener(callback) {
        if (typeof callback === 'function') {
            this._listeners.push(callback);

            // ارسال وضعیت فعلی به لیستنر جدید  
            callback({
                type: 'initialState',
                isActive: this.isActive,
                isCalibrating: this.isCalibrating,
                stepCount: this.stepCount,
                strideLength: this.strideLength,
                kalmanState: this.kalmanFilter.getState(),
                path: this.path,
                geoPath: this.geoPath,
                referencePosition: this.referencePosition
            });

            // برگرداندن تابع حذف لیستنر  
            return () => {
                this._listeners = this._listeners.filter(listener => listener !== callback);
            };
        }

        return () => { }; // تابع خالی اگر callback معتبر نیست  
    }

    /**  
     * خروجی گرفتن از لاگ‌های ثبت شده  
     * @returns {Object} خروجی لاگ‌های ثبت شده  
     */
    exportLog() {
        const log = {
            timestamp: new Date().toISOString(),
            data: {
                sensorLog: this._log,
                path: this.path,
                geoPath: this.geoPath,
                stepCount: this.stepCount,
                strideLength: this.strideLength
            }
        };

        // ساخت یک بلاب برای دانلود  
        const blob = new Blob([JSON.stringify(log, null, 2)], { type: 'application/json' });
        const url = URL.createObjectURL(blob);

        // ایجاد لینک دانلود و کلیک خودکار  
        const a = document.createElement('a');
        a.href = url;
        a.download = `dead-reckoning-log-${new Date().toISOString().slice(0, 19).replace(/:/g, '-')}.json`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);

        console.log('Log exported:', log);
        return log;
    }

    /**  
* تبدیل موقعیت نسبی به مختصات جغرافیایی  
* @param {number} refLat عرض جغرافیایی نقطه مرجع  
* @param {number} refLng طول جغرافیایی نقطه مرجع  
* @param {number} x موقعیت نسبی x (متر)  
* @param {number} y موقعیت نسبی y (متر)  
* @returns {Object} مختصات جغرافیایی {lat, lng}  
*/
    _calculateNewLatLng(refLat, refLng, x, y) {
        // اطمینان از معتبر بودن مقادیر ورودی  
        if (isNaN(refLat) || isNaN(refLng) || isNaN(x) || isNaN(y)) {
            console.error('Invalid inputs in _calculateNewLatLng:', { refLat, refLng, x, y });
            return { lat: refLat || 0, lng: refLng || 0 }; // برگرداندن مقدار پیش‌فرض  
        }

        // شعاع زمین (متر)  
        const R = 6378137;

        // تبدیل درجه به رادیان  
        const lat1 = refLat * Math.PI / 180;
        const lng1 = refLng * Math.PI / 180;

        // محاسبه تغییر عرض و طول جغرافیایی  
        const dlat = y / R;
        const dlng = x / (R * Math.cos(lat1));

        // تبدیل رادیان به درجه و محاسبه مختصات جدید  
        const newLat = refLat + (dlat * 180 / Math.PI);
        const newLng = refLng + (dlng * 180 / Math.PI);

        // بررسی معتبر بودن نتایج  
        if (isNaN(newLat) || isNaN(newLng)) {
            console.error('Invalid result in _calculateNewLatLng:', { newLat, newLng, inputs: { refLat, refLng, x, y } });
            return { lat: refLat, lng: refLng }; // برگرداندن نقطه مرجع  
        }

        return { lat: newLat, lng: newLng };
    }

    /**  
     * تبدیل مختصات جغرافیایی به موقعیت نسبی  
     * @param {number} refLat عرض جغرافیایی نقطه مرجع  
     * @param {number} refLng طول جغرافیایی نقطه مرجع  
     * @param {number} lat عرض جغرافیایی نقطه جدید  
     * @param {number} lng طول جغرافیایی نقطه جدید  
     * @returns {Object} موقعیت نسبی {x, y} (متر)  
     */
    _calculateRelativePositionFromLatLng(refLat, refLng, lat, lng) {
        // شعاع زمین (متر)  
        const R = 6378137;

        // تبدیل درجه به رادیان  
        const lat1 = refLat * Math.PI / 180;
        const lng1 = refLng * Math.PI / 180;
        const lat2 = lat * Math.PI / 180;
        const lng2 = lng * Math.PI / 180;

        // محاسبه تغییر عرض و طول جغرافیایی  
        const dlat = lat2 - lat1;
        const dlng = lng2 - lng1;

        // محاسبه فاصله  
        const y = dlat * R;
        const x = dlng * R * Math.cos(lat1);

        return { x, y };
    }

    /**  
       /**  
 * محاسبه فاصله اقلیدسی بین دو نقطه  
 * @param {number} x1 مختصات x نقطه اول  
 * @param {number} y1 مختصات y نقطه اول  
 * @param {number} x2 مختصات x نقطه دوم  
 * @param {number} y2 مختصات y نقطه دوم  
 * @returns {number} فاصله (متر)  
 */
    _calculateDistance(x1, y1, x2, y2) {
        return Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));
    }

    /**  
     * فیلتر کردن داده‌های شتاب‌سنج  
     * @param {Object} accelerometer داده‌های شتاب‌سنج  
     * @returns {Object} داده‌های فیلتر شده  
     */
    _filterAccelerometerData(accelerometer) {
        // استفاده از فیلتر پایین‌گذر برای حذف نویز  
        const filteredX = this.accelerometerLowPassFilter.filter(accelerometer.x, 'x');
        const filteredY = this.accelerometerLowPassFilter.filter(accelerometer.y, 'y');
        const filteredZ = this.accelerometerLowPassFilter.filter(accelerometer.z, 'z');

        // اگر در حال کالیبراسیون هستیم، بایاس شتاب‌سنج را به‌روز کنید  
        if (this.isCalibrating) {
            const weight = 0.1; // وزن به‌روزرسانی بایاس (0 تا 1)  
            this.accelerometerBias.x = (1 - weight) * this.accelerometerBias.x + weight * filteredX;
            this.accelerometerBias.y = (1 - weight) * this.accelerometerBias.y + weight * filteredY;
            this.accelerometerBias.z = (1 - weight) * this.accelerometerBias.z + weight * filteredZ;
        }

        // حذف بایاس از داده‌های فیلتر شده  
        const correctedX = filteredX - this.accelerometerBias.x;
        const correctedY = filteredY - this.accelerometerBias.y;
        const correctedZ = filteredZ - this.accelerometerBias.z;

        // اگر شتاب شامل جاذبه است (accelerationIncludingGravity)، مقدار شتاب جاذبه را حذف کنید  
        if (accelerometer.includesGravity) {
            // استفاده از فیلتر بالاگذر برای حذف تقریبی شتاب جاذبه  
            const highPassX = this.accelerometerHighPassFilter.filter(correctedX, 'x');
            const highPassY = this.accelerometerHighPassFilter.filter(correctedY, 'y');
            const highPassZ = this.accelerometerHighPassFilter.filter(correctedZ, 'z');

            return {
                x: highPassX,
                y: highPassY,
                z: highPassZ
            };
        }

        return {
            x: correctedX,
            y: correctedY,
            z: correctedZ
        };
    }

    /**  
     * فیلتر کردن داده‌های ژیروسکوپ  
     * @param {Object} gyroscope داده‌های ژیروسکوپ  
     * @returns {Object} داده‌های فیلتر شده  
     */
    _filterGyroscopeData(gyroscope) {
        // استفاده از فیلتر پایین‌گذر برای حذف نویز  
        const filteredAlpha = this.gyroscopeLowPassFilter.filter(gyroscope.alpha, 'alpha');
        const filteredBeta = this.gyroscopeLowPassFilter.filter(gyroscope.beta, 'beta');
        const filteredGamma = this.gyroscopeLowPassFilter.filter(gyroscope.gamma, 'gamma');

        // اگر در حال کالیبراسیون هستیم، بایاس ژیروسکوپ را به‌روز کنید  
        if (this.isCalibrating) {
            const weight = 0.1; // وزن به‌روزرسانی بایاس (0 تا 1)  
            this.gyroscopeBias.alpha = (1 - weight) * this.gyroscopeBias.alpha + weight * filteredAlpha;
            this.gyroscopeBias.beta = (1 - weight) * this.gyroscopeBias.beta + weight * filteredBeta;
            this.gyroscopeBias.gamma = (1 - weight) * this.gyroscopeBias.gamma + weight * filteredGamma;
        }

        // حذف بایاس از داده‌های فیلتر شده  
        const correctedAlpha = filteredAlpha - this.gyroscopeBias.alpha;
        const correctedBeta = filteredBeta - this.gyroscopeBias.beta;
        const correctedGamma = filteredGamma - this.gyroscopeBias.gamma;

        // تبدیل از درجه به رادیان  
        const alphaDeg = correctedAlpha;
        const betaDeg = correctedBeta;
        const gammaDeg = correctedGamma;

        // سرعت‌های زاویه‌ای (رادیان بر ثانیه)  
        const alphaRad = (alphaDeg * Math.PI) / 180;
        const betaRad = (betaDeg * Math.PI) / 180;
        const gammaRad = (gammaDeg * Math.PI) / 180;

        return {
            alpha: alphaDeg,
            beta: betaDeg,
            gamma: gammaDeg,
            alphaRad: alphaRad,
            betaRad: betaRad,
            gammaRad: gammaRad
        };
    }

    /**  
     * فیلتر کردن داده‌های جهت  
     * @param {Object} orientation داده‌های جهت  
     * @returns {Object} داده‌های فیلتر شده  
     */
    _filterOrientationData(orientation) {
        // استفاده از فیلتر پایین‌گذر برای حذف نویز  
        const filteredAlpha = this.orientationLowPassFilter.filter(orientation.alpha, 'alpha');
        const filteredBeta = this.orientationLowPassFilter.filter(orientation.beta, 'beta');
        const filteredGamma = this.orientationLowPassFilter.filter(orientation.gamma, 'gamma');

        return {
            alpha: filteredAlpha,
            beta: filteredBeta,
            gamma: filteredGamma,
            absolute: orientation.absolute
        };
    }

    /**  
     * تشخیص گام با استفاده از الگوریتم تشخیص پیک  
     * @param {number} accelNorm نُرم شتاب  
     * @param {number} timestamp زمان دریافت داده  
     * @returns {boolean} آیا گام تشخیص داده شده است  
     */
    _detectStep(accelNorm, timestamp) {
        // اگر کالیبراسیون فعال است، گام تشخیص داده نشود  
        if (this.isCalibrating) return false;

        // تشخیص پیک با استفاده از کلاس PeakDetector  
        const peakDetected = this.peakDetector.addSample(accelNorm, timestamp);

        if (peakDetected) {
            // محاسبه فاصله زمانی از آخرین گام  
            const timeSinceLastStep = timestamp - this.lastStepTime;

            // بررسی شرایط مناسب برای تشخیص گام:  
            // 1. حداقل 250 میلی‌ثانیه از آخرین گام گذشته باشد (حداکثر 4 گام در ثانیه)  
            // 2. بزرگی شتاب بزرگتر از آستانه باشد  
            if (timeSinceLastStep > 250 && accelNorm > 0.8) {
                this.stepCount++;
                this.lastStepTime = timestamp;

                // اطلاع‌رسانی به لیستنرها  
                this._notify({
                    type: 'stepDetected',
                    stepCount: this.stepCount,
                    timestamp: timestamp
                });

                return true;
            }
        }

        return false;
    }

    /**  
     * پردازش داده‌های سنسور و به‌روزرسانی موقعیت  
     * @param {Object} data داده‌های پردازش شده  
     */
    _processSensorData(data) {
        // در ابتدا بررسی کنید آیا کالیبراسیون به اتمام رسیده است  
        if (this.isCalibrating) {
            const now = Date.now();
            if (now - this.calibrationStart > this.calibrationDuration) {
                console.log('Calibration complete. Biases:', {
                    accelerometer: this.accelerometerBias,
                    gyroscope: this.gyroscopeBias
                });

                this.isCalibrating = false;

                // اطلاع‌رسانی به لیستنرها  
                this._notify({
                    type: 'calibrationComplete',
                    isCalibrating: false,
                    accelerometerBias: this.accelerometerBias,
                    gyroscopeBias: this.gyroscopeBias
                });
            }
            return; // در طول کالیبراسیون، موقعیت به‌روز نشود  
        }

        // محاسبه فاصله زمانی از آخرین به‌روزرسانی  
        const now = data.timestamp;
        const dt = (now - this.lastUpdateTime) / 1000; // تبدیل به ثانیه  

        // اگر اولین داده است یا dt منفی است، فقط زمان را به‌روز کنید  
        if (this.lastUpdateTime === 0 || dt <= 0) {
            this.lastUpdateTime = now;
            return;
        }

        // آماده‌سازی ورودی‌های کنترل برای فیلتر کالمن  
        let controlInputs = { a_norm: 0, omega: 0 };

        // بروزرسانی سرعت زاویه‌ای از ژیروسکوپ  
        if (data.type === 'gyroscope') {
            // در اینجا ما از سرعت زاویه‌ای حول محور z (alpha) استفاده می‌کنیم  
            controlInputs.omega = data.data.alphaRad || 0;
        }

        // بروزرسانی فعالیت/گام از شتاب‌سنج  
        if (data.type === 'accelerometer' && data.stepDetected) {
            controlInputs.a_norm = 1; // گام تشخیص داده شده  
        }

        // پیش‌بینی موقعیت با فیلتر کالمن  
        this.kalmanFilter.predict(controlInputs, now);

        // به‌روزرسانی موقعیت نسبی فعلی از فیلتر کالمن  
        const kalmanState = this.kalmanFilter.getState();
        this.currentPosition = {
            x: kalmanState.x,
            y: kalmanState.y,
            theta: kalmanState.theta
        };

        // اگر نقطه مرجع تنظیم شده است، موقعیت جغرافیایی فعلی را محاسبه کنید  
        let currentGeoPosition = null;
        if (this.referencePosition) {
            currentGeoPosition = this._calculateNewLatLng(
                this.referencePosition.lat,
                this.referencePosition.lng,
                this.currentPosition.x,
                this.currentPosition.y
            );

            // افزودن به مسیر اگر فاصله کافی از آخرین نقطه دارد  
            if (this.path.length === 0 || (
                this._calculateDistance(
                    this.path[this.path.length - 1].x,
                    this.path[this.path.length - 1].y,
                    this.currentPosition.x,
                    this.currentPosition.y
                ) > 0.5 && // حداقل 0.5 متر فاصله  
                now - this.path[this.path.length - 1].timestamp > 500 // حداقل 500 میلی‌ثانیه فاصله زمانی  
            )) {
                this.path.push({
                    x: this.currentPosition.x,
                    y: this.currentPosition.y,
                    timestamp: now
                });

                this.geoPath.push({
                    lat: currentGeoPosition.lat,
                    lng: currentGeoPosition.lng,
                    timestamp: now
                });
            }
        }

        // به‌روزرسانی زمان آخرین پردازش  
        this.lastUpdateTime = now;

        // اطلاع‌رسانی به لیستنرها (فقط اگر تغییر قابل توجهی رخ داده باشد یا اندازه‌گیری ورودی داشته باشیم)  
        if (data.type === 'accelerometer' && data.stepDetected) {
            this._notify({
                type: 'positionUpdated',
                currentPosition: this.currentPosition,
                geoPosition: currentGeoPosition,
                kalmanState: kalmanState,
                path: this.path,
                geoPath: this.geoPath,
                source: 'imu'
            });
        } else if (data.type === 'orientation') {
            this._notify({
                type: 'orientationUpdated',
                currentPosition: this.currentPosition,
                geoPosition: currentGeoPosition,
                kalmanState: kalmanState,
                source: 'imu'
            });
        }
    }

    /**  
       /**  
     * اطلاع‌رسانی به لیستنرها  
     * @param {Object} data داده‌های اطلاع‌رسانی  
     * @private  
     */
    _notify(data) {
        // افزودن isActive و isCalibrating به همه اطلاع‌رسانی‌ها  
        const eventData = {
            ...data,
            isActive: this.isActive,
            isCalibrating: this.isCalibrating
        };

        // صدا زدن همه لیستنرها  
        this._listeners.forEach(listener => {
            try {
                listener(eventData);
            } catch (error) {
                console.error('Error in Dead Reckoning listener:', error);
            }
        });
    }

    /**  
     * ثبت داده‌های سنسور در لاگ  
     * @param {string} sensorType نوع سنسور  
     * @param {Object} data داده‌های سنسور  
     * @param {number} timestamp زمان دریافت داده  
     * @private  
     */
    _logSensorData(sensorType, data, timestamp) {
        // محدود کردن حجم لاگ برای جلوگیری از مصرف زیاد حافظه  
        const maxLogSize = 1000; // حداکثر تعداد رکوردها در لاگ  

        if (this._log.timestamp.length >= maxLogSize) {
            // حذف قدیمی‌ترین رکوردها  
            this._log.timestamp.shift();
            this._log.sensor.shift();
            this._log.data.shift();
            this._log.result.shift();
        }

        // افزودن رکورد جدید  
        this._log.timestamp.push(timestamp);
        this._log.sensor.push(sensorType);
        this._log.data.push(JSON.parse(JSON.stringify(data))); // کلون کردن داده برای جلوگیری از تغییرات بعدی  

        // ثبت نتایج (موقعیت فعلی، وضعیت کالمن و غیره)  
        const result = {
            position: this.currentPosition ? { ...this.currentPosition } : null,
            kalmanState: this.kalmanFilter ? this.kalmanFilter.getState() : null,
            stepCount: this.stepCount
        };
        this._log.result.push(result);
    }
}

// ایجاد سینگلتون  
const advancedDeadReckoningService = new AdvancedDeadReckoningService();
export default advancedDeadReckoningService;  ```   
   
## \src\services\api.js   
```javascript   
```   
   
## \src\services\auth.js   
```javascript   
```   
   
## \src\services\DeadReckoningService.js   
```javascript   
// src/services/DeadReckoningService.js  

// تابع برای محاسبه انحراف مغناطیسی بر اساس موقعیت جغرافیایی  
function getMagneticDeclination(latitude, longitude) {  
    // این یک مدل ساده‌سازی شده است. برای دقت بیشتر از API یا کتابخانه‌های تخصصی استفاده کنید  
    // برای مثال، می‌توانید از یک سرویس API خارجی یا یک کتابخانه محاسبه استفاده کنید.  
    // اینجا فقط یک مقدار ثابت برای مثال استفاده می‌شود.  
    return 4.5 * Math.PI / 180; // مقدار تقریبی برای تهران  
  }  
  
  // تابع برای تبدیل مختصات جغرافیایی (Lat/Lng) به مختصات محلی (x, y در متر)  
  function geodeticToLocal(lat, lng, refLat, refLng) {  
    const earthRadius = 6378137; // شعاع زمین در متر  
  
    const deltaLng = (lng - refLng) * Math.PI / 180;  
    const deltaLat = (lat - refLat) * Math.PI / 180;  
  
    const x = earthRadius * deltaLng * Math.cos(refLat * Math.PI / 180);  
    const y = earthRadius * deltaLat;  
  
    return { x, y };  
  }  
  
  // تابع برای تبدیل مختصات محلی (x, y در متر) به مختصات جغرافیایی (Lat/Lng)  
  function localToGeodetic(x, y, refLat, refLng) {  
    const earthRadius = 6378137; // شعاع زمین در متر  
  
    const deltaLat = y / earthRadius;  
    const deltaLng = x / (earthRadius * Math.cos(refLat * Math.PI / 180));  
  
    const newLat = refLat + deltaLat * 180 / Math.PI;  
    const newLng = refLng + deltaLng * 180 / Math.PI;  
  
    return { lat: newLat, lng: newLng };  
  }  
  
  
  class DeadReckoningService {  
    constructor() {  
      this.isActive = false;  
      this.isCalibrating = false;  
      this.calibrationSamples = 0;  
      this.calibrationMaxSamples = 300; // تعداد نمونه بیشتر برای کالیبراسیون دقیق‌تر  
      this.gyroBias = { x: 0, y: 0, z: 0 }; // خطای ژیروسکوپ (رادیان بر ثانیه)  
      this.accelerometerBias = { x: 0, y: 0, z: 0 }; // خطای شتاب‌سنج (متر بر ثانیه مربع)  
      
      this.stepCount = 0;  
      this.strideLength = 0.75; // طول گام پیش‌فرض (متر)  
      
      this.referencePosition = null; // نقطه مرجع GPS (LatLng)  
      // حالت سیستم: [موقعیت X, موقعیت Y, جهت (Heading)] در سیستم مختصات محلی  
      this.state = [0, 0, 0];   
      this.path = []; // مسیر طی شده (نقاط نسبی)  
      this.geoPath = []; // مسیر طی شده (LatLng)  
      
      this.lastImuTimestamp = 0;  
      
      // پارامترهای Sensor Fusion (Complementary Filter پیشرفته)  
      // این پارامترها نیاز به تنظیم دقیق دارند  
      this.gyroWeight = 0.98; // وزن ژیروسکوپ برای جهت  
      this.magnetometerWeight = 1 - this.gyroWeight; // وزن قطب‌نما برای جهت  
      this.gpsWeight = 0.5; // وزن تصحیح GPS  
      
      this.magneticDeclination = 0; // انحراف مغناطیسی در رادیان  
      
      // تشخیص گام (روش پیشرفته‌تر - مثال ساده)  
      this.accelerometerBuffer = []; // بافر برای داده‌های شتاب‌سنج  
      this.bufferSize = 100; // اندازه بافر  
      this.lastStepTimestamp = 0;  
      this.minStepInterval = 0.3; // حداقل زمان بین دو گام (ثانیه)  
      this.peakThreshold = 2.0; // آستانه برای تشخیص قله در شتاب  
  
      this.listeners = [];  
    }  
  
    // متد برای اضافه کردن listener  
    addListener(listener) {  
      this.listeners.push(listener);  
      return () => {  
        this.listeners = this.listeners.filter(l => l !== listener);  
      };  
    }  
  
    // متد برای اطلاع‌رسانی به listeners  
    _notify(type, data = {}) {  
      const eventData = {  
        isActive: this.isActive,  
        isCalibrating: this.isCalibrating,  
        stepCount: this.stepCount,  
        // تبدیل state به فرمت قابل فهم برای UI  
        currentPosition: { x: this.state[0], y: this.state[1] },  
        path: this.path,  
        geoPath: this.geoPath,  
        filteredHeading: this.state[2], // جهت فیلتر شده (رادیان)  
        type,  
        ...data  
      };  
      this.listeners.forEach(listener => listener(eventData));  
    }  
  
    // شروع یا توقف ردیابی  
    toggle(initialLatLng = null) {  
      this.isActive = !this.isActive;  
      
      if (this.isActive) {  
        console.log('Dead Reckoning started.');  
        this.reset(); // بازنشانی در شروع  
  
        if (initialLatLng) {  
          this.referencePosition = initialLatLng;  
          
          // محاسبه انحراف مغناطیسی  
          this.magneticDeclination = getMagneticDeclination(  
            initialLatLng.lat,  
            initialLatLng.lng  
          );  
          console.log('Magnetic Declination:', this.magneticDeclination * 180 / Math.PI, 'degrees');  
        } else {  
          console.warn('No initial GPS position provided. Dead Reckoning will be relative.');  
        }  
        
        // شروع کالیبراسیون سنسورها  
        this.isCalibrating = true;  
        this.calibrationSamples = 0;  
        this.gyroBias = { x: 0, y: 0, z: 0 };  
        this.accelerometerBias = { x: 0, y: 0, z: 0 };  
        this._notify('start');  
      } else {  
        console.log('Dead Reckoning stopped.');  
        this.isCalibrating = false;  
        this._notify('stop');  
      }  
      
      return this.isActive;  
    }  
  
    // بازنشانی سیستم Dead Reckoning  
    reset() {  
      console.log('Dead Reckoning reset.');  
      this.stepCount = 0;  
      this.state = [0, 0, 0]; // [x, y, heading]  
      this.path = [];  
      this.geoPath = [];  
      this.lastImuTimestamp = 0;  
      this.lastStepTimestamp = 0;  
      this.accelerometerBuffer = [];  
      this.gyroBias = { x: 0, y: 0, z: 0 };  
      this.accelerometerBias = { x: 0, y: 0, z: 0 };  
      this.isCalibrating = false;  
      this.calibrationSamples = 0;  
      this._notify('reset');  
    }  
  
    // تنظیم طول گام  
    setStrideLength(length) {  
      this.strideLength = length;  
      console.log('Stride length set to:', this.strideLength);  
    }  
  
    // پردازش داده‌های IMU و انجام Sensor Fusion  
    processImuData(acceleration, rotationRate, orientation, timestamp) {  
      if (!this.isActive) return;  
  
      // محاسبه فاصله زمانی (به ثانیه)  
      const now = timestamp;  
      const dt = this.lastImuTimestamp === 0 ? 0 : (now - this.lastImuTimestamp) / 1000;  
      this.lastImuTimestamp = now;  
  
      // کالیبراسیون سنسورها  
      if (this.isCalibrating) {  
        if (this.calibrationSamples < this.calibrationMaxSamples) {  
          this.gyroBias.x += rotationRate.x / this.calibrationMaxSamples;  
          this.gyroBias.y += rotationRate.y / this.calibrationMaxSamples;  
          this.gyroBias.z += rotationRate.z / this.calibrationMaxSamples;  
          this.accelerometerBias.x += acceleration.x / this.calibrationMaxSamples;  
          this.accelerometerBias.y += acceleration.y / this.calibrationMaxSamples;  
          this.accelerometerBias.z += acceleration.z / this.calibrationMaxSamples;  
          this.calibrationSamples++;  
          
          if (this.calibrationSamples >= this.calibrationMaxSamples) {  
            this.isCalibrating = false;  
            console.log('Calibration complete. Gyro bias:', this.gyroBias, 'Accelerometer bias:', this.accelerometerBias);  
            this._notify('calibrationComplete');  
          }  
        }  
        return;   
      }  
  
      // --- بخش پیش‌بینی حالت (Prediction) ---  
      // استفاده از داده‌های ژیروسکوپ برای پیش‌بینی تغییر در جهت (Yaw)  
      const correctedGyroZ = rotationRate.z - this.gyroBias.z;  
      // به‌روزرسانی جهت با ژیروسکوپ  
      this.state[2] += correctedGyroZ * dt;   
  
      // نرمال‌سازی جهت بین 0 تا 2π  
      this.state[2] = this.state[2] % (2 * Math.PI);  
      if (this.state[2] < 0) this.state[2] += (2 * Math.PI);  
  
  
      // --- بخش به‌روزرسانی حالت (Update) ---  
      // استفاده از داده‌های جهت (قطب‌نما) برای تصحیح جهت  
      // orientation.alpha به درجه است و 0 شمال مغناطیسی است  
      let magneticHeading = orientation.alpha * Math.PI / 180; // تبدیل به رادیان  
  
      // تصحیح انحراف مغناطیسی  
      if (this.referencePosition) {  
         magneticHeading -= this.magneticDeclination;  
         magneticHeading = magneticHeading % (2 * Math.PI);  
         if (magneticHeading < 0) magneticHeading += (2 * Math.PI);  
      }  
  
      // اعمال Complementary Filter برای جهت  
      let headingError = magneticHeading - this.state[2];  
  
      // نرمال‌سازی خطا بین -π و π  
      if (headingError > Math.PI) headingError -= 2 * Math.PI;  
      if (headingError < -Math.PI) headingError += 2 * Math.PI;  
      
      // تصحیح جهت با وزن قطب‌نما  
      this.state[2] += this.magnetometerWeight * headingError;  
  
      // نرمال‌سازی نهایی جهت فیلتر شده  
      this.state[2] = this.state[2] % (2 * Math.PI);  
      if (this.state[2] < 0) this.state[2] += (2 * Math.PI);  
  
  
      // --- تشخیص گام پیشرفته‌تر (مثال ساده) ---  
      // اضافه کردن بزرگی شتاب (بدون گرانش) به بافر  
      const accelerationMagnitude = Math.sqrt(  
          acceleration.x * acceleration.x +   
          acceleration.y * acceleration.y +   
          acceleration.z * acceleration.z  
      );  
      this.accelerometerBuffer.push(accelerationMagnitude);  
      if (this.accelerometerBuffer.length > this.bufferSize) {  
          this.accelerometerBuffer.shift(); // حذف قدیمی‌ترین داده  
      }  
  
      // تشخیص قله در بافر برای تشخیص گام  
      const timeSinceLastStep = (now - this.lastStepTimestamp) / 1000;  
      let stepDetected = false;  
  
      if (this.accelerometerBuffer.length > 1 && timeSinceLastStep > this.minStepInterval) {  
          const lastValue = this.accelerometerBuffer[this.accelerometerBuffer.length - 1];  
          const previousValue = this.accelerometerBuffer[this.accelerometerBuffer.length - 2];  
          
          // تشخیص قله (نقطه فعلی بالاتر از نقطه قبلی و بالاتر از آستانه)  
          if (lastValue > previousValue && lastValue > this.peakThreshold) {  
              stepDetected = true;  
              this.lastStepTimestamp = now;  
          }  
      }  
  
  
      // --- به‌روزرسانی موقعیت با گام‌ها ---  
      if (stepDetected) {  
        // محاسبه تغییر موقعیت بر اساس طول گام و جهت فیلتر شده  
        // جهت 0 رادیان به سمت شمال جغرافیایی است (با تصحیح انحراف مغناطیسی)  
        // محور X به سمت شرق و محور Y به سمت شمال است در سیستم مختصات محلی  
        
        const dx = this.strideLength * Math.sin(this.state[2]); // تغییر در محور x  
        const dy = this.strideLength * Math.cos(this.state[2]); // تغییر در محور y  
        
        // به‌روزرسانی موقعیت نسبی در state  
        this.state[0] += dx;  
        this.state[1] += dy;  
        this.stepCount++;  
        
        // اضافه کردن به مسیر (نقطه نسبی)  
        this.path.push({ x: this.state[0], y: this.state[1] });  
  
        // تبدیل نقطه نسبی به LatLng (نیاز به نقطه مرجع GPS)  
        if (this.referencePosition) {  
           const newGeoPoint = localToGeodetic(  
              this.state[0],   
              this.state[1],   
              this.referencePosition.lat,   
              this.referencePosition.lng  
           );  
           this.geoPath.push(newGeoPoint);  
        }  
      }  
      
      // اطلاع‌رسانی مداوم برای به‌روزرسانی UI  
      this._notify('imuDataProcessed');  
    }  
  
    // متد برای تصحیح حالت با داده‌های GPS  
    correctWithGps(gpsLocation) {  
        if (!this.isActive || !this.referencePosition || !gpsLocation?.coords) return;  
  
        const gpsLat = gpsLocation.coords.lat;  
        const gpsLng = gpsLocation.coords.lng;  
  
        // تبدیل موقعیت GPS به مختصات محلی  
        const gpsLocal = geodeticToLocal(  
            gpsLat,   
            gpsLng,   
            this.referencePosition.lat,   
            this.referencePosition.lng  
        );  
  
        // محاسبه خطا بین موقعیت Dead Reckoning و GPS  
        const positionErrorX = gpsLocal.x - this.state[0];  
        const positionErrorY = gpsLocal.y - this.state[1];  
  
        // اعمال تصحیح با وزن GPS  
        this.state[0] += this.gpsWeight * positionErrorX;  
        this.state[1] += this.gpsWeight * positionErrorY;  
  
        // همچنین می‌توانید جهت را بر اساس تغییرات اخیر GPS تخمین زده و تصحیح کنید،  
        // اما این بخش پیچیده‌تر است و نیاز به تاریخچه موقعیت GPS دارد.  
        // برای سادگی در این مثال، فقط موقعیت را تصحیح می‌کنیم.  
  
        console.log(`Corrected with GPS. Error: (${positionErrorX.toFixed(2)}, ${positionErrorY.toFixed(2)}) meters`);  
        this._notify('gpsCorrected');  
    }  
  
  
    // خروجی گرفتن از مسیر به صورت JSON  
    exportLog() {  
      const logData = {  
        startTime: this.lastImuTimestamp > 0 ? new Date(this.lastImuTimestamp - this.lastFilterTimestamp * 1000).toISOString() : null,  
        endTime: this.lastImuTimestamp > 0 ? new Date(this.lastImuTimestamp).toISOString() : null,  
        stepCount: this.stepCount,  
        strideLength: this.strideLength,  
        referencePosition: this.referencePosition,  
        path: this.path, // مسیر نسبی  
        geoPath: this.geoPath // مسیر جغرافیایی  
      };  
      
      const jsonString = JSON.stringify(logData, null, 2);  
      const blob = new Blob([jsonString], { type: 'application/json' });  
      const url = URL.createObjectURL(blob);  
      const a = document.createElement('a');  
      a.href = url;  
      a.download = `dead_reckoning_log_${new Date().toISOString()}.json`;  
      document.body.appendChild(a);  
      a.click();  
      document.body.removeChild(a);  
      URL.revokeObjectURL(url);  
    }  
  }  
  
  // ایجاد یک نمونه واحد  
  const deadReckoningService = new DeadReckoningService();  
  export default deadReckoningService;  ```   
   
## \src\services\geolocation.js   
```javascript   
```   
   
## \src\services\KalmanFilter.js   
```javascript   
/**  
 * پیاده‌سازی Extended Kalman Filter برای تخمین موقعیت با ترکیب سنسورها  
 */  
export class KalmanFilter {  
    constructor(options = {}) {  
      // تنظیمات ابعاد فیلتر کالمن  
      this.stateSize = options.stateSize || 6;       // [x, y, theta, v, w, stride]  
      this.measurementSize = options.measurementSize || 3; // [x_gps, y_gps, heading]  
      this.controlSize = options.controlSize || 2;   // [a_norm, omega]  
      
      // بردار وضعیت - مقادیر پیش‌فرض  
      this.x = new Array(this.stateSize).fill(0);  
      
      // ماتریس کوواریانس وضعیت - شروع با مقادیر بزرگ در قطر اصلی  
      this.P = new Array(this.stateSize * this.stateSize).fill(0);  
      for (let i = 0; i < this.stateSize; i++) {  
        this.P[i * this.stateSize + i] = i < 2 ? 50.0 : 1.0; // عدم قطعیت بیشتر برای موقعیت اولیه  
      }  
      
      // ماتریس نویز فرآیند (Q) - میزان عدم قطعیت در مدل سیستم  
      this.Q = new Array(this.stateSize * this.stateSize).fill(0);  
      for (let i = 0; i < this.stateSize; i++) {  
        this.Q[i * this.stateSize + i] = 0.01; // مقادیر کوچکتر = اعتماد بیشتر به مدل  
      }  
      // عدم قطعیت بیشتر برای موقعیت و جهت  
      this.Q[0 * this.stateSize + 0] = 0.1;  // x  
      this.Q[1 * this.stateSize + 1] = 0.1;  // y  
      this.Q[2 * this.stateSize + 2] = 0.1;  // theta  
      
      // ماتریس نویز اندازه‌گیری (R) - میزان عدم قطعیت در داده‌های حسگر  
      this.R = new Array(this.measurementSize * this.measurementSize).fill(0);  
      this.R[0 * this.measurementSize + 0] = 5.0;  // x_gps (متر مربع)  
      this.R[1 * this.measurementSize + 1] = 5.0;  // y_gps (متر مربع)  
      this.R[2 * this.measurementSize + 2] = 0.1;  // heading (رادیان مربع)  
      
      // ضریب میرایی برای کاهش سرعت و چرخش در صورت نبود ورودی  
      this.timeDecay = 0.95; // 5% کاهش در هر گام زمانی  
      
      // متغیرهای داخلی  
      this.lastUpdateTime = 0;  
    }  
    
    /**  
     * مقداردهی اولیه فیلتر با وضعیت اولیه  
     * @param {Object} initialState وضعیت اولیه {x, y, theta, v, w, stride, timestamp}  
     */  
    initialize(initialState) {  
      // محافظت در برابر مقادیر نامعتبر  
      initialState = initialState || {};  
      
      // تنظیم وضعیت اولیه  
      this.x[0] = this._validateNumber(initialState.x, 0);  
      this.x[1] = this._validateNumber(initialState.y, 0);  
      this.x[2] = this._validateNumber(initialState.theta, 0);  
      this.x[3] = this._validateNumber(initialState.v, 0);  
      this.x[4] = this._validateNumber(initialState.w, 0);  
      this.x[5] = this._validateNumber(initialState.stride, 0.75);  
      
      // تنظیم زمان آخرین به‌روزرسانی  
      this.lastUpdateTime = initialState.timestamp || Date.now();  
      
      // بازنشانی ماتریس P (عدم قطعیت اولیه)  
      this.P = new Array(this.stateSize * this.stateSize).fill(0);  
      for (let i = 0; i < this.stateSize; i++) {  
        this.P[i * this.stateSize + i] = i < 2 ? 50.0 : 1.0;  
      }  
      
      console.log("Kalman filter initialized:", this.getState());  
    }  
    
    /**  
     * تنظیم طول گام (استراید)  
     * @param {number} strideLength طول گام (متر)  
     */  
    setStrideLength(strideLength) {  
      if (strideLength > 0) {  
        this.x[5] = strideLength;  
      }  
    }  
    
    /**  
     * مرحله پیش‌بینی فیلتر کالمن با استفاده از مدل سیستم  
     * @param {Object} u بردار ورودی کنترل {a_norm, omega}  
     * @param {number} timestamp زمان فعلی (میلی‌ثانیه)  
     */  
    predict(u = {}, timestamp = Date.now()) {  
      // محاسبه گام زمانی (به ثانیه)  
      const dt = Math.min(Math.max(0, (timestamp - this.lastUpdateTime) / 1000.0), 0.2);  
      
      // اگر گام زمانی خیلی کوچک است، از پیش‌بینی صرف‌نظر کنید یا زمان کوچکتر از 0.01 ثانیه است، فقط زمان را به‌روز کنید  
      if (dt < 0.01) {  
        this.lastUpdateTime = timestamp;  
        return;  
      }  
      
      // اگر ورودی کنترل وجود ندارد، با مقادیر پیش‌فرض کار کنید  
      const a_norm = u.a_norm || 0;  // تشخیص گام (0 یا 1)  
      const omega = u.omega || 0;    // سرعت زاویه‌ای (رادیان بر ثانیه)  
      
      // قابلیت ردیابی: اطمینان از عدم وجود مقادیر NaN  
      if (isNaN(a_norm) || isNaN(omega)) {  
        console.warn('مقادیر نامعتبر در ورودی کنترل فیلتر کالمن:', u);  
        this.lastUpdateTime = timestamp;  
        return;  
      }  
      
      // اعمال ضریب میرایی اگر ورودی شتاب وجود ندارد  
      // موقعیت v = سرعت خطی  
      let velocity = this.x[3];  
      if (a_norm <= 0) {  
        velocity *= this.timeDecay; // کاهش سرعت اگر گامی تشخیص داده نشده  
      } else {  
        // تشخیص گام - محاسبه سرعت با استفاده از طول گام  
        const strideLength = this.x[5];  
        velocity = strideLength / 0.5; // فرض: طول گام در 0.5 ثانیه پیموده می‌شود  
      }  
      
      // سرعت زاویه‌ای w  
      let angularVelocity = omega;  
      if (Math.abs(omega) < 0.001) {  
        // اگر ورودی چرخش نزدیک به صفر است، از مقدار فعلی با میرایی استفاده کنید  
        angularVelocity = this.x[4] * this.timeDecay;  
      }  
      
      // به‌روزرسانی بردار وضعیت (x) با استفاده از مدل حرکت غیرهولونومیک  
      // x_k+1 = x_k + v * dt * cos(theta)  
      // y_k+1 = y_k + v * dt * sin(theta)  
      // theta_k+1 = theta_k + w * dt  
      // v_k+1 = v (یا با میرایی)  
      // w_k+1 = w (یا با میرایی)  
      const theta = this._normalizeDegree(this.x[2]);  
      
      // به‌روزرسانی موقعیت  
      this.x[0] += velocity * dt * Math.cos(theta);  // x  
      this.x[1] += velocity * dt * Math.sin(theta);  // y  
      this.x[2] = this._normalizeDegree(theta + angularVelocity * dt);  // theta  
      this.x[3] = velocity;  // v  
      this.x[4] = angularVelocity;  // w  
      
      // به‌روزرسانی ماتریس P با استفاده از ژاکوبین تقریبی مدل سیستم  
      // برای سادگی، فقط Q را به P اضافه می‌کنیم  
      // P = F*P*F' + Q (در اینجا ساده‌سازی شده است)  
      for (let i = 0; i < this.stateSize; i++) {  
        for (let j = 0; j < this.stateSize; j++) {  
          this.P[i * this.stateSize + j] += this.Q[i * this.stateSize + j] * dt;  
        }  
      }  
      
      // یک افزایش کوچک در عدم قطعیت موقعیت و جهت با گذشت زمان  
      this.P[0 * this.stateSize + 0] += dt * velocity * 0.1; // افزایش عدم قطعیت در x  
      this.P[1 * this.stateSize + 1] += dt * velocity * 0.1; // افزایش عدم قطعیت در y  
      this.P[2 * this.stateSize + 2] += dt * Math.abs(angularVelocity) * 0.1; // افزایش عدم قطعیت در theta  
      
      // به‌روزرسانی زمان آخرین پیش‌بینی  
      this.lastUpdateTime = timestamp;  
    }  
    
    /**  
     * مرحله به‌روزرسانی فیلتر کالمن با استفاده از اندازه‌گیری‌ها  
     * @param {Object} z بردار اندازه‌گیری {x_gps, y_gps, heading}  
     * @param {Object} uncertainties عدم قطعیت‌های اندازه‌گیری {gps_accuracy, heading_accuracy}  
     */  
    update(z = {}, uncertainties = {}) {  
      // اگر هیچ داده اندازه‌گیری وجود ندارد، کاری انجام ندهید  
      if (Object.keys(z).length === 0) {  
        return;  
      }  
      
      // اطمینان از معتبر بودن مقادیر اندازه‌گیری  
      if ((z.x_gps !== undefined && isNaN(z.x_gps)) ||   
          (z.y_gps !== undefined && isNaN(z.y_gps)) ||   
          (z.heading !== undefined && isNaN(z.heading))) {  
        console.warn('مقادیر نامعتبر در اندازه‌گیری:', z);  
        return;  
      }  
      
      // تنظیم ماتریس نویز اندازه‌گیری (R) بر اساس دقت GPS  
      if (uncertainties.gps_accuracy !== undefined && !isNaN(uncertainties.gps_accuracy)) {  
        // مقدار بزرگتر دقت = نویز بیشتر = اعتماد کمتر به GPS  
        const gpsVariance = Math.pow(Math.max(1.0, uncertainties.gps_accuracy), 2);  
        this.R[0 * this.measurementSize + 0] = gpsVariance;  
        this.R[1 * this.measurementSize + 1] = gpsVariance;  
      }  
      
      if (uncertainties.heading_accuracy !== undefined && !isNaN(uncertainties.heading_accuracy)) {  
        this.R[2 * this.measurementSize + 2] = uncertainties.heading_accuracy;  
      }  
      
      // ساخت بردار اندازه‌گیری و ماتریس H (ژاکوبین اندازه‌گیری)  
      const measurement = [0, 0, 0]; // مقادیر پیش‌فرض  
      const H = new Array(this.measurementSize * this.stateSize).fill(0);  
      
      // بردار نوآوری (تفاوت بین اندازه‌گیری و پیش‌بینی)  
      const innovation = new Array(this.measurementSize).fill(0);  
      
      // بررسی موقعیت GPS  
      if (z.x_gps !== undefined && z.y_gps !== undefined) {  
        measurement[0] = z.x_gps;  
        measurement[1] = z.y_gps;  
        
        // ماتریس H برای GPS (ارتباط مستقیم با x و y)  
        H[0 * this.stateSize + 0] = 1; // H[0,0] = 1 (مشاهده x)  
        H[1 * this.stateSize + 1] = 1; // H[1,1] = 1 (مشاهده y)  
        
        // محاسبه نوآوری  
        innovation[0] = z.x_gps - this.x[0];  
        innovation[1] = z.y_gps - this.x[1];  
      }  
      
    // بررسی جهت (مگنتومتر/قطب‌نما)  
    if (z.heading !== undefined) {  
        measurement[2] = this._normalizeDegree(z.heading);  
        
        // ماتریس H برای جهت (ارتباط مستقیم با theta)  
        H[2 * this.stateSize + 2] = 1; // H[2,2] = 1 (مشاهده theta)  
        
        // محاسبه نوآوری با توجه به طبیعت دایره‌ای زاویه  
        let headingDiff = z.heading - this.x[2];  
        // نرمال‌سازی تفاوت به محدوده [-pi, pi]  
        while (headingDiff > Math.PI) headingDiff -= 2 * Math.PI;  
        while (headingDiff < -Math.PI) headingDiff += 2 * Math.PI;  
        innovation[2] = headingDiff;  
      }  
      
      // محاسبه S = H*P*H' + R (ماتریس کوواریانس نوآوری)  
      const S = new Array(this.measurementSize * this.measurementSize).fill(0);  
      for (let i = 0; i < this.measurementSize; i++) {  
        for (let j = 0; j < this.measurementSize; j++) {  
          // مقدار اولیه از R  
          S[i * this.measurementSize + j] = this.R[i * this.measurementSize + j];  
          
          // اضافه کردن H*P*H'  
          for (let k = 0; k < this.stateSize; k++) {  
            for (let l = 0; l < this.stateSize; l++) {  
              S[i * this.measurementSize + j] += H[i * this.stateSize + k] *   
                                              this.P[k * this.stateSize + l] *   
                                              H[j * this.stateSize + l];  
            }  
          }  
        }  
      }  
      
      // محاسبه K = P*H'*S^(-1) (بهره کالمن)  
      // برای سادگی، محاسبه S^(-1) را به صورت عناصر قطری انجام می‌دهیم  
      const K = new Array(this.stateSize * this.measurementSize).fill(0);  
      for (let i = 0; i < this.stateSize; i++) {  
        for (let j = 0; j < this.measurementSize; j++) {  
          for (let k = 0; k < this.stateSize; k++) {  
            // در این ساده‌سازی، فقط عناصر قطری S را در نظر می‌گیریم  
            if (S[j * this.measurementSize + j] > 0.0001) {  
              K[i * this.measurementSize + j] += this.P[i * this.stateSize + k] *   
                                              H[j * this.stateSize + k] /   
                                              S[j * this.measurementSize + j];  
            }  
          }  
        }  
      }  
      
      // به‌روزرسانی بردار وضعیت: x = x + K*innovation  
      for (let i = 0; i < this.stateSize; i++) {  
        for (let j = 0; j < this.measurementSize; j++) {  
          this.x[i] += K[i * this.measurementSize + j] * innovation[j];  
        }  
      }  
      
      // نرمال‌سازی زاویه theta به محدوده [0, 2*pi]  
      this.x[2] = this._normalizeDegree(this.x[2]);  
      
      // به‌روزرسانی ماتریس کوواریانس: P = (I - K*H)*P  
      const newP = new Array(this.stateSize * this.stateSize).fill(0);  
      for (let i = 0; i < this.stateSize; i++) {  
        for (let j = 0; j < this.stateSize; j++) {  
          // ابتدا I (ماتریس همانی)  
          newP[i * this.stateSize + j] = (i === j) ? 1 : 0;  
          
          // سپس کم کردن K*H  
          for (let k = 0; k < this.measurementSize; k++) {  
            newP[i * this.stateSize + j] -= K[i * this.measurementSize + k] *   
                                         H[k * this.stateSize + j];  
          }  
        }  
      }  
      
      // P = newP * P  
      const tempP = [...this.P];  
      for (let i = 0; i < this.stateSize; i++) {  
        for (let j = 0; j < this.stateSize; j++) {  
          this.P[i * this.stateSize + j] = 0;  
          for (let k = 0; k < this.stateSize; k++) {  
            this.P[i * this.stateSize + j] += newP[i * this.stateSize + k] *   
                                           tempP[k * this.stateSize + j];  
          }  
        }  
      }  
    }  
    
    /**  
     * دریافت وضعیت فعلی فیلتر کالمن  
     * @returns {Object} وضعیت فعلی {x, y, theta, v, w, stride, timestamp}  
     */  
    getState() {  
      // اطمینان از معتبر بودن همه مقادیر  
      return {  
        x: this._validateNumber(this.x[0], 0),  
        y: this._validateNumber(this.x[1], 0),  
        theta: this._validateNumber(this.x[2], 0),  
        v: this._validateNumber(this.x[3], 0),  
        w: this._validateNumber(this.x[4], 0),  
        stride: this._validateNumber(this.x[5], 0.75),  
        timestamp: this.lastUpdateTime  
      };  
    }  
    
    /**  
     * نرمال‌سازی زاویه به محدوده [0, 2*pi]  
     * @param {number} angle زاویه (رادیان)  
     * @returns {number} زاویه نرمال‌شده  
     */  
    _normalizeDegree(angle) {  
      if (isNaN(angle)) return 0;  
      
      // نرمال‌سازی به محدوده [0, 2*pi]  
      while (angle < 0) angle += 2 * Math.PI;  
      while (angle >= 2 * Math.PI) angle -= 2 * Math.PI;  
      
      return angle;  
    }  
    
    /**  
     * تضمین یک مقدار عددی معتبر  
     * @param {number} value مقدار ورودی  
     * @param {number} defaultValue مقدار پیش‌فرض در صورت نامعتبر بودن  
     * @returns {number} مقدار معتبر  
     */  
    _validateNumber(value, defaultValue = 0) {  
      return (value !== undefined && !isNaN(value)) ? value : defaultValue;  
    }  
  }  
  
  export default KalmanFilter;  ```   
   
## \src\services\LogStorageService.js   
```javascript   
// src/services/LogStorageService.js  
export class LogStorageService {  
  static DB_NAME = 'gps_tracker_db';  
  static GPS_LOGS_STORE = 'gps_logs';  
  static TRACK_LOGS_STORE = 'track_logs';  
  
  static async initDB() {  
    return new Promise((resolve, reject) => {  
      const request = indexedDB.open(this.DB_NAME, 1);  
      
      request.onupgradeneeded = (event) => {  
        const db = event.target.result;  
        
        // ایجاد فروشگاه برای لاگ‌های GPS  
        if (!db.objectStoreNames.contains(this.GPS_LOGS_STORE)) {  
          const gpsStore = db.createObjectStore(this.GPS_LOGS_STORE, { keyPath: 'id', autoIncrement: true });  
          gpsStore.createIndex('timestamp', 'timestamp', { unique: false });  
        }  
        
        // ایجاد فروشگاه برای لاگ‌های مسیر  
        if (!db.objectStoreNames.contains(this.TRACK_LOGS_STORE)) {  
          const trackStore = db.createObjectStore(this.TRACK_LOGS_STORE, { keyPath: 'id', autoIncrement: true });  
          trackStore.createIndex('startTime', 'startTime', { unique: false });  
        }  
      };  
      
      request.onsuccess = (event) => {  
        resolve(event.target.result);  
      };  
      
      request.onerror = (event) => {  
        console.error('خطا در باز کردن دیتابیس:', event.target.error);  
        reject(event.target.error);  
      };  
    });  
  }  
  
  static async saveGPSLog(location, isNoisy = false) {  
    try {  
      const db = await this.initDB();  
      return new Promise((resolve, reject) => {  
        const transaction = db.transaction([this.GPS_LOGS_STORE], 'readwrite');  
        const store = transaction.objectStore(this.GPS_LOGS_STORE);  
        
        const log = {  
          coords: location.coords,  
          timestamp: location.timestamp || Date.now(),  
          isNoisy,  
          deviceInfo: {  
            userAgent: navigator.userAgent,  
            platform: navigator.platform,  
            language: navigator.language,  
            connection: navigator.connection ? {  
              type: navigator.connection.type,  
              effectiveType: navigator.connection.effectiveType,  
              downlink: navigator.connection.downlink,  
              rtt: navigator.connection.rtt  
            } : null  
          },  
          logTime: new Date().toISOString()  
        };  
        
        const request = store.add(log);  
        
        request.onsuccess = () => {  
          resolve(request.result);  
        };  
        
        request.onerror = (event) => {  
          console.error('خطا در ذخیره لاگ GPS:', event.target.error);  
          reject(event.target.error);  
        };  
      });  
    } catch (err) {  
      console.error('خطا در ذخیره لاگ GPS:', err);  
      // فول‌بک به localStorage اگر IndexedDB کار نکرد  
      this.saveGPSLogToLocalStorage(location, isNoisy);  
    }  
  }  
  
  static saveGPSLogToLocalStorage(location, isNoisy = false) {  
    try {  
      const logs = JSON.parse(localStorage.getItem('gps_logs') || '[]');  
      logs.push({  
        coords: location.coords,  
        timestamp: location.timestamp || Date.now(),  
        isNoisy,  
        deviceInfo: {  
          userAgent: navigator.userAgent  
        },  
        logTime: new Date().toISOString()  
      });  
      
      // محدود کردن تعداد لاگ‌ها برای جلوگیری از پر شدن حافظه  
      if (logs.length > 10000) {  
        logs.splice(0, logs.length - 10000);  
      }  
      
      localStorage.setItem('gps_logs', JSON.stringify(logs));  
    } catch (err) {  
      console.error('خطا در ذخیره لاگ در localStorage:', err);  
    }  
  }  
  
  static async saveTrackLog(trackPoints, startTime, endTime, metadata = {}) {  
    try {  
      const db = await this.initDB();  
      return new Promise((resolve, reject) => {  
        const transaction = db.transaction([this.TRACK_LOGS_STORE], 'readwrite');  
        const store = transaction.objectStore(this.TRACK_LOGS_STORE);  
        
        const trackLog = {  
          points: trackPoints,  
          startTime,  
          endTime,  
          duration: endTime - startTime,  
          pointCount: trackPoints.length,  
          metadata: {  
            ...metadata,  
            deviceInfo: {  
              userAgent: navigator.userAgent,  
              platform: navigator.platform  
            }  
          },  
          createdAt: new Date().toISOString()  
        };  
        
        const request = store.add(trackLog);  
        
        request.onsuccess = () => {  
          resolve(request.result);  
        };  
        
        request.onerror = (event) => {  
          console.error('خطا در ذخیره لاگ مسیر:', event.target.error);  
          reject(event.target.error);  
        };  
      });  
    } catch (err) {  
      console.error('خطا در ذخیره لاگ مسیر:', err);  
      // فول‌بک به localStorage  
      this.saveTrackLogToLocalStorage(trackPoints, startTime, endTime, metadata);  
    }  
  }  
  
  static saveTrackLogToLocalStorage(trackPoints, startTime, endTime, metadata = {}) {  
    try {  
      const tracks = JSON.parse(localStorage.getItem('track_logs') || '[]');  
      tracks.push({  
        points: trackPoints,  
        startTime,  
        endTime,  
        duration: endTime - startTime,  
        pointCount: trackPoints.length,  
        metadata,  
        createdAt: new Date().toISOString()  
      });  
      
      // محدود کردن تعداد مسیرها  
      if (tracks.length > 100) {  
        tracks.splice(0, tracks.length - 100);  
      }  
      
      localStorage.setItem('track_logs', JSON.stringify(tracks));  
    } catch (err) {  
      console.error('خطا در ذخیره مسیر در localStorage:', err);  
    }  
  }  
  
  static async getGPSLogs(limit = 1000, offset = 0) {  
    try {  
      const db = await this.initDB();  
      return new Promise((resolve, reject) => {  
        const transaction = db.transaction([this.GPS_LOGS_STORE], 'readonly');  
        const store = transaction.objectStore(this.GPS_LOGS_STORE);  
        const index = store.index('timestamp');  
        
        const logs = [];  
        let cursorRequest = index.openCursor(null, 'prev'); // از جدیدترین به قدیمی‌ترین  
        let count = 0;  
        
        cursorRequest.onsuccess = (event) => {  
          const cursor = event.target.result;  
          if (cursor && count < offset + limit) {  
            if (count >= offset) {  
              logs.push(cursor.value);  
            }  
            count++;  
            cursor.continue();  
          } else {  
            resolve(logs);  
          }  
        };  
        
        cursorRequest.onerror = (event) => {  
          console.error('خطا در بازیابی لاگ‌های GPS:', event.target.error);  
          reject(event.target.error);  
        };  
      });  
    } catch (err) {  
      console.error('خطا در بازیابی لاگ‌های GPS:', err);  
      // فول‌بک به localStorage  
      const logs = JSON.parse(localStorage.getItem('gps_logs') || '[]');  
      return logs.slice(-Math.min(limit, logs.length));  
    }  
  }  
  
  static async getTrackLogs() {  
    try {  
      const db = await this.initDB();  
      return new Promise((resolve, reject) => {  
        const transaction = db.transaction([this.TRACK_LOGS_STORE], 'readonly');  
        const store = transaction.objectStore(this.TRACK_LOGS_STORE);  
        const index = store.index('startTime');  
        
        const request = index.getAll();  
        
        request.onsuccess = () => {  
          resolve(request.result);  
        };  
        
        request.onerror = (event) => {  
          console.error('خطا در بازیابی لاگ‌های مسیر:', event.target.error);  
          reject(event.target.error);  
        };  
      });  
    } catch (err) {  
      console.error('خطا در بازیابی لاگ‌های مسیر:', err);  
      // فول‌بک به localStorage  
      return JSON.parse(localStorage.getItem('track_logs') || '[]');  
    }  
  }  
  
  static async clearGPSLogs() {  
    try {  
      const db = await this.initDB();  
      return new Promise((resolve, reject) => {  
        const transaction = db.transaction([this.GPS_LOGS_STORE], 'readwrite');  
        const store = transaction.objectStore(this.GPS_LOGS_STORE);  
        
        const request = store.clear();  
        
        request.onsuccess = () => {  
          resolve(true);  
        };  
        
        request.onerror = (event) => {  
          console.error('خطا در پاک کردن لاگ‌های GPS:', event.target.error);  
          reject(event.target.error);  
        };  
      });  
    } catch (err) {  
      console.error('خطا در پاک کردن لاگ‌های GPS:', err);  
      localStorage.removeItem('gps_logs');  
      return true;  
    }  
  }  
  
  static async clearTrackLogs() {  
    try {  
      const db = await this.initDB();  
      return new Promise((resolve, reject) => {  
        const transaction = db.transaction([this.TRACK_LOGS_STORE], 'readwrite');  
        const store = transaction.objectStore(this.TRACK_LOGS_STORE);  
        
        const request = store.clear();  
        
        request.onsuccess = () => {  
          resolve(true);  
        };  
        
        request.onerror = (event) => {  
          console.error('خطا در پاک کردن لاگ‌های مسیر:', event.target.error);  
          reject(event.target.error);  
        };  
      });  
    } catch (err) {  
      console.error('خطا در پاک کردن لاگ‌های مسیر:', err);  
      localStorage.removeItem('track_logs');  
      return true;  
    }  
  }  
  
  static async exportGPSLogsAsJSON() {  
    const logs = await this.getGPSLogs(100000); // حداکثر 100،000 لاگ  
    return JSON.stringify(logs, null, 2);  
  }  
  
  static async exportGPSLogsAsCSV() {  
    const logs = await this.getGPSLogs(100000);  
    
    if (logs.length === 0) {  
      return 'هیچ لاگی یافت نشد';  
    }  
    
    // ایجاد هدرهای CSV  
    let csv = 'timestamp,latitude,longitude,accuracy,altitude,heading,speed,isNoisy\n';  
    
    // اضافه کردن داده‌ها  
    logs.forEach(log => {  
      const timestamp = new Date(log.timestamp).toISOString();  
      const lat = log.coords.lat || '';  
      const lng = log.coords.lng || '';  
      const accuracy = log.coords.accuracy || '';  
      const altitude = log.coords.altitude || '';  
      const heading = log.coords.heading || '';  
      const speed = log.coords.speed || '';  
      const isNoisy = log.isNoisy ? 'true' : 'false';  
      
      csv += `${timestamp},${lat},${lng},${accuracy},${altitude},${heading},${speed},${isNoisy}\n`;  
    });  
    
    return csv;  
  }  
  
  static async exportTrackLogsAsGeoJSON() {  
    const tracks = await this.getTrackLogs();  
    
    const geoJSON = {  
      type: 'FeatureCollection',  
      features: []  
    };  
    
    tracks.forEach(track => {  
      const coordinates = track.points.map(point => [point.coords.lng, point.coords.lat]);  
      
      geoJSON.features.push({  
        type: 'Feature',  
        geometry: {  
          type: 'LineString',  
          coordinates  
        },  
        properties: {  
          startTime: track.startTime,  
          endTime: track.endTime,  
          duration: track.duration,  
          pointCount: track.pointCount,  
          createdAt: track.createdAt  
        }  
      });  
    });  
    
    return JSON.stringify(geoJSON, null, 2);  
  }  
  
    // تعداد لاگ‌های ذخیره شده  
  static async getLogCounts() {  
    try {  
      const db = await this.initDB();  
      
      const gpsCountPromise = new Promise((resolve, reject) => {  
        const transaction = db.transaction([this.GPS_LOGS_STORE], 'readonly');  
        const store = transaction.objectStore(this.GPS_LOGS_STORE);  
        const countRequest = store.count();  
        
        countRequest.onsuccess = () => {  
          resolve(countRequest.result);  
        };  
        
        countRequest.onerror = (event) => {  
          reject(event.target.error);  
        };  
      });  
      
      const trackCountPromise = new Promise((resolve, reject) => {  
        const transaction = db.transaction([this.TRACK_LOGS_STORE], 'readonly');  
        const store = transaction.objectStore(this.TRACK_LOGS_STORE);  
        const countRequest = store.count();  
        
        countRequest.onsuccess = () => {  
          resolve(countRequest.result);  
        };  
        
        countRequest.onerror = (event) => {  
          reject(event.target.error);  
        };  
      });  
      
      const [gpsCount, trackCount] = await Promise.all([gpsCountPromise, trackCountPromise]);  
      
      return {  
        gpsLogs: gpsCount,  
        trackLogs: trackCount  
      };  
    } catch (err) {  
      console.error('خطا در دریافت تعداد لاگ‌ها:', err);  
      
      // فول‌بک به localStorage  
      const gpsLogs = JSON.parse(localStorage.getItem('gps_logs') || '[]');  
      const trackLogs = JSON.parse(localStorage.getItem('track_logs') || '[]');  
      
      return {  
        gpsLogs: gpsLogs.length,  
        trackLogs: trackLogs.length  
      };  
    }  
  }  
  
  // تخمین حجم داده‌های ذخیره شده (به بایت)  
  static async estimateStorageSize() {  
    try {  
      // نمونه‌برداری از 10 لاگ آخر برای تخمین میانگین سایز  
      const logs = await this.getGPSLogs(10);  
      const tracks = await this.getTrackLogs();  
      tracks.splice(10); // فقط 10 مورد آخر  
      
      const logsJson = JSON.stringify(logs);  
      const tracksJson = JSON.stringify(tracks);  
      
      const avgLogSize = logs.length > 0 ? logsJson.length / logs.length : 0;  
      const avgTrackSize = tracks.length > 0 ? tracksJson.length / tracks.length : 0;  
      
      const counts = await this.getLogCounts();  
      
      return {  
        gpsLogsSize: Math.round(avgLogSize * counts.gpsLogs),  
        trackLogsSize: Math.round(avgTrackSize * counts.trackLogs),  
        totalSize: Math.round(avgLogSize * counts.gpsLogs + avgTrackSize * counts.trackLogs)  
      };  
    } catch (err) {  
      console.error('خطا در تخمین حجم دیتابیس:', err);  
      return {  
        gpsLogsSize: 0,  
        trackLogsSize: 0,  
        totalSize: 0  
      };  
    }  
  }  
  
  // دانلود فایل  
  static downloadFile(content, filename, mimeType) {  
    const blob = new Blob([content], { type: mimeType });  
    const url = URL.createObjectURL(blob);  
    const a = document.createElement('a');  
    a.href = url;  
    a.download = filename;  
    document.body.appendChild(a);  
    a.click();  
    document.body.removeChild(a);  
    URL.revokeObjectURL(url);  
  }  
}  ```   
   
## \src\services\qrcode.js   
```javascript   
```   
   
## \src\services\SignalProcessor.js   
```javascript   
// src/services/SignalProcessor.js  

/**  
 * سرویس برای پردازش سیگنال سنسورها و تشخیص رویدادها  
 */  
class SignalProcessor {  
    constructor() {  
      // تشخیص گام  
      this.stepDetectorThreshold = 0.5; // آستانه تشخیص گام (بزرگی شتاب)  
      this.peakDetectionThreshold = 0.2; // حداقل فاصله زمانی بین گام‌ها (ثانیه)  
      this.lastPeakTimestamp = 0;  
      this.accelerationMagnitudeHistory = []; // تاریخچه بزرگی شتاب  
      this.historySize = 50; // اندازه تاریخچه برای تشخیص گام پیشرفته (اختیاری)  
    }  
  
    /**  
     * بازنشانی پردازشگر سیگنال  
     */  
    reset() {  
      this.lastPeakTimestamp = 0;  
      this.accelerationMagnitudeHistory = [];  
    }  
  
    /**  
     * تشخیص گام بر اساس داده‌های شتاب‌سنج  
     * @param {object} acceleration داده‌های شتاب‌سنج (بدون گرانش)  
     * @param {number} timestamp زمان دریافت داده  
     * @returns {boolean} true اگر گام تشخیص داده شود، false در غیر این صورت  
     */  
    detectStep(acceleration, timestamp) {  
      const magnitude = Math.sqrt(  
        acceleration.x * acceleration.x +   
        acceleration.y * acceleration.y +   
        acceleration.z * acceleration.z  
      );  
      
      // اضافه کردن به تاریخچه (اختیاری برای الگوریتم‌های پیشرفته)  
      this.accelerationMagnitudeHistory.push(magnitude);  
      if (this.accelerationMagnitudeHistory.length > this.historySize) {  
          this.accelerationMagnitudeHistory.shift();  
      }  
  
      const timeSinceLastPeak = (timestamp - this.lastPeakTimestamp) / 1000;  
  
      // الگوریتم ساده مبتنی بر آستانه  
      if (magnitude > this.stepDetectorThreshold && timeSinceLastPeak > this.peakDetectionThreshold) {  
        this.lastPeakTimestamp = timestamp;  
        return true;  
      }  
      
      // می‌توان الگوریتم‌های پیشرفته‌تری را در اینجا پیاده‌سازی کرد:  
      // - تحلیل فرکانس (FFT) برای یافتن فرکانس گام  
      // - تشخیص قله (Peak Detection) با استفاده از تاریخچه سیگنال  
      // - مدل‌های یادگیری ماشین برای تشخیص الگوی گام  
  
      return false;  
    }  
  
    // متدهای دیگر برای پردازش سیگنال (اختیاری)  
    // - محاسبه سرعت از انتگرال شتاب  
    // - تخمین جهت بر اساس میدان مغناطیسی و شتاب گرانش (نیاز به داده‌های خام مگنتومتر و شتاب با گرانش)  
  }  
  
  export default SignalProcessor;  ```   
   
## \src\services\storage.js   
```javascript   
```   
   
## \src\store\gpsStore.js   
```javascript   
import { create } from 'zustand';  
import { persist } from 'zustand/middleware';  

export const useGPSStore = create(  
  persist(  
    (set, get) => ({  
      currentLocation: null,  
      locationHistory: [],  
      savedLocations: [],  
      qrCodeLocations: [],  
      isTracking: false,  
      routeInfo: null,  
      
      // به‌روزرسانی موقعیت فعلی  
      updateCurrentLocation: (location) => set({ currentLocation: location }),  
      
      // افزودن موقعیت به تاریخچه  
      addLocationToHistory: (location) => set(state => ({  
        locationHistory: [...state.locationHistory, { ...location, id: Date.now() }]  
      })),  
      
      // ذخیره موقعیت  
      saveLocation: (location, name) => set(state => ({  
        savedLocations: [...state.savedLocations, {   
          ...location,   
          id: Date.now(),   
          name: name || `مکان ${state.savedLocations.length + 1}`   
        }]  
      })),  
      
      // ذخیره موقعیت QR Code  
      addQRCodeLocation: (qrData, location) => set(state => ({  
        qrCodeLocations: [...state.qrCodeLocations, {  
          id: Date.now(),  
          qrData,  
          location,  
          scannedAt: new Date().toISOString()  
        }]  
      })),  
      
      // شروع/توقف ردیابی  
      toggleTracking: () => set(state => ({ isTracking: !state.isTracking })),  
      
      // تنظیم اطلاعات مسیر  
      setRouteInfo: (routeInfo) => set({ routeInfo }),  
      
      // پاک‌کردن تاریخچه موقعیت  
      clearLocationHistory: () => set({ locationHistory: [] }),  
      
      // حذف یک موقعیت ذخیره‌شده  
      deleteSavedLocation: (id) => set(state => ({  
        savedLocations: state.savedLocations.filter(loc => loc.id !== id)  
      })),  
    }),  
    {  
      name: 'gps-storage',  
      version: 1,  
    }  
  )  
);  ```   
   
## \src\store\settingsStore.js   
```javascript   
```   
   
## \src\store\userStore.js   
```javascript   
```   
   
## \src\styles\DeadReckoning.css   
```javascript   
.dr-controls {  
  position: absolute;  
  bottom: 140px; /* بالاتر از کنترل‌های اصلی */  
  right: 10px;  
  z-index: 1000;  
  display: flex;  
  flex-direction: column;  
  gap: 8px;  
  direction: rtl;  
}  

.dr-toggle-button,  
.dr-calibrate-button,  
.dr-export-button {  
  display: flex;  
  align-items: center;  
  justify-content: center;  
  gap: 8px;  
  padding: 8px 12px;  
  border-radius: 8px;  
  background-color: #fff;  
  color: #333;  
  border: none;  
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);  
  font-family: inherit;  
  font-size: 0.9rem;  
  cursor: pointer;  
}  

.dr-toggle-button.active {  
  background-color: #4CAF50;  
  color: white;  
}  

.dr-calibrate-button {  
  background-color: #2196F3;  
  color: white;  
}  

.dr-export-button {  
  background-color: #FF9800;  
  color: white;  
}  

.dr-controls button:disabled {  
  opacity: 0.5;  
  cursor: not-allowed;  
}  

.step-counter {  
  display: flex;  
  align-items: center;  
  gap: 5px;  
  font-size: 0.85rem;  
  color: #333;  
}  

/* استایل برای مسیر Dead Reckoning روی نقشه */  
.dead-reckoning-path {  
  stroke: #4CAF50;  
  stroke-width: 4;  
  stroke-dasharray: 5, 5;  
  fill: none;  
  opacity: 0.8;  
}  ```   
   
## \src\utils\constants.js   
```javascript   
```   
   
## \src\utils\gpsFilter.js   
```javascript   
// src/utils/gpsFilter.js  
// فاصله هاوِرساین بین دو نقطه جغرافیایی (به متر)  
const calculateDistance = (lat1, lon1, lat2, lon2) => {  
  const R = 6371e3; // شعاع زمین به متر  
  const φ1 = lat1 * Math.PI / 180;  
  const φ2 = lat2 * Math.PI / 180;  
  const Δφ = (lat2 - lat1) * Math.PI / 180;  
  const Δλ = (lon2 - lon1) * Math.PI / 180;  

  const a = Math.sin(Δφ / 2) * Math.sin(Δφ / 2) +  
          Math.cos(φ1) * Math.cos(φ2) *  
          Math.sin(Δλ / 2) * Math.sin(Δλ / 2);  
  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));  
  return R * c;  
};  

export const isValidGPSReading = (current, previous) => {  
  if (!previous || !current) return true;  
  
  // بررسی وجود مختصات معتبر  
  if (!previous.coords || !current.coords ||  
      !previous.coords.lat || !previous.coords.lng ||  
      !current.coords.lat || !current.coords.lng) {  
    console.log('مختصات ناقص یا نامعتبر');  
    return true; // فرض بر معتبر بودن در صورت نامشخص بودن  
  }  
  
  // محاسبه فاصله بین دو نقطه  
  const distance = calculateDistance(  
    previous.coords.lat, previous.coords.lng,  
    current.coords.lat, current.coords.lng  
  );  
  
  // محاسبه زمان (اگر زمان نامعتبر باشد، فرض بر معتبر بودن داده)  
  if (!previous.timestamp || !current.timestamp) return true;  
  
  const timeDiff = (current.timestamp - previous.timestamp) / 1000;  
  if (timeDiff <= 0) return true; // زمان نامعتبر است  
  
  // سرعت (متر بر ثانیه)  
  const speed = distance / timeDiff;  
  
  console.log(`فاصله: ${distance.toFixed(2)}m, زمان: ${timeDiff.toFixed(2)}s, سرعت: ${speed.toFixed(2)}m/s`);  
  
  // اگر سرعت بیش از 5 متر بر ثانیه باشد، غیر معقول است  
  if (speed > 5) {  
    console.log('سرعت غیرمعقول - داده فیلتر شد');  
    return false;  
  }  
  
  // اگر فاصله بیش از 50 متر باشد و زمان کمتر از 5 ثانیه  
  if (distance > 50 && timeDiff < 5) {  
    console.log('پرش موقعیت - داده فیلتر شد');  
    return false;  
  }  
  
  return true;  
};  

// صدور تابع محاسبه فاصله برای استفاده در جاهای دیگر  
export { calculateDistance };  ```   
   
## \src\utils\helpers.js   
```javascript   
```   
   
## \src\utils\HighPassFilter.js   
```javascript   
// src/services/utils/HighPassFilter.js  
/**  
 * فیلتر بالاگذر برای حذف تغییرات آهسته (مانند شتاب جاذبه)  
 */  
export class HighPassFilter {  
    /**  
     * @param {number} alpha ضریب فیلتر (0-1). مقادیر بزرگتر فیلترینگ بیشتری اعمال می‌کنند.  
     */  
    constructor(alpha = 0.8) {  
      this.alpha = alpha;  
      this.lastValues = {};  
      this.lastFilteredValues = {};  
    }  
    
    /**  
     * فیلتر کردن یک مقدار  
     * @param {number} value مقدار جدید  
     * @param {string} key کلید برای ذخیره مقادیر آخر (برای کانال‌های مختلف)  
     * @returns {number} مقدار فیلتر شده  
     */  
    filter(value, key = 'default') {  
      // اگر اولین مقدار است، آن را به عنوان مقدار آخر ذخیره کنید  
      if (this.lastValues[key] === undefined) {  
        this.lastValues[key] = value;  
        this.lastFilteredValues[key] = 0;  
        return 0;  
      }  
      
      // اعمال فیلتر بالاگذر: y[n] = α·(y[n-1] + x[n] - x[n-1])  
      const filteredValue = this.alpha * (  
        this.lastFilteredValues[key] + value - this.lastValues[key]  
      );  
      
      // به‌روزرسانی مقادیر آخر  
      this.lastValues[key] = value;  
      this.lastFilteredValues[key] = filteredValue;  
      
      return filteredValue;  
    }  
    
    /**  
     * بازنشانی فیلتر  
     */  
    reset() {  
      this.lastValues = {};  
      this.lastFilteredValues = {};  
    }  
  }  ```   
   
## \src\utils\KalmanFilter.js   
```javascript   
// src/utils/KalmanFilter.js  
export class KalmanFilter {  
  constructor() {  
    this.Q = 0.01; // واریانس فرآیند  
    this.R = 0.1; // واریانس اندازه‌گیری  
    this.X = null; // حالت تخمینی  
    this.P = null; // واریانس خطای تخمین  
  }  

  init(lat, lng) {  
    this.X = [lat, lng, 0, 0]; // موقعیت و سرعت (lat, lng, v_lat, v_lng)  
    this.P = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]; // ماتریس کوواریانس 4x4  
  }  

  predict(dt) {  
    // ماتریس انتقال حالت  
    const F = [1, 0, dt, 0, 0, 1, 0, dt, 0, 0, 1, 0, 0, 0, 0, 1];  
    
    // تخمین حالت  
    const X_ = [  
      this.X[0] + dt * this.X[2],  
      this.X[1] + dt * this.X[3],  
      this.X[2],  
      this.X[3]  
    ];  
    
    // تخمین کوواریانس  
    const P_ = multiplyMatrix(F, this.P);  
    
    // به‌روزرسانی  
    this.X = X_;  
    this.P = P_;  
    
    return { lat: X_[0], lng: X_[1] };  
  }  

  update(lat, lng) {  
    if (this.X === null) {  
      this.init(lat, lng);  
      return { lat, lng };  
    }  
    
    // اندازه‌گیری  
    const z = [lat, lng];  
    
    // به‌روزرسانی کالمن  
    const y = [z[0] - this.X[0], z[1] - this.X[1]]; // تفاوت اندازه‌گیری  
    
    // ماتریس بهره کالمن  
    const K = calculateKalmanGain(this.P, this.R);  
    
    // به‌روزرسانی حالت  
    this.X[0] += K[0] * y[0] + K[1] * y[1];  
    this.X[1] += K[2] * y[0] + K[3] * y[1];  
    this.X[2] += K[4] * y[0] + K[5] * y[1];  
    this.X[3] += K[6] * y[0] + K[7] * y[1];  
    
    // به‌روزرسانی کوواریانس  
    this.P = updateCovariance(this.P, K);  
    
    return { lat: this.X[0], lng: this.X[1] };  
  }  
}  

// توابع کمکی برای عملیات ماتریسی  
function multiplyMatrix(F, P) {  
  // پیاده‌سازی ضرب ماتریس  
}  

function calculateKalmanGain(P, R) {  
  // محاسبه بهره کالمن  
}  

function updateCovariance(P, K) {  
  // به‌روزرسانی کوواریانس  
}  ```   
   
## \src\utils\LowPassFilter.js   
```javascript   
// src/services/utils/LowPassFilter.js  
/**  
 * فیلتر پایین‌گذر برای حذف نویز فرکانس بالا  
 */  
export class LowPassFilter {  
    /**  
     * @param {number} alpha ضریب فیلتر (0-1). مقادیر کوچکتر فیلترینگ بیشتری اعمال می‌کنند.  
     */  
    constructor(alpha = 0.1) {  
      this.alpha = alpha;  
      this.lastValues = {};  
    }  
    
    /**  
     * فیلتر کردن یک مقدار  
     * @param {number} value مقدار جدید  
     * @param {string} key کلید برای ذخیره مقدار آخر (برای کانال‌های مختلف)  
     * @returns {number} مقدار فیلتر شده  
     */  
    filter(value, key = 'default') {  
      // اگر اولین مقدار است، آن را به عنوان مقدار آخر ذخیره کنید  
      if (this.lastValues[key] === undefined) {  
        this.lastValues[key] = value;  
        return value;  
      }  
      
      // اعمال فیلتر: y[n] = α·x[n] + (1-α)·y[n-1]  
      const filteredValue = this.alpha * value + (1 - this.alpha) * this.lastValues[key];  
      this.lastValues[key] = filteredValue;  
      
      return filteredValue;  
    }  
    
    /**  
     * بازنشانی فیلتر  
     */  
    reset() {  
      this.lastValues = {};  
    }  
  }  ```   
   
## \src\utils\PeakDetector.js   
```javascript   
// src/services/utils/PeakDetector.js  
/**  
 * کلاس تشخیص پیک برای تشخیص قله‌ها در سیگنال  
 * مفید برای تشخیص گام و حرکات تکراری  
 */  
export class PeakDetector {  
    /**  
     * @param {Object} options تنظیمات  
     * @param {number} options.threshold آستانه تشخیص پیک  
     * @param {number} options.minPeakDistance حداقل فاصله زمانی بین پیک‌ها (میلی‌ثانیه)  
     * @param {number} options.windowSize تعداد نمونه‌هایی که برای تشخیص پیک بررسی می‌شوند  
     */  
    constructor(options = {}) {  
      this.threshold = options.threshold || 1.0;  
      this.minPeakDistance = options.minPeakDistance || 500;  
      this.windowSize = options.windowSize || 10;  
      
      this.samples = [];  
      this.lastPeakTime = 0;  
    }  
    
    /**  
     * افزودن یک نمونه جدید و بررسی تشخیص پیک  
     * @param {number} value مقدار نمونه  
     * @param {number} timestamp زمان نمونه (میلی‌ثانیه)  
     * @returns {boolean} آیا پیک تشخیص داده شده است  
     */  
    addSample(value, timestamp) {  
      // افزودن نمونه جدید  
      this.samples.push({ value, timestamp });  
      
      // حفظ فقط چند نمونه آخر  
      if (this.samples.length > this.windowSize * 2) {  
        this.samples.shift();  
      }  
      
      // نیاز به حداقل چند نمونه برای تشخیص پیک  
      if (this.samples.length < this.windowSize) {  
        return false;  
      }  
      
      // بررسی فاصله زمانی از آخرین پیک  
      if (timestamp - this.lastPeakTime < this.minPeakDistance) {  
        return false;  
      }  
      
      // بررسی اینکه آیا نمونه‌های میانی بزرگتر از آستانه هستند و پیک محسوب می‌شوند  
      const midIndex = Math.floor(this.samples.length / 2);  
      const midSample = this.samples[midIndex];  
      
      // شرایط تشخیص پیک:  
      // 1. مقدار باید بزرگتر از آستانه باشد  
      if (midSample.value < this.threshold) {  
        return false;  
      }  
      
      // 2. مقدار باید بزرگتر از همه نمونه‌های قبلی باشد  
      for (let i = 0; i < midIndex; i++) {  
        if (this.samples[i].value >= midSample.value) {  
          return false;  
        }  
      }  
      
      // 3. مقدار باید بزرگتر از همه نمونه‌های بعدی باشد  
      for (let i = midIndex + 1; i < this.samples.length; i++) {  
        if (this.samples[i].value >= midSample.value) {  
          return false;  
        }  
      }  
      
      // پیک تشخیص داده شد  
      this.lastPeakTime = timestamp;  
      return true;  
    }  
    
    /**  
     * بازنشانی تشخیص‌گر پیک  
     */  
    reset() {  
      this.samples = [];  
      this.lastPeakTime = 0;  
    }  
  }  ```   
   
## \src\utils\useGPSNoiseDetection.js   
```javascript   
// src/utils/useGPSNoiseDetection.js  
import { useState, useEffect } from 'react';  
import { calculateDistance } from './gpsFilter';  

// محاسبه زاویه بین دو نقطه (برای تشخیص تغییر جهت)  
const calculateBearing = (lat1, lon1, lat2, lon2) => {  
  const φ1 = lat1 * Math.PI / 180;  
  const φ2 = lat2 * Math.PI / 180;  
  const Δλ = (lon2 - lon1) * Math.PI / 180;  

  const y = Math.sin(Δλ) * Math.cos(φ2);  
  const x = Math.cos(φ1) * Math.sin(φ2) -  
          Math.sin(φ1) * Math.cos(φ2) * Math.cos(Δλ);  

  return Math.atan2(y, x) * 180 / Math.PI;  
};  

// تشخیص تغییر جهت ناگهانی  
const isSharpTurn = (bearing1, bearing2) => {  
  let diff = Math.abs(bearing2 - bearing1);  
  if (diff > 180) diff = 360 - diff;  
  return diff > 120; // تغییر بیش از 120 درجه  
};  

export const useGPSNoiseDetection = (locationHistory, currentLocation) => {  
  // وضعیت‌های مختلف  
  const [isJamming, setIsJamming] = useState(false);  
  const [isAccuracyLow, setIsAccuracyLow] = useState(false);  
  const [isSpeedUnrealistic, setIsSpeedUnrealistic] = useState(false);  
  const [isPositionJumping, setIsPositionJumping] = useState(false);  
  const [anomalyScore, setAnomalyScore] = useState(0); // امتیاز نویز بین 0 تا 100  
  
  // تنظیمات و آستانه‌ها  
  const UNREALISTIC_SPEED_THRESHOLD = 5; // متر بر ثانیه (18 کیلومتر بر ساعت)  
  const POSITION_JUMP_THRESHOLD = 50; // متر  
  const LOW_ACCURACY_THRESHOLD = 50; // متر  
  const MEASUREMENT_WINDOW = 5; // تعداد نقاط برای تحلیل  

  useEffect(() => {  
    // بررسی وجود داده‌های کافی برای تحلیل  
    if (!locationHistory || !Array.isArray(locationHistory) || locationHistory.length < 1 || !currentLocation) {  
      console.log('داده‌های کافی برای تحلیل وجود ندارد', {   
        hasHistory: !!locationHistory,   
        historyLength: locationHistory?.length || 0,   
        hasCurrent: !!currentLocation   
      });  
      return;  
    }  

    // نمایش اطلاعات اولیه برای دیباگ  
    console.log('تحلیل کیفیت GPS با', locationHistory.length, 'نقطه در تاریخچه');  
    
    // بررسی آخرین نقطه با نقطه قبلی  
    let jumpDetected = false;  
    let unrealisticSpeedDetected = false;  
    let lowAccuracyDetected = false;  
    let score = 0;  

    // بررسی دقت موقعیت فعلی  
    if (currentLocation.coords && currentLocation.coords.accuracy) {  
      if (currentLocation.coords.accuracy > LOW_ACCURACY_THRESHOLD) {  
        lowAccuracyDetected = true;  
        score += 20;  
        console.log(`دقت پایین: ${currentLocation.coords.accuracy.toFixed(2)} متر`);  
      }  
    }  

    // اگر بیش از یک نقطه در تاریخچه داریم، می‌توانیم سرعت و پرش را محاسبه کنیم  
    if (locationHistory.length > 0) {  
      const previous = locationHistory[locationHistory.length - 1];  
      
      if (previous && previous.coords && currentLocation && currentLocation.coords) {  
        // بررسی وجود مختصات معتبر  
        if (previous.coords.lat && previous.coords.lng &&   
            currentLocation.coords.lat && currentLocation.coords.lng) {  
          
          // محاسبه فاصله  
          const distance = calculateDistance(  
            previous.coords.lat, previous.coords.lng,  
            currentLocation.coords.lat, currentLocation.coords.lng  
          );  

          // محاسبه زمان (به ثانیه)  
          const timeDiff = (currentLocation.timestamp - previous.timestamp) / 1000;  
          
          // فقط اگر زمان معتبر است محاسبه کنیم  
          if (timeDiff > 0) {  
            // محاسبه سرعت (متر بر ثانیه)  
            const speed = distance / timeDiff;  
            
            console.log(`فاصله: ${distance.toFixed(2)}m, زمان: ${timeDiff.toFixed(2)}s, سرعت: ${speed.toFixed(2)}m/s`);  

            // بررسی پرش موقعیت  
            if (distance > POSITION_JUMP_THRESHOLD && timeDiff < 5) {  
              jumpDetected = true;  
              score += 30;  
              console.log('پرش موقعیت شناسایی شد');  
            }  

            // بررسی سرعت غیرعادی  
            if (speed > UNREALISTIC_SPEED_THRESHOLD) {  
              unrealisticSpeedDetected = true;  
              score += 30;  
              console.log('سرعت غیرمعقول شناسایی شد');  
            }  

            // محاسبه جهت برای تشخیص تغییر ناگهانی (اگر بیشتر از 2 نقطه داریم)  
            if (locationHistory.length > 1) {  
              const beforePrevious = locationHistory[locationHistory.length - 2];  
              if (beforePrevious && beforePrevious.coords &&   
                  beforePrevious.coords.lat && beforePrevious.coords.lng) {  
                
                const previousBearing = calculateBearing(  
                  beforePrevious.coords.lat, beforePrevious.coords.lng,  
                  previous.coords.lat, previous.coords.lng  
                );  
                
                const currentBearing = calculateBearing(  
                  previous.coords.lat, previous.coords.lng,  
                  currentLocation.coords.lat, currentLocation.coords.lng  
                );  
                
                if (isSharpTurn(previousBearing, currentBearing) && distance > 5) {  
                  score += 20;  
                  console.log('تغییر جهت ناگهانی شناسایی شد');  
                }  
              }  
            }  
          } else {  
            console.log('فاصله زمانی نامعتبر:', timeDiff);  
          }  
        } else {  
          console.log('مختصات ناقص در نقاط:', {   
            prevLat: previous.coords.lat,   
            prevLng: previous.coords.lng,  
            currLat: currentLocation.coords.lat,   
            currLng: currentLocation.coords.lng   
          });  
        }  
      } else {  
        console.log('ساختار داده نقاط ناقص است');  
      }  
    }  

    // محدود کردن امتیاز به حداکثر 100  
    score = Math.min(score, 100);  
    console.log('امتیاز نویز GPS:', score);  
    
    // به‌روزرسانی وضعیت‌ها  
    setIsPositionJumping(jumpDetected);  
    setIsSpeedUnrealistic(unrealisticSpeedDetected);  
    setIsAccuracyLow(lowAccuracyDetected);  
    
    // اگر امتیاز بالای 50 باشد، احتمالاً جمر است  
    setIsJamming(score > 50);  
    setAnomalyScore(score);  

  }, [locationHistory, currentLocation]);  

  return {  
    isJamming,  
    isAccuracyLow,  
    isSpeedUnrealistic,  
    isPositionJumping,  
    anomalyScore,  
    noiseLevel: anomalyScore < 20 ? 'کم' : anomalyScore < 50 ? 'متوسط' : 'زیاد'  
  };  
};  ```   
   
## \src\utils\validation.js   
```javascript   
```   
   
